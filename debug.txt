-- 1. Verifique se há colaborador para o auth.uid()
select id, empresa_id
from public.colaboradores
where id = auth.uid();

-- 2. Resolva a empresa via empresa_id
select e.id, e.codigo_empresa, e.nome
from public.empresas e
join public.colaboradores c on c.empresa_id = e.id
where c.id = auth.uid();

resposta:

ERROR:  42703: column "empresa_id" does not exist
LINE 2: select id, empresa_id
                   ^

-- 3. Há um usuário em public.usuarios com o mesmo id do Auth e com codigo_empresa?
select id, codigo_empresa from public.usuarios where id = auth.uid();

-- 4. Existem dados com esse codigo_empresa nas tabelas usadas pela UI?
select count(*) from public.mesas where codigo_empresa = (select e.codigo_empresa from public.empresas e join public.colaboradores c on c.empresa_id = e.id where c.id = auth.uid() limit 1);
select count(*) from public.comandas where codigo_empresa = (select e.codigo_empresa from public.empresas e join public.colaboradores c on c.empresa_id = e.id where c.id = auth.uid() limit 1);


resposta:

ERROR:  42703: column c.empresa_id does not exist
LINE 5: select count(*) from public.mesas where codigo_empresa = (select e.codigo_empresa from public.empresas e join public.colaboradores c on c.empresa_id = e.id where c.id = auth.uid() limit 1);
                                                                                                                                                ^