var Kae=Object.defineProperty;var Yae=(e,t,r)=>t in e?Kae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var aa=(e,t,r)=>(Yae(e,typeof t!="symbol"?t+"":t,r),r);function Xae(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jae(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var o9={exports:{}},WS={},s9={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb=Symbol.for("react.element"),Qae=Symbol.for("react.portal"),Zae=Symbol.for("react.fragment"),eie=Symbol.for("react.strict_mode"),tie=Symbol.for("react.profiler"),rie=Symbol.for("react.provider"),nie=Symbol.for("react.context"),aie=Symbol.for("react.forward_ref"),iie=Symbol.for("react.suspense"),oie=Symbol.for("react.memo"),sie=Symbol.for("react.lazy"),EM=Symbol.iterator;function lie(e){return e===null||typeof e!="object"?null:(e=EM&&e[EM]||e["@@iterator"],typeof e=="function"?e:null)}var l9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c9=Object.assign,u9={};function Dv(e,t,r){this.props=e,this.context=t,this.refs=u9,this.updater=r||l9}Dv.prototype.isReactComponent={};Dv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function d9(){}d9.prototype=Dv.prototype;function vT(e,t,r){this.props=e,this.context=t,this.refs=u9,this.updater=r||l9}var yT=vT.prototype=new d9;yT.constructor=vT;c9(yT,Dv.prototype);yT.isPureReactComponent=!0;var kM=Array.isArray,f9=Object.prototype.hasOwnProperty,xT={current:null},h9={key:!0,ref:!0,__self:!0,__source:!0};function m9(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)f9.call(t,n)&&!h9.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:jb,type:e,key:i,ref:o,props:a,_owner:xT.current}}function cie(e,t){return{$$typeof:jb,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bT(e){return typeof e=="object"&&e!==null&&e.$$typeof===jb}function uie(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var OM=/\/+/g;function CC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uie(""+e.key):t.toString(36)}function Kw(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case jb:case Qae:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+CC(o,0):n,kM(a)?(r="",e!=null&&(r=e.replace(OM,"$&/")+"/"),Kw(a,t,r,"",function(u){return u})):a!=null&&(bT(a)&&(a=cie(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(OM,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",kM(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+CC(i,l);o+=Kw(i,t,r,c,a)}else if(c=lie(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+CC(i,l++),o+=Kw(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function L1(e,t,r){if(e==null)return e;var n=[],a=0;return Kw(e,n,"","",function(i){return t.call(r,i,a++)}),n}function die(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bs={current:null},Yw={transition:null},fie={ReactCurrentDispatcher:bs,ReactCurrentBatchConfig:Yw,ReactCurrentOwner:xT};function p9(){throw Error("act(...) is not supported in production builds of React.")}Cn.Children={map:L1,forEach:function(e,t,r){L1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return L1(e,function(){t++}),t},toArray:function(e){return L1(e,function(t){return t})||[]},only:function(e){if(!bT(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Cn.Component=Dv;Cn.Fragment=Zae;Cn.Profiler=tie;Cn.PureComponent=vT;Cn.StrictMode=eie;Cn.Suspense=iie;Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fie;Cn.act=p9;Cn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=c9({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=xT.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)f9.call(t,c)&&!h9.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:jb,type:e.type,key:a,ref:i,props:n,_owner:o}};Cn.createContext=function(e){return e={$$typeof:nie,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rie,_context:e},e.Consumer=e};Cn.createElement=m9;Cn.createFactory=function(e){var t=m9.bind(null,e);return t.type=e,t};Cn.createRef=function(){return{current:null}};Cn.forwardRef=function(e){return{$$typeof:aie,render:e}};Cn.isValidElement=bT;Cn.lazy=function(e){return{$$typeof:sie,_payload:{_status:-1,_result:e},_init:die}};Cn.memo=function(e,t){return{$$typeof:oie,type:e,compare:t===void 0?null:t}};Cn.startTransition=function(e){var t=Yw.transition;Yw.transition={};try{e()}finally{Yw.transition=t}};Cn.unstable_act=p9;Cn.useCallback=function(e,t){return bs.current.useCallback(e,t)};Cn.useContext=function(e){return bs.current.useContext(e)};Cn.useDebugValue=function(){};Cn.useDeferredValue=function(e){return bs.current.useDeferredValue(e)};Cn.useEffect=function(e,t){return bs.current.useEffect(e,t)};Cn.useId=function(){return bs.current.useId()};Cn.useImperativeHandle=function(e,t,r){return bs.current.useImperativeHandle(e,t,r)};Cn.useInsertionEffect=function(e,t){return bs.current.useInsertionEffect(e,t)};Cn.useLayoutEffect=function(e,t){return bs.current.useLayoutEffect(e,t)};Cn.useMemo=function(e,t){return bs.current.useMemo(e,t)};Cn.useReducer=function(e,t,r){return bs.current.useReducer(e,t,r)};Cn.useRef=function(e){return bs.current.useRef(e)};Cn.useState=function(e){return bs.current.useState(e)};Cn.useSyncExternalStore=function(e,t,r){return bs.current.useSyncExternalStore(e,t,r)};Cn.useTransition=function(){return bs.current.useTransition()};Cn.version="18.3.1";s9.exports=Cn;var v=s9.exports;const le=zn(v),wT=Xae({__proto__:null,default:le},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hie=v,mie=Symbol.for("react.element"),pie=Symbol.for("react.fragment"),gie=Object.prototype.hasOwnProperty,vie=hie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yie={key:!0,ref:!0,__self:!0,__source:!0};function g9(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)gie.call(t,n)&&!yie.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:mie,type:e,key:i,ref:o,props:a,_owner:vie.current}}WS.Fragment=pie;WS.jsx=g9;WS.jsxs=g9;o9.exports=WS;var s=o9.exports,dP={},v9={exports:{}},Cl={},y9={exports:{}},x9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,G){var me=$.length;$.push(G);e:for(;0<me;){var de=me-1>>>1,L=$[de];if(0<a(L,G))$[de]=G,$[me]=L,me=de;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var G=$[0],me=$.pop();if(me!==G){$[0]=me;e:for(var de=0,L=$.length,B=L>>>1;de<B;){var X=2*(de+1)-1,q=$[X],Y=X+1,Z=$[Y];if(0>a(q,me))Y<L&&0>a(Z,q)?($[de]=Z,$[Y]=me,de=Y):($[de]=q,$[X]=me,de=X);else if(Y<L&&0>a(Z,me))$[de]=Z,$[Y]=me,de=Y;else break e}}return G}function a($,G){var me=$.sortIndex-G.sortIndex;return me!==0?me:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var G=r(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=$)n(u),G.sortIndex=G.expirationTime,t(c,G);else break;G=r(u)}}function S($){if(p=!1,w($),!g)if(r(c)!==null)g=!0,W(j);else{var G=r(u);G!==null&&U(S,G.startTime-$)}}function j($,G){g=!1,p&&(p=!1,x(C),C=-1),m=!0;var me=h;try{for(w(G),f=r(c);f!==null&&(!(f.expirationTime>G)||$&&!k());){var de=f.callback;if(typeof de=="function"){f.callback=null,h=f.priorityLevel;var L=de(f.expirationTime<=G);G=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(c)&&n(c),w(G)}else n(c);f=r(c)}if(f!==null)var B=!0;else{var X=r(u);X!==null&&U(S,X.startTime-G),B=!1}return B}finally{f=null,h=me,m=!1}}var A=!1,P=null,C=-1,E=5,R=-1;function k(){return!(e.unstable_now()-R<E)}function T(){if(P!==null){var $=e.unstable_now();R=$;var G=!0;try{G=P(!0,$)}finally{G?I():(A=!1,P=null)}}else A=!1}var I;if(typeof b=="function")I=function(){b(T)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=T,I=function(){z.postMessage(null)}}else I=function(){y(T,0)};function W($){P=$,A||(A=!0,I())}function U($,G){C=y(function(){$(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,W(j))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var me=h;h=G;try{return $()}finally{h=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=h;h=$;try{return G()}finally{h=me}},e.unstable_scheduleCallback=function($,G,me){var de=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?de+me:de):me=de,$){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=me+L,$={id:d++,callback:G,priorityLevel:$,startTime:me,expirationTime:L,sortIndex:-1},me>de?($.sortIndex=me,t(u,$),r(c)===null&&$===r(u)&&(p?(x(C),C=-1):p=!0,U(S,me-de))):($.sortIndex=L,t(c,$),g||m||(g=!0,W(j))),$},e.unstable_shouldYield=k,e.unstable_wrapCallback=function($){var G=h;return function(){var me=h;h=G;try{return $.apply(this,arguments)}finally{h=me}}}})(x9);y9.exports=x9;var xie=y9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bie=v,jl=xie;function Jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b9=new Set,Yx={};function ip(e,t){Bg(e,t),Bg(e+"Capture",t)}function Bg(e,t){for(Yx[e]=t,e=0;e<t.length;e++)b9.add(t[e])}var Pd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fP=Object.prototype.hasOwnProperty,wie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TM={},IM={};function _ie(e){return fP.call(IM,e)?!0:fP.call(TM,e)?!1:wie.test(e)?IM[e]=!0:(TM[e]=!0,!1)}function Sie(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jie(e,t,r,n){if(t===null||typeof t>"u"||Sie(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ws(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Oo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oo[e]=new ws(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oo[t]=new ws(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oo[e]=new ws(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oo[e]=new ws(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oo[e]=new ws(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oo[e]=new ws(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oo[e]=new ws(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oo[e]=new ws(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oo[e]=new ws(e,5,!1,e.toLowerCase(),null,!1,!1)});var _T=/[\-:]([a-z])/g;function ST(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_T,ST);Oo[t]=new ws(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_T,ST);Oo[t]=new ws(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_T,ST);Oo[t]=new ws(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oo[e]=new ws(e,1,!1,e.toLowerCase(),null,!1,!1)});Oo.xlinkHref=new ws("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oo[e]=new ws(e,1,!1,e.toLowerCase(),null,!0,!0)});function jT(e,t,r,n){var a=Oo.hasOwnProperty(t)?Oo[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jie(t,r,a,n)&&(r=null),n||a===null?_ie(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var qd=bie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$1=Symbol.for("react.element"),Xp=Symbol.for("react.portal"),Jp=Symbol.for("react.fragment"),NT=Symbol.for("react.strict_mode"),hP=Symbol.for("react.profiler"),w9=Symbol.for("react.provider"),_9=Symbol.for("react.context"),CT=Symbol.for("react.forward_ref"),mP=Symbol.for("react.suspense"),pP=Symbol.for("react.suspense_list"),AT=Symbol.for("react.memo"),mf=Symbol.for("react.lazy"),S9=Symbol.for("react.offscreen"),DM=Symbol.iterator;function xy(e){return e===null||typeof e!="object"?null:(e=DM&&e[DM]||e["@@iterator"],typeof e=="function"?e:null)}var ii=Object.assign,AC;function ex(e){if(AC===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);AC=t&&t[1]||""}return`
`+AC+e}var PC=!1;function EC(e,t){if(!e||PC)return"";PC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{PC=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ex(e):""}function Nie(e){switch(e.tag){case 5:return ex(e.type);case 16:return ex("Lazy");case 13:return ex("Suspense");case 19:return ex("SuspenseList");case 0:case 2:case 15:return e=EC(e.type,!1),e;case 11:return e=EC(e.type.render,!1),e;case 1:return e=EC(e.type,!0),e;default:return""}}function gP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jp:return"Fragment";case Xp:return"Portal";case hP:return"Profiler";case NT:return"StrictMode";case mP:return"Suspense";case pP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _9:return(e.displayName||"Context")+".Consumer";case w9:return(e._context.displayName||"Context")+".Provider";case CT:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case AT:return t=e.displayName||null,t!==null?t:gP(e.type)||"Memo";case mf:t=e._payload,e=e._init;try{return gP(e(t))}catch{}}return null}function Cie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gP(t);case 8:return t===NT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function eh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function j9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Aie(e){var t=j9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function F1(e){e._valueTracker||(e._valueTracker=Aie(e))}function N9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=j9(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function S2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vP(e,t){var r=t.checked;return ii({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function MM(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=eh(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function C9(e,t){t=t.checked,t!=null&&jT(e,"checked",t,!1)}function yP(e,t){C9(e,t);var r=eh(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xP(e,t.type,r):t.hasOwnProperty("defaultValue")&&xP(e,t.type,eh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function RM(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xP(e,t,r){(t!=="number"||S2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var tx=Array.isArray;function yg(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+eh(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function bP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Jt(91));return ii({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function LM(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Jt(92));if(tx(r)){if(1<r.length)throw Error(Jt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:eh(r)}}function A9(e,t){var r=eh(t.value),n=eh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function $M(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function P9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wP(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?P9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var B1,E9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(B1=B1||document.createElement("div"),B1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=B1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pie=["Webkit","ms","Moz","O"];Object.keys(dx).forEach(function(e){Pie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dx[t]=dx[e]})});function k9(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dx.hasOwnProperty(e)&&dx[e]?(""+t).trim():t+"px"}function O9(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=k9(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Eie=ii({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _P(e,t){if(t){if(Eie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Jt(62))}}function SP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jP=null;function PT(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var NP=null,xg=null,bg=null;function FM(e){if(e=Ab(e)){if(typeof NP!="function")throw Error(Jt(280));var t=e.stateNode;t&&(t=YS(t),NP(e.stateNode,e.type,t))}}function T9(e){xg?bg?bg.push(e):bg=[e]:xg=e}function I9(){if(xg){var e=xg,t=bg;if(bg=xg=null,FM(e),t)for(e=0;e<t.length;e++)FM(t[e])}}function D9(e,t){return e(t)}function M9(){}var kC=!1;function R9(e,t,r){if(kC)return e(t,r);kC=!0;try{return D9(e,t,r)}finally{kC=!1,(xg!==null||bg!==null)&&(M9(),I9())}}function Jx(e,t){var r=e.stateNode;if(r===null)return null;var n=YS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Jt(231,t,typeof r));return r}var CP=!1;if(Pd)try{var by={};Object.defineProperty(by,"passive",{get:function(){CP=!0}}),window.addEventListener("test",by,by),window.removeEventListener("test",by,by)}catch{CP=!1}function kie(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var fx=!1,j2=null,N2=!1,AP=null,Oie={onError:function(e){fx=!0,j2=e}};function Tie(e,t,r,n,a,i,o,l,c){fx=!1,j2=null,kie.apply(Oie,arguments)}function Iie(e,t,r,n,a,i,o,l,c){if(Tie.apply(this,arguments),fx){if(fx){var u=j2;fx=!1,j2=null}else throw Error(Jt(198));N2||(N2=!0,AP=u)}}function op(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function L9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function BM(e){if(op(e)!==e)throw Error(Jt(188))}function Die(e){var t=e.alternate;if(!t){if(t=op(e),t===null)throw Error(Jt(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return BM(a),e;if(i===n)return BM(a),t;i=i.sibling}throw Error(Jt(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Jt(189))}}if(r.alternate!==n)throw Error(Jt(190))}if(r.tag!==3)throw Error(Jt(188));return r.stateNode.current===r?e:t}function $9(e){return e=Die(e),e!==null?F9(e):null}function F9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=F9(e);if(t!==null)return t;e=e.sibling}return null}var B9=jl.unstable_scheduleCallback,zM=jl.unstable_cancelCallback,Mie=jl.unstable_shouldYield,Rie=jl.unstable_requestPaint,bi=jl.unstable_now,Lie=jl.unstable_getCurrentPriorityLevel,ET=jl.unstable_ImmediatePriority,z9=jl.unstable_UserBlockingPriority,C2=jl.unstable_NormalPriority,$ie=jl.unstable_LowPriority,q9=jl.unstable_IdlePriority,VS=null,pu=null;function Fie(e){if(pu&&typeof pu.onCommitFiberRoot=="function")try{pu.onCommitFiberRoot(VS,e,void 0,(e.current.flags&128)===128)}catch{}}var Tc=Math.clz32?Math.clz32:qie,Bie=Math.log,zie=Math.LN2;function qie(e){return e>>>=0,e===0?32:31-(Bie(e)/zie|0)|0}var z1=64,q1=4194304;function rx(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function A2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=rx(l):(i&=o,i!==0&&(n=rx(i)))}else o=r&~a,o!==0?n=rx(o):i!==0&&(n=rx(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Tc(t),a=1<<r,n|=e[r],t&=~a;return n}function Uie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wie(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Tc(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Uie(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function PP(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function U9(){var e=z1;return z1<<=1,!(z1&4194240)&&(z1=64),e}function OC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Nb(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tc(t),e[t]=r}function Vie(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Tc(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function kT(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Tc(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var oa=0;function W9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var V9,OT,H9,G9,K9,EP=!1,U1=[],Df=null,Mf=null,Rf=null,Qx=new Map,Zx=new Map,xf=[],Hie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qM(e,t){switch(e){case"focusin":case"focusout":Df=null;break;case"dragenter":case"dragleave":Mf=null;break;case"mouseover":case"mouseout":Rf=null;break;case"pointerover":case"pointerout":Qx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zx.delete(t.pointerId)}}function wy(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ab(t),t!==null&&OT(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Gie(e,t,r,n,a){switch(t){case"focusin":return Df=wy(Df,e,t,r,n,a),!0;case"dragenter":return Mf=wy(Mf,e,t,r,n,a),!0;case"mouseover":return Rf=wy(Rf,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Qx.set(i,wy(Qx.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Zx.set(i,wy(Zx.get(i)||null,e,t,r,n,a)),!0}return!1}function Y9(e){var t=om(e.target);if(t!==null){var r=op(t);if(r!==null){if(t=r.tag,t===13){if(t=L9(r),t!==null){e.blockedOn=t,K9(e.priority,function(){H9(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=kP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);jP=n,r.target.dispatchEvent(n),jP=null}else return t=Ab(r),t!==null&&OT(t),e.blockedOn=r,!1;t.shift()}return!0}function UM(e,t,r){Xw(e)&&r.delete(t)}function Kie(){EP=!1,Df!==null&&Xw(Df)&&(Df=null),Mf!==null&&Xw(Mf)&&(Mf=null),Rf!==null&&Xw(Rf)&&(Rf=null),Qx.forEach(UM),Zx.forEach(UM)}function _y(e,t){e.blockedOn===t&&(e.blockedOn=null,EP||(EP=!0,jl.unstable_scheduleCallback(jl.unstable_NormalPriority,Kie)))}function e0(e){function t(a){return _y(a,e)}if(0<U1.length){_y(U1[0],e);for(var r=1;r<U1.length;r++){var n=U1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Df!==null&&_y(Df,e),Mf!==null&&_y(Mf,e),Rf!==null&&_y(Rf,e),Qx.forEach(t),Zx.forEach(t),r=0;r<xf.length;r++)n=xf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<xf.length&&(r=xf[0],r.blockedOn===null);)Y9(r),r.blockedOn===null&&xf.shift()}var wg=qd.ReactCurrentBatchConfig,P2=!0;function Yie(e,t,r,n){var a=oa,i=wg.transition;wg.transition=null;try{oa=1,TT(e,t,r,n)}finally{oa=a,wg.transition=i}}function Xie(e,t,r,n){var a=oa,i=wg.transition;wg.transition=null;try{oa=4,TT(e,t,r,n)}finally{oa=a,wg.transition=i}}function TT(e,t,r,n){if(P2){var a=kP(e,t,r,n);if(a===null)zC(e,t,n,E2,r),qM(e,n);else if(Gie(a,e,t,r,n))n.stopPropagation();else if(qM(e,n),t&4&&-1<Hie.indexOf(e)){for(;a!==null;){var i=Ab(a);if(i!==null&&V9(i),i=kP(e,t,r,n),i===null&&zC(e,t,n,E2,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else zC(e,t,n,null,r)}}var E2=null;function kP(e,t,r,n){if(E2=null,e=PT(n),e=om(e),e!==null)if(t=op(e),t===null)e=null;else if(r=t.tag,r===13){if(e=L9(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return E2=e,null}function X9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lie()){case ET:return 1;case z9:return 4;case C2:case $ie:return 16;case q9:return 536870912;default:return 16}default:return 16}}var Nf=null,IT=null,Jw=null;function J9(){if(Jw)return Jw;var e,t=IT,r=t.length,n,a="value"in Nf?Nf.value:Nf.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Jw=a.slice(e,1<n?1-n:void 0)}function Qw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function W1(){return!0}function WM(){return!1}function Al(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?W1:WM,this.isPropagationStopped=WM,this}return ii(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=W1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=W1)},persist:function(){},isPersistent:W1}),t}var Mv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DT=Al(Mv),Cb=ii({},Mv,{view:0,detail:0}),Jie=Al(Cb),TC,IC,Sy,HS=ii({},Cb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:MT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sy&&(Sy&&e.type==="mousemove"?(TC=e.screenX-Sy.screenX,IC=e.screenY-Sy.screenY):IC=TC=0,Sy=e),TC)},movementY:function(e){return"movementY"in e?e.movementY:IC}}),VM=Al(HS),Qie=ii({},HS,{dataTransfer:0}),Zie=Al(Qie),eoe=ii({},Cb,{relatedTarget:0}),DC=Al(eoe),toe=ii({},Mv,{animationName:0,elapsedTime:0,pseudoElement:0}),roe=Al(toe),noe=ii({},Mv,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aoe=Al(noe),ioe=ii({},Mv,{data:0}),HM=Al(ioe),ooe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},soe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},loe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function coe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=loe[e])?!!t[e]:!1}function MT(){return coe}var uoe=ii({},Cb,{key:function(e){if(e.key){var t=ooe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?soe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:MT,charCode:function(e){return e.type==="keypress"?Qw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),doe=Al(uoe),foe=ii({},HS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GM=Al(foe),hoe=ii({},Cb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:MT}),moe=Al(hoe),poe=ii({},Mv,{propertyName:0,elapsedTime:0,pseudoElement:0}),goe=Al(poe),voe=ii({},HS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yoe=Al(voe),xoe=[9,13,27,32],RT=Pd&&"CompositionEvent"in window,hx=null;Pd&&"documentMode"in document&&(hx=document.documentMode);var boe=Pd&&"TextEvent"in window&&!hx,Q9=Pd&&(!RT||hx&&8<hx&&11>=hx),KM=String.fromCharCode(32),YM=!1;function Z9(e,t){switch(e){case"keyup":return xoe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eU(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qp=!1;function woe(e,t){switch(e){case"compositionend":return eU(t);case"keypress":return t.which!==32?null:(YM=!0,KM);case"textInput":return e=t.data,e===KM&&YM?null:e;default:return null}}function _oe(e,t){if(Qp)return e==="compositionend"||!RT&&Z9(e,t)?(e=J9(),Jw=IT=Nf=null,Qp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Q9&&t.locale!=="ko"?null:t.data;default:return null}}var Soe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Soe[e.type]:t==="textarea"}function tU(e,t,r,n){T9(n),t=k2(t,"onChange"),0<t.length&&(r=new DT("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var mx=null,t0=null;function joe(e){fU(e,0)}function GS(e){var t=tg(e);if(N9(t))return e}function Noe(e,t){if(e==="change")return t}var rU=!1;if(Pd){var MC;if(Pd){var RC="oninput"in document;if(!RC){var JM=document.createElement("div");JM.setAttribute("oninput","return;"),RC=typeof JM.oninput=="function"}MC=RC}else MC=!1;rU=MC&&(!document.documentMode||9<document.documentMode)}function QM(){mx&&(mx.detachEvent("onpropertychange",nU),t0=mx=null)}function nU(e){if(e.propertyName==="value"&&GS(t0)){var t=[];tU(t,t0,e,PT(e)),R9(joe,t)}}function Coe(e,t,r){e==="focusin"?(QM(),mx=t,t0=r,mx.attachEvent("onpropertychange",nU)):e==="focusout"&&QM()}function Aoe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return GS(t0)}function Poe(e,t){if(e==="click")return GS(t)}function Eoe(e,t){if(e==="input"||e==="change")return GS(t)}function koe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lc=typeof Object.is=="function"?Object.is:koe;function r0(e,t){if(Lc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!fP.call(t,a)||!Lc(e[a],t[a]))return!1}return!0}function ZM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eR(e,t){var r=ZM(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ZM(r)}}function aU(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aU(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iU(){for(var e=window,t=S2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=S2(e.document)}return t}function LT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ooe(e){var t=iU(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aU(r.ownerDocument.documentElement,r)){if(n!==null&&LT(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=eR(r,i);var o=eR(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Toe=Pd&&"documentMode"in document&&11>=document.documentMode,Zp=null,OP=null,px=null,TP=!1;function tR(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;TP||Zp==null||Zp!==S2(n)||(n=Zp,"selectionStart"in n&&LT(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),px&&r0(px,n)||(px=n,n=k2(OP,"onSelect"),0<n.length&&(t=new DT("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Zp)))}function V1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var eg={animationend:V1("Animation","AnimationEnd"),animationiteration:V1("Animation","AnimationIteration"),animationstart:V1("Animation","AnimationStart"),transitionend:V1("Transition","TransitionEnd")},LC={},oU={};Pd&&(oU=document.createElement("div").style,"AnimationEvent"in window||(delete eg.animationend.animation,delete eg.animationiteration.animation,delete eg.animationstart.animation),"TransitionEvent"in window||delete eg.transitionend.transition);function KS(e){if(LC[e])return LC[e];if(!eg[e])return e;var t=eg[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in oU)return LC[e]=t[r];return e}var sU=KS("animationend"),lU=KS("animationiteration"),cU=KS("animationstart"),uU=KS("transitionend"),dU=new Map,rR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hh(e,t){dU.set(e,t),ip(t,[e])}for(var $C=0;$C<rR.length;$C++){var FC=rR[$C],Ioe=FC.toLowerCase(),Doe=FC[0].toUpperCase()+FC.slice(1);hh(Ioe,"on"+Doe)}hh(sU,"onAnimationEnd");hh(lU,"onAnimationIteration");hh(cU,"onAnimationStart");hh("dblclick","onDoubleClick");hh("focusin","onFocus");hh("focusout","onBlur");hh(uU,"onTransitionEnd");Bg("onMouseEnter",["mouseout","mouseover"]);Bg("onMouseLeave",["mouseout","mouseover"]);Bg("onPointerEnter",["pointerout","pointerover"]);Bg("onPointerLeave",["pointerout","pointerover"]);ip("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ip("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ip("onBeforeInput",["compositionend","keypress","textInput","paste"]);ip("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ip("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ip("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Moe=new Set("cancel close invalid load scroll toggle".split(" ").concat(nx));function nR(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Iie(n,t,void 0,e),e.currentTarget=null}function fU(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;nR(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;nR(a,l,u),i=c}}}if(N2)throw e=AP,N2=!1,AP=null,e}function $a(e,t){var r=t[LP];r===void 0&&(r=t[LP]=new Set);var n=e+"__bubble";r.has(n)||(hU(t,e,2,!1),r.add(n))}function BC(e,t,r){var n=0;t&&(n|=4),hU(r,e,n,t)}var H1="_reactListening"+Math.random().toString(36).slice(2);function n0(e){if(!e[H1]){e[H1]=!0,b9.forEach(function(r){r!=="selectionchange"&&(Moe.has(r)||BC(r,!1,e),BC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[H1]||(t[H1]=!0,BC("selectionchange",!1,t))}}function hU(e,t,r,n){switch(X9(t)){case 1:var a=Yie;break;case 4:a=Xie;break;default:a=TT}r=a.bind(null,t,r,e),a=void 0,!CP||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function zC(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=om(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}R9(function(){var u=i,d=PT(r),f=[];e:{var h=dU.get(e);if(h!==void 0){var m=DT,g=e;switch(e){case"keypress":if(Qw(r)===0)break e;case"keydown":case"keyup":m=doe;break;case"focusin":g="focus",m=DC;break;case"focusout":g="blur",m=DC;break;case"beforeblur":case"afterblur":m=DC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=VM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Zie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=moe;break;case sU:case lU:case cU:m=roe;break;case uU:m=goe;break;case"scroll":m=Jie;break;case"wheel":m=yoe;break;case"copy":case"cut":case"paste":m=aoe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=GM}var p=(t&4)!==0,y=!p&&e==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var b=u,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,x!==null&&(S=Jx(b,x),S!=null&&p.push(a0(b,S,w)))),y)break;b=b.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==jP&&(g=r.relatedTarget||r.fromElement)&&(om(g)||g[Ed]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?om(g):null,g!==null&&(y=op(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=VM,S="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=GM,S="onPointerLeave",x="onPointerEnter",b="pointer"),y=m==null?h:tg(m),w=g==null?h:tg(g),h=new p(S,b+"leave",m,r,d),h.target=y,h.relatedTarget=w,S=null,om(d)===u&&(p=new p(x,b+"enter",g,r,d),p.target=w,p.relatedTarget=y,S=p),y=S,m&&g)t:{for(p=m,x=g,b=0,w=p;w;w=Sp(w))b++;for(w=0,S=x;S;S=Sp(S))w++;for(;0<b-w;)p=Sp(p),b--;for(;0<w-b;)x=Sp(x),w--;for(;b--;){if(p===x||x!==null&&p===x.alternate)break t;p=Sp(p),x=Sp(x)}p=null}else p=null;m!==null&&aR(f,h,m,p,!1),g!==null&&y!==null&&aR(f,y,g,p,!0)}}e:{if(h=u?tg(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=Noe;else if(XM(h))if(rU)j=Eoe;else{j=Aoe;var A=Coe}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Poe);if(j&&(j=j(e,u))){tU(f,j,r,d);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&xP(h,"number",h.value)}switch(A=u?tg(u):window,e){case"focusin":(XM(A)||A.contentEditable==="true")&&(Zp=A,OP=u,px=null);break;case"focusout":px=OP=Zp=null;break;case"mousedown":TP=!0;break;case"contextmenu":case"mouseup":case"dragend":TP=!1,tR(f,r,d);break;case"selectionchange":if(Toe)break;case"keydown":case"keyup":tR(f,r,d)}var P;if(RT)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qp?Z9(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Q9&&r.locale!=="ko"&&(Qp||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qp&&(P=J9()):(Nf=d,IT="value"in Nf?Nf.value:Nf.textContent,Qp=!0)),A=k2(u,C),0<A.length&&(C=new HM(C,e,null,r,d),f.push({event:C,listeners:A}),P?C.data=P:(P=eU(r),P!==null&&(C.data=P)))),(P=boe?woe(e,r):_oe(e,r))&&(u=k2(u,"onBeforeInput"),0<u.length&&(d=new HM("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=P))}fU(f,t)})}function a0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function k2(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Jx(e,r),i!=null&&n.unshift(a0(e,i,a)),i=Jx(e,t),i!=null&&n.push(a0(e,i,a))),e=e.return}return n}function Sp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aR(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Jx(r,i),c!=null&&o.unshift(a0(r,c,l))):a||(c=Jx(r,i),c!=null&&o.push(a0(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Roe=/\r\n?/g,Loe=/\u0000|\uFFFD/g;function iR(e){return(typeof e=="string"?e:""+e).replace(Roe,`
`).replace(Loe,"")}function G1(e,t,r){if(t=iR(t),iR(e)!==t&&r)throw Error(Jt(425))}function O2(){}var IP=null,DP=null;function MP(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var RP=typeof setTimeout=="function"?setTimeout:void 0,$oe=typeof clearTimeout=="function"?clearTimeout:void 0,oR=typeof Promise=="function"?Promise:void 0,Foe=typeof queueMicrotask=="function"?queueMicrotask:typeof oR<"u"?function(e){return oR.resolve(null).then(e).catch(Boe)}:RP;function Boe(e){setTimeout(function(){throw e})}function qC(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),e0(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);e0(t)}function Lf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Rv=Math.random().toString(36).slice(2),ou="__reactFiber$"+Rv,i0="__reactProps$"+Rv,Ed="__reactContainer$"+Rv,LP="__reactEvents$"+Rv,zoe="__reactListeners$"+Rv,qoe="__reactHandles$"+Rv;function om(e){var t=e[ou];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ed]||r[ou]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=sR(e);e!==null;){if(r=e[ou])return r;e=sR(e)}return t}e=r,r=e.parentNode}return null}function Ab(e){return e=e[ou]||e[Ed],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Jt(33))}function YS(e){return e[i0]||null}var $P=[],rg=-1;function mh(e){return{current:e}}function qa(e){0>rg||(e.current=$P[rg],$P[rg]=null,rg--)}function Ea(e,t){rg++,$P[rg]=e.current,e.current=t}var th={},es=mh(th),Ls=mh(!1),Rm=th;function zg(e,t){var r=e.type.contextTypes;if(!r)return th;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function $s(e){return e=e.childContextTypes,e!=null}function T2(){qa(Ls),qa(es)}function lR(e,t,r){if(es.current!==th)throw Error(Jt(168));Ea(es,t),Ea(Ls,r)}function mU(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Jt(108,Cie(e)||"Unknown",a));return ii({},r,n)}function I2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||th,Rm=es.current,Ea(es,e),Ea(Ls,Ls.current),!0}function cR(e,t,r){var n=e.stateNode;if(!n)throw Error(Jt(169));r?(e=mU(e,t,Rm),n.__reactInternalMemoizedMergedChildContext=e,qa(Ls),qa(es),Ea(es,e)):qa(Ls),Ea(Ls,r)}var Qu=null,XS=!1,UC=!1;function pU(e){Qu===null?Qu=[e]:Qu.push(e)}function Uoe(e){XS=!0,pU(e)}function ph(){if(!UC&&Qu!==null){UC=!0;var e=0,t=oa;try{var r=Qu;for(oa=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Qu=null,XS=!1}catch(a){throw Qu!==null&&(Qu=Qu.slice(e+1)),B9(ET,ph),a}finally{oa=t,UC=!1}}return null}var ng=[],ag=0,D2=null,M2=0,Ul=[],Wl=0,Lm=null,id=1,od="";function Uh(e,t){ng[ag++]=M2,ng[ag++]=D2,D2=e,M2=t}function gU(e,t,r){Ul[Wl++]=id,Ul[Wl++]=od,Ul[Wl++]=Lm,Lm=e;var n=id;e=od;var a=32-Tc(n)-1;n&=~(1<<a),r+=1;var i=32-Tc(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,id=1<<32-Tc(t)+a|r<<a|n,od=i+e}else id=1<<i|r<<a|n,od=e}function $T(e){e.return!==null&&(Uh(e,1),gU(e,1,0))}function FT(e){for(;e===D2;)D2=ng[--ag],ng[ag]=null,M2=ng[--ag],ng[ag]=null;for(;e===Lm;)Lm=Ul[--Wl],Ul[Wl]=null,od=Ul[--Wl],Ul[Wl]=null,id=Ul[--Wl],Ul[Wl]=null}var yl=null,ml=null,Ja=!1,Ac=null;function vU(e,t){var r=Gl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function uR(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yl=e,ml=Lf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yl=e,ml=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Lm!==null?{id,overflow:od}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,yl=e,ml=null,!0):!1;default:return!1}}function FP(e){return(e.mode&1)!==0&&(e.flags&128)===0}function BP(e){if(Ja){var t=ml;if(t){var r=t;if(!uR(e,t)){if(FP(e))throw Error(Jt(418));t=Lf(r.nextSibling);var n=yl;t&&uR(e,t)?vU(n,r):(e.flags=e.flags&-4097|2,Ja=!1,yl=e)}}else{if(FP(e))throw Error(Jt(418));e.flags=e.flags&-4097|2,Ja=!1,yl=e}}}function dR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yl=e}function K1(e){if(e!==yl)return!1;if(!Ja)return dR(e),Ja=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!MP(e.type,e.memoizedProps)),t&&(t=ml)){if(FP(e))throw yU(),Error(Jt(418));for(;t;)vU(e,t),t=Lf(t.nextSibling)}if(dR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ml=Lf(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ml=null}}else ml=yl?Lf(e.stateNode.nextSibling):null;return!0}function yU(){for(var e=ml;e;)e=Lf(e.nextSibling)}function qg(){ml=yl=null,Ja=!1}function BT(e){Ac===null?Ac=[e]:Ac.push(e)}var Woe=qd.ReactCurrentBatchConfig;function jy(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Jt(309));var n=r.stateNode}if(!n)throw Error(Jt(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Jt(284));if(!r._owner)throw Error(Jt(290,e))}return e}function Y1(e,t){throw e=Object.prototype.toString.call(t),Error(Jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fR(e){var t=e._init;return t(e._payload)}function xU(e){function t(x,b){if(e){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function r(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function a(x,b){return x=zf(x,b),x.index=0,x.sibling=null,x}function i(x,b,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,w,S){return b===null||b.tag!==6?(b=XC(w,x.mode,S),b.return=x,b):(b=a(b,w),b.return=x,b)}function c(x,b,w,S){var j=w.type;return j===Jp?d(x,b,w.props.children,S,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===mf&&fR(j)===b.type)?(S=a(b,w.props),S.ref=jy(x,b,w),S.return=x,S):(S=i2(w.type,w.key,w.props,null,x.mode,S),S.ref=jy(x,b,w),S.return=x,S)}function u(x,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=JC(w,x.mode,S),b.return=x,b):(b=a(b,w.children||[]),b.return=x,b)}function d(x,b,w,S,j){return b===null||b.tag!==7?(b=jm(w,x.mode,S,j),b.return=x,b):(b=a(b,w),b.return=x,b)}function f(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=XC(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $1:return w=i2(b.type,b.key,b.props,null,x.mode,w),w.ref=jy(x,null,b),w.return=x,w;case Xp:return b=JC(b,x.mode,w),b.return=x,b;case mf:var S=b._init;return f(x,S(b._payload),w)}if(tx(b)||xy(b))return b=jm(b,x.mode,w,null),b.return=x,b;Y1(x,b)}return null}function h(x,b,w,S){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(x,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $1:return w.key===j?c(x,b,w,S):null;case Xp:return w.key===j?u(x,b,w,S):null;case mf:return j=w._init,h(x,b,j(w._payload),S)}if(tx(w)||xy(w))return j!==null?null:d(x,b,w,S,null);Y1(x,w)}return null}function m(x,b,w,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(w)||null,l(b,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $1:return x=x.get(S.key===null?w:S.key)||null,c(b,x,S,j);case Xp:return x=x.get(S.key===null?w:S.key)||null,u(b,x,S,j);case mf:var A=S._init;return m(x,b,w,A(S._payload),j)}if(tx(S)||xy(S))return x=x.get(w)||null,d(b,x,S,j,null);Y1(b,S)}return null}function g(x,b,w,S){for(var j=null,A=null,P=b,C=b=0,E=null;P!==null&&C<w.length;C++){P.index>C?(E=P,P=null):E=P.sibling;var R=h(x,P,w[C],S);if(R===null){P===null&&(P=E);break}e&&P&&R.alternate===null&&t(x,P),b=i(R,b,C),A===null?j=R:A.sibling=R,A=R,P=E}if(C===w.length)return r(x,P),Ja&&Uh(x,C),j;if(P===null){for(;C<w.length;C++)P=f(x,w[C],S),P!==null&&(b=i(P,b,C),A===null?j=P:A.sibling=P,A=P);return Ja&&Uh(x,C),j}for(P=n(x,P);C<w.length;C++)E=m(P,x,C,w[C],S),E!==null&&(e&&E.alternate!==null&&P.delete(E.key===null?C:E.key),b=i(E,b,C),A===null?j=E:A.sibling=E,A=E);return e&&P.forEach(function(k){return t(x,k)}),Ja&&Uh(x,C),j}function p(x,b,w,S){var j=xy(w);if(typeof j!="function")throw Error(Jt(150));if(w=j.call(w),w==null)throw Error(Jt(151));for(var A=j=null,P=b,C=b=0,E=null,R=w.next();P!==null&&!R.done;C++,R=w.next()){P.index>C?(E=P,P=null):E=P.sibling;var k=h(x,P,R.value,S);if(k===null){P===null&&(P=E);break}e&&P&&k.alternate===null&&t(x,P),b=i(k,b,C),A===null?j=k:A.sibling=k,A=k,P=E}if(R.done)return r(x,P),Ja&&Uh(x,C),j;if(P===null){for(;!R.done;C++,R=w.next())R=f(x,R.value,S),R!==null&&(b=i(R,b,C),A===null?j=R:A.sibling=R,A=R);return Ja&&Uh(x,C),j}for(P=n(x,P);!R.done;C++,R=w.next())R=m(P,x,C,R.value,S),R!==null&&(e&&R.alternate!==null&&P.delete(R.key===null?C:R.key),b=i(R,b,C),A===null?j=R:A.sibling=R,A=R);return e&&P.forEach(function(T){return t(x,T)}),Ja&&Uh(x,C),j}function y(x,b,w,S){if(typeof w=="object"&&w!==null&&w.type===Jp&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $1:e:{for(var j=w.key,A=b;A!==null;){if(A.key===j){if(j=w.type,j===Jp){if(A.tag===7){r(x,A.sibling),b=a(A,w.props.children),b.return=x,x=b;break e}}else if(A.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===mf&&fR(j)===A.type){r(x,A.sibling),b=a(A,w.props),b.ref=jy(x,A,w),b.return=x,x=b;break e}r(x,A);break}else t(x,A);A=A.sibling}w.type===Jp?(b=jm(w.props.children,x.mode,S,w.key),b.return=x,x=b):(S=i2(w.type,w.key,w.props,null,x.mode,S),S.ref=jy(x,b,w),S.return=x,x=S)}return o(x);case Xp:e:{for(A=w.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(x,b.sibling),b=a(b,w.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else t(x,b);b=b.sibling}b=JC(w,x.mode,S),b.return=x,x=b}return o(x);case mf:return A=w._init,y(x,b,A(w._payload),S)}if(tx(w))return g(x,b,w,S);if(xy(w))return p(x,b,w,S);Y1(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(x,b.sibling),b=a(b,w),b.return=x,x=b):(r(x,b),b=XC(w,x.mode,S),b.return=x,x=b),o(x)):r(x,b)}return y}var Ug=xU(!0),bU=xU(!1),R2=mh(null),L2=null,ig=null,zT=null;function qT(){zT=ig=L2=null}function UT(e){var t=R2.current;qa(R2),e._currentValue=t}function zP(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function _g(e,t){L2=e,zT=ig=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Is=!0),e.firstContext=null)}function tc(e){var t=e._currentValue;if(zT!==e)if(e={context:e,memoizedValue:t,next:null},ig===null){if(L2===null)throw Error(Jt(308));ig=e,L2.dependencies={lanes:0,firstContext:e}}else ig=ig.next=e;return t}var sm=null;function WT(e){sm===null?sm=[e]:sm.push(e)}function wU(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,WT(t)):(r.next=a.next,a.next=r),t.interleaved=r,kd(e,n)}function kd(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pf=!1;function VT(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _U(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $f(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Vn&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,kd(e,r)}return a=n.interleaved,a===null?(t.next=t,WT(n)):(t.next=a.next,a.next=t),n.interleaved=t,kd(e,r)}function Zw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kT(e,r)}}function hR(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function $2(e,t,r,n){var a=e.updateQueue;pf=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=ii({},f,h);break e;case 2:pf=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Fm|=o,e.lanes=o,e.memoizedState=f}}function mR(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Jt(191,a));a.call(n)}}}var Pb={},gu=mh(Pb),o0=mh(Pb),s0=mh(Pb);function lm(e){if(e===Pb)throw Error(Jt(174));return e}function HT(e,t){switch(Ea(s0,t),Ea(o0,e),Ea(gu,Pb),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wP(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wP(t,e)}qa(gu),Ea(gu,t)}function Wg(){qa(gu),qa(o0),qa(s0)}function SU(e){lm(s0.current);var t=lm(gu.current),r=wP(t,e.type);t!==r&&(Ea(o0,e),Ea(gu,r))}function GT(e){o0.current===e&&(qa(gu),qa(o0))}var ti=mh(0);function F2(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var WC=[];function KT(){for(var e=0;e<WC.length;e++)WC[e]._workInProgressVersionPrimary=null;WC.length=0}var e2=qd.ReactCurrentDispatcher,VC=qd.ReactCurrentBatchConfig,$m=0,ni=null,Yi=null,lo=null,B2=!1,gx=!1,l0=0,Voe=0;function Fo(){throw Error(Jt(321))}function YT(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Lc(e[r],t[r]))return!1;return!0}function XT(e,t,r,n,a,i){if($m=i,ni=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,e2.current=e===null||e.memoizedState===null?Yoe:Xoe,e=r(n,a),gx){i=0;do{if(gx=!1,l0=0,25<=i)throw Error(Jt(301));i+=1,lo=Yi=null,t.updateQueue=null,e2.current=Joe,e=r(n,a)}while(gx)}if(e2.current=z2,t=Yi!==null&&Yi.next!==null,$m=0,lo=Yi=ni=null,B2=!1,t)throw Error(Jt(300));return e}function JT(){var e=l0!==0;return l0=0,e}function nu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lo===null?ni.memoizedState=lo=e:lo=lo.next=e,lo}function rc(){if(Yi===null){var e=ni.alternate;e=e!==null?e.memoizedState:null}else e=Yi.next;var t=lo===null?ni.memoizedState:lo.next;if(t!==null)lo=t,Yi=e;else{if(e===null)throw Error(Jt(310));Yi=e,e={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},lo===null?ni.memoizedState=lo=e:lo=lo.next=e}return lo}function c0(e,t){return typeof t=="function"?t(e):t}function HC(e){var t=rc(),r=t.queue;if(r===null)throw Error(Jt(311));r.lastRenderedReducer=e;var n=Yi,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if(($m&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ni.lanes|=d,Fm|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Lc(n,t.memoizedState)||(Is=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ni.lanes|=i,Fm|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function GC(e){var t=rc(),r=t.queue;if(r===null)throw Error(Jt(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Lc(i,t.memoizedState)||(Is=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function jU(){}function NU(e,t){var r=ni,n=rc(),a=t(),i=!Lc(n.memoizedState,a);if(i&&(n.memoizedState=a,Is=!0),n=n.queue,QT(PU.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||lo!==null&&lo.memoizedState.tag&1){if(r.flags|=2048,u0(9,AU.bind(null,r,n,a,t),void 0,null),uo===null)throw Error(Jt(349));$m&30||CU(r,t,a)}return a}function CU(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ni.updateQueue,t===null?(t={lastEffect:null,stores:null},ni.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function AU(e,t,r,n){t.value=r,t.getSnapshot=n,EU(t)&&kU(e)}function PU(e,t,r){return r(function(){EU(t)&&kU(e)})}function EU(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lc(e,r)}catch{return!0}}function kU(e){var t=kd(e,1);t!==null&&Ic(t,e,1,-1)}function pR(e){var t=nu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c0,lastRenderedState:e},t.queue=e,e=e.dispatch=Koe.bind(null,ni,e),[t.memoizedState,e]}function u0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ni.updateQueue,t===null?(t={lastEffect:null,stores:null},ni.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function OU(){return rc().memoizedState}function t2(e,t,r,n){var a=nu();ni.flags|=e,a.memoizedState=u0(1|t,r,void 0,n===void 0?null:n)}function JS(e,t,r,n){var a=rc();n=n===void 0?null:n;var i=void 0;if(Yi!==null){var o=Yi.memoizedState;if(i=o.destroy,n!==null&&YT(n,o.deps)){a.memoizedState=u0(t,r,i,n);return}}ni.flags|=e,a.memoizedState=u0(1|t,r,i,n)}function gR(e,t){return t2(8390656,8,e,t)}function QT(e,t){return JS(2048,8,e,t)}function TU(e,t){return JS(4,2,e,t)}function IU(e,t){return JS(4,4,e,t)}function DU(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MU(e,t,r){return r=r!=null?r.concat([e]):null,JS(4,4,DU.bind(null,t,e),r)}function ZT(){}function RU(e,t){var r=rc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&YT(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function LU(e,t){var r=rc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&YT(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function $U(e,t,r){return $m&21?(Lc(r,t)||(r=U9(),ni.lanes|=r,Fm|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Is=!0),e.memoizedState=r)}function Hoe(e,t){var r=oa;oa=r!==0&&4>r?r:4,e(!0);var n=VC.transition;VC.transition={};try{e(!1),t()}finally{oa=r,VC.transition=n}}function FU(){return rc().memoizedState}function Goe(e,t,r){var n=Bf(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},BU(e))zU(t,r);else if(r=wU(e,t,r,n),r!==null){var a=xs();Ic(r,e,n,a),qU(r,t,n)}}function Koe(e,t,r){var n=Bf(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(BU(e))zU(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Lc(l,o)){var c=t.interleaved;c===null?(a.next=a,WT(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=wU(e,t,a,n),r!==null&&(a=xs(),Ic(r,e,n,a),qU(r,t,n))}}function BU(e){var t=e.alternate;return e===ni||t!==null&&t===ni}function zU(e,t){gx=B2=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qU(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kT(e,r)}}var z2={readContext:tc,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useInsertionEffect:Fo,useLayoutEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useMutableSource:Fo,useSyncExternalStore:Fo,useId:Fo,unstable_isNewReconciler:!1},Yoe={readContext:tc,useCallback:function(e,t){return nu().memoizedState=[e,t===void 0?null:t],e},useContext:tc,useEffect:gR,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,t2(4194308,4,DU.bind(null,t,e),r)},useLayoutEffect:function(e,t){return t2(4194308,4,e,t)},useInsertionEffect:function(e,t){return t2(4,2,e,t)},useMemo:function(e,t){var r=nu();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=nu();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Goe.bind(null,ni,e),[n.memoizedState,e]},useRef:function(e){var t=nu();return e={current:e},t.memoizedState=e},useState:pR,useDebugValue:ZT,useDeferredValue:function(e){return nu().memoizedState=e},useTransition:function(){var e=pR(!1),t=e[0];return e=Hoe.bind(null,e[1]),nu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ni,a=nu();if(Ja){if(r===void 0)throw Error(Jt(407));r=r()}else{if(r=t(),uo===null)throw Error(Jt(349));$m&30||CU(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,gR(PU.bind(null,n,i,e),[e]),n.flags|=2048,u0(9,AU.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=nu(),t=uo.identifierPrefix;if(Ja){var r=od,n=id;r=(n&~(1<<32-Tc(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=l0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Voe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xoe={readContext:tc,useCallback:RU,useContext:tc,useEffect:QT,useImperativeHandle:MU,useInsertionEffect:TU,useLayoutEffect:IU,useMemo:LU,useReducer:HC,useRef:OU,useState:function(){return HC(c0)},useDebugValue:ZT,useDeferredValue:function(e){var t=rc();return $U(t,Yi.memoizedState,e)},useTransition:function(){var e=HC(c0)[0],t=rc().memoizedState;return[e,t]},useMutableSource:jU,useSyncExternalStore:NU,useId:FU,unstable_isNewReconciler:!1},Joe={readContext:tc,useCallback:RU,useContext:tc,useEffect:QT,useImperativeHandle:MU,useInsertionEffect:TU,useLayoutEffect:IU,useMemo:LU,useReducer:GC,useRef:OU,useState:function(){return GC(c0)},useDebugValue:ZT,useDeferredValue:function(e){var t=rc();return Yi===null?t.memoizedState=e:$U(t,Yi.memoizedState,e)},useTransition:function(){var e=GC(c0)[0],t=rc().memoizedState;return[e,t]},useMutableSource:jU,useSyncExternalStore:NU,useId:FU,unstable_isNewReconciler:!1};function wc(e,t){if(e&&e.defaultProps){t=ii({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function qP(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ii({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var QS={isMounted:function(e){return(e=e._reactInternals)?op(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xs(),a=Bf(e),i=bd(n,a);i.payload=t,r!=null&&(i.callback=r),t=$f(e,i,a),t!==null&&(Ic(t,e,a,n),Zw(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xs(),a=Bf(e),i=bd(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=$f(e,i,a),t!==null&&(Ic(t,e,a,n),Zw(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xs(),n=Bf(e),a=bd(r,n);a.tag=2,t!=null&&(a.callback=t),t=$f(e,a,n),t!==null&&(Ic(t,e,n,r),Zw(t,e,n))}};function vR(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!r0(r,n)||!r0(a,i):!0}function UU(e,t,r){var n=!1,a=th,i=t.contextType;return typeof i=="object"&&i!==null?i=tc(i):(a=$s(t)?Rm:es.current,n=t.contextTypes,i=(n=n!=null)?zg(e,a):th),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=QS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function yR(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&QS.enqueueReplaceState(t,t.state,null)}function UP(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},VT(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=tc(i):(i=$s(t)?Rm:es.current,a.context=zg(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(qP(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&QS.enqueueReplaceState(a,a.state,null),$2(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Vg(e,t){try{var r="",n=t;do r+=Nie(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function KC(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function WP(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Qoe=typeof WeakMap=="function"?WeakMap:Map;function WU(e,t,r){r=bd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){U2||(U2=!0,eE=n),WP(e,t)},r}function VU(e,t,r){r=bd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){WP(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){WP(e,t),typeof n!="function"&&(Ff===null?Ff=new Set([this]):Ff.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function xR(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Qoe;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=fse.bind(null,e,t,r),t.then(e,e))}function bR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wR(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bd(-1,1),t.tag=2,$f(r,t,1))),r.lanes|=1),e)}var Zoe=qd.ReactCurrentOwner,Is=!1;function fs(e,t,r,n){t.child=e===null?bU(t,null,r,n):Ug(t,e.child,r,n)}function _R(e,t,r,n,a){r=r.render;var i=t.ref;return _g(t,a),n=XT(e,t,r,n,i,a),r=JT(),e!==null&&!Is?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Od(e,t,a)):(Ja&&r&&$T(t),t.flags|=1,fs(e,t,n,a),t.child)}function SR(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!sI(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,HU(e,t,i,n,a)):(e=i2(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:r0,r(o,n)&&e.ref===t.ref)return Od(e,t,a)}return t.flags|=1,e=zf(i,n),e.ref=t.ref,e.return=t,t.child=e}function HU(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(r0(i,n)&&e.ref===t.ref)if(Is=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Is=!0);else return t.lanes=e.lanes,Od(e,t,a)}return VP(e,t,r,n,a)}function GU(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(sg,sl),sl|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(sg,sl),sl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ea(sg,sl),sl|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ea(sg,sl),sl|=n;return fs(e,t,a,r),t.child}function KU(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function VP(e,t,r,n,a){var i=$s(r)?Rm:es.current;return i=zg(t,i),_g(t,a),r=XT(e,t,r,n,i,a),n=JT(),e!==null&&!Is?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Od(e,t,a)):(Ja&&n&&$T(t),t.flags|=1,fs(e,t,r,a),t.child)}function jR(e,t,r,n,a){if($s(r)){var i=!0;I2(t)}else i=!1;if(_g(t,a),t.stateNode===null)r2(e,t),UU(t,r,n),UP(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=tc(u):(u=$s(r)?Rm:es.current,u=zg(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&yR(t,o,n,u),pf=!1;var h=t.memoizedState;o.state=h,$2(t,n,o,a),c=t.memoizedState,l!==n||h!==c||Ls.current||pf?(typeof d=="function"&&(qP(t,r,d,n),c=t.memoizedState),(l=pf||vR(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,_U(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:wc(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=tc(c):(c=$s(r)?Rm:es.current,c=zg(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&yR(t,o,n,c),pf=!1,h=t.memoizedState,o.state=h,$2(t,n,o,a);var g=t.memoizedState;l!==f||h!==g||Ls.current||pf?(typeof m=="function"&&(qP(t,r,m,n),g=t.memoizedState),(u=pf||vR(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return HP(e,t,r,n,i,a)}function HP(e,t,r,n,a,i){KU(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&cR(t,r,!1),Od(e,t,i);n=t.stateNode,Zoe.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ug(t,e.child,null,i),t.child=Ug(t,null,l,i)):fs(e,t,l,i),t.memoizedState=n.state,a&&cR(t,r,!0),t.child}function YU(e){var t=e.stateNode;t.pendingContext?lR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lR(e,t.context,!1),HT(e,t.containerInfo)}function NR(e,t,r,n,a){return qg(),BT(a),t.flags|=256,fs(e,t,r,n),t.child}var GP={dehydrated:null,treeContext:null,retryLane:0};function KP(e){return{baseLanes:e,cachePool:null,transitions:null}}function XU(e,t,r){var n=t.pendingProps,a=ti.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ea(ti,a&1),e===null)return BP(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tj(o,n,0,null),e=jm(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=KP(r),t.memoizedState=GP,e):eI(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return ese(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=zf(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=zf(l,i):(i=jm(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?KP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=GP,n}return i=e.child,e=i.sibling,n=zf(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function eI(e,t){return t=tj({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function X1(e,t,r,n){return n!==null&&BT(n),Ug(t,e.child,null,r),e=eI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ese(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=KC(Error(Jt(422))),X1(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=tj({mode:"visible",children:n.children},a,0,null),i=jm(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ug(t,e.child,null,o),t.child.memoizedState=KP(o),t.memoizedState=GP,i);if(!(t.mode&1))return X1(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Jt(419)),n=KC(i,n,void 0),X1(e,t,o,n)}if(l=(o&e.childLanes)!==0,Is||l){if(n=uo,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,kd(e,a),Ic(n,e,a,-1))}return oI(),n=KC(Error(Jt(421))),X1(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=hse.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ml=Lf(a.nextSibling),yl=t,Ja=!0,Ac=null,e!==null&&(Ul[Wl++]=id,Ul[Wl++]=od,Ul[Wl++]=Lm,id=e.id,od=e.overflow,Lm=t),t=eI(t,n.children),t.flags|=4096,t)}function CR(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zP(e.return,t,r)}function YC(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function JU(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(fs(e,t,n.children,r),n=ti.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&CR(e,r,t);else if(e.tag===19)CR(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ea(ti,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&F2(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),YC(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&F2(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}YC(t,!0,r,null,i);break;case"together":YC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function r2(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Od(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fm|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Jt(153));if(t.child!==null){for(e=t.child,r=zf(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zf(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tse(e,t,r){switch(t.tag){case 3:YU(t),qg();break;case 5:SU(t);break;case 1:$s(t.type)&&I2(t);break;case 4:HT(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ea(R2,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ea(ti,ti.current&1),t.flags|=128,null):r&t.child.childLanes?XU(e,t,r):(Ea(ti,ti.current&1),e=Od(e,t,r),e!==null?e.sibling:null);Ea(ti,ti.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return JU(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(ti,ti.current),n)break;return null;case 22:case 23:return t.lanes=0,GU(e,t,r)}return Od(e,t,r)}var QU,YP,ZU,eW;QU=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};YP=function(){};ZU=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,lm(gu.current);var i=null;switch(r){case"input":a=vP(e,a),n=vP(e,n),i=[];break;case"select":a=ii({},a,{value:void 0}),n=ii({},n,{value:void 0}),i=[];break;case"textarea":a=bP(e,a),n=bP(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=O2)}_P(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yx.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a?.[u],n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yx.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$a("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};eW=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ny(e,t){if(!Ja)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Bo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function rse(e,t,r){var n=t.pendingProps;switch(FT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bo(t),null;case 1:return $s(t.type)&&T2(),Bo(t),null;case 3:return n=t.stateNode,Wg(),qa(Ls),qa(es),KT(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(K1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ac!==null&&(nE(Ac),Ac=null))),YP(e,t),Bo(t),null;case 5:GT(t);var a=lm(s0.current);if(r=t.type,e!==null&&t.stateNode!=null)ZU(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Jt(166));return Bo(t),null}if(e=lm(gu.current),K1(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ou]=t,n[i0]=i,e=(t.mode&1)!==0,r){case"dialog":$a("cancel",n),$a("close",n);break;case"iframe":case"object":case"embed":$a("load",n);break;case"video":case"audio":for(a=0;a<nx.length;a++)$a(nx[a],n);break;case"source":$a("error",n);break;case"img":case"image":case"link":$a("error",n),$a("load",n);break;case"details":$a("toggle",n);break;case"input":MM(n,i),$a("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},$a("invalid",n);break;case"textarea":LM(n,i),$a("invalid",n)}_P(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&G1(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&G1(n.textContent,l,e),a=["children",""+l]):Yx.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$a("scroll",n)}switch(r){case"input":F1(n),RM(n,i,!0);break;case"textarea":F1(n),$M(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=O2)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=P9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ou]=t,e[i0]=n,QU(e,t,!1,!1),t.stateNode=e;e:{switch(o=SP(r,n),r){case"dialog":$a("cancel",e),$a("close",e),a=n;break;case"iframe":case"object":case"embed":$a("load",e),a=n;break;case"video":case"audio":for(a=0;a<nx.length;a++)$a(nx[a],e);a=n;break;case"source":$a("error",e),a=n;break;case"img":case"image":case"link":$a("error",e),$a("load",e),a=n;break;case"details":$a("toggle",e),a=n;break;case"input":MM(e,n),a=vP(e,n),$a("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ii({},n,{value:void 0}),$a("invalid",e);break;case"textarea":LM(e,n),a=bP(e,n),$a("invalid",e);break;default:a=n}_P(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?O9(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&E9(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Xx(e,c):typeof c=="number"&&Xx(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yx.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$a("scroll",e):c!=null&&jT(e,i,c,o))}switch(r){case"input":F1(e),RM(e,n,!1);break;case"textarea":F1(e),$M(e);break;case"option":n.value!=null&&e.setAttribute("value",""+eh(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?yg(e,!!n.multiple,i,!1):n.defaultValue!=null&&yg(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=O2)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bo(t),null;case 6:if(e&&t.stateNode!=null)eW(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Jt(166));if(r=lm(s0.current),lm(gu.current),K1(t)){if(n=t.stateNode,r=t.memoizedProps,n[ou]=t,(i=n.nodeValue!==r)&&(e=yl,e!==null))switch(e.tag){case 3:G1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&G1(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ou]=t,t.stateNode=n}return Bo(t),null;case 13:if(qa(ti),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ja&&ml!==null&&t.mode&1&&!(t.flags&128))yU(),qg(),t.flags|=98560,i=!1;else if(i=K1(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Jt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Jt(317));i[ou]=t}else qg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bo(t),i=!1}else Ac!==null&&(nE(Ac),Ac=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ti.current&1?Zi===0&&(Zi=3):oI())),t.updateQueue!==null&&(t.flags|=4),Bo(t),null);case 4:return Wg(),YP(e,t),e===null&&n0(t.stateNode.containerInfo),Bo(t),null;case 10:return UT(t.type._context),Bo(t),null;case 17:return $s(t.type)&&T2(),Bo(t),null;case 19:if(qa(ti),i=t.memoizedState,i===null)return Bo(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ny(i,!1);else{if(Zi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=F2(e),o!==null){for(t.flags|=128,Ny(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ea(ti,ti.current&1|2),t.child}e=e.sibling}i.tail!==null&&bi()>Hg&&(t.flags|=128,n=!0,Ny(i,!1),t.lanes=4194304)}else{if(!n)if(e=F2(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ny(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ja)return Bo(t),null}else 2*bi()-i.renderingStartTime>Hg&&r!==1073741824&&(t.flags|=128,n=!0,Ny(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=bi(),t.sibling=null,r=ti.current,Ea(ti,n?r&1|2:r&1),t):(Bo(t),null);case 22:case 23:return iI(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?sl&1073741824&&(Bo(t),t.subtreeFlags&6&&(t.flags|=8192)):Bo(t),null;case 24:return null;case 25:return null}throw Error(Jt(156,t.tag))}function nse(e,t){switch(FT(t),t.tag){case 1:return $s(t.type)&&T2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wg(),qa(Ls),qa(es),KT(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return GT(t),null;case 13:if(qa(ti),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Jt(340));qg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qa(ti),null;case 4:return Wg(),null;case 10:return UT(t.type._context),null;case 22:case 23:return iI(),null;case 24:return null;default:return null}}var J1=!1,Jo=!1,ase=typeof WeakSet=="function"?WeakSet:Set,pr=null;function og(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hi(e,t,n)}else r.current=null}function XP(e,t,r){try{r()}catch(n){hi(e,t,n)}}var AR=!1;function ise(e,t){if(IP=P2,e=iU(),LT(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(DP={focusedElem:e,selectionRange:r},P2=!1,pr=t;pr!==null;)if(t=pr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pr=e;else for(;pr!==null;){t=pr;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,y=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:wc(t.type,p),y);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Jt(163))}}catch(S){hi(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,pr=e;break}pr=t.return}return g=AR,AR=!1,g}function vx(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&XP(t,r,i)}a=a.next}while(a!==n)}}function ZS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function JP(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function tW(e){var t=e.alternate;t!==null&&(e.alternate=null,tW(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ou],delete t[i0],delete t[LP],delete t[zoe],delete t[qoe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rW(e){return e.tag===5||e.tag===3||e.tag===4}function PR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rW(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function QP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=O2));else if(n!==4&&(e=e.child,e!==null))for(QP(e,t,r),e=e.sibling;e!==null;)QP(e,t,r),e=e.sibling}function ZP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ZP(e,t,r),e=e.sibling;e!==null;)ZP(e,t,r),e=e.sibling}var No=null,_c=!1;function rf(e,t,r){for(r=r.child;r!==null;)nW(e,t,r),r=r.sibling}function nW(e,t,r){if(pu&&typeof pu.onCommitFiberUnmount=="function")try{pu.onCommitFiberUnmount(VS,r)}catch{}switch(r.tag){case 5:Jo||og(r,t);case 6:var n=No,a=_c;No=null,rf(e,t,r),No=n,_c=a,No!==null&&(_c?(e=No,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):No.removeChild(r.stateNode));break;case 18:No!==null&&(_c?(e=No,r=r.stateNode,e.nodeType===8?qC(e.parentNode,r):e.nodeType===1&&qC(e,r),e0(e)):qC(No,r.stateNode));break;case 4:n=No,a=_c,No=r.stateNode.containerInfo,_c=!0,rf(e,t,r),No=n,_c=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&XP(r,t,o),a=a.next}while(a!==n)}rf(e,t,r);break;case 1:if(!Jo&&(og(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){hi(r,t,l)}rf(e,t,r);break;case 21:rf(e,t,r);break;case 22:r.mode&1?(Jo=(n=Jo)||r.memoizedState!==null,rf(e,t,r),Jo=n):rf(e,t,r);break;default:rf(e,t,r)}}function ER(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ase),t.forEach(function(n){var a=mse.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function mc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:No=l.stateNode,_c=!1;break e;case 3:No=l.stateNode.containerInfo,_c=!0;break e;case 4:No=l.stateNode.containerInfo,_c=!0;break e}l=l.return}if(No===null)throw Error(Jt(160));nW(i,o,a),No=null,_c=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){hi(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aW(t,e),t=t.sibling}function aW(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),eu(e),n&4){try{vx(3,e,e.return),ZS(3,e)}catch(p){hi(e,e.return,p)}try{vx(5,e,e.return)}catch(p){hi(e,e.return,p)}}break;case 1:mc(t,e),eu(e),n&512&&r!==null&&og(r,r.return);break;case 5:if(mc(t,e),eu(e),n&512&&r!==null&&og(r,r.return),e.flags&32){var a=e.stateNode;try{Xx(a,"")}catch(p){hi(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&C9(a,i),SP(l,o);var u=SP(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?O9(a,f):d==="dangerouslySetInnerHTML"?E9(a,f):d==="children"?Xx(a,f):jT(a,d,f,u)}switch(l){case"input":yP(a,i);break;case"textarea":A9(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?yg(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?yg(a,!!i.multiple,i.defaultValue,!0):yg(a,!!i.multiple,i.multiple?[]:"",!1))}a[i0]=i}catch(p){hi(e,e.return,p)}}break;case 6:if(mc(t,e),eu(e),n&4){if(e.stateNode===null)throw Error(Jt(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){hi(e,e.return,p)}}break;case 3:if(mc(t,e),eu(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{e0(t.containerInfo)}catch(p){hi(e,e.return,p)}break;case 4:mc(t,e),eu(e);break;case 13:mc(t,e),eu(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(nI=bi())),n&4&&ER(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Jo=(u=Jo)||d,mc(t,e),Jo=u):mc(t,e),eu(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(pr=e,d=e.child;d!==null;){for(f=pr=d;pr!==null;){switch(h=pr,m=h.child,h.tag){case 0:case 11:case 14:case 15:vx(4,h,h.return);break;case 1:og(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){hi(n,r,p)}}break;case 5:og(h,h.return);break;case 22:if(h.memoizedState!==null){OR(f);continue}}m!==null?(m.return=h,pr=m):OR(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=k9("display",o))}catch(p){hi(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){hi(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mc(t,e),eu(e),n&4&&ER(e);break;case 21:break;default:mc(t,e),eu(e)}}function eu(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(rW(r)){var n=r;break e}r=r.return}throw Error(Jt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Xx(a,""),n.flags&=-33);var i=PR(e);ZP(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=PR(e);QP(e,l,o);break;default:throw Error(Jt(161))}}catch(c){hi(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ose(e,t,r){pr=e,iW(e)}function iW(e,t,r){for(var n=(e.mode&1)!==0;pr!==null;){var a=pr,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||J1;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Jo;l=J1;var u=Jo;if(J1=o,(Jo=c)&&!u)for(pr=a;pr!==null;)o=pr,c=o.child,o.tag===22&&o.memoizedState!==null?TR(a):c!==null?(c.return=o,pr=c):TR(a);for(;i!==null;)pr=i,iW(i),i=i.sibling;pr=a,J1=l,Jo=u}kR(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,pr=i):kR(e)}}function kR(e){for(;pr!==null;){var t=pr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jo||ZS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Jo)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:wc(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mR(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}mR(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&e0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Jt(163))}Jo||t.flags&512&&JP(t)}catch(h){hi(t,t.return,h)}}if(t===e){pr=null;break}if(r=t.sibling,r!==null){r.return=t.return,pr=r;break}pr=t.return}}function OR(e){for(;pr!==null;){var t=pr;if(t===e){pr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pr=r;break}pr=t.return}}function TR(e){for(;pr!==null;){var t=pr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ZS(4,t)}catch(c){hi(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){hi(t,a,c)}}var i=t.return;try{JP(t)}catch(c){hi(t,i,c)}break;case 5:var o=t.return;try{JP(t)}catch(c){hi(t,o,c)}}}catch(c){hi(t,t.return,c)}if(t===e){pr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pr=l;break}pr=t.return}}var sse=Math.ceil,q2=qd.ReactCurrentDispatcher,tI=qd.ReactCurrentOwner,Ql=qd.ReactCurrentBatchConfig,Vn=0,uo=null,Di=null,Eo=0,sl=0,sg=mh(0),Zi=0,d0=null,Fm=0,ej=0,rI=0,yx=null,Os=null,nI=0,Hg=1/0,Yu=null,U2=!1,eE=null,Ff=null,Q1=!1,Cf=null,W2=0,xx=0,tE=null,n2=-1,a2=0;function xs(){return Vn&6?bi():n2!==-1?n2:n2=bi()}function Bf(e){return e.mode&1?Vn&2&&Eo!==0?Eo&-Eo:Woe.transition!==null?(a2===0&&(a2=U9()),a2):(e=oa,e!==0||(e=window.event,e=e===void 0?16:X9(e.type)),e):1}function Ic(e,t,r,n){if(50<xx)throw xx=0,tE=null,Error(Jt(185));Nb(e,r,n),(!(Vn&2)||e!==uo)&&(e===uo&&(!(Vn&2)&&(ej|=r),Zi===4&&bf(e,Eo)),Fs(e,n),r===1&&Vn===0&&!(t.mode&1)&&(Hg=bi()+500,XS&&ph()))}function Fs(e,t){var r=e.callbackNode;Wie(e,t);var n=A2(e,e===uo?Eo:0);if(n===0)r!==null&&zM(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&zM(r),t===1)e.tag===0?Uoe(IR.bind(null,e)):pU(IR.bind(null,e)),Foe(function(){!(Vn&6)&&ph()}),r=null;else{switch(W9(n)){case 1:r=ET;break;case 4:r=z9;break;case 16:r=C2;break;case 536870912:r=q9;break;default:r=C2}r=hW(r,oW.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oW(e,t){if(n2=-1,a2=0,Vn&6)throw Error(Jt(327));var r=e.callbackNode;if(Sg()&&e.callbackNode!==r)return null;var n=A2(e,e===uo?Eo:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=V2(e,n);else{t=n;var a=Vn;Vn|=2;var i=lW();(uo!==e||Eo!==t)&&(Yu=null,Hg=bi()+500,Sm(e,t));do try{use();break}catch(l){sW(e,l)}while(1);qT(),q2.current=i,Vn=a,Di!==null?t=0:(uo=null,Eo=0,t=Zi)}if(t!==0){if(t===2&&(a=PP(e),a!==0&&(n=a,t=rE(e,a))),t===1)throw r=d0,Sm(e,0),bf(e,n),Fs(e,bi()),r;if(t===6)bf(e,n);else{if(a=e.current.alternate,!(n&30)&&!lse(a)&&(t=V2(e,n),t===2&&(i=PP(e),i!==0&&(n=i,t=rE(e,i))),t===1))throw r=d0,Sm(e,0),bf(e,n),Fs(e,bi()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Jt(345));case 2:Wh(e,Os,Yu);break;case 3:if(bf(e,n),(n&130023424)===n&&(t=nI+500-bi(),10<t)){if(A2(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){xs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=RP(Wh.bind(null,e,Os,Yu),t);break}Wh(e,Os,Yu);break;case 4:if(bf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Tc(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=bi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sse(n/1960))-n,10<n){e.timeoutHandle=RP(Wh.bind(null,e,Os,Yu),n);break}Wh(e,Os,Yu);break;case 5:Wh(e,Os,Yu);break;default:throw Error(Jt(329))}}}return Fs(e,bi()),e.callbackNode===r?oW.bind(null,e):null}function rE(e,t){var r=yx;return e.current.memoizedState.isDehydrated&&(Sm(e,t).flags|=256),e=V2(e,t),e!==2&&(t=Os,Os=r,t!==null&&nE(t)),e}function nE(e){Os===null?Os=e:Os.push.apply(Os,e)}function lse(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Lc(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bf(e,t){for(t&=~rI,t&=~ej,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Tc(t),n=1<<r;e[r]=-1,t&=~n}}function IR(e){if(Vn&6)throw Error(Jt(327));Sg();var t=A2(e,0);if(!(t&1))return Fs(e,bi()),null;var r=V2(e,t);if(e.tag!==0&&r===2){var n=PP(e);n!==0&&(t=n,r=rE(e,n))}if(r===1)throw r=d0,Sm(e,0),bf(e,t),Fs(e,bi()),r;if(r===6)throw Error(Jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wh(e,Os,Yu),Fs(e,bi()),null}function aI(e,t){var r=Vn;Vn|=1;try{return e(t)}finally{Vn=r,Vn===0&&(Hg=bi()+500,XS&&ph())}}function Bm(e){Cf!==null&&Cf.tag===0&&!(Vn&6)&&Sg();var t=Vn;Vn|=1;var r=Ql.transition,n=oa;try{if(Ql.transition=null,oa=1,e)return e()}finally{oa=n,Ql.transition=r,Vn=t,!(Vn&6)&&ph()}}function iI(){sl=sg.current,qa(sg)}function Sm(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$oe(r)),Di!==null)for(r=Di.return;r!==null;){var n=r;switch(FT(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&T2();break;case 3:Wg(),qa(Ls),qa(es),KT();break;case 5:GT(n);break;case 4:Wg();break;case 13:qa(ti);break;case 19:qa(ti);break;case 10:UT(n.type._context);break;case 22:case 23:iI()}r=r.return}if(uo=e,Di=e=zf(e.current,null),Eo=sl=t,Zi=0,d0=null,rI=ej=Fm=0,Os=yx=null,sm!==null){for(t=0;t<sm.length;t++)if(r=sm[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}sm=null}return e}function sW(e,t){do{var r=Di;try{if(qT(),e2.current=z2,B2){for(var n=ni.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}B2=!1}if($m=0,lo=Yi=ni=null,gx=!1,l0=0,tI.current=null,r===null||r.return===null){Zi=1,d0=t,Di=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Eo,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=bR(o);if(m!==null){m.flags&=-257,wR(m,o,l,i,t),m.mode&1&&xR(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){xR(i,u,t),oI();break e}c=Error(Jt(426))}}else if(Ja&&l.mode&1){var y=bR(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),wR(y,o,l,i,t),BT(Vg(c,l));break e}}i=c=Vg(c,l),Zi!==4&&(Zi=2),yx===null?yx=[i]:yx.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=WU(i,c,t);hR(i,x);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ff===null||!Ff.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=VU(i,l,t);hR(i,S);break e}}i=i.return}while(i!==null)}uW(r)}catch(j){t=j,Di===r&&r!==null&&(Di=r=r.return);continue}break}while(1)}function lW(){var e=q2.current;return q2.current=z2,e===null?z2:e}function oI(){(Zi===0||Zi===3||Zi===2)&&(Zi=4),uo===null||!(Fm&268435455)&&!(ej&268435455)||bf(uo,Eo)}function V2(e,t){var r=Vn;Vn|=2;var n=lW();(uo!==e||Eo!==t)&&(Yu=null,Sm(e,t));do try{cse();break}catch(a){sW(e,a)}while(1);if(qT(),Vn=r,q2.current=n,Di!==null)throw Error(Jt(261));return uo=null,Eo=0,Zi}function cse(){for(;Di!==null;)cW(Di)}function use(){for(;Di!==null&&!Mie();)cW(Di)}function cW(e){var t=fW(e.alternate,e,sl);e.memoizedProps=e.pendingProps,t===null?uW(e):Di=t,tI.current=null}function uW(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=nse(r,t),r!==null){r.flags&=32767,Di=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zi=6,Di=null;return}}else if(r=rse(r,t,sl),r!==null){Di=r;return}if(t=t.sibling,t!==null){Di=t;return}Di=t=e}while(t!==null);Zi===0&&(Zi=5)}function Wh(e,t,r){var n=oa,a=Ql.transition;try{Ql.transition=null,oa=1,dse(e,t,r,n)}finally{Ql.transition=a,oa=n}return null}function dse(e,t,r,n){do Sg();while(Cf!==null);if(Vn&6)throw Error(Jt(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Jt(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Vie(e,i),e===uo&&(Di=uo=null,Eo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Q1||(Q1=!0,hW(C2,function(){return Sg(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ql.transition,Ql.transition=null;var o=oa;oa=1;var l=Vn;Vn|=4,tI.current=null,ise(e,r),aW(r,e),Ooe(DP),P2=!!IP,DP=IP=null,e.current=r,ose(r),Rie(),Vn=l,oa=o,Ql.transition=i}else e.current=r;if(Q1&&(Q1=!1,Cf=e,W2=a),i=e.pendingLanes,i===0&&(Ff=null),Fie(r.stateNode),Fs(e,bi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(U2)throw U2=!1,e=eE,eE=null,e;return W2&1&&e.tag!==0&&Sg(),i=e.pendingLanes,i&1?e===tE?xx++:(xx=0,tE=e):xx=0,ph(),null}function Sg(){if(Cf!==null){var e=W9(W2),t=Ql.transition,r=oa;try{if(Ql.transition=null,oa=16>e?16:e,Cf===null)var n=!1;else{if(e=Cf,Cf=null,W2=0,Vn&6)throw Error(Jt(331));var a=Vn;for(Vn|=4,pr=e.current;pr!==null;){var i=pr,o=i.child;if(pr.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(pr=u;pr!==null;){var d=pr;switch(d.tag){case 0:case 11:case 15:vx(8,d,i)}var f=d.child;if(f!==null)f.return=d,pr=f;else for(;pr!==null;){d=pr;var h=d.sibling,m=d.return;if(tW(d),d===u){pr=null;break}if(h!==null){h.return=m,pr=h;break}pr=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}pr=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,pr=o;else e:for(;pr!==null;){if(i=pr,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vx(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,pr=x;break e}pr=i.return}}var b=e.current;for(pr=b;pr!==null;){o=pr;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,pr=w;else e:for(o=b;pr!==null;){if(l=pr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ZS(9,l)}}catch(j){hi(l,l.return,j)}if(l===o){pr=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,pr=S;break e}pr=l.return}}if(Vn=a,ph(),pu&&typeof pu.onPostCommitFiberRoot=="function")try{pu.onPostCommitFiberRoot(VS,e)}catch{}n=!0}return n}finally{oa=r,Ql.transition=t}}return!1}function DR(e,t,r){t=Vg(r,t),t=WU(e,t,1),e=$f(e,t,1),t=xs(),e!==null&&(Nb(e,1,t),Fs(e,t))}function hi(e,t,r){if(e.tag===3)DR(e,e,r);else for(;t!==null;){if(t.tag===3){DR(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ff===null||!Ff.has(n))){e=Vg(r,e),e=VU(t,e,1),t=$f(t,e,1),e=xs(),t!==null&&(Nb(t,1,e),Fs(t,e));break}}t=t.return}}function fse(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xs(),e.pingedLanes|=e.suspendedLanes&r,uo===e&&(Eo&r)===r&&(Zi===4||Zi===3&&(Eo&130023424)===Eo&&500>bi()-nI?Sm(e,0):rI|=r),Fs(e,t)}function dW(e,t){t===0&&(e.mode&1?(t=q1,q1<<=1,!(q1&130023424)&&(q1=4194304)):t=1);var r=xs();e=kd(e,t),e!==null&&(Nb(e,t,r),Fs(e,r))}function hse(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),dW(e,r)}function mse(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Jt(314))}n!==null&&n.delete(t),dW(e,r)}var fW;fW=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ls.current)Is=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Is=!1,tse(e,t,r);Is=!!(e.flags&131072)}else Is=!1,Ja&&t.flags&1048576&&gU(t,M2,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;r2(e,t),e=t.pendingProps;var a=zg(t,es.current);_g(t,r),a=XT(null,t,n,e,a,r);var i=JT();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$s(n)?(i=!0,I2(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,VT(t),a.updater=QS,t.stateNode=a,a._reactInternals=t,UP(t,n,e,r),t=HP(null,t,n,!0,i,r)):(t.tag=0,Ja&&i&&$T(t),fs(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(r2(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=gse(n),e=wc(n,e),a){case 0:t=VP(null,t,n,e,r);break e;case 1:t=jR(null,t,n,e,r);break e;case 11:t=_R(null,t,n,e,r);break e;case 14:t=SR(null,t,n,wc(n.type,e),r);break e}throw Error(Jt(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),VP(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),jR(e,t,n,a,r);case 3:e:{if(YU(t),e===null)throw Error(Jt(387));n=t.pendingProps,i=t.memoizedState,a=i.element,_U(e,t),$2(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Vg(Error(Jt(423)),t),t=NR(e,t,n,r,a);break e}else if(n!==a){a=Vg(Error(Jt(424)),t),t=NR(e,t,n,r,a);break e}else for(ml=Lf(t.stateNode.containerInfo.firstChild),yl=t,Ja=!0,Ac=null,r=bU(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qg(),n===a){t=Od(e,t,r);break e}fs(e,t,n,r)}t=t.child}return t;case 5:return SU(t),e===null&&BP(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,MP(n,a)?o=null:i!==null&&MP(n,i)&&(t.flags|=32),KU(e,t),fs(e,t,o,r),t.child;case 6:return e===null&&BP(t),null;case 13:return XU(e,t,r);case 4:return HT(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ug(t,null,n,r):fs(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),_R(e,t,n,a,r);case 7:return fs(e,t,t.pendingProps,r),t.child;case 8:return fs(e,t,t.pendingProps.children,r),t.child;case 12:return fs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ea(R2,n._currentValue),n._currentValue=o,i!==null)if(Lc(i.value,o)){if(i.children===a.children&&!Ls.current){t=Od(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=bd(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),zP(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Jt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),zP(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fs(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,_g(t,r),a=tc(a),n=n(a),t.flags|=1,fs(e,t,n,r),t.child;case 14:return n=t.type,a=wc(n,t.pendingProps),a=wc(n.type,a),SR(e,t,n,a,r);case 15:return HU(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),r2(e,t),t.tag=1,$s(n)?(e=!0,I2(t)):e=!1,_g(t,r),UU(t,n,a),UP(t,n,a,r),HP(null,t,n,!0,e,r);case 19:return JU(e,t,r);case 22:return GU(e,t,r)}throw Error(Jt(156,t.tag))};function hW(e,t){return B9(e,t)}function pse(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gl(e,t,r,n){return new pse(e,t,r,n)}function sI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gse(e){if(typeof e=="function")return sI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===CT)return 11;if(e===AT)return 14}return 2}function zf(e,t){var r=e.alternate;return r===null?(r=Gl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function i2(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")sI(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Jp:return jm(r.children,a,i,t);case NT:o=8,a|=8;break;case hP:return e=Gl(12,r,t,a|2),e.elementType=hP,e.lanes=i,e;case mP:return e=Gl(13,r,t,a),e.elementType=mP,e.lanes=i,e;case pP:return e=Gl(19,r,t,a),e.elementType=pP,e.lanes=i,e;case S9:return tj(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w9:o=10;break e;case _9:o=9;break e;case CT:o=11;break e;case AT:o=14;break e;case mf:o=16,n=null;break e}throw Error(Jt(130,e==null?e:typeof e,""))}return t=Gl(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function jm(e,t,r,n){return e=Gl(7,e,n,t),e.lanes=r,e}function tj(e,t,r,n){return e=Gl(22,e,n,t),e.elementType=S9,e.lanes=r,e.stateNode={isHidden:!1},e}function XC(e,t,r){return e=Gl(6,e,null,t),e.lanes=r,e}function JC(e,t,r){return t=Gl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vse(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OC(0),this.expirationTimes=OC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OC(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lI(e,t,r,n,a,i,o,l,c){return e=new vse(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Gl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},VT(i),e}function yse(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mW(e){if(!e)return th;e=e._reactInternals;e:{if(op(e)!==e||e.tag!==1)throw Error(Jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($s(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Jt(171))}if(e.tag===1){var r=e.type;if($s(r))return mU(e,r,t)}return t}function pW(e,t,r,n,a,i,o,l,c){return e=lI(r,n,!0,e,a,i,o,l,c),e.context=mW(null),r=e.current,n=xs(),a=Bf(r),i=bd(n,a),i.callback=t??null,$f(r,i,a),e.current.lanes=a,Nb(e,a,n),Fs(e,n),e}function rj(e,t,r,n){var a=t.current,i=xs(),o=Bf(a);return r=mW(r),t.context===null?t.context=r:t.pendingContext=r,t=bd(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=$f(a,t,o),e!==null&&(Ic(e,a,o,i),Zw(e,a,o)),o}function H2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function MR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function cI(e,t){MR(e,t),(e=e.alternate)&&MR(e,t)}function xse(){return null}var gW=typeof reportError=="function"?reportError:function(e){console.error(e)};function uI(e){this._internalRoot=e}nj.prototype.render=uI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Jt(409));rj(e,t,null,null)};nj.prototype.unmount=uI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bm(function(){rj(null,e,null,null)}),t[Ed]=null}};function nj(e){this._internalRoot=e}nj.prototype.unstable_scheduleHydration=function(e){if(e){var t=G9();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xf.length&&t!==0&&t<xf[r].priority;r++);xf.splice(r,0,e),r===0&&Y9(e)}};function dI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function RR(){}function bse(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=H2(o);i.call(u)}}var o=pW(t,n,e,0,null,!1,!1,"",RR);return e._reactRootContainer=o,e[Ed]=o.current,n0(e.nodeType===8?e.parentNode:e),Bm(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=H2(c);l.call(u)}}var c=lI(e,0,!1,null,null,!1,!1,"",RR);return e._reactRootContainer=c,e[Ed]=c.current,n0(e.nodeType===8?e.parentNode:e),Bm(function(){rj(t,c,r,n)}),c}function ij(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=H2(o);l.call(c)}}rj(t,o,e,a)}else o=bse(r,t,e,a,n);return H2(o)}V9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=rx(t.pendingLanes);r!==0&&(kT(t,r|1),Fs(t,bi()),!(Vn&6)&&(Hg=bi()+500,ph()))}break;case 13:Bm(function(){var n=kd(e,1);if(n!==null){var a=xs();Ic(n,e,1,a)}}),cI(e,1)}};OT=function(e){if(e.tag===13){var t=kd(e,134217728);if(t!==null){var r=xs();Ic(t,e,134217728,r)}cI(e,134217728)}};H9=function(e){if(e.tag===13){var t=Bf(e),r=kd(e,t);if(r!==null){var n=xs();Ic(r,e,t,n)}cI(e,t)}};G9=function(){return oa};K9=function(e,t){var r=oa;try{return oa=e,t()}finally{oa=r}};NP=function(e,t,r){switch(t){case"input":if(yP(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=YS(n);if(!a)throw Error(Jt(90));N9(n),yP(n,a)}}}break;case"textarea":A9(e,r);break;case"select":t=r.value,t!=null&&yg(e,!!r.multiple,t,!1)}};D9=aI;M9=Bm;var wse={usingClientEntryPoint:!1,Events:[Ab,tg,YS,T9,I9,aI]},Cy={findFiberByHostInstance:om,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_se={bundleType:Cy.bundleType,version:Cy.version,rendererPackageName:Cy.rendererPackageName,rendererConfig:Cy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$9(e),e===null?null:e.stateNode},findFiberByHostInstance:Cy.findFiberByHostInstance||xse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z1.isDisabled&&Z1.supportsFiber)try{VS=Z1.inject(_se),pu=Z1}catch{}}Cl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wse;Cl.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dI(t))throw Error(Jt(200));return yse(e,t,null,r)};Cl.createRoot=function(e,t){if(!dI(e))throw Error(Jt(299));var r=!1,n="",a=gW;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=lI(e,1,!1,null,null,r,!1,n,a),e[Ed]=t.current,n0(e.nodeType===8?e.parentNode:e),new uI(t)};Cl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Jt(188)):(e=Object.keys(e).join(","),Error(Jt(268,e)));return e=$9(t),e=e===null?null:e.stateNode,e};Cl.flushSync=function(e){return Bm(e)};Cl.hydrate=function(e,t,r){if(!aj(t))throw Error(Jt(200));return ij(null,e,t,!0,r)};Cl.hydrateRoot=function(e,t,r){if(!dI(e))throw Error(Jt(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=gW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=pW(t,null,e,1,r??null,a,!1,i,o),e[Ed]=t.current,n0(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new nj(t)};Cl.render=function(e,t,r){if(!aj(t))throw Error(Jt(200));return ij(null,e,t,!1,r)};Cl.unmountComponentAtNode=function(e){if(!aj(e))throw Error(Jt(40));return e._reactRootContainer?(Bm(function(){ij(null,null,e,!1,function(){e._reactRootContainer=null,e[Ed]=null})}),!0):!1};Cl.unstable_batchedUpdates=aI;Cl.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!aj(r))throw Error(Jt(200));if(e==null||e._reactInternals===void 0)throw Error(Jt(38));return ij(e,t,r,!1,n)};Cl.version="18.3.1-next-f1338f8080-20240426";function vW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vW)}catch(e){console.error(e)}}vW(),v9.exports=Cl;var gh=v9.exports;const yW=zn(gh);var LR=gh;dP.createRoot=LR.createRoot,dP.hydrateRoot=LR.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f0.apply(this,arguments)}var Af;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Af||(Af={}));const $R="popstate";function Sse(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return aE("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:G2(a)}return Nse(t,r,null,e)}function ai(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jse(){return Math.random().toString(36).substr(2,8)}function FR(e,t){return{usr:e.state,key:e.key,idx:t}}function aE(e,t,r,n){return r===void 0&&(r=null),f0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lv(t):t,{state:r,key:t&&t.key||n||jse()})}function G2(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lv(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Nse(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Af.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(f0({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Af.Pop;let y=d(),x=y==null?null:y-u;u=y,c&&c({action:l,location:p.location,delta:x})}function h(y,x){l=Af.Push;let b=aE(p.location,y,x);r&&r(b,y),u=d()+1;let w=FR(b,u),S=p.createHref(b);try{o.pushState(w,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(S)}i&&c&&c({action:l,location:p.location,delta:1})}function m(y,x){l=Af.Replace;let b=aE(p.location,y,x);r&&r(b,y),u=d();let w=FR(b,u),S=p.createHref(b);o.replaceState(w,"",S),i&&c&&c({action:l,location:p.location,delta:0})}function g(y){let x=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:G2(y);return b=b.replace(/ $/,"%20"),ai(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let p={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener($R,f),c=y,()=>{a.removeEventListener($R,f),c=null}},createHref(y){return t(a,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(y){return o.go(y)}};return p}var BR;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(BR||(BR={}));function Cse(e,t,r){return r===void 0&&(r="/"),Ase(e,t,r,!1)}function Ase(e,t,r,n){let a=typeof t=="string"?Lv(t):t,i=Gg(a.pathname||"/",r);if(i==null)return null;let o=bW(e);Pse(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Fse(i);l=Lse(o[c],u,n)}return l}function bW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ai(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=qf([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ai(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bW(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Mse(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of wW(i.path))a(i,o,c)}),t}function wW(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=wW(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Pse(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Rse(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ese=/^:[\w-]+$/,kse=3,Ose=2,Tse=1,Ise=10,Dse=-2,zR=e=>e==="*";function Mse(e,t){let r=e.split("/"),n=r.length;return r.some(zR)&&(n+=Dse),t&&(n+=Ose),r.filter(a=>!zR(a)).reduce((a,i)=>a+(Ese.test(i)?kse:i===""?Tse:Ise),n)}function Rse(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Lse(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=K2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=K2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:qf([i,f.pathname]),pathnameBase:Use(qf([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=qf([i,f.pathnameBase]))}return o}function K2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=$se(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function $se(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),xW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Fse(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Gg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Bse(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Lv(e):e;return{pathname:r?r.startsWith("/")?r:zse(r,t):t,search:Wse(n),hash:Vse(a)}}function zse(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function QC(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qse(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function fI(e,t){let r=qse(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function hI(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Lv(e):(a=f0({},e),ai(!a.pathname||!a.pathname.includes("?"),QC("?","pathname","search",a)),ai(!a.pathname||!a.pathname.includes("#"),QC("#","pathname","hash",a)),ai(!a.search||!a.search.includes("#"),QC("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=Bse(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const qf=e=>e.join("/").replace(/\/\/+/g,"/"),Use=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Wse=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Vse=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Hse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _W=["post","put","patch","delete"];new Set(_W);const Gse=["get",..._W];new Set(Gse);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h0.apply(this,arguments)}const oj=v.createContext(null),SW=v.createContext(null),Ud=v.createContext(null),sj=v.createContext(null),vh=v.createContext({outlet:null,matches:[],isDataRoute:!1}),jW=v.createContext(null);function Kse(e,t){let{relative:r}=t===void 0?{}:t;$v()||ai(!1);let{basename:n,navigator:a}=v.useContext(Ud),{hash:i,pathname:o,search:l}=lj(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:qf([n,o])),a.createHref({pathname:c,search:l,hash:i})}function $v(){return v.useContext(sj)!=null}function Us(){return $v()||ai(!1),v.useContext(sj).location}function NW(e){v.useContext(Ud).static||v.useLayoutEffect(e)}function Wc(){let{isDataRoute:e}=v.useContext(vh);return e?sle():Yse()}function Yse(){$v()||ai(!1);let e=v.useContext(oj),{basename:t,future:r,navigator:n}=v.useContext(Ud),{matches:a}=v.useContext(vh),{pathname:i}=Us(),o=JSON.stringify(fI(a,r.v7_relativeSplatPath)),l=v.useRef(!1);return NW(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=hI(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:qf([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function lj(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=v.useContext(Ud),{matches:a}=v.useContext(vh),{pathname:i}=Us(),o=JSON.stringify(fI(a,n.v7_relativeSplatPath));return v.useMemo(()=>hI(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Xse(e,t){return Jse(e,t)}function Jse(e,t,r,n){$v()||ai(!1);let{navigator:a}=v.useContext(Ud),{matches:i}=v.useContext(vh),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Us(),d;if(t){var f;let y=typeof t=="string"?Lv(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||ai(!1),d=y}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=Cse(e,{pathname:m}),p=rle(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:qf([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:qf([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&p?v.createElement(sj.Provider,{value:{location:h0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Af.Pop}},p):p}function Qse(){let e=ole(),t=Hse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,i)}const Zse=v.createElement(Qse,null);class ele extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(vh.Provider,{value:this.props.routeContext},v.createElement(jW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tle(e){let{routeContext:t,match:r,children:n}=e,a=v.useContext(oj);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(vh.Provider,{value:t},n)}function rle(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);d>=0||ai(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,g=!1,p=null,y=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||Zse,c&&(u<0&&h===0?(lle("route-fallback",!1),g=!0,y=null):u===h&&(g=!0,y=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=p:g?w=y:f.route.Component?w=v.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,v.createElement(tle,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?v.createElement(ele,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var CW=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(CW||{}),Y2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Y2||{});function nle(e){let t=v.useContext(oj);return t||ai(!1),t}function ale(e){let t=v.useContext(SW);return t||ai(!1),t}function ile(e){let t=v.useContext(vh);return t||ai(!1),t}function AW(e){let t=ile(),r=t.matches[t.matches.length-1];return r.route.id||ai(!1),r.route.id}function ole(){var e;let t=v.useContext(jW),r=ale(Y2.UseRouteError),n=AW(Y2.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function sle(){let{router:e}=nle(CW.UseNavigateStable),t=AW(Y2.UseNavigateStable),r=v.useRef(!1);return NW(()=>{r.current=!0}),v.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,h0({fromRouteId:t},i)))},[e,t])}const qR={};function lle(e,t,r){!t&&!qR[e]&&(qR[e]=!0)}function cle(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function ule(e){let{to:t,replace:r,state:n,relative:a}=e;$v()||ai(!1);let{future:i,static:o}=v.useContext(Ud),{matches:l}=v.useContext(vh),{pathname:c}=Us(),u=Wc(),d=hI(t,fI(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function Ki(e){ai(!1)}function dle(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Af.Pop,navigator:i,static:o=!1,future:l}=e;$v()&&ai(!1);let c=t.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:i,static:o,future:h0({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Lv(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=n,p=v.useMemo(()=>{let y=Gg(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:m,key:g},navigationType:a}},[c,d,f,h,m,g,a]);return p==null?null:v.createElement(Ud.Provider,{value:u},v.createElement(sj.Provider,{children:r,value:p}))}function PW(e){let{children:t,location:r}=e;return Xse(iE(t),r)}new Promise(()=>{});function iE(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let i=[...t,a];if(n.type===v.Fragment){r.push.apply(r,iE(n.props.children,i));return}n.type!==Ki&&ai(!1),!n.props.index||!n.props.children||ai(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=iE(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X2.apply(this,arguments)}function EW(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function fle(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hle(e,t){return e.button===0&&(!t||t==="_self")&&!fle(e)}function oE(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function mle(e,t){let r=oE(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const ple=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gle=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vle="6";try{window.__reactRouterVersion=vle}catch{}const yle=v.createContext({isTransitioning:!1}),xle="startTransition",UR=wT[xle];function ble(e){let{basename:t,children:r,future:n,window:a}=e,i=v.useRef();i.current==null&&(i.current=Sse({window:a,v5Compat:!0}));let o=i.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=v.useCallback(f=>{u&&UR?UR(()=>c(f)):c(f)},[c,u]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.useEffect(()=>cle(n),[n]),v.createElement(dle,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const wle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_le=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kW=v.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=EW(t,ple),{basename:m}=v.useContext(Ud),g,p=!1;if(typeof u=="string"&&_le.test(u)&&(g=u,wle))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=Gg(S.pathname,m);S.origin===w.origin&&j!=null?u=j+S.search+S.hash:p=!0}catch{}let y=Kse(u,{relative:a}),x=jle(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function b(w){n&&n(w),w.defaultPrevented||x(w)}return v.createElement("a",X2({},h,{href:g||y,onClick:p||i?n:b,ref:r,target:c}))}),Vh=v.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,f=EW(t,gle),h=lj(c,{relative:f.relative}),m=Us(),g=v.useContext(SW),{navigator:p,basename:y}=v.useContext(Ud),x=g!=null&&Cle(h)&&u===!0,b=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,w=m.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&y&&(S=Gg(S,y)||S);const j=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let A=w===b||!o&&w.startsWith(b)&&w.charAt(j)==="/",P=S!=null&&(S===b||!o&&S.startsWith(b)&&S.charAt(b.length)==="/"),C={isActive:A,isPending:P,isTransitioning:x},E=A?n:void 0,R;typeof i=="function"?R=i(C):R=[i,A?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(C):l;return v.createElement(kW,X2({},f,{"aria-current":E,className:R,ref:r,style:k,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var sE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sE||(sE={}));var WR;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(WR||(WR={}));function Sle(e){let t=v.useContext(oj);return t||ai(!1),t}function jle(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Wc(),u=Us(),d=lj(e,{relative:o});return v.useCallback(f=>{if(hle(f,r)){f.preventDefault();let h=n!==void 0?n:G2(u)===G2(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}function Nle(e){let t=v.useRef(oE(e)),r=v.useRef(!1),n=Us(),a=v.useMemo(()=>mle(n.search,r.current?null:t.current),[n.search]),i=Wc(),o=v.useCallback((l,c)=>{const u=oE(typeof l=="function"?l(a):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,o]}function Cle(e,t){t===void 0&&(t={});let r=v.useContext(yle);r==null&&ai(!1);let{basename:n}=Sle(sE.useViewTransitionState),a=lj(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Gg(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Gg(r.nextLocation.pathname,n)||r.nextLocation.pathname;return K2(a.pathname,o)!=null||K2(a.pathname,i)!=null}function OW(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=OW(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=OW(e))&&(n&&(n+=" "),n+=t);return n}function Ale(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=TW(t))&&(n&&(n+=" "),n+=r);return n}function TW(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=TW(e[n]))&&(r&&(r+=" "),r+=t);return r}var mI="-";function Ple(e){var t=kle(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var c=l.split(mI);return c[0]===""&&c.length!==1&&c.shift(),IW(c,t)||Ele(l)}function o(l,c){var u=r[l]||[];return c&&a[l]?[].concat(u,a[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function IW(e,t){if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),a=n?IW(e.slice(1),n):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(mI);return t.validators.find(function(o){var l=o.validator;return l(i)})?.classGroupId}}var VR=/^\[(.+)\]$/;function Ele(e){if(VR.test(e)){var t=VR.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function kle(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},a=Tle(Object.entries(e.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];lE(l,n,o,t)}),n}function lE(e,t,r,n){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:HR(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(Ole(a)){lE(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];lE(c,HR(t,l),r,n)})})}function HR(e,t){var r=e;return t.split(mI).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Ole(e){return e.isThemeGetter}function Tle(e,t){return t?e.map(function(r){var n=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):o});return[n,i]}):e}function Ile(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function a(i,o){r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var DW="!";function Dle(e){var t=e.separator||":",r=t.length===1,n=t[0],a=t.length;return function(o){for(var l=[],c=0,u=0,d,f=0;f<o.length;f++){var h=o[f];if(c===0){if(h===n&&(r||o.slice(f,f+a)===t)){l.push(o.slice(u,f)),u=f+a;continue}if(h==="/"){d=f;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?o:o.substring(u),g=m.startsWith(DW),p=g?m.substring(1):m,y=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:y}}}function Mle(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var a=n[0]==="[";a?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function Rle(e){return{cache:Ile(e.cacheSize),splitModifiers:Dle(e),...Ple(e)}}var Lle=/\s+/;function $le(e,t){var r=t.splitModifiers,n=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(Lle).map(function(o){var l=r(o),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,f=l.maybePostfixModifierPosition,h=n(f?d.substring(0,f):d),m=!!f;if(!h){if(!f)return{isTailwindClass:!1,originalClassName:o};if(h=n(d),!h)return{isTailwindClass:!1,originalClassName:o};m=!1}var g=Mle(c).join(":"),p=u?g+DW:g;return{isTailwindClass:!0,modifierId:p,classGroupId:h,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=l+c;return i.has(d)?!1:(i.add(d),a(c,u).forEach(function(f){return i.add(l+f)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Fle(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a,i,o=l;function l(u){var d=t[0],f=t.slice(1),h=f.reduce(function(m,g){return g(m)},d());return n=Rle(h),a=n.cache.get,i=n.cache.set,o=c,c(u)}function c(u){var d=a(u);if(d)return d;var f=$le(u,n);return i(u,f),f}return function(){return o(Ale.apply(null,arguments))}}function La(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var MW=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ble=/^\d+\/\d+$/,zle=new Set(["px","full","screen"]),qle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ule=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wle=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function pc(e){return cm(e)||zle.has(e)||Ble.test(e)||cE(e)}function cE(e){return sp(e,"length",Xle)}function Vle(e){return sp(e,"size",RW)}function Hle(e){return sp(e,"position",RW)}function Gle(e){return sp(e,"url",Jle)}function ew(e){return sp(e,"number",cm)}function cm(e){return!Number.isNaN(Number(e))}function Kle(e){return e.endsWith("%")&&cm(e.slice(0,-1))}function Ay(e){return GR(e)||sp(e,"number",GR)}function En(e){return MW.test(e)}function Py(){return!0}function nf(e){return qle.test(e)}function Yle(e){return sp(e,"",Qle)}function sp(e,t,r){var n=MW.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function Xle(e){return Ule.test(e)}function RW(){return!1}function Jle(e){return e.startsWith("url(")}function GR(e){return Number.isInteger(Number(e))}function Qle(e){return Wle.test(e)}function Zle(){var e=La("colors"),t=La("spacing"),r=La("blur"),n=La("brightness"),a=La("borderColor"),i=La("borderRadius"),o=La("borderSpacing"),l=La("borderWidth"),c=La("contrast"),u=La("grayscale"),d=La("hueRotate"),f=La("invert"),h=La("gap"),m=La("gradientColorStops"),g=La("gradientColorStopPositions"),p=La("inset"),y=La("margin"),x=La("opacity"),b=La("padding"),w=La("saturate"),S=La("scale"),j=La("sepia"),A=La("skew"),P=La("space"),C=La("translate"),E=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},k=function(){return["auto",En,t]},T=function(){return[En,t]},I=function(){return["",pc]},M=function(){return["auto",cm,En]},z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},W=function(){return["solid","dashed","dotted","double","none"]},U=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},G=function(){return["","0",En]},me=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},de=function(){return[cm,ew]},L=function(){return[cm,En]};return{cacheSize:500,theme:{colors:[Py],spacing:[pc],blur:["none","",nf,En],brightness:de(),borderColor:[e],borderRadius:["none","","full",nf,En],borderSpacing:T(),borderWidth:I(),contrast:de(),grayscale:G(),hueRotate:L(),invert:G(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[Kle,cE],inset:k(),margin:k(),opacity:de(),padding:T(),saturate:de(),scale:de(),sepia:G(),skew:L(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",En]}],container:["container"],columns:[{columns:[nf]}],"break-after":[{"break-after":me()}],"break-before":[{"break-before":me()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(z(),[En])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ay]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",En]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",Ay]}],"grid-cols":[{"grid-cols":[Py]}],"col-start-end":[{col:["auto",{span:["full",Ay]},En]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Py]}],"row-start-end":[{row:["auto",{span:[Ay]},En]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",En]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",En]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",En,t]}],"min-w":[{"min-w":["min","max","fit",En,pc]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[nf]},nf,En]}],h:[{h:[En,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",En,pc]}],"max-h":[{"max-h":[En,t,"min","max","fit"]}],"font-size":[{text:["base",nf,cE]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ew]}],"font-family":[{font:[Py]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",En]}],"line-clamp":[{"line-clamp":["none",cm,ew]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",En,pc]}],"list-image":[{"list-image":["none",En]}],"list-style-type":[{list:["none","disc","decimal",En]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(W(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",pc]}],"underline-offset":[{"underline-offset":["auto",En,pc]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(z(),[Hle])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Vle]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Gle]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(W(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:W()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(W())}],"outline-offset":[{"outline-offset":[En,pc]}],"outline-w":[{outline:[pc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[pc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",nf,Yle]}],"shadow-color":[{shadow:[Py]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":U()}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",nf,En]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",En]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",En]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",En]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ay,En]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",En]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[pc,ew]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var ece=Fle(Zle);function Ot(...e){return ece(Zr(e))}const KR=["#3B82F6","#22C55E","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#F43F5E","#10B981","#A855F7","#EAB308"];function tce(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return Math.abs(t)}function gf(e){if(!e)return"#94A3B8";const t=tce(String(e))%KR.length;return KR[t]}var rce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nce=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ar=(e,t)=>{const r=v.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>v.createElement("svg",{ref:u,...rce,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${nce(e)}`,...c},[...t.map(([d,f])=>v.createElement(d,f)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},ace=ar("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),wd=ar("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Kg=ar("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ice=ar("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),ZC=ar("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),tw=ar("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),pI=ar("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),LW=ar("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),bx=ar("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),oce=ar("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),uE=ar("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),sce=ar("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),gI=ar("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),lce=ar("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),vI=ar("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]),o2=ar("CalendarX",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"10",x2:"14",y1:"14",y2:"18",key:"1g3qc0"}],["line",{x1:"14",x2:"10",y1:"14",y2:"18",key:"1az83m"}]]),vu=ar("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),cce=ar("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ds=ar("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),yI=ar("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),J2=ar("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),$W=ar("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),cj=ar("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),uce=ar("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),dce=ar("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),Yg=ar("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),um=ar("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),dl=ar("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),cl=ar("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Eb=ar("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),kb=ar("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ey=ar("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Kl=ar("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),fce=ar("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),hce=ar("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),mce=ar("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),pce=ar("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),gce=ar("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),vce=ar("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),FW=ar("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),BW=ar("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),yce=ar("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),xce=ar("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),zW=ar("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),jg=ar("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),zm=ar("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bce=ar("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),wce=ar("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),dE=ar("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),_ce=ar("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),e5=ar("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),YR=ar("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),XR=ar("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Xg=ar("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Sce=ar("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),jce=ar("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}]]),Nm=ar("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),JR=ar("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),qW=ar("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),Xa=ar("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Nce=ar("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ao=ar("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),fE=ar("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cce=ar("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),hE=ar("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Ob=ar("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ace=ar("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Pce=ar("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),xI=ar("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),Ece=ar("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Q2=ar("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Tb=ar("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ib=ar("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),bI=ar("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),UW=ar("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),kce=ar("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Oce=ar("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),WW=ar("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),mE=ar("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hs=ar("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),VW=ar("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Z2=ar("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),_d=ar("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),HW=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),uj=v.createContext({}),dj=v.createContext(null),fj=typeof document<"u",wI=fj?v.useLayoutEffect:v.useEffect,GW=v.createContext({strict:!1}),_I=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Tce="framerAppearId",KW="data-"+_I(Tce);function Ice(e,t,r,n){const{visualElement:a}=v.useContext(uj),i=v.useContext(GW),o=v.useContext(dj),l=v.useContext(HW).reducedMotion,c=v.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;v.useInsertionEffect(()=>{u&&u.update(r,o)});const d=v.useRef(!!(r[KW]&&!window.HandoffComplete));return wI(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function lg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Dce(e,t,r){return v.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):lg(r)&&(r.current=n))},[t])}function m0(e){return typeof e=="string"||Array.isArray(e)}function hj(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const SI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jI=["initial",...SI];function mj(e){return hj(e.animate)||jI.some(t=>m0(e[t]))}function YW(e){return!!(mj(e)||e.variants)}function Mce(e,t){if(mj(e)){const{initial:r,animate:n}=e;return{initial:r===!1||m0(r)?r:void 0,animate:m0(n)?n:void 0}}return e.inherit!==!1?t:{}}function Rce(e){const{initial:t,animate:r}=Mce(e,v.useContext(uj));return v.useMemo(()=>({initial:t,animate:r}),[QR(t),QR(r)])}function QR(e){return Array.isArray(e)?e.join(" "):e}const ZR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},p0={};for(const e in ZR)p0[e]={isEnabled:t=>ZR[e].some(r=>!!t[r])};function Lce(e){for(const t in e)p0[t]={...p0[t],...e[t]}}const NI=v.createContext({}),XW=v.createContext({}),$ce=Symbol.for("motionComponentSymbol");function Fce({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){e&&Lce(e);function i(l,c){let u;const d={...v.useContext(HW),...l,layoutId:Bce(l)},{isStatic:f}=d,h=Rce(l),m=n(l,f);if(!f&&fj){h.visualElement=Ice(a,m,d,t);const g=v.useContext(XW),p=v.useContext(GW).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,p,e,g))}return v.createElement(uj.Provider,{value:h},u&&h.visualElement?v.createElement(u,{visualElement:h.visualElement,...d}):null,r(a,l,Dce(m,h.visualElement,c),m,f,h.visualElement))}const o=v.forwardRef(i);return o[$ce]=a,o}function Bce({layoutId:e}){const t=v.useContext(NI).id;return t&&e!==void 0?t+"-"+e:e}function zce(e){function t(n,a={}){return Fce(e(n,a))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,a)=>(r.has(a)||r.set(a,t(a)),r.get(a))})}const qce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function CI(e){return typeof e!="string"||e.includes("-")?!1:!!(qce.indexOf(e)>-1||/[A-Z]/.test(e))}const e_={};function Uce(e){Object.assign(e_,e)}const Db=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lp=new Set(Db);function JW(e,{layout:t,layoutId:r}){return lp.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!e_[e]||e==="opacity")}const zs=e=>!!(e&&e.getVelocity),Wce={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vce=Db.length;function Hce(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,a){let i="";for(let o=0;o<Vce;o++){const l=Db[o];if(e[l]!==void 0){const c=Wce[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):r&&n&&(i="none"),i}const QW=e=>t=>typeof t=="string"&&t.startsWith(e),ZW=QW("--"),pE=QW("var(--"),Gce=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Kce=(e,t)=>t&&typeof e=="number"?t.transform(e):e,rh=(e,t,r)=>Math.min(Math.max(r,e),t),cp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wx={...cp,transform:e=>rh(0,1,e)},rw={...cp,default:1},_x=e=>Math.round(e*1e5)/1e5,pj=/(-)?([\d]*\.?[\d])+/g,eV=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Yce=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Mb(e){return typeof e=="string"}const Rb=e=>({test:t=>Mb(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),uf=Rb("deg"),yu=Rb("%"),Hr=Rb("px"),Xce=Rb("vh"),Jce=Rb("vw"),eL={...yu,parse:e=>yu.parse(e)/100,transform:e=>yu.transform(e*100)},tL={...cp,transform:Math.round},tV={borderWidth:Hr,borderTopWidth:Hr,borderRightWidth:Hr,borderBottomWidth:Hr,borderLeftWidth:Hr,borderRadius:Hr,radius:Hr,borderTopLeftRadius:Hr,borderTopRightRadius:Hr,borderBottomRightRadius:Hr,borderBottomLeftRadius:Hr,width:Hr,maxWidth:Hr,height:Hr,maxHeight:Hr,size:Hr,top:Hr,right:Hr,bottom:Hr,left:Hr,padding:Hr,paddingTop:Hr,paddingRight:Hr,paddingBottom:Hr,paddingLeft:Hr,margin:Hr,marginTop:Hr,marginRight:Hr,marginBottom:Hr,marginLeft:Hr,rotate:uf,rotateX:uf,rotateY:uf,rotateZ:uf,scale:rw,scaleX:rw,scaleY:rw,scaleZ:rw,skew:uf,skewX:uf,skewY:uf,distance:Hr,translateX:Hr,translateY:Hr,translateZ:Hr,x:Hr,y:Hr,z:Hr,perspective:Hr,transformPerspective:Hr,opacity:wx,originX:eL,originY:eL,originZ:Hr,zIndex:tL,fillOpacity:wx,strokeOpacity:wx,numOctaves:tL};function AI(e,t,r,n){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const f in t){const h=t[f];if(ZW(f)){i[f]=h;continue}const m=tV[f],g=Kce(h,m);if(lp.has(f)){if(c=!0,o[f]=g,!d)continue;h!==(m.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,l[f]=g):a[f]=g}if(t.transform||(c||n?a.transform=Hce(e.transform,r,d,n):a.transform&&(a.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:m=0}=l;a.transformOrigin=`${f} ${h} ${m}`}}const PI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rV(e,t,r){for(const n in t)!zs(t[n])&&!JW(n,r)&&(e[n]=t[n])}function Qce({transformTemplate:e},t,r){return v.useMemo(()=>{const n=PI();return AI(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Zce(e,t,r){const n=e.style||{},a={};return rV(a,n,e),Object.assign(a,Qce(e,t,r)),e.transformValues?e.transformValues(a):a}function eue(e,t,r){const n={},a=Zce(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const tue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function t_(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||tue.has(e)}let nV=e=>!t_(e);function rue(e){e&&(nV=t=>t.startsWith("on")?!t_(t):e(t))}try{rue(require("@emotion/is-prop-valid").default)}catch{}function nue(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(nV(a)||r===!0&&t_(a)||!t&&!t_(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function rL(e,t,r){return typeof e=="string"?e:Hr.transform(t+r*e)}function aue(e,t,r){const n=rL(t,e.x,e.width),a=rL(r,e.y,e.height);return`${n} ${a}`}const iue={offset:"stroke-dashoffset",array:"stroke-dasharray"},oue={offset:"strokeDashoffset",array:"strokeDasharray"};function sue(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?iue:oue;e[i.offset]=Hr.transform(-n);const o=Hr.transform(t),l=Hr.transform(r);e[i.array]=`${o} ${l}`}function EI(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,f,h){if(AI(e,u,d,h),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g,dimensions:p}=e;m.transform&&(p&&(g.transform=m.transform),delete m.transform),p&&(a!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=aue(p,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),o!==void 0&&sue(m,o,l,c,!1)}const aV=()=>({...PI(),attrs:{}}),kI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function lue(e,t,r,n){const a=v.useMemo(()=>{const i=aV();return EI(i,t,{enableHardwareAcceleration:!1},kI(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};rV(i,e.style,e),a.style={...i,...a.style}}return a}function cue(e=!1){return(r,n,a,{latestValues:i},o)=>{const c=(CI(r)?lue:eue)(n,i,o,r),d={...nue(n,typeof r=="string",e),...c,ref:a},{children:f}=n,h=v.useMemo(()=>zs(f)?f.get():f,[f]);return v.createElement(r,{...d,children:h})}}function iV(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const oV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sV(e,t,r,n){iV(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(oV.has(a)?a:_I(a),t.attrs[a])}function OI(e,t){const{style:r}=e,n={};for(const a in r)(zs(r[a])||t.style&&zs(t.style[a])||JW(a,e))&&(n[a]=r[a]);return n}function lV(e,t){const r=OI(e,t);for(const n in e)if(zs(e[n])||zs(t[n])){const a=Db.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=e[n]}return r}function TI(e,t,r,n={},a={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),t}function cV(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const r_=e=>Array.isArray(e),uue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),due=e=>r_(e)?e[e.length-1]||0:e;function s2(e){const t=zs(e)?e.get():e;return uue(t)?t.toValue():t}function fue({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,a,i){const o={latestValues:hue(n,a,i,e),renderState:t()};return r&&(o.mount=l=>r(n,l,o)),o}const uV=e=>(t,r)=>{const n=v.useContext(uj),a=v.useContext(dj),i=()=>fue(e,t,n,a);return r?i():cV(i)};function hue(e,t,r,n){const a={},i=n(e,{});for(const h in i)a[h]=s2(i[h]);let{initial:o,animate:l}=e;const c=mj(e),u=YW(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?l:o;return f&&typeof f!="boolean"&&!hj(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const g=TI(e,m);if(!g)return;const{transitionEnd:p,transition:y,...x}=g;for(const b in x){let w=x[b];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(a[b]=w)}for(const b in p)a[b]=p[b]}),a}const pi=e=>e;class nL{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function mue(e){let t=new nL,r=new nL,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const f=d&&a,h=f?t:r;return u&&o.add(c),h.add(c)&&f&&a&&(n=t.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(a){i=!0;return}if(a=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),e())}a=!1,i&&(i=!1,l.process(c))}};return l}const nw=["prepare","read","update","preRender","render","postRender"],pue=40;function gue(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=nw.reduce((f,h)=>(f[h]=mue(()=>r=!0),f),{}),o=f=>i[f].process(a),l=()=>{const f=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(f-a.timestamp,pue),1),a.timestamp=f,a.isProcessing=!0,nw.forEach(o),a.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,a.isProcessing||e(l)};return{schedule:nw.reduce((f,h)=>{const m=i[h];return f[h]=(g,p=!1,y=!1)=>(r||c(),m.schedule(g,p,y)),f},{}),cancel:f=>nw.forEach(h=>i[h].cancel(f)),state:a,steps:i}}const{schedule:ka,cancel:Td,state:Ko,steps:t5}=gue(typeof requestAnimationFrame<"u"?requestAnimationFrame:pi,!0),vue={useVisualState:uV({scrapeMotionValuesFromProps:lV,createRenderState:aV,onMount:(e,t,{renderState:r,latestValues:n})=>{ka.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ka.render(()=>{EI(r,n,{enableHardwareAcceleration:!1},kI(t.tagName),e.transformTemplate),sV(t,r)})}})},yue={useVisualState:uV({scrapeMotionValuesFromProps:OI,createRenderState:PI})};function xue(e,{forwardMotionProps:t=!1},r,n){return{...CI(e)?vue:yue,preloadedFeatures:r,useRender:cue(t),createVisualElement:n,Component:e}}function sd(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const dV=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function gj(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const bue=e=>t=>dV(t)&&e(t,gj(t));function Sd(e,t,r,n){return sd(e,t,bue(r),n)}const wue=(e,t)=>r=>t(e(r)),Uf=(...e)=>e.reduce(wue);function fV(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const aL=fV("dragHorizontal"),iL=fV("dragVertical");function hV(e){let t=!1;if(e==="y")t=iL();else if(e==="x")t=aL();else{const r=aL(),n=iL();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function mV(){const e=hV(!0);return e?(e(),!1):!0}class yh{constructor(t){this.isMounted=!1,this.node=t}update(){}}function oL(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||mV())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&ka.update(()=>l[n](i,o))};return Sd(e.current,r,a,{passive:!e.getProps()[n]})}class _ue extends yh{mount(){this.unmount=Uf(oL(this.node,!0),oL(this.node,!1))}unmount(){}}class Sue extends yh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uf(sd(this.node.current,"focus",()=>this.onFocus()),sd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const pV=(e,t)=>t?e===t?!0:pV(e,t.parentElement):!1;function r5(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,gj(r))}class jue extends yh{constructor(){super(...arguments),this.removeStartListeners=pi,this.removeEndListeners=pi,this.removeAccessibleListeners=pi,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Sd(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();ka.update(()=>{!f&&!pV(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=Sd(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Uf(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||r5("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&ka.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=sd(this.node.current,"keyup",o),r5("down",(l,c)=>{this.startPress(l,c)})},r=sd(this.node.current,"keydown",t),n=()=>{this.isPressing&&r5("cancel",(i,o)=>this.cancelPress(i,o))},a=sd(this.node.current,"blur",n);this.removeAccessibleListeners=Uf(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ka.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!mV()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ka.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Sd(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=sd(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Uf(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gE=new WeakMap,n5=new WeakMap,Nue=e=>{const t=gE.get(e.target);t&&t(e)},Cue=e=>{e.forEach(Nue)};function Aue({root:e,...t}){const r=e||document;n5.has(r)||n5.set(r,{});const n=n5.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(Cue,{root:e,...t})),n[a]}function Pue(e,t,r){const n=Aue(t);return gE.set(e,r),n.observe(e),()=>{gE.delete(e),n.unobserve(e)}}const Eue={some:0,all:1};class kue extends yh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:Eue[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return Pue(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Oue(t,r))&&this.startObserver()}unmount(){}}function Oue({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Tue={inView:{Feature:kue},tap:{Feature:jue},focus:{Feature:Sue},hover:{Feature:_ue}};function gV(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Iue(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function Due(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function vj(e,t,r){const n=e.getProps();return TI(n,t,r!==void 0?r:n.custom,Iue(e),Due(e))}let Mue=pi,II=pi;const Wf=e=>e*1e3,jd=e=>e/1e3,Rue={current:!1},vV=e=>Array.isArray(e)&&typeof e[0]=="number";function yV(e){return!!(!e||typeof e=="string"&&xV[e]||vV(e)||Array.isArray(e)&&e.every(yV))}const ax=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,xV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ax([0,.65,.55,1]),circOut:ax([.55,0,1,.45]),backIn:ax([.31,.01,.66,-.59]),backOut:ax([.33,1.53,.69,.99])};function bV(e){if(e)return vV(e)?ax(e):Array.isArray(e)?e.map(bV):xV[e]}function Lue(e,t,r,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=bV(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function $ue(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const wV=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Fue=1e-7,Bue=12;function zue(e,t,r,n,a){let i,o,l=0;do o=t+(r-t)/2,i=wV(o,n,a)-e,i>0?r=o:t=o;while(Math.abs(i)>Fue&&++l<Bue);return o}function Lb(e,t,r,n){if(e===t&&r===n)return pi;const a=i=>zue(i,0,1,e,r);return i=>i===0||i===1?i:wV(a(i),t,n)}const que=Lb(.42,0,1,1),Uue=Lb(0,0,.58,1),_V=Lb(.42,0,.58,1),Wue=e=>Array.isArray(e)&&typeof e[0]!="number",SV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jV=e=>t=>1-e(1-t),DI=e=>1-Math.sin(Math.acos(e)),NV=jV(DI),Vue=SV(DI),CV=Lb(.33,1.53,.69,.99),MI=jV(CV),Hue=SV(MI),Gue=e=>(e*=2)<1?.5*MI(e):.5*(2-Math.pow(2,-10*(e-1))),Kue={linear:pi,easeIn:que,easeInOut:_V,easeOut:Uue,circIn:DI,circInOut:Vue,circOut:NV,backIn:MI,backInOut:Hue,backOut:CV,anticipate:Gue},sL=e=>{if(Array.isArray(e)){II(e.length===4);const[t,r,n,a]=e;return Lb(t,r,n,a)}else if(typeof e=="string")return Kue[e];return e},RI=(e,t)=>r=>!!(Mb(r)&&Yce.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),AV=(e,t,r)=>n=>{if(!Mb(n))return n;const[a,i,o,l]=n.match(pj);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Yue=e=>rh(0,255,e),a5={...cp,transform:e=>Math.round(Yue(e))},dm={test:RI("rgb","red"),parse:AV("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+a5.transform(e)+", "+a5.transform(t)+", "+a5.transform(r)+", "+_x(wx.transform(n))+")"};function Xue(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const vE={test:RI("#"),parse:Xue,transform:dm.transform},cg={test:RI("hsl","hue"),parse:AV("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+yu.transform(_x(t))+", "+yu.transform(_x(r))+", "+_x(wx.transform(n))+")"},us={test:e=>dm.test(e)||vE.test(e)||cg.test(e),parse:e=>dm.test(e)?dm.parse(e):cg.test(e)?cg.parse(e):vE.parse(e),transform:e=>Mb(e)?e:e.hasOwnProperty("red")?dm.transform(e):cg.transform(e)},ri=(e,t,r)=>-r*e+r*t+e;function i5(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Jue({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=i5(c,l,e+1/3),i=i5(c,l,e),o=i5(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const o5=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},Que=[vE,dm,cg],Zue=e=>Que.find(t=>t.test(e));function lL(e){const t=Zue(e);let r=t.parse(e);return t===cg&&(r=Jue(r)),r}const PV=(e,t)=>{const r=lL(e),n=lL(t),a={...r};return i=>(a.red=o5(r.red,n.red,i),a.green=o5(r.green,n.green,i),a.blue=o5(r.blue,n.blue,i),a.alpha=ri(r.alpha,n.alpha,i),dm.transform(a))};function ede(e){var t,r;return isNaN(e)&&Mb(e)&&(((t=e.match(pj))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(eV))===null||r===void 0?void 0:r.length)||0)>0}const EV={regex:Gce,countKey:"Vars",token:"${v}",parse:pi},kV={regex:eV,countKey:"Colors",token:"${c}",parse:us.parse},OV={regex:pj,countKey:"Numbers",token:"${n}",parse:cp.parse};function s5(e,{regex:t,countKey:r,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function n_(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&s5(r,EV),s5(r,kV),s5(r,OV),r}function TV(e){return n_(e).values}function IV(e){const{values:t,numColors:r,numVars:n,tokenised:a}=n_(e),i=t.length;return o=>{let l=a;for(let c=0;c<i;c++)c<n?l=l.replace(EV.token,o[c]):c<n+r?l=l.replace(kV.token,us.transform(o[c])):l=l.replace(OV.token,_x(o[c]));return l}}const tde=e=>typeof e=="number"?0:e;function rde(e){const t=TV(e);return IV(e)(t.map(tde))}const nh={test:ede,parse:TV,createTransformer:IV,getAnimatableNone:rde},DV=(e,t)=>r=>`${r>0?t:e}`;function MV(e,t){return typeof e=="number"?r=>ri(e,t,r):us.test(e)?PV(e,t):e.startsWith("var(")?DV(e,t):LV(e,t)}const RV=(e,t)=>{const r=[...e],n=r.length,a=e.map((i,o)=>MV(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}},nde=(e,t)=>{const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=MV(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},LV=(e,t)=>{const r=nh.createTransformer(t),n=n_(e),a=n_(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?Uf(RV(n.values,a.values),r):DV(e,t)},g0=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},cL=(e,t)=>r=>ri(e,t,r);function ade(e){return typeof e=="number"?cL:typeof e=="string"?us.test(e)?PV:LV:Array.isArray(e)?RV:typeof e=="object"?nde:cL}function ide(e,t,r){const n=[],a=r||ade(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||pi:t;l=Uf(c,l)}n.push(l)}return n}function $V(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(II(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=ide(t,n,a),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=g0(e[d],e[d+1],u);return o[d](f)};return r?u=>c(rh(e[0],e[i-1],u)):c}function ode(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=g0(0,t,n);e.push(ri(r,1,a))}}function sde(e){const t=[0];return ode(t,e.length-1),t}function lde(e,t){return e.map(r=>r*t)}function cde(e,t){return e.map(()=>t||_V).splice(0,e.length-1)}function a_({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=Wue(n)?n.map(sL):sL(n),i={done:!1,value:t[0]},o=lde(r&&r.length===t.length?r:sde(t),e),l=$V(o,t,{ease:Array.isArray(a)?a:cde(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function FV(e,t){return t?e*(1e3/t):0}const ude=5;function BV(e,t,r){const n=Math.max(t-ude,0);return FV(r-e(n),t-n)}const l5=.001,dde=.01,uL=10,fde=.05,hde=1;function mde({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let a,i;Mue(e<=Wf(uL));let o=1-t;o=rh(fde,hde,o),e=rh(dde,uL,jd(e)),o<1?(a=u=>{const d=u*o,f=d*e,h=d-r,m=yE(u,o),g=Math.exp(-f);return l5-h/m*g},i=u=>{const f=u*o*e,h=f*r+r,m=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-f),p=yE(Math.pow(u,2),o);return(-a(u)+l5>0?-1:1)*((h-m)*g)/p}):(a=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-l5+d*f},i=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=gde(a,i,l);if(e=Wf(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const pde=12;function gde(e,t,r){let n=r;for(let a=1;a<pde;a++)n=n-e(n)/t(n);return n}function yE(e,t){return e*Math.sqrt(1-t*t)}const vde=["duration","bounce"],yde=["stiffness","damping","mass"];function dL(e,t){return t.some(r=>e[r]!==void 0)}function xde(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!dL(e,yde)&&dL(e,vde)){const r=mde(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function zV({keyframes:e,restDelta:t,restSpeed:r,...n}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=xde({...n,velocity:-jd(n.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*u)),p=i-a,y=jd(Math.sqrt(l/u)),x=Math.abs(p)<5;r||(r=x?.01:2),t||(t=x?.005:.5);let b;if(g<1){const w=yE(y,g);b=S=>{const j=Math.exp(-g*y*S);return i-j*((m+g*y*p)/w*Math.sin(w*S)+p*Math.cos(w*S))}}else if(g===1)b=w=>i-Math.exp(-y*w)*(p+(m+y*p)*w);else{const w=y*Math.sqrt(g*g-1);b=S=>{const j=Math.exp(-g*y*S),A=Math.min(w*S,300);return i-j*((m+g*y*p)*Math.sinh(A)+w*p*Math.cosh(A))/w}}return{calculatedDuration:h&&d||null,next:w=>{const S=b(w);if(h)o.done=w>=d;else{let j=m;w!==0&&(g<1?j=BV(b,w,S):j=0);const A=Math.abs(j)<=r,P=Math.abs(i-S)<=t;o.done=A&&P}return o.value=o.done?i:S,o}}}function fL({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,g=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let p=r*t;const y=f+p,x=o===void 0?y:o(y);x!==y&&(p=x-f);const b=C=>-p*Math.exp(-C/n),w=C=>x+b(C),S=C=>{const E=b(C),R=w(C);h.done=Math.abs(E)<=u,h.value=h.done?x:R};let j,A;const P=C=>{m(h.value)&&(j=C,A=zV({keyframes:[h.value,g(h.value)],velocity:BV(w,C,h.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:C=>{let E=!1;return!A&&j===void 0&&(E=!0,S(C),P(C)),j!==void 0&&C>j?A.next(C-j):(!E&&S(C),h)}}}const bde=e=>{const t=({timestamp:r})=>e(r);return{start:()=>ka.update(t,!0),stop:()=>Td(t),now:()=>Ko.isProcessing?Ko.timestamp:performance.now()}},hL=2e4;function mL(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<hL;)t+=r,n=e.next(t);return t>=hL?1/0:t}const wde={decay:fL,inertia:fL,tween:a_,keyframes:a_,spring:zV};function i_({autoplay:e=!0,delay:t=0,driver:r=bde,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...h}){let m=1,g=!1,p,y;const x=()=>{y=new Promise(de=>{p=de})};x();let b;const w=wde[a]||a_;let S;w!==a_&&typeof n[0]!="number"&&(S=$V([0,100],n,{clamp:!1}),n=[0,100]);const j=w({...h,keyframes:n});let A;l==="mirror"&&(A=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let P="idle",C=null,E=null,R=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=mL(j));const{calculatedDuration:k}=j;let T=1/0,I=1/0;k!==null&&(T=k+o,I=T*(i+1)-o);let M=0;const z=de=>{if(E===null)return;m>0&&(E=Math.min(E,de)),m<0&&(E=Math.min(de-I/m,E)),C!==null?M=C:M=Math.round(de-E)*m;const L=M-t*(m>=0?1:-1),B=m>=0?L<0:L>I;M=Math.max(L,0),P==="finished"&&C===null&&(M=I);let X=M,q=j;if(i){const re=Math.min(M,I)/T;let Se=Math.floor(re),Ie=re%1;!Ie&&re>=1&&(Ie=1),Ie===1&&Se--,Se=Math.min(Se,i+1),!!(Se%2)&&(l==="reverse"?(Ie=1-Ie,o&&(Ie-=o/T)):l==="mirror"&&(q=A)),X=rh(0,1,Ie)*T}const Y=B?{done:!1,value:n[0]}:q.next(X);S&&(Y.value=S(Y.value));let{done:Z}=Y;!B&&k!==null&&(Z=m>=0?M>=I:M<=0);const ge=C===null&&(P==="finished"||P==="running"&&Z);return f&&f(Y.value),ge&&$(),Y},W=()=>{b&&b.stop(),b=void 0},U=()=>{P="idle",W(),p(),x(),E=R=null},$=()=>{P="finished",d&&d(),W(),p()},G=()=>{if(g)return;b||(b=r(z));const de=b.now();c&&c(),C!==null?E=de-C:(!E||P==="finished")&&(E=de),P==="finished"&&x(),R=E,C=null,P="running",b.start()};e&&G();const me={then(de,L){return y.then(de,L)},get time(){return jd(M)},set time(de){de=Wf(de),M=de,C!==null||!b||m===0?C=de:E=b.now()-de/m},get duration(){const de=j.calculatedDuration===null?mL(j):j.calculatedDuration;return jd(de)},get speed(){return m},set speed(de){de===m||!b||(m=de,me.time=jd(M))},get state(){return P},play:G,pause:()=>{P="paused",C=M},stop:()=>{g=!0,P!=="idle"&&(P="idle",u&&u(),U())},cancel:()=>{R!==null&&z(R),U()},complete:()=>{P="finished"},sample:de=>(E=0,z(de))};return me}function _de(e){let t;return()=>(t===void 0&&(t=e()),t)}const Sde=_de(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jde=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),aw=10,Nde=2e4,Cde=(e,t)=>t.type==="spring"||e==="backgroundColor"||!yV(t.ease);function Ade(e,t,{onUpdate:r,onComplete:n,...a}){if(!(Sde()&&jde.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:f,duration:h=300,ease:m,times:g}=a;if(Cde(t,a)){const w=i_({...a,repeat:0,delay:0});let S={done:!1,value:f[0]};const j=[];let A=0;for(;!S.done&&A<Nde;)S=w.sample(A),j.push(S.value),A+=aw;g=void 0,f=j,h=A-aw,m="linear"}const p=Lue(e.owner.current,t,f,{...a,duration:h,ease:m,times:g}),y=()=>{u=!1,p.cancel()},x=()=>{u=!0,ka.update(y),l(),d()};return p.onfinish=()=>{u||(e.set($ue(f,a)),n&&n(),x())},{then(w,S){return c.then(w,S)},attachTimeline(w){return p.timeline=w,p.onfinish=null,pi},get time(){return jd(p.currentTime||0)},set time(w){p.currentTime=Wf(w)},get speed(){return p.playbackRate},set speed(w){p.playbackRate=w},get duration(){return jd(h)},play:()=>{o||(p.play(),Td(y))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:w}=p;if(w){const S=i_({...a,autoplay:!1});e.setWithVelocity(S.sample(w-aw).value,S.sample(w).value,aw)}x()},complete:()=>{u||p.finish()},cancel:x}}function Pde({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const a=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:pi,pause:pi,stop:pi,then:i=>(i(),Promise.resolve()),cancel:pi,complete:pi});return t?i_({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const Ede={type:"spring",stiffness:500,damping:25,restSpeed:10},kde=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Ode={type:"keyframes",duration:.8},Tde={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ide=(e,{keyframes:t})=>t.length>2?Ode:lp.has(e)?e.startsWith("scale")?kde(t[1]):Ede:Tde,xE=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(nh.test(t)||t==="0")&&!t.startsWith("url(")),Dde=new Set(["brightness","contrast","saturate","opacity"]);function Mde(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(pj)||[];if(!n)return e;const a=r.replace(n,"");let i=Dde.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const Rde=/([a-z-]*)\(.*?\)/g,bE={...nh,getAnimatableNone:e=>{const t=e.match(Rde);return t?t.map(Mde).join(" "):e}},Lde={...tV,color:us,backgroundColor:us,outlineColor:us,fill:us,stroke:us,borderColor:us,borderTopColor:us,borderRightColor:us,borderBottomColor:us,borderLeftColor:us,filter:bE,WebkitFilter:bE},LI=e=>Lde[e];function qV(e,t){let r=LI(e);return r!==bE&&(r=nh),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const UV=e=>/^0[^.\s]+$/.test(e);function $de(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||UV(e)}function Fde(e,t,r,n){const a=xE(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),$de(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(a&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=qV(t,l)}return i}function Bde({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function $I(e,t){return e[t]||e.default||e}const zde={skipAnimations:!1},FI=(e,t,r,n={})=>a=>{const i=$I(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Wf(o);const c=Fde(t,e,r,i),u=c[0],d=c[c.length-1],f=xE(e,u),h=xE(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(Bde(i)||(m={...m,...Ide(e,m)}),m.duration&&(m.duration=Wf(m.duration)),m.repeatDelay&&(m.repeatDelay=Wf(m.repeatDelay)),!f||!h||Rue.current||i.type===!1||zde.skipAnimations)return Pde(m);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=Ade(t,e,m);if(g)return g}return i_(m)};function o_(e){return!!(zs(e)&&e.add)}const WV=e=>/^\-?\d*\.?\d+$/.test(e);function BI(e,t){e.indexOf(t)===-1&&e.push(t)}function zI(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class qI{constructor(){this.subscriptions=[]}add(t){return BI(this.subscriptions,t),()=>zI(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qde=e=>!isNaN(parseFloat(e));class Ude{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=Ko;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ka.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ka.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=qde(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new qI);const n=this.events[t].add(r);return t==="change"?()=>{n(),ka.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?FV(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jg(e,t){return new Ude(e,t)}const VV=e=>t=>t.test(e),Wde={test:e=>e==="auto",parse:e=>e},HV=[cp,Hr,yu,uf,Jce,Xce,Wde],ky=e=>HV.find(VV(e)),Vde=[...HV,us,nh],Hde=e=>Vde.find(VV(e));function Gde(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Jg(r))}function Kde(e,t){const r=vj(e,t);let{transitionEnd:n={},transition:a={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=due(i[o]);Gde(e,o,l)}}function Yde(e,t,r){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(a=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&a!==void 0?a:t[c]),d!=null&&(typeof d=="string"&&(WV(d)||UV(d))?d=parseFloat(d):!Hde(d)&&nh.test(u)&&(d=qV(c,u)),e.addValue(c,Jg(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function Xde(e,t){return t?(t[e]||t.default||t).from:void 0}function Jde(e,t,r){const n={};for(const a in e){const i=Xde(a,t);if(i!==void 0)n[a]=i;else{const o=r.getValue(a);o&&(n[a]=o.get())}}return n}function Qde({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function Zde(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function GV(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const f in l){const h=e.getValue(f),m=l[f];if(!h||m===void 0||d&&Qde(d,f))continue;const g={delay:r,elapsed:0,...$I(i||{},f)};if(window.HandoffAppearAnimations){const x=e.getProps()[KW];if(x){const b=window.HandoffAppearAnimations(x,f,h,ka);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let p=!g.isHandoff&&!Zde(h,m);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(p=!1),h.animation&&(p=!1),p)continue;h.start(FI(f,h,m,e.shouldReduceMotion&&lp.has(f)?{type:!1}:g));const y=h.animation;o_(c)&&(c.add(f),y.then(()=>c.remove(f))),u.push(y)}return o&&Promise.all(u).then(()=>{o&&Kde(e,o)}),u}function wE(e,t,r={}){const n=vj(e,t,r.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(GV(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=a;return efe(e,t,u+c,d,f,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function efe(e,t,r=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(tfe).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(wE(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function tfe(e,t){return e.sortNodePosition(t)}function rfe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>wE(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=wE(e,t,r);else{const a=typeof t=="function"?vj(e,t,r.custom):t;n=Promise.all(GV(e,a,r))}return n.then(()=>e.notify("AnimationComplete",t))}const nfe=[...SI].reverse(),afe=SI.length;function ife(e){return t=>Promise.all(t.map(({animation:r,options:n})=>rfe(e,r,n)))}function ofe(e){let t=ife(e);const r=lfe();let n=!0;const a=(c,u)=>{const d=vj(e,u);if(d){const{transition:f,transitionEnd:h,...m}=d;c={...c,...m,...h}}return c};function i(c){t=c(e)}function o(c,u){const d=e.getProps(),f=e.getVariantContext(!0)||{},h=[],m=new Set;let g={},p=1/0;for(let x=0;x<afe;x++){const b=nfe[x],w=r[b],S=d[b]!==void 0?d[b]:f[b],j=m0(S),A=b===u?w.isActive:null;A===!1&&(p=x);let P=S===f[b]&&S!==d[b]&&j;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...g},!w.isActive&&A===null||!S&&!w.prevProp||hj(S)||typeof S=="boolean")continue;let E=sfe(w.prevProp,S)||b===u&&w.isActive&&!P&&j||x>p&&j,R=!1;const k=Array.isArray(S)?S:[S];let T=k.reduce(a,{});A===!1&&(T={});const{prevResolvedValues:I={}}=w,M={...I,...T},z=W=>{E=!0,m.has(W)&&(R=!0,m.delete(W)),w.needsAnimating[W]=!0};for(const W in M){const U=T[W],$=I[W];if(g.hasOwnProperty(W))continue;let G=!1;r_(U)&&r_($)?G=!gV(U,$):G=U!==$,G?U!==void 0?z(W):m.add(W):U!==void 0&&m.has(W)?z(W):w.protectedKeys[W]=!0}w.prevProp=S,w.prevResolvedValues=T,w.isActive&&(g={...g,...T}),n&&e.blockInitialAnimation&&(E=!1),E&&(!P||R)&&h.push(...k.map(W=>({animation:W,options:{type:b,...c}})))}if(m.size){const x={};m.forEach(b=>{const w=e.getBaseTarget(b);w!==void 0&&(x[b]=w)}),h.push({animation:x})}let y=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(h):Promise.resolve()}function l(c,u,d){var f;if(r[c].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const h=o(d,c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function sfe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gV(t,e):!1}function Mh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lfe(){return{animate:Mh(!0),whileInView:Mh(),whileHover:Mh(),whileTap:Mh(),whileDrag:Mh(),whileFocus:Mh(),exit:Mh()}}class cfe extends yh{constructor(t){super(t),t.animationState||(t.animationState=ofe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),hj(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let ufe=0;class dfe extends yh{constructor(){super(...arguments),this.id=ufe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const ffe={animation:{Feature:cfe},exit:{Feature:dfe}},pL=(e,t)=>Math.abs(e-t);function hfe(e,t){const r=pL(e.x,t.x),n=pL(e.y,t.y);return Math.sqrt(r**2+n**2)}class KV{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=u5(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=hfe(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=f,{timestamp:p}=Ko;this.history.push({...g,timestamp:p});const{onStart:y,onMove:x}=this.handlers;h||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=c5(h,this.transformPagePoint),ka.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=u5(f.type==="pointercancel"?this.lastMoveEventInfo:c5(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,y),g&&g(f,y)},!dV(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=gj(t),l=c5(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ko;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,u5(l,this.history)),this.removeListeners=Uf(Sd(this.contextWindow,"pointermove",this.handlePointerMove),Sd(this.contextWindow,"pointerup",this.handlePointerUp),Sd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Td(this.updatePoint)}}function c5(e,t){return t?{point:t(e.point)}:e}function gL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function u5({point:e},t){return{point:e,delta:gL(e,YV(t)),offset:gL(e,mfe(t)),velocity:pfe(t,.1)}}function mfe(e){return e[0]}function YV(e){return e[e.length-1]}function pfe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=YV(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>Wf(t)));)r--;if(!n)return{x:0,y:0};const i=jd(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Nl(e){return e.max-e.min}function _E(e,t=0,r=.01){return Math.abs(e-t)<=r}function vL(e,t,r,n=.5){e.origin=n,e.originPoint=ri(t.min,t.max,e.origin),e.scale=Nl(r)/Nl(t),(_E(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ri(r.min,r.max,e.origin)-e.originPoint,(_E(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Sx(e,t,r,n){vL(e.x,t.x,r.x,n?n.originX:void 0),vL(e.y,t.y,r.y,n?n.originY:void 0)}function yL(e,t,r){e.min=r.min+t.min,e.max=e.min+Nl(t)}function gfe(e,t,r){yL(e.x,t.x,r.x),yL(e.y,t.y,r.y)}function xL(e,t,r){e.min=t.min-r.min,e.max=e.min+Nl(t)}function jx(e,t,r){xL(e.x,t.x,r.x),xL(e.y,t.y,r.y)}function vfe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ri(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ri(r,e,n.max):Math.min(e,r)),e}function bL(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function yfe(e,{top:t,left:r,bottom:n,right:a}){return{x:bL(e.x,r,a),y:bL(e.y,t,n)}}function wL(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function xfe(e,t){return{x:wL(e.x,t.x),y:wL(e.y,t.y)}}function bfe(e,t){let r=.5;const n=Nl(e),a=Nl(t);return a>n?r=g0(t.min,t.max-n,e.min):n>a&&(r=g0(e.min,e.max-a,t.min)),rh(0,1,r)}function wfe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const SE=.35;function _fe(e=SE){return e===!1?e=0:e===!0&&(e=SE),{x:_L(e,"left","right"),y:_L(e,"top","bottom")}}function _L(e,t,r){return{min:SL(e,t),max:SL(e,r)}}function SL(e,t){return typeof e=="number"?e:e[t]||0}const jL=()=>({translate:0,scale:1,origin:0,originPoint:0}),ug=()=>({x:jL(),y:jL()}),NL=()=>({min:0,max:0}),Ei=()=>({x:NL(),y:NL()});function ql(e){return[e("x"),e("y")]}function XV({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Sfe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function jfe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function d5(e){return e===void 0||e===1}function jE({scale:e,scaleX:t,scaleY:r}){return!d5(e)||!d5(t)||!d5(r)}function Hh(e){return jE(e)||JV(e)||e.z||e.rotate||e.rotateX||e.rotateY}function JV(e){return CL(e.x)||CL(e.y)}function CL(e){return e&&e!=="0%"}function s_(e,t,r){const n=e-r,a=t*n;return r+a}function AL(e,t,r,n,a){return a!==void 0&&(e=s_(e,a,n)),s_(e,r,n)+t}function NE(e,t=0,r=1,n,a){e.min=AL(e.min,t,r,n,a),e.max=AL(e.max,t,r,n,a)}function QV(e,{x:t,y:r}){NE(e.x,t.translate,t.scale,t.originPoint),NE(e.y,r.translate,r.scale,r.originPoint)}function Nfe(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&dg(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,QV(e,o)),n&&Hh(i.latestValues)&&dg(e,i.latestValues))}t.x=PL(t.x),t.y=PL(t.y)}function PL(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function vf(e,t){e.min=e.min+t,e.max=e.max+t}function EL(e,t,[r,n,a]){const i=t[a]!==void 0?t[a]:.5,o=ri(e.min,e.max,i);NE(e,t[r],t[n],o,t.scale)}const Cfe=["x","scaleX","originX"],Afe=["y","scaleY","originY"];function dg(e,t){EL(e.x,t,Cfe),EL(e.y,t,Afe)}function ZV(e,t){return XV(jfe(e.getBoundingClientRect(),t))}function Pfe(e,t,r){const n=ZV(e,r),{scroll:a}=t;return a&&(vf(n.x,a.offset.x),vf(n.y,a.offset.y)),n}const eH=({current:e})=>e?e.ownerDocument.defaultView:null,Efe=new WeakMap;class kfe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ei(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(gj(d,"page").point)},i=(d,f)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hV(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ql(y=>{let x=this.getAxisMotionValue(y).get()||0;if(yu.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[y];w&&(x=Nl(w)*(parseFloat(x)/100))}}this.originPoint[y]=x}),g&&ka.update(()=>g(d,f),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=f;if(m&&this.currentDirection===null){this.currentDirection=Ofe(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),p&&p(d,f)},l=(d,f)=>this.stop(d,f),c=()=>ql(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new KV(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:eH(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ka.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!iw(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=vfe(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&lg(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=yfe(a.layoutBox,r):this.constraints=!1,this.elastic=_fe(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ql(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=wfe(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!lg(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Pfe(n,a.root,this.visualElement.getTransformPagePoint());let o=xfe(a.layout.layoutBox,i);if(r){const l=r(Sfe(o));this.hasMutatedConstraints=!!l,l&&(o=XV(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=ql(d=>{if(!iw(d,r,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const h=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(FI(t,n,0,r))}stopAnimation(){ql(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ql(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ql(r=>{const{drag:n}=this.getProps();if(!iw(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-ri(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!lg(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ql(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();a[o]=bfe({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ql(o=>{if(!iw(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ri(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;Efe.set(this.visualElement,this);const t=this.visualElement.current,r=Sd(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();lg(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=sd(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ql(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=SE,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function iw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Ofe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Tfe extends yh{constructor(t){super(t),this.removeGroupControls=pi,this.removeListeners=pi,this.controls=new kfe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pi}unmount(){this.removeGroupControls(),this.removeListeners()}}const kL=e=>(t,r)=>{e&&ka.update(()=>e(t,r))};class Ife extends yh{constructor(){super(...arguments),this.removePointerDownListener=pi}onPointerDown(t){this.session=new KV(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eH(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:kL(t),onStart:kL(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&ka.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=Sd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Dfe(){const e=v.useContext(dj);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,a=v.useId();return v.useEffect(()=>n(a),[]),!t&&r?[!1,()=>r&&r(a)]:[!0]}const l2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Oy={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Hr.test(e))e=parseFloat(e);else return e;const r=OL(e,t.target.x),n=OL(e,t.target.y);return`${r}% ${n}%`}},Mfe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=nh.parse(e);if(a.length>5)return n;const i=nh.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const u=ri(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),i(a)}};class Rfe extends le.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;Uce(Lfe),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),l2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ka.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function tH(e){const[t,r]=Dfe(),n=v.useContext(NI);return le.createElement(Rfe,{...e,layoutGroup:n,switchLayoutGroup:v.useContext(XW),isPresent:t,safeToRemove:r})}const Lfe={borderRadius:{...Oy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oy,borderTopRightRadius:Oy,borderBottomLeftRadius:Oy,borderBottomRightRadius:Oy,boxShadow:Mfe},rH=["TopLeft","TopRight","BottomLeft","BottomRight"],$fe=rH.length,TL=e=>typeof e=="string"?parseFloat(e):e,IL=e=>typeof e=="number"||Hr.test(e);function Ffe(e,t,r,n,a,i){a?(e.opacity=ri(0,r.opacity!==void 0?r.opacity:1,Bfe(n)),e.opacityExit=ri(t.opacity!==void 0?t.opacity:1,0,zfe(n))):i&&(e.opacity=ri(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<$fe;o++){const l=`border${rH[o]}Radius`;let c=DL(t,l),u=DL(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||IL(c)===IL(u)?(e[l]=Math.max(ri(TL(c),TL(u),n),0),(yu.test(u)||yu.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=ri(t.rotate||0,r.rotate||0,n))}function DL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Bfe=nH(0,.5,NV),zfe=nH(.5,.95,pi);function nH(e,t,r){return n=>n<e?0:n>t?1:r(g0(e,t,n))}function ML(e,t){e.min=t.min,e.max=t.max}function Ll(e,t){ML(e.x,t.x),ML(e.y,t.y)}function RL(e,t,r,n,a){return e-=t,e=s_(e,1/r,n),a!==void 0&&(e=s_(e,1/a,n)),e}function qfe(e,t=0,r=1,n=.5,a,i=e,o=e){if(yu.test(t)&&(t=parseFloat(t),t=ri(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ri(i.min,i.max,n);e===i&&(l-=t),e.min=RL(e.min,t,r,l,a),e.max=RL(e.max,t,r,l,a)}function LL(e,t,[r,n,a],i,o){qfe(e,t[r],t[n],t[a],t.scale,i,o)}const Ufe=["x","scaleX","originX"],Wfe=["y","scaleY","originY"];function $L(e,t,r,n){LL(e.x,t,Ufe,r?r.x:void 0,n?n.x:void 0),LL(e.y,t,Wfe,r?r.y:void 0,n?n.y:void 0)}function FL(e){return e.translate===0&&e.scale===1}function aH(e){return FL(e.x)&&FL(e.y)}function Vfe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function iH(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function BL(e){return Nl(e.x)/Nl(e.y)}class Hfe{constructor(){this.members=[]}add(t){BI(this.members,t),t.scheduleRender()}remove(t){if(zI(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zL(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Gfe=(e,t)=>e.depth-t.depth;class Kfe{constructor(){this.children=[],this.isDirty=!1}add(t){BI(this.children,t),this.isDirty=!0}remove(t){zI(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Gfe),this.isDirty=!1,this.children.forEach(t)}}function Yfe(e,t){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(Td(n),e(i-t))};return ka.read(n,!0),()=>Td(n)}function Xfe(e){window.MotionDebug&&window.MotionDebug.record(e)}function Jfe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Qfe(e,t,r){const n=zs(e)?e:Jg(e);return n.start(FI("",n,t,r)),n.animation}const qL=["","X","Y","Z"],Zfe={visibility:"hidden"},UL=1e3;let ehe=0;const Gh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function oH({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t?.()){this.id=ehe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gh.totalNodes=Gh.resolvedTargetDeltas=Gh.recalculatedProjection=0,this.nodes.forEach(nhe),this.nodes.forEach(lhe),this.nodes.forEach(che),this.nodes.forEach(ahe),Xfe(Gh)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Kfe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new qI),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Jfe(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Yfe(h,250),l2.hasAnimatedSinceResize&&(l2.hasAnimatedSinceResize=!1,this.nodes.forEach(VL))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||d.getDefaultTransition()||mhe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=d.getProps(),b=!this.targetLayout||!iH(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const S={...$I(p,"layout"),onPlay:y,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else h||VL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Td(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uhe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WL);return}this.isUpdating||this.nodes.forEach(ohe),this.isUpdating=!1,this.nodes.forEach(she),this.nodes.forEach(the),this.nodes.forEach(rhe),this.clearAllSnapshots();const l=performance.now();Ko.delta=rh(0,1e3/60,l-Ko.timestamp),Ko.timestamp=l,Ko.isProcessing=!0,t5.update.process(Ko),t5.preRender.process(Ko),t5.render.process(Ko),Ko.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ihe),this.sharedNodes.forEach(dhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ka.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ka.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ei(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!aH(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Hh(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),phe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ei();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(vf(l.x,c.offset.x),vf(l.y,c.offset.y)),l}removeElementScroll(o){const l=Ei();Ll(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){Ll(l,o);const{scroll:h}=this.root;h&&(vf(l.x,-h.offset.x),vf(l.y,-h.offset.y))}vf(l.x,d.offset.x),vf(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=Ei();Ll(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&dg(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Hh(d.latestValues)&&dg(c,d.latestValues)}return Hh(this.latestValues)&&dg(c,this.latestValues),c}removeTransform(o){const l=Ei();Ll(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Hh(u.latestValues))continue;jE(u.latestValues)&&u.updateSnapshot();const d=Ei(),f=u.measurePageBox();Ll(d,f),$L(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Hh(this.latestValues)&&$L(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ko.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Ko.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ei(),this.relativeTargetOrigin=Ei(),jx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ll(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ei(),this.targetWithTransforms=Ei()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gfe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ll(this.target,this.layout.layoutBox),QV(this.target,this.targetDelta)):Ll(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ei(),this.relativeTargetOrigin=Ei(),jx(this.relativeTargetOrigin,this.target,m.target),Ll(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jE(this.parent.latestValues)||JV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ko.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ll(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Nfe(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=ug(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ug(),this.projectionDeltaWithTransform=ug());const p=this.projectionTransform;Sx(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=zL(this.projectionDelta,this.treeScale),(this.projectionTransform!==p||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Gh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=ug();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Ei(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,y=this.getStack(),x=!y||y.members.length<=1,b=!!(p&&!x&&this.options.crossfade===!0&&!this.path.some(hhe));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const j=S/1e3;HL(f.x,o.x,j),HL(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fhe(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&Vfe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ei()),Ll(w,this.relativeTarget)),p&&(this.animationValues=d,Ffe(d,u,this.latestValues,j,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Td(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ka.update(()=>{l2.hasAnimatedSinceResize=!0,this.currentAnimation=Qfe(0,UL,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&sH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ei();const f=Nl(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=Nl(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Ll(l,c),dg(l,d),Sx(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Hfe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<qL.length;d++){const f="rotate"+qL[d];c[f]&&(u[f]=c[f],o.setStaticValue(f,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Zfe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=s2(o?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=s2(o?.pointerEvents)||""),this.hasProjected&&!Hh(this.latestValues)&&(p.transform=d?d({},""):"none",this.hasProjected=!1),p}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=zL(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in e_){if(h[p]===void 0)continue;const{correct:y,applyTo:x}=e_[p],b=u.transform==="none"?h[p]:y(h[p],f);if(x){const w=x.length;for(let S=0;S<w;S++)u[x[S]]=b}else u[p]=b}return this.options.layoutId&&(u.pointerEvents=f===this?s2(o?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(WL),this.root.sharedNodes.clear()}}}function the(e){e.updateLayout()}function rhe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?ql(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],m=Nl(h);h.min=n[f].min,h.max=h.min+m}):sH(i,r.layoutBox,n)&&ql(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],m=Nl(n[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=ug();Sx(l,n,r.layoutBox);const c=ug();o?Sx(c,e.applyTransform(a,!0),r.measuredBox):Sx(c,n,r.layoutBox);const u=!aH(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const g=Ei();jx(g,r.layoutBox,h.layoutBox);const p=Ei();jx(p,n,m.layoutBox),iH(g,p)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function nhe(e){Gh.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ahe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ihe(e){e.clearSnapshot()}function WL(e){e.clearMeasurements()}function ohe(e){e.isLayoutDirty=!1}function she(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function VL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function lhe(e){e.resolveTargetDelta()}function che(e){e.calcProjection()}function uhe(e){e.resetRotation()}function dhe(e){e.removeLeadSnapshot()}function HL(e,t,r){e.translate=ri(t.translate,0,r),e.scale=ri(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function GL(e,t,r,n){e.min=ri(t.min,r.min,n),e.max=ri(t.max,r.max,n)}function fhe(e,t,r,n){GL(e.x,t.x,r.x,n),GL(e.y,t.y,r.y,n)}function hhe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const mhe={duration:.45,ease:[.4,0,.1,1]},KL=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),YL=KL("applewebkit/")&&!KL("chrome/")?Math.round:pi;function XL(e){e.min=YL(e.min),e.max=YL(e.max)}function phe(e){XL(e.x),XL(e.y)}function sH(e,t,r){return e==="position"||e==="preserve-aspect"&&!_E(BL(t),BL(r),.2)}const ghe=oH({attachResizeListener:(e,t)=>sd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),f5={current:void 0},lH=oH({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!f5.current){const e=new ghe({});e.mount(window),e.setOptions({layoutScroll:!0}),f5.current=e}return f5.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),vhe={pan:{Feature:Ife},drag:{Feature:Tfe,ProjectionNode:lH,MeasureLayout:tH}},yhe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function xhe(e){const t=yhe.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function CE(e,t,r=1){const[n,a]=xhe(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return WV(o)?parseFloat(o):o}else return pE(a)?CE(a,t,r+1):a}function bhe(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(a=>{const i=a.get();if(!pE(i))return;const o=CE(i,n);o&&a.set(o)});for(const a in t){const i=t[a];if(!pE(i))continue;const o=CE(i,n);o&&(t[a]=o,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:t,transitionEnd:r}}const whe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),cH=e=>whe.has(e),_he=e=>Object.keys(e).some(cH),JL=e=>e===cp||e===Hr,QL=(e,t)=>parseFloat(e.split(", ")[t]),ZL=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return QL(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?QL(i[1],e):0}},She=new Set(["x","y","z"]),jhe=Db.filter(e=>!She.has(e));function Nhe(e){const t=[];return jhe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Qg={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ZL(4,13),y:ZL(5,14)};Qg.translateX=Qg.x;Qg.translateY=Qg.y;const Che=(e,t,r)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=Qg[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=Qg[u](c,i)}),e},Ahe=(e,t,r={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(cH);let i=[],o=!1;const l=[];if(a.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],f=ky(d);const h=t[c];let m;if(r_(h)){const g=h.length,p=h[0]===null?1:0;d=h[p],f=ky(d);for(let y=p;y<g&&h[y]!==null;y++)m?II(ky(h[y])===m):m=ky(h[y])}else m=ky(h);if(f!==m)if(JL(f)&&JL(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&m===Hr&&(t[c]=h.map(parseFloat))}else f?.transform&&m?.transform&&(d===0||h===0)?d===0?u.set(m.transform(d)):t[c]=f.transform(h):(o||(i=Nhe(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=Che(t,e,l);return i.length&&i.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),fj&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function Phe(e,t,r,n){return _he(t)?Ahe(e,t,r,n):{target:t,transitionEnd:n}}const Ehe=(e,t,r,n)=>{const a=bhe(e,t,n);return t=a.target,n=a.transitionEnd,Phe(e,t,r,n)},AE={current:null},uH={current:!1};function khe(){if(uH.current=!0,!!fj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>AE.current=e.matches;e.addListener(t),t()}else AE.current=!1}function Ohe(e,t,r){const{willChange:n}=t;for(const a in t){const i=t[a],o=r[a];if(zs(i))e.addValue(a,i),o_(n)&&n.add(a);else if(zs(o))e.addValue(a,Jg(i,{owner:e})),o_(n)&&n.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,Jg(l!==void 0?l:i,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const e6=new WeakMap,dH=Object.keys(p0),The=dH.length,t6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ihe=jI.length;class Dhe{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ka.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=mj(r),this.isVariantNode=YW(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const f in d){const h=d[f];l[f]!==void 0&&zs(h)&&(h.set(l[f],!1),o_(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,e6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),uH.current||khe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:AE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){e6.delete(this.current),this.projection&&this.projection.unmount(),Td(this.notifyUpdate),Td(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=lp.has(t),a=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ka.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,a,i){let o,l;for(let c=0;c<The;c++){const u=dH[c],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:m}=p0[u];h&&(o=h),d(r)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:m}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&lg(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ei()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<t6.length;n++){const a=t6[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=Ohe(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<Ihe;n++){const a=jI[n],i=this.props[a];(m0(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Jg(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=TI(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!zs(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new qI),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class fH extends Dhe{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:a},i){let o=Jde(n,t||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),o&&(o=a(o))),i){Yde(this,n,o);const l=Ehe(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function Mhe(e){return window.getComputedStyle(e)}class Rhe extends fH{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(lp.has(r)){const n=LI(r);return n&&n.default||0}else{const n=Mhe(t),a=(ZW(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return ZV(t,r)}build(t,r,n,a){AI(t,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,r){return OI(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;zs(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,a){iV(t,r,n,a)}}class Lhe extends fH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(lp.has(r)){const n=LI(r);return n&&n.default||0}return r=oV.has(r)?r:_I(r),t.getAttribute(r)}measureInstanceViewportBox(){return Ei()}scrapeMotionValuesFromProps(t,r){return lV(t,r)}build(t,r,n,a){EI(t,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,r,n,a){sV(t,r,n,a)}mount(t){this.isSVGTag=kI(t.tagName),super.mount(t)}}const $he=(e,t)=>CI(e)?new Lhe(t,{enableHardwareAcceleration:!1}):new Rhe(t,{enableHardwareAcceleration:!0}),Fhe={layout:{ProjectionNode:lH,MeasureLayout:tH}},Bhe={...ffe,...Tue,...vhe,...Fhe},lr=zce((e,t)=>xue(e,t,Bhe,$he));function hH(){const e=v.useRef(!1);return wI(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function zhe(){const e=hH(),[t,r]=v.useState(0),n=v.useCallback(()=>{e.current&&r(t+1)},[t]);return[v.useCallback(()=>ka.postRender(n),[n]),t]}class qhe extends v.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Uhe({children:e,isPresent:t}){const r=v.useId(),n=v.useRef(null),a=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=a.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),v.createElement(qhe,{isPresent:t,childRef:n,sizeRef:a},v.cloneElement(e,{ref:n}))}const h5=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=cV(Whe),c=v.useId(),u=v.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:d=>{l.set(d,!0);for(const f of l.values())if(!f)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return v.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[r]),v.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(e=v.createElement(Uhe,{isPresent:r},e)),v.createElement(dj.Provider,{value:u},e)};function Whe(){return new Map}function Vhe(e){return v.useEffect(()=>()=>e(),[])}const Kh=e=>e.key||"";function Hhe(e,t){e.forEach(r=>{const n=Kh(r);t.set(n,r)})}function Ghe(e){const t=[];return v.Children.forEach(e,r=>{v.isValidElement(r)&&t.push(r)}),t}const Khe=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=v.useContext(NI).forceRender||zhe()[0],c=hH(),u=Ghe(e);let d=u;const f=v.useRef(new Map).current,h=v.useRef(d),m=v.useRef(new Map).current,g=v.useRef(!0);if(wI(()=>{g.current=!1,Hhe(u,m),h.current=d}),Vhe(()=>{g.current=!0,m.clear(),f.clear()}),g.current)return v.createElement(v.Fragment,null,d.map(b=>v.createElement(h5,{key:Kh(b),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},b)));d=[...d];const p=h.current.map(Kh),y=u.map(Kh),x=p.length;for(let b=0;b<x;b++){const w=p[b];y.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return o==="wait"&&f.size&&(d=[]),f.forEach((b,w)=>{if(y.indexOf(w)!==-1)return;const S=m.get(w);if(!S)return;const j=p.indexOf(w);let A=b;if(!A){const P=()=>{f.delete(w);const C=Array.from(m.keys()).filter(E=>!y.includes(E));if(C.forEach(E=>m.delete(E)),h.current=u.filter(E=>{const R=Kh(E);return R===w||C.includes(R)}),!f.size){if(c.current===!1)return;l(),n&&n()}};A=v.createElement(h5,{key:Kh(S),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:o},S),f.set(w,A)}d.splice(j,0,A)}),d=d.map(b=>{const w=b.key;return f.has(w)?b:v.createElement(h5,{key:Kh(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),v.createElement(v.Fragment,null,f.size?d:d.map(b=>v.cloneElement(b)))};function r6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function yj(...e){return t=>{let r=!1;const n=e.map(a=>{const i=r6(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():r6(e[a],null)}}}}function Ln(...e){return v.useCallback(yj(...e),e)}function ah(e){const t=Xhe(e),r=v.forwardRef((n,a)=>{const{children:i,...o}=n,l=v.Children.toArray(i),c=l.find(Qhe);if(c){const u=c.props.children,d=l.map(f=>f===c?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var Yhe=ah("Slot");function Xhe(e){const t=v.forwardRef((r,n)=>{const{children:a,...i}=r;if(v.isValidElement(a)){const o=eme(a),l=Zhe(i,a.props);return a.type!==v.Fragment&&(l.ref=n?yj(n,o):o),v.cloneElement(a,l)}return v.Children.count(a)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var mH=Symbol("radix.slottable");function Jhe(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=mH,t}function Qhe(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===mH}function Zhe(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function eme(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const n6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,a6=Zr,UI=(e,t)=>r=>{var n;if(t?.variants==null)return a6(e,r?.class,r?.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r?.[u],f=i?.[u];if(d===null)return null;const h=n6(d)||n6(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,y]=g;return Array.isArray(y)?y.includes({...i,...l}[p]):{...i,...l}[p]===y})?[...u,f,h]:u},[]);return a6(e,o,c,r?.class,r?.className)},v0=UI("inline-flex items-center justify-center rounded-sm text-sm font-bold tracking-wide transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-brand text-primary-foreground hover:bg-brand/90 shadow-lg shadow-brand/15",destructive:"bg-danger text-white hover:bg-danger/90 shadow-lg shadow-danger/15",outline:"border border-border bg-transparent hover:bg-accent hover:text-accent-foreground",secondary:"bg-surface-2 text-secondary-foreground hover:bg-surface-2/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-brand underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90 shadow-lg shadow-success/15"},size:{default:"h-10 px-5 py-2 gap-2",sm:"h-9 rounded-sm px-3 gap-1.5",lg:"h-12 rounded-md px-8 gap-2.5 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ee=le.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Yhe:"button";return s.jsx(o,{className:Ot(v0({variant:t,size:r,className:e})),ref:i,...a})});Ee.displayName="Button";const m5=[{to:"/",icon:xce,label:"Painel Principal"},{to:"/agenda",icon:vu,label:"Agenda"},{to:"/vendas",icon:Ob,label:"Loja"},{to:"/financeiro",icon:VW,label:"Financeiro"}],pH={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:e*.05+.3,duration:.3,ease:"easeOut"}})},i6=({to:e,icon:t,label:r,index:n,onNavigate:a})=>{const i="flex items-center h-[52px] px-4 rounded-sm bg-brand text-primary-foreground font-bold shadow-lg shadow-brand/10 border-l-4 border-brand",o="flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 border-transparent";return s.jsx(lr.li,{custom:n,variants:pH,initial:"hidden",animate:"visible",whileHover:{x:4},transition:{type:"spring",stiffness:300,damping:15},children:s.jsxs(Vh,{to:e,onClick:a,className:({isActive:l})=>l?i:o,children:[s.jsx(t,{className:"h-5 w-5 mr-4 flex-shrink-0"}),s.jsx("span",{className:"text-base",children:r})]})})};function tme({onNavigate:e,isVisible:t,setIsVisible:r,sidebarPinned:n}){const a=Us(),i=["/produtos","/clientes","/equipe","/quadras","/empresas","/finalizadoras"],o=v.useMemo(()=>i.includes(a.pathname),[a.pathname]),[l,c]=v.useState(o),u=v.useRef(null),d=v.useRef(null),f=v.useRef(0),h=v.useRef(0),m=()=>{window.innerWidth<768&&e&&e()};return v.useEffect(()=>{const g=p=>{window.innerWidth<768||n||(p.clientX<=30&&!t&&r(!0),p.clientX>300&&t&&r(!1))};return window.addEventListener("mousemove",g),()=>window.removeEventListener("mousemove",g)},[t,n]),v.useEffect(()=>{const g=x=>{window.innerWidth>=768||(f.current=x.touches[0].clientX,h.current=x.touches[0].clientY)},p=x=>{if(window.innerWidth>=768||!f.current)return;const b=x.touches[0].clientX,w=x.touches[0].clientY,S=b-f.current,j=Math.abs(w-h.current);f.current<50&&S>50&&j<50&&r(!0)},y=()=>{f.current=0,h.current=0};return window.addEventListener("touchstart",g,{passive:!0}),window.addEventListener("touchmove",p,{passive:!0}),window.addEventListener("touchend",y,{passive:!0}),()=>{window.removeEventListener("touchstart",g),window.removeEventListener("touchmove",p),window.removeEventListener("touchend",y)}},[]),v.useEffect(()=>{if(window.innerWidth>=768)return;const g=p=>{u.current&&!u.current.contains(p.target)&&t&&r(!1)};return document.addEventListener("mousedown",g),document.addEventListener("touchstart",g,{passive:!0}),()=>{document.removeEventListener("mousedown",g),document.removeEventListener("touchstart",g)}},[t]),s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:d,className:"hidden md:block fixed left-0 top-0 w-8 h-full z-30 pointer-events-auto",onMouseEnter:()=>{n||r(!0)}}),s.jsxs(lr.aside,{ref:u,initial:!1,animate:{width:n||t?280:0},transition:{duration:.3,ease:[.22,1,.36,1]},className:"h-screen flex-shrink-0 bg-surface flex flex-col border-r border-border shadow-xl shadow-black/20 overflow-hidden",children:[s.jsxs(lr.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"flex items-center px-6 pt-8 pb-6 h-[120px] flex-shrink-0",children:[s.jsx("div",{className:"w-14 h-14 bg-brand rounded-xl flex items-center justify-center mr-4",children:s.jsx(Ib,{className:"w-8 h-8 text-primary-foreground"})}),s.jsxs("div",{className:"flex items-baseline",children:[s.jsx("span",{className:"font-extrabold text-2xl",style:{color:"#FF6600"},children:"Fluxo"}),s.jsx("span",{className:"font-extrabold text-2xl",style:{color:"#FFAA33"},children:"7"}),s.jsx("span",{className:"font-medium text-2xl",style:{color:"#B0B0B0"},children:" Arena"})]})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto px-6 py-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent hover:scrollbar-thumb-border-hover",children:s.jsxs("ul",{className:"space-y-3",children:[m5.map((g,p)=>s.jsx(i6,{...g,index:p,onNavigate:m},g.to)),s.jsxs(lr.li,{custom:m5.length,variants:pH,initial:"hidden",animate:"visible",children:[s.jsxs("button",{type:"button",onClick:()=>c(g=>!g),className:`w-full flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 ${o?"bg-brand text-primary-foreground font-bold border-brand":"border-transparent"}`,children:[s.jsx(hce,{className:"h-5 w-5 mr-4 flex-shrink-0"}),s.jsx("span",{className:"text-base flex-1 text-left",children:"Cadastros"}),s.jsx(J2,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]}),l&&s.jsxs("ul",{className:"mt-2 ml-8 space-y-2",children:[s.jsx("li",{children:s.jsxs(Vh,{to:"/clientes",onClick:m,className:({isActive:g})=>g?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(hs,{className:"h-4 w-4 mr-3"})," Clientes & Fornecedores"]})}),s.jsx("li",{children:s.jsxs(Vh,{to:"/finalizadoras",onClick:m,className:({isActive:g})=>g?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(um,{className:"h-4 w-4 mr-3"})," Finalizadoras"]})}),s.jsx("li",{children:s.jsxs(Vh,{to:"/produtos",onClick:m,className:({isActive:g})=>g?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(Xg,{className:"h-4 w-4 mr-3"})," Produtos"]})}),s.jsx("li",{children:s.jsxs(Vh,{to:"/equipe",onClick:m,className:({isActive:g})=>g?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(Oce,{className:"h-4 w-4 mr-3"})," Equipe"]})}),s.jsx("li",{children:s.jsxs(Vh,{to:"/quadras",onClick:m,className:({isActive:g})=>g?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(yce,{className:"h-4 w-4 mr-3"})," Quadras"]})}),s.jsx("li",{children:s.jsxs(Vh,{to:"/empresas",onClick:m,className:({isActive:g})=>g?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(uE,{className:"h-4 w-4 mr-3"})," Empresa"]})})]})]})]})}),s.jsx(lr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},className:"px-6 pb-6 flex-shrink-0",children:s.jsx(i6,{to:"/suporte",icon:zW,label:"Suporte",index:m5.length,onNavigate:m})})]})]})}function cr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function rme(e,t){const r=v.createContext(t),n=i=>{const{children:o,...l}=i,c=v.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=v.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function ic(e,t=[]){let r=[];function n(i,o){const l=v.createContext(o),c=r.length;r=[...r,o];const u=f=>{const{scope:h,children:m,...g}=f,p=h?.[e]?.[c]||l,y=v.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:y,children:m})};u.displayName=i+"Provider";function d(f,h){const m=h?.[e]?.[c]||l,g=v.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>v.createContext(o));return function(l){const c=l?.[e]||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,nme(a,...t)]}function nme(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var To=globalThis?.document?v.useLayoutEffect:()=>{},ame=wT[" useId ".trim().toString()]||(()=>{}),ime=0;function Dc(e){const[t,r]=v.useState(ame());return To(()=>{e||r(n=>n??String(ime++))},[e]),e||(t?`radix-${t}`:"")}var ome=wT[" useInsertionEffect ".trim().toString()]||To;function Id({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=sme({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=v.useRef(e!==void 0);v.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=v.useCallback(d=>{if(l){const f=lme(d)?d(e):d;f!==e&&o.current?.(f)}else i(d)},[l,e,i,o]);return[c,u]}function sme({defaultProp:e,onChange:t}){const[r,n]=v.useState(e),a=v.useRef(r),i=v.useRef(t);return ome(()=>{i.current=t},[t]),v.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function lme(e){return typeof e=="function"}var cme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vr=cme.reduce((e,t)=>{const r=ah(`Primitive.${t}`),n=v.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function WI(e,t){e&&gh.flushSync(()=>e.dispatchEvent(t))}function qs(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>t.current?.(...r),[])}function ume(e,t=globalThis?.document){const r=qs(e);v.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var dme="DismissableLayer",PE="dismissableLayer.update",fme="dismissableLayer.pointerDownOutside",hme="dismissableLayer.focusOutside",o6,gH=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fv=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=v.useContext(gH),[d,f]=v.useState(null),h=d?.ownerDocument??globalThis?.document,[,m]=v.useState({}),g=Ln(t,P=>f(P)),p=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(y),b=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=x,j=pme(P=>{const C=P.target,E=[...u.branches].some(R=>R.contains(C));!S||E||(a?.(P),o?.(P),P.defaultPrevented||l?.())},h),A=gme(P=>{const C=P.target;[...u.branches].some(R=>R.contains(C))||(i?.(P),o?.(P),P.defaultPrevented||l?.())},h);return ume(P=>{b===u.layers.size-1&&(n?.(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},h),v.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(o6=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),s6(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=o6)}},[d,h,r,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),s6())},[d,u]),v.useEffect(()=>{const P=()=>m({});return document.addEventListener(PE,P),()=>document.removeEventListener(PE,P)},[]),s.jsx(Vr.div,{...c,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:cr(e.onFocusCapture,A.onFocusCapture),onBlurCapture:cr(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:cr(e.onPointerDownCapture,j.onPointerDownCapture)})});Fv.displayName=dme;var mme="DismissableLayerBranch",vH=v.forwardRef((e,t)=>{const r=v.useContext(gH),n=v.useRef(null),a=Ln(t,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Vr.div,{...e,ref:a})});vH.displayName=mme;function pme(e,t=globalThis?.document){const r=qs(e),n=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){yH(fme,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function gme(e,t=globalThis?.document){const r=qs(e),n=v.useRef(!1);return v.useEffect(()=>{const a=i=>{i.target&&!n.current&&yH(hme,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function s6(){const e=new CustomEvent(PE);document.dispatchEvent(e)}function yH(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?WI(a,i):a.dispatchEvent(i)}var vme=Fv,yme=vH,p5="focusScope.autoFocusOnMount",g5="focusScope.autoFocusOnUnmount",l6={bubbles:!1,cancelable:!0},xme="FocusScope",$b=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=v.useState(null),u=qs(a),d=qs(i),f=v.useRef(null),h=Ln(t,p=>c(p)),m=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const S=w.target;l.contains(S)?f.current=S:df(f.current,{select:!0})},y=function(w){if(m.paused||!l)return;const S=w.relatedTarget;S!==null&&(l.contains(S)||df(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&df(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),b.disconnect()}}},[n,l,m.paused]),v.useEffect(()=>{if(l){u6.add(m);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(p5,l6);l.addEventListener(p5,u),l.dispatchEvent(x),x.defaultPrevented||(bme(Nme(xH(l)),{select:!0}),document.activeElement===p&&df(l))}return()=>{l.removeEventListener(p5,u),setTimeout(()=>{const x=new CustomEvent(g5,l6);l.addEventListener(g5,d),l.dispatchEvent(x),x.defaultPrevented||df(p??document.body,{select:!0}),l.removeEventListener(g5,d),u6.remove(m)},0)}}},[l,u,d,m]);const g=v.useCallback(p=>{if(!r&&!n||m.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(y&&x){const b=p.currentTarget,[w,S]=wme(b);w&&S?!p.shiftKey&&x===S?(p.preventDefault(),r&&df(w,{select:!0})):p.shiftKey&&x===w&&(p.preventDefault(),r&&df(S,{select:!0})):x===b&&p.preventDefault()}},[r,n,m.paused]);return s.jsx(Vr.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});$b.displayName=xme;function bme(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(df(n,{select:t}),document.activeElement!==r)return}function wme(e){const t=xH(e),r=c6(t,e),n=c6(t.reverse(),e);return[r,n]}function xH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function c6(e,t){for(const r of e)if(!_me(r,{upTo:t}))return r}function _me(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Sme(e){return e instanceof HTMLInputElement&&"select"in e}function df(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Sme(e)&&t&&e.select()}}var u6=jme();function jme(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=d6(e,t),e.unshift(t)},remove(t){e=d6(e,t),e[0]?.resume()}}}function d6(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Nme(e){return e.filter(t=>t.tagName!=="A")}var Cme="Portal",Bv=v.forwardRef((e,t)=>{const{container:r,...n}=e,[a,i]=v.useState(!1);To(()=>i(!0),[]);const o=r||a&&globalThis?.document?.body;return o?yW.createPortal(s.jsx(Vr.div,{...n,ref:t}),o):null});Bv.displayName=Cme;function Ame(e,t){return v.useReducer((r,n)=>t[r][n]??r,e)}var Pl=e=>{const{present:t,children:r}=e,n=Pme(t),a=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=Ln(n.ref,Eme(a));return typeof r=="function"||n.isPresent?v.cloneElement(a,{ref:i}):null};Pl.displayName="Presence";function Pme(e){const[t,r]=v.useState(),n=v.useRef(null),a=v.useRef(e),i=v.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Ame(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const u=ow(n.current);i.current=l==="mounted"?u:"none"},[l]),To(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=ow(u);e?c("MOUNT"):m==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),To(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=ow(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=ow(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:v.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function ow(e){return e?.animationName||"none"}function Eme(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var v5=0;function xj(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??f6()),document.body.insertAdjacentElement("beforeend",e[1]??f6()),v5++,()=>{v5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),v5--}},[])}function f6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var su=function(){return su=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},su.apply(this,arguments)};function bH(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function kme(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var c2="right-scroll-bar-position",u2="width-before-scroll-bar",Ome="with-scroll-bars-hidden",Tme="--removed-body-scroll-bar-size";function y5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ime(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var Dme=typeof window<"u"?v.useLayoutEffect:v.useEffect,h6=new WeakMap;function Mme(e,t){var r=Ime(t||null,function(n){return e.forEach(function(a){return y5(a,n)})});return Dme(function(){var n=h6.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||y5(l,null)}),i.forEach(function(l){a.has(l)||y5(l,o)})}h6.set(r,e)},[e]),r}function Rme(e){return e}function Lme(e,t){t===void 0&&(t=Rme);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function $me(e){e===void 0&&(e={});var t=Lme(null);return t.options=su({async:!0,ssr:!1},e),t}var wH=function(e){var t=e.sideCar,r=bH(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return v.createElement(n,su({},r))};wH.isSideCarExport=!0;function Fme(e,t){return e.useMedium(t),wH}var _H=$me(),x5=function(){},bj=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:x5,onWheelCapture:x5,onTouchMoveCapture:x5}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,y=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,w=e.gapMode,S=bH(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,A=Mme([r,t]),P=su(su({},S),a);return v.createElement(v.Fragment,null,d&&v.createElement(j,{sideCar:_H,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:w}),o?v.cloneElement(v.Children.only(l),su(su({},P),{ref:A})):v.createElement(b,su({},P,{className:c,ref:A}),l))});bj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bj.classNames={fullWidth:u2,zeroRight:c2};var m6,Bme=function(){if(m6)return m6;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zme(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Bme();return t&&e.setAttribute("nonce",t),e}function qme(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ume(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Wme=function(){var e=0,t=null;return{add:function(r){e==0&&(t=zme())&&(qme(t,r),Ume(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vme=function(){var e=Wme();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},SH=function(){var e=Vme(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Hme={left:0,top:0,right:0,gap:0},b5=function(e){return parseInt(e||"",10)||0},Gme=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[b5(r),b5(n),b5(a)]},Kme=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Hme;var t=Gme(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Yme=SH(),Ng="data-scroll-locked",Xme=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Ome,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ng,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(c2,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(u2,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(c2," .").concat(c2,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(u2," .").concat(u2,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ng,`] {
    `).concat(Tme,": ").concat(l,`px;
  }
`)},p6=function(){var e=parseInt(document.body.getAttribute(Ng)||"0",10);return isFinite(e)?e:0},Jme=function(){v.useEffect(function(){return document.body.setAttribute(Ng,(p6()+1).toString()),function(){var e=p6()-1;e<=0?document.body.removeAttribute(Ng):document.body.setAttribute(Ng,e.toString())}},[])},Qme=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Jme();var i=v.useMemo(function(){return Kme(a)},[a]);return v.createElement(Yme,{styles:Xme(i,!t,a,r?"":"!important")})},EE=!1;if(typeof window<"u")try{var sw=Object.defineProperty({},"passive",{get:function(){return EE=!0,!0}});window.addEventListener("test",sw,sw),window.removeEventListener("test",sw,sw)}catch{EE=!1}var jp=EE?{passive:!1}:!1,Zme=function(e){return e.tagName==="TEXTAREA"},jH=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Zme(e)&&r[t]==="visible")},epe=function(e){return jH(e,"overflowY")},tpe=function(e){return jH(e,"overflowX")},g6=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=NH(e,n);if(a){var i=CH(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},rpe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},npe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},NH=function(e,t){return e==="v"?epe(t):tpe(t)},CH=function(e,t){return e==="v"?rpe(t):npe(t)},ape=function(e,t){return e==="h"&&t==="rtl"?-1:1},ipe=function(e,t,r,n,a){var i=ape(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=CH(e,l),g=m[0],p=m[1],y=m[2],x=p-y-i*g;(g||x)&&NH(e,l)&&(f+=x,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(a&&Math.abs(f)<1||!a&&o>f)||!d&&(a&&Math.abs(h)<1||!a&&-o>h))&&(u=!0),u},lw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},v6=function(e){return[e.deltaX,e.deltaY]},y6=function(e){return e&&"current"in e?e.current:e},ope=function(e,t){return e[0]===t[0]&&e[1]===t[1]},spe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lpe=0,Np=[];function cpe(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),a=v.useState(lpe++)[0],i=v.useState(SH)[0],o=v.useRef(e);v.useEffect(function(){o.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=kme([e.lockRef.current],(e.shards||[]).map(y6),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=v.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=lw(p),b=r.current,w="deltaX"in p?p.deltaX:b[0]-x[0],S="deltaY"in p?p.deltaY:b[1]-x[1],j,A=p.target,P=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in p&&P==="h"&&A.type==="range")return!1;var C=g6(P,A);if(!C)return!0;if(C?j=P:(j=P==="v"?"h":"v",C=g6(P,A)),!C)return!1;if(!n.current&&"changedTouches"in p&&(w||S)&&(n.current=j),!j)return!0;var E=n.current||j;return ipe(E,y,p,E==="h"?w:S,!0)},[]),c=v.useCallback(function(p){var y=p;if(!(!Np.length||Np[Np.length-1]!==i)){var x="deltaY"in y?v6(y):lw(y),b=t.current.filter(function(j){return j.name===y.type&&(j.target===y.target||y.target===j.shadowParent)&&ope(j.delta,x)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(y6).filter(Boolean).filter(function(j){return j.contains(y.target)}),S=w.length>0?l(y,w[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),u=v.useCallback(function(p,y,x,b){var w={name:p,delta:y,target:x,should:b,shadowParent:upe(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),d=v.useCallback(function(p){r.current=lw(p),n.current=void 0},[]),f=v.useCallback(function(p){u(p.type,v6(p),p.target,l(p,e.lockRef.current))},[]),h=v.useCallback(function(p){u(p.type,lw(p),p.target,l(p,e.lockRef.current))},[]);v.useEffect(function(){return Np.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,jp),document.addEventListener("touchmove",c,jp),document.addEventListener("touchstart",d,jp),function(){Np=Np.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,jp),document.removeEventListener("touchmove",c,jp),document.removeEventListener("touchstart",d,jp)}},[]);var m=e.removeScrollBar,g=e.inert;return v.createElement(v.Fragment,null,g?v.createElement(i,{styles:spe(a)}):null,m?v.createElement(Qme,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function upe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const dpe=Fme(_H,cpe);var AH=v.forwardRef(function(e,t){return v.createElement(bj,su({},e,{ref:t,sideCar:dpe}))});AH.classNames=bj.classNames;const wj=AH;var fpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Cp=new WeakMap,cw=new WeakMap,uw={},w5=0,PH=function(e){return e&&(e.host||PH(e.parentNode))},hpe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=PH(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},mpe=function(e,t,r,n){var a=hpe(t,Array.isArray(e)?e:[e]);uw[r]||(uw[r]=new WeakMap);var i=uw[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",p=(Cp.get(h)||0)+1,y=(i.get(h)||0)+1;Cp.set(h,p),i.set(h,y),o.push(h),p===1&&g&&cw.set(h,!0),y===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(t),l.clear(),w5++,function(){o.forEach(function(f){var h=Cp.get(f)-1,m=i.get(f)-1;Cp.set(f,h),i.set(f,m),h||(cw.has(f)||f.removeAttribute(n),cw.delete(f)),m||f.removeAttribute(r)}),w5--,w5||(Cp=new WeakMap,Cp=new WeakMap,cw=new WeakMap,uw={})}},_j=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||fpe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),mpe(n,a,r,"aria-hidden")):function(){return null}},Sj="Dialog",[EH,kH]=ic(Sj),[ppe,Vc]=EH(Sj),OH=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=v.useRef(null),c=v.useRef(null),[u,d]=Id({prop:n,defaultProp:a??!1,onChange:i,caller:Sj});return s.jsx(ppe,{scope:t,triggerRef:l,contentRef:c,contentId:Dc(),titleId:Dc(),descriptionId:Dc(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};OH.displayName=Sj;var TH="DialogTrigger",IH=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Vc(TH,r),i=Ln(t,a.triggerRef);return s.jsx(Vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":GI(a.open),...n,ref:i,onClick:cr(e.onClick,a.onOpenToggle)})});IH.displayName=TH;var VI="DialogPortal",[gpe,DH]=EH(VI,{forceMount:void 0}),MH=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Vc(VI,t);return s.jsx(gpe,{scope:t,forceMount:r,children:v.Children.map(n,o=>s.jsx(Pl,{present:r||i.open,children:s.jsx(Bv,{asChild:!0,container:a,children:o})}))})};MH.displayName=VI;var l_="DialogOverlay",RH=v.forwardRef((e,t)=>{const r=DH(l_,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Vc(l_,e.__scopeDialog);return i.modal?s.jsx(Pl,{present:n||i.open,children:s.jsx(ype,{...a,ref:t})}):null});RH.displayName=l_;var vpe=ah("DialogOverlay.RemoveScroll"),ype=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Vc(l_,r);return s.jsx(wj,{as:vpe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Vr.div,{"data-state":GI(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),qm="DialogContent",LH=v.forwardRef((e,t)=>{const r=DH(qm,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Vc(qm,e.__scopeDialog);return s.jsx(Pl,{present:n||i.open,children:i.modal?s.jsx(xpe,{...a,ref:t}):s.jsx(bpe,{...a,ref:t})})});LH.displayName=qm;var xpe=v.forwardRef((e,t)=>{const r=Vc(qm,e.__scopeDialog),n=v.useRef(null),a=Ln(t,r.contentRef,n);return v.useEffect(()=>{const i=n.current;if(i)return _j(i)},[]),s.jsx($H,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cr(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:cr(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:cr(e.onFocusOutside,i=>i.preventDefault())})}),bpe=v.forwardRef((e,t)=>{const r=Vc(qm,e.__scopeDialog),n=v.useRef(!1),a=v.useRef(!1);return s.jsx($H,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),$H=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Vc(qm,r),c=v.useRef(null),u=Ln(t,c);return xj(),s.jsxs(s.Fragment,{children:[s.jsx($b,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Fv,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":GI(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(_pe,{titleId:l.titleId}),s.jsx(jpe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),HI="DialogTitle",FH=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Vc(HI,r);return s.jsx(Vr.h2,{id:a.titleId,...n,ref:t})});FH.displayName=HI;var BH="DialogDescription",zH=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Vc(BH,r);return s.jsx(Vr.p,{id:a.descriptionId,...n,ref:t})});zH.displayName=BH;var qH="DialogClose",UH=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Vc(qH,r);return s.jsx(Vr.button,{type:"button",...n,ref:t,onClick:cr(e.onClick,()=>a.onOpenChange(!1))})});UH.displayName=qH;function GI(e){return e?"open":"closed"}var WH="DialogTitleWarning",[wpe,VH]=rme(WH,{contentName:qm,titleName:HI,docsSlug:"dialog"}),_pe=({titleId:e})=>{const t=VH(WH),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Spe="DialogDescriptionWarning",jpe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VH(Spe).contentName}}.`;return v.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},HH=OH,Npe=IH,GH=MH,KI=RH,YI=LH,XI=FH,JI=zH,jj=UH;const qr=HH,Cpe=GH,ih=jj,KH=le.forwardRef(({className:e,disableAnimations:t,...r},n)=>{const a=typeof window<"u"&&(window.matchMedia?.("(pointer: coarse)")?.matches||window.innerWidth<768),i=typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,o=(t??!1)||a||i;return s.jsx(KI,{ref:n,className:Ot("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",o?"data-[state=open]:animate-none data-[state=closed]:animate-none":"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r})});KH.displayName=KI.displayName;const Lr=le.forwardRef(({className:e,children:t,overlayClassName:r,disableAnimations:n,alignTop:a,...i},o)=>{const l=typeof window<"u"&&(window.matchMedia?.("(pointer: coarse)")?.matches||window.innerWidth<768),c=typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,u=(n??!1)||l||c;return s.jsxs(Cpe,{children:[s.jsx(KH,{disableAnimations:u,className:r}),s.jsxs(YI,{ref:o,className:Ot("fixed z-50 grid w-full max-w-lg gap-4 border border-border bg-surface p-6 shadow-lg duration-200 sm:rounded-lg",a?"left-1/2 top-[10%] -translate-x-1/2":"left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",u?"data-[state=open]:animate-none data-[state=closed]:animate-none":"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...i,children:[t,s.jsxs(jj,{className:"absolute right-3 top-3 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1",children:[s.jsx(_d,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Lr.displayName=YI.displayName;const Ur=({className:e,...t})=>s.jsx("div",{className:Ot("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ur.displayName="DialogHeader";const mn=({className:e,...t})=>s.jsx("div",{className:Ot("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});mn.displayName="DialogFooter";const $r=le.forwardRef(({className:e,...t},r)=>s.jsx(XI,{ref:r,className:Ot("text-lg font-semibold leading-none tracking-tight",e),...t}));$r.displayName=XI.displayName;const Jr=le.forwardRef(({className:e,...t},r)=>s.jsx(JI,{ref:r,className:Ot("text-sm text-text-secondary",e),...t}));Jr.displayName=JI.displayName;const Ape=1;let _5=0;function Ppe(){return _5=(_5+1)%Number.MAX_VALUE,_5.toString()}const ds={state:{toasts:[]},listeners:[],getState:()=>ds.state,setState:e=>{typeof e=="function"?ds.state=e(ds.state):ds.state={...ds.state,...e},ds.listeners.forEach(t=>t(ds.state))},subscribe:e=>(ds.listeners.push(e),()=>{ds.listeners=ds.listeners.filter(t=>t!==e)})},Epe=({...e})=>{const t=Ppe(),r=a=>ds.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===t?{...o,...a}:o)})),n=()=>ds.setState(a=>({...a,toasts:a.toasts.filter(i=>i.id!==t)}));return ds.setState(a=>({...a,toasts:[{...e,id:t,dismiss:n},...a.toasts].slice(0,Ape)})),{id:t,dismiss:n,update:r}};function Za(){const[e,t]=v.useState(ds.getState());return v.useEffect(()=>ds.subscribe(n=>{t(n)}),[]),v.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const a=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(a)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:Epe,toasts:e.toasts}}const kpe="modulepreload",Ope=function(e){return"/"+e},x6={},xu=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Ope(i),i in x6)return;x6[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let d=a.length-1;d>=0;d--){const f=a[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":kpe,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Tpe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xu(()=>Promise.resolve().then(()=>zv),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class QI extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class b6 extends QI{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class w6 extends QI{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class _6 extends QI{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kE;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kE||(kE={}));var Ipe=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Dpe{constructor(t,{headers:r={},customFetch:n,region:a=kE.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Tpe(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ipe(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:o,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new b6(x)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new w6(m);if(!m.ok)throw new _6(m);let p=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),y;return p==="application/json"?y=yield m.json():p==="application/octet-stream"?y=yield m.blob():p==="text/event-stream"?y=m:p==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new b6(i)}:{data:null,error:i,response:i instanceof _6||i instanceof w6?i.context:void 0}}})}}var Ts={},ZI={},Nj={},Fb={},Cj={},Aj={},Mpe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zg=Mpe();const Rpe=Zg.fetch,YH=Zg.fetch.bind(Zg),XH=Zg.Headers,Lpe=Zg.Request,$pe=Zg.Response,zv=Object.freeze(Object.defineProperty({__proto__:null,Headers:XH,Request:Lpe,Response:$pe,default:YH,fetch:Rpe},Symbol.toStringTag,{value:"Module"})),Fpe=Jae(zv);var Pj={};Object.defineProperty(Pj,"__esModule",{value:!0});let Bpe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Pj.default=Bpe;var JH=Zo&&Zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Aj,"__esModule",{value:!0});const zpe=JH(Fpe),qpe=JH(Pj);let Upe=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zpe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,f=null,h=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=b:f=JSON.parse(b))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const y=await i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(f=[],d=null,m=200,g="OK")}catch{i.status===404&&y===""?(m=204,g="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d?.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new qpe.default(d)}return{error:d,data:f,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(l=i?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Aj.default=Upe;var Wpe=Zo&&Zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cj,"__esModule",{value:!0});const Vpe=Wpe(Aj);let Hpe=class extends Vpe.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Cj.default=Hpe;var Gpe=Zo&&Zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fb,"__esModule",{value:!0});const Kpe=Gpe(Cj);let Ype=class extends Kpe.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Fb.default=Ype;var Xpe=Zo&&Zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nj,"__esModule",{value:!0});const Ty=Xpe(Fb);let Jpe=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,r){const{head:n=!1,count:a}=r??{},i=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),a&&this.headers.append("Prefer",`count=${a}`),new Ty.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ty.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ty.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Ty.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ty.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Nj.default=Jpe;var QH=Zo&&Zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ZI,"__esModule",{value:!0});const Qpe=QH(Nj),Zpe=QH(Fb);let ege=class ZH{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Qpe.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ZH(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Zpe.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ZI.default=ege;var qv=Zo&&Zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.PostgrestError=Ts.PostgrestBuilder=Ts.PostgrestTransformBuilder=Ts.PostgrestFilterBuilder=Ts.PostgrestQueryBuilder=Ts.PostgrestClient=void 0;const eG=qv(ZI);Ts.PostgrestClient=eG.default;const tG=qv(Nj);Ts.PostgrestQueryBuilder=tG.default;const rG=qv(Fb);Ts.PostgrestFilterBuilder=rG.default;const nG=qv(Cj);Ts.PostgrestTransformBuilder=nG.default;const aG=qv(Aj);Ts.PostgrestBuilder=aG.default;const iG=qv(Pj);Ts.PostgrestError=iG.default;var tge=Ts.default={PostgrestClient:eG.default,PostgrestQueryBuilder:tG.default,PostgrestFilterBuilder:rG.default,PostgrestTransformBuilder:nG.default,PostgrestBuilder:aG.default,PostgrestError:iG.default};const{PostgrestClient:rge,PostgrestQueryBuilder:xat,PostgrestFilterBuilder:bat,PostgrestTransformBuilder:wat,PostgrestBuilder:_at,PostgrestError:Sat}=tge;class nge{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const age="2.75.0",ige=`realtime-js/${age}`,oge="1.0.0",OE=1e4,sge=1e3,lge=100;var Nx;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Nx||(Nx={}));var Gi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Gi||(Gi={}));var Sc;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Sc||(Sc={}));var TE;(function(e){e.websocket="websocket"})(TE||(TE={}));var nm;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nm||(nm={}));class cge{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class oG{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ca;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ca||(Ca={}));const S6=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=uge(o,e,t,a),i),{}):{}},uge=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a?.type,o=r[e];return i&&!n.includes(i)?sG(i,o):IE(o)},sG=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return mge(t,r)}switch(e){case Ca.bool:return dge(t);case Ca.float4:case Ca.float8:case Ca.int2:case Ca.int4:case Ca.int8:case Ca.numeric:case Ca.oid:return fge(t);case Ca.json:case Ca.jsonb:return hge(t);case Ca.timestamp:return pge(t);case Ca.abstime:case Ca.date:case Ca.daterange:case Ca.int4range:case Ca.int8range:case Ca.money:case Ca.reltime:case Ca.text:case Ca.time:case Ca.timestamptz:case Ca.timetz:case Ca.tsrange:case Ca.tstzrange:return IE(t);default:return IE(t)}},IE=e=>e,dge=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fge=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},hge=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mge=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>sG(t,l))}return e},pge=e=>typeof e=="string"?e.replace(" ","T"):e,lG=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class S5{constructor(t,r,n={},a=OE){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var j6;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(j6||(j6={}));class Cx{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cx.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Cx.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Cx.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),g=d.filter(y=>m.indexOf(y.presence_ref)<0),p=f.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var N6;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(N6||(N6={}));var Ax;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ax||(Ax={}));var Xu;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xu||(Xu={}));class e3{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Gi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new S5(this,Sc.join,this.params,this.timeout),this.rejoinTimer=new oG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sc.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Cx(this),this.broadcastEndpointURL=lG(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Gi.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Ax.PRESENCE]&&this.bindings[Ax.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t?.(Xu.CHANNEL_ERROR,m)),this._onClose(()=>t?.(Xu.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t?.(Xu.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(g=p?.length)!==null&&g!==void 0?g:0,x=[];for(let b=0;b<y;b++){const w=p[b],{filter:{event:S,schema:j,table:A,filter:P}}=w,C=m&&m[b];if(C&&C.event===S&&C.schema===j&&C.table===A&&C.filter===P)x.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Gi.errored,t?.(Xu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Xu.SUBSCRIBED);return}}).receive("error",m=>{this.state=Gi.errored,t?.(Xu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t?.(Xu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Gi.joined&&t===Ax.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sc.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new S5(this,Sc.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gi.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new S5(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>lge){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Sc;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,y;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(p=m.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,p,y,x,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const S=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return S&&((p=r.ids)===null||p===void 0?void 0:p.includes(S))&&(j==="*"||j?.toLocaleLowerCase()===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(b=(x=m?.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((w=r?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:y,commit_timestamp:x,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:p,table:y,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===Gi.closed}_isJoined(){return this.state===Gi.joined}_isJoining(){return this.state===Gi.joining}_isLeaving(){return this.state===Gi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&e3.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Sc.close,{},t)}_onError(t){this._on(Sc.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=S6(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=S6(t.columns,t.old_record)),r}}const j5=()=>{},dw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gge=[1e3,2e3,5e3,1e4],vge=1e4,yge=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xge{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=OE,this.transport=null,this.heartbeatIntervalMs=dw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=j5,this.ref=0,this.reconnectTimer=null,this.logger=j5,this.conn=null,this.sendBuffer=[],this.serializer=new cge,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>xu(()=>Promise.resolve().then(()=>zv),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${TE.websocket}`,this.httpEndpoint=lG(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nge.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:oge}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Nx.connecting:return nm.Connecting;case Nx.open:return nm.Open;case Nx.closing:return nm.Closing;default:return nm.Closed}}isConnected(){return this.connectionState()===nm.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new e3(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(sge,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},dw.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Sc.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([yge],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:ige};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Sc.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new oG(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:OE,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:dw.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:j5,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:f=>gge[f-1]||vge,this.encode=(u=t?.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class t3 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ti(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class bge extends t3{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class DE extends t3{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var wge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const cG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xu(()=>Promise.resolve().then(()=>zv),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},_ge=()=>wge(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xu(()=>Promise.resolve().then(()=>zv),void 0)).Response:Response}),ME=e=>{if(Array.isArray(e))return e.map(r=>ME(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=ME(n)}),t},Sge=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var up=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const N5=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jge=(e,t,r)=>up(void 0,void 0,void 0,function*(){const n=yield _ge();e instanceof n&&!r?.noResolveJson?e.json().then(a=>{const i=e.status||500,o=a?.statusCode||i+"";t(new bge(N5(a),i,o))}).catch(a=>{t(new DE(N5(a),a))}):t(new DE(N5(e),e))}),Nge=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||!n?a:(Sge(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,t?.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Bb(e,t,r,n,a,i){return up(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Nge(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>jge(c,l,n))})})}function c_(e,t,r,n){return up(this,void 0,void 0,function*(){return Bb(e,"GET",t,r,n)})}function au(e,t,r,n,a){return up(this,void 0,void 0,function*(){return Bb(e,"POST",t,n,a,r)})}function RE(e,t,r,n,a){return up(this,void 0,void 0,function*(){return Bb(e,"PUT",t,n,a,r)})}function Cge(e,t,r,n){return up(this,void 0,void 0,function*(){return Bb(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function uG(e,t,r,n,a){return up(this,void 0,void 0,function*(){return Bb(e,"DELETE",t,n,a,r)})}var Age=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Pge{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Age(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ti(t))return{data:null,error:t};throw t}})}}var Ege=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class kge{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new Pge(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return Ege(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ti(t))return{data:null,error:t};throw t}})}}var Ps=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Oge={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},C6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tge{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=cG(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Ps(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},C6),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?RE:au)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ti(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ps(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:C6.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield RE(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ti(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ps(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const i=yield au(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new t3("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ti(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ps(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ti(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ps(this,void 0,void 0,function*(){try{return{data:{path:(yield au(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ti(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ps(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield au(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ti(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ps(this,void 0,void 0,function*(){try{const a=yield au(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ti(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>c_(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new kge(c,this.shouldThrowOnError)}info(t){return Ps(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield c_(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ME(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ti(n))return{data:null,error:n};throw n}})}exists(t){return Ps(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Cge(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ti(n)&&n instanceof DE){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ps(this,void 0,void 0,function*(){try{return{data:yield uG(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ti(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ps(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Oge),r),{prefix:t||""});return{data:yield au(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ti(a))return{data:null,error:a};throw a}})}listV2(t,r){return Ps(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield au(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ti(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Ige="2.75.0",Dge={"X-Client-Info":`storage-js/${Ige}`};var Ap=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Mge{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dge),r),this.fetch=cG(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ap(this,void 0,void 0,function*(){try{return{data:yield c_(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ti(t))return{data:null,error:t};throw t}})}getBucket(t){return Ap(this,void 0,void 0,function*(){try{return{data:yield c_(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ti(r))return{data:null,error:r};throw r}})}createBucket(t){return Ap(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield au(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ti(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Ap(this,void 0,void 0,function*(){try{return{data:yield RE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ti(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ap(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ti(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ap(this,void 0,void 0,function*(){try{return{data:yield uG(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ti(r))return{data:null,error:r};throw r}})}}class Rge extends Mge{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new Tge(this.url,this.headers,t,this.fetch)}}const Lge="2.75.0";let ix="";typeof Deno<"u"?ix="deno":typeof document<"u"?ix="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ix="react-native":ix="node";const $ge={"X-Client-Info":`supabase-js-${ix}/${Lge}`},Fge={headers:$ge},Bge={schema:"public"},zge={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qge={};var Uge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Wge=e=>{let t;return e?t=e:typeof fetch>"u"?t=YH:t=fetch,(...r)=>t(...r)},Vge=()=>typeof Headers>"u"?XH:Headers,Hge=(e,t,r)=>{const n=Wge(r),a=Vge();return(i,o)=>Uge(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Gge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Kge(e){return e.endsWith("/")?e:e+"/"}function Yge(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Gge(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Xge(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kge(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dG="2.75.0",Hp=30*1e3,LE=3,C5=LE*Hp,Jge="http://localhost:9999",Qge="supabase.auth.token",Zge={"X-Client-Info":`gotrue-js/${dG}`},$E="X-Supabase-Api-Version",fG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tve=10*60*1e3;class y0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Dr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class rve extends y0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function nve(e){return Dr(e)&&e.name==="AuthApiError"}class am extends y0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class xh extends y0{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class ff extends xh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ave(e){return Dr(e)&&e.name==="AuthSessionMissingError"}class Pp extends xh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fw extends xh{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hw extends xh{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ive(e){return Dr(e)&&e.name==="AuthImplicitGrantRedirectError"}class A6 extends xh{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FE extends xh{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function A5(e){return Dr(e)&&e.name==="AuthRetryableFetchError"}class P6 extends xh{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class BE extends xh{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const u_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),E6=` 	
\r=`.split(""),ove=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<E6.length;t+=1)e[E6[t].charCodeAt(0)]=-2;for(let t=0;t<u_.length;t+=1)e[u_[t].charCodeAt(0)]=t;return e})();function k6(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(u_[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(u_[n]),t.queuedBits-=6}}function hG(e,t,r){const n=ove[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function O6(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{cve(o,n,r)};for(let o=0;o<e.length;o+=1)hG(e.charCodeAt(o),a,i);return t.join("")}function sve(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function lve(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}sve(n,t)}}function cve(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Cg(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)hG(e.charCodeAt(a),r,n);return new Uint8Array(t)}function uve(e){const t=[];return lve(e,r=>t.push(r)),new Uint8Array(t)}function fm(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>k6(a,r,n)),k6(null,r,n),t.join("")}function dve(e){return Math.round(Date.now()/1e3)+e}function fve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const al=()=>typeof window<"u"&&typeof document<"u",Rh={tested:!1,writable:!1},mG=()=>{if(!al())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rh.tested)return Rh.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rh.tested=!0,Rh.writable=!0}catch{Rh.tested=!0,Rh.writable=!1}return Rh.writable};function hve(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const pG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xu(()=>Promise.resolve().then(()=>zv),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},mve=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Gp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Lh=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},af=async(e,t)=>{await e.removeItem(t)};class Ej{constructor(){this.promise=new Ej.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ej.promiseConstructor=Promise;function P5(e){const t=e.split(".");if(t.length!==3)throw new BE("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!eve.test(t[n]))throw new BE("JWT not in base64url format");return{header:JSON.parse(O6(t[0])),payload:JSON.parse(O6(t[1])),signature:Cg(t[2]),raw:{header:t[0],payload:t[1]}}}async function pve(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function gve(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function vve(e){return("0"+e.toString(16)).substr(-2)}function yve(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,vve).join("")}async function xve(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function bve(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await xve(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ep(e,t,r=!1){const n=yve();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Gp(e,`${t}-code-verifier`,a);const i=await bve(n);return[i,n===i?"plain":"s256"]}const wve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _ve(e){const t=e.headers.get($E);if(!t||!t.match(wve))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Sve(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jve(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nve=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kp(e){if(!Nve.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function E5(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function T6(e){return JSON.parse(JSON.stringify(e))}var Cve=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Yh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ave=[502,503,504];async function I6(e){var t;if(!mve(e))throw new FE(Yh(e),0);if(Ave.includes(e.status))throw new FE(Yh(e),e.status);let r;try{r=await e.json()}catch(i){throw new am(Yh(i),i)}let n;const a=_ve(e);if(a&&a.getTime()>=fG["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new P6(Yh(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ff}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new P6(Yh(r),e.status,r.weak_password.reasons);throw new rve(Yh(r),e.status||500,n)}const Pve=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function tn(e,t,r,n){var a;const i=Object.assign({},n?.headers);i[$E]||(i[$E]=fG["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Eve(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function Eve(e,t,r,n,a,i){const o=Pve(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new FE(Yh(c),0)}if(l.ok||await I6(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await I6(c)}}function xc(e){var t;let r=null;Tve(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=dve(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function D6(e){const t=xc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function wf(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kve(e){return{data:e,error:null}}function Ove(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Cve(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function M6(e){return e}function Tve(e){return e.access_token&&e.refresh_token&&e.expires_in}const k5=["global","local","others"];var Ive=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class Dve{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=pG(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=k5[0]){if(k5.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${k5.join(", ")}`);try{return await tn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Dr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await tn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:wf})}catch(n){if(Dr(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Ive(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await tn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Ove,redirectTo:r?.redirectTo})}catch(r){if(Dr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await tn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:wf})}catch(r){if(Dr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await tn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:M6});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Dr(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){kp(t);try{return await tn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:wf})}catch(r){if(Dr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){kp(t);try{return await tn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:wf})}catch(n){if(Dr(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){kp(t);try{return await tn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:wf})}catch(n){if(Dr(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){kp(t.userId);try{const{data:r,error:n}=await tn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){kp(t.userId),kp(t.id);try{return{data:await tn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await tn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:M6});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Dr(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await tn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await tn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await tn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await tn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}}function R6(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Op={debug:!!(globalThis&&mG()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gG extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Mve extends gG{}async function Rve(e,t,r){Op.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Op.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Op.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Op.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Op.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Mve(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Op.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Lve(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vG(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $ve(e){return parseInt(e,16)}function Fve(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Bve(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=vG(e.address),g=d?`${d}://${n}`:n,p=e.statement?`${e.statement}
`:"",y=`${g} wants you to sign in with your Ethereum account:
${m}

${p}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}x+=b}return`${y}
${x}`}class Oi extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class d_ extends Oi{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function zve({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Oi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Oi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Oi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Oi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Oi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Oi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Oi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Oi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(xG(o)){if(i.rp.id!==o)return new Oi({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Oi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Oi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Oi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Oi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function qve({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Oi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Oi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(xG(n)){if(r.rpId!==n)return new Oi({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Oi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Oi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Oi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var yG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class Uve{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Wve=new Uve;function Vve(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=yG(e,["challenge","user","excludeCredentials"]),i=Cg(t).buffer,o=Object.assign(Object.assign({},r),{id:Cg(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Cg(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Hve(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=yG(e,["challenge","allowCredentials"]),a=Cg(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Cg(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Gve(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:fm(new Uint8Array(e.response.attestationObject)),clientDataJSON:fm(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Kve(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:fm(new Uint8Array(a.authenticatorData)),clientDataJSON:fm(new Uint8Array(a.clientDataJSON)),signature:fm(new Uint8Array(a.signature)),userHandle:a.userHandle?fm(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xG(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function L6(){var e,t;return!!(al()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Yve(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new d_("Browser returned unexpected credential type",t)}:{data:null,error:new d_("Empty credential response",t)}}catch(t){return{data:null,error:zve({error:t,options:e})}}}async function Xve(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new d_("Browser returned unexpected credential type",t)}:{data:null,error:new d_("Empty credential response",t)}}catch(t){return{data:null,error:qve({error:t,options:e})}}}const Jve={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Qve={userVerification:"preferred",hints:["security-key"]};function f_(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=f_(l,o):n[i]=f_(o)}else n[i]=o}return n}function Zve(e,t){return f_(Jve,e,t||{})}function eye(e,t){return f_(Qve,e,t||{})}class tye{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??Wve.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Zve(o.webauthn.credential_options.publicKey,i?.create),{data:d,error:f}=await Yve({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=eye(o.webauthn.credential_options.publicKey,i?.request),{data:d,error:f}=await Xve(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return Dr(o)?{data:null,error:o}:{data:null,error:new am("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new y0("rpId is required for WebAuthn authentication")};try{if(!L6())return{data:null,error:new am("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Dr(o)?{data:null,error:o}:{data:null,error:new am("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new y0("rpId is required for WebAuthn registration")};try{if(!L6())return{data:null,error:new am("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Dr(o)?{data:null,error:o}:{data:null,error:new am("Unexpected error in register",o)}}}}Lve();const rye={url:Jge,storageKey:Qge,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zge,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $6(e,t,r){return await r()}const Tp={};class x0{get jwks(){var t,r;return(r=(t=Tp[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Tp[this.storageKey]=Object.assign(Object.assign({},Tp[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Tp[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Tp[this.storageKey]=Object.assign(Object.assign({},Tp[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=x0.nextInstanceID,x0.nextInstanceID+=1,this.instanceID>0&&al()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},rye),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Dve({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=pG(a.fetch),this.lock=a.lock||$6,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:al()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Rve:this.lock=$6,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tye(this)},this.persistSession?(a.storage?this.storage=a.storage:mG()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=R6(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=R6(this.memoryStorage)),al()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dG}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=hve(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),al()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ive(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Dr(r)?{error:r}:{error:new am("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:xc}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Dr(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Ep(this.storage,this.storageKey)),i=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:d,password:f,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:g},xform:xc})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(a=h?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:xc})}else throw new fw("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Dr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await tn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:D6})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await tn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:D6})}else throw new fw("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Pp}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:p,wallet:y,statement:x,options:b}=t;let w;if(al())if(typeof y=="object")w=y;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")w=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const S=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=vG(j[0]);let P=(n=b?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!P){const E=await w.request({method:"eth_chainId"});P=$ve(E)}const C={domain:S.host,address:A,statement:x,uri:S.href,version:"1",chainId:P,nonce:(a=b?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=b?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b?.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Bve(C),g=await w.request({method:"personal_sign",params:[Fve(m),A]})}try{const{data:p,error:y}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:xc});if(y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Pp}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:y})}catch(p){if(Dr(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:y,wallet:x,statement:b,options:w}=t;let S;if(al())if(typeof x=="object")S=x;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))S=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const j=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const A=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let P;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")P=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)P=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)g=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),p=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const A=await S.signMessage(new TextEncoder().encode(g),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=A}}try{const{data:y,error:x}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:fm(p)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:xc});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Pp}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(Dr(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Lh(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:xc});if(await af(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Pp}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Dr(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await tn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:xc}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ep(this.storage,this.storageKey));const{error:f}=await tn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await tn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new fw("You must provide either an email or phone number.")}catch(l){if(Dr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await tn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:xc});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Dr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ep(this.storage,this.storageKey)),await tn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:kve})}catch(i){if(Dr(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ff;const{error:a}=await tn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Dr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await tn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await tn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new fw("You must provide either an email or phone number and a type")}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Lh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<C5:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Lh(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=E5()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await tn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:wf}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ff}:await tn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:wf})})}catch(r){if(Dr(r))return ave(r)&&(await this._removeSession(),await af(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ff;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ep(this.storage,this.storageKey));const{data:u,error:d}=await tn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:wf});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Dr(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ff;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=P5(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Dr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new ff;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!al())throw new hw("No browser detected.");if(t.error||t.error_description||t.error_code)throw new hw(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new A6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hw("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new A6("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new hw("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Hp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:y}=await this._getUser(i);if(y)throw y;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(Dr(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Lh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(nve(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await af(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=fve(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ep(this.storage,this.storageKey,!0));try{return await tn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Dr(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await tn(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return al()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(Dr(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await tn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:xc}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Pp}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(a){if(Dr(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await tn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await gve(async a=>(a>0&&await pve(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await tn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xc})),(a,i)=>{const o=200*Math.pow(2,a);return i&&A5(i)&&Date.now()+o-n<Hp})}catch(n){if(this._debug(r,"error",n),Dr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),al()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Lh(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Lh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Gp(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o?.user)!==null&&t!==void 0?t:E5()}else if(a&&!a.user&&!a.user){const o=await Lh(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await af(this.storage,this.storageKey+"-user"),await Gp(this.storage,this.storageKey,a)):a.user=E5()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<C5;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${C5}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),A5(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ff;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ej;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ff;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Dr(i)){const o={data:null,error:i};return A5(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Gp(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=T6(a);await Gp(this.storage,this.storageKey,i)}else{const a=T6(r);await Gp(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await af(this.storage,this.storageKey),await af(this.storage,this.storageKey+"-code-verifier"),await af(this.storage,this.storageKey+"-user"),this.userStorage&&await af(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&al()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hp);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Hp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Hp}ms, refresh threshold is ${LE} ticks`),a<=LE&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gG)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!al()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ep(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await tn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await tn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&c.type==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Gve(t.webauthn.credential_response):Kve(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await tn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const o=await tn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Vve(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Hve(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=P5(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+tve>a)return n;const{data:i,error:o}=await tn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=P5(n);r?.allowExpired||Sve(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=jve(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,uve(`${l}.${c}`)))throw new BE("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Dr(n))return{data:null,error:n};throw n}}}x0.nextInstanceID=0;const nye=x0;class aye extends nye{constructor(t){super(t)}}var iye=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class oye{constructor(t,r,n){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=Xge(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Bge,realtime:qge,auth:Object.assign(Object.assign({},zge),{storageKey:c}),global:Fge},d=Yge(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Hge(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new rge(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Rge(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Dpe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return iye(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aye({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new xge(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sye=(e,t,r)=>new oye(e,t,r);function lye(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}lye()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bG="https://dlfryxtyxqoacuunswuc.supabase.co",zE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZnJ5eHR5eHFvYWN1dW5zd3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODg0MzcsImV4cCI6MjA3MTQ2NDQzN30.AizQBbCE1p_xfAQ9T0Eha1anGzcFETcc__8AV4iaQTY",cye=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&t.append(r,String(n))}),t.toString()},wG=async(e,t={})=>{const{method:r="GET",body:n,headers:a={},params:i={},signal:o}=t,l=cye(i),c=`${bG}/rest/v1/${e}${l?`?${l}`:""}`,u={apikey:zE,Authorization:`Bearer ${zE}`,"Content-Type":"application/json",Prefer:"return=representation",...a},d=localStorage.getItem("sb-dlfryxtyxqoacuunswuc-auth-token");if(d)try{const{access_token:g}=JSON.parse(d);g&&(u.Authorization=`Bearer ${g}`)}catch(g){console.warn("[Supabase Wrapper] Erro ao ler auth token:",g)}const f={method:r,headers:u};n&&(f.body=JSON.stringify(n)),o&&(f.signal=o);const h=await fetch(c,f);if(!h.ok){const g=await h.text();throw new Error(`Supabase error: ${h.status} - ${g}`)}return{data:await h.json(),error:null}};class uye{constructor(t){this.table=t,this.params={},this.selectColumns="*",this.signal=null}select(t="*"){return this.selectColumns=t,this.params.select=t,this}eq(t,r){return this.params[t]=`eq.${r}`,this}neq(t,r){return this.params[t]=`neq.${r}`,this}gt(t,r){return this.params[t]=`gt.${r}`,this}gte(t,r){return this.params[t]=`gte.${r}`,this}lt(t,r){return this.params[t]=`lt.${r}`,this}lte(t,r){return this.params[t]=`lte.${r}`,this}like(t,r){return this.params[t]=`like.${r}`,this}ilike(t,r){return this.params[t]=`ilike.${r}`,this}is(t,r){return this.params[t]=`is.${r}`,this}in(t,r){return this.params[t]=`in.(${r.join(",")})`,this}not(t,r,n){return this.params[t]=`not.${r}.${n}`,this}or(t){return this.params.or=`(${t})`,this}contains(t,r){return this.params[t]=`cs.{${r}}`,this}containedBy(t,r){return this.params[t]=`cd.{${r}}`,this}filter(t,r,n){return this.params[t]=`${r}.${n}`,this}order(t,r={}){const{ascending:n=!0}=r;return this.params.order=`${t}.${n?"asc":"desc"}`,this}limit(t){return this.params.limit=t,this}range(t,r){return this.params.offset=t,this.params.limit=r-t+1,this}single(){return this.params.limit=1,this.isSingle=!0,this}abortSignal(t){return this.signal=t,this}async then(t,r){try{const n=await wG(this.table,{params:this.params,signal:this.signal});this.isSingle&&n.data&&(n.data=n.data[0]||null),t(n)}catch(n){r(n)}}}class dye extends uye{insert(t){return this.method="POST",this.body=Array.isArray(t)?t:[t],this}update(t){return this.method="PATCH",this.body=t,this}delete(){return this.method="DELETE",this}async then(t,r){try{const n=await wG(this.table,{method:this.method||"GET",body:this.body,params:this.params,signal:this.signal});this.isSingle&&n.data&&(n.data=n.data[0]||null),t(n)}catch(n){r(n)}}}const r3={from(e){return new dye(e)},auth:null,supabaseUrl:bG,supabaseKey:zE};typeof window<"u"&&(console.log("[Supabase Wrapper] Testando wrapper..."),r3.from("empresas").select("id").limit(1).then(({data:e,error:t})=>{t?console.error("[Supabase Wrapper]  ERRO:",t):console.log("[Supabase Wrapper]  SUCESSO com WRAPPER:",e)}).catch(e=>{console.error("[Supabase Wrapper]  EXCEPTION:",e)}));const _G="https://dlfryxtyxqoacuunswuc.supabase.co",SG="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZnJ5eHR5eHFvYWN1dW5zd3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODg0MzcsImV4cCI6MjA3MTQ2NDQzN30.AizQBbCE1p_xfAQ9T0Eha1anGzcFETcc__8AV4iaQTY";console.log("[Supabase Init] URL:"," OK");console.log("[Supabase Init] Key:"," OK");console.log("[Supabase Init] Env Mode:","production");const Xh=sye(_G,SG,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0},global:{headers:{"X-Client-Info":"fluxo7arena-web"}}}),Oe={from:e=>r3.from(e),auth:Xh.auth,storage:Xh.storage,functions:Xh.functions,realtime:Xh.realtime,channel:Xh.channel.bind(Xh),supabaseUrl:_G,supabaseKey:SG};console.log("[Supabase Init] Modo:"," WRAPPER (produo)");console.log("[Supabase Init] Client criado:",!!Oe);typeof window<"u"&&(window.__supabase=Oe,window.__supabase_original=Xh,window.__supabase_wrapper=r3,console.log("[Supabase Init]  Exposto em window.__supabase"));const jG=v.createContext({}),po=()=>{const e=v.useContext(jG);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},fye=({children:e})=>{const[t,r]=v.useState(null),[n,a]=v.useState(null),[i,o]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(!1),f=v.useRef(null),h=v.useRef(!1);v.useEffect(()=>{if((()=>{try{return sessionStorage.getItem("auth:forceLogout")==="1"}catch{return!1}})()){try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company")}catch{}r(null),a(null),o(null),d(!0),c(!1);try{sessionStorage.removeItem("auth:forceLogout")}catch{}try{Oe.auth.signOut({scope:"global"}).catch(()=>{})}catch{}return}try{const P=localStorage.getItem("auth:userProfile"),C=localStorage.getItem("auth:company");P&&a(JSON.parse(P)),C&&o(JSON.parse(C)),(P||C)&&d(!0)}catch(P){console.warn("AuthContext: falha ao hidratar cache local:",P)}(async()=>{try{const{data:{session:P},error:C}=await Oe.auth.getSession();C&&console.error("supabase.auth.getSession error:",C),P?.user?(r(P.user),d(!0),await m(P.user.id),f.current=P.user.id):d(!0)}catch(P){console.error("getSession exception:",P)}finally{c(!1)}})();const{data:j}=Oe.auth.onAuthStateChange(async(P,C)=>{console.log("[AuthContext] onAuthStateChange",{event:P,userId:C?.user?.id||null});try{if(P==="SIGNED_OUT"){try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company")}catch{}r(null),a(null),o(null),f.current=null,h.current=!1,c(!1),d(!0);return}const E=C?.user||null;r(E),d(!0),E?.id&&(await m(E.id),f.current=E.id,c(!1))}catch(E){console.error("onAuthStateChange handler error:",E),c(!1),d(!0)}}),A=setTimeout(()=>{c(P=>P&&!1),d(P=>P||!0)},12e3);return()=>{clearTimeout(A),j.subscription.unsubscribe()}},[]),v.useEffect(()=>{(async()=>{try{if(!u||!t)return;const S=!n,j=!!n&&!i&&!!n.codigo_empresa;(S||j)&&(await m(t.id),f.current=t.id)}catch{}})()},[u,t?.id,!!n,n?.codigo_empresa,!!i]),v.useEffect(()=>{const w=()=>{try{const A=localStorage.getItem("auth:userProfile"),P=localStorage.getItem("auth:company");if(A){const C=JSON.parse(A);(!n||!n.codigo_empresa)&&a(C)}if(P){const C=JSON.parse(P);(!i||!i.codigo_empresa)&&o(C)}}catch{}},S=()=>{w(),t?.id&&m(t.id).catch(()=>{})},j=()=>{document.visibilityState==="visible"&&S()};return window.addEventListener("focus",S),document.addEventListener("visibilitychange",j),()=>{window.removeEventListener("focus",S),document.removeEventListener("visibilitychange",j)}},[t?.id]);const m=async w=>{if(h.current){console.log("[AuthDebug] loadUserProfile:skip (already running)");return}h.current=!0;try{const S=[300,800,1600,3e3],j=C=>new Promise(E=>setTimeout(E,C)),A=async(C,E)=>{let R;try{const k=new Promise(I=>{R=setTimeout(()=>I({__timeout:!0}),E)});return await Promise.race([C,k])}finally{clearTimeout(R)}},P=1200;for(let C=0;C<=S.length;C++){console.log("[AuthDebug] loadUserProfile:start",{userId:w,attempt:C});try{console.log("[AuthDebug] querying colaboradores",{userId:w});const E=Oe.from("colaboradores").select("*").eq("id",w).single(),R=await A(E,P);if(R&&R.__timeout){console.warn("[AuthDebug] colaboradores:timeout, using usuarios fallback (inline)");try{console.log("[AuthDebug] fallback-inline: querying usuarios by id");const{data:I,error:M}=await Oe.from("usuarios").select("*").eq("id",w).maybeSingle();if(!M&&I){let z=null;if(I.codigo_empresa){console.log("[AuthDebug] fallback-inline: querying empresas by codigo",{codigo_empresa:I.codigo_empresa});const{data:U,error:$}=await Oe.from("empresas").select("*").eq("codigo_empresa",I.codigo_empresa).single();$?console.warn("[AuthDebug] fallback-inline: empresa error",{status:$.status,code:$.code,message:$.message}):(z=U,console.log("[AuthDebug] fallback-inline: empresa loaded"))}const W={id:w,nome:I.nome||null,cargo:I.papel||"user",codigo_empresa:I.codigo_empresa||null,_source:"usuarios"};a(W);try{localStorage.setItem("auth:userProfile",JSON.stringify(W))}catch{}if(z){o(z);try{localStorage.setItem("auth:company",JSON.stringify(z))}catch{}console.log("[AuthDebug] fallback-inline: set company from usuarios path")}else console.warn("[AuthDebug] fallback-inline: no company resolved; preserving previous company");return}M&&console.warn("[AuthDebug] fallback-inline: usuarios error",{status:M.status,code:M.code,message:M.message})}catch(I){console.warn("[AuthDebug] fallback-inline: unexpected error",I?.message||I)}if(C<S.length){await j(S[C]);continue}return}const{data:k,error:T}=R||{};if(console.log("[AuthDebug] colaboradores:success",{hasProfile:!!k,codigo_empresa:k?.codigo_empresa||null}),T){if(console.warn("[AuthDebug] colaboradores:error",{code:T.code,status:T.status,message:T.message}),T.code==="42P17"){if(C<S.length){await j(S[C]);continue}console.warn("RLS recursion (42P17) persistente ao carregar perfil. Prosseguindo sem alterar cache.");return}if([401,403].includes(Number(T.status))&&(console.warn("[AuthDebug] Erro de autorizao detectado, tentando fallback"),C<S.length)){await j(S[C]);continue}if(T.code==="PGRST116"){try{console.log("[AuthDebug] fallback: querying usuarios by id");const{data:M,error:z}=await Oe.from("usuarios").select("*").eq("id",w).maybeSingle();if(!z&&M){let W=null;if(M.codigo_empresa){console.log("[AuthDebug] fallback: querying empresas by codigo",{codigo_empresa:M.codigo_empresa});const{data:$,error:G}=await Oe.from("empresas").select("*").eq("codigo_empresa",M.codigo_empresa).single();G?console.warn("[AuthDebug] fallback: empresa error",{status:G.status,code:G.code,message:G.message}):(W=$,console.log("[AuthDebug] fallback: empresa loaded"))}const U={id:w,nome:M.nome||null,cargo:M.papel||"user",codigo_empresa:M.codigo_empresa||null,_source:"usuarios"};a(U);try{localStorage.setItem("auth:userProfile",JSON.stringify(U))}catch{}if(W){o(W);try{localStorage.setItem("auth:company",JSON.stringify(W))}catch{}console.log("[AuthDebug] fallback: set company from usuarios path")}else console.warn("[AuthDebug] fallback: no company resolved; preserving previous company");return}z&&console.warn("[AuthDebug] fallback: usuarios error",{status:z.status,code:z.code,message:z.message})}catch{}console.warn("AuthContext: perfil no encontrado (PGRST116) e fallback falhou; mantendo cache atual.");return}if([401,403,406].includes(Number(T.status))&&C<S.length){await j(S[C]);continue}throw T}if(!k){if(C<S.length){await j(S[C]);continue}return}a(k);try{localStorage.setItem("auth:userProfile",JSON.stringify(k))}catch{}if(k?.codigo_empresa){console.log("[AuthDebug] company: querying empresas by codigo from colaboradores",{codigo_empresa:k.codigo_empresa});const{data:I,error:M}=await Oe.from("empresas").select("*").eq("codigo_empresa",k.codigo_empresa).single();if(M){if([401,403,406].includes(Number(M.status))&&C<S.length){await j(S[C]);continue}console.warn("[AuthDebug] company: load error; preserving previous company",{status:M.status,code:M.code,message:M.message});return}else{o(I);try{localStorage.setItem("auth:company",JSON.stringify(I))}catch{}console.log("[AuthDebug] company: set from colaboradores path")}}else console.warn("[AuthDebug] company: no codigo_empresa available on profile; preserving previous company");return}catch(E){if(console.error("[AuthDebug] loadUserProfile:unexpected error",{message:E?.message,code:E?.code,status:E?.status}),C<S.length){await j(S[C]);continue}console.error("Error loading user profile:",E);return}}}finally{h.current=!1}},b={user:t,userProfile:n,company:i,loading:l,authReady:u,signUp:async(w,S,j,A=null)=>{try{const{data:P,error:C}=await Oe.auth.signUp({email:w,password:S});if(C)throw C;if(P?.user&&A){const{data:E,error:R}=await Oe.from("empresas").select("id, codigo_empresa").eq("codigo_empresa",A).single();if(R)throw new Error("Cdigo de empresa invlido. Verifique o cdigo informado.");const{error:k}=await Oe.from("colaboradores").insert({id:P.user.id,codigo_empresa:E.codigo_empresa,nome:j,cargo:"user",ativo:!0});if(k)throw k}return{data:P,error:null}}catch(P){let C="No foi possvel cadastrar. Verifique os dados e tente novamente.";const E=(P?.message||"").toLowerCase();return E.includes("user already registered")||E.includes("already registered")||E.includes("user already exists")?C="Email j cadastrado. Tente entrar ou redefinir a senha.":E.includes("password")&&E.includes("length")&&(C="Senha muito curta. Use ao menos 6 caracteres."),{data:null,error:new Error(C)}}},signIn:async(w,S)=>{try{const{data:j,error:A}=await Oe.auth.signInWithPassword({email:w,password:S});if(A){let P="No foi possvel entrar. Tente novamente.";const C=(A.message||"").toLowerCase(),E=A.status;return C.includes("invalid login")||C.includes("invalid credentials")||E===400?P="Email ou senha invlidos.":C.includes("email not confirmed")||C.includes("not confirmed")?P="Email no confirmado. Verifique sua caixa de entrada.":E===429?P="Muitas tentativas. Aguarde alguns minutos e tente novamente.":E>=500&&(P="Servio indisponvel no momento. Tente novamente mais tarde."),{data:null,error:new Error(P)}}return j.user&&await Oe.from("colaboradores").select("id").eq("id",j.user.id).single(),{data:j,error:null}}catch(j){return{data:null,error:j}}},signOut:async()=>{try{const w=Oe.auth.signOut({scope:"global"}),S=new Promise(j=>setTimeout(j,700));await Promise.race([w,S])}catch(w){console.warn("[AuthContext] signOut(): error during signOut",w?.message||w)}f.current=null,r(null),a(null),o(null),c(!1),d(!0);try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company"),localStorage.removeItem("clientes:list"),localStorage.removeItem("quadras:list"),localStorage.removeItem("agenda:courts"),localStorage.removeItem("agenda:selectedCourts"),localStorage.removeItem("agenda:viewFilter"),Object.keys(localStorage).filter(w=>w.startsWith("agenda:bookings:")).forEach(w=>localStorage.removeItem(w)),Object.keys(localStorage).filter(w=>w.startsWith("sb-")).forEach(w=>localStorage.removeItem(w)),Object.keys(sessionStorage).filter(w=>w.startsWith("sb-")).forEach(w=>sessionStorage.removeItem(w))}catch{}try{sessionStorage.setItem("auth:forceLogout","1")}catch{}try{window.location.replace("/")}catch{}return{error:null}},reloadCompany:async()=>{try{const w=n&&n.codigo_empresa?n.codigo_empresa:null;if(!w)return;const{data:S,error:j}=await Oe.from("empresas").select("*").eq("codigo_empresa",w).single();if(!j&&S){o(S);try{localStorage.setItem("auth:company",JSON.stringify(S))}catch{}}}catch{}}};return s.jsx(jG.Provider,{value:b,children:e})},NG=v.createContext(),hye=({children:e})=>{const[t,r]=v.useState([]),[n,a]=v.useState(!1),[i,o]=v.useState(!1);return s.jsx(NG.Provider,{value:{alerts:t,setAlerts:r,showModal:n,setShowModal:a,showBalloon:i,setShowBalloon:o},children:e})},CG=()=>{const e=v.useContext(NG);if(!e)throw new Error("useAlerts must be used within AlertsProvider");return e};function mye({onToggleSidebar:e,sidebarVisible:t,sidebarPinned:r}){const{toast:n}=Za(),{signOut:a,userProfile:i,company:o,user:l}=po(),{alerts:c,showModal:u,setShowModal:d,showBalloon:f,setShowBalloon:h}=CG(),m=Wc(),[g,p]=v.useState(!1),y=i?.nome||"Usurio",x=le.useMemo(()=>{const M=y.trim().split(/\s+/);return M.length>=2?`${M[0]} ${M[1]}`:y},[y]),b=i?.cargo||i?.papel||"";let w="";try{const M=localStorage.getItem("auth:company");if(M){const z=JSON.parse(M);w=z?.nome_fantasia||z?.razao_social||z?.nome||z?.codigoEmpresa||"";var S=z?.logo_url||""}}catch{}const j=o?.nome_fantasia||o?.razao_social||o?.nome||o?.codigoEmpresa||w||"Empresa no vinculada",A=o?.logo_url||(typeof S<"u"?S:""),P=le.useMemo(()=>o?.logo_url?`${o.logo_url}?v=${Date.now()}`:A||"",[o?.logo_url]);v.useEffect(()=>{if(c.length>0&&!sessionStorage.getItem("alerts-shown")){p(!0),sessionStorage.setItem("alerts-shown","true");const M=setTimeout(()=>{p(!1)},5e3);return()=>clearTimeout(M)}},[c]);const C=M=>({Package:Xg,DollarSign:dl,CalendarCheck:gI,Clock:Yg,ShoppingCart:Ob,Store:xI,Users:hs,CalendarPlus:vI,AlertTriangle:Kg,Info:FW})[M]||Kg,E=M=>({danger:"text-danger",warning:"text-warning",info:"text-info",success:"text-success",purple:"text-purple"})[M]||"text-warning",R=({alert:M,onClick:z})=>{const W=C(M.icone),U=E(M.cor);return s.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-white/5 transition-colors cursor-pointer group",onClick:z,children:[s.jsx(W,{className:`w-4 h-4 flex-shrink-0 ${U}`}),s.jsx("span",{className:"text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:M.mensagem}),M.link&&s.jsx(pI,{className:"w-3 h-3 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]})},k=async()=>{console.log("[Header] Logout button clicked",{at:new Date().toISOString(),userBefore:!!l});const{error:M}=await a();console.log("[Header] Logout completed",{error:M,userAfter:!!l}),n(M?{title:"Erro ao sair",description:"Ocorreu um erro ao fazer logout. Tente novamente.",variant:"destructive"}:{title:"Logout realizado",description:"Voc foi desconectado com sucesso.",variant:"default"})};new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});const T=Us(),I=le.useMemo(()=>{try{const M=String(T?.pathname||"");if(M==="/"||M.startsWith("/dashboard"))return"";const W=[{key:"/agenda",label:"Agenda"},{key:"/clientes",label:"Clientes & Fornecedores"},{key:"/produtos",label:"Produtos"},{key:"/vendas",label:"Vendas"},{key:"/financeiro",label:"Financeiro"},{key:"/balcao",label:"Balco"},{key:"/cadastros",label:"Cadastros"},{key:"/quadras",label:"Quadras"},{key:"/equipe",label:"Equipe"},{key:"/finalizadoras",label:"Finalizadoras"},{key:"/empresas",label:"Empresas"},{key:"/configuracoes",label:"Configuraes"},{key:"/login",label:"Login"}].find(U=>M.startsWith(U.key));if(W)return W.label;if(typeof document<"u"){const U=String(document.title||"");return(U.includes(" - ")?U.split(" - ")[0]:U)||""}}catch{}return""},[T?.pathname]);return s.jsxs(lr.header,{initial:{opacity:0,y:-80},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.22,1,.36,1]},className:"relative bg-surface/80 backdrop-blur-sm text-text-primary h-[72px] flex-shrink-0 flex items-center justify-between px-8 border-b border-border shadow-[0_1px_0_RGBA(255,255,255,0.04)]",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Ee,{variant:"ghost",size:"icon",onClick:e,"aria-label":t?"Ocultar barra lateral":"Mostrar barra lateral",className:"h-12 w-12 hover:bg-surface-2/60 transition-colors",children:[s.jsx(_ce,{className:`w-7 h-7 md:hidden transition-colors ${t?"text-brand":"text-text-primary"}`}),t?s.jsx(Sce,{className:"w-7 h-7 hidden md:block text-brand transition-colors"}):s.jsx(jce,{className:"w-7 h-7 hidden md:block text-text-primary transition-colors"}),s.jsx("span",{className:"hidden md:inline-flex items-center justify-center ml-1",children:r?s.jsx(zm,{className:"w-3.5 h-3.5 text-brand/80"}):s.jsx(bI,{className:"w-3.5 h-3.5 text-text-secondary"})})]}),s.jsxs("div",{className:"group pl-3 pr-5 py-1.5 rounded-full border border-white/10 bg-gradient-to-b from-surface-2/60 to-surface/60 text-text-primary flex items-center gap-4 shadow-sm hover:border-white/20 transition-colors",title:j,children:[s.jsx("div",{className:"relative w-11 h-11 shrink-0 rounded-full overflow-hidden border border-white/10 ring-2 ring-brand/30 ring-offset-0 bg-surface-2/60 grid place-items-center shadow-[0_0_0_3px_RGBA(0,0,0,0.2)]",children:P?s.jsx("img",{src:P,alt:"Logo",className:"w-full h-full object-cover"}):s.jsx(sce,{className:"w-6 h-6 opacity-80"})}),s.jsx("span",{className:"tracking-tight max-w-[240px] md:max-w-[320px] truncate leading-[44px] text-base text-text-primary font-semibold",children:j})]})]}),I?s.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 hidden md:block",children:s.jsx("h1",{className:"text-lg md:text-xl font-bold tracking-tight text-text-primary",children:I})}):null,s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ee,{variant:"ghost",size:"icon",onClick:()=>d(!0),className:"relative text-text-secondary hover:text-text-primary transition-colors duration-200",children:[s.jsx(bx,{className:"h-5 w-5"}),c.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:c.length})]}),s.jsx(Ee,{variant:"ghost",size:"icon",onClick:k,className:"text-text-secondary hover:text-brand hover:bg-brand/10 transition-colors duration-200",children:s.jsx(wce,{className:"h-5 w-5"})}),s.jsx("div",{className:"w-px h-8 bg-border mx-2"}),s.jsxs("div",{className:"group pl-4 pr-4 py-1.5 rounded-full border border-white/10 bg-gradient-to-b from-surface-2/60 to-surface/60 text-text-primary flex items-center gap-3 shadow-sm hover:border-white/20 transition-colors",title:`${x}  ${b}`,children:[s.jsx("span",{className:"text-sm font-semibold truncate max-w-[180px]",children:x}),s.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-brand/15 text-brand font-medium tracking-wide",children:b})]})]}),g&&c.length>0&&s.jsxs(lr.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:"absolute top-20 right-8 bg-surface border border-border rounded-lg shadow-2xl p-4 max-w-sm z-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"text-sm font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(bx,{className:"h-4 w-4 text-brand"}),"Novos Alertas (",c.length,")"]}),s.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>p(!1),className:"h-6 w-6 p-0 text-text-muted hover:text-text-primary",children:s.jsx(_d,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[c.slice(0,3).map((M,z)=>{const W=C(M.icone),U=E(M.cor);return s.jsxs("div",{className:"flex items-center gap-2 p-1",children:[s.jsx(W,{className:`w-3 h-3 ${U}`}),s.jsx("span",{className:"text-text-secondary truncate",children:M.mensagem})]},z)}),c.length>3&&s.jsx("div",{className:"text-center pt-1",children:s.jsxs(Ee,{variant:"ghost",size:"sm",onClick:()=>{d(!0),p(!1)},className:"text-xs text-brand hover:text-brand/80",children:["Ver todos (",c.length,")"]})})]})]}),s.jsx(qr,{open:u,onOpenChange:d,children:s.jsxs(Lr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(Ur,{children:s.jsxs($r,{className:"flex items-center gap-2",children:[s.jsx(bx,{className:"h-5 w-5 text-brand"}),"Todos os Alertas (",c.length,")"]})}),s.jsx("div",{className:"mt-4",children:c.length===0?s.jsx("p",{className:"text-sm text-text-muted text-center py-8",children:"Nenhum alerta no momento! "}):s.jsx("ul",{className:"space-y-2 text-sm",children:c.map((M,z)=>s.jsx(R,{alert:M,onClick:()=>{M.link&&(m(M.link),d(!1))}},z))})})]})})]})}var AG={exports:{}},pye="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gye=pye,vye=gye;function PG(){}function EG(){}EG.resetWarningCache=PG;var yye=function(){function e(n,a,i,o,l,c){if(c!==vye){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:EG,resetWarningCache:PG};return r.PropTypes=r,r};AG.exports=yye();var xye=AG.exports;const Ir=zn(xye);function bye(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var kG=v,wye=bye(kG);function F6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Sye=!!(typeof window<"u"&&window.document&&window.document.createElement);function jye(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(a){return a.displayName||a.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=e(o.map(function(d){return d.props})),u.canUseDOM?t(l):r&&(l=r(l))}var u=function(d){_ye(f,d);function f(){return d.apply(this,arguments)||this}f.peek=function(){return l},f.rewind=function(){if(f.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=l;return l=void 0,o=[],g};var h=f.prototype;return h.UNSAFE_componentWillMount=function(){o.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var g=o.indexOf(this);o.splice(g,1),c()},h.render=function(){return wye.createElement(i,this.props)},f}(kG.PureComponent);return F6(u,"displayName","SideEffect("+n(i)+")"),F6(u,"canUseDOM",Sye),u}}var Nye=jye;const Cye=zn(Nye);var Aye=typeof Element<"u",Pye=typeof Map=="function",Eye=typeof Set=="function",kye=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function d2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!d2(e[n],t[n]))return!1;return!0}var i;if(Pye&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!d2(n.value[1],t.get(n.value[0])))return!1;return!0}if(Eye&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(kye&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(Aye&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!d2(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var Oye=function(t,r){try{return d2(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Tye=zn(Oye);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var B6=Object.getOwnPropertySymbols,Iye=Object.prototype.hasOwnProperty,Dye=Object.prototype.propertyIsEnumerable;function Mye(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Rye(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(i){a[i]=i}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Lye=Rye()?Object.assign:function(e,t){for(var r,n=Mye(e),a,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r)Iye.call(r,o)&&(n[o]=r[o]);if(B6){a=B6(r);for(var l=0;l<a.length;l++)Dye.call(r,a[l])&&(n[a[l]]=r[a[l]])}}return n};const $ye=zn(Lye);var Cm={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},on={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(on).map(function(e){return on[e]});var Ka={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},h_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},b0={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Fye=Object.keys(h_).reduce(function(e,t){return e[h_[t]]=t,e},{}),Bye=[on.NOSCRIPT,on.SCRIPT,on.STYLE],kc="data-react-helmet",zye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qye=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Uye=function(){function e(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wye=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},z6=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},Vye=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},qE=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Hye=function(t){var r=Ag(t,on.TITLE),n=Ag(t,b0.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var a=Ag(t,b0.DEFAULT_TITLE);return r||a||void 0},Gye=function(t){return Ag(t,b0.ON_CHANGE_CLIENT_STATE)||function(){}},O5=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,a){return Es({},n,a)},{})},Kye=function(t,r){return r.filter(function(n){return typeof n[on.BASE]<"u"}).map(function(n){return n[on.BASE]}).reverse().reduce(function(n,a){if(!n.length)for(var i=Object.keys(a),o=0;o<i.length;o++){var l=i[o],c=l.toLowerCase();if(t.indexOf(c)!==-1&&a[c])return n.concat(a)}return n},[])},Iy=function(t,r,n){var a={};return n.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&Qye("Helmet: "+t+' should be of type "Array". Instead found type "'+zye(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,o){var l={};o.filter(function(h){for(var m=void 0,g=Object.keys(h),p=0;p<g.length;p++){var y=g[p],x=y.toLowerCase();r.indexOf(x)!==-1&&!(m===Ka.REL&&h[m].toLowerCase()==="canonical")&&!(x===Ka.REL&&h[x].toLowerCase()==="stylesheet")&&(m=x),r.indexOf(y)!==-1&&(y===Ka.INNER_HTML||y===Ka.CSS_TEXT||y===Ka.ITEM_PROP)&&(m=y)}if(!m||!h[m])return!1;var b=h[m].toLowerCase();return a[m]||(a[m]={}),l[m]||(l[m]={}),a[m][b]?!1:(l[m][b]=!0,!0)}).reverse().forEach(function(h){return i.push(h)});for(var c=Object.keys(l),u=0;u<c.length;u++){var d=c[u],f=$ye({},a[d],l[d]);a[d]=f}return i},[]).reverse()},Ag=function(t,r){for(var n=t.length-1;n>=0;n--){var a=t[n];if(a.hasOwnProperty(r))return a[r]}return null},Yye=function(t){return{baseTag:Kye([Ka.HREF,Ka.TARGET],t),bodyAttributes:O5(Cm.BODY,t),defer:Ag(t,b0.DEFER),encode:Ag(t,b0.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:O5(Cm.HTML,t),linkTags:Iy(on.LINK,[Ka.REL,Ka.HREF],t),metaTags:Iy(on.META,[Ka.NAME,Ka.CHARSET,Ka.HTTPEQUIV,Ka.PROPERTY,Ka.ITEM_PROP],t),noscriptTags:Iy(on.NOSCRIPT,[Ka.INNER_HTML],t),onChangeClientState:Gye(t),scriptTags:Iy(on.SCRIPT,[Ka.SRC,Ka.INNER_HTML],t),styleTags:Iy(on.STYLE,[Ka.CSS_TEXT],t),title:Hye(t),titleAttributes:O5(Cm.TITLE,t)}},UE=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){UE(t)},0)}}(),q6=function(t){return clearTimeout(t)},Xye=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||UE:global.requestAnimationFrame||UE,Jye=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||q6:global.cancelAnimationFrame||q6,Qye=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Dy=null,Zye=function(t){Dy&&Jye(Dy),t.defer?Dy=Xye(function(){U6(t,function(){Dy=null})}):(U6(t),Dy=null)},U6=function(t,r){var n=t.baseTag,a=t.bodyAttributes,i=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.onChangeClientState,d=t.scriptTags,f=t.styleTags,h=t.title,m=t.titleAttributes;WE(on.BODY,a),WE(on.HTML,i),exe(h,m);var g={baseTag:Ip(on.BASE,n),linkTags:Ip(on.LINK,o),metaTags:Ip(on.META,l),noscriptTags:Ip(on.NOSCRIPT,c),scriptTags:Ip(on.SCRIPT,d),styleTags:Ip(on.STYLE,f)},p={},y={};Object.keys(g).forEach(function(x){var b=g[x],w=b.newTags,S=b.oldTags;w.length&&(p[x]=w),S.length&&(y[x]=g[x].oldTags)}),r&&r(),u(t,p,y)},OG=function(t){return Array.isArray(t)?t.join(""):t},exe=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=OG(t)),WE(on.TITLE,r)},WE=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var a=n.getAttribute(kc),i=a?a.split(","):[],o=[].concat(i),l=Object.keys(r),c=0;c<l.length;c++){var u=l[c],d=r[u]||"";n.getAttribute(u)!==d&&n.setAttribute(u,d),i.indexOf(u)===-1&&i.push(u);var f=o.indexOf(u);f!==-1&&o.splice(f,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);i.length===o.length?n.removeAttribute(kc):n.getAttribute(kc)!==l.join(",")&&n.setAttribute(kc,l.join(","))}},Ip=function(t,r){var n=document.head||document.querySelector(on.HEAD),a=n.querySelectorAll(t+"["+kc+"]"),i=Array.prototype.slice.call(a),o=[],l=void 0;return r&&r.length&&r.forEach(function(c){var u=document.createElement(t);for(var d in c)if(c.hasOwnProperty(d))if(d===Ka.INNER_HTML)u.innerHTML=c.innerHTML;else if(d===Ka.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var f=typeof c[d]>"u"?"":c[d];u.setAttribute(d,f)}u.setAttribute(kc,"true"),i.some(function(h,m){return l=m,u.isEqualNode(h)})?i.splice(l,1):o.push(u)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return n.appendChild(c)}),{oldTags:i,newTags:o}},TG=function(t){return Object.keys(t).reduce(function(r,n){var a=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+a:a},"")},txe=function(t,r,n,a){var i=TG(n),o=OG(r);return i?"<"+t+" "+kc+'="true" '+i+">"+qE(o,a)+"</"+t+">":"<"+t+" "+kc+'="true">'+qE(o,a)+"</"+t+">"},rxe=function(t,r,n){return r.reduce(function(a,i){var o=Object.keys(i).filter(function(u){return!(u===Ka.INNER_HTML||u===Ka.CSS_TEXT)}).reduce(function(u,d){var f=typeof i[d]>"u"?d:d+'="'+qE(i[d],n)+'"';return u?u+" "+f:f},""),l=i.innerHTML||i.cssText||"",c=Bye.indexOf(t)===-1;return a+"<"+t+" "+kc+'="true" '+o+(c?"/>":">"+l+"</"+t+">")},"")},IG=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[h_[a]||a]=t[a],n},r)},nxe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[Fye[a]||a]=t[a],n},r)},axe=function(t,r,n){var a,i=(a={key:r},a[kc]=!0,a),o=IG(n,i);return[le.createElement(on.TITLE,o,r)]},ixe=function(t,r){return r.map(function(n,a){var i,o=(i={key:a},i[kc]=!0,i);return Object.keys(n).forEach(function(l){var c=h_[l]||l;if(c===Ka.INNER_HTML||c===Ka.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[c]=n[l]}),le.createElement(t,o)})},qu=function(t,r,n){switch(t){case on.TITLE:return{toComponent:function(){return axe(t,r.title,r.titleAttributes)},toString:function(){return txe(t,r.title,r.titleAttributes,n)}};case Cm.BODY:case Cm.HTML:return{toComponent:function(){return IG(r)},toString:function(){return TG(r)}};default:return{toComponent:function(){return ixe(t,r)},toString:function(){return rxe(t,r,n)}}}},DG=function(t){var r=t.baseTag,n=t.bodyAttributes,a=t.encode,i=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.scriptTags,d=t.styleTags,f=t.title,h=f===void 0?"":f,m=t.titleAttributes;return{base:qu(on.BASE,r,a),bodyAttributes:qu(Cm.BODY,n,a),htmlAttributes:qu(Cm.HTML,i,a),link:qu(on.LINK,o,a),meta:qu(on.META,l,a),noscript:qu(on.NOSCRIPT,c,a),script:qu(on.SCRIPT,u,a),style:qu(on.STYLE,d,a),title:qu(on.TITLE,{title:h,titleAttributes:m},a)}},oxe=function(t){var r,n;return n=r=function(a){Wye(i,a);function i(){return qye(this,i),Vye(this,a.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!Tye(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case on.SCRIPT:case on.NOSCRIPT:return{innerHTML:c};case on.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,d=l.arrayTypeChildren,f=l.newChildProps,h=l.nestedChildren;return Es({},d,(c={},c[u.type]=[].concat(d[u.type]||[],[Es({},f,this.mapNestedChildrenToProps(u,h))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,u,d=l.child,f=l.newProps,h=l.newChildProps,m=l.nestedChildren;switch(d.type){case on.TITLE:return Es({},f,(c={},c[d.type]=m,c.titleAttributes=Es({},h),c));case on.BODY:return Es({},f,{bodyAttributes:Es({},h)});case on.HTML:return Es({},f,{htmlAttributes:Es({},h)})}return Es({},f,(u={},u[d.type]=Es({},h),u))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=Es({},c);return Object.keys(l).forEach(function(d){var f;u=Es({},u,(f={},f[d]=l[d],f))}),u},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var u=this,d={};return le.Children.forEach(l,function(f){if(!(!f||!f.props)){var h=f.props,m=h.children,g=z6(h,["children"]),p=nxe(g);switch(u.warnOnInvalidChildren(f,m),f.type){case on.LINK:case on.META:case on.NOSCRIPT:case on.SCRIPT:case on.STYLE:d=u.flattenArrayTypeChildren({child:f,arrayTypeChildren:d,newChildProps:p,nestedChildren:m});break;default:c=u.mapObjectTypeChildren({child:f,newProps:c,newChildProps:p,nestedChildren:m});break}}}),c=this.mapArrayTypeChildrenToProps(d,c),c},i.prototype.render=function(){var l=this.props,c=l.children,u=z6(l,["children"]),d=Es({},u);return c&&(d=this.mapChildrenToProps(c,d)),le.createElement(t,d)},Uye(i,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),i}(le.Component),r.propTypes={base:Ir.object,bodyAttributes:Ir.object,children:Ir.oneOfType([Ir.arrayOf(Ir.node),Ir.node]),defaultTitle:Ir.string,defer:Ir.bool,encodeSpecialCharacters:Ir.bool,htmlAttributes:Ir.object,link:Ir.arrayOf(Ir.object),meta:Ir.arrayOf(Ir.object),noscript:Ir.arrayOf(Ir.object),onChangeClientState:Ir.func,script:Ir.arrayOf(Ir.object),style:Ir.arrayOf(Ir.object),title:Ir.string,titleAttributes:Ir.object,titleTemplate:Ir.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var a=t.rewind();return a||(a=DG({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),a},n},sxe=function(){return null},lxe=Cye(Yye,Zye,DG)(sxe),ho=oxe(lxe);ho.renderStatic=ho.rewind;const $t=le.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Ot("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));$t.displayName="Input";var cxe="Label",MG=v.forwardRef((e,t)=>s.jsx(Vr.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));MG.displayName=cxe;var RG=MG;const uxe=UI("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gt=le.forwardRef(({className:e,...t},r)=>s.jsx(RG,{ref:r,className:Ot(uxe(),e),...t}));gt.displayName=RG.displayName;const dxe=e=>{const t={"Invalid login credentials":"Email ou senha incorretos","Email not confirmed":"Email no confirmado","User not found":"Usurio no encontrado","Invalid email":"Email invlido","Password should be at least 6 characters":"A senha deve ter pelo menos 6 caracteres","Unable to validate email address: invalid format":"Formato de email invlido","Email rate limit exceeded":"Muitas tentativas. Aguarde alguns minutos","Network request failed":"Erro de conexo. Verifique sua internet","Failed to fetch":"Erro de conexo. Verifique sua internet"};if(t[e])return t[e];for(const[r,n]of Object.entries(t))if(e.includes(r))return n;return"Erro ao fazer login. Verifique suas credenciais e tente novamente."},fxe=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[a,i]=v.useState(""),[o,l]=v.useState({email:"",password:""}),{signIn:c,user:u,authReady:d}=po(),{toast:f}=Za();v.useEffect(()=>{if(d&&u)try{window.location.replace("/")}catch{}},[d,!!u]);const h=p=>{l({...o,[p.target.name]:p.target.value}),a&&i("")},m=async p=>{p.preventDefault(),n(!0),i("");try{const y=await c(o.email,o.password);if(y.error)throw y.error;f({title:"Login realizado!",description:"Bem-vindo de volta!",variant:"default"});try{window.location.replace("/")}catch{}}catch(y){const x=y.message||"Ocorreu um erro. Tente novamente.",b=dxe(x);i(b),f({title:"Erro",description:b,variant:"destructive"})}finally{n(!1)}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}};return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Login - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Acesse sua conta do Fluxo7 Arena"})]}),s.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 sm:p-6",children:[s.jsx("div",{className:"absolute inset-0 bg-court-pattern opacity-[0.02] mix-blend-overlay"}),s.jsxs(lr.div,{variants:g,initial:"hidden",animate:"visible",className:"relative z-10 w-full max-w-md pb-20 sm:pb-0",children:[s.jsxs("div",{className:"fx-card",children:[s.jsx("div",{className:"text-center mb-6",children:s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-brand rounded-xl flex items-center justify-center mr-4",children:s.jsx(Ib,{className:"w-8 h-8 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-5xl font-extrabold",children:[s.jsx("span",{style:{color:"#FF6600"},children:"Fluxo"}),s.jsx("span",{style:{color:"#FFAA33"},children:"7"})]}),s.jsx("p",{className:"text-2xl font-semibold",style:{color:"#B0B0B0"},children:"Arena"})]})]})}),s.jsxs("form",{onSubmit:m,className:"space-y-5 sm:space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(gt,{htmlFor:"email",className:"text-text-primary flex items-center gap-2 text-sm sm:text-base",children:[s.jsx(dE,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Email"]}),s.jsx($t,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:o.email,onChange:h,required:!0,className:"placeholder:text-[#B0B0B0] h-12 sm:h-10 text-base sm:text-sm"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(gt,{htmlFor:"password",className:"text-text-primary flex items-center gap-2 text-sm sm:text-base",children:[s.jsx(zm,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Senha"]}),s.jsxs("div",{className:"relative",children:[s.jsx($t,{id:"password",name:"password",type:e?"text":"password",placeholder:"Sua senha",value:o.password,onChange:h,required:!0,className:"pr-10 placeholder:text-[#B0B0B0] h-12 sm:h-10 text-base sm:text-sm"}),s.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:e?s.jsx(Eb,{className:"w-5 h-5 sm:w-4 sm:h-4"}):s.jsx(kb,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]}),a&&s.jsx(lr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-destructive/10 border border-destructive/30 text-destructive text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-base",children:""}),s.jsx("span",{className:"flex-1",children:a})]})}),s.jsx(Ee,{type:"submit",className:"w-full h-12 sm:h-10 text-base sm:text-sm",disabled:r,children:r?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bce,{className:"w-4 h-4"}),"Entrar"]})})]})]}),s.jsx("p",{className:"mt-4 text-center text-xs text-text-muted opacity-70",children:" 2025 Fluxo7 Arena  Todos os direitos reservados."})]})]})]})},hxe=({children:e})=>{const{user:t,authReady:r}=po();return r?t?e:s.jsx(fxe,{}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-brand border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-text-primary font-medium",children:"Carregando..."})]})})};var mxe=Array.isArray,Ws=mxe,pxe=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,LG=pxe,gxe=LG,vxe=typeof self=="object"&&self&&self.Object===Object&&self,yxe=gxe||vxe||Function("return this")(),Tu=yxe,xxe=Tu,bxe=xxe.Symbol,zb=bxe,W6=zb,$G=Object.prototype,wxe=$G.hasOwnProperty,_xe=$G.toString,My=W6?W6.toStringTag:void 0;function Sxe(e){var t=wxe.call(e,My),r=e[My];try{e[My]=void 0;var n=!0}catch{}var a=_xe.call(e);return n&&(t?e[My]=r:delete e[My]),a}var jxe=Sxe,Nxe=Object.prototype,Cxe=Nxe.toString;function Axe(e){return Cxe.call(e)}var Pxe=Axe,V6=zb,Exe=jxe,kxe=Pxe,Oxe="[object Null]",Txe="[object Undefined]",H6=V6?V6.toStringTag:void 0;function Ixe(e){return e==null?e===void 0?Txe:Oxe:H6&&H6 in Object(e)?Exe(e):kxe(e)}var Wd=Ixe;function Dxe(e){return e!=null&&typeof e=="object"}var Vd=Dxe,Mxe=Wd,Rxe=Vd,Lxe="[object Symbol]";function $xe(e){return typeof e=="symbol"||Rxe(e)&&Mxe(e)==Lxe}var Uv=$xe,Fxe=Ws,Bxe=Uv,zxe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qxe=/^\w*$/;function Uxe(e,t){if(Fxe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Bxe(e)?!0:qxe.test(e)||!zxe.test(e)||t!=null&&e in Object(t)}var n3=Uxe;function Wxe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var bh=Wxe;const Wv=zn(bh);var Vxe=Wd,Hxe=bh,Gxe="[object AsyncFunction]",Kxe="[object Function]",Yxe="[object GeneratorFunction]",Xxe="[object Proxy]";function Jxe(e){if(!Hxe(e))return!1;var t=Vxe(e);return t==Kxe||t==Yxe||t==Gxe||t==Xxe}var a3=Jxe;const Wr=zn(a3);var Qxe=Tu,Zxe=Qxe["__core-js_shared__"],e0e=Zxe,T5=e0e,G6=function(){var e=/[^.]+$/.exec(T5&&T5.keys&&T5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function t0e(e){return!!G6&&G6 in e}var r0e=t0e,n0e=Function.prototype,a0e=n0e.toString;function i0e(e){if(e!=null){try{return a0e.call(e)}catch{}try{return e+""}catch{}}return""}var FG=i0e,o0e=a3,s0e=r0e,l0e=bh,c0e=FG,u0e=/[\\^$.*+?()[\]{}|]/g,d0e=/^\[object .+?Constructor\]$/,f0e=Function.prototype,h0e=Object.prototype,m0e=f0e.toString,p0e=h0e.hasOwnProperty,g0e=RegExp("^"+m0e.call(p0e).replace(u0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v0e(e){if(!l0e(e)||s0e(e))return!1;var t=o0e(e)?g0e:d0e;return t.test(c0e(e))}var y0e=v0e;function x0e(e,t){return e?.[t]}var b0e=x0e,w0e=y0e,_0e=b0e;function S0e(e,t){var r=_0e(e,t);return w0e(r)?r:void 0}var dp=S0e,j0e=dp,N0e=j0e(Object,"create"),kj=N0e,K6=kj;function C0e(){this.__data__=K6?K6(null):{},this.size=0}var A0e=C0e;function P0e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var E0e=P0e,k0e=kj,O0e="__lodash_hash_undefined__",T0e=Object.prototype,I0e=T0e.hasOwnProperty;function D0e(e){var t=this.__data__;if(k0e){var r=t[e];return r===O0e?void 0:r}return I0e.call(t,e)?t[e]:void 0}var M0e=D0e,R0e=kj,L0e=Object.prototype,$0e=L0e.hasOwnProperty;function F0e(e){var t=this.__data__;return R0e?t[e]!==void 0:$0e.call(t,e)}var B0e=F0e,z0e=kj,q0e="__lodash_hash_undefined__";function U0e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z0e&&t===void 0?q0e:t,this}var W0e=U0e,V0e=A0e,H0e=E0e,G0e=M0e,K0e=B0e,Y0e=W0e;function Vv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vv.prototype.clear=V0e;Vv.prototype.delete=H0e;Vv.prototype.get=G0e;Vv.prototype.has=K0e;Vv.prototype.set=Y0e;var X0e=Vv;function J0e(){this.__data__=[],this.size=0}var Q0e=J0e;function Z0e(e,t){return e===t||e!==e&&t!==t}var i3=Z0e,ebe=i3;function tbe(e,t){for(var r=e.length;r--;)if(ebe(e[r][0],t))return r;return-1}var Oj=tbe,rbe=Oj,nbe=Array.prototype,abe=nbe.splice;function ibe(e){var t=this.__data__,r=rbe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():abe.call(t,r,1),--this.size,!0}var obe=ibe,sbe=Oj;function lbe(e){var t=this.__data__,r=sbe(t,e);return r<0?void 0:t[r][1]}var cbe=lbe,ube=Oj;function dbe(e){return ube(this.__data__,e)>-1}var fbe=dbe,hbe=Oj;function mbe(e,t){var r=this.__data__,n=hbe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var pbe=mbe,gbe=Q0e,vbe=obe,ybe=cbe,xbe=fbe,bbe=pbe;function Hv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hv.prototype.clear=gbe;Hv.prototype.delete=vbe;Hv.prototype.get=ybe;Hv.prototype.has=xbe;Hv.prototype.set=bbe;var Tj=Hv,wbe=dp,_be=Tu,Sbe=wbe(_be,"Map"),o3=Sbe,Y6=X0e,jbe=Tj,Nbe=o3;function Cbe(){this.size=0,this.__data__={hash:new Y6,map:new(Nbe||jbe),string:new Y6}}var Abe=Cbe;function Pbe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Ebe=Pbe,kbe=Ebe;function Obe(e,t){var r=e.__data__;return kbe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ij=Obe,Tbe=Ij;function Ibe(e){var t=Tbe(this,e).delete(e);return this.size-=t?1:0,t}var Dbe=Ibe,Mbe=Ij;function Rbe(e){return Mbe(this,e).get(e)}var Lbe=Rbe,$be=Ij;function Fbe(e){return $be(this,e).has(e)}var Bbe=Fbe,zbe=Ij;function qbe(e,t){var r=zbe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Ube=qbe,Wbe=Abe,Vbe=Dbe,Hbe=Lbe,Gbe=Bbe,Kbe=Ube;function Gv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gv.prototype.clear=Wbe;Gv.prototype.delete=Vbe;Gv.prototype.get=Hbe;Gv.prototype.has=Gbe;Gv.prototype.set=Kbe;var s3=Gv,BG=s3,Ybe="Expected a function";function l3(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ybe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(l3.Cache||BG),r}l3.Cache=BG;var zG=l3;const Xbe=zn(zG);var Jbe=zG,Qbe=500;function Zbe(e){var t=Jbe(e,function(n){return r.size===Qbe&&r.clear(),n}),r=t.cache;return t}var e1e=Zbe,t1e=e1e,r1e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n1e=/\\(\\)?/g,a1e=t1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(r1e,function(r,n,a,i){t.push(a?i.replace(n1e,"$1"):n||r)}),t}),i1e=a1e;function o1e(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var c3=o1e,X6=zb,s1e=c3,l1e=Ws,c1e=Uv,u1e=1/0,J6=X6?X6.prototype:void 0,Q6=J6?J6.toString:void 0;function qG(e){if(typeof e=="string")return e;if(l1e(e))return s1e(e,qG)+"";if(c1e(e))return Q6?Q6.call(e):"";var t=e+"";return t=="0"&&1/e==-u1e?"-0":t}var d1e=qG,f1e=d1e;function h1e(e){return e==null?"":f1e(e)}var UG=h1e,m1e=Ws,p1e=n3,g1e=i1e,v1e=UG;function y1e(e,t){return m1e(e)?e:p1e(e,t)?[e]:g1e(v1e(e))}var WG=y1e,x1e=Uv,b1e=1/0;function w1e(e){if(typeof e=="string"||x1e(e))return e;var t=e+"";return t=="0"&&1/e==-b1e?"-0":t}var Dj=w1e,_1e=WG,S1e=Dj;function j1e(e,t){t=_1e(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[S1e(t[r++])];return r&&r==n?e:void 0}var u3=j1e,N1e=u3;function C1e(e,t,r){var n=e==null?void 0:N1e(e,t);return n===void 0?r:n}var VG=C1e;const xl=zn(VG);function A1e(e){return e==null}var P1e=A1e;const Qr=zn(P1e);var E1e=Wd,k1e=Ws,O1e=Vd,T1e="[object String]";function I1e(e){return typeof e=="string"||!k1e(e)&&O1e(e)&&E1e(e)==T1e}var D1e=I1e;const Um=zn(D1e);var HG={exports:{}},sa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d3=Symbol.for("react.element"),f3=Symbol.for("react.portal"),Mj=Symbol.for("react.fragment"),Rj=Symbol.for("react.strict_mode"),Lj=Symbol.for("react.profiler"),$j=Symbol.for("react.provider"),Fj=Symbol.for("react.context"),M1e=Symbol.for("react.server_context"),Bj=Symbol.for("react.forward_ref"),zj=Symbol.for("react.suspense"),qj=Symbol.for("react.suspense_list"),Uj=Symbol.for("react.memo"),Wj=Symbol.for("react.lazy"),R1e=Symbol.for("react.offscreen"),GG;GG=Symbol.for("react.module.reference");function oc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case d3:switch(e=e.type,e){case Mj:case Lj:case Rj:case zj:case qj:return e;default:switch(e=e&&e.$$typeof,e){case M1e:case Fj:case Bj:case Wj:case Uj:case $j:return e;default:return t}}case f3:return t}}}sa.ContextConsumer=Fj;sa.ContextProvider=$j;sa.Element=d3;sa.ForwardRef=Bj;sa.Fragment=Mj;sa.Lazy=Wj;sa.Memo=Uj;sa.Portal=f3;sa.Profiler=Lj;sa.StrictMode=Rj;sa.Suspense=zj;sa.SuspenseList=qj;sa.isAsyncMode=function(){return!1};sa.isConcurrentMode=function(){return!1};sa.isContextConsumer=function(e){return oc(e)===Fj};sa.isContextProvider=function(e){return oc(e)===$j};sa.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===d3};sa.isForwardRef=function(e){return oc(e)===Bj};sa.isFragment=function(e){return oc(e)===Mj};sa.isLazy=function(e){return oc(e)===Wj};sa.isMemo=function(e){return oc(e)===Uj};sa.isPortal=function(e){return oc(e)===f3};sa.isProfiler=function(e){return oc(e)===Lj};sa.isStrictMode=function(e){return oc(e)===Rj};sa.isSuspense=function(e){return oc(e)===zj};sa.isSuspenseList=function(e){return oc(e)===qj};sa.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Mj||e===Lj||e===Rj||e===zj||e===qj||e===R1e||typeof e=="object"&&e!==null&&(e.$$typeof===Wj||e.$$typeof===Uj||e.$$typeof===$j||e.$$typeof===Fj||e.$$typeof===Bj||e.$$typeof===GG||e.getModuleId!==void 0)};sa.typeOf=oc;HG.exports=sa;var L1e=HG.exports,$1e=Wd,F1e=Vd,B1e="[object Number]";function z1e(e){return typeof e=="number"||F1e(e)&&$1e(e)==B1e}var KG=z1e;const q1e=zn(KG);var U1e=KG;function W1e(e){return U1e(e)&&e!=+e}var V1e=W1e;const Kv=zn(V1e);var ms=function(t){return t===0?0:t>0?1:-1},hm=function(t){return Um(t)&&t.indexOf("%")===t.length-1},Xt=function(t){return q1e(t)&&!Kv(t)},H1e=function(t){return Qr(t)},eo=function(t){return Xt(t)||Um(t)},G1e=0,fp=function(t){var r=++G1e;return"".concat(t||"").concat(r)},ps=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xt(t)&&!Um(t))return n;var i;if(hm(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Kv(i)&&(i=n),a&&i>r&&(i=r),i},_f=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},K1e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Ji=function(t,r){return Xt(t)&&Xt(r)?function(n){return t+n*(r-t)}:function(){return r}};function m_(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):xl(n,t))===r})}var Y1e=function(t,r){return Xt(t)&&Xt(r)?t-r:Um(t)&&Um(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Pg(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function VE(e){"@babel/helpers - typeof";return VE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VE(e)}var X1e=["viewBox","children"],J1e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Z6=["points","pathLength"],I5={svg:X1e,polygon:Z6,polyline:Z6},h3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],p_=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(v.isValidElement(t)&&(n=t.props),!Wv(n))return null;var a={};return Object.keys(n).forEach(function(i){h3.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Q1e=function(t,r,n){return function(a){return t(r,n,a),null}},Wm=function(t,r,n){if(!Wv(t)||VE(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];h3.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Q1e(o,r,n))}),a},Z1e=["children"],ewe=["children"];function e$(e,t){if(e==null)return{};var r=twe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function twe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HE(e){"@babel/helpers - typeof";return HE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HE(e)}var t$={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Nd=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},r$=null,D5=null,m3=function e(t){if(t===r$&&Array.isArray(D5))return D5;var r=[];return v.Children.forEach(t,function(n){Qr(n)||(L1e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),D5=r,r$=t,r};function bl(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Nd(a)}):n=[Nd(t)],m3(e).forEach(function(a){var i=xl(a,"type.displayName")||xl(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ll(e,t){var r=bl(e,t);return r&&r[0]}var n$=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Xt(n)||n<=0||!Xt(a)||a<=0)},rwe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],nwe=function(t){return t&&t.type&&Um(t.type)&&rwe.indexOf(t.type)>=0},YG=function(t){return t&&HE(t)==="object"&&"clipDot"in t},awe=function(t,r,n,a){var i,o=(i=I5?.[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Wr(t)&&(a&&o.includes(r)||J1e.includes(r))||n&&h3.includes(r)},Er=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(v.isValidElement(t)&&(a=t.props),!Wv(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;awe((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},GE=function e(t,r){if(t===r)return!0;var n=v.Children.count(t);if(n!==v.Children.count(r))return!1;if(n===0)return!0;if(n===1)return a$(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!a$(i,o))return!1}return!0},a$=function(t,r){if(Qr(t)&&Qr(r))return!0;if(!Qr(t)&&!Qr(r)){var n=t.props||{},a=n.children,i=e$(n,Z1e),o=r.props||{},l=o.children,c=e$(o,ewe);return a&&l?Pg(i,c)&&GE(a,l):!a&&!l?Pg(i,c):!1}return!1},i$=function(t,r){var n=[],a={};return m3(t).forEach(function(i,o){if(nwe(i))n.push(i);else if(i){var l=Nd(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},iwe=function(t){var r=t&&t.type;return r&&t$[r]?t$[r]:null},owe=function(t,r){return m3(r).indexOf(t)},swe=["children","width","height","viewBox","className","style","title","desc"];function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KE.apply(this,arguments)}function lwe(e,t){if(e==null)return{};var r=cwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function YE(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=lwe(e,swe),d=a||{width:r,height:n,x:0,y:0},f=Zr("recharts-surface",i);return le.createElement("svg",KE({},Er(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),le.createElement("title",null,l),le.createElement("desc",null,c),t)}var uwe=["children","className"];function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XE.apply(this,arguments)}function dwe(e,t){if(e==null)return{};var r=fwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Nn=le.forwardRef(function(e,t){var r=e.children,n=e.className,a=dwe(e,uwe),i=Zr("recharts-layer",n);return le.createElement("g",XE({className:i},Er(a,!0),{ref:t}),r)}),Mc=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function hwe(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var mwe=hwe,pwe=mwe;function gwe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:pwe(e,t,r)}var vwe=gwe,ywe="\\ud800-\\udfff",xwe="\\u0300-\\u036f",bwe="\\ufe20-\\ufe2f",wwe="\\u20d0-\\u20ff",_we=xwe+bwe+wwe,Swe="\\ufe0e\\ufe0f",jwe="\\u200d",Nwe=RegExp("["+jwe+ywe+_we+Swe+"]");function Cwe(e){return Nwe.test(e)}var XG=Cwe;function Awe(e){return e.split("")}var Pwe=Awe,JG="\\ud800-\\udfff",Ewe="\\u0300-\\u036f",kwe="\\ufe20-\\ufe2f",Owe="\\u20d0-\\u20ff",Twe=Ewe+kwe+Owe,Iwe="\\ufe0e\\ufe0f",Dwe="["+JG+"]",JE="["+Twe+"]",QE="\\ud83c[\\udffb-\\udfff]",Mwe="(?:"+JE+"|"+QE+")",QG="[^"+JG+"]",ZG="(?:\\ud83c[\\udde6-\\uddff]){2}",eK="[\\ud800-\\udbff][\\udc00-\\udfff]",Rwe="\\u200d",tK=Mwe+"?",rK="["+Iwe+"]?",Lwe="(?:"+Rwe+"(?:"+[QG,ZG,eK].join("|")+")"+rK+tK+")*",$we=rK+tK+Lwe,Fwe="(?:"+[QG+JE+"?",JE,ZG,eK,Dwe].join("|")+")",Bwe=RegExp(QE+"(?="+QE+")|"+Fwe+$we,"g");function zwe(e){return e.match(Bwe)||[]}var qwe=zwe,Uwe=Pwe,Wwe=XG,Vwe=qwe;function Hwe(e){return Wwe(e)?Vwe(e):Uwe(e)}var Gwe=Hwe,Kwe=vwe,Ywe=XG,Xwe=Gwe,Jwe=UG;function Qwe(e){return function(t){t=Jwe(t);var r=Ywe(t)?Xwe(t):void 0,n=r?r[0]:t.charAt(0),a=r?Kwe(r,1).join(""):t.slice(1);return n[e]()+a}}var Zwe=Qwe,e2e=Zwe,t2e=e2e("toUpperCase"),r2e=t2e;const Vj=zn(r2e);function Pa(e){return function(){return e}}const nK=Math.cos,g_=Math.sin,Hc=Math.sqrt,v_=Math.PI,Hj=2*v_,ZE=Math.PI,ek=2*ZE,Jh=1e-6,n2e=ek-Jh;function aK(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function a2e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return aK;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class i2e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?aK:a2e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Jh)if(!(Math.abs(f*c-u*d)>Jh)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,p=c*c+u*u,y=m*m+g*g,x=Math.sqrt(p),b=Math.sqrt(h),w=i*Math.tan((ZE-Math.acos((p+h-y)/(2*x*b)))/2),S=w/b,j=w/x;Math.abs(S-1)>Jh&&this._append`L${t+S*d},${r+S*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Jh||Math.abs(this._y1-d)>Jh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%ek+ek),h>n2e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Jh&&this._append`A${n},${n},0,${+(h>=ZE)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function p3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new i2e(t)}function g3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function iK(e){this._context=e}iK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Gj(e){return new iK(e)}function oK(e){return e[0]}function sK(e){return e[1]}function lK(e,t){var r=Pa(!0),n=null,a=Gj,i=null,o=p3(l);e=typeof e=="function"?e:e===void 0?oK:Pa(e),t=typeof t=="function"?t:t===void 0?sK:Pa(t);function l(c){var u,d=(c=g3(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Pa(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Pa(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Pa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function mw(e,t,r){var n=null,a=Pa(!0),i=null,o=Gj,l=null,c=p3(u);e=typeof e=="function"?e:e===void 0?oK:Pa(+e),t=typeof t=="function"?t:Pa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?sK:Pa(+r);function u(f){var h,m,g,p=(f=g3(f)).length,y,x=!1,b,w=new Array(p),S=new Array(p);for(i==null&&(l=o(b=c())),h=0;h<=p;++h){if(!(h<p&&a(y=f[h],h,f))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],S[g]);l.lineEnd(),l.areaEnd()}x&&(w[h]=+e(y,h,f),S[h]=+t(y,h,f),l.point(n?+n(y,h,f):w[h],r?+r(y,h,f):S[h]))}if(b)return l=null,b+""||null}function d(){return lK().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Pa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Pa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Pa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Pa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Pa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Pa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Pa(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class cK{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function o2e(e){return new cK(e,!0)}function s2e(e){return new cK(e,!1)}const v3={draw(e,t){const r=Hc(t/v_);e.moveTo(r,0),e.arc(0,0,r,0,Hj)}},l2e={draw(e,t){const r=Hc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},uK=Hc(1/3),c2e=uK*2,u2e={draw(e,t){const r=Hc(t/c2e),n=r*uK;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},d2e={draw(e,t){const r=Hc(t),n=-r/2;e.rect(n,n,r,r)}},f2e=.8908130915292852,dK=g_(v_/10)/g_(7*v_/10),h2e=g_(Hj/10)*dK,m2e=-nK(Hj/10)*dK,p2e={draw(e,t){const r=Hc(t*f2e),n=h2e*r,a=m2e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Hj*i/5,l=nK(o),c=g_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},M5=Hc(3),g2e={draw(e,t){const r=-Hc(t/(M5*3));e.moveTo(0,r*2),e.lineTo(-M5*r,-r),e.lineTo(M5*r,-r),e.closePath()}},$l=-.5,Fl=Hc(3)/2,tk=1/Hc(12),v2e=(tk/2+1)*3,y2e={draw(e,t){const r=Hc(t/v2e),n=r/2,a=r*tk,i=n,o=r*tk+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo($l*n-Fl*a,Fl*n+$l*a),e.lineTo($l*i-Fl*o,Fl*i+$l*o),e.lineTo($l*l-Fl*c,Fl*l+$l*c),e.lineTo($l*n+Fl*a,$l*a-Fl*n),e.lineTo($l*i+Fl*o,$l*o-Fl*i),e.lineTo($l*l+Fl*c,$l*c-Fl*l),e.closePath()}};function x2e(e,t){let r=null,n=p3(a);e=typeof e=="function"?e:Pa(e||v3),t=typeof t=="function"?t:Pa(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Pa(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Pa(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function y_(){}function x_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function fK(e){this._context=e}fK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:x_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:x_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b2e(e){return new fK(e)}function hK(e){this._context=e}hK.prototype={areaStart:y_,areaEnd:y_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:x_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w2e(e){return new hK(e)}function mK(e){this._context=e}mK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:x_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _2e(e){return new mK(e)}function pK(e){this._context=e}pK.prototype={areaStart:y_,areaEnd:y_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function S2e(e){return new pK(e)}function o$(e){return e<0?-1:1}function s$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(o$(i)+o$(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function l$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function R5(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function b_(e){this._context=e}b_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R5(this,this._t0,l$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,R5(this,l$(this,r=s$(this,e,t)),r);break;default:R5(this,this._t0,r=s$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function gK(e){this._context=new vK(e)}(gK.prototype=Object.create(b_.prototype)).point=function(e,t){b_.prototype.point.call(this,t,e)};function vK(e){this._context=e}vK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function j2e(e){return new b_(e)}function N2e(e){return new gK(e)}function yK(e){this._context=e}yK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=c$(e),a=c$(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function c$(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function C2e(e){return new yK(e)}function Kj(e,t){this._context=e,this._t=t}Kj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function A2e(e){return new Kj(e,.5)}function P2e(e){return new Kj(e,0)}function E2e(e){return new Kj(e,1)}function ev(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function rk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function k2e(e,t){return e[t]}function O2e(e){const t=[];return t.key=e,t}function T2e(){var e=Pa([]),t=rk,r=ev,n=k2e;function a(i){var o=Array.from(e.apply(this,arguments),O2e),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=g3(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Pa(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Pa(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?rk:typeof i=="function"?i:Pa(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??ev,a):r},a}function I2e(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}ev(e,t)}}function D2e(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ev(e,t)}}function M2e(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],y=p[n][1]||0,x=p[n-1][1]||0;m+=y-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,ev(e,t)}}function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}var R2e=["type","size","sizeType"];function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nk.apply(this,arguments)}function u$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(r),!0).forEach(function(n){L2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L2e(e,t,r){return t=$2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $2e(e){var t=F2e(e,"string");return w0(t)=="symbol"?t:t+""}function F2e(e,t){if(w0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(w0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B2e(e,t){if(e==null)return{};var r=z2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var xK={symbolCircle:v3,symbolCross:l2e,symbolDiamond:u2e,symbolSquare:d2e,symbolStar:p2e,symbolTriangle:g2e,symbolWye:y2e},q2e=Math.PI/180,U2e=function(t){var r="symbol".concat(Vj(t));return xK[r]||v3},W2e=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*q2e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},V2e=function(t,r){xK["symbol".concat(Vj(t))]=r},y3=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=B2e(t,R2e),u=d$(d$({},c),{},{type:n,size:i,sizeType:l}),d=function(){var y=U2e(n),x=x2e().type(y).size(W2e(i,l,n));return x()},f=u.className,h=u.cx,m=u.cy,g=Er(u,!0);return h===+h&&m===+m&&i===+i?le.createElement("path",nk({},g,{className:Zr("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};y3.registerSymbol=V2e;function tv(e){"@babel/helpers - typeof";return tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tv(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ak.apply(this,arguments)}function f$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H2e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f$(Object(r),!0).forEach(function(n){_0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wK(n.key),n)}}function K2e(e,t,r){return t&&h$(e.prototype,t),r&&h$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y2e(e,t,r){return t=w_(t),X2e(e,bK()?Reflect.construct(t,r||[],w_(e).constructor):t.apply(e,r))}function X2e(e,t){if(t&&(tv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J2e(e)}function J2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bK=function(){return!!e})()}function w_(e){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w_(e)}function Q2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ik(e,t)}function ik(e,t){return ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ik(e,t)}function _0(e,t,r){return t=wK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e){var t=Z2e(e,"string");return tv(t)=="symbol"?t:t+""}function Z2e(e,t){if(tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bl=32,x3=function(e){function t(){return G2e(this,t),Y2e(this,t,arguments)}return Q2e(t,e),K2e(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Bl/2,o=Bl/6,l=Bl/3,c=n.inactive?a:n.color;if(n.type==="plainline")return le.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Bl,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return le.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Bl,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return le.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Bl/8,"h").concat(Bl,"v").concat(Bl*3/4,"h").concat(-Bl,"z"),className:"recharts-legend-icon"});if(le.isValidElement(n.legendIcon)){var u=H2e({},n);return delete u.legendIcon,le.cloneElement(n.legendIcon,u)}return le.createElement(y3,{fill:c,cx:i,cy:i,size:Bl,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Bl,height:Bl},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,y=Zr(_0(_0({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Wr(m.value)?null:m.value;Mc(!Wr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return le.createElement("li",ak({className:y,style:f,key:"legend-item-".concat(g)},Wm(n.props,m,g)),le.createElement(YE,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),le.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(x,m,g):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);_0(x3,"displayName","Legend");_0(x3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var e_e=Tj;function t_e(){this.__data__=new e_e,this.size=0}var r_e=t_e;function n_e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var a_e=n_e;function i_e(e){return this.__data__.get(e)}var o_e=i_e;function s_e(e){return this.__data__.has(e)}var l_e=s_e,c_e=Tj,u_e=o3,d_e=s3,f_e=200;function h_e(e,t){var r=this.__data__;if(r instanceof c_e){var n=r.__data__;if(!u_e||n.length<f_e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new d_e(n)}return r.set(e,t),this.size=r.size,this}var m_e=h_e,p_e=Tj,g_e=r_e,v_e=a_e,y_e=o_e,x_e=l_e,b_e=m_e;function Yv(e){var t=this.__data__=new p_e(e);this.size=t.size}Yv.prototype.clear=g_e;Yv.prototype.delete=v_e;Yv.prototype.get=y_e;Yv.prototype.has=x_e;Yv.prototype.set=b_e;var _K=Yv,w_e="__lodash_hash_undefined__";function __e(e){return this.__data__.set(e,w_e),this}var S_e=__e;function j_e(e){return this.__data__.has(e)}var N_e=j_e,C_e=s3,A_e=S_e,P_e=N_e;function __(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new C_e;++t<r;)this.add(e[t])}__.prototype.add=__.prototype.push=A_e;__.prototype.has=P_e;var SK=__;function E_e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var jK=E_e;function k_e(e,t){return e.has(t)}var NK=k_e,O_e=SK,T_e=jK,I_e=NK,D_e=1,M_e=2;function R_e(e,t,r,n,a,i){var o=r&D_e,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&M_e?new O_e:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],p=t[f];if(n)var y=o?n(p,g,f,t,e,i):n(g,p,f,e,t,i);if(y!==void 0){if(y)continue;h=!1;break}if(m){if(!T_e(t,function(x,b){if(!I_e(m,b)&&(g===x||a(g,x,r,n,i)))return m.push(b)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var CK=R_e,L_e=Tu,$_e=L_e.Uint8Array,F_e=$_e;function B_e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var z_e=B_e;function q_e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var b3=q_e,m$=zb,p$=F_e,U_e=i3,W_e=CK,V_e=z_e,H_e=b3,G_e=1,K_e=2,Y_e="[object Boolean]",X_e="[object Date]",J_e="[object Error]",Q_e="[object Map]",Z_e="[object Number]",eSe="[object RegExp]",tSe="[object Set]",rSe="[object String]",nSe="[object Symbol]",aSe="[object ArrayBuffer]",iSe="[object DataView]",g$=m$?m$.prototype:void 0,L5=g$?g$.valueOf:void 0;function oSe(e,t,r,n,a,i,o){switch(r){case iSe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case aSe:return!(e.byteLength!=t.byteLength||!i(new p$(e),new p$(t)));case Y_e:case X_e:case Z_e:return U_e(+e,+t);case J_e:return e.name==t.name&&e.message==t.message;case eSe:case rSe:return e==t+"";case Q_e:var l=V_e;case tSe:var c=n&G_e;if(l||(l=H_e),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=K_e,o.set(e,t);var d=W_e(l(e),l(t),n,a,i,o);return o.delete(e),d;case nSe:if(L5)return L5.call(e)==L5.call(t)}return!1}var sSe=oSe;function lSe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var AK=lSe,cSe=AK,uSe=Ws;function dSe(e,t,r){var n=t(e);return uSe(e)?n:cSe(n,r(e))}var fSe=dSe;function hSe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var mSe=hSe;function pSe(){return[]}var gSe=pSe,vSe=mSe,ySe=gSe,xSe=Object.prototype,bSe=xSe.propertyIsEnumerable,v$=Object.getOwnPropertySymbols,wSe=v$?function(e){return e==null?[]:(e=Object(e),vSe(v$(e),function(t){return bSe.call(e,t)}))}:ySe,_Se=wSe;function SSe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var jSe=SSe,NSe=Wd,CSe=Vd,ASe="[object Arguments]";function PSe(e){return CSe(e)&&NSe(e)==ASe}var ESe=PSe,y$=ESe,kSe=Vd,PK=Object.prototype,OSe=PK.hasOwnProperty,TSe=PK.propertyIsEnumerable,ISe=y$(function(){return arguments}())?y$:function(e){return kSe(e)&&OSe.call(e,"callee")&&!TSe.call(e,"callee")},w3=ISe,S_={exports:{}};function DSe(){return!1}var MSe=DSe;S_.exports;(function(e,t){var r=Tu,n=MSe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(S_,S_.exports);var EK=S_.exports,RSe=9007199254740991,LSe=/^(?:0|[1-9]\d*)$/;function $Se(e,t){var r=typeof e;return t=t??RSe,!!t&&(r=="number"||r!="symbol"&&LSe.test(e))&&e>-1&&e%1==0&&e<t}var _3=$Se,FSe=9007199254740991;function BSe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=FSe}var S3=BSe,zSe=Wd,qSe=S3,USe=Vd,WSe="[object Arguments]",VSe="[object Array]",HSe="[object Boolean]",GSe="[object Date]",KSe="[object Error]",YSe="[object Function]",XSe="[object Map]",JSe="[object Number]",QSe="[object Object]",ZSe="[object RegExp]",eje="[object Set]",tje="[object String]",rje="[object WeakMap]",nje="[object ArrayBuffer]",aje="[object DataView]",ije="[object Float32Array]",oje="[object Float64Array]",sje="[object Int8Array]",lje="[object Int16Array]",cje="[object Int32Array]",uje="[object Uint8Array]",dje="[object Uint8ClampedArray]",fje="[object Uint16Array]",hje="[object Uint32Array]",Fa={};Fa[ije]=Fa[oje]=Fa[sje]=Fa[lje]=Fa[cje]=Fa[uje]=Fa[dje]=Fa[fje]=Fa[hje]=!0;Fa[WSe]=Fa[VSe]=Fa[nje]=Fa[HSe]=Fa[aje]=Fa[GSe]=Fa[KSe]=Fa[YSe]=Fa[XSe]=Fa[JSe]=Fa[QSe]=Fa[ZSe]=Fa[eje]=Fa[tje]=Fa[rje]=!1;function mje(e){return USe(e)&&qSe(e.length)&&!!Fa[zSe(e)]}var pje=mje;function gje(e){return function(t){return e(t)}}var kK=gje,j_={exports:{}};j_.exports;(function(e,t){var r=LG,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(j_,j_.exports);var vje=j_.exports,yje=pje,xje=kK,x$=vje,b$=x$&&x$.isTypedArray,bje=b$?xje(b$):yje,OK=bje,wje=jSe,_je=w3,Sje=Ws,jje=EK,Nje=_3,Cje=OK,Aje=Object.prototype,Pje=Aje.hasOwnProperty;function Eje(e,t){var r=Sje(e),n=!r&&_je(e),a=!r&&!n&&jje(e),i=!r&&!n&&!a&&Cje(e),o=r||n||a||i,l=o?wje(e.length,String):[],c=l.length;for(var u in e)(t||Pje.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Nje(u,c)))&&l.push(u);return l}var kje=Eje,Oje=Object.prototype;function Tje(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Oje;return e===r}var Ije=Tje;function Dje(e,t){return function(r){return e(t(r))}}var TK=Dje,Mje=TK,Rje=Mje(Object.keys,Object),Lje=Rje,$je=Ije,Fje=Lje,Bje=Object.prototype,zje=Bje.hasOwnProperty;function qje(e){if(!$je(e))return Fje(e);var t=[];for(var r in Object(e))zje.call(e,r)&&r!="constructor"&&t.push(r);return t}var Uje=qje,Wje=a3,Vje=S3;function Hje(e){return e!=null&&Vje(e.length)&&!Wje(e)}var qb=Hje,Gje=kje,Kje=Uje,Yje=qb;function Xje(e){return Yje(e)?Gje(e):Kje(e)}var Yj=Xje,Jje=fSe,Qje=_Se,Zje=Yj;function eNe(e){return Jje(e,Zje,Qje)}var tNe=eNe,w$=tNe,rNe=1,nNe=Object.prototype,aNe=nNe.hasOwnProperty;function iNe(e,t,r,n,a,i){var o=r&rNe,l=w$(e),c=l.length,u=w$(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:aNe.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var y=o;++f<c;){h=l[f];var x=e[h],b=t[h];if(n)var w=o?n(b,x,h,t,e,i):n(x,b,h,e,t,i);if(!(w===void 0?x===b||a(x,b,r,n,i):w)){p=!1;break}y||(y=h=="constructor")}if(p&&!y){var S=e.constructor,j=t.constructor;S!=j&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(e),i.delete(t),p}var oNe=iNe,sNe=dp,lNe=Tu,cNe=sNe(lNe,"DataView"),uNe=cNe,dNe=dp,fNe=Tu,hNe=dNe(fNe,"Promise"),mNe=hNe,pNe=dp,gNe=Tu,vNe=pNe(gNe,"Set"),IK=vNe,yNe=dp,xNe=Tu,bNe=yNe(xNe,"WeakMap"),wNe=bNe,ok=uNe,sk=o3,lk=mNe,ck=IK,uk=wNe,DK=Wd,Xv=FG,_$="[object Map]",_Ne="[object Object]",S$="[object Promise]",j$="[object Set]",N$="[object WeakMap]",C$="[object DataView]",SNe=Xv(ok),jNe=Xv(sk),NNe=Xv(lk),CNe=Xv(ck),ANe=Xv(uk),Qh=DK;(ok&&Qh(new ok(new ArrayBuffer(1)))!=C$||sk&&Qh(new sk)!=_$||lk&&Qh(lk.resolve())!=S$||ck&&Qh(new ck)!=j$||uk&&Qh(new uk)!=N$)&&(Qh=function(e){var t=DK(e),r=t==_Ne?e.constructor:void 0,n=r?Xv(r):"";if(n)switch(n){case SNe:return C$;case jNe:return _$;case NNe:return S$;case CNe:return j$;case ANe:return N$}return t});var PNe=Qh,$5=_K,ENe=CK,kNe=sSe,ONe=oNe,A$=PNe,P$=Ws,E$=EK,TNe=OK,INe=1,k$="[object Arguments]",O$="[object Array]",pw="[object Object]",DNe=Object.prototype,T$=DNe.hasOwnProperty;function MNe(e,t,r,n,a,i){var o=P$(e),l=P$(t),c=o?O$:A$(e),u=l?O$:A$(t);c=c==k$?pw:c,u=u==k$?pw:u;var d=c==pw,f=u==pw,h=c==u;if(h&&E$(e)){if(!E$(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new $5),o||TNe(e)?ENe(e,t,r,n,a,i):kNe(e,t,c,r,n,a,i);if(!(r&INe)){var m=d&&T$.call(e,"__wrapped__"),g=f&&T$.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,y=g?t.value():t;return i||(i=new $5),a(p,y,r,n,i)}}return h?(i||(i=new $5),ONe(e,t,r,n,a,i)):!1}var RNe=MNe,LNe=RNe,I$=Vd;function MK(e,t,r,n,a){return e===t?!0:e==null||t==null||!I$(e)&&!I$(t)?e!==e&&t!==t:LNe(e,t,r,n,MK,a)}var j3=MK,$Ne=_K,FNe=j3,BNe=1,zNe=2;function qNe(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new $Ne;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?FNe(d,u,BNe|zNe,n,f):h))return!1}}return!0}var UNe=qNe,WNe=bh;function VNe(e){return e===e&&!WNe(e)}var RK=VNe,HNe=RK,GNe=Yj;function KNe(e){for(var t=GNe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,HNe(a)]}return t}var YNe=KNe;function XNe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var LK=XNe,JNe=UNe,QNe=YNe,ZNe=LK;function eCe(e){var t=QNe(e);return t.length==1&&t[0][2]?ZNe(t[0][0],t[0][1]):function(r){return r===e||JNe(r,e,t)}}var tCe=eCe;function rCe(e,t){return e!=null&&t in Object(e)}var nCe=rCe,aCe=WG,iCe=w3,oCe=Ws,sCe=_3,lCe=S3,cCe=Dj;function uCe(e,t,r){t=aCe(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=cCe(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&lCe(a)&&sCe(o,a)&&(oCe(e)||iCe(e)))}var dCe=uCe,fCe=nCe,hCe=dCe;function mCe(e,t){return e!=null&&hCe(e,t,fCe)}var pCe=mCe,gCe=j3,vCe=VG,yCe=pCe,xCe=n3,bCe=RK,wCe=LK,_Ce=Dj,SCe=1,jCe=2;function NCe(e,t){return xCe(e)&&bCe(t)?wCe(_Ce(e),t):function(r){var n=vCe(r,e);return n===void 0&&n===t?yCe(r,e):gCe(t,n,SCe|jCe)}}var CCe=NCe;function ACe(e){return e}var Jv=ACe;function PCe(e){return function(t){return t?.[e]}}var ECe=PCe,kCe=u3;function OCe(e){return function(t){return kCe(t,e)}}var TCe=OCe,ICe=ECe,DCe=TCe,MCe=n3,RCe=Dj;function LCe(e){return MCe(e)?ICe(RCe(e)):DCe(e)}var $Ce=LCe,FCe=tCe,BCe=CCe,zCe=Jv,qCe=Ws,UCe=$Ce;function WCe(e){return typeof e=="function"?e:e==null?zCe:typeof e=="object"?qCe(e)?BCe(e[0],e[1]):FCe(e):UCe(e)}var Iu=WCe;function VCe(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var $K=VCe;function HCe(e){return e!==e}var GCe=HCe;function KCe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var YCe=KCe,XCe=$K,JCe=GCe,QCe=YCe;function ZCe(e,t,r){return t===t?QCe(e,t,r):XCe(e,JCe,r)}var e5e=ZCe,t5e=e5e;function r5e(e,t){var r=e==null?0:e.length;return!!r&&t5e(e,t,0)>-1}var n5e=r5e;function a5e(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var i5e=a5e;function o5e(){}var s5e=o5e,F5=IK,l5e=s5e,c5e=b3,u5e=1/0,d5e=F5&&1/c5e(new F5([,-0]))[1]==u5e?function(e){return new F5(e)}:l5e,f5e=d5e,h5e=SK,m5e=n5e,p5e=i5e,g5e=NK,v5e=f5e,y5e=b3,x5e=200;function b5e(e,t,r){var n=-1,a=m5e,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=p5e;else if(i>=x5e){var u=t?null:v5e(e);if(u)return y5e(u);o=!1,a=g5e,c=new h5e}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var w5e=b5e,_5e=Iu,S5e=w5e;function j5e(e,t){return e&&e.length?S5e(e,_5e(t)):[]}var N5e=j5e;const D$=zn(N5e);function FK(e,t,r){return t===!0?D$(e,r):Wr(t)?D$(e,t):e}function rv(e){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}var C5e=["ref"];function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){Xj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zK(n.key),n)}}function P5e(e,t,r){return t&&R$(e.prototype,t),r&&R$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E5e(e,t,r){return t=N_(t),k5e(e,BK()?Reflect.construct(t,r||[],N_(e).constructor):t.apply(e,r))}function k5e(e,t){if(t&&(rv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O5e(e)}function O5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BK=function(){return!!e})()}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N_(e)}function T5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dk(e,t)}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dk(e,t)}function Xj(e,t,r){return t=zK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=I5e(e,"string");return rv(t)=="symbol"?t:t+""}function I5e(e,t){if(rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D5e(e,t){if(e==null)return{};var r=M5e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function M5e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function R5e(e){return e.value}function L5e(e,t){if(le.isValidElement(e))return le.cloneElement(e,t);if(typeof e=="function")return le.createElement(e,t);t.ref;var r=D5e(t,C5e);return le.createElement(x3,r)}var L$=1,Am=function(e){function t(){var r;A5e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=E5e(this,t,[].concat(a)),Xj(r,"lastBoundingBox",{width:-1,height:-1}),r}return T5e(t,e),P5e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>L$||Math.abs(a.height-this.lastBoundingBox.height)>L$)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Uu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Uu(Uu({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Uu(Uu({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return le.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},L5e(i,Uu(Uu({},this.props),{},{payload:FK(d,u,R5e)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Uu(Uu({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Xt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(v.PureComponent);Xj(Am,"displayName","Legend");Xj(Am,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $$=zb,$5e=w3,F5e=Ws,F$=$$?$$.isConcatSpreadable:void 0;function B5e(e){return F5e(e)||$5e(e)||!!(F$&&e&&e[F$])}var z5e=B5e,q5e=AK,U5e=z5e;function qK(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=U5e),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?qK(l,t-1,r,n,a):q5e(a,l):n||(a[a.length]=l)}return a}var UK=qK;function W5e(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var V5e=W5e,H5e=V5e,G5e=H5e(),K5e=G5e,Y5e=K5e,X5e=Yj;function J5e(e,t){return e&&Y5e(e,t,X5e)}var WK=J5e,Q5e=qb;function Z5e(e,t){return function(r,n){if(r==null)return r;if(!Q5e(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var eAe=Z5e,tAe=WK,rAe=eAe,nAe=rAe(tAe),N3=nAe,aAe=N3,iAe=qb;function oAe(e,t){var r=-1,n=iAe(e)?Array(e.length):[];return aAe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var VK=oAe;function sAe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var lAe=sAe,B$=Uv;function cAe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=B$(e),o=t!==void 0,l=t===null,c=t===t,u=B$(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var uAe=cAe,dAe=uAe;function fAe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=dAe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var hAe=fAe,B5=c3,mAe=u3,pAe=Iu,gAe=VK,vAe=lAe,yAe=kK,xAe=hAe,bAe=Jv,wAe=Ws;function _Ae(e,t,r){t.length?t=B5(t,function(i){return wAe(i)?function(o){return mAe(o,i.length===1?i[0]:i)}:i}):t=[bAe];var n=-1;t=B5(t,yAe(pAe));var a=gAe(e,function(i,o,l){var c=B5(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return vAe(a,function(i,o){return xAe(i,o,r)})}var SAe=_Ae;function jAe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var NAe=jAe,CAe=NAe,z$=Math.max;function AAe(e,t,r){return t=z$(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=z$(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),CAe(e,this,l)}}var PAe=AAe;function EAe(e){return function(){return e}}var kAe=EAe,OAe=dp,TAe=function(){try{var e=OAe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),HK=TAe,IAe=kAe,q$=HK,DAe=Jv,MAe=q$?function(e,t){return q$(e,"toString",{configurable:!0,enumerable:!1,value:IAe(t),writable:!0})}:DAe,RAe=MAe,LAe=800,$Ae=16,FAe=Date.now;function BAe(e){var t=0,r=0;return function(){var n=FAe(),a=$Ae-(n-r);if(r=n,a>0){if(++t>=LAe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var zAe=BAe,qAe=RAe,UAe=zAe,WAe=UAe(qAe),VAe=WAe,HAe=Jv,GAe=PAe,KAe=VAe;function YAe(e,t){return KAe(GAe(e,t,HAe),e+"")}var XAe=YAe,JAe=i3,QAe=qb,ZAe=_3,ePe=bh;function tPe(e,t,r){if(!ePe(r))return!1;var n=typeof t;return(n=="number"?QAe(r)&&ZAe(t,r.length):n=="string"&&t in r)?JAe(r[t],e):!1}var Jj=tPe,rPe=UK,nPe=SAe,aPe=XAe,U$=Jj,iPe=aPe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&U$(e,t[0],t[1])?t=[]:r>2&&U$(t[0],t[1],t[2])&&(t=[t[0]]),nPe(e,rPe(t,1),[])}),oPe=iPe;const C3=zn(oPe);function S0(e){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S0(e)}function fk(){return fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fk.apply(this,arguments)}function sPe(e,t){return dPe(e)||uPe(e,t)||cPe(e,t)||lPe()}function lPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cPe(e,t){if(e){if(typeof e=="string")return W$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W$(e,t)}}function W$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function dPe(e){if(Array.isArray(e))return e}function V$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V$(Object(r),!0).forEach(function(n){fPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fPe(e,t,r){return t=hPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hPe(e){var t=mPe(e,"string");return S0(t)=="symbol"?t:t+""}function mPe(e,t){if(S0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(S0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pPe(e){return Array.isArray(e)&&eo(e[0])&&eo(e[1])?e.join(" ~ "):e}var gPe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,y=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,w=function(){if(d&&d.length){var T={padding:0,margin:0},I=(h?C3(d,h):d).map(function(M,z){if(M.type==="none")return null;var W=z5({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),U=M.formatter||f||pPe,$=M.value,G=M.name,me=$,de=G;if(U&&me!=null&&de!=null){var L=U($,G,M,z,d);if(Array.isArray(L)){var B=sPe(L,2);me=B[0],de=B[1]}else me=L}return le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:W},eo(de)?le.createElement("span",{className:"recharts-tooltip-item-name"},de):null,eo(de)?le.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,le.createElement("span",{className:"recharts-tooltip-item-value"},me),le.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return le.createElement("ul",{className:"recharts-tooltip-item-list",style:T},I)}return null},S=z5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=z5({margin:0},u),A=!Qr(p),P=A?p:"",C=Zr("recharts-default-tooltip",m),E=Zr("recharts-tooltip-label",g);A&&y&&d!==void 0&&d!==null&&(P=y(p,d));var R=b?{role:"status","aria-live":"assertive"}:{};return le.createElement("div",fk({className:C,style:S},R),le.createElement("p",{className:E,style:j},le.isValidElement(P)?P:"".concat(P)),w())};function j0(e){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j0(e)}function gw(e,t,r){return t=vPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vPe(e){var t=yPe(e,"string");return j0(t)=="symbol"?t:t+""}function yPe(e,t){if(j0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(j0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ry="recharts-tooltip-wrapper",xPe={visibility:"hidden"};function bPe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Zr(Ry,gw(gw(gw(gw({},"".concat(Ry,"-right"),Xt(r)&&t&&Xt(t.x)&&r>=t.x),"".concat(Ry,"-left"),Xt(r)&&t&&Xt(t.x)&&r<t.x),"".concat(Ry,"-bottom"),Xt(n)&&t&&Xt(t.y)&&n>=t.y),"".concat(Ry,"-top"),Xt(n)&&t&&Xt(t.y)&&n<t.y))}function H$(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Xt(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,p=c[n]+u;return g>p?Math.max(d,c[n]):Math.max(f,c[n])}function wPe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function _Pe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=H$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=H$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=wPe({translateX:d,translateY:f,useTranslate3d:l})):u=xPe,{cssProperties:u,cssClasses:bPe({translateX:d,translateY:f,coordinate:r})}}function nv(e){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}function G$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(r),!0).forEach(function(n){mk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KK(n.key),n)}}function jPe(e,t,r){return t&&Y$(e.prototype,t),r&&Y$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NPe(e,t,r){return t=C_(t),CPe(e,GK()?Reflect.construct(t,r||[],C_(e).constructor):t.apply(e,r))}function CPe(e,t){if(t&&(nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return APe(e)}function APe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GK=function(){return!!e})()}function C_(e){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C_(e)}function PPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hk(e,t)}function mk(e,t,r){return t=KK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=EPe(e,"string");return nv(t)=="symbol"?t:t+""}function EPe(e,t){if(nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X$=1,kPe=function(e){function t(){var r;SPe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=NPe(this,t,[].concat(a)),mk(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),mk(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return PPe(t,e),jPe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>X$||Math.abs(n.height-this.state.lastBoundingBox.height)>X$)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,y=a.useTranslate3d,x=a.viewBox,b=a.wrapperStyle,w=_Pe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),S=w.cssClasses,j=w.cssProperties,A=K$(K$({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return le.createElement("div",{tabIndex:-1,className:S,style:A,ref:function(C){n.wrapperNode=C}},u)}}])}(v.PureComponent),OPe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Rc={isSsr:OPe(),get:function(t){return Rc[t]},set:function(t,r){if(typeof t=="string")Rc[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Rc[a]=t[a]})}}};function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function J$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J$(Object(r),!0).forEach(function(n){A3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XK(n.key),n)}}function IPe(e,t,r){return t&&Z$(e.prototype,t),r&&Z$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DPe(e,t,r){return t=A_(t),MPe(e,YK()?Reflect.construct(t,r||[],A_(e).constructor):t.apply(e,r))}function MPe(e,t){if(t&&(av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RPe(e)}function RPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YK=function(){return!!e})()}function A_(e){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A_(e)}function LPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pk(e,t)}function pk(e,t){return pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pk(e,t)}function A3(e,t,r){return t=XK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XK(e){var t=$Pe(e,"string");return av(t)=="symbol"?t:t+""}function $Pe(e,t){if(av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FPe(e){return e.dataKey}function BPe(e,t){return le.isValidElement(e)?le.cloneElement(e,t):typeof e=="function"?le.createElement(e,t):le.createElement(gPe,t)}var ul=function(e){function t(){return TPe(this,t),DPe(this,t,arguments)}return LPe(t,e),IPe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,y=a.position,x=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,S=a.wrapperStyle,j=g??[];f&&j.length&&(j=FK(g.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),p,FPe));var A=j.length>0;return le.createElement(kPe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:A,offset:m,position:y,reverseDirection:x,useTranslate3d:b,viewBox:w,wrapperStyle:S},BPe(u,Q$(Q$({},this.props),{},{payload:j})))}}])}(v.PureComponent);A3(ul,"displayName","Tooltip");A3(ul,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Rc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zPe=Tu,qPe=function(){return zPe.Date.now()},UPe=qPe,WPe=/\s/;function VPe(e){for(var t=e.length;t--&&WPe.test(e.charAt(t)););return t}var HPe=VPe,GPe=HPe,KPe=/^\s+/;function YPe(e){return e&&e.slice(0,GPe(e)+1).replace(KPe,"")}var XPe=YPe,JPe=XPe,eF=bh,QPe=Uv,tF=0/0,ZPe=/^[-+]0x[0-9a-f]+$/i,eEe=/^0b[01]+$/i,tEe=/^0o[0-7]+$/i,rEe=parseInt;function nEe(e){if(typeof e=="number")return e;if(QPe(e))return tF;if(eF(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=eF(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=JPe(e);var r=eEe.test(e);return r||tEe.test(e)?rEe(e.slice(2),r?2:8):ZPe.test(e)?tF:+e}var JK=nEe,aEe=bh,q5=UPe,rF=JK,iEe="Expected a function",oEe=Math.max,sEe=Math.min;function lEe(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(iEe);t=rF(t)||0,aEe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?oEe(rF(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(A){var P=n,C=a;return n=a=void 0,u=A,o=e.apply(C,P),o}function g(A){return u=A,l=setTimeout(x,t),d?m(A):o}function p(A){var P=A-c,C=A-u,E=t-P;return f?sEe(E,i-C):E}function y(A){var P=A-c,C=A-u;return c===void 0||P>=t||P<0||f&&C>=i}function x(){var A=q5();if(y(A))return b(A);l=setTimeout(x,p(A))}function b(A){return l=void 0,h&&n?m(A):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function S(){return l===void 0?o:b(q5())}function j(){var A=q5(),P=y(A);if(n=arguments,a=this,c=A,P){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return j.cancel=w,j.flush=S,j}var cEe=lEe,uEe=cEe,dEe=bh,fEe="Expected a function";function hEe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(fEe);return dEe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),uEe(e,t,{leading:n,maxWait:t,trailing:a})}var mEe=hEe;const QK=zn(mEe);function N0(e){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N0(e)}function nF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nF(Object(r),!0).forEach(function(n){pEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pEe(e,t,r){return t=gEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gEe(e){var t=vEe(e,"string");return N0(t)=="symbol"?t:t+""}function vEe(e,t){if(N0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(N0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yEe(e,t){return _Ee(e)||wEe(e,t)||bEe(e,t)||xEe()}function xEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bEe(e,t){if(e){if(typeof e=="string")return aF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aF(e,t)}}function aF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _Ee(e){if(Array.isArray(e))return e}var f2=v.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,y=e.id,x=e.className,b=e.onResize,w=e.style,S=w===void 0?{}:w,j=v.useRef(null),A=v.useRef();A.current=b,v.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var P=v.useState({containerWidth:a.width,containerHeight:a.height}),C=yEe(P,2),E=C[0],R=C[1],k=v.useCallback(function(I,M){R(function(z){var W=Math.round(I),U=Math.round(M);return z.containerWidth===W&&z.containerHeight===U?z:{containerWidth:W,containerHeight:U}})},[]);v.useEffect(function(){var I=function(G){var me,de=G[0].contentRect,L=de.width,B=de.height;k(L,B),(me=A.current)===null||me===void 0||me.call(A,L,B)};p>0&&(I=QK(I,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(I),z=j.current.getBoundingClientRect(),W=z.width,U=z.height;return k(W,U),M.observe(j.current),function(){M.disconnect()}},[k,p]);var T=v.useMemo(function(){var I=E.containerWidth,M=E.containerHeight;if(I<0||M<0)return null;Mc(hm(o)||hm(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Mc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=hm(o)?I:o,W=hm(c)?M:c;r&&r>0&&(z?W=z/r:W&&(z=W*r),h&&W>h&&(W=h)),Mc(z>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,W,o,c,d,f,r);var U=!Array.isArray(m)&&Nd(m.type).endsWith("Chart");return le.Children.map(m,function($){return le.isValidElement($)?v.cloneElement($,vw({width:z,height:W},U?{style:vw({height:"100%",width:"100%",maxHeight:W,maxWidth:z},$.props.style)}:{})):$})},[r,m,c,h,f,d,E,o]);return le.createElement("div",{id:y?"".concat(y):void 0,className:Zr("recharts-responsive-container",x),style:vw(vw({},S),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},T)}),C0=function(t){return null};C0.displayName="Cell";function A0(e){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A0(e)}function iF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iF(Object(r),!0).forEach(function(n){SEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SEe(e,t,r){return t=jEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jEe(e){var t=NEe(e,"string");return A0(t)=="symbol"?t:t+""}function NEe(e,t){if(A0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(A0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dp={widthCache:{},cacheCount:0},CEe=2e3,AEe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oF="recharts_measurement_span";function PEe(e){var t=gk({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Px=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Rc.isSsr)return{width:0,height:0};var n=PEe(r),a=JSON.stringify({text:t,copyStyle:n});if(Dp.widthCache[a])return Dp.widthCache[a];try{var i=document.getElementById(oF);i||(i=document.createElement("span"),i.setAttribute("id",oF),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=gk(gk({},AEe),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Dp.widthCache[a]=c,++Dp.cacheCount>CEe&&(Dp.cacheCount=0,Dp.widthCache={}),c}catch{return{width:0,height:0}}},EEe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function P0(e){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P0(e)}function P_(e,t){return IEe(e)||TEe(e,t)||OEe(e,t)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OEe(e,t){if(e){if(typeof e=="string")return sF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sF(e,t)}}function sF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function IEe(e){if(Array.isArray(e))return e}function DEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,REe(n.key),n)}}function MEe(e,t,r){return t&&lF(e.prototype,t),r&&lF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function REe(e){var t=LEe(e,"string");return P0(t)=="symbol"?t:t+""}function LEe(e,t){if(P0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(P0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$Ee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FEe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ZK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},BEe=Object.keys(ZK),fg="NaN";function zEe(e,t){return e*ZK[t]}var yw=function(){function e(t,r){DEe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!$Ee.test(r)&&(this.num=NaN,this.unit=""),BEe.includes(r)&&(this.num=zEe(t,r),this.unit="px")}return MEe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=FEe.exec(r))!==null&&n!==void 0?n:[],i=P_(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function eY(e){if(e.includes(fg))return fg;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=cF.exec(t))!==null&&r!==void 0?r:[],a=P_(n,4),i=a[1],o=a[2],l=a[3],c=yw.parse(i??""),u=yw.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return fg;t=t.replace(cF,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=uF.exec(t))!==null&&f!==void 0?f:[],m=P_(h,4),g=m[1],p=m[2],y=m[3],x=yw.parse(g??""),b=yw.parse(y??""),w=p==="+"?x.add(b):x.subtract(b);if(w.isNaN())return fg;t=t.replace(uF,w.toString())}return t}var dF=/\(([^()]*)\)/;function qEe(e){for(var t=e;t.includes("(");){var r=dF.exec(t),n=P_(r,2),a=n[1];t=t.replace(dF,eY(a))}return t}function UEe(e){var t=e.replace(/\s+/g,"");return t=qEe(t),t=eY(t),t}function WEe(e){try{return UEe(e)}catch{return fg}}function U5(e){var t=WEe(e.slice(5,-1));return t===fg?"":t}var VEe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HEe=["dx","dy","angle","className","breakAll"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vk.apply(this,arguments)}function fF(e,t){if(e==null)return{};var r=GEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hF(e,t){return JEe(e)||XEe(e,t)||YEe(e,t)||KEe()}function KEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YEe(e,t){if(e){if(typeof e=="string")return mF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mF(e,t)}}function mF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function JEe(e){if(Array.isArray(e))return e}var tY=/[ \f\n\r\t\v\u2028\u2029]+/,rY=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Qr(r)||(n?i=r.toString().split(""):i=r.toString().split(tY));var o=i.map(function(c){return{word:c,width:Px(c,a).width}}),l=n?0:Px("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},QEe=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Xt(o),f=l,h=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(W,U){var $=U.word,G=U.width,me=W[W.length-1];if(me&&(a==null||i||me.width+G+n<Number(a)))me.words.push($),me.width+=G+n;else{var de={words:[$],width:G};W.push(de)}return W},[])},m=h(r),g=function(z){return z.reduce(function(W,U){return W.width>U.width?W:U})};if(!d)return m;for(var p="",y=function(z){var W=f.slice(0,z),U=rY({breakAll:u,style:c,children:W+p}).wordsWithComputedWidth,$=h(U),G=$.length>o||g($).width>Number(a);return[G,$]},x=0,b=f.length-1,w=0,S;x<=b&&w<=f.length-1;){var j=Math.floor((x+b)/2),A=j-1,P=y(A),C=hF(P,2),E=C[0],R=C[1],k=y(j),T=hF(k,1),I=T[0];if(!E&&!I&&(x=j+1),E&&I&&(b=j-1),!E&&I){S=R;break}w++}return S||m},pF=function(t){var r=Qr(t)?[]:t.toString().split(tY);return[{words:r}]},ZEe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Rc.isSsr){var c,u,d=rY({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return pF(a);return QEe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return pF(a)},gF="#808080",Vm=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,y=t.fill,x=y===void 0?gF:y,b=fF(t,VEe),w=v.useMemo(function(){return ZEe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),S=b.dx,j=b.dy,A=b.angle,P=b.className,C=b.breakAll,E=fF(b,HEe);if(!eo(n)||!eo(i))return null;var R=n+(Xt(S)?S:0),k=i+(Xt(j)?j:0),T;switch(p){case"start":T=U5("calc(".concat(u,")"));break;case"middle":T=U5("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=U5("calc(".concat(w.length-1," * -").concat(l,")"));break}var I=[];if(f){var M=w[0].width,z=b.width;I.push("scale(".concat((Xt(z)?z/M:1)/M,")"))}return A&&I.push("rotate(".concat(A,", ").concat(R,", ").concat(k,")")),I.length&&(E.transform=I.join(" ")),le.createElement("text",vk({},Er(E,!0),{x:R,y:k,className:Zr("recharts-text",P),textAnchor:m,fill:x.includes("url")?gF:x}),w.map(function(W,U){var $=W.words.join(C?"":" ");return le.createElement("tspan",{x:R,dy:U===0?T:l,key:"".concat($,"-").concat(U)},$)}))};function Vf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eke(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function P3(e){let t,r,n;e.length!==2?(t=Vf,r=(l,c)=>Vf(e(l),c),n=(l,c)=>e(l)-c):(t=e===Vf||e===eke?e:tke,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function tke(){return 0}function nY(e){return e===null?NaN:+e}function*rke(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const nke=P3(Vf),ake=nke.right;P3(nY).center;const Ub=ake;class vF extends Map{constructor(t,r=ske){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(yF(this,t))}has(t){return super.has(yF(this,t))}set(t,r){return super.set(ike(this,t),r)}delete(t){return super.delete(oke(this,t))}}function yF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ike({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function oke({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ske(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lke(e=Vf){if(e===Vf)return aY;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function aY(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cke=Math.sqrt(50),uke=Math.sqrt(10),dke=Math.sqrt(2);function E_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=cke?10:i>=uke?5:i>=dke?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?E_(e,t,r*2):[l,c,u]}function yk(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?E_(t,e,r):E_(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function xk(e,t,r){return t=+t,e=+e,r=+r,E_(e,t,r)[2]}function bk(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?xk(t,e,r):xk(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function xF(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function bF(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function iY(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?aY:lke(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));iY(e,t,m,g,a)}const i=e[t];let o=r,l=n;for(Ly(e,r,t),a(e[n],i)>0&&Ly(e,r,n);o<l;){for(Ly(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Ly(e,r,l):(++l,Ly(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ly(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function fke(e,t,r){if(e=Float64Array.from(rke(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return bF(e);if(t>=1)return xF(e);var n,a=(n-1)*t,i=Math.floor(a),o=xF(iY(e,i).subarray(0,i+1)),l=bF(e.subarray(i+1));return o+(l-o)*(a-i)}}function hke(e,t,r=nY){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function mke(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function sc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const wk=Symbol("implicit");function E3(){var e=new vF,t=[],r=[],n=wk;function a(i){let o=e.get(i);if(o===void 0){if(n!==wk)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new vF;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return E3(t,r).unknown(n)},sc.apply(a,arguments),a}function E0(){var e=E3().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,p=m?n:a;i=(p-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=mke(h).map(function(x){return g+i*x});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return E0(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},sc.apply(f(),arguments)}function oY(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return oY(t())},e}function Ex(){return oY(E0.apply(null,arguments).paddingInner(1))}function k3(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function sY(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Wb(){}var k0=.7,k_=1/k0,Eg="\\s*([+-]?\\d+)\\s*",O0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pke=/^#([0-9a-f]{3,8})$/,gke=new RegExp(`^rgb\\(${Eg},${Eg},${Eg}\\)$`),vke=new RegExp(`^rgb\\(${bu},${bu},${bu}\\)$`),yke=new RegExp(`^rgba\\(${Eg},${Eg},${Eg},${O0}\\)$`),xke=new RegExp(`^rgba\\(${bu},${bu},${bu},${O0}\\)$`),bke=new RegExp(`^hsl\\(${O0},${bu},${bu}\\)$`),wke=new RegExp(`^hsla\\(${O0},${bu},${bu},${O0}\\)$`),wF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k3(Wb,T0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_F,formatHex:_F,formatHex8:_ke,formatHsl:Ske,formatRgb:SF,toString:SF});function _F(){return this.rgb().formatHex()}function _ke(){return this.rgb().formatHex8()}function Ske(){return lY(this).formatHsl()}function SF(){return this.rgb().formatRgb()}function T0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=pke.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?jF(t):r===3?new Ms(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?xw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?xw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gke.exec(e))?new Ms(t[1],t[2],t[3],1):(t=vke.exec(e))?new Ms(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yke.exec(e))?xw(t[1],t[2],t[3],t[4]):(t=xke.exec(e))?xw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bke.exec(e))?AF(t[1],t[2]/100,t[3]/100,1):(t=wke.exec(e))?AF(t[1],t[2]/100,t[3]/100,t[4]):wF.hasOwnProperty(e)?jF(wF[e]):e==="transparent"?new Ms(NaN,NaN,NaN,0):null}function jF(e){return new Ms(e>>16&255,e>>8&255,e&255,1)}function xw(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ms(e,t,r,n)}function jke(e){return e instanceof Wb||(e=T0(e)),e?(e=e.rgb(),new Ms(e.r,e.g,e.b,e.opacity)):new Ms}function _k(e,t,r,n){return arguments.length===1?jke(e):new Ms(e,t,r,n??1)}function Ms(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}k3(Ms,_k,sY(Wb,{brighter(e){return e=e==null?k_:Math.pow(k_,e),new Ms(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?k0:Math.pow(k0,e),new Ms(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ms(Pm(this.r),Pm(this.g),Pm(this.b),O_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NF,formatHex:NF,formatHex8:Nke,formatRgb:CF,toString:CF}));function NF(){return`#${mm(this.r)}${mm(this.g)}${mm(this.b)}`}function Nke(){return`#${mm(this.r)}${mm(this.g)}${mm(this.b)}${mm((isNaN(this.opacity)?1:this.opacity)*255)}`}function CF(){const e=O_(this.opacity);return`${e===1?"rgb(":"rgba("}${Pm(this.r)}, ${Pm(this.g)}, ${Pm(this.b)}${e===1?")":`, ${e})`}`}function O_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mm(e){return e=Pm(e),(e<16?"0":"")+e.toString(16)}function AF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ec(e,t,r,n)}function lY(e){if(e instanceof Ec)return new Ec(e.h,e.s,e.l,e.opacity);if(e instanceof Wb||(e=T0(e)),!e)return new Ec;if(e instanceof Ec)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Ec(o,l,c,e.opacity)}function Cke(e,t,r,n){return arguments.length===1?lY(e):new Ec(e,t,r,n??1)}function Ec(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}k3(Ec,Cke,sY(Wb,{brighter(e){return e=e==null?k_:Math.pow(k_,e),new Ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?k0:Math.pow(k0,e),new Ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ms(W5(e>=240?e-240:e+120,a,n),W5(e,a,n),W5(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ec(PF(this.h),bw(this.s),bw(this.l),O_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=O_(this.opacity);return`${e===1?"hsl(":"hsla("}${PF(this.h)}, ${bw(this.s)*100}%, ${bw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function PF(e){return e=(e||0)%360,e<0?e+360:e}function bw(e){return Math.max(0,Math.min(1,e||0))}function W5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const O3=e=>()=>e;function Ake(e,t){return function(r){return e+r*t}}function Pke(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Eke(e){return(e=+e)==1?cY:function(t,r){return r-t?Pke(t,r,e):O3(isNaN(t)?r:t)}}function cY(e,t){var r=t-e;return r?Ake(e,r):O3(isNaN(e)?t:e)}const EF=function e(t){var r=Eke(t);function n(a,i){var o=r((a=_k(a)).r,(i=_k(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=cY(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function kke(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function Oke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tke(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Qv(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function Ike(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function T_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Dke(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Qv(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Sk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,V5=new RegExp(Sk.source,"g");function Mke(e){return function(){return e}}function Rke(e){return function(t){return e(t)+""}}function Lke(e,t){var r=Sk.lastIndex=V5.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Sk.exec(e))&&(a=V5.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:T_(n,a)})),r=V5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Rke(c[0].x):Mke(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Qv(e,t){var r=typeof t,n;return t==null||r==="boolean"?O3(t):(r==="number"?T_:r==="string"?(n=T0(t))?(t=n,EF):Lke:t instanceof T0?EF:t instanceof Date?Ike:Oke(t)?kke:Array.isArray(t)?Tke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Dke:T_)(e,t)}function T3(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function $ke(e,t){t===void 0&&(t=e,e=Qv);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Fke(e){return function(){return e}}function I_(e){return+e}var kF=[0,1];function gs(e){return e}function jk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Fke(isNaN(t)?NaN:.5)}function Bke(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function zke(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=jk(a,n),i=r(o,i)):(n=jk(n,a),i=r(i,o)),function(l){return i(n(l))}}function qke(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=jk(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Ub(e,l,1,n)-1;return i[c](a[c](l))}}function Vb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qj(){var e=kF,t=kF,r=Qv,n,a,i,o=gs,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==gs&&(o=Bke(e[0],e[h-1])),l=h>2?qke:zke,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),T_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,I_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=T3,d()},f.clamp=function(h){return arguments.length?(o=h?!0:gs,d()):o!==gs},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function I3(){return Qj()(gs,gs)}function Uke(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function D_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function iv(e){return e=D_(Math.abs(e)),e?e[1]:NaN}function Wke(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Vke(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Hke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I0(e){if(!(t=Hke.exec(e)))throw new Error("invalid format: "+e);var t;return new D3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}I0.prototype=D3.prototype;function D3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}D3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gke(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var uY;function Kke(e,t){var r=D_(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(uY=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+D_(e,Math.max(0,t+i-1))[0]}function OF(e,t){var r=D_(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const TF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Uke,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>OF(e*100,t),r:OF,s:Kke,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function IF(e){return e}var DF=Array.prototype.map,MF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yke(e){var t=e.grouping===void 0||e.thousands===void 0?IF:Wke(DF.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?IF:Vke(DF.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=I0(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,y=f.zero,x=f.width,b=f.comma,w=f.precision,S=f.trim,j=f.type;j==="n"?(b=!0,j="g"):TF[j]||(w===void 0&&(w=12),S=!0,j="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var A=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",P=p==="$"?n:/[%p]/.test(j)?o:"",C=TF[j],E=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R(k){var T=A,I=P,M,z,W;if(j==="c")I=C(k)+I,k="";else{k=+k;var U=k<0||1/k<0;if(k=isNaN(k)?c:C(Math.abs(k),w),S&&(k=Gke(k)),U&&+k==0&&g!=="+"&&(U=!1),T=(U?g==="("?g:l:g==="-"||g==="("?"":g)+T,I=(j==="s"?MF[8+uY/3]:"")+I+(U&&g==="("?")":""),E){for(M=-1,z=k.length;++M<z;)if(W=k.charCodeAt(M),48>W||W>57){I=(W===46?a+k.slice(M+1):k.slice(M))+I,k=k.slice(0,M);break}}}b&&!y&&(k=t(k,1/0));var $=T.length+k.length+I.length,G=$<x?new Array(x-$+1).join(h):"";switch(b&&y&&(k=t(G+k,G.length?x-I.length:1/0),G=""),m){case"<":k=T+k+I+G;break;case"=":k=T+G+k+I;break;case"^":k=G.slice(0,$=G.length>>1)+T+k+I+G.slice($);break;default:k=G+T+k+I;break}return i(k)}return R.toString=function(){return f+""},R}function d(f,h){var m=u((f=I0(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(iv(h)/3)))*3,p=Math.pow(10,-g),y=MF[8+g/3];return function(x){return m(p*x)+y}}return{format:u,formatPrefix:d}}var ww,M3,dY;Xke({thousands:",",grouping:[3],currency:["$",""]});function Xke(e){return ww=Yke(e),M3=ww.format,dY=ww.formatPrefix,ww}function Jke(e){return Math.max(0,-iv(Math.abs(e)))}function Qke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iv(t)/3)))*3-iv(Math.abs(e)))}function Zke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,iv(t)-iv(e))+1}function fY(e,t,r,n){var a=bk(e,t,r),i;switch(n=I0(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Qke(a,o))&&(n.precision=i),dY(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Zke(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Jke(a))&&(n.precision=i-(n.type==="%")*2);break}}return M3(n)}function wh(e){var t=e.domain;return e.ticks=function(r){var n=t();return yk(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return fY(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=xk(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function M_(){var e=I3();return e.copy=function(){return Vb(e,M_())},sc.apply(e,arguments),wh(e)}function hY(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,I_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return hY(e).unknown(t)},e=arguments.length?Array.from(e,I_):[0,1],wh(r)}function mY(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function RF(e){return Math.log(e)}function LF(e){return Math.exp(e)}function eOe(e){return-Math.log(-e)}function tOe(e){return-Math.exp(-e)}function rOe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function nOe(e){return e===10?rOe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function aOe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $F(e){return(t,r)=>-e(-t,r)}function R3(e){const t=e(RF,LF),r=t.domain;let n=10,a,i;function o(){return a=aOe(n),i=nOe(n),r()[0]<0?(a=$F(a),i=$F(i),e(eOe,tOe)):e(RF,LF),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,p;const y=l==null?10:+l;let x=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<y&&(x=yk(u,d,y))}else x=yk(h,m,Math.min(m-h,y)).map(i);return f?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=I0(c)).precision==null&&(c.trim=!0),c=M3(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(mY(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function pY(){const e=R3(Qj()).domain([1,10]);return e.copy=()=>Vb(e,pY()).base(e.base()),sc.apply(e,arguments),e}function FF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function BF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function L3(e){var t=1,r=e(FF(t),BF(t));return r.constant=function(n){return arguments.length?e(FF(t=+n),BF(t)):t},wh(r)}function gY(){var e=L3(Qj());return e.copy=function(){return Vb(e,gY()).constant(e.constant())},sc.apply(e,arguments)}function zF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iOe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function oOe(e){return e<0?-e*e:e*e}function $3(e){var t=e(gs,gs),r=1;function n(){return r===1?e(gs,gs):r===.5?e(iOe,oOe):e(zF(r),zF(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},wh(t)}function F3(){var e=$3(Qj());return e.copy=function(){return Vb(e,F3()).exponent(e.exponent())},sc.apply(e,arguments),e}function sOe(){return F3.apply(null,arguments).exponent(.5)}function qF(e){return Math.sign(e)*e*e}function lOe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function vY(){var e=I3(),t=[0,1],r=!1,n;function a(i){var o=lOe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(qF(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,I_)).map(qF)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return vY(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},sc.apply(a,arguments),wh(a)}function yY(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=hke(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Ub(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Vf),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return yY().domain(e).range(t).unknown(n)},sc.apply(i,arguments)}function xY(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Ub(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return xY().domain([e,t]).range(a).unknown(i)},sc.apply(wh(o),arguments)}function bY(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Ub(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return bY().domain(e).range(t).unknown(r)},sc.apply(a,arguments)}const H5=new Date,G5=new Date;function ro(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>ro(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(H5.setTime(+i),G5.setTime(+o),e(H5),e(G5),Math.floor(r(H5,G5))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const R_=ro(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);R_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ro(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):R_);R_.range;const ld=1e3,Yl=ld*60,cd=Yl*60,Dd=cd*24,B3=Dd*7,UF=Dd*30,K5=Dd*365,pm=ro(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ld)},(e,t)=>(t-e)/ld,e=>e.getUTCSeconds());pm.range;const z3=ro(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ld)},(e,t)=>{e.setTime(+e+t*Yl)},(e,t)=>(t-e)/Yl,e=>e.getMinutes());z3.range;const q3=ro(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yl)},(e,t)=>(t-e)/Yl,e=>e.getUTCMinutes());q3.range;const U3=ro(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ld-e.getMinutes()*Yl)},(e,t)=>{e.setTime(+e+t*cd)},(e,t)=>(t-e)/cd,e=>e.getHours());U3.range;const W3=ro(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*cd)},(e,t)=>(t-e)/cd,e=>e.getUTCHours());W3.range;const Hb=ro(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yl)/Dd,e=>e.getDate()-1);Hb.range;const Zj=ro(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dd,e=>e.getUTCDate()-1);Zj.range;const wY=ro(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dd,e=>Math.floor(e/Dd));wY.range;function hp(e){return ro(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Yl)/B3)}const eN=hp(0),L_=hp(1),cOe=hp(2),uOe=hp(3),ov=hp(4),dOe=hp(5),fOe=hp(6);eN.range;L_.range;cOe.range;uOe.range;ov.range;dOe.range;fOe.range;function mp(e){return ro(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/B3)}const tN=mp(0),$_=mp(1),hOe=mp(2),mOe=mp(3),sv=mp(4),pOe=mp(5),gOe=mp(6);tN.range;$_.range;hOe.range;mOe.range;sv.range;pOe.range;gOe.range;const V3=ro(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());V3.range;const H3=ro(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());H3.range;const Md=ro(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Md.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ro(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Md.range;const Rd=ro(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ro(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Rd.range;function _Y(e,t,r,n,a,i){const o=[[pm,1,ld],[pm,5,5*ld],[pm,15,15*ld],[pm,30,30*ld],[i,1,Yl],[i,5,5*Yl],[i,15,15*Yl],[i,30,30*Yl],[a,1,cd],[a,3,3*cd],[a,6,6*cd],[a,12,12*cd],[n,1,Dd],[n,2,2*Dd],[r,1,B3],[t,1,UF],[t,3,3*UF],[e,1,K5]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=P3(([,,y])=>y).right(o,h);if(m===o.length)return e.every(bk(u/K5,d/K5,f));if(m===0)return R_.every(Math.max(bk(u,d,f),1));const[g,p]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[vOe,yOe]=_Y(Rd,H3,tN,wY,W3,q3),[xOe,bOe]=_Y(Md,V3,eN,Hb,U3,z3);function Y5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function X5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $y(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function wOe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Fy(a),d=By(a),f=Fy(i),h=By(i),m=Fy(o),g=By(o),p=Fy(l),y=By(l),x=Fy(c),b=By(c),w={a:U,A:$,b:G,B:me,c:null,d:YF,e:YF,f:WOe,g:eTe,G:rTe,H:zOe,I:qOe,j:UOe,L:SY,m:VOe,M:HOe,p:de,q:L,Q:QF,s:ZF,S:GOe,u:KOe,U:YOe,V:XOe,w:JOe,W:QOe,x:null,X:null,y:ZOe,Y:tTe,Z:nTe,"%":JF},S={a:B,A:X,b:q,B:Y,c:null,d:XF,e:XF,f:sTe,g:vTe,G:xTe,H:aTe,I:iTe,j:oTe,L:NY,m:lTe,M:cTe,p:Z,q:ge,Q:QF,s:ZF,S:uTe,u:dTe,U:fTe,V:hTe,w:mTe,W:pTe,x:null,X:null,y:gTe,Y:yTe,Z:bTe,"%":JF},j={a:R,A:k,b:T,B:I,c:M,d:GF,e:GF,f:LOe,g:HF,G:VF,H:KF,I:KF,j:IOe,L:ROe,m:TOe,M:DOe,p:E,q:OOe,Q:FOe,s:BOe,S:MOe,u:COe,U:AOe,V:POe,w:NOe,W:EOe,x:z,X:W,y:HF,Y:VF,Z:kOe,"%":$Oe};w.x=A(r,w),w.X=A(n,w),w.c=A(t,w),S.x=A(r,S),S.X=A(n,S),S.c=A(t,S);function A(re,Se){return function(Ie){var pe=[],Ue=-1,_e=0,ue=re.length,Ft,qt,zt;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ue<ue;)re.charCodeAt(Ue)===37&&(pe.push(re.slice(_e,Ue)),(qt=WF[Ft=re.charAt(++Ue)])!=null?Ft=re.charAt(++Ue):qt=Ft==="e"?" ":"0",(zt=Se[Ft])&&(Ft=zt(Ie,qt)),pe.push(Ft),_e=Ue+1);return pe.push(re.slice(_e,Ue)),pe.join("")}}function P(re,Se){return function(Ie){var pe=$y(1900,void 0,1),Ue=C(pe,re,Ie+="",0),_e,ue;if(Ue!=Ie.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(Se&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(_e=X5($y(pe.y,0,1)),ue=_e.getUTCDay(),_e=ue>4||ue===0?$_.ceil(_e):$_(_e),_e=Zj.offset(_e,(pe.V-1)*7),pe.y=_e.getUTCFullYear(),pe.m=_e.getUTCMonth(),pe.d=_e.getUTCDate()+(pe.w+6)%7):(_e=Y5($y(pe.y,0,1)),ue=_e.getDay(),_e=ue>4||ue===0?L_.ceil(_e):L_(_e),_e=Hb.offset(_e,(pe.V-1)*7),pe.y=_e.getFullYear(),pe.m=_e.getMonth(),pe.d=_e.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),ue="Z"in pe?X5($y(pe.y,0,1)).getUTCDay():Y5($y(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(ue+5)%7:pe.w+pe.U*7-(ue+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,X5(pe)):Y5(pe)}}function C(re,Se,Ie,pe){for(var Ue=0,_e=Se.length,ue=Ie.length,Ft,qt;Ue<_e;){if(pe>=ue)return-1;if(Ft=Se.charCodeAt(Ue++),Ft===37){if(Ft=Se.charAt(Ue++),qt=j[Ft in WF?Se.charAt(Ue++):Ft],!qt||(pe=qt(re,Ie,pe))<0)return-1}else if(Ft!=Ie.charCodeAt(pe++))return-1}return pe}function E(re,Se,Ie){var pe=u.exec(Se.slice(Ie));return pe?(re.p=d.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function R(re,Se,Ie){var pe=m.exec(Se.slice(Ie));return pe?(re.w=g.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function k(re,Se,Ie){var pe=f.exec(Se.slice(Ie));return pe?(re.w=h.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function T(re,Se,Ie){var pe=x.exec(Se.slice(Ie));return pe?(re.m=b.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function I(re,Se,Ie){var pe=p.exec(Se.slice(Ie));return pe?(re.m=y.get(pe[0].toLowerCase()),Ie+pe[0].length):-1}function M(re,Se,Ie){return C(re,t,Se,Ie)}function z(re,Se,Ie){return C(re,r,Se,Ie)}function W(re,Se,Ie){return C(re,n,Se,Ie)}function U(re){return o[re.getDay()]}function $(re){return i[re.getDay()]}function G(re){return c[re.getMonth()]}function me(re){return l[re.getMonth()]}function de(re){return a[+(re.getHours()>=12)]}function L(re){return 1+~~(re.getMonth()/3)}function B(re){return o[re.getUTCDay()]}function X(re){return i[re.getUTCDay()]}function q(re){return c[re.getUTCMonth()]}function Y(re){return l[re.getUTCMonth()]}function Z(re){return a[+(re.getUTCHours()>=12)]}function ge(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var Se=A(re+="",w);return Se.toString=function(){return re},Se},parse:function(re){var Se=P(re+="",!1);return Se.toString=function(){return re},Se},utcFormat:function(re){var Se=A(re+="",S);return Se.toString=function(){return re},Se},utcParse:function(re){var Se=P(re+="",!0);return Se.toString=function(){return re},Se}}}var WF={"-":"",_:" ",0:"0"},go=/^\s*\d+/,_Oe=/^%/,SOe=/[\\^$*+?|[\]().{}]/g;function Hn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function jOe(e){return e.replace(SOe,"\\$&")}function Fy(e){return new RegExp("^(?:"+e.map(jOe).join("|")+")","i")}function By(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function NOe(e,t,r){var n=go.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function COe(e,t,r){var n=go.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function AOe(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function POe(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function EOe(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function VF(e,t,r){var n=go.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function HF(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kOe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function OOe(e,t,r){var n=go.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function TOe(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function GF(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function IOe(e,t,r){var n=go.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function KF(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function DOe(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function MOe(e,t,r){var n=go.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ROe(e,t,r){var n=go.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function LOe(e,t,r){var n=go.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function $Oe(e,t,r){var n=_Oe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function FOe(e,t,r){var n=go.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function BOe(e,t,r){var n=go.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function YF(e,t){return Hn(e.getDate(),t,2)}function zOe(e,t){return Hn(e.getHours(),t,2)}function qOe(e,t){return Hn(e.getHours()%12||12,t,2)}function UOe(e,t){return Hn(1+Hb.count(Md(e),e),t,3)}function SY(e,t){return Hn(e.getMilliseconds(),t,3)}function WOe(e,t){return SY(e,t)+"000"}function VOe(e,t){return Hn(e.getMonth()+1,t,2)}function HOe(e,t){return Hn(e.getMinutes(),t,2)}function GOe(e,t){return Hn(e.getSeconds(),t,2)}function KOe(e){var t=e.getDay();return t===0?7:t}function YOe(e,t){return Hn(eN.count(Md(e)-1,e),t,2)}function jY(e){var t=e.getDay();return t>=4||t===0?ov(e):ov.ceil(e)}function XOe(e,t){return e=jY(e),Hn(ov.count(Md(e),e)+(Md(e).getDay()===4),t,2)}function JOe(e){return e.getDay()}function QOe(e,t){return Hn(L_.count(Md(e)-1,e),t,2)}function ZOe(e,t){return Hn(e.getFullYear()%100,t,2)}function eTe(e,t){return e=jY(e),Hn(e.getFullYear()%100,t,2)}function tTe(e,t){return Hn(e.getFullYear()%1e4,t,4)}function rTe(e,t){var r=e.getDay();return e=r>=4||r===0?ov(e):ov.ceil(e),Hn(e.getFullYear()%1e4,t,4)}function nTe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hn(t/60|0,"0",2)+Hn(t%60,"0",2)}function XF(e,t){return Hn(e.getUTCDate(),t,2)}function aTe(e,t){return Hn(e.getUTCHours(),t,2)}function iTe(e,t){return Hn(e.getUTCHours()%12||12,t,2)}function oTe(e,t){return Hn(1+Zj.count(Rd(e),e),t,3)}function NY(e,t){return Hn(e.getUTCMilliseconds(),t,3)}function sTe(e,t){return NY(e,t)+"000"}function lTe(e,t){return Hn(e.getUTCMonth()+1,t,2)}function cTe(e,t){return Hn(e.getUTCMinutes(),t,2)}function uTe(e,t){return Hn(e.getUTCSeconds(),t,2)}function dTe(e){var t=e.getUTCDay();return t===0?7:t}function fTe(e,t){return Hn(tN.count(Rd(e)-1,e),t,2)}function CY(e){var t=e.getUTCDay();return t>=4||t===0?sv(e):sv.ceil(e)}function hTe(e,t){return e=CY(e),Hn(sv.count(Rd(e),e)+(Rd(e).getUTCDay()===4),t,2)}function mTe(e){return e.getUTCDay()}function pTe(e,t){return Hn($_.count(Rd(e)-1,e),t,2)}function gTe(e,t){return Hn(e.getUTCFullYear()%100,t,2)}function vTe(e,t){return e=CY(e),Hn(e.getUTCFullYear()%100,t,2)}function yTe(e,t){return Hn(e.getUTCFullYear()%1e4,t,4)}function xTe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?sv(e):sv.ceil(e),Hn(e.getUTCFullYear()%1e4,t,4)}function bTe(){return"+0000"}function JF(){return"%"}function QF(e){return+e}function ZF(e){return Math.floor(+e/1e3)}var Mp,AY,PY;wTe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wTe(e){return Mp=wOe(e),AY=Mp.format,Mp.parse,PY=Mp.utcFormat,Mp.utcParse,Mp}function _Te(e){return new Date(e)}function STe(e){return e instanceof Date?+e:+new Date(+e)}function G3(e,t,r,n,a,i,o,l,c,u){var d=I3(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),y=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),S=u("%Y");function j(A){return(c(A)<A?m:l(A)<A?g:o(A)<A?p:i(A)<A?y:n(A)<A?a(A)<A?x:b:r(A)<A?w:S)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?h(Array.from(A,STe)):h().map(_Te)},d.ticks=function(A){var P=h();return e(P[0],P[P.length-1],A??10)},d.tickFormat=function(A,P){return P==null?j:u(P)},d.nice=function(A){var P=h();return(!A||typeof A.range!="function")&&(A=t(P[0],P[P.length-1],A??10)),A?h(mY(P,A)):d},d.copy=function(){return Vb(d,G3(e,t,r,n,a,i,o,l,c,u))},d}function jTe(){return sc.apply(G3(xOe,bOe,Md,V3,eN,Hb,U3,z3,pm,AY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NTe(){return sc.apply(G3(vOe,yOe,Rd,H3,tN,Zj,W3,q3,pm,PY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rN(){var e=0,t=1,r,n,a,i,o=gs,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(Qv),u.rangeRound=d(T3),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function _h(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function EY(){var e=wh(rN()(gs));return e.copy=function(){return _h(e,EY())},Hd.apply(e,arguments)}function kY(){var e=R3(rN()).domain([1,10]);return e.copy=function(){return _h(e,kY()).base(e.base())},Hd.apply(e,arguments)}function OY(){var e=L3(rN());return e.copy=function(){return _h(e,OY()).constant(e.constant())},Hd.apply(e,arguments)}function K3(){var e=$3(rN());return e.copy=function(){return _h(e,K3()).exponent(e.exponent())},Hd.apply(e,arguments)}function CTe(){return K3.apply(null,arguments).exponent(.5)}function TY(){var e=[],t=gs;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ub(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Vf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>fke(e,i/n))},r.copy=function(){return TY(t).domain(e)},Hd.apply(r,arguments)}function nN(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=gs,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(y){var x,b,w;return arguments.length?([x,b,w]=y,u=$ke(p,[x,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Qv),m.rangeRound=g(T3),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,a=p(e),i=p(t),o=p(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function IY(){var e=wh(nN()(gs));return e.copy=function(){return _h(e,IY())},Hd.apply(e,arguments)}function DY(){var e=R3(nN()).domain([.1,1,10]);return e.copy=function(){return _h(e,DY()).base(e.base())},Hd.apply(e,arguments)}function MY(){var e=L3(nN());return e.copy=function(){return _h(e,MY()).constant(e.constant())},Hd.apply(e,arguments)}function Y3(){var e=$3(nN());return e.copy=function(){return _h(e,Y3()).exponent(e.exponent())},Hd.apply(e,arguments)}function ATe(){return Y3.apply(null,arguments).exponent(.5)}const e8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:E0,scaleDiverging:IY,scaleDivergingLog:DY,scaleDivergingPow:Y3,scaleDivergingSqrt:ATe,scaleDivergingSymlog:MY,scaleIdentity:hY,scaleImplicit:wk,scaleLinear:M_,scaleLog:pY,scaleOrdinal:E3,scalePoint:Ex,scalePow:F3,scaleQuantile:yY,scaleQuantize:xY,scaleRadial:vY,scaleSequential:EY,scaleSequentialLog:kY,scaleSequentialPow:K3,scaleSequentialQuantile:TY,scaleSequentialSqrt:CTe,scaleSequentialSymlog:OY,scaleSqrt:sOe,scaleSymlog:gY,scaleThreshold:bY,scaleTime:jTe,scaleUtc:NTe,tickFormat:fY},Symbol.toStringTag,{value:"Module"}));var PTe=Uv;function ETe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!PTe(o):r(o,l)))var l=o,c=i}return c}var aN=ETe;function kTe(e,t){return e>t}var RY=kTe,OTe=aN,TTe=RY,ITe=Jv;function DTe(e){return e&&e.length?OTe(e,ITe,TTe):void 0}var MTe=DTe;const Pf=zn(MTe);function RTe(e,t){return e<t}var LY=RTe,LTe=aN,$Te=LY,FTe=Jv;function BTe(e){return e&&e.length?LTe(e,FTe,$Te):void 0}var zTe=BTe;const iN=zn(zTe);var qTe=c3,UTe=Iu,WTe=VK,VTe=Ws;function HTe(e,t){var r=VTe(e)?qTe:WTe;return r(e,UTe(t))}var GTe=HTe,KTe=UK,YTe=GTe;function XTe(e,t){return KTe(YTe(e,t),1)}var JTe=XTe;const QTe=zn(JTe);var ZTe=j3;function eIe(e,t){return ZTe(e,t)}var tIe=eIe;const Hm=zn(tIe);var Zv=1e9,rIe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},J3,Qa=!0,nc="[DecimalError] ",Em=nc+"Invalid argument: ",X3=nc+"Exponent out of range: ",ey=Math.floor,Zh=Math.pow,nIe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hl,so=1e7,Ba=7,$Y=9007199254740991,F_=ey($Y/Ba),gr={};gr.absoluteValue=gr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};gr.comparedTo=gr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};gr.decimalPlaces=gr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ba;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};gr.dividedBy=gr.div=function(e){return Cd(this,new this.constructor(e))};gr.dividedToIntegerBy=gr.idiv=function(e){var t=this,r=t.constructor;return Sa(Cd(t,new r(e),0,1),r.precision)};gr.equals=gr.eq=function(e){return!this.cmp(e)};gr.exponent=function(){return Mi(this)};gr.greaterThan=gr.gt=function(e){return this.cmp(e)>0};gr.greaterThanOrEqualTo=gr.gte=function(e){return this.cmp(e)>=0};gr.isInteger=gr.isint=function(){return this.e>this.d.length-2};gr.isNegative=gr.isneg=function(){return this.s<0};gr.isPositive=gr.ispos=function(){return this.s>0};gr.isZero=function(){return this.s===0};gr.lessThan=gr.lt=function(e){return this.cmp(e)<0};gr.lessThanOrEqualTo=gr.lte=function(e){return this.cmp(e)<1};gr.logarithm=gr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(hl))throw Error(nc+"NaN");if(r.s<1)throw Error(nc+(r.s?"NaN":"-Infinity"));return r.eq(hl)?new n(0):(Qa=!1,t=Cd(D0(r,i),D0(e,i),i),Qa=!0,Sa(t,a))};gr.minus=gr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zY(t,e):FY(t,(e.s=-e.s,e))};gr.modulo=gr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(nc+"NaN");return r.s?(Qa=!1,t=Cd(r,e,0,1).times(e),Qa=!0,r.minus(t)):Sa(new n(r),a)};gr.naturalExponential=gr.exp=function(){return BY(this)};gr.naturalLogarithm=gr.ln=function(){return D0(this)};gr.negated=gr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};gr.plus=gr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?FY(t,e):zY(t,(e.s=-e.s,e))};gr.precision=gr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Em+e);if(t=Mi(a)+1,n=a.d.length-1,r=n*Ba+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};gr.squareRoot=gr.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(nc+"NaN")}for(e=Mi(l),Qa=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=du(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ey((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Cd(l,i,o+2)).times(.5),du(i.d).slice(0,o)===(t=du(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Sa(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Qa=!0,Sa(n,r)};gr.times=gr.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%so|0,t=l/so|0;i[a]=(i[a]+t)%so|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Qa?Sa(e,f.precision):e};gr.toDecimalPlaces=gr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Pu(e,0,Zv),t===void 0?t=n.rounding:Pu(t,0,8),Sa(r,e+Mi(r)+1,t))};gr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Gm(n,!0):(Pu(e,0,Zv),t===void 0?t=a.rounding:Pu(t,0,8),n=Sa(new a(n),e+1,t),r=Gm(n,!0,e+1)),r};gr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Gm(a):(Pu(e,0,Zv),t===void 0?t=i.rounding:Pu(t,0,8),n=Sa(new i(a),e+Mi(a)+1,t),r=Gm(n.abs(),!1,e+Mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};gr.toInteger=gr.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),Mi(e)+1,t.rounding)};gr.toNumber=function(){return+this};gr.toPower=gr.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(hl);if(l=new c(l),!l.s){if(e.s<1)throw Error(nc+"Infinity");return l}if(l.eq(hl))return l;if(n=c.precision,e.eq(hl))return Sa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=$Y){for(a=new c(hl),t=Math.ceil(n/Ba+4),Qa=!1;r%2&&(a=a.times(l),r8(a.d,t)),r=ey(r/2),r!==0;)l=l.times(l),r8(l.d,t);return Qa=!0,e.s<0?new c(hl).div(a):Sa(a,n)}}else if(i<0)throw Error(nc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Qa=!1,a=e.times(D0(l,n+u)),Qa=!0,a=BY(a),a.s=i,a};gr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Mi(a),n=Gm(a,r<=i.toExpNeg||r>=i.toExpPos)):(Pu(e,1,Zv),t===void 0?t=i.rounding:Pu(t,0,8),a=Sa(new i(a),e,t),r=Mi(a),n=Gm(a,e<=r||r<=i.toExpNeg,e)),n};gr.toSignificantDigits=gr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Pu(e,1,Zv),t===void 0?t=n.rounding:Pu(t,0,8)),Sa(new n(r),e,t)};gr.toString=gr.valueOf=gr.val=gr.toJSON=gr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Mi(e),r=e.constructor;return Gm(e,t<=r.toExpNeg||t>=r.toExpPos)};function FY(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Qa?Sa(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ba),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/so|0,c[i]%=so;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Qa?Sa(t,f):t}function Pu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Em+e)}function du(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Ba-n.length,r&&(i+=yf(r)),i+=n;o=e[t],n=o+"",r=Ba-n.length,r&&(i+=yf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Cd=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%so|0,o=i/so|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*so+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,g,p,y,x,b,w,S,j,A,P,C,E=n.constructor,R=n.s==a.s?1:-1,k=n.d,T=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(nc+"Division by zero");for(c=n.e-a.e,P=T.length,j=k.length,m=new E(R),g=m.d=[],u=0;T[u]==(k[u]||0);)++u;if(T[u]>(k[u]||0)&&--c,i==null?b=i=E.precision:o?b=i+(Mi(n)-Mi(a))+1:b=i,b<0)return new E(0);if(b=b/Ba+2|0,u=0,P==1)for(d=0,T=T[0],b++;(u<j||d)&&b--;u++)w=d*so+(k[u]||0),g[u]=w/T|0,d=w%T|0;else{for(d=so/(T[0]+1)|0,d>1&&(T=e(T,d),k=e(k,d),P=T.length,j=k.length),S=P,p=k.slice(0,P),y=p.length;y<P;)p[y++]=0;C=T.slice(),C.unshift(0),A=T[0],T[1]>=so/2&&++A;do d=0,l=t(T,p,P,y),l<0?(x=p[0],P!=y&&(x=x*so+(p[1]||0)),d=x/A|0,d>1?(d>=so&&(d=so-1),f=e(T,d),h=f.length,y=p.length,l=t(f,p,h,y),l==1&&(d--,r(f,P<h?C:T,h))):(d==0&&(l=d=1),f=T.slice()),h=f.length,h<y&&f.unshift(0),r(p,f,y),l==-1&&(y=p.length,l=t(T,p,P,y),l<1&&(d++,r(p,P<y?C:T,y))),y=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[y++]=k[S]||0:(p=[k[S]],y=1);while((S++<j||p[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,Sa(m,o?i+Mi(m)+1:i)}}();function BY(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Mi(e)>16)throw Error(X3+Mi(e));if(!e.s)return new d(hl);for(t==null?(Qa=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Zh(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(hl),d.precision=l;;){if(a=Sa(a.times(e),l),r=r.times(++c),o=i.plus(Cd(a,r,l)),du(o.d).slice(0,l)===du(i.d).slice(0,l)){for(;u--;)i=Sa(i.times(i),l);return d.precision=f,t==null?(Qa=!0,Sa(i,f)):i}i=o}}function Mi(e){for(var t=e.e*Ba,r=e.d[0];r>=10;r/=10)t++;return t}function J5(e,t,r){if(t>e.LN10.sd())throw Qa=!0,r&&(e.precision=r),Error(nc+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function yf(e){for(var t="";e--;)t+="0";return t}function D0(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,y=p.precision;if(m.s<1)throw Error(nc+(m.s?"NaN":"-Infinity"));if(m.eq(hl))return new p(0);if(t==null?(Qa=!1,u=y):u=t,m.eq(10))return t==null&&(Qa=!0),J5(p,u);if(u+=h,p.precision=u,r=du(g),n=r.charAt(0),i=Mi(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=du(m.d),n=r.charAt(0),f++;i=Mi(m),n>1?(m=new p("0."+r),i++):m=new p(n+"."+r.slice(1))}else return c=J5(p,u+2,y).times(i+""),m=D0(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=y,t==null?(Qa=!0,Sa(m,y)):m;for(l=o=m=Cd(m.minus(hl),m.plus(hl),u),d=Sa(m.times(m),u),a=3;;){if(o=Sa(o.times(d),u),c=l.plus(Cd(o,new p(a),u)),du(c.d).slice(0,u)===du(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(J5(p,u+2,y).times(i+""))),l=Cd(l,new p(f),u),p.precision=y,t==null?(Qa=!0,Sa(l,y)):l;l=c,a+=2}}function t8(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ey(r/Ba),e.d=[],n=(r+1)%Ba,r<0&&(n+=Ba),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ba;n<a;)e.d.push(+t.slice(n,n+=Ba));t=t.slice(n),n=Ba-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Qa&&(e.e>F_||e.e<-F_))throw Error(X3+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ba,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ba),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Ba,a=n-Ba+o}if(r!==void 0&&(i=Zh(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Zh(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Mi(e),f.length=1,t=t-i-1,f[0]=Zh(10,(Ba-t%Ba)%Ba),e.e=ey(-t/Ba)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Zh(10,Ba-n),f[d]=a>0?(u/Zh(10,o-a)%Zh(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==so&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=so)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Qa&&(e.e>F_||e.e<-F_))throw Error(X3+Mi(e));return e}function zY(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Qa?Sa(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Ba),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=so-1;--c[i],c[a]+=so}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Qa?Sa(t,m):t):new h(0)}function Gm(e,t,r){var n,a=Mi(e),i=du(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+yf(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+yf(-a-1)+i,r&&(n=r-o)>0&&(i+=yf(n))):a>=o?(i+=yf(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+yf(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=yf(n))),e.s<0?"-"+i:i}function r8(e,t){if(e.length>t)return e.length=t,!0}function qY(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Em+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return t8(o,i.toString())}else if(typeof i!="string")throw Error(Em+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,nIe.test(i))t8(o,i);else throw Error(Em+i)}if(a.prototype=gr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=qY,a.config=a.set=aIe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function aIe(e){if(!e||typeof e!="object")throw Error(nc+"Object expected");var t,r,n,a=["precision",1,Zv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ey(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Em+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Em+r+": "+n);return this}var J3=qY(rIe);hl=new J3(1);const ga=J3;function iIe(e){return cIe(e)||lIe(e)||sIe(e)||oIe()}function oIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sIe(e,t){if(e){if(typeof e=="string")return Nk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nk(e,t)}}function lIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function cIe(e){if(Array.isArray(e))return Nk(e)}function Nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uIe=function(t){return t},UY={"@@functional/placeholder":!0},WY=function(t){return t===UY},n8=function(t){return function r(){return arguments.length===0||arguments.length===1&&WY(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},dIe=function e(t,r){return t===1?r:n8(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==UY}).length;return o>=t?r.apply(void 0,a):e(t-o,n8(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return WY(f)?c.shift():f});return r.apply(void 0,iIe(d).concat(c))}))})},oN=function(t){return dIe(t.length,t)},Ck=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},fIe=oN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),hIe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return uIe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Ak=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},VY=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function mIe(e){var t;return e===0?t=1:t=Math.floor(new ga(e).abs().log(10).toNumber())+1,t}function pIe(e,t,r){for(var n=new ga(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var gIe=oN(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),vIe=oN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),yIe=oN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const sN={rangeStep:pIe,getDigitCount:mIe,interpolateNumber:gIe,uninterpolateNumber:vIe,uninterpolateTruncation:yIe};function Pk(e){return wIe(e)||bIe(e)||HY(e)||xIe()}function xIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wIe(e){if(Array.isArray(e))return Ek(e)}function M0(e,t){return jIe(e)||SIe(e,t)||HY(e,t)||_Ie()}function _Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HY(e,t){if(e){if(typeof e=="string")return Ek(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ek(e,t)}}function Ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SIe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function jIe(e){if(Array.isArray(e))return e}function GY(e){var t=M0(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function KY(e,t,r){if(e.lte(0))return new ga(0);var n=sN.getDigitCount(e.toNumber()),a=new ga(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new ga(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new ga(Math.ceil(c))}function NIe(e,t,r){var n=1,a=new ga(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new ga(10).pow(sN.getDigitCount(e)-1),a=new ga(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ga(Math.floor(e)))}else e===0?a=new ga(Math.floor((t-1)/2)):r||(a=new ga(Math.floor(e)));var o=Math.floor((t-1)/2),l=hIe(fIe(function(c){return a.add(new ga(c-o).mul(n)).toNumber()}),Ck);return l(0,t)}function YY(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new ga(0),tickMin:new ga(0),tickMax:new ga(0)};var i=KY(new ga(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new ga(0):(o=new ga(e).add(t).div(2),o=o.sub(new ga(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ga(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?YY(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new ga(l).mul(i)),tickMax:o.add(new ga(c).mul(i))})}function CIe(e){var t=M0(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=GY([r,n]),c=M0(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Pk(Ck(0,a-1).map(function(){return 1/0}))):[].concat(Pk(Ck(0,a-1).map(function(){return-1/0})),[d]);return r>n?Ak(f):f}if(u===d)return NIe(u,a,i);var h=YY(u,d,o,i),m=h.step,g=h.tickMin,p=h.tickMax,y=sN.rangeStep(g,p.add(new ga(.1).mul(m)),m);return r>n?Ak(y):y}function AIe(e,t){var r=M0(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=GY([n,a]),l=M0(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=KY(new ga(u).sub(c).div(d-1),i,0),h=[].concat(Pk(sN.rangeStep(new ga(c),new ga(u).sub(new ga(.99).mul(f)),f)),[u]);return n>a?Ak(h):h}var PIe=VY(CIe),EIe=VY(AIe),kIe=!0,Q5="Invariant failed";function oh(e,t){if(!e){if(kIe)throw new Error(Q5);var r=typeof t=="function"?t():t,n=r?"".concat(Q5,": ").concat(r):Q5;throw new Error(n)}}var OIe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B_.apply(this,arguments)}function TIe(e,t){return RIe(e)||MIe(e,t)||DIe(e,t)||IIe()}function IIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DIe(e,t){if(e){if(typeof e=="string")return a8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a8(e,t)}}function a8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function RIe(e){if(Array.isArray(e))return e}function LIe(e,t){if(e==null)return{};var r=$Ie(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $Ie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function FIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QY(n.key),n)}}function BIe(e,t,r){return t&&i8(e.prototype,t),r&&i8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zIe(e,t,r){return t=z_(t),qIe(e,XY()?Reflect.construct(t,r||[],z_(e).constructor):t.apply(e,r))}function qIe(e,t){if(t&&(lv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UIe(e)}function UIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XY=function(){return!!e})()}function z_(e){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z_(e)}function WIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kk(e,t)}function kk(e,t){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kk(e,t)}function JY(e,t,r){return t=QY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QY(e){var t=VIe(e,"string");return lv(t)=="symbol"?t:t+""}function VIe(e,t){if(lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gb=function(e){function t(){return FIe(this,t),zIe(this,t,arguments)}return WIe(t,e),BIe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=LIe(n,OIe),m=Er(h,!1);this.props.direction==="x"&&d.type!=="number"&&oh(!1);var g=c.map(function(p){var y=u(p,l),x=y.x,b=y.y,w=y.value,S=y.errorVal;if(!S)return null;var j=[],A,P;if(Array.isArray(S)){var C=TIe(S,2);A=C[0],P=C[1]}else A=P=S;if(i==="vertical"){var E=d.scale,R=b+a,k=R+o,T=R-o,I=E(w-A),M=E(w+P);j.push({x1:M,y1:k,x2:M,y2:T}),j.push({x1:I,y1:R,x2:M,y2:R}),j.push({x1:I,y1:k,x2:I,y2:T})}else if(i==="horizontal"){var z=f.scale,W=x+a,U=W-o,$=W+o,G=z(w-A),me=z(w+P);j.push({x1:U,y1:me,x2:$,y2:me}),j.push({x1:W,y1:G,x2:W,y2:me}),j.push({x1:U,y1:G,x2:$,y2:G})}return le.createElement(Nn,B_({className:"recharts-errorBar",key:"bar-".concat(j.map(function(de){return"".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)}))},m),j.map(function(de){return le.createElement("line",B_({},de,{key:"line-".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)}))}))});return le.createElement(Nn,{className:"recharts-errorBars"},g)}}])}(le.Component);JY(Gb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});JY(Gb,"displayName","ErrorBar");function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function o8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o8(Object(r),!0).forEach(function(n){HIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HIe(e,t,r){return t=GIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GIe(e){var t=KIe(e,"string");return R0(t)=="symbol"?t:t+""}function KIe(e,t){if(R0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(R0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZY=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ll(r,Am);if(!o)return null;var l=Am.defaultProps,c=l!==void 0?$h($h({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?$h($h({},h),f.props):{},g=m.dataKey,p=m.name,y=m.legendType,x=m.hide;return{inactive:x,dataKey:g,type:c.iconType||y||"square",color:Q3(f),value:p||g,payload:m}}),$h($h($h({},c),Am.getWithHeight(o,a)),{},{payload:u,item:o})};function L0(e){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L0(e)}function s8(e){return QIe(e)||JIe(e)||XIe(e)||YIe()}function YIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XIe(e,t){if(e){if(typeof e=="string")return Ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ok(e,t)}}function JIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function QIe(e){if(Array.isArray(e))return Ok(e)}function Ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l8(Object(r),!0).forEach(function(n){kg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kg(e,t,r){return t=ZIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZIe(e){var t=e3e(e,"string");return L0(t)=="symbol"?t:t+""}function e3e(e,t){if(L0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(L0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ji(e,t,r){return Qr(e)||Qr(t)?r:eo(t)?xl(e,t,r):Wr(t)?t(e):r}function kx(e,t,r,n){var a=QTe(e,function(l){return ji(l,t)});if(r==="number"){var i=a.filter(function(l){return Xt(l)||parseFloat(l)});return i.length?[iN(i),Pf(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Qr(l)}):a;return o.map(function(l){return eo(l)||l instanceof Date?l:""})}var t3e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(ms(f-d)!==ms(h-f)){var g=[];if(ms(h-f)===ms(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var y=h+c[1]-c[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>x[0]&&t<=x[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(d,h),w=Math.max(d,h);if(t>(b+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},Q3=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?mi(mi({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},r3e=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,y=g.cateAxisId,x=p.filter(function(P){return Nd(P.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,w=b!==void 0?mi(mi({},b),x[0].props):x[0].props,S=w.barSize,j=w[y];o[j]||(o[j]=[]);var A=Qr(S)?r:S;o[j].push({item:x[0],stackList:x.slice(1),barSize:Qr(A)?void 0:ps(A,n,0)})}}return o},n3e=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=ps(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(S,j){return S+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,y={offset:p-u,size:0};d=o.reduce(function(S,j){var A={item:j.item,position:{offset:y.offset+y.size+u,size:h?m:j.barSize}},P=[].concat(s8(S),[A]);return y=P[P.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){P.push({item:C,position:y})}),P},f)}else{var x=ps(n,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var b=(a-2*x-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;d=o.reduce(function(S,j,A){var P=[].concat(s8(S),[{item:j.item,position:{offset:x+(b+u)*A+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){P.push({item:C,position:P[P.length-1].position})}),P},f)}return d},a3e=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=ZY({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&Xt(t[m]))return mi(mi({},t),{},kg({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&Xt(t[g]))return mi(mi({},t),{},kg({},g,t[g]+(h||0)))}return t},i3e=function(t,r,n){return Qr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},eX=function(t,r,n,a,i){var o=r.props.children,l=bl(o,Gb).filter(function(u){return i3e(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=ji(d,n);if(Qr(f))return u;var h=Array.isArray(f)?[iN(f),Pf(f)]:[f,f],m=c.reduce(function(g,p){var y=ji(d,p,0),x=h[0]-Math.abs(Array.isArray(y)?y[0]:y),b=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},o3e=function(t,r,n,a,i){var o=r.map(function(l){return eX(t,l,n,i,a)}).filter(function(l){return!Qr(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},tX=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&eX(t,c,u,a)||kx(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},rX=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},nX=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},ud=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?ms(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Kv(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Z5=new WeakMap,_w=function(t,r){if(typeof r!="function")return t;Z5.has(t)||Z5.set(t,new WeakMap);var n=Z5.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},aX=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:E0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:M_(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ex(),realScaleType:"point"}:i==="category"?{scale:E0(),realScaleType:"band"}:{scale:M_(),realScaleType:"linear"};if(Um(a)){var c="scale".concat(Vj(a));return{scale:(e8[c]||Ex)(),realScaleType:e8[c]?c:"point"}}return Wr(a)?{scale:a}:{scale:Ex(),realScaleType:"point"}},c8=1e-4,iX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-c8,o=Math.max(a[0],a[1])+c8,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},s3e=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},l3e=function(t,r){if(!r||r.length!==2||!Xt(r[0])||!Xt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Xt(t[0])||t[0]<n)&&(i[0]=n),(!Xt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},c3e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Kv(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},u3e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Kv(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},d3e={sign:c3e,expand:I2e,none:ev,silhouette:D2e,wiggle:M2e,positive:u3e},f3e=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=d3e[n],o=T2e().keys(a).value(function(l,c){return+ji(l,c,0)}).order(rk).offset(i);return o(t)},h3e=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?mi(mi({},h.type.defaultProps),h.props):h.props,p=g.stackId,y=g.hide;if(y)return f;var x=g[n],b=f[x]||{hasStack:!1,stackGroups:{}};if(eo(p)){var w=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[p]=w}else b.stackGroups[fp("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return mi(mi({},f),{},kg({},x,b))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,y){var x=m.stackGroups[y];return mi(mi({},p),{},kg({},y,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:f3e(t,x.items,i)}))},g)}return mi(mi({},f),{},kg({},h,m))},d)},oX=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=PIe(u,i,l);return t.domain([iN(d),Pf(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=EIe(f,i,l);return{niceTicks:h}}return null};function q_(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qr(a[t.dataKey])){var l=m_(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=ji(a,Qr(o)?t.dataKey:o);return Qr(c)?null:t.scale(c)}var u8=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=ji(o,r.dataKey,r.domain[l]);return Qr(c)?null:r.scale(c)-i/2+a},m3e=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},p3e=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?mi(mi({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(eo(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},g3e=function(t){return t.reduce(function(r,n){return[iN(n.concat([r[0]]).filter(Xt)),Pf(n.concat([r[1]]).filter(Xt))]},[1/0,-1/0])},sX=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=g3e(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},d8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tk=function(t,r,n){if(Wr(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Xt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(d8.test(t[0])){var i=+d8.exec(t[0])[1];a[0]=r[0]-i}else Wr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Xt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(f8.test(t[1])){var o=+f8.exec(t[1])[1];a[1]=r[1]+o}else Wr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},U_=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=C3(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},h8=function(t,r,n){return!t||!t.length||Hm(t,xl(n,"type.defaultProps.domain"))?r:t},lX=function(t,r){var n=t.type.defaultProps?mi(mi({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return mi(mi({},Er(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:Q3(t),value:ji(r,a),type:c,payload:r,chartType:u,hide:d})};function $0(e){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0(e)}function m8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ju(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m8(Object(r),!0).forEach(function(n){cX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cX(e,t,r){return t=v3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v3e(e){var t=y3e(e,"string");return $0(t)=="symbol"?t:t+""}function y3e(e,t){if($0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x3e(e,t){return S3e(e)||_3e(e,t)||w3e(e,t)||b3e()}function b3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w3e(e,t){if(e){if(typeof e=="string")return p8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p8(e,t)}}function p8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function S3e(e){if(Array.isArray(e))return e}var W_=Math.PI/180,j3e=function(t){return t*180/Math.PI},Oa=function(t,r,n,a){return{x:t+Math.cos(-W_*a)*n,y:r+Math.sin(-W_*a)*n}},uX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},N3e=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=ps(t.cx,o,o/2),f=ps(t.cy,l,l/2),h=uX(o,l,n),m=ps(t.innerRadius,h,0),g=ps(t.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(y,x){var b=r[x],w=b.domain,S=b.reversed,j;if(Qr(b.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,g]),S&&(j=[j[1],j[0]]);else{j=b.range;var A=j,P=x3e(A,2);c=P[0],u=P[1]}var C=aX(b,i),E=C.realScaleType,R=C.scale;R.domain(w).range(j),iX(R);var k=oX(R,Ju(Ju({},b),{},{realScaleType:E})),T=Ju(Ju(Ju({},b),k),{},{range:j,radius:g,realScaleType:E,scale:R,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return Ju(Ju({},y),{},cX({},x,T))},{})},C3e=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},A3e=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=C3e({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:j3e(u),angleInRadian:u}},P3e=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},E3e=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},g8=function(t,r){var n=t.x,a=t.y,i=A3e({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=P3e(r),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?Ju(Ju({},r),{},{radius:o,angle:E3e(m,r)}):null},dX=function(t){return!v.isValidElement(t)&&!Wr(t)&&typeof t!="boolean"?t.className:""};function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}var k3e=["offset"];function O3e(e){return M3e(e)||D3e(e)||I3e(e)||T3e()}function T3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I3e(e,t){if(e){if(typeof e=="string")return Ik(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ik(e,t)}}function D3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M3e(e){if(Array.isArray(e))return Ik(e)}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R3e(e,t){if(e==null)return{};var r=L3e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function L3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v8(Object(r),!0).forEach(function(n){$3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $3e(e,t,r){return t=F3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F3e(e){var t=B3e(e,"string");return F0(t)=="symbol"?t:t+""}function B3e(e,t){if(F0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(F0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}var z3e=function(t){var r=t.value,n=t.formatter,a=Qr(t.children)?r:t.children;return Wr(n)?n(a):a},q3e=function(t,r){var n=ms(r-t),a=Math.min(Math.abs(r-t),360);return n*a},U3e=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,y=(f+h)/2,x=q3e(m,g),b=x>=0?1:-1,w,S;a==="insideStart"?(w=m+b*o,S=p):a==="insideEnd"?(w=g-b*o,S=!p):a==="end"&&(w=g+b*o,S=p),S=x<=0?S:!S;var j=Oa(u,d,y,w),A=Oa(u,d,y,w+(S?1:-1)*359),P="M".concat(j.x,",").concat(j.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(A.x,",").concat(A.y),C=Qr(t.id)?fp("recharts-radial-line-"):t.id;return le.createElement("text",B0({},n,{dominantBaseline:"central",className:Zr("recharts-radial-bar-label",l)}),le.createElement("defs",null,le.createElement("path",{id:C,d:P})),le.createElement("textPath",{xlinkHref:"#".concat(C)},r))},W3e=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=Oa(o,l,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,x=Oa(o,l,y,h),b=x.x,w=x.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},V3e=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,y=p*a,x=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Hi(Hi({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return Hi(Hi({},S),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Hi(Hi({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var A={x:l+u+y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Hi(Hi({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return i==="insideLeft"?Hi({x:l+y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},P):i==="insideRight"?Hi({x:l+u-y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},P):i==="insideTop"?Hi({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},P):i==="insideBottom"?Hi({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},P):i==="insideTopLeft"?Hi({x:l+y,y:c+h,textAnchor:b,verticalAnchor:g},P):i==="insideTopRight"?Hi({x:l+u-y,y:c+h,textAnchor:x,verticalAnchor:g},P):i==="insideBottomLeft"?Hi({x:l+y,y:c+d-h,textAnchor:b,verticalAnchor:m},P):i==="insideBottomRight"?Hi({x:l+u-y,y:c+d-h,textAnchor:x,verticalAnchor:m},P):Wv(i)&&(Xt(i.x)||hm(i.x))&&(Xt(i.y)||hm(i.y))?Hi({x:l+ps(i.x,u),y:c+ps(i.y,d),textAnchor:"end",verticalAnchor:"end"},P):Hi({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},H3e=function(t){return"cx"in t&&Xt(t.cx)};function co(e){var t=e.offset,r=t===void 0?5:t,n=R3e(e,k3e),a=Hi({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||Qr(l)&&Qr(c)&&!v.isValidElement(u)&&!Wr(u))return null;if(v.isValidElement(u))return v.cloneElement(u,a);var m;if(Wr(u)){if(m=v.createElement(u,a),v.isValidElement(m))return m}else m=z3e(a);var g=H3e(i),p=Er(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return U3e(a,m,p);var y=g?W3e(a):V3e(a);return le.createElement(Vm,B0({className:Zr("recharts-label",f)},p,y,{breakAll:h}),m)}co.displayName="Label";var fX=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,y=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(Xt(p)&&Xt(y)){if(Xt(f)&&Xt(h))return{x:f,y:h,width:p,height:y};if(Xt(m)&&Xt(g))return{x:m,y:g,width:p,height:y}}return Xt(f)&&Xt(h)?{x:f,y:h,width:0,height:0}:Xt(r)&&Xt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},G3e=function(t,r){return t?t===!0?le.createElement(co,{key:"label-implicit",viewBox:r}):eo(t)?le.createElement(co,{key:"label-implicit",viewBox:r,value:t}):v.isValidElement(t)?t.type===co?v.cloneElement(t,{key:"label-implicit",viewBox:r}):le.createElement(co,{key:"label-implicit",content:t,viewBox:r}):Wr(t)?le.createElement(co,{key:"label-implicit",content:t,viewBox:r}):Wv(t)?le.createElement(co,B0({viewBox:r},t,{key:"label-implicit"})):null:null},K3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=fX(t),o=bl(a,co).map(function(c,u){return v.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=G3e(t.label,r||i);return[l].concat(O3e(o))};co.parseViewBox=fX;co.renderCallByParent=K3e;function Y3e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var X3e=Y3e;const J3e=zn(X3e);function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z0(e)}var Q3e=["valueAccessor"],Z3e=["data","dataKey","clockWise","id","textBreakAll"];function e4e(e){return a4e(e)||n4e(e)||r4e(e)||t4e()}function t4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r4e(e,t){if(e){if(typeof e=="string")return Dk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dk(e,t)}}function n4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a4e(e){if(Array.isArray(e))return Dk(e)}function Dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V_(){return V_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V_.apply(this,arguments)}function y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(r),!0).forEach(function(n){i4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i4e(e,t,r){return t=o4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o4e(e){var t=s4e(e,"string");return z0(t)=="symbol"?t:t+""}function s4e(e,t){if(z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b8(e,t){if(e==null)return{};var r=l4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var c4e=function(t){return Array.isArray(t.value)?J3e(t.value):t.value};function wu(e){var t=e.valueAccessor,r=t===void 0?c4e:t,n=b8(e,Q3e),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=b8(n,Z3e);return!a||!a.length?null:le.createElement(Nn,{className:"recharts-label-list"},a.map(function(d,f){var h=Qr(i)?r(d,f):ji(d&&d.payload,i),m=Qr(l)?{}:{id:"".concat(l,"-").concat(f)};return le.createElement(co,V_({},Er(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:co.parseViewBox(Qr(o)?d:x8(x8({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}wu.displayName="LabelList";function u4e(e,t){return e?e===!0?le.createElement(wu,{key:"labelList-implicit",data:t}):le.isValidElement(e)||Wr(e)?le.createElement(wu,{key:"labelList-implicit",data:t,content:e}):Wv(e)?le.createElement(wu,V_({data:t},e,{key:"labelList-implicit"})):null:null}function d4e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=bl(n,wu).map(function(o,l){return v.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=u4e(e.label,t);return[i].concat(e4e(a))}wu.renderCallByParent=d4e;function q0(e){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q0(e)}function Mk(){return Mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mk.apply(this,arguments)}function w8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w8(Object(r),!0).forEach(function(n){f4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f4e(e,t,r){return t=h4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h4e(e){var t=m4e(e,"string");return q0(t)=="symbol"?t:t+""}function m4e(e,t){if(q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p4e=function(t,r){var n=ms(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Sw=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/W_,h=u?i:i+o*f,m=Oa(r,n,d,h),g=Oa(r,n,a,h),p=u?i-o*f:i,y=Oa(r,n,d*Math.cos(f*W_),p);return{center:m,circleTangency:g,lineTangency:y,theta:f}},hX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=p4e(o,l),u=o+c,d=Oa(r,n,i,o),f=Oa(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Oa(r,n,a,o),g=Oa(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},g4e=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=ms(d-u),h=Sw({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,y=Sw({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),x=y.circleTangency,b=y.lineTangency,w=y.theta,S=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(S<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):hX({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var A=Sw({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=A.circleTangency,C=A.lineTangency,E=A.theta,R=Sw({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=R.circleTangency,T=R.lineTangency,I=R.theta,M=c?Math.abs(u-d):Math.abs(u-d)-E-I;if(M<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},v4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Z3=function(t){var r=_8(_8({},v4e),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=Zr("recharts-sector",h),g=o-i,p=ps(l,g,0,!0),y;return p>0&&Math.abs(d-f)<360?y=g4e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=hX({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),le.createElement("path",Mk({},Er(r,!0),{className:m,d:y,role:"img"}))};function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}function Rk(){return Rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rk.apply(this,arguments)}function S8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(r),!0).forEach(function(n){y4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y4e(e,t,r){return t=x4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x4e(e){var t=b4e(e,"string");return U0(t)=="symbol"?t:t+""}function b4e(e,t){if(U0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(U0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N8={curveBasisClosed:w2e,curveBasisOpen:_2e,curveBasis:b2e,curveBumpX:o2e,curveBumpY:s2e,curveLinearClosed:S2e,curveLinear:Gj,curveMonotoneX:j2e,curveMonotoneY:N2e,curveNatural:C2e,curveStep:A2e,curveStepAfter:E2e,curveStepBefore:P2e},jw=function(t){return t.x===+t.x&&t.y===+t.y},zy=function(t){return t.x},qy=function(t){return t.y},w4e=function(t,r){if(Wr(t))return t;var n="curve".concat(Vj(t));return(n==="curveMonotone"||n==="curveBump")&&r?N8["".concat(n).concat(r==="vertical"?"Y":"X")]:N8[n]||Gj},_4e=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=w4e(n,l),f=u?i.filter(function(p){return jw(p)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(p){return jw(p)}):o,g=f.map(function(p,y){return j8(j8({},p),{},{base:m[y]})});return l==="vertical"?h=mw().y(qy).x1(zy).x0(function(p){return p.base.x}):h=mw().x(zy).y1(qy).y0(function(p){return p.base.y}),h.defined(jw).curve(d),h(g)}return l==="vertical"&&Xt(o)?h=mw().y(qy).x1(zy).x0(o):Xt(o)?h=mw().x(zy).y1(qy).y0(o):h=lK().x(zy).y(qy),h.defined(jw).curve(d),h(f)},km=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?_4e(t):a;return v.createElement("path",Rk({},Er(t,!1),p_(t),{className:Zr("recharts-curve",r),d:o,ref:i}))},S4e=Object.getOwnPropertyNames,j4e=Object.getOwnPropertySymbols,N4e=Object.prototype.hasOwnProperty;function C8(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Nw(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function A8(e){return S4e(e).concat(j4e(e))}var C4e=Object.hasOwn||function(e,t){return N4e.call(e,t)};function pp(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var A4e="__v",P4e="__o",E4e="_owner",P8=Object.getOwnPropertyDescriptor,E8=Object.keys;function k4e(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function O4e(e,t){return pp(e.getTime(),t.getTime())}function T4e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function I4e(e,t){return e===t}function k8(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var D4e=pp;function M4e(e,t,r){var n=E8(e),a=n.length;if(E8(t).length!==a)return!1;for(;a-- >0;)if(!mX(e,t,r,n[a]))return!1;return!0}function Uy(e,t,r){var n=A8(e),a=n.length;if(A8(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!mX(e,t,r,i)||(o=P8(e,i),l=P8(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function R4e(e,t){return pp(e.valueOf(),t.valueOf())}function L4e(e,t){return e.source===t.source&&e.flags===t.flags}function O8(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function $4e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function F4e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function mX(e,t,r,n){return(n===E4e||n===P4e||n===A4e)&&(e.$$typeof||t.$$typeof)?!0:C4e(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var B4e="[object Arguments]",z4e="[object Boolean]",q4e="[object Date]",U4e="[object Error]",W4e="[object Map]",V4e="[object Number]",H4e="[object Object]",G4e="[object RegExp]",K4e="[object Set]",Y4e="[object String]",X4e="[object URL]",J4e=Array.isArray,T8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,I8=Object.assign,Q4e=Object.prototype.toString.call.bind(Object.prototype.toString);function Z4e(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,y){if(g===p)return!0;if(g==null||p==null)return!1;var x=typeof g;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(g,p,y):x==="function"?a(g,p,y):!1;var b=g.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(g,p,y);if(J4e(g))return t(g,p,y);if(T8!=null&&T8(g))return f(g,p,y);if(b===Date)return r(g,p,y);if(b===RegExp)return u(g,p,y);if(b===Map)return i(g,p,y);if(b===Set)return d(g,p,y);var w=Q4e(g);return w===q4e?r(g,p,y):w===G4e?u(g,p,y):w===W4e?i(g,p,y):w===K4e?d(g,p,y):w===H4e?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,y):w===X4e?h(g,p,y):w===U4e?n(g,p,y):w===B4e?l(g,p,y):w===z4e||w===V4e||w===Y4e?c(g,p,y):!1}}function eDe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Uy:k4e,areDatesEqual:O4e,areErrorsEqual:T4e,areFunctionsEqual:I4e,areMapsEqual:n?C8(k8,Uy):k8,areNumbersEqual:D4e,areObjectsEqual:n?Uy:M4e,arePrimitiveWrappersEqual:R4e,areRegExpsEqual:L4e,areSetsEqual:n?C8(O8,Uy):O8,areTypedArraysEqual:n?Uy:$4e,areUrlsEqual:F4e};if(r&&(a=I8({},a,r(a))),t){var i=Nw(a.areArraysEqual),o=Nw(a.areMapsEqual),l=Nw(a.areObjectsEqual),c=Nw(a.areSetsEqual);a=I8({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function tDe(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function rDe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var nDe=Sh();Sh({strict:!0});Sh({circular:!0});Sh({circular:!0,strict:!0});Sh({createInternalComparator:function(){return pp}});Sh({strict:!0,createInternalComparator:function(){return pp}});Sh({circular:!0,createInternalComparator:function(){return pp}});Sh({circular:!0,createInternalComparator:function(){return pp},strict:!0});function Sh(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=eDe(e),c=Z4e(l),u=n?n(c):tDe(c);return rDe({circular:r,comparator:c,createState:a,equals:u,strict:o})}function aDe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function D8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):aDe(a)};requestAnimationFrame(n)}function Lk(e){"@babel/helpers - typeof";return Lk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lk(e)}function iDe(e){return cDe(e)||lDe(e)||sDe(e)||oDe()}function oDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sDe(e,t){if(e){if(typeof e=="string")return M8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M8(e,t)}}function M8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cDe(e){if(Array.isArray(e))return e}function uDe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=iDe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){D8(a.bind(null,u),c);return}a(c),D8(a.bind(null,u));return}Lk(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function W0(e){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W0(e)}function R8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(r),!0).forEach(function(n){pX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pX(e,t,r){return t=dDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dDe(e){var t=fDe(e,"string");return W0(t)==="symbol"?t:String(t)}function fDe(e,t){if(W0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(W0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hDe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},mDe=function(t){return t},pDe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Ox=function(t,r){return Object.keys(r).reduce(function(n,a){return L8(L8({},n),{},pX({},a,t(a,r[a])))},{})},$8=function(t,r,n){return t.map(function(a){return"".concat(pDe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function gDe(e,t){return xDe(e)||yDe(e,t)||gX(e,t)||vDe()}function vDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xDe(e){if(Array.isArray(e))return e}function bDe(e){return SDe(e)||_De(e)||gX(e)||wDe()}function wDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gX(e,t){if(e){if(typeof e=="string")return $k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(e,t)}}function _De(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SDe(e){if(Array.isArray(e))return $k(e)}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H_=1e-4,vX=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},yX=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},F8=function(t,r){return function(n){var a=vX(t,r);return yX(a,n)}},jDe=function(t,r){return function(n){var a=vX(t,r),i=[].concat(bDe(a.map(function(o,l){return o*l}).slice(1)),[0]);return yX(i,n)}},B8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=gDe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=F8(a,o),h=F8(i,l),m=jDe(a,o),g=function(x){return x>1?1:x<0?0:x},p=function(x){for(var b=x>1?1:x,w=b,S=0;S<8;++S){var j=f(w)-b,A=m(w);if(Math.abs(j-b)<H_||A<H_)return h(w);w=g(w-j/A)}return h(w)};return p.isStepper=!1,p},NDe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,g=h*i,p=h+(m-g)*l/1e3,y=h*l/1e3+d;return Math.abs(y-f)<H_&&Math.abs(p)<H_?[f,0]:[y,p]};return c.isStepper=!0,c.dt=l,c},CDe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return B8(a);case"spring":return NDe();default:if(a.split("(")[0]==="cubic-bezier")return B8(a)}return typeof a=="function"?a:null};function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function z8(e){return EDe(e)||PDe(e)||xX(e)||ADe()}function ADe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EDe(e){if(Array.isArray(e))return Bk(e)}function q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q8(Object(r),!0).forEach(function(n){Fk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fk(e,t,r){return t=kDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kDe(e){var t=ODe(e,"string");return V0(t)==="symbol"?t:String(t)}function ODe(e,t){if(V0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(V0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TDe(e,t){return MDe(e)||DDe(e,t)||xX(e,t)||IDe()}function IDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(e,t){if(e){if(typeof e=="string")return Bk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bk(e,t)}}function Bk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function MDe(e){if(Array.isArray(e))return e}var G_=function(t,r,n){return t+(r-t)*n},zk=function(t){var r=t.from,n=t.to;return r!==n},RDe=function e(t,r,n){var a=Ox(function(i,o){if(zk(o)){var l=t(o.from,o.to,o.velocity),c=TDe(l,2),u=c[0],d=c[1];return jo(jo({},o),{},{from:u,velocity:d})}return o},r);return n<1?Ox(function(i,o){return zk(o)?jo(jo({},o),{},{velocity:G_(o.velocity,a[i].velocity,n),from:G_(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const LDe=function(e,t,r,n,a){var i=hDe(e,t),o=i.reduce(function(y,x){return jo(jo({},y),{},Fk({},x,[e[x],t[x]]))},{}),l=i.reduce(function(y,x){return jo(jo({},y),{},Fk({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Ox(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(zk).length},g=function(x){u||(u=x);var b=x-u,w=b/r.dt;l=RDe(r,l,w),a(jo(jo(jo({},e),t),h())),u=x,m()||(c=requestAnimationFrame(f))},p=function(x){d||(d=x);var b=(x-d)/n,w=Ox(function(j,A){return G_.apply(void 0,z8(A).concat([r(b)]))},o);if(a(jo(jo(jo({},e),t),w)),b<1)c=requestAnimationFrame(f);else{var S=Ox(function(j,A){return G_.apply(void 0,z8(A).concat([r(1)]))},o);a(jo(jo(jo({},e),t),S))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function cv(e){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cv(e)}var $De=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function FDe(e,t){if(e==null)return{};var r=BDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BDe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function eA(e){return WDe(e)||UDe(e)||qDe(e)||zDe()}function zDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qDe(e,t){if(e){if(typeof e=="string")return qk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qk(e,t)}}function UDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WDe(e){if(Array.isArray(e))return qk(e)}function qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U8(Object(r),!0).forEach(function(n){ox(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ox(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bX(n.key),n)}}function HDe(e,t,r){return t&&W8(e.prototype,t),r&&W8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bX(e){var t=GDe(e,"string");return cv(t)==="symbol"?t:String(t)}function GDe(e,t){if(cv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uk(e,t)}function Uk(e,t){return Uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uk(e,t)}function YDe(e){var t=XDe();return function(){var n=K_(e),a;if(t){var i=K_(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Wk(this,a)}}function Wk(e,t){if(t&&(cv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vk(e)}function Vk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K_(e){return K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K_(e)}var lN=function(e){KDe(r,e);var t=YDe(r);function r(n,a){var i;VDe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Vk(i)),i.changeStyle=i.changeStyle.bind(Vk(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),Wk(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Wk(i);i.state={style:c?ox({},c,u):u}}else i.state={style:{}};return i}return HDe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?ox({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(nDe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:a.to;if(this.state&&h){var y={style:c?ox({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(y)}this.runAnimation(gc(gc({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=LDe(o,l,CDe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,y,x){if(x===0)return p;var b=y.duration,w=y.easing,S=w===void 0?"ease":w,j=y.style,A=y.properties,P=y.onAnimationEnd,C=x>0?o[x-1]:y,E=A||Object.keys(j);if(typeof S=="function"||S==="spring")return[].concat(eA(p),[i.runJSAnimation.bind(i,{from:C.style,to:j,duration:b,easing:S}),b]);var R=$8(E,b,S),k=gc(gc(gc({},C.style),j),{},{transition:R});return[].concat(eA(p),[k,b,P]).filter(mDe)};return this.manager.start([c].concat(eA(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=uDe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=l?ox({},l,c):c,y=$8(Object.keys(p),o,u);g.start([d,i,gc(gc({},p),{},{transition:y}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=FDe(a,$De),u=v.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var g=m.props,p=g.style,y=p===void 0?{}:p,x=g.className,b=v.cloneElement(m,gc(gc({},c),{},{style:gc(gc({},y),d),className:x}));return b};return u===1?f(v.Children.only(i)):le.createElement("div",null,v.Children.map(i,function(h){return f(h)}))}}]),r}(v.PureComponent);lN.displayName="Animate";lN.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};lN.propTypes={from:Ir.oneOfType([Ir.object,Ir.string]),to:Ir.oneOfType([Ir.object,Ir.string]),attributeName:Ir.string,duration:Ir.number,begin:Ir.number,easing:Ir.oneOfType([Ir.string,Ir.func]),steps:Ir.arrayOf(Ir.shape({duration:Ir.number.isRequired,style:Ir.object.isRequired,easing:Ir.oneOfType([Ir.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ir.func]),properties:Ir.arrayOf("string"),onAnimationEnd:Ir.func})),children:Ir.oneOfType([Ir.node,Ir.func]),isActive:Ir.bool,canBegin:Ir.bool,onAnimationEnd:Ir.func,shouldReAnimate:Ir.bool,onAnimationStart:Ir.func,onAnimationReStart:Ir.func};const sh=lN;function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fr.apply(null,arguments)}function Y_(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hk(e,t){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Hk(e,t)}function wX(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Hk(e,t)}function H0(e){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H0(e)}function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X_.apply(this,arguments)}function JDe(e,t){return tMe(e)||eMe(e,t)||ZDe(e,t)||QDe()}function QDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZDe(e,t){if(e){if(typeof e=="string")return V8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V8(e,t)}}function V8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function tMe(e){if(Array.isArray(e))return e}function H8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H8(Object(r),!0).forEach(function(n){rMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rMe(e,t,r){return t=nMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nMe(e){var t=aMe(e,"string");return H0(t)=="symbol"?t:t+""}function aMe(e,t){if(H0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(H0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K8=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},iMe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},oMe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},e4=function(t){var r=G8(G8({},oMe),t),n=v.useRef(),a=v.useState(-1),i=JDe(a,2),o=i[0],l=i[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,y=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=Zr("recharts-rectangle",m);return b?le.createElement(sh,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(S){var j=S.width,A=S.height,P=S.x,C=S.y;return le.createElement(sh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,isActive:x,easing:g},le.createElement("path",X_({},Er(r,!0),{className:w,d:K8(P,C,j,A,h),ref:n})))}):le.createElement("path",X_({},Er(r,!0),{className:w,d:K8(c,u,d,f,h)}))},sMe=["points","className","baseLinePoints","connectNulls"];function hg(){return hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hg.apply(this,arguments)}function lMe(e,t){if(e==null)return{};var r=cMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Y8(e){return hMe(e)||fMe(e)||dMe(e)||uMe()}function uMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dMe(e,t){if(e){if(typeof e=="string")return Gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gk(e,t)}}function fMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hMe(e){if(Array.isArray(e))return Gk(e)}function Gk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var X8=function(t){return t&&t.x===+t.x&&t.y===+t.y},mMe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){X8(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),X8(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Tx=function(t,r){var n=mMe(t);r&&(n=[n.reduce(function(i,o){return[].concat(Y8(i),Y8(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},pMe=function(t,r,n){var a=Tx(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Tx(r.reverse(),n).slice(1))},gMe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=lMe(t,sMe);if(!r||!r.length)return null;var l=Zr("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=pMe(r,a,i);return le.createElement("g",{className:l},le.createElement("path",hg({},Er(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?le.createElement("path",hg({},Er(o,!0),{fill:"none",d:Tx(r,i)})):null,c?le.createElement("path",hg({},Er(o,!0),{fill:"none",d:Tx(a,i)})):null)}var d=Tx(r,i);return le.createElement("path",hg({},Er(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function Kk(){return Kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kk.apply(this,arguments)}var Kb=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=Zr("recharts-dot",i);return r===+r&&n===+n&&a===+a?v.createElement("circle",Kk({},Er(t,!1),p_(t),{className:o,cx:r,cy:n,r:a})):null};function G0(e){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G0(e)}var vMe=["x","y","top","left","width","height","className"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yk.apply(this,arguments)}function J8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yMe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(r),!0).forEach(function(n){xMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xMe(e,t,r){return t=bMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bMe(e){var t=wMe(e,"string");return G0(t)=="symbol"?t:t+""}function wMe(e,t){if(G0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(G0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Me(e,t){if(e==null)return{};var r=SMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jMe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},NMe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=_Me(t,vMe),y=yMe({x:n,y:i,top:l,left:u,width:f,height:m},p);return!Xt(n)||!Xt(i)||!Xt(f)||!Xt(m)||!Xt(l)||!Xt(u)?null:le.createElement("path",Yk({},Er(y,!0),{className:Zr("recharts-cross",g),d:jMe(n,i,f,m,l,u)}))},CMe=aN,AMe=RY,PMe=Iu;function EMe(e,t){return e&&e.length?CMe(e,PMe(t),AMe):void 0}var kMe=EMe;const OMe=zn(kMe);var TMe=aN,IMe=Iu,DMe=LY;function MMe(e,t){return e&&e.length?TMe(e,IMe(t),DMe):void 0}var RMe=MMe;const LMe=zn(RMe);var $Me=["cx","cy","angle","ticks","axisLine"],FMe=["ticks","tick","angle","tickFormatter","stroke"];function uv(e){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ix.apply(this,arguments)}function Q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q8(Object(r),!0).forEach(function(n){cN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z8(e,t){if(e==null)return{};var r=BMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SX(n.key),n)}}function qMe(e,t,r){return t&&eB(e.prototype,t),r&&eB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UMe(e,t,r){return t=J_(t),WMe(e,_X()?Reflect.construct(t,r||[],J_(e).constructor):t.apply(e,r))}function WMe(e,t){if(t&&(uv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VMe(e)}function VMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_X=function(){return!!e})()}function J_(e){return J_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J_(e)}function HMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xk(e,t)}function Xk(e,t){return Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xk(e,t)}function cN(e,t,r){return t=SX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SX(e){var t=GMe(e,"string");return uv(t)=="symbol"?t:t+""}function GMe(e,t){if(uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uN=function(e){function t(){return zMe(this,t),UMe(this,t,arguments)}return HMe(t,e),qMe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Oa(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=OMe(l,function(d){return d.coordinate||0}),u=LMe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=Z8(n,$Me),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=Oa(a,i,d[0],o),h=Oa(a,i,d[1],o),m=Fh(Fh(Fh({},Er(u,!1)),{},{fill:"none"},Er(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return le.createElement("line",Ix({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=Z8(a,FMe),f=this.getTickTextAnchor(),h=Er(d,!1),m=Er(o,!1),g=i.map(function(p,y){var x=n.getTickValueCoord(p),b=Fh(Fh(Fh(Fh({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:y},x),{},{payload:p});return le.createElement(Nn,Ix({className:Zr("recharts-polar-radius-axis-tick",dX(o)),key:"tick-".concat(p.coordinate)},Wm(n.props,p,y)),t.renderTickItem(o,b,c?c(p.value,y):p.value))});return le.createElement(Nn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:le.createElement(Nn,{className:Zr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),co.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,a):Wr(n)?o=n(a):o=le.createElement(Vm,Ix({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(v.PureComponent);cN(uN,"displayName","PolarRadiusAxis");cN(uN,"axisType","radiusAxis");cN(uN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(this,arguments)}function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(n){dN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NX(n.key),n)}}function YMe(e,t,r){return t&&rB(e.prototype,t),r&&rB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XMe(e,t,r){return t=Q_(t),JMe(e,jX()?Reflect.construct(t,r||[],Q_(e).constructor):t.apply(e,r))}function JMe(e,t){if(t&&(dv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QMe(e)}function QMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jX=function(){return!!e})()}function Q_(e){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q_(e)}function ZMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jk(e,t)}function Jk(e,t){return Jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jk(e,t)}function dN(e,t,r){return t=NX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NX(e){var t=eRe(e,"string");return dv(t)=="symbol"?t:t+""}function eRe(e,t){if(dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tRe=Math.PI/180,nB=1e-5,fN=function(e){function t(){return KMe(this,t),XMe(this,t,arguments)}return ZMe(t,e),YMe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Oa(i,o,l,n.coordinate),h=Oa(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*tRe),o;return i>nB?o=a==="outer"?"start":"end":i<-nB?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=Bh(Bh({},Er(this.props,!1)),{},{fill:"none"},Er(l,!1));if(c==="circle")return le.createElement(Kb,im({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return Oa(a,i,o,h.coordinate)});return le.createElement(gMe,im({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Er(this.props,!1),f=Er(o,!1),h=Bh(Bh({},d),{},{fill:"none"},Er(l,!1)),m=i.map(function(g,p){var y=n.getTickLineCoord(g),x=n.getTickTextAnchor(g),b=Bh(Bh(Bh({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:y.x2,y:y.y2});return le.createElement(Nn,im({className:Zr("recharts-polar-angle-axis-tick",dX(o)),key:"tick-".concat(g.coordinate)},Wm(n.props,g,p)),l&&le.createElement("line",im({className:"recharts-polar-angle-axis-tick-line"},h,y)),o&&t.renderTickItem(o,b,c?c(g.value,p):g.value))});return le.createElement(Nn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:le.createElement(Nn,{className:Zr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,a):Wr(n)?o=n(a):o=le.createElement(Vm,im({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(v.PureComponent);dN(fN,"displayName","PolarAngleAxis");dN(fN,"axisType","angleAxis");dN(fN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var rRe=TK,nRe=rRe(Object.getPrototypeOf,Object),aRe=nRe,iRe=Wd,oRe=aRe,sRe=Vd,lRe="[object Object]",cRe=Function.prototype,uRe=Object.prototype,CX=cRe.toString,dRe=uRe.hasOwnProperty,fRe=CX.call(Object);function hRe(e){if(!sRe(e)||iRe(e)!=lRe)return!1;var t=oRe(e);if(t===null)return!0;var r=dRe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&CX.call(r)==fRe}var mRe=hRe;const pRe=zn(mRe);var gRe=Wd,vRe=Vd,yRe="[object Boolean]";function xRe(e){return e===!0||e===!1||vRe(e)&&gRe(e)==yRe}var bRe=xRe;const wRe=zn(bRe);function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z_.apply(this,arguments)}function _Re(e,t){return CRe(e)||NRe(e,t)||jRe(e,t)||SRe()}function SRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jRe(e,t){if(e){if(typeof e=="string")return aB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aB(e,t)}}function aB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function CRe(e){if(Array.isArray(e))return e}function iB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iB(Object(r),!0).forEach(function(n){ARe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ARe(e,t,r){return t=PRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PRe(e){var t=ERe(e,"string");return K0(t)=="symbol"?t:t+""}function ERe(e,t){if(K0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(K0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sB=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},kRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ORe=function(t){var r=oB(oB({},kRe),t),n=v.useRef(),a=v.useState(-1),i=_Re(a,2),o=i[0],l=i[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,y=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=Zr("recharts-trapezoid",m);return x?le.createElement(sh,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:x},function(w){var S=w.upperWidth,j=w.lowerWidth,A=w.height,P=w.x,C=w.y;return le.createElement(sh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,easing:g},le.createElement("path",Z_({},Er(r,!0),{className:b,d:sB(P,C,S,j,A),ref:n})))}):le.createElement("g",null,le.createElement("path",Z_({},Er(r,!0),{className:b,d:sB(c,u,d,f,h)})))},TRe=["option","shapeType","propTransformer","activeClassName","isActive"];function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function IRe(e,t){if(e==null)return{};var r=DRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lB(Object(r),!0).forEach(function(n){MRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MRe(e,t,r){return t=RRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RRe(e){var t=LRe(e,"string");return Y0(t)=="symbol"?t:t+""}function LRe(e,t){if(Y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Re(e,t){return eS(eS({},t),e)}function FRe(e,t){return e==="symbols"}function cB(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return le.createElement(e4,r);case"trapezoid":return le.createElement(ORe,r);case"sector":return le.createElement(Z3,r);case"symbols":if(FRe(t))return le.createElement(y3,r);break;default:return null}}function BRe(e){return v.isValidElement(e)?e.props:e}function AX(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?$Re:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=IRe(e,TRe),u;if(v.isValidElement(t))u=v.cloneElement(t,eS(eS({},c),BRe(t)));else if(Wr(t))u=t(c);else if(pRe(t)&&!wRe(t)){var d=a(t,c);u=le.createElement(cB,{shapeType:r,elementProps:d})}else{var f=c;u=le.createElement(cB,{shapeType:r,elementProps:f})}return l?le.createElement(Nn,{className:o},u):u}function hN(e,t){return t!=null&&"trapezoids"in e.props}function mN(e,t){return t!=null&&"sectors"in e.props}function X0(e,t){return t!=null&&"points"in e.props}function zRe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function qRe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function URe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function WRe(e,t){var r;return hN(e,t)?r=zRe:mN(e,t)?r=qRe:X0(e,t)&&(r=URe),r}function VRe(e,t){var r;return hN(e,t)?r="trapezoids":mN(e,t)?r="sectors":X0(e,t)&&(r="points"),r}function HRe(e,t){if(hN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(mN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return X0(e,t)?t.payload:{}}function GRe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=VRe(r,t),i=HRe(r,t),o=n.filter(function(c,u){var d=Hm(i,c),f=r.props[a].filter(function(g){var p=WRe(r,t);return p(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var h2;function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function mg(){return mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mg.apply(this,arguments)}function uB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uB(Object(r),!0).forEach(function(n){Vl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EX(n.key),n)}}function YRe(e,t,r){return t&&dB(e.prototype,t),r&&dB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XRe(e,t,r){return t=tS(t),JRe(e,PX()?Reflect.construct(t,r||[],tS(e).constructor):t.apply(e,r))}function JRe(e,t){if(t&&(fv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QRe(e)}function QRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PX=function(){return!!e})()}function tS(e){return tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tS(e)}function ZRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qk(e,t)}function Qk(e,t){return Qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qk(e,t)}function Vl(e,t,r){return t=EX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=eLe(e,"string");return fv(t)=="symbol"?t:t+""}function eLe(e,t){if(fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eu=function(e){function t(r){var n;return KRe(this,t),n=XRe(this,t,[r]),Vl(n,"pieRef",null),Vl(n,"sectorRefs",[]),Vl(n,"id",fp("recharts-pie-")),Vl(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Wr(a)&&a()}),Vl(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Wr(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return ZRe(t,e),YRe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Er(this.props,!1),f=Er(o,!1),h=Er(l,!1),m=o&&o.offsetRadius||20,g=n.map(function(p,y){var x=(p.startAngle+p.endAngle)/2,b=Oa(p.cx,p.cy,p.outerRadius+m,x),w=Aa(Aa(Aa(Aa({},d),p),{},{stroke:"none"},f),{},{index:y,textAnchor:t.getTextAnchor(b.x,p.cx)},b),S=Aa(Aa(Aa(Aa({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:y,points:[Oa(p.cx,p.cy,p.outerRadius,x),b]}),j=c;return Qr(c)&&Qr(u)?j="value":Qr(c)&&(j=u),le.createElement(Nn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,w,ji(p,j)))});return le.createElement(Nn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,g=Aa(Aa({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return le.createElement(Nn,mg({ref:function(y){y&&!a.sectorRefs.includes(y)&&a.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Wm(a.props,u,d),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(d)}),le.createElement(AX,mg({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return le.createElement(sh,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,y=[],x=i&&i[0],b=x.startAngle;return i.forEach(function(w,S){var j=h&&h[S],A=S>0?xl(w,"paddingAngle",0):0;if(j){var P=Ji(j.endAngle-j.startAngle,w.endAngle-w.startAngle),C=Aa(Aa({},w),{},{startAngle:b+A,endAngle:b+P(p)+A});y.push(C),b=C.endAngle}else{var E=w.endAngle,R=w.startAngle,k=Ji(0,E-R),T=k(p),I=Aa(Aa({},w),{},{startAngle:b+A,endAngle:b+T+A});y.push(I),b=I.endAngle}}),le.createElement(Nn,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Hm(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!Xt(u)||!Xt(d)||!Xt(f)||!Xt(h))return null;var p=Zr("recharts-pie",l);return le.createElement(Nn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){n.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),co.renderCallByParent(this.props,null,!1),(!m||g)&&wu.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(le.isValidElement(n))return le.cloneElement(n,a);if(Wr(n))return n(a);var o=Zr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return le.createElement(km,mg({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(le.isValidElement(n))return le.cloneElement(n,a);var o=i;if(Wr(n)&&(o=n(a),le.isValidElement(o)))return o;var l=Zr("recharts-pie-label-text",typeof n!="boolean"&&!Wr(n)?n.className:"");return le.createElement(Vm,mg({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);h2=Eu;Vl(Eu,"displayName","Pie");Vl(Eu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Rc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Vl(Eu,"parseDeltaAngle",function(e,t){var r=ms(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Vl(Eu,"getRealPieData",function(e){var t=e.data,r=e.children,n=Er(e,!1),a=bl(r,C0);return t&&t.length?t.map(function(i,o){return Aa(Aa(Aa({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Aa(Aa({},n),i.props)}):[]});Vl(Eu,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=uX(a,i),l=n+ps(e.cx,a,a/2),c=r+ps(e.cy,i,i/2),u=ps(e.innerRadius,o,0),d=ps(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Vl(Eu,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Aa(Aa({},t.type.defaultProps),t.props):t.props,a=h2.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=h2.parseCoordinateOfPie(n,r),p=h2.parseDeltaAngle(o,l),y=Math.abs(p),x=u;Qr(u)&&Qr(f)?(Mc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Qr(u)&&(Mc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var b=a.filter(function(C){return ji(C,x,0)!==0}).length,w=(y>=360?b:b-1)*c,S=y-b*m-w,j=a.reduce(function(C,E){var R=ji(E,x,0);return C+(Xt(R)?R:0)},0),A;if(j>0){var P;A=a.map(function(C,E){var R=ji(C,x,0),k=ji(C,d,E),T=(Xt(R)?R:0)/j,I;E?I=P.endAngle+ms(p)*c*(R!==0?1:0):I=o;var M=I+ms(p)*((R!==0?m:0)+T*S),z=(I+M)/2,W=(g.innerRadius+g.outerRadius)/2,U=[{name:k,value:R,payload:C,dataKey:x,type:h}],$=Oa(g.cx,g.cy,W,z);return P=Aa(Aa(Aa({percent:T,cornerRadius:i,name:k,tooltipPayload:U,midAngle:z,middleRadius:W,tooltipPosition:$},C),g),{},{value:ji(C,x),startAngle:I,endAngle:M,payload:C,paddingAngle:ms(p)*c}),P})}return Aa(Aa({},g),{},{sectors:A,data:a})});var tLe=Math.ceil,rLe=Math.max;function nLe(e,t,r,n){for(var a=-1,i=rLe(tLe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var aLe=nLe,iLe=JK,fB=1/0,oLe=17976931348623157e292;function sLe(e){if(!e)return e===0?e:0;if(e=iLe(e),e===fB||e===-fB){var t=e<0?-1:1;return t*oLe}return e===e?e:0}var kX=sLe,lLe=aLe,cLe=Jj,tA=kX;function uLe(e){return function(t,r,n){return n&&typeof n!="number"&&cLe(t,r,n)&&(r=n=void 0),t=tA(t),r===void 0?(r=t,t=0):r=tA(r),n=n===void 0?t<r?1:-1:tA(n),lLe(t,r,n,e)}}var dLe=uLe,fLe=dLe,hLe=fLe(),mLe=hLe;const rS=zn(mLe);function J0(e){"@babel/helpers - typeof";return J0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J0(e)}function hB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hB(Object(r),!0).forEach(function(n){OX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OX(e,t,r){return t=pLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pLe(e){var t=gLe(e,"string");return J0(t)=="symbol"?t:t+""}function gLe(e,t){if(J0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(J0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vLe=["Webkit","Moz","O","ms"],yLe=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=vLe.reduce(function(i,o){return mB(mB({},i),{},OX({},o+n,r))},{});return a[t]=r,a};function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nS.apply(this,arguments)}function pB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pB(Object(r),!0).forEach(function(n){il(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IX(n.key),n)}}function bLe(e,t,r){return t&&gB(e.prototype,t),r&&gB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wLe(e,t,r){return t=aS(t),_Le(e,TX()?Reflect.construct(t,r||[],aS(e).constructor):t.apply(e,r))}function _Le(e,t){if(t&&(hv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SLe(e)}function SLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TX=function(){return!!e})()}function aS(e){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aS(e)}function jLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zk(e,t)}function Zk(e,t){return Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zk(e,t)}function il(e,t,r){return t=IX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){var t=NLe(e,"string");return hv(t)=="symbol"?t:t+""}function NLe(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CLe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Ex().domain(rS(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},vB=function(t){return t.changedTouches&&!!t.changedTouches.length},mv=function(e){function t(r){var n;return xLe(this,t),n=wLe(this,t,[r]),il(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),il(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),il(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),il(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),il(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),il(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),il(n,"handleSlideDragStart",function(a){var i=vB(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return jLe(t,e),bLe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=ji(i[n],l,n);return Wr(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var y=this.getIndex({startX:o+p,endX:l+p});(y.startIndex!==h||y.endIndex!==m)&&g&&g(y),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=vB(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,y=d.data,x={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),x[o]=u+b;var w=this.getIndex(x),S=w.startIndex,j=w.endIndex,A=function(){var C=y.length-1;return o==="startX"&&(l>c?S%p===0:j%p===0)||l<c&&j===C||o==="endX"&&(l>c?j%p===0:S%p===0)||l>c&&j===C};this.setState(il(il({},o,u+b),"brushMoveStartX",n.pageX),function(){g&&A()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(il({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return le.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=v.Children.only(u);return f?le.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,y=c.endIndex,x=Math.max(n,this.props.x),b=rA(rA({},Er(this.props,!1)),{},{x,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[y])===null||o===void 0?void 0:o.name);return le.createElement(Nn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return le.createElement(Nn,{className:"recharts-brush-texts"},le.createElement(Vm,nS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),le.createElement(Vm,nS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,y=h.isSlideMoving,x=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Xt(l)||!Xt(c)||!Xt(u)||!Xt(d)||u<=0||d<=0)return null;var w=Zr("recharts-brush",i),S=le.Children.count(o)===1,j=yLe("userSelect","none");return le.createElement(Nn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||y||x||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return le.createElement(le.Fragment,null,le.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),le.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),le.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return le.isValidElement(n)?i=le.cloneElement(n,a):Wr(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return rA({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?CLe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(v.PureComponent);il(mv,"displayName","Brush");il(mv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ALe=N3;function PLe(e,t){var r;return ALe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var ELe=PLe,kLe=jK,OLe=Iu,TLe=ELe,ILe=Ws,DLe=Jj;function MLe(e,t,r){var n=ILe(e)?kLe:TLe;return r&&DLe(e,t,r)&&(t=void 0),n(e,OLe(t))}var RLe=MLe;const LLe=zn(RLe);var _u=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},yB=HK;function $Le(e,t,r){t=="__proto__"&&yB?yB(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var FLe=$Le,BLe=FLe,zLe=WK,qLe=Iu;function ULe(e,t){var r={};return t=qLe(t),zLe(e,function(n,a,i){BLe(r,a,t(n,a,i))}),r}var WLe=ULe;const VLe=zn(WLe);function HLe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var GLe=HLe,KLe=N3;function YLe(e,t){var r=!0;return KLe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var XLe=YLe,JLe=GLe,QLe=XLe,ZLe=Iu,e6e=Ws,t6e=Jj;function r6e(e,t,r){var n=e6e(e)?JLe:QLe;return r&&t6e(e,t,r)&&(t=void 0),n(e,ZLe(t))}var n6e=r6e;const DX=zn(n6e);var a6e=["x","y"];function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eO.apply(this,arguments)}function xB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(r),!0).forEach(function(n){i6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i6e(e,t,r){return t=o6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o6e(e){var t=s6e(e,"string");return Q0(t)=="symbol"?t:t+""}function s6e(e,t){if(Q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l6e(e,t){if(e==null)return{};var r=c6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function u6e(e,t){var r=e.x,n=e.y,a=l6e(e,a6e),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Wy(Wy(Wy(Wy(Wy({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function bB(e){return le.createElement(AX,eO({shapeType:"rectangle",propTransformer:u6e,activeClassName:"recharts-active-bar"},e))}var d6e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Xt(n)||H1e(n);return i?t(n,a):(i||oh(!1),r)}},f6e=["value","background"],MX;function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function h6e(e,t){if(e==null)return{};var r=m6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iS(){return iS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iS.apply(this,arguments)}function wB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(r),!0).forEach(function(n){Ef(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LX(n.key),n)}}function g6e(e,t,r){return t&&_B(e.prototype,t),r&&_B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v6e(e,t,r){return t=oS(t),y6e(e,RX()?Reflect.construct(t,r||[],oS(e).constructor):t.apply(e,r))}function y6e(e,t){if(t&&(pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x6e(e)}function x6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RX=function(){return!!e})()}function oS(e){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oS(e)}function b6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tO(e,t)}function tO(e,t){return tO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tO(e,t)}function Ef(e,t,r){return t=LX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LX(e){var t=w6e(e,"string");return pv(t)=="symbol"?t:t+""}function w6e(e,t){if(pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gp=function(e){function t(){var r;p6e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=v6e(this,t,[].concat(a)),Ef(r,"state",{isAnimationFinished:!1}),Ef(r,"id",fp("recharts-bar-")),Ef(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Ef(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return b6e(t,e),g6e(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Er(this.props,!1);return n&&n.map(function(f,h){var m=h===c,g=m?u:o,p=ki(ki(ki({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return le.createElement(Nn,iS({className:"recharts-bar-rectangle"},Wm(a.props,f,h),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(h)}),le.createElement(bB,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return le.createElement(sh,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(y,x){var b=h&&h[x];if(b){var w=Ji(b.x,y.x),S=Ji(b.y,y.y),j=Ji(b.width,y.width),A=Ji(b.height,y.height);return ki(ki({},y),{},{x:w(g),y:S(g),width:j(g),height:A(g)})}if(o==="horizontal"){var P=Ji(0,y.height),C=P(g);return ki(ki({},y),{},{y:y.y+y.height-C,height:C})}var E=Ji(0,y.width),R=E(g);return ki(ki({},y),{},{width:R})});return le.createElement(Nn,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Hm(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Er(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=h6e(u,f6e);if(!f)return null;var m=ki(ki(ki(ki(ki({},h),{},{fill:"#eee"},f),c),Wm(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return le.createElement(bB,iS({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=bl(d,Gb);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,x){var b=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:b,errorVal:ji(y,x)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return le.createElement(Nn,g,f.map(function(p){return le.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,x=Zr("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,S=b||w,j=Qr(p)?this.id:p;return le.createElement(Nn,{className:x},b||w?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(j)},le.createElement("rect",{x:b?u:u-f/2,y:w?d:d-h/2,width:b?f:f*2,height:w?h:h*2}))):null,le.createElement(Nn,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,j),(!m||y)&&wu.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(v.PureComponent);MX=gp;Ef(gp,"displayName","Bar");Ef(gp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Rc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ef(gp,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=s3e(n,r);if(!m)return null;var g=t.layout,p=r.type.defaultProps,y=p!==void 0?ki(ki({},p),r.props):r.props,x=y.dataKey,b=y.children,w=y.minPointSize,S=g==="horizontal"?o:i,j=u?S.scale.domain():null,A=m3e({numericAxis:S}),P=bl(b,C0),C=f.map(function(E,R){var k,T,I,M,z,W;u?k=l3e(u[d+R],j):(k=ji(E,x),Array.isArray(k)||(k=[A,k]));var U=d6e(w,MX.defaultProps.minPointSize)(k[1],R);if(g==="horizontal"){var $,G=[o.scale(k[0]),o.scale(k[1])],me=G[0],de=G[1];T=u8({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:E,index:R}),I=($=de??me)!==null&&$!==void 0?$:void 0,M=m.size;var L=me-de;if(z=Number.isNaN(L)?0:L,W={x:T,y:o.y,width:M,height:o.height},Math.abs(U)>0&&Math.abs(z)<Math.abs(U)){var B=ms(z||U)*(Math.abs(U)-Math.abs(z));I-=B,z+=B}}else{var X=[i.scale(k[0]),i.scale(k[1])],q=X[0],Y=X[1];if(T=q,I=u8({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:E,index:R}),M=Y-q,z=m.size,W={x:i.x,y:I,width:i.width,height:z},Math.abs(U)>0&&Math.abs(M)<Math.abs(U)){var Z=ms(M||U)*(Math.abs(U)-Math.abs(M));M+=Z}}return ki(ki(ki({},E),{},{x:T,y:I,width:M,height:z,value:u?k:k[1],payload:E,background:W},P&&P[R]&&P[R].props),{},{tooltipPayload:[lX(r,E)],tooltipPosition:{x:T+M/2,y:I+z/2}})});return ki({data:C,layout:g},h)});function Z0(e){"@babel/helpers - typeof";return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z0(e)}function _6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$X(n.key),n)}}function S6e(e,t,r){return t&&SB(e.prototype,t),r&&SB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(r),!0).forEach(function(n){pN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pN(e,t,r){return t=$X(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $X(e){var t=j6e(e,"string");return Z0(t)=="symbol"?t:t+""}function j6e(e,t){if(Z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t4=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!ll(u,gp);return d.reduce(function(m,g){var p=r[g],y=p.orientation,x=p.domain,b=p.padding,w=b===void 0?{}:b,S=p.mirror,j=p.reversed,A="".concat(y).concat(S?"Mirror":""),P,C,E,R,k;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var T=x[1]-x[0],I=1/0,M=p.categoricalDomain.sort(Y1e);if(M.forEach(function(X,q){q>0&&(I=Math.min((X||0)-(M[q-1]||0),I))}),Number.isFinite(I)){var z=I/T,W=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(P=z*W/2),p.padding==="no-gap"){var U=ps(t.barCategoryGap,z*W),$=z*W/2;P=$-U-($-U)/W*U}}}a==="xAxis"?C=[n.left+(w.left||0)+(P||0),n.left+n.width-(w.right||0)-(P||0)]:a==="yAxis"?C=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(P||0),n.top+n.height-(w.bottom||0)-(P||0)]:C=p.range,j&&(C=[C[1],C[0]]);var G=aX(p,i,h),me=G.scale,de=G.realScaleType;me.domain(x).range(C),iX(me);var L=oX(me,jc(jc({},p),{},{realScaleType:de}));a==="xAxis"?(k=y==="top"&&!S||y==="bottom"&&S,E=n.left,R=f[A]-k*p.height):a==="yAxis"&&(k=y==="left"&&!S||y==="right"&&S,E=f[A]-k*p.width,R=n.top);var B=jc(jc(jc({},p),L),{},{realScaleType:de,x:E,y:R,scale:me,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return B.bandSize=U_(B,L),!p.hide&&a==="xAxis"?f[A]+=(k?-1:1)*B.height:p.hide||(f[A]+=(k?-1:1)*B.width),jc(jc({},m),{},pN({},g,B))},{})},FX=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},N6e=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return FX({x:r,y:n},{x:a,y:i})},BX=function(){function e(t){_6e(this,e),this.scale=t}return S6e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();pN(BX,"EPS",1e-4);var r4=function(t){var r=Object.keys(t).reduce(function(n,a){return jc(jc({},n),{},pN({},a,BX.create(t[a])))},{});return jc(jc({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return VLe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return DX(a,function(i,o){return r[o].isInRange(i)})}})};function C6e(e){return(e%180+180)%180}var A6e=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=C6e(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},P6e=Iu,E6e=qb,k6e=Yj;function O6e(e){return function(t,r,n){var a=Object(t);if(!E6e(t)){var i=P6e(r);t=k6e(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var T6e=O6e,I6e=kX;function D6e(e){var t=I6e(e),r=t%1;return t===t?r?t-r:t:0}var M6e=D6e,R6e=$K,L6e=Iu,$6e=M6e,F6e=Math.max;function B6e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:$6e(r);return a<0&&(a=F6e(n+a,0)),R6e(e,L6e(t),a)}var z6e=B6e,q6e=T6e,U6e=z6e,W6e=q6e(U6e),V6e=W6e;const H6e=zn(V6e);var G6e=Xbe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),n4=v.createContext(void 0),a4=v.createContext(void 0),zX=v.createContext(void 0),qX=v.createContext({}),UX=v.createContext(void 0),WX=v.createContext(0),VX=v.createContext(0),NB=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=G6e(i);return le.createElement(n4.Provider,{value:n},le.createElement(a4.Provider,{value:a},le.createElement(qX.Provider,{value:i},le.createElement(zX.Provider,{value:d},le.createElement(UX.Provider,{value:o},le.createElement(WX.Provider,{value:u},le.createElement(VX.Provider,{value:c},l)))))))},K6e=function(){return v.useContext(UX)},HX=function(t){var r=v.useContext(n4);r==null&&oh(!1);var n=r[t];return n==null&&oh(!1),n},Y6e=function(){var t=v.useContext(n4);return _f(t)},X6e=function(){var t=v.useContext(a4),r=H6e(t,function(n){return DX(n.domain,Number.isFinite)});return r||_f(t)},GX=function(t){var r=v.useContext(a4);r==null&&oh(!1);var n=r[t];return n==null&&oh(!1),n},J6e=function(){var t=v.useContext(zX);return t},Q6e=function(){return v.useContext(qX)},i4=function(){return v.useContext(VX)},o4=function(){return v.useContext(WX)};function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function Z6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YX(n.key),n)}}function e$e(e,t,r){return t&&CB(e.prototype,t),r&&CB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t$e(e,t,r){return t=sS(t),r$e(e,KX()?Reflect.construct(t,r||[],sS(e).constructor):t.apply(e,r))}function r$e(e,t){if(t&&(gv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n$e(e)}function n$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KX=function(){return!!e})()}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sS(e)}function a$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rO(e,t)}function rO(e,t){return rO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rO(e,t)}function AB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AB(Object(r),!0).forEach(function(n){s4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s4(e,t,r){return t=YX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YX(e){var t=i$e(e,"string");return gv(t)=="symbol"?t:t+""}function i$e(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o$e(e,t){return u$e(e)||c$e(e,t)||l$e(e,t)||s$e()}function s$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l$e(e,t){if(e){if(typeof e=="string")return EB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EB(e,t)}}function EB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c$e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function u$e(e){if(Array.isArray(e))return e}function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nO.apply(this,arguments)}var d$e=function(t,r){var n;return le.isValidElement(t)?n=le.cloneElement(t,r):Wr(t)?n=t(r):n=le.createElement("line",nO({},r,{className:"recharts-reference-line-line"})),n},f$e=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var g=u.y,p=t.y.apply(g,{position:o});if(_u(u,"discard")&&!t.y.isInRange(p))return null;var y=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?y.reverse():y}if(r){var x=u.x,b=t.x.apply(x,{position:o});if(_u(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?w.reverse():w}if(a){var S=u.segment,j=S.map(function(A){return t.apply(A,{position:o})});return _u(u,"discard")&&LLe(j,function(A){return!t.isInRange(A)})?null:j}return null};function h$e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=K6e(),d=HX(a),f=GX(i),h=J6e();if(!u||!h)return null;Mc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=r4({x:d.scale,y:f.scale}),g=eo(t),p=eo(r),y=n&&n.length===2,x=f$e(m,g,p,y,h,e.position,d.orientation,f.orientation,e);if(!x)return null;var b=o$e(x,2),w=b[0],S=w.x,j=w.y,A=b[1],P=A.x,C=A.y,E=_u(e,"hidden")?"url(#".concat(u,")"):void 0,R=PB(PB({clipPath:E},Er(e,!0)),{},{x1:S,y1:j,x2:P,y2:C});return le.createElement(Nn,{className:Zr("recharts-reference-line",l)},d$e(o,R),co.renderCallByParent(e,N6e({x1:S,y1:j,x2:P,y2:C})))}var l4=function(e){function t(){return Z6e(this,t),t$e(this,t,arguments)}return a$e(t,e),e$e(t,[{key:"render",value:function(){return le.createElement(h$e,this.props)}}])}(le.Component);s4(l4,"displayName","ReferenceLine");s4(l4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aO.apply(this,arguments)}function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function OB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(n){gN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JX(n.key),n)}}function p$e(e,t,r){return t&&TB(e.prototype,t),r&&TB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g$e(e,t,r){return t=lS(t),v$e(e,XX()?Reflect.construct(t,r||[],lS(e).constructor):t.apply(e,r))}function v$e(e,t){if(t&&(vv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y$e(e)}function y$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XX=function(){return!!e})()}function lS(e){return lS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lS(e)}function x$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iO(e,t)}function iO(e,t){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iO(e,t)}function gN(e,t,r){return t=JX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JX(e){var t=b$e(e,"string");return vv(t)=="symbol"?t:t+""}function b$e(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w$e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=r4({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return _u(t,"discard")&&!o.isInRange(l)?null:l},vN=function(e){function t(){return m$e(this,t),g$e(this,t,arguments)}return x$e(t,e),p$e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=eo(a),d=eo(i);if(Mc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=w$e(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,y=g.className,x=_u(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=OB(OB({clipPath:x},Er(this.props,!0)),{},{cx:h,cy:m});return le.createElement(Nn,{className:Zr("recharts-reference-dot",y)},t.renderDot(p,b),co.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(le.Component);gN(vN,"displayName","ReferenceDot");gN(vN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gN(vN,"renderDot",function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):Wr(e)?r=e(t):r=le.createElement(Kb,aO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oO.apply(this,arguments)}function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function IB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IB(Object(r),!0).forEach(function(n){yN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZX(n.key),n)}}function S$e(e,t,r){return t&&MB(e.prototype,t),r&&MB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j$e(e,t,r){return t=cS(t),N$e(e,QX()?Reflect.construct(t,r||[],cS(e).constructor):t.apply(e,r))}function N$e(e,t){if(t&&(yv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C$e(e)}function C$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QX=function(){return!!e})()}function cS(e){return cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cS(e)}function A$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sO(e,t)}function sO(e,t){return sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sO(e,t)}function yN(e,t,r){return t=ZX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZX(e){var t=P$e(e,"string");return yv(t)=="symbol"?t:t+""}function P$e(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E$e=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=r4({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return _u(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:FX(m,g)},xN=function(e){function t(){return _$e(this,t),j$e(this,t,arguments)}return A$e(t,e),S$e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Mc(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=eo(a),h=eo(i),m=eo(o),g=eo(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var y=E$e(f,h,m,g,this.props);if(!y&&!p)return null;var x=_u(this.props,"hidden")?"url(#".concat(d,")"):void 0;return le.createElement(Nn,{className:Zr("recharts-reference-area",c)},t.renderRect(p,DB(DB({clipPath:x},Er(this.props,!0)),y)),co.renderCallByParent(this.props,y))}}])}(le.Component);yN(xN,"displayName","ReferenceArea");yN(xN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});yN(xN,"renderRect",function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):Wr(e)?r=e(t):r=le.createElement(e4,oO({},t,{className:"recharts-reference-area-rect"})),r});function eJ(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)n.push(e[a]);else return;return n}function k$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return A6e(n,r)}function O$e(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function uS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function T$e(e,t){return eJ(e,t+1)}function I$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=n?.[c];if(g===void 0)return{v:eJ(n,u)};var p=c,y,x=function(){return y===void 0&&(y=r(g,p)),y},b=g.coordinate,w=c===0||uS(e,b,x,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function eb(e){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eb(e)}function RB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RB(Object(r),!0).forEach(function(n){D$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D$e(e,t,r){return t=M$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M$e(e){var t=R$e(e,"string");return eb(t)=="symbol"?t:t+""}function R$e(e,t){if(eb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(eb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===o-1){var y=e*(m.coordinate+e*p()/2-c);i[h]=m=Yo(Yo({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=Yo(Yo({},m),{},{tickCoord:m.coordinate});var x=uS(e,m.tickCoord,p,l,c);x&&(c=m.tickCoord-e*(p()/2+a),i[h]=Yo(Yo({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function $$e(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Yo(Yo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=uS(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Yo(Yo({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(b){var w=o[b],S,j=function(){return S===void 0&&(S=r(w,b)),S};if(b===0){var A=e*(w.coordinate-e*j()/2-c);o[b]=w=Yo(Yo({},w),{},{tickCoord:A<0?w.coordinate-A*e:w.coordinate})}else o[b]=w=Yo(Yo({},w),{},{tickCoord:w.coordinate});var P=uS(e,w.tickCoord,j,c,u);P&&(c=w.tickCoord+e*(j()/2+a),o[b]=Yo(Yo({},w),{},{isShow:!0}))},y=0;y<g;y++)p(y);return o}function c4(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Xt(c)||Rc.isSsr)return T$e(a,typeof c=="number"&&Xt(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Px(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(w,S){var j=Wr(u)?u(w.value,S):w.value;return m==="width"?k$e(Px(j,{fontSize:t,letterSpacing:r}),g,f):Px(j,{fontSize:t,letterSpacing:r})[m]},y=a.length>=2?ms(a[1].coordinate-a[0].coordinate):1,x=O$e(i,y,m);return c==="equidistantPreserveStart"?I$e(y,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=$$e(y,x,p,a,o,c==="preserveStartEnd"):h=L$e(y,x,p,a,o),h.filter(function(b){return b.isShow}))}var F$e=["viewBox"],B$e=["viewBox"],z$e=["ticks"];function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}function pg(){return pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pg.apply(this,arguments)}function LB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(r),!0).forEach(function(n){u4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nA(e,t){if(e==null)return{};var r=q$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function U$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rJ(n.key),n)}}function W$e(e,t,r){return t&&$B(e.prototype,t),r&&$B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V$e(e,t,r){return t=dS(t),H$e(e,tJ()?Reflect.construct(t,r||[],dS(e).constructor):t.apply(e,r))}function H$e(e,t){if(t&&(xv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G$e(e)}function G$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tJ=function(){return!!e})()}function dS(e){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dS(e)}function K$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lO(e,t)}function lO(e,t){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lO(e,t)}function u4(e,t,r){return t=rJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rJ(e){var t=Y$e(e,"string");return xv(t)=="symbol"?t:t+""}function Y$e(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ty=function(e){function t(r){var n;return U$e(this,t),n=V$e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return K$e(t,e),W$e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=nA(n,F$e),l=this.props,c=l.viewBox,u=nA(l,B$e);return!Pg(i,c)||!Pg(o,u)||!Pg(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,p,y,x,b,w=f?-1:1,S=n.tickSize||d,j=Xt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,y=o+ +!f*c,p=y-w*S,b=p-w*h,x=j;break;case"left":p=y=n.coordinate,g=i+ +!f*l,m=g-w*S,x=m-w*h,b=j;break;case"right":p=y=n.coordinate,g=i+ +f*l,m=g+w*S,x=m+w*h,b=j;break;default:m=g=n.coordinate,y=o+ +f*c,p=y+w*S,b=p+w*h,x=j;break}return{line:{x1:m,y1:p,x2:g,y2:y},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Wi(Wi(Wi({},Er(this.props,!1)),Er(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Wi(Wi({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Wi(Wi({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return le.createElement("line",pg({},f,{className:Zr("recharts-cartesian-axis-line",xl(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=c4(Wi(Wi({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=Er(this.props,!1),x=Er(d,!1),b=Wi(Wi({},y),{},{fill:"none"},Er(c,!1)),w=m.map(function(S,j){var A=o.getTickLineCoord(S),P=A.line,C=A.tick,E=Wi(Wi(Wi(Wi({textAnchor:g,verticalAnchor:p},y),{},{stroke:"none",fill:u},x),C),{},{index:j,payload:S,visibleTicksCount:m.length,tickFormatter:f});return le.createElement(Nn,pg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Wm(o.props,S,j)),c&&le.createElement("line",pg({},b,P,{className:Zr("recharts-cartesian-axis-tick-line",xl(c,"className"))})),d&&t.renderTickItem(d,E,"".concat(Wr(f)?f(S.value,j):S.value).concat(h||"")))});return le.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=nA(f,z$e),g=h;return Wr(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:le.createElement(Nn,{className:Zr("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),co.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=Zr(a.className,"recharts-cartesian-axis-tick-value");return le.isValidElement(n)?o=le.cloneElement(n,Wi(Wi({},a),{},{className:l})):Wr(n)?o=n(Wi(Wi({},a),{},{className:l})):o=le.createElement(Vm,pg({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(v.Component);u4(ty,"displayName","CartesianAxis");u4(ty,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var X$e=["x1","y1","x2","y2","key"],J$e=["offset"];function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function FB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(r),!0).forEach(function(n){Q$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q$e(e,t,r){return t=Z$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z$e(e){var t=eFe(e,"string");return Km(t)=="symbol"?t:t+""}function eFe(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Km(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gm.apply(this,arguments)}function BB(e,t){if(e==null)return{};var r=tFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var rFe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return le.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function nJ(e,t){var r;if(le.isValidElement(e))r=le.cloneElement(e,t);else if(Wr(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=BB(t,X$e),u=Er(c,!1);u.offset;var d=BB(u,J$e);r=le.createElement("line",gm({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function nFe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Qo(Qo({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return nJ(a,u)});return le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function aFe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Qo(Qo({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return nJ(a,u)});return le.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function iFe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+o-h:d[m+1]-h;if(p<=0)return null;var y=m%t.length;return le.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function oFe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+l-h:d[m+1]-h;if(p<=0)return null;var y=m%n.length;return le.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:p,height:c,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var sFe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return nX(c4(Qo(Qo(Qo({},ty.defaultProps),n),{},{ticks:ud(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},lFe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return nX(c4(Qo(Qo(Qo({},ty.defaultProps),n),{},{ticks:ud(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Rp={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function cO(e){var t,r,n,a,i,o,l=i4(),c=o4(),u=Q6e(),d=Qo(Qo({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Rp.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Rp.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Rp.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Rp.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Rp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Rp.verticalFill,x:Xt(e.x)?e.x:u.left,y:Xt(e.y)?e.y:u.top,width:Xt(e.width)?e.width:u.width,height:Xt(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,y=d.horizontalValues,x=d.verticalValues,b=Y6e(),w=X6e();if(!Xt(m)||m<=0||!Xt(g)||g<=0||!Xt(f)||f!==+f||!Xt(h)||h!==+h)return null;var S=d.verticalCoordinatesGenerator||sFe,j=d.horizontalCoordinatesGenerator||lFe,A=d.horizontalPoints,P=d.verticalPoints;if((!A||!A.length)&&Wr(j)){var C=y&&y.length,E=j({yAxis:w?Qo(Qo({},w),{},{ticks:C?y:w.ticks}):void 0,width:l,height:c,offset:u},C?!0:p);Mc(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Km(E),"]")),Array.isArray(E)&&(A=E)}if((!P||!P.length)&&Wr(S)){var R=x&&x.length,k=S({xAxis:b?Qo(Qo({},b),{},{ticks:R?x:b.ticks}):void 0,width:l,height:c,offset:u},R?!0:p);Mc(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Km(k),"]")),Array.isArray(k)&&(P=k)}return le.createElement("g",{className:"recharts-cartesian-grid"},le.createElement(rFe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),le.createElement(nFe,gm({},d,{offset:u,horizontalPoints:A,xAxis:b,yAxis:w})),le.createElement(aFe,gm({},d,{offset:u,verticalPoints:P,xAxis:b,yAxis:w})),le.createElement(iFe,gm({},d,{horizontalPoints:A})),le.createElement(oFe,gm({},d,{verticalPoints:P})))}cO.displayName="CartesianGrid";var cFe=["type","layout","connectNulls","ref"],uFe=["key"];function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}function zB(e,t){if(e==null)return{};var r=dFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dx.apply(this,arguments)}function qB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(r),!0).forEach(function(n){Nc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lp(e){return pFe(e)||mFe(e)||hFe(e)||fFe()}function fFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hFe(e,t){if(e){if(typeof e=="string")return uO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uO(e,t)}}function mFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pFe(e){if(Array.isArray(e))return uO(e)}function uO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iJ(n.key),n)}}function vFe(e,t,r){return t&&UB(e.prototype,t),r&&UB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yFe(e,t,r){return t=fS(t),xFe(e,aJ()?Reflect.construct(t,r||[],fS(e).constructor):t.apply(e,r))}function xFe(e,t){if(t&&(bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bFe(e)}function bFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aJ=function(){return!!e})()}function fS(e){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fS(e)}function wFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}function dO(e,t){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dO(e,t)}function Nc(e,t,r){return t=iJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iJ(e){var t=_Fe(e,"string");return bv(t)=="symbol"?t:t+""}function _Fe(e,t){if(bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yb=function(e){function t(){var r;gFe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=yFe(this,t,[].concat(a)),Nc(r,"state",{isAnimationFinished:!0,totalLength:0}),Nc(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Nc(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(x,b){return x+b});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>f){m=[].concat(Lp(c.slice(0,g)),[f-p]);break}var y=m.length%2===0?[0,h]:[h];return[].concat(Lp(t.repeat(c,d)),Lp(m),y).map(function(x){return"".concat(x,"px")}).join(", ")}),Nc(r,"id",fp("recharts-line-")),Nc(r,"pathRef",function(o){r.mainCurve=o}),Nc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Nc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return wFe(t,e),vFe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=bl(d,Gb);if(!f)return null;var h=function(p,y){return{x:p.x,y:p.y,value:p.value,errorVal:ji(p.payload,y)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return le.createElement(Nn,m,f.map(function(g){return le.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Er(this.props,!1),h=Er(c,!0),m=u.map(function(p,y){var x=nl(nl(nl({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,x)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return le.createElement(Nn,Dx({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=zB(l,cFe),h=nl(nl(nl({},Er(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return le.createElement(km,Dx({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,y=o.height,x=this.state,b=x.prevPoints,w=x.totalLength;return le.createElement(sh,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var j=S.t;if(b){var A=b.length/l.length,P=l.map(function(T,I){var M=Math.floor(I*A);if(b[M]){var z=b[M],W=Ji(z.x,T.x),U=Ji(z.y,T.y);return nl(nl({},T),{},{x:W(j),y:U(j)})}if(g){var $=Ji(p*2,T.x),G=Ji(y/2,T.y);return nl(nl({},T),{},{x:$(j),y:G(j)})}return nl(nl({},T),{},{x:T.x,y:T.y})});return i.renderCurveStatically(P,n,a)}var C=Ji(0,w),E=C(j),R;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(T){return parseFloat(T)});R=i.getStrokeDasharray(E,w,k)}else R=i.generateSimpleStrokeDasharray(w,E);return i.renderCurveStatically(l,n,a,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Hm(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,g=a.height,p=a.isAnimationActive,y=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=Zr("recharts-line",c),S=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,A=S||j,P=Qr(y)?this.id:y,C=(n=Er(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},E=C.r,R=E===void 0?3:E,k=C.strokeWidth,T=k===void 0?2:k,I=YG(o)?o:{},M=I.clipDot,z=M===void 0?!0:M,W=R*2+T;return le.createElement(Nn,{className:w},S||j?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(P)},le.createElement("rect",{x:S?h:h-m/2,y:j?f:f-g/2,width:S?m:m*2,height:j?g:g*2})),!z&&le.createElement("clipPath",{id:"clipPath-dots-".concat(P)},le.createElement("rect",{x:h-W/2,y:f-W/2,width:m+W,height:g+W}))):null,!b&&this.renderCurve(A,P),this.renderErrorBar(A,P),(b||o)&&this.renderDots(A,z,P),(!p||x)&&wu.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Lp(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(Lp(o),Lp(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(le.isValidElement(n))i=le.cloneElement(n,a);else if(Wr(n))i=n(a);else{var o=a.key,l=zB(a,uFe),c=Zr("recharts-line-dot",typeof n!="boolean"?n.className:"");i=le.createElement(Kb,Dx({key:o},l,{className:c}))}return i}}])}(v.PureComponent);Nc(Yb,"displayName","Line");Nc(Yb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Rc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Nc(Yb,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var g=ji(h,o);return d==="horizontal"?{x:q_({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:Qr(g)?null:n.scale(g),value:g,payload:h}:{x:Qr(g)?null:r.scale(g),y:q_({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:g,payload:h}});return nl({points:f,layout:d},u)});var SFe=["layout","type","stroke","connectNulls","isRange","ref"],jFe=["key"],oJ;function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function sJ(e,t){if(e==null)return{};var r=NFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vm.apply(this,arguments)}function WB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WB(Object(r),!0).forEach(function(n){fu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cJ(n.key),n)}}function AFe(e,t,r){return t&&VB(e.prototype,t),r&&VB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function PFe(e,t,r){return t=hS(t),EFe(e,lJ()?Reflect.construct(t,r||[],hS(e).constructor):t.apply(e,r))}function EFe(e,t){if(t&&(wv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kFe(e)}function kFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lJ=function(){return!!e})()}function hS(e){return hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hS(e)}function OFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fO(e,t)}function fO(e,t){return fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fO(e,t)}function fu(e,t,r){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJ(e){var t=TFe(e,"string");return wv(t)=="symbol"?t:t+""}function TFe(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jh=function(e){function t(){var r;CFe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=PFe(this,t,[].concat(a)),fu(r,"state",{isAnimationFinished:!0}),fu(r,"id",fp("recharts-area-")),fu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Wr(o)&&o()}),fu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Wr(o)&&o()}),r}return OFe(t,e),AFe(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=Er(this.props,!1),m=Er(u,!0),g=d.map(function(y,x){var b=hf(hf(hf({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:d});return t.renderDotItem(u,b)}),p={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return le.createElement(Nn,vm({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=Pf(o.map(function(h){return h.y||0}));return Xt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Pf(i.map(function(h){return h.y||0})),f)),Xt(f)?le.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=Pf(o.map(function(h){return h.x||0}));return Xt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Pf(i.map(function(h){return h.x||0})),f)),Xt(f)?le.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=sJ(l,SFe);return le.createElement(Nn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},le.createElement(km,vm({},Er(m,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&le.createElement(km,vm({},Er(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&le.createElement(km,vm({},Er(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=this.state,p=g.prevPoints,y=g.prevBaseLine;return le.createElement(sh,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t;if(p){var w=p.length/l.length,S=l.map(function(C,E){var R=Math.floor(E*w);if(p[R]){var k=p[R],T=Ji(k.x,C.x),I=Ji(k.y,C.y);return hf(hf({},C),{},{x:T(b),y:I(b)})}return C}),j;if(Xt(c)&&typeof c=="number"){var A=Ji(y,c);j=A(b)}else if(Qr(c)||Kv(c)){var P=Ji(y,0);j=P(b)}else j=c.map(function(C,E){var R=Math.floor(E*w);if(y[R]){var k=y[R],T=Ji(k.x,C.x),I=Ji(k.y,C.y);return hf(hf({},C),{},{x:T(b),y:I(b)})}return C});return i.renderAreaStatically(S,j,n,a)}return le.createElement(Nn,null,le.createElement("defs",null,le.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),le.createElement(Nn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!Hm(d,o)||!Hm(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,g=a.height,p=a.isAnimationActive,y=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=Zr("recharts-area",c),S=f&&f.allowDataOverflow,j=h&&h.allowDataOverflow,A=S||j,P=Qr(y)?this.id:y,C=(n=Er(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},E=C.r,R=E===void 0?3:E,k=C.strokeWidth,T=k===void 0?2:k,I=YG(o)?o:{},M=I.clipDot,z=M===void 0?!0:M,W=R*2+T;return le.createElement(Nn,{className:w},S||j?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(P)},le.createElement("rect",{x:S?d:d-m/2,y:j?u:u-g/2,width:S?m:m*2,height:j?g:g*2})),!z&&le.createElement("clipPath",{id:"clipPath-dots-".concat(P)},le.createElement("rect",{x:d-W/2,y:u-W/2,width:m+W,height:g+W}))):null,b?null:this.renderArea(A,P),(o||b)&&this.renderDots(A,z,P),(!p||x)&&wu.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(v.PureComponent);oJ=jh;fu(jh,"displayName","Area");fu(jh,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Rc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});fu(jh,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Xt(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});fu(jh,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,g=u&&u.length,p=oJ.getBaseValue(t,r,n,a),y=m==="horizontal",x=!1,b=f.map(function(S,j){var A;g?A=u[d+j]:(A=ji(S,c),Array.isArray(A)?x=!0:A=[p,A]);var P=A[1]==null||g&&ji(S,c)==null;return y?{x:q_({axis:n,ticks:i,bandSize:l,entry:S,index:j}),y:P?null:a.scale(A[1]),value:A,payload:S}:{x:P?null:n.scale(A[1]),y:q_({axis:a,ticks:o,bandSize:l,entry:S,index:j}),value:A,payload:S}}),w;return g||x?w=b.map(function(S){var j=Array.isArray(S.value)?S.value[0]:null;return y?{x:S.x,y:j!=null&&S.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:S.y}}):w=y?a.scale(p):n.scale(p),hf({points:b,baseLine:w,layout:m,isRange:x},h)});fu(jh,"renderDotItem",function(e,t){var r;if(le.isValidElement(e))r=le.cloneElement(e,t);else if(Wr(e))r=e(t);else{var n=Zr("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=sJ(t,jFe);r=le.createElement(Kb,vm({},i,{key:a,className:n}))}return r});function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function IFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fJ(n.key),n)}}function DFe(e,t,r){return t&&HB(e.prototype,t),r&&HB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MFe(e,t,r){return t=mS(t),RFe(e,uJ()?Reflect.construct(t,r||[],mS(e).constructor):t.apply(e,r))}function RFe(e,t){if(t&&(_v(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LFe(e)}function LFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uJ=function(){return!!e})()}function mS(e){return mS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mS(e)}function $Fe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hO(e,t)}function hO(e,t){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hO(e,t)}function dJ(e,t,r){return t=fJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fJ(e){var t=FFe(e,"string");return _v(t)=="symbol"?t:t+""}function FFe(e,t){if(_v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mO(){return mO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mO.apply(this,arguments)}function BFe(e){var t=e.xAxisId,r=i4(),n=o4(),a=HX(t);return a==null?null:v.createElement(ty,mO({},a,{className:Zr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ud(o,!0)}}))}var Ym=function(e){function t(){return IFe(this,t),MFe(this,t,arguments)}return $Fe(t,e),DFe(t,[{key:"render",value:function(){return v.createElement(BFe,this.props)}}])}(v.Component);dJ(Ym,"displayName","XAxis");dJ(Ym,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function zFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pJ(n.key),n)}}function qFe(e,t,r){return t&&GB(e.prototype,t),r&&GB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UFe(e,t,r){return t=pS(t),WFe(e,hJ()?Reflect.construct(t,r||[],pS(e).constructor):t.apply(e,r))}function WFe(e,t){if(t&&(Sv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VFe(e)}function VFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hJ=function(){return!!e})()}function pS(e){return pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pS(e)}function HFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pO(e,t)}function pO(e,t){return pO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pO(e,t)}function mJ(e,t,r){return t=pJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pJ(e){var t=GFe(e,"string");return Sv(t)=="symbol"?t:t+""}function GFe(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gO.apply(this,arguments)}var KFe=function(t){var r=t.yAxisId,n=i4(),a=o4(),i=GX(r);return i==null?null:v.createElement(ty,gO({},i,{className:Zr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return ud(l,!0)}}))},Xm=function(e){function t(){return zFe(this,t),UFe(this,t,arguments)}return HFe(t,e),qFe(t,[{key:"render",value:function(){return v.createElement(KFe,this.props)}}])}(v.Component);mJ(Xm,"displayName","YAxis");mJ(Xm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function KB(e){return QFe(e)||JFe(e)||XFe(e)||YFe()}function YFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XFe(e,t){if(e){if(typeof e=="string")return vO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vO(e,t)}}function JFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function QFe(e){if(Array.isArray(e))return vO(e)}function vO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yO=function(t,r,n,a,i){var o=bl(t,l4),l=bl(t,vN),c=[].concat(KB(o),KB(l)),u=bl(t,xN),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(p,y){if(y.props[d]===n&&_u(y.props,"extendDomain")&&Xt(y.props[f])){var x=y.props[f];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,y){if(y.props[d]===n&&_u(y.props,"extendDomain")&&Xt(y.props[m])&&Xt(y.props[g])){var x=y.props[m],b=y.props[g];return[Math.min(p[0],x,b),Math.max(p[1],x,b)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,y){return Xt(y)?[Math.min(p[0],y),Math.max(p[1],y)]:p},h)),h},gJ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var y=this._events[p],x=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,g),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var S=y.length,j;for(w=0;w<S;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),x){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!b)for(j=1,b=new Array(x-1);j<x;j++)b[j-1]=arguments[j];y[w].fn.apply(y[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var p=0,y=[],x=g.length;p<x;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&y.push(g[p]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(gJ);var ZFe=gJ.exports;const e8e=zn(ZFe);var aA=new e8e,iA="recharts.syncMouseEvents";function tb(e){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tb(e)}function t8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vJ(n.key),n)}}function r8e(e,t,r){return t&&YB(e.prototype,t),r&&YB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oA(e,t,r){return t=vJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vJ(e){var t=n8e(e,"string");return tb(t)=="symbol"?t:t+""}function n8e(e,t){if(tb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a8e=function(){function e(){t8e(this,e),oA(this,"activeIndex",0),oA(this,"coordinateList",[]),oA(this,"layout","horizontal")}return r8e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function i8e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],a=e?.[1];if(n&&a&&Xt(n)&&Xt(a))return!0}return!1}function o8e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function yJ(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Oa(t,r,n,a),l=Oa(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function s8e(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Oa(l,c,u,f),m=Oa(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return yJ(t);return[{x:n,y:a},{x:i,y:o}]}function rb(e){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rb(e)}function XB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XB(Object(r),!0).forEach(function(n){l8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l8e(e,t,r){return t=c8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c8e(e){var t=u8e(e,"string");return rb(t)=="symbol"?t:t+""}function u8e(e,t){if(rb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d8e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,p=km;if(h==="ScatterChart")g=o,p=NMe;else if(h==="BarChart")g=o8e(f,o,c,d),p=e4;else if(f==="radial"){var y=yJ(o),x=y.cx,b=y.cy,w=y.radius,S=y.startAngle,j=y.endAngle;g={cx:x,cy:b,startAngle:S,endAngle:j,innerRadius:w,outerRadius:w},p=Z3}else g={points:s8e(f,o,c)},p=km;var A=Cw(Cw(Cw(Cw({stroke:"#ccc",pointerEvents:"none"},c),g),Er(m,!1)),{},{payload:l,payloadIndex:u,className:Zr("recharts-tooltip-cursor",m.className)});return v.isValidElement(m)?v.cloneElement(m,A):v.createElement(p,A)}var f8e=["item"],h8e=["children","className","width","height","style","compact","title","desc"];function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gg.apply(this,arguments)}function JB(e,t){return g8e(e)||p8e(e,t)||bJ(e,t)||m8e()}function m8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function g8e(e){if(Array.isArray(e))return e}function QB(e,t){if(e==null)return{};var r=v8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function v8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wJ(n.key),n)}}function x8e(e,t,r){return t&&ZB(e.prototype,t),r&&ZB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b8e(e,t,r){return t=gS(t),w8e(e,xJ()?Reflect.construct(t,r||[],gS(e).constructor):t.apply(e,r))}function w8e(e,t){if(t&&(jv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _8e(e)}function _8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xJ=function(){return!!e})()}function gS(e){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gS(e)}function S8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xO(e,t)}function xO(e,t){return xO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xO(e,t)}function Nv(e){return C8e(e)||N8e(e)||bJ(e)||j8e()}function j8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(e,t){if(e){if(typeof e=="string")return bO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bO(e,t)}}function N8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C8e(e){if(Array.isArray(e))return bO(e)}function bO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function e7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e7(Object(r),!0).forEach(function(n){zr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zr(e,t,r){return t=wJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wJ(e){var t=A8e(e,"string");return jv(t)=="symbol"?t:t+""}function A8e(e,t){if(jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P8e={xAxis:["bottom","top"],yAxis:["left","right"]},E8e={width:"100%",height:"100%"},_J={x:0,y:0};function Aw(e){return e}var k8e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},O8e=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return jt(jt(jt({},a),Oa(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return jt(jt(jt({},a),Oa(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return _J},bN=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Nv(l),Nv(u)):l},[]);return o.length>0?o:t&&t.length&&Xt(a)&&Xt(i)?t.slice(a,i+1):[]};function SJ(e){return e==="number"?[0,"auto"]:void 0}var wO=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=bN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=m_(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(Nv(c),[lX(u,h)]):c},[])},t7=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=k8e(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=t3e(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=wO(t,r,d,f),m=O8e(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},T8e=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=rX(d,i);return n.reduce(function(g,p){var y,x=p.type.defaultProps!==void 0?jt(jt({},p.type.defaultProps),p.props):p.props,b=x.type,w=x.dataKey,S=x.allowDataOverflow,j=x.allowDuplicatedCategory,A=x.scale,P=x.ticks,C=x.includeHidden,E=x[o];if(g[E])return g;var R=bN(t.data,{graphicalItems:a.filter(function(L){var B,X=o in L.props?L.props[o]:(B=L.type.defaultProps)===null||B===void 0?void 0:B[o];return X===E}),dataStartIndex:c,dataEndIndex:u}),k=R.length,T,I,M;i8e(x.domain,S,b)&&(T=Tk(x.domain,null,S),m&&(b==="number"||A!=="auto")&&(M=kx(R,w,"category")));var z=SJ(b);if(!T||T.length===0){var W,U=(W=x.domain)!==null&&W!==void 0?W:z;if(w){if(T=kx(R,w,b),b==="category"&&m){var $=K1e(T);j&&$?(I=T,T=rS(0,k)):j||(T=h8(U,T,p).reduce(function(L,B){return L.indexOf(B)>=0?L:[].concat(Nv(L),[B])},[]))}else if(b==="category")j?T=T.filter(function(L){return L!==""&&!Qr(L)}):T=h8(U,T,p).reduce(function(L,B){return L.indexOf(B)>=0||B===""||Qr(B)?L:[].concat(Nv(L),[B])},[]);else if(b==="number"){var G=o3e(R,a.filter(function(L){var B,X,q=o in L.props?L.props[o]:(B=L.type.defaultProps)===null||B===void 0?void 0:B[o],Y="hide"in L.props?L.props.hide:(X=L.type.defaultProps)===null||X===void 0?void 0:X.hide;return q===E&&(C||!Y)}),w,i,d);G&&(T=G)}m&&(b==="number"||A!=="auto")&&(M=kx(R,w,"category"))}else m?T=rS(0,k):l&&l[E]&&l[E].hasStack&&b==="number"?T=h==="expand"?[0,1]:sX(l[E].stackGroups,c,u):T=tX(R,a.filter(function(L){var B=o in L.props?L.props[o]:L.type.defaultProps[o],X="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return B===E&&(C||!X)}),b,d,!0);if(b==="number")T=yO(f,T,E,i,P),U&&(T=Tk(U,T,S));else if(b==="category"&&U){var me=U,de=T.every(function(L){return me.indexOf(L)>=0});de&&(T=me)}}return jt(jt({},g),{},zr({},E,jt(jt({},x),{},{axisType:i,domain:T,categoricalDomain:M,duplicateDomain:I,originalDomain:(y=x.domain)!==null&&y!==void 0?y:z,isCategorical:m,layout:d})))},{})},I8e=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=bN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=rX(d,i),p=-1;return n.reduce(function(y,x){var b=x.type.defaultProps!==void 0?jt(jt({},x.type.defaultProps),x.props):x.props,w=b[o],S=SJ("number");if(!y[w]){p++;var j;return g?j=rS(0,m):l&&l[w]&&l[w].hasStack?(j=sX(l[w].stackGroups,c,u),j=yO(f,j,w,i)):(j=Tk(S,tX(h,n.filter(function(A){var P,C,E=o in A.props?A.props[o]:(P=A.type.defaultProps)===null||P===void 0?void 0:P[o],R="hide"in A.props?A.props.hide:(C=A.type.defaultProps)===null||C===void 0?void 0:C.hide;return E===w&&!R}),"number",d),a.defaultProps.allowDataOverflow),j=yO(f,j,w,i)),jt(jt({},y),{},zr({},w,jt(jt({axisType:i},a.defaultProps),{},{hide:!0,orientation:xl(P8e,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:S,isCategorical:g,layout:d})))}return y},{})},D8e=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=bl(d,i),m={};return h&&h.length?m=T8e(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=I8e(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},M8e=function(t){var r=_f(t),n=ud(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:C3(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:U_(r,n)}},r7=function(t){var r=t.children,n=t.defaultShowTooltip,a=ll(r,mv),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},R8e=function(t){return!t||!t.length?!1:t.some(function(r){var n=Nd(r&&r.type);return n&&n.indexOf("Bar")>=0})},n7=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},L8e=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=ll(f,mv),g=ll(f,Am),p=Object.keys(c).reduce(function(j,A){var P=c[A],C=P.orientation;return!P.mirror&&!P.hide?jt(jt({},j),{},zr({},C,j[C]+P.width)):j},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(j,A){var P=o[A],C=P.orientation;return!P.mirror&&!P.hide?jt(jt({},j),{},zr({},C,xl(j,"".concat(C))+P.height)):j},{top:h.top||0,bottom:h.bottom||0}),x=jt(jt({},y),p),b=x.bottom;m&&(x.bottom+=m.props.height||mv.defaultProps.height),g&&r&&(x=a3e(x,a,n,r));var w=u-x.left-x.right,S=d-x.top-x.bottom;return jt(jt({brushBottom:b},x),{},{width:Math.max(w,0),height:Math.max(S,0)})},$8e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},wN=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(x,b){var w=b.graphicalItems,S=b.stackGroups,j=b.offset,A=b.updateId,P=b.dataStartIndex,C=b.dataEndIndex,E=x.barSize,R=x.layout,k=x.barGap,T=x.barCategoryGap,I=x.maxBarSize,M=n7(R),z=M.numericAxisName,W=M.cateAxisName,U=R8e(w),$=[];return w.forEach(function(G,me){var de=bN(x.data,{graphicalItems:[G],dataStartIndex:P,dataEndIndex:C}),L=G.type.defaultProps!==void 0?jt(jt({},G.type.defaultProps),G.props):G.props,B=L.dataKey,X=L.maxBarSize,q=L["".concat(z,"Id")],Y=L["".concat(W,"Id")],Z={},ge=c.reduce(function(dt,ve){var ut=b["".concat(ve.axisType,"Map")],Te=L["".concat(ve.axisType,"Id")];ut&&ut[Te]||ve.axisType==="zAxis"||oh(!1);var Ze=ut[Te];return jt(jt({},dt),{},zr(zr({},ve.axisType,Ze),"".concat(ve.axisType,"Ticks"),ud(Ze)))},Z),re=ge[W],Se=ge["".concat(W,"Ticks")],Ie=S&&S[q]&&S[q].hasStack&&p3e(G,S[q].stackGroups),pe=Nd(G.type).indexOf("Bar")>=0,Ue=U_(re,Se),_e=[],ue=U&&r3e({barSize:E,stackGroups:S,totalSize:$8e(ge,W)});if(pe){var Ft,qt,zt=Qr(X)?I:X,it=(Ft=(qt=U_(re,Se,!0))!==null&&qt!==void 0?qt:zt)!==null&&Ft!==void 0?Ft:0;_e=n3e({barGap:k,barCategoryGap:T,bandSize:it!==Ue?it:Ue,sizeList:ue[Y],maxBarSize:zt}),it!==Ue&&(_e=_e.map(function(dt){return jt(jt({},dt),{},{position:jt(jt({},dt.position),{},{offset:dt.position.offset-it/2})})}))}var ft=G&&G.type&&G.type.getComposedData;ft&&$.push({props:jt(jt({},ft(jt(jt({},ge),{},{displayedData:de,props:x,dataKey:B,item:G,bandSize:Ue,barPosition:_e,offset:j,stackedData:Ie,layout:R,dataStartIndex:P,dataEndIndex:C}))),{},zr(zr(zr({key:G.key||"item-".concat(me)},z,ge[z]),W,ge[W]),"animationId",A)),childIndex:owe(G,x.children),item:G})}),$},m=function(x,b){var w=x.props,S=x.dataStartIndex,j=x.dataEndIndex,A=x.updateId;if(!n$({props:w}))return null;var P=w.children,C=w.layout,E=w.stackOffset,R=w.data,k=w.reverseStackOrder,T=n7(C),I=T.numericAxisName,M=T.cateAxisName,z=bl(P,n),W=h3e(R,z,"".concat(I,"Id"),"".concat(M,"Id"),E,k),U=c.reduce(function(L,B){var X="".concat(B.axisType,"Map");return jt(jt({},L),{},zr({},X,D8e(w,jt(jt({},B),{},{graphicalItems:z,stackGroups:B.axisType===I&&W,dataStartIndex:S,dataEndIndex:j}))))},{}),$=L8e(jt(jt({},U),{},{props:w,graphicalItems:z}),b?.legendBBox);Object.keys(U).forEach(function(L){U[L]=d(w,U[L],$,L.replace("Map",""),r)});var G=U["".concat(M,"Map")],me=M8e(G),de=h(w,jt(jt({},U),{},{dataStartIndex:S,dataEndIndex:j,updateId:A,graphicalItems:z,stackGroups:W,offset:$}));return jt(jt({formattedGraphicalItems:de,graphicalItems:z,offset:$,stackGroups:W},me),U)},g=function(y){function x(b){var w,S,j;return y8e(this,x),j=b8e(this,x,[b]),zr(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),zr(j,"accessibilityManager",new a8e),zr(j,"handleLegendBBoxUpdate",function(A){if(A){var P=j.state,C=P.dataStartIndex,E=P.dataEndIndex,R=P.updateId;j.setState(jt({legendBBox:A},m({props:j.props,dataStartIndex:C,dataEndIndex:E,updateId:R},jt(jt({},j.state),{},{legendBBox:A}))))}}),zr(j,"handleReceiveSyncEvent",function(A,P,C){if(j.props.syncId===A){if(C===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(P)}}),zr(j,"handleBrushChange",function(A){var P=A.startIndex,C=A.endIndex;if(P!==j.state.dataStartIndex||C!==j.state.dataEndIndex){var E=j.state.updateId;j.setState(function(){return jt({dataStartIndex:P,dataEndIndex:C},m({props:j.props,dataStartIndex:P,dataEndIndex:C,updateId:E},j.state))}),j.triggerSyncEvent({dataStartIndex:P,dataEndIndex:C})}}),zr(j,"handleMouseEnter",function(A){var P=j.getMouseInfo(A);if(P){var C=jt(jt({},P),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var E=j.props.onMouseEnter;Wr(E)&&E(C,A)}}),zr(j,"triggeredAfterMouseMove",function(A){var P=j.getMouseInfo(A),C=P?jt(jt({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var E=j.props.onMouseMove;Wr(E)&&E(C,A)}),zr(j,"handleItemMouseEnter",function(A){j.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),zr(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),zr(j,"handleMouseMove",function(A){A.persist(),j.throttleTriggeredAfterMouseMove(A)}),zr(j,"handleMouseLeave",function(A){j.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var C=j.props.onMouseLeave;Wr(C)&&C(P,A)}),zr(j,"handleOuterEvent",function(A){var P=iwe(A),C=xl(j.props,"".concat(P));if(P&&Wr(C)){var E,R;/.*touch.*/i.test(P)?R=j.getMouseInfo(A.changedTouches[0]):R=j.getMouseInfo(A),C((E=R)!==null&&E!==void 0?E:{},A)}}),zr(j,"handleClick",function(A){var P=j.getMouseInfo(A);if(P){var C=jt(jt({},P),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var E=j.props.onClick;Wr(E)&&E(C,A)}}),zr(j,"handleMouseDown",function(A){var P=j.props.onMouseDown;if(Wr(P)){var C=j.getMouseInfo(A);P(C,A)}}),zr(j,"handleMouseUp",function(A){var P=j.props.onMouseUp;if(Wr(P)){var C=j.getMouseInfo(A);P(C,A)}}),zr(j,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),zr(j,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&j.handleMouseDown(A.changedTouches[0])}),zr(j,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&j.handleMouseUp(A.changedTouches[0])}),zr(j,"handleDoubleClick",function(A){var P=j.props.onDoubleClick;if(Wr(P)){var C=j.getMouseInfo(A);P(C,A)}}),zr(j,"handleContextMenu",function(A){var P=j.props.onContextMenu;if(Wr(P)){var C=j.getMouseInfo(A);P(C,A)}}),zr(j,"triggerSyncEvent",function(A){j.props.syncId!==void 0&&aA.emit(iA,j.props.syncId,A,j.eventEmitterSymbol)}),zr(j,"applySyncEvent",function(A){var P=j.props,C=P.layout,E=P.syncMethod,R=j.state.updateId,k=A.dataStartIndex,T=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)j.setState(jt({dataStartIndex:k,dataEndIndex:T},m({props:j.props,dataStartIndex:k,dataEndIndex:T,updateId:R},j.state)));else if(A.activeTooltipIndex!==void 0){var I=A.chartX,M=A.chartY,z=A.activeTooltipIndex,W=j.state,U=W.offset,$=W.tooltipTicks;if(!U)return;if(typeof E=="function")z=E($,A);else if(E==="value"){z=-1;for(var G=0;G<$.length;G++)if($[G].value===A.activeLabel){z=G;break}}var me=jt(jt({},U),{},{x:U.left,y:U.top}),de=Math.min(I,me.x+me.width),L=Math.min(M,me.y+me.height),B=$[z]&&$[z].value,X=wO(j.state,j.props.data,z),q=$[z]?{x:C==="horizontal"?$[z].coordinate:de,y:C==="horizontal"?L:$[z].coordinate}:_J;j.setState(jt(jt({},A),{},{activeLabel:B,activeCoordinate:q,activePayload:X,activeTooltipIndex:z}))}else j.setState(A)}),zr(j,"renderCursor",function(A){var P,C=j.state,E=C.isTooltipActive,R=C.activeCoordinate,k=C.activePayload,T=C.offset,I=C.activeTooltipIndex,M=C.tooltipAxisBandSize,z=j.getTooltipEventType(),W=(P=A.props.active)!==null&&P!==void 0?P:E,U=j.props.layout,$=A.key||"_recharts-cursor";return le.createElement(d8e,{key:$,activeCoordinate:R,activePayload:k,activeTooltipIndex:I,chartName:r,element:A,isActive:W,layout:U,offset:T,tooltipAxisBandSize:M,tooltipEventType:z})}),zr(j,"renderPolarAxis",function(A,P,C){var E=xl(A,"type.axisType"),R=xl(j.state,"".concat(E,"Map")),k=A.type.defaultProps,T=k!==void 0?jt(jt({},k),A.props):A.props,I=R&&R[T["".concat(E,"Id")]];return v.cloneElement(A,jt(jt({},I),{},{className:Zr(E,I.className),key:A.key||"".concat(P,"-").concat(C),ticks:ud(I,!0)}))}),zr(j,"renderPolarGrid",function(A){var P=A.props,C=P.radialLines,E=P.polarAngles,R=P.polarRadius,k=j.state,T=k.radiusAxisMap,I=k.angleAxisMap,M=_f(T),z=_f(I),W=z.cx,U=z.cy,$=z.innerRadius,G=z.outerRadius;return v.cloneElement(A,{polarAngles:Array.isArray(E)?E:ud(z,!0).map(function(me){return me.coordinate}),polarRadius:Array.isArray(R)?R:ud(M,!0).map(function(me){return me.coordinate}),cx:W,cy:U,innerRadius:$,outerRadius:G,key:A.key||"polar-grid",radialLines:C})}),zr(j,"renderLegend",function(){var A=j.state.formattedGraphicalItems,P=j.props,C=P.children,E=P.width,R=P.height,k=j.props.margin||{},T=E-(k.left||0)-(k.right||0),I=ZY({children:C,formattedGraphicalItems:A,legendWidth:T,legendContent:u});if(!I)return null;var M=I.item,z=QB(I,f8e);return v.cloneElement(M,jt(jt({},z),{},{chartWidth:E,chartHeight:R,margin:k,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),zr(j,"renderTooltip",function(){var A,P=j.props,C=P.children,E=P.accessibilityLayer,R=ll(C,ul);if(!R)return null;var k=j.state,T=k.isTooltipActive,I=k.activeCoordinate,M=k.activePayload,z=k.activeLabel,W=k.offset,U=(A=R.props.active)!==null&&A!==void 0?A:T;return v.cloneElement(R,{viewBox:jt(jt({},W),{},{x:W.left,y:W.top}),active:U,label:z,payload:U?M:[],coordinate:I,accessibilityLayer:E})}),zr(j,"renderBrush",function(A){var P=j.props,C=P.margin,E=P.data,R=j.state,k=R.offset,T=R.dataStartIndex,I=R.dataEndIndex,M=R.updateId;return v.cloneElement(A,{key:A.key||"_recharts-brush",onChange:_w(j.handleBrushChange,A.props.onChange),data:E,x:Xt(A.props.x)?A.props.x:k.left,y:Xt(A.props.y)?A.props.y:k.top+k.height+k.brushBottom-(C.bottom||0),width:Xt(A.props.width)?A.props.width:k.width,startIndex:T,endIndex:I,updateId:"brush-".concat(M)})}),zr(j,"renderReferenceElement",function(A,P,C){if(!A)return null;var E=j,R=E.clipPathId,k=j.state,T=k.xAxisMap,I=k.yAxisMap,M=k.offset,z=A.type.defaultProps||{},W=A.props,U=W.xAxisId,$=U===void 0?z.xAxisId:U,G=W.yAxisId,me=G===void 0?z.yAxisId:G;return v.cloneElement(A,{key:A.key||"".concat(P,"-").concat(C),xAxis:T[$],yAxis:I[me],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:R})}),zr(j,"renderActivePoints",function(A){var P=A.item,C=A.activePoint,E=A.basePoint,R=A.childIndex,k=A.isRange,T=[],I=P.props.key,M=P.item.type.defaultProps!==void 0?jt(jt({},P.item.type.defaultProps),P.item.props):P.item.props,z=M.activeDot,W=M.dataKey,U=jt(jt({index:R,dataKey:W,cx:C.x,cy:C.y,r:4,fill:Q3(P.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Er(z,!1)),p_(z));return T.push(x.renderActiveDot(z,U,"".concat(I,"-activePoint-").concat(R))),E?T.push(x.renderActiveDot(z,jt(jt({},U),{},{cx:E.x,cy:E.y}),"".concat(I,"-basePoint-").concat(R))):k&&T.push(null),T}),zr(j,"renderGraphicChild",function(A,P,C){var E=j.filterFormatItem(A,P,C);if(!E)return null;var R=j.getTooltipEventType(),k=j.state,T=k.isTooltipActive,I=k.tooltipAxis,M=k.activeTooltipIndex,z=k.activeLabel,W=j.props.children,U=ll(W,ul),$=E.props,G=$.points,me=$.isRange,de=$.baseLine,L=E.item.type.defaultProps!==void 0?jt(jt({},E.item.type.defaultProps),E.item.props):E.item.props,B=L.activeDot,X=L.hide,q=L.activeBar,Y=L.activeShape,Z=!!(!X&&T&&U&&(B||q||Y)),ge={};R!=="axis"&&U&&U.props.trigger==="click"?ge={onClick:_w(j.handleItemMouseEnter,A.props.onClick)}:R!=="axis"&&(ge={onMouseLeave:_w(j.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:_w(j.handleItemMouseEnter,A.props.onMouseEnter)});var re=v.cloneElement(A,jt(jt({},E.props),ge));function Se(ve){return typeof I.dataKey=="function"?I.dataKey(ve.payload):null}if(Z)if(M>=0){var Ie,pe;if(I.dataKey&&!I.allowDuplicatedCategory){var Ue=typeof I.dataKey=="function"?Se:"payload.".concat(I.dataKey.toString());Ie=m_(G,Ue,z),pe=me&&de&&m_(de,Ue,z)}else Ie=G?.[M],pe=me&&de&&de[M];if(Y||q){var _e=A.props.activeIndex!==void 0?A.props.activeIndex:M;return[v.cloneElement(A,jt(jt(jt({},E.props),ge),{},{activeIndex:_e})),null,null]}if(!Qr(Ie))return[re].concat(Nv(j.renderActivePoints({item:E,activePoint:Ie,basePoint:pe,childIndex:M,isRange:me})))}else{var ue,Ft=(ue=j.getItemByXY(j.state.activeCoordinate))!==null&&ue!==void 0?ue:{graphicalItem:re},qt=Ft.graphicalItem,zt=qt.item,it=zt===void 0?A:zt,ft=qt.childIndex,dt=jt(jt(jt({},E.props),ge),{},{activeIndex:ft});return[v.cloneElement(it,dt),null,null]}return me?[re,null,null]:[re,null]}),zr(j,"renderCustomized",function(A,P,C){return v.cloneElement(A,jt(jt({key:"recharts-customized-".concat(C)},j.props),j.state))}),zr(j,"renderMap",{CartesianGrid:{handler:Aw,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Aw},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Aw},YAxis:{handler:Aw},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:fp("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=QK(j.triggeredAfterMouseMove,(S=b.throttleDelay)!==null&&S!==void 0?S:1e3/60),j.state={},j}return S8e(x,y),x8e(x,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,j=w.data,A=w.height,P=w.layout,C=ll(S,ul);if(C){var E=C.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,k=wO(this.state,j,E,R),T=this.state.tooltipTicks[E].coordinate,I=(this.state.offset.top+A)/2,M=P==="horizontal",z=M?{x:T,y:I}:{y:T,x:I},W=this.state.formattedGraphicalItems.find(function($){var G=$.item;return G.type.name==="Scatter"});W&&(z=jt(jt({},z),W.props.points[E].tooltipPosition),k=W.props.points[E].tooltipPayload);var U={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:R,activePayload:k,activeCoordinate:z};this.setState(U),this.renderCursor(C),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,A;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(w){GE([ll(w.children,ul)],[ll(this.props.children,ul)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=ll(this.props.children,ul);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,j=S.getBoundingClientRect(),A=EEe(j),P={chartX:Math.round(w.pageX-A.left),chartY:Math.round(w.pageY-A.top)},C=j.width/S.offsetWidth||1,E=this.inRange(P.chartX,P.chartY,C);if(!E)return null;var R=this.state,k=R.xAxisMap,T=R.yAxisMap,I=this.getTooltipEventType(),M=t7(this.state,this.props.data,this.props.layout,E);if(I!=="axis"&&k&&T){var z=_f(k).scale,W=_f(T).scale,U=z&&z.invert?z.invert(P.chartX):null,$=W&&W.invert?W.invert(P.chartY):null;return jt(jt({},P),{},{xValue:U,yValue:$},M)}return M?jt(jt({},P),M):null}},{key:"inRange",value:function(w,S){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,P=w/j,C=S/j;if(A==="horizontal"||A==="vertical"){var E=this.state.offset,R=P>=E.left&&P<=E.left+E.width&&C>=E.top&&C<=E.top+E.height;return R?{x:P,y:C}:null}var k=this.state,T=k.angleAxisMap,I=k.radiusAxisMap;if(T&&I){var M=_f(T);return g8({x:P,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),j=ll(w,ul),A={};j&&S==="axis"&&(j.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=p_(this.props,this.handleOuterEvent);return jt(jt({},P),A)}},{key:"addListener",value:function(){aA.on(iA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aA.removeListener(iA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,j){for(var A=this.state.formattedGraphicalItems,P=0,C=A.length;P<C;P++){var E=A[P];if(E.item===w||E.props.key===w.key||S===Nd(E.item.type)&&j===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,j=S.left,A=S.top,P=S.height,C=S.width;return le.createElement("defs",null,le.createElement("clipPath",{id:w},le.createElement("rect",{x:j,y:A,height:P,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,j){var A=JB(j,2),P=A[0],C=A[1];return jt(jt({},S),{},zr({},P,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,j){var A=JB(j,2),P=A[0],C=A[1];return jt(jt({},S),{},zr({},P,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,j=S.formattedGraphicalItems,A=S.activeItem;if(j&&j.length)for(var P=0,C=j.length;P<C;P++){var E=j[P],R=E.props,k=E.item,T=k.type.defaultProps!==void 0?jt(jt({},k.type.defaultProps),k.props):k.props,I=Nd(k.type);if(I==="Bar"){var M=(R.data||[]).find(function($){return iMe(w,$)});if(M)return{graphicalItem:E,payload:M}}else if(I==="RadialBar"){var z=(R.data||[]).find(function($){return g8(w,$)});if(z)return{graphicalItem:E,payload:z}}else if(hN(E,A)||mN(E,A)||X0(E,A)){var W=GRe({graphicalItem:E,activeTooltipItem:A,itemData:T.data}),U=T.activeIndex===void 0?W:T.activeIndex;return{graphicalItem:jt(jt({},E),{},{childIndex:U}),payload:X0(E,A)?T.data[W]:E.props.data[W]}}}return null}},{key:"render",value:function(){var w=this;if(!n$(this))return null;var S=this.props,j=S.children,A=S.className,P=S.width,C=S.height,E=S.style,R=S.compact,k=S.title,T=S.desc,I=QB(S,h8e),M=Er(I,!1);if(R)return le.createElement(NB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement(YE,gg({},M,{width:P,height:C,title:k,desc:T}),this.renderClipPath(),i$(j,this.renderMap)));if(this.props.accessibilityLayer){var z,W;M.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,M.role=(W=this.props.role)!==null&&W!==void 0?W:"application",M.onKeyDown=function($){w.accessibilityManager.keyboardEvent($)},M.onFocus=function(){w.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return le.createElement(NB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement("div",gg({className:Zr("recharts-wrapper",A),style:jt({position:"relative",cursor:"default",width:P,height:C},E)},U,{ref:function(G){w.container=G}}),le.createElement(YE,gg({},M,{width:P,height:C,title:k,desc:T,style:E8e}),this.renderClipPath(),i$(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);zr(g,"displayName",r),zr(g,"defaultProps",jt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),zr(g,"getDerivedStateFromProps",function(y,x){var b=y.dataKey,w=y.data,S=y.children,j=y.width,A=y.height,P=y.layout,C=y.stackOffset,E=y.margin,R=x.dataStartIndex,k=x.dataEndIndex;if(x.updateId===void 0){var T=r7(y);return jt(jt(jt({},T),{},{updateId:0},m(jt(jt({props:y},T),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:A,prevLayout:P,prevStackOffset:C,prevMargin:E,prevChildren:S})}if(b!==x.prevDataKey||w!==x.prevData||j!==x.prevWidth||A!==x.prevHeight||P!==x.prevLayout||C!==x.prevStackOffset||!Pg(E,x.prevMargin)){var I=r7(y),M={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},z=jt(jt({},t7(x,w,P)),{},{updateId:x.updateId+1}),W=jt(jt(jt({},I),M),z);return jt(jt(jt({},W),m(jt({props:y},W),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:A,prevLayout:P,prevStackOffset:C,prevMargin:E,prevChildren:S})}if(!GE(S,x.prevChildren)){var U,$,G,me,de=ll(S,mv),L=de&&(U=($=de.props)===null||$===void 0?void 0:$.startIndex)!==null&&U!==void 0?U:R,B=de&&(G=(me=de.props)===null||me===void 0?void 0:me.endIndex)!==null&&G!==void 0?G:k,X=L!==R||B!==k,q=!Qr(w),Y=q&&!X?x.updateId:x.updateId+1;return jt(jt({updateId:Y},m(jt(jt({props:y},x),{},{updateId:Y,dataStartIndex:L,dataEndIndex:B}),x)),{},{prevChildren:S,dataStartIndex:L,dataEndIndex:B})}return null}),zr(g,"renderActiveDot",function(y,x,b){var w;return v.isValidElement(y)?w=v.cloneElement(y,x):Wr(y)?w=y(x):w=le.createElement(Kb,x),le.createElement(Nn,{className:"recharts-active-dot",key:b},w)});var p=v.forwardRef(function(x,b){return le.createElement(g,gg({},x,{ref:b}))});return p.displayName=g.displayName,p},F8e=wN({chartName:"LineChart",GraphicalChild:Yb,axisComponents:[{axisType:"xAxis",AxisComp:Ym},{axisType:"yAxis",AxisComp:Xm}],formatAxisMap:t4}),B8e=wN({chartName:"BarChart",GraphicalChild:gp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ym},{axisType:"yAxis",AxisComp:Xm}],formatAxisMap:t4}),z8e=wN({chartName:"PieChart",GraphicalChild:Eu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:fN},{axisType:"radiusAxis",AxisComp:uN}],formatAxisMap:N3e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),q8e=wN({chartName:"AreaChart",GraphicalChild:jh,axisComponents:[{axisType:"xAxis",AxisComp:Ym},{axisType:"yAxis",AxisComp:Xm}],formatAxisMap:t4});function kn(e){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(e)}function to(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Or(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function sn(e){Or(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||kn(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ii(e,t){Or(2,arguments);var r=sn(e),n=to(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function $c(e,t){Or(2,arguments);var r=sn(e),n=to(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),i=new Date(r.getTime());i.setMonth(r.getMonth()+n+1,0);var o=i.getDate();return a>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),a),r)}function U8e(e,t){Or(2,arguments);var r=sn(e).getTime(),n=to(t);return new Date(r+n)}var W8e={};function Nh(){return W8e}function Fc(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=Nh(),f=to((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=sn(e),m=h.getDay(),g=(m<f?7:0)+m-f;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h}function Jm(e){return Or(1,arguments),Fc(e,{weekStartsOn:1})}function V8e(e){Or(1,arguments);var t=sn(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var a=Jm(n),i=new Date(0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);var o=Jm(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function H8e(e){Or(1,arguments);var t=V8e(e),r=new Date(0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);var n=Jm(r);return n}function nb(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Xl(e){Or(1,arguments);var t=sn(e);return t.setHours(0,0,0,0),t}var G8e=864e5;function dd(e,t){Or(2,arguments);var r=Xl(e),n=Xl(t),a=r.getTime()-nb(r),i=n.getTime()-nb(n);return Math.round((a-i)/G8e)}function _O(e,t){Or(2,arguments);var r=to(t),n=r*7;return Ii(e,n)}function K8e(e,t){Or(2,arguments);var r=to(t);return $c(e,r*12)}function Y8e(e){Or(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(kn(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(n){var a=sn(n);(r===void 0||r<a||isNaN(Number(a)))&&(r=a)}),r||new Date(NaN)}function X8e(e){Or(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(kn(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(n){var a=sn(n);(r===void 0||r>a||isNaN(a.getDate()))&&(r=a)}),r||new Date(NaN)}var jJ=6e4,NJ=36e5;function vs(e,t){Or(2,arguments);var r=Xl(e),n=Xl(t);return r.getTime()===n.getTime()}function d4(e){return Or(1,arguments),e instanceof Date||kn(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function J8e(e){if(Or(1,arguments),!d4(e)&&typeof e!="number")return!1;var t=sn(e);return!isNaN(Number(t))}function ab(e,t){Or(2,arguments);var r=sn(e),n=sn(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}var Q8e=6048e5;function Z8e(e,t,r){Or(2,arguments);var n=Fc(e,r),a=Fc(t,r),i=n.getTime()-nb(n),o=a.getTime()-nb(a);return Math.round((i-o)/Q8e)}function a7(e){Or(1,arguments);var t=sn(e);return t.setHours(23,59,59,999),t}function f4(e){Or(1,arguments);var t=sn(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Bs(e){Or(1,arguments);var t=sn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function eBe(e){Or(1,arguments);var t=sn(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function h4(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=Nh(),f=to((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=sn(e),m=h.getDay(),g=(m<f?-7:0)+6-(m-f);return h.setDate(h.getDate()+g),h.setHours(23,59,59,999),h}function CJ(e){return Or(1,arguments),h4(e,{weekStartsOn:1})}function tBe(e,t){Or(2,arguments);var r=to(t);return U8e(e,-r)}var rBe=864e5;function nBe(e){Or(1,arguments);var t=sn(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/rBe)+1}function vS(e){Or(1,arguments);var t=1,r=sn(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function AJ(e){Or(1,arguments);var t=sn(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=vS(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=vS(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function aBe(e){Or(1,arguments);var t=AJ(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=vS(r);return n}var iBe=6048e5;function oBe(e){Or(1,arguments);var t=sn(e),r=vS(t).getTime()-aBe(t).getTime();return Math.round(r/iBe)+1}function yS(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=Nh(),f=to((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=sn(e),m=h.getUTCDay(),g=(m<f?7:0)+m-f;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function PJ(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=sn(e),f=d.getUTCFullYear(),h=Nh(),m=to((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,m),g.setUTCHours(0,0,0,0);var p=yS(g,t),y=new Date(0);y.setUTCFullYear(f,0,m),y.setUTCHours(0,0,0,0);var x=yS(y,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=x.getTime()?f:f-1}function sBe(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=Nh(),f=to((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=PJ(e,t),m=new Date(0);m.setUTCFullYear(h,0,f),m.setUTCHours(0,0,0,0);var g=yS(m,t);return g}var lBe=6048e5;function cBe(e,t){Or(1,arguments);var r=sn(e),n=yS(r,t).getTime()-sBe(r,t).getTime();return Math.round(n/lBe)+1}function ia(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var uBe={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return ia(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):ia(n+1,2)},d:function(t,r){return ia(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return ia(t.getUTCHours()%12||12,r.length)},H:function(t,r){return ia(t.getUTCHours(),r.length)},m:function(t,r){return ia(t.getUTCMinutes(),r.length)},s:function(t,r){return ia(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return ia(i,r.length)}};const of=uBe;var $p={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},dBe={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return of.y(t,r)},Y:function(t,r,n,a){var i=PJ(t,a),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return ia(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):ia(o,r.length)},R:function(t,r){var n=AJ(t);return ia(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return ia(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return ia(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return ia(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return of.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return ia(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var i=cBe(t,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):ia(i,r.length)},I:function(t,r,n){var a=oBe(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):ia(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):of.d(t,r)},D:function(t,r,n){var a=nBe(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):ia(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return ia(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return ia(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return ia(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),i;switch(a===12?i=$p.noon:a===0?i=$p.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),i;switch(a>=17?i=$p.evening:a>=12?i=$p.afternoon:a>=4?i=$p.morning:i=$p.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return of.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):of.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):ia(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):ia(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):of.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):of.s(t,r)},S:function(t,r){return of.S(t,r)},X:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return o7(o);case"XXXX":case"XX":return em(o);case"XXXXX":case"XXX":default:return em(o,":")}},x:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return o7(o);case"xxxx":case"xx":return em(o);case"xxxxx":case"xxx":default:return em(o,":")}},O:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+i7(o,":");case"OOOO":default:return"GMT"+em(o,":")}},z:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+i7(o,":");case"zzzz":default:return"GMT"+em(o,":")}},t:function(t,r,n,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return ia(o,r.length)},T:function(t,r,n,a){var i=a._originalDate||t,o=i.getTime();return ia(o,r.length)}};function i7(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var o=t||"";return r+String(a)+o+ia(i,2)}function o7(e,t){if(e%60===0){var r=e>0?"-":"+";return r+ia(Math.abs(e)/60,2)}return em(e,t)}function em(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),i=ia(Math.floor(a/60),2),o=ia(a%60,2);return n+i+r+o}const fBe=dBe;var s7=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},EJ=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},hBe=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return s7(t,r);var o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",s7(a,r)).replace("{{time}}",EJ(i,r))},mBe={p:EJ,P:hBe};const pBe=mBe;var gBe=["D","DD"],vBe=["YY","YYYY"];function yBe(e){return gBe.indexOf(e)!==-1}function xBe(e){return vBe.indexOf(e)!==-1}function l7(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var bBe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wBe=function(t,r,n){var a,i=bBe[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};const _Be=wBe;function Og(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var SBe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jBe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NBe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},CBe={date:Og({formats:SBe,defaultWidth:"full"}),time:Og({formats:jBe,defaultWidth:"full"}),dateTime:Og({formats:NBe,defaultWidth:"full"})};const ABe=CBe;var PBe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},EBe=function(t,r,n,a){return PBe[t]};const kBe=EBe;function lu(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var OBe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TBe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IBe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DBe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},MBe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RBe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LBe=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$Be={ordinalNumber:LBe,era:lu({values:OBe,defaultWidth:"wide"}),quarter:lu({values:TBe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:lu({values:IBe,defaultWidth:"wide"}),day:lu({values:DBe,defaultWidth:"wide"}),dayPeriod:lu({values:MBe,defaultWidth:"wide",formattingValues:RBe,defaultFormattingWidth:"wide"})};const FBe=$Be;function cu(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?zBe(l,function(f){return f.test(o)}):BBe(l,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function BBe(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function zBe(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function kJ(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var qBe=/^(\d+)(th|st|nd|rd)?/i,UBe=/\d+/i,WBe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VBe={any:[/^b/i,/^(a|c)/i]},HBe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},GBe={any:[/1/i,/2/i,/3/i,/4/i]},KBe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YBe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XBe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JBe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QBe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZBe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},e7e={ordinalNumber:kJ({matchPattern:qBe,parsePattern:UBe,valueCallback:function(t){return parseInt(t,10)}}),era:cu({matchPatterns:WBe,defaultMatchWidth:"wide",parsePatterns:VBe,defaultParseWidth:"any"}),quarter:cu({matchPatterns:HBe,defaultMatchWidth:"wide",parsePatterns:GBe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:cu({matchPatterns:KBe,defaultMatchWidth:"wide",parsePatterns:YBe,defaultParseWidth:"any"}),day:cu({matchPatterns:XBe,defaultMatchWidth:"wide",parsePatterns:JBe,defaultParseWidth:"any"}),dayPeriod:cu({matchPatterns:QBe,defaultMatchWidth:"any",parsePatterns:ZBe,defaultParseWidth:"any"})};const t7e=e7e;var r7e={code:"en-US",formatDistance:_Be,formatLong:ABe,formatRelative:kBe,localize:FBe,match:t7e,options:{weekStartsOn:0,firstWeekContainsDate:1}};const OJ=r7e;var n7e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,a7e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,i7e=/^'([^]*?)'?$/,o7e=/''/g,s7e=/[a-zA-Z]/;function Rr(e,t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,y,x,b,w,S;Or(2,arguments);var j=String(t),A=Nh(),P=(n=(a=r?.locale)!==null&&a!==void 0?a:A.locale)!==null&&n!==void 0?n:OJ,C=to((i=(o=(l=(c=r?.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:A.firstWeekContainsDate)!==null&&o!==void 0?o:(f=A.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=to((m=(g=(p=(y=r?.weekStartsOn)!==null&&y!==void 0?y:r==null||(x=r.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&p!==void 0?p:A.weekStartsOn)!==null&&g!==void 0?g:(w=A.locale)===null||w===void 0||(S=w.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&m!==void 0?m:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var R=sn(e);if(!J8e(R))throw new RangeError("Invalid time value");var k=nb(R),T=tBe(R,k),I={firstWeekContainsDate:C,weekStartsOn:E,locale:P,_originalDate:R},M=j.match(a7e).map(function(z){var W=z[0];if(W==="p"||W==="P"){var U=pBe[W];return U(z,P.formatLong)}return z}).join("").match(n7e).map(function(z){if(z==="''")return"'";var W=z[0];if(W==="'")return l7e(z);var U=fBe[W];if(U)return!(r!=null&&r.useAdditionalWeekYearTokens)&&xBe(z)&&l7(z,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&yBe(z)&&l7(z,t,String(e)),U(T,z,P.localize,I);if(W.match(s7e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");return z}).join("");return M}function l7e(e){var t=e.match(i7e);return t?t[1].replace(o7e,"'"):e}function c7e(e){Or(1,arguments);var t=sn(e),r=t.getFullYear(),n=t.getMonth(),a=new Date(0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Wu(e){Or(1,arguments);var t=sn(e),r=t.getHours();return r}var u7e=6048e5;function d7e(e){Or(1,arguments);var t=sn(e),r=Jm(t).getTime()-H8e(t).getTime();return Math.round(r/u7e)+1}function Vu(e){Or(1,arguments);var t=sn(e),r=t.getMinutes();return r}function f7e(e){Or(1,arguments);var t=sn(e),r=t.getTime();return r}function h7e(e){return Or(1,arguments),Math.floor(f7e(e)/1e3)}function m7e(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=sn(e),f=d.getFullYear(),h=Nh(),m=to((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(f+1,0,m),g.setHours(0,0,0,0);var p=Fc(g,t),y=new Date(0);y.setFullYear(f,0,m),y.setHours(0,0,0,0);var x=Fc(y,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=x.getTime()?f:f-1}function p7e(e,t){var r,n,a,i,o,l,c,u;Or(1,arguments);var d=Nh(),f=to((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=m7e(e,t),m=new Date(0);m.setFullYear(h,0,f),m.setHours(0,0,0,0);var g=Fc(m,t);return g}var g7e=6048e5;function v7e(e,t){Or(1,arguments);var r=sn(e),n=Fc(r,t).getTime()-p7e(r,t).getTime();return Math.round(n/g7e)+1}function y7e(e){Or(1,arguments);var t=sn(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function x7e(e,t){return Or(1,arguments),Z8e(y7e(e),Bs(e),t)+1}function SO(e,t){Or(2,arguments);var r=sn(e),n=sn(t);return r.getTime()>n.getTime()}function TJ(e,t){Or(2,arguments);var r=sn(e),n=sn(t);return r.getTime()<n.getTime()}function c7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b7e(e,t){if(e){if(typeof e=="string")return c7(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c7(e,t):void 0}}function w7e(e,t){if(kn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _7e(e){var t=w7e(e,"string");return kn(t)=="symbol"?t:t+""}function S7e(e,t,r){return(t=_7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m4(e,t){Or(2,arguments);var r=sn(e),n=sn(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function j7e(e,t){Or(2,arguments);var r=sn(e),n=sn(t);return r.getFullYear()===n.getFullYear()}function m2(e,t){Or(2,arguments);var r=to(t);return Ii(e,-r)}function u7(e,t){var r;Or(1,arguments);var n=to((r=t?.additionalDigits)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=P7e(e),i;if(a.date){var o=E7e(a.date,n);i=k7e(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),c=0,u;if(a.time&&(c=O7e(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(u=T7e(a.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(l+c),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(l+c+u)}var Pw={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},N7e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,C7e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,A7e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function P7e(e){var t={},r=e.split(Pw.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Pw.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Pw.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){var a=Pw.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function E7e(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function k7e(e,t){if(t===null)return new Date(NaN);var r=e.match(N7e);if(!r)return new Date(NaN);var n=!!r[4],a=Vy(r[1]),i=Vy(r[2])-1,o=Vy(r[3]),l=Vy(r[4]),c=Vy(r[5])-1;if(n)return L7e(t,l,c)?I7e(t,l,c):new Date(NaN);var u=new Date(0);return!M7e(t,i,o)||!R7e(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}function Vy(e){return e?parseInt(e):1}function O7e(e){var t=e.match(C7e);if(!t)return NaN;var r=sA(t[1]),n=sA(t[2]),a=sA(t[3]);return $7e(r,n,a)?r*NJ+n*jJ+a*1e3:NaN}function sA(e){return e&&parseFloat(e.replace(",","."))||0}function T7e(e){if(e==="Z")return 0;var t=e.match(A7e);if(!t)return 0;var r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return F7e(n,a)?r*(n*NJ+a*jJ):NaN}function I7e(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var D7e=[31,null,31,30,31,30,31,31,30,31,30,31];function IJ(e){return e%400===0||e%4===0&&e%100!==0}function M7e(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(D7e[t]||(IJ(e)?29:28))}function R7e(e,t){return t>=1&&t<=(IJ(e)?366:365)}function L7e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function $7e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function F7e(e,t){return t>=0&&t<=59}function lA(e,t){Or(2,arguments);var r=sn(e),n=to(t),a=r.getFullYear(),i=r.getDate(),o=new Date(0);o.setFullYear(a,n,15),o.setHours(0,0,0,0);var l=c7e(o);return r.setMonth(n,Math.min(i,l)),r}function d7(e,t){Or(2,arguments);var r=sn(e),n=to(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(n),r)}const f7=({icon:e,title:t,value:r,trend:n,trendValue:a,color:i,className:o})=>{const l=n==="up"?pI:ice,c=n==="up"?"text-success":"text-danger";return s.jsx(lr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group flex flex-col justify-between ${o}`,children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10",style:{color:`var(--${i})`},children:s.jsx(e,{className:"h-5 w-5"})}),n&&a&&s.jsxs("div",{className:`flex items-center text-xs font-bold ${c}`,children:[s.jsx(l,{className:"w-3.5 h-3.5 mr-1"}),s.jsx("span",{children:a})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2",children:t}),s.jsx("p",{className:"text-3xl font-bold text-text-primary tabular-nums tracking-tight",children:r})]})]})})},B7e=({alerts:e,className:t})=>{const r=Wc(),[n,a]=v.useState(!1),i=d=>({Package:Xg,DollarSign:dl,CalendarCheck:gI,Clock:Yg,ShoppingCart:Ob,Store:xI,Users:hs,CalendarPlus:vI,AlertTriangle:Kg,Info:FW})[d]||Kg,o=d=>({danger:"text-danger",warning:"text-warning",info:"text-info",success:"text-success",purple:"text-purple"})[d]||"text-warning",l=e.length>2?e.slice(0,2):e,c=e.length>2,u=({alert:d,onClick:f})=>{const h=i(d.icone),m=o(d.cor);return s.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-white/5 transition-colors cursor-pointer group",onClick:f,children:[s.jsx(h,{className:`w-4 h-4 flex-shrink-0 ${m}`}),s.jsx("span",{className:"text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:d.mensagem}),d.link&&s.jsx(pI,{className:"w-3 h-3 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]})};return s.jsxs(s.Fragment,{children:[s.jsxs(lr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card ${t||""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center",children:[s.jsx(bx,{className:"mr-2 h-5 w-5 text-brand"})," Alertas do Dia"]}),c&&s.jsx(Ee,{variant:"ghost",size:"sm",className:"text-xs text-brand hover:text-brand/80",onClick:()=>a(!0),children:"Ver todos"})]}),e.length===0?s.jsx("p",{className:"text-sm text-text-muted",children:"Nenhum alerta no momento! "}):s.jsx("ul",{className:"space-y-2 text-sm",children:l.map((d,f)=>s.jsx(u,{alert:d,onClick:()=>d.link&&r(d.link)},f))})]}),s.jsx(qr,{open:n,onOpenChange:a,children:s.jsxs(Lr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(Ur,{children:s.jsxs($r,{className:"flex items-center gap-2",children:[s.jsx(bx,{className:"h-5 w-5 text-brand"}),"Todos os Alertas (",e.length,")"]})}),s.jsx("div",{className:"mt-4",children:e.length===0?s.jsx("p",{className:"text-sm text-text-muted text-center py-8",children:"Nenhum alerta no momento! "}):s.jsx("ul",{className:"space-y-2 text-sm",children:e.map((d,f)=>s.jsx(u,{alert:d,onClick:()=>{d.link&&(r(d.link),a(!1))}},f))})})]})})]})},z7e=({title:e,icon:t,data:r,color:n,className:a})=>{const i=r.reduce((c,u)=>c+(u.receita||0),0),o=r.reduce((c,u)=>c+(u.despesa||0),0),l=i-o;return s.jsxs(lr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group ${a||""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10 mr-3",style:{color:`var(--${n})`},children:s.jsx(t,{className:"h-5 w-5"})}),s.jsx("h3",{className:"text-base font-bold text-text-primary flex-1",children:e}),s.jsx("div",{className:"text-xs font-semibold text-text-muted",children:"ltimos 14 dias"})]}),s.jsx("div",{className:"mb-2",children:s.jsx(f2,{width:"100%",height:90,children:s.jsxs(q8e,{data:r,margin:{top:4,right:0,left:0,bottom:0},children:[s.jsx(ul,{cursor:{stroke:"var(--border)",strokeDasharray:"3 3"},contentStyle:{background:"rgba(10, 10, 10, 0.85)",borderColor:"var(--border)",color:"var(--text-primary)",borderRadius:"var(--radius-sm)"},formatter:(c,u)=>u==="saldo"?[`R$ ${c.toLocaleString("pt-BR")}`,"Saldo"]:c,labelFormatter:c=>c}),s.jsx(jh,{type:"monotone",dataKey:"saldo",stroke:"var(--brand)",strokeWidth:2,fill:"var(--brand)",fillOpacity:.15})]})})}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary",children:"Receita"}),s.jsxs("p",{className:"font-bold text-success tabular-nums",children:["R$ ",i.toLocaleString("pt-BR")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary",children:"Despesa"}),s.jsxs("p",{className:"font-bold text-danger tabular-nums",children:["R$ ",o.toLocaleString("pt-BR")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary",children:"Saldo"}),s.jsxs("p",{className:"font-bold text-text-primary tabular-nums",children:["R$ ",l.toLocaleString("pt-BR")]})]})]})]})},q7e=({title:e,icon:t,data:r,color:n,className:a})=>s.jsxs(lr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group flex flex-col ${a||""}`,children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10 mr-3",style:{color:`var(--${n})`},children:s.jsx(t,{className:"h-5 w-5"})}),s.jsx("h3",{className:"text-base font-bold text-text-primary",children:e})]}),s.jsx("div",{className:"space-y-3 mt-auto",children:r.map((i,o)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:i.name}),s.jsx("span",{className:"font-bold text-text-primary tabular-nums",children:i.value})]},o))})]}),U7e={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1,delayChildren:.2}}},cA={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}};function W7e(){Za();const{userProfile:e}=po(),{setAlerts:t}=CG(),r=Wc(),[n,a]=v.useState(!0),[i,o]=v.useState(0),[l,c]=v.useState({finalizados:0,total:0}),[u,d]=v.useState(0),[f,h]=v.useState(0),[m,g]=v.useState(0),[p,y]=v.useState(0),[x,b]=v.useState(0),[w,S]=v.useState(0),[j,A]=v.useState([]),[P,C]=v.useState([]);v.useEffect(()=>{(async()=>{if(e?.codigo_empresa)try{a(!0);const T=e.codigo_empresa,I=new Date,M=Xl(I).toISOString(),z=a7(I).toISOString(),{data:W}=await Oe.from("pagamentos").select("valor, status").eq("codigo_empresa",T).gte("recebido_em",M).lte("recebido_em",z),U=(W||[]).filter(nt=>!["Cancelado","Estornado"].includes(nt.status)).reduce((nt,mt)=>nt+Number(mt.valor||0),0),{data:$}=await Oe.from("agendamentos").select("id").eq("codigo_empresa",T).gte("inicio",M).lte("inicio",z);let G=0;if($&&$.length>0){const nt=$.map(At=>At.id),{data:mt}=await Oe.from("agendamento_participantes").select("valor_cota, status_pagamento").eq("codigo_empresa",T).in("agendamento_id",nt).eq("status_pagamento","Pago");G=(mt||[]).reduce((At,Pe)=>At+Number(Pe.valor_cota||0),0)}const me=U+G;o(me);const{data:de}=await Oe.from("agendamentos").select("id, status, inicio").eq("codigo_empresa",T).gte("inicio",M).lte("inicio",z),L=(de||[]).filter(nt=>nt.status==="finished").length;c({finalizados:L,total:de?.length||0});const B=new Date().toISOString(),X=(de||[]).filter(nt=>nt.inicio>B&&!["canceled","finished"].includes(nt.status)).length;d(X);const q=(de||[]).filter(nt=>nt.status==="in_progress").length;h(q);const{data:Y}=await Oe.from("quadras").select("id").eq("codigo_empresa",T),Z=Y?.length||0;g(Z*3);const{data:ge}=await Oe.from("comandas").select("id").eq("codigo_empresa",T).eq("status","open");y(ge?.length||0);const{data:re}=await Oe.from("mesas").select("id, status").eq("codigo_empresa",T),Se=(re||[]).filter(nt=>["in-use","awaiting-payment"].includes(nt.status)).length;b(Se);const{data:Ie}=await Oe.from("comandas").select("id").eq("codigo_empresa",T).eq("status","closed").gte("fechado_em",M).lte("fechado_em",z);S(Ie?.length||0);const pe=[];for(let nt=13;nt>=0;nt--){const mt=new Date;mt.setDate(mt.getDate()-nt);const At=Xl(mt).toISOString(),Pe=a7(mt).toISOString(),{data:Je}=await Oe.from("pagamentos").select("valor, status").eq("codigo_empresa",T).gte("recebido_em",At).lte("recebido_em",Pe),Dt=(Je||[]).filter(Tt=>!["Cancelado","Estornado"].includes(Tt.status)).reduce((Tt,er)=>Tt+Number(er.valor||0),0),{data:qe}=await Oe.from("agendamentos").select("id").eq("codigo_empresa",T).gte("inicio",At).lte("inicio",Pe);let lt=0;if(qe&&qe.length>0){const Tt=qe.map(tt=>tt.id),{data:er}=await Oe.from("agendamento_participantes").select("valor_cota").eq("codigo_empresa",T).in("agendamento_id",Tt).eq("status_pagamento","Pago");lt=(er||[]).reduce((tt,ur)=>tt+Number(ur.valor_cota||0),0)}const Bt=Dt+lt;pe.push({name:nt===0?"Hoje":`${nt}d`,saldo:Math.round(Bt),receita:Math.round(Bt),despesa:0})}A(pe);const Ue=[],{data:_e}=await Oe.from("produtos").select("nome, estoque, estoque_minimo, status").eq("codigo_empresa",T).not("estoque_minimo","is",null),ue=(_e||[]).filter(nt=>{const mt=Number(nt.estoque||0),At=Number(nt.estoque_minimo||0);return mt<=At&&At>0});ue.length>0&&Ue.push({tipo:"estoque",icone:"Package",cor:"danger",mensagem:`${ue.length} produto${ue.length>1?"s":""} com estoque baixo`,link:"/produtos"});const Ft=new Date;Ft.setHours(Ft.getHours()+2);const{data:qt}=await Oe.from("agendamentos").select("id, inicio").eq("codigo_empresa",T).eq("status","scheduled").gte("inicio",new Date().toISOString()).lte("inicio",Ft.toISOString());if(qt&&qt.length>0&&Ue.push({tipo:"agendamento",icone:"CalendarCheck",cor:"warning",mensagem:`${qt.length} agendamento${qt.length>1?"s":""} prximo${qt.length>1?"s":""} sem confirmao`,link:"/agenda"}),$&&$.length>0){const nt=$.map(At=>At.id),{data:mt}=await Oe.from("agendamento_participantes").select("id").eq("codigo_empresa",T).in("agendamento_id",nt).eq("status_pagamento","Pendente");mt&&mt.length>0&&Ue.push({tipo:"pagamento",icone:"DollarSign",cor:"warning",mensagem:`${mt.length} pagamento${mt.length>1?"s":""} pendente${mt.length>1?"s":""} em agendamentos de hoje`,link:"/agenda"})}const zt=new Date;zt.setHours(zt.getHours()-3);const{data:it}=await Oe.from("comandas").select("id, aberto_em").eq("codigo_empresa",T).eq("status","open").lte("aberto_em",zt.toISOString());it&&it.length>0&&Ue.push({tipo:"comanda",icone:"Clock",cor:"warning",mensagem:`${it.length} comanda${it.length>1?"s":""} aberta${it.length>1?"s":""} h mais de 3 horas`,link:"/vendas"});const ft=new Date;ft.setHours(ft.getHours()-12);const{data:dt}=await Oe.from("caixa_sessoes").select("id, aberto_em").eq("codigo_empresa",T).eq("status","open").lte("aberto_em",ft.toISOString()).limit(1);dt&&dt.length>0&&Ue.push({tipo:"caixa",icone:"ShoppingCart",cor:"danger",mensagem:"Caixa aberto h mais de 12 horas",link:"/vendas"});const{data:ve}=await Oe.from("mesas").select("id, nome, numero").eq("codigo_empresa",T).eq("status","awaiting-payment");if(ve&&ve.length>0){const nt=ve.map(At=>At.id),{data:mt}=await Oe.from("comandas").select("id, mesa_id").eq("codigo_empresa",T).in("mesa_id",nt).eq("status","open");if(mt&&mt.length>0){const At=mt.map(qe=>qe.id),{data:Pe}=await Oe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",At),Je={};(Pe||[]).forEach(qe=>{const lt=(Number(qe.quantidade)||0)*(Number(qe.preco_unitario)||0),Bt=Number(qe.desconto)||0,Tt=lt-Bt;Je[qe.comanda_id]=(Je[qe.comanda_id]||0)+Tt});const Dt=Object.values(Je).filter(qe=>qe>100).length;Dt>0&&Ue.push({tipo:"mesa",icone:"Store",cor:"info",mensagem:`${Dt} mesa${Dt>1?"s":""} com saldo alto aguardando pagamento`,link:"/vendas"})}}const{data:ut}=await Oe.from("clientes").select("id, nome, aniversario").eq("codigo_empresa",T).eq("status","Ativo").not("aniversario","is",null),Te=Rr(I,"MM-dd"),Ze=(ut||[]).filter(nt=>nt.aniversario?Rr(new Date(nt.aniversario),"MM-dd")===Te:!1);Ze.length>0&&Ue.push({tipo:"aniversario",icone:"Users",cor:"success",mensagem:` ${Ze.length} aniversariante${Ze.length>1?"s":""} hoje!`,link:"/clientes"});const Ye=[];for(let nt=1;nt<=7;nt++){const mt=new Date(I);mt.setDate(mt.getDate()+nt),Ye.push(Rr(mt,"MM-dd"))}const Nt=(ut||[]).filter(nt=>{if(!nt.aniversario)return!1;const mt=Rr(new Date(nt.aniversario),"MM-dd");return Ye.includes(mt)});Nt.length>0&&Ue.push({tipo:"aniversario-semana",icone:"CalendarPlus",cor:"purple",mensagem:` ${Nt.length} aniversariante${Nt.length>1?"s":""} esta semana`,link:"/clientes"}),console.log(" [DASHBOARD] Alertas carregados:",Ue.length,Ue),C(Ue),t(Ue)}catch(T){console.error("Erro ao carregar dashboard:",T)}finally{a(!1)}})()},[e?.codigo_empresa]);const E=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(k||0)),R=[{name:"Comandas Abertas",value:p},{name:"Mesas Ocupadas",value:x},{name:"Vendas Hoje",value:w}];return n?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand mx-auto mb-4"}),s.jsx("p",{className:"text-text-secondary",children:"Carregando dashboard..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Dashboard - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Viso geral e resumo do seu negcio."})]}),s.jsxs(lr.div,{variants:U7e,initial:"hidden",animate:"visible",className:"space-y-4",children:[s.jsxs(lr.div,{variants:cA,className:"relative grid grid-cols-1 xl:grid-cols-12 gap-4 items-start",children:[s.jsx("div",{className:"xl:col-span-8",children:s.jsxs("div",{className:"bg-surface/70 backdrop-blur-sm relative p-4 rounded-xl border border-white/10 overflow-hidden shadow-1",children:[s.jsx("div",{className:"absolute inset-0 bg-court-pattern opacity-[0.03] mix-blend-overlay"}),s.jsxs("div",{className:"relative z-10 max-w-[720px]",children:[s.jsxs("h1",{className:"text-3xl font-black mb-2 text-text-primary tracking-tighter",children:["Bem-vindo de volta, ",s.jsxs("span",{className:"text-brand",children:[e?.nome_exibicao||e?.nome||e?.email?.split("@")[0]||"Admin","!"]})]}),s.jsx("p",{className:"text-text-secondary mb-3 max-w-[60ch] text-sm md:text-base font-normal",children:"Sua central de comando para uma gesto de sucesso. Monitore agendamentos, faturamento e clientes em um s lugar."}),s.jsxs("div",{className:"flex flex-wrap gap-2.5",children:[s.jsxs(Ee,{onClick:()=>r("/agenda",{state:{openModal:!0}}),size:"default",children:[s.jsx(vI,{className:"mr-2 h-4 w-4"}),"+ Agendamento"]}),s.jsxs(Ee,{onClick:()=>r("/clientes",{state:{openModal:!0}}),variant:"outline",size:"default",children:[s.jsx(hs,{className:"mr-2 h-4 w-4"}),"Adicionar Cliente"]})]})]})]})}),s.jsx("div",{className:"xl:col-span-4",children:s.jsxs("div",{className:"fx-card",children:[s.jsxs("h2",{className:"text-lg font-bold text-text-primary mb-3 flex items-center",children:[s.jsx(Yg,{className:"mr-2 h-5 w-5 text-brand"})," Resumo do Dia"]}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-secondary",children:"Prximas Reservas"}),s.jsx("span",{className:"font-bold text-text-primary tabular-nums",children:u})]}),s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-secondary",children:"Quadras em Uso"}),s.jsx("span",{className:"font-bold text-success tabular-nums",children:f})]}),s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-secondary",children:"Horrios Disponveis"}),s.jsx("span",{className:"font-bold text-info tabular-nums",children:m})]})]})]})})]}),s.jsxs(lr.div,{variants:cA,className:"relative grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-12 gap-4 items-stretch",children:[s.jsx("div",{className:"xl:col-span-3",children:s.jsx(f7,{icon:dl,title:"Faturamento do Dia",value:E(i),color:"success",className:"h-full"})}),s.jsx("div",{className:"xl:col-span-3",children:s.jsx(f7,{icon:gI,title:"Agend. Finalizados",value:`${l.finalizados} de ${l.total}`,color:"info",className:"h-full"})}),s.jsx("div",{className:"xl:col-span-3",children:s.jsx(B7e,{className:"h-full",alerts:P})}),s.jsx("div",{className:"xl:col-span-3",children:s.jsx(q7e,{icon:xI,title:"Informaes da Loja",data:R,color:"purple",className:"h-full"})})]}),s.jsx(lr.div,{variants:cA,className:"grid grid-cols-1 gap-4",children:s.jsx(z7e,{icon:Tb,title:"Resumo Financeiro",data:j,color:"brand"})})]})]})}var V7e={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},H7e=function(t,r,n){var a,i=V7e[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",String(r)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+a:"h "+a:a};const G7e=H7e;var K7e={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Y7e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},X7e={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J7e={date:Og({formats:K7e,defaultWidth:"full"}),time:Og({formats:Y7e,defaultWidth:"full"}),dateTime:Og({formats:X7e,defaultWidth:"full"})};const Q7e=J7e;var Z7e={lastWeek:function(t){var r=t.getUTCDay(),n=r===0||r===6?"ltimo":"ltima";return"'"+n+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},eze=function(t,r,n,a){var i=Z7e[t];return typeof i=="function"?i(r):i};const tze=eze;var rze={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},nze={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},aze={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},ize={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},oze={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},sze={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},lze=function(t,r){var n=Number(t);return r?.unit==="week"?n+"":n+""},cze={ordinalNumber:lze,era:lu({values:rze,defaultWidth:"wide"}),quarter:lu({values:nze,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:lu({values:aze,defaultWidth:"wide"}),day:lu({values:ize,defaultWidth:"wide"}),dayPeriod:lu({values:oze,defaultWidth:"wide",formattingValues:sze,defaultFormattingWidth:"wide"})};const uze=cze;var dze=/^(\d+)[o]?/i,fze=/\d+/i,hze={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},mze={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},pze={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},gze={any:[/1/i,/2/i,/3/i,/4/i]},vze={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},yze={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},xze={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},bze={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},wze={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},_ze={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Sze={ordinalNumber:kJ({matchPattern:dze,parsePattern:fze,valueCallback:function(t){return parseInt(t,10)}}),era:cu({matchPatterns:hze,defaultMatchWidth:"wide",parsePatterns:mze,defaultParseWidth:"any"}),quarter:cu({matchPatterns:pze,defaultMatchWidth:"wide",parsePatterns:gze,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:cu({matchPatterns:vze,defaultMatchWidth:"wide",parsePatterns:yze,defaultParseWidth:"any"}),day:cu({matchPatterns:xze,defaultMatchWidth:"wide",parsePatterns:bze,defaultParseWidth:"any"}),dayPeriod:cu({matchPatterns:wze,defaultMatchWidth:"any",parsePatterns:_ze,defaultParseWidth:"any"})};const jze=Sze;var Nze={code:"pt-BR",formatDistance:G7e,formatLong:Q7e,formatRelative:tze,localize:uze,match:jze,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Zu=Nze,Cze=["top","right","bottom","left"],lh=Math.min,fl=Math.max,xS=Math.round,Ew=Math.floor,Su=e=>({x:e,y:e}),Aze={left:"right",right:"left",bottom:"top",top:"bottom"},Pze={start:"end",end:"start"};function jO(e,t,r){return fl(e,lh(t,r))}function Ld(e,t){return typeof e=="function"?e(t):e}function $d(e){return e.split("-")[0]}function ry(e){return e.split("-")[1]}function p4(e){return e==="x"?"y":"x"}function g4(e){return e==="y"?"height":"width"}const Eze=new Set(["top","bottom"]);function hu(e){return Eze.has($d(e))?"y":"x"}function v4(e){return p4(hu(e))}function kze(e,t,r){r===void 0&&(r=!1);const n=ry(e),a=v4(e),i=g4(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=bS(o)),[o,bS(o)]}function Oze(e){const t=bS(e);return[NO(e),t,NO(t)]}function NO(e){return e.replace(/start|end/g,t=>Pze[t])}const h7=["left","right"],m7=["right","left"],Tze=["top","bottom"],Ize=["bottom","top"];function Dze(e,t,r){switch(e){case"top":case"bottom":return r?t?m7:h7:t?h7:m7;case"left":case"right":return t?Tze:Ize;default:return[]}}function Mze(e,t,r,n){const a=ry(e);let i=Dze($d(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(NO)))),i}function bS(e){return e.replace(/left|right|bottom|top/g,t=>Aze[t])}function Rze(e){return{top:0,right:0,bottom:0,left:0,...e}}function DJ(e){return typeof e!="number"?Rze(e):{top:e,right:e,bottom:e,left:e}}function wS(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function p7(e,t,r){let{reference:n,floating:a}=e;const i=hu(t),o=v4(t),l=g4(o),c=$d(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(ry(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const Lze=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=p7(u,n,c),h=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:y,fn:x}=l[p],{x:b,y:w,data:S,reset:j}=await x({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,f=w??f,m={...m,[y]:{...m[y],...S}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=p7(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function ib(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=Ld(t,e),g=DJ(m),y=l[h?f==="floating"?"reference":"floating":f],x=wS(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=wS(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-j.top+g.top)/S.y,bottom:(j.bottom-x.bottom+g.bottom)/S.y,left:(x.left-j.left+g.left)/S.x,right:(j.right-x.right+g.right)/S.x}}const $ze=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Ld(e,t)||{};if(u==null)return{};const f=DJ(d),h={x:r,y:n},m=v4(a),g=g4(m),p=await o.getDimensions(u),y=m==="y",x=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",S=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=A?A[w]:0;(!P||!await(o.isElement==null?void 0:o.isElement(A)))&&(P=l.floating[w]||i.floating[g]);const C=S/2-j/2,E=P/2-p[g]/2-1,R=lh(f[x],E),k=lh(f[b],E),T=R,I=P-p[g]-k,M=P/2-p[g]/2+C,z=jO(T,M,I),W=!c.arrow&&ry(a)!=null&&M!==z&&i.reference[g]/2-(M<T?R:k)-p[g]/2<0,U=W?M<T?M-T:M-I:0;return{[m]:h[m]+U,data:{[m]:z,centerOffset:M-z-U,...W&&{alignmentOffset:U}},reset:W}}}),Fze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...y}=Ld(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=$d(a),b=hu(l),w=$d(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!p?[bS(l)]:Oze(l)),A=g!=="none";!h&&A&&j.push(...Mze(l,p,g,S));const P=[l,...j],C=await ib(t,y),E=[];let R=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&E.push(C[x]),f){const M=kze(a,o,S);E.push(C[M[0]],C[M[1]])}if(R=[...R,{placement:a,overflows:E}],!E.every(M=>M<=0)){var k,T;const M=(((k=i.flip)==null?void 0:k.index)||0)+1,z=P[M];if(z&&(!(f==="alignment"?b!==hu(z):!1)||R.every($=>hu($.placement)===b?$.overflows[0]>0:!0)))return{data:{index:M,overflows:R},reset:{placement:z}};let W=(T=R.filter(U=>U.overflows[0]<=0).sort((U,$)=>U.overflows[1]-$.overflows[1])[0])==null?void 0:T.placement;if(!W)switch(m){case"bestFit":{var I;const U=(I=R.filter($=>{if(A){const G=hu($.placement);return G===b||G==="y"}return!0}).map($=>[$.placement,$.overflows.filter(G=>G>0).reduce((G,me)=>G+me,0)]).sort(($,G)=>$[1]-G[1])[0])==null?void 0:I[0];U&&(W=U);break}case"initialPlacement":W=l;break}if(a!==W)return{reset:{placement:W}}}return{}}}};function g7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function v7(e){return Cze.some(t=>e[t]>=0)}const Bze=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Ld(e,t);switch(n){case"referenceHidden":{const i=await ib(t,{...a,elementContext:"reference"}),o=g7(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:v7(o)}}}case"escaped":{const i=await ib(t,{...a,altBoundary:!0}),o=g7(i,r.floating);return{data:{escapedOffsets:o,escaped:v7(o)}}}default:return{}}}}},MJ=new Set(["left","top"]);async function zze(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=$d(r),l=ry(r),c=hu(r)==="y",u=MJ.has(o)?-1:1,d=i&&c?-1:1,f=Ld(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const qze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await zze(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},Uze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x,y:b}=y;return{x,y:b}}},...c}=Ld(e,t),u={x:r,y:n},d=await ib(t,c),f=hu($d(a)),h=p4(f);let m=u[h],g=u[f];if(i){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=m+d[y],w=m-d[x];m=jO(b,m,w)}if(o){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=g+d[y],w=g-d[x];g=jO(b,g,w)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[f]:o}}}}}},Wze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ld(e,t),d={x:r,y:n},f=hu(a),h=p4(f);let m=d[h],g=d[f];const p=Ld(l,t),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",S=i.reference[h]-i.floating[w]+y.mainAxis,j=i.reference[h]+i.reference[w]-y.mainAxis;m<S?m=S:m>j&&(m=j)}if(u){var x,b;const w=h==="y"?"width":"height",S=MJ.has($d(a)),j=i.reference[f]-i.floating[w]+(S&&((x=o.offset)==null?void 0:x[f])||0)+(S?0:y.crossAxis),A=i.reference[f]+i.reference[w]+(S?0:((b=o.offset)==null?void 0:b[f])||0)-(S?y.crossAxis:0);g<j?g=j:g>A&&(g=A)}return{[h]:m,[f]:g}}}},Vze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Ld(e,t),d=await ib(t,u),f=$d(a),h=ry(a),m=hu(a)==="y",{width:g,height:p}=i.floating;let y,x;f==="top"||f==="bottom"?(y=f,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,y=h==="end"?"top":"bottom");const b=p-d.top-d.bottom,w=g-d.left-d.right,S=lh(p-d[y],b),j=lh(g-d[x],w),A=!t.middlewareData.shift;let P=S,C=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(P=b),A&&!h){const R=fl(d.left,0),k=fl(d.right,0),T=fl(d.top,0),I=fl(d.bottom,0);m?C=g-2*(R!==0||k!==0?R+k:fl(d.left,d.right)):P=p-2*(T!==0||I!==0?T+I:fl(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:P});const E=await o.getDimensions(l.floating);return g!==E.width||p!==E.height?{reset:{rects:!0}}:{}}}};function _N(){return typeof window<"u"}function ny(e){return RJ(e)?(e.nodeName||"").toLowerCase():"#document"}function wl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Du(e){var t;return(t=(RJ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function RJ(e){return _N()?e instanceof Node||e instanceof wl(e).Node:!1}function Bc(e){return _N()?e instanceof Element||e instanceof wl(e).Element:!1}function ku(e){return _N()?e instanceof HTMLElement||e instanceof wl(e).HTMLElement:!1}function y7(e){return!_N()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof wl(e).ShadowRoot}const Hze=new Set(["inline","contents"]);function Xb(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=zc(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Hze.has(a)}const Gze=new Set(["table","td","th"]);function Kze(e){return Gze.has(ny(e))}const Yze=[":popover-open",":modal"];function SN(e){return Yze.some(t=>{try{return e.matches(t)}catch{return!1}})}const Xze=["transform","translate","scale","rotate","perspective"],Jze=["transform","translate","scale","rotate","perspective","filter"],Qze=["paint","layout","strict","content"];function y4(e){const t=x4(),r=Bc(e)?zc(e):e;return Xze.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Jze.some(n=>(r.willChange||"").includes(n))||Qze.some(n=>(r.contain||"").includes(n))}function Zze(e){let t=ch(e);for(;ku(t)&&!Cv(t);){if(y4(t))return t;if(SN(t))return null;t=ch(t)}return null}function x4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const eqe=new Set(["html","body","#document"]);function Cv(e){return eqe.has(ny(e))}function zc(e){return wl(e).getComputedStyle(e)}function jN(e){return Bc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ch(e){if(ny(e)==="html")return e;const t=e.assignedSlot||e.parentNode||y7(e)&&e.host||Du(e);return y7(t)?t.host:t}function LJ(e){const t=ch(e);return Cv(t)?e.ownerDocument?e.ownerDocument.body:e.body:ku(t)&&Xb(t)?t:LJ(t)}function ob(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=LJ(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=wl(a);if(i){const l=CO(o);return t.concat(o,o.visualViewport||[],Xb(a)?a:[],l&&r?ob(l):[])}return t.concat(a,ob(a,[],r))}function CO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $J(e){const t=zc(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ku(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=xS(r)!==i||xS(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function b4(e){return Bc(e)?e:e.contextElement}function Tg(e){const t=b4(e);if(!ku(t))return Su(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=$J(t);let o=(i?xS(r.width):r.width)/n,l=(i?xS(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const tqe=Su(0);function FJ(e){const t=wl(e);return!x4()||!t.visualViewport?tqe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rqe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==wl(e)?!1:t}function Qm(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=b4(e);let o=Su(1);t&&(n?Bc(n)&&(o=Tg(n)):o=Tg(e));const l=rqe(i,r,n)?FJ(i):Su(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=wl(i),m=n&&Bc(n)?wl(n):n;let g=h,p=CO(g);for(;p&&n&&m!==g;){const y=Tg(p),x=p.getBoundingClientRect(),b=zc(p),w=x.left+(p.clientLeft+parseFloat(b.paddingLeft))*y.x,S=x.top+(p.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,f*=y.y,c+=w,u+=S,g=wl(p),p=CO(g)}}return wS({width:d,height:f,x:c,y:u})}function w4(e,t){const r=jN(e).scrollLeft;return t?t.left+r:Qm(Du(e)).left+r}function BJ(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:w4(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function nqe(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Du(n),l=t?SN(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Su(1);const d=Su(0),f=ku(n);if((f||!f&&!i)&&((ny(n)!=="body"||Xb(o))&&(c=jN(n)),ku(n))){const m=Qm(n);u=Tg(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?BJ(o,c,!0):Su(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function aqe(e){return Array.from(e.getClientRects())}function iqe(e){const t=Du(e),r=jN(e),n=e.ownerDocument.body,a=fl(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=fl(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+w4(e);const l=-r.scrollTop;return zc(n).direction==="rtl"&&(o+=fl(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function oqe(e,t){const r=wl(e),n=Du(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=x4();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const sqe=new Set(["absolute","fixed"]);function lqe(e,t){const r=Qm(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=ku(e)?Tg(e):Su(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function x7(e,t,r){let n;if(t==="viewport")n=oqe(e,r);else if(t==="document")n=iqe(Du(e));else if(Bc(t))n=lqe(t,r);else{const a=FJ(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return wS(n)}function zJ(e,t){const r=ch(e);return r===t||!Bc(r)||Cv(r)?!1:zc(r).position==="fixed"||zJ(r,t)}function cqe(e,t){const r=t.get(e);if(r)return r;let n=ob(e,[],!1).filter(l=>Bc(l)&&ny(l)!=="body"),a=null;const i=zc(e).position==="fixed";let o=i?ch(e):e;for(;Bc(o)&&!Cv(o);){const l=zc(o),c=y4(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&sqe.has(a.position)||Xb(o)&&!c&&zJ(e,o))?n=n.filter(d=>d!==o):a=l,o=ch(o)}return t.set(e,n),n}function uqe(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?SN(t)?[]:cqe(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=x7(t,d,a);return u.top=fl(f.top,u.top),u.right=lh(f.right,u.right),u.bottom=lh(f.bottom,u.bottom),u.left=fl(f.left,u.left),u},x7(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function dqe(e){const{width:t,height:r}=$J(e);return{width:t,height:r}}function fqe(e,t,r){const n=ku(t),a=Du(t),i=r==="fixed",o=Qm(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Su(0);function u(){c.x=w4(a)}if(n||!n&&!i)if((ny(t)!=="body"||Xb(a))&&(l=jN(t)),n){const m=Qm(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?BJ(a,l):Su(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function uA(e){return zc(e).position==="static"}function b7(e,t){if(!ku(e)||zc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Du(e)===r&&(r=r.ownerDocument.body),r}function qJ(e,t){const r=wl(e);if(SN(e))return r;if(!ku(e)){let a=ch(e);for(;a&&!Cv(a);){if(Bc(a)&&!uA(a))return a;a=ch(a)}return r}let n=b7(e,t);for(;n&&Kze(n)&&uA(n);)n=b7(n,t);return n&&Cv(n)&&uA(n)&&!y4(n)?r:n||Zze(e)||r}const hqe=async function(e){const t=this.getOffsetParent||qJ,r=this.getDimensions,n=await r(e.floating);return{reference:fqe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mqe(e){return zc(e).direction==="rtl"}const pqe={convertOffsetParentRelativeRectToViewportRelativeRect:nqe,getDocumentElement:Du,getClippingRect:uqe,getOffsetParent:qJ,getElementRects:hqe,getClientRects:aqe,getDimensions:dqe,getScale:Tg,isElement:Bc,isRTL:mqe};function UJ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gqe(e,t){let r=null,n;const a=Du(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=Ew(f),p=Ew(a.clientWidth-(d+h)),y=Ew(a.clientHeight-(f+m)),x=Ew(d),w={rootMargin:-g+"px "+-p+"px "+-y+"px "+-x+"px",threshold:fl(0,lh(1,c))||1};let S=!0;function j(A){const P=A[0].intersectionRatio;if(P!==c){if(!S)return o();P?o(!1,P):n=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!UJ(u,e.getBoundingClientRect())&&o(),S=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function vqe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=b4(e),d=a||i?[...u?ob(u):[],...ob(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const f=u&&l?gqe(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?Qm(e):null;c&&y();function y(){const x=Qm(e);p&&!UJ(p,x)&&r(),p=x,g=requestAnimationFrame(y)}return r(),()=>{var x;d.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f?.(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const yqe=qze,xqe=Uze,bqe=Fze,wqe=Vze,_qe=Bze,w7=$ze,Sqe=Wze,jqe=(e,t,r)=>{const n=new Map,a={platform:pqe,...r},i={...a.platform,_c:n};return Lze(e,t,{...a,platform:i})};var Nqe=typeof document<"u",Cqe=function(){},p2=Nqe?v.useLayoutEffect:Cqe;function _S(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!_S(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!_S(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function WJ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _7(e,t){const r=WJ(e);return Math.round(t*r)/r}function dA(e){const t=v.useRef(e);return p2(()=>{t.current=e}),t}function Aqe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=v.useState(n);_S(h,n)||m(n);const[g,p]=v.useState(null),[y,x]=v.useState(null),b=v.useCallback($=>{$!==A.current&&(A.current=$,p($))},[]),w=v.useCallback($=>{$!==P.current&&(P.current=$,x($))},[]),S=i||g,j=o||y,A=v.useRef(null),P=v.useRef(null),C=v.useRef(d),E=c!=null,R=dA(c),k=dA(a),T=dA(u),I=v.useCallback(()=>{if(!A.current||!P.current)return;const $={placement:t,strategy:r,middleware:h};k.current&&($.platform=k.current),jqe(A.current,P.current,$).then(G=>{const me={...G,isPositioned:T.current!==!1};M.current&&!_S(C.current,me)&&(C.current=me,gh.flushSync(()=>{f(me)}))})},[h,t,r,k,T]);p2(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[u]);const M=v.useRef(!1);p2(()=>(M.current=!0,()=>{M.current=!1}),[]),p2(()=>{if(S&&(A.current=S),j&&(P.current=j),S&&j){if(R.current)return R.current(S,j,I);I()}},[S,j,I,R,E]);const z=v.useMemo(()=>({reference:A,floating:P,setReference:b,setFloating:w}),[b,w]),W=v.useMemo(()=>({reference:S,floating:j}),[S,j]),U=v.useMemo(()=>{const $={position:r,left:0,top:0};if(!W.floating)return $;const G=_7(W.floating,d.x),me=_7(W.floating,d.y);return l?{...$,transform:"translate("+G+"px, "+me+"px)",...WJ(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:G,top:me}},[r,l,W.floating,d.x,d.y]);return v.useMemo(()=>({...d,update:I,refs:z,elements:W,floatingStyles:U}),[d,I,z,W,U])}const Pqe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?w7({element:n.current,padding:a}).fn(r):{}:n?w7({element:n,padding:a}).fn(r):{}}}},Eqe=(e,t)=>({...yqe(e),options:[e,t]}),kqe=(e,t)=>({...xqe(e),options:[e,t]}),Oqe=(e,t)=>({...Sqe(e),options:[e,t]}),Tqe=(e,t)=>({...bqe(e),options:[e,t]}),Iqe=(e,t)=>({...wqe(e),options:[e,t]}),Dqe=(e,t)=>({..._qe(e),options:[e,t]}),Mqe=(e,t)=>({...Pqe(e),options:[e,t]});var Rqe="Arrow",VJ=v.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Vr.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});VJ.displayName=Rqe;var Lqe=VJ;function HJ(e){const[t,r]=v.useState(void 0);return To(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var _4="Popper",[GJ,ay]=ic(_4),[$qe,KJ]=GJ(_4),YJ=e=>{const{__scopePopper:t,children:r}=e,[n,a]=v.useState(null);return s.jsx($qe,{scope:t,anchor:n,onAnchorChange:a,children:r})};YJ.displayName=_4;var XJ="PopperAnchor",JJ=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=KJ(XJ,r),o=v.useRef(null),l=Ln(t,o),c=v.useRef(null);return v.useEffect(()=>{const u=c.current;c.current=n?.current||o.current,u!==c.current&&i.onAnchorChange(c.current)}),n?null:s.jsx(Vr.div,{...a,ref:l})});JJ.displayName=XJ;var S4="PopperContent",[Fqe,Bqe]=GJ(S4),QJ=v.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,y=KJ(S4,r),[x,b]=v.useState(null),w=Ln(t,Z=>b(Z)),[S,j]=v.useState(null),A=HJ(S),P=A?.width??0,C=A?.height??0,E=n+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],T=k.length>0,I={padding:R,boundary:k.filter(qqe),altBoundary:T},{refs:M,floatingStyles:z,placement:W,isPositioned:U,middlewareData:$}=Aqe({strategy:"fixed",placement:E,whileElementsMounted:(...Z)=>vqe(...Z,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Eqe({mainAxis:a+C,alignmentAxis:o}),c&&kqe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Oqe():void 0,...I}),c&&Tqe({...I}),Iqe({...I,apply:({elements:Z,rects:ge,availableWidth:re,availableHeight:Se})=>{const{width:Ie,height:pe}=ge.reference,Ue=Z.floating.style;Ue.setProperty("--radix-popper-available-width",`${re}px`),Ue.setProperty("--radix-popper-available-height",`${Se}px`),Ue.setProperty("--radix-popper-anchor-width",`${Ie}px`),Ue.setProperty("--radix-popper-anchor-height",`${pe}px`)}}),S&&Mqe({element:S,padding:l}),Uqe({arrowWidth:P,arrowHeight:C}),h&&Dqe({strategy:"referenceHidden",...I})]}),[G,me]=tQ(W),de=qs(g);To(()=>{U&&de?.()},[U,de]);const L=$.arrow?.x,B=$.arrow?.y,X=$.arrow?.centerOffset!==0,[q,Y]=v.useState();return To(()=>{x&&Y(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:U?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(Fqe,{scope:r,placedSide:G,onArrowChange:j,arrowX:L,arrowY:B,shouldHideArrow:X,children:s.jsx(Vr.div,{"data-side":G,"data-align":me,...p,ref:w,style:{...p.style,animation:U?void 0:"none"}})})})});QJ.displayName=S4;var ZJ="PopperArrow",zqe={top:"bottom",right:"left",bottom:"top",left:"right"},eQ=v.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=Bqe(ZJ,n),o=zqe[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(Lqe,{...a,ref:r,style:{...a.style,display:"block"}})})});eQ.displayName=ZJ;function qqe(e){return e!==null}var Uqe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=tQ(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(a.arrow?.x??0)+l/2,m=(a.arrow?.y??0)+c/2;let g="",p="";return u==="bottom"?(g=o?f:`${h}px`,p=`${-c}px`):u==="top"?(g=o?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:g,y:p}}}});function tQ(e){const[t,r="center"]=e.split("-");return[t,r]}var j4=YJ,NN=JJ,N4=QJ,C4=eQ,CN="Popover",[rQ,jat]=ic(CN,[ay]),Jb=ay(),[Wqe,Ch]=rQ(CN),nQ=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Jb(t),c=v.useRef(null),[u,d]=v.useState(!1),[f,h]=Id({prop:n,defaultProp:a??!1,onChange:i,caller:CN});return s.jsx(j4,{...l,children:s.jsx(Wqe,{scope:t,contentId:Dc(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:v.useCallback(()=>d(!0),[]),onCustomAnchorRemove:v.useCallback(()=>d(!1),[]),modal:o,children:r})})};nQ.displayName=CN;var aQ="PopoverAnchor",Vqe=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ch(aQ,r),i=Jb(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return v.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(NN,{...i,...n,ref:t})});Vqe.displayName=aQ;var iQ="PopoverTrigger",oQ=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ch(iQ,r),i=Jb(r),o=Ln(t,a.triggerRef),l=s.jsx(Vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":dQ(a.open),...n,ref:o,onClick:cr(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(NN,{asChild:!0,...i,children:l})});oQ.displayName=iQ;var A4="PopoverPortal",[Hqe,Gqe]=rQ(A4,{forceMount:void 0}),sQ=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Ch(A4,t);return s.jsx(Hqe,{scope:t,forceMount:r,children:s.jsx(Pl,{present:r||i.open,children:s.jsx(Bv,{asChild:!0,container:a,children:n})})})};sQ.displayName=A4;var Av="PopoverContent",lQ=v.forwardRef((e,t)=>{const r=Gqe(Av,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Ch(Av,e.__scopePopover);return s.jsx(Pl,{present:n||i.open,children:i.modal?s.jsx(Yqe,{...a,ref:t}):s.jsx(Xqe,{...a,ref:t})})});lQ.displayName=Av;var Kqe=ah("PopoverContent.RemoveScroll"),Yqe=v.forwardRef((e,t)=>{const r=Ch(Av,e.__scopePopover),n=v.useRef(null),a=Ln(t,n),i=v.useRef(!1);return v.useEffect(()=>{const o=n.current;if(o)return _j(o)},[]),s.jsx(wj,{as:Kqe,allowPinchZoom:!0,children:s.jsx(cQ,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cr(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:cr(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:cr(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Xqe=v.forwardRef((e,t)=>{const r=Ch(Av,e.__scopePopover),n=v.useRef(!1),a=v.useRef(!1);return s.jsx(cQ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),cQ=v.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Ch(Av,r),m=Jb(r);return xj(),s.jsx($b,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Fv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(N4,{"data-state":dQ(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),uQ="PopoverClose",Jqe=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ch(uQ,r);return s.jsx(Vr.button,{type:"button",...n,ref:t,onClick:cr(e.onClick,()=>a.onOpenChange(!1))})});Jqe.displayName=uQ;var Qqe="PopoverArrow",Zqe=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Jb(r);return s.jsx(C4,{...a,...n,ref:t})});Zqe.displayName=Qqe;function dQ(e){return e?"open":"closed"}var e9e=nQ,t9e=oQ,r9e=sQ,fQ=lQ;const Fd=e9e,Bd=t9e,Ou=le.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(r9e,{children:s.jsx(fQ,{ref:a,align:t,sideOffset:r,className:Ot("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ou.displayName=fQ.displayName;var Gr=function(){return Gr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Gr.apply(this,arguments)};function n9e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function hQ(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Qb(e){return e.mode==="multiple"}function Zb(e){return e.mode==="range"}function AN(e){return e.mode==="single"}var a9e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function i9e(e,t){return Rr(e,"LLLL y",t)}function o9e(e,t){return Rr(e,"d",t)}function s9e(e,t){return Rr(e,"LLLL",t)}function l9e(e){return"".concat(e)}function c9e(e,t){return Rr(e,"cccccc",t)}function u9e(e,t){return Rr(e,"yyyy",t)}var d9e=Object.freeze({__proto__:null,formatCaption:i9e,formatDay:o9e,formatMonthCaption:s9e,formatWeekNumber:l9e,formatWeekdayName:c9e,formatYearCaption:u9e}),f9e=function(e,t,r){return Rr(e,"do MMMM (EEEE)",r)},h9e=function(){return"Month: "},m9e=function(){return"Go to next month"},p9e=function(){return"Go to previous month"},g9e=function(e,t){return Rr(e,"cccc",t)},v9e=function(e){return"Week n. ".concat(e)},y9e=function(){return"Year: "},x9e=Object.freeze({__proto__:null,labelDay:f9e,labelMonthDropdown:h9e,labelNext:m9e,labelPrevious:p9e,labelWeekNumber:v9e,labelWeekday:g9e,labelYearDropdown:y9e});function b9e(){var e="buttons",t=a9e,r=OJ,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:d9e,labels:x9e,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function w9e(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Bs(n):t&&(i=new Date(t,0,1)),a?o=f4(a):r&&(o=new Date(r,11,31)),{fromDate:i?Xl(i):void 0,toDate:o?Xl(o):void 0}}var mQ=v.createContext(void 0);function _9e(e){var t,r=e.initialProps,n=b9e(),a=w9e(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(AN(r)||Qb(r)||Zb(r))&&(c=r.onSelect);var u=Gr(Gr(Gr({},n),r),{captionLayout:l,classNames:Gr(Gr({},n.classNames),r.classNames),components:Gr({},r.components),formatters:Gr(Gr({},n.formatters),r.formatters),fromDate:i,labels:Gr(Gr({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Gr(Gr({},n.modifiers),r.modifiers),modifiersClassNames:Gr(Gr({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Gr(Gr({},n.styles),r.styles),toDate:o});return s.jsx(mQ.Provider,{value:u,children:e.children})}function Ta(){var e=v.useContext(mQ);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function pQ(e){var t=Ta(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function S9e(e){return s.jsx("svg",Gr({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function gQ(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=Ta(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:S9e;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function j9e(e){var t,r=Ta(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(j7e(n,a))for(var h=Bs(n),m=n.getMonth();m<=a.getMonth();m++)f.push(lA(h,m));else for(var h=Bs(new Date),m=0;m<=11;m++)f.push(lA(h,m));var g=function(y){var x=Number(y.target.value),b=lA(Bs(e.displayMonth),x);e.onChange(b)},p=(t=u?.Dropdown)!==null&&t!==void 0?t:gQ;return s.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(y){return s.jsx("option",{value:y.getMonth(),children:l(y,{locale:o})},y.getMonth())})})}function N9e(e){var t,r=e.displayMonth,n=Ta(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),p=m;p<=g;p++)h.push(d7(eBe(new Date),p));var y=function(b){var w=d7(Bs(r),Number(b.target.value));e.onChange(w)},x=(t=u?.Dropdown)!==null&&t!==void 0?t:gQ;return s.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:y,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(b){return s.jsx("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function C9e(e,t){var r=v.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function A9e(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&ab(i,a)<0){var u=-1*(c-1);a=$c(i,u)}return o&&ab(a,o)<0&&(a=o),Bs(a)}function P9e(){var e=Ta(),t=A9e(e),r=C9e(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Bs(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function E9e(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Bs(e),i=Bs($c(a,n)),o=ab(i,a),l=[],c=0;c<o;c++){var u=$c(a,c);l.push(u)}return r&&(l=l.reverse()),l}function k9e(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Bs(e);if(!r)return $c(l,o);var c=ab(r,e);if(!(c<i))return $c(l,o)}}function O9e(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Bs(e);if(!r)return $c(l,-o);var c=ab(l,r);if(!(c<=0))return $c(l,-o)}}var vQ=v.createContext(void 0);function T9e(e){var t=Ta(),r=P9e(),n=r[0],a=r[1],i=E9e(n,t),o=k9e(n,t),l=O9e(n,t),c=function(f){return i.some(function(h){return m4(f,h)})},u=function(f,h){c(f)||(h&&TJ(f,h)?a($c(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(vQ.Provider,{value:d,children:e.children})}function e1(){var e=v.useContext(vQ);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function S7(e){var t,r=Ta(),n=r.classNames,a=r.styles,i=r.components,o=e1().goToMonth,l=function(d){o($c(d,e.displayIndex?-e.displayIndex:0))},c=(t=i?.CaptionLabel)!==null&&t!==void 0?t:pQ,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(j9e,{onChange:l,displayMonth:e.displayMonth}),s.jsx(N9e,{onChange:l,displayMonth:e.displayMonth})]})}function I9e(e){return s.jsx("svg",Gr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function D9e(e){return s.jsx("svg",Gr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var SS=v.forwardRef(function(e,t){var r=Ta(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=Gr(Gr({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Gr({},e,{ref:t,type:"button",className:o,style:l}))});function M9e(e){var t,r,n=Ta(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:i}),p=[o.nav_button,o.nav_button_next].join(" "),y=(t=f?.IconRight)!==null&&t!==void 0?t:D9e,x=(r=f?.IconLeft)!==null&&r!==void 0?r:I9e;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(SS,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(y,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(SS,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(y,{className:o.nav_icon,style:l.nav_icon})})]})}function j7(e){var t=Ta().numberOfMonths,r=e1(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return m4(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(M9e,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function R9e(e){var t,r=Ta(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:pQ,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(S7,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(S7,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(j7,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(j7,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function L9e(e){var t=Ta(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function $9e(e,t,r){for(var n=r?Jm(new Date):Fc(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=Ii(n,i);a.push(o)}return a}function F9e(){var e=Ta(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=$9e(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function B9e(){var e,t=Ta(),r=t.classNames,n=t.styles,a=t.components,i=(e=a?.HeadRow)!==null&&e!==void 0?e:F9e;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function z9e(e){var t=Ta(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var P4=v.createContext(void 0);function q9e(e){if(!Qb(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(P4.Provider,{value:t,children:e.children})}return s.jsx(U9e,{initialProps:e.initialProps,children:e.children})}function U9e(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&n?.length===a);if(!g){var p=!!(!d.selected&&i&&n?.length===i);if(!p){var y=n?hQ([],n,!0):[];if(d.selected){var x=y.findIndex(function(b){return vs(u,b)});y.splice(x,1)}else y.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,y,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return vs(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(P4.Provider,{value:c,children:r})}function E4(){var e=v.useContext(P4);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function W9e(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?vs(a,e)&&vs(n,e)?void 0:vs(a,e)?{from:a,to:void 0}:vs(n,e)?void 0:SO(n,e)?{from:e,to:a}:{from:n,to:e}:a?SO(e,a)?{from:a,to:e}:{from:e,to:a}:n?TJ(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var k4=v.createContext(void 0);function V9e(e){if(!Zb(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(k4.Provider,{value:t,children:e.children})}return s.jsx(H9e,{initialProps:e.initialProps,children:e.children})}function H9e(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,p){var y,x;(y=t.onDayClick)===null||y===void 0||y.call(t,m,g,p);var b=W9e(m,n);(x=t.onSelect)===null||x===void 0||x.call(t,b,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],vs(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:m2(i,l-1),before:Ii(i,l-1)}),i&&o&&d.disabled.push({after:i,before:Ii(i,l-1)}),!i&&o&&d.disabled.push({after:m2(o,l-1),before:Ii(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:Ii(i,-c+1)}),d.disabled.push({after:Ii(i,c-1)})),i&&o){var f=dd(o,i)+1,h=c-f;d.disabled.push({before:m2(i,h)}),d.disabled.push({after:Ii(o,h)})}!i&&o&&(d.disabled.push({before:Ii(o,-c+1)}),d.disabled.push({after:Ii(o,c-1)}))}return s.jsx(k4.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function O4(){var e=v.useContext(k4);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function g2(e){return Array.isArray(e)?hQ([],e,!0):e!==void 0?[e]:[]}function G9e(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=g2(a)}),t}var qc;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(qc||(qc={}));var K9e=qc.Selected,Hu=qc.Disabled,Y9e=qc.Hidden,X9e=qc.Today,fA=qc.RangeEnd,hA=qc.RangeMiddle,mA=qc.RangeStart,J9e=qc.Outside;function Q9e(e,t,r){var n,a=(n={},n[K9e]=g2(e.selected),n[Hu]=g2(e.disabled),n[Y9e]=g2(e.hidden),n[X9e]=[e.today],n[fA]=[],n[hA]=[],n[mA]=[],n[J9e]=[],n);return e.fromDate&&a[Hu].push({before:e.fromDate}),e.toDate&&a[Hu].push({after:e.toDate}),Qb(e)?a[Hu]=a[Hu].concat(t.modifiers[Hu]):Zb(e)&&(a[Hu]=a[Hu].concat(r.modifiers[Hu]),a[mA]=r.modifiers[mA],a[hA]=r.modifiers[hA],a[fA]=r.modifiers[fA]),a}var yQ=v.createContext(void 0);function Z9e(e){var t=Ta(),r=E4(),n=O4(),a=Q9e(t,r,n),i=G9e(t.modifiers),o=Gr(Gr({},a),i);return s.jsx(yQ.Provider,{value:o,children:e.children})}function xQ(){var e=v.useContext(yQ);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function eUe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function tUe(e){return!!(e&&typeof e=="object"&&"from"in e)}function rUe(e){return!!(e&&typeof e=="object"&&"after"in e)}function nUe(e){return!!(e&&typeof e=="object"&&"before"in e)}function aUe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function iUe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=dd(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=dd(e,n)>=0&&dd(a,e)>=0;return o}return a?vs(a,e):n?vs(n,e):!1}function oUe(e){return d4(e)}function sUe(e){return Array.isArray(e)&&e.every(d4)}function lUe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(oUe(r))return vs(e,r);if(sUe(r))return r.includes(e);if(tUe(r))return iUe(e,r);if(aUe(r))return r.dayOfWeek.includes(e.getDay());if(eUe(r)){var n=dd(r.before,e),a=dd(r.after,e),i=n>0,o=a<0,l=SO(r.before,r.after);return l?o&&i:i||o}return rUe(r)?dd(e,r.after)>0:nUe(r)?dd(r.before,e)>0:typeof r=="function"?r(e):!1})}function T4(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return lUe(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!m4(e,r)&&(a.outside=!0),a}function cUe(e,t){for(var r=Bs(e[0]),n=f4(e[e.length-1]),a,i,o=r;o<=n;){var l=T4(o,t),c=!l.disabled&&!l.hidden;if(!c){o=Ii(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=Ii(o,1)}return i||a}var uUe=365;function bQ(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:Ii,week:_O,month:$c,year:K8e,startOfWeek:function(y){return a.ISOWeek?Jm(y):Fc(y,{locale:f,weekStartsOn:c})},endOfWeek:function(y){return a.ISOWeek?CJ(y):h4(y,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=Y8e([u,m]):n==="after"&&d&&(m=X8e([d,m]));var g=!0;if(i){var p=T4(m,i);g=!p.disabled&&!p.hidden}return g?m:l.count>uUe?l.lastFocused:bQ(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:Gr(Gr({},l),{count:l.count+1})})}var wQ=v.createContext(void 0);function dUe(e){var t=e1(),r=xQ(),n=v.useState(),a=n[0],i=n[1],o=v.useState(),l=o[0],c=o[1],u=cUe(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(y){i(y)},m=Ta(),g=function(y,x){if(a){var b=bQ(a,{moveBy:y,direction:x,context:m,modifiers:r});vs(a,b)||(t.goToDate(b,a),h(b))}},p={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(wQ.Provider,{value:p,children:e.children})}function I4(){var e=v.useContext(wQ);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function fUe(e,t){var r=xQ(),n=T4(e,r,t);return n}var D4=v.createContext(void 0);function hUe(e){if(!AN(e.initialProps)){var t={selected:void 0};return s.jsx(D4.Provider,{value:t,children:e.children})}return s.jsx(mUe,{initialProps:e.initialProps,children:e.children})}function mUe(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(D4.Provider,{value:a,children:r})}function _Q(){var e=v.useContext(D4);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function pUe(e,t){var r=Ta(),n=_Q(),a=E4(),i=O4(),o=I4(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,p=o.focusYearBefore,y=o.focusYearAfter,x=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(U){var $,G,me,de;AN(r)?($=n.onDayClick)===null||$===void 0||$.call(n,e,t,U):Qb(r)?(G=a.onDayClick)===null||G===void 0||G.call(a,e,t,U):Zb(r)?(me=i.onDayClick)===null||me===void 0||me.call(i,e,t,U):(de=r.onDayClick)===null||de===void 0||de.call(r,e,t,U)},S=function(U){var $;h(e),($=r.onDayFocus)===null||$===void 0||$.call(r,e,t,U)},j=function(U){var $;f(),($=r.onDayBlur)===null||$===void 0||$.call(r,e,t,U)},A=function(U){var $;($=r.onDayMouseEnter)===null||$===void 0||$.call(r,e,t,U)},P=function(U){var $;($=r.onDayMouseLeave)===null||$===void 0||$.call(r,e,t,U)},C=function(U){var $;($=r.onDayPointerEnter)===null||$===void 0||$.call(r,e,t,U)},E=function(U){var $;($=r.onDayPointerLeave)===null||$===void 0||$.call(r,e,t,U)},R=function(U){var $;($=r.onDayTouchCancel)===null||$===void 0||$.call(r,e,t,U)},k=function(U){var $;($=r.onDayTouchEnd)===null||$===void 0||$.call(r,e,t,U)},T=function(U){var $;($=r.onDayTouchMove)===null||$===void 0||$.call(r,e,t,U)},I=function(U){var $;($=r.onDayTouchStart)===null||$===void 0||$.call(r,e,t,U)},M=function(U){var $;($=r.onDayKeyUp)===null||$===void 0||$.call(r,e,t,U)},z=function(U){var $;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?p():m();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?y():g();break;case"Home":U.preventDefault(),U.stopPropagation(),x();break;case"End":U.preventDefault(),U.stopPropagation(),b();break}($=r.onDayKeyDown)===null||$===void 0||$.call(r,e,t,U)},W={onClick:w,onFocus:S,onBlur:j,onKeyDown:z,onKeyUp:M,onMouseEnter:A,onMouseLeave:P,onPointerEnter:C,onPointerLeave:E,onTouchCancel:R,onTouchEnd:k,onTouchMove:T,onTouchStart:I};return W}function gUe(){var e=Ta(),t=_Q(),r=E4(),n=O4(),a=AN(e)?t.selected:Qb(e)?r.selected:Zb(e)?n.selected:void 0;return a}function vUe(e){return Object.values(qc).includes(e)}function yUe(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(vUe(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function xUe(e,t){var r=Gr({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=Gr(Gr({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function bUe(e,t,r){var n,a,i,o=Ta(),l=I4(),c=fUe(e,t),u=pUe(e,c),d=gUe(),f=!!(o.onDayClick||o.mode!=="default");v.useEffect(function(){var A;c.outside||l.focusedDay&&f&&vs(l.focusedDay,e)&&((A=r.current)===null||A===void 0||A.focus())},[l.focusedDay,e,r,f,c.outside]);var h=yUe(o,c).join(" "),m=xUe(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:z9e,y=s.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),x={style:m,className:h,children:y,role:"gridcell"},b=l.focusTarget&&vs(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&vs(l.focusedDay,e),S=Gr(Gr(Gr({},x),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||b?0:-1,n)),u),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:S,divProps:x};return j}function wUe(e){var t=v.useRef(null),r=bUe(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(SS,Gr({name:"day",ref:t},r.buttonProps)):s.jsx("div",Gr({},r.divProps))}function _Ue(e){var t=e.number,r=e.dates,n=Ta(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return s.jsx(SS,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function SUe(e){var t,r,n=Ta(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l?.Day)!==null&&t!==void 0?t:wUe,u=(r=l?.WeekNumber)!==null&&r!==void 0?r:_Ue,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},h7e(f))})]})}function N7(e,t,r){for(var n=r?.ISOWeek?CJ(t):h4(t,r),a=r?.ISOWeek?Jm(e):Fc(e,r),i=dd(n,a),o=[],l=0;l<=i;l++)o.push(Ii(a,l));var c=o.reduce(function(u,d){var f=r?.ISOWeek?d7e(d):v7e(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function jUe(e,t){var r=N7(Bs(e),f4(e),t);if(t?.useFixedWeeks){var n=x7e(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=_O(i,6-n),l=N7(_O(i,1),o,t);r.push.apply(r,l)}}return r}function NUe(e){var t,r,n,a=Ta(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=jUe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d?.Head)!==null&&t!==void 0?t:B9e,y=(r=d?.Row)!==null&&r!==void 0?r:SUe,x=(n=d?.Footer)!==null&&n!==void 0?n:L9e;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(p,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return s.jsx(y,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),s.jsx(x,{displayMonth:e.displayMonth})]})}function CUe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var AUe=CUe()?v.useLayoutEffect:v.useEffect,pA=!1,PUe=0;function C7(){return"react-day-picker-".concat(++PUe)}function EUe(e){var t,r=e??(pA?C7():null),n=v.useState(r),a=n[0],i=n[1];return AUe(function(){a===null&&i(C7())},[]),v.useEffect(function(){pA===!1&&(pA=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function kUe(e){var t,r,n=Ta(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=e1().displayMonths,u=EUe(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=Gr(Gr({},h),o.caption_start)),g&&(f.push(i.caption_end),h=Gr(Gr({},h),o.caption_end)),p&&(f.push(i.caption_between),h=Gr(Gr({},h),o.caption_between));var y=(r=l?.Caption)!==null&&r!==void 0?r:R9e;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(NUe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function OUe(e){var t=Ta(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function TUe(e){var t,r,n=e.initialProps,a=Ta(),i=I4(),o=e1(),l=v.useState(!1),c=l[0],u=l[1];v.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=Gr(Gr({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var y;return Gr(Gr({},g),(y={},y[p]=n[p],y))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:OUe;return s.jsx("div",Gr({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(g,p){return s.jsx(kUe,{displayIndex:p,displayMonth:g},p)})})}))}function IUe(e){var t=e.children,r=n9e(e,["children"]);return s.jsx(_9e,{initialProps:r,children:s.jsx(T9e,{children:s.jsx(hUe,{initialProps:r,children:s.jsx(q9e,{initialProps:r,children:s.jsx(V9e,{initialProps:r,children:s.jsx(Z9e,{children:s.jsx(dUe,{children:t})})})})})})})}function AO(e){return s.jsx(IUe,Gr({},e,{children:s.jsx(TUe,{initialProps:e})}))}function ju({className:e,classNames:t,showOutsideDays:r=!0,weekStartsOn:n=1,locale:a=Zu,...i}){const o=["dom","seg","ter","qua","qui","sex","sb"];return s.jsx(AO,{showOutsideDays:r,weekStartsOn:n,locale:a,className:Ot("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ot(v0({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ot(v0({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},formatters:{formatWeekdayName:(l,c)=>o[l.getDay()]},components:{IconLeft:({...l})=>s.jsx($W,{className:"h-4 w-4"}),IconRight:({...l})=>s.jsx(cj,{className:"h-4 w-4"})},...i})}ju.displayName="Calendar";var SQ="AlertDialog",[DUe,Nat]=ic(SQ,[kH]),Gd=kH(),jQ=e=>{const{__scopeAlertDialog:t,...r}=e,n=Gd(t);return s.jsx(HH,{...n,...r,modal:!0})};jQ.displayName=SQ;var MUe="AlertDialogTrigger",NQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(Npe,{...a,...n,ref:t})});NQ.displayName=MUe;var RUe="AlertDialogPortal",CQ=e=>{const{__scopeAlertDialog:t,...r}=e,n=Gd(t);return s.jsx(GH,{...n,...r})};CQ.displayName=RUe;var LUe="AlertDialogOverlay",AQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(KI,{...a,...n,ref:t})});AQ.displayName=LUe;var Ig="AlertDialogContent",[$Ue,FUe]=DUe(Ig),BUe=Jhe("AlertDialogContent"),PQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Gd(r),o=v.useRef(null),l=Ln(t,o),c=v.useRef(null);return s.jsx(wpe,{contentName:Ig,titleName:EQ,docsSlug:"alert-dialog",children:s.jsx($Ue,{scope:r,cancelRef:c,children:s.jsxs(YI,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:cr(a.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(BUe,{children:n}),s.jsx(qUe,{contentRef:o})]})})})});PQ.displayName=Ig;var EQ="AlertDialogTitle",kQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(XI,{...a,...n,ref:t})});kQ.displayName=EQ;var OQ="AlertDialogDescription",TQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(JI,{...a,...n,ref:t})});TQ.displayName=OQ;var zUe="AlertDialogAction",IQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(jj,{...a,...n,ref:t})});IQ.displayName=zUe;var DQ="AlertDialogCancel",MQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=FUe(DQ,r),i=Gd(r),o=Ln(t,a);return s.jsx(jj,{...i,...n,ref:o})});MQ.displayName=DQ;var qUe=({contentRef:e})=>{const t=`\`${Ig}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ig}\` by passing a \`${OQ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ig}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},UUe=jQ,WUe=NQ,VUe=CQ,RQ=AQ,LQ=PQ,$Q=IQ,FQ=MQ,BQ=kQ,zQ=TQ;const kf=UUe,ym=WUe,HUe=VUe,qQ=le.forwardRef(({className:e,...t},r)=>s.jsx(RQ,{className:Ot("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));qQ.displayName=RQ.displayName;const fd=le.forwardRef(({className:e,...t},r)=>s.jsxs(HUe,{children:[s.jsx(qQ,{}),s.jsx(LQ,{ref:r,className:Ot("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));fd.displayName=LQ.displayName;const hd=({className:e,...t})=>s.jsx("div",{className:Ot("flex flex-col space-y-2 text-center sm:text-left",e),...t});hd.displayName="AlertDialogHeader";const md=({className:e,...t})=>s.jsx("div",{className:Ot("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});md.displayName="AlertDialogFooter";const pd=le.forwardRef(({className:e,...t},r)=>s.jsx(BQ,{ref:r,className:Ot("text-lg font-semibold",e),...t}));pd.displayName=BQ.displayName;const gd=le.forwardRef(({className:e,...t},r)=>s.jsx(zQ,{ref:r,className:Ot("text-sm text-muted-foreground",e),...t}));gd.displayName=zQ.displayName;const vd=le.forwardRef(({className:e,...t},r)=>s.jsx($Q,{ref:r,className:Ot(v0(),e),...t}));vd.displayName=$Q.displayName;const yd=le.forwardRef(({className:e,...t},r)=>s.jsx(FQ,{ref:r,className:Ot(v0({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));yd.displayName=FQ.displayName;function A7(e,[t,r]){return Math.min(r,Math.max(t,e))}function PN(e){const t=e+"CollectionProvider",[r,n]=ic(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:x}=p,b=le.useRef(null),w=le.useRef(new Map).current;return s.jsx(a,{scope:y,itemMap:w,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=ah(l),u=le.forwardRef((p,y)=>{const{scope:x,children:b}=p,w=i(l,x),S=Ln(y,w.collectionRef);return s.jsx(c,{ref:S,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=ah(d),m=le.forwardRef((p,y)=>{const{scope:x,children:b,...w}=p,S=le.useRef(null),j=Ln(y,S),A=i(d,x);return le.useEffect(()=>(A.itemMap.set(S,{ref:S,...w}),()=>void A.itemMap.delete(S))),s.jsx(h,{[f]:"",ref:j,children:b})});m.displayName=d;function g(p){const y=i(e+"CollectionConsumer",p);return le.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((A,P)=>w.indexOf(A.ref.current)-w.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,n]}var GUe=v.createContext(void 0);function EN(e){const t=v.useContext(GUe);return e||t||"ltr"}function UQ(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var WQ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),KUe="VisuallyHidden",M4=v.forwardRef((e,t)=>s.jsx(Vr.span,{...e,ref:t,style:{...WQ,...e.style}}));M4.displayName=KUe;var YUe=[" ","Enter","ArrowUp","ArrowDown"],XUe=[" ","Enter"],Zm="Select",[kN,ON,JUe]=PN(Zm),[iy,Cat]=ic(Zm,[JUe,ay]),TN=ay(),[QUe,Ah]=iy(Zm),[ZUe,eWe]=iy(Zm),VQ=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=TN(t),[y,x]=v.useState(null),[b,w]=v.useState(null),[S,j]=v.useState(!1),A=EN(u),[P,C]=Id({prop:n,defaultProp:a??!1,onChange:i,caller:Zm}),[E,R]=Id({prop:o,defaultProp:l,onChange:c,caller:Zm}),k=v.useRef(null),T=y?g||!!y.closest("form"):!0,[I,M]=v.useState(new Set),z=Array.from(I).map(W=>W.props.value).join(";");return s.jsx(j4,{...p,children:s.jsxs(QUe,{required:m,scope:t,trigger:y,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Dc(),value:E,onValueChange:R,open:P,onOpenChange:C,dir:A,triggerPointerDownPosRef:k,disabled:h,children:[s.jsx(kN.Provider,{scope:t,children:s.jsx(ZUe,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(W=>{M(U=>new Set(U).add(W))},[]),onNativeOptionRemove:v.useCallback(W=>{M(U=>{const $=new Set(U);return $.delete(W),$})},[]),children:r})}),T?s.jsxs(hZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:E,onChange:W=>R(W.target.value),disabled:h,form:g,children:[E===void 0?s.jsx("option",{value:""}):null,Array.from(I)]},z):null]})})};VQ.displayName=Zm;var HQ="SelectTrigger",GQ=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=TN(r),o=Ah(HQ,r),l=o.disabled||n,c=Ln(t,o.onTriggerChange),u=ON(r),d=v.useRef("touch"),[f,h,m]=pZ(p=>{const y=u().filter(w=>!w.disabled),x=y.find(w=>w.value===o.value),b=gZ(y,p,x);b!==void 0&&o.onValueChange(b.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(NN,{asChild:!0,...i,children:s.jsx(Vr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":mZ(o.value)?"":void 0,...a,ref:c,onClick:cr(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:cr(a.onPointerDown,p=>{d.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:cr(a.onKeyDown,p=>{const y=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(y&&p.key===" ")&&YUe.includes(p.key)&&(g(),p.preventDefault())})})})});GQ.displayName=HQ;var KQ="SelectValue",YQ=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Ah(KQ,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=Ln(t,c.onValueNodeChange);return To(()=>{u(d)},[u,d]),s.jsx(Vr.span,{...l,ref:f,style:{pointerEvents:"none"},children:mZ(c.value)?s.jsx(s.Fragment,{children:o}):i})});YQ.displayName=KQ;var tWe="SelectIcon",XQ=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Vr.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});XQ.displayName=tWe;var rWe="SelectPortal",JQ=e=>s.jsx(Bv,{asChild:!0,...e});JQ.displayName=rWe;var ep="SelectContent",QQ=v.forwardRef((e,t)=>{const r=Ah(ep,e.__scopeSelect),[n,a]=v.useState();if(To(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?gh.createPortal(s.jsx(ZQ,{scope:e.__scopeSelect,children:s.jsx(kN.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(eZ,{...e,ref:t})});QQ.displayName=ep;var bc=10,[ZQ,Ph]=iy(ep),nWe="SelectContentImpl",aWe=ah("SelectContent.RemoveScroll"),eZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:y,...x}=e,b=Ah(ep,r),[w,S]=v.useState(null),[j,A]=v.useState(null),P=Ln(t,Z=>S(Z)),[C,E]=v.useState(null),[R,k]=v.useState(null),T=ON(r),[I,M]=v.useState(!1),z=v.useRef(!1);v.useEffect(()=>{if(w)return _j(w)},[w]),xj();const W=v.useCallback(Z=>{const[ge,...re]=T().map(pe=>pe.ref.current),[Se]=re.slice(-1),Ie=document.activeElement;for(const pe of Z)if(pe===Ie||(pe?.scrollIntoView({block:"nearest"}),pe===ge&&j&&(j.scrollTop=0),pe===Se&&j&&(j.scrollTop=j.scrollHeight),pe?.focus(),document.activeElement!==Ie))return},[T,j]),U=v.useCallback(()=>W([C,w]),[W,C,w]);v.useEffect(()=>{I&&U()},[I,U]);const{onOpenChange:$,triggerPointerDownPosRef:G}=b;v.useEffect(()=>{if(w){let Z={x:0,y:0};const ge=Se=>{Z={x:Math.abs(Math.round(Se.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(Se.pageY)-(G.current?.y??0))}},re=Se=>{Z.x<=10&&Z.y<=10?Se.preventDefault():w.contains(Se.target)||$(!1),document.removeEventListener("pointermove",ge),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",re,{capture:!0})}}},[w,$,G]),v.useEffect(()=>{const Z=()=>$(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[$]);const[me,de]=pZ(Z=>{const ge=T().filter(Ie=>!Ie.disabled),re=ge.find(Ie=>Ie.ref.current===document.activeElement),Se=gZ(ge,Z,re);Se&&setTimeout(()=>Se.ref.current.focus())}),L=v.useCallback((Z,ge,re)=>{const Se=!z.current&&!re;(b.value!==void 0&&b.value===ge||Se)&&(E(Z),Se&&(z.current=!0))},[b.value]),B=v.useCallback(()=>w?.focus(),[w]),X=v.useCallback((Z,ge,re)=>{const Se=!z.current&&!re;(b.value!==void 0&&b.value===ge||Se)&&k(Z)},[b.value]),q=n==="popper"?PO:tZ,Y=q===PO?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:y}:{};return s.jsx(ZQ,{scope:r,content:w,viewport:j,onViewportChange:A,itemRefCallback:L,selectedItem:C,onItemLeave:B,itemTextRefCallback:X,focusSelectedItem:U,selectedItemText:R,position:n,isPositioned:I,searchRef:me,children:s.jsx(wj,{as:aWe,allowPinchZoom:!0,children:s.jsx($b,{asChild:!0,trapped:b.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:cr(a,Z=>{b.trigger?.focus({preventScroll:!0}),Z.preventDefault()}),children:s.jsx(Fv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(q,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Z=>Z.preventDefault(),...x,...Y,onPlaced:()=>M(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:cr(x.onKeyDown,Z=>{const ge=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!ge&&Z.key.length===1&&de(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let Se=T().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Ie=Z.target,pe=Se.indexOf(Ie);Se=Se.slice(pe+1)}setTimeout(()=>W(Se)),Z.preventDefault()}})})})})})})});eZ.displayName=nWe;var iWe="SelectItemAlignedPosition",tZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Ah(ep,r),o=Ph(ep,r),[l,c]=v.useState(null),[u,d]=v.useState(null),f=Ln(t,P=>d(P)),h=ON(r),m=v.useRef(!1),g=v.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:x,focusSelectedItem:b}=o,w=v.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&y&&x){const P=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(i.dir!=="rtl"){const Ie=R.left-C.left,pe=E.left-Ie,Ue=P.left-pe,_e=P.width+Ue,ue=Math.max(_e,C.width),Ft=window.innerWidth-bc,qt=A7(pe,[bc,Math.max(bc,Ft-ue)]);l.style.minWidth=_e+"px",l.style.left=qt+"px"}else{const Ie=C.right-R.right,pe=window.innerWidth-E.right-Ie,Ue=window.innerWidth-P.right-pe,_e=P.width+Ue,ue=Math.max(_e,C.width),Ft=window.innerWidth-bc,qt=A7(pe,[bc,Math.max(bc,Ft-ue)]);l.style.minWidth=_e+"px",l.style.right=qt+"px"}const k=h(),T=window.innerHeight-bc*2,I=p.scrollHeight,M=window.getComputedStyle(u),z=parseInt(M.borderTopWidth,10),W=parseInt(M.paddingTop,10),U=parseInt(M.borderBottomWidth,10),$=parseInt(M.paddingBottom,10),G=z+W+I+$+U,me=Math.min(y.offsetHeight*5,G),de=window.getComputedStyle(p),L=parseInt(de.paddingTop,10),B=parseInt(de.paddingBottom,10),X=P.top+P.height/2-bc,q=T-X,Y=y.offsetHeight/2,Z=y.offsetTop+Y,ge=z+W+Z,re=G-ge;if(ge<=X){const Ie=k.length>0&&y===k[k.length-1].ref.current;l.style.bottom="0px";const pe=u.clientHeight-p.offsetTop-p.offsetHeight,Ue=Math.max(q,Y+(Ie?B:0)+pe+U),_e=ge+Ue;l.style.height=_e+"px"}else{const Ie=k.length>0&&y===k[0].ref.current;l.style.top="0px";const Ue=Math.max(X,z+p.offsetTop+(Ie?L:0)+Y)+re;l.style.height=Ue+"px",p.scrollTop=ge-X+p.offsetTop}l.style.margin=`${bc}px 0`,l.style.minHeight=me+"px",l.style.maxHeight=T+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,p,y,x,i.dir,n]);To(()=>w(),[w]);const[S,j]=v.useState();To(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const A=v.useCallback(P=>{P&&g.current===!0&&(w(),b?.(),g.current=!1)},[w,b]);return s.jsx(sWe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:s.jsx(Vr.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});tZ.displayName=iWe;var oWe="SelectPopperPosition",PO=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=bc,...i}=e,o=TN(r);return s.jsx(N4,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});PO.displayName=oWe;var[sWe,R4]=iy(ep,{}),EO="SelectViewport",rZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Ph(EO,r),o=R4(EO,r),l=Ln(t,i.onViewportChange),c=v.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(kN.Slot,{scope:r,children:s.jsx(Vr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:cr(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h?.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-bc*2,p=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),x=Math.max(p,y);if(x<g){const b=x+m,w=Math.min(g,b),S=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});rZ.displayName=EO;var nZ="SelectGroup",[lWe,cWe]=iy(nZ),uWe=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Dc();return s.jsx(lWe,{scope:r,id:a,children:s.jsx(Vr.div,{role:"group","aria-labelledby":a,...n,ref:t})})});uWe.displayName=nZ;var aZ="SelectLabel",iZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=cWe(aZ,r);return s.jsx(Vr.div,{id:a.id,...n,ref:t})});iZ.displayName=aZ;var jS="SelectItem",[dWe,oZ]=iy(jS),sZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Ah(jS,r),c=Ph(jS,r),u=l.value===n,[d,f]=v.useState(i??""),[h,m]=v.useState(!1),g=Ln(t,b=>c.itemRefCallback?.(b,n,a)),p=Dc(),y=v.useRef("touch"),x=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(dWe,{scope:r,value:n,disabled:a,textId:p,isSelected:u,onItemTextChange:v.useCallback(b=>{f(w=>w||(b?.textContent??"").trim())},[]),children:s.jsx(kN.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Vr.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:cr(o.onFocus,()=>m(!0)),onBlur:cr(o.onBlur,()=>m(!1)),onClick:cr(o.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:cr(o.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:cr(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:cr(o.onPointerMove,b=>{y.current=b.pointerType,a?c.onItemLeave?.():y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:cr(o.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:cr(o.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(XUe.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});sZ.displayName=jS;var sx="SelectItemText",lZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Ah(sx,r),l=Ph(sx,r),c=oZ(sx,r),u=eWe(sx,r),[d,f]=v.useState(null),h=Ln(t,x=>f(x),c.onItemTextChange,x=>l.itemTextRefCallback?.(x,c.value,c.disabled)),m=d?.textContent,g=v.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=u;return To(()=>(p(g),()=>y(g)),[p,y,g]),s.jsxs(s.Fragment,{children:[s.jsx(Vr.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?gh.createPortal(i.children,o.valueNode):null]})});lZ.displayName=sx;var cZ="SelectItemIndicator",uZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return oZ(cZ,r).isSelected?s.jsx(Vr.span,{"aria-hidden":!0,...n,ref:t}):null});uZ.displayName=cZ;var kO="SelectScrollUpButton",fWe=v.forwardRef((e,t)=>{const r=Ph(kO,e.__scopeSelect),n=R4(kO,e.__scopeSelect),[a,i]=v.useState(!1),o=Ln(t,n.onScrollButtonChange);return To(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dZ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fWe.displayName=kO;var OO="SelectScrollDownButton",hWe=v.forwardRef((e,t)=>{const r=Ph(OO,e.__scopeSelect),n=R4(OO,e.__scopeSelect),[a,i]=v.useState(!1),o=Ln(t,n.onScrollButtonChange);return To(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dZ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});hWe.displayName=OO;var dZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Ph("SelectScrollButton",r),o=v.useRef(null),l=ON(r),c=v.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),To(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(Vr.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:cr(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:cr(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:cr(a.onPointerLeave,()=>{c()})})}),mWe="SelectSeparator",fZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Vr.div,{"aria-hidden":!0,...n,ref:t})});fZ.displayName=mWe;var TO="SelectArrow",pWe=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=TN(r),i=Ah(TO,r),o=Ph(TO,r);return i.open&&o.position==="popper"?s.jsx(C4,{...a,...n,ref:t}):null});pWe.displayName=TO;var gWe="SelectBubbleInput",hZ=v.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=v.useRef(null),i=Ln(n,a),o=UQ(t);return v.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Vr.select,{...r,style:{...WQ,...r.style},ref:i,defaultValue:t})});hZ.displayName=gWe;function mZ(e){return e===""||e===void 0}function pZ(e){const t=qs(e),r=v.useRef(""),n=v.useRef(0),a=v.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=v.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function gZ(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=vWe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function vWe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var yWe=VQ,vZ=GQ,xWe=YQ,bWe=XQ,wWe=JQ,yZ=QQ,_We=rZ,xZ=iZ,bZ=sZ,SWe=lZ,jWe=uZ,wZ=fZ;const yn=yWe,xn=xWe,pn=le.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(vZ,{ref:n,className:Ot("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,s.jsx(bWe,{asChild:!0,children:s.jsx(J2,{className:"h-4 w-4 opacity-50"})})]}));pn.displayName=vZ.displayName;const gn=le.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(wWe,{children:s.jsx(yZ,{ref:a,className:Ot("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:s.jsx(_We,{className:Ot("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));gn.displayName=yZ.displayName;const NWe=le.forwardRef(({className:e,...t},r)=>s.jsx(xZ,{ref:r,className:Ot("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));NWe.displayName=xZ.displayName;const Wt=le.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(bZ,{ref:n,className:Ot("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(jWe,{children:s.jsx(yI,{className:"h-4 w-4"})})}),s.jsx(SWe,{children:t})]}));Wt.displayName=bZ.displayName;const CWe=le.forwardRef(({className:e,...t},r)=>s.jsx(wZ,{ref:r,className:Ot("-mx-1 my-1 h-px bg-muted",e),...t}));CWe.displayName=wZ.displayName;var IN="Checkbox",[AWe,Aat]=ic(IN),[PWe,L4]=AWe(IN);function EWe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Id({prop:r,defaultProp:a??!1,onChange:c,caller:IN}),[g,p]=v.useState(null),[y,x]=v.useState(null),b=v.useRef(!1),w=g?!!o||!!g.closest("form"):!0,S={checked:h,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Hf(a)?!1:a,isFormControl:w,bubbleInput:y,setBubbleInput:x};return s.jsx(PWe,{scope:t,...S,children:kWe(f)?f(S):n})}var _Z="CheckboxTrigger",SZ=v.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=L4(_Z,e),p=Ln(a,d),y=v.useRef(c);return v.useEffect(()=>{const x=i?.form;if(x){const b=()=>f(y.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[i,f]),s.jsx(Vr.button,{type:"button",role:"checkbox","aria-checked":Hf(c)?"mixed":c,"aria-required":u,"data-state":PZ(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:p,onKeyDown:cr(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:cr(r,x=>{f(b=>Hf(b)?!0:!b),g&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});SZ.displayName=_Z;var $4=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(EWe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(SZ,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(AZ,{__scopeCheckbox:r})]})})});$4.displayName=IN;var jZ="CheckboxIndicator",NZ=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=L4(jZ,r);return s.jsx(Pl,{present:n||Hf(i.checked)||i.checked===!0,children:s.jsx(Vr.span,{"data-state":PZ(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});NZ.displayName=jZ;var CZ="CheckboxBubbleInput",AZ=v.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=L4(CZ,e),g=Ln(r,m),p=UQ(i),y=HJ(n);v.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,A=!a.current;if(p!==i&&j){const P=new Event("click",{bubbles:A});b.indeterminate=Hf(i),j.call(b,Hf(i)?!1:i),b.dispatchEvent(P)}},[h,p,i,a]);const x=v.useRef(Hf(i)?!1:i);return s.jsx(Vr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});AZ.displayName=CZ;function kWe(e){return typeof e=="function"}function Hf(e){return e==="indeterminate"}function PZ(e){return Hf(e)?"indeterminate":e?"checked":"unchecked"}const iu=le.forwardRef(({className:e,...t},r)=>s.jsx($4,{ref:r,className:Ot("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(NZ,{className:Ot("flex items-center justify-center text-current"),children:s.jsx(yI,{className:"h-4 w-4"})})}));iu.displayName=$4.displayName;var gA="rovingFocusGroup.onEntryFocus",OWe={bubbles:!1,cancelable:!0},t1="RovingFocusGroup",[IO,EZ,TWe]=PN(t1),[IWe,DN]=ic(t1,[TWe]),[DWe,MWe]=IWe(t1),kZ=v.forwardRef((e,t)=>s.jsx(IO.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(IO.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(RWe,{...e,ref:t})})}));kZ.displayName=t1;var RWe=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=v.useRef(null),m=Ln(t,h),g=EN(i),[p,y]=Id({prop:o,defaultProp:l??null,onChange:c,caller:t1}),[x,b]=v.useState(!1),w=qs(u),S=EZ(r),j=v.useRef(!1),[A,P]=v.useState(0);return v.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(gA,w),()=>C.removeEventListener(gA,w)},[w]),s.jsx(DWe,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:v.useCallback(C=>y(C),[y]),onItemShiftTab:v.useCallback(()=>b(!0),[]),onFocusableItemAdd:v.useCallback(()=>P(C=>C+1),[]),onFocusableItemRemove:v.useCallback(()=>P(C=>C-1),[]),children:s.jsx(Vr.div,{tabIndex:x||A===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:cr(e.onMouseDown,()=>{j.current=!0}),onFocus:cr(e.onFocus,C=>{const E=!j.current;if(C.target===C.currentTarget&&E&&!x){const R=new CustomEvent(gA,OWe);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const k=S().filter(W=>W.focusable),T=k.find(W=>W.active),I=k.find(W=>W.id===p),z=[T,I,...k].filter(Boolean).map(W=>W.ref.current);IZ(z,d)}}j.current=!1}),onBlur:cr(e.onBlur,()=>b(!1))})})}),OZ="RovingFocusGroupItem",TZ=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Dc(),u=i||c,d=MWe(OZ,r),f=d.currentTabStopId===u,h=EZ(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return v.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(IO.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Vr.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:cr(e.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:cr(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:cr(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const x=FWe(y,d.orientation,d.dir);if(x!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=h().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const S=w.indexOf(y.currentTarget);w=d.loop?BWe(w,S+1):w.slice(S+1)}setTimeout(()=>IZ(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});TZ.displayName=OZ;var LWe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $We(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function FWe(e,t,r){const n=$We(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return LWe[n]}function IZ(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function BWe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var DZ=kZ,MZ=TZ,DO=["Enter"," "],zWe=["ArrowDown","PageUp","Home"],RZ=["ArrowUp","PageDown","End"],qWe=[...zWe,...RZ],UWe={ltr:[...DO,"ArrowRight"],rtl:[...DO,"ArrowLeft"]},WWe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},r1="Menu",[sb,VWe,HWe]=PN(r1),[vp,LZ]=ic(r1,[HWe,ay,DN]),MN=ay(),$Z=DN(),[GWe,yp]=vp(r1),[KWe,n1]=vp(r1),FZ=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=MN(t),[c,u]=v.useState(null),d=v.useRef(!1),f=qs(i),h=EN(a);return v.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(j4,{...l,children:s.jsx(GWe,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(KWe,{scope:t,onClose:v.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};FZ.displayName=r1;var YWe="MenuAnchor",F4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=MN(r);return s.jsx(NN,{...a,...n,ref:t})});F4.displayName=YWe;var B4="MenuPortal",[XWe,BZ]=vp(B4,{forceMount:void 0}),zZ=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=yp(B4,t);return s.jsx(XWe,{scope:t,forceMount:r,children:s.jsx(Pl,{present:r||i.open,children:s.jsx(Bv,{asChild:!0,container:a,children:n})})})};zZ.displayName=B4;var Zl="MenuContent",[JWe,z4]=vp(Zl),qZ=v.forwardRef((e,t)=>{const r=BZ(Zl,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=yp(Zl,e.__scopeMenu),o=n1(Zl,e.__scopeMenu);return s.jsx(sb.Provider,{scope:e.__scopeMenu,children:s.jsx(Pl,{present:n||i.open,children:s.jsx(sb.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(QWe,{...a,ref:t}):s.jsx(ZWe,{...a,ref:t})})})})}),QWe=v.forwardRef((e,t)=>{const r=yp(Zl,e.__scopeMenu),n=v.useRef(null),a=Ln(t,n);return v.useEffect(()=>{const i=n.current;if(i)return _j(i)},[]),s.jsx(q4,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:cr(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),ZWe=v.forwardRef((e,t)=>{const r=yp(Zl,e.__scopeMenu);return s.jsx(q4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),eVe=ah("MenuContent.ScrollLock"),q4=v.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,y=yp(Zl,r),x=n1(Zl,r),b=MN(r),w=$Z(r),S=VWe(r),[j,A]=v.useState(null),P=v.useRef(null),C=Ln(t,P,y.onContentChange),E=v.useRef(0),R=v.useRef(""),k=v.useRef(0),T=v.useRef(null),I=v.useRef("right"),M=v.useRef(0),z=g?wj:v.Fragment,W=g?{as:eVe,allowPinchZoom:!0}:void 0,U=G=>{const me=R.current+G,de=S().filter(Z=>!Z.disabled),L=document.activeElement,B=de.find(Z=>Z.ref.current===L)?.textValue,X=de.map(Z=>Z.textValue),q=fVe(X,me,B),Y=de.find(Z=>Z.textValue===q)?.ref.current;(function Z(ge){R.current=ge,window.clearTimeout(E.current),ge!==""&&(E.current=window.setTimeout(()=>Z(""),1e3))})(me),Y&&setTimeout(()=>Y.focus())};v.useEffect(()=>()=>window.clearTimeout(E.current),[]),xj();const $=v.useCallback(G=>I.current===T.current?.side&&mVe(G,T.current?.area),[]);return s.jsx(JWe,{scope:r,searchRef:R,onItemEnter:v.useCallback(G=>{$(G)&&G.preventDefault()},[$]),onItemLeave:v.useCallback(G=>{$(G)||(P.current?.focus(),A(null))},[$]),onTriggerLeave:v.useCallback(G=>{$(G)&&G.preventDefault()},[$]),pointerGraceTimerRef:k,onPointerGraceIntentChange:v.useCallback(G=>{T.current=G},[]),children:s.jsx(z,{...W,children:s.jsx($b,{asChild:!0,trapped:a,onMountAutoFocus:cr(i,G=>{G.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Fv,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx(DZ,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:A,onEntryFocus:cr(c,G=>{x.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(N4,{role:"menu","aria-orientation":"vertical","data-state":aee(y.open),"data-radix-menu-content":"",dir:x.dir,...b,...p,ref:C,style:{outline:"none",...p.style},onKeyDown:cr(p.onKeyDown,G=>{const de=G.target.closest("[data-radix-menu-content]")===G.currentTarget,L=G.ctrlKey||G.altKey||G.metaKey,B=G.key.length===1;de&&(G.key==="Tab"&&G.preventDefault(),!L&&B&&U(G.key));const X=P.current;if(G.target!==X||!qWe.includes(G.key))return;G.preventDefault();const Y=S().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);RZ.includes(G.key)&&Y.reverse(),uVe(Y)}),onBlur:cr(e.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(E.current),R.current="")}),onPointerMove:cr(e.onPointerMove,lb(G=>{const me=G.target,de=M.current!==G.clientX;if(G.currentTarget.contains(me)&&de){const L=G.clientX>M.current?"right":"left";I.current=L,M.current=G.clientX}}))})})})})})})});qZ.displayName=Zl;var tVe="MenuGroup",U4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Vr.div,{role:"group",...n,ref:t})});U4.displayName=tVe;var rVe="MenuLabel",UZ=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Vr.div,{...n,ref:t})});UZ.displayName=rVe;var NS="MenuItem",P7="menu.itemSelect",RN=v.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=v.useRef(null),o=n1(NS,e.__scopeMenu),l=z4(NS,e.__scopeMenu),c=Ln(t,i),u=v.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(P7,{bubbles:!0,cancelable:!0});f.addEventListener(P7,m=>n?.(m),{once:!0}),WI(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(WZ,{...a,ref:c,disabled:r,onClick:cr(e.onClick,d),onPointerDown:f=>{e.onPointerDown?.(f),u.current=!0},onPointerUp:cr(e.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:cr(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||DO.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});RN.displayName=NS;var WZ=v.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=z4(NS,r),l=$Z(r),c=v.useRef(null),u=Ln(t,c),[d,f]=v.useState(!1),[h,m]=v.useState("");return v.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),s.jsx(sb.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:s.jsx(MZ,{asChild:!0,...l,focusable:!n,children:s.jsx(Vr.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:cr(e.onPointerMove,lb(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:cr(e.onPointerLeave,lb(g=>o.onItemLeave(g))),onFocus:cr(e.onFocus,()=>f(!0)),onBlur:cr(e.onBlur,()=>f(!1))})})})}),nVe="MenuCheckboxItem",VZ=v.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(XZ,{scope:e.__scopeMenu,checked:r,children:s.jsx(RN,{role:"menuitemcheckbox","aria-checked":CS(r)?"mixed":r,...a,ref:t,"data-state":V4(r),onSelect:cr(a.onSelect,()=>n?.(CS(r)?!0:!r),{checkForDefaultPrevented:!1})})})});VZ.displayName=nVe;var HZ="MenuRadioGroup",[aVe,iVe]=vp(HZ,{value:void 0,onValueChange:()=>{}}),GZ=v.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=qs(n);return s.jsx(aVe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(U4,{...a,ref:t})})});GZ.displayName=HZ;var KZ="MenuRadioItem",YZ=v.forwardRef((e,t)=>{const{value:r,...n}=e,a=iVe(KZ,e.__scopeMenu),i=r===a.value;return s.jsx(XZ,{scope:e.__scopeMenu,checked:i,children:s.jsx(RN,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":V4(i),onSelect:cr(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});YZ.displayName=KZ;var W4="MenuItemIndicator",[XZ,oVe]=vp(W4,{checked:!1}),JZ=v.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=oVe(W4,r);return s.jsx(Pl,{present:n||CS(i.checked)||i.checked===!0,children:s.jsx(Vr.span,{...a,ref:t,"data-state":V4(i.checked)})})});JZ.displayName=W4;var sVe="MenuSeparator",QZ=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Vr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});QZ.displayName=sVe;var lVe="MenuArrow",ZZ=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=MN(r);return s.jsx(C4,{...a,...n,ref:t})});ZZ.displayName=lVe;var cVe="MenuSub",[Pat,eee]=vp(cVe),lx="MenuSubTrigger",tee=v.forwardRef((e,t)=>{const r=yp(lx,e.__scopeMenu),n=n1(lx,e.__scopeMenu),a=eee(lx,e.__scopeMenu),i=z4(lx,e.__scopeMenu),o=v.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=v.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return v.useEffect(()=>d,[d]),v.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(F4,{asChild:!0,...u,children:s.jsx(WZ,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":aee(r.open),...e,ref:yj(t,a.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:cr(e.onPointerMove,lb(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:cr(e.onPointerLeave,lb(f=>{d();const h=r.content?.getBoundingClientRect();if(h){const m=r.content?.dataset.side,g=m==="right",p=g?-5:5,y=h[g?"left":"right"],x=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+p,y:f.clientY},{x:y,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:cr(e.onKeyDown,f=>{const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||UWe[n.dir].includes(f.key)&&(r.onOpenChange(!0),r.content?.focus(),f.preventDefault())})})})});tee.displayName=lx;var ree="MenuSubContent",nee=v.forwardRef((e,t)=>{const r=BZ(Zl,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=yp(Zl,e.__scopeMenu),o=n1(Zl,e.__scopeMenu),l=eee(ree,e.__scopeMenu),c=v.useRef(null),u=Ln(t,c);return s.jsx(sb.Provider,{scope:e.__scopeMenu,children:s.jsx(Pl,{present:n||i.open,children:s.jsx(sb.Slot,{scope:e.__scopeMenu,children:s.jsx(q4,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{o.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:cr(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:cr(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:cr(e.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),h=WWe[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});nee.displayName=ree;function aee(e){return e?"open":"closed"}function CS(e){return e==="indeterminate"}function V4(e){return CS(e)?"indeterminate":e?"checked":"unchecked"}function uVe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function dVe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function fVe(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=dVe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function hVe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function mVe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return hVe(r,t)}function lb(e){return t=>t.pointerType==="mouse"?e(t):void 0}var pVe=FZ,gVe=F4,vVe=zZ,yVe=qZ,xVe=U4,bVe=UZ,wVe=RN,_Ve=VZ,SVe=GZ,jVe=YZ,NVe=JZ,CVe=QZ,AVe=ZZ,PVe=tee,EVe=nee,LN="DropdownMenu",[kVe,Eat]=ic(LN,[LZ]),_s=LZ(),[OVe,iee]=kVe(LN),oee=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=_s(t),u=v.useRef(null),[d,f]=Id({prop:a,defaultProp:i??!1,onChange:o,caller:LN});return s.jsx(OVe,{scope:t,triggerId:Dc(),triggerRef:u,contentId:Dc(),open:d,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(pVe,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};oee.displayName=LN;var see="DropdownMenuTrigger",lee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=iee(see,r),o=_s(r);return s.jsx(gVe,{asChild:!0,...o,children:s.jsx(Vr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:yj(t,i.triggerRef),onPointerDown:cr(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:cr(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});lee.displayName=see;var TVe="DropdownMenuPortal",cee=e=>{const{__scopeDropdownMenu:t,...r}=e,n=_s(t);return s.jsx(vVe,{...n,...r})};cee.displayName=TVe;var uee="DropdownMenuContent",dee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=iee(uee,r),i=_s(r),o=v.useRef(!1);return s.jsx(yVe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:cr(e.onCloseAutoFocus,l=>{o.current||a.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:cr(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dee.displayName=uee;var IVe="DropdownMenuGroup",DVe=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(xVe,{...a,...n,ref:t})});DVe.displayName=IVe;var MVe="DropdownMenuLabel",fee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(bVe,{...a,...n,ref:t})});fee.displayName=MVe;var RVe="DropdownMenuItem",hee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(wVe,{...a,...n,ref:t})});hee.displayName=RVe;var LVe="DropdownMenuCheckboxItem",mee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(_Ve,{...a,...n,ref:t})});mee.displayName=LVe;var $Ve="DropdownMenuRadioGroup",FVe=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(SVe,{...a,...n,ref:t})});FVe.displayName=$Ve;var BVe="DropdownMenuRadioItem",pee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(jVe,{...a,...n,ref:t})});pee.displayName=BVe;var zVe="DropdownMenuItemIndicator",gee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(NVe,{...a,...n,ref:t})});gee.displayName=zVe;var qVe="DropdownMenuSeparator",vee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(CVe,{...a,...n,ref:t})});vee.displayName=qVe;var UVe="DropdownMenuArrow",WVe=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(AVe,{...a,...n,ref:t})});WVe.displayName=UVe;var VVe="DropdownMenuSubTrigger",yee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(PVe,{...a,...n,ref:t})});yee.displayName=VVe;var HVe="DropdownMenuSubContent",xee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_s(r);return s.jsx(EVe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xee.displayName=HVe;var GVe=oee,KVe=lee,YVe=cee,bee=dee,wee=fee,_ee=hee,See=mee,jee=pee,Nee=gee,Cee=vee,Aee=yee,Pee=xee;const Mx=GVe,Rx=KVe,XVe=le.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(Aee,{ref:a,className:Ot("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(cj,{className:"ml-auto h-4 w-4"})]}));XVe.displayName=Aee.displayName;const JVe=le.forwardRef(({className:e,...t},r)=>s.jsx(Pee,{ref:r,className:Ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));JVe.displayName=Pee.displayName;const Dg=le.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(YVe,{children:s.jsx(bee,{ref:n,sideOffset:t,className:Ot("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Dg.displayName=bee.displayName;const Pc=le.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(_ee,{ref:n,className:Ot("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Pc.displayName=_ee.displayName;const QVe=le.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(See,{ref:a,className:Ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Nee,{children:s.jsx(yI,{className:"h-4 w-4"})})}),t]}));QVe.displayName=See.displayName;const ZVe=le.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(jee,{ref:n,className:Ot("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Nee,{children:s.jsx(uce,{className:"h-2 w-2 fill-current"})})}),t]}));ZVe.displayName=jee.displayName;const Eee=le.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(wee,{ref:n,className:Ot("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Eee.displayName=wee.displayName;const MO=le.forwardRef(({className:e,...t},r)=>s.jsx(Cee,{ref:r,className:Ot("-mx-1 my-1 h-px bg-muted",e),...t}));MO.displayName=Cee.displayName;function bn(){try{const e=localStorage.getItem("auth:userProfile");if(e){const r=JSON.parse(e);if(r?.codigo_empresa)return r.codigo_empresa}const t=localStorage.getItem("auth:company");if(t){const r=JSON.parse(t);if(r?.codigo_empresa)return r.codigo_empresa;if(r?.codigo)return r.codigo}return typeof window<"u"&&window.__authProfile&&window.__authProfile.codigo_empresa?window.__authProfile.codigo_empresa:null}catch{return null}}async function Mg({somenteAtivas:e=!0,codigoEmpresa:t}={}){const r=t||bn();let n=Oe.from("finalizadoras").select("*").order("nome",{ascending:!0});r&&(n=n.eq("codigo_empresa",r)),e&&(n=n.eq("ativo",!0));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function eHe(e,t){const r=t||bn(),n={codigo_interno:e?.codigo_interno||null,codigo_sefaz:e?.codigo_sefaz||null,nome:(e?.nome||"").trim(),tipo:e?.tipo||"outros",ativo:e?.ativo??!0,taxa_percentual:e?.taxa_percentual==null?null:Number(e.taxa_percentual)};if(!n.nome)throw new Error("Nome  obrigatrio");r&&(n.codigo_empresa=r);const{data:a,error:i}=await Oe.from("finalizadoras").insert(n).select("*").single();if(i)throw i;return a}async function tHe(e,t,r){if(!e)throw new Error("ID invlido");const n=r||bn(),a={codigo_interno:t?.codigo_interno||null,codigo_sefaz:t?.codigo_sefaz||null,nome:(t?.nome||"").trim(),tipo:t?.tipo||"outros",ativo:t?.ativo??!0,taxa_percentual:t?.taxa_percentual==null?null:Number(t.taxa_percentual)};if(!a.nome)throw new Error("Nome  obrigatrio");let i=Oe.from("finalizadoras").update(a).eq("id",e);n&&(i=i.eq("codigo_empresa",n));const{data:o,error:l}=await i.select("*").single();if(l)throw l;return o}async function rHe(e,t,r){if(!e)throw new Error("ID invlido");const n=r||bn();let a=Oe.from("finalizadoras").update({ativo:!!t}).eq("id",e);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:o}=await a.select("*").single();if(o)throw o;return i}async function H4({codigoEmpresa:e}={}){const t=e||bn();let r=Oe.from("caixa_sessoes").select("id").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;if(!(Array.isArray(n)&&n.length>0)){const o=new Error(" necessrio abrir o caixa antes de criar comandas.");throw o.code="NO_OPEN_CASH_SESSION",o}return!0}async function E7(e=[],t){if(!Array.isArray(e)||e.length===0)return{};const r=t||bn(),n=async o=>{let l=Oe.from("comanda_clientes").select(`comanda_id, cliente_id, nome_livre, clientes:clientes${o}(id, nome)`).in("comanda_id",e);return r&&(l=l.eq("codigo_empresa",r)),l};let a=[];try{const{data:o,error:l}=await n("!comanda_clientes_cliente_id_fkey");if(l)throw l;a=o||[]}catch{try{const{data:o,error:l}=await n("!fk_comanda_clientes_cliente");if(l)throw l;a=o||[]}catch{let o=Oe.from("comanda_clientes").select("comanda_id, cliente_id, nome_livre").in("comanda_id",e);r&&(o=o.eq("codigo_empresa",r));const{data:l}=await o;a=l||[]}}const i={};for(const o of a){const l=o.comanda_id,c=o.clientes?.nome||o.nome_livre||"";i[l]||(i[l]=[]),c&&i[l].push(c)}for(const o of Object.keys(i))i[o]=Array.from(new Set(i[o])).join(", ");return i}async function k7(e=[],t){if(!Array.isArray(e)||e.length===0)return{};const r=t||bn();let n=Oe.from("pagamentos").select("comanda_id, metodo, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").in("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o={};for(const c of a||[]){if(!((c.status||"Pago")!=="Cancelado"&&(c.status||"Pago")!=="Estornado"))continue;const d=c.comanda_id,f=c?.finalizadoras?.nome||c.metodo||"Outros";o[d]||(o[d]=[]),o[d].push(f)}const l={};for(const[c,u]of Object.entries(o))u.length===0?l[c]="":u.length===1?l[c]=u[0]:l[c]=`${u[0]} +${u.length-1}`;return l}async function nHe({comandaId:e,codigoEmpresa:t}={}){if(!e)throw new Error("comandaId  obrigatrio");const r=t||bn();let n=Oe.from("comanda_itens").select("produto_id, quantidade").eq("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o=new Map;for(const m of a||[]){const g=m.produto_id,p=Number(m.quantidade||0);o.set(g,(o.get(g)||0)+p)}if(o.size===0)return!0;const l=Array.from(o.keys());let c=Oe.from("produtos").select("id, nome, estoque");c=c.in("id",l),r&&(c=c.eq("codigo_empresa",r));const{data:u,error:d}=await c;if(d)throw d;const f=new Map((u||[]).map(m=>[m.id,{nome:m.nome,estoque:Number(m.estoque||0)}])),h=[];for(const[m,g]of o.entries()){const p=f.get(m)||{nome:`Produto ${m}`,estoque:0};g>p.estoque&&h.push({id:m,name:p.nome,solicitado:g,estoque:p.estoque})}if(h.length>0){const m=h.map(p=>`${p.name}: solicitado ${p.solicitado}, estoque ${p.estoque}`).join("; "),g=new Error(`Estoque insuficiente para finalizar: ${m}`);throw g.code="INSUFFICIENT_STOCK_COMANDA",g.items=h,g}return!0}async function kee({codigoEmpresa:e}={}){const t=e||bn();let r=Oe.from("comandas").select("id,status,aberto_em").is("mesa_id",null).in("status",["open","awaiting-payment"]).order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n?.[0]||null}async function O7({codigoEmpresa:e}={}){const t=e||bn();console.log("[getOrCreateComandaBalcao] Iniciando com codigo_empresa:",t),await H4({codigoEmpresa:t});const r=await kee({codigoEmpresa:t});if(r)return console.log("[getOrCreateComandaBalcao] Comanda existente encontrada:",r),r;const n={status:"open",mesa_id:null,aberto_em:new Date().toISOString()};console.log("[getOrCreateComandaBalcao] Criando nova comanda (codigo_empresa via DEFAULT):",n);const{data:a,error:i}=await Oe.from("comandas").insert(n).select("id,status,aberto_em,tipo,codigo_empresa").single();if(i)throw console.error("[getOrCreateComandaBalcao] ERRO ao criar comanda:",i),i;return console.log("[getOrCreateComandaBalcao] Comanda criada com sucesso:",a),console.log("[getOrCreateComandaBalcao] Codigo da comanda criada:",a?.codigo_empresa,"vs esperado:",t),await new Promise(o=>setTimeout(o,100)),a}async function T7({status:e,from:t,to:r,search:n="",limit:a=50,offset:i=0,codigoEmpresa:o}={}){const l=o||bn();let c=Oe.from("comandas").select("id, mesa_id, status, aberto_em, fechado_em").order("fechado_em",{ascending:!1,nullsFirst:!1}).order("aberto_em",{ascending:!1}).range(i,i+a-1);l&&(c=c.eq("codigo_empresa",l)),e&&Array.isArray(e)&&e.length?c=c.in("status",e):typeof e=="string"&&(e==="closed"?c=c.or("status.eq.closed,fechado_em.not.is.null"):c=c.eq("status",e));const u=y=>{if(!y)return null;if(typeof y=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(y)){const[x,b,w]=y.split("-").map(Number);return new Date(x,b-1,w,0,0,0,0)}return new Date(y)},d=y=>{if(!y)return null;if(typeof y=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(y)){const[x,b,w]=y.split("-").map(Number);return new Date(x,b-1,w,23,59,59,999)}return new Date(y)},f=u(t),h=d(r);f&&(c=c.gte("aberto_em",f.toISOString())),h&&(c=c.lte("aberto_em",h.toISOString()));const m=(n||"").trim();if(m){const y=/^\d+$/.test(m),x=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(m);y||x?c=c.or(`id.eq.${m},status.ilike.%${m}%`):c=c.or(`status.ilike.%${m}%`)}const{data:g,error:p}=await c;if(p)throw p;return g||[]}async function Om({from:e,to:t,codigoEmpresa:r}={}){const n=r||bn();let a=[];try{let f=Oe.from("comandas").select("id, fechado_em").eq("status","closed");n&&(f=f.eq("codigo_empresa",n)),e&&(f=f.gte("fechado_em",new Date(e).toISOString())),t&&(f=f.lte("fechado_em",new Date(t).toISOString()));const{data:h,error:m}=await f;if(m)throw m;a=h||[]}catch{a=[]}const i=(a||[]).map(f=>f.id);let o=0,l=0;if(i.length>0)try{let f=Oe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",i);n&&(f=f.eq("codigo_empresa",n));const{data:h,error:m}=await f;if(m)throw m;for(const g of h||[]){const p=Number(g.quantidade||0)*Number(g.preco_unitario||0),y=Number(g.desconto||0);o+=p,l+=y}}catch{}const c=Math.max(0,o-l),u={};let d=0;try{let f=Oe.from("pagamentos").select("metodo, valor, recebido_em, status");n&&(f=f.eq("codigo_empresa",n)),e&&(f=f.gte("recebido_em",new Date(e).toISOString())),t&&(f=f.lte("recebido_em",new Date(t).toISOString()));const{data:h,error:m}=await f;if(m)throw m;for(const g of h||[]){if(!((g.status||"Pago")!=="Cancelado"&&(g.status||"Pago")!=="Estornado"))continue;const y=g.metodo||"outros",x=Number(g.valor||0);u[y]=(u[y]||0)+x,d+=x}}catch{}return{from:e?new Date(e).toISOString():null,to:t?new Date(t).toISOString():null,totalPorFinalizadora:u,totalEntradas:d,totalVendasBrutas:o,totalDescontos:l,totalVendasLiquidas:c}}async function cb({codigoEmpresa:e}={}){const t=e||bn();let r=null;try{let a=Oe.from("caixa_sessoes").select("aberto_em").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(a=a.eq("codigo_empresa",t));const{data:i,error:o}=await a;if(o)throw o;r=i?.[0]?.aberto_em||null}catch{}if(!r)return null;const n=new Date().toISOString();return Om({from:r,to:n,codigoEmpresa:t})}async function aHe({comandaId:e,codigoEmpresa:t}={}){const r=t||bn();let n=Oe.from("pagamentos").select("*, finalizadoras!pagamentos_finalizadora_id_fkey(id, nome, codigo_sefaz, codigo_interno)").order("recebido_em",{ascending:!0});e&&(n=n.eq("comanda_id",e)),r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function v2({searchTerm:e="",limit:t=20,codigoEmpresa:r}={}){const n=r||bn();let a=Oe.from("clientes").select("*").eq("status","active").order("nome",{ascending:!0}).limit(t);n&&(a=a.eq("codigo_empresa",n));const i=(e||"").trim();i&&(/^\d+$/.test(i)?a=a.or(`codigo.eq.${i},nome.ilike.%${i}%,email.ilike.%${i}%,telefone.ilike.%${i}%`):a=a.or(`nome.ilike.%${i}%,email.ilike.%${i}%,telefone.ilike.%${i}%`));const{data:o,error:l}=await a;if(l)throw l;return o||[]}async function ed({codigoEmpresa:e}={}){const t=e||bn();let r=Oe.from("comandas").select("id, mesa_id, status, aberto_em, fechado_em").is("fechado_em",null).order("aberto_em",{ascending:!1});t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;console.log(`[listarComandasAbertas] Consulta ampla encontrou ${(n||[]).length} comandas:`,n);const i=(n||[]).filter(o=>o.status==="open"||o.status==="awaiting-payment");return console.log(`[listarComandasAbertas] Aps filtro: ${i.length} comandas abertas:`,i),i}async function RO(e=[],t){if(!e||e.length===0)return{};const r=t||bn();let n=Oe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario").in("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o={};for(const l of a||[]){const c=l.comanda_id,u=Number(l.quantidade||0)*Number(l.preco_unitario||0);o[c]=(o[c]||0)+u}return o}async function vg(e){const t=e||bn();let r=Oe.from("mesas").select("*").order("numero",{ascending:!0});t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n||[]}async function iHe({numero:e,nome:t,codigoEmpresa:r}={}){const n=r||bn();let a=e;if(!a){let o=Oe.from("mesas").select("numero").order("numero",{ascending:!1}).limit(1);n&&(o=o.eq("codigo_empresa",n));const{data:l,error:c}=await o;if(c)throw c;a=(l?.[0]?.numero||0)+1}const i={numero:a,status:"available"};t&&typeof t=="string"&&t.trim()&&(i.nome=t.trim()),n&&(i.codigo_empresa=n);try{const{data:o,error:l}=await Oe.from("mesas").insert(i).select("*").single();if(l)throw l;return o}catch(o){const l=String(o?.message||o||"");if(/column\s+\"?nome\"?\s+of\s+relation/i.test(l)||/column\s+\"?nome\"?\s+does not exist/i.test(l)){const c={numero:a,status:"available"};n&&(c.codigo_empresa=n);const{data:u,error:d}=await Oe.from("mesas").insert(c).select("*").single();if(d)throw d;return u}throw o}}async function td({saldoInicial:e=0,codigoEmpresa:t}={}){const r=t||bn();let n=Oe.from("caixa_sessoes").select("id,status,aberto_em").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;if(a&&a.length>0)return a[0];const o={status:"open",saldo_inicial:e};r&&(o.codigo_empresa=r);const{data:l,error:c}=await Oe.from("caixa_sessoes").insert(o).select("id,status,aberto_em").single();if(c)throw c;return l}async function Of({codigoEmpresa:e}={}){const t=e||bn();let r=Oe.from("caixa_sessoes").select("id,status,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n?.[0]||null}async function Oee({from:e,to:t,limit:r=50,offset:n=0,codigoEmpresa:a}={}){const i=a||bn();let o=Oe.from("caixa_sessoes").select("id, status, aberto_em, fechado_em, saldo_inicial, saldo_final").order("aberto_em",{ascending:!1}).range(n,n+r-1);i&&(o=o.eq("codigo_empresa",i));const l=m=>{if(!m)return null;if(typeof m=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(m)){const[g,p,y]=m.split("-").map(Number);return new Date(g,p-1,y,0,0,0,0)}return new Date(m)},c=m=>{if(!m)return null;if(typeof m=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(m)){const[g,p,y]=m.split("-").map(Number);return new Date(g,p-1,y,23,59,59,999)}return new Date(m)},u=l(e),d=c(t);u&&(o=o.gte("aberto_em",u.toISOString())),d&&(o=o.lte("aberto_em",d.toISOString()));const{data:f,error:h}=await o;if(h)throw h;return f||[]}async function Tee({saldoFinal:e=null,codigoEmpresa:t}={}){const r=t||bn();try{let g=await ed({codigoEmpresa:r});g=g||[];const p=g.filter(y=>!y.mesa_id);for(const y of p)try{(await Ya({comandaId:y.id,codigoEmpresa:r})||[]).length===0&&await AS({comandaId:y.id,codigoEmpresa:r})}catch{}if(g=await ed({codigoEmpresa:r}),g&&g.length>0){let y=0;for(const x of g)try{(await Ya({comandaId:x.id,codigoEmpresa:r})||[]).length>0&&y++}catch{y++}if(y>0)throw new Error(`Existem ${y} comandas com itens em aberto. Finalize-as antes de fechar o caixa.`)}}catch(g){if(g&&/Existem \d+ comandas/.test(g.message||""))throw g}let n=Oe.from("caixa_sessoes").select("id,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o=a?.[0]?.id||null,l=a?.[0]?.aberto_em||null,c=Number(a?.[0]?.saldo_inicial||0);if(!o)throw new Error("Nenhuma sesso de caixa aberta encontrada.");const u=new Date().toISOString();let d=0;try{const g=await Om({from:l,to:u,codigoEmpresa:r});d=Number(g?.totalEntradas||0)}catch{}const f=e!=null?Number(e):c+d,{data:h,error:m}=await Oe.from("caixa_sessoes").update({status:"closed",saldo_final:f,fechado_em:u}).eq("id",o).select("id,status,fechado_em,saldo_final").single();if(m)throw m;try{if(l&&u){const g=await Om({from:l,to:u,codigoEmpresa:r}),p={codigo_empresa:r||bn(),caixa_sessao_id:o,periodo_de:g.from||l,periodo_ate:g.to||u,total_bruto:Number(g.totalVendasBrutas||0),total_descontos:Number(g.totalDescontos||0),total_liquido:Number(g.totalVendasLiquidas||0),total_entradas:Number(g.totalEntradas||0),por_finalizadora:g.totalPorFinalizadora||{}};await Oe.from("caixa_resumos").insert(p)}}catch(g){console.warn("[fecharCaixa] Falha ao gravar snapshot de fechamento:",g)}return h}async function LO({caixaSessaoId:e,codigoEmpresa:t}={}){if(!e)throw new Error("caixaSessaoId  obrigatrio");const r=t||bn();let n=Oe.from("caixa_resumos").select("*").eq("caixa_sessao_id",e).order("criado_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a?.[0]||null}async function Iee({tipo:e,valor:t,observacao:r="",caixaSessaoId:n,codigoEmpresa:a}={}){const i=a||bn();if(!e||!["sangria","suprimento","troco","ajuste"].includes(e))throw new Error("Tipo invlido de movimentao");let o=n;if(!o){let d=Oe.from("caixa_sessoes").select("id").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);i&&(d=d.eq("codigo_empresa",i));const{data:f,error:h}=await d;if(h)throw h;o=f?.[0]?.id||null}if(!o)throw new Error("Sesso de caixa no encontrada para registrar movimentao");const l={codigo_empresa:i,caixa_sessao_id:o,tipo:e,valor:Math.max(0,Number(t)||0),observacao:(r||"").trim()||null},{data:c,error:u}=await Oe.from("caixa_movimentacoes").insert(l).select("*").single();if(u)throw u;return c}async function Rg({caixaSessaoId:e,codigoEmpresa:t}={}){const r=t||bn();if(!e)throw new Error("caixaSessaoId  obrigatrio");let n=Oe.from("caixa_movimentacoes").select("*").eq("caixa_sessao_id",e).order("criado_em",{ascending:!0});r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function oHe({mesaId:e,codigoEmpresa:t}={}){const r=t||bn();await H4({codigoEmpresa:r}),console.log(`[abrirComandaParaMesa] Iniciando para mesaId: ${e}, codigo_empresa: ${r}`);try{const n={status:"open",aberto_em:new Date().toISOString()};e&&(n.mesa_id=e),console.log("[abrirComandaParaMesa] Payload (codigo_empresa via DEFAULT):",n);const{data:a,error:i}=await Oe.from("comandas").insert(n).select("*").single();if(i)throw console.error("[abrirComandaParaMesa] ERRO ao criar comanda:",i),i;return console.log("[abrirComandaParaMesa]  Comanda criada:",a),await new Promise(o=>setTimeout(o,100)),a}catch(n){throw console.error("[abrirComandaParaMesa] ERRO:",n),n}}async function sHe({mesaId:e,codigoEmpresa:t}){const r=t||bn();let n=Oe.from("comandas").select("id,status,aberto_em,fechado_em").eq("mesa_id",e).is("fechado_em",null).in("status",["open","awaiting-payment"]).order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a?.[0]||null}async function Ya({comandaId:e,codigoEmpresa:t}){const r=t||bn();let n=Oe.from("comanda_itens").select("*").eq("comanda_id",e).order("created_at",{ascending:!0});r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function lHe({mesaId:e,codigoEmpresa:t}={}){const r=t||bn();await H4({codigoEmpresa:r}),console.log(`[getOrCreateComandaForMesa] SEMPRE criando nova comanda para mesa ${e}`);const n=await sHe({mesaId:e,codigoEmpresa:r});if(n){console.log(`[getOrCreateComandaForMesa] Fechando comanda existente ${n.id} para criar nova`);try{await Oe.from("comandas").update({status:"closed",fechado_em:new Date().toISOString()}).eq("id",n.id).eq("codigo_empresa",r),await Oe.from("comanda_clientes").delete().eq("comanda_id",n.id).eq("codigo_empresa",r)}catch(a){console.error("Erro ao fechar comanda antiga:",a)}}return console.log(`[getOrCreateComandaForMesa] Criando nova comanda zerada para mesa ${e}`),oHe({mesaId:e,codigoEmpresa:r})}async function Lx({comandaId:e,clienteIds:t=[],nomesLivres:r=[],codigoEmpresa:n}={}){const a=n||bn();if(!e)throw new Error("comandaId  obrigatrio");console.log(`[adicionarClientesAComanda] Adicionando clientes  comanda ${e}:`,{clienteIds:t,nomesLivres:r,codigo:a});const{data:i}=await Oe.from("comanda_clientes").select("cliente_id").eq("comanda_id",e),o=new Set((i||[]).map(d=>d.cliente_id).filter(Boolean)),l=[];for(const d of t||[])o.has(d)?console.log(`[adicionarClientesAComanda] Cliente ${d} j vinculado, pulando`):l.push({comanda_id:e,cliente_id:d});for(const d of r||[]){const f=(d||"").trim();f&&l.push({comanda_id:e,nome_livre:f})}if(l.length===0)return console.log("[adicionarClientesAComanda] Nenhum cliente novo para adicionar"),!0;const c=l.map(d=>a?{...d,codigo_empresa:a}:d);console.log("[adicionarClientesAComanda] Payload para insero:",c);const{error:u}=await Oe.from("comanda_clientes").insert(c);if(u)throw console.error("[adicionarClientesAComanda] ERRO ao inserir clientes:",u),u;return console.log("[adicionarClientesAComanda] Clientes adicionados com sucesso"),!0}async function Xo({comandaId:e,codigoEmpresa:t}={}){if(t||bn(),!e)throw new Error("comandaId  obrigatrio");try{const{data:r,error:n}=await Oe.from("comanda_clientes").select("id, cliente_id, nome_livre, clientes:clientes!comanda_clientes_cliente_id_fkey(id, nome, email, telefone)").eq("comanda_id",e).order("created_at",{ascending:!0});if(n)throw n;return(r||[]).map(a=>({id:a.id,tipo:a.cliente_id?"cadastrado":"comum",nome:a.clientes?.nome||a.nome_livre,cliente_id:a.cliente_id}))}catch{try{const{data:n,error:a}=await Oe.from("comanda_clientes").select("id, cliente_id, nome_livre, clientes:clientes!fk_comanda_clientes_cliente(id, nome, email, telefone)").eq("comanda_id",e).order("created_at",{ascending:!0});if(a)throw a;return(n||[]).map(i=>({id:i.id,tipo:i.cliente_id?"cadastrado":"comum",nome:i.clientes?.nome||i.nome_livre,cliente_id:i.cliente_id}))}catch{const{data:a,error:i}=await Oe.from("comanda_clientes").select("id, cliente_id, nome_livre").eq("comanda_id",e).order("created_at",{ascending:!0});if(i)throw i;return(a||[]).map(o=>({id:o.id,tipo:o.cliente_id?"cadastrado":"comum",nome:o.nome_livre||"",cliente_id:o.cliente_id}))}}}async function $O({comandaId:e,produtoId:t,descricao:r,quantidade:n,precoUnitario:a,desconto:i=0,codigoEmpresa:o}){const l=o||bn();console.log(`[adicionarItem] Adicionando item  comanda ${e}:`,{produtoId:t,descricao:r,quantidade:n,precoUnitario:a,codigo:l});try{let f=Oe.from("produtos").select("id, estoque, estoque_minimo, nome").eq("id",t).limit(1);l&&(f=f.eq("codigo_empresa",l));const{data:h,error:m}=await f;if(m)throw m;const g=Array.isArray(h)?h[0]:h;if(g){const p=Number(g.estoque??0),y=Number(g.estoque_minimo??0),x=Number(n??1);if(p<=0){const P=new Error(`Produto sem estoque: ${g.nome||""}`.trim());throw P.code="OUT_OF_STOCK",P}let b=Oe.from("comanda_itens").select("quantidade").eq("comanda_id",e).eq("produto_id",t);l&&(b=b.eq("codigo_empresa",l));const{data:w,error:S}=await b;if(S)throw S;const j=Array.isArray(w)&&w.length?w.reduce((P,C)=>P+Number(C?.quantidade||0),0):0;if(j+x>p){const P=new Error(`Estoque insuficiente. Em comanda: ${j}, solicitado: +${x}, disponvel: ${p}`);throw P.code="INSUFFICIENT_STOCK",P}if(p<=y&&p>0)try{console.warn(`[adicionarItem] Aviso: estoque baixo para produto '${g.nome}' (estoque=${p}, minimo=${y})`)}catch{}}}catch(f){throw f}const c={comanda_id:e,produto_id:t,descricao:r,quantidade:n,preco_unitario:a,desconto:i};l&&(c.codigo_empresa=l);const{data:u,error:d}=await Oe.from("comanda_itens").insert(c).select("*").single();if(d)throw d;return u}async function ad({itemId:e,quantidade:t,codigoEmpresa:r}){const n=r||bn();let a=Oe.from("comanda_itens").select("id, quantidade, produto_id, comanda_id").eq("id",e).limit(1);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:o}=await a;if(o)throw o;const l=Array.isArray(i)?i[0]:i,c=Number(t||0);if(!l)throw new Error("Item no encontrado");const u=Number(l.quantidade||0);if(c-u>0){let g=Oe.from("produtos").select("id, estoque, nome, estoque_minimo").eq("id",l.produto_id).limit(1);n&&(g=g.eq("codigo_empresa",n));const{data:p,error:y}=await g;if(y)throw y;const x=Array.isArray(p)?p[0]:p;if(x){const b=Number(x.estoque??0);let w=Oe.from("comanda_itens").select("quantidade").eq("comanda_id",l.comanda_id).eq("produto_id",l.produto_id).neq("id",l.id);n&&(w=w.eq("codigo_empresa",n));const{data:S,error:j}=await w;if(j)throw j;const A=Array.isArray(S)&&S.length?S.reduce((R,k)=>R+Number(k?.quantidade||0),0):0;if(A+c>b){const R=new Error(`Estoque insuficiente. Em comanda (outros itens): ${A}, novo para este item: ${c}, disponvel: ${b}`);throw R.code="INSUFFICIENT_STOCK",R}const C=Number(x.estoque_minimo??0),E=b-(A+c);if(E<=C&&E>=0)try{console.warn(`[atualizarQuantidadeItem] Aviso: produto '${x.nome}' atingiu nvel de estoque baixo (restante=${E}, minimo=${C})`)}catch{}}}let f=Oe.from("comanda_itens").update({quantidade:c}).eq("id",e);n&&(f=f.eq("codigo_empresa",n));const{data:h,error:m}=await f.select("*").single();if(m)throw m;return h}async function Lg({itemId:e,codigoEmpresa:t}){const r=t||bn();let n=Oe.from("comanda_itens").delete().eq("id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n.select("id").single();if(i)throw i;return!!a}function cHe(e){if(!e)return!1;const t=e.code?String(e.code):"",r=[e.message,e.details,e.hint].filter(Boolean).join(" ").toLowerCase();return t==="22P02"||r.includes("invalid input value for enum")}async function FO({comandaId:e,finalizadoraId:t,metodo:r,valor:n,status:a="Pago",codigoEmpresa:i,clienteId:o=null}){const l=i||bn();if(!l)throw new Error("Empresa no identificada (codigo_empresa ausente).");const c=a&&["Pendente","Pago","Estornado","Cancelado"].includes(a)?a:"Pago",u=["dinheiro","credito","debito","pix","voucher","outros"],f=(m=>{if(!m)return"outros";const g=String(m).toLowerCase().trim(),y={"cartao credito":"credito","carto credito":"credito","cartao debito":"debito","carto debito":"debito","carto de credito":"credito","carto de dbito":"debito","cartao de credito":"credito","cartao de debito":"debito"}[g]||g;return u.includes(y)?y:"outros"})(r),h={comanda_id:e,finalizadora_id:t||null,metodo:f,valor:Math.max(0,Number(n)||0),status:c,recebido_em:new Date().toISOString(),codigo_empresa:l};console.log("[registrarPagamento] Iniciando registro de pagamento:",{comandaId:e,finalizadoraId:t,metodo:f,valor:h.valor,status:h.status,codigoEmpresa:l,payload:h});try{const{data:m,error:g}=await Oe.from("pagamentos").insert(h).select().single();if(g){console.warn("[registrarPagamento] Primeira tentativa falhou:",{code:g.code,message:g.message});const p=`${g?.message||""} ${g?.details||""}`.toLowerCase();if(g?.code==="42703"||p.includes("column")&&p.includes("cliente_id")){const{cliente_id:x,...b}=h;try{localStorage.setItem("schema:pagamentos:cliente_id","no")}catch{}const{data:w,error:S}=await Oe.from("pagamentos").insert(b).select().single();if(S)throw S;return console.log("[registrarPagamento] Pagamento registrado sem cliente_id:",w),w}if(cHe(g)){console.log("[registrarPagamento] Tentando abordagem alternativa sem status...");try{const x={...h};delete x.status;const{data:b,error:w}=await Oe.from("pagamentos").insert(x).select().single();if(w)throw w;return console.log("[registrarPagamento] Pagamento registrado com sucesso (abordagem alternativa):",b),b}catch(x){throw console.error("[registrarPagamento] Falha na abordagem alternativa:",x),new Error(`Falha ao processar pagamento: ${x.message}`)}}throw g}return console.log("[registrarPagamento] Pagamento registrado com sucesso:",m),m}catch(m){throw console.error("[registrarPagamento] Erro ao registrar pagamento:",{error:{message:m.message,code:m.code,details:m.details,hint:m.hint},comandaId:e,finalizadoraId:t,valor:h.valor,status:h.status,codigoEmpresa:l}),m}}async function AS({comandaId:e,codigoEmpresa:t}){const r=t||bn(),n="[fecharComandaEMesa]";try{console.group(n)}catch{}try{console.time?.(n)}catch{}try{console.log(`${n} Iniciando fechamento da comanda ${e}`),console.log(`${n} Obtendo dados da comanda...`);const{data:a,error:i}=await Oe.from("comandas").select("id, mesa_id, status, fechado_em").eq("id",e).single();if(i||!a)throw console.error(`${n} Erro ao buscar comanda:`,i?.message||"Comanda no encontrada"),i||new Error("Comanda no encontrada");if(a.fechado_em)return console.log(`${n} Comanda ${e} j est fechada em ${a.fechado_em}`),!0;const o=new Date().toISOString();console.log(`${n} Atualizando comanda...`),console.log(`${n} Fechando comanda com status closed + fechado_em...`);const{error:l}=await Oe.from("comandas").update({status:"closed",fechado_em:o}).eq("id",e).eq("codigo_empresa",r);if(l)throw console.error(`${n} Erro ao fechar comanda:`,l),l;if(console.log(`${n} Comanda ${e} fechada com sucesso`),a.mesa_id){console.log(`${n} Atualizando status da mesa ${a.mesa_id} para disponvel...`);try{const{error:c}=await Oe.from("mesas").update({status:"available"}).eq("id",a.mesa_id).select("id").single();c?console.error(`${n} Erro ao atualizar status da mesa:`,c):console.log(`${n} Mesa ${a.mesa_id} marcada como disponvel`)}catch(c){console.error(`${n} Exceo ao atualizar mesa:`,c)}}else console.log(`${n} Nenhuma mesa associada para liberar`);return console.log(`${n} Fechamento da comanda ${e} concludo com sucesso`),!0}catch(a){throw console.error(`${n} Erro fatal ao fechar comanda:`,a),a}finally{try{console.timeEnd?.(n)}catch{}try{console.groupEnd()}catch{}}}async function I7({comandaId:e,codigoEmpresa:t}){const r=t||bn(),n="[cancelarComandaEMesa]";try{console.group(n)}catch{}try{console.time?.(n)}catch{}try{if(!e)throw new Error("comandaId obrigatrio");if(!r)throw new Error("codigo_empresa obrigatrio");console.log(`${n} Cancelando comanda ${e}`);const{data:a}=await Oe.from("comandas").select("id, mesa_id").eq("id",e).single();try{await Oe.from("comanda_itens").delete().eq("comanda_id",e).eq("codigo_empresa",r)}catch{}try{await Oe.from("comanda_clientes").delete().eq("comanda_id",e).eq("codigo_empresa",r)}catch{}const{error:i}=await Oe.from("comandas").update({status:"cancelled",fechado_em:null}).eq("id",e).eq("codigo_empresa",r);if(i)throw i;if(a?.mesa_id){console.log(`${n} Liberando mesa ${a.mesa_id}`);try{await Oe.from("mesas").update({status:"available"}).eq("id",a.mesa_id)}catch(o){console.error(`${n} Erro ao liberar mesa:`,o)}}return console.log(`${n} Comanda ${e} cancelada com sucesso`),!0}catch(a){throw console.error(`${n} Falha:`,a),a}finally{try{console.timeEnd?.(n)}catch{}try{console.groupEnd?.(n)}catch{}}}var $N="Tabs",[uHe,kat]=ic($N,[DN]),Dee=DN(),[dHe,G4]=uHe($N),Mee=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=EN(l),[f,h]=Id({prop:n,onChange:a,defaultProp:i??"",caller:$N});return s.jsx(dHe,{scope:r,baseId:Dc(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Vr.div,{dir:d,"data-orientation":o,...u,ref:t})})});Mee.displayName=$N;var Ree="TabsList",Lee=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=G4(Ree,r),o=Dee(r);return s.jsx(DZ,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Vr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Lee.displayName=Ree;var $ee="TabsTrigger",Fee=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=G4($ee,r),l=Dee(r),c=qee(o.baseId,n),u=Uee(o.baseId,n),d=n===o.value;return s.jsx(MZ,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Vr.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:cr(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:cr(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:cr(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});Fee.displayName=$ee;var Bee="TabsContent",zee=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=G4(Bee,r),c=qee(l.baseId,n),u=Uee(l.baseId,n),d=n===l.value,f=v.useRef(d);return v.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(Pl,{present:a||d,children:({present:h})=>s.jsx(Vr.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});zee.displayName=Bee;function qee(e,t){return`${e}-trigger-${t}`}function Uee(e,t){return`${e}-content-${t}`}var fHe=Mee,Wee=Lee,Vee=Fee,Hee=zee;const Ad=fHe,Nu=le.forwardRef(({className:e,...t},r)=>s.jsx(Wee,{ref:r,className:Ot("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Nu.displayName=Wee.displayName;const Jn=le.forwardRef(({className:e,...t},r)=>s.jsx(Vee,{ref:r,className:Ot("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Jn.displayName=Vee.displayName;const Qi=le.forwardRef(({className:e,...t},r)=>s.jsx(Hee,{ref:r,className:Ot("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Qi.displayName=Hee.displayName;function Gee({open:e,onOpenChange:t,client:r,onSaved:n}){const{toast:a}=Za(),{userProfile:i}=po(),o=C=>({tipo_pessoa:C?.tipo_pessoa||"PF",tipo_cadastro:C?.tipo_cadastro||"cliente",nome:C?.nome||"",apelido:C?.apelido||"",cpf:C?.cpf||"",cnpj:C?.cnpj||"",rg:C?.rg||"",ie:C?.ie||"",email:C?.email||"",telefone:C?.telefone||"",fone2:C?.fone2||"",celular1:C?.celular1||"",celular2:C?.celular2||"",whatsapp:C?.whatsapp||"",cep:C?.cep||"",endereco:C?.endereco||"",numero:C?.numero||"",complemento:C?.complemento||"",bairro:C?.bairro||"",cidade:C?.cidade||"",uf:C?.uf||"",cidade_ibge:C?.cidade_ibge||"",limite_credito:C?.limite_credito??"",tipo_recebimento:C?.tipo_recebimento||"",regime_tributario:C?.regime_tributario||"",tipo_contribuinte:C?.tipo_contribuinte||"",aniversario:C?.aniversario?String(C.aniversario).slice(0,10):"",sexo:C?.sexo||"",estado_civil:C?.estado_civil||"",nome_mae:C?.nome_mae||"",nome_pai:C?.nome_pai||"",observacoes:C?.observacoes||"",status:C?.status||"active"}),[l,c]=v.useState(o(r)),[u,d]=v.useState("basicos");v.useEffect(()=>{let C="cliente";r?.flag_cliente&&r?.flag_fornecedor?C="ambos":r?.flag_fornecedor&&(C="fornecedor"),c({tipo_pessoa:r?.tipo_pessoa||"PF",tipo_cadastro:C,nome:r?.nome||"",apelido:r?.apelido||"",cpf:r?.cpf||"",cnpj:r?.cnpj||"",rg:r?.rg||"",ie:r?.ie||"",email:r?.email||"",telefone:r?.telefone||"",fone2:r?.fone2||"",celular1:r?.celular1||"",celular2:r?.celular2||"",whatsapp:r?.whatsapp||"",cep:r?.cep||"",endereco:r?.endereco||"",numero:r?.numero||"",complemento:r?.complemento||"",bairro:r?.bairro||"",cidade:r?.cidade||"",uf:r?.uf||"",cidade_ibge:r?.cidade_ibge||"",limite_credito:r?.limite_credito??"",tipo_recebimento:r?.tipo_recebimento||"",regime_tributario:r?.regime_tributario||"",tipo_contribuinte:r?.tipo_contribuinte||"",aniversario:r?.aniversario?String(r.aniversario).slice(0,10):"",sexo:r?.sexo||"",estado_civil:r?.estado_civil||"",nome_mae:r?.nome_mae||"",nome_pai:r?.nome_pai||"",observacoes:r?.observacoes||"",status:r?.status||"active"})},[r]),v.useEffect(()=>{e?c(o(r||null)):r||c(o(null))},[e,!!r]);const f=C=>{const{id:E,value:R}=C.target;c(k=>({...k,[E]:R}))},h=C=>C===""?null:C,m=C=>{if(C==null)return null;if(typeof C=="number")return C;const E=String(C).trim();if(!E)return null;const R=E.replace(/\s+/g,"").replace(/\.(?=\d{3}(?:\D|$))/g,"").replace(/,/g,"."),k=Number(R);return Number.isFinite(k)?k:null},g=v.useMemo(()=>({digits:C=>(C||"").replace(/\D+/g,"")}),[]),p=C=>g.digits(C).slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),y=C=>g.digits(C).slice(0,14).replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2"),x=C=>g.digits(C).slice(0,8).replace(/(\d{5})(\d)/,"$1-$2"),b=C=>{const E=g.digits(C).slice(0,11);return E.length<=10?E.replace(/(\d{2})(\d{4})(\d{0,4})/,"($1) $2-$3").trim():E.replace(/(\d{2})(\d{5})(\d{0,4})/,"($1) $2-$3").trim()},w=C=>String(C||"").replace(/[^a-z]/gi,"").toUpperCase().slice(0,2),S=(C,E=6)=>g.digits(C).slice(0,E),j=(C,E)=>{let R=E;C==="cpf"&&(R=p(E)),C==="cnpj"&&(R=y(E)),C==="cep"&&(R=x(E)),["telefone","fone2","celular1","celular2","whatsapp"].includes(C)&&(R=b(E)),C==="uf"&&(R=w(E)),C==="numero"&&(R=S(E,8)),C==="cidade_ibge"&&(R=S(E,7)),c(k=>({...k,[C]:R}))},A=async()=>{const C=g.digits(l.cep);if(!C||C.length!==8){a({title:"CEP invlido",description:"Informe 8 dgitos.",variant:"destructive"});return}try{const R=await(await fetch(`https://viacep.com.br/ws/${C}/json/`)).json();if(R.erro)throw new Error("CEP no encontrado");c(k=>({...k,endereco:R.logradouro||k.endereco,bairro:R.bairro||k.bairro,cidade:R.localidade||k.cidade,uf:R.uf||k.uf,cidade_ibge:R.ibge||k.cidade_ibge}))}catch(E){a({title:"Falha ao buscar CEP",description:E.message||"Tente novamente.",variant:"destructive"})}},P=async C=>{C?.preventDefault?.();try{if(!l.nome||l.nome.trim().length<2)throw new Error("Informe o nome/razo social do cliente.");const E={tipo_pessoa:h(l.tipo_pessoa),nome:l.nome,apelido:h(l.apelido),cpf:h(l.cpf),cnpj:h(l.cnpj),rg:h(l.rg),ie:h(l.ie),email:h(l.email),telefone:h(l.telefone),fone2:h(l.fone2),celular1:h(l.celular1),celular2:h(l.celular2),whatsapp:h(l.whatsapp),cep:h(l.cep),endereco:h(l.endereco),numero:h(l.numero),complemento:h(l.complemento),bairro:h(l.bairro),cidade:h(l.cidade),uf:h(l.uf),cidade_ibge:h(l.cidade_ibge),limite_credito:m(l.limite_credito),tipo_recebimento:h(l.tipo_recebimento),regime_tributario:h(l.regime_tributario),tipo_contribuinte:h(l.tipo_contribuinte),aniversario:h(l.aniversario),sexo:h(l.sexo),estado_civil:h(l.estado_civil),nome_mae:h(l.nome_mae),nome_pai:h(l.nome_pai),observacoes:h(l.observacoes),flag_cliente:l.tipo_cadastro==="cliente"||l.tipo_cadastro==="ambos",flag_fornecedor:l.tipo_cadastro==="fornecedor"||l.tipo_cadastro==="ambos",flag_funcionario:!1,flag_administradora:!1,flag_parceiro:!1,flag_ccf_spc:!1,status:l.status};let R,k=null;if(r?.id){const{data:T,error:I}=await Oe.from("clientes").update(E).eq("id",r.id).select().single();R=I,k=T??null}else{const T=i?.codigo_empresa||null;if(!T)throw new Error("No foi possvel identificar a empresa do usurio (codigo_empresa). Tente recarregar a pgina ou entrar novamente.");const I={...E,codigo_empresa:T},{data:M,error:z}=await Oe.from("clientes").insert(I).select().single();R=z,k=M??null}if(R)throw R;a({title:"Cliente salvo!",description:"As informaes do cliente foram atualizadas.",variant:"success"}),n?.(k),setTimeout(()=>{t?.(!1)},50)}catch(E){const R=(E?.message||"").toLowerCase(),k=R.includes("column")&&R.includes("does not exist")?"Seu banco pode no estar migrado para os novos campos. Atualize o schema conforme estrutura_bd.":E.message;a({title:"Erro ao salvar cliente",description:k,variant:"destructive"})}};return s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto w-full",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:r?"Editar Cliente":"Novo Cliente"}),s.jsx(Jr,{children:"Preencha os dados cadastrais do cliente."})]}),s.jsx("form",{onSubmit:P,className:"grid gap-4 sm:gap-6 py-2",children:s.jsxs(Ad,{value:u,onValueChange:d,className:"w-full",children:[s.jsx("div",{className:"sm:hidden mb-4",children:s.jsxs(yn,{value:u,onValueChange:d,children:[s.jsx(pn,{className:"w-full",children:s.jsx(xn,{})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"basicos",children:"Dados Bsicos"}),s.jsx(Wt,{value:"endereco",children:"Endereo"}),s.jsx(Wt,{value:"financeiro",children:"Financeiro"}),s.jsx(Wt,{value:"adicionais",children:"Adicionais"})]})]})}),s.jsxs(Nu,{className:"hidden sm:grid grid-cols-4 gap-2",children:[s.jsx(Jn,{value:"basicos",children:"Dados Bsicos"}),s.jsx(Jn,{value:"endereco",children:"Endereo"}),s.jsx(Jn,{value:"financeiro",children:"Financeiro"}),s.jsx(Jn,{value:"adicionais",children:"Adicionais"})]}),s.jsx(Qi,{value:"basicos",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{children:"Tipo de Pessoa"}),s.jsxs(yn,{value:l.tipo_pessoa,onValueChange:C=>c(E=>({...E,tipo_pessoa:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Pessoa"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"PF",children:"Fsica"}),s.jsx(Wt,{value:"PJ",children:"Jurdica"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{children:"Tipo de Cadastro *"}),s.jsxs(yn,{value:l.tipo_cadastro,onValueChange:C=>c(E=>({...E,tipo_cadastro:C})),required:!0,children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"cliente",children:"Cliente"}),s.jsx(Wt,{value:"fornecedor",children:"Fornecedor"}),s.jsx(Wt,{value:"ambos",children:"Cliente e Fornecedor"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(gt,{htmlFor:"nome",children:l.tipo_pessoa==="PJ"?"Razo Social":"Nome"}),s.jsx($t,{id:"nome",value:l.nome,onChange:f,required:!0})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(gt,{htmlFor:"apelido",children:l.tipo_pessoa==="PJ"?"Nome Fantasia":"Apelido"}),s.jsx($t,{id:"apelido",value:l.apelido,onChange:f})]}),l.tipo_pessoa==="PF"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"cpf",children:"CPF"}),s.jsx($t,{id:"cpf",value:l.cpf,onChange:C=>j("cpf",C.target.value),placeholder:"000.000.000-00"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"rg",children:"RG"}),s.jsx($t,{id:"rg",value:l.rg,onChange:f})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"cnpj",children:"CNPJ"}),s.jsx($t,{id:"cnpj",value:l.cnpj,onChange:C=>j("cnpj",C.target.value),placeholder:"00.000.000/0000-00"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"ie",children:"Inscrio Estadual (IE)"}),s.jsx($t,{id:"ie",value:l.ie,onChange:f})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(gt,{htmlFor:"email",children:"Email"}),s.jsx($t,{id:"email",type:"email",value:l.email,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"telefone",children:"Telefone"}),s.jsx($t,{id:"telefone",value:l.telefone,onChange:C=>j("telefone",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"celular1",children:"Celular"}),s.jsx($t,{id:"celular1",value:l.celular1,onChange:C=>j("celular1",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"whatsapp",children:"WhatsApp"}),s.jsx($t,{id:"whatsapp",value:l.whatsapp,onChange:C=>j("whatsapp",C.target.value),placeholder:"(DDD) 9...."})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"fone2",children:"Fone 2"}),s.jsx($t,{id:"fone2",value:l.fone2,onChange:C=>j("fone2",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"celular2",children:"Celular 2"}),s.jsx($t,{id:"celular2",value:l.celular2,onChange:C=>j("celular2",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"aniversario",children:"Nascimento"}),s.jsx($t,{id:"aniversario",type:"date",value:l.aniversario||"",onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{children:"Status"}),s.jsxs(yn,{value:l.status,onValueChange:C=>c(E=>({...E,status:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Status"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"active",children:"Ativo"}),s.jsx(Wt,{value:"inactive",children:"Inativo"})]})]})]})]})}),s.jsx(Qi,{value:"endereco",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"cep",children:"CEP"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($t,{id:"cep",value:l.cep,onChange:C=>j("cep",C.target.value),placeholder:"00000-000"}),s.jsx(Ee,{type:"button",variant:"outline",onClick:A,children:"Buscar"})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(gt,{htmlFor:"endereco",children:"Endereo"}),s.jsx($t,{id:"endereco",value:l.endereco,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"numero",children:"Nmero"}),s.jsx($t,{id:"numero",value:l.numero,onChange:C=>j("numero",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(gt,{htmlFor:"complemento",children:"Complemento"}),s.jsx($t,{id:"complemento",value:l.complemento,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(gt,{htmlFor:"bairro",children:"Bairro"}),s.jsx($t,{id:"bairro",value:l.bairro,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"cidade",children:"Cidade"}),s.jsx($t,{id:"cidade",value:l.cidade,onChange:f})]}),s.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[s.jsx(gt,{htmlFor:"uf",children:"UF"}),s.jsx($t,{id:"uf",value:l.uf,onChange:C=>j("uf",C.target.value),placeholder:"UF"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"cidade_ibge",children:"Cd. IBGE"}),s.jsx($t,{id:"cidade_ibge",value:l.cidade_ibge,onChange:C=>j("cidade_ibge",C.target.value)})]})]})}),s.jsx(Qi,{value:"financeiro",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{htmlFor:"limite_credito",children:"Limite de Crdito"}),s.jsx($t,{id:"limite_credito",value:l.limite_credito,onChange:f,placeholder:"0,00"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{children:"Tipo de Recebimento"}),s.jsxs(yn,{value:l.tipo_recebimento||"",onValueChange:C=>c(E=>({...E,tipo_recebimento:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"avista",children:" vista"}),s.jsx(Wt,{value:"aprazo",children:"A prazo"}),s.jsx(Wt,{value:"misto",children:"Misto"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{children:"Regime Tributrio"}),s.jsxs(yn,{value:l.regime_tributario||"",onValueChange:C=>c(E=>({...E,regime_tributario:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"simples",children:"Simples"}),s.jsx(Wt,{value:"lucro_presumido",children:"Lucro Presumido"}),s.jsx(Wt,{value:"lucro_real",children:"Lucro Real"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(gt,{children:"Tipo de Contribuinte"}),s.jsxs(yn,{value:l.tipo_contribuinte||"",onValueChange:C=>c(E=>({...E,tipo_contribuinte:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"nao_contribuinte",children:"No Contribuinte"}),s.jsx(Wt,{value:"contribuinte",children:"Contribuinte"}),s.jsx(Wt,{value:"isento",children:"Isento"})]})]})]})]})}),s.jsx(Qi,{value:"adicionais",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(gt,{htmlFor:"sexo",children:"Sexo"}),s.jsxs(yn,{value:l.sexo||"",onValueChange:C=>c(E=>({...E,sexo:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"m",children:"Masculino"}),s.jsx(Wt,{value:"f",children:"Feminino"}),s.jsx(Wt,{value:"o",children:"Outro"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(gt,{htmlFor:"estado_civil",children:"Estado Civil"}),s.jsxs(yn,{value:l.estado_civil||"",onValueChange:C=>c(E=>({...E,estado_civil:C})),children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"solteiro",children:"Solteiro(a)"}),s.jsx(Wt,{value:"casado",children:"Casado(a)"}),s.jsx(Wt,{value:"divorciado",children:"Divorciado(a)"}),s.jsx(Wt,{value:"viuvo",children:"Vivo(a)"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(gt,{htmlFor:"nome_mae",children:"Nome da Me"}),s.jsx($t,{id:"nome_mae",value:l.nome_mae,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(gt,{htmlFor:"nome_pai",children:"Nome do Pai"}),s.jsx($t,{id:"nome_pai",value:l.nome_pai,onChange:f})]}),s.jsxs("div",{className:"col-span-12",children:[s.jsx(gt,{htmlFor:"observacoes",children:"Observaes"}),s.jsx("textarea",{id:"observacoes",value:l.observacoes,onChange:f,rows:4,className:"w-full rounded-md border border-border bg-background p-2 text-sm"})]})]})})]})}),s.jsxs(mn,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Cancelar"})}),s.jsx(Ee,{type:"submit",onClick:P,className:"w-full sm:w-auto",children:"Salvar Cliente"})]})]})})}const _n=30,vc=e=>{const t=String(e??"").replace(/\D/g,"");if(!t)return"";const r=(Number(t)/100).toFixed(2),[n,a]=r.split(".");return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${a}`},Vi=e=>{if(e==null||e==="")return NaN;const t=String(e).replace(/\./g,"").replace(",","."),r=parseFloat(t);return Number.isFinite(r)?r:NaN};function D7(e){const t=String(e||"").trim().split(/\s+/).filter(Boolean);return t.length===0?"":t.length===1?t[0]:`${t[0]} ${t[1]}`}const os=56,hHe=6,BO=6,Kee=24;Array.from({length:(Kee-BO)*(60/_n)},(e,t)=>{const r=BO*60+t*_n,n=Math.floor(r/60),a=r%60;return{time:`${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`,isHourMark:a===0}});const zh=["Futebol","Beach Tennis","Futevlei","Treino"],ss={scheduled:{label:"Agendado",accent:"bg-[#3B82F6]",text:"text-[#3B82F6]",border:"border-[#3B82F6]",hex:"#3B82F6",icon:vu},confirmed:{label:"Confirmado",accent:"bg-[#22C55E]",text:"text-[#22C55E]",border:"border-[#22C55E]",hex:"#22C55E",icon:Ds},in_progress:{label:"Em andamento",accent:"bg-[#FACC15]",text:"text-[#FACC15]",border:"border-[#FACC15]",hex:"#FACC15",icon:qW},finished:{label:"Finalizado",accent:"bg-[#6B7280]",text:"text-[#6B7280]",border:"border-[#6B7280]",hex:"#6B7280",icon:fce},canceled:{label:"Cancelado",accent:"bg-[#EF4444]",text:"text-[#EF4444]",border:"border-[#EF4444]",hex:"#EF4444",icon:Z2},absent:{label:"Ausente",accent:"bg-[#F97316]",text:"text-[#F97316]",border:"border-[#F97316]",hex:"#F97316",icon:WW}},mHe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},M7={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function pHe(){const{toast:e}=Za(),t=Us(),r=v.useMemo(()=>{try{return typeof window<"u"&&localStorage.getItem("debug:agenda")==="1"}catch{return!1}},[]),n=v.useCallback((...V)=>{if(r)try{console.log("[AgendaDbg]",...V)}catch{}},[r]);v.useEffect(()=>{const V=console.log,ee=console.info,oe=console.debug,ye=console.warn,ke=console.error,Me=ie=>{const ce=String(ie||"");return ce.startsWith("[AgendaDbg]")||!1||ce.startsWith("[PulseDump]")||ce.startsWith("[Clientes:load]")||ce.startsWith("[AgendaSettings]")||ce.startsWith("[Auto]")||ce.startsWith("[DEBUG-PaymentModal]")||ce.startsWith("[PaymentModal]")||ce.startsWith(" EditGuard")};return console.log=(...ie)=>{try{if(Me(ie[0]))return}catch{}return V(...ie)},console.info=(...ie)=>{try{if(Me(ie[0]))return}catch{}return ee(...ie)},console.debug=(...ie)=>{try{if(Me(ie[0]))return}catch{}return oe(...ie)},console.warn=(...ie)=>{try{if(Me(ie[0]))return}catch{}return ye(...ie)},console.error=(...ie)=>{try{if(Me(ie[0]))return}catch{}return ke(...ie)},()=>{console.log=V,console.info=ee,console.debug=oe,console.warn=ye,console.error=ke}},[]);const a=v.useRef({active:!1,tag:"",start:0,timer:null,events:[]}),i=v.useCallback((V,ee)=>{if(r)try{const oe=Date.now(),ye=a.current&&a.current.active?oe-(a.current.start||oe):0;a.current.events.push({t:oe,ms:ye,event:V,data:ee})}catch{}},[r]),o=v.useCallback(V=>{if(r){try{if(!a.current.active)return;const{tag:ee,start:oe,events:ye}=a.current,ke=`[PulseDump] tag=${ee} dur=${Date.now()-oe}ms reason=${V}`;console.groupCollapsed(ke);for(const Me of ye)console.log(` +${String(Me.ms).padStart(4," ")}ms`,Me.event,Me.data||{});console.groupEnd()}catch{}try{a.current.timer&&clearTimeout(a.current.timer)}catch{}a.current={active:!1,tag:"",start:0,timer:null,events:[]}}},[r]),l=v.useCallback((V,ee=5e3)=>{if(r){try{a.current.timer&&clearTimeout(a.current.timer)}catch{}a.current={active:!0,tag:V,start:Date.now(),timer:null,events:[]},a.current.timer=setTimeout(()=>o("timeout"),ee),n("PulseStart",{tag:V,timeoutMs:ee})}},[r,o,n]),{userProfile:c,authReady:u,company:d}=po(),[f,h]=v.useState(new Date),[m,g]=v.useState([]),[p,y]=v.useState(!1),[x,b]=v.useState(null),[w,S]=v.useState({}),j=v.useRef(0),A=v.useRef(""),P=v.useRef(!1);v.useEffect(()=>{P.current=p,n("Modal state change:",{isModalOpen:p}),i("modal",{open:p})},[p,n]);const C=v.useRef("init"),E=v.useRef(0),R=v.useRef(!1),k=v.useRef(0),T=v.useRef(!1),I=v.useRef(0),[M,z]=v.useState(!1),W=v.useRef(0),U=v.useRef(!1),$=v.useRef(0),G=v.useCallback((V=800)=>{$.current=Date.now()+V,n("UI:busy set",{ms:V})},[n]),me=v.useCallback(()=>Date.now()<$.current,[]),de=v.useRef(0),L=v.useRef(0),B=v.useRef(!1),X=v.useCallback(()=>{const V=Date.now();p||V-L.current<350||(L.current=V,y(!0),B.current=!0)},[p]),q=v.useRef(!1);v.useEffect(()=>{t.state?.openModal&&!p&&!q.current&&(q.current=!0,X(),window.history.replaceState({},document.title))},[t.state?.openModal,p,X]);const[Y,Z]=v.useState({scheduled:!0,available:!0,canceledOnly:!1}),[ge,re]=v.useState(null),[Se,Ie]=v.useState(!0),pe=v.useMemo(()=>Object.fromEntries((ge??[]).map(V=>[V.nome,V])),[ge]),Ue=v.useMemo(()=>(ge??[]).map(V=>V.nome),[ge]),[_e,ue]=v.useState([]),Ft=c?.codigo_empresa,qt=v.useMemo(()=>Ft?`quadras:list:${Ft}`:"quadras:list",[Ft]),zt=v.useMemo(()=>Ft?`agenda:selectedCourts:${Ft}`:"agenda:selectedCourts",[Ft]),it=v.useMemo(()=>Ft?`agenda:viewFilter:${Ft}`:"agenda:viewFilter",[Ft]),[ft,dt]=v.useState(null),[ve,ut]=v.useState(0);v.useEffect(()=>{_e.length>0&&ft===null&&dt(_e[0])},[_e,ft]);const[Te,Ze]=v.useState([]),Ye=v.useRef(null),Nt=v.useRef({scheduled:!0,canceledOnly:!1}),[nt,mt]=v.useState(null),[At,Pe]=v.useState(""),Je=v.useRef(0),Dt=v.useRef(!1),qe=v.useRef(!1),[lt,Bt]=v.useState(!1),[Tt,er]=v.useState(()=>{try{return localStorage.getItem("agenda:hideCanceledInfo")==="1"}catch{return!1}});v.useEffect(()=>{try{localStorage.setItem("agenda:hideCanceledInfo",Tt?"1":"0")}catch{}},[Tt]);const tt=v.useMemo(()=>{if(!c?.codigo_empresa)return null;const V=Rr(f,"yyyy-MM-dd");return`agenda:bookings:${c.codigo_empresa}:${V}`},[c?.codigo_empresa,f]),ur=v.useMemo(()=>{if(!c?.codigo_empresa)return null;const V=Rr(f,"yyyy-MM-dd");return`agenda:participants:${c.codigo_empresa}:${V}`},[c?.codigo_empresa,f]),[ln,rn]=v.useState(!1),fr=v.useMemo(()=>({autoConfirmEnabled:!1,autoConfirmMinutesBefore:120,autoStartEnabled:!0,autoFinishEnabled:!0}),[]),[Zt,Qn]=v.useState(fr),[Kn,Ce]=v.useState(!1),[We,He]=v.useState(0),xt=v.useCallback(()=>Date.now()+(Number.isFinite(We)?We:0),[We]),[at,st]=v.useState(null);v.useEffect(()=>{if(c?.codigo_empresa)try{const V=localStorage.getItem(`agenda:automation:${c.codigo_empresa}`);if(V){const ee=JSON.parse(V);Qn(oe=>({...fr,...ee}))}else Qn(fr)}catch{Qn(fr)}},[c?.codigo_empresa]),v.useEffect(()=>{if(c?.codigo_empresa)try{localStorage.setItem(`agenda:automation:${c.codigo_empresa}`,JSON.stringify(Zt))}catch{}},[Zt,c?.codigo_empresa]),v.useEffect(()=>{(async()=>{if(!(!u||!d?.id))try{const{data:ee,error:oe}=await Oe.from("agenda_settings").select("*").eq("empresa_id",d.id).maybeSingle();if(oe){console.warn("[AgendaSettings] load error",oe);return}if(!ee)return;const ye={autoConfirmEnabled:!!ee.auto_confirm_enabled,autoConfirmMinutesBefore:ee.auto_confirm_enabled&&Number.isFinite(Number(ee.auto_confirm_hours))?Number(ee.auto_confirm_hours)*60:fr.autoConfirmMinutesBefore,autoStartEnabled:!!ee.auto_start_enabled,autoFinishEnabled:!!ee.auto_finish_enabled};Qn(ke=>({...ke,...ye}))}catch(ee){console.warn("[AgendaSettings] unexpected load error",ee)}})()},[u,d?.id]),v.useEffect(()=>{let V=!0,ee=null,oe=!1;const ye=async()=>{try{const{data:ke,error:Me}=await Oe.functions.invoke("time-br",{body:{}});if(!Me&&ke&&V){const ie=Number(ke.nowMs);if(Number.isFinite(ie)){const ce=ie-Date.now();He(ce),st(Date.now());return}}if(!oe){oe=!0;try{console.warn("[TimeSync] time-br sem dados vlidos; usando relgio local.")}catch{}}}catch{if(!oe){oe=!0;try{console.warn("[TimeSync] time-br falhou; usando relgio local.")}catch{}}}};return ye(),ee=setInterval(ye,5*60*1e3),()=>{V=!1,ee&&clearInterval(ee)}},[]);const[Mt,wt]=v.useState({}),Vt=2*60*60*1e3,Qt=v.useCallback(V=>{wt(ee=>({...ee,[V]:Date.now()}))},[]),nr=v.useCallback(V=>{wt(ee=>{if(!ee||!(V in ee))return ee;const oe={...ee};return delete oe[V],oe})},[]),Ar=v.useCallback(V=>{const ee=Mt?.[V];return typeof ee=="number"&&Date.now()-ee<Vt},[Mt]),[cn,On]=v.useState(null),ca=v.useCallback(()=>new Promise(V=>{On({resolve:V})}),[]),Yn=v.useRef(new Map),oi=v.useCallback(async()=>{if(!u||!d?.id){e({title:"No autenticado",description:"Faa login para salvar as configuraes.",variant:"destructive"});return}try{Ce(!0);const V={empresa_id:d.id,auto_confirm_enabled:!!Zt.autoConfirmEnabled,auto_confirm_hours:Zt.autoConfirmEnabled?Math.max(0,Math.round(Number(Zt.autoConfirmMinutesBefore||0)/60)):null,auto_start_enabled:!!Zt.autoStartEnabled,auto_finish_enabled:!!Zt.autoFinishEnabled},{error:ee}=await Oe.from("agenda_settings").upsert(V,{onConflict:"empresa_id"});if(ee)throw ee;e({title:"Configuraes salvas",description:"As automaes da agenda foram atualizadas com sucesso."}),rn(!1)}catch(V){console.error("[AgendaSettings] save error",V);const ee=V?.message||"Falha ao salvar as configuraes.";e({title:"Erro ao salvar",description:ee,variant:"destructive"})}finally{Ce(!1)}},[u,d?.id,Zt]),An=v.useCallback(async(V,ee,oe="user")=>{try{const ye=["canceled","finished","absent"],ke=["scheduled","confirmed","in_progress"],Me=ye.includes(ee);let ie=!1;if(oe==="user"&&ke.includes(ee)){const Ke=(m||[]).find($e=>$e.id===V),rt=Ke?ye.includes(Ke.status):!1,Ge=Ke?!!Ke.auto_disabled:!1;(rt||Ge)&&(ie=!!await ca())}const ce=Me?{status:ee,auto_disabled:!0}:ie?{status:ee,auto_disabled:!1}:{status:ee},{error:he}=await Oe.from("agendamentos").update(ce).eq("codigo_empresa",c.codigo_empresa).eq("id",V).select("id");if(he)throw he;g(Ke=>Ke.map(rt=>{if(rt.id!==V)return rt;const Ge={...rt,status:ee};return Me?Ge.auto_disabled=!0:ie&&(Ge.auto_disabled=!1),Ge}));try{Yn.current.set(V,{status:ee,ts:Date.now()})}catch{}try{const Ke=JSON.parse(localStorage.getItem(tt)||"[]");if(Array.isArray(Ke)&&Ke.length>0){const rt=Array.isArray(Ke)?Ke.map(Ge=>{if(Ge.id!==V)return Ge;const $e={...Ge,status:ee};return Me?$e.auto_disabled=!0:ie&&($e.auto_disabled=!1),$e}):Ke;localStorage.setItem(tt,JSON.stringify(rt))}}catch{}if(oe==="user")try{ie?nr(V):Qt(V)}catch{}}catch(ye){console.error("Auto-status: falha ao atualizar",V,ee,ye)}},[m,tt,Qt,nr,ca,Y]),ua=v.useRef(!1),Ni=v.useRef(null),ei=v.useRef(null),da=v.useCallback(()=>{try{Ni.current&&(clearTimeout(Ni.current),Ni.current=null)}catch{}},[]),Ia=v.useCallback(()=>{if(!u||!c?.codigo_empresa)return;if(Date.now()<(de.current||0)){console.log("[AutoDiag] scheduleNextAutomation:deferred returning-from-hidden"),setTimeout(()=>Ia(),600);return}if(P.current){n("scheduleNextAutomation:skipped (modal open)");return}i("auto:schedule"),da();const ee=xt();let oe=1/0;const ye=ke=>{Number.isFinite(ke)&&ke>ee&&ke<oe&&(oe=ke)};try{for(const ke of m||[]){if(!ke||ke.auto_disabled||Ar(ke.id))continue;const Me=ke.start instanceof Date?ke.start.getTime():new Date(ke.start).getTime(),ie=ke.end instanceof Date?ke.end.getTime():new Date(ke.end).getTime();if(ke.status==="scheduled"&&Zt.autoConfirmEnabled){const ce=Number(Zt.autoConfirmMinutesBefore||0)*6e4;ye(Me-ce),Zt.autoFinishEnabled&&ye(ie)}ke.status==="confirmed"&&(Zt.autoStartEnabled&&ye(Me),Zt.autoFinishEnabled&&ye(ie)),ke.status==="in_progress"&&Zt.autoFinishEnabled&&ye(ie)}}catch{}if(oe!==1/0){const ke=Math.max(0,Math.min(oe-ee+250,6e5));try{console.debug("[Auto] next schedule in ms",ke)}catch{}try{Le(oe)}catch{}Ni.current=setTimeout(()=>{try{ei.current&&ei.current()}catch{}},ke)}},[u,c?.codigo_empresa,m,Zt,Ar,da,xt]),si=v.useCallback(async V=>{try{if(!(typeof at=="number"&&Date.now()-at<6e5))try{const{data:ye}=await Oe.functions.invoke("time-br",{body:{}}),ke=Number(ye?.nowMs);Number.isFinite(ke)&&(He(ke-Date.now()),st(Date.now()))}catch{}try{Ia()}catch{}let oe=null;if(V?.id&&c?.codigo_empresa){const{data:ye}=await Oe.from("agendamentos").select("id, inicio, fim, status, modalidade, quadra_id, cliente_id, auto_disabled").eq("codigo_empresa",c.codigo_empresa).eq("id",V.id).single();if(ye){const ke={...V,start:new Date(ye.inicio),end:new Date(ye.fim),status:ye.status||V.status,modality:ye.modalidade||V.modality,auto_disabled:!!ye.auto_disabled};oe=ke,g(Me=>Me.map(ie=>ie.id===V.id?ke:ie))}}try{const ye=oe||V;if(ye&&ye.id){const ke=xt(),Me=ye.start instanceof Date?ye.start.getTime():new Date(ye.start).getTime(),ie=ye.end instanceof Date?ye.end.getTime():new Date(ye.end).getTime();if(!ye.auto_disabled&&!Ar(ye.id))if(ye.status==="in_progress"&&Zt.autoFinishEnabled&&Number.isFinite(ie)&&ke>=ie)await An(ye.id,"finished","automation");else if(ye.status==="confirmed"&&Zt.autoStartEnabled&&Number.isFinite(Me)&&ke>=Me)await An(ye.id,"in_progress","automation");else if(ye.status==="scheduled"&&Zt.autoConfirmEnabled&&Number.isFinite(Me)){const he=Number(Zt.autoConfirmMinutesBefore||0)*6e4;ke>=Me-he&&await An(ye.id,"confirmed","automation")}else(ye.status==="scheduled"||ye.status==="confirmed")&&Zt.autoFinishEnabled&&Number.isFinite(ie)&&ke>=ie&&await An(ye.id,"finished","automation")}}catch{}try{ei.current&&ei.current()}catch{}try{console.log(" EditGuard | ok | tempo=",typeof at=="number"?"Servidor":"Local")}catch{}return{booking:oe}}catch(ee){try{console.warn(" EditGuard | falha leve",ee?.message||ee)}catch{}return{booking:null}}},[at,Oe,c,g,Ia,xt,Zt,Ar,An]),Xn=v.useCallback(async()=>{if(!(!u||!c?.codigo_empresa)){if(P.current){n("runAutomation:skipped (modal open)");return}if(!ua.current){ua.current=!0;try{try{console.debug("[Auto] tick")}catch{}i("auto:tick");const V=xt(),ee=new Date(V),oe=Rr(ee,"yyyy-MM-dd");let ye=(m||[]).filter(Me=>Rr(Me.start,"yyyy-MM-dd")===oe);if(ye.length===0)try{const Me=Xl(ee),ie=Ii(Me,1),{data:ce,error:he}=await Oe.from("agendamentos").select("id, inicio, fim, status, auto_disabled").eq("codigo_empresa",c.codigo_empresa).gte("inicio",Me.toISOString()).lt("inicio",ie.toISOString());!he&&Array.isArray(ce)&&(ye=ce.map(Ke=>({id:Ke.id,start:new Date(Ke.inicio),end:new Date(Ke.fim),status:Ke.status||"scheduled",auto_disabled:!!Ke.auto_disabled})))}catch{}try{const{data:Me,error:ie}=await Oe.from("agendamentos").select("id, inicio, fim, status, auto_disabled").eq("codigo_empresa",c.codigo_empresa).lt("fim",ee.toISOString()).in("status",["scheduled","confirmed","in_progress"]);if(!ie&&Array.isArray(Me)&&Me.length>0){const ce=Me.map(Ke=>({id:Ke.id,start:new Date(Ke.inicio),end:new Date(Ke.fim),status:Ke.status||"scheduled",auto_disabled:!!Ke.auto_disabled})),he=new Map(ye.map(Ke=>[Ke.id,Ke]));for(const Ke of ce)he.has(Ke.id)||he.set(Ke.id,Ke);ye=Array.from(he.values())}}catch{}let ke=!1;for(const Me of ye){if(Me.auto_disabled||Ar(Me.id))continue;const ie=Me.start instanceof Date?Me.start.getTime():new Date(Me.start).getTime(),ce=Me.end instanceof Date?Me.end.getTime():new Date(Me.end).getTime();if(Me.status==="in_progress"&&Zt.autoFinishEnabled&&V>=ce){try{console.debug("[Auto] finish",{id:Me.id})}catch{}await An(Me.id,"finished","automation"),ke=!0;continue}if(Me.status==="confirmed"&&Zt.autoStartEnabled&&V>=ie){try{console.debug("[Auto] start",{id:Me.id})}catch{}await An(Me.id,"in_progress","automation"),ke=!0;continue}if(Me.status==="scheduled"&&Zt.autoConfirmEnabled){const he=Number(Zt.autoConfirmMinutesBefore||0)*6e4;if(V>=ie-he){try{console.debug("[Auto] confirm",{id:Me.id})}catch{}await An(Me.id,"confirmed","automation"),ke=!0;continue}}if((Me.status==="scheduled"||Me.status==="confirmed")&&Zt.autoFinishEnabled&&V>=ce){try{console.debug("[Auto] catchup-finish",{id:Me.id})}catch{}await An(Me.id,"finished","automation"),ke=!0;continue}}if(ke)try{setTimeout(()=>{try{va()}catch{}},800)}catch{}try{Ia()}catch{}}finally{ua.current=!1}}}},[u,c?.codigo_empresa,m,Zt,An,Ar,Ia,xt]);v.useEffect(()=>{ei.current=Xn},[Xn]),v.useEffect(()=>{const V=setInterval(Xn,1e4);try{ei.current&&ei.current()}catch{}try{Ia()}catch{}return()=>clearInterval(V)},[Xn]),v.useEffect(()=>{const V=setInterval(()=>{try{if(!!!(Zt?.autoConfirmEnabled||Zt?.autoStartEnabled||Zt?.autoFinishEnabled))return;ei.current&&(console.debug("[Auto][Watchdog] forcing periodic automation run"),ei.current())}catch{}},18e5);return()=>clearInterval(V)},[Zt]),v.useEffect(()=>{if(tt)try{const V=JSON.parse(localStorage.getItem(tt)||"[]");if(Array.isArray(V)&&V.length>0){const ee=V.map(oe=>({...oe,start:new Date(oe.start),end:new Date(oe.end)}));n("cache:bookings:hydrate",{count:ee.length}),i("cache:hydrate",{count:ee.length}),g(oe=>oe&&oe.length>0?oe:ee),G(1200)}}catch{}},[tt,n]),v.useEffect(()=>{const V=()=>{try{const ye=new Date().toISOString();if(document.visibilityState==="visible"){const ke=Date.now();de.current=ke+800}}catch{}},ee=()=>{try{const ye=new Date().toISOString()}catch{}},oe=()=>{try{const ye=new Date().toISOString()}catch{}};return document.addEventListener("visibilitychange",V),window.addEventListener("focus",ee),window.addEventListener("blur",oe),()=>{document.removeEventListener("visibilitychange",V),window.removeEventListener("focus",ee),window.removeEventListener("blur",oe)}},[p,m]),v.useEffect(()=>{try{Ia()}catch{}return()=>{try{da()}catch{}}},[m,Zt,Ia,da]),v.useEffect(()=>{if(ur)try{const V=JSON.parse(localStorage.getItem(ur)||"{}");V&&typeof V=="object"&&(S(V),A.current=Rr(f,"yyyy-MM-dd"))}catch{}},[ur]);const va=v.useCallback(async()=>{if(!u||!c?.codigo_empresa||Date.now()<(de.current||0)||p)return;n("fetchBookings:start",{date:Rr(f,"yyyy-MM-dd"),empresa:c?.codigo_empresa}),i("fetch:start",{day:Rr(f,"yyyy-MM-dd")});const V=Xl(f),ee=Ii(V,1),{data:oe,error:ye}=await Oe.from("agendamentos").select(`
        id, codigo, codigo_empresa, quadra_id, cliente_id, clientes, inicio, fim, modalidade, status, auto_disabled,
        quadra:quadra_id ( nome ),
        cliente:cliente_id ( nome )
      `).eq("codigo_empresa",c.codigo_empresa).gte("inicio",V.toISOString()).lt("inicio",ee.toISOString()).order("inicio",{ascending:!0});if(ye){n("fetchBookings:error",{message:ye?.message,code:ye?.code,status:ye?.status}),i("fetch:error",{message:ye?.message,code:ye?.code,status:ye?.status}),e({title:"Erro ao carregar agendamentos",description:ye.message,variant:"destructive"}),Dt.current||(Dt.current=!0,setTimeout(va,900));return}if(!oe||oe.length===0){n("fetchBookings:empty-first-hit"),i("fetch:empty-first");let ie=!1;try{const ce=tt?JSON.parse(localStorage.getItem(tt)||"[]"):[];ie=Array.isArray(ce)&&ce.length>0}catch{}if(!Dt.current&&(Dt.current=!0,ie)){setTimeout(va,700);return}}Dt.current=!1;const ke=Date.now(),Me=(oe||[]).map(ie=>{const ce=new Date(ie.inicio),he=new Date(ie.fim),Ke=ie.quadra?.[0]?.nome||ie.quadra?.nome||Object.values(pe).find(bt=>bt.id===ie.quadra_id)?.nome||"",rt=ie.cliente?.[0]?.nome||ie.cliente?.nome||"",Ge=Yn.current.get(ie.id),$e=Ge&&ke-Ge.ts<4e3;return{id:ie.id,code:ie.codigo,court:Ke,customer:rt,start:ce,end:he,status:$e?Ge.status:ie.status||"scheduled",modality:ie.modalidade||"",auto_disabled:!!ie.auto_disabled}});g(Me);try{if(tt){const ie=Me.map(ce=>({...ce,start:ce.start.toISOString(),end:ce.end.toISOString()}));localStorage.setItem(tt,JSON.stringify(ie))}}catch{}},[u,c?.codigo_empresa,f,pe,tt,e,n,r]);v.useEffect(()=>{if(r)try{const V=(m||[]).map(ee=>`${ee.id}:${Rr(ee.start,"HH:mm")}-${Rr(ee.end,"HH:mm")}:${ee.status}`).join(" | ");console.log("[AgendaDbg] bookings:changed",{count:Array.isArray(m)?m.length:0,summary:V})}catch{}},[m,r]),v.useEffect(()=>{try{const V=Date.now()+1800;k.current=V,n("Picker:suppressClose window set",{until:V})}catch{}},[m]),v.useEffect(()=>{u&&c?.codigo_empresa&&va()},[u,c?.codigo_empresa,f,pe,tt]);const Ri=v.useRef(null),[Sn,Io]=v.useState("idle"),[Li,yo]=v.useState(null),Ci=v.useRef(!1);v.useEffect(()=>{if(!u||!c?.codigo_empresa)return;const V=Xl(f),ee=Ii(V,1),oe=Me=>{try{const ie=new Date(Me);return ie>=V&&ie<ee}catch{return!1}},ye=Me=>{const ie=Me?.new||Me?.old;if(ie&&ie.codigo_empresa===c.codigo_empresa&&(oe(ie.inicio)||oe(ie.fim))){try{console.debug("[Realtime] agendamentos change",{event:Me.eventType,id:ie.id})}catch{}Ri.current&&clearTimeout(Ri.current);try{yo(Date.now())}catch{}if(P.current){n("Realtime:onChange deferred due to modal open"),Ci.current=!0,i("rt:change:deferred",{id:ie.id,event:Me.eventType});return}n("Realtime:onChange scheduling fetchBookings"),i("rt:change",{id:ie.id,event:Me.eventType}),Ri.current=setTimeout(()=>{try{n("Realtime:debounced fetchBookings fire"),i("rt:debounced:fire"),G(1200),va()}catch{}},400)}},ke=Oe.channel(`agendamentos:${c.codigo_empresa}`).on("postgres_changes",{event:"*",schema:"public",table:"agendamentos",filter:`codigo_empresa=eq.${c.codigo_empresa}`},ye).subscribe(Me=>{try{console.debug("[Realtime] channel status",Me)}catch{}try{Io(String(Me||"unknown"))}catch{}});return()=>{try{Ri.current&&clearTimeout(Ri.current)}catch{}try{Oe.removeChannel(ke)}catch{}try{Io("unsubscribed")}catch{}}},[u,c?.codigo_empresa,f,va]),v.useEffect(()=>{if(!p&&Ci.current){Ci.current=!1;try{n("Modal closed: flushing pending realtime refresh"),i("rt:flushAfterModalClose"),va()}catch{}}},[p,va,n]);const[J,Le]=v.useState(null),Pt=v.useRef("");v.useEffect(()=>{try{const V=typeof at=="number"&&Date.now()-at<6e5,ee=Ke=>typeof Ke=="number"?Rr(new Date(Ke),"HH:mm:ss",{locale:Zu}):"",oe=Ke=>typeof Ke=="number"?Rr(new Date(Ke),"HH:mm",{locale:Zu}):"",ye=V?"":"",Me=String(Sn).toUpperCase()==="SUBSCRIBED"?"":"",ie=typeof J=="number"?"":"",ce=Array.isArray(m)?m.length:0,he=` Agenda | ${ye} Tempo=${V?"Servidor":"Local"} (${Math.round(We)}ms, sync ${ee(at)}) |  Realtime=${Me} ${Sn}${Li?` (${ee(Li)})`:""} | ${ie} Prximo=${oe(J)} |  Agendamentos=${ce}`;Pt.current!==he&&(Pt.current=he,console.log(he)),typeof window<"u"&&(window.__AgendaConn={usingServer:V,serverOffsetMs:We,lastTimeSyncAtMs:at,realtimeStatus:Sn,lastRealtimeEventAtMs:Li,nextAutoAtMs:J})}catch{}},[We,at,Sn,Li,Zt,J,c?.codigo_empresa,f,Array.isArray(m)?m.length:0]),v.useEffect(()=>{const V=setInterval(()=>{try{const ee=Date.now();if(ee<(de.current||0)){console.log("[AutoDiag] reconcile:skipped returning-from-hidden");return}if(p){console.log("[AutoDiag] reconcile:skipped modal-open");return}const oe=String(Sn||"").toUpperCase()==="SUBSCRIBED",ye=typeof Li=="number"?ee-Li:1/0,ke=!oe||ye>7*60*1e3,Me=typeof J=="number"?ee>J+60*1e3:!1;if(ke||Me){console.debug("[Reconcile] forcing fetchBookings (stale=",ke," tickDue=",Me,")"),va();try{Ia()}catch{}}}catch{}},3e5);return()=>clearInterval(V)},[Sn,Li,J,va,Ia]),v.useEffect(()=>{(async()=>{if(!u||!c?.codigo_empresa||Date.now()<(de.current||0))return;if(P.current){n("Participants:skipped (modal open)");return}n("Participants:load start"),i("parts:start");const ee=(m||[]).map(ce=>ce.id).filter(Boolean),oe=Rr(f,"yyyy-MM-dd");if(!ee.length){if(A.current!==oe){S({});try{ur&&localStorage.setItem(ur,"{}")}catch{}A.current=oe}n("Participants:skip empty ids"),i("parts:skip");return}const ye=++j.current,{data:ke,error:Me}=await Oe.from("agendamento_participantes").select("id, agendamento_id, codigo_empresa, cliente_id, nome, valor_cota, status_pagamento, finalizadora_id, cliente:clientes!agendamento_participantes_cliente_id_fkey(nome)").in("agendamento_id",ee);if(j.current!==ye)return;if(Me){console.warn("[Participants] load error",Me),n("Participants:error",{message:Me?.message,code:Me?.code,status:Me?.status}),i("parts:error",{code:Me?.code});return}const ie={};for(const ce of ke||[]){const he=ce.agendamento_id;ie[he]||(ie[he]=[]);const Ke=(Array.isArray(ce.cliente)?ce.cliente[0]?.nome:ce.cliente?.nome)||ce.nome||"";ie[he].push({...ce,nome:Ke})}n("Participants:loaded",{bookings:ee.length,rows:(ke||[]).length}),i("parts:loaded",{rows:(ke||[]).length}),A.current=oe,S(ce=>{const he={...ce};for(const Ke of ee)he[Ke]=ie[Ke]||[];try{ur&&localStorage.setItem(ur,JSON.stringify(he))}catch{}return n("Participants:set state for ids",{ids:ee}),i("parts:set",{idsCount:ee.length}),he})})()},[u,c?.codigo_empresa,m,f,ur,n]),v.useEffect(()=>{if(Ft)try{const V=JSON.parse(localStorage.getItem(qt)||"[]");Array.isArray(V)&&V.length&&(!ge||ge.length===0)&&(re(V),Ie(!1))}catch{}},[Ft,qt]),v.useEffect(()=>{const V=async()=>{if(!c?.codigo_empresa)return;try{const ke=JSON.parse(localStorage.getItem(qt)||"[]");if(Array.isArray(ke)&&ke.length>0){const Me=ke[0]?.codigo_empresa;if(Me&&Me!==c.codigo_empresa){console.warn(" [Cache Limpo] Quadras de outra empresa detectadas e removidas"),localStorage.removeItem(qt),localStorage.removeItem(zt),re([]);try{ue([])}catch{}try{dt(null)}catch{}try{setForm(ie=>({...ie,court:""}))}catch{}}}}catch{}(!ge||ge.length===0)&&Ie(!0);const{data:ee,error:oe}=await Oe.from("quadras").select("id, nome, modalidades, hora_inicio, hora_fim, valor, codigo_empresa").eq("codigo_empresa",c.codigo_empresa).order("nome",{ascending:!0});if(oe){e({title:"Erro ao carregar quadras",description:oe.message}),qe.current?Ie(!1):(qe.current=!0,setTimeout(V,900));return}const ye=ee||[];if(ye.length===0){let ke=0;try{const Me=JSON.parse(localStorage.getItem("quadras:list")||"[]");ke=Array.isArray(Me)?Me.length:0}catch{}if(ke>0&&!qe.current){qe.current=!0,Ie(!1),setTimeout(V,700);return}}qe.current=!1,console.log(" [Quadras Carregadas]",{empresa:c?.codigo_empresa,total:ye.length,quadras:ye.map(ke=>({id:ke.id,nome:ke.nome}))}),re(ye);try{localStorage.setItem(qt,JSON.stringify(ye))}catch{}Ie(!1)};u&&c?.codigo_empresa&&V()},[u,c?.codigo_empresa,qt,zt]),v.useEffect(()=>{try{if(Se)return;const V=Ue||[];form?.court&&!V.includes(form.court)&&setForm(ee=>({...ee,court:V[0]||""})),(!form?.court||form.court==="")&&V.length>0&&setForm(ee=>({...ee,court:V[0]}))}catch{}},[Se,Ue,c?.codigo_empresa]),v.useEffect(()=>{if(Se)return;const V=(()=>{try{return JSON.parse(localStorage.getItem(zt)||"[]")}catch{return[]}})(),ee=(()=>{try{return JSON.parse(localStorage.getItem(it)||"{}")}catch{return{}}})(),oe=V.filter(ye=>Ue.includes(ye));oe.length>0?ue(oe):_e.length===0&&ue(Ue),ee&&typeof ee=="object"&&Z(ye=>({...ye,canceledOnly:!1,...ee}))},[Se,Ue.length]),v.useEffect(()=>{try{localStorage.setItem(zt,JSON.stringify(_e))}catch{}},[_e,zt]),v.useEffect(()=>{try{localStorage.setItem(it,JSON.stringify(Y))}catch{}},[Y,it]);const Yt=v.useMemo(()=>{const V=_e.map(oe=>pe[oe]?.hora_inicio||"06:00:00").map(oe=>{const[ye,ke]=String(oe).split(":").map(Number);return(ye||0)*60+(ke||0)});if(!V.length)return BO;const ee=Math.min(...V);return Math.floor(ee/60)},[_e,pe]),ot=v.useMemo(()=>{const V=_e.map(oe=>pe[oe]?.hora_fim||"24:00:00").map(oe=>{const[ye,ke]=String(oe).split(":").map(Number);return(ye||0)*60+(ke||0)});if(!V.length)return Kee;const ee=Math.max(...V);return Math.ceil(ee/60)},[_e,pe]);v.useEffect(()=>{const V=new Date,ee=Wu(V),oe=Vu(V);setTimeout(()=>{if(!Ye.current)return;const ke=Math.max(0,(ee-Yt)*60+oe)/_n;Ye.current.scrollTop=Math.max(0,ke*os-120)},150)},[Yt]);const Lt=({booking:V,courtGridStart:ee,courtGridEnd:oe})=>{const ye=os,ke=Tn=>Wu(Tn)*60+Vu(Tn),Me=ke(V.start),ie=ke(V.end),ce=ee!==void 0?ee:ft?Ne.start*60:Yt*60,he=oe!==void 0?oe:ft?Ne.end*60:ot*60,Ke=Me-ce,rt=(he-ce)/_n;let Ge=Math.floor(Ke/_n);const $e=Math.max(0,ie-Me),bt=Math.max(1,Math.ceil($e/_n));let vt=Ge+bt;Ge=Math.max(0,Math.min(Ge,rt-1)),vt=Math.max(0,Math.min(vt,rt)),vt<=Ge&&(vt=Ge+1),vt=Math.min(vt,rt);const ht=Ge*ye;let tr=(vt-Ge)*ye;const Gt=ss[V.status]||ss.confirmed,ct=Gt.icon,sr=Gt.border,dr=bt===1,Br=dr?4:hHe,vn=ht+Br,Da=Math.max(dr?40:32,tr-Br*2),It=$e>=90,Zn=2,Kr=1.15,$i=It?(()=>{const Tn=Math.min(Math.max(($e-90)/90,0),1);return Math.min(Kr+Tn*(Zn-Kr),Zn)})():1,kl=16,nn=14,$n=dr?16:24,fa=Math.round(kl*(It?$i:1)),ha=Math.round(nn*(It?$i:1)),Fi=Math.round($n*(It?$i:1)),ma=dr?12:16,jn=dr?12:16,Ua=It?Math.min($i,1.3):1,Ol=Math.round(ma*Ua),li=Math.round(jn*Ua),Ss=w[V.id]||[],Hs=Ss.filter(Tn=>String(Tn.status_pagamento||"").toLowerCase()==="pago").length,Do=Ss.length;return s.jsxs(lr.div,{layout:p?!1:"position",initial:p?!1:{opacity:0,y:6},animate:p?!1:{opacity:1,y:0},exit:p?!1:{opacity:0,y:6},id:`booking-${V.id}`,className:Ot("absolute left-2 right-2 rounded-md border-2 bg-surface text-sm shadow-sm z-0 cursor-pointer",sr,"overflow-hidden transition-all duration-150 hover:bg-surface-2 hover:shadow-md"),style:{top:`${vn}px`,height:`${Da}px`},onClick:async()=>{const Tn=si(V),lc=new Promise(no=>setTimeout(no,600));let Tl=null;try{Tl=await Promise.race([Tn,lc])}catch{}const js=Tl&&Tl.booking||m.find(no=>no.id===V.id)||V;b(js),X()},children:[s.jsx("div",{className:Ot("absolute left-0 top-0 h-full w-[6px] rounded-l-md",Gt.accent)}),s.jsx("div",{className:Ot("h-full flex",dr?"px-3 py-3":"px-4 py-4"),style:{paddingLeft:Ol,paddingRight:Ol,paddingTop:li,paddingBottom:li},children:s.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("p",{className:"font-semibold text-text-primary truncate text-base",style:{fontSize:fa,lineHeight:1.15},children:D7(V.customer)}),dr&&s.jsx("span",{className:"text-xs font-bold text-white truncate bg-gradient-to-r from-slate-700 to-slate-800 border border-slate-600/60 rounded-md px-2 py-0.5 whitespace-nowrap shadow-md",style:{fontSize:ha},children:V.modality})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:Ot("text-text-muted font-semibold text-base whitespace-nowrap"),style:{fontSize:fa},children:[Rr(V.start,"HH:mm"),"",Rr(V.end,"HH:mm")]}),dr&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ct,{className:Ot(Gt.text),style:{width:Fi,height:Fi}}),s.jsx("span",{className:Ot("truncate font-semibold",Gt.text,"text-base"),style:{fontSize:fa},children:Gt.label})]}),dr&&Do>0&&s.jsxs("span",{className:`text-xs font-semibold rounded-full px-2 py-0.5 border ${Hs===Do?"text-emerald-300 bg-emerald-500/10 border-emerald-400/30":"text-amber-300 bg-amber-500/10 border-amber-400/30"}`,style:{fontSize:Math.max(11,Math.round(11*(It?$i:1)))},children:[Hs,"/",Do]})]}),s.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 flex-wrap",children:[!dr&&s.jsx("span",{className:"text-xs font-bold text-white truncate bg-gradient-to-r from-slate-700 to-slate-800 border border-slate-600/60 rounded-md px-2.5 py-1 shadow-md",style:{fontSize:ha},children:V.modality}),!dr&&s.jsxs("div",{className:"flex items-center gap-1.5 text-base flex-wrap justify-end",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ct,{className:Ot(Gt.text),style:{width:Fi,height:Fi}}),s.jsx("span",{className:Ot("truncate font-semibold",Gt.text),style:{fontSize:fa},children:Gt.label})]}),Do>0&&(()=>{const Tn=typeof window<"u"&&window.innerWidth<768;return s.jsxs("span",{className:Ot("font-bold rounded-full border flex items-center gap-1",dr?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm",Hs===Do?"text-emerald-300 bg-emerald-500/10 border-emerald-400/30":"text-amber-300 bg-amber-500/10 border-amber-400/30"),style:{fontSize:Math.max(dr?11:13,Math.round((dr?11:13)*(It?$i:1)))},children:[s.jsx(dl,{className:"w-3 h-3"}),s.jsxs("span",{children:[Hs,"/",Do,Tn?"":" pagos"]})]})})()]})]})]})})]})},ir=()=>{v.useRef(Math.random().toString(36).slice(2));const V=v.useRef(0),ee=v.useRef(""),oe=ne=>{if(!ne)return"";if(typeof ne=="string")return ne;const Ae=ne.nome||ne.name||"",je=ne.codigo??ne.code;return je!=null?`[${je}] ${Ae}`:Ae},ye=ne=>ne?typeof ne=="string"?ne:ne.nome||ne.name||"":"",ke=ne=>{const Ae=pe[ne];if(!Ae)return{start:Yt*60,end:ot*60};const[je,ze]=String(Ae.hora_inicio||"06:00:00").split(":").map(Number),[Qe,kt]=String(Ae.hora_fim||"24:00:00").split(":").map(Number);return{start:je*60+(ze||0),end:Qe*60+(kt||0)}},Me=()=>{const ne=Wu(new Date),Ae=Vu(new Date),je=ne*60+Ae,ze=Ue[0]||"",Qe=ke(ze);return Math.max(Qe.start,Math.min(Qe.end-_n,Math.round(je/_n)*_n))},[ie,ce]=v.useState(()=>{let ne=[];try{const Ae=sessionStorage.getItem("agenda:customerPicker:closingAt"),je=Ae?Number(Ae):0,ze=je&&Date.now()-je<1e4,Qe=sessionStorage.getItem(Kr),kt=Qe?JSON.parse(Qe):[];if(ze&&Array.isArray(kt)&&kt.length>0?ne=kt:Array.isArray($n)&&$n.length>0?ne=$n:Array.isArray(It.current)&&It.current.length>0&&(ne=It.current),ne.length>0)try{Ke.current=!0}catch{}}catch{}return{selectedClients:ne,court:Ue[0]||"",modality:zh[0],status:"scheduled",date:f,startMinutes:Me(),endMinutes:Me()+60}}),he=v.useRef([]),Ke=v.useRef(!1),rt=v.useRef(null);v.useEffect(()=>{he.current=Array.isArray(ie.selectedClients)?ie.selectedClients:[];try{(he.current||[]).length>0&&(Ke.current=!0)}catch{}},[ie.selectedClients]);const[Ge,$e]=v.useState(!1),[bt,vt]=v.useState(""),ht=v.useRef(0),tr=v.useRef(!1);v.useEffect(()=>{const ne=()=>{try{if(document.visibilityState==="hidden"){tr.current=!!(M||Ge);const Ae=Date.now();try{W.current=Ae+1200}catch{}try{k.current=Ae+1200}catch{}try{ht.current=Ae+800}catch{}}else if(document.visibilityState==="visible"){const Ae=tr.current;tr.current=!1;const je=Date.now();try{W.current=Math.max(W.current||0,je+600)}catch{}try{k.current=Math.max(k.current||0,je+600)}catch{}try{ht.current=Math.max(ht.current||0,je+400)}catch{}Ae&&!P.current&&setTimeout(()=>{P.current||($e(!0),z(!0))},60)}}catch{}};return document.addEventListener("visibilitychange",ne),()=>document.removeEventListener("visibilitychange",ne)},[M,Ge,p]),v.useEffect(()=>{},[Ge,M]);const Gt=v.useRef(0);v.useEffect(()=>{const ne=Array.isArray(ie.selectedClients)?ie.selectedClients.length:-1,Ae=Gt.current;ne!==Ae&&(Gt.current=ne)},[ie.selectedClients,Ge,M]);const[ct,sr]=v.useState(!1),[dr,Ht]=v.useState(null),[Br,vn]=v.useState(!1),Da=v.useRef(!1),It=v.useRef([]),Zn=v.useRef("init"),Kr=v.useMemo(()=>{try{return`agenda:lastSelection:${c?.codigo_empresa||"no-company"}`}catch{return"agenda:lastSelection:no-company"}},[c?.codigo_empresa]),$i=v.useCallback(ne=>{try{sessionStorage.setItem(Kr,JSON.stringify(ne||[]))}catch{}},[Kr]),kl=v.useCallback(()=>{try{const ne=sessionStorage.getItem(Kr);if(ne){const Ae=JSON.parse(ne);Array.isArray(Ae)&&(It.current=Ae)}}catch{}},[Kr]),nn=v.useRef(!1),[$n,fa]=v.useState([]),ha=v.useCallback(ne=>{fa(ne)},[]),Fi=v.useRef(null),[ma,jn]=v.useState([]),[Ua,Ol]=v.useState([]),[li,Ss]=v.useState(!1),[Hs,Do]=v.useState(!1),[Tn,lc]=v.useState(!1),[Tl,js]=v.useState(!1),[no,Kd]=v.useState(!1);v.useEffect(()=>{if(!li)return;let ne=!1;return(async()=>{try{if(!u||!c?.codigo_empresa)return;const Ae=await Mg({somenteAtivas:!0,codigoEmpresa:c.codigo_empresa});ne||Ol(Array.isArray(Ae)?Ae:[])}catch{}})(),()=>{ne=!0}},[li,u,c?.codigo_empresa]),v.useEffect(()=>{if(!li||!Array.isArray(Ua)||Ua.length===0)return;const ne=String(Ua[0].id);jn(Ae=>Ae.length===0&&Array.isArray(ie.selectedClients)&&ie.selectedClients.length>0?ie.selectedClients.map(Qe=>({cliente_id:Qe.id,nome:Qe.nome,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:ne})):Ae.map(ze=>({...ze,finalizadora_id:ze.finalizadora_id&&ze.finalizadora_id!==""?ze.finalizadora_id:ne})))},[li,Ua]);const Gs=v.useCallback((ne,Ae)=>{try{const je=Date.now(),ze=je<(Je.current||0)||je<(k.current||0),Qe=!M,kt=!!nn.current;let St=Array.isArray(Ae)?Ae:[];if(St.length===0&&Qe&&ze&&!kt){const pt=Array.isArray(It.current)?It.current:[];pt.length>0&&(St=pt)}try{if(!x&&Array.isArray(St)&&St.length>0&&rt.current){const pt=St.findIndex(wr=>wr&&wr.id===rt.current);pt>0&&(St=[St[pt],...St.filter((Nr,Tr)=>Tr!==pt)])}}catch{}if(ce(pt=>({...pt,selectedClients:St})),Array.isArray(St)&&St.length>0){It.current=St,ha(St);try{sessionStorage.setItem(Kr,JSON.stringify(St))}catch{}nn.current=!1}try{Zn.current=ne}catch{}}catch{}},[M,ce,ha,Kr]),[Xc,kh]=v.useState(""),O=v.useRef(null);v.useEffect(()=>{try{E.current=Date.now()}catch{}},[Ge,Tn]),v.useEffect(()=>{if(r){if(R.current=Ge,Ge)l("customer-picker",6e3),i("picker:open"),T.current=!0,z(!0);else if(i("picker:close"),o("picker-close"),Ci.current){Ci.current=!1;try{n("Picker closed: flushing pending refresh"),i("picker:flush"),va()}catch{}}}},[Ge]);const H=v.useCallback((ne,Ae={})=>{if(r)try{const je=new Date().toISOString(),ze=C.current,Qe=!!T.current,kt=!!Da.current}catch{}},[r,p,Ge,M,Tn,ct]);v.useEffect(()=>{r&&H("state-change",{isCustomerPickerOpen:Ge,effectiveCustomerPickerOpen:M})},[r,Ge,M]),v.useEffect(()=>{if(!p||M)return;const ne=Array.isArray(ie.selectedClients)?ie.selectedClients:[],Ae=Array.isArray(It.current)?It.current:[],je=Date.now()<(W.current||0);if(ne.length===0&&Ae.length>0&&!nn.current&&je)Zn.current="global:restore",ce(ze=>({...ze,selectedClients:Ae}));else if(ne.length===0&&Ae.length>0&&nn.current&&!je)try{It.current=[]}catch{}},[p,M,ie.selectedClients]),v.useEffect(()=>{if(!p)return;let ne=T.current;try{const je=localStorage.getItem("agenda:customerPicker:desiredAt");if(je){const ze=Number(je);Number.isFinite(ze)&&Date.now()-ze<3e3&&(ne=!0)}}catch{}if(!ne||Ge||Date.now()<k.current||me())return;const Ae=Date.now();Ae-I.current<800||(I.current=Ae,C.current="open",$e(!0),z(!0))},[Ge,p]),v.useEffect(()=>{const ne=Array.isArray(ie.selectedClients)?ie.selectedClients:[];ne.length>0&&(It.current=ne,$i(ne),ha(ne))},[ie.selectedClients,$i]),v.useEffect(()=>{if(!p||(kl(),M)||T.current)return;const ne=Array.isArray(ie.selectedClients)?ie.selectedClients:[],Ae=(()=>{const je=Array.isArray(It.current)?It.current:[];if(je&&je.length>0)return je;try{const ze=sessionStorage.getItem(Kr),Qe=ze?JSON.parse(ze):[];return Array.isArray(Qe)?Qe:[]}catch{return[]}})();ne.length===0&&Ae.length>0&&!nn.current&&(ce(je=>({...je,selectedClients:Ae})),Da.current=!1)},[M,p,kl,Kr]);const xe=v.useRef(0);v.useEffect(()=>{try{const ne=Date.now(),Ae=Array.isArray(he.current)?he.current:[],je=Array.isArray(It.current)?It.current:[];if(ne-xe.current>300&&(xe.current=ne),p&&!M&&Ae.length===0&&je.length>0&&!nn.current){try{Je.current=Date.now()+2e3}catch{}try{const ze=k?.current||0,Qe={ts:new Date().toISOString(),reason:"empty-after-close",modalOpen:p,pickerOpen:M,formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Ae.length,lastLen:je.length,clearedByUser:!!nn?.current,lastAction:Zn?.current,chipsLen:Array.isArray($n)?$n.length:NaN,clientsLoading:!!Tn,suppressUntil:ze}}catch{}ha(je);try{sessionStorage.setItem(Kr,JSON.stringify(je))}catch{}ce(ze=>({...ze,selectedClients:[...je]}));try{Promise.resolve().then(()=>{ce(ze=>({...ze,selectedClients:[...It.current]}))})}catch{}try{requestAnimationFrame(()=>{ce(ze=>({...ze,selectedClients:[...It.current||[]]}))})}catch{}setTimeout(()=>{const ze=Array.isArray(he.current)?he.current:[],Qe=Array.isArray(It.current)?It.current:[];ze.length===0&&Qe.length>0&&ce(kt=>({...kt,selectedClients:[...Qe]}))},25),setTimeout(()=>{const ze=Array.isArray(he.current)?he.current:[],Qe=Array.isArray(It.current)?It.current:[];ze.length===0&&Qe.length>0&&ce(kt=>({...kt,selectedClients:[...Qe]}))},120),setTimeout(()=>{const ze=Array.isArray(he.current)?he.current:[],Qe=Array.isArray(It.current)?It.current:[];ze.length===0&&Qe.length>0&&ce(kt=>({...kt,selectedClients:[...Qe]}))},240)}}catch{}},[ie.selectedClients,M,p]),v.useEffect(()=>{try{const ne=now<(Je.current||0),Ae=Array.isArray(he.current)?he.current:[],je=Array.isArray(It.current)?It.current:[],ze=now<(W.current||0);if(p&&!M&&(ne||ze)&&Ae.length===0&&je.length>0&&!nn.current){fa(je);try{sessionStorage.setItem(Kr,JSON.stringify(je))}catch{}ce(Qe=>({...Qe,selectedClients:[...je]}));try{requestAnimationFrame(()=>ce(Qe=>({...Qe,selectedClients:[...It.current||[]]})))}catch{}setTimeout(()=>ce(Qe=>({...Qe,selectedClients:[...It.current||[]]})),32),setTimeout(()=>ce(Qe=>({...Qe,selectedClients:[...It.current||[]]})),96)}}catch{}},[ie.selectedClients,M,p]),v.useEffect(()=>{const ne=Date.now();if(ne<(de.current||0)||!p||M||ne>=(W.current||0))return;const Ae=Array.isArray(ie.selectedClients)?ie.selectedClients:[],je=Array.isArray(It.current)?It.current:[];if(Ae.length===0&&je.length>0){fa(je);try{sessionStorage.setItem(Kr,JSON.stringify(je))}catch{}ce(ze=>({...ze,selectedClients:[...je]})),Promise.resolve().then(()=>ce(ze=>({...ze,selectedClients:[...It.current||[]]}))),setTimeout(()=>ce(ze=>({...ze,selectedClients:[...It.current||[]]})),24),setTimeout(()=>ce(ze=>({...ze,selectedClients:[...It.current||[]]})),80),setTimeout(()=>ce(ze=>({...ze,selectedClients:[...It.current||[]]})),240)}},[ie.selectedClients,p,M]);const[De,Be]=v.useState([]);v.useEffect(()=>{li&&Be([])},[li]);const yt=v.useRef(!1),Rt=v.useRef(!1),[vr,mr]=v.useState(null),[Mr,Yr]=v.useState(null),Pn=v.useRef(!1);v.useEffect(()=>{const ne=Array.isArray(ie.selectedClients)?ie.selectedClients:[],Ae=vr,je=Ae&&ne.some(ze=>ze&&ze.id===Ae);ne.length>0&&!je?mr(ne[0]?.id||null):ne.length===0&&Ae&&mr(null)},[ie.selectedClients,p,x]);const ea=v.useRef(!1),ya=v.useRef(!1),[wn,Ma]=v.useState(Te),Wa=v.useRef(0);v.useEffect(()=>{if(!(Date.now()<(de.current||0)))if(Tn){Wa.current||(Wa.current=Date.now());const Ae=setTimeout(()=>{Tn&&(!Array.isArray(wn)||wn.length===0)&&lc(!1)},2e3);return()=>clearTimeout(Ae)}else Wa.current=0},[Tn,wn]);const Va=v.useMemo(()=>Array.isArray(ie.selectedClients)?ie.selectedClients:[],[ie.selectedClients]),Ns=v.useMemo(()=>{const ne=Va||[];if(ne.length===0)return"Adicionar clientes";const Ae=ne[0]?.nome||"Cliente",je=ne.length-1;return je>0?`${Ae} +${je}`:Ae},[Va]),xo=v.useMemo(()=>{const ne=Array.isArray(ie.selectedClients)?ie.selectedClients:[],Ae=Array.isArray(he.current)?he.current:[],je=Array.isArray(It.current)?It.current:[],ze=Array.isArray($n)?$n:[];return ne.length>0&&ne.every(Qe=>Qe?.nome)?ne:ne.length>0?ne.map(Qe=>{if(Qe?.nome)return Qe;const kt=Ae.find(Nr=>Nr?.id===Qe?.id),St=je.find(Nr=>Nr?.id===Qe?.id),pt=ze.find(Nr=>Nr?.id===Qe?.id),wr=(wn||[]).find(Nr=>Nr?.id===Qe?.id);return{...Qe,nome:kt?.nome||St?.nome||pt?.nome||wr?.nome||Qe?.nome||"Cliente"}}):Ae.length>0&&Ae.every(Qe=>Qe?.nome)?Ae:ze.length>0&&ze.every(Qe=>Qe?.nome)?ze:je.length>0&&je.every(Qe=>Qe?.nome)?je:ne},[ie.selectedClients,$n,wn]);v.useEffect(()=>{if(!(Date.now()<(de.current||0)))try{n("Chips:effective change",{effectiveLen:Array.isArray(Va)?Va.length:0,formLen:Array.isArray(ie.selectedClients)?ie.selectedClients.length:0,lastLen:Array.isArray(It.current)?It.current.length:0,pickerOpen:Ge})}catch{}},[Va,ie.selectedClients,Ge]);const Yd=v.useRef(null),Jc=v.useRef(!1);v.useEffect(()=>{if(p){Array.isArray(Te)&&Te.length>0&&Ma(Te);try{if(!wn||wn.length===0){const ne=c?.codigo_empresa?`clientes:list:${c.codigo_empresa}`:null;if(ne){const Ae=JSON.parse(localStorage.getItem(ne)||"[]");Array.isArray(Ae)&&Ae.length>0&&Ma(Ae)}}}catch{}}},[p,Te]),v.useEffect(()=>{p||(Yd.current=null,lc(!1))},[p]),v.useEffect(()=>{p||(yt.current=!1,Rt.current=!1,Kd(!1),ya.current=!1)},[p]);const cc=v.useRef(!1);v.useEffect(()=>{if(p&&!cc.current){cc.current=!0;try{const ne=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Ae=sessionStorage.getItem("agenda:customerPicker:closingAt"),je=Ae?Number(Ae):0,ze=je&&Date.now()-je<1e4;ne&&ze?ee.current=ne:ee.current||(ee.current=`${Date.now()}-${Math.random().toString(36).slice(2)}`),sessionStorage.setItem("agenda:modal:sessionId",ee.current)}catch{}if(!x){try{const ne=sessionStorage.getItem("agenda:customerPicker:closingAt"),Ae=ne?Number(ne):0,je=Ae&&Date.now()-Ae<1e4,ze=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Qe=sessionStorage.getItem("agenda:modal:sessionId")||"",kt=sessionStorage.getItem(Kr),St=kt?JSON.parse(kt):[];if(je&&Array.isArray(St)&&St.length>0&&ze&&Qe&&ze===Qe){try{Ke.current=!0}catch{}ce(pt=>({...pt,selectedClients:St})),It.current=St,ha(St);try{nn.current=!1}catch{}try{Promise.resolve().then(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}try{requestAnimationFrame(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),24),setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),96);return}if(je&&Array.isArray(St)&&St.length>0){try{Ke.current=!0}catch{}ce(pt=>({...pt,selectedClients:St})),It.current=St,ha(St);try{nn.current=!1}catch{}try{Promise.resolve().then(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}try{requestAnimationFrame(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),24),setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),96);return}}catch{}try{if(Date.now()<(V.current||0))return}catch{}try{T.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{const ne=sessionStorage.getItem(Kr),Ae=ne?JSON.parse(ne):[],je=Array.isArray(It.current)?It.current:[];if(!(Array.isArray(Ae)&&Ae.length>0||Array.isArray(je)&&je.length>0)){try{It.current=[]}catch{}try{fa([])}catch{}try{nn.current=!1}catch{}ce(ze=>({...ze,selectedClients:[]}))}}catch{try{It.current=[]}catch{}try{fa([])}catch{}try{nn.current=!1}catch{}ce(ne=>({...ne,selectedClients:[]}))}}}else!p&&cc.current;if(x)Mo.current=!1;else{if(Mo.current)return;Mo.current=!0;try{const ne=sessionStorage.getItem("agenda:customerPicker:closingAt"),Ae=ne?Number(ne):0,je=Ae&&Date.now()-Ae<5e3,ze=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Qe=sessionStorage.getItem("agenda:modal:sessionId")||"",kt=sessionStorage.getItem(Kr),St=kt?JSON.parse(kt):[];if(je&&Array.isArray(St)&&St.length>0&&ze&&Qe&&ze===Qe){try{Ke.current=!0}catch{}ce(pt=>({...pt,selectedClients:St})),It.current=St,ha(St);try{nn.current=!1}catch{}try{Promise.resolve().then(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}try{requestAnimationFrame(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),24),setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),96);return}if(je&&Array.isArray(St)&&St.length>0){try{Ke.current=!0}catch{}ce(pt=>({...pt,selectedClients:St})),It.current=St,ha(St);try{nn.current=!1}catch{}try{Promise.resolve().then(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}try{requestAnimationFrame(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})))}catch{}setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),24),setTimeout(()=>ce(pt=>({...pt,selectedClients:[...It.current||[]]})),96);return}}catch{}try{if(Date.now()<(V.current||0))return}catch{}try{T.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{nn.current=!1}catch{}try{const ne=sessionStorage.getItem(Kr),Ae=ne?JSON.parse(ne):[],je=Array.isArray(It.current)?It.current:[];if(!(Array.isArray(Ae)&&Ae.length>0||Array.isArray(je)&&je.length>0)){try{It.current=[]}catch{}try{fa([])}catch{}ce(ze=>({...ze,selectedClients:[]}))}}catch{try{It.current=[]}catch{}try{fa([])}catch{}ce(ne=>({...ne,selectedClients:[]}))}}},[p,x]);const Mo=v.useRef(!1);v.useEffect(()=>{if(!p){Mo.current=!1;try{sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt"),sessionStorage.removeItem("agenda:customerPicker:sessionId"),sessionStorage.removeItem("agenda:modal:sessionId"),ee.current="",sessionStorage.removeItem(Kr);try{It.current=[]}catch{}try{fa([])}catch{}try{Ke.current=!1}catch{}try{V.current=0}catch{}try{W.current=0}catch{}try{k.current=0}catch{}try{C.current=null}catch{}try{T.current=!1}catch{}ce(ne=>({...ne,selectedClients:[]})),mr(null)}catch{}return}if(x)Mo.current=!1;else{if(Mo.current)return;Mo.current=!0;try{if(Date.now()<(V.current||0))return}catch{}try{T.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{nn.current=!1}catch{}try{const ne=sessionStorage.getItem(Kr),Ae=ne?JSON.parse(ne):[],je=Array.isArray(It.current)?It.current:[];if(!(Array.isArray(Ae)&&Ae.length>0||Array.isArray(je)&&je.length>0)){try{It.current=[]}catch{}try{fa([])}catch{}ce(ze=>({...ze,selectedClients:[]}))}}catch{try{It.current=[]}catch{}try{fa([])}catch{}ce(ne=>({...ne,selectedClients:[]}))}}},[p,x]);const Ru=v.useCallback(async()=>{if(!no){Kd(!0);try{const ne=pe[ie.court];if(!ne){e({title:"Selecione uma quadra",variant:"destructive"}),yt.current=!1,Rt.current=!1;return}const Ae=ie.startMinutes,je=ie.endMinutes;if(!(Number.isFinite(Ae)&&Number.isFinite(je)&&je>Ae)){e({title:"Horrio invlido",variant:"destructive"}),yt.current=!1,Rt.current=!1;return}if(!Ro(Ae,je)){e({title:"Conflito de horrio",description:"O horrio selecionado est ocupado.",variant:"destructive"}),yt.current=!1,Rt.current=!1;return}const Qe=(hn,yr)=>new Date(hn.getFullYear(),hn.getMonth(),hn.getDate(),Math.floor(yr/60),yr%60,0,0),kt=Qe(ie.date,Ae),St=Qe(ie.date,je);let pt=Array.isArray(he.current)?he.current:[];if((!pt||pt.length===0)&&x?.id)try{const hn=Array.isArray(It.current)?It.current:[];hn&&hn.length>0&&(pt=hn,ce(yr=>({...yr,selectedClients:hn})))}catch{}const wr=pt[0],Nr=pt.map(ye).filter(Boolean);if(!x?.id&&!wr?.id){e({title:"Selecione um cliente",description:"Para criar um agendamento, selecione pelo menos um cliente.",variant:"destructive"});return}if(x?.id){const hn=x.status,yr=ie.status!==hn,Fn={quadra_id:ne.id,cliente_id:wr?.id??null,clientes:Nr,inicio:kt.toISOString(),fim:St.toISOString(),modalidade:ie.modality};if(!yr){let xa=ie.status;try{const ta=xt(),rs=kt.getTime();if(!!Zt?.autoConfirmEnabled&&Number.isFinite(Number(Zt?.autoConfirmMinutesBefore))){const Dl=Number(Zt.autoConfirmMinutesBefore)*6e4,qn=rs-Dl;xa==="confirmed"&&ta<qn?xa="scheduled":xa==="scheduled"&&ta>=qn&&(xa="confirmed")}}catch{}Fn.status=xa}const{error:In}=await Oe.from("agendamentos").update(Fn).eq("codigo_empresa",c.codigo_empresa).eq("id",x.id);if(In)throw In;if(g(xa=>xa.map(ta=>ta.id===x.id?{...ta,court:ie.court,customer:wr?.nome||ta.customer,start:kt,end:St,modality:ie.modality,...yr?{}:{status:Fn.status??ie.status}}:ta)),yr)try{y(!1),await An(x.id,ie.status,"user")}catch{}e({title:"Agendamento atualizado"}),Rt.current=!0,yt.current=!1;try{It.current=[]}catch{}try{fa([])}catch{}try{sessionStorage.removeItem(Kr)}catch{}y(!1);return}let Tr=null;try{const{data:hn}=await Oe.from("agendamentos").select("id, status, codigo").eq("codigo_empresa",c.codigo_empresa).eq("quadra_id",ne.id).eq("inicio",kt.toISOString()).eq("fim",St.toISOString()).limit(1);Array.isArray(hn)&&hn.length>0&&(Tr=hn[0])}catch{}if(Tr?.id&&Tr.status!=="canceled"){const hn={id:Tr.id,code:Tr.codigo,court:ie.court,customer:wr?.nome||Nr[0]||"",start:kt,end:St,status:ie.status,modality:ie.modality};g(yr=>yr.some(In=>In.id===Tr.id)?yr:[...yr,hn]),e({title:"Agendamento confirmado"}),Rt.current=!0,y(!1);return}const{data:pa,error:ci}=await Oe.from("agendamentos").insert({codigo_empresa:c.codigo_empresa,quadra_id:ne.id,cliente_id:wr?.id??null,clientes:Nr,inicio:kt.toISOString(),fim:St.toISOString(),modalidade:ie.modality,status:ie.status}).select("id, codigo").single();if(ci)throw ci;const Pi={id:pa.id,code:pa.codigo,court:ie.court,customer:wr?.nome||Nr[0]||"",start:kt,end:St,status:ie.status,modality:ie.modality};g(hn=>[...hn,Pi]),e({title:"Agendamento criado"});try{const hn=(ie.selectedClients||[]).map(yr=>({codigo_empresa:c.codigo_empresa,agendamento_id:pa.id,cliente_id:yr.id,nome:yr.nome,valor_cota:0,status_pagamento:"Pendente"}));if(hn.length>0){const{error:yr}=await Oe.from("agendamento_participantes").insert(hn);if(!yr){const Fn=hn.map(In=>({agendamento_id:In.agendamento_id,cliente_id:In.cliente_id,nome:ie.selectedClients.find(xa=>xa.id===In.cliente_id)?.nome||"",valor_cota:In.valor_cota,status_pagamento:In.status_pagamento}));S(In=>({...In,[pa.id]:Fn}))}}}catch{}Rt.current=!0,yt.current=!1;try{It.current=[]}catch{}try{fa([])}catch{}try{sessionStorage.removeItem(Kr)}catch{}y(!1)}catch(ne){e({title:"Erro ao salvar agendamento",description:ne?.message||"Tentando novamente automaticamente",variant:"destructive"})}finally{Kd(!1)}}},[no,pe,ie,x,c,Ro,g,e,y,An]);v.useEffect(()=>{const ne=async()=>{if(!p||!c?.codigo_empresa)return;const Ae=String(c.codigo_empresa);if(Yd.current!==Ae)try{lc(!0);try{const Qe=`clientes:list:${c.codigo_empresa}`,kt=JSON.parse(localStorage.getItem(Qe)||"[]");if(Array.isArray(kt)&&kt.length>0){Ma(kt);try{Ze(St=>JSON.stringify(St)===JSON.stringify(kt)?St:kt)}catch{}}}catch{}const{data:je,error:ze}=await Oe.from("clientes").select("id, nome, codigo, email, telefone, status, codigo_empresa").eq("codigo_empresa",c.codigo_empresa).eq("status","active").order("nome",{ascending:!0});if(ze){console.error("Falha ao carregar clientes:",ze);return}if(Array.isArray(je)){if(je.length===0){let Qe=0;try{const kt=`clientes:list:${c.codigo_empresa}`,St=JSON.parse(localStorage.getItem(kt)||"[]");Qe=Array.isArray(St)?St.length:0}catch{}if(Qe>0&&!Jc.current){Jc.current=!0,setTimeout(ne,700);return}}Jc.current=!1,Yd.current=Ae,Ma(je);try{const Qe=`clientes:list:${c.codigo_empresa}`;localStorage.setItem(Qe,JSON.stringify(je))}catch{}try{Ze(Qe=>JSON.stringify(Qe)===JSON.stringify(je)?Qe:je)}catch{}}}catch{}finally{lc(!1)}};ne()},[p,c?.codigo_empresa]),v.useEffect(()=>{const ne=pe[ie.court];if(!ne)return;const Ae=Number(ne.valor||0);if(!Number.isFinite(Ae)||Ae<=0)return;const je=Math.max(0,ie.endMinutes-ie.startMinutes);if(je<=0)return;const ze=je/_n,Qe=Math.round(Ae*ze*100)/100;ts(vc(String(Qe.toFixed(2))))},[pe,ie.court,ie.startMinutes,ie.endMinutes]),v.useEffect(()=>{if(p&&!ya.current)if(x){const ne=Wu(x.start)*60+Vu(x.start),Ae=Wu(x.end)*60+Vu(x.end),je=w[x.id]||[],ze=je.filter(St=>St&&St.cliente_id).map(St=>({id:St.cliente_id,nome:St.nome})).filter((St,pt,wr)=>wr.findIndex(Nr=>Nr.id===St.id)===pt),Qe=pe[x.court]?.modalidades||zh,kt=Qe.includes(x.modality)?x.modality:Qe[0]||"";ce({selectedClients:ze,court:x.court,modality:kt,status:x.status,date:Xl(x.start),startMinutes:ne,endMinutes:Ae}),ea.current=!0,jn(je.map(St=>({cliente_id:St.cliente_id,nome:St.nome,valor_cota:(()=>{const pt=Number.isFinite(Number(St.valor_cota))?Number(St.valor_cota):Vi(St.valor_cota);return vc(String((Number.isFinite(pt)?pt:0).toFixed(2)))})(),status_pagamento:St.status_pagamento||"Pendente",finalizadora_id:St.finalizadora_id?String(St.finalizadora_id):null}))),mr(ze[0]?.id||null),ze.length===0&&(async()=>{try{const{data:St,error:pt}=await Oe.from("agendamento_participantes").select("cliente_id, valor_cota, status_pagamento, finalizadora_id, cliente:clientes!agendamento_participantes_cliente_id_fkey ( nome )").eq("codigo_empresa",c.codigo_empresa).eq("agendamento_id",x.id);if(!pt&&Array.isArray(St)){const wr=St.filter(Nr=>Nr&&Nr.cliente_id).map(Nr=>({id:Nr.cliente_id,nome:Nr.cliente?.nome||""})).filter((Nr,Tr,pa)=>pa.findIndex(ci=>ci.id===Nr.id)===Tr);ce(Nr=>({...Nr,selectedClients:wr})),jn(St.map(Nr=>({cliente_id:Nr.cliente_id,nome:Nr.cliente?.nome||"",valor_cota:(()=>{const Tr=Number.isFinite(Number(Nr.valor_cota))?Number(Nr.valor_cota):Vi(Nr.valor_cota);return vc(String((Number.isFinite(Tr)?Tr:0).toFixed(2)))})(),status_pagamento:Nr.status_pagamento||"Pendente",finalizadora_id:Nr.finalizadora_id?String(Nr.finalizadora_id):null}))),mr(wr[0]?.id||null)}}catch(St){console.error("Falha ao carregar participantes (fallback)",St)}})(),ya.current=!0}else if(nt){const ne=(Ue||[]).includes(nt.court)?nt.court:(Ue||[])[0]||"";ce({selectedClients:Ke.current?Array.isArray(ie.selectedClients)?ie.selectedClients:[]:[],court:ne,modality:(()=>(pe[ne]?.modalidades||zh)[0]||"")(),status:"scheduled",date:nt.date??f,startMinutes:nt.startMinutes??Me(),endMinutes:nt.endMinutes??Me()+60}),jn([]),ea.current=!0,ya.current=!0}else{const ne=Ue[0]||"",Ae=pe[ne]?.modalidades||zh,je=Array.isArray($n)?$n:[],ze=Ke.current?Array.isArray(ie.selectedClients)?ie.selectedClients:[]:je.length>0?je:[];if(!Ke.current&&je.length>0)try{Ke.current=!0}catch{}ce({selectedClients:ze,court:ne,modality:Ae[0]||"",status:"scheduled",date:f,startMinutes:Me(),endMinutes:Me()+60}),jn([]),ea.current=!0,ya.current=!0}},[p,x,f,nt,Ue,zh,w]),v.useEffect(()=>{if(p&&x){ya.current=!1,Pn.current=!1,Ke.current||ce(ne=>({...ne,selectedClients:[]}));try{nn.current=!1}catch{}}},[x,p]),v.useEffect(()=>{if(!p||!x||Pn.current)return;const ne=w[x.id]||[];if(!ne.length)return;const Ae=ne.filter(je=>je&&je.cliente_id).map(je=>({id:je.cliente_id,nome:je.nome})).filter((je,ze,Qe)=>Qe.findIndex(kt=>kt.id===je.id)===ze);(ie.selectedClients||[]).length===0&&Ae.length>0&&(ce(je=>({...je,selectedClients:Ae})),jn(ne.map(je=>({cliente_id:je.cliente_id,nome:je.nome,valor_cota:(()=>{const ze=Number.isFinite(Number(je.valor_cota))?Number(je.valor_cota):Vi(je.valor_cota);return vc(String((Number.isFinite(ze)?ze:0).toFixed(2)))})(),status_pagamento:je.status_pagamento||"Pendente",finalizadora_id:je.finalizadora_id||null}))),mr(Ae[0]?.id||null),Pn.current=!0)},[p,x,w]);const Ai=v.useMemo(()=>{const ne=pe[ie.court];if(!ne)return{start:Yt*60,end:ot*60};const[Ae,je]=String(ne.hora_inicio||"06:00:00").split(":").map(Number),[ze,Qe]=String(ne.hora_fim||"24:00:00").split(":").map(Number);return{start:Ae*60+(je||0),end:ze*60+(Qe||0)}},[pe,ie.court,Yt,ot]),Il=v.useMemo(()=>{const ne=Rr(ie.date,"yyyy-MM-dd"),Ae=je=>Wu(je)*60+Vu(je);return m.filter(je=>je.court===ie.court&&Rr(je.start,"yyyy-MM-dd")===ne&&je.status!=="canceled"&&(!x||je.id!==x.id)).map(je=>[Ae(je.start),Ae(je.end)]).sort((je,ze)=>je[0]-ze[0])},[m,ie.court,ie.date,x]),ao=(ne,Ae,je,ze)=>ne<ze&&je<Ae;function Ro(ne,Ae){if(Ae<=ne||ne<Ai.start||Ae>Ai.end)return!1;for(const[je,ze]of Il)if(ao(ne,Ae,je,ze))return!1;return!0}const Qc=ne=>{let Ae=ne+_n;if(!Ro(ne,Ae))return null;for(;Ae+_n<=Ai.end&&Ro(ne,Ae+_n);)Ae+=_n;return Ae},Oh=v.useMemo(()=>{const ne=Ai,Ae=[];for(let je=ne.start;je<=ne.end-_n;je+=_n){const ze=Ro(je,je+_n),Qe=Math.floor(je/60),kt=je%60;Ae.push({value:je,label:`${String(Qe).padStart(2,"0")}:${String(kt).padStart(2,"0")}`,available:ze})}return Ae},[Ai,Il]),Th=v.useMemo(()=>{const ne=Qc(ie.startMinutes),Ae=[];for(let je=ie.startMinutes+_n;je<=Ai.end;je+=_n){const ze=!!ne&&je<=ne,Qe=Math.floor(je/60),kt=je%60;Ae.push({value:je,label:`${String(Qe).padStart(2,"0")}:${String(kt).padStart(2,"0")}`,available:ze})}return Ae},[ie.startMinutes,Il,Ai]);v.useEffect(()=>{if(ea.current){ea.current=!1;return}const Ae=(()=>{if(Ro(ie.startMinutes,ie.startMinutes+_n))return ie.startMinutes;for(let Qe=Math.max(Ai.start,ie.startMinutes);Qe<=Ai.end-_n;Qe+=_n)if(Ro(Qe,Qe+_n))return Qe;for(let Qe=Ai.start;Qe<=Ai.end-_n;Qe+=_n)if(Ro(Qe,Qe+_n))return Qe;return ie.startMinutes})();if(Ae!==ie.startMinutes){ce(Qe=>({...Qe,startMinutes:Ae}));return}const je=Qc(Ae);if(!je)return;let ze=ie.endMinutes;(!Number.isFinite(ze)||ze<=Ae||ze>je)&&(ze=Math.min(Ae+60,je),ze<Ae+_n&&(ze=Ae+_n),ce(Qe=>({...Qe,endMinutes:ze})))},[ie.startMinutes,ie.court,ie.date,Il,Ai]);const Ha=v.useMemo(()=>pe[ie.court]?.modalidades||zh,[pe,ie.court]);v.useEffect(()=>{const ne=pe[ie.court]?.modalidades||zh;ne.includes(ie.modality)||ce(Ae=>({...Ae,modality:ne[0]||""}))},[ie.court,pe]);const uc=v.useMemo(()=>{const ne=Math.max(0,ie.endMinutes-ie.startMinutes),Ae=Math.floor(ne/60),je=ne%60;return Ae>0&&je>0?`${Ae}h ${je}min`:Ae>0?`${Ae}h`:`${je}min`},[ie.startMinutes,ie.endMinutes]),Lu=v.useMemo(()=>{if(!p)return"";const ne=new Date,Ae=Wu(ne)*60+Vu(ne),je=Number(ie.startMinutes),ze=Number(ie.endMinutes),Qe=kt=>{const St=Math.floor(kt/60),pt=kt%60;return`${String(St).padStart(2,"0")}:${String(pt).padStart(2,"0")}`};if(Zt.autoConfirmEnabled&&ie.status==="scheduled"){const kt=Math.max(0,je-Number(Zt.autoConfirmMinutesBefore||0));if(Ae<kt)return`Este agendamento est com automao ativa (Confirmar automaticamente s ${Qe(kt)})`}return Zt.autoStartEnabled&&ie.status==="confirmed"&&Ae<je?`Este agendamento est com automao ativa (Iniciar automaticamente s ${Qe(je)})`:Zt.autoFinishEnabled&&ie.status==="in_progress"&&Ae<ze?`Este agendamento est com automao ativa (Finalizar automaticamente s ${Qe(ze)})`:""},[p,ie.startMinutes,ie.endMinutes,ie.status,Zt]),[io,ts]=v.useState(""),Lo=v.useMemo(()=>(ie.selectedClients||[]).length,[ie.selectedClients]),gi=v.useMemo(()=>{const Ae=(ie.selectedClients||[]).map(pt=>{const wr=ma.find(Tr=>Tr.cliente_id===pt.id),Nr=Vi(wr?.valor_cota);return Number.isFinite(Nr)?Nr:0}).reduce((pt,wr)=>pt+wr,0),je=Vi(io),ze=Number.isFinite(je)?je:0,Qe=Number((ze-Ae).toFixed(2));let kt=0,St=0;for(const pt of ie.selectedClients||[])(ma.find(Tr=>Tr.cliente_id===pt.id)?.status_pagamento||"Pendente")==="Pago"?kt++:St++;return{totalAssigned:Ae,totalTarget:ze,diff:Qe,paid:kt,pending:St}},[ie.selectedClients,ma,io]);v.useEffect(()=>{const ne=Vi(io);if(!Number.isFinite(ne)||ne<=0)return;(ma||[]).some(je=>Vi(je?.valor_cota)>=ne)&&(ma||[]).some(je=>je.status_pagamento!=="Pago")&&jn(je=>je.map(ze=>({...ze,status_pagamento:"Pago"})))},[ma,io]);const Ih=v.useCallback(()=>{const ne=(ie.selectedClients||[]).length;if(!ne)return;const Ae=Vi(io);if(!Number.isFinite(Ae)||Ae<0)return;const je=Math.round(Ae*100),ze=Math.floor(je/ne);let Qe=je-ze*ne;jn(kt=>{const St=new Map(kt.map(wr=>[wr.cliente_id,wr]));return(ie.selectedClients||[]).slice().forEach((wr,Nr)=>{const Tr=ze+(Qe>0?1:0);Qe>0&&Qe--;const pa=(Tr/100).toFixed(2),ci=vc(String(pa)),Pi=Vi(ci),hn=St.get(wr.id)||{cliente_id:wr.id,nome:wr.nome,status_pagamento:"Pendente",valor_cota:""};hn.valor_cota=ci,hn.status_pagamento=Number.isFinite(Pi)&&Pi>0?"Pago":"Pendente",St.set(wr.id,hn)}),Array.from(St.values())})},[ie.selectedClients,io,jn]),Zc=v.useCallback(()=>{jn(ne=>ne.map(Ae=>({...Ae,valor_cota:"",status_pagamento:"Pendente"})))},[jn]),Ks=v.useCallback(()=>{try{T.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{C.current="close"}catch{}try{$e(!1),z(!1)}catch{}},[]);return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Agenda - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Gerencie seus agendamentos, horrios e quadras."})]}),s.jsx(qr,{open:!!cn,onOpenChange:ne=>{if(!ne&&cn){try{cn.resolve(!1)}catch{}On(null)}},children:s.jsxs(Lr,{onOpenAutoFocus:ne=>ne.preventDefault(),children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Reativar automao?"}),s.jsx(Jr,{children:"Ao reativar, este agendamento voltar a ser atualizado automaticamente (incio e trmino) pelas regras da agenda."})]}),s.jsx(mn,{children:s.jsxs("div",{className:"ml-auto flex gap-2",children:[s.jsx(Ee,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>{try{cn?.resolve(!1)}catch{}On(null)},children:"Cancelar"}),s.jsx(Ee,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white",onClick:()=>{try{cn?.resolve(!0)}catch{}On(null)},children:"Reativar"})]})})]})}),s.jsx(qr,{open:p,onOpenChange:ne=>{if(ne)y(!0);else{try{const Ae=Date.now()<(k.current||0);if(M||ct||Ae){try{const je={ts:new Date().toISOString(),hook:"Dialog:onOpenChange(blocked)",effectiveCustomerPickerOpen:M,isClientFormOpen:ct,suppressUntil:k.current,formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Array.isArray(he.current)?he.current.length:NaN,lastLen:Array.isArray(It.current)?It.current.length:NaN};console.warn("[CustomerPicker][DIALOG:block-close]",je)}catch{}return}}catch{}try{const Ae={ts:new Date().toISOString(),hook:"Dialog:onOpenChange(allow-close)",effectiveCustomerPickerOpen:M,isClientFormOpen:ct,suppressUntil:k.current,formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Array.isArray(he.current)?he.current.length:NaN,lastLen:Array.isArray(It.current)?It.current.length:NaN};console.warn("[CustomerPicker][DIALOG:allow-close]",Ae)}catch{}y(!1),b(null),mt(null),Ss(!1),Pn.current=!1}},children:s.jsxs(Lr,{forceMount:!0,disableAnimations:!0,alignTop:!0,className:"sm:max-w-[960px] max-h-[85vh] min-h-[360px] flex flex-col p-0",onOpenAutoFocus:ne=>ne.preventDefault(),onInteractOutside:ne=>{try{const Ae=Date.now()<(k.current||0);if(li||M||ct||Ae){try{const je={ts:new Date().toISOString(),hook:"DialogContent:onInteractOutside(blocked)",effectiveCustomerPickerOpen:M,isClientFormOpen:ct,isPaymentModalOpen:li,suppressUntil:k.current,formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Array.isArray(he.current)?he.current.length:NaN,lastLen:Array.isArray(It.current)?It.current.length:NaN}}catch{}ne.preventDefault();return}}catch{}},onEscapeKeyDown:ne=>{try{const Ae=Date.now()<(k.current||0);if(li||M||ct||Ae){ne.preventDefault();return}}catch{}},children:[s.jsxs(Ur,{className:"px-6 pt-6 pb-4 flex-shrink-0",children:[s.jsxs($r,{className:"flex items-center justify-between gap-3 flex-wrap",children:[s.jsx("span",{children:x?(()=>{const ne=x?.code,Ae=typeof ne=="number"?String(ne).padStart(3,"0"):null;return Ae?`Editar agendamento - ${Ae}`:"Editar Agendamento"})():"Novo Agendamento"}),x&&(()=>{gi?.pending===0&&Lo>0;const ne=(gi?.pending||0)>0,Ae="inline-flex items-center gap-2 px-2.5 py-1 rounded-full border text-xs",je="bg-emerald-600/10 text-emerald-400 border-emerald-700/30",ze="bg-amber-600/15 text-amber-400 border-amber-700/30",Qe=kt=>s.jsx("span",{"aria-hidden":!0,className:`inline-block w-2 h-2 rounded-full ${kt}`});return s.jsxs("span",{className:`${Ae} ${ne?ze:je}`,title:ne?"H pagamentos pendentes":"Todos participantes pagos","aria-live":"polite",children:[Qe(ne?"bg-amber-400":"bg-emerald-400"),s.jsx("span",{className:"tracking-wide",children:"Pagos"}),s.jsx("strong",{className:"text-base font-semibold tabular-nums",children:gi?.paid||0}),s.jsx("span",{className:"opacity-60",children:"/"}),s.jsx("span",{className:"text-base font-semibold tabular-nums",children:Lo})]})})(),s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-md border text-sm bg-white/5 border-white/10 text-text-primary",title:"Data do agendamento",children:[s.jsx(vu,{className:"w-4 h-4 opacity-80"}),s.jsxs("span",{className:"font-semibold",children:[Rr(ie.date,"dd/MM/yyyy"),(()=>{const ne=Number(ie?.startMinutes),Ae=Number(ie?.endMinutes);if(!(Number.isFinite(ne)&&Number.isFinite(Ae)&&Ae>ne))return"";const ze=Qe=>`${String(Math.floor(Qe/60)).padStart(2,"0")}:${String(Qe%60).padStart(2,"0")}`;return`  ${ze(ne)}${ze(Ae)}`})()]})]})]}),s.jsx(Jr,{children:x?"Atualize os detalhes do agendamento.":"Preencha os detalhes para criar uma nova reserva."})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pb-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"font-bold",children:"Clientes"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsxs(Fd,{modal:!1,open:M,onOpenChange:ne=>{const Ae=Date.now(),je=Ae<(W.current||0)||Ae<(k.current||0)||Ae<(ht.current||0)||me();if(console.log("[PickerEvt] onOpenChange",{ts:new Date().toISOString(),requestedOpen:ne,guardActive:je,guards:{selectionLockUntil:W.current,suppressCloseUntil:k.current,pickerBlockUntil:ht.current,uiBusyUntil:$.current}}),!((ct||Tn)&&ne===!1)){if(!ne&&je){H("onOpenChange:blocked:guard-window");return}if(!ne&&C.current!=="close"){H("onOpenChange:blocked:sticky-close");return}if(ne){T.current=!0;try{localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}z(!0),H("open:accepted")}else{T.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{const ze=Array.isArray(he.current)?[...he.current]:[];if(ze.length>0){Zn.current="onOpenChange:close:preserve";try{sessionStorage.setItem(Kr,JSON.stringify(ze))}catch{}ha(ze),Gs("onOpenChange:close:preserve",ze)}else nn.current||(Zn.current="onOpenChange:close:empty",Gs("onOpenChange:close:empty",[]))}catch{}try{k.current=Date.now()+1500}catch{}try{const ze={ts:new Date().toISOString(),hook:"onOpenChange(false)",formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Array.isArray(he.current)?he.current.length:NaN,lastLen:Array.isArray(It.current)?It.current.length:NaN,chipsLen:Array.isArray($n)?$n.length:NaN,clientsLoading:!!Tn,lastAction:Zn?.current,clearedByUser:!!nn?.current,suppressUntil:k.current};console.warn("[CustomerPicker][CLOSE:onOpenChange]",ze)}catch{}z(!1),H("close:accepted")}!ne&&Da.current&&(vn(!0),Da.current=!1,setTimeout(()=>vn(!1),1200)),C.current=ne?"open":"close",$e(ne)}},children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{type:"button",variant:"outline",className:Ot("min-w-[180px] justify-between",Br&&"ring-2 ring-emerald-500/40 ring-offset-2 ring-offset-transparent transition-shadow"),onClick:()=>{H("trigger:click");try{C.current="open"}catch{}try{T.current=!0,localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}$e(!0),z(!0),setTimeout(()=>{$e(!0),z(!0),H("trigger:reassert-open")},30),H("trigger:after-set-open")},children:[Ns,s.jsx(J2,{className:"w-4 h-4 ml-2 opacity-60"})]})}),s.jsx(Ou,{forceMount:!0,side:"bottom",align:"start",className:"w-[360px] p-2 z-[9999]",onPointerDownOutside:ne=>{const Ae=Date.now(),je=Ae<(W.current||0)||Ae<(k.current||0)||Ae<(ht.current||0)||me();if(console.log("[PickerEvt] onPointerDownOutside",{ts:new Date().toISOString(),guardActive:je}),je){ne.preventDefault();return}if(ct||Tn){ne.preventDefault();return}try{const ze=Array.isArray(he.current)?[...he.current]:[];if(ze.length>0){Zn.current="outside:close:snapshot",It.current=ze;try{sessionStorage.setItem(Kr,JSON.stringify(ze))}catch{}ha(ze),Gs("outside:close:apply",ze),nn.current=!1}else{if(Zn.current="outside:close:empty",nn.current){It.current=[];try{sessionStorage.removeItem(Kr)}catch{}console.warn("[CustomerPicker][outside:close:empty:cleared]",{ts:new Date().toISOString()})}Gs("outside:close:empty",[])}}catch{}try{k.current=Date.now()+1500}catch{}try{const ze={ts:new Date().toISOString(),hook:"onPointerDownOutside",formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Array.isArray(he.current)?he.current.length:NaN,lastLen:Array.isArray(It.current)?It.current.length:NaN,chipsLen:Array.isArray($n)?$n.length:NaN,clientsLoading:!!Tn,lastAction:Zn?.current,clearedByUser:!!nn?.current,suppressUntil:k.current}}catch{}Da.current=!0,C.current="close",T.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}$e(!1),z(!1)},onFocusOutside:ne=>{H("focusOutside"),(ct||Tn)&&ne.preventDefault()},onEscapeKeyDown:ne=>{H("escapeKeyDown"),(ct||Tn)&&ne.preventDefault()},children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx($t,{ref:Fi,placeholder:"Buscar cliente...",value:bt,onChange:ne=>vt(ne.target.value),className:"pr-10"}),bt&&s.jsx("button",{type:"button","aria-label":"Limpar busca",className:"absolute right-2 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary p-1 rounded hover:bg-white/10",onClick:()=>{vt(""),Fi.current?.focus()},children:s.jsx(_d,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"max-h-[260px] overflow-y-auto divide-y divide-border rounded-md border border-border",onWheel:ne=>{ne.stopPropagation()},onTouchMove:ne=>{ne.stopPropagation()},style:{overscrollBehavior:"contain"},children:[Tn&&(wn||[]).length===0&&s.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Carregando clientes"}),!Tn&&(wn||[]).length===0&&s.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Nenhum cliente encontrado"}),!Tn&&(wn||[]).filter(ne=>{const Ae=bt.trim().toLowerCase();return Ae?String(oe(ne)||"").toLowerCase().includes(Ae):!0}).slice().sort((ne,Ae)=>{const je=typeof ne=="object"&&Number.isFinite(Number(ne?.codigo))?Number(ne.codigo):1/0,ze=typeof Ae=="object"&&Number.isFinite(Number(Ae?.codigo))?Number(Ae.codigo):1/0;if(je!==ze)return je-ze;const Qe=String(ye(ne)||"").toLowerCase(),kt=String(ye(Ae)||"").toLowerCase();return Qe.localeCompare(kt)}).map(ne=>{const Ae=typeof ne=="object"?ne.id:null,je=ye(ne),ze=String(je||"").toLowerCase(),Qe=St=>St.id&&Ae?St.id===Ae:String(St.nome||"").toLowerCase()===ze,kt=(ie.selectedClients||[]).some(Qe);return s.jsxs("button",{type:"button",className:"w-full text-left py-2 px-3 hover:bg-white/5 flex items-center justify-between",onMouseDown:St=>{St.stopPropagation()},role:"option","aria-checked":kt,onClick:()=>{if((Array.isArray(he.current)?he.current:[]).some(Qe)){const pt=(Array.isArray(he.current)?he.current:[]).filter(wr=>wr.id&&Ae?wr.id!==Ae:String(wr.nome||"").toLowerCase()!==ze);try{nn.current=pt.length===0}catch{}try{pt.length===0&&(rt.current=null)}catch{}try{pt.length>0&&(It.current=pt)}catch{}try{he.current=pt}catch{}Gs("list:remove",pt)}else{const pt={id:Ae,nome:je},wr=[...Array.isArray(he.current)?he.current:[],pt];try{(he.current||[]).length===0&&(rt.current=Ae||null)}catch{}try{nn.current=!1}catch{}try{wr.length>0&&(It.current=wr)}catch{}try{he.current=wr}catch{}Gs("list:add",wr)}T.current=!0;try{localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}},children:[s.jsx("span",{className:`truncate mr-2 ${kt?"text-text-muted":""}`,children:oe(ne)}),kt&&s.jsx(Ds,{className:`w-4 h-4 ${ss.confirmed.text}`,"aria-label":"Selecionado"})]},Ae||ze)})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1",children:[s.jsx(Ee,{type:"button",size:"sm",className:"bg-emerald-600 hover:bg-emerald-500 text-white shadow-md ring-2 ring-emerald-400/40 ring-offset-2 ring-offset-transparent",onMouseDown:ne=>{try{k.current=Date.now()+3e3}catch{}try{W.current=Date.now()+3500}catch{}try{V.current=Date.now()+5e3}catch{}try{C.current="close"}catch{}try{T.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{sessionStorage.setItem("agenda:customerPicker:closing","1"),sessionStorage.setItem("agenda:customerPicker:closingAt",String(Date.now()));const Ae=ee.current||sessionStorage.getItem("agenda:modal:sessionId")||"";Ae&&sessionStorage.setItem("agenda:customerPicker:sessionId",Ae);const je=Array.isArray(he.current)?he.current:[];je.length>0&&sessionStorage.setItem(Kr,JSON.stringify(je));try{const ze={ts:new Date().toISOString(),hook:"conclude:mousedown",modalSessionId:Ae,closingAt:sessionStorage.getItem("agenda:customerPicker:closingAt"),selLen:Array.isArray(je)?je.length:NaN,formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,lockUntil:W.current,suppressUntil:k.current,isPickerOpen:!!M,isModalOpen:!!p};console.warn("[CustomerPicker][CONCLUDE:mousedown]",ze)}catch{}}catch{}ne.stopPropagation()},onClick:()=>{C.current="close",T.current=!1;try{V.current=Date.now()+5e3}catch{}try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}U.current=!0;const Ae=Array.isArray(he.current)?[...he.current]:[];try{Ae.length>0&&(Zn.current="conclude:close:snapshot",It.current=Ae,sessionStorage.setItem(Kr,JSON.stringify(Ae)))}catch{}ha(Ae);try{W.current=Date.now()+3e3}catch{}Gs("conclude:close:apply",Ae),ce(je=>({...je,selectedClients:[...Ae]}));try{nn.current=!1}catch{}try{k.current=Date.now()+2500}catch{}$e(!1),z(!1),setTimeout(()=>{try{k.current=Date.now()+2500}catch{}$e(!1),z(!1)},15),setTimeout(()=>{try{k.current=Date.now()+2500}catch{}$e(!1),z(!1)},120);try{k.current=Date.now()+2500}catch{}try{const je={ts:new Date().toISOString(),hook:"conclude:click",formLen:Array.isArray(ie?.selectedClients)?ie.selectedClients.length:NaN,curLen:Array.isArray(he.current)?he.current.length:NaN,lastLen:Array.isArray(It.current)?It.current.length:NaN,chipsLen:Array.isArray($n)?$n.length:NaN,clientsLoading:!!Tn,lastAction:Zn?.current,clearedByUser:!!nn?.current,suppressUntil:k.current,selectionLockUntil:W.current,restoreGuardUntil:Je.current,modalSessionId:ee.current||sessionStorage.getItem("agenda:modal:sessionId")||"",closingAt:sessionStorage.getItem("agenda:customerPicker:closingAt"),pickerOpen:!!M,modalOpen:!!p};console.warn("[CustomerPicker][CLOSE:conclude]",je)}catch{}setTimeout(()=>{try{U.current=!1}catch{}},3e3)},children:"Concluir"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-xs text-text-muted",children:[(Va||[]).length," selecionado(s)"]})})]})]})})]}),s.jsx(Ee,{type:"button",onClick:()=>{try{const ne=Array.isArray(he.current)?he.current:[];ne.length>0&&(It.current=ne,sessionStorage.setItem(Kr,JSON.stringify(ne)),ha(ne),console.warn("[CustomerPicker][+Novo:save-selection]",{savedCount:ne.length}))}catch{}T.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}C.current="close",$e(!1),z(!1),Ht(null),sr(!0)},children:"+ Novo"})]}),xo.length>0?s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:xo.map(ne=>{const Ae=String(ne?.nome||"").toLowerCase(),je=ne?.id||Ae||Math.random().toString(36).slice(2),ze=ne?.id||`__name:${Ae}`;return s.jsxs("span",{className:"text-sm font-medium bg-white/5 border border-white/10 rounded px-2 py-1 flex items-center gap-2",children:[D7(ne.nome),s.jsxs("button",{type:"button","aria-label":"Remover cliente",title:"Remover cliente",className:"text-text-muted hover:text-red-400 p-1 rounded hover:bg-red-500/10",onClick:()=>{n("CustomerPicker:chip:remove",{token:ze});const Qe=(Array.isArray(he.current)?he.current:[]).filter(kt=>kt?.id&&ne?.id?kt.id!==ne.id:String(kt?.nome||"").toLowerCase()!==Ae);try{nn.current=Qe.length===0}catch{}try{It.current=Qe,Qe.length===0&&(sessionStorage.removeItem(Kr),console.warn("[CustomerPicker][chip:remove:cleared-all]",{ts:new Date().toISOString()}))}catch{}try{he.current=Qe}catch{}Gs("chips:remove",Qe)},children:[s.jsx(_d,{className:"w-5 h-5"}),s.jsx("span",{className:"sr-only",children:"Remover"})]})]},je)})}):null]}),s.jsxs("div",{children:[s.jsx(gt,{className:"font-bold",children:"Quadra"}),s.jsxs(yn,{value:ie.court,onValueChange:ne=>ce(Ae=>({...Ae,court:ne})),children:[s.jsx(pn,{className:"mt-1",onMouseDown:()=>{M&&setTimeout(Ks,0)},children:s.jsx(xn,{children:ie.court&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:gf(ie.court)}}),s.jsx("span",{children:ie.court})]})})}),s.jsx(gn,{className:"z-[60]",children:Ue.map(ne=>s.jsx(Wt,{value:ne,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:gf(ne)}}),s.jsx("span",{children:ne})]})},ne))})]})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"font-bold",children:"Modalidade"}),s.jsxs(yn,{value:ie.modality,onValueChange:ne=>ce(Ae=>({...Ae,modality:ne})),children:[s.jsx(pn,{className:"mt-1",onMouseDown:()=>{M&&setTimeout(Ks,0)},children:s.jsx(xn,{})}),s.jsx(gn,{children:(Ha||[]).map(ne=>s.jsx(Wt,{value:ne,children:ne},ne))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"font-bold",children:"Status"}),s.jsxs(yn,{value:ie.status,onValueChange:ne=>ce(Ae=>({...Ae,status:ne})),children:[s.jsx(pn,{className:"mt-1",onMouseDown:()=>{M&&setTimeout(Ks,0)},children:s.jsx(xn,{})}),s.jsx(gn,{children:Object.keys(ss).map(ne=>s.jsx(Wt,{value:ne,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{"aria-hidden":!0,className:`inline-block h-4 w-1 rounded ${ss[ne].accent}`}),ss[ne].label]})},ne))})]}),Lu&&s.jsx("div",{className:"mt-1 text-xs text-text-secondary italic",children:Lu})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"font-bold",children:"Horrio"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs(yn,{value:String(ie.startMinutes),onValueChange:ne=>ce(Ae=>({...Ae,startMinutes:Number(ne)})),children:[s.jsx(pn,{className:"w-32","aria-label":"Hora incio",onMouseDown:()=>{M&&setTimeout(Ks,0)},children:s.jsx(xn,{})}),s.jsx(gn,{className:"max-h-[300px] z-[60] [&>div]:scrollbar-thin [&>div]:scrollbar-track-surface [&>div]:scrollbar-thumb-brand/40 [&>div]:hover:scrollbar-thumb-brand/60",children:Oh.map(ne=>s.jsx(Wt,{value:String(ne.value),disabled:!ne.available,className:Ot(!ne.available&&"opacity-60"),children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[ne.available?s.jsx(Yg,{className:"w-4 h-4 opacity-80"}):s.jsx(zm,{className:"w-4 h-4 opacity-80"}),ne.label]})},ne.value))})]}),s.jsxs(yn,{value:String(ie.endMinutes),onValueChange:ne=>ce(Ae=>({...Ae,endMinutes:Number(ne)})),children:[s.jsx(pn,{className:"w-32","aria-label":"Hora fim",onMouseDown:()=>{M&&setTimeout(Ks,0)},children:s.jsx(xn,{})}),s.jsx(gn,{className:"max-h-[300px] z-[60] [&>div]:scrollbar-thin [&>div]:scrollbar-track-surface [&>div]:scrollbar-thumb-brand/40 [&>div]:hover:scrollbar-thumb-brand/60",children:Th.map(ne=>s.jsx(Wt,{value:String(ne.value),disabled:!ne.available,className:Ot(!ne.available&&"opacity-60"),children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[ne.available?s.jsx(Yg,{className:"w-4 h-4 opacity-80"}):s.jsx(zm,{className:"w-4 h-4 opacity-80"}),ne.label]})},ne.value))})]})]}),s.jsxs("div",{className:"mt-1 inline-block text-xs font-semibold text-text-secondary bg-white/5 border border-white/10 rounded px-2 py-0.5",children:["Durao: ",uc]})]})]})]})}),s.jsx(mn,{className:"flex-shrink-0 border-t border-border bg-surface px-6 py-3",children:s.jsxs("div",{className:"w-full flex flex-col gap-3 sm:flex-row sm:items-center",children:[x&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:mr-auto w-full sm:w-auto",children:[s.jsxs(Ee,{type:"button",variant:"destructive",className:"bg-red-600 hover:bg-red-500 text-white border border-red-700 w-full sm:w-auto justify-center",onClick:()=>Do(!0),children:[s.jsx(Z2,{className:"w-4 h-4 mr-2 opacity-90"}),"Cancelar agendamento"]}),s.jsxs(Ee,{type:"button",variant:"secondary",className:"bg-teal-600 hover:bg-teal-500 text-white border-teal-700 w-full sm:w-auto justify-center",onClick:()=>{Ss(!0)},children:[s.jsx(dl,{className:"w-4 h-4 mr-2 opacity-90"})," Pagamentos"]})]}),s.jsx(kf,{open:Hs,onOpenChange:Do,children:s.jsxs(fd,{children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Cancelar agendamento?"}),s.jsx(gd,{children:'Ao cancelar, este agendamento deixar de aparecer na agenda padro. Ele s ser visvel ao selecionar o filtro "Cancelados".'})]}),s.jsxs(md,{children:[s.jsx(yd,{children:"Voltar"}),s.jsx(vd,{className:"bg-red-600 hover:bg-red-500",onClick:async()=>{try{Do(!1),y(!1),await An(x.id,"canceled","user"),e({title:"Agendamento cancelado"})}catch(ne){e({title:"Erro ao cancelar",description:ne?.message||"Tente novamente."})}},children:"Confirmar cancelamento"})]})]})})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[s.jsx(Ee,{type:"button",variant:"ghost",className:"border border-white/10 flex-1 sm:flex-none",onClick:()=>y(!1),children:"Fechar"}),s.jsx(Ee,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white disabled:opacity-60 disabled:cursor-not-allowed flex-1 sm:flex-none",disabled:no,onClick:async()=>{try{if(no)return;yt.current=!0,Rt.current=!1,await Ru()}catch{}},children:"Salvar"})]})]})})]})}),x&&s.jsx(qr,{open:li,onOpenChange:Ss,children:s.jsxs(Lr,{forceMount:!0,className:"sm:max-w-[960px] max-h-[90vh] overflow-y-auto",onOpenAutoFocus:ne=>ne.preventDefault(),onInteractOutside:ne=>{ne.preventDefault()},onEscapeKeyDown:ne=>{ne.preventDefault()},children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Registrar pagamento"}),s.jsx(Jr,{children:"Gerencie valores, diviso e status de pagamento dos participantes."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 rounded-lg border border-border bg-gradient-to-br from-surface-2 to-surface shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap md:items-end gap-3",children:[s.jsxs("div",{className:"space-y-1 w-full md:w-auto",children:[s.jsx(gt,{className:"font-bold",children:"Valor total a receber"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[s.jsx($t,{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:vc(io),onChange:ne=>ts(vc(ne.target.value)),className:"w-full sm:max-w-[180px]"}),s.jsx(Ee,{type:"button",variant:"secondary",size:"sm",className:"bg-sky-600 hover:bg-sky-500 text-white w-full sm:w-auto",onClick:Ih,disabled:!io||Lo===0,children:(()=>{const ne=Vi(io),Ae=Number.isFinite(ne)&&Lo>0,je=Ae?ne/Lo:0;return`Dividir igualmente${Ae?` (R$ ${je.toFixed(2)} p/ cada)`:""}`})()}),s.jsx(Ee,{type:"button",variant:"ghost",size:"sm",className:"border border-white/10 w-full sm:w-auto",onClick:Zc,disabled:Lo===0,children:"Zerar valores"})]})]}),s.jsxs("div",{className:"ml-auto text-sm",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Participantes:"}),s.jsx("strong",{children:Lo})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Atribudo:"}),s.jsxs("strong",{children:["R$ ",gi.totalAssigned.toFixed(2)]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Alvo:"}),s.jsxs("strong",{children:["R$ ",gi.totalTarget.toFixed(2)]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Diferena:"}),s.jsxs("strong",{className:gi.diff===0?"text-emerald-500":gi.diff>0?"text-amber-500":"text-rose-500",children:["R$ ",gi.diff.toFixed(2)]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Pago:"}),s.jsx("strong",{children:gi.paid})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Pendente:"}),s.jsx("strong",{children:gi.pending})]})]}),(()=>{const ne=gi.totalTarget>0?gi.totalAssigned/gi.totalTarget*100:0,Ae=Math.max(0,Math.min(100,ne)),je=Ae>0&&Ae<1?1:Ae,ze=gi.diff===0?"bg-emerald-500":gi.diff>0?"bg-amber-500":"bg-rose-500";return s.jsxs("div",{className:"mt-2 w-full min-w-[280px]",children:[s.jsx("div",{className:"h-2 w-full rounded bg-white/10 overflow-hidden",children:s.jsx("div",{className:`h-full ${ze}`,style:{width:`${je}%`}})}),s.jsxs("div",{className:"mt-1 text-sm font-medium text-text-muted",children:[Ae.toFixed(0),"% atribudo"]})]})})()]})]})}),(ie.selectedClients||[]).length===0&&s.jsx("div",{className:"text-xs text-text-muted italic",children:'Nenhum participante neste agendamento. Adicione participantes no campo "Clientes" do modal principal.'}),(ie.selectedClients||[]).length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative w-full max-w-[320px]",children:[s.jsx($t,{ref:O,type:"text",placeholder:"Buscar participante...",value:Xc,onChange:ne=>kh(ne.target.value),className:"pr-16"}),s.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-amber-400 hover:text-amber-300",onClick:()=>{kh("");try{O.current?.focus()}catch{}},children:"limpar"})]})}),Mr?.type==="pending"&&s.jsxs("div",{role:"alert",className:"mb-2 rounded-md border border-amber-600/40 bg-amber-500/10 px-3 py-2 text-amber-200 flex items-start gap-3",children:[s.jsx("div",{className:"mt-0.5",children:s.jsx(Kg,{className:"w-4 h-4 text-amber-300"})}),s.jsxs("div",{className:"flex-1 text-sm",children:[s.jsx("strong",{children:"Ateno:"})," Existem ",s.jsx("strong",{children:Mr.count})," participante(s) com status ",s.jsx("strong",{children:"Pendente"}),".",s.jsxs("span",{className:"ml-1",children:["Marque como ",s.jsx("strong",{children:"Pago"})," antes de salvar."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-white/10 hover:bg-white/15 border border-white/10",onClick:()=>{const ne=Mr.firstPendingId;if(ne){mr(ne);const Ae=document.getElementById(`payment-row-${ne}`);Ae&&Ae.scrollIntoView({behavior:"smooth",block:"center"})}},children:"Ver pendentes"}),s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-amber-500/20 hover:bg-amber-500/30 border border-amber-600/40",onClick:()=>Yr(null),children:"Entendi"})]})]}),s.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 items-center px-3 py-2 bg-surface-2 text-[11px] uppercase tracking-wide text-text-secondary",children:[s.jsx("div",{className:"col-span-5",children:"Participante"}),s.jsx("div",{className:"col-span-3",children:"Finalizadora"}),s.jsx("div",{className:"col-span-2",children:"Valor"}),s.jsx("div",{className:"col-span-1 flex items-center justify-between pr-2",children:s.jsx("span",{children:"Status"})}),s.jsx("div",{className:"col-span-1 text-right",children:"Aes"})]}),s.jsx("div",{className:"divide-y divide-border max-h-[50vh] overflow-y-auto fx-scroll",children:(()=>{const ne=Xc.trim().toLowerCase(),Ae=(ie.selectedClients||[]).filter(je=>!De.includes(je.id)).filter(je=>ne?String(je?.nome||"").toLowerCase().includes(ne):!0);return Ae.length===0?s.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Nenhum participante com esse nome"}):Ae.map(je=>{const ze=ma.find(kt=>kt.cliente_id===je.id);ze?console.log("[PaymentModal] Cliente encontrado:",{cliente_id:je.id,finalizadora_id:ze.finalizadora_id}):console.warn("[PaymentModal] Cliente no encontrado em participantsForm:",{buscando_id:je.id,buscando_nome:je.nome,participantsForm_length:ma.length,participantsForm_ids:ma.map(kt=>({id:kt.cliente_id,fin:kt.finalizadora_id}))});const Qe=ze||{cliente_id:je.id,nome:je.nome,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:Ua[0]?.id?String(Ua[0].id):null};return s.jsxs("div",{id:`payment-row-${je.id}`,className:`${Mr?.type==="pending"&&Qe.status_pagamento!=="Pago"?"bg-amber-500/5":""}`,children:[s.jsxs("div",{className:"md:hidden p-3 space-y-3",children:[s.jsx("div",{className:"font-semibold text-base",children:je.nome}),s.jsxs("div",{children:[s.jsx(gt,{className:"text-xs text-text-muted mb-1",children:"Finalizadora"}),s.jsxs(yn,{value:String(Qe.finalizadora_id||Ua[0]?.id||""),onValueChange:kt=>{jn(St=>{const pt=[...St],wr=pt.findIndex(Nr=>Nr.cliente_id===je.id);return wr>=0?pt[wr]={...pt[wr],finalizadora_id:kt}:pt.push({cliente_id:je.id,nome:je.nome,valor_cota:Qe.valor_cota||"",status_pagamento:Qe.status_pagamento||"Pendente",finalizadora_id:kt}),pt})},children:[s.jsx(pn,{className:"w-full h-10",children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsx(gn,{className:"bg-surface border border-border",children:Ua.map(kt=>s.jsx(Wt,{value:String(kt.id),children:kt.nome||kt.tipo||"Outros"},kt.id))})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(gt,{className:"text-xs text-text-muted mb-1",children:"Valor"}),s.jsx($t,{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:vc(Qe.valor_cota),onChange:kt=>{const St=vc(kt.target.value),pt=Vi(St),wr=Number.isFinite(pt)&&pt>0?"Pago":"Pendente";jn(Nr=>{let Tr=[...Nr];const pa=Tr.findIndex(Pi=>Pi.cliente_id===je.id);pa>=0?Tr[pa]={...Tr[pa],valor_cota:St,status_pagamento:wr}:Tr=[...Tr,{cliente_id:je.id,nome:je.nome,valor_cota:St,status_pagamento:wr}];const ci=Vi(io);return Number.isFinite(ci)&&Vi(St)>=ci&&(Tr=Tr.map(hn=>({...hn,status_pagamento:"Pago"}))),Tr})},className:"text-sm"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(gt,{className:"text-xs text-text-muted mb-1",children:"Status"}),s.jsx("div",{className:`flex items-center justify-center h-10 px-3 rounded text-sm font-medium border w-full select-none ${Qe.status_pagamento==="Pago"?"bg-emerald-600/20 text-emerald-400 border-emerald-700/40":"bg-amber-600/20 text-amber-400 border-amber-700/40"}`,children:Qe.status_pagamento==="Pago"?"Pago":"Pendente"})]})]}),s.jsx(Ee,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400 w-full",onClick:()=>{Be(kt=>kt.includes(je.id)?kt:[...kt,je.id]),jn(kt=>kt.filter(St=>St.cliente_id!==je.id))},children:"Remover participante"})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-12 items-center px-3 py-2",children:[s.jsx("div",{className:"col-span-5 truncate text-[15px] font-medium",children:je.nome}),s.jsx("div",{className:"col-span-3 pr-2",children:s.jsxs(yn,{value:String(Qe.finalizadora_id||Ua[0]?.id||""),onValueChange:kt=>{jn(St=>{const pt=[...St],wr=pt.findIndex(Nr=>Nr.cliente_id===je.id);return wr>=0?pt[wr]={...pt[wr],finalizadora_id:kt}:pt.push({cliente_id:je.id,nome:je.nome,valor_cota:Qe.valor_cota||"",status_pagamento:Qe.status_pagamento||"Pendente",finalizadora_id:kt}),pt})},children:[s.jsx(pn,{className:"h-8 text-sm max-w-[140px]",children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsx(gn,{className:"bg-surface border border-border",children:Ua.map(kt=>s.jsx(Wt,{value:String(kt.id),children:kt.nome||kt.tipo||"Outros"},kt.id))})]})}),s.jsx("div",{className:"col-span-2 pr-2",children:s.jsx($t,{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:vc(Qe.valor_cota),onChange:kt=>{const St=vc(kt.target.value),pt=Vi(St),wr=Number.isFinite(pt)&&pt>0?"Pago":"Pendente";jn(Nr=>{let Tr=[...Nr];const pa=Tr.findIndex(Pi=>Pi.cliente_id===je.id);pa>=0?Tr[pa]={...Tr[pa],valor_cota:St,status_pagamento:wr}:Tr=[...Tr,{cliente_id:je.id,nome:je.nome,valor_cota:St,status_pagamento:wr}];const ci=Vi(io);return Number.isFinite(ci)&&Vi(St)>=ci&&(Tr=Tr.map(hn=>({...hn,status_pagamento:"Pago"}))),Tr})},className:"w-24 md:w-28 text-sm"})}),s.jsx("div",{className:"col-span-1 pr-2",children:s.jsx("span",{className:`inline-flex items-center justify-center h-8 px-2 rounded text-sm font-medium border w-full select-none ${Qe.status_pagamento==="Pago"?"bg-emerald-600/20 text-emerald-400 border-emerald-700/40":"bg-amber-600/20 text-amber-400 border-amber-700/40"}`,title:Qe.status_pagamento==="Pago"?"Status automtico: Pago (valor > 0)":"Status automtico: Pendente (valor = 0)",children:Qe.status_pagamento==="Pago"?"Pago":"Pendente"})}),s.jsx("div",{className:"col-span-1 text-right",children:s.jsx(Ee,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400",onClick:()=>{Be(kt=>kt.includes(je.id)?kt:[...kt,je.id]),jn(kt=>kt.filter(St=>St.cliente_id!==je.id))},children:"Remover"})})]})]},je.id)})})()})]})]}),s.jsxs(mn,{className:"gap-2",children:[s.jsx(Ee,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>Ss(!1),children:"Cancelar"}),s.jsx(Ee,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white disabled:opacity-60 disabled:cursor-not-allowed",disabled:Tl,onClick:async()=>{const Ae=`[PaymentsSave Trace ${Date.now()}]`;try{console.groupCollapsed(Ae)}catch{}try{const je={modalOpen:li,isSavingPayments:Tl,bookingId:x?.id,company:c?.codigo_empresa,participantsCount:Lo,selectedClientIds:(ie?.selectedClients||[]).map(yr=>yr?.id),hiddenIds:[...De||[]],paymentTotal:io};try{console.info("[PaymentsSave] click",je)}catch{}if(Tl){try{console.warn("[PaymentsSave] ignored: already saving")}catch{}return}js(!0);try{console.debug("[PaymentsSave] state set: isSavingPayments=true")}catch{}const ze=x?.id,Qe=c?.codigo_empresa;if(!ze||!Qe){try{console.error("[PaymentsSave] missing identifiers",{agendamentoId:ze,codigo:Qe})}catch{}e({title:"Erro ao salvar pagamentos",description:"Agendamento ou empresa indisponvel.",variant:"destructive"});return}const kt=Date.now();let St,pt,wr;try{St=new Map((ma||[]).map(yr=>[yr.cliente_id,yr])),pt=(ie.selectedClients||[]).filter(yr=>!De.includes(yr.id)),wr=pt.reduce((yr,Fn)=>{const In=St.get(Fn.id)?.status_pagamento||"Pendente";return yr+(In!=="Pago"?1:0)},0)}catch(yr){try{console.error("[PaymentsSave] calc error",yr,{participantsForm:ma,formSelected:ie?.selectedClients,paymentHiddenIds:De})}catch{}e({title:"Erro ao processar participantes",description:"Tente novamente.",variant:"destructive"});return}try{console.debug("[PaymentsSave] pendingCount",{pendingCount:wr,effectiveSelected:pt.map(yr=>yr.id)})}catch{}const Nr=Date.now(),{error:Tr}=await Oe.from("agendamento_participantes").delete().eq("codigo_empresa",Qe).eq("agendamento_id",ze);if(Tr)throw console.error("[ParticipantsSave] Delete error",Tr),e({title:"Erro ao salvar pagamentos",description:"Falha ao limpar registros anteriores.",variant:"destructive"}),Tr;try{console.debug("[PaymentsSave] delete ok",{ms:Date.now()-Nr})}catch{}console.log("[PaymentsSave] ANTES DE MONTAR ROWS:",{effectiveSelected:pt.map(yr=>({id:yr.id,nome:yr.nome})),participantsForm:ma,payMethods:Ua.map(yr=>({id:yr.id,nome:yr.nome}))});const pa=pt.map(yr=>{const Fn=ma.find(rs=>rs.cliente_id===yr.id);Fn||console.error("[PaymentsSave]  Participante no encontrado em participantsForm:",{cliente_id:yr.id,nome:yr.nome,participantsFormLen:ma.length});const In=Vi(Fn?.valor_cota),xa=Fn?.finalizadora_id||(Ua[0]?.id?String(Ua[0].id):null),ta={codigo_empresa:Qe,agendamento_id:ze,cliente_id:yr.id,nome:yr.nome,valor_cota:Number.isFinite(In)?In:0,status_pagamento:Fn?.status_pagamento||"Pendente",finalizadora_id:xa};return console.log("[PaymentsSave] Row montada:",{cliente:yr.nome,finalizadora_id:xa,pf:Fn}),ta});console.log("[PaymentsSave]  TODAS AS ROWS MONTADAS:",pa);try{console.debug("[PaymentsSave] rows prepared",{count:pa.length,sample:pa.slice(0,3)})}catch{}if(pa.length>0){const yr=Date.now(),{data:Fn,error:In}=await Oe.from("agendamento_participantes").insert(pa).select();if(In)throw e({title:"Erro ao salvar pagamentos",description:"Falha ao inserir pagamentos.",variant:"destructive"}),In;try{console.debug("[PaymentsSave] insert ok",{insertedCount:Fn?.length||0,ms:Date.now()-yr})}catch{}}else try{console.warn("[PaymentsSave] no rows to insert")}catch{}try{if((De||[]).length>0){const yr=pt,Fn=yr[0]||null,In=yr.map(ta=>ta?.nome).filter(Boolean),xa=Date.now();await Oe.from("agendamentos").update({cliente_id:Fn?.id??null,clientes:In}).eq("codigo_empresa",Qe).eq("id",ze);try{console.debug("[PaymentsSave] booking updated after removals",{primaryId:Fn?.id||null,count:yr.length,ms:Date.now()-xa})}catch{}ce(ta=>({...ta,selectedClients:yr})),g(ta=>ta.map(rs=>rs.id===ze?{...rs,customer:Fn?.nome||""}:rs))}}catch{}try{const yr=Date.now(),{data:Fn,error:In}=await Oe.from("agendamento_participantes").select("id, agendamento_id, codigo_empresa, cliente_id, nome, valor_cota, status_pagamento, finalizadora_id").eq("codigo_empresa",Qe).eq("agendamento_id",ze);if(!In){S(xa=>{const ta={...xa,[ze]:Fn||[]};try{ur&&localStorage.setItem(ur,JSON.stringify(ta))}catch{}return ta});try{console.debug("[PaymentsSave] refresh participants ok",{count:Fn?.length||0,ms:Date.now()-yr})}catch{}}}catch(yr){try{console.warn("[PaymentsSave] refresh participants failed",yr)}catch{}}const ci=Vi(io),Pi=Number.isFinite(ci)?ci:0,hn=(ie.selectedClients||[]).reduce((yr,Fn)=>{const In=ma.find(ta=>ta.cliente_id===Fn.id),xa=Vi(In?.valor_cota);return yr+(Number.isFinite(xa)?xa:0)},0);try{console.info("[PaymentsSave] totals",{totalTarget:Pi,totalAssigned:hn,pendingCount:wr})}catch{}Pi>0&&hn<Pi-.005?e({title:"Pagamentos salvos",description:"Total no alcanado.",variant:"warning"}):wr>0?e({title:"Pagamentos salvos",description:`Pendentes: ${wr}`,variant:"warning"}):e({title:"Pagamentos salvos",variant:"success"}),Yr(null);try{console.info("[PaymentsSave] done",{ms:Date.now()-kt})}catch{}Ss(!1),y(!1)}catch(je){e({title:"Erro ao salvar pagamentos",description:"Tente novamente.",variant:"destructive"}),console.error("[PaymentsSave] error",je)}finally{js(!1);try{console.groupEnd()}catch{}}},children:"Salvar Pagamentos"})]})]})]})}),s.jsx(Gee,{open:ct,onOpenChange:ne=>{sr(ne),ne||Ht(null)},client:dr,onSaved:ne=>{try{if(ne&&typeof ne=="object"){console.warn("[CustomerPicker][onSaved:START]",{clientId:ne.id,clientName:ne.nome,currentSelection:Array.isArray(he.current)?he.current.length:0});try{V.current=Date.now()+3e3,W.current=Date.now()+3e3,Je.current=Date.now()+3e3}catch{}(wn||[]).some(je=>typeof je=="object"?je.id===ne.id:!1)||(Ma(je=>[...je||[],ne]),Ze(je=>[...je||[],ne])),ce(je=>{const ze=Array.isArray(je.selectedClients)?je.selectedClients:[],Qe={id:ne.id,nome:ne.nome||ne.name||ye(ne),codigo:ne.codigo},kt=ze.filter(pt=>pt.id!==ne.id),St=[Qe,...kt];try{he.current=St}catch{}try{It.current=St}catch{}try{ha(St)}catch{}try{sessionStorage.setItem(Kr,JSON.stringify(St))}catch{}try{nn.current=!1}catch{}return console.warn("[CustomerPicker][onSaved:COMPLETE]",{newClientId:ne.id,newClientName:ne.nome,totalSelected:St.length,refsSynced:!0,protectionActive:!0}),{...je,selectedClients:St}}),Promise.resolve().then(()=>{try{const je=Array.isArray(he.current)?he.current:[];je.length>0&&(ce(ze=>({...ze,selectedClients:[...je]})),console.warn("[CustomerPicker][onSaved:REASSERT]",{count:je.length}))}catch{}})}}catch(Ae){console.error("[CustomerPicker][onSaved:ERROR]",Ae)}}})]})},te=v.useMemo(()=>{const V=Rr(f,"yyyy-MM-dd");let ee=m.filter(oe=>Rr(oe.start,"yyyy-MM-dd")===V);if(ee=Y.canceledOnly?ee.filter(oe=>oe.status==="canceled"):ee.filter(oe=>oe.status!=="canceled"),At.trim()){const oe=At.trim().toLowerCase();ee=ee.filter(ye=>(ye.customer||"").toLowerCase().includes(oe)||(ye.court||"").toLowerCase().includes(oe)||(ss[ye.status]?.label||"").toLowerCase().includes(oe))}return Y.scheduled||Y.canceledOnly?ee:[]},[m,f,Y.scheduled,Y.canceledOnly,At]);v.useEffect(()=>{if(!At.trim()||!(Y.scheduled||Y.canceledOnly)||!te||te.length===0)return;const V=[...te].sort((oe,ye)=>oe.start-ye.start)[0];if(!V?.id)return;const ee=document.getElementById(`booking-${V.id}`);ee?.scrollIntoView&&ee.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},[At,te,Y.scheduled,Y.canceledOnly]),v.useEffect(()=>{const V=Ye.current,ee=Nt.current||{},oe=Y.canceledOnly&&!ee.canceledOnly,ye=Y.scheduled&&!ee.scheduled&&!Y.canceledOnly;if(!V||!oe&&!ye){Nt.current={scheduled:Y.scheduled,canceledOnly:Y.canceledOnly};return}const ke=te||[];if(ke.length===0){Nt.current={scheduled:Y.scheduled,canceledOnly:Y.canceledOnly};return}const Me=V.getBoundingClientRect();if(!ke.some(ce=>{const he=document.getElementById(`booking-${ce.id}`);if(!he)return!1;const Ke=he.getBoundingClientRect();return Ke.bottom>Me.top&&Ke.top<Me.bottom})){const ce=[...ke].sort((Ke,rt)=>Ke.start-rt.start)[0],he=ce&&document.getElementById(`booking-${ce.id}`);he?.scrollIntoView&&he.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}Nt.current={scheduled:Y.scheduled,canceledOnly:Y.canceledOnly}},[Y.scheduled,Y.canceledOnly,te]);const Ne=v.useMemo(()=>{if(!ft||!pe[ft])return{start:Yt,end:ot};const V=pe[ft],ee=V.hora_inicio||`${Yt}:00:00`,oe=V.hora_fim||`${ot}:00:00`,[ye,ke]=String(ee).split(":").map(Number),[Me,ie]=String(oe).split(":").map(Number);return{start:ye||Yt,end:Me||ot,startMinutes:(ye||0)*60+(ke||0),endMinutes:(Me||0)*60+(ie||0)}},[ft,pe,Yt,ot]);return v.useMemo(()=>{const V=Ne.start,ee=Ne.end;return Array.from({length:Math.max(0,ee-V)},(oe,ye)=>V+ye)},[Ne]),v.useMemo(()=>{const V=Ne.start,ee=Ne.end;return Math.max(0,ee-V)*(60/_n)*os},[Ne]),s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Agenda - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Gerencie seus agendamentos, horrios e quadras."})]}),s.jsxs(lr.div,{variants:p?void 0:mHe,initial:p?!1:"hidden",animate:p?!1:"visible",className:"h-full flex flex-col md:px-0",children:[s.jsx(lr.div,{variants:M7,className:"p-3 bg-surface mb-6 md:rounded-lg",children:s.jsxs("div",{className:"max-w-[1200px] mx-auto w-full flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>h(m2(f,1)),children:s.jsx($W,{className:"h-5 w-5"})}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"ghost",className:"w-full sm:w-auto max-w-full justify-center text-base font-semibold whitespace-nowrap truncate",children:[s.jsx(vu,{className:"mr-2 h-5 w-5"}),s.jsx("span",{className:"hidden sm:inline",children:Rr(f,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Zu})}),s.jsx("span",{className:"sm:hidden",children:Rr(f,"EEEE, dd/MM/yyyy",{locale:Zu})})]})}),s.jsx(Ou,{className:"w-auto p-0",children:s.jsx(ju,{mode:"single",selected:f,onSelect:V=>V&&h(V),initialFocus:!0})})]}),s.jsx(Ee,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>h(Ii(f,1)),children:s.jsx(cj,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-3 justify-end",children:[s.jsxs("div",{className:"relative w-full sm:w-56",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar agendamento...",className:"pl-9",value:At,onChange:V=>Pe(V.target.value),onBlur:()=>Pe("")}),At&&s.jsx("button",{type:"button","aria-label":"Limpar busca",className:"absolute right-2 top-1/2 -translate-y-1/2 px-2 py-0.5 rounded text-xs font-medium text-primary hover:bg-surface-2",onClick:()=>Pe(""),children:"Limpar"})]}),s.jsxs(Ee,{size:"sm",onClick:()=>{b(null),mt(null);try{sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt")}catch{}X()},"aria-label":"Novo agendamento",className:"gap-2",disabled:Ue.length===0,children:[s.jsx(Xa,{className:"h-4 w-4"})," Agendar"]}),s.jsxs(Mx,{children:[s.jsx(Rx,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",size:"sm",className:"gap-2",disabled:Ue.length===0,children:[s.jsx(Ace,{className:"h-4 w-4"})," Filtros"]})}),s.jsxs(Dg,{align:"end",className:"w-64",children:[s.jsx(Eee,{children:"Exibio"}),s.jsx(MO,{}),s.jsx(Pc,{onClick:V=>V.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vu,{className:"h-4 w-4 text-text-muted"}),s.jsx("span",{children:"Agendados"})]}),s.jsx(iu,{checked:Y.scheduled,onCheckedChange:V=>Z(ee=>({...ee,scheduled:!!V,canceledOnly:V?!1:ee.canceledOnly}))})]})}),s.jsx(Pc,{onClick:V=>V.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pce,{className:"h-4 w-4 text-text-muted"}),s.jsx("span",{children:"Livres"})]}),s.jsx(iu,{checked:Y.available,onCheckedChange:V=>Z(ee=>({...ee,available:!!V,canceledOnly:V?!1:ee.canceledOnly}))})]})}),s.jsx(Pc,{onClick:V=>V.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Z2,{className:"h-4 w-4 text-rose-400"}),s.jsx("span",{children:"Cancelados"})]}),s.jsx(iu,{checked:Y.canceledOnly,onCheckedChange:V=>{const ee=!!V;Z(oe=>({...oe,canceledOnly:ee,scheduled:ee?!1:oe.scheduled,available:ee?!1:oe.available})),ee&&!Tt&&Bt(!0)}})]})})]})]}),s.jsx(Ee,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>rn(!0),disabled:Ue.length===0,"aria-label":"Configurar agenda",title:"Configurar agenda",children:s.jsx(fE,{className:"h-5 w-5"})})]})]})}),s.jsx(qr,{open:ln,onOpenChange:rn,children:s.jsxs(Lr,{className:"sm:max-w-[680px]",onOpenAutoFocus:V=>V.preventDefault(),children:[s.jsx(Ur,{className:"pb-3 border-b border-border bg-surface-2/40 rounded-t-lg px-2 -mx-2 -mt-2",children:s.jsx($r,{className:"text-base font-semibold tracking-tight",children:"Configuraes da Agenda"})}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[s.jsx(Ds,{className:"h-4 w-4",style:{color:ss.confirmed.hex}}),s.jsx("span",{className:"text-sm font-medium",children:"Confirmao automtica"})]}),s.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-3",style:{borderLeftWidth:3,borderLeftColor:ss.confirmed.hex},children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(iu,{id:"autoConfirmEnabled",checked:Zt.autoConfirmEnabled,onCheckedChange:V=>Qn(ee=>({...ee,autoConfirmEnabled:!!V}))}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:ss.confirmed.hex}}),s.jsx(gt,{htmlFor:"autoConfirmEnabled",className:"font-medium",children:"Confirmao automtica"})]})]})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(gt,{className:"text-sm text-text-muted",children:"Confirmar se faltar"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(yn,{value:String(Math.max(0,Math.round((Zt.autoConfirmMinutesBefore||0)/60))),onValueChange:V=>Qn(ee=>({...ee,autoConfirmMinutesBefore:Math.max(0,Number(V))*60})),disabled:!Zt.autoConfirmEnabled,children:[s.jsx(pn,{className:"w-32",children:s.jsx(xn,{placeholder:"Horas"})}),s.jsxs(gn,{align:"start",children:[s.jsx(Wt,{value:"0",children:"Imediato"}),s.jsx(Wt,{value:"1",children:"1 h"}),s.jsx(Wt,{value:"2",children:"2 h"}),s.jsx(Wt,{value:"3",children:"3 h"}),s.jsx(Wt,{value:"4",children:"4 h"}),s.jsx(Wt,{value:"6",children:"6 h"}),s.jsx(Wt,{value:"8",children:"8 h"}),s.jsx(Wt,{value:"12",children:"12 h"}),s.jsx(Wt,{value:"24",children:"24 h"})]})]}),s.jsx("span",{className:"text-sm text-text-muted",children:"antes"})]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[s.jsx(qW,{className:"h-4 w-4",style:{color:ss.in_progress.hex}}),s.jsx("span",{className:"text-sm font-medium",children:"Transies automticas"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-2",style:{borderLeftWidth:3,borderLeftColor:ss.in_progress.hex},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(iu,{id:"autoStartEnabled",checked:Zt.autoStartEnabled,onCheckedChange:V=>Qn(ee=>({...ee,autoStartEnabled:!!V}))}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:ss.in_progress.hex}}),s.jsx(gt,{htmlFor:"autoStartEnabled",className:"font-medium",children:"Iniciar no horrio"})]})]}),s.jsx("p",{className:"text-xs text-text-muted ml-7",children:"Confirmado  Em andamento no horrio de incio."})]}),s.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-2",style:{borderLeftWidth:3,borderLeftColor:ss.finished.hex},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(iu,{id:"autoFinishEnabled",checked:Zt.autoFinishEnabled,onCheckedChange:V=>Qn(ee=>({...ee,autoFinishEnabled:!!V}))}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:ss.finished.hex}}),s.jsx(gt,{htmlFor:"autoFinishEnabled",className:"font-medium",children:"Finalizar ao trmino"})]})]}),s.jsx("p",{className:"text-xs text-text-muted ml-7",children:"Em andamento  Finalizado no horrio de trmino."})]})]})]})]}),s.jsxs(mn,{className:"mt-2 gap-2",children:[s.jsx(Ee,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>rn(!1),children:"Cancelar"}),s.jsx(Ee,{type:"button",variant:"default",onClick:oi,disabled:Kn,children:Kn?"Salvando":"Salvar"})]})]})}),s.jsx(qr,{open:lt,onOpenChange:Bt,children:s.jsxs(Lr,{className:"sm:max-w-[520px]",onOpenAutoFocus:V=>V.preventDefault(),children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Sobre agendamentos cancelados"}),s.jsx(Jr,{children:"Agendamentos cancelados no aparecem na agenda quando o filtro no est selecionado e no ocupam horrio."})]}),s.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[s.jsx(iu,{id:"hide-canceled-info",checked:Tt,onCheckedChange:V=>er(!!V),className:"mt-0.5"}),s.jsx(gt,{htmlFor:"hide-canceled-info",className:"text-sm cursor-pointer text-text-secondary",children:"No mostrar novamente"})]}),s.jsx(mn,{className:"mt-4",children:s.jsx(Ee,{type:"button",onClick:()=>Bt(!1),children:"Entendi"})})]})}),!Se&&Ue.length===0&&s.jsxs("div",{className:"mb-4 p-4 rounded-lg border border-border bg-surface text-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Nenhuma quadra encontrada"}),s.jsx("div",{className:"text-text-muted",children:"Cadastre suas quadras para comear a usar a agenda."})]}),s.jsx(Ee,{asChild:!0,className:"w-full sm:w-auto",children:s.jsxs(kW,{to:"/quadras",children:[s.jsx("span",{className:"hidden sm:inline",children:"Ir para Cadastros  Quadras"}),s.jsx("span",{className:"sm:hidden",children:"Adicionar"})]})})]}),_e.length>0&&(()=>{const V=typeof window<"u"&&window.innerWidth<768,ee=V?[_e[ve%_e.length]]:ft?[ft]:_e,oe=V?ee[0]:ft,ye=(()=>{if(oe&&pe[oe]){const ie=pe[oe],ce=ie.hora_inicio||`${Yt}:00:00`,he=ie.hora_fim||`${ot}:00:00`,[Ke]=String(ce).split(":").map(Number),[rt]=String(he).split(":").map(Number);return{start:Ke||Yt,end:rt||ot}}return{start:Yt,end:ot}})(),ke=Array.from({length:Math.max(0,ye.end-ye.start)},(ie,ce)=>ye.start+ce),Me=Math.max(0,ye.end-ye.start)*(60/_n)*os;return s.jsx(s.Fragment,{children:s.jsx(lr.div,{variants:p?void 0:M7,className:Ot("flex-1 overflow-auto bg-surface fx-scroll",V?"":"rounded-lg border border-border"),ref:Ye,children:s.jsxs("div",{className:Ot("grid",!V&&"mx-auto"),style:{gridTemplateColumns:V?"60px 1fr":ee.length===1?"120px 760px":ee.length===2?"120px repeat(2, 520px)":`120px repeat(${ee.length}, 1fr)`,width:V?"100%":ee.length<=2?"fit-content":void 0,columnGap:V?"4px":"16px"},children:[s.jsxs("div",{className:"sticky left-0 bg-surface z-20",children:[s.jsx("div",{className:"sticky top-0 z-20 h-14 border-b border-r border-border bg-surface flex items-center justify-center px-2",children:s.jsxs(Mx,{children:[s.jsx(Rx,{asChild:!0,children:s.jsx(Ee,{size:"sm",variant:"ghost",className:"hover:bg-surface-2/50 text-lg font-semibold",children:vs(f,new Date)?"Hoje":Rr(f,"EEEE",{locale:Zu})})}),s.jsxs(Dg,{align:"center",children:[s.jsx(Pc,{onClick:()=>h(new Date),children:"Hoje"}),s.jsx(MO,{}),(()=>{const ie=["Segunda","Tera","Quarta","Quinta","Sexta","Sbado","Domingo"],ce=Fc(f,{weekStartsOn:1,locale:Zu});return ie.map((he,Ke)=>s.jsx(Pc,{onClick:()=>h(Ii(ce,Ke)),children:he},he))})()]})]})}),ke.map(ie=>s.jsxs("div",{className:Ot("border-r border-border",ie%2===1&&"bg-surface-2/30"),children:[s.jsx("div",{className:"relative border-b border-border/80",style:{height:os},children:s.jsxs("span",{className:Ot("absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-surface rounded font-bold",V?"px-1 text-sm":"px-2 text-lg"),children:[String(ie).padStart(2,"0"),":00"]})}),s.jsx("div",{className:"relative border-b border-border/80",style:{height:os},children:s.jsxs("span",{className:Ot("absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-surface rounded font-bold",V?"px-1 text-sm":"px-2 text-lg"),children:[String(ie).padStart(2,"0"),":30"]})})]},`time-${ie}`))]}),ee.map(ie=>s.jsxs("div",{className:"relative border-r border-border",children:[!V&&_e.length>1?s.jsx("div",{className:"h-14 border-b border-border sticky top-0 bg-surface z-10 flex items-center justify-center gap-2 px-3 overflow-x-auto",children:_e.map(ce=>s.jsxs("button",{onClick:()=>dt(ce),className:Ot("px-4 py-2 rounded-lg font-semibold text-base transition-all duration-200 whitespace-nowrap flex items-center gap-2.5 flex-shrink-0",ft===ce?"bg-surface-2 text-text-primary border-2 border-brand/60":ce===ie?"bg-surface-2/50 text-text-primary hover:bg-surface-2":"hover:bg-surface-2/60 text-text-muted hover:text-text-primary"),children:[s.jsx("span",{className:Ot("inline-block w-2.5 h-2.5 rounded-full shadow-sm",ft===ce&&"ring-2 ring-brand/40"),style:{backgroundColor:gf(ce)}}),s.jsx("span",{className:"tracking-tight font-bold",children:ce})]},ce))}):s.jsx("div",{className:"h-14 border-b border-border sticky top-0 bg-surface z-10 flex items-center justify-center",children:V&&_e.length>1?s.jsxs(Mx,{children:[s.jsx(Rx,{asChild:!0,children:s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-surface-2 transition-colors",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:gf(ie)}}),s.jsx("span",{className:"font-semibold text-lg tracking-tight",children:ie}),s.jsx(J2,{className:"h-4 w-4 text-text-muted"})]})}),s.jsx(Dg,{align:"center",className:"w-56",children:_e.map((ce,he)=>s.jsxs(Pc,{onClick:()=>ut(he),className:Ot("flex items-center gap-2",ce===ie&&"bg-surface-2"),children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:gf(ce)}}),s.jsx("span",{className:"font-semibold",children:ce}),ce===ie&&s.jsx("span",{className:"ml-auto text-brand",children:""})]},ce))})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:gf(ie),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"}}),s.jsx("span",{className:"font-semibold text-lg tracking-tight",children:ie})]})}),s.jsxs("div",{className:"relative",style:{height:Me},children:[(Y.scheduled||Y.canceledOnly)&&(()=>{const ce=ye.start*60,he=ye.end*60,Ke=(()=>{const ct=pe[ie]?.hora_inicio,sr=pe[ie]?.hora_fim,[dr,Ht]=String(ct||`${ye.start}:00:00`).split(":").map(Number),[Br,vn]=String(sr||`${ye.end}:00:00`).split(":").map(Number);return{start:(dr||0)*60+(Ht||0),end:(Br||0)*60+(vn||0)}})(),rt=Math.max(Ke.start,ce),Ge=Math.min(Ke.end,he),$e=Math.max(0,Math.floor((rt-ce)/_n)),bt=Math.max($e,Math.ceil((Ge-ce)/_n)),vt=Math.max(0,(he-ce)/_n),ht=$e*os,tr=Math.min(vt,Math.max(0,bt-$e)),Gt=Math.max(0,(vt-bt)*os);return s.jsxs(s.Fragment,{children:[ht>0&&s.jsx("div",{style:{height:ht}}),Array.from({length:tr},(ct,sr)=>{const dr=$e+sr,Br=(Math.floor(dr/(60/_n))+Math.floor(ce/60))%2===1;return s.jsx("div",{className:Ot("border-b border-border/80",Br&&"bg-surface-2/30"),style:{height:os}},`base-${ie}-slot-${dr}`)}),Gt>0&&s.jsx("div",{style:{height:Gt}})]})})(),(Y.scheduled||Y.canceledOnly)&&te.filter(ce=>ce.court===ie).map(ce=>s.jsx(Lt,{booking:ce,courtGridStart:ye.start*60,courtGridEnd:ye.end*60},ce.id)),Y.available&&(()=>{const ce=(()=>{const ht=pe[ie]?.hora_inicio;if(!ht)return Yt*60;const[tr,Gt]=String(ht).split(":").map(Number);return tr*60+(Gt||0)})(),he=(()=>{const ht=pe[ie]?.hora_fim;if(!ht)return ot*60;const[tr,Gt]=String(ht).split(":").map(Number);return tr*60+(Gt||0)})(),Ke=ht=>Wu(ht)*60+Vu(ht),rt=Rr(f,"yyyy-MM-dd"),Ge=m.filter(ht=>ht.court===ie&&Rr(ht.start,"yyyy-MM-dd")===rt&&ht.status!=="canceled").map(ht=>[Ke(ht.start),Ke(ht.end)]).sort((ht,tr)=>ht[0]-tr[0]),$e=[];let bt=ce;for(const[ht,tr]of Ge)ht>bt&&$e.push([bt,ht]),bt=Math.max(bt,tr);bt<he&&$e.push([bt,he]);const vt=({startM:ht,endM:tr})=>{const[Gt,ct]=v.useState(null),sr=ye.start*60,dr=Math.floor((ht-sr)/_n),Ht=Math.max(1,Math.ceil((tr-ht)/_n)),Br=dr+Ht,vn=dr*os-1,Da=(Br-dr)*os+2,It=`${String(Math.floor(ht/60)).padStart(2,"0")}:${String(ht%60).padStart(2,"0")}`,Zn=`${String(Math.floor(tr/60)).padStart(2,"0")}:${String(tr%60).padStart(2,"0")}`;return s.jsxs("div",{className:Ot("absolute left-2 right-2 rounded-md border-2 border-dashed text-sm z-0 cursor-pointer","border-[#10B981]","bg-transparent hover:border-[#10B981]/80 hover:shadow-sm"),style:{top:`${vn}px`,height:`${Da}px`},onMouseMove:Kr=>{const $i=Kr.currentTarget.getBoundingClientRect(),kl=Math.min(Math.max(0,Kr.clientY-$i.top),$i.height);let nn=Math.floor(kl/os);nn=Math.max(0,Math.min(nn,Ht-1)),ct(nn)},onMouseLeave:()=>ct(null),onClick:Kr=>{const $i=Kr.currentTarget.getBoundingClientRect(),kl=Math.min(Math.max(0,Kr.clientY-$i.top),$i.height),nn=Math.floor(kl/os);let $n=ht+nn*_n;$n=Math.max(ht,Math.min($n,tr-_n));const fa=(()=>m.filter(jn=>jn.court===ie&&Rr(jn.start,"yyyy-MM-dd")===rt).map(jn=>Wu(jn.start)*60+Vu(jn.start)).filter(jn=>jn>$n).sort((jn,Ua)=>jn-Ua)[0])(),ha=typeof fa=="number"?fa:he;let Fi=Math.min($n+60,ha);if(Fi-$n<30){const ma=ha-30;ma>=ht?($n=Math.max(ht,Math.min($n,ma)),Fi=ha):($n=ht,Fi=Math.min(ha,tr))}b(null);{const ma=Ue||[],jn=ma.includes(ie)?ie:ma[0]||"";mt({court:jn,date:f,startMinutes:$n,endMinutes:Fi})}try{lastNonEmptySelectionRef.current=[],setChipsSnapshot([]),sessionStorage.removeItem(persistLastKey),sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt")}catch{}X()},title:`Livre: ${It}${Zn}`,children:[Gt!==null&&s.jsx("div",{className:"pointer-events-none absolute left-[6px] right-[6px] rounded-md border border-white/10 bg-white/5",style:{top:`${Gt*os}px`,height:`${os}px`}}),s.jsxs("div",{className:"h-full px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-[#10B981]",children:"Livre"}),s.jsxs("span",{className:"text-text-muted",children:[It,"",Zn]})]})]})};return $e.map(([ht,tr],Gt)=>s.jsx(vt,{startM:ht,endM:tr},`free-${ie}-${Gt}`))})()]})]},ie))]})})})})()]}),s.jsx(ir,{})]})}function R7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R7(Object(r),!0).forEach(function(n){S7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ks(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var $7=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),vA=function(){return Math.random().toString(36).substring(7).split("").join(".")},F7={INIT:"@@redux/INIT"+vA(),REPLACE:"@@redux/REPLACE"+vA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+vA()}};function gHe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Yee(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ks(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ks(1));return r(Yee)(e,t)}if(typeof e!="function")throw new Error(ks(2));var a=e,i=t,o=[],l=o,c=!1;function u(){l===o&&(l=o.slice())}function d(){if(c)throw new Error(ks(3));return i}function f(p){if(typeof p!="function")throw new Error(ks(4));if(c)throw new Error(ks(5));var y=!0;return u(),l.push(p),function(){if(y){if(c)throw new Error(ks(6));y=!1,u();var b=l.indexOf(p);l.splice(b,1),o=null}}}function h(p){if(!gHe(p))throw new Error(ks(7));if(typeof p.type>"u")throw new Error(ks(8));if(c)throw new Error(ks(9));try{c=!0,i=a(i,p)}finally{c=!1}for(var y=o=l,x=0;x<y.length;x++){var b=y[x];b()}return p}function m(p){if(typeof p!="function")throw new Error(ks(10));a=p,h({type:F7.REPLACE})}function g(){var p,y=f;return p={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(ks(11));function w(){b.next&&b.next(d())}w();var S=y(w);return{unsubscribe:S}}},p[$7]=function(){return this},p}return h({type:F7.INIT}),n={dispatch:h,subscribe:f,getState:d,replaceReducer:m},n[$7]=g,n}function B7(e,t){return function(){return t(e.apply(this,arguments))}}function z7(e,t){if(typeof e=="function")return B7(e,t);if(typeof e!="object"||e===null)throw new Error(ks(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=B7(a,t))}return r}function Xee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function vHe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(ks(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=Xee.apply(void 0,l)(a.dispatch),L7(L7({},a),{},{dispatch:i})}}}var Jee=le.createContext(null);function yHe(e){e()}var Qee=yHe,xHe=function(t){return Qee=t},bHe=function(){return Qee};function wHe(){var e=bHe(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var q7={notify:function(){},get:function(){return[]}};function Zee(e,t){var r,n=q7;function a(f){return c(),n.subscribe(f)}function i(){n.notify()}function o(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=wHe())}function u(){r&&(r(),r=void 0,n.clear(),n=q7)}var d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return d}var ete=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect;function _He(e){var t=e.store,r=e.context,n=e.children,a=v.useMemo(function(){var l=Zee(t);return{store:t,subscription:l}},[t]),i=v.useMemo(function(){return t.getState()},[t]);ete(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,i]);var o=r||Jee;return le.createElement(o.Provider,{value:a},n)}var tte={exports:{}},la={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=typeof Symbol=="function"&&Symbol.for,K4=vo?Symbol.for("react.element"):60103,Y4=vo?Symbol.for("react.portal"):60106,FN=vo?Symbol.for("react.fragment"):60107,BN=vo?Symbol.for("react.strict_mode"):60108,zN=vo?Symbol.for("react.profiler"):60114,qN=vo?Symbol.for("react.provider"):60109,UN=vo?Symbol.for("react.context"):60110,X4=vo?Symbol.for("react.async_mode"):60111,WN=vo?Symbol.for("react.concurrent_mode"):60111,VN=vo?Symbol.for("react.forward_ref"):60112,HN=vo?Symbol.for("react.suspense"):60113,SHe=vo?Symbol.for("react.suspense_list"):60120,GN=vo?Symbol.for("react.memo"):60115,KN=vo?Symbol.for("react.lazy"):60116,jHe=vo?Symbol.for("react.block"):60121,NHe=vo?Symbol.for("react.fundamental"):60117,CHe=vo?Symbol.for("react.responder"):60118,AHe=vo?Symbol.for("react.scope"):60119;function El(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case K4:switch(e=e.type,e){case X4:case WN:case FN:case zN:case BN:case HN:return e;default:switch(e=e&&e.$$typeof,e){case UN:case VN:case KN:case GN:case qN:return e;default:return t}}case Y4:return t}}}function rte(e){return El(e)===WN}la.AsyncMode=X4;la.ConcurrentMode=WN;la.ContextConsumer=UN;la.ContextProvider=qN;la.Element=K4;la.ForwardRef=VN;la.Fragment=FN;la.Lazy=KN;la.Memo=GN;la.Portal=Y4;la.Profiler=zN;la.StrictMode=BN;la.Suspense=HN;la.isAsyncMode=function(e){return rte(e)||El(e)===X4};la.isConcurrentMode=rte;la.isContextConsumer=function(e){return El(e)===UN};la.isContextProvider=function(e){return El(e)===qN};la.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===K4};la.isForwardRef=function(e){return El(e)===VN};la.isFragment=function(e){return El(e)===FN};la.isLazy=function(e){return El(e)===KN};la.isMemo=function(e){return El(e)===GN};la.isPortal=function(e){return El(e)===Y4};la.isProfiler=function(e){return El(e)===zN};la.isStrictMode=function(e){return El(e)===BN};la.isSuspense=function(e){return El(e)===HN};la.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===FN||e===WN||e===zN||e===BN||e===HN||e===SHe||typeof e=="object"&&e!==null&&(e.$$typeof===KN||e.$$typeof===GN||e.$$typeof===qN||e.$$typeof===UN||e.$$typeof===VN||e.$$typeof===NHe||e.$$typeof===CHe||e.$$typeof===AHe||e.$$typeof===jHe)};la.typeOf=El;tte.exports=la;var PHe=tte.exports,J4=PHe,EHe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},kHe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},OHe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nte={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Q4={};Q4[J4.ForwardRef]=OHe;Q4[J4.Memo]=nte;function U7(e){return J4.isMemo(e)?nte:Q4[e.$$typeof]||EHe}var THe=Object.defineProperty,IHe=Object.getOwnPropertyNames,W7=Object.getOwnPropertySymbols,DHe=Object.getOwnPropertyDescriptor,MHe=Object.getPrototypeOf,V7=Object.prototype;function ate(e,t,r){if(typeof t!="string"){if(V7){var n=MHe(t);n&&n!==V7&&ate(e,n,r)}var a=IHe(t);W7&&(a=a.concat(W7(t)));for(var i=U7(e),o=U7(t),l=0;l<a.length;++l){var c=a[l];if(!kHe[c]&&!(r&&r[c])&&!(o&&o[c])&&!(i&&i[c])){var u=DHe(t,c);try{THe(e,c,u)}catch{}}}}return e}var RHe=ate;const H7=zn(RHe);var ite={exports:{}},ja={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=60103,XN=60106,a1=60107,i1=60108,o1=60114,s1=60109,l1=60110,c1=60112,u1=60113,Z4=60120,d1=60115,f1=60116,ote=60121,ste=60122,lte=60117,cte=60129,ute=60131;if(typeof Symbol=="function"&&Symbol.for){var So=Symbol.for;YN=So("react.element"),XN=So("react.portal"),a1=So("react.fragment"),i1=So("react.strict_mode"),o1=So("react.profiler"),s1=So("react.provider"),l1=So("react.context"),c1=So("react.forward_ref"),u1=So("react.suspense"),Z4=So("react.suspense_list"),d1=So("react.memo"),f1=So("react.lazy"),ote=So("react.block"),ste=So("react.server.block"),lte=So("react.fundamental"),cte=So("react.debug_trace_mode"),ute=So("react.legacy_hidden")}function Gc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case YN:switch(e=e.type,e){case a1:case o1:case i1:case u1:case Z4:return e;default:switch(e=e&&e.$$typeof,e){case l1:case c1:case f1:case d1:case s1:return e;default:return t}}case XN:return t}}}var LHe=s1,$He=YN,FHe=c1,BHe=a1,zHe=f1,qHe=d1,UHe=XN,WHe=o1,VHe=i1,HHe=u1;ja.ContextConsumer=l1;ja.ContextProvider=LHe;ja.Element=$He;ja.ForwardRef=FHe;ja.Fragment=BHe;ja.Lazy=zHe;ja.Memo=qHe;ja.Portal=UHe;ja.Profiler=WHe;ja.StrictMode=VHe;ja.Suspense=HHe;ja.isAsyncMode=function(){return!1};ja.isConcurrentMode=function(){return!1};ja.isContextConsumer=function(e){return Gc(e)===l1};ja.isContextProvider=function(e){return Gc(e)===s1};ja.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===YN};ja.isForwardRef=function(e){return Gc(e)===c1};ja.isFragment=function(e){return Gc(e)===a1};ja.isLazy=function(e){return Gc(e)===f1};ja.isMemo=function(e){return Gc(e)===d1};ja.isPortal=function(e){return Gc(e)===XN};ja.isProfiler=function(e){return Gc(e)===o1};ja.isStrictMode=function(e){return Gc(e)===i1};ja.isSuspense=function(e){return Gc(e)===u1};ja.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===a1||e===o1||e===cte||e===i1||e===u1||e===Z4||e===ute||typeof e=="object"&&e!==null&&(e.$$typeof===f1||e.$$typeof===d1||e.$$typeof===s1||e.$$typeof===l1||e.$$typeof===c1||e.$$typeof===lte||e.$$typeof===ote||e[0]===ste)};ja.typeOf=Gc;ite.exports=ja;var GHe=ite.exports,KHe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],YHe=["reactReduxForwardedRef"],XHe=[],JHe=[null,null];function QHe(e,t){var r=e[1];return[t.payload,r+1]}function G7(e,t,r){ete(function(){return e.apply(void 0,t)},r)}function ZHe(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function eGe(e,t,r,n,a,i,o,l,c,u){if(e){var d=!1,f=null,h=function(){if(!d){var p=t.getState(),y,x;try{y=n(p,a.current)}catch(b){x=b,f=b}x||(f=null),y===i.current?o.current||c():(i.current=y,l.current=y,o.current=!0,u({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=h,r.trySubscribe(),h();var m=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return m}}var tGe=function(){return[null,0]};function rGe(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(w){return"ConnectAdvanced("+w+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,l=r.renderCountProp,c=l===void 0?void 0:l,u=r.shouldHandleStateChanges,d=u===void 0?!0:u,f=r.storeKey,h=f===void 0?"store":f;r.withRef;var m=r.forwardRef,g=m===void 0?!1:m,p=r.context,y=p===void 0?Jee:p,x=Y_(r,KHe),b=y;return function(S){var j=S.displayName||S.name||"Component",A=a(j),P=Fr({},x,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:A,wrappedComponentName:j,WrappedComponent:S}),C=x.pure;function E(M){return e(M.dispatch,P)}var R=C?v.useMemo:function(M){return M()};function k(M){var z=v.useMemo(function(){var it=M.reactReduxForwardedRef,ft=Y_(M,YHe);return[M.context,it,ft]},[M]),W=z[0],U=z[1],$=z[2],G=v.useMemo(function(){return W&&W.Consumer&&GHe.isContextConsumer(le.createElement(W.Consumer,null))?W:b},[W,b]),me=v.useContext(G),de=!!M.store&&!!M.store.getState&&!!M.store.dispatch;me&&me.store;var L=de?M.store:me.store,B=v.useMemo(function(){return E(L)},[L]),X=v.useMemo(function(){if(!d)return JHe;var it=Zee(L,de?null:me.subscription),ft=it.notifyNestedSubs.bind(it);return[it,ft]},[L,de,me]),q=X[0],Y=X[1],Z=v.useMemo(function(){return de?me:Fr({},me,{subscription:q})},[de,me,q]),ge=v.useReducer(QHe,XHe,tGe),re=ge[0],Se=re[0],Ie=ge[1];if(Se&&Se.error)throw Se.error;var pe=v.useRef(),Ue=v.useRef($),_e=v.useRef(),ue=v.useRef(!1),Ft=R(function(){return _e.current&&$===Ue.current?_e.current:B(L.getState(),$)},[L,Se,$]);G7(ZHe,[Ue,pe,ue,$,Ft,_e,Y]),G7(eGe,[d,L,q,B,Ue,pe,ue,_e,Y,Ie],[L,q,B]);var qt=v.useMemo(function(){return le.createElement(S,Fr({},Ft,{ref:U}))},[U,S,Ft]),zt=v.useMemo(function(){return d?le.createElement(G.Provider,{value:Z},qt):qt},[G,qt,Z]);return zt}var T=C?le.memo(k):k;if(T.WrappedComponent=S,T.displayName=k.displayName=A,g){var I=le.forwardRef(function(z,W){return le.createElement(T,Fr({},z,{reactReduxForwardedRef:W}))});return I.displayName=A,I.WrappedComponent=S,H7(I,S)}return H7(T,S)}}function K7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function yA(e,t){if(K7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!K7(e[r[a]],t[r[a]]))return!1;return!0}function nGe(e,t){var r={},n=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var a in e)n(a);return r}function eD(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function Y7(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function dte(e,t){return function(n,a){a.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=Y7(e);var u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=Y7(u),u=i(l,c)),u},i}}function aGe(e){return typeof e=="function"?dte(e):void 0}function iGe(e){return e?void 0:eD(function(t){return{dispatch:t}})}function oGe(e){return e&&typeof e=="object"?eD(function(t){return nGe(e,t)}):void 0}const sGe=[aGe,iGe,oGe];function lGe(e){return typeof e=="function"?dte(e):void 0}function cGe(e){return e?void 0:eD(function(){return{}})}const uGe=[lGe,cGe];function dGe(e,t,r){return Fr({},r,e,t)}function fGe(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,l;return function(u,d,f){var h=e(u,d,f);return o?(!a||!i(h,l))&&(l=h):(o=!0,l=h),l}}}function hGe(e){return typeof e=="function"?fGe(e):void 0}function mGe(e){return e?void 0:function(){return dGe}}const pGe=[hGe,mGe];var gGe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function vGe(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function yGe(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,u,d,f,h,m;function g(w,S){return u=w,d=S,f=e(u,d),h=t(n,d),m=r(f,h,d),c=!0,m}function p(){return f=e(u,d),t.dependsOnOwnProps&&(h=t(n,d)),m=r(f,h,d),m}function y(){return e.dependsOnOwnProps&&(f=e(u,d)),t.dependsOnOwnProps&&(h=t(n,d)),m=r(f,h,d),m}function x(){var w=e(u,d),S=!l(w,f);return f=w,S&&(m=r(f,h,d)),m}function b(w,S){var j=!o(S,d),A=!i(w,u,S,d);return u=w,d=S,j&&A?p():j?y():A?x():m}return function(S,j){return c?b(S,j):g(S,j)}}function xGe(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=Y_(t,gGe),o=r(e,i),l=n(e,i),c=a(e,i),u=i.pure?yGe:vGe;return u(o,l,c,e,i)}var bGe=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function xA(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function wGe(e,t){return e===t}function _Ge(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?rGe:r,a=t.mapStateToPropsFactories,i=a===void 0?uGe:a,o=t.mapDispatchToPropsFactories,l=o===void 0?sGe:o,c=t.mergePropsFactories,u=c===void 0?pGe:c,d=t.selectorFactory,f=d===void 0?xGe:d;return function(m,g,p,y){y===void 0&&(y={});var x=y,b=x.pure,w=b===void 0?!0:b,S=x.areStatesEqual,j=S===void 0?wGe:S,A=x.areOwnPropsEqual,P=A===void 0?yA:A,C=x.areStatePropsEqual,E=C===void 0?yA:C,R=x.areMergedPropsEqual,k=R===void 0?yA:R,T=Y_(x,bGe),I=xA(m,i,"mapStateToProps"),M=xA(g,l,"mapDispatchToProps"),z=xA(p,u,"mergeProps");return n(f,Fr({methodName:"connect",getDisplayName:function(U){return"Connect("+U+")"},shouldHandleStateChanges:!!m,initMapStateToProps:I,initMapDispatchToProps:M,initMergeProps:z,pure:w,areStatesEqual:j,areOwnPropsEqual:P,areStatePropsEqual:E,areMergedPropsEqual:k},T))}}const fte=_Ge();xHe(gh.unstable_batchedUpdates);function SGe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function hte(e,t){var r=v.useState(function(){return{inputs:t,result:e()}})[0],n=v.useRef(!0),a=v.useRef(r),i=n.current||!!(t&&a.current.inputs&&SGe(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return v.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function jGe(e,t){return hte(function(){return e},t)}var Wn=hte,kr=jGe,Oc=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,l=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:l,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},tD=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},X7=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},NGe=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},bA={top:0,right:0,bottom:0,left:0},rD=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?bA:n,i=t.border,o=i===void 0?bA:i,l=t.padding,c=l===void 0?bA:l,u=Oc(tD(r,a)),d=Oc(X7(r,o)),f=Oc(X7(d,c));return{marginBox:u,borderBox:Oc(r),paddingBox:d,contentBox:f,margin:a,border:o,padding:c}},zl=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&oh(!1),a},CGe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},PS=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=NGe(n,r);return rD({borderBox:l,border:a,margin:i,padding:o})},ES=function(t,r){return r===void 0&&(r=CGe()),PS(t,r)},mte=function(t,r){var n={top:zl(r.marginTop),right:zl(r.marginRight),bottom:zl(r.marginBottom),left:zl(r.marginLeft)},a={top:zl(r.paddingTop),right:zl(r.paddingRight),bottom:zl(r.paddingBottom),left:zl(r.paddingLeft)},i={top:zl(r.borderTopWidth),right:zl(r.borderRightWidth),bottom:zl(r.borderBottomWidth),left:zl(r.borderLeftWidth)};return rD({borderBox:t,margin:n,padding:a,border:i})},pte=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return mte(r,n)},J7=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function AGe(e,t){return!!(e===t||J7(e)&&J7(t))}function PGe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!AGe(e[r],t[r]))return!1;return!0}function fo(e,t){t===void 0&&(t=PGe);var r,n=[],a,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&r===this&&t(l,n)||(a=e.apply(this,l),i=!0,r=this,n=l),a}return o}var EGe=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};const ub=EGe;function gte(e,t){}gte.bind(null,"warn");gte.bind(null,"error");function Gf(){}function kGe(e,t){return Fr({},e,{},t)}function Jl(e,t,r){var n=t.map(function(a){var i=kGe(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var OGe="Invariant failed";function kS(e){this.message=e}kS.prototype.toString=function(){return this.message};function rr(e,t){if(!e)throw new kS(OGe)}var TGe=function(e){wX(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Gf,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=l.error;u instanceof kS&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Jl(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof kS){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(le.Component),IGe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,OS=function(t){return t+1},DGe=function(t){return`
  You have lifted an item in position `+OS(t.source.index)+`
`},vte=function(t,r){var n=t.droppableId===r.droppableId,a=OS(t.index),i=OS(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},yte=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},MGe=function(t){var r=t.destination;if(r)return vte(t.source,r);var n=t.combine;return n?yte(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Q7=function(t){return`
  The item has returned to its starting position
  of `+OS(t.index)+`
`},RGe=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Q7(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+vte(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+yte(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Q7(t.source)+`
  `},y2={dragHandleUsageInstructions:IGe,onDragStart:DGe,onDragUpdate:MGe,onDragEnd:RGe},mo={x:0,y:0},Po=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},pl=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Kf=function(t,r){return t.x===r.x&&t.y===r.y},oy=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},tp=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},db=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Z7=function(t,r){return Math.min.apply(Math,r.map(function(n){return db(t,n)}))},xte=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},LGe=function(e,t){var r=Oc({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},h1=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ez=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},$Ge={top:0,right:0,bottom:0,left:0},FGe=function(t,r){return r?h1(t,r.scroll.diff.displacement):t},BGe=function(t,r,n){if(n&&n.increasedBy){var a;return Fr({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},zGe=function(t,r){return r&&r.shouldClipSubject?LGe(r.pageMarginBox,t):Oc(t)},Pv=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=FGe(t.marginBox,a),o=BGe(i,n,r),l=zGe(o,a);return{page:t,withPlaceholder:r,active:l}},nD=function(e,t){e.frame||rr(!1);var r=e.frame,n=pl(t,r.scroll.initial),a=oy(n),i=Fr({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=Pv({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=Fr({},e,{frame:i,subject:o});return l};function TS(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function aD(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Eh(e,t){if(e.find)return e.find(t);var r=aD(e,t);if(r!==-1)return e[r]}function bte(e){return Array.prototype.slice.call(e)}var wte=fo(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),_te=fo(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),JN=fo(function(e){return TS(e)}),qGe=fo(function(e){return TS(e)}),sy=fo(function(e,t){var r=qGe(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function iD(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function QN(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var ZN=fo(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),UGe=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=iD(i);if(!o)return null;function l(p){var y={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return Fr({},i,{at:y})}var c=i.displaced.all,u=c.length?c[0]:null;if(t)return u?l(u):null;var d=ZN(r,a);if(!u){if(!d.length)return null;var f=d[d.length-1];return l(f.descriptor.id)}var h=aD(d,function(p){return p.descriptor.id===u});h===-1&&rr(!1);var m=h-1;if(m<0)return null;var g=d[m];return l(g.descriptor.id)},ly=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ste={point:mo,value:0},fb={invisible:{},visible:{},all:[]},WGe={displaced:fb,displacedBy:Ste,at:null},ec=function(e,t){return function(r){return e<=r&&r<=t}},jte=function(e){var t=ec(e.top,e.bottom),r=ec(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),l=i&&o;if(l)return!0;var c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right,d=c&&u;if(d)return!0;var f=c&&o||u&&i;return f}},VGe=function(e){var t=ec(e.top,e.bottom),r=ec(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},oD={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Nte={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},HGe=function(e){return function(t){var r=ec(t.top,t.bottom),n=ec(t.left,t.right);return function(a){return e===oD?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},GGe=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:mo;return h1(t,n)},KGe=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},YGe=function(t,r,n){return n(r)(t)},sD=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=i?GGe(r,n):r;return KGe(l,n,o)&&YGe(l,a,o)},XGe=function(t){return sD(Fr({},t,{isVisibleThroughFrameFn:jte}))},Cte=function(t){return sD(Fr({},t,{isVisibleThroughFrameFn:VGe}))},JGe=function(t){return sD(Fr({},t,{isVisibleThroughFrameFn:HGe(t.destination.axis)}))},QGe=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function ZGe(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Oc(tD(r,n))}function hb(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,u){var d=ZGe(u,n),f=u.descriptor.id;c.all.push(f);var h=XGe({target:d,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var m=QGe(f,o,i),g={draggableId:f,shouldAnimate:m};return c.visible[f]=g,c},{all:[],visible:{},invisible:{}})}function eKe(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function tz(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=eKe(t,{inHomeList:r});return{displaced:fb,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function IS(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,u=ly(t,n);if(l==null)return tz({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var d=Eh(r,function(p){return p.descriptor.index===l});if(!d)return tz({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var f=ZN(t,r),h=r.indexOf(d),m=f.slice(h),g=hb({afterDragging:m,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function uh(e,t){return!!t.effected[e]}var tKe=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,l=n[o],c=l.descriptor.index,u=uh(o,i);return u?t?c:c-1:t?c+1:c},rKe=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return o<l||o>u?null:o},nKe=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,u=e.afterCritical,d=l.at;if(d||rr(!1),d.type==="REORDER"){var f=rKe({isMovingForward:t,isInHomeList:r,location:d.destination,insideDestination:o});return f==null?null:IS({draggable:n,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})}var h=tKe({isMovingForward:t,destination:i,displaced:l.displaced,draggables:a,combine:d.combine,afterCritical:u});return h==null?null:IS({draggable:n,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},aKe=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return uh(n,r)?i?mo:oy(a.point):i?a.point:mo},iKe=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=QN(r);a||rr(!1);var i=a.draggableId,o=n[i].page.borderBox.center,l=aKe({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Po(o,l)},Ate=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},oKe=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},lD=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},rz=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return tp(r.line,n.marginBox[r.end]+Ate(r,a),lD(r,n.marginBox,a))},nz=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return tp(r.line,n.marginBox[r.start]-oKe(r,a),lD(r,n.marginBox,a))},sKe=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return tp(r.line,n.contentBox[r.start]+Ate(r,a),lD(r,n.contentBox,a))},lKe=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=sy(a.descriptor.id,n),l=r.page,c=a.axis;if(!o.length)return sKe({axis:c,moveInto:a.page,isMoving:l});var u=t.displaced,d=t.displacedBy,f=u.all[0];if(f){var h=n[f];if(uh(f,i))return nz({axis:c,moveRelativeTo:h.page,isMoving:l});var m=PS(h.page,d.point);return nz({axis:c,moveRelativeTo:m,isMoving:l})}var g=o[o.length-1];if(g.descriptor.id===r.descriptor.id)return l.borderBox.center;if(uh(g.descriptor.id,i)){var p=PS(g.page,oy(i.displacedBy.point));return rz({axis:c,moveRelativeTo:p,isMoving:l})}return rz({axis:c,moveRelativeTo:g.page,isMoving:l})},zO=function(e,t){var r=e.frame;return r?Po(t,r.scroll.diff.displacement):t},cKe=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,l=n.page.borderBox.center,c=r.at;return!a||!c?l:c.type==="REORDER"?lKe({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):iKe({impact:r,draggables:i,afterCritical:o})},eC=function(e){var t=cKe(e),r=e.droppable,n=r?zO(r,t):t;return n},Pte=function(e,t){var r=pl(t,e.scroll.initial),n=oy(r),a=Oc({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function az(e,t){return e.map(function(r){return t[r]})}function uKe(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var dKe=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=Pte(r,Po(r.scroll.current,i)),l=n.frame?nD(n,Po(n.frame.scroll.current,i)):n,c=t.displaced,u=hb({afterDragging:az(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),d=hb({afterDragging:az(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),f={},h={},m=[c,u,d];c.all.forEach(function(p){var y=uKe(p,m);if(y){h[p]=y;return}f[p]=!0});var g=Fr({},t,{displaced:{all:c.all,invisible:f,visible:h}});return g},fKe=function(e,t){return Po(e.scroll.diff.displacement,t)},cD=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=fKe(n,t),i=pl(a,r.page.borderBox.center);return Po(r.client.borderBox.center,i)},Ete=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=pl(n,t.page.borderBox.center),u=h1(t.page.borderBox,c),d={target:u,destination:r,withDroppableDisplacement:i,viewport:a};return l?JGe(d):Cte(d)},hKe=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var d=sy(n.descriptor.id,a),f=ly(r,n),h=UGe({isMovingForward:t,draggable:r,destination:n,insideDestination:d,previousImpact:i})||nKe({isMovingForward:t,isInHomeList:f,draggable:r,draggables:a,destination:n,insideDestination:d,previousImpact:i,viewport:o,afterCritical:u});if(!h)return null;var m=eC({impact:h,draggable:r,droppable:n,draggables:a,afterCritical:u}),g=Ete({draggable:r,destination:n,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var p=cD({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:p,impact:h,scrollJumpRequest:null}}var y=pl(m,l),x=dKe({impact:h,viewport:o,destination:n,draggables:a,maxScrollChange:y});return{clientSelection:c,impact:x,scrollJumpRequest:y}},ls=function(t){var r=t.subject.active;return r||rr(!1),r},mKe=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var l=n.axis,c=ec(o[l.start],o[l.end]),u=JN(a).filter(function(f){return f!==n}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return jte(i.frame)(ls(f))}).filter(function(f){var h=ls(f);return t?o[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(f){var h=ls(f),m=ec(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(f,h){var m=ls(f)[l.crossAxisStart],g=ls(h)[l.crossAxisStart];return t?m-g:g-m}).filter(function(f,h,m){return ls(f)[l.crossAxisStart]===ls(m[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=ec(ls(f)[l.start],ls(f)[l.end]);return h(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return ls(f)[l.start]-ls(h)[l.start]})[0]:u.sort(function(f,h){var m=Z7(r,ez(ls(f))),g=Z7(r,ez(ls(h)));return m!==g?m-g:ls(f)[l.start]-ls(h)[l.start]})[0]},iz=function(t,r){var n=t.page.borderBox.center;return uh(t.descriptor.id,r)?pl(n,r.displacedBy.point):n},pKe=function(t,r){var n=t.page.borderBox;return uh(t.descriptor.id,r)?h1(n,oy(r.displacedBy.point)):n},gKe=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(l){return Cte({target:pKe(l,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var u=db(t,zO(n,iz(l,i))),d=db(t,zO(n,iz(c,i)));return u<d?-1:d<u?1:l.descriptor.index-c.descriptor.index});return o[0]||null},m1=fo(function(t,r){var n=r[t.line];return{value:n,point:tp(t.line,n)}}),vKe=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return tp(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=sy(t.descriptor.id,n),l=o.reduce(function(d,f){return d+f.client.marginBox[a.size]},0),c=l+r[a.line],u=c-i;return u<=0?null:tp(a.line,u)},kte=function(t,r){return Fr({},t,{scroll:Fr({},t.scroll,{max:r})})},Ote=function(t,r,n){var a=t.frame;ly(r,t)&&rr(!1),t.subject.withPlaceholder&&rr(!1);var i=m1(t.axis,r.displaceBy).point,o=vKe(t,i,n),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=Pv({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return Fr({},t,{subject:c})}var u=o?Po(a.scroll.max,o):a.scroll.max,d=kte(a,u),f=Pv({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:d});return Fr({},t,{subject:f,frame:d})},yKe=function(t){var r=t.subject.withPlaceholder;r||rr(!1);var n=t.frame;if(!n){var a=Pv({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Fr({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||rr(!1);var o=kte(n,i),l=Pv({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return Fr({},t,{subject:l,frame:o})},xKe=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:fb,displacedBy:Ste,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},d=eC({impact:u,draggable:a,droppable:o,draggables:i,afterCritical:c}),f=ly(a,o)?o:Ote(o,a,i),h=Ete({draggable:a,destination:f,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var m=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],g=function(){var y=r.descriptor.index;return r.descriptor.id===a.descriptor.id||m?y:y+1}(),p=m1(o.axis,a.displaceBy);return IS({draggable:a,insideDestination:n,destination:o,viewport:l,displacedBy:p,last:fb,index:g})},bKe=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,u=mKe({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:l});if(!u)return null;var d=sy(u.descriptor.id,i),f=gKe({pageBorderBoxCenter:r,viewport:l,destination:u,insideDestination:d,afterCritical:c}),h=xKe({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:i,moveRelativeTo:f,insideDestination:d,viewport:l,afterCritical:c});if(!h)return null;var m=eC({impact:h,draggable:n,droppable:u,draggables:i,afterCritical:c}),g=cD({pageBorderBoxCenter:m,draggable:n,viewport:l});return{clientSelection:g,impact:h,scrollJumpRequest:null}},_l=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},wKe=function(t,r){var n=_l(t);return n?r[n]:null},_Ke=function(e){var t=e.state,r=e.type,n=wKe(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,h=t.dimensions,m=h.draggables,g=h.droppables;return c?hKe({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:o,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):bKe({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:o,draggables:m,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})};function tm(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Tte(e){var t=ec(e.top,e.bottom),r=ec(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function SKe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function jKe(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var l=o.axis,c=tp(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:db(a,c)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function NKe(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=JN(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!SKe(t,o))return!1;if(Tte(o)(t.center))return!0;var l=i.axis,c=o.center[l.crossAxisLine],u=t[l.crossAxisStart],d=t[l.crossAxisEnd],f=ec(o[l.crossAxisStart],o[l.crossAxisEnd]),h=f(u),m=f(d);return!h&&!m?!0:h?u<c:d>c});return a.length?a.length===1?a[0].descriptor.id:jKe({pageBorderBox:t,draggable:r,candidates:a}):null}var Ite=function(t,r){return Oc(h1(t,r))},CKe=function(e,t){var r=e.frame;return r?Ite(t,r.scroll.diff.value):t};function Dte(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function AKe(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var PKe=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,l=e.afterCritical,c=n.axis,u=m1(n.axis,r.displaceBy),d=u.value,f=t[c.start],h=t[c.end],m=ZN(r,a),g=Eh(m,function(y){var x=y.descriptor.id,b=y.page.borderBox.center[c.line],w=uh(x,l),S=Dte({displaced:i,id:x});return w?S?h<=b:f<b-d:S?h<=b+d:f<b}),p=AKe({draggable:r,closest:g,inHomeList:ly(r,n)});return IS({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:u,index:p})},EKe=4,kKe=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=m1(a.axis,t.displaceBy),u=c.value,d=r[l.start],f=r[l.end],h=ZN(t,i),m=Eh(h,function(p){var y=p.descriptor.id,x=p.page.borderBox,b=x[l.size],w=b/EKe,S=uh(y,o),j=Dte({displaced:n.displaced,id:y});return S?j?f>x[l.start]+w&&f<x[l.end]-w:d>x[l.start]-u+w&&d<x[l.end]-u-w:j?f>x[l.start]+u+w&&f<x[l.end]+u-w:d>x[l.start]+w&&d<x[l.end]-w});if(!m)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:a.descriptor.id}}};return g},Mte=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,l=e.afterCritical,c=Ite(r.page.borderBox,t),u=NKe({pageBorderBox:c,draggable:r,droppables:a});if(!u)return WGe;var d=a[u],f=sy(d.descriptor.id,n),h=CKe(d,c);return kKe({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:d,insideDestination:f,afterCritical:l})||PKe({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:f,last:i.displaced,viewport:o,afterCritical:l})},uD=function(e,t){var r;return Fr({},e,(r={},r[t.descriptor.id]=t,r))},OKe=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=_l(r),o=_l(n);if(!i||i===o)return a;var l=a[i];if(!l.subject.withPlaceholder)return a;var c=yKe(l);return uD(a,c)},TKe=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=OKe({previousImpact:a,impact:i,droppables:n}),l=_l(i);if(!l)return o;var c=n[l];if(ly(t,c)||c.subject.withPlaceholder)return o;var u=Ote(c,t,r);return uD(o,u)},$x=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,l=a||t.viewport,c=n||t.dimensions,u=r||t.current.client.selection,d=pl(u,t.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Po(t.initial.client.borderBoxCenter,d)},h={selection:Po(f.selection,l.scroll.current),borderBoxCenter:Po(f.borderBoxCenter,l.scroll.current),offset:Po(f.offset,l.scroll.diff.value)},m={client:f,page:h};if(t.phase==="COLLECTING")return Fr({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:m});var g=c.draggables[t.critical.draggable.id],p=i||Mte({pageOffset:h.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),y=TKe({draggable:g,impact:p,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),x=Fr({},t,{current:m,dimensions:{draggables:c.draggables,droppables:y},impact:p,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function IKe(e,t){return e.map(function(r){return t[r]})}var Rte=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,l=IKe(o.all,n),c=hb({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return Fr({},t,{displaced:c})},Lte=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,l=eC({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return cD({pageBorderBoxCenter:l,draggable:r,viewport:i})},$te=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&rr(!1);var a=t.impact,i=n||t.viewport,o=r||t.dimensions,l=o.draggables,c=o.droppables,u=l[t.critical.draggable.id],d=_l(a);d||rr(!1);var f=c[d],h=Rte({impact:a,viewport:i,destination:f,draggables:l}),m=Lte({impact:h,draggable:u,droppable:f,draggables:l,viewport:i,afterCritical:t.afterCritical});return $x({impact:h,clientSelection:m,state:t,dimensions:o,viewport:i})},DKe=function(e){return{index:e.index,droppableId:e.droppableId}},Fte=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=m1(r.axis,t.displaceBy),o=sy(r.descriptor.id,n),l=o.indexOf(t);l===-1&&rr(!1);var c=o.slice(l+1),u=c.reduce(function(m,g){return m[g.descriptor.id]=!0,m},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:u},f=hb({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:i,at:{type:"REORDER",destination:DKe(t.descriptor)}};return{impact:h,afterCritical:d}},MKe=function(e,t){return{draggables:e.draggables,droppables:uD(e.droppables,t)}},RKe=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=PS(t.client,r),i=ES(a,n),o=Fr({},t,{placeholder:Fr({},t.placeholder,{client:a}),client:a,page:i});return o},LKe=function(e){var t=e.frame;return t||rr(!1),t},$Ke=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,l=r[o],c=LKe(l),u=c.scroll.diff.value,d=Po(a,u),f=RKe({draggable:i,offset:d,initialWindowScroll:n.scroll.initial});return f})},FKe=function(e){var t=e.state,r=e.published,n=r.modified.map(function(w){var S=t.dimensions.droppables[w.droppableId],j=nD(S,w.scroll);return j}),a=Fr({},t.dimensions.droppables,{},wte(n)),i=_te($Ke({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=Fr({},t.dimensions.draggables,{},i);r.removals.forEach(function(w){delete o[w]});var l={droppables:a,draggables:o},c=_l(t.impact),u=c?l.droppables[c]:null,d=l.draggables[t.critical.draggable.id],f=l.droppables[t.critical.droppable.id],h=Fte({draggable:d,home:f,draggables:o,viewport:t.viewport}),m=h.impact,g=h.afterCritical,p=u&&u.isCombineEnabled?t.impact:m,y=Mte({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:p,viewport:t.viewport,afterCritical:g}),x=Fr({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:y,onLiftImpact:m,dimensions:l,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var b=Fr({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},qO=function(t){return t.movementMode==="SNAP"},wA=function(t,r,n){var a=MKe(t.dimensions,r);return!qO(t)||n?$x({state:t,dimensions:a}):$te({state:t,dimensions:a})};function _A(e){return e.isDragging&&e.movementMode==="SNAP"?Fr({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var oz={phase:"IDLE",completed:null,shouldFlush:!1},BKe=function(e,t){if(e===void 0&&(e=oz),t.type==="FLUSH")return Fr({},oz,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&rr(!1);var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[n.draggable.id],u=o.droppables[n.droppable.id],d={selection:a,borderBoxCenter:c.client.borderBox.center,offset:mo},f={client:d,page:{selection:Po(d.selection,i.scroll.initial),borderBoxCenter:Po(d.selection,i.scroll.initial),offset:Po(d.selection,i.scroll.diff.value)}},h=JN(o.droppables).every(function(Ie){return!Ie.isFixedOnPage}),m=Fte({draggable:c,home:u,draggables:o.draggables,viewport:i}),g=m.impact,p=m.afterCritical,y={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:o,initial:f,current:f,isWindowScrollAllowed:h,impact:g,afterCritical:p,onLiftImpact:g,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return y}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&rr(!1);var x=Fr({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||rr(!1),FKe({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;tm(e)||rr(!1);var b=t.payload.client;return Kf(b,e.current.client.selection)?e:$x({state:e,clientSelection:b,impact:qO(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return _A(e);tm(e)||rr(!1);var w=t.payload,S=w.id,j=w.newScroll,A=e.dimensions.droppables[S];if(!A)return e;var P=nD(A,j);return wA(e,P,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;tm(e)||rr(!1);var C=t.payload,E=C.id,R=C.isEnabled,k=e.dimensions.droppables[E];k||rr(!1),k.isEnabled===R&&rr(!1);var T=Fr({},k,{isEnabled:R});return wA(e,T,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;tm(e)||rr(!1);var I=t.payload,M=I.id,z=I.isCombineEnabled,W=e.dimensions.droppables[M];W||rr(!1),W.isCombineEnabled===z&&rr(!1);var U=Fr({},W,{isCombineEnabled:z});return wA(e,U,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;tm(e)||rr(!1),e.isWindowScrollAllowed||rr(!1);var $=t.payload.newScroll;if(Kf(e.viewport.scroll.current,$))return _A(e);var G=Pte(e.viewport,$);return qO(e)?$te({state:e,viewport:G}):$x({state:e,viewport:G})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!tm(e))return e;var me=t.payload.maxScroll;if(Kf(me,e.viewport.scroll.max))return e;var de=Fr({},e.viewport,{scroll:Fr({},e.viewport.scroll,{max:me})});return Fr({phase:"DRAGGING"},e,{viewport:de})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&rr(!1);var L=_Ke({state:e,type:t.type});return L?$x({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var B=t.payload.reason;e.phase!=="COLLECTING"&&rr(!1);var X=Fr({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:B});return X}if(t.type==="DROP_ANIMATE"){var q=t.payload,Y=q.completed,Z=q.dropDuration,ge=q.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||rr(!1);var re={phase:"DROP_ANIMATING",completed:Y,dropDuration:Z,newHomeClientOffset:ge,dimensions:e.dimensions};return re}if(t.type==="DROP_COMPLETE"){var Se=t.payload.completed;return{phase:"IDLE",completed:Se,shouldFlush:!1}}return e},zKe=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},qKe=function(t){return{type:"LIFT",payload:t}},UKe=function(t){return{type:"INITIAL_PUBLISH",payload:t}},WKe=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},VKe=function(){return{type:"COLLECTION_STARTING",payload:null}},HKe=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},GKe=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},KKe=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Bte=function(t){return{type:"MOVE",payload:t}},YKe=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},XKe=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},JKe=function(){return{type:"MOVE_UP",payload:null}},QKe=function(){return{type:"MOVE_DOWN",payload:null}},ZKe=function(){return{type:"MOVE_RIGHT",payload:null}},eYe=function(){return{type:"MOVE_LEFT",payload:null}},dD=function(){return{type:"FLUSH",payload:null}},tYe=function(t){return{type:"DROP_ANIMATE",payload:t}},fD=function(t){return{type:"DROP_COMPLETE",payload:t}},zte=function(t){return{type:"DROP",payload:t}},rYe=function(t){return{type:"DROP_PENDING",payload:t}},qte=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},nYe=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,l=o.id,c=o.clientSelection,u=o.movementMode,d=r();d.phase==="DROP_ANIMATING"&&n(fD({completed:d.completed})),r().phase!=="IDLE"&&rr(!1),n(dD()),n(zKe({draggableId:l,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:l,scrollOptions:f},m=e.startPublishing(h),g=m.critical,p=m.dimensions,y=m.viewport;n(UKe({critical:g,dimensions:p,clientSelection:c,movementMode:u,viewport:y}))}}}},aYe=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},hD={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},mb={opacity:{drop:0,combining:.7},scale:{drop:.75}},mD={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},qh=mD.outOfTheWay+"s "+hD.outOfTheWay,Fx={fluid:"opacity "+qh,snap:"transform "+qh+", opacity "+qh,drop:function(t){var r=t+"s "+hD.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+qh,placeholder:"height "+qh+", width "+qh+", margin "+qh},sz=function(t){return Kf(t,mo)?null:"translate("+t.x+"px, "+t.y+"px)"},UO={moveTo:sz,drop:function(t,r){var n=sz(t);return n?r?n+" scale("+mb.scale.drop+")":n:null}},WO=mD.minDropTime,Ute=mD.maxDropTime,iYe=Ute-WO,lz=1500,oYe=.6,sYe=function(e){var t=e.current,r=e.destination,n=e.reason,a=db(t,r);if(a<=0)return WO;if(a>=lz)return Ute;var i=a/lz,o=WO+iYe*i,l=n==="CANCEL"?o*oYe:o;return Number(l.toFixed(2))},lYe=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,l=n.droppables,c=_l(t),u=c?l[c]:null,d=l[r.descriptor.droppableId],f=Lte({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:u||d,viewport:a}),h=pl(f,r.client.borderBox.center);return h},cYe=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var l=Rte({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=Fr({},n,{displaced:fb});return{impact:c,didDropInsideDroppable:!0}},uYe=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(rYe({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&rr(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||rr(!1);var c=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],f=cYe({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=f.impact,m=f.didDropInsideDroppable,g=m?iD(h):null,p=m?QN(h):null,y={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:y,reason:o,mode:i.movementMode,destination:g,combine:p},b=lYe({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),w={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:h},S=!Kf(i.current.client.offset,b)||!!x.combine;if(!S){r(fD({completed:w}));return}var j=sYe({current:i.current.client.offset,destination:b,reason:o}),A={newHomeClientOffset:b,dropDuration:j,completed:w};r(tYe(A))}}}},Wte=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function dYe(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function fYe(e){var t=e.onWindowScroll;function r(){t(Wte())}var n=ub(r),a=dYe(n),i=Gf;function o(){return i!==Gf}function l(){o()&&rr(!1),i=Jl(window,[a])}function c(){o()||rr(!1),n.cancel(),i(),i=Gf}return{start:l,stop:c,isActive:o}}var hYe=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},mYe=function(e){var t=fYe({onWindowScroll:function(n){e.dispatch(YKe({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&hYe(n)&&t.stop(),r(n)}}},pYe=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},gYe=function(){var e=[],t=function(i){var o=aD(e,function(u){return u.timerId===i});o===-1&&rr(!1);var l=e.splice(o,1),c=l[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:i};e.push(l)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},vYe=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},yYe=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},xYe=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},Hy=function(t,r){r()},kw=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},SA=function(t,r,n,a){if(!t){n(a(r));return}var i=pYe(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},bYe=function(e,t){var r=gYe(),n=null,a=function(h,m){n&&rr(!1),Hy("onBeforeCapture",function(){var g=e().onBeforeCapture;if(g){var p={draggableId:h,mode:m};g(p)}})},i=function(h,m){n&&rr(!1),Hy("onBeforeDragStart",function(){var g=e().onBeforeDragStart;g&&g(kw(h,m))})},o=function(h,m){n&&rr(!1);var g=kw(h,m);n={mode:m,lastCritical:h,lastLocation:g.source,lastCombine:null},r.add(function(){Hy("onDragStart",function(){return SA(e().onDragStart,g,t,y2.onDragStart)})})},l=function(h,m){var g=iD(m),p=QN(m);n||rr(!1);var y=!xYe(h,n.lastCritical);y&&(n.lastCritical=h);var x=!vYe(n.lastLocation,g);x&&(n.lastLocation=g);var b=!yYe(n.lastCombine,p);if(b&&(n.lastCombine=p),!(!y&&!x&&!b)){var w=Fr({},kw(h,n.mode),{combine:p,destination:g});r.add(function(){Hy("onDragUpdate",function(){return SA(e().onDragUpdate,w,t,y2.onDragUpdate)})})}},c=function(){n||rr(!1),r.flush()},u=function(h){n||rr(!1),n=null,Hy("onDragEnd",function(){return SA(e().onDragEnd,h,t,y2.onDragEnd)})},d=function(){if(n){var h=Fr({},kw(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:u,abort:d}},wYe=function(e,t){var r=bYe(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;r.flush(),a(i),r.drop(l);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},_Ye=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&rr(!1),e.dispatch(fD({completed:n.completed}))}}},SYe=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(qte())}};r=requestAnimationFrame(function(){r=null,t=Jl(window,[o])})}}}},jYe=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},NYe=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},CYe=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},AYe=function(e){return function(t){return function(r){return function(n){if(CYe(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&rr(!1),e.start(a);return}r(n),e.scroll(t.getState())}}}},PYe=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(zte({reason:n.reason})))}}}},EYe=Xee,kYe=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Yee(BKe,EYe(vHe(aYe(n),jYe(t),nYe(t),uYe,_Ye,SYe,PYe,AYe(o),mYe,NYe(r),wYe(a,i))))},jA=function(){return{additions:{},removals:{},modified:{}}};function OYe(e){var t=e.registry,r=e.callbacks,n=jA(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var d=n,f=d.additions,h=d.removals,m=d.modified,g=Object.keys(f).map(function(x){return t.draggable.getById(x).getDimension(mo)}).sort(function(x,b){return x.descriptor.index-b.descriptor.index}),p=Object.keys(m).map(function(x){var b=t.droppable.getById(x),w=b.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:w}}),y={additions:g,removals:Object.keys(h),modified:p};n=jA(),r.publish(y)}))},o=function(d){var f=d.descriptor.id;n.additions[f]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],i()},l=function(d){var f=d.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=jA())};return{add:o,remove:l,stop:c}}var Vte=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=pl({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},Hte=function(){var e=document.documentElement;return e||rr(!1),e},Gte=function(){var e=Hte(),t=Vte({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},TYe=function(){var e=Wte(),t=Gte(),r=e.y,n=e.x,a=Hte(),i=a.clientWidth,o=a.clientHeight,l=n+i,c=r+o,u=Oc({top:r,left:n,right:l,bottom:c}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:mo,displacement:mo}}};return d},IYe=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=TYe(),i=a.scroll.current,o=t.droppable,l=n.droppable.getAllByType(o.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(f){return f.getDimension(i)}),u={draggables:_te(c),droppables:wte(l)},d={dimensions:u,critical:t,viewport:a};return d};function cz(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var DYe=function(e,t){var r=null,n=OYe({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(m,g){e.droppable.exists(m)||rr(!1),r&&t.updateDroppableIsEnabled({id:m,isEnabled:g})},i=function(m,g){r&&(e.droppable.exists(m)||rr(!1),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:g}))},o=function(m,g){r&&(e.droppable.exists(m)||rr(!1),t.updateDroppableScroll({id:m,newScroll:g}))},l=function(m,g){r&&e.droppable.getById(m).callbacks.scroll(g)},c=function(){if(r){n.stop();var m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(function(g){return g.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(m){r||rr(!1);var g=r.critical.draggable;m.type==="ADDITION"&&cz(e,g,m.value)&&n.add(m.value),m.type==="REMOVAL"&&cz(e,g,m.value)&&n.remove(m.value)},d=function(m){r&&rr(!1);var g=e.draggable.getById(m.draggableId),p=e.droppable.getById(g.descriptor.droppableId),y={draggable:g.descriptor,droppable:p.descriptor},x=e.subscribe(u);return r={critical:y,unsubscribe:x},IYe({critical:y,registry:e,scrollOptions:m.scrollOptions})},f={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:d,stopPublishing:c};return f},Kte=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},MYe=function(e){window.scrollBy(e.x,e.y)},RYe=fo(function(e){return JN(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),LYe=function(t,r){var n=Eh(RYe(r),function(a){return a.frame||rr(!1),Tte(a.frame.pageMarginBox)(t)});return n},$Ye=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=LYe(t,n);return i},Yf={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},FYe=function(e,t){var r=e[t.size]*Yf.startFromPercentage,n=e[t.size]*Yf.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Yte=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},pD=1,BYe=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Yf.maxPixelScroll;if(e===t.startScrollingFrom)return pD;var r=Yte({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=Yf.maxPixelScroll*Yf.ease(n);return Math.ceil(a)},uz=Yf.durationDampening.accelerateAt,dz=Yf.durationDampening.stopDampeningAt,zYe=function(e,t){var r=t,n=dz,a=Date.now(),i=a-r;if(i>=dz)return e;if(i<uz)return pD;var o=Yte({startOfRange:uz,endOfRange:n,current:i}),l=e*Yf.ease(o);return Math.ceil(l)},fz=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=BYe(t,r);return i===0?0:a?Math.max(zYe(i,n),pD):i},hz=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=FYe(t,a),l=r[a.end]<r[a.start];return l?fz({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*fz({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},qYe=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},UYe=xte(function(e){return e===0?0:e}),Xte=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},l=hz({container:r,distanceToEdges:o,dragStartTime:t,axis:oD,shouldUseTimeDampening:i}),c=hz({container:r,distanceToEdges:o,dragStartTime:t,axis:Nte,shouldUseTimeDampening:i}),u=UYe({x:c,y:l});if(Kf(u,mo))return null;var d=qYe({container:r,subject:n,proposedScroll:u});return d?Kf(d,mo)?null:d:null},WYe=xte(function(e){return e===0?0:e>0?1:-1}),gD=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Po(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Kf(o,mo)?null:o}}(),Jte=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=WYe(a),l=gD({max:i,current:n,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},vD=function(t,r){return Jte({current:t.scroll.current,max:t.scroll.max,change:r})},VYe=function(t,r){if(!vD(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return gD({current:a,max:n,change:r})},yD=function(t,r){var n=t.frame;return n?Jte({current:n.scroll.current,max:n.scroll.max,change:r}):!1},HYe=function(t,r){var n=t.frame;return!n||!yD(t,r)?null:gD({current:n.scroll.current,max:n.scroll.max,change:r})},GYe=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=Xte({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&vD(t,o)?o:null},KYe=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=Xte({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return l&&yD(t,l)?l:null},mz=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=GYe({dragStartTime:r,viewport:u,subject:c,center:o,shouldUseTimeDampening:n});if(d){a(d);return}}var f=$Ye({center:o,destination:_l(t.impact),droppables:t.dimensions.droppables});if(f){var h=KYe({dragStartTime:r,droppable:f,subject:c,center:o,shouldUseTimeDampening:n});h&&i(f.descriptor.id,h)}},YYe=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=ub(t),a=ub(r),i=null,o=function(d){i||rr(!1);var f=i,h=f.shouldUseTimeDampening,m=f.dragStartTime;mz({state:d,scrollWindow:n,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:h})},l=function(d){i&&rr(!1);var f=Date.now(),h=!1,m=function(){h=!0};mz({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&o(d)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:l,stop:c,scroll:o}},XYe=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(u,d){var f=Po(u.current.client.selection,d);t({client:f})},i=function(u,d){if(!yD(u,d))return d;var f=HYe(u,d);if(!f)return r(u.descriptor.id,d),null;var h=pl(d,f);r(u.descriptor.id,h);var m=pl(d,h);return m},o=function(u,d,f){if(!u||!vD(d,f))return f;var h=VYe(d,f);if(!h)return n(f),null;var m=pl(f,h);n(m);var g=pl(f,m);return g},l=function(u){var d=u.scrollJumpRequest;if(d){var f=_l(u.impact);f||rr(!1);var h=i(u.dimensions.droppables[f],d);if(h){var m=u.viewport,g=o(u.isWindowScrollAllowed,m,h);g&&a(u,g)}}};return l},JYe=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=YYe({scrollWindow:r,scrollDroppable:t}),i=XYe({move:n,scrollWindow:r,scrollDroppable:t}),o=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){a.scroll(u);return}u.scrollJumpRequest&&i(u)}},l={scroll:o,start:a.start,stop:a.stop};return l},Ev="data-rbd",kv=function(){var e=Ev+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),VO=function(){var e=Ev+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),QYe=function(){var e=Ev+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),pz={contextId:Ev+"-scroll-container-context-id"},ZYe=function(t){return function(r){return"["+r+'="'+t+'"]'}},Gy=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},eXe="pointer-events: none;",tXe=function(e){var t=ZYe(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(kv.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:eXe,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+Fx.outOfTheWay+`;
    `;return{selector:t(VO.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:t(QYe.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:Gy(o,"always"),resting:Gy(o,"resting"),dragging:Gy(o,"dragging"),dropAnimating:Gy(o,"dropAnimating"),userCancel:Gy(o,"userCancel")}},Sl=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect,NA=function(){var t=document.querySelector("head");return t||rr(!1),t},gz=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function rXe(e,t){var r=Wn(function(){return tXe(e)},[e]),n=v.useRef(null),a=v.useRef(null),i=kr(fo(function(f){var h=a.current;h||rr(!1),h.textContent=f}),[]),o=kr(function(f){var h=n.current;h||rr(!1),h.textContent=f},[]);Sl(function(){!n.current&&!a.current||rr(!1);var f=gz(t),h=gz(t);return n.current=f,a.current=h,f.setAttribute(Ev+"-always",e),h.setAttribute(Ev+"-dynamic",e),NA().appendChild(f),NA().appendChild(h),o(r.always),i(r.resting),function(){var m=function(p){var y=p.current;y||rr(!1),NA().removeChild(y),p.current=null};m(n),m(a)}},[t,o,i,r.always,r.resting,e]);var l=kr(function(){return i(r.dragging)},[i,r.dragging]),c=kr(function(f){if(f==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),u=kr(function(){a.current&&i(r.resting)},[i,r.resting]),d=Wn(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u]);return d}var Qte=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function tC(e){return e instanceof Qte(e).HTMLElement}function nXe(e,t){var r="["+kv.contextId+'="'+e+'"]',n=bte(document.querySelectorAll(r));if(!n.length)return null;var a=Eh(n,function(i){return i.getAttribute(kv.draggableId)===t});return!a||!tC(a)?null:a}function aXe(e){var t=v.useRef({}),r=v.useRef(null),n=v.useRef(null),a=v.useRef(!1),i=kr(function(h,m){var g={id:h,focus:m};return t.current[h]=g,function(){var y=t.current,x=y[h];x!==g&&delete y[h]}},[]),o=kr(function(h){var m=nXe(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=kr(function(h,m){r.current===h&&(r.current=m)},[]),c=kr(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&o(h)}))},[o]),u=kr(function(h){r.current=null;var m=document.activeElement;m&&m.getAttribute(kv.draggableId)===h&&(r.current=h)},[]);Sl(function(){return a.current=!0,function(){a.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var d=Wn(function(){return{register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,u,c,l]);return d}function iXe(){var e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){var m=t.indexOf(f);m!==-1&&t.splice(m,1)}}function n(f){t.length&&t.forEach(function(h){return h(f)})}function a(f){return e.draggables[f]||null}function i(f){var h=a(f);return h||rr(!1),h}var o={register:function(h){e.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,m){var g=e.draggables[m.descriptor.id];g&&g.uniqueId===h.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var m=h.descriptor.id,g=a(m);g&&h.uniqueId===g.uniqueId&&(delete e.draggables[m],n({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return TS(e.draggables).filter(function(m){return m.descriptor.type===h})}};function l(f){return e.droppables[f]||null}function c(f){var h=l(f);return h||rr(!1),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var m=l(h.descriptor.id);m&&h.uniqueId===m.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return TS(e.droppables).filter(function(m){return m.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:r,clean:d}}function oXe(){var e=Wn(iXe,[]);return v.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var xD=le.createContext(null),DS=function(){var e=document.body;return e||rr(!1),e},sXe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},lXe=function(t){return"rbd-announcement-"+t};function cXe(e){var t=Wn(function(){return lXe(e)},[e]),r=v.useRef(null);v.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Fr(i.style,sXe),DS().appendChild(i),function(){setTimeout(function(){var c=DS();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=kr(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var uXe=0,dXe={separator:"::"};function bD(e,t){return t===void 0&&(t=dXe),Wn(function(){return""+e+t.separator+uXe++},[t.separator,e])}function fXe(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function hXe(e){var t=e.contextId,r=e.text,n=bD("hidden-text",{separator:"-"}),a=Wn(function(){return fXe({contextId:t,uniqueId:n})},[n,t]);return v.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",DS().appendChild(o),function(){var c=DS();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var rC=le.createContext(null);function Zte(e){var t=v.useRef(e);return v.useEffect(function(){t.current=e}),t}function mXe(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&rr(!1);var l={abandon:o};return e=l,l}function a(){e||rr(!1),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var pXe=9,gXe=13,wD=27,ere=32,vXe=33,yXe=34,xXe=35,bXe=36,wXe=37,_Xe=38,SXe=39,jXe=40,Ow,NXe=(Ow={},Ow[gXe]=!0,Ow[pXe]=!0,Ow),tre=function(e){NXe[e.keyCode]&&e.preventDefault()},nC=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Eh(t,function(n){return"on"+n in document});return r||e}(),rre=0,vz=5;function CXe(e,t){return Math.abs(t.x-e.x)>=vz||Math.abs(t.y-e.y)>=vz}var yz={type:"IDLE"};function AXe(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,u=o.clientY;if(l===rre){var d={x:c,y:u},f=n();if(f.type==="DRAGGING"){o.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&rr(!1);var h=f.point;if(CXe(h,d)){o.preventDefault();var m=f.actions.fluidLift(d);a({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=n();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=n();if(l.type==="PENDING"){t();return}if(o.keyCode===wD){o.preventDefault(),t();return}tre(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=n();if(l.type==="IDLE"&&rr(!1),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:nC,fn:t}]}function PXe(e){var t=v.useRef(yz),r=v.useRef(Gf),n=Wn(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===rre&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=e.findClosestDraggableId(f);if(h){var m=e.tryGetLock(h,o,{sourceEvent:f});if(m){f.preventDefault();var g={x:f.clientX,y:f.clientY};r.current(),u(m,g)}}}}}},[e]),a=Wn(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var m=e.findOptionsForDraggable(h);m&&(m.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}}}},[e]),i=kr(function(){var f={passive:!1,capture:!0};r.current=Jl(window,[a,n],f)},[a,n]),o=kr(function(){var d=t.current;d.type!=="IDLE"&&(t.current=yz,r.current(),i())},[i]),l=kr(function(){var d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),c=kr(function(){var f={capture:!0,passive:!1},h=AXe({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});r.current=Jl(window,h,f)},[l,o]),u=kr(function(f,h){t.current.type!=="IDLE"&&rr(!1),t.current={type:"PENDING",point:h,actions:f},c()},[c]);Sl(function(){return i(),function(){r.current()}},[i])}var Fp;function EXe(){}var kXe=(Fp={},Fp[yXe]=!0,Fp[vXe]=!0,Fp[bXe]=!0,Fp[xXe]=!0,Fp);function OXe(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===wD){i.preventDefault(),r();return}if(i.keyCode===ere){i.preventDefault(),n();return}if(i.keyCode===jXe){i.preventDefault(),e.moveDown();return}if(i.keyCode===_Xe){i.preventDefault(),e.moveUp();return}if(i.keyCode===SXe){i.preventDefault(),e.moveRight();return}if(i.keyCode===wXe){i.preventDefault(),e.moveLeft();return}if(kXe[i.keyCode]){i.preventDefault();return}tre(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:nC,fn:r}]}function TXe(e){var t=v.useRef(EXe),r=Wn(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==ere)return;var o=e.findClosestDraggableId(i);if(!o)return;var l=e.tryGetLock(o,d,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,u=l.snapLift();t.current();function d(){c||rr(!1),c=!1,t.current(),n()}t.current=Jl(window,OXe(u,d),{capture:!0,passive:!1})}}},[e]),n=kr(function(){var i={passive:!1,capture:!0};t.current=Jl(window,[r],i)},[r]);Sl(function(){return n(),function(){t.current()}},[n])}var CA={type:"IDLE"},IXe=120,DXe=.15;function MXe(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===wD&&a.preventDefault(),t()}},{eventName:nC,fn:t}]}function RXe(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=i.touches[0],c=l.clientX,u=l.clientY,d={x:c,y:u};i.preventDefault(),o.actions.move(d)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&rr(!1);var l=i.touches[0];if(l){var c=l.force>=DXe;if(c){var u=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){u&&t();return}if(u){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:nC,fn:t}]}function LXe(e){var t=v.useRef(CA),r=v.useRef(Gf),n=kr(function(){return t.current},[]),a=kr(function(m){t.current=m},[]),i=Wn(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var g=e.findClosestDraggableId(m);if(g){var p=e.tryGetLock(g,l,{sourceEvent:m});if(p){var y=m.touches[0],x=y.clientX,b=y.clientY,w={x,y:b};r.current(),f(p,w)}}}}}},[e]),o=kr(function(){var m={capture:!0,passive:!1};r.current=Jl(window,[i],m)},[i]),l=kr(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(CA),r.current(),o())},[o,a]),c=kr(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=kr(function(){var m={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},p=Jl(window,RXe(g),m),y=Jl(window,MXe(g),m);r.current=function(){p(),y()}},[c,n,l]),d=kr(function(){var m=n();m.type!=="PENDING"&&rr(!1);var g=m.actions.fluidLift(m.point);a({type:"DRAGGING",actions:g,hasMoved:!1})},[n,a]),f=kr(function(m,g){n().type!=="IDLE"&&rr(!1);var p=setTimeout(d,IXe);a({type:"PENDING",point:g,actions:m,longPressTimerId:p}),u()},[u,n,a,d]);Sl(function(){return o(),function(){r.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),a(CA))}},[n,o,a]),Sl(function(){var m=Jl(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var $Xe={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function nre(e,t){if(t==null)return!1;var r=!!$Xe[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:nre(e,t.parentElement)}function FXe(e,t){var r=t.target;return tC(r)?nre(e,r):!1}var BXe=function(e){return Oc(e.getBoundingClientRect()).center};function zXe(e){return e instanceof Qte(e).Element}var qXe=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Eh(t,function(n){return n in Element.prototype});return r||e}();function are(e,t){return e==null?null:e[qXe](t)?e:are(e.parentElement,t)}function UXe(e,t){return e.closest?e.closest(t):are(e,t)}function WXe(e){return"["+kv.contextId+'="'+e+'"]'}function VXe(e,t){var r=t.target;if(!zXe(r))return null;var n=WXe(e),a=UXe(r,n);return!a||!tC(a)?null:a}function HXe(e,t){var r=VXe(e,t);return r?r.getAttribute(kv.draggableId):null}function GXe(e,t){var r="["+VO.contextId+'="'+e+'"]',n=bte(document.querySelectorAll(r)),a=Eh(n,function(i){return i.getAttribute(VO.id)===t});return!a||!tC(a)?null:a}function KXe(e){e.preventDefault()}function Tw(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function ire(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Kte(r.getState(),a))}function YXe(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=ire({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var u=a.draggable.getById(i),d=GXe(r,u.descriptor.id);if(!d||l&&!u.options.canDragInteractiveElements&&FXe(d,l))return null;var f=t.claim(o||Gf),h="PRE_DRAG";function m(){return u.options.shouldRespectForcePress}function g(){return t.isActive(f)}function p(A,P){Tw({expected:A,phase:h,isLockActive:g,shouldWarn:!0})&&n.dispatch(P())}var y=p.bind(null,"DRAGGING");function x(A){function P(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(P(),h!=="PRE_DRAG"&&rr(!1)),n.dispatch(qKe(A.liftActionArgs)),h="DRAGGING";function C(E,R){if(R===void 0&&(R={shouldBlockNextClick:!1}),A.cleanup(),R.shouldBlockNextClick){var k=Jl(window,[{eventName:"click",fn:KXe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(k)}P(),n.dispatch(zte({reason:E}))}return Fr({isActive:function(){return Tw({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(R){return C("DROP",R)},cancel:function(R){return C("CANCEL",R)}},A.actions)}function b(A){var P=ub(function(E){y(function(){return Bte({client:E})})}),C=x({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return P.cancel()},actions:{move:P}});return Fr({},C,{move:P})}function w(){var A={moveUp:function(){return y(JKe)},moveRight:function(){return y(ZKe)},moveDown:function(){return y(QKe)},moveLeft:function(){return y(eYe)}};return x({liftActionArgs:{id:i,clientSelection:BXe(d),movementMode:"SNAP"},cleanup:Gf,actions:A})}function S(){var A=Tw({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});A&&t.release()}var j={isActive:function(){return Tw({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:b,snapLift:w,abort:S};return j}var XXe=[PXe,TXe,LXe];function JXe(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?XXe:[],a||[]),l=v.useState(function(){return mXe()})[0],c=kr(function(b,w){b.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);Sl(function(){var b=r.getState(),w=r.subscribe(function(){var S=r.getState();c(b,S),b=S});return w},[l,r,c]),Sl(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=kr(function(x){return ire({lockAPI:l,registry:n,store:r,draggableId:x})},[l,n,r]),d=kr(function(x,b,w){return YXe({lockAPI:l,registry:n,contextId:t,store:r,draggableId:x,forceSensorStop:b,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[t,l,n,r]),f=kr(function(x){return HXe(t,x)},[t]),h=kr(function(x){var b=n.draggable.findById(x);return b?b.options:null},[n.draggable]),m=kr(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(dD()))},[l,r]),g=kr(l.isClaimed,[l]),p=Wn(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:g}},[u,d,f,h,m,g]),y=0;y<o.length;y++)o[y](p)}var QXe=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Ky(e){return e.current||rr(!1),e.current}function ZXe(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=v.useRef(null),l=Zte(e),c=kr(function(){return QXe(l.current)},[l]),u=cXe(t),d=hXe({contextId:t,text:i}),f=rXe(t,a),h=kr(function(E){Ky(o).dispatch(E)},[]),m=Wn(function(){return z7({publishWhileDragging:WKe,updateDroppableScroll:HKe,updateDroppableIsEnabled:GKe,updateDroppableIsCombineEnabled:KKe,collectionStarting:VKe},h)},[h]),g=oXe(),p=Wn(function(){return DYe(g,m)},[g,m]),y=Wn(function(){return JYe(Fr({scrollWindow:MYe,scrollDroppable:p.scrollDroppable},z7({move:Bte},h)))},[p.scrollDroppable,h]),x=aXe(t),b=Wn(function(){return kYe({announce:u,autoScroller:y,dimensionMarshal:p,focusMarshal:x,getResponders:c,styleMarshal:f})},[u,y,p,x,c,f]);o.current=b;var w=kr(function(){var E=Ky(o),R=E.getState();R.phase!=="IDLE"&&E.dispatch(dD())},[]),S=kr(function(){var E=Ky(o).getState();return E.isDragging||E.phase==="DROP_ANIMATING"},[]),j=Wn(function(){return{isDragging:S,tryAbort:w}},[S,w]);r(j);var A=kr(function(E){return Kte(Ky(o).getState(),E)},[]),P=kr(function(){return tm(Ky(o).getState())},[]),C=Wn(function(){return{marshal:p,focus:x,contextId:t,canLift:A,isMovementAllowed:P,dragHandleUsageInstructionsId:d,registry:g}},[t,p,d,x,A,P,g]);return JXe({contextId:t,store:b,registry:g,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),v.useEffect(function(){return w},[w]),le.createElement(rC.Provider,{value:C},le.createElement(_He,{context:xD,store:b},e.children))}var eJe=0;function tJe(){return Wn(function(){return""+eJe++},[])}function rJe(e){var t=tJe(),r=e.dragHandleUsageInstructions||y2.dragHandleUsageInstructions;return le.createElement(TGe,null,function(n){return le.createElement(ZXe,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var ore=function(t){return function(r){return t===r}},nJe=ore("scroll"),aJe=ore("auto"),xz=function(t,r){return r(t.overflowX)||r(t.overflowY)},iJe=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return xz(n,nJe)||xz(n,aJe)},oJe=function(){return!1},sJe=function e(t){return t==null?null:t===document.body?oJe()?t:null:t===document.documentElement?null:iJe(t)?t:e(t.parentElement)},HO=function(e){return{x:e.scrollLeft,y:e.scrollTop}},lJe=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},cJe=function(e){var t=sJe(e),r=lJe(e);return{closestScrollable:t,isFixedOnPage:r}},uJe=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,l=e.page,c=e.closest,u=function(){if(!c)return null;var m=c.scrollSize,g=c.client,p=Vte({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:m,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:p,diff:{value:mo,displacement:mo}}}}(),d=i==="vertical"?oD:Nte,f=Pv({page:l,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:d,isEnabled:r,client:o,page:l,frame:u,subject:f};return h},dJe=function(t,r){var n=pte(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,l=i+r.scrollWidth,c={top:a,right:l,bottom:o,left:i},u=tD(c,n.border),d=rD({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return d},fJe=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,u=n.closestScrollable,d=dJe(t,u),f=ES(d,a),h=function(){if(!u)return null;var g=pte(u),p={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:ES(g,a),scroll:HO(u),scrollSize:p,shouldClipSubject:c}}(),m=uJe({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:f,closest:h});return m},hJe={passive:!1},mJe={passive:!0},bz=function(e){return e.shouldPublishImmediately?hJe:mJe};function MS(e){var t=v.useContext(e);return t||rr(!1),t}var Iw=function(t){return t&&t.env.closestScrollable||null};function pJe(e){var t=v.useRef(null),r=MS(rC),n=bD("droppable"),a=r.registry,i=r.marshal,o=Zte(e),l=Wn(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=v.useRef(l),u=Wn(function(){return fo(function(S,j){t.current||rr(!1);var A={x:S,y:j};i.updateDroppableScroll(l.id,A)})},[l.id,i]),d=kr(function(){var S=t.current;return!S||!S.env.closestScrollable?mo:HO(S.env.closestScrollable)},[]),f=kr(function(){var S=d();u(S.x,S.y)},[d,u]),h=Wn(function(){return ub(f)},[f]),m=kr(function(){var S=t.current,j=Iw(S);S&&j||rr(!1);var A=S.scrollOptions;if(A.shouldPublishImmediately){f();return}h()},[h,f]),g=kr(function(S,j){t.current&&rr(!1);var A=o.current,P=A.getDroppableRef();P||rr(!1);var C=cJe(P),E={ref:P,descriptor:l,env:C,scrollOptions:j};t.current=E;var R=fJe({ref:P,descriptor:l,env:C,windowScroll:S,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),k=C.closestScrollable;return k&&(k.setAttribute(pz.contextId,r.contextId),k.addEventListener("scroll",m,bz(E.scrollOptions))),R},[r.contextId,l,m,o]),p=kr(function(){var S=t.current,j=Iw(S);return S&&j||rr(!1),HO(j)},[]),y=kr(function(){var S=t.current;S||rr(!1);var j=Iw(S);t.current=null,j&&(h.cancel(),j.removeAttribute(pz.contextId),j.removeEventListener("scroll",m,bz(S.scrollOptions)))},[m,h]),x=kr(function(S){var j=t.current;j||rr(!1);var A=Iw(j);A||rr(!1),A.scrollTop+=S.y,A.scrollLeft+=S.x},[]),b=Wn(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:p,dragStopped:y,scroll:x}},[y,g,p,x]),w=Wn(function(){return{uniqueId:n,descriptor:l,callbacks:b}},[b,l,n]);Sl(function(){return c.current=w.descriptor,a.droppable.register(w),function(){t.current&&y(),a.droppable.unregister(w)}},[b,l,y,w,i,a.droppable]),Sl(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Sl(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function AA(){}var wz={width:0,height:0,margin:$Ge},gJe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?wz:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},vJe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=gJe({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Fx.placeholder:null}};function yJe(e){var t=v.useRef(null),r=kr(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=v.useState(e.animate==="open"),c=l[0],u=l[1];v.useEffect(function(){return c?n!=="open"?(r(),u(!1),AA):t.current?AA:(t.current=setTimeout(function(){t.current=null,u(!1)}),r):AA},[n,c,r]);var d=kr(function(h){h.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),f=vJe({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return le.createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})}var xJe=le.memo(yJe),_D=le.createContext(null),bJe=function(e){wX(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(le.PureComponent),_z={dragging:5e3,dropAnimating:4500},wJe=function(t,r){return r?Fx.drop(r.duration):t?Fx.snap:Fx.fluid},_Je=function(t,r){return t?r?mb.opacity.drop:mb.opacity.combining:null},SJe=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function jJe(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,l=SJe(e),c=!!i,u=c?UO.drop(n,o):UO.moveTo(n),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:wJe(l,i),transform:u,opacity:_Je(o,c),zIndex:c?_z.dropAnimating:_z.dragging,pointerEvents:"none"};return d}function NJe(e){return{transform:UO.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function CJe(e){return e.type==="DRAGGING"?jJe(e):NJe(e)}function AJe(e,t,r){r===void 0&&(r=mo);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=mte(a,n),o=ES(i,r),l={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},u={descriptor:e,placeholder:l,displaceBy:c,client:i,page:o};return u}function PJe(e){var t=bD("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=Wn(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),u=kr(function(m){var g=a();return g||rr(!1),AJe(r,g,m)},[r,a]),d=Wn(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:u}},[r,u,c,t]),f=v.useRef(d),h=v.useRef(!0);Sl(function(){return n.draggable.register(f.current),function(){return n.draggable.unregister(f.current)}},[n.draggable]),Sl(function(){if(h.current){h.current=!1;return}var m=f.current;f.current=d,n.draggable.update(d,m)},[d,n.draggable])}function EJe(e){e.preventDefault()}function kJe(e){var t=v.useRef(null),r=kr(function(E){t.current=E},[]),n=kr(function(){return t.current},[]),a=MS(rC),i=a.contextId,o=a.dragHandleUsageInstructionsId,l=a.registry,c=MS(_D),u=c.type,d=c.droppableId,f=Wn(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,m=e.draggableId,g=e.isEnabled,p=e.shouldRespectForcePress,y=e.canDragInteractiveElements,x=e.isClone,b=e.mapped,w=e.dropAnimationFinished;if(!x){var S=Wn(function(){return{descriptor:f,registry:l,getDraggableRef:n,canDragInteractiveElements:y,shouldRespectForcePress:p,isEnabled:g}},[f,l,n,y,p,g]);PJe(S)}var j=Wn(function(){return g?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:EJe}:null},[i,o,m,g]),A=kr(function(E){b.type==="DRAGGING"&&b.dropping&&E.propertyName==="transform"&&w()},[w,b]),P=Wn(function(){var E=CJe(b),R=b.type==="DRAGGING"&&b.dropping?A:null,k={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":m,style:E,onTransitionEnd:R},dragHandleProps:j};return k},[i,j,m,b,A,r]),C=Wn(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(P,b.snapshot,C)}var sre=function(e,t){return e===t},lre=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},OJe=function(t){return t.combine?t.combine.draggableId:null},TJe=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function IJe(){var e=fo(function(a,i){return{x:a,y:i}}),t=fo(function(a,i,o,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=fo(function(a,i,o,l,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:a,dimension:o,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],u=_l(i.impact),d=TJe(i.impact),f=i.forceShouldAnimate;return r(e(l.x,l.y),i.movementMode,c,o.isClone,u,d,f)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==o.draggableId)return null;var m=o.isClone,g=i.dimensions.draggables[o.draggableId],p=h.result,y=p.mode,x=lre(p),b=OJe(p),w=i.dropDuration,S={duration:w,curve:hD.drop,moveTo:i.newHomeClientOffset,opacity:b?mb.opacity.drop:null,scale:b?mb.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:g,dropping:S,draggingOver:x,combineWith:b,mode:y,forceShouldAnimate:null,snapshot:t(y,m,x,b,S)}}}return null};return n}function cre(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var DJe={mapped:{type:"SECONDARY",offset:mo,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:cre(null)}};function MJe(){var e=fo(function(o,l){return{x:o,y:l}}),t=fo(cre),r=fo(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),n=function(l){return l?r(mo,l,!0):null},a=function(l,c,u,d){var f=u.displaced.visible[l],h=!!(d.inVirtualList&&d.effected[l]),m=QN(u),g=m&&m.draggableId===l?c:null;if(!f){if(!h)return n(g);if(u.displaced.invisible[l])return null;var p=oy(d.displacedBy.point),y=e(p.x,p.y);return r(y,g,!0)}if(h)return n(g);var x=u.displacedBy.point,b=e(x.x,x.y);return r(b,g,f.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===c.draggableId?null:a(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return i}var RJe=function(){var t=IJe(),r=MJe(),n=function(i,o){return t(i,o)||r(i,o)||DJe};return n},LJe={dropAnimationFinished:qte},$Je=fte(RJe,LJe,null,{context:xD,pure:!0,areStatePropsEqual:sre})(kJe);function ure(e){var t=MS(_D),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:le.createElement($Je,e)}function FJe(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return le.createElement(ure,Fr({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function BJe(e){var t=v.useContext(rC);t||rr(!1);var r=t.contextId,n=t.isMovementAllowed,a=v.useRef(null),i=v.useRef(null),o=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,m=e.isCombineEnabled,g=e.snapshot,p=e.useClone,y=e.updateViewportMaxScroll,x=e.getContainerForClone,b=kr(function(){return a.current},[]),w=kr(function(k){a.current=k},[]);kr(function(){return i.current},[]);var S=kr(function(k){i.current=k},[]),j=kr(function(){n()&&y({maxScroll:Gte()})},[n,y]);pJe({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:b});var A=le.createElement(bJe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(k){var T=k.onClose,I=k.data,M=k.animate;return le.createElement(xJe,{placeholder:I,onClose:T,innerRef:S,animate:M,contextId:r,onTransitionEnd:j})}),P=Wn(function(){return{innerRef:w,placeholder:A,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,A,w]),C=p?p.dragging.draggableId:null,E=Wn(function(){return{droppableId:l,type:c,isUsingCloneFor:C}},[l,C,c]);function R(){if(!p)return null;var k=p.dragging,T=p.render,I=le.createElement(ure,{draggableId:k.draggableId,index:k.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(M,z){return T(M,z,k)});return yW.createPortal(I,x())}return le.createElement(_D.Provider,{value:E},o(P,g),R())}var PA=function(t,r){return t===r.droppable.type},Sz=function(t,r){return r.draggables[t.draggable.id]},zJe=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Fr({},t,{shouldAnimatePlaceholder:!1}),n=fo(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=fo(function(o,l,c,u,d,f){var h=d.descriptor.id,m=d.descriptor.droppableId===o;if(m){var g=f?{render:f,dragging:n(d.descriptor)}:null,p={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:p,useClone:g}}if(!l)return r;if(!u)return t;var y={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}}),i=function(l,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var m=l.critical;if(!PA(d,m))return r;var g=Sz(m,l.dimensions),p=_l(l.impact)===u;return a(u,f,p,p,g,h)}if(l.phase==="DROP_ANIMATING"){var y=l.completed;if(!PA(d,y.critical))return r;var x=Sz(y.critical,l.dimensions);return a(u,f,lre(y.result)===u,_l(y.impact)===u,x,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var b=l.completed;if(!PA(d,b.critical))return r;var w=_l(b.impact)===u,S=!!(b.impact.at&&b.impact.at.type==="COMBINE"),j=b.critical.droppable.id===u;return w?S?t:r:j?t:r}return r};return i},qJe={updateViewportMaxScroll:XKe};function UJe(){return document.body||rr(!1),document.body}var WJe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:UJe},dre=fte(zJe,qJe,null,{context:xD,pure:!0,areStatePropsEqual:sre})(BJe);dre.defaultProps=WJe;function SD(e){return{id:e.id,code:e.codigo_produto??"",name:e.nome,category:e.categoria??"",type:e.tipo_produto==="uso_interno"?"Uso Interno":"Venda",cost:Number(e.valor_custo??e.preco_custo??0),price:Number(e.valor_venda??e.preco_venda??0),stock:Number(e.estoque??e.estoque_atual??0),minStock:Number(e.estoque_minimo??0),status:e.status??(Number(e.estoque??0)===0?"inactive":Number(e.estoque??0)>0&&Number(e.estoque??0)<=Number(e.estoque_minimo??0)?"low_stock":"active"),validade:e.validade?new Date(e.validade):null,barcode:e.codigo_barras??"",barcodeBox:e.codigo_barras_caixa??"",reference:e.referencia??"",brand:e.marca??"",group:e.grupo??"",unit:e.unidade??"UN",initialStock:Number(e.estoque_inicial??0),currentStock:Number(e.estoque_atual??e.estoque??0),weight:e.peso!=null?Number(e.peso):null,buyPrice:e.preco_compra!=null?Number(e.preco_compra):null,costsPercent:e.custos_percent!=null?Number(e.custos_percent):null,costPrice:e.preco_custo!=null?Number(e.preco_custo):null,marginPercent:e.lucro_percent!=null?Number(e.lucro_percent):null,salePrice:e.preco_venda!=null?Number(e.preco_venda):null,wholesaleQty:e.qtd_atacado!=null?Number(e.qtd_atacado):null,wholesalePrice:e.preco_atacado!=null?Number(e.preco_atacado):null,commissionPercent:e.comissao_percent!=null?Number(e.comissao_percent):null,discountPercent:e.desconto_percent!=null?Number(e.desconto_percent):null,cfopInterno:e.cfop_interno??"",cstIcmsInterno:e.cst_icms_interno??"",csosnInterno:e.csosn_interno??"",aliqIcmsInterno:e.aliquota_icms_interno!=null?Number(e.aliquota_icms_interno):null,cfopExterno:e.cfop_externo??"",cstIcmsExterno:e.cst_icms_externo??"",csosnExterno:e.csosn_externo??"",aliqIcmsExterno:e.aliquota_icms_externo!=null?Number(e.aliquota_icms_externo):null,cstPisEntrada:e.cst_pis_entrada??"",cstPisSaida:e.cst_pis_saida??"",aliqPisPercent:e.aliquota_pis_percent!=null?Number(e.aliquota_pis_percent):null,aliqCofinsPercent:e.aliquota_cofins_percent!=null?Number(e.aliquota_cofins_percent):null,cstIpi:e.cst_ipi??"",aliqIpiPercent:e.aliquota_ipi_percent!=null?Number(e.aliquota_ipi_percent):null,fcpPercent:e.fcp_percent!=null?Number(e.fcp_percent):null,mvaPercent:e.mva_percent!=null?Number(e.mva_percent):null,baseReduzidaPercent:e.base_reduzida_percent!=null?Number(e.base_reduzida_percent):null,ncm:e.ncm??"",ncmDescription:e.descricao_ncm??"",cest:e.cest??"",active:e.ativo??!0,allowSale:e.permite_venda??!0,payCommission:e.paga_comissao??!1,variablePrice:e.preco_variavel??!1,composition:e.composicao??!1,service:e.servico??!1,hasGrid:e.grade??!1,usePriceTable:e.usar_tabela_preco??!1,fuel:e.combustivel??!1,useImei:e.usa_imei??!1,stockByGrid:e.controle_estoque_por_grade??!1,showInApp:e.mostrar_no_app??!1}}async function VJe({from:e,to:t,codigoEmpresa:r,limit:n=1e3}={}){if(!e||!t)throw new Error("Perodo invlido");const a=(e instanceof Date?e:new Date(e)).toISOString(),i=(t instanceof Date?t:new Date(t)).toISOString(),{data:o,error:l}=await ko(g=>{let p=Oe.from("comanda_itens").select("produto_id, quantidade, created_at").gte("created_at",a).lte("created_at",i).limit(n).abortSignal(g);return r&&(p=p.eq("codigo_empresa",r)),p},2e4,"Timeout getSoldProductsByPeriod (20s)");if(l)throw l;const c=new Map;for(const g of o||[]){const p=g.produto_id,y=Number(g.quantidade||0);c.set(p,(c.get(p)||0)+y)}const u=Array.from(c.entries()).sort((g,p)=>p[1]-g[1]);if(u.length===0)return[];const d=u.map(([g])=>g),{data:f,error:h}=await ko(g=>{let p=Oe.from("produtos").select("id, nome").in("id",d).abortSignal(g);return r&&(p=p.eq("codigo_empresa",r)),p},15e3,"Timeout getSoldProductsByPeriod:produtos (15s)");if(h)throw h;const m=new Map((f||[]).map(g=>[g.id,g.nome]));return u.map(([g,p])=>({id:g,name:m.get(g)||String(g),total:p}))}async function GO({productId:e,delta:t,codigoEmpresa:r}){const n=Number(t||0);if(!e||!Number.isFinite(n)||n===0)throw new Error("Parmetros invlidos para ajuste de estoque");const{data:a,error:i}=await ko(o=>{let l=Oe.from("produtos").update({estoque:(Oe.rpc,void 0)}).eq("id",e).select("id, estoque, estoque_atual").single().abortSignal(o);return r&&(l=l.eq("codigo_empresa",r)),l},1e4,"Timeout adjustProductStock (10s)");if(i){const{data:o,error:l}=await ko(f=>{let h=Oe.from("produtos").select("id, estoque, estoque_atual").eq("id",e).single().abortSignal(f);return r&&(h=h.eq("codigo_empresa",r)),h},8e3,"Timeout get current stock (8s)");if(l)throw l;const u=Number(o?.estoque??o?.estoque_atual??0)+n,{error:d}=await ko(f=>{let h=Oe.from("produtos").update({estoque:u,estoque_atual:u}).eq("id",e).abortSignal(f);return r&&(h=h.eq("codigo_empresa",r)),h},8e3,"Timeout update stock (8s)");if(d)throw d;return{id:e,stock:u}}return{id:a?.id||e}}async function HJe({limit:e=5,codigoEmpresa:t}={}){const r=new Date;r.setHours(0,0,0,0);const n=r.toISOString(),{data:a,error:i}=await ko(h=>{let m=Oe.from("comanda_itens").select("produto_id, quantidade, created_at").gte("created_at",n).abortSignal(h);return t&&(m=m.eq("codigo_empresa",t)),m},15e3,"Timeout getMostSoldProductsToday (15s)");if(i)throw i;const o=new Map;for(const h of a||[]){const m=h.produto_id,g=Number(h.quantidade||0);o.set(m,(o.get(m)||0)+g)}const l=Array.from(o.entries()).sort((h,m)=>m[1]-h[1]).slice(0,e);if(l.length===0)return[];const c=l.map(([h])=>h),{data:u,error:d}=await ko(h=>{let m=Oe.from("produtos").select("id, nome").in("id",c).abortSignal(h);return t&&(m=m.eq("codigo_empresa",t)),m},15e3,"Timeout getMostSoldProductsToday:produtos (15s)");if(d)throw d;const f=new Map((u||[]).map(h=>[h.id,h.nome]));return l.map(([h,m])=>({id:h,name:f.get(h)||String(h),total:m}))}function fre(e){return{codigo_produto:e.code||null,nome:e.name,categoria:e.category||null,tipo_produto:e.type==="Uso Interno"?"uso_interno":"venda",valor_custo:e.cost!=null?Number(e.cost):0,valor_venda:e.price!=null?Number(e.price):0,estoque:e.stock!=null?Number(e.stock):0,estoque_minimo:e.minStock!=null?Number(e.minStock):0,status:e.status||null,validade:e.validade?new Date(e.validade).toISOString().slice(0,10):null,codigo_barras:e.barcode||null,codigo_barras_caixa:e.barcodeBox||null,referencia:e.reference||null,marca:e.brand||null,grupo:e.group||null,unidade:e.unit||null,estoque_inicial:e.initialStock!=null?Number(e.initialStock):null,estoque_atual:e.currentStock!=null?Number(e.currentStock):null,peso:e.weight!=null?Number(e.weight):null,preco_compra:e.buyPrice!=null?Number(e.buyPrice):null,custos_percent:e.costsPercent!=null?Number(e.costsPercent):null,preco_custo:e.costPrice!=null?Number(e.costPrice):null,lucro_percent:e.marginPercent!=null?Number(e.marginPercent):null,preco_venda:e.salePrice!=null?Number(e.salePrice):null,qtd_atacado:e.wholesaleQty!=null?Number(e.wholesaleQty):null,preco_atacado:e.wholesalePrice!=null?Number(e.wholesalePrice):null,comissao_percent:e.commissionPercent!=null?Number(e.commissionPercent):null,desconto_percent:e.discountPercent!=null?Number(e.discountPercent):null,cfop_interno:e.cfopInterno||null,cst_icms_interno:e.cstIcmsInterno||null,csosn_interno:e.csosnInterno||null,aliquota_icms_interno:e.aliqIcmsInterno!=null?Number(e.aliqIcmsInterno):null,cfop_externo:e.cfopExterno||null,cst_icms_externo:e.cstIcmsExterno||null,csosn_externo:e.csosnExterno||null,aliquota_icms_externo:e.aliqIcmsExterno!=null?Number(e.aliqIcmsExterno):null,cst_pis_entrada:e.cstPisEntrada||null,cst_pis_saida:e.cstPisSaida||null,aliquota_pis_percent:e.aliqPisPercent!=null?Number(e.aliqPisPercent):null,aliquota_cofins_percent:e.aliqCofinsPercent!=null?Number(e.aliqCofinsPercent):null,cst_ipi:e.cstIpi||null,aliquota_ipi_percent:e.aliqIpiPercent!=null?Number(e.aliqIpiPercent):null,fcp_percent:e.fcpPercent!=null?Number(e.fcpPercent):null,mva_percent:e.mvaPercent!=null?Number(e.mvaPercent):null,base_reduzida_percent:e.baseReduzidaPercent!=null?Number(e.baseReduzidaPercent):null,ncm:e.ncm||null,descricao_ncm:e.ncmDescription||null,cest:e.cest||null,ativo:e.active!=null?!!e.active:!0,permite_venda:e.allowSale!=null?!!e.allowSale:!0,paga_comissao:e.payCommission!=null?!!e.payCommission:!1,preco_variavel:e.variablePrice!=null?!!e.variablePrice:!1,composicao:e.composition!=null?!!e.composition:!1,servico:e.service!=null?!!e.service:!1,grade:e.hasGrid!=null?!!e.hasGrid:!1,usar_tabela_preco:e.usePriceTable!=null?!!e.usePriceTable:!1,combustivel:e.fuel!=null?!!e.fuel:!1,usa_imei:e.useImei!=null?!!e.useImei:!1,controle_estoque_por_grade:e.stockByGrid!=null?!!e.stockByGrid:!1,mostrar_no_app:e.showInApp!=null?!!e.showInApp:!1,importado_via_xml:e.importedViaXML===!0,xml_chave:e.xmlChave||null,xml_numero:e.xmlNumero||null,xml_serie:e.xmlSerie||null,xml_emissao:e.xmlEmissao?new Date(e.xmlEmissao).toISOString():null}}async function dh(e={}){const{includeInactive:t=!1,search:r="",codigoEmpresa:n}=e;console.info("[products.api] listProducts: start");const{data:a,error:i}=await ko(l=>{let c=Oe.from("produtos").select("*").order("nome",{ascending:!0}).abortSignal(l);if(n&&(c=c.eq("codigo_empresa",n)),t||(c=c.or("status.is.null,status.neq.inactive")),r&&r.trim().length>0){const u=r.trim();c=c.or(`nome.ilike.%${u}%,codigo_produto.ilike.%${u}%`)}return c},15e3,"Timeout listProducts (15s)");if(i)throw console.error("[products.api] listProducts:error",i),i;const o=(a||[]).map(SD);return console.info("[products.api] listProducts: ok",{count:o.length}),o}async function hre(e,t={}){const{codigoEmpresa:r}=t,n=fre(e);r&&(n.codigo_empresa=r),console.info("[products.api] createProduct: payload",n);const a=async()=>ko(u=>Oe.from("produtos").insert(n).select("*").single().abortSignal(u),15e3,"Timeout createProduct (15s)"),i=u=>{if(!u)return!1;if(u.code&&String(u.code)==="23505")return!0;const d=[u.message,u.details,u.hint].filter(Boolean).join(" ").toLowerCase();return d.includes("duplicate key")||d.includes("unique constraint")||d.includes("ux_produtos_empresa_codigo_produto")||d.includes("codigo_produto")};let o,l;if({data:o,error:l}=await a(),l&&i(l)&&n.codigo_produto){console.warn("[products.api] createProduct: duplicate code, trying to free code from inactive product");const{data:u,error:d}=await ko(f=>Oe.from("produtos").select("id,status").eq("codigo_produto",n.codigo_produto).eq("status","inactive").limit(1).single().abortSignal(f),15e3,"Timeout find duplicate product (15s)");if(!d&&u&&u.status==="inactive"){const{error:f}=await ko(h=>Oe.from("produtos").update({codigo_produto:null}).eq("id",u.id).abortSignal(h),15e3,"Timeout clear duplicate code (15s)");f||({data:o,error:l}=await a())}}if(l)throw console.error("[products.api] createProduct:error",l),l;const c=SD(o);return console.info("[products.api] createProduct: ok",c),c}async function GJe(e,t,r={}){const n=fre(t);console.info("[products.api] updateProduct: id",e,"payload",n);const{data:a,error:i}=await ko(l=>Oe.from("produtos").update(n).eq("id",e).select("*").single().abortSignal(l),15e3,"Timeout updateProduct (15s)");if(i)throw console.error("[products.api] updateProduct:error",i),i;const o=SD(a);return console.info("[products.api] updateProduct: ok",o),o}async function ko(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(new Error(r)),t);try{return await e(n.signal)}catch(i){throw i?.name==="AbortError"?new Error(r):i}finally{clearTimeout(a)}}async function KJe(e){console.info("[products.api] deleteProduct (soft): id",e);const{error:t}=await ko(r=>Oe.from("produtos").update({status:"inactive",codigo_produto:null}).eq("id",e).abortSignal(r),15e3,"Timeout deleteProduct (15s)");if(t)throw console.error("[products.api] deleteProduct:error",t),t;return console.info("[products.api] deleteProduct: ok (inativado)"),!0}async function jz(){console.info("[products.api] listCategories: start");const{data:e,error:t}=await ko(n=>Oe.from("produto_categorias").select("nome").eq("ativa",!0).order("nome",{ascending:!0}).abortSignal(n),15e3,"Timeout listCategories (15s)");if(t)throw console.error("[products.api] listCategories:error",t),t;const r=(e||[]).map(n=>n.nome).filter(Boolean);return console.info("[products.api] listCategories: ok",{count:r.length}),r}async function YJe(e){const t=String(e||"").trim();if(!t)throw new Error("Nome da categoria invlido");console.info("[products.api] createCategory:",t);const{data:r,error:n}=await ko(a=>Oe.from("produto_categorias").insert({nome:t}).select("nome").single().abortSignal(a),15e3,"Timeout createCategory (15s)");if(n)throw console.error("[products.api] createCategory:error",n),n;return r?.nome||t}async function XJe(e){const t=String(e||"").trim();if(!t)throw new Error("Nome da categoria invlido");console.info("[products.api] removeCategory:",t);const{count:r,error:n}=await ko(l=>Oe.from("produtos").select("id",{count:"exact",head:!0}).eq("categoria",t).neq("status","inactive").abortSignal(l),15e3,"Timeout removeCategory:count (15s)");if(n)throw console.error("[products.api] removeCategory:count:error",n),n;if((r??0)>0){const l=new Error("Categoria possui produtos ativos vinculados");throw console.warn("[products.api] removeCategory: blocked by active products",{nome:t,prodCount:r}),l}const{data:a,error:i}=await ko(l=>Oe.from("produto_categorias").update({ativa:!1}).eq("nome",t).select("nome").abortSignal(l),15e3,"Timeout removeCategory (15s)");if(i)throw console.error("[products.api] removeCategory:error",i),i;if((Array.isArray(a)?a.length:0)===0){const l=new Error("Categoria no encontrada para desativar");throw console.warn("[products.api] removeCategory: no rows affected",{nome:t}),l}return!0}const JJe={available:{label:"Livre",color:"border-success/50 bg-success/10 text-success",icon:Ds},"in-use":{label:"Em Uso",color:"border-warning/50 bg-warning/10 text-warning",icon:Yg},"awaiting-payment":{label:"Pagamento",color:"border-info/50 bg-info/10 text-info",icon:Kl}},QJe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ZJe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function eQe(){const{toast:e}=Za(),{userProfile:t,authReady:r}=po(),n=Wc(),[a,i]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState(!1),[d,f]=v.useState(0),h=v.useRef(!1),[m,g]=v.useState(!1);v.useState([]);const[p,y]=v.useState(!1),[x,b]=v.useState(!1),[w,S]=v.useState(null),[j,A]=v.useState(null),[P,C]=v.useState(!1),[E,R]=v.useState(!1),[k,T]=v.useState(!1),[I,M]=v.useState([]),[z,W]=v.useState(!1),[U,$]=v.useState(!1),[G,me]=v.useState(!1),[de,L]=v.useState(null),[B,X]=v.useState(""),[q,Y]=v.useState(!1),[Z,ge]=v.useState(!1),[re,Se]=v.useState([]),[Ie,pe]=v.useState(null),[Ue,_e]=v.useState(null),[ue,Ft]=v.useState(!1),[qt,zt]=v.useState(!1),[it,ft]=v.useState("order"),dt=G||U||E||p||q||ue||m||P||qt||!1,ve=dt?void 0:QJe,ut=dt?void 0:ZJe,Te=v.useRef(null),Ze=v.useRef(!1),Ye=v.useRef(""),Nt=v.useCallback(async()=>{try{const te=await Of({codigoEmpresa:t?.codigo_empresa});u(!!(te&&(te.id||te?.length)))}catch{u(!1)}},[t?.codigo_empresa]);v.useEffect(()=>{const te=Te.current??document.body.style.overflow;if(Te.current=te,dt&&!Ze.current){document.body.style.overflow="hidden";try{const Ne=window.innerWidth-document.documentElement.clientWidth;Ne>0&&(Ye.current=document.body.style.paddingRight||"",document.body.style.paddingRight=`${Ne}px`)}catch{}try{document.documentElement.classList.add("no-dialog-anim")}catch{}}if(!dt&&Ze.current){document.body.style.overflow=te||"";try{document.body.style.paddingRight=Ye.current||""}catch{}try{document.documentElement.classList.remove("no-dialog-anim")}catch{}}return Ze.current=dt,()=>{document.body.style.overflow=te||"";try{document.body.style.paddingRight=Ye.current||""}catch{}try{document.documentElement.classList.remove("no-dialog-anim")}catch{}}},[dt]);const nt=async()=>{const te=t?.codigo_empresa||null;try{if(!te)return;b(!0);const[Ne,V]=await Promise.all([cb({codigoEmpresa:te}).catch(()=>null),Of({codigoEmpresa:te}).catch(()=>null)]);if(!V?.id){S(null);return}let ee=0,oe=[];try{oe=await Rg({caixaSessaoId:V.id,codigoEmpresa:te}),ee=(oe||[]).filter(ke=>(ke?.tipo||"")==="sangria").reduce((ke,Me)=>ke+Number(Me?.valor||0),0)}catch{}const ye={saldo_inicial:V.saldo_inicial||0,totalPorFinalizadora:Ne?.totalPorFinalizadora||Ne?.porFinalizadora||{},totalEntradas:Ne?.totalEntradas||Ne?.entradas||0,totalSangria:ee,totalSaidas:ee,sessaoId:V.id,movimentacoes:oe};S(ye)}catch{S(null)}finally{b(!1)}};v.useEffect(()=>{(async()=>{try{if(!p)return;await nt()}catch{}})()},[p,t?.codigo_empresa]);const mt=te=>te==="in_use"?"in-use":te==="awaiting_payment"?"awaiting-payment":"available",At=v.useRef(!0);v.useEffect(()=>(At.current=!0,()=>{At.current=!1}),[]);const Pe=v.useRef(0),Je=v.useRef(0),Dt=v.useRef(0);v.useEffect(()=>{const te=t?.codigo_empresa||null,Ne=te?`vendas:tables:${te}`:null,V="[Vendas:loadTables]",ee=()=>{try{if(!Ne)return;const ye=JSON.parse(localStorage.getItem(Ne)||"[]");Array.isArray(ye)&&ye.length>0&&i(ye)}catch{}};te&&ee();const oe=async()=>{try{if(!r||!te)return;const ye=++Dt.current;try{console.group(V)}catch{}try{console.log("start",{codigoEmpresa:te})}catch{}const ke=setTimeout(()=>{if(At.current){try{console.warn(V+" still waiting... (showing cached tables if any)")}catch{}ee()}},2e3),Me=setTimeout(()=>{if(At.current&&Dt.current===ye){try{console.warn(V+" safety timeout reached")}catch{}ee()}},1e4);let ie=await vg(te),ce=[];try{ce=await ed({codigoEmpresa:te}),console.log("[VendasPage:load] Comandas abertas carregadas:",ce)}catch(vt){console.error("[VendasPage:load] Erro ao carregar comandas abertas:",vt)}const he=await(async()=>{try{return await RO((ce||[]).map(vt=>vt.id),te)}catch{return{}}})(),Ke=await(async()=>{try{const vt=await Promise.all((ce||[]).map(async ht=>{try{const Gt=(await Xo({comandaId:ht.id,codigoEmpresa:te})||[]).map(ct=>ct?.nome).filter(Boolean);return[ht.id,Gt.length?Gt.join(", "):null]}catch{return[ht.id,null]}}));return Object.fromEntries(vt)}catch{return{}}})(),rt=new Map;(ce||[]).forEach(vt=>rt.set(vt.mesa_id,vt));const $e=(ie||[]).map(vt=>{const ht=rt.get(vt.id);let tr=mt(vt.status),Gt=null,ct=0,sr=null;return ht&&(tr=ht.status==="awaiting-payment"||ht.status==="awaiting_payment"?"awaiting-payment":"in-use",Gt=ht.id,ct=Number(he[ht.id]||0),sr=Ke[ht.id]||null),{id:vt.id,number:vt.numero,name:vt.nome||null,status:tr,order:[],customer:sr,comandaId:Gt,totalHint:ct}}).map(vt=>o&&vt.id===o.id?{...vt,order:o.order||[],customer:o.customer||vt.customer}:vt);if(!At.current||Dt.current!==ye){clearTimeout(ke),clearTimeout(Me);return}if(i($e),($e||[]).length===0)try{Ne&&localStorage.removeItem(Ne)}catch{}else try{Ne&&localStorage.setItem(Ne,JSON.stringify($e))}catch{}Je.current=Array.isArray($e)?$e.length:0,Pe.current=Date.now();let bt=null;try{const vt=te?`vendas:selected:${te}`:null,ht=vt?localStorage.getItem(vt):null;if(ht){const tr=$e.find(Gt=>String(Gt.id)===String(ht));tr&&(bt=tr)}}catch{}bt?q||l(bt):q||l(vt=>{const ht=vt?$e.find(Gt=>Gt.id===vt.id):null;return(ht&&vt?{...ht,order:vt.order||ht.order,customer:vt.customer||ht.customer}:ht)||$e[0]||null});try{let vt=await dh({includeInactive:!1,codigoEmpresa:te});(!Array.isArray(vt)||vt.length===0)&&(console.warn("[VendasPage] Nenhum produto ativo encontrado. Tentando carregar inativos tambm..."),vt=await dh({includeInactive:!0,codigoEmpresa:te})),M(vt||[]),console.info("[VendasPage] Produtos carregados:",(vt||[]).length)}catch(vt){console.warn("Falha ao carregar produtos:",vt?.message||vt)}try{console.log("ok",{tables:$e.length,openComandas:(ce||[]).length})}catch{}try{console.groupEnd()}catch{}clearTimeout(ke),clearTimeout(Me)}catch(ye){console.error("Erro ao carregar mesas:",ye)}};return ee(),r&&te&&oe(),()=>{}},[r,t?.codigo_empresa,dt]),v.useEffect(()=>{!r||!t?.codigo_empresa||Nt()},[r,t?.codigo_empresa,Nt]),v.useEffect(()=>{(async()=>{if(!h.current&&d>0&&!c){h.current=!0;try{await td({codigoEmpresa:t?.codigo_empresa}),await Nt()}catch{}}})()},[d,c,Nt,t?.codigo_empresa]),v.useEffect(()=>{let te=!0;return(async()=>{try{if(!t?.codigo_empresa){te&&f(0);return}const Ne=await ed({codigoEmpresa:t?.codigo_empresa});if(!te)return;f(Array.isArray(Ne)?Ne.length:0)}catch{te&&f(0)}})(),()=>{te=!1}},[t?.codigo_empresa,a.length]),v.useEffect(()=>{const te=t?.codigo_empresa||null,Ne=te?`vendas:selected:${te}`:null;try{Ne&&o?.id&&localStorage.setItem(Ne,String(o.id))}catch{}o?.comandaId&&(!o.order||o.order.length===0)&&ur(o)},[o?.id,o?.comandaId]),v.useEffect(()=>{const te=()=>{!dt&&!k&&o?.comandaId&&ur(o)},Ne=()=>{!dt&&!k&&document.visibilityState==="visible"&&o?.comandaId&&ur(o)};return window.addEventListener("focus",te),document.addEventListener("visibilitychange",Ne),()=>{window.removeEventListener("focus",te),document.removeEventListener("visibilitychange",Ne)}},[o?.comandaId,dt,k]);const qe=async()=>{try{if(!o?.comandaId){e({title:"Selecione uma mesa com comanda aberta",variant:"warning"});return}await td({codigoEmpresa:t?.codigo_empresa});try{const ee=(await Ya({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(ye=>({id:ye.id,productId:ye.produto_id,name:ye.descricao||"Item",price:Number(ye.preco_unitario||0),quantity:Number(ye.quantidade||1)})),oe={...o,order:ee};l(oe),i(ye=>ye.map(ke=>ke.id===oe.id?oe:ke))}catch{}const te=await Mg({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa});Se(te||[]);const Ne=te&&te[0]&&te[0].id?te[0].id:null;pe(Ne),_e(Ne),Y(!0)}catch(te){e({title:"Falha ao carregar finalizadoras",description:te?.message||"Tente novamente",variant:"destructive"})}},lt=te=>{if(!te.destination)return;const Ne=Array.from(a),[V]=Ne.splice(te.source.index,1);Ne.splice(te.destination.index,0,V),i(Ne),e({title:"Layout das mesas atualizado!",description:"As posies foram salvas temporariamente.",variant:"success"})},Bt=te=>(te||[]).reduce((Ne,V)=>Ne+V.price*V.quantity,0),Tt=te=>{if(!te)return"";const Ne=te.trim().split(/\s+/);return Ne.length<=2?te:Ne.slice(0,2).join(" ")},er=te=>{if(!te)return"";const Ne=ee=>String(ee).replace(/^\s*[\[]+\s*/g,"").replace(/\s*[\]]+\s*$/g,"").trim(),V=te.split(",").map(ee=>Ne(ee)).filter(Boolean);return V.length===0?"":V.length===1?Tt(V[0]):`${Tt(V[0])} +${V.length-1}`},tt=v.useMemo(()=>{const te=new Map,Ne=o?.order||[];for(const V of Ne){const ee=V.productId;ee&&te.set(ee,(te.get(ee)||0)+Number(V.quantity||0))}return te},[o?.order]),ur=async te=>{try{if(!te?.comandaId)return;const V=(await Ya({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(ye=>({id:ye.id,productId:ye.produto_id,name:ye.descricao||"Item",price:Number(ye.preco_unitario||0),quantity:Number(ye.quantidade||1)}));let ee=te.customer||null;try{const ke=(await Xo({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(Me=>Me?.nome).filter(Boolean);ee=ke.length?ke.join(", "):null}catch{}const oe={...te,status:te.status==="awaiting-payment"?"awaiting-payment":"in-use",order:V,customer:ee};l(oe),i(ye=>ye.map(ke=>ke.id===oe.id?oe:ke))}catch(Ne){console.warn("[VendasPage] Falha ao recarregar detalhes da mesa selecionada:",Ne)}},ln=async({showToast:te=!1}={})=>{try{const Ne=t?.codigo_empresa;if(!Ne){console.warn("[refreshTablesLight] Cdigo da empresa no disponvel");return}console.log("[refreshTablesLight] Iniciando atualizao das mesas...");const V=await vg(Ne);console.log("[refreshTablesLight] Mesas carregadas:",V?.length||0);let ee=[];try{ee=await ed({codigoEmpresa:Ne}),console.log("[refreshTablesLight] Comandas abertas:",ee?.length||0)}catch(ce){console.error("[refreshTablesLight] Erro ao carregar comandas:",ce)}const oe=new Map((ee||[]).map(ce=>[ce.mesa_id,ce])),ye={},ke={};try{const ce=(ee||[]).map(rt=>rt.id);(await Promise.all(ce.map(async rt=>{try{return{id:rt,vinculos:await Xo({comandaId:rt,codigoEmpresa:Ne})}}catch{return{id:rt,vinculos:[]}}}))).forEach(({id:rt,vinculos:Ge})=>{const $e=(Ge||[]).map(bt=>bt?.nome).filter(Boolean);ye[rt]=$e.length?$e.join(", "):null}),(await Promise.all(ce.map(async rt=>{try{const Ge=await Ya({comandaId:rt,codigoEmpresa:Ne}),$e=(Ge||[]).reduce((bt,vt)=>{const ht=(vt.quantidade||0)*(vt.preco_unitario||0)-(vt.desconto||0);return bt+ht},0);return console.log(`[refreshTablesLight] Comanda ${rt}: ${Ge?.length||0} itens, total: R$ ${$e.toFixed(2)}`),{comandaId:rt,total:$e}}catch(Ge){return console.error(`[refreshTablesLight] Erro ao buscar itens da comanda ${rt}:`,Ge),{comandaId:rt,total:0}}}))).forEach(({comandaId:rt,total:Ge})=>{ke[rt]=Ge})}catch(ce){console.error("[refreshTablesLight] Erro ao carregar clientes/totais:",ce)}const ie=(V||[]).map(ce=>{const he=oe.get(ce.id);let Ke=mt(ce.status),rt=null,Ge=null,$e=0;return he&&(Ke=he.status==="awaiting-payment"||he.status==="awaiting_payment"?"awaiting-payment":"in-use",rt=he.id,Ge=ye[he.id]||null,$e=ke[he.id]||0),{id:ce.id,number:ce.numero,name:ce.nome||null,status:Ke,order:[],customer:Ge,comandaId:rt,totalHint:$e}}).map(ce=>o&&ce.id===o.id?{...ce,order:o.order||[],customer:o.customer||ce.customer}:ce);i(ie),console.log("[refreshTablesLight] Mesas atualizadas com sucesso:",ie.length)}catch(Ne){console.error("[refreshTablesLight] Erro fatal:",Ne),te&&e({title:"Erro ao atualizar mesas",description:"Recarregue a pgina se o problema persistir",variant:"destructive"})}},rn=async te=>{if(!Z){ge(!0);try{const Ne=o;if(W(!0),te.comandaId){console.log(`[handleSelectTable] Verificando status da comanda ${te.comandaId}`);try{const{data:V,error:ee}=await Oe.from("comandas").select("id, status, fechado_em").eq("id",te.comandaId).eq("codigo_empresa",t?.codigo_empresa).single();if(ee||!V){console.log(`[handleSelectTable] Comanda ${te.comandaId} no encontrada, criando nova`),L(te),$(!0);return}if(V.fechado_em||V.status==="closed"){console.log(`[handleSelectTable] Comanda ${te.comandaId} est fechada, criando nova`),L(te),$(!0);return}console.log(`[handleSelectTable] Comanda ${te.comandaId} ativa, carregando dados`);const ye=(await Ya({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(ie=>({id:ie.id,name:ie.descricao||"Item",price:Number(ie.preco_unitario||0),quantity:Number(ie.quantidade||1)}));let ke=null;try{const ce=(await Xo({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(he=>he?.nome).filter(Boolean);ke=ce.length?ce.join(", "):null,console.log(`[handleSelectTable] Clientes da comanda ativa ${te.comandaId}:`,ce)}catch(ie){console.error("[handleSelectTable] Erro ao carregar clientes:",ie)}const Me={...te,status:"in-use",order:ye,customer:ke};l(Me),i(ie=>ie.map(ce=>ce.id===te.id?Me:ce))}catch(V){console.error("[handleSelectTable] Erro ao verificar comanda:",V),L(te),$(!0)}}else L(te),$(!0)}catch(Ne){e({title:"Falha ao carregar comanda da mesa",description:Ne?.message||"Tente novamente",variant:"destructive"}),l(V=>V||previous||null)}finally{W(!1),ge(!1)}}},fr=({table:te,provided:Ne,isDragging:V})=>{const ee=JJe[te.status],oe=ee.icon,ye=Bt(te.order);er(te.customer);const ke=te.status==="in-use"||te.status==="awaiting-payment"?ye>0?ye:Number(te.totalHint||0):0,Me=te.status==="available"?"text-success bg-success/10 border-success/30":te.status==="in-use"?"text-warning bg-warning/10 border-warning/30":"text-info bg-info/10 border-info/30";return s.jsxs("div",{ref:Ne.innerRef,...Ne.draggableProps,className:Ot("p-4 rounded-lg border bg-surface flex flex-col transition-colors duration-150 relative h-44 shadow-sm min-w-[240px]",V&&"shadow-lg",o?.id===te.id&&"ring-2 ring-brand/60 bg-surface-2",c?"cursor-pointer hover:shadow-md":"cursor-not-allowed opacity-60"),onClick:()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}rn(te)},children:[s.jsx("div",{...Ne.dragHandleProps,className:"absolute top-2 right-2 text-text-muted opacity-60 hover:opacity-100",children:s.jsx(pce,{size:14})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(oe,{className:"w-5 h-5 text-text-secondary"}),s.jsx("span",{className:"text-lg font-semibold text-text-primary truncate flex-1",children:te.name?te.name:`Mesa ${te.number}`}),s.jsx("span",{className:Ot("text-[11px] font-medium px-2 py-0.5 rounded-full border",Me),children:ee.label})]}),s.jsx("div",{className:Ot("flex-1 flex items-center justify-center"),children:te.status==="available"?s.jsx("img",{src:"/mesalivre.png",alt:"Mesa livre",className:Ot("w-16 h-16 object-contain opacity-80 transition-all duration-200",o?.id===te.id&&"opacity-100 scale-110")}):te.status==="in-use"?s.jsx("img",{src:"/mesaocupada.png",alt:"Mesa ocupada",className:Ot("w-16 h-16 object-contain opacity-80 transition-all duration-200",o?.id===te.id&&"opacity-100 scale-110")}):s.jsx("div",{className:Ot("w-16 h-16 rounded-lg bg-info/20 border-2 border-info/40 flex items-center justify-center transition-all duration-200",o?.id===te.id&&"bg-info/30 border-info/60 scale-110"),children:s.jsx(Kl,{className:"w-8 h-8 text-info"})})}),te.status==="in-use"||te.status==="awaiting-payment"?s.jsxs("div",{className:"w-full mt-auto",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(hs,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),s.jsx("div",{className:"text-sm sm:text-base font-medium text-text-primary truncate",title:te.customer||"",children:er(te.customer)||""})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(dl,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),s.jsxs("div",{className:"text-sm font-bold text-text-secondary",children:["R$ ",ke.toFixed(2)]})]})]}):s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"text-xs text-text-muted text-center",children:"Sem comanda"})})]})},Zt=()=>{const te=o?Bt(o.order):0,[Ne,V]=v.useState(!1),[ee,oe]=v.useState([]),[ye,ke]=v.useState(1),[Me,ie]=v.useState([]),ce=v.useRef(new Map),he=typeof window<"u"&&window.innerWidth<=640,Ke=bt=>{const vt=String(bt||"").replace(/\D/g,"");return vt?Number(vt)/100:0},rt=()=>(ee||[]).reduce((bt,vt)=>bt+Ke(vt.value),0),Ge=(bt,vt)=>{try{if(he)return;const ht=(ee||[]).findIndex(tr=>tr.id===vt);if(ht>=0){const tr=(ee||[])[ht+1]||null;if(tr&&ce.current.get(tr.id)){const Gt=ce.current.get(tr.id);setTimeout(()=>{try{Gt.focus(),Gt.select?.()}catch{}},0);return}}if(bt&&bt instanceof HTMLElement){const tr=Array.from(document.querySelectorAll('input[data-pay-value="1"]')),Gt=tr.indexOf(bt);if(Gt>=0&&tr[Gt+1]){const ct=tr[Gt+1];setTimeout(()=>{try{ct.focus(),ct.select?.()}catch{}},0);return}}oe(tr=>{const Gt=Me[0]?.id||"",ct=re&&re[0]&&re[0].id?re[0].id:null,sr=ye,dr=[...tr,{id:sr,clientId:Gt,methodId:ct,value:""}];return ke(Ht=>Ht+1),he||setTimeout(()=>{const Ht=ce.current.get(sr);if(Ht)try{Ht.focus(),Ht.select?.()}catch{}},0),dr})}catch{}};v.useEffect(()=>{let bt=!0;return(async()=>{try{if(!q||!o?.comandaId)return;let ht=[];try{const sr=await Xo({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa});ht=(Array.isArray(sr)?sr:[]).map(Ht=>{const Br=Ht?.cliente_id??Ht?.clientes?.id??null,vn=Ht?.clientes?.nome??Ht?.nome??Ht?.nome_livre??"";return Br?{id:Br,nome:vn}:null}).filter(Boolean)}catch{ht=[]}if(!bt)return;ie(ht);let tr=re&&re[0]&&re[0].id?re[0].id:null,Gt=ht[0]?.id||null,ct="";try{const dr=(await Ya({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).reduce((Ht,Br)=>Ht+Number(Br.quantidade||0)*Number(Br.preco_unitario||0),0);dr>0&&(ct=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(dr))}catch{}oe([{id:1,clientId:Gt,methodId:tr,value:ct}]),ke(2)}catch{}})(),()=>{bt=!1}},[q,o?.comandaId]),v.useEffect(()=>{let bt=!0;return(async()=>{try{if(!q||Array.isArray(re)&&re.length>0)return;const ht=await Mg({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa});if(!bt)return;Se(ht||[])}catch{}})(),()=>{bt=!1}},[q]);const $e=async()=>{try{if(!o?.comandaId)return;const bt=t?.codigo_empresa;if(!bt){e({title:"Empresa no definida",variant:"destructive"});return}if(!Array.isArray(ee)||ee.length===0){e({title:"Informe os pagamentos",description:"Adicione pelo menos uma forma de pagamento.",variant:"warning"});return}for(const ct of ee){if(!ct.methodId){e({title:"Forma de pagamento faltando",description:"Selecione a finalizadora em todas as linhas.",variant:"warning"});return}if(Ke(ct.value)<=0){e({title:"Valor invlido",description:"Informe valores maiores que zero.",variant:"warning"});return}}const vt=te>0?te:0,ht=rt(),tr=Math.abs(ht-vt);if(tr>.009&&tr<=.05){const ct=vt-ht;oe(sr=>{const dr=sr.length-1;return sr.map((Ht,Br)=>{if(Br===dr){const Da=Ke(Ht.value)+ct,It=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Da);return{...Ht,value:It}}return Ht})})}else if(tr>.05){const ct=vt-ht;ct>0?e({title:"Valor insuficiente",description:`Faltam R$ ${ct.toFixed(2)} para fechar o total.`,variant:"warning"}):e({title:"Valor excedente",description:`Excedeu em R$ ${Math.abs(ct).toFixed(2)}. Ajuste os valores.`,variant:"warning"});return}let Gt=te;if(Gt<=0)try{Gt=(await Ya({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).reduce((dr,Ht)=>dr+Number(Ht.quantidade||0)*Number(Ht.preco_unitario||0),0)}catch{}V(!0),await td({codigoEmpresa:t?.codigo_empresa});for(const ct of ee){const sr=Ke(ct.value),dr=re.find(Br=>String(Br.id)===String(ct.methodId)),Ht=dr?.nome||dr?.tipo||"outros";await FO({comandaId:o.comandaId,finalizadoraId:ct.methodId,metodo:Ht,valor:sr,status:"Pago",codigoEmpresa:bt,clienteId:ct.clientId||null})}await AS({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa}),i(ct=>ct.map(sr=>sr.id===o.id?{...sr,status:"available",order:[],comandaId:null,customer:null,totalHint:0}:sr)),l(ct=>ct&&{...ct,status:"available",order:[],comandaId:null,customer:null,totalHint:0});try{t?.codigo_empresa&&localStorage.removeItem(`vendas:tables:${t.codigo_empresa}`)}catch{}try{const ct=await vg(t?.codigo_empresa),sr=await ed({codigoEmpresa:t?.codigo_empresa}),dr={};await Promise.all((sr||[]).map(async Br=>{try{const Da=(await Xo({comandaId:Br.id,codigoEmpresa:t?.codigo_empresa})||[]).map(It=>It?.nome).filter(Boolean);dr[Br.id]=Da.length?Da.join(", "):null}catch{dr[Br.id]=null}}));const Ht=(ct||[]).map(Br=>{const vn=(sr||[]).find(Da=>Da.mesa_id===Br.id);return{id:Br.id,name:Br.nome||`Mesa ${Br.numero}`,status:vn?"in-use":"available",comandaId:vn?.id||null,customer:vn?dr[vn.id]:null,order:[],totalHint:0}});i(Ht)}catch{}e({title:"Pagamento registrado",description:`Total R$ ${Gt.toFixed(2)}`,variant:"success"}),Y(!1)}catch(bt){e({title:"Falha ao registrar pagamento",description:bt?.message||"Tente novamente",variant:"destructive"})}finally{V(!1)}};return ee&&ee.length>0,s.jsx(qr,{open:q,onOpenChange:Y,children:s.jsxs(Lr,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:bt=>bt.stopPropagation(),onKeyDownCapture:bt=>bt.stopPropagation(),onPointerDownOutside:bt=>bt.stopPropagation(),onInteractOutside:bt=>bt.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Fechar Conta"}),s.jsx(Jr,{children:"Divida o pagamento entre clientes e vrias finalizadoras, se necessrio."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-lg font-semibold",children:"Total"}),s.jsxs("div",{className:"text-lg font-bold",children:["R$ ",te.toFixed(2)]})]}),s.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto thin-scroll pr-1 max-h-[60vh]",children:[s.jsx(gt,{className:"block",children:"Pagamentos"}),(ee||[]).map((bt,vt)=>{const ht=ct=>{if(!ct)return"Cliente";const sr=(Me||[]).find(dr=>String(dr.id)===String(ct));return sr?.nome?sr.nome:"Cliente"},tr=(Me||[]).length>1,Gt=(Me||[])[0]||null;return(Me||[]).filter(ct=>String(ct.id)!==String(Gt?.id||"")),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"sm:col-span-1 flex sm:justify-start",children:ee.length>1&&vt>0&&s.jsx(Ee,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8",onClick:()=>{oe(ct=>{const sr=ct.filter(vn=>vn.id!==bt.id);if(sr.length===0)return[];const dr=te>0?te:0,Ht=Math.floor(dr/sr.length*100)/100,Br=dr-Ht*sr.length;return sr.map((vn,Da)=>{const It=Da===sr.length-1?Ht+Br:Ht,Zn=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(It);return{...vn,value:Zn}})})},children:""})}),vt===0?s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:ht(Gt?.id||bt.clientId)})}):tr?s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(yn,{value:bt.clientId||"",onValueChange:ct=>oe(sr=>sr.map(dr=>dr.id===bt.id?{...dr,clientId:ct}:dr)),children:[s.jsx(pn,{className:"w-full truncate",children:s.jsx(xn,{placeholder:"Cliente"})}),s.jsx(gn,{children:(Me||[]).map(ct=>s.jsx(Wt,{value:ct.id,children:ct.nome},ct.id))})]})}):s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:ht(Gt?.id||bt.clientId)})}),s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(yn,{value:bt.methodId||"",onValueChange:ct=>oe(sr=>sr.map(dr=>dr.id===bt.id?{...dr,methodId:ct}:dr)),children:[s.jsx(pn,{className:"w-full truncate",children:s.jsx(xn,{placeholder:"Forma de pagamento"})}),s.jsx(gn,{children:(re||[]).map(ct=>s.jsx(Wt,{value:ct.id,children:ct.nome},ct.id))})]})}),s.jsx("div",{className:"sm:col-span-3",children:s.jsx($t,{placeholder:"0,00",inputMode:"numeric",value:bt.value,"data-pay-value":"1",ref:ct=>{ct?ce.current.set(bt.id,ct):ce.current.delete(bt.id)},onChange:ct=>{const sr=(ct.target.value||"").replace(/\D/g,""),dr=sr?Number(sr)/100:0,Ht=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(dr);oe(Br=>Br.map(vn=>vn.id===bt.id?{...vn,value:Ht}:vn))},onKeyDown:ct=>{if(ct.stopPropagation(),ct.key==="Enter"){ct.preventDefault(),Ge(ct.currentTarget,bt.id);return}["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(ct.key)||/^[0-9]$/.test(ct.key)||ct.preventDefault()},onBeforeInput:ct=>{const sr=ct.data??"";sr&&/\D/.test(sr)&&ct.preventDefault()}})})]},bt.id)}),s.jsx("div",{children:s.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>{oe(bt=>{const vt=Me[0]?.id||"",ht=re&&re[0]&&re[0].id?re[0].id:null,tr=[...bt,{id:ye,clientId:vt,methodId:ht,value:""}],Gt=te>0?te:0,ct=Math.floor(Gt/tr.length*100)/100,sr=Gt-ct*tr.length;return tr.map((dr,Ht)=>{const Br=Ht===tr.length-1?ct+sr:ct,vn=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Br);return{...dr,value:vn}})}),ke(bt=>bt+1)},children:"Adicionar forma"})}),s.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[s.jsx("span",{children:"Soma"}),s.jsxs("span",{children:["R$ ",rt().toFixed(2)]})]}),s.jsxs("div",{className:"text-sm font-semibold flex justify-between",children:[s.jsx("span",{children:"Restante"}),s.jsxs("span",{className:Math.abs(te-rt())<.005?"text-success":"text-warning",children:["R$ ",(te-rt()).toFixed(2)]})]})]})]}),s.jsxs(mn,{children:[s.jsx(Ee,{type:"button",variant:"outline",onClick:()=>Y(!1),disabled:Ne,children:"Cancelar"}),s.jsx(Ee,{type:"button",onClick:$e,disabled:!(ee&&ee.length>0&&!Ne),children:Ne?"Processando...":"Confirmar Pagamento"})]})]})})},Qn=()=>{const te=Ge=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(Ge||0));Number(w?.saldo_inicial??w?.saldoInicial??0);const Ne=w?.totalPorFinalizadora||w?.porFinalizadora||{},V=Number(w?.totalEntradas??w?.entradas??0);V>0||Object.values(Ne||{}).reduce((Ge,$e)=>Ge+Number($e||0),0);const ee=Number(w?.sangria??w?.totalSangria??0);Number(w?.totalSaidas??w?.saidas??ee);const[oe,ye]=v.useState(!1),[ke,Me]=v.useState(""),[ie,ce]=v.useState(""),[he,Ke]=v.useState(!1),rt=async()=>{try{Ke(!0);const Ge=String(ke||"").replace(/\D/g,""),$e=Ge?Number(Ge)/100:0;if($e<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await td({codigoEmpresa:t?.codigo_empresa}),await Iee({tipo:"sangria",valor:$e,observacao:ie,codigoEmpresa:t?.codigo_empresa}),ye(!1),Me(""),ce(""),await nt(),e({title:"Sangria registrada",variant:"success"})}catch(Ge){e({title:"Falha ao registrar sangria",description:Ge?.message||"Tente novamente",variant:"destructive"})}finally{Ke(!1)}};return s.jsx(qr,{open:p,onOpenChange:y,children:s.jsxs(Lr,{className:"sm:max-w-lg w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:Ge=>Ge.stopPropagation(),onKeyDownCapture:Ge=>Ge.stopPropagation(),onPointerDownOutside:Ge=>Ge.stopPropagation(),onInteractOutside:Ge=>Ge.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),s.jsx(Jr,{children:"Resumo da sesso atual do caixa."})]}),x?s.jsx("div",{className:"text-sm text-text-muted px-3",children:"Atualizando..."}):s.jsxs("div",{className:"px-1",children:[Object.keys(Ne).length===0?s.jsx("div",{className:"p-3 text-sm text-text-muted border rounded-md",children:"Nenhuma finalizadora registrada ainda."}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"rounded-md border border-border overflow-hidden divide-y divide-border",children:Object.entries(Ne).map(([Ge,$e])=>s.jsxs("li",{className:"bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:String(Ge)}),s.jsx("span",{className:"text-sm font-semibold tabular-nums",children:te($e)})]},Ge))}),s.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Sangrias"}),s.jsx("span",{className:"text-sm font-semibold tabular-nums text-danger",children:te(ee)})]})]}),s.jsx("div",{className:"mt-3 text-xs text-text-muted leading-relaxed px-1",children:'Sadas incluem sangrias e ajustes. Use "Registrar Sangria" para lanar uma retirada.'})]}),s.jsxs(mn,{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"mr-auto"}),s.jsx(Ee,{variant:"destructive",onClick:()=>ye(!0),children:"Registrar Sangria"}),s.jsx(Ee,{variant:"secondary",onClick:()=>y(!1),children:"Fechar"})]}),s.jsx(qr,{open:oe,onOpenChange:ye,children:s.jsxs(Lr,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:Ge=>Ge.stopPropagation(),onKeyDownCapture:Ge=>Ge.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold",children:"Registrar Sangria"}),s.jsx(Jr,{children:"Informe o valor a retirar do caixa e, opcionalmente, uma observao."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"sangria-valor",children:"Valor"}),s.jsx($t,{id:"sangria-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:ke,onChange:Ge=>{const $e=(Ge.target.value||"").replace(/\D/g,""),bt=$e?Number($e)/100:0,vt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(bt);Me(vt)},onKeyDown:Ge=>{Ge.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(Ge.key)&&(/^[0-9]$/.test(Ge.key)||Ge.preventDefault())},onBeforeInput:Ge=>{const $e=Ge.data??"";$e&&/\D/.test($e)&&Ge.preventDefault()}})]}),s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"sangria-obs",children:"Observao"}),s.jsx($t,{id:"sangria-obs",placeholder:"Opcional",value:ie,onChange:Ge=>ce(Ge.target.value)})]})]}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>ye(!1),disabled:he,children:"Cancelar"}),s.jsx(Ee,{onClick:rt,disabled:he,children:he?"Registrando...":"Confirmar"})]})]})})]})})},Kn=()=>{const te=o,Ne=te?.order||[],V=te?Bt(Ne):0;return s.jsx(qr,{open:E,onOpenChange:R,children:s.jsxs(Lr,{className:"sm:max-w-xl w-[92vw] animate-none",onKeyDown:ee=>ee.stopPropagation(),onKeyDownCapture:ee=>ee.stopPropagation(),onPointerDownOutside:ee=>ee.stopPropagation(),onInteractOutside:ee=>ee.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsxs($r,{className:"text-2xl font-bold",children:["Comanda da Mesa ",te?.number??""]}),s.jsx(Jr,{children:te?.customer?`Cliente: ${te.customer}`:"Sem cliente vinculado"})]}),s.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto thin-scroll",children:Ne.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhum item na comanda."}):s.jsx("ul",{className:"divide-y divide-border",children:Ne.map(ee=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:ee.name}),s.jsxs("div",{className:"text-xs text-text-muted",children:["Qtd: ",ee.quantity,"  Unit: R$ ",Number(ee.price||0).toFixed(2)]})]}),s.jsxs("div",{className:"font-semibold",children:["R$ ",(Number(ee.price||0)*Number(ee.quantity||0)).toFixed(2)]})]},ee.id))})}),s.jsxs(mn,{children:[s.jsxs("div",{className:"mr-auto text-sm font-semibold",children:["Total: R$ ",V.toFixed(2)]}),s.jsx(Ee,{variant:"secondary",onClick:()=>R(!1),children:"Fechar"}),s.jsxs(Ee,{onClick:async()=>{R(!1),await qe()},disabled:!te||Ne.length===0,children:[s.jsx(dl,{className:"mr-2 h-4 w-4"})," Fechar Conta"]})]})]})})},Ce=({table:te})=>{if(!te)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-text-muted",children:[s.jsx(hE,{size:48,className:"mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Nenhuma mesa selecionada"}),s.jsx("p",{children:"Clique em uma mesa para ver os detalhes da comanda."})]});const Ne=Bt(te.order),V=er(te.customer),ee=async()=>{if(!te?.comandaId)return;const Me=(await Ya({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(he=>({id:he.id,productId:he.produto_id,name:he.descricao||"Item",price:Number(he.preco_unitario||0),quantity:Number(he.quantidade||1)}));let ie=te.customer||null;try{const Ke=(await Xo({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(rt=>rt?.nome).filter(Boolean);ie=Ke.length?Ke.join(", "):null}catch{}const ce={...te,order:Me,customer:ie};l(ce),i(he=>he.map(Ke=>Ke.id===ce.id?ce:Ke))},oe=async(ke,Me)=>{try{const ce=Number(ke.quantity||1)+Me;if(ce<=0){await Lg({itemId:ke.id,codigoEmpresa:t?.codigo_empresa}),await ee(),e({title:"Item removido",description:ke.name,variant:"warning"});return}await ad({itemId:ke.id,quantidade:ce,codigoEmpresa:t?.codigo_empresa}),await ee(),e({title:"Quantidade atualizada",description:`${ke.name}: ${ce}`,variant:"success"})}catch(ie){e({title:"Falha ao atualizar quantidade",description:ie?.message||"Tente novamente",variant:"destructive"})}},ye=async ke=>{try{await Lg({itemId:ke.id,codigoEmpresa:t?.codigo_empresa}),await ee(),e({title:"Item removido",description:ke.name,variant:"warning"})}catch(Me){e({title:"Falha ao remover item",description:Me?.message||"Tente novamente",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2",children:[V?s.jsx("div",{className:"text-sm font-medium text-text-primary leading-none truncate",title:te.customer||"",children:V}):s.jsx("div",{className:"h-0 w-0","aria-hidden":"true"}),s.jsx("div",{className:"flex items-center gap-2",children:te.comandaId?s.jsxs(s.Fragment,{children:[s.jsxs(Ee,{size:"sm",className:"h-8 px-3 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-black/60 text-white border border-white/10 shadow-sm hover:bg-black/80 hover:shadow transition-all flex items-center",onClick:()=>T(!0),children:[s.jsx(hs,{size:12,className:"text-white/80 mr-1.5"}),"Clientes"]}),s.jsxs(Ee,{size:"sm",variant:"outline",className:"h-8 px-3 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-black/60 text-white border border-white/10 shadow-sm hover:bg-black/80 hover:shadow transition-all",onClick:()=>R(!0),children:[s.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-black/40 border border-white/10 mr-1.5",children:s.jsx(Kl,{size:12,className:"text-white/80"})}),"Comanda"]}),s.jsxs(kf,{children:[s.jsx(ym,{asChild:!0,children:s.jsx(Ee,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-red-600 hover:bg-red-500 text-white border border-red-600/70 focus:outline-none focus:ring-0 focus-visible:ring-0 shadow-none",children:"Cancelar"})}),s.jsxs(fd,{className:"sm:max-w-[420px] animate-none",onKeyDown:ke=>ke.stopPropagation(),children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Cancelar comanda?"}),s.jsx(gd,{children:"Esta ao no pode ser desfeita. Os itens sero descartados e a mesa voltar a ficar livre."})]}),s.jsxs(md,{children:[s.jsx(yd,{children:"Voltar"}),s.jsx(vd,{onClick:async()=>{try{console.log("[Cancelar Comanda] Iniciando cancelamento da comanda:",te.comandaId),await I7({comandaId:te.comandaId,codigoEmpresa:t?.codigo_empresa}),console.log("[Cancelar Comanda] Comanda cancelada com sucesso"),l(null),await ln({showToast:!0}),console.log("[Cancelar Comanda] Mesas atualizadas"),e({title:"Comanda cancelada",variant:"success"})}catch(ke){console.error("[Cancelar Comanda] Erro:",ke),e({title:"Falha ao cancelar comanda",description:ke?.message||"Tente novamente",variant:"destructive"});try{await ln({showToast:!0})}catch(Me){console.error("[Cancelar Comanda] Erro ao recarregar aps falha:",Me)}}},children:"Confirmar Cancelamento"})]})]})]})]}):s.jsx(Ee,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap",onClick:()=>{L(te),$(!0)},children:"Abrir Mesa"})})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 thin-scroll",children:te.order.length===0?s.jsx("div",{className:"text-center text-text-muted pt-16",children:s.jsx("p",{children:"Comanda vazia. Adicione produtos na aba ao lado."})}):s.jsx("ul",{className:"space-y-3",children:te.order.map(ke=>s.jsxs("li",{className:"p-2 rounded-md border border-border/30 bg-surface",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-semibold text-text-primary truncate",title:ke.name,children:ke.name})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ee,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>oe(ke,-1),children:s.jsx(YR,{size:12})}),s.jsx("span",{className:"w-7 text-center font-semibold text-sm",children:ke.quantity}),s.jsx(Ee,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>oe(ke,1),children:s.jsx(Xa,{size:12})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-bold text-text-primary whitespace-nowrap",children:["R$ ",(ke.price*ke.quantity).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border",children:["x",ke.quantity]}),s.jsx(Ee,{variant:"ghost",size:"icon",className:"text-danger/80 hover:text-danger h-7 w-7",onClick:()=>ye(ke),children:s.jsx(Q2,{size:14})})]})]})]},ke.id))})}),s.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-text-secondary mb-2",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",Ne.toFixed(2)]})]}),s.jsxs(Ee,{size:"lg",className:"w-full",onClick:qe,children:[s.jsx(dl,{className:"mr-2"})," Fechar Conta"]})]})]}),s.jsx(Zt,{})]})},We=()=>{const[te,Ne]=v.useState(""),[V,ee]=v.useState(""),oe=async()=>{try{W(!0);const ye=(te??"").toString().trim(),ke=ye?Number(ye):void 0;if(ke!==void 0&&(Number.isNaN(ke)||ke<=0)){e({title:"Nmero invlido",description:"Informe um nmero positivo.",variant:"warning"});return}const Me=await iHe({numero:ke,nome:(V||"").trim()||void 0,codigoEmpresa:t?.codigo_empresa}),ie={id:Me.id,number:Me.numero,name:Me.nome,status:"available",order:[],customer:null,comandaId:null,totalHint:0};i(ce=>(ce.some(rt=>rt.id===ie.id)?ce.map(rt=>rt.id===ie.id?ie:rt):[...ce,ie]).slice().sort((rt,Ge)=>Number(rt.number)-Number(Ge.number))),l(ie),e({title:"Mesa criada",description:`Mesa ${Me.numero} adicionada`,variant:"success"}),me(!1),Ne(""),ee("")}catch(ye){e({title:"Falha ao criar mesa",description:ye?.message||"Tente novamente",variant:"destructive"})}finally{W(!1)}};return s.jsx(qr,{open:G,onOpenChange:ye=>{me(ye),ye||(Ne(""),ee(""))},children:s.jsxs(Lr,{className:"sm:max-w-md w-[92vw] sm:w-[400px]",onOpenAutoFocus:ye=>ye.preventDefault(),onKeyDown:ye=>ye.stopPropagation(),onKeyDownCapture:ye=>ye.stopPropagation(),onPointerDownOutside:ye=>ye.stopPropagation(),onInteractOutside:ye=>ye.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Nova Mesa"}),s.jsx(Jr,{children:"Informe o nome da mesa. Se deixar em branco, ser criada com numerao automtica."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(gt,{htmlFor:"nova-mesa-nome",children:"Nome da mesa"}),s.jsx($t,{id:"nova-mesa-nome",type:"text",placeholder:"Ex.: Mesa 1, Ptio 1, VIP...",value:V,onChange:ye=>ee(ye.target.value),onKeyDown:ye=>{ye.stopPropagation(),ye.key==="Enter"&&ye.preventDefault()},onKeyUp:ye=>ye.stopPropagation(),onKeyPress:ye=>ye.stopPropagation()})]}),s.jsxs(mn,{children:[s.jsx(Ee,{type:"button",variant:"outline",onClick:()=>me(!1),disabled:z,children:"Cancelar"}),s.jsx(Ee,{type:"button",onClick:oe,disabled:z,children:z?"Criando...":"Criar Mesa"})]})]})})},He=async te=>{try{if(!o?.comandaId){e({title:"Selecione uma mesa",description:"Abra a comanda clicando na mesa primeiro.",variant:"destructive"});return}const Ne=Number(te.salePrice??te.price??0);let V=await Ya({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa});const ee=(V||[]).find(ke=>ke.produto_id===te.id);ee?await ad({itemId:ee.id,quantidade:Number(ee.quantidade||0)+1,codigoEmpresa:t?.codigo_empresa}):await $O({comandaId:o.comandaId,produtoId:te.id,descricao:te.name,quantidade:1,precoUnitario:Ne,codigoEmpresa:t?.codigo_empresa}),V=await Ya({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa});const oe=(V||[]).map(ke=>({id:ke.id,productId:ke.produto_id,name:ke.descricao||"Item",price:Number(ke.preco_unitario||0),quantity:Number(ke.quantidade||1)})),ye={...o,order:oe};l(ye),i(ke=>ke.map(Me=>Me.id===ye.id?ye:Me)),e({title:"Produto adicionado",description:te.name,variant:"success"})}catch(Ne){e({title:"Falha ao adicionar produto",description:Ne?.message||"Tente novamente",variant:"destructive"})}},xt=()=>{const[te,Ne]=v.useState(""),ee=(I||[]).slice().sort((oe,ye)=>{const ke=oe.code||"",Me=ye.code||"";return/^\d+$/.test(ke)&&/^\d+$/.test(Me)?parseInt(ke,10)-parseInt(Me,10):ke.localeCompare(Me)}).filter(oe=>{const ye=te.trim().toLowerCase();return ye?(oe.name||"").toLowerCase().includes(ye)||String(oe.code||"").toLowerCase().includes(ye):!0});return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:te,onChange:oe=>Ne(oe.target.value),onKeyDown:oe=>oe.stopPropagation()})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:s.jsx("ul",{className:"space-y-2",children:ee.length===0?s.jsxs("li",{className:"text-center text-text-muted py-8",children:[s.jsx("div",{className:"mb-3",children:"Nenhum produto encontrado."}),s.jsx(Ee,{size:"sm",onClick:()=>n("/produtos"),children:"Cadastrar Produtos"})]}):ee.map(oe=>{const ye=tt.get(oe.id)||0,ke=Number(oe.stock??oe.currentStock??0),Me=Math.max(0,ke-ye),ie=()=>{A(oe),C(!0),ft("products")};return s.jsxs("li",{className:"flex items-center gap-3 p-3 rounded-md border border-border bg-surface hover:bg-surface-2 transition-colors",onClick:ie,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate",title:`${oe.code?`[${oe.code}] `:""}${oe.name}`,children:[oe.code&&s.jsxs("span",{className:"text-text-muted",children:["[",oe.code,"]"]})," ",oe.name]}),ye>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",ye]})]}),s.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[s.jsxs("p",{className:"text-xs sm:text-sm text-text-muted",children:["R$ ",Number(oe.salePrice??oe.price??0).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[10px] sm:text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",Me]})]})]}),s.jsx(Ee,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),He(oe)},"aria-label":`Adicionar ${oe.name}`,children:s.jsx(Xa,{size:16})})]},oe.id)})})})]})},[at,st]=v.useState(null),[Mt,wt]=v.useState([]),[Vt,Qt]=v.useState(!1),[nr,Ar]=v.useState(""),[cn,On]=v.useState(!1),[ca,Yn]=v.useState([]),[oi,An]=v.useState(!1),[ua,Ni]=v.useState(null),[ei,da]=v.useState(!1),[Ia,si]=v.useState(null),Xn=v.useMemo(()=>{const te=new Map;for(const Ne of Mt||[]){const V=Ne.productId,ee=Number(Ne.quantity||0);te.set(V,(te.get(V)||0)+ee)}return te},[Mt]),va=async te=>{if(!te)return;const V=(await Ya({comandaId:te,codigoEmpresa:t?.codigo_empresa})||[]).map(ee=>({id:ee.id,productId:ee.produto_id,name:ee.descricao||"Item",price:Number(ee.preco_unitario||0),quantity:Number(ee.quantidade||1)}));wt(V)},Ri=async te=>{if(!at)return;const Ne=Number(te.salePrice??te.price??0);await $O({comandaId:at,produtoId:te.id,descricao:te.name,quantidade:1,precoUnitario:Ne,codigoEmpresa:t?.codigo_empresa}),await va(at),e({title:"Produto adicionado",description:te.name,variant:"success"})},Sn=async te=>{if(!(!at||!te)){On(!1);try{await Lx({comandaId:at,clienteIds:[te],nomesLivres:[],codigoEmpresa:t?.codigo_empresa}),Ni(te),Ar(""),Yn([]),e({title:"Cliente associado",variant:"success"})}catch(Ne){e({title:"Falha ao associar cliente",description:Ne?.message||"Tente novamente",variant:"destructive"}),On(!0)}}},Io=async()=>{if(at)try{const te=Bt(Mt);if(te<=0){e({title:"Sem itens",description:"Adicione itens antes de pagar.",variant:"warning"});return}Qt(!0),await td({codigoEmpresa:t?.codigo_empresa});let Ne=re;if(!Array.isArray(Ne)||Ne.length===0)try{Ne=await Mg({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa}),Se(Ne)}catch{}const V=Ne?.[0],ee=V?.tipo||V?.nome||"outros";await FO({comandaId:at,finalizadoraId:V?.id,metodo:ee,valor:te,codigoEmpresa:t?.codigo_empresa}),await AS({comandaId:at,codigoEmpresa:t?.codigo_empresa}),e({title:"Pagamento registrado (balco)",description:`R$ ${te.toFixed(2)}`,variant:"success"}),wt([]),st(null),g(!1)}catch(te){e({title:"Falha no pagamento (balco)",description:te?.message||"Tente novamente",variant:"destructive"})}finally{Qt(!1)}},Li=()=>{v.useEffect(()=>{let Ne=!0;return(async()=>{if(m)try{Qt(!0);const ee=await getOrCreateComandaBalcao({codigoEmpresa:t?.codigo_empresa});if(!Ne)return;st(ee.id),await va(ee.id)}catch(ee){Ne&&e({title:"Falha ao abrir comanda de balco",description:ee?.message||"Tente novamente",variant:"destructive"})}finally{Ne&&Qt(!1)}})(),()=>{Ne=!1}},[m]),v.useEffect(()=>{if(!cn)return;let Ne=!0;const ee=setTimeout(async()=>{try{An(!0);const oe=await v2({searchTerm:nr,limit:20,codigoEmpresa:t?.codigo_empresa});Ne&&Yn(oe||[])}catch{Ne&&Yn([])}finally{Ne&&An(!1)}},250);return()=>{Ne=!1,clearTimeout(ee)}},[cn,nr]);const te=Bt(Mt);return s.jsx(qr,{open:m,onOpenChange:g,children:s.jsxs(Lr,{className:"max-w-4xl h-[90vh]",onKeyDown:Ne=>Ne.stopPropagation(),onKeyDownCapture:Ne=>Ne.stopPropagation(),onPointerDownOutside:Ne=>Ne.stopPropagation(),onInteractOutside:Ne=>Ne.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Modo Balco"}),s.jsx(Jr,{children:"Venda rpida para clientes sem mesa."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full overflow-hidden pt-4",children:[s.jsxs("div",{className:"col-span-1 flex flex-col border-r border-border pr-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Catlogo de Produtos"}),s.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>On(!0),children:ua?s.jsxs(s.Fragment,{children:[s.jsx(Ds,{className:"mr-1 h-4 w-4 text-success"})," Cliente"]}):"Cliente"})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:nr,onChange:Ne=>Ar(Ne.target.value)})]}),s.jsx("div",{className:"flex-1 overflow-y-auto -mr-4 pr-4 thin-scroll",children:s.jsxs("ul",{className:"space-y-2",children:[(I||[]).filter(Ne=>{const V=nr.trim().toLowerCase();return V?(Ne.name||"").toLowerCase().includes(V)||(Ne.code||"").toLowerCase().includes(V):!0}).sort((Ne,V)=>{const ee=Ne.code||"",oe=V.code||"";return/^\d+$/.test(ee)&&/^\d+$/.test(oe)?parseInt(ee,10)-parseInt(oe,10):ee.localeCompare(oe)}).map(Ne=>{const V=(Mt||[]).reduce((ye,ke)=>ye+(ke.productId===Ne.id?Number(ke.quantity||0):0),0),ee=Number(Ne.stock??Ne.currentStock??0),oe=Math.max(0,ee-V);return s.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors",onClick:()=>{si(Ne),da(!0)},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate",title:`${Ne.code?`[${Ne.code}] `:""}${Ne.name}`,children:[Ne.code&&s.jsxs("span",{className:"text-text-muted",children:["[",Ne.code,"]"]})," ",Ne.name]}),V>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",V]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",Number(Ne.salePrice??Ne.price??0).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",oe]})]})]}),s.jsx(Ee,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:ye=>{ye.stopPropagation(),Ri(Ne)},"aria-label":`Adicionar ${Ne.name}`,children:s.jsx(Xa,{size:16})})]},Ne.id)}),(!I||I.length===0)&&s.jsxs("li",{className:"text-center text-text-muted py-8",children:[s.jsx("div",{className:"mb-3",children:"Nenhum produto cadastrado. Cadastre produtos para vender no balco."}),s.jsx(Ee,{size:"sm",onClick:()=>n("/produtos"),children:"Cadastrar Produtos"})]})]})})]}),s.jsxs("div",{className:"col-span-1 flex flex-col",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Comanda do Balco"}),s.jsx("div",{className:"flex-1 overflow-y-auto bg-surface-2 rounded-lg p-4 thin-scroll",children:Mt.length===0?s.jsx("p",{className:"text-center text-text-muted pt-16",children:"Adicione produtos  comanda."}):s.jsx("ul",{className:"divide-y divide-border",children:Mt.map(Ne=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:Ne.name}),s.jsxs("div",{className:"text-xs text-text-muted",children:["Qtd: ",Ne.quantity,"  Unit: R$ ",Number(Ne.price||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"font-semibold mr-2",children:["R$ ",(Number(Ne.price||0)*Number(Ne.quantity||0)).toFixed(2)]}),s.jsx(Ee,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{const V=Number(Ne.quantity||1)-1;try{V<=0?await Lg({itemId:Ne.id,codigoEmpresa:t?.codigo_empresa}):await ad({itemId:Ne.id,quantidade:V,codigoEmpresa:t?.codigo_empresa}),await va(at)}catch(ee){e({title:"Falha ao atualizar",description:ee?.message||"Tente novamente",variant:"destructive"})}},children:s.jsx(YR,{size:14})}),s.jsx("span",{className:"w-8 text-center font-semibold",children:Ne.quantity}),s.jsx(Ee,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{try{await ad({itemId:Ne.id,quantidade:Number(Ne.quantity||1)+1,codigoEmpresa:t?.codigo_empresa}),await va(at)}catch(V){e({title:"Falha ao atualizar",description:V?.message||"Tente novamente",variant:"destructive"})}},children:s.jsx(Xa,{size:14})})]})]},Ne.id))})}),s.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[s.jsxs("div",{className:"flex justify-between items-center text-xl font-bold mb-4",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",te.toFixed(2)]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(kf,{children:[s.jsx(ym,{asChild:!0,children:s.jsx(Ee,{size:"lg",className:"flex-1 bg-red-600 hover:bg-red-500 text-white border border-red-600/70",children:"Cancelar"})}),s.jsxs(fd,{className:"sm:max-w-[420px] animate-none",onKeyDown:Ne=>Ne.stopPropagation(),children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Cancelar comanda do balco?"}),s.jsx(gd,{children:"Os itens sero descartados e o balco ser limpo. Esta ao no pode ser desfeita."})]}),s.jsxs(md,{children:[s.jsx(yd,{children:"Voltar"}),s.jsx(vd,{onClick:async()=>{try{if(!at){g(!1);return}await I7({comandaId:at,codigoEmpresa:t?.codigo_empresa}),wt([]),st(null),g(!1),e({title:"Comanda cancelada (balco)",variant:"success"})}catch(Ne){e({title:"Falha ao cancelar",description:Ne?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Cancelamento"})]})]})]}),s.jsxs(Ee,{size:"lg",className:"flex-1",onClick:Io,disabled:Vt||te<=0,children:[s.jsx(dl,{className:"mr-2"})," Finalizar Pagamento"]})]})]})]})]}),cn&&s.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center",onClick:Ne=>{Ne.target===Ne.currentTarget&&On(!1)},onKeyDown:Ne=>{Ne.key==="Escape"&&On(!1)},children:s.jsxs("div",{className:"bg-surface rounded-lg border border-border shadow-lg w-full max-w-md p-4",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-lg font-semibold",children:"Selecionar Cliente"}),s.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>On(!1),children:"Fechar"})]}),s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Nome, e-mail, telefone ou cdigo",className:"pl-9",value:nr,onChange:Ne=>Ar(Ne.target.value)})]}),s.jsx("div",{className:"max-h-64 overflow-auto thin-scroll border rounded-md",children:oi?s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Carregando clientes..."}):ca.length>0?s.jsx("ul",{children:ca.map(Ne=>s.jsxs("li",{className:Ot("p-2 flex items-center justify-between cursor-pointer hover:bg-surface-2",ua===Ne.id&&"bg-surface-2"),onClick:()=>Sn(Ne.id),children:[s.jsx("div",{children:s.jsxs("div",{className:"font-medium",children:[Ne.codigo!=null?String(Ne.codigo)+" - ":"",Ne.nome]})}),ua===Ne.id&&s.jsx(Ds,{size:16,className:"text-success"})]},Ne.id))}):s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum cliente encontrado."})})]})})]})})},yo=()=>{const te=Ia,Ne=te&&Xn.get(te.id)||0,V=te?Number(te.salePrice??te.price??0):0,ee=oe=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(oe||0));return s.jsx(qr,{open:ei,onOpenChange:oe=>{da(oe),oe||si(null)},children:s.jsxs(Lr,{overlayClassName:"z-[60]",className:"sm:max-w-[420px] w-[92vw] max-h-[85vh] flex flex-col animate-none z-[61]",onKeyDown:oe=>oe.stopPropagation(),onPointerDownOutside:oe=>oe.stopPropagation(),onInteractOutside:oe=>oe.stopPropagation(),onEscapeKeyDown:oe=>{oe.preventDefault(),oe.stopPropagation()},children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold break-words",title:te?.name||"",children:te?.name||"Produto"}),s.jsx(Jr,{children:"Detalhes do produto (Balco)."})]}),te?s.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),s.jsx("span",{className:"text-sm font-semibold",children:ee(V)})]}),te.category?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),s.jsx("span",{className:"text-sm font-medium",children:te.category})]}):null,s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof te.stock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),s.jsx("div",{className:"text-base font-semibold",children:te.stock})]}),typeof te.minStock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),s.jsx("div",{className:"text-base font-semibold",children:te.minStock})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),s.jsxs("div",{className:"text-base font-semibold",children:["x",Ne]})]})]})]}):null,s.jsxs(mn,{className:"flex items-center justify-between gap-2",children:[s.jsxs(Ee,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{te&&n("/produtos",{state:{productId:te.id,productName:te.name}})},children:[s.jsx(Kl,{className:"w-4 h-4"}),s.jsx("span",{children:"Info"})]}),s.jsx(Ee,{variant:"outline",onClick:()=>{da(!1),si(null)},children:"Fechar"}),s.jsx(Ee,{onClick:async()=>{te&&(await Ri(te),da(!1),si(null))},children:"Adicionar"})]})]})})},Ci=()=>{const[te,Ne]=v.useState(""),[V,ee]=v.useState(!1),[oe,ye]=v.useState([]),[ke,Me]=v.useState([]);v.useEffect(()=>{let ce=!0;const Ke=setTimeout(async()=>{try{ee(!0);const rt=await v2({searchTerm:te,limit:20});if(!ce)return;const Ge=(rt||[]).slice().sort(($e,bt)=>Number($e?.codigo||0)-Number(bt?.codigo||0));ye(Ge)}catch{if(!ce)return;ye([])}finally{ce&&ee(!1)}},200);return()=>{ce=!1,clearTimeout(Ke)}},[te]);const ie=async()=>{try{if(!de)return;const ce=await lHe({mesaId:de.id,codigoEmpresa:t?.codigo_empresa}),he=Array.from(new Set(ke||[])),Ke=[];await Lx({comandaId:ce.id,clienteIds:he,nomesLivres:Ke,codigoEmpresa:t?.codigo_empresa});let rt=null;try{const bt=(await Xo({comandaId:ce.id,codigoEmpresa:t?.codigo_empresa})||[]).map(vt=>vt?.nome).filter(Boolean);rt=bt.length?bt.join(", "):null}catch{}rt||(rt=he.length?he.map($e=>oe.find(bt=>bt.id===$e)?.nome).filter(Boolean).join(", "):Ke[0]||"");const Ge={...de,comandaId:ce.id,status:"in-use",customer:rt||null,order:[]};l(Ge),i($e=>$e.map(bt=>bt.id===Ge.id?Ge:bt)),await new Promise($e=>setTimeout($e,500));try{const $e=await vg(t?.codigo_empresa),bt=await ed({codigoEmpresa:t?.codigo_empresa});console.log(`[confirmOpen] Aps aguardar: ${bt.length} comandas abertas encontradas`);const vt={},ht={};await Promise.all((bt||[]).map(async Gt=>{try{const sr=(await Xo({comandaId:Gt.id,codigoEmpresa:t?.codigo_empresa})||[]).map(Br=>Br?.nome).filter(Boolean);vt[Gt.id]=sr.length?sr.join(", "):null;const Ht=(await Ya({comandaId:Gt.id,codigoEmpresa:t?.codigo_empresa})||[]).reduce((Br,vn)=>{const Da=(vn.quantidade||0)*(vn.preco_unitario||0)-(vn.desconto||0);return Br+Da},0);ht[Gt.id]=Ht}catch{vt[Gt.id]=null,ht[Gt.id]=0}}));const tr=($e||[]).map(Gt=>{const ct=(bt||[]).find(sr=>sr.mesa_id===Gt.id);return{id:Gt.id,name:Gt.nome||`Mesa ${Gt.numero}`,status:ct?"in-use":"available",comandaId:ct?.id||null,customer:ct?vt[ct.id]:null,order:[],totalHint:ct&&ht[ct.id]||0}});i(tr),console.log("[confirmOpen] Estado das mesas atualizado aps abertura")}catch($e){console.error("[confirmOpen] Erro ao atualizar mesas:",$e)}$(!1),L(null),X(""),Me([]),e({title:"Mesa aberta",description:rt?`Comanda criada para: ${rt}`:"Comanda criada.",variant:"success"})}catch(ce){e({title:"Falha ao abrir mesa",description:ce?.message||"Tente novamente",variant:"destructive"})}};return s.jsx(qr,{open:U,onOpenChange:ce=>{$(ce),ce||(L(null),X(""),Me([]))},children:s.jsxs(Lr,{className:"w-[95vw] max-w-md max-h-[75vh] flex flex-col animate-none",onOpenAutoFocus:ce=>ce.preventDefault(),onKeyDown:ce=>ce.stopPropagation(),onKeyDownCapture:ce=>ce.stopPropagation(),onPointerDownOutside:ce=>{ce.preventDefault(),ce.stopPropagation()},onInteractOutside:ce=>{ce.preventDefault(),ce.stopPropagation()},onEscapeKeyDown:ce=>ce.preventDefault(),children:[s.jsxs(Ur,{className:"flex-shrink-0",children:[s.jsxs($r,{className:"text-xl font-bold",children:["Abrir Mesa ",de?`#${de.number}`:""]}),s.jsx(Jr,{className:"text-sm",children:"Selecione um ou mais clientes para a mesa."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 space-y-3 py-2",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"text-sm font-medium mb-1.5 block",children:"Buscar cliente"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ao,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Nome, telefone ou cdigo",className:"pl-8 h-9 text-sm",value:te,onChange:ce=>Ne(ce.target.value)})]}),s.jsx(Ee,{type:"button",size:"icon",title:"Cadastrar cliente",className:"h-9 w-9 flex-shrink-0 bg-brand text-black hover:bg-brand/90",onClick:()=>{window.location.href="/clientes"},children:s.jsx(Xa,{className:"h-4 w-4"})})]})]}),ke.length>0&&s.jsxs("div",{className:"bg-success/10 border border-success/30 rounded-md p-2.5",children:[s.jsxs("div",{className:"text-xs font-medium text-success mb-1",children:[ke.length," cliente",ke.length>1?"s":""," selecionado",ke.length>1?"s":""]}),s.jsx("div",{className:"text-sm text-text-primary",children:oe.filter(ce=>ke.includes(ce.id)).map(ce=>ce.nome).join(", ")})]}),s.jsx("div",{className:"border rounded-md max-h-56 overflow-auto thin-scroll",children:V?s.jsx("div",{className:"p-3 text-center text-sm text-text-muted",children:"Carregando..."}):oe.length>0?s.jsx("ul",{className:"divide-y divide-border",children:oe.map(ce=>{const he=ke.includes(ce.id);return s.jsxs("li",{className:Ot("p-2.5 flex items-center justify-between cursor-pointer transition-colors",he?"bg-success/5 hover:bg-success/10":"hover:bg-surface-2"),onClick:()=>{X(""),Me(Ke=>Ke.includes(ce.id)?Ke.filter(rt=>rt!==ce.id):[...Ke,ce.id])},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-medium text-sm truncate",children:[ce.codigo!=null?`${ce.codigo} - `:"",ce.nome]}),ce.telefone&&s.jsx("div",{className:"text-xs text-text-muted mt-0.5",children:ce.telefone})]}),s.jsx("div",{className:"ml-2 flex-shrink-0",children:he?s.jsx(Ds,{size:18,className:"text-success"}):s.jsx("div",{className:"w-[18px] h-[18px] rounded-full border-2 border-border"})})]},ce.id)})}):s.jsx("div",{className:"p-4 text-center text-sm text-text-muted",children:"Nenhum cliente encontrado"})})]}),s.jsxs(mn,{className:"flex-shrink-0 pt-3",children:[s.jsx(Ee,{type:"button",variant:"outline",onClick:()=>{$(!1),L(null),X(""),Me([])},children:"Cancelar"}),s.jsx(Ee,{onClick:ie,disabled:!de,children:"Confirmar Abertura"})]})]})})},J=()=>{const[te,Ne]=v.useState("");return s.jsxs(s.Fragment,{children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Abrir Caixa"}),s.jsx(gd,{children:"Insira o valor inicial (suprimento) para abrir o caixa."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(gt,{htmlFor:"initial-value",children:"Valor Inicial"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"R$"}),s.jsx($t,{id:"initial-value",type:"text",inputMode:"numeric",pattern:"[0-9.,]*",autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,name:"cash-open-initial",placeholder:"0,00",className:"pl-9 font-semibold",value:te,onChange:V=>{const ee=(V.target.value||"").replace(/\D/g,""),oe=ee?Number(ee)/100:0,ye=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(oe);Ne(ye)},onKeyDown:V=>{V.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(V.key)&&(/^[0-9]$/.test(V.key)||V.preventDefault())},onBeforeInput:V=>{const ee=V.data??"";ee&&/\D/.test(ee)&&V.preventDefault()},onMouseDown:V=>V.stopPropagation()})]})]}),s.jsxs(md,{children:[s.jsx(yd,{onClick:()=>Ft(!1),children:"Cancelar"}),s.jsx(vd,{onClick:async()=>{try{const V=String(te).replace(/\./g,"").replace(",","."),ee=Number(V)||0;await td({saldoInicial:ee}),u(!0),Ft(!1),e({title:"Caixa aberto com sucesso!",variant:"success"})}catch(V){e({title:"Falha ao abrir caixa",description:V?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Abertura"})]})]})},Le=()=>s.jsxs(kf,{open:ue,onOpenChange:Ft,children:[s.jsx(ym,{asChild:!0,children:s.jsxs(Ee,{variant:"success",size:"sm",disabled:c,onClick:()=>Ft(!0),className:"px-3",children:[s.jsx(bI,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Abrir"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Abrir Caixa"})]})}),s.jsx(fd,{className:"sm:max-w-[425px] animate-none",onKeyDown:te=>te.stopPropagation(),onKeyDownCapture:te=>te.stopPropagation(),onEscapeKeyDown:te=>te.preventDefault(),onPointerDownOutside:te=>{te.preventDefault(),te.stopPropagation()},onInteractOutside:te=>{te.preventDefault(),te.stopPropagation()},children:s.jsx(J,{})})]}),Pt=()=>{const[te,Ne]=v.useState({loading:!1,saldoInicial:0,resumo:null}),[V,ee]=v.useState(!1),[oe,ye]=v.useState(!1),[ke,Me]=v.useState(!1),ie=async()=>{try{Ne({loading:!0,saldoInicial:0,resumo:null});const rt=await Of({codigoEmpresa:t?.codigo_empresa}),Ge=await cb({codigoEmpresa:t?.codigo_empresa});Ne({loading:!1,saldoInicial:Number(rt?.saldo_inicial||0),resumo:Ge||{totalPorFinalizadora:{}}})}catch{Ne({loading:!1,saldoInicial:0,resumo:{totalPorFinalizadora:{}}})}},ce=te?.resumo?.totalPorFinalizadora||{},he=Object.values(ce).reduce((rt,Ge)=>rt+Number(Ge||0),0),Ke=Number(te.saldoInicial||0)+he;return s.jsxs(kf,{open:V,onOpenChange:rt=>{ee(rt),rt&&ie()},children:[s.jsx(ym,{asChild:!0,children:s.jsxs(Ee,{variant:"destructive",size:"sm",disabled:!c,onClick:()=>ee(!0),className:"px-3",children:[s.jsx(zm,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Fechar"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Fechar Caixa"})]})}),s.jsxs(fd,{className:"sm:max-w-[425px] w-[92vw] max-h-[85vh] animate-none",onOpenAutoFocus:rt=>rt.preventDefault(),onKeyDown:rt=>rt.stopPropagation(),onKeyDownCapture:rt=>rt.stopPropagation(),onPointerDownOutside:rt=>{rt.preventDefault(),rt.stopPropagation()},onInteractOutside:rt=>{rt.preventDefault(),rt.stopPropagation()},children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Fechar Caixa"}),s.jsx(gd,{children:"Confira os valores e confirme o fechamento do caixa. Esta ao  irreversvel."})]}),oe&&s.jsxs("div",{className:"md:hidden mb-2 text-[12px] text-warning bg-warning/10 border border-warning/30 rounded px-2 py-1 flex items-center gap-1",children:[s.jsx(wd,{className:"h-3.5 w-3.5"}),"Existem comandas abertas. Finalize-as antes de fechar o caixa."]}),te.loading?s.jsx("div",{className:"py-4 text-text-muted",children:"Carregando resumo"}):s.jsxs("div",{className:"py-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor Inicial:"})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(te.saldoInicial||0).toFixed(2)]})]}),Object.keys(ce).length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos nesta sesso."}):Object.entries(ce).map(([rt,Ge])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-text-secondary",children:[String(rt),":"]})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(Ge||0).toFixed(2)]})]},rt)),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{className:"text-text-primary",children:"Total em Caixa:"})," ",s.jsxs("span",{className:"font-mono text-success",children:["R$ ",Number(Ke||0).toFixed(2)]})]})]}),s.jsxs(md,{children:[s.jsx(yd,{onClick:()=>ee(!1),disabled:ke,children:"Cancelar"}),s.jsx(vd,{onClick:async()=>{try{if(ke)return;Me(!0);try{const Ge=await ed({codigoEmpresa:t?.codigo_empresa});let $e=[];if(Array.isArray(Ge)&&Ge.length>0)try{$e=(await Promise.all(Ge.map(async vt=>{try{return(await Ya({comandaId:vt?.id,codigoEmpresa:t?.codigo_empresa})||[]).some(Gt=>Number(Gt?.quantidade||0)>0)?vt:null}catch{return vt}}))).filter(Boolean)}catch{$e=Ge}if($e.length>0){typeof window<"u"&&window.innerWidth<=640?(ye(!0),setTimeout(()=>ye(!1),1500)):e({title:"Fechamento bloqueado",description:`Existem ${$e.length} comandas com itens em aberto. Finalize-as antes de fechar o caixa.`,variant:"warning",duration:2500});return}}catch{}await Tee({codigoEmpresa:t?.codigo_empresa});let rt=!1;for(let Ge=0;Ge<4;Ge++){const $e=await Of({codigoEmpresa:t?.codigo_empresa}).catch(()=>null);if(!$e||!$e.id){rt=!0;break}await new Promise(bt=>setTimeout(bt,250))}if(!rt){e({title:"Fechamento pendente",description:"Ainda h uma sesso marcada como aberta. Aguarde e tente novamente.",variant:"warning"});return}u(!1),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{ee(!1),e({title:"Caixa fechado!",description:"O relatrio de fechamento foi gerado."})}):(ee(!1),e({title:"Caixa fechado!",description:"O relatrio de fechamento foi gerado."}))}catch(rt){console.error(rt),e({title:"Falha ao fechar caixa",description:rt?.message||"Tente novamente",variant:"destructive"})}finally{Me(!1)}},children:"Confirmar Fechamento"})]})]})]})},Yt=()=>{const[te,Ne]=v.useState(""),[V,ee]=v.useState([]),[oe,ye]=v.useState([]),[ke,Me]=v.useState(!1),[ie,ce]=v.useState(new Set),he=v.useRef([]),Ke=v.useRef(!1);v.useEffect(()=>{let $e=!0;const bt=async()=>{if(!(!k||!o?.comandaId))try{Me(!0);const ht=(await Xo({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(ct=>ct?.cliente_id??ct?.clientes?.id).filter(Boolean);if(!$e)return;ye(ht),he.current=ht,ce(new Set);const tr=await v2({searchTerm:te,limit:50});if(!$e)return;const Gt=(tr||[]).slice().sort((ct,sr)=>Number(ct?.codigo||0)-Number(sr?.codigo||0));ee(Gt),Ke.current=!0}catch(vt){console.error("Erro ao carregar clientes:",vt)}finally{$e&&Me(!1)}};if(!k)return Ke.current=!1,()=>{$e=!1};if(te){const vt=setTimeout(()=>{bt()},300);return()=>{$e=!1,clearTimeout(vt)}}else Ke.current||bt();return()=>{$e=!1}},[k,te]);const rt=$e=>{if(!o?.comandaId)return;const bt=oe.includes($e);ye(vt=>bt?vt.filter(ht=>ht!==$e):[...vt,$e]),ce(vt=>{const ht=new Set(vt);return ht.add($e),ht})},Ge=async()=>{if(!o?.comandaId){T(!1);return}if(ie.size===0){T(!1);return}try{Me(!0);const $e=oe.filter(vt=>!he.current.includes(vt)),bt=he.current.filter(vt=>!oe.includes(vt));console.log("[confirmChanges] toAdd:",$e,"toRemove:",bt);for(const vt of bt){console.log("[confirmChanges] Removendo cliente:",vt);const{error:ht}=await Oe.from("comanda_clientes").delete().eq("comanda_id",o.comandaId).eq("cliente_id",vt).eq("codigo_empresa",t?.codigo_empresa);if(ht)throw console.error("[confirmChanges] Erro ao remover:",ht),ht}$e.length>0&&(console.log("[confirmChanges] Adicionando clientes:",$e),await Lx({comandaId:o.comandaId,clienteIds:$e,nomesLivres:[],codigoEmpresa:t?.codigo_empresa})),console.log("[confirmChanges] Operaes concludas, atualizando mesa"),await ur(o),await ln({showToast:!1}),e({title:"Clientes atualizados",variant:"success"}),T(!1)}catch($e){console.error("[confirmChanges] Erro:",$e),e({title:"Falha ao atualizar clientes",description:$e?.message||"Tente novamente",variant:"destructive"})}finally{Me(!1)}};return s.jsx(qr,{open:k,onOpenChange:T,children:s.jsxs(Lr,{className:"sm:max-w-[480px] w-[92vw] animate-none",onOpenAutoFocus:$e=>$e.preventDefault(),onKeyDown:$e=>$e.stopPropagation(),onKeyDownCapture:$e=>$e.stopPropagation(),onPointerDownOutside:$e=>{$e.preventDefault(),$e.stopPropagation()},onInteractOutside:$e=>{$e.preventDefault(),$e.stopPropagation()},onEscapeKeyDown:$e=>$e.preventDefault(),children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Gerenciar Clientes da Mesa"}),s.jsx(Jr,{children:"Clique nos clientes para adicionar ou remover. Pode ter mltiplos clientes."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar cliente...",className:"pl-9",value:te,onChange:$e=>Ne($e.target.value),onKeyDown:$e=>$e.stopPropagation(),onKeyUp:$e=>$e.stopPropagation()})]}),oe.length>0&&s.jsxs("div",{className:"bg-success/10 border border-success/30 rounded-md p-3",children:[s.jsxs("div",{className:"text-xs font-medium text-success mb-1",children:["Clientes vinculados (",oe.length,"):"]}),s.jsx("div",{className:"text-sm text-text-primary",children:V.filter($e=>oe.includes($e.id)).map($e=>$e?.codigo?`${$e.codigo} - ${$e?.nome||""}`:$e?.nome||"").join(", ")||"Carregando..."})]}),s.jsx("div",{className:"border rounded-md max-h-[400px] overflow-y-auto thin-scroll",children:ke?s.jsx("div",{className:"p-4 text-center text-text-muted",children:"Carregando..."}):V.length===0?s.jsx("div",{className:"p-4 text-center text-text-muted",children:"Nenhum cliente encontrado"}):s.jsx("ul",{className:"divide-y divide-border",children:V.map($e=>{const bt=oe.includes($e.id);return s.jsxs("li",{className:Ot("p-3 cursor-pointer transition-colors flex items-center justify-between",bt?"bg-success/5 hover:bg-success/10":"hover:bg-surface-2"),onClick:vt=>{vt.preventDefault(),vt.stopPropagation(),rt($e.id)},style:{userSelect:"none",WebkitUserSelect:"none"},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:`${$e?.codigo?`${$e.codigo} - `:""}${$e?.nome||""}`}),$e.telefone&&s.jsx("div",{className:"text-xs text-text-muted",children:$e.telefone})]}),s.jsx("div",{className:"ml-3 flex-shrink-0",children:bt?s.jsx(Ds,{className:"h-5 w-5 text-success"}):s.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-border"})})]},$e.id)})})})]}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>T(!1),disabled:ke,children:"Cancelar"}),s.jsx(Ee,{onClick:Ge,disabled:ke,children:ke?"Salvando...":`Confirmar ${ie.size>0?`(${ie.size} alteraes)`:""}`})]})]})})},ot=()=>{const te=V=>V==="available"?"bg-success/10 border-success/30 text-success":V==="in-use"?"bg-warning/10 border-warning/30 text-warning":V==="awaiting-payment"?"bg-info/10 border-info/30 text-info":"bg-surface-2 border-border text-text-secondary",Ne=V=>V==="available"?"Livre":V==="in-use"?"Ocupada":V==="awaiting-payment"?"Aguardando":"Desconhecido";return s.jsx("div",{className:"md:hidden space-y-2",children:a.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:"text-text-muted mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),s.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhuma mesa encontrada"}),s.jsx("p",{className:"text-text-muted mb-4",children:"Crie sua primeira mesa para comear"})]}):a.map(V=>{const ee=Bt(V.order||[]),oe=V.totalHint>0?V.totalHint:ee;return s.jsx("div",{onClick:async()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}await rn(V),V.status!=="available"&&zt(!0)},className:Ot("p-3 rounded-lg border-2 bg-surface transition-all active:scale-[0.98]",te(V.status),o?.id===V.id&&"ring-2 ring-brand/60",c?"cursor-pointer":"cursor-not-allowed opacity-60"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-bold text-base truncate",children:V.name||`Mesa ${V.number}`}),s.jsx("span",{className:Ot("text-xs px-2 py-0.5 rounded-full border font-medium",te(V.status)),children:Ne(V.status)})]}),V.status==="in-use"||V.status==="awaiting-payment"?s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-text-secondary",children:[s.jsx(hs,{className:"w-3.5 h-3.5 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:er(V.customer)||"Sem cliente"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-text-primary",children:[s.jsx(dl,{className:"w-3.5 h-3.5 flex-shrink-0"}),s.jsxs("span",{children:["R$ ",oe.toFixed(2)]})]})]}):s.jsx("div",{className:"text-xs text-text-muted",children:"Mesa disponvel"})]}),s.jsx(cj,{className:"w-5 h-5 text-text-muted flex-shrink-0 ml-2"})]})},V.id)})})},Lt=()=>o?s.jsx(qr,{open:qt,modal:!P,onOpenChange:te=>{!te&&P||zt(te)},children:s.jsxs(Lr,{className:"sm:max-w-2xl w-[90vw] max-h-[85vh] flex flex-col p-0 gap-0 animate-none",onKeyDown:te=>te.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b border-border bg-surface-2",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx($r,{className:"text-xl font-bold",children:o.name||`Mesa ${o.number}`})}),s.jsx(Jr,{className:"sr-only",children:"Visualizao da comanda e produtos da mesa selecionada"}),(o.status==="in-use"||o.status==="awaiting-payment")&&s.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(hs,{className:"w-4 h-4"}),s.jsx("span",{children:er(o.customer)||"Sem cliente"})]}),o.order&&o.order.length>0&&s.jsxs("div",{className:"flex items-center gap-1 font-semibold text-text-primary",children:[s.jsx(dl,{className:"w-4 h-4"}),s.jsxs("span",{children:["R$ ",(o.totalHint>0?o.totalHint:Bt(o.order||[])).toFixed(2)]})]})]})]}),s.jsxs(Ad,{value:it,onValueChange:ft,className:"flex flex-col flex-1 min-h-0",children:[s.jsxs(Nu,{className:"grid w-full grid-cols-2 m-2 rounded-lg",children:[s.jsx(Jn,{value:"order",className:"text-sm",children:"Comanda"}),s.jsx(Jn,{value:"products",className:"text-sm",children:"Produtos"})]}),s.jsx(Qi,{value:"order",className:"flex-1 overflow-hidden min-h-0 m-0",children:s.jsx(Ce,{table:o})}),s.jsx(Qi,{value:"products",className:"flex-1 overflow-hidden min-h-0 m-0",children:s.jsx(xt,{})})]})]})}):null,ir=()=>{const te=j,Ne=te&&tt.get(te.id)||0,V=te?Number(te.salePrice??te.price??0):0,ee=oe=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(oe||0));return s.jsx(qr,{open:P,onOpenChange:oe=>{C(oe),oe||A(null)},children:s.jsxs(Lr,{overlayClassName:"z-[70]",className:"sm:max-w-[420px] w-[92vw] max-h-[85vh] flex flex-col animate-none z-[71]",onOpenAutoFocus:oe=>{},onKeyDown:oe=>oe.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold break-words",title:te?.name||"",children:te?.name||"Produto"}),s.jsx(Jr,{children:"Detalhes do produto e aes rpidas."})]}),te?s.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),s.jsx("span",{className:"text-sm font-semibold",children:ee(V)})]}),te.category?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),s.jsx("span",{className:"text-sm font-medium",children:te.category})]}):null,s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof te.stock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),s.jsx("div",{className:"text-base font-semibold",children:te.stock})]}),typeof te.minStock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),s.jsx("div",{className:"text-base font-semibold",children:te.minStock})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),s.jsxs("div",{className:"text-base font-semibold",children:["x",Ne]})]})]})]}):null,s.jsxs(mn,{className:"flex items-center justify-between gap-2",children:[s.jsxs(Ee,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{te&&n("/produtos",{state:{productId:te.id,productName:te.name}})},children:[s.jsx(Kl,{className:"w-4 h-4"}),s.jsx("span",{children:"Info"})]}),s.jsx(Ee,{variant:"outline",onClick:()=>{C(!1),A(null)},children:"Fechar"}),s.jsx(Ee,{onClick:async()=>{te&&(await He(te),C(!1),A(null))},children:"Adicionar"})]})]})})};return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Loja - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Loja (PDV): controle de mesas, produtos e vendas."}),dt&&s.jsx("style",{children:`
            :root.no-dialog-anim [data-state='open'],
            :root.no-dialog-anim [data-state='closed']{
              animation: none !important;
              transition: none !important;
            }
          `})]}),s.jsx(ir,{}),s.jsx(yo,{}),s.jsxs(lr.div,{variants:ve,initial:!1,animate:dt?!1:"visible",layout:!1,className:"h-full flex flex-col",children:[s.jsxs(lr.div,{variants:ut,initial:!1,animate:dt?!1:void 0,layout:!1,className:"flex items-center justify-between mb-2 md:mb-6 gap-2 md:gap-4 flex-wrap",children:[s.jsx("div",{className:"w-full md:w-auto flex items-center gap-2 md:gap-3",children:s.jsx(Ad,{value:"mesas",className:"w-full md:w-auto flex-1",onValueChange:te=>{te==="mesas"&&n("/vendas"),te==="balcao"&&n("/balcao"),te==="historico"&&n("/historico")},children:s.jsxs(Nu,{className:"!grid w-full grid-cols-3",children:[s.jsx(Jn,{value:"mesas",className:"text-xs sm:text-sm",children:"Mesas"}),s.jsx(Jn,{value:"balcao",className:"text-xs sm:text-sm",children:"Balco"}),s.jsx(Jn,{value:"historico",className:"text-xs sm:text-sm",children:"Histrico"})]})})}),s.jsxs("div",{className:"w-full md:w-auto flex items-center gap-1.5 md:gap-3 md:ml-auto justify-end mt-1 md:mt-0",children:[s.jsx(Le,{}),s.jsx(Pt,{}),s.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>y(!0),className:"px-3",children:[s.jsx(LW,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Detalhes"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Detalhes do Caixa"})]}),s.jsx("div",{className:"hidden md:block w-px h-6 bg-border mx-1"}),s.jsxs(Ee,{onClick:()=>me(!0),className:"hidden md:flex",size:"sm",children:[s.jsx(Xa,{className:"mr-2 h-4 w-4"})," Nova Mesa"]})]})]}),!c&&d>0&&s.jsxs("div",{className:"md:hidden mb-3 text-[11px] text-warning flex items-center gap-2",children:[s.jsx(wd,{className:"h-3 w-3"}),"H comandas abertas, mas o caixa parece fechado.",s.jsx(Ee,{size:"sm",variant:"outline",className:"h-6 px-2 text-[11px]",onClick:()=>Ft(!0),children:"Reabrir sesso"})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden min-h-0",children:[s.jsxs(lr.div,{variants:ut,initial:!1,animate:dt?!1:void 0,layout:!1,className:"lg:col-span-2 bg-surface rounded-lg border border-border p-4 md:p-6 overflow-y-auto thin-scroll min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Mapa de Mesas"}),s.jsx(Ee,{type:"button",className:"md:hidden h-9 w-9 p-0 bg-amber-400 text-black hover:bg-amber-300",size:"icon",title:"Nova Mesa",onClick:()=>me(!0),children:s.jsx(Xa,{className:"h-5 w-5"})})]}),s.jsx(ot,{}),s.jsx("div",{className:"hidden md:block",children:s.jsx(rJe,{onDragEnd:lt,children:s.jsx(dre,{droppableId:"tables",children:te=>s.jsxs("div",{...te.droppableProps,ref:te.innerRef,className:"grid gap-5 grid-cols-[repeat(auto-fit,minmax(240px,1fr))]",children:[a.length===0?s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:"text-text-muted mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),s.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhuma mesa encontrada"}),s.jsx("p",{className:"text-text-muted mb-4",children:"Crie sua primeira mesa para comear a receber pedidos"}),s.jsxs(Ee,{onClick:()=>me(!0),className:"flex items-center gap-2",children:[s.jsx(Xa,{size:16}),"Criar Nova Mesa"]})]}):a.map((Ne,V)=>s.jsx(FJe,{draggableId:Ne.id,index:V,children:(ee,oe)=>s.jsx(fr,{table:Ne,provided:ee,isDragging:oe.isDragging})},Ne.id)),te.placeholder]})})})})]}),s.jsx(lr.div,{variants:ut,initial:!1,animate:dt?!1:void 0,layout:!1,className:"hidden md:flex bg-surface rounded-lg border border-border flex-col min-h-0",children:s.jsxs(Ad,{defaultValue:"order",className:"flex flex-col h-full",children:[s.jsxs(Nu,{className:"grid w-full grid-cols-2 m-2",children:[s.jsx(Jn,{value:"order",children:"Comanda"}),s.jsx(Jn,{value:"products",children:"Produtos"})]}),s.jsx(Qi,{value:"order",className:"flex-1 overflow-hidden min-h-0",children:s.jsx(Ce,{table:o})}),s.jsx(Qi,{value:"products",className:"flex-1 overflow-hidden min-h-0",children:s.jsx(xt,{})})]})})]})]}),s.jsx(Lt,{}),s.jsx(Li,{}),s.jsx(Qn,{}),s.jsx(Kn,{}),s.jsx(Yt,{}),s.jsx(Ci,{}),s.jsx(We,{})]})}function tQe(){const{toast:e}=Za(),t=Wc(),{userProfile:r}=po(),[n,a]=v.useState(null),[i,o]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState(!0),[f,h]=v.useState(""),[m,g]=v.useState(""),[p,y]=v.useState(null),[x,b]=v.useState(null),[w,S]=v.useState(!1),j=v.useRef(!1),[A,P]=v.useState(!1),[C,E]=v.useState(!1),[R,k]=v.useState(!1),[T,I]=v.useState(!1),[M,z]=v.useState(null),[W,U]=v.useState(!1),[$,G]=v.useState([]);v.useState(null);const[me,de]=v.useState(!1),[L,B]=v.useState([]),[X,q]=v.useState(1),[Y,Z]=v.useState([]),[ge,re]=v.useState(null),[Se,Ie]=v.useState(!1),[pe,Ue]=v.useState(null),[_e,ue]=v.useState(!1),[Ft,qt]=v.useState("");v.useState("cadastrado");const[zt,it]=v.useState(""),[ft,dt]=v.useState([]),[ve,ut]=v.useState([]);v.useState(!1),v.useState(!1);const[Te,Ze]=v.useState(!1),[Ye,Nt]=v.useState(!1),nt=v.useRef(0),mt=v.useRef([]);v.useEffect(()=>{mt.current=l},[l]);const At=v.useRef(!1);v.useEffect(()=>(At.current=!0,()=>{At.current=!1}),[]),v.useEffect(()=>{(l||[]).length>0&&(j.current=!0)},[l]),v.useEffect(()=>{n&&j.current&&(l||[]).length===0&&ur(n,2)},[n,l?.length]),v.useEffect(()=>{let Ce=!0;return(async()=>{try{const We=await Of({codigoEmpresa:r?.codigo_empresa});Ce&&P(!!We)}catch{Ce&&P(!1)}})(),()=>{Ce=!1}},[r?.codigo_empresa]);const Pe=async()=>{const Ce=r?.codigo_empresa||null;try{if(!Ce)return;I(!0);const[We,He]=await Promise.all([cb({codigoEmpresa:Ce}).catch(()=>null),Of({codigoEmpresa:Ce}).catch(()=>null)]);if(!He?.id){z(null);return}let xt=0,at=[];try{at=await Rg({caixaSessaoId:He.id,codigoEmpresa:Ce}),xt=(at||[]).filter(Mt=>(Mt?.tipo||"")==="sangria").reduce((Mt,wt)=>Mt+Number(wt?.valor||0),0)}catch{}const st={saldo_inicial:He.saldo_inicial||0,totalPorFinalizadora:We?.totalPorFinalizadora||We?.porFinalizadora||{},totalEntradas:We?.totalEntradas||We?.entradas||0,totalSangria:xt,totalSaidas:xt,sessaoId:He.id,movimentacoes:at};z(st)}catch{z(null)}finally{I(!1)}};v.useEffect(()=>{let Ce=!0;return(async()=>{try{if(!W||!n)return;const He=r?.codigo_empresa;let xt=[];try{const Mt=await Xo({comandaId:n,codigoEmpresa:He});xt=(Array.isArray(Mt)?Mt:[]).map(Vt=>{const Qt=Vt?.clientes?.id??Vt?.cliente_id??Vt?.id??null,nr=Vt?.clientes?.nome??Vt?.nome??Vt?.nome_livre??"";return Qt?{id:Qt,nome:nr}:null}).filter(Boolean)}catch{xt=[]}if(!Ce)return;Z(xt);const st=Array.isArray(ve)&&ve.length>0?ve:xt.map(Mt=>Mt.id);if(!Array.isArray(st)||st.length===0)return;B(Mt=>{let wt=Mt&&Mt.length?[...Mt]:[{id:1,clientId:st[0],methodId:$[0]?.id||"",value:""}];wt[0]||(wt[0]={id:1,clientId:st[0],methodId:$[0]?.id||"",value:""}),wt[0].clientId=st[0];const Vt=new Set([wt[0].clientId].filter(Boolean));for(let Qt=1;Qt<wt.length;Qt++){if(!wt[Qt].clientId||Vt.has(wt[Qt].clientId)){const nr=(st||[]).find(Ar=>!Vt.has(Ar));wt[Qt].clientId=nr||st[0]}Vt.add(wt[Qt].clientId)}return wt})}catch{}})(),()=>{Ce=!1}},[W,ve,n,r?.codigo_empresa]);const Je=async()=>{try{if(!n){e({title:"Nenhuma comanda aberta",description:"Adicione itens para abrir uma comanda.",variant:"warning"});return}const Ce=r?.codigo_empresa;if(!Ce){e({title:"Empresa no definida",variant:"destructive"});return}if(!Array.isArray(L)||L.length===0){e({title:"Informe os pagamentos",description:"Adicione pelo menos uma forma de pagamento.",variant:"warning"});return}for(const at of L){if(!at.methodId){e({title:"Forma de pagamento faltando",description:"Selecione a finalizadora em todas as linhas.",variant:"warning"});return}if(!String(at.value||"").replace(/\D/g,"")){e({title:"Valor invlido",description:"Informe valores maiores que zero.",variant:"warning"});return}}let We=0;try{We=(await Ya({comandaId:n,codigoEmpresa:Ce})||[]).reduce((st,Mt)=>st+Number(Mt.quantidade||0)*Number(Mt.preco_unitario||0),0)}catch{}const He=(L||[]).reduce((at,st)=>at+(Number(String(st.value||"").replace(/\D/g,""))/100||0),0),xt=Math.abs(He-We);if(xt>.009&&xt<=.05){const at=We-He;B(st=>{const Mt=st.length-1;return st.map((wt,Vt)=>{if(Vt===Mt){const nr=Number(String(wt.value||"").replace(/\D/g,""))/100+at,Ar=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(nr);return{...wt,value:Ar}}return wt})})}else if(xt>.05){const at=We-He;at>0?e({title:"Valor insuficiente",description:`Faltam R$ ${at.toFixed(2)} para fechar o total.`,variant:"warning"}):e({title:"Valor excedente",description:`Excedeu em R$ ${Math.abs(at).toFixed(2)}. Ajuste os valores.`,variant:"warning"});return}de(!0),await td({codigoEmpresa:Ce});for(const at of L){const st=Number(String(at.value||"").replace(/\D/g,""))/100||0,Mt=$.find(Vt=>String(Vt.id)===String(at.methodId)),wt=Mt?.nome||Mt?.tipo||"outros";await FO({comandaId:n,finalizadoraId:at.methodId,metodo:wt,valor:st,status:"Pago",codigoEmpresa:Ce,clienteId:at.clientId||null})}await AS({comandaId:n,codigoEmpresa:Ce}),a(null),c([]),ut([]),h(""),Nt(!1),B([]);try{localStorage.removeItem(tt.comandaId),localStorage.removeItem(tt.items),localStorage.removeItem(tt.customerName)}catch{}e({title:"Pagamento concludo",description:`Total R$ ${We.toFixed(2)}`,variant:"success"}),U(!1)}catch(Ce){e({title:"Falha ao concluir",description:Ce?.message||"Tente novamente",variant:"destructive"})}finally{de(!1)}},Dt=()=>{try{return(L||[]).reduce((Ce,We)=>{const He=String(We?.value||"").replace(/\D/g,""),xt=He?Number(He)/100:0;return Ce+xt},0)}catch{return 0}};v.useEffect(()=>{(async()=>{try{if(!C)return;await Pe()}catch{}})()},[C,r?.codigo_empresa]);const qe=()=>{const[Ce,We]=v.useState(""),He=v.useRef(null);return v.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<=640)return;const at=setTimeout(()=>{try{He.current?.focus()}catch{}},0);return()=>clearTimeout(at)},[]),s.jsxs(s.Fragment,{children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Abrir Caixa"}),s.jsx(gd,{children:"Insira o valor inicial (suprimento) para abrir o caixa."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(gt,{className:"mb-2 block",htmlFor:"open-cash-initial",children:"Saldo inicial"}),s.jsx($t,{id:"open-cash-initial",ref:He,type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:Ce,onChange:xt=>{const at=(xt.target.value||"").replace(/\D/g,""),st=at?Number(at)/100:0,Mt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(st);We(Mt)},onKeyDown:xt=>{xt.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(xt.key)&&(/^[0-9]$/.test(xt.key)||xt.preventDefault())},onBeforeInput:xt=>{const at=xt.data??"";at&&/\D/.test(at)&&xt.preventDefault()}}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Digite nmeros; a mscara formata em reais automaticamente."})]}),s.jsxs(md,{children:[s.jsx(yd,{onClick:()=>k(!1),children:"Cancelar"}),s.jsx(vd,{onClick:async()=>{try{const xt=String(Ce||"").replace(/\D/g,""),at=xt?Number(xt)/100:0;await td({saldoInicial:at,codigoEmpresa:r?.codigo_empresa}),P(!0),k(!1),e({title:"Caixa aberto com sucesso!",variant:"success"})}catch(xt){e({title:"Falha ao abrir caixa",description:xt?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Abertura"})]})]})},lt=()=>s.jsxs(kf,{open:R,onOpenChange:k,children:[s.jsx(ym,{asChild:!0,children:s.jsxs(Ee,{variant:"success",disabled:A,onClick:()=>k(!0),className:"h-9 rounded-md px-3 sm:h-10",children:[s.jsx(bI,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Abrir"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Abrir Caixa"})]})}),s.jsx(fd,{className:"sm:max-w-[425px] w-[92vw] animate-none",onKeyDown:Ce=>Ce.stopPropagation(),onPointerDownOutside:Ce=>{Ce.preventDefault(),Ce.stopPropagation()},onInteractOutside:Ce=>{Ce.preventDefault(),Ce.stopPropagation()},children:s.jsx(qe,{})})]}),Bt=()=>{const[Ce,We]=v.useState({loading:!1,saldoInicial:0,resumo:null}),[He,xt]=v.useState(!1),at=async()=>{try{We({loading:!0,saldoInicial:0,resumo:null});const Vt=await Of({codigoEmpresa:r?.codigo_empresa}),Qt=await cb({codigoEmpresa:r?.codigo_empresa});We({loading:!1,saldoInicial:Number(Vt?.saldo_inicial||0),resumo:Qt||{totalPorFinalizadora:{}}})}catch{We({loading:!1,saldoInicial:0,resumo:{totalPorFinalizadora:{}}})}},st=Ce?.resumo?.totalPorFinalizadora||{},Mt=Object.values(st).reduce((Vt,Qt)=>Vt+Number(Qt||0),0),wt=Number(Ce.saldoInicial||0)+Mt;return s.jsxs(kf,{children:[s.jsx(ym,{asChild:!0,children:s.jsxs(Ee,{variant:"destructive",disabled:!A,onClick:at,className:"h-9 rounded-md px-3 sm:h-10",children:[s.jsx(zm,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Fechar"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Fechar Caixa"})]})}),s.jsxs(fd,{className:"sm:max-w-[425px] w-[92vw] max-h-[85vh] animate-none",onKeyDown:Vt=>Vt.stopPropagation(),onPointerDownOutside:Vt=>{Vt.preventDefault(),Vt.stopPropagation()},onInteractOutside:Vt=>{Vt.preventDefault(),Vt.stopPropagation()},children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Fechar Caixa"}),s.jsx(gd,{children:"Confira os valores e confirme o fechamento do caixa. Esta ao  irreversvel."})]}),He&&s.jsxs("div",{className:"md:hidden mb-2 text-[12px] text-warning bg-warning/10 border border-warning/30 rounded px-2 py-1 flex items-center gap-1",children:[s.jsx(wd,{className:"h-3.5 w-3.5"}),"Existem comandas abertas. Finalize-as antes de fechar o caixa."]}),Ce.loading?s.jsx("div",{className:"py-4 text-text-muted",children:"Carregando resumo"}):s.jsxs("div",{className:"py-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor Inicial:"})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(Ce.saldoInicial||0).toFixed(2)]})]}),Object.keys(st).length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos nesta sesso."}):Object.entries(st).map(([Vt,Qt])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-text-secondary",children:[String(Vt),":"]})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(Qt||0).toFixed(2)]})]},Vt)),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{className:"text-text-primary",children:"Total em Caixa:"})," ",s.jsxs("span",{className:"font-mono text-success",children:["R$ ",Number(wt||0).toFixed(2)]})]})]}),s.jsxs(md,{children:[s.jsx(yd,{children:"Cancelar"}),s.jsx(vd,{onClick:async()=>{try{try{const Vt=await ed({codigoEmpresa:r?.codigo_empresa});let Qt=[];if(Array.isArray(Vt)&&Vt.length>0)try{Qt=(await Promise.all(Vt.map(async Ar=>{try{return(await Ya({comandaId:Ar?.id,codigoEmpresa:r?.codigo_empresa})||[]).some(ca=>Number(ca?.quantidade||0)>0)?Ar:null}catch{return Ar}}))).filter(Boolean)}catch{Qt=Vt}if(Qt.length>0){typeof window<"u"&&window.innerWidth<=640?(xt(!0),setTimeout(()=>xt(!1),1500)):e({title:"Fechamento bloqueado",description:`Existem ${Qt.length} comandas com itens em aberto. Finalize-as antes de fechar o caixa.`,variant:"warning",duration:2500});return}}catch{}await Tee({codigoEmpresa:r?.codigo_empresa}),P(!1),e({title:"Caixa fechado!",description:"O relatrio de fechamento foi gerado.",variant:"success"})}catch(Vt){e({title:"Falha ao fechar caixa",description:Vt?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Fechamento"})]})]})]})},Tt=()=>{const Ce=nr=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(nr||0)),[We,He]=v.useState(!1),[xt,at]=v.useState(""),[st,Mt]=v.useState(""),[wt,Vt]=v.useState(!1),Qt=async()=>{try{Vt(!0);const nr=String(xt||"").replace(/\D/g,""),Ar=nr?Number(nr)/100:0;if(Ar<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await td({codigoEmpresa:r?.codigo_empresa}),await Iee({tipo:"sangria",valor:Ar,observacao:st,codigoEmpresa:r?.codigo_empresa}),He(!1),at(""),Mt(""),await Pe(),e({title:"Sangria registrada",variant:"success"})}catch(nr){e({title:"Falha ao registrar sangria",description:nr?.message||"Tente novamente",variant:"destructive"})}finally{Vt(!1)}};return s.jsx(qr,{open:C,onOpenChange:E,children:s.jsxs(Lr,{className:"sm:max-w-lg w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:nr=>nr.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),s.jsx(Jr,{children:T?"Carregando resumo...":M?"Resumo da sesso atual do caixa.":"Nenhuma sesso de caixa aberta."})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Saldo Inicial"}),s.jsx("div",{className:"text-base md:text-lg font-bold tabular-nums leading-tight",children:Ce(M.saldo_inicial)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Entradas"}),s.jsx("div",{className:"text-base md:text-lg font-bold text-success tabular-nums leading-tight",children:Ce(M.totalEntradas)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Sadas"}),s.jsx("div",{className:"text-base md:text-lg font-bold text-danger tabular-nums leading-tight",children:Ce(M.totalSangria)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Saldo Atual"}),s.jsx("div",{className:"text-base md:text-lg font-bold tabular-nums leading-tight",children:Ce((M.saldo_inicial||0)+(M.totalEntradas||0)-(M.totalSangria||0))})]})]}),s.jsxs("div",{className:"mt-5",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("h4",{className:"text-sm font-semibold text-text-secondary",children:"Totais por Finalizadora"})}),Object.keys(M.totalPorFinalizadora||{}).length===0?s.jsx("div",{className:"p-3 text-sm text-text-muted border rounded-md",children:"Nenhuma finalizadora registrada ainda."}):s.jsx("ul",{className:"rounded-md border border-border overflow-hidden divide-y divide-border",children:Object.entries(M.totalPorFinalizadora||{}).map(([nr,Ar])=>s.jsxs("li",{className:"bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:String(nr)}),s.jsx("span",{className:"text-sm font-semibold tabular-nums",children:Ce(Ar)})]},nr))}),s.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Sangrias"}),s.jsx("span",{className:"text-sm font-semibold tabular-nums text-danger",children:Ce(M.totalSangria)})]})]})]}),s.jsxs(mn,{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"mr-auto"}),s.jsx(Ee,{variant:"destructive",onClick:()=>He(!0),children:"Registrar Sangria"}),s.jsx(Ee,{variant:"secondary",onClick:()=>E(!1),children:"Fechar"})]}),s.jsx(qr,{open:We,onOpenChange:He,children:s.jsxs(Lr,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:nr=>nr.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold",children:"Registrar Sangria"}),s.jsx(Jr,{children:"Informe o valor a retirar do caixa e, opcionalmente, uma observao."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"s-valor",children:"Valor"}),s.jsx($t,{id:"s-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:xt,onChange:nr=>{const Ar=(nr.target.value||"").replace(/\D/g,""),cn=Ar?Number(Ar)/100:0,On=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(cn);at(On)},onKeyDown:nr=>{nr.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(nr.key)&&(/^[0-9]$/.test(nr.key)||nr.preventDefault())},onBeforeInput:nr=>{const Ar=nr.data??"";Ar&&/\D/.test(Ar)&&nr.preventDefault()}})]}),s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"s-obs",children:"Observao"}),s.jsx($t,{id:"s-obs",placeholder:"Opcional",value:st,onChange:nr=>Mt(nr.target.value)})]})]}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>He(!1),disabled:wt,children:"Cancelar"}),s.jsx(Ee,{onClick:Qt,disabled:wt,children:wt?"Registrando...":"Confirmar"})]})]})})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma sesso de caixa aberta."})]})})},er=r?.codigo_empresa||"anon",tt={comandaId:`balcao:comandaId:${er}`,items:`balcao:items:${er}`,customerName:`balcao:customer:${er}`,clientChosen:`balcao:clientChosen:${er}`,pendingClientIds:`balcao:pendingClientIds:${er}`,missCount:`balcao:missCount:${er}`,lastMissTs:`balcao:lastMissTs:${er}`},ur=async(Ce,We=3)=>{if(!Ce)return;const He=r?.codigo_empresa,xt=++nt.current;for(let at=0;at<We;at++)try{const st=await Ya({comandaId:Ce,codigoEmpresa:He});if(xt!==nt.current)return;const Mt=(st||[]).map(wt=>({id:wt.id,productId:wt.produto_id,name:wt.descricao||"Item",price:Number(wt.preco_unitario||0),quantity:Number(wt.quantidade||1)}));Mt.length===0&&(mt.current||[]).length>0||c(Mt);try{const wt=await Xo({comandaId:Ce,codigoEmpresa:He});if(xt!==nt.current)return;const Vt=(wt||[]).map(nr=>nr?.nome).filter(Boolean),Qt=Vt.length?Vt.join(", "):"";h(Qt),Nt(!!Qt)}catch{h(""),Nt(!1)}break}catch(st){if(at===We-1)e({title:"Falha ao atualizar itens",description:st?.message||"Tente novamente",variant:"destructive"});else{const Mt=350*(at+1),wt=Math.floor(Math.random()*120);await new Promise(Vt=>setTimeout(Vt,Mt+wt))}}},ln=async()=>{try{d(!0);let Ce=setTimeout(()=>{At.current&&d(!1)},1e4);const We=r?.codigo_empresa;if(!We){At.current&&d(!1);return}try{const st=localStorage.getItem(tt.comandaId),Mt=JSON.parse(localStorage.getItem(tt.items)||"[]"),wt=localStorage.getItem(tt.customerName)||"",Vt=localStorage.getItem(tt.clientChosen),Qt=JSON.parse(localStorage.getItem(tt.pendingClientIds)||"[]");st&&a(Number.isNaN(+st)?st:Number(st)),Array.isArray(Mt)&&Mt.length>0&&c(Mt),wt&&h(wt),Vt==="true"&&Nt(!0),Array.isArray(Qt)&&Qt.length>0&&ut(Qt)}catch{}const He=localStorage.getItem(tt.comandaId),xt=He?Number.isNaN(+He)?He:Number(He):null,at=await kee({codigoEmpresa:We}).catch(()=>null);if(at?.id)a(at.id),await ur(at.id);else if(xt)a(xt),await ur(xt,3);else{let st=0,Mt=0;try{st=Number(localStorage.getItem(tt.missCount)||"0"),Mt=Number(localStorage.getItem(tt.lastMissTs)||"0")}catch{}const wt=Date.now(),Qt=wt-Mt<9e4?st+1:1;try{localStorage.setItem(tt.missCount,String(Qt)),localStorage.setItem(tt.lastMissTs,String(wt))}catch{}try{const nr=localStorage.getItem(tt.customerName)||"",Ar=localStorage.getItem(tt.clientChosen)==="true",cn=JSON.parse(localStorage.getItem(tt.pendingClientIds)||"[]");h(nr||""),Nt(!!Ar),ut(Array.isArray(cn)?cn:[])}catch{}if(a(null),Qt>=2){c([]);try{localStorage.removeItem(tt.comandaId),localStorage.removeItem(tt.items)}catch{}}else try{const nr=JSON.parse(localStorage.getItem(tt.items)||"[]");Array.isArray(nr)&&nr.length>0&&c(nr)}catch{}}try{const st=await dh({includeInactive:!1,search:m?.trim()||void 0,codigoEmpresa:We});At.current&&o(st||[])}catch{o([])}clearTimeout(Ce)}catch(Ce){e({title:"Falha ao carregar Modo Balco",description:Ce?.message||"Tente novamente",variant:"destructive"})}finally{At.current&&d(!1)}},rn=async()=>{try{S(!0);const Ce=r?.codigo_empresa;if(n&&Ce)try{try{await Oe.from("comanda_itens").delete().eq("comanda_id",n).eq("codigo_empresa",Ce)}catch{}try{await Oe.from("comanda_clientes").delete().eq("comanda_id",n).eq("codigo_empresa",Ce)}catch{}await Oe.from("comandas").update({status:"canceled"}).eq("id",n).eq("codigo_empresa",Ce)}catch{}}finally{a(null),c([]),ut([]),h(""),Nt(!1),b(null);try{localStorage.removeItem(tt.comandaId),localStorage.removeItem(tt.items),localStorage.removeItem(tt.customerName)}catch{}S(!1),e({title:"Venda cancelada",variant:"success"})}};v.useEffect(()=>{let Ce=!1;(async()=>{await ln(),!Ce&&At.current&&!n&&(mt.current||[]).length===0&&(Ce=!0,setTimeout(()=>{At.current&&ln()},700))})()},[r?.codigo_empresa]),v.useEffect(()=>{try{n&&localStorage.setItem(tt.comandaId,String(n)),localStorage.setItem(tt.items,JSON.stringify(l||[])),localStorage.setItem(tt.customerName,f||""),localStorage.setItem(tt.clientChosen,Ye?"true":"false"),n?localStorage.removeItem(tt.pendingClientIds):localStorage.setItem(tt.pendingClientIds,JSON.stringify(ve||[]))}catch{}},[n,l,f,Ye,ve]),v.useEffect(()=>{const Ce=()=>{n&&ur(n,2)},We=()=>{document.visibilityState==="visible"&&n&&ur(n,2)};return window.addEventListener("focus",Ce),document.addEventListener("visibilitychange",We),()=>{window.removeEventListener("focus",Ce),document.removeEventListener("visibilitychange",We)}},[n]),v.useEffect(()=>{let Ce=!0;const We=setTimeout(async()=>{try{const He=await dh({includeInactive:!1,search:m?.trim()||void 0,codigoEmpresa:r?.codigo_empresa});if(!Ce)return;let xt=He||[];if(m?.trim()){const at=m.trim().toLowerCase();xt=xt.filter(st=>(st.name||"").toLowerCase().includes(at)||(st.code||"").toLowerCase().includes(at))}xt.sort((at,st)=>{const Mt=at.code||"",wt=st.code||"";return/^\d+$/.test(Mt)&&/^\d+$/.test(wt)?parseInt(Mt,10)-parseInt(wt,10):Mt.localeCompare(wt)}),o(xt)}catch{Ce&&o([])}},300);return()=>{Ce=!1,clearTimeout(We)}},[m]),v.useEffect(()=>{let Ce=!0;const We=setTimeout(async()=>{try{const He=await v2({searchTerm:zt,limit:20,codigoEmpresa:r?.codigo_empresa});if(!Ce)return;const xt=(He||[]).slice().sort((at,st)=>Number(at?.codigo||0)-Number(st?.codigo||0));dt(xt)}catch{Ce&&dt([])}},250);return()=>{Ce=!1,clearTimeout(We)}},[zt]);const fr=v.useMemo(()=>l.reduce((Ce,We)=>Ce+Number(We.price||0)*Number(We.quantity||0),0),[l]),Zt=v.useMemo(()=>{const Ce=new Map;for(const We of l||[]){const He=We.productId;if(!He)continue;const xt=Number(We.quantity||0);Ce.set(He,(Ce.get(He)||0)+xt)}return Ce},[l]),Qn=async(Ce,We={})=>{try{if(!Ye&&!We.skipClientCheck){b(Ce),Ze(!0),e({title:"Selecione o cliente",description:"Escolha um cliente cadastrado antes de vender.",variant:"warning"});return}const He=r?.codigo_empresa;if(!He){e({title:"Empresa no definida",description:"Faa login novamente.",variant:"destructive"});return}if(p)return;const xt=Number(Ce.stock??Ce.currentStock??0),at=Number(Ce.minStock??0);if(xt<=0){e({title:"Sem estoque",description:`Produto "${Ce.name}" est com estoque zerado.`,variant:"destructive"});return}y(Ce.id);let st=n;const Mt=!st;if(!st)try{const Qt=await O7({codigoEmpresa:He});st=Qt.id,a(Qt.id)}catch(Qt){if(Qt?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para vender",description:"Voc precisa abrir o caixa antes de iniciar uma comanda no Balco.",variant:"warning"});return}throw Qt}const wt=Number(Ce.salePrice??Ce.price??0),Vt=(mt.current||[]).find(Qt=>Qt.productId===Ce.id);if(Vt?await ad({itemId:Vt.id,quantidade:Number(Vt.quantity||0)+1,codigoEmpresa:He}):await $O({comandaId:st,produtoId:Ce.id,descricao:Ce.name,quantidade:1,precoUnitario:wt,codigoEmpresa:He}),await ur(st),Mt)try{const Qt=Array.from(new Set(ve||[]));if(Qt.length>0){await Lx({comandaId:st,clienteIds:Qt,nomesLivres:[],codigoEmpresa:He}),await ur(st);const Ar=(await Xo({comandaId:st,codigoEmpresa:He})||[]).map(cn=>cn?.nome).filter(Boolean);h(Ar.length?Ar.join(", "):""),Nt(!0);try{localStorage.removeItem(tt.pendingClientIds),localStorage.setItem(tt.customerName,Ar.length?Ar.join(", "):""),localStorage.setItem(tt.clientChosen,"true")}catch(cn){console.error("Erro ao atualizar cache local:",cn)}}}catch(Qt){console.error("Erro ao associar clientes:",Qt)}xt-1<=0?e({title:"ltima unidade vendida",description:`"${Ce.name}" esgotou aps esta venda.`,variant:"warning"}):xt-1<=at?e({title:"Estoque baixo",description:`"${Ce.name}" atingiu nvel de estoque baixo.`,variant:"warning"}):e({title:"Produto adicionado",description:Ce.name,variant:"success"})}catch(He){const xt=String(He?.message||"").toLowerCase();He?.code==="OUT_OF_STOCK"||xt.includes("sem estoque")?e({title:"Sem estoque",description:"Este produto est sem estoque.",variant:"destructive"}):He?.code==="INSUFFICIENT_STOCK"||xt.includes("insuficiente")?e({title:"Estoque insuficiente",description:He?.message||"Quantidade maior que o disponvel.",variant:"destructive"}):e({title:"Falha ao adicionar",description:He?.message||"Tente novamente",variant:"destructive"})}finally{y(null)}},Kn=async()=>{try{if(de(!0),!Ye){Ze(!0),e({title:"Selecione o cliente",description:"Escolha um cliente cadastrado antes de pagar.",variant:"warning"}),de(!1);return}const Ce=r?.codigo_empresa;if(!Ce){e({title:"Empresa no definida",variant:"destructive"});return}if(!n)try{const st=await O7({codigoEmpresa:Ce});if(!st?.id){e({title:"Comanda no encontrada",description:"Abra uma comanda antes de pagar.",variant:"destructive"}),de(!1);return}a(st.id)}catch(st){if(st?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para pagar",description:" necessrio abrir o caixa antes de iniciar/confirmar uma venda.",variant:"warning"}),de(!1);return}throw st}try{await nHe({comandaId:n,codigoEmpresa:Ce})}catch(st){const Mt=Array.isArray(st?.items)&&st.items.length?st.items.map(wt=>`${wt.name} (solicitado ${wt.solicitado}, estoque ${wt.estoque})`).join("; "):st?.message||"Estoque insuficiente na comanda";e({title:"Estoque insuficiente",description:Mt,variant:"destructive",duration:7e3}),de(!1);return}const We=await Mg({somenteAtivas:!0,codigoEmpresa:Ce});G(We||[]);let He=[];try{const st=await Xo({comandaId:n,codigoEmpresa:Ce});He=(Array.isArray(st)?st:[]).map(wt=>{const Vt=wt?.cliente_id??wt?.clientes?.id??null,Qt=wt?.clientes?.nome??wt?.nome??wt?.nome_livre??"";return Vt?{id:Vt,nome:Qt}:null}).filter(Boolean)}catch{He=[]}Z(He);const xt=We&&We[0]&&We[0].id?We[0].id:null,at=ve&&ve.length>0?ve[0]:He[0]?.id||null;B([{id:1,clientId:at,methodId:xt,value:""}]),q(2);try{const Mt=(await Ya({comandaId:n,codigoEmpresa:Ce})||[]).reduce((wt,Vt)=>wt+Number(Vt.quantidade||0)*Number(Vt.preco_unitario||0),0);if(Mt>0){const wt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Mt);B([{id:1,clientId:at,methodId:xt,value:wt}])}}catch{}U(!0),de(!1);return}catch(Ce){if(Ce?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para pagar",description:" necessrio abrir o caixa antes de iniciar/confirmar uma venda.",variant:"warning"}),de(!1);return}e({title:"Falha ao iniciar pagamento",description:Ce?.message||"Tente novamente",variant:"destructive"})}finally{}};return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Modo Balco - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Venda rpida no balco."})]}),s.jsxs("div",{className:"mb-3 space-y-2",children:[s.jsx("div",{className:"w-full",children:s.jsx(Ad,{value:"balcao",onValueChange:Ce=>{Ce==="mesas"&&t("/vendas"),Ce==="balcao"&&t("/balcao"),Ce==="historico"&&t("/historico")},children:s.jsxs(Nu,{className:"w-full grid grid-cols-3 sm:w-auto sm:inline-flex",children:[s.jsx(Jn,{value:"mesas",children:"Mesas"}),s.jsx(Jn,{value:"balcao",children:"Balco"}),s.jsx(Jn,{value:"historico",children:"Histrico"})]})})}),s.jsxs("div",{className:"w-full flex items-center gap-2 justify-end",children:[s.jsx(lt,{}),s.jsx(Bt,{}),s.jsxs(Ee,{variant:"outline",onClick:()=>E(!0),className:"h-9 rounded-md px-3 sm:h-10",children:[s.jsx(LW,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Detalhes"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Detalhes do Caixa"})]})]})]}),s.jsx(Tt,{}),s.jsx(qr,{open:Se,onOpenChange:Ce=>{Ie(Ce),Ce||re(null)},children:s.jsxs(Lr,{className:"sm:max-w-[420px] w-full max-h-[85vh] flex flex-col animate-none",onKeyDown:Ce=>Ce.stopPropagation(),onPointerDownOutside:Ce=>Ce.stopPropagation(),onInteractOutside:Ce=>Ce.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold break-words",title:ge?.name||"",children:ge?.name||"Produto"}),s.jsx(Jr,{children:"Detalhes do produto e aes rpidas."})]}),ge?s.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),s.jsx("span",{className:"text-sm font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(ge.price??ge.salePrice??0))})]}),ge.category?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),s.jsx("span",{className:"text-sm font-medium",children:ge.category})]}):null,s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof ge.stock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),s.jsx("div",{className:"text-base font-semibold",children:ge.stock})]}),typeof ge.minStock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),s.jsx("div",{className:"text-base font-semibold",children:ge.minStock})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),s.jsxs("div",{className:"text-base font-semibold",children:["x",Zt.get(ge.id)||0]})]})]})]}):null,s.jsxs(mn,{className:"flex items-center justify-between gap-2",children:[s.jsxs(Ee,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{ge&&t("/produtos",{state:{productId:ge.id,productName:ge.name}})},children:[s.jsx(Kl,{className:"w-4 h-4"}),s.jsx("span",{children:"Info"})]}),s.jsx(Ee,{variant:"outline",onClick:()=>{Ie(!1),re(null)},children:"Fechar"}),s.jsx(Ee,{onClick:async()=>{ge&&(await Qn(ge,{skipClientCheck:!1}),Ie(!1),re(null))},children:"Adicionar"})]})]})}),s.jsx(qr,{open:_e,onOpenChange:ue,children:s.jsxs(Lr,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] flex flex-col overflow-hidden animate-none",onOpenAutoFocus:Ce=>Ce.preventDefault(),onKeyDown:Ce=>Ce.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold",children:"Adicionar Produtos"}),s.jsx(Jr,{children:"Busque e adicione produtos  comanda do balco."})]}),s.jsx("div",{className:"p-4 pt-0",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:Ft,onChange:Ce=>qt(Ce.target.value)})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 thin-scroll",children:[s.jsx("ul",{className:"space-y-2",children:(i||[]).filter(Ce=>{const We=(Ft||"").toLowerCase();if(!We)return!0;const He=String(Ce.name||Ce.descricao||"").toLowerCase(),xt=String(Ce.code||Ce.codigo||"").toLowerCase();return He.includes(We)||xt.includes(We)}).map(Ce=>{const We=Zt.get(Ce.id)||0,He=Number(Ce.stock??Ce.currentStock??0),xt=Math.max(0,He-We),at=Number(Ce.salePrice??Ce.price??0);return s.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors border border-border/40",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate max-w-[200px]",title:`${Ce.code?`[${Ce.code}] `:""}${Ce.name}`,children:[Ce.code&&s.jsxs("span",{className:"text-text-muted",children:["[",Ce.code,"]"]})," ",Ce.name]}),We>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",We]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",xt]})]}),s.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",at.toFixed(2)]})]}),s.jsx(Ee,{size:"icon",variant:"outline",className:"flex-shrink-0",onClick:async()=>{await Qn(Ce)},"aria-label":`Adicionar ${Ce.name}`,children:s.jsx(Xa,{className:"h-4 w-4"})})]},Ce.id)})}),Array.isArray(i)&&i.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(hE,{className:"w-16 h-16 text-text-muted mb-4"}),s.jsx("p",{className:"text-sm text-text-muted",children:"Nenhum produto encontrado."})]})]}),s.jsx(mn,{children:s.jsx(Ee,{variant:"outline",onClick:()=>ue(!1),children:"Fechar"})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex flex-col border rounded-lg border-border overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:m,onChange:Ce=>g(Ce.target.value)})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:(i||[]).length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12",children:[s.jsx(hE,{className:"w-16 h-16 text-text-muted mb-4"}),s.jsx("p",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhum produto cadastrado"}),s.jsx("p",{className:"text-sm text-text-muted mb-6 text-center",children:"Cadastre produtos para comear a vender"}),s.jsxs(Ee,{onClick:()=>t("/produtos"),children:[s.jsx(Xa,{className:"mr-2 h-4 w-4"}),"Cadastrar Produto"]})]}):s.jsx("ul",{className:"space-y-2",children:i.map(Ce=>{const We=Zt.get(Ce.id)||0,He=Number(Ce.stock??Ce.currentStock??0),xt=Math.max(0,He-We),at=Number(Ce.salePrice??Ce.price??0);return s.jsx(le.Fragment,{children:s.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{re({...Ce,qty:We,remaining:xt,price:at}),Ie(!0)},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate max-w-[180px]",title:`${Ce.code?`[${Ce.code}] `:""}${Ce.name}`,children:[Ce.code&&s.jsxs("span",{className:"text-text-muted",children:["[",Ce.code,"]"]})," ",Ce.name.length>20?`${Ce.name.substring(0,20)}...`:Ce.name]}),We>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",We]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",xt]})]}),s.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",at.toFixed(2)]})]}),s.jsx(Ee,{size:"icon",variant:"outline",className:"flex-shrink-0",onClick:st=>{st.stopPropagation(),Qn(Ce)},"aria-label":`Adicionar ${Ce.name}`,children:s.jsx(Xa,{className:"h-4 w-4"})})]})},Ce.id)})})})]}),s.jsxs("div",{className:"flex flex-col border rounded-lg border-border overflow-hidden",children:[s.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Comanda"}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"text-base font-bold",children:"Balco"}),f?s.jsx("span",{className:"max-w-[140px] truncate text-[11px] px-2 py-0.5 rounded-full border border-border bg-surface-2 text-text-secondary",children:f}):null]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[s.jsxs(Ee,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs whitespace-nowrap",onClick:()=>ue(!0),title:"Adicionar produto",children:[s.jsx(Xa,{className:"h-4 w-4 mr-1"}),"Produto"]}),Ye&&s.jsx(Ee,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs whitespace-nowrap",onClick:()=>Ze(!0),children:"+ Cliente"}),Ye?s.jsxs(kf,{children:[s.jsx(ym,{asChild:!0,children:s.jsx(Ee,{size:"sm",className:"h-8 px-2 text-xs whitespace-nowrap bg-red-600 hover:bg-red-500 text-white border border-red-600/70 focus:outline-none focus:ring-0 focus-visible:ring-0 shadow-none",disabled:w,children:w?"Cancelando...":"Cancelar"})}),s.jsxs(fd,{className:"sm:max-w-[420px] animate-none",onKeyDown:Ce=>Ce.stopPropagation(),children:[s.jsxs(hd,{children:[s.jsx(pd,{children:"Cancelar venda do balco?"}),s.jsx(gd,{children:"Os itens sero descartados e a venda ser limpa. Esta ao no pode ser desfeita."})]}),s.jsxs(md,{children:[s.jsx(yd,{children:"Voltar"}),s.jsx(vd,{onClick:rn,children:"Confirmar Cancelamento"})]})]})]}):s.jsx(Ee,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs opacity-60 cursor-not-allowed whitespace-nowrap",disabled:!0,children:"Cancelar"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:Ye?l.length===0?s.jsx("div",{className:"text-center text-text-muted pt-16",children:'Comanda vazia. Use o boto "+" para adicionar produtos.'}):s.jsx("ul",{className:"space-y-3 pr-1",children:l.map(Ce=>s.jsxs("li",{className:"p-2 rounded-md border border-border/30 bg-surface hover:bg-surface-2 transition-colors",children:[s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx("div",{className:"font-medium truncate",title:Ce.name,children:Ce.name.length>25?`${Ce.name.substring(0,25)}...`:Ce.name})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ee,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:async We=>{We.stopPropagation();const He=r?.codigo_empresa;if(!He){e({title:"Empresa no definida",variant:"destructive"});return}const xt=Number(Ce.quantity||1)-1;c(at=>at.map(Mt=>Mt.id===Ce.id?{...Mt,quantity:Math.max(xt,0)}:Mt).filter(Mt=>Mt.quantity>0));try{xt<=0?await Lg({itemId:Ce.id,codigoEmpresa:He}):await ad({itemId:Ce.id,quantidade:xt,codigoEmpresa:He})}catch(at){try{const Mt=await Ya({comandaId:n,codigoEmpresa:He});c((Mt||[]).map(wt=>({id:wt.id,productId:wt.produto_id,name:wt.descricao||"Item",price:Number(wt.preco_unitario||0),quantity:Number(wt.quantidade||1)})))}catch{}const st=String(at?.message||"").toLowerCase();at?.code==="INSUFFICIENT_STOCK"||st.includes("insuficiente")?e({title:"Estoque insuficiente",description:at?.message||"Quantidade maior que o disponvel.",variant:"warning"}):e({title:"Falha ao atualizar item",description:at?.message||"Tente novamente",variant:"destructive"})}},children:"-"}),s.jsx("span",{className:"w-7 text-center font-semibold text-sm",children:Ce.quantity}),s.jsx(Ee,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:async We=>{We.stopPropagation();const He=r?.codigo_empresa;if(!He){e({title:"Empresa no definida",variant:"destructive"});return}const xt=Number(Ce.quantity||1)+1;c(at=>at.map(st=>st.id===Ce.id?{...st,quantity:xt}:st));try{await ad({itemId:Ce.id,quantidade:xt,codigoEmpresa:He})}catch(at){try{const Mt=await Ya({comandaId:n,codigoEmpresa:He});c((Mt||[]).map(wt=>({id:wt.id,productId:wt.produto_id,name:wt.descricao||"Item",price:Number(wt.preco_unitario||0),quantity:Number(wt.quantidade||1)})))}catch{}const st=String(at?.message||"").toLowerCase();at?.code==="INSUFFICIENT_STOCK"||st.includes("insuficiente")?e({title:"Estoque insuficiente",description:at?.message||"Quantidade maior que o disponvel.",variant:"warning"}):e({title:"Falha ao atualizar item",description:at?.message||"Tente novamente",variant:"destructive"})}},children:"+"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-semibold whitespace-nowrap",children:["R$ ",(Number(Ce.quantity)*Number(Ce.price)).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border",children:["x",Ce.quantity]})]})]})]},Ce.id))}):s.jsxs("div",{className:"text-center pt-12",children:[s.jsx("div",{className:"text-sm text-text-secondary mb-3",children:"Para comear, inicie uma nova venda e selecione o cliente."}),s.jsx(Ee,{onClick:()=>Ze(!0),children:"Iniciar nova venda"})]})}),s.jsxs("div",{className:"p-4 border-t border-border",children:[s.jsxs("div",{className:"flex justify-between items-center text-lg font-bold mb-3",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",fr.toFixed(2)]})]}),s.jsx(Ee,{size:"lg",className:"w-full",onClick:Kn,disabled:fr<=0,children:"Finalizar Pagamento"})]})]})]}),s.jsx(qr,{open:W,onOpenChange:U,children:s.jsxs(Lr,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] flex flex-col overflow-hidden animate-none",onKeyDown:Ce=>Ce.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Fechar Conta"}),s.jsx(Jr,{children:"Divida o pagamento entre clientes e vrias finalizadoras, se necessrio."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",fr.toFixed(2)]})]}),s.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto thin-scroll pr-1 max-h-[60vh]",children:[s.jsx(gt,{className:"block",children:"Pagamentos"}),(()=>null)(),(()=>null)(),(L||[]).map((Ce,We)=>{const He=st=>{if(!st)return f||"Cliente";const Mt=String(st),wt=(Y||[]).find(Qt=>String(Qt.id)===Mt);if(wt?.nome)return wt.nome;const Vt=(ft||[]).find(Qt=>String(Qt.id)===Mt);return Vt?.nome?Vt.nome:f||"Cliente"},xt=(Y||[]).length>1,at=(Y||[])[0]||null;return(Y||[]).filter(st=>String(st.id)!==String(at?.id||"")),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"sm:col-span-1 flex sm:justify-start",children:L.length>1&&We>0&&s.jsx(Ee,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{B(st=>{const Mt=st.filter(nr=>nr.id!==Ce.id);if(Mt.length===0)return[];const wt=fr>0?fr:0,Vt=Math.floor(wt/Mt.length*100)/100,Qt=wt-Vt*Mt.length;return Mt.map((nr,Ar)=>{const cn=Ar===Mt.length-1?Vt+Qt:Vt,On=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(cn);return{...nr,value:On}})})},children:s.jsx(_d,{className:"h-4 w-4"})})}),We===0?s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:He(at?.id||Ce.clientId)})}):xt?s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(yn,{value:Ce.clientId||"",onValueChange:st=>B(Mt=>Mt.map(wt=>wt.id===Ce.id?{...wt,clientId:st}:wt)),children:[s.jsx(pn,{className:"w-full truncate",children:s.jsx(xn,{placeholder:"Cliente"})}),s.jsx(gn,{children:(Y||[]).map(st=>s.jsx(Wt,{value:st.id,children:st.nome},st.id))})]})}):s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:He(at?.id||Ce.clientId)})}),s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(yn,{value:Ce.methodId||"",onValueChange:st=>B(Mt=>Mt.map(wt=>wt.id===Ce.id?{...wt,methodId:st}:wt)),children:[s.jsx(pn,{className:"w-full truncate",children:s.jsx(xn,{placeholder:"Forma de pagamento"})}),s.jsx(gn,{children:($||[]).map(st=>s.jsx(Wt,{value:st.id,children:st.nome},st.id))})]})}),s.jsx("div",{className:"sm:col-span-3",children:s.jsx($t,{placeholder:"0,00",inputMode:"numeric",value:Ce.value,onChange:st=>{const Mt=(st.target.value||"").replace(/\D/g,""),wt=Mt?Number(Mt)/100:0,Vt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(wt);B(Qt=>Qt.map(nr=>nr.id===Ce.id?{...nr,value:Vt}:nr))},onKeyDown:st=>{st.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(st.key)&&(/^[0-9]$/.test(st.key)||st.preventDefault())},onBeforeInput:st=>{const Mt=st.data??"";Mt&&/\D/.test(Mt)&&st.preventDefault()}})})]},Ce.id)}),s.jsx("div",{children:s.jsx(Ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>{B(Ce=>{const He=Array.isArray(ve)&&ve.length>0?ve:(Y||[]).map(nr=>nr.id),xt=new Set(Ce.map(nr=>nr.clientId).filter(Boolean)),st=(He||[]).filter(nr=>!xt.has(nr))[0]||He[0]||"",Mt=[...Ce,{id:X,clientId:st,methodId:$[0]?.id||"",value:""}],wt=fr>0?fr:0,Vt=Math.floor(wt/Mt.length*100)/100,Qt=wt-Vt*Mt.length;return Mt.map((nr,Ar)=>{const cn=Ar===Mt.length-1?Vt+Qt:Vt,On=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(cn);return{...nr,value:On}})}),q(Ce=>Ce+1)},children:"Adicionar forma"})}),s.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[s.jsx("span",{children:"Soma"}),s.jsxs("span",{children:["R$ ",Dt().toFixed(2)]})]}),s.jsxs("div",{className:"text-sm font-semibold flex justify-between",children:[s.jsx("span",{children:"Restante"}),s.jsxs("span",{className:Math.abs(fr-Dt())<.005?"text-success":"text-warning",children:["R$ ",(fr-Dt()).toFixed(2)]})]})]})]}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>U(!1),disabled:me,children:"Cancelar"}),s.jsx(Ee,{onClick:Je,disabled:me,children:me?"Processando...":"Confirmar Pagamento"})]})]})}),s.jsx(qr,{open:Te,onOpenChange:Ce=>Ze(Ce),children:s.jsxs(Lr,{className:"max-w-lg",onOpenAutoFocus:Ce=>Ce.preventDefault(),onKeyDown:Ce=>Ce.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Identificar Cliente"}),s.jsx(Jr,{children:"Selecione um cliente cadastrado para esta venda."})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"w-full",children:[s.jsx(gt,{className:"mb-1 block",children:"Buscar cliente"}),s.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Nome, e-mail, telefone ou cdigo",className:"pl-9",value:zt,onChange:Ce=>it(Ce.target.value)})]}),s.jsx(Ee,{type:"button",size:"icon",title:"Cadastrar cliente",className:"ml-2 bg-brand text-black hover:bg-brand/90 border border-brand",onClick:()=>{window.location.href="/clientes"},children:s.jsx(Xa,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"mt-2 max-h-48 overflow-auto border rounded-md thin-scroll",children:s.jsxs("ul",{children:[(ft||[]).map(Ce=>{const We=(ve||[]).includes(Ce.id);return s.jsxs("li",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-surface-2 ${We?"bg-surface-2":""}`,onClick:()=>{ut(He=>{const xt=new Set(He||[]);xt.has(Ce.id)?xt.delete(Ce.id):xt.add(Ce.id);const at=Array.from(xt);try{localStorage.setItem(tt.pendingClientIds,JSON.stringify(at))}catch{}return at})},children:[s.jsx("div",{children:s.jsxs("div",{className:"font-medium",children:[Ce.codigo!=null?String(Ce.codigo)+" - ":"",Ce.nome]})}),s.jsx(Ds,{size:16,className:We?"text-success":"text-text-muted opacity-40"})]},Ce.id)}),(!ft||ft.length===0)&&s.jsx("li",{className:"p-2 text-sm text-text-muted",children:"Nenhum cliente encontrado."})]})})]})}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>Ze(!1),children:"Fechar"}),s.jsx(Ee,{onClick:async()=>{try{const Ce=Array.from(new Set(ve||[]));if(Ce.length===0){e({title:"Selecione pelo menos um cliente",variant:"warning"});return}const We=r?.codigo_empresa;if(n){try{await Lx({comandaId:n,clienteIds:Ce,nomesLivres:[],codigoEmpresa:We})}catch(at){if(!at?.message?.includes("duplicate")&&!at?.message?.includes("violates foreign key"))throw at;console.log("Alguns clientes j estavam vinculados, continuando...")}const xt=(await Xo({comandaId:n,codigoEmpresa:We})||[]).map(at=>at?.nome).filter(Boolean);h(xt.length?xt.join(", "):""),Nt(!0),Ze(!1)}else{const He=(ft||[]).filter(at=>Ce.includes(at.id)).map(at=>at?.nome).filter(Boolean),xt=He.length?He.join(", "):"";h(xt),Nt(!0);try{localStorage.setItem(tt.customerName,xt||""),localStorage.setItem(tt.clientChosen,"true")}catch{}Ze(!1)}if(x){const He=x;b(null),await Qn(He,{skipClientCheck:!0})}}catch(Ce){e({title:"Falha ao iniciar venda",description:Ce?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar"})]})]})}),s.jsx(qr,{open:!!pe,onOpenChange:Ce=>!Ce&&Ue(null),children:s.jsx(Lr,{className:"sm:max-w-[425px]",children:pe&&s.jsxs(s.Fragment,{children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-lg",children:pe.name}),s.jsx(Jr,{className:"text-sm",children:"Detalhes do item"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Preo Unitrio"}),s.jsxs("p",{className:"text-lg font-bold",children:["R$ ",Number(pe.price).toFixed(2)]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Quantidade"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:async Ce=>{Ce.stopPropagation();const We=r?.codigo_empresa;if(!We){e({title:"Empresa no definida",variant:"destructive"});return}const He=Math.max(0,pe.quantity-1);try{He<=0?(await Lg({itemId:pe.id,codigoEmpresa:We}),Ue(null)):(await ad({itemId:pe.id,quantidade:He,codigoEmpresa:We}),Ue({...pe,quantity:He}));const xt=await Ya({comandaId:n,codigoEmpresa:We});c((xt||[]).map(at=>({id:at.id,productId:at.produto_id,name:at.descricao||"Item",price:Number(at.preco_unitario||0),quantity:Number(at.quantidade||1)})))}catch(xt){e({title:"Erro ao atualizar quantidade",description:xt?.message||"Tente novamente",variant:"destructive"})}},children:"-"}),s.jsx("span",{className:"w-8 text-center font-semibold",children:pe.quantity}),s.jsx(Ee,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:async Ce=>{Ce.stopPropagation();const We=r?.codigo_empresa;if(!We){e({title:"Empresa no definida",variant:"destructive"});return}const He=pe.quantity+1;try{await ad({itemId:pe.id,quantidade:He,codigoEmpresa:We}),Ue({...pe,quantity:He});const xt=await Ya({comandaId:n,codigoEmpresa:We});c((xt||[]).map(at=>({id:at.id,productId:at.produto_id,name:at.descricao||"Item",price:Number(at.preco_unitario||0),quantity:Number(at.quantidade||1)})))}catch(xt){e({title:"Erro ao atualizar quantidade",description:xt?.message||"Tente novamente",variant:"destructive"})}},children:"+"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Subtotal"}),s.jsxs("p",{className:"text-lg font-bold",children:["R$ ",(pe.quantity*pe.price).toFixed(2)]})]})]}),s.jsx(mn,{children:s.jsx(Ee,{variant:"destructive",onClick:async()=>{try{const Ce=r?.codigo_empresa;if(!Ce){e({title:"Empresa no definida",variant:"destructive"});return}await Lg({itemId:pe.id,codigoEmpresa:Ce});const We=await Ya({comandaId:n,codigoEmpresa:Ce});c((We||[]).map(He=>({id:He.id,productId:He.produto_id,name:He.descricao||"Item",price:Number(He.preco_unitario||0),quantity:Number(He.quantidade||1)}))),Ue(null),e({title:"Item removido",variant:"success"})}catch(Ce){e({title:"Falha ao remover item",description:Ce?.message||"Tente novamente",variant:"destructive"})}},children:"Remover Item"})})]})})})]})}function mre(e){try{const r=new DOMParser().parseFromString(e,"text/xml"),n=r.querySelector("parsererror");if(n)throw new Error("XML invlido: "+n.textContent);const a=rQe(r),i=nQe(r),o=aQe(r),l=iQe(r),c=o.reduce((u,d)=>u+(d.valorTotal||0),0);return{produtos:o,fornecedor:i,pagamentos:l,nfe:{...a,totalNota:c},success:!0}}catch(t){return console.error("[XMLParser] Erro ao fazer parse do XML:",t),{produtos:[],fornecedor:null,nfe:null,success:!1,error:t.message}}}function rQe(e){const t=e.querySelector("ide");if(!t)return null;let r="";const n=e.querySelector("chNFe");if(n&&(r=n.textContent.trim()),!r){const a=e.querySelector("infNFe");if(a){const i=a.getAttribute("Id");i&&(r=i.replace("NFe",""))}}return{numero:fn(t,"nNF"),serie:fn(t,"serie"),dataEmissao:fn(t,"dhEmi"),chaveAcesso:r,tipo:fn(t,"tpNF")==="0"?"Entrada":"Sada",naturezaOperacao:fn(t,"natOp")}}function nQe(e){const t=e.querySelector("emit");return t?{cnpj:fn(t,"CNPJ"),razaoSocial:fn(t,"xNome"),nomeFantasia:fn(t,"xFant"),endereco:{logradouro:fn(t,"xLgr"),numero:fn(t,"nro"),bairro:fn(t,"xBairro"),cidade:fn(t,"xMun"),uf:fn(t,"UF"),cep:fn(t,"CEP")}}:null}function aQe(e){const t=e.querySelectorAll("det"),r=new Map;return t.forEach((n,a)=>{const i=n.querySelector("prod"),o=n.querySelector("imposto");if(!i)return;const l=fn(i,"cProd"),c=fn(i,"cEAN"),u=fn(i,"xProd"),d=parseFloat(fn(i,"qCom")||"0"),f=c&&c!=="SEM GTIN"?`ean:${c}`:l?`cod:${l}`:`nome:${u.toLowerCase().trim()}`;if(r.has(f)){const h=r.get(f);h.quantidade+=d,h.valorTotal+=parseFloat(fn(i,"vProd")||"0")}else{const h={codigo:l,ean:c,nome:u,ncm:fn(i,"NCM"),cest:fn(i,"CEST"),cfop:fn(i,"CFOP"),unidade:fn(i,"uCom"),quantidade:d,valorUnitario:parseFloat(fn(i,"vUnCom")||"0"),valorTotal:parseFloat(fn(i,"vProd")||"0"),desconto:parseFloat(fn(i,"vDesc")||"0"),impostos:sQe(o),descricao:u,origem:a+1};r.set(f,h)}}),Array.from(r.values())}function iQe(e){const t=e.querySelectorAll("pag"),r=[];return t.forEach(n=>{const a=fn(n,"tPag"),i=parseFloat(fn(n,"vPag")||"0");a&&i>0&&r.push({codigoSefaz:a,valor:i,descricao:oQe(a)})}),r}function oQe(e){return{"01":"Dinheiro","02":"Cheque","03":"Carto de Crdito","04":"Carto de Dbito","05":"Carto da Loja",10:"Vale Alimentao",11:"Vale Refeio",12:"Vale Presente",13:"Vale Combustvel",14:"Duplicata Mercantil",15:"Boleto Bancrio",16:"Depsito Bancrio",17:"PIX Dinmico",18:"Transferncia Bancria",19:"Programa de Fidelidade",20:"PIX Esttico",21:"Crdito em Loja",22:"Pagamento Eletrnico",90:"Sem Pagamento",99:"Outros"}[e]||"Outros"}function sQe(e){if(!e)return{};const t={},r=e.querySelector("ICMS");if(r){const o=r.children[0];o&&(t.icms={cst:fn(o,"CST"),csosn:fn(o,"CSOSN"),aliquota:parseFloat(fn(o,"pICMS")||"0"),valor:parseFloat(fn(o,"vICMS")||"0")})}const n=e.querySelector("PIS");if(n){const o=n.children[0];o&&(t.pis={cst:fn(o,"CST"),aliquota:parseFloat(fn(o,"pPIS")||"0"),valor:parseFloat(fn(o,"vPIS")||"0")})}const a=e.querySelector("COFINS");if(a){const o=a.children[0];o&&(t.cofins={cst:fn(o,"CST"),aliquota:parseFloat(fn(o,"pCOFINS")||"0"),valor:parseFloat(fn(o,"vCOFINS")||"0")})}const i=e.querySelector("IPI");if(i){const o=i.querySelector("IPITrib");o&&(t.ipi={cst:fn(o,"CST"),aliquota:parseFloat(fn(o,"pIPI")||"0"),valor:parseFloat(fn(o,"vIPI")||"0")})}return t}function fn(e,t){if(!e)return"";const r=e.querySelector(t);return r?r.textContent.trim():""}function pre(e,t){if(e.ean&&e.ean!=="SEM GTIN"){const a=t.find(i=>i.barcode===e.ean);if(a)return a}if(e.codigo){const a=t.find(i=>i.code===e.codigo);if(a)return a}const r=e.nome?.toLowerCase().trim()||"";if(r){const a=t.find(i=>(i.name?.toLowerCase().trim()||"")===r);if(a)return a}return t.find(a=>lQe(a.name?.toLowerCase()||"",e.nome?.toLowerCase()||"")>.85)||null}function lQe(e,t){const r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length===0)return 1;const a=cQe(r,n);return(r.length-a)/r.length}function cQe(e,t){const r=[];for(let n=0;n<=t.length;n++)r[n]=[n];for(let n=0;n<=e.length;n++)r[0][n]=n;for(let n=1;n<=t.length;n++)for(let a=1;a<=e.length;a++)t.charAt(n-1)===e.charAt(a-1)?r[n][a]=r[n-1][a-1]:r[n][a]=Math.min(r[n-1][a-1]+1,r[n][a-1]+1,r[n-1][a]+1);return r[t.length][e.length]}function uQe(e,t){return{code:e.codigo||"",name:e.nome||"",barcode:e.ean&&e.ean!=="SEM GTIN"?e.ean:"",ncm:e.ncm||"",cest:e.cest||"",unit:e.unidade||"UN",costPrice:e.valorUnitario||0,salePrice:e.valorUnitario*1.3||0,stock:0,minStock:0,status:"active",active:!0,type:"Venda",category:"Importados",cfopInterno:e.cfop||"",cstIcmsInterno:e.impostos?.icms?.cst||"",csosnInterno:e.impostos?.icms?.csosn||"",aliqIcmsInterno:e.impostos?.icms?.aliquota||0,cstPisEntrada:e.impostos?.pis?.cst||"",aliqPisPercent:e.impostos?.pis?.aliquota||0,aliqCofinsPercent:e.impostos?.cofins?.aliquota||0,cstIpi:e.impostos?.ipi?.cst||"",aliqIpiPercent:e.impostos?.ipi?.aliquota||0,codigo_empresa:t,importedViaXML:!0,xmlChave:e?.xmlChave||null,xmlNumero:e?.xmlNumero||null,xmlSerie:e?.xmlSerie||null,xmlEmissao:e?.xmlEmissao||null}}function dQe({open:e,onOpenChange:t,products:r,codigoEmpresa:n,onSuccess:a}){const{toast:i}=Za(),[o,l]=v.useState("upload"),[c,u]=v.useState(null),[d,f]=v.useState(null),[h,m]=v.useState([]),[g,p]=v.useState(!1),[y,x]=v.useState({created:0,updated:0,errors:0,details:[]}),b=async A=>{const P=A.target.files?.[0];if(P){if(!P.name.endsWith(".xml")){i({title:"Arquivo invlido",description:"Selecione um arquivo XML vlido.",variant:"destructive"});return}u(P);try{const C=await P.text(),E=mre(C);if(!E.success){i({title:"Erro ao ler XML",description:E.error||"XML invlido",variant:"destructive"});return}if(!E.produtos||E.produtos.length===0){i({title:"Nenhum produto encontrado",description:"O XML no contm produtos.",variant:"warning"});return}f(E);let R=r;try{R=await dh({searchTerm:"",limit:1e4,codigoEmpresa:n})||r}catch(T){console.warn("[XMLImport] No foi possvel carregar lista completa, usando cache:",T)}const k=E.produtos.map(T=>{const I=pre(T,R);return{xml:T,existing:I,isNew:!I,willCreate:!I,willUpdate:!!I}});m(k),l("preview")}catch(C){console.error("[XMLImport] Erro ao processar arquivo:",C),i({title:"Erro ao processar XML",description:C.message,variant:"destructive"})}}},w=async()=>{l("processing"),p(!0);const A={created:0,updated:0,errors:0,skipped:0,details:[]};for(const P of h)try{if(P.isNew){const C=uQe(P.xml,n);C.importedViaXML=!0,C.category="Importados",d?.nfe&&(C.xmlChave=d.nfe.chaveAcesso||null,C.xmlNumero=d.nfe.numero||null,C.xmlSerie=d.nfe.serie||null,C.xmlEmissao=d.nfe.dataEmissao||null);try{await hre(C),A.created++,A.details.push({produto:P.xml.nome,acao:"Criado",status:"success"})}catch(E){if(E.message?.includes("duplicate")||E.message?.includes("unique constraint")){console.warn("[XMLImport] Produto j existe, tentando atualizar estoque:",P.xml.nome);const k=(await dh({searchTerm:P.xml.nome,limit:100,codigoEmpresa:n})).find(T=>T.name?.toLowerCase()===P.xml.nome?.toLowerCase()||T.barcode===P.xml.ean||T.code===P.xml.codigo);k&&P.xml.quantidade>0?(await GO({productId:k.id,adjustment:P.xml.quantidade,reason:`Entrada via XML - NF-e ${d.nfe?.numero||""}`,codigoEmpresa:n}),A.updated++,A.details.push({produto:P.xml.nome,acao:"J existe - Estoque atualizado",status:"success"})):(A.skipped++,A.details.push({produto:P.xml.nome,acao:"J existe - Ignorado",status:"warning"}))}else throw E}}else P.xml.quantidade>0&&await GO({productId:P.existing.id,adjustment:P.xml.quantidade,reason:`Entrada via XML - NF-e ${d.nfe?.numero||""}`,codigoEmpresa:n}),A.updated++,A.details.push({produto:P.xml.nome,acao:"Estoque atualizado",status:"success"})}catch(C){console.error("[XMLImport] Erro ao processar produto:",P.xml.nome,C),A.errors++,A.details.push({produto:P.xml.nome,acao:"Erro",status:"error",error:C.message})}x(A),p(!1),l("done"),A.errors===0?i({title:"Importao concluda!",description:`${A.created} produto(s) criado(s), ${A.updated} atualizado(s).`,variant:"success"}):i({title:"Importao concluda com erros",description:`${A.created} criado(s), ${A.updated} atualizado(s), ${A.errors} erro(s).`,variant:"warning"}),a&&a()},S=()=>{l("upload"),u(null),f(null),m([]),x({created:0,updated:0,errors:0,details:[]}),t(!1)},j=()=>{l("upload"),u(null),f(null),m([])};return s.jsx(qr,{open:e,onOpenChange:S,children:s.jsxs(Lr,{className:"max-w-4xl max-h-[85vh] flex flex-col overflow-hidden",children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Importar XML de Compra (NF-e)"}),s.jsxs(Jr,{children:[o==="upload"&&"Selecione o arquivo XML da nota fiscal de entrada",o==="preview"&&"Revise os produtos que sero importados",o==="processing"&&"Processando produtos...",o==="done"&&"Importao finalizada"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o==="upload"&&s.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("label",{htmlFor:"xml-upload",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer bg-surface hover:bg-surface-2 transition-colors",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(UW,{className:"w-12 h-12 mb-4 text-text-muted"}),s.jsx("p",{className:"mb-2 text-sm text-text-primary font-semibold",children:"Clique para selecionar ou arraste o arquivo"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Arquivo XML de NF-e (Nota Fiscal Eletrnica)"})]}),s.jsx("input",{id:"xml-upload",type:"file",accept:".xml",className:"hidden",onChange:b})]}),c&&s.jsxs("div",{className:"mt-4 p-3 bg-surface-2 rounded-lg flex items-center gap-2",children:[s.jsx(Kl,{className:"w-5 h-5 text-success"}),s.jsx("span",{className:"text-sm text-text-primary",children:c.name})]})]})}),o==="preview"&&s.jsxs("div",{className:"space-y-4",children:[d?.nfe&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Informaes da NF-e"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Nmero:"})," ",s.jsx("span",{className:"font-mono",children:d.nfe.numero})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Srie:"})," ",s.jsx("span",{className:"font-mono",children:d.nfe.serie})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Tipo:"})," ",s.jsx("span",{children:d.nfe.tipo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Fornecedor:"})," ",s.jsx("span",{children:d.fornecedor?.razaoSocial})]})]}),d.nfe.chaveAcesso&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[s.jsx("span",{className:"text-text-muted text-xs",children:"Chave de Acesso:"}),s.jsx("p",{className:"font-mono text-xs break-all",children:d.nfe.chaveAcesso})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border flex flex-col max-h-[500px]",children:[s.jsxs("h3",{className:"font-semibold mb-3",children:["Produtos Encontrados (",h.length,")"]}),s.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:h.map((A,P)=>s.jsxs("div",{className:Ot("p-3 rounded-lg border flex items-start gap-3",A.isNew?"bg-success/10 border-success/30":"bg-info/10 border-info/30"),children:[A.isNew?s.jsx(Xa,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}):s.jsx(Nce,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-sm truncate",children:A.xml.nome}),s.jsxs("p",{className:"text-xs text-text-muted",children:[A.xml.codigo&&`Cdigo: ${A.xml.codigo}  `,A.xml.ean&&A.xml.ean!=="SEM GTIN"&&`EAN: ${A.xml.ean}  `,"Qtd: ",A.xml.quantidade," ",A.xml.unidade]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",A.xml.valorUnitario.toFixed(2)]}),s.jsx("p",{className:"text-xs text-text-muted",children:A.isNew?"Novo produto":"Atualizar estoque"})]})]})})]},P))})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),s.jsxs("span",{children:[h.filter(A=>A.isNew).length," produto(s) novo(s)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-info"}),s.jsxs("span",{children:[h.filter(A=>!A.isNew).length," produto(s) existente(s)"]})]})]})]}),o==="processing"&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(jg,{className:"w-12 h-12 animate-spin text-warning mb-4"}),s.jsx("p",{className:"text-lg font-semibold",children:"Processando produtos..."}),s.jsx("p",{className:"text-sm text-text-muted",children:"Aguarde enquanto importamos os produtos"})]}),o==="done"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-6 border border-border text-center",children:[s.jsx(Ds,{className:"w-16 h-16 text-success mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Importao Concluda!"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:y.created}),s.jsx("p",{className:"text-sm text-text-muted",children:"Criados"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-info",children:y.updated}),s.jsx("p",{className:"text-sm text-text-muted",children:"Atualizados"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-danger",children:y.errors}),s.jsx("p",{className:"text-sm text-text-muted",children:"Erros"})]})]})]}),y.details.length>0&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Detalhes"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.details.map((A,P)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.status==="success"?s.jsx(Ds,{className:"w-4 h-4 text-success flex-shrink-0"}):s.jsx(wd,{className:"w-4 h-4 text-danger flex-shrink-0"}),s.jsx("span",{className:"flex-1 truncate",children:A.produto}),s.jsx("span",{className:Ot("text-xs px-2 py-1 rounded",A.status==="success"?"bg-success/20 text-success":"bg-danger/20 text-danger"),children:A.acao})]},P))})]})]})]}),s.jsxs(mn,{children:[o==="upload"&&s.jsx(Ee,{variant:"outline",onClick:S,children:"Cancelar"}),o==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(Ee,{variant:"outline",onClick:j,children:"Voltar"}),s.jsxs(Ee,{onClick:w,children:["Confirmar Importao (",h.length," produtos)"]})]}),o==="done"&&s.jsx(Ee,{onClick:S,children:"Fechar"})]})]})})}const fQe=[],hQe=[],mQe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},KO={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function pQe(e){const t=["Cdigo","Produto","Categoria","Tipo","Unidade","Preo Custo","Preo Venda","% Lucro","Estoque","Estoque Mn.","Validade","Status","Ativo","EAN-13","EAN-13 Caixa","Referncia","Marca","Grupo","NCM","Descrio NCM","CEST","Usar CSOSN","CFOP Interno","CST ICMS Interno","CSOSN Interno","Aliq ICMS Interno (%)","CFOP Externo","CST ICMS Externo","CSOSN Externo","Aliq ICMS Externo (%)","CST PIS Entrada","CST PIS Sada","Aliq PIS (%)","Aliq COFINS (%)","CST IPI","Aliq IPI (%)","FCP (%)","MVA (%)","Base Reduzida (%)"],r=";",n=p=>{const y=Number(p??0);return Number.isFinite(y)?y.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"0,00"},a=p=>`R$ ${n(p)}`,i=p=>{const y=Number(p??0);return Number.isFinite(y)?y.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},o=p=>{if(!p)return"";try{if(typeof p=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(p)){const[x,b,w]=p.split("-");return`${w}/${b}/${x}`}const y=new Date(p);if(!isNaN(y)){const x=String(y.getDate()).padStart(2,"0"),b=String(y.getMonth()+1).padStart(2,"0"),w=y.getFullYear();return`${x}/${b}/${w}`}}catch{}return String(p)},l=p=>p==="active"?"Ativo":p==="low_stock"?"Estoque Baixo":p==="inactive"?"Inativo":"",c=p=>p?"Sim":"No",u=p=>p??"",d=p=>{const y=p==null?"":String(p);return/[";\n]/.test(y)?`"${y.replace(/"/g,'""')}"`:y},f=[];f.push("\uFEFF"+t.join(r));for(const p of e){const y=[u(p.code),u(p.name),u(p.category),u(p.type),u(p.unit),a(p.costPrice),a(p.price??p.salePrice),i(p.marginPercent),Number(p.stock??0),Number(p.minStock??0),o(p.validade),l(p.status),c(p.active!==!1),u(p.barcode),u(p.barcodeBox),u(p.reference),u(p.brand),u(p.group),u(p.ncm),u(p.ncmDescription),u(p.cest),p.useCsosn?"Sim":"",u(p.cfopInterno),u(p.cstIcmsInterno),u(p.csosnInterno),i(p.aliqIcmsInterno),u(p.cfopExterno),u(p.cstIcmsExterno),u(p.csosnExterno),i(p.aliqIcmsExterno),u(p.cstPisEntrada),u(p.cstPisSaida),i(p.aliqPisPercent),i(p.aliqCofinsPercent),u(p.cstIpi),i(p.aliqIpiPercent),i(p.fcpPercent),i(p.mvaPercent),i(p.baseReduzidaPercent)].map(d).join(r);f.push(y)}const h=new Blob([f.join(`
`)],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(h),g=document.createElement("a");g.href=m,g.download="produtos.csv",document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(m)}function Cc(e,{action:t}={}){const r=String(e?.message||e||"").toLowerCase();if(r.includes("categoria possui produtos ativos vinculados"))return{title:"No  possvel remover",description:"Existem produtos ativos vinculados a esta categoria. Inative ou recategoriz-os antes."};if(r.includes("categoria no encontrada"))return{title:"Categoria no encontrada",description:"No foi possvel localizar a categoria para desativao."};if(r.includes("duplicate key")&&r.includes("ux_produtos_empresa_codigo_produto"))return{title:"Cdigo j cadastrado",description:"J existe um produto com este cdigo na sua empresa. Informe outro cdigo."};if(r.includes("duplicate key")&&r.includes("unique constraint"))return{title:"Registro j existe",description:"J existe um registro com estes dados."};if(r.includes("permission denied")||r.includes("violates row-level security")||r.includes("rls"))return{title:"Sem permisso",description:"Voc no tem permisso para executar esta ao."};const n=r.match(/null value in column "([^"]+)" violates not-null constraint/);return n?{title:"Campo obrigatrio",description:`Preencha o campo "${n[1].replace(/_/g," ")}".`}:r.includes("invalid input syntax")||r.includes("invalid input value")?{title:"Valor invlido",description:"Revise os valores informados (formato invlido)."}:r.includes("violates check constraint")?{title:"Valor invlido",description:"Os dados informados no atendem s regras do sistema."}:r.includes("violates foreign key constraint")?r.includes("update or delete on table")?{title:"No  possvel excluir",description:"Existem registros vinculados que impedem a excluso."}:{title:"Relao invlida",description:"O registro relacionado no foi encontrado ou  invlido."}:r.includes("failed to fetch")||r.includes("networkerror")||r.includes("network error")?{title:"Falha de conexo",description:"Verifique sua internet e tente novamente."}:r.includes("timeout")?{title:"Tempo esgotado",description:"A operao demorou demais. Tente novamente."}:r.includes("rate limit")||r.includes("too many requests")||r.includes("status code 429")?{title:"Muitas solicitaes",description:"Aguarde alguns segundos e tente novamente."}:t==="save"?{title:"Falha ao salvar",description:"No foi possvel salvar o produto. Tente novamente."}:t==="delete"?{title:"Falha ao inativar",description:"No foi possvel inativar o produto."}:t==="fetch"?{title:"Erro ao carregar",description:"No foi possvel atualizar a lista de produtos."}:t==="export"?{title:"Falha ao exportar",description:"No foi possvel gerar o arquivo."}:{title:"Erro",description:e?.message||"Ocorreu um erro."}}const EA=({icon:e,title:t,value:r,subtitle:n,color:a,onClick:i,isActive:o})=>{const l=e;return s.jsxs(lr.div,{variants:KO,className:Ot("bg-surface rounded-lg border-2 p-4 flex flex-col justify-between gap-2 cursor-pointer transition-all duration-300",o?`${a}/30 border-${a}`:"border-border hover:border-border-hover"),onClick:i,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-text-secondary text-sm font-semibold",children:t}),s.jsx(l,{className:`w-5 h-5 ${a}`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r}),s.jsx("p",{className:"text-xs text-text-muted",children:n})]})]})};function gQe({open:e,onOpenChange:t,product:r,onSave:n,categories:a,onCreateCategory:i,suggestedCode:o}){const{toast:l}=Za(),{userProfile:c}=po(),[u,d]=v.useState("dados"),[f,h]=v.useState(r?.code||""),[m,g]=v.useState(r?.name||""),[p,y]=v.useState(r?.category||""),[x,b]=v.useState(r?.type||"Venda"),[w,S]=v.useState(r?.unit||"UN"),[j,A]=v.useState(r?.active??!0),[P,C]=v.useState(r?.barcode||""),[E,R]=v.useState(r?.barcodeBox||""),[k,T]=v.useState(r?.reference||""),[I,M]=v.useState(r?.brand||""),[z,W]=v.useState(r?.group||""),[U,$]=v.useState(!!r?.allowSale),[G,me]=v.useState(!!r?.payCommission),[de,L]=v.useState(!!r?.variablePrice),[B,X]=v.useState(!!r?.composition),[q,Y]=v.useState(!!r?.service),[Z,ge]=v.useState(!!r?.hasGrid),[re,Se]=v.useState(!!r?.usePriceTable),[Ie,pe]=v.useState(!!r?.fuel),[Ue,_e]=v.useState(!!r?.useImei),[ue,Ft]=v.useState(!!r?.stockByGrid),[qt,zt]=v.useState(!!r?.showInApp),[it,ft]=v.useState(r?.costPrice!=null?Number(r.costPrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.cost!=null?Number(r.cost).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[dt,ve]=v.useState(r?.salePrice!=null?Number(r.salePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.price!=null?Number(r.price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[ut,Te]=v.useState(r?.marginPercent!=null?String(Number(r.marginPercent).toFixed(2)).replace(".",","):""),[Ze,Ye]=v.useState(r?.stock?String(r.stock):""),[Nt,nt]=v.useState(r?.minStock?String(r.minStock):""),[mt,At]=v.useState(r?.status||"active"),[Pe,Je]=v.useState(r?.validade||null),[Dt,qe]=v.useState(!1),[lt,Bt]=v.useState(!1),[Tt,er]=v.useState(""),[tt,ur]=v.useState(!0),[ln,rn]=v.useState(!!(r?.csosnInterno||r?.csosnExterno)),[fr,Zt]=v.useState(r?.cfopInterno||""),[Qn,Kn]=v.useState(r?.cstIcmsInterno||""),[Ce,We]=v.useState(r?.csosnInterno||""),[He,xt]=v.useState(r?.aliqIcmsInterno!=null?String(r.aliqIcmsInterno).replace(".",","):""),[at,st]=v.useState(r?.cfopExterno||""),[Mt,wt]=v.useState(r?.cstIcmsExterno||""),[Vt,Qt]=v.useState(r?.csosnExterno||""),[nr,Ar]=v.useState(r?.aliqIcmsExterno!=null?String(r.aliqIcmsExterno).replace(".",","):""),[cn,On]=v.useState(r?.cstPisEntrada||""),[ca,Yn]=v.useState(r?.cstPisSaida||""),[oi,An]=v.useState(r?.aliqPisPercent!=null?String(r.aliqPisPercent).replace(".",","):""),[ua,Ni]=v.useState(r?.aliqCofinsPercent!=null?String(r.aliqCofinsPercent).replace(".",","):""),[ei,da]=v.useState(r?.cstIpi||""),[Ia,si]=v.useState(r?.aliqIpiPercent!=null?String(r.aliqIpiPercent).replace(".",","):""),[Xn,va]=v.useState(r?.fcpPercent!=null?String(r.fcpPercent).replace(".",","):""),[Ri,Sn]=v.useState(r?.mvaPercent!=null?String(r.mvaPercent).replace(".",","):""),[Io,Li]=v.useState(r?.baseReduzidaPercent!=null?String(r.baseReduzidaPercent).replace(".",","):""),[yo,Ci]=v.useState(r?.ncm||""),[J,Le]=v.useState(r?.ncmDescription||""),[Pt,Yt]=v.useState(r?.cest||""),[ot,Lt]=v.useState(!1),[ir,te]=v.useState(""),Ne=he=>{const Ke=String(he||"").replace(/\D/g,"");return(Ke?Number(Ke)/100:0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},V=he=>{if(!he)return 0;const Ke=String(he).replace(/\./g,"").replace(",","."),rt=Number(Ke);return Number.isFinite(rt)?rt:0},ee=he=>{const Ke=String(he||"").replace(/[^\d,\.]/g,"").replace(/\./g,"").replace(",","."),rt=Number(Ke);return(Number.isFinite(rt)?rt:0).toFixed(2).replace(".",",")},oe=he=>{if(he==null||he==="")return 0;const Ke=String(he).replace(/\./g,"").replace(",","."),rt=Number(Ke);return Number.isFinite(rt)?rt:0},ye=he=>String(he||"").replace(/\D/g,"").slice(0,13),ke=he=>String(he||"").replace(/\D/g,"").slice(0,4),Me=he=>String(he||"").replace(/\D/g,"").slice(0,8),ie=he=>String(he||"").replace(/\D/g,"").slice(0,7);v.useEffect(()=>{h(r?.code||""),g(r?.name||""),y(r?.category||""),b(r?.type||"Venda"),S(r?.unit||"UN"),A(r?.active??!0),C(r?.barcode||""),R(r?.barcodeBox||""),T(r?.reference||""),M(r?.brand||""),W(r?.group||""),$(!!r?.allowSale),me(!!r?.payCommission),L(!!r?.variablePrice),X(!!r?.composition),Y(!!r?.service),ge(!!r?.hasGrid),Se(!!r?.usePriceTable),pe(!!r?.fuel),_e(!!r?.useImei),Ft(!!r?.stockByGrid),zt(!!r?.showInApp),ft(r?.costPrice!=null?Number(r.costPrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.cost!=null?Number(r.cost).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),ve(r?.salePrice!=null?Number(r.salePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.price!=null?Number(r.price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),Te(r?.marginPercent!=null?String(Number(r.marginPercent).toFixed(2)).replace(".",","):""),Ye(r?.stock?String(r.stock):""),nt(r?.minStock?String(r.minStock):""),At(r?.status||"active"),Je(r?.validade||null),rn(!!(r?.csosnInterno||r?.csosnExterno)),Zt(r?.cfopInterno||""),Kn(r?.cstIcmsInterno||""),We(r?.csosnInterno||""),xt(r?.aliqIcmsInterno!=null?String(r.aliqIcmsInterno).replace(".",","):""),st(r?.cfopExterno||""),wt(r?.cstIcmsExterno||""),Qt(r?.csosnExterno||""),Ar(r?.aliqIcmsExterno!=null?String(r.aliqIcmsExterno).replace(".",","):""),On(r?.cstPisEntrada||""),Yn(r?.cstPisSaida||""),An(r?.aliqPisPercent!=null?String(r.aliqPisPercent).replace(".",","):""),Ni(r?.aliqCofinsPercent!=null?String(r.aliqCofinsPercent).replace(".",","):""),da(r?.cstIpi||""),si(r?.aliqIpiPercent!=null?String(r.aliqIpiPercent).replace(".",","):""),va(r?.fcpPercent!=null?String(r.fcpPercent).replace(".",","):""),Sn(r?.mvaPercent!=null?String(r.mvaPercent).replace(".",","):""),Li(r?.baseReduzidaPercent!=null?String(r.baseReduzidaPercent).replace(".",","):""),Ci(r?.ncm||""),Le(r?.ncmDescription||""),Yt(r?.cest||""),ur(!0),!r&&o&&!f&&h(o)},[r,e]),v.useEffect(()=>{const he=V(it),Ke=V(dt);if(Ke>0){const rt=(Ke-he)/Ke*100;Te(rt.toFixed(2).replace(".",","))}else Te("")},[it,dt]);const ce=async he=>{if(he.preventDefault(),Dt)return;const Ke=[];if(m?.trim()||Ke.push("Descrio"),w?.trim()||Ke.push("Unidade"),x||Ke.push("Tipo de Produto"),V(dt)<=0&&Ke.push("Preo de Venda"),Ke.length){l({title:"Preencha os campos obrigatrios",description:Ke.join(", "),variant:"destructive"});return}const rt={id:r?.id,code:f?.trim()||"",name:m,category:p,type:x,stock:Number(Ze||0),minStock:Number(Nt||0),status:mt,validade:Pe,unit:w,active:j,barcode:ye(P),barcodeBox:ye(E),reference:k?.trim()||null,brand:I?.trim()||null,group:z?.trim()||null,cost:V(it),price:V(dt),buyPrice:null,costsPercent:null,costPrice:V(it),salePrice:V(dt),marginPercent:oe(ut),allowSale:U,payCommission:G,variablePrice:de,composition:B,service:q,hasGrid:Z,usePriceTable:re,fuel:Ie,useImei:Ue,stockByGrid:ue,showInApp:qt,cfopInterno:ke(fr)||null,cstIcmsInterno:ln?null:Qn||null,csosnInterno:ln&&Ce||null,aliqIcmsInterno:oe(He),cfopExterno:ke(at)||null,cstIcmsExterno:ln?null:Mt||null,csosnExterno:ln&&Vt||null,aliqIcmsExterno:oe(nr),cstPisEntrada:cn||null,cstPisSaida:ca||null,aliqPisPercent:oe(oi),aliqCofinsPercent:oe(ua),cstIpi:ei||null,aliqIpiPercent:oe(Ia),fcpPercent:oe(Xn),mvaPercent:oe(Ri),baseReduzidaPercent:oe(Io),ncm:Me(yo)||null,ncmDescription:J||null,cest:ie(Pt)||null};try{qe(!0),console.log("[Produtos] Salvando produto",rt);const Ge=2e4,$e=new Promise((bt,vt)=>setTimeout(()=>vt(new Error("Timeout ao salvar produto (20s)")),Ge));await Promise.race([n(rt),$e]),l({title:"Produto salvo",description:"O produto foi salvo com sucesso.",variant:"success",duration:4e3,className:"bg-amber-500 text-black shadow-xl"}),t(!1)}catch(Ge){console.error("[Produtos] Erro ao salvar",Ge);const $e=Cc(Ge,{action:"save"});l({title:$e.title,description:$e.description,variant:"destructive",duration:6e3})}finally{qe(!1)}};return v.useEffect(()=>{e||qe(!1)},[e]),s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{className:"w-[95vw] sm:max-w-[780px] max-h-[90vh] sm:max-h-[85vh] flex flex-col",onKeyDown:he=>{he.key==="F5"&&(he.preventDefault(),ce(he)),he.key==="Escape"&&(he.preventDefault(),t(!1))},children:[s.jsx(Ur,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx($r,{className:"text-lg sm:text-xl",children:r?"Detalhes do Produto":"Novo Produto"}),s.jsx(Jr,{className:"text-xs sm:text-sm",children:"Preencha as informaes e use as abas para navegar."})]})})}),s.jsx("form",{onSubmit:ce,className:"grid gap-4 py-2 flex-1 overflow-y-auto pr-1 fx-scroll",children:s.jsxs(Ad,{value:u,onValueChange:d,className:"w-full",children:[s.jsx("div",{className:"sm:hidden mb-4",children:s.jsxs(yn,{value:u,onValueChange:d,children:[s.jsx(pn,{className:"w-full",children:s.jsx(xn,{})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"dados",children:"Dados"}),s.jsx(Wt,{value:"estoque",children:"Estoque"}),s.jsx(Wt,{value:"preco",children:"Preo e Lucro"}),s.jsx(Wt,{value:"impostos",children:"Impostos"}),s.jsx(Wt,{value:"outras",children:"Outras Info"})]})]})}),s.jsxs(Nu,{className:"hidden sm:grid grid-cols-5 gap-1",children:[s.jsx(Jn,{value:"dados",children:"Dados"}),s.jsx(Jn,{value:"estoque",children:"Estoque"}),s.jsx(Jn,{value:"preco",children:"Preo e Lucro"}),s.jsx(Jn,{value:"impostos",children:"Impostos"}),s.jsx(Jn,{value:"outras",children:"Outras Info"})]}),s.jsx("div",{className:"mt-2 text-[10px] sm:text-[11px] text-text-muted",children:"* Campo obrigatrio"}),s.jsxs(Qi,{value:"dados",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(gt,{htmlFor:"code",className:"text-left sm:text-right text-xs sm:text-sm",children:["Cdigo ",s.jsx("span",{className:"text-text-muted text-[10px] sm:text-xs",children:"(auto)"})]}),s.jsx($t,{id:"code",value:f,onChange:he=>h(he.target.value.replace(/\D/g,"")),className:"col-span-1 sm:col-span-3 text-sm",placeholder:o||"Ex.: 0001",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(gt,{htmlFor:"name",className:"text-left sm:text-right text-xs sm:text-sm",children:["Descrio ",!m?.trim()&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx($t,{id:"name",value:m,onChange:he=>g(he.target.value),className:"col-span-1 sm:col-span-3 text-sm",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx(gt,{htmlFor:"category",className:"text-left sm:text-right text-xs sm:text-sm",children:"Categoria"}),s.jsxs("div",{className:"col-span-3 flex gap-2 items-center",children:[s.jsxs(yn,{value:p,onValueChange:he=>tt&&y(he),children:[s.jsx(pn,{className:"w-full",disabled:!tt,children:s.jsx(xn,{placeholder:"Selecione..."})}),s.jsx(gn,{children:a.map(he=>s.jsx(Wt,{value:he,children:he},he))})]}),s.jsxs(Ee,{type:"button",onClick:()=>Bt(he=>!he),className:"bg-amber-500 hover:bg-amber-400 text-black inline-flex items-center gap-2 whitespace-nowrap px-3",title:lt?"Fechar":"Adicionar nova categoria",disabled:!tt,children:[s.jsx("span",{className:"font-bold",children:"+"}),s.jsx("span",{children:"Novo"})]})]})]}),lt&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx("div",{className:"col-span-1"}),s.jsxs("div",{className:"col-span-3 flex gap-2",children:[s.jsx($t,{value:Tt,onChange:he=>er(he.target.value),placeholder:"Nome da nova categoria"}),s.jsx(Ee,{type:"button",onClick:async()=>{const he=Tt.trim();if(he)try{if(a.includes(he)){l({title:"Categoria j existe",description:"Escolha outro nome.",variant:"destructive"});return}await i?.(he),y(he),er(""),Bt(!1),l({title:"Categoria adicionada",description:"Ela j est selecionada no formulrio.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(Ke){console.error("[Produto] add category inline:error",Ke);const rt=Cc(Ke,{action:"save"});l({title:rt.title,description:rt.description,variant:"destructive"})}},children:"Adicionar"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(gt,{htmlFor:"unit",className:"text-left sm:text-right text-xs sm:text-sm",children:["Unidade ",!w?.trim()&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx($t,{id:"unit",value:w,onChange:he=>S(he.target.value.toUpperCase().slice(0,5)),className:"col-span-1 sm:col-span-3 text-sm",placeholder:"UN, KG, LT",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(gt,{className:"text-left sm:text-right text-xs sm:text-sm",children:["Tipo ",!x&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs(yn,{value:x,onValueChange:he=>tt&&b(he),children:[s.jsx(pn,{className:"col-span-1 sm:col-span-3 text-sm",disabled:!tt,children:s.jsx(xn,{placeholder:"Selecione o tipo"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"Venda",children:"Produto para Venda"}),s.jsx(Wt,{value:"Uso Interno",children:"Produto de Uso Interno"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx(gt,{className:"text-left sm:text-right text-xs sm:text-sm",children:"Ativo"}),s.jsx("div",{className:"col-span-1 sm:col-span-3",children:r?s.jsxs(s.Fragment,{children:[s.jsx(iu,{checked:j,onCheckedChange:he=>A(!!he),disabled:!tt}),s.jsx("span",{className:"ml-2 text-xs sm:text-sm",children:"Ativo"})]}):s.jsxs(yn,{value:j?"ativo":"inativo",onValueChange:he=>A(he==="ativo"),children:[s.jsx(pn,{className:"w-full sm:w-48 text-sm",disabled:!tt,children:s.jsx(xn,{placeholder:"Selecione"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"ativo",children:"Ativo"}),s.jsx(Wt,{value:"inativo",children:"Inativo"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx(gt,{htmlFor:"barcode",className:"text-left sm:text-right text-xs sm:text-sm",children:"EAN-13"}),s.jsx($t,{id:"barcode",value:P,onChange:he=>C(ye(he.target.value)),className:"col-span-1 sm:col-span-3 text-sm",placeholder:"789...",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(gt,{htmlFor:"validade",className:"text-left sm:text-right text-xs sm:text-sm",children:["Validade ",s.jsx("span",{className:"text-text-muted text-[10px] sm:text-xs",children:"(Opcional)"})]}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:Ot("col-span-1 sm:col-span-3 justify-start text-left font-normal text-xs sm:text-sm",!Pe&&"text-muted-foreground"),disabled:!tt,children:[s.jsx(o2,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),Pe?Rr(Pe,"dd/MM/yyyy"):s.jsx("span",{children:"Selecione a data"})]})}),s.jsx(Ou,{className:"p-0 w-[280px] sm:w-[300px]",children:s.jsx("div",{className:"w-[280px] sm:w-[300px] min-h-[300px] sm:min-h-[332px]",children:s.jsx(ju,{mode:"single",selected:Pe,onSelect:Je,initialFocus:!0,fixedWeeks:!0})})})]})]})]}),s.jsxs(Qi,{value:"estoque",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid grid-cols-3 items-center gap-2",children:[s.jsx(gt,{htmlFor:"stock",className:"text-right",children:"Estoque"}),s.jsx($t,{id:"stock",value:Ze,readOnly:!0,disabled:!0,className:"col-span-1"}),r&&s.jsx(Ee,{type:"button",variant:"secondary",className:"col-span-1",onClick:()=>{te(""),Lt(!0)},children:"Ajustar"})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(gt,{htmlFor:"minStock",className:"text-right",children:"Estoque Mn."}),s.jsx($t,{id:"minStock",value:Nt,onChange:he=>nt(he.target.value.replace(/[^0-9\-]/g,"")),disabled:!tt})]})]}),r&&s.jsx(qr,{open:ot,onOpenChange:Lt,children:s.jsxs(Lr,{className:"max-w-sm",onKeyDown:he=>he.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold",children:"Ajustar Estoque"}),s.jsx(Jr,{children:"Informe a quantidade a ajustar. Positivo para entrada, negativo para sada."})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[s.jsx(gt,{className:"text-right",children:"Qtd"}),s.jsx($t,{className:"col-span-3",value:ir,onChange:he=>te(he.target.value.replace(/[^0-9\-]/g,"")),placeholder:"Ex.: 10 ou -2",inputMode:"numeric"})]}),s.jsx("div",{className:"mt-2 text-sm text-text-secondary",children:(()=>{const he=Number(Ze||0),Ke=Number(ir||0)||0,rt=he+Ke,Ge=Ke>0?"+":"";return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-surface-2 border",children:[s.jsxs("span",{children:["Estoque atual: ",s.jsx("span",{className:"font-mono",children:he})]}),s.jsxs("span",{children:["Ajuste: ",s.jsxs("span",{className:`font-mono ${Ke>0?"text-success":Ke<0?"text-danger":""}`,children:[Ge,Ke]})]}),s.jsxs("span",{children:["Novo estoque: ",s.jsx("span",{className:"font-mono font-semibold",children:rt})]})]})})()}),s.jsxs(mn,{children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",children:"Cancelar"})}),s.jsx(Ee,{type:"button",onClick:async()=>{try{const he=Number(ir||0);if(!he){l({title:"Informe a quantidade",variant:"warning"});return}const Ke=Number(Ze||0)+he;await GO({productId:r.id,delta:he,codigoEmpresa:c?.codigo_empresa}),Ye(String(Ke)),l({title:"Estoque atualizado",description:`Novo estoque: ${Ke}`,variant:"success"}),Lt(!1)}catch(he){l({title:"Falha ao ajustar estoque",description:he?.message||"Tente novamente",variant:"destructive"})}},children:`Aplicar (${Number(ir||0)>0?"+":""}${Number(ir||0)||0})`})]})]})})]}),s.jsxs(Qi,{value:"preco",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"costPrice",className:"text-right",children:"Preo de Custo (R$)"}),s.jsx($t,{id:"costPrice",inputMode:"numeric",placeholder:"Ex.: 10,00",value:`R$ ${it||"0,00"}`,onChange:he=>ft(Ne(he.target.value)),disabled:!tt,className:"col-span-3"})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(gt,{htmlFor:"salePrice",className:"text-right",children:["Preo de Venda (R$) ",(!dt||V(dt)<=0)&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx($t,{id:"salePrice",inputMode:"numeric",placeholder:"Ex.: 15,00",value:`R$ ${dt||"0,00"}`,onChange:he=>ve(Ne(he.target.value)),disabled:!tt,className:"col-span-3"})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"marginPercent",className:"text-right",children:"% de Lucro"}),s.jsx($t,{id:"marginPercent",inputMode:"decimal",placeholder:"Calculado",value:`${ut||"0,00"} %`,onChange:he=>Te(ee(he.target.value)),disabled:!tt,className:"col-span-3"})]})]}),s.jsxs(Qi,{value:"impostos",className:"space-y-4 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(iu,{id:"useCsosn",checked:ln,onCheckedChange:he=>rn(!!he),disabled:!tt}),s.jsx(gt,{htmlFor:"useCsosn",className:"cursor-pointer",children:"Usar CSOSN (Simples Nacional)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"ICMS - Operao Interna"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CFOP"}),s.jsx($t,{value:fr,onChange:he=>Zt(ke(he.target.value)),className:"col-span-3",placeholder:"5102",disabled:!tt})]}),!ln&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CST"}),s.jsx($t,{value:Qn,onChange:he=>Kn(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"00, 20, 40...",disabled:!tt})]}),ln&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CSOSN"}),s.jsx($t,{value:Ce,onChange:he=>We(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"101, 102...",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"Alquota ICMS (%)"}),s.jsx($t,{value:`${He||""}`,onChange:he=>xt(ee(he.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!tt})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"ICMS - Operao Externa"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CFOP"}),s.jsx($t,{value:at,onChange:he=>st(ke(he.target.value)),className:"col-span-3",placeholder:"6102",disabled:!tt})]}),!ln&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CST"}),s.jsx($t,{value:Mt,onChange:he=>wt(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"00, 20, 40...",disabled:!tt})]}),ln&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CSOSN"}),s.jsx($t,{value:Vt,onChange:he=>Qt(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"101, 102...",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"Alquota ICMS (%)"}),s.jsx($t,{value:`${nr||""}`,onChange:he=>Ar(ee(he.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!tt})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"PIS/COFINS"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CST PIS Entrada"}),s.jsx($t,{value:cn,onChange:he=>On(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"50, 70...",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CST PIS Sada"}),s.jsx($t,{value:ca,onChange:he=>Yn(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"01, 04...",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"Alquota PIS (%)"}),s.jsx($t,{value:`${oi||""}`,onChange:he=>An(ee(he.target.value)),className:"col-span-3",placeholder:"0,65",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"Alquota COFINS (%)"}),s.jsx($t,{value:`${ua||""}`,onChange:he=>Ni(ee(he.target.value)),className:"col-span-3",placeholder:"3,00",disabled:!tt})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"IPI"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CST IPI"}),s.jsx($t,{value:ei,onChange:he=>da(he.target.value.toUpperCase()),className:"col-span-3",placeholder:"50, 99...",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"Alquota IPI (%)"}),s.jsx($t,{value:`${Ia||""}`,onChange:he=>si(ee(he.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!tt})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"FCP (%)"}),s.jsx($t,{value:`${Xn||""}`,onChange:he=>va(ee(he.target.value)),placeholder:"2,00",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"MVA (%)"}),s.jsx($t,{value:`${Ri||""}`,onChange:he=>Sn(ee(he.target.value)),placeholder:"40,00",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"Base Reduzida (%)"}),s.jsx($t,{value:`${Io||""}`,onChange:he=>Li(ee(he.target.value)),placeholder:"0,00",disabled:!tt})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"NCM"}),s.jsx($t,{value:yo,onChange:he=>Ci(Me(he.target.value)),placeholder:"00000000",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(gt,{className:"text-right",children:"CEST"}),s.jsx($t,{value:Pt,onChange:he=>Yt(ie(he.target.value)),placeholder:"0000000",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 col-span-3 sm:col-span-1",children:[s.jsx(gt,{className:"text-right",children:"Descrio NCM"}),s.jsx($t,{value:J,onChange:he=>Le(he.target.value),placeholder:"Descrio do NCM",disabled:!tt})]})]})]}),s.jsxs(Qi,{value:"outras",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"barcode2",className:"text-right",children:"Cdigo de Barras"}),s.jsx($t,{id:"barcode2",value:P,onChange:he=>C(ye(he.target.value)),className:"col-span-3",placeholder:"EAN-13",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"barcodeBox",className:"text-right",children:"Cdigo Barras (Caixa)"}),s.jsx($t,{id:"barcodeBox",value:E,onChange:he=>R(ye(he.target.value)),className:"col-span-3",placeholder:"EAN-13 da caixa",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"reference",className:"text-right",children:"Referncia"}),s.jsx($t,{id:"reference",value:k,onChange:he=>T(he.target.value),className:"col-span-3",placeholder:"Ex.: REF-123",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"brand",className:"text-right",children:"Marca"}),s.jsx($t,{id:"brand",value:I,onChange:he=>M(he.target.value),className:"col-span-3",placeholder:"Ex.: Nike",disabled:!tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(gt,{htmlFor:"group",className:"text-right",children:"Grupo"}),s.jsx($t,{id:"group",value:z,onChange:he=>W(he.target.value),className:"col-span-3",placeholder:"Ex.: Calados",disabled:!tt})]})]}),!1]})}),s.jsxs(mn,{children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",children:"Cancelar"})}),s.jsx(Ee,{type:"button",onClick:ce,disabled:Dt||!tt,title:"F5 para salvar",children:Dt?"Salvando...":"Salvar Produto"})]})]})})}function vQe({open:e,onOpenChange:t,categories:r,onAddCategory:n,onRemoveCategory:a}){const{toast:i}=Za(),[o,l]=v.useState(""),[c,u]=v.useState(!1),d=async()=>{const h=o.trim();if(h){if(r.includes(h)){i({title:"Categoria j existe",description:"Escolha outro nome.",variant:"destructive"});return}try{u(!0),await n(h),l(""),i({title:"Categoria adicionada",description:"Ela j aparece na lista.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(m){console.error("[Categorias] add:error",m);const g=Cc(m,{action:"save"});i({title:g.title,description:g.description,variant:"destructive"})}finally{u(!1)}}},f=async h=>{try{u(!0),await a(h),i({title:"Categoria desativada",description:"A categoria foi marcada como inativa.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(m){console.error("[Categorias] remove:error",m);const g=Cc(m,{action:"save"});i({title:g.title,description:g.description,variant:"destructive"})}finally{u(!1)}};return s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Gerenciar Categorias"}),s.jsx(Jr,{children:"Adicione ou remova categorias de produtos."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx($t,{value:o,onChange:h=>l(h.target.value),placeholder:"Nome da nova categoria"}),s.jsx(Ee,{onClick:d,disabled:c,children:c?"Processando...":"Adicionar"})]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.map(h=>s.jsxs("div",{className:"flex items-center justify-between bg-surface-2 p-2 rounded-md",children:[s.jsx("span",{className:"font-semibold",children:h}),s.jsx(Ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-danger/80 hover:text-danger",onClick:()=>f(h),disabled:c,children:s.jsx(Q2,{size:14})})]},h))})]})]})})}function yQe(){const{toast:e}=Za(),{userProfile:t,authReady:r}=po();Us();const[n,a]=v.useState(fQe),[i,o]=v.useState(hQe);v.useState("list");const[l,c]=v.useState(!0),[u,d]=v.useState(null),[f,h]=v.useState(!1),[m,g]=v.useState(!1),[p,y]=v.useState("all"),[x,b]=v.useState(""),[w,S]=v.useState({type:"all",category:"all",status:"active"}),[j,A]=v.useState(!1),[P,C]=v.useState(!1),[E,R]=v.useState(!1),[k,T]=v.useState(null),[I,M]=v.useState({by:"code",dir:"asc"}),z=v.useRef(!0),W=v.useRef(0),U=v.useRef(0);v.useRef(!1),v.useEffect(()=>(z.current=!0,()=>{z.current=!1}),[]);const $=async()=>{const Pe=t?.codigo_empresa||null;if(!r||!Pe)return;const Je=`produtos:list:${Pe}`;A(!0);const Dt=setTimeout(()=>{if(z.current)try{const qe=JSON.parse(localStorage.getItem(Je)||"[]");Array.isArray(qe)&&qe.length>0&&(console.warn("[Produtos] slow fallback: using cached snapshot"),a(qe))}catch{}},2e3);try{const qe=await dh({includeInactive:w.status==="inactive",search:x,codigoEmpresa:Pe});if(!z.current)return;a(qe);try{localStorage.setItem(Je,JSON.stringify(qe))}catch{}U.current=Array.isArray(qe)?qe.length:0,W.current=Date.now()}catch(qe){console.error("[Produtos] refetchProducts:error",qe);const lt=Cc(qe,{action:"fetch"});e({title:lt.title,description:lt.description,variant:"destructive"})}finally{clearTimeout(Dt),A(!1)}};v.useEffect(()=>{const Pe=(()=>{try{const Bt=localStorage.getItem("auth:userProfile");return Bt&&JSON.parse(Bt)?.codigo_empresa||null}catch{return null}})(),Je=t?.codigo_empresa||Pe;if(!Je)return;const Dt=`produtos:list:${Je}`,qe=(()=>{try{return JSON.parse(localStorage.getItem(Dt)||"[]")}catch{return[]}})();Array.isArray(qe)&&qe.length>0&&(a(qe),U.current=qe.length);const lt=async(Bt=3)=>{for(let Tt=0;Tt<Bt;Tt++)try{if(z.current){await $();break}}catch(er){console.warn(`[ProdutosPage] Tentativa ${Tt+1} falhou:`,er),Tt===Bt-1?console.error("[ProdutosPage] Todas as tentativas falharam"):await new Promise(tt=>setTimeout(tt,1e3*(Tt+1)))}};try{const Bt=JSON.parse(localStorage.getItem(`produtos:cats:${Je}`)||"[]");Array.isArray(Bt)&&Bt.length>0&&o(Bt)}catch{}if(r&&t?.codigo_empresa){const Bt=setTimeout(()=>lt(),100);return(async()=>{try{const Tt=await jz({codigoEmpresa:t.codigo_empresa});if(!z.current)return;o(Tt);try{localStorage.setItem(`produtos:cats:${t.codigo_empresa}`,JSON.stringify(Tt))}catch{}}catch(Tt){console.error("[Categorias] load on mount:error",Tt)}})(),()=>clearTimeout(Bt)}},[r,t?.codigo_empresa]),v.useEffect(()=>{const Pe=()=>{(Date.now()-(W.current||0)>3e4||U.current===0)&&$()},Je=()=>{document.visibilityState==="visible"&&(Date.now()-(W.current||0)>3e4||U.current===0)&&$()};return window.addEventListener("focus",Pe),document.addEventListener("visibilitychange",Je),()=>{window.removeEventListener("focus",Pe),document.removeEventListener("visibilitychange",Je)}},[r,t?.codigo_empresa]),v.useEffect(()=>{r&&$()},[w.status,r]),v.useEffect(()=>{const Pe=setTimeout(()=>{r&&$()},300);return()=>clearTimeout(Pe)},[x,r]);const[G,me]=v.useState("N/A");v.useEffect(()=>{let Pe=!0;return(async()=>{try{const Je=await HJe({limit:1,codigoEmpresa:t?.codigo_empresa});if(!Pe)return;if(Array.isArray(Je)&&Je.length>0){const Dt=Je[0];me(`${Dt.name} (${Dt.total})`)}else me("")}catch{Pe&&me("N/A")}})(),()=>{Pe=!1}},[t?.codigo_empresa]);const[de,L]=v.useState(!1),[B,X]=v.useState(()=>{const Pe=new Date;return Pe.setHours(0,0,0,0),Pe}),[q,Y]=v.useState(!1),[Z,ge]=v.useState(()=>new Date),[re,Se]=v.useState(!1),[Ie,pe]=v.useState([]),Ue=async()=>{try{Se(!0);const Pe=await VJe({from:B,to:Z,codigoEmpresa:t?.codigo_empresa});pe(Pe||[])}catch(Pe){e({title:"Falha ao carregar vendas do perodo",description:Pe?.message||"Tente novamente",variant:"destructive"})}finally{Se(!1)}},_e=v.useMemo(()=>{const Pe=new Date;return{mostSold:G,lowStock:n.filter(Je=>Je.status==="low_stock"||Je.stock>0&&Je.stock<=Je.minStock).length,expired:n.filter(Je=>Je.validade&&Je.validade<Pe).length}},[n,G]),ue=v.useMemo(()=>{const Pe=new Date;return n.filter(Je=>{const Dt=p==="all"?!0:p==="low_stock"?Je.status==="low_stock"||Je.stock>0&&Je.stock<=Je.minStock:p==="expired"?Je.validade&&Je.validade<Pe:!1,qe=w.status==="all"?Je.status!=="inactive":Je.status===w.status,lt=w.type==="all"||Je.type===w.type,Bt=w.category==="all"||Je.category===w.category;return Dt&&qe&&lt&&Bt})},[n,p,w]),Ft=v.useMemo(()=>{const Pe=[...ue],Je=I.dir==="asc"?1:-1,Dt=(lt,Bt)=>Number.isFinite(lt)?lt:Bt,qe=lt=>{if(!lt)return NaN;if(lt instanceof Date)return lt.getTime();const Bt=new Date(lt);return Number.isNaN(Bt.getTime())?NaN:Bt.getTime()};return Pe.sort((lt,Bt)=>{if(I.by==="code"){const Tt=Dt(parseInt((lt.code||"").trim(),10),1/0),er=Dt(parseInt((Bt.code||"").trim(),10),1/0);return Tt===er?0:Tt>er?Je:-Je}if(I.by==="name"){const Tt=(lt.name||"").toString(),er=(Bt.name||"").toString();return Tt.localeCompare(er,"pt-BR",{sensitivity:"base"})*Je}if(I.by==="validade"){const Tt=Dt(qe(lt.validade),1/0),er=Dt(qe(Bt.validade),1/0);return Tt===er?0:Tt>er?Je:-Je}return 0}),Pe},[ue,I]),qt=Pe=>{M(Je=>Je.by===Pe?{by:Pe,dir:Je.dir==="asc"?"desc":"asc"}:{by:Pe,dir:"asc"})},zt=Pe=>{y(Je=>Je===Pe?"all":Pe)},it=()=>{X(()=>{const Pe=new Date;return Pe.setHours(0,0,0,0),Pe}),ge(new Date),L(!0),setTimeout(Ue,0)},ft=(Pe,Je)=>{S(Dt=>({...Dt,[Pe]:Je}))},dt=()=>{d(null),h(!0)},ve=Pe=>{d(Pe),h(!0)},ut=()=>{try{pQe(Ft),e({title:"Exportao concluda",description:`${Ft.length} produto(s) exportado(s).`,variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(Pe){console.error("[Produtos] export:error",Pe);const Je=Cc(Pe,{action:"export"});e({title:Je.title,description:Je.description,variant:"destructive"})}},Te=async()=>{const Pe=t?.codigo_empresa||null;if(!(!r||!Pe))try{const Je=await jz({codigoEmpresa:Pe});if(!z.current)return;o(Je);try{localStorage.setItem(`produtos:cats:${Pe}`,JSON.stringify(Je))}catch{}}catch(Je){console.error("[Categorias] load on mount:error",Je)}},Ze=async Pe=>{o(Je=>{if(Je.includes(Pe))return Je;const Dt=[...Je,Pe];return Dt.sort((qe,lt)=>qe.localeCompare(lt,"pt-BR")),Dt});try{await YJe(Pe),await Te()}catch(Je){o(qe=>qe.filter(lt=>lt!==Pe)),console.error("[Categorias] add:error",Je);const Dt=Cc(Je,{action:"save"});e({title:Dt.title,description:Dt.description,variant:"destructive"})}},Ye=async Pe=>{if(n.some(qe=>qe.category===Pe&&qe.status!=="inactive"))throw new Error("Categoria possui produtos ativos vinculados");const Dt=i;o(qe=>qe.filter(lt=>lt!==Pe));try{await XJe(Pe),await Te()}catch(qe){o(Dt),console.error("[Categorias] remove:error",qe);const lt=Cc(qe,{action:"save"});e({title:lt.title,description:lt.description,variant:"destructive"})}},Nt=async Pe=>{try{if(console.log("[Produtos] handleSaveProduct",Pe),!Pe.code){const qe=n.map(Bt=>(Bt.code||"").trim()).filter(Bt=>/^\d+$/.test(Bt)).map(Bt=>parseInt(Bt,10)),lt=qe.length?Math.max(...qe)+1:1;Pe.code=String(lt).padStart(4,"0")}const Je=t?.codigo_empresa||null,Dt=async qe=>{const Bt=new Promise((Tt,er)=>setTimeout(()=>er(new Error("Timeout update/create (12s)")),12e3));return Promise.race([qe,Bt])};if(Pe.id){const qe=await Dt(GJe(Pe.id,Pe,{codigoEmpresa:Je}));console.log("[Produtos] Produto atualizado",qe),a(lt=>lt.map(Bt=>Bt.id===qe.id?qe:Bt)),setTimeout(()=>{$().catch(lt=>console.error("[Produtos] refetch ps-update falhou",lt))},0)}else{const qe=await Dt(hre(Pe,{codigoEmpresa:Je}));console.log("[Produtos] Produto criado",qe),a(lt=>[qe,...lt]),setTimeout(()=>{$().catch(lt=>console.error("[Produtos] refetch ps-create falhou",lt))},0)}}catch(Je){console.error("[Produtos] Erro no handleSaveProduct",Je);const Dt=Cc(Je,{action:"save"});throw e({title:Dt.title,description:Dt.description,variant:"destructive"}),Je}},nt=Pe=>{T(Pe),C(!0)},mt=async()=>{if(k?.id)try{R(!0),await KJe(k.id),a(Je=>Je.filter(Dt=>Dt.id!==k.id)),await $();const Pe=Cc(null,{action:"delete"});e({title:"Produto inativado",description:"O produto foi marcado como inativo.",variant:"success",duration:4e3,className:"bg-amber-500 text-black shadow-xl"})}catch(Pe){console.error(Pe);const Je=Cc(Pe,{action:"delete"});e({title:Je.title,description:Je.description,variant:"destructive"})}finally{R(!1),C(!1),T(null)}},At=v.useMemo(()=>{const Pe=n.map(Dt=>(Dt.code||"").trim()).filter(Dt=>/^\d+$/.test(Dt)).map(Dt=>parseInt(Dt,10)),Je=Pe.length?Math.max(...Pe)+1:1;return String(Je).padStart(4,"0")},[n]);return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Produtos - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Gerenciamento completo de produtos e estoque."})]}),s.jsxs(lr.div,{variants:mQe,initial:"hidden",animate:"visible",className:"flex flex-col",children:[s.jsxs(lr.div,{variants:KO,className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-text-primary tracking-tighter",children:"Controle de Produtos"}),s.jsx("p",{className:"text-text-secondary",children:"Controle total sobre seu inventrio e estoque."})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Ee,{variant:"outline",size:"icon",onClick:()=>c(Pe=>!Pe),title:l?"Ocultar resumo":"Mostrar resumo","aria-label":l?"Ocultar resumo":"Mostrar resumo",children:l?s.jsx(Eb,{className:"h-4 w-4"}):s.jsx(kb,{className:"h-4 w-4"})}),s.jsxs(Ee,{variant:"outline",onClick:ut,className:"hidden sm:flex",children:[s.jsx(cl,{className:"mr-2 h-4 w-4"})," Exportar"]}),s.jsxs(Ee,{variant:"outline",onClick:ut,className:"sm:hidden",children:[s.jsx(cl,{className:"h-4 w-4 mr-1"})," CSV"]}),s.jsxs(Ee,{variant:"secondary",onClick:()=>Y(!0),className:"hidden sm:flex",children:[s.jsx(Kl,{className:"mr-2 h-4 w-4"})," Importar XML"]}),s.jsxs(Ee,{variant:"secondary",onClick:()=>Y(!0),className:"sm:hidden",children:[s.jsx(Kl,{className:"h-4 w-4 mr-1"})," XML"]}),s.jsxs(Ee,{onClick:dt,className:"hidden sm:flex",children:[s.jsx(Xa,{className:"mr-2 h-4 w-4"})," Novo Produto"]}),s.jsxs(Ee,{onClick:dt,className:"sm:hidden",children:[s.jsx(Xa,{className:"h-4 w-4 mr-1"})," Produto"]})]})]}),l&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(EA,{icon:Ib,title:"Mais Vendido (Dia)",value:_e.mostSold,subtitle:"Produto com mais sadas hoje",color:"text-brand",onClick:it}),s.jsx(EA,{icon:Kg,title:"Estoque Baixo",value:_e.lowStock,subtitle:"Produtos precisando de reposio",color:"text-warning",onClick:()=>zt("low_stock"),isActive:p==="low_stock"}),s.jsx(EA,{icon:o2,title:"Vencidos",value:_e.expired,subtitle:"Produtos fora da data de validade",color:"text-danger",onClick:()=>zt("expired"),isActive:p==="expired"})]}),s.jsx(qr,{open:de,onOpenChange:L,children:s.jsxs(Lr,{className:"max-w-2xl",onKeyDown:Pe=>Pe.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold",children:"Vendas por Perodo"}),s.jsx(Jr,{children:"Selecione o intervalo de datas e visualize os produtos vendidos."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Incio"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:"w-full justify-start",children:[s.jsx(o2,{className:"mr-2 h-4 w-4"}),B?Rr(B,"dd/MM/yyyy"):"Incio"]})}),s.jsx(Ou,{className:"p-0 w-[300px]",children:s.jsx("div",{className:"w-[300px] min-h-[332px]",children:s.jsx(ju,{mode:"single",selected:B,onSelect:Pe=>Pe&&X(Pe),initialFocus:!0,fixedWeeks:!0})})})]})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Fim"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:"w-full justify-start",children:[s.jsx(o2,{className:"mr-2 h-4 w-4"}),Z?Rr(Z,"dd/MM/yyyy"):"Fim"]})}),s.jsx(Ou,{className:"p-0 w-[300px]",children:s.jsx("div",{className:"w-[300px] min-h-[332px]",children:s.jsx(ju,{mode:"single",selected:Z,onSelect:Pe=>Pe&&ge(Pe),initialFocus:!0,fixedWeeks:!0})})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{type:"button",onClick:Ue,disabled:re,className:"w-full",children:re?"Carregando...":"Aplicar"}),s.jsx(Ee,{type:"button",variant:"secondary",onClick:()=>{try{const Pe=Ie||[],Je=";",Dt=()=>{const Tt=["Produto;Quantidade"];for(const er of Pe)Tt.push(`${(er.name||"").replace(/;/g,",")}${Je}${Number(er.total||0)}`);return Tt.join(`
`)},qe=new Blob(["\uFEFF"+Dt()],{type:"text/csv;charset=utf-8;"}),lt=URL.createObjectURL(qe),Bt=document.createElement("a");Bt.href=lt,Bt.download="vendas-periodo.csv",document.body.appendChild(Bt),Bt.click(),document.body.removeChild(Bt),URL.revokeObjectURL(lt),e({title:"Exportao concluda",description:`${Pe.length} linha(s)`,variant:"success"})}catch(Pe){e({title:"Falha ao exportar",description:Pe?.message||"Tente novamente",variant:"destructive"})}},children:"Exportar CSV"})]})]}),s.jsx("div",{className:"mt-3 border rounded-md max-h-[50vh] overflow-auto thin-scroll",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-surface-2",children:[s.jsx("th",{className:"text-left p-2",children:"Produto"}),s.jsx("th",{className:"text-right p-2",children:"Quantidade"})]})}),s.jsxs("tbody",{children:[(Ie||[]).length===0&&!re&&s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:"p-3 text-text-muted",children:"Nenhum item no perodo."})}),(Ie||[]).map(Pe=>s.jsxs("tr",{className:"border-t border-border",children:[s.jsx("td",{className:"p-2",children:Pe.name}),s.jsx("td",{className:"p-2 text-right font-mono",children:Number(Pe.total||0)})]},Pe.id))]})]})}),s.jsx(mn,{children:s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",children:"Fechar"})})})]})}),s.jsxs(lr.div,{variants:KO,className:"bg-surface rounded-lg border border-border flex flex-col",children:[s.jsxs("div",{className:"p-3 pb-4 sm:p-4 border-b border-border space-y-3 flex-shrink-0",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar por nome ou cdigo...",className:"pl-9 text-sm",value:x,onChange:Pe=>b(Pe.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:items-center gap-2",children:[s.jsxs(yn,{value:w.type,onValueChange:Pe=>ft("type",Pe),children:[s.jsx(pn,{className:"text-xs sm:text-sm",children:s.jsx(xn,{})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"all",children:"Todos Tipos"}),s.jsx(Wt,{value:"Venda",children:"Venda"}),s.jsx(Wt,{value:"Uso Interno",children:"Uso Interno"})]})]}),s.jsxs(yn,{value:w.category,onValueChange:Pe=>ft("category",Pe),children:[s.jsx(pn,{className:"text-xs sm:text-sm",children:s.jsx(xn,{})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"all",children:"Categorias"}),i.map(Pe=>s.jsx(Wt,{value:Pe,children:Pe},Pe))]})]}),s.jsxs(yn,{value:w.status,onValueChange:Pe=>ft("status",Pe),children:[s.jsx(pn,{className:"text-xs sm:text-sm",children:s.jsx(xn,{})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"all",children:"Todos Status"}),s.jsx(Wt,{value:"active",children:"Ativo"}),s.jsx(Wt,{value:"low_stock",children:"Estoque Baixo"}),s.jsx(Wt,{value:"inactive",children:"Inativo"})]})]}),s.jsxs(Ee,{variant:"outline",onClick:()=>g(!0),className:"text-xs sm:text-sm",size:"sm",children:[s.jsx(Ece,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"})," Categorias"]})]})]}),s.jsx("div",{children:Ft.length===0?s.jsxs("div",{className:"p-10 text-center text-text-secondary",children:[s.jsx("p",{className:"text-lg mb-3",children:"Nenhum produto cadastrado."}),s.jsxs(Ee,{onClick:dt,children:[s.jsx(Xa,{className:"mr-2 h-4 w-4"}),"Cadastrar primeiro produto"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden p-4 space-y-3",children:Ft.map(Pe=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-base text-text-primary truncate",title:Pe.name,children:Pe.name}),s.jsx("p",{className:"text-xs text-text-muted mt-0.5",children:Pe.category||"Sem categoria"})]}),s.jsx("span",{className:Ot("inline-flex px-2 py-0.5 rounded-full text-xs border flex-shrink-0",Pe.status==="active"&&"bg-emerald-50/5 border-emerald-500/30 text-emerald-400",Pe.status==="low_stock"&&"bg-amber-50/5 border-amber-500/30 text-amber-400",Pe.status==="inactive"&&"bg-surface-2 border-border text-text-muted"),children:Pe.status==="active"?"Ativo":Pe.status==="low_stock"?"Estoque Baixo":"Inativo"})]}),Pe.code&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Cdigo: "}),s.jsx("span",{className:"text-sm font-mono",children:Pe.code})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Preo"}),s.jsxs("span",{className:"text-sm font-bold text-text-primary",children:["R$ ",Pe.price.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Estoque"}),s.jsx("span",{className:"text-sm font-medium",children:Pe.stock})]}),Pe.validade&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Validade"}),s.jsx("span",{className:"text-sm font-medium",children:(()=>{const Je=Pe.validade instanceof Date?Pe.validade:u7(String(Pe.validade));return isNaN(Je)?"-":Rr(Je,"dd/MM/yyyy")})()})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>ve(Pe),className:"flex-1",children:[s.jsx(Nm,{className:"h-3 w-3 mr-1"})," Editar"]}),s.jsx(Ee,{variant:"outline",size:"sm",onClick:Je=>{Je.stopPropagation(),nt(Pe)},className:"text-danger hover:text-danger",children:s.jsx(Q2,{className:"h-3 w-3"})})]})]},Pe.id))}),s.jsx("div",{className:"hidden md:block rounded-lg border border-border overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm bg-surface table-fixed",children:[s.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:s.jsxs("tr",{className:"border-b border-border",children:[s.jsxs("th",{className:"p-3 text-left font-semibold select-none cursor-pointer whitespace-nowrap w-[110px]",onClick:()=>qt("code"),children:["Cdigo ",I.by==="code"?I.dir==="asc"?"":"":""]}),s.jsxs("th",{className:"p-3 text-left font-semibold select-none cursor-pointer whitespace-nowrap w-[40%]",onClick:()=>qt("name"),children:["Produto ",I.by==="name"?I.dir==="asc"?"":"":""]}),s.jsx("th",{className:"p-3 text-left font-semibold whitespace-nowrap w-[18%]",children:"Categoria"}),s.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[120px]",children:"Preo"}),s.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[110px]",children:"Estoque"}),s.jsxs("th",{className:"p-3 text-center font-semibold select-none cursor-pointer whitespace-nowrap w-[120px]",onClick:()=>qt("validade"),children:["Validade ",I.by==="validade"?I.dir==="asc"?"":"":""]}),s.jsx("th",{className:"p-3 text-center font-semibold whitespace-nowrap w-[140px]",children:"Status"}),s.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[90px]",children:"Aes"})]})}),s.jsx("tbody",{className:"text-text-primary divide-y divide-border",children:Ft.map(Pe=>s.jsxs("tr",{className:"hover:bg-surface-2 transition-colors group cursor-pointer align-middle",children:[s.jsx("td",{className:"p-3 font-mono text-sm text-text-secondary align-middle whitespace-nowrap",onClick:()=>ve(Pe),children:Pe.code||"-"}),s.jsx("td",{className:"p-3 font-semibold align-middle text-text-primary whitespace-nowrap overflow-hidden text-ellipsis",onClick:()=>ve(Pe),title:Pe.name,children:Pe.name}),s.jsx("td",{className:"p-3 text-text-secondary align-middle whitespace-nowrap",onClick:()=>ve(Pe),children:Pe.category}),s.jsxs("td",{className:"p-3 text-right font-mono tabular-nums align-middle whitespace-nowrap",onClick:()=>ve(Pe),children:["R$ ",Pe.price.toFixed(2)]}),s.jsx("td",{className:"p-3 text-right font-mono tabular-nums align-middle whitespace-nowrap",onClick:()=>ve(Pe),children:Pe.stock}),s.jsx("td",{className:"p-3 text-center font-mono tabular-nums whitespace-nowrap",onClick:()=>ve(Pe),children:(()=>{if(!Pe.validade)return"-";const Je=Pe.validade instanceof Date?Pe.validade:u7(String(Pe.validade));return isNaN(Je)?"-":Rr(Je,"dd/MM/yy")})()}),s.jsx("td",{className:"p-3 text-center whitespace-nowrap",onClick:()=>ve(Pe),children:s.jsx("span",{className:Ot("px-2 py-1 text-xs font-bold rounded-full",Pe.status==="active"&&"bg-success/10 text-success",Pe.status==="low_stock"&&"bg-warning/10 text-warning",Pe.status==="inactive"&&"bg-danger/10 text-danger"),children:Pe.status==="active"?"Ativo":Pe.status==="low_stock"?"Estoque Baixo":"Inativo"})}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-text-muted hover:text-danger",onClick:Je=>{Je.stopPropagation(),nt(Pe)},children:s.jsx(Q2,{size:14})})})})]},Pe.id))})]})})]})})]})]}),s.jsx(gQe,{open:f,onOpenChange:h,product:u,categories:i,onSave:Nt,onCreateCategory:Ze,suggestedCode:u?void 0:At}),s.jsx(qr,{open:P,onOpenChange:C,children:s.jsxs(Lr,{className:"sm:max-w-[480px]",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Excluir produto"}),s.jsxs(Jr,{children:["Tem certeza que deseja excluir o produto",k?` "${k.name}"`:"","? Esta ao no pode ser desfeita."]})]}),s.jsxs(mn,{children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",disabled:E,children:"Cancelar"})}),s.jsx(Ee,{type:"button",variant:"destructive",onClick:mt,disabled:E,children:E?"Excluindo...":"Excluir"})]})]})}),s.jsx(dQe,{open:q,onOpenChange:Y,products:n,codigoEmpresa:t?.codigo_empresa,onSuccess:()=>{$(),Y(!1)}}),s.jsx(vQe,{open:m,onOpenChange:g,categories:i,onAddCategory:Ze,onRemoveCategory:Ye})]})}const Vo=le.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Ot("w-full caption-bottom text-sm",e),...t})}));Vo.displayName="Table";const Ho=le.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Ot("[&_tr]:border-b",e),...t}));Ho.displayName="TableHeader";const Go=le.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Ot("[&_tr:last-child]:border-0",e),...t}));Go.displayName="TableBody";const xQe=le.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Ot("bg-primary font-medium text-primary-foreground",e),...t}));xQe.displayName="TableFooter";const Mn=le.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Ot("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Mn.displayName="TableRow";const _r=le.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Ot("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));_r.displayName="TableHead";const hr=le.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Ot("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));hr.displayName="TableCell";const bQe=le.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Ot("mt-4 text-sm text-muted-foreground",e),...t}));bQe.displayName="TableCaption";const wQe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},gre={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},Dw=({icon:e,title:t,value:r,color:n,onClick:a,isActive:i})=>{const o=e;return s.jsxs(lr.div,{variants:gre,className:Ot("bg-surface rounded-lg border p-4 flex items-center gap-4 cursor-pointer transition-all duration-200",i?"border-brand ring-2 ring-brand/50":"border-border hover:border-brand/50"),onClick:a,children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n}/20`,children:s.jsx(o,{className:`w-6 h-6 ${n}`})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium",children:t}),s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r})]})]})};function _Qe({open:e,onOpenChange:t,client:r,onEdit:n,onInactivate:a,codigoEmpresa:i}){const{toast:o}=Za(),l={scheduled:{bg:"bg-[#3B82F6]/10",text:"text-[#3B82F6]",border:"border-[#3B82F6]/30"},confirmed:{bg:"bg-[#22C55E]/10",text:"text-[#22C55E]",border:"border-[#22C55E]/30"},in_progress:{bg:"bg-[#FACC15]/10",text:"text-[#FACC15]",border:"border-[#FACC15]/30"},finished:{bg:"bg-[#6B7280]/10",text:"text-[#6B7280]",border:"border-[#6B7280]/30"},canceled:{bg:"bg-[#EF4444]/10",text:"text-[#EF4444]",border:"border-[#EF4444]/30"},absent:{bg:"bg-[#F97316]/10",text:"text-[#F97316]",border:"border-[#F97316]/30"}},c=({label:I,value:M})=>s.jsxs("div",{className:"grid grid-cols-12 items-start gap-3 py-2 border-b border-border/50",children:[s.jsx("div",{className:"col-span-5 sm:col-span-4",children:s.jsx("span",{className:"block text-[11px] uppercase tracking-wide text-text-muted font-semibold",children:I})}),s.jsx("div",{className:"col-span-7 sm:col-span-8",children:s.jsx("span",{className:"block text-sm font-medium text-text-primary break-words",children:M})})]}),[u,d]=v.useState(!1),[f,h]=v.useState([]),[m,g]=v.useState(!1),[p,y]=v.useState([]),x=v.useRef(!1),b=v.useRef(!1),[w,S]=v.useState(!1),[j,A]=v.useState(null),[P,C]=v.useState(!1),[E,R]=v.useState(null),k=v.useMemo(()=>{try{const I=(f||[]).map(z=>({kind:"comanda",ts:new Date(z.aberto_em||z.created_at||0).getTime(),data:z})),M=(p||[]).map(z=>({kind:"agendamento",ts:new Date(z.inicio||0).getTime(),data:z}));return[...I,...M].sort((z,W)=>W.ts-z.ts).slice(0,10)}catch{return[]}},[f,p]),T=async I=>{try{if(S(!0),A(I?.kind||null),C(!0),R(null),I?.kind==="comanda"){const M=I?.data?.comanda_id;if(!M){C(!1);return}let z=Oe.from("comanda_itens").select("id, quantidade, preco_unitario, desconto, produto:produtos!comanda_itens_produto_id_fkey ( nome )").eq("comanda_id",M);i&&(z=z.eq("codigo_empresa",i));const{data:W}=await z,U=(W||[]).map(Z=>({id:Z.id,quantidade:Z.quantidade,preco_unitario:Z.preco_unitario,desconto:Z.desconto,produto_nome:Z.produto?.[0]?.nome||Z.produto?.nome||"Item"}));let $=Oe.from("pagamentos").select("id, valor, status, recebido_em, metodo").eq("comanda_id",M);i&&($=$.eq("codigo_empresa",i));const{data:G}=await $,me=G||[];let de=Oe.from("comanda_clientes").select("cliente:clientes!comanda_clientes_cliente_id_fkey ( id, nome, email, telefone )").eq("comanda_id",M);i&&(de=de.eq("codigo_empresa",i));const{data:L}=await de,B=(L||[]).map(Z=>Z.cliente?.[0]||Z.cliente).filter(Boolean),X=(U||[]).reduce((Z,ge)=>Z+(Number(ge.quantidade||0)*Number(ge.preco_unitario||0)-Number(ge.desconto||0)),0),q=(me||[]).filter(Z=>(Z.status||"Pago")!=="Cancelado"&&(Z.status||"Pago")!=="Estornado").reduce((Z,ge)=>Z+Number(ge.valor||0),0),Y=Math.max(0,X-q);R({comandaId:M,mesa_title:I?.data?.mesa_title||"Balco",status:I?.data?.status||"open",itens:U||[],pagamentos:me||[],clientes:B,totalItens:X,totalPagos:q,saldo:Y,aberto_em:I?.data?.aberto_em||I?.data?.created_at||null,fechado_em:I?.data?.fechado_em||null})}else if(I?.kind==="agendamento"){const M=I?.data?.id;if(!M){C(!1);return}let z=[];try{const{data:G}=await Oe.from("v_agendamento_participantes").select("*").eq("agendamento_id",M).limit(200);z=G||[]}catch{z=[]}const W=Array.from(new Set((z||[]).map(G=>G.cliente_id).filter(Boolean)));let U=[];U=(z||[]).map(G=>({id:G.cliente_id,nome:G.cliente_nome||G.nome||null,email:G.cliente_email||G.email||null,telefone:G.cliente_telefone||G.telefone||null,valor_cota:G.valor_cota??null,status_pagamento:G.status_pagamento_text||G.status_pagamento||null}));const $=W.filter(G=>!U.some(me=>String(me.id)===String(G)&&me.nome));if($.length>0)try{const{data:G}=await Oe.from("clientes").select("id,nome,email,telefone").in("id",$),me=new Map((G||[]).map(de=>[String(de.id),de]));U=U.map(de=>{if(!de.nome){const L=me.get(String(de.id));if(L)return{...de,nome:L.nome,email:L.email,telefone:L.telefone}}return de})}catch{}R({id:M,inicio:I?.data?.inicio||null,fim:I?.data?.fim||null,status:I?.data?.status||null,modalidade:I?.data?.modalidade||null,quadra_nome:I?.data?.quadra_nome||null,participantes:U})}}catch{}finally{C(!1)}};return v.useEffect(()=>{let I=!1;if(e&&(x.current=!1,b.current=!1),e&&r?.id&&!i)return d(!1),g(!1),()=>{I=!0};const M=async()=>{if(!e||!r?.id)return;d(!0);let W;try{W=setTimeout(()=>d(!1),1e4)}catch{}try{console.debug("[ClientDetailsModal] loadHistory: start",{clientId:r.id,codigoEmpresa:i});let U=Oe.from("comanda_clientes").select("comanda_id, created_at").eq("cliente_id",r.id).order("created_at",{ascending:!1}).limit(10);i&&(U=U.eq("codigo_empresa",i));const{data:$,error:G}=await U;if($&&$.length,G)throw G;const me=Array.from(new Set(($||[]).map(ve=>ve.comanda_id).filter(Boolean)));let de=Oe.from("comandas").select("id, status, aberto_em, fechado_em").eq("cliente_id",r.id).order("aberto_em",{ascending:!1}).limit(10);i&&(de=de.eq("codigo_empresa",i));const{data:L,error:B}=await de;if(B)throw B;const X=Array.from(new Set((L||[]).map(ve=>ve.id))),q=Array.from(new Set([...me,...X]));if(q.length===0){h([]),d(!1);return}let Y=Oe.from("comandas").select("id,status,aberto_em,fechado_em, mesa:mesas!comandas_mesa_id_fkey ( nome, numero )").in("id",q);i&&(Y=Y.eq("codigo_empresa",i));const{data:Z,error:ge}=await Y;if(ge)throw ge;const re=new Map((Z||[]).map(ve=>[ve.id,ve]));let Se=Oe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",q);i&&(Se=Se.eq("codigo_empresa",i));const{data:Ie,error:pe}=await Se;if(pe)throw pe;const Ue={};for(const ve of Ie||[]){const ut=Number(ve.quantidade||0)*Number(ve.preco_unitario||0),Te=Number(ve.desconto||0);Ue[ve.comanda_id]=(Ue[ve.comanda_id]||0)+Math.max(0,ut-Te)}let _e=Oe.from("pagamentos").select("comanda_id, valor, status, recebido_em, metodo").in("comanda_id",q);i&&(_e=_e.eq("codigo_empresa",i));const{data:ue,error:Ft}=await _e;if(Ft)throw Ft;const qt={};for(const ve of ue||[])(ve.status||"Pago")!=="Cancelado"&&(ve.status||"Pago")!=="Estornado"&&(qt[ve.comanda_id]=(qt[ve.comanda_id]||0)+Number(ve.valor||0));const zt=(ve,ut=null)=>{const Te=re.get(ve)||{},Ze=Number(Ue[ve]||0),Ye=Number(qt[ve]||0),Nt=Math.max(0,Ze-Ye),nt=Te.mesa?.[0]?.nome||Te.mesa?.nome||null,mt=Te.mesa?.[0]?.numero||Te.mesa?.numero||null,At=nt||(mt!=null?`Mesa ${mt}`:"Balco");return{comanda_id:ve,created_at:ut,aberto_em:Te.aberto_em||null,fechado_em:Te.fechado_em||null,status:Te.status||"open",total:Ze,pago:Ye,saldo:Nt,mesa_title:At}},it=($||[]).map(ve=>zt(ve.comanda_id,ve.created_at)),ft=(L||[]).filter(ve=>!(me||[]).includes(ve.id)).map(ve=>zt(ve.id,ve.aberto_em)),dt=[...it,...ft].sort((ve,ut)=>{const Te=new Date(ve.aberto_em||ve.created_at||0).getTime();return new Date(ut.aberto_em||ut.created_at||0).getTime()-Te}).slice(0,10);if(!I&&dt.length===0&&!x.current){x.current=!0,console.debug("[ClientDetailsModal] loadHistory: empty result, retrying once..."),setTimeout(()=>{e&&r?.id&&M()},700);return}I||h(dt)}catch(U){o({title:"Falha ao carregar histrico do cliente",description:U?.message||"Tente novamente",variant:"destructive"})}finally{try{clearTimeout(W)}catch{}I||d(!1)}},z=async()=>{if(!e||!r?.id)return;g(!0);let W;try{W=setTimeout(()=>g(!1),1e4)}catch{}try{console.debug("[ClientDetailsModal] loadBookings: start",{clientId:r.id,codigoEmpresa:i});let U=Oe.from("agendamentos").select(`
            id, inicio, fim, status, modalidade,
            quadra:quadra_id ( nome )
          `).eq("cliente_id",r.id).order("inicio",{ascending:!1}).limit(10);i&&(U=U.eq("codigo_empresa",i));const{data:$,error:G}=await U;if(G)throw G;const me=($||[]).map(re=>({id:re.id,inicio:re.inicio,fim:re.fim,status:re.status,modalidade:re.modalidade,quadra_nome:re.quadra?.[0]?.nome||re.quadra?.nome||null}));let de=Oe.from("v_agendamento_participantes").select("agendamento_id").eq("cliente_id",r.id).limit(30);const{data:L,error:B}=await de;if(B)throw B;const X=Array.from(new Set((L||[]).map(re=>re.agendamento_id).filter(Boolean))),q=new Set((me||[]).map(re=>re.id)),Y=X.filter(re=>!q.has(re));let Z=[];if(Y.length>0){let re=Oe.from("agendamentos").select(`
              id, inicio, fim, status, modalidade,
              quadra:quadra_id ( nome )
            `).in("id",Y);i&&(re=re.eq("codigo_empresa",i));const{data:Se,error:Ie}=await re;if(Ie)throw Ie;Z=(Se||[]).map(pe=>({id:pe.id,inicio:pe.inicio,fim:pe.fim,status:pe.status,modalidade:pe.modalidade,quadra_nome:pe.quadra?.[0]?.nome||pe.quadra?.nome||null}))}const ge=[...me,...Z].sort((re,Se)=>new Date(Se.inicio)-new Date(re.inicio)).slice(0,10);if(!I&&ge.length===0&&!b.current){b.current=!0,console.debug("[ClientDetailsModal] loadBookings: empty result, retrying once..."),setTimeout(()=>{e&&r?.id&&z()},700);return}I||y(ge)}catch(U){console.warn("[ClientDetailsModal] Falha ao carregar agendamentos do cliente:",U)}finally{try{clearTimeout(W)}catch{}I||g(!1)}};return M(),z(),()=>{I=!0,e||(d(!1),g(!1))}},[e,r?.id,i]),r?s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto w-full",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Detalhes do Cliente"}),s.jsx(Jr,{children:"Informaes cadastrais e histrico recente deste cliente."})]}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-6 sm:space-y-8",children:[s.jsx("div",{className:"overflow-hidden",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-extrabold tracking-tight text-text-primary truncate",children:r.nome}),s.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-surface-2 border border-border text-text-secondary",children:["Cdigo: ",s.jsx("span",{className:"text-text-primary font-mono",children:r.codigo})]}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold border ${r.status==="active"?"bg-emerald-500/10 text-emerald-400 border-emerald-400/30":"bg-rose-500/10 text-rose-400 border-rose-400/30"}`,children:r.status==="active"?"Ativo":"Inativo"}),r.flag_cliente&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),r.flag_fornecedor&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]}),s.jsx("span",{className:"mt-2 block text-sm text-text-secondary truncate",children:r.email||""})]})})}),s.jsx("div",{className:"grid grid-cols-1 gap-8",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-text-secondary mb-2",children:"Informaes Cadastrais"}),s.jsxs("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg space-y-1",children:[s.jsx(c,{label:"Cdigo",value:r.codigo}),s.jsx(c,{label:"CPF/CNPJ",value:r.cpf||r.cnpj||""}),s.jsx(c,{label:"Telefone",value:r.telefone||""}),s.jsx(c,{label:"Aniversrio",value:r.aniversario?new Date(r.aniversario).toLocaleDateString("pt-BR"):""}),s.jsx(c,{label:"Email",value:r.email||""}),s.jsx(c,{label:"Status",value:r.status==="active"?"Ativo":"Inativo"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[s.jsx(gce,{className:"w-5 h-5 text-text-secondary"}),s.jsx("h4",{className:"font-semibold",children:"Histrico Recente"})]}),s.jsx("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg",children:u&&m?s.jsx("div",{className:"text-center py-8 text-sm text-text-muted",children:"Carregando histrico..."}):k&&k.length>0?s.jsx("div",{className:"max-h-64 overflow-y-auto thin-scroll pr-1",children:s.jsx("div",{className:"space-y-3",children:k.map((I,M)=>s.jsxs("div",{className:"group flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3 p-3 rounded-md border border-border/60 bg-background cursor-pointer transition-colors transition-shadow hover:bg-surface-2/60 hover:shadow-md hover:border-brand/30",title:"Clique para ver detalhes",onClick:()=>T(I),children:[s.jsx("div",{className:"min-w-0",children:I.kind==="comanda"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:I.data.mesa_title||"Balco"}),s.jsx("div",{className:"text-xs text-text-secondary truncate",children:(()=>{const z=I.data;return z.aberto_em?new Date(z.aberto_em).toLocaleString("pt-BR"):new Date(z.created_at).toLocaleString("pt-BR")})()})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:I.data.modalidade||"Agendamento"}),s.jsxs("div",{className:"text-xs text-text-secondary truncate",children:[new Date(I.data.inicio).toLocaleString("pt-BR"),"  ",I.data.quadra_nome||"Quadra"]})]})}),s.jsx("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto justify-between sm:justify-end",children:I.kind==="comanda"?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:Ot("px-2 py-1 text-[11px] font-semibold rounded-full border",I.data.status==="closed"||I.data.fechado_em?"bg-success/10 text-success border-success/30":I.data.status==="awaiting-payment"?"bg-info/10 text-info border-info/30":"bg-warning/10 text-warning border-warning/30"),children:I.data.status==="closed"||I.data.fechado_em?"Fechada":I.data.status==="awaiting-payment"?"Pagamento":"Em uso"}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[11px] text-text-secondary whitespace-nowrap",children:"Clique para detalhes"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:Ot("px-2 py-1 text-[11px] font-semibold rounded-full border",(()=>{const z=String(I.data.status||"scheduled"),W=l[z]||l.scheduled;return`${W.bg} ${W.text} ${W.border}`})()),children:(()=>{switch(I.data.status){case"finished":return"Finalizado";case"canceled":return"Cancelado";case"in_progress":return"Em andamento";case"confirmed":return"Confirmado";case"absent":return"Ausente";case"scheduled":default:return"Agendado"}})()}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[11px] text-text-secondary whitespace-nowrap",children:"Clique para detalhes"})]})})]},`${I.kind}-${M}`))})}):s.jsx("div",{className:"text-center py-8 text-sm text-text-muted",children:"Sem registros recentes para este cliente."})})]}),s.jsx(qr,{open:w,onOpenChange:S,children:s.jsxs(Lr,{className:"sm:max-w-[700px] w-full max-h-[85vh] overflow-y-auto",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:j==="comanda"?E?.mesa_title||"Detalhes da Comanda":"Detalhes do Agendamento"}),s.jsx(Jr,{children:j==="comanda"?"Itens e pagamentos desta comanda.":"Informaes do agendamento e participantes."})]}),s.jsx("div",{className:"space-y-4",children:P?s.jsx("div",{className:"text-sm text-text-muted",children:"Carregando detalhes..."}):j==="comanda"&&E?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Status"}),s.jsx("p",{className:"font-semibold",children:(()=>{const I=String(E.status||"").toLowerCase();return I==="closed"||E.fechado_em?"Fechada":I==="awaiting-payment"?"Aguardando pagamento":"Aberta"})()})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Abertura"}),s.jsx("p",{className:"font-semibold",children:E.aberto_em?new Date(E.aberto_em).toLocaleString("pt-BR"):""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Fechamento"}),s.jsx("p",{className:"font-semibold",children:E.fechado_em?new Date(E.fechado_em).toLocaleString("pt-BR"):""})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Itens"}),s.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(E.itens||[]).map(I=>s.jsxs("div",{className:"p-2 flex flex-col sm:grid sm:grid-cols-12 gap-1 sm:gap-2 text-sm",children:[s.jsx("div",{className:"sm:col-span-6 font-medium",children:I.produto_nome||"Item"}),s.jsxs("div",{className:"sm:col-span-2 sm:text-right text-text-muted",children:["Qtd: ",Number(I.quantidade||0)]}),s.jsxs("div",{className:"sm:col-span-2 sm:text-right",children:["R$ ",Number(I.preco_unitario||0).toFixed(2)]}),s.jsx("div",{className:"sm:col-span-2 sm:text-right text-text-secondary",children:Number(I.desconto||0)?`- R$ ${Number(I.desconto||0).toFixed(2)}`:""})]},I.id)),(!E.itens||E.itens.length===0)&&s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum item."})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Pagamentos"}),s.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(E.pagamentos||[]).map(I=>s.jsxs("div",{className:"p-2 flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"truncate",children:[I.metodo||""," ",I.status?`(${I.status})`:""]}),s.jsxs("span",{className:"font-semibold",children:["R$ ",Number(I.valor||0).toFixed(2)]})]},I.id)),(!E.pagamentos||E.pagamentos.length===0)&&s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum pagamento registrado."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Total de Itens"}),s.jsxs("p",{className:"font-bold",children:["R$ ",Number(E.totalItens||0).toFixed(2)]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Total Pago"}),s.jsxs("p",{className:"font-bold text-success",children:["R$ ",Number(E.totalPagos||0).toFixed(2)]})]})]})]}):j==="agendamento"&&E?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Modalidade"}),s.jsx("p",{className:"font-semibold",children:E.modalidade||""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Quadra"}),s.jsx("p",{className:"font-semibold",children:E.quadra_nome||""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Incio"}),s.jsx("p",{className:"font-semibold",children:E.inicio?new Date(E.inicio).toLocaleString("pt-BR"):""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Fim"}),s.jsx("p",{className:"font-semibold",children:E.fim?new Date(E.fim).toLocaleString("pt-BR"):""})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Participantes"}),s.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(E.participantes||[]).map(I=>s.jsxs("div",{className:"p-2 text-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:I.nome||"Participante"}),s.jsxs("div",{className:"text-xs text-text-muted truncate",children:[I.email||""," ",I.telefone?` ${I.telefone}`:""]})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-between sm:justify-end",children:[I.valor_cota!=null&&s.jsxs("span",{className:"text-xs font-semibold text-text-secondary",children:["R$ ",Number(I.valor_cota||0).toFixed(2)]}),s.jsx("span",{className:`text-[11px] font-semibold rounded-full px-2 py-0.5 border ${String(I.status_pagamento||"").toLowerCase()==="pago"?"bg-success/10 text-success border-success/30":"bg-warning/10 text-warning border-warning/30"}`,children:String(I.status_pagamento||I.status_pagamento_text||"Pendente")})]})]},I.id)),(!E.participantes||E.participantes.length===0)&&s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum participante encontrado."})]})]})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma informao para exibir."})}),s.jsx(mn,{children:s.jsx(Ee,{variant:"outline",onClick:()=>S(!1),children:"Fechar"})})]})})]}),s.jsxs(mn,{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-0 sm:justify-between",children:[s.jsx("div",{className:"w-full sm:flex-1",children:s.jsxs(Ee,{type:"button",variant:"destructive",className:"bg-red-600 hover:bg-red-500 text-white w-full sm:w-auto",onClick:()=>a?.(r),children:[s.jsx(WW,{className:"mr-2 h-4 w-4"})," Inativar Cliente"]})}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",className:"flex-1 sm:flex-none",children:"Fechar"})}),s.jsxs(Ee,{onClick:()=>n(r),className:"flex-1 sm:flex-none",children:[s.jsx(Nm,{className:"mr-2 h-4 w-4"})," Editar Cliente"]})]})]})]})}):null}function SQe(){const{toast:e}=Za(),{userProfile:t,authReady:r}=po(),n=Us(),[a,i]=v.useState(()=>{try{const B=localStorage.getItem("auth:userProfile"),X=B&&JSON.parse(B)?.codigo_empresa||null,q=X?`clientes:list:${X}`:"clientes:list",Y=JSON.parse(localStorage.getItem(q)||"[]");return Array.isArray(Y)?Y:[]}catch{return[]}}),[o,l]=v.useState(!1),[c,u]=v.useState(!0),[d,f]=v.useState(!1),[h,m]=v.useState(!1),[g,p]=v.useState(null),[y,x]=v.useState(null),[b,w]=v.useState({searchTerm:"",status:"all",tipo:"todos"}),S=v.useRef(!1),j=v.useRef(0),A=v.useRef(0),P=v.useRef(!1);v.useEffect(()=>{n.state?.openModal&&!d&&!P.current&&(P.current=!0,f(!0),window.history.replaceState({},document.title))},[n.state?.openModal,d]);const C=async()=>{try{const B=a&&a.length>0;if(B||l(!0),!t?.codigo_empresa)return;const X=`clientes:list:${t.codigo_empresa}`;let q=Oe.from("clientes").select("*").eq("codigo_empresa",t.codigo_empresa).order("codigo",{ascending:!0});if(b.searchTerm.trim()!==""){const Se=b.searchTerm.trim();/^\d+$/.test(Se)?q=q.or(`codigo.eq.${Se},nome.ilike.%${Se}%,email.ilike.%${Se}%,telefone.ilike.%${Se}%`):q=q.or(`nome.ilike.%${Se}%,email.ilike.%${Se}%,telefone.ilike.%${Se}%`)}b.status!=="all"&&(q=q.eq("status",b.status));const Y=setTimeout(()=>{try{if(!B){const Se=JSON.parse(localStorage.getItem(X)||"[]");Array.isArray(Se)&&Se.length>0&&(console.warn("[Clientes] slow fallback: using cached snapshot"),i(Se),A.current=Se.length)}}catch{}},2e3),{data:Z,error:ge}=await q;if(ge){if(!S.current){S.current=!0,setTimeout(C,900);return}throw ge}const re=Z||[];if(re.length===0&&B&&!S.current){S.current=!0,setTimeout(C,700);return}S.current=!1,i(re);try{localStorage.setItem(X,JSON.stringify(re))}catch{}A.current=re.length,j.current=Date.now()}catch(B){e({title:"Erro ao carregar clientes",description:B.message,variant:"destructive"})}finally{l(!1);try{clearTimeout(slowFallback)}catch{}}};v.useEffect(()=>{try{const B=localStorage.getItem("auth:userProfile"),X=t?.codigo_empresa||B&&JSON.parse(B)?.codigo_empresa||null;if(X){const q=`clientes:list:${X}`,Y=JSON.parse(localStorage.getItem(q)||"[]");Array.isArray(Y)&&Y.length&&a.length===0&&(i(Y),A.current=Y.length)}}catch{}if(r&&t?.codigo_empresa){const B=setTimeout(C,50);return()=>clearTimeout(B)}return()=>{}},[r,t?.codigo_empresa]),v.useEffect(()=>{if(r&&t?.codigo_empresa){const B=setTimeout(C,200);return()=>clearTimeout(B)}return()=>{}},[b.searchTerm,b.status,r,t?.codigo_empresa]),v.useEffect(()=>{const B=()=>{(Date.now()-(j.current||0)>3e4||A.current===0)&&r&&t?.codigo_empresa&&C()},X=()=>{document.visibilityState==="visible"&&(Date.now()-(j.current||0)>3e4||A.current===0)&&r&&t?.codigo_empresa&&C()};return window.addEventListener("focus",B),document.addEventListener("visibilitychange",X),()=>{window.removeEventListener("focus",B),document.removeEventListener("visibilitychange",X)}},[r,t?.codigo_empresa]);const E=v.useMemo(()=>{const X=new Date().getMonth();return{total:a.length,birthdays:a.filter(q=>q.aniversario&&new Date(q.aniversario).getMonth()===X).length,active:a.filter(q=>q.status==="Ativo").length}},[a]);function R(B){const X=["Cdigo","Tipo Pessoa","Nome/Razo Social","Apelido/Nome Fantasia","CPF","CNPJ","RG","IE","Email","Telefone","Fone 2","Celular 1","Celular 2","WhatsApp","CEP","Endereo","Nmero","Complemento","Bairro","Cidade","UF","Cidade IBGE","Limite Crdito","Tipo Recebimento","Regime Tributrio","Tipo Contribuinte","Aniversrio","Sexo","Estado Civil","Nome da Me","Nome do Pai","Observaes"," Cliente"," Fornecedor"," Funcionrio"," Administradora"," Parceiro","CCF/SPC","Status"],q=";",Y=_e=>{if(!_e)return"";try{const ue=new Date(_e);if(!isNaN(ue)){const Ft=String(ue.getDate()).padStart(2,"0"),qt=String(ue.getMonth()+1).padStart(2,"0"),zt=ue.getFullYear();return`${Ft}/${qt}/${zt}`}}catch{}return String(_e)},Z=_e=>{const ue=Number(_e??0);return Number.isFinite(ue)?ue.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},ge=_e=>_e?"Sim":"No",re=_e=>{const ue=_e==null?"":String(_e);return/[";\n]/.test(ue)?`"${ue.replace(/"/g,'""')}"`:ue},Se=[];Se.push("\uFEFF"+X.join(q));for(const _e of B){const ue=[_e.codigo??"",_e.tipo_pessoa||"",_e.nome||"",_e.apelido||"",_e.cpf||"",_e.cnpj||"",_e.rg||"",_e.ie||"",_e.email||"",_e.telefone||"",_e.fone2||"",_e.celular1||"",_e.celular2||"",_e.whatsapp||"",_e.cep||"",_e.endereco||"",_e.numero||"",_e.complemento||"",_e.bairro||"",_e.cidade||"",_e.uf||"",_e.cidade_ibge||"",Z(_e.limite_credito),_e.tipo_recebimento||"",_e.regime_tributario||"",_e.tipo_contribuinte||"",Y(_e.aniversario),_e.sexo||"",_e.estado_civil||"",_e.nome_mae||"",_e.nome_pai||"",_e.observacoes||"",ge(!!_e.flag_cliente),ge(!!_e.flag_fornecedor),ge(!!_e.flag_funcionario),ge(!!_e.flag_administradora),ge(!!_e.flag_parceiro),ge(!!_e.flag_ccf_spc),_e.status==="active"?"Ativo":"Inativo"].map(re).join(q);Se.push(ue)}const Ie=new Blob([Se.join(`
`)],{type:"text/csv;charset=utf-8;"}),pe=URL.createObjectURL(Ie),Ue=document.createElement("a");Ue.href=pe,Ue.download="clientes.csv",document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),URL.revokeObjectURL(pe)}const k=()=>{try{R(T),e({title:"Exportao concluda",description:`${T.length} cliente(s) exportado(s).`,variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(B){e({title:"Falha ao exportar",description:B?.message||"No foi possvel gerar o arquivo.",variant:"destructive"})}},T=v.useMemo(()=>(new Date().getMonth(),a.filter(X=>{const q=b.searchTerm.toLowerCase()===""||(X.nome||"").toLowerCase().includes(b.searchTerm.toLowerCase())||(X.cpf||"").includes(b.searchTerm)||(X.telefone||"").includes(b.searchTerm),Y=b.status==="all"||X.status===b.status;let Z=!0;return b.tipo==="clientes"?Z=X.flag_cliente===!0:b.tipo==="fornecedores"?Z=X.flag_fornecedor===!0:b.tipo==="ambos"&&(Z=X.flag_cliente===!0&&X.flag_fornecedor===!0),q&&Y&&Z})),[a,b]),[I,M]=v.useState({by:"codigo",dir:"asc"}),z=B=>{M(X=>X.by===B?{by:B,dir:X.dir==="asc"?"desc":"asc"}:{by:B,dir:"asc"})},W=v.useMemo(()=>{const B=[...T],X=I.dir==="asc"?1:-1,q=(Y,Z)=>Number.isFinite(Y)?Y:Z;return B.sort((Y,Z)=>{if(I.by==="codigo"){const ge=q(parseInt(String(Y.codigo||"").trim(),10),1/0),re=q(parseInt(String(Z.codigo||"").trim(),10),1/0);return ge===re?0:ge>re?X:-X}if(I.by==="nome"){const ge=(Y.nome||"").toString(),re=(Z.nome||"").toString();return ge.localeCompare(re,"pt-BR",{sensitivity:"base"})*X}return 0}),B},[T,I]),U=B=>{p(B),m(!0)},$=()=>{x(null),f(!0)},G=B=>{m(!1),x(B),f(!0)},me=async B=>{try{const{error:X}=await Oe.from("clientes").update({status:"inactive"}).eq("id",B.id);if(X)throw X;m(!1),e({title:"Cliente inativado",description:`${B.nome} foi marcado como inativo.`}),C()}catch(X){e({title:"Erro ao inativar cliente",description:X.message,variant:"destructive"})}},de=()=>{w({searchTerm:"",status:"all",tipo:"todos"})},L=b.searchTerm!==""||b.status!=="all"||b.tipo!=="todos";return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Clientes & Fornecedores - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Gerenciamento completo de clientes e fornecedores (CRM)."})]}),s.jsx("div",{className:"h-full flex flex-col",children:s.jsxs(lr.div,{variants:wQe,initial:"hidden",animate:"visible",children:[s.jsxs(lr.div,{variants:gre,className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary tracking-tighter",children:"Clientes & Fornecedores"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Gesto completa de clientes e fornecedores"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[s.jsx(Ee,{variant:"outline",size:"icon",onClick:()=>u(B=>!B),title:c?"Ocultar resumo":"Mostrar resumo","aria-label":c?"Ocultar resumo":"Mostrar resumo",className:"flex-shrink-0",children:c?s.jsx(Eb,{className:"h-4 w-4"}):s.jsx(kb,{className:"h-4 w-4"})}),s.jsxs(Ee,{variant:"outline",onClick:k,className:"text-sm",children:[s.jsx(cl,{className:"mr-2 h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),s.jsx("span",{className:"sm:hidden",children:"CSV"})]}),s.jsxs(Ee,{onClick:$,className:"text-sm",children:[s.jsx(Xa,{className:"mr-2 h-4 w-4"})," ",s.jsx("span",{className:"hidden xs:inline",children:"Novo"}),s.jsx("span",{className:"xs:hidden",children:"Novo"})]})]})]}),c&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx(Dw,{icon:hs,title:"Total de Clientes",value:a.filter(B=>B.flag_cliente).length,color:"text-brand",onClick:()=>w(B=>({...B,tipo:"clientes"})),isActive:b.tipo==="clientes"}),s.jsx(Dw,{icon:hs,title:"Total de Fornecedores",value:a.filter(B=>B.flag_fornecedor).length,color:"text-purple-500",onClick:()=>w(B=>({...B,tipo:"fornecedores"})),isActive:b.tipo==="fornecedores"}),s.jsx(Dw,{icon:mce,title:"Aniversariantes do Ms",value:E.birthdays,color:"text-info",onClick:()=>w(B=>({...B,tipo:"todos"})),isActive:b.tipo==="todos"}),s.jsx(Dw,{icon:Tb,title:"Ativos",value:E.active,color:"text-success",onClick:()=>w(B=>({...B,status:"active"})),isActive:b.status==="active"})]}),s.jsx(lr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col gap-4",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar por nome, CPF ou telefone...",className:"pl-9",value:b.searchTerm,onChange:B=>w(X=>({...X,searchTerm:B.target.value}))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(yn,{value:b.tipo,onValueChange:B=>w(X=>({...X,tipo:B})),children:[s.jsx(pn,{className:"w-full sm:w-[200px]",children:s.jsx(xn,{placeholder:"Tipo"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"todos",children:"Todos"}),s.jsx(Wt,{value:"clientes",children:"Apenas Clientes"}),s.jsx(Wt,{value:"fornecedores",children:"Apenas Fornecedores"}),s.jsx(Wt,{value:"ambos",children:"Clientes e Fornecedores"})]})]}),s.jsxs(yn,{value:b.status,onValueChange:B=>w(X=>({...X,status:B})),children:[s.jsx(pn,{className:"w-full sm:w-[180px]",children:s.jsx(xn,{placeholder:"Status"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"all",children:"Todos os Status"}),s.jsx(Wt,{value:"active",children:"Ativos"}),s.jsx(Wt,{value:"inactive",children:"Inativos"})]})]}),L&&s.jsxs(Ee,{variant:"ghost",onClick:de,className:"w-full sm:w-auto",children:[s.jsx(Z2,{className:"mr-2 h-4 w-4"}),"Limpar Filtros"]})]})]}),s.jsx("div",{className:"md:hidden space-y-3 p-4",children:o?s.jsx("div",{className:"text-center py-8 text-text-muted",children:"Carregando..."}):W.length>0?W.map(B=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3 cursor-pointer hover:border-brand/50 transition-colors",onClick:()=>U(B),children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{className:"font-mono text-sm font-semibold text-text-primary",children:B.codigo}),s.jsx("span",{className:Ot("px-2 py-0.5 text-xs font-semibold rounded-full flex-shrink-0",B.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:B.status==="active"?"Ativo":"Inativo"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-base text-text-primary mb-1",children:B.nome||""}),s.jsx("p",{className:"text-sm text-text-muted",children:B.cpf&&`CPF: ${B.cpf}`||B.cnpj&&`CNPJ: ${B.cnpj}`||(B.apelido?`Apelido: ${B.apelido}`:" ")})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[B.flag_cliente&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),B.flag_fornecedor&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]}),(B.telefone||B.email)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Contato"}),s.jsx("span",{className:"text-sm font-medium",children:B.telefone||B.email})]}),s.jsx("div",{className:"text-xs text-text-muted text-center pt-2 border-t border-border/50",children:"Toque para ver detalhes"})]},B.id)):s.jsx("div",{className:"text-center py-8 text-text-muted",children:"Nenhum cliente encontrado com os filtros aplicados."})}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(Vo,{children:[s.jsx(Ho,{className:"sticky top-0 bg-surface-2 z-10",children:s.jsxs(Mn,{className:"border-b border-border",children:[s.jsxs(_r,{className:"select-none cursor-pointer text-text-secondary",onClick:()=>z("codigo"),title:"Ordenar por cdigo",children:["Cdigo ",I.by==="codigo"?I.dir==="asc"?"":"":""]}),s.jsxs(_r,{className:"text-text-secondary select-none cursor-pointer",onClick:()=>z("nome"),title:"Ordenar por nome",children:["Cliente ",I.by==="nome"?I.dir==="asc"?"":"":""]}),s.jsx(_r,{className:"text-text-secondary",children:"Contato"}),s.jsx(_r,{className:"text-text-secondary",children:"Tipo"}),s.jsx(_r,{className:"text-text-secondary",children:"Status"})]})}),s.jsx(Go,{children:o?s.jsx(Mn,{children:s.jsx(hr,{colSpan:5,className:"h-24 text-center",children:"Carregando..."})}):W.length>0?W.map(B=>s.jsxs(Mn,{className:"cursor-pointer",onClick:()=>U(B),children:[s.jsx(hr,{className:"font-mono text-base font-semibold text-text-primary",children:B.codigo}),s.jsx(hr,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-base font-semibold text-text-primary truncate",children:B.nome||""}),s.jsx("span",{className:"text-xs text-text-muted truncate",children:B.cpf&&`CPF: ${B.cpf}`||B.cnpj&&`CNPJ: ${B.cnpj}`||(B.apelido?`Apelido: ${B.apelido}`:" ")})]})}),s.jsx(hr,{children:s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-sm truncate",children:B.telefone||B.email||""})})}),s.jsx(hr,{children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.flag_cliente&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),B.flag_fornecedor&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]})}),s.jsx(hr,{children:s.jsx("span",{className:Ot("px-2 py-1 text-xs font-semibold rounded-full",B.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:B.status==="active"?"Ativo":"Inativo"})})]},B.id)):s.jsx(Mn,{children:s.jsx(hr,{colSpan:5,className:"h-24 text-center",children:"Nenhum cliente encontrado com os filtros aplicados."})})})]})})]})})]})}),s.jsx(Gee,{open:d,onOpenChange:f,client:y,onSaved:C}),s.jsx(_Qe,{open:h,onOpenChange:m,client:g,onEdit:G,onInactivate:me,codigoEmpresa:t?.codigo_empresa})]})}const jQe=[],NQe=[{id:"agenda",label:"Agenda"},{id:"vendas",label:"Vendas (PDV)"},{id:"caixa",label:"Caixa"},{id:"estoque",label:"Estoque"},{id:"clientes",label:"Clientes"},{id:"equipe",label:"Equipe"}],CQe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},vre={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},kA=({icon:e,title:t,value:r,color:n})=>{const a=e;return s.jsxs(lr.div,{variants:vre,className:"bg-surface rounded-lg border border-border p-4 flex items-center gap-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n}/20`,children:s.jsx(a,{className:`w-6 h-6 ${n}`})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium",children:t}),s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r})]})]})};function AQe({open:e,onOpenChange:t,member:r,onEdit:n}){return r?s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{className:"sm:max-w-[700px] w-full max-h-[90vh] overflow-y-auto",children:[s.jsx(Ur,{children:s.jsx($r,{children:"Detalhes do Funcionrio"})}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:r.name}),s.jsx("p",{className:"text-brand font-semibold",children:r.role})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-text-primary mb-2 flex items-center gap-2",children:[s.jsx(BW,{className:"w-5 h-5 text-text-secondary"})," Permisses de Acesso"]}),s.jsxs("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-x-4 sm:gap-y-2",children:[NQe.map(a=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:a.label}),s.jsx("span",{className:Ot("font-semibold",r.permissions[a.id]?"text-success":"text-danger"),children:r.permissions[a.id]?r.permissions[a.id]==="edit"?"Edio":"Visualizao":"Sem Acesso"})]},a.id)),r.permissions.admin&&s.jsx("div",{className:"col-span-1 sm:col-span-2 text-center font-bold text-success p-2 bg-success/10 rounded-md mt-2",children:"Acesso total de Administrador"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-text-primary mb-2 flex items-center gap-2",children:[s.jsx(ace,{className:"w-5 h-5 text-text-secondary"})," Log de Atividades Recentes"]}),s.jsx("div",{className:"bg-surface-2 p-4 rounded-lg text-center",children:s.jsx("p",{className:"text-sm text-text-muted py-8",children:"O histrico de atividades do funcionrio aparecer aqui."})})]})]}),s.jsxs(mn,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Fechar"})}),s.jsxs(Ee,{onClick:()=>n(r),className:"w-full sm:w-auto",children:[s.jsx(Nm,{className:"mr-2 h-4 w-4"})," Editar"]})]})]})}):null}function PQe({open:e,onOpenChange:t,member:r,onSave:n,loading:a}){const{toast:i}=Za(),[o,l]=v.useState(r?.name||""),[c,u]=v.useState(r?.role||"");v.useEffect(()=>{e&&(l(r?.name||""),u(r?.role||""))},[r,e]);const d=async f=>{if(f.preventDefault(),!o.trim()){i({title:"Nome  obrigatrio",variant:"destructive"});return}await n({name:o.trim(),role:c.trim()})};return s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{className:"sm:max-w-[700px] w-full",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:r?"Editar Funcionrio":"Novo Funcionrio"}),s.jsx(Jr,{children:"Informe apenas nome e cargo. O cargo  livre (texto)."})]}),s.jsx("form",{onSubmit:d,className:"py-2",children:s.jsx("div",{className:"bg-surface-2 border border-border rounded-lg p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{htmlFor:"name",children:"Nome"}),s.jsxs("div",{className:"relative",children:[s.jsx(mE,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{id:"name",value:o,onChange:f=>l(f.target.value),className:"pl-9",placeholder:"Ex.: Maria Silva"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{htmlFor:"role",children:"Cargo"}),s.jsxs("div",{className:"relative",children:[s.jsx(BW,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{id:"role",value:c,onChange:f=>u(f.target.value),className:"pl-9",placeholder:"Ex.: Gerente, Caixa, ..."})]})]})]})})}),s.jsxs(mn,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[s.jsx(ih,{asChild:!0,children:s.jsx(Ee,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Cancelar"})}),s.jsx(Ee,{type:"submit",onClick:d,disabled:!!a,className:"w-full sm:w-auto",children:a?"Salvando...":"Salvar"})]})]})})}function EQe(){const{company:e,authReady:t,userProfile:r}=po(),{toast:n}=Za(),[a,i]=v.useState(jQe),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,f]=v.useState(null),[h,m]=v.useState(null),[g,p]=v.useState(""),[y,x]=v.useState(!1),b=v.useRef(!1),w=v.useRef(!0);v.useEffect(()=>(w.current=!0,()=>{w.current=!1}),[]);const S=async()=>{try{const I=e?.codigo_empresa||null;if(!I&&!e?.id)return;const M=I?`team:list:${I}`:"team:list",z=setTimeout(()=>{if(w.current)try{const L=localStorage.getItem(M),B=L?JSON.parse(L):[];Array.isArray(B)&&B.length>0&&(console.warn("[Equipe] slow fallback: using cached snapshot"),i(B))}catch{}},5e3);let W=Oe.from("colaboradores").select("*").order("nome",{ascending:!0});I&&(W=W.eq("codigo_empresa",I));const{data:U,error:$}=await W;if($){if(!b.current){b.current=!0,setTimeout(S,800);return}throw $}let me=(U||[]).map(L=>({id:L.id,name:L.nome||"",role:L.cargo||"user",status:L.ativo===!1?"inactive":"active",online:!1,permissions:{}}));const de=r?.codigo_empresa&&e?.codigo_empresa&&r.codigo_empresa===e.codigo_empresa;if(r?.id&&de&&(me.some(B=>B.id===r.id)||(me=[{id:r.id,name:r.nome||"Voc",role:r.cargo||"user",status:"active",online:!1,permissions:{}},...me])),!w.current)return;i(me);try{localStorage.setItem(M,JSON.stringify(me))}catch{}}catch(I){console.error("Falha ao carregar equipe:",I);const M=e?.codigo_empresa||null,z=M?`team:list:${M}`:"team:list";try{const W=localStorage.getItem(z);W&&w.current&&i(JSON.parse(W))}catch{}}finally{b.current=!1}};v.useEffect(()=>{const I=e?.codigo_empresa||null;if(!(!t||!I)){try{const M=localStorage.getItem(`team:list:${I}`),z=M?JSON.parse(M):[];Array.isArray(z)&&z.length>0&&i(z)}catch{}S()}},[t,e?.codigo_empresa]),v.useEffect(()=>{const I=()=>{document.visibilityState==="visible"&&t&&(e?.codigo_empresa||e?.id)&&S()},M=()=>{t&&(e?.codigo_empresa||e?.id)&&S()};return document.addEventListener("visibilitychange",I),window.addEventListener("focus",M),()=>{document.removeEventListener("visibilitychange",I),window.removeEventListener("focus",M)}},[t,e?.codigo_empresa,e?.id]);const j=v.useMemo(()=>({total:a.filter(I=>I.status==="active").length,online:a.filter(I=>I.online&&I.status==="active").length,admins:a.filter(I=>I.permissions?.admin&&I.status==="active").length}),[a]),A=v.useMemo(()=>a.filter(I=>I.name.toLowerCase().includes(g.toLowerCase())||I.role.toLowerCase().includes(g.toLowerCase())),[a,g]),P=I=>{f(I),u(!0)},C=()=>{m(null),l(!0)},E=I=>{u(!1),m(I),l(!0)},R=I=>{m(I),l(!0)},k=async({name:I,role:M})=>{try{if(x(!0),!e?.codigo_empresa&&!e?.id)throw new Error("Empresa no encontrada para o usurio atual.");let z=e?.codigo_empresa||null;if(!z&&e?.id){const{data:W}=await Oe.from("empresas").select("codigo_empresa").eq("id",e.id).single();z=W?.codigo_empresa||null}if(!z)throw new Error("Empresa sem cdigo. Defina o cdigo da empresa antes de adicionar colaboradores.");if(h){const{error:W}=await Oe.from("colaboradores").update({nome:I,cargo:M}).eq("id",h.id);if(W)throw W;n({title:"Funcionrio atualizado",description:h.name,variant:"default"})}else{const{error:W}=await Oe.from("colaboradores").insert({codigo_empresa:z,nome:I,cargo:M,ativo:!0});if(W)throw W;n({title:"Funcionrio criado com sucesso",description:I,variant:"success"})}await S(),l(!1),m(null)}catch(z){n({title:"Erro ao salvar funcionrio",description:z.message||String(z),variant:"destructive"})}finally{x(!1)}},T=async I=>{try{if(!(e?.id||e?.codigo_empresa))return;const M=a[0]?.id;if(I.id===M){n({title:"Ao no permitida",description:"No  possvel desativar o primeiro funcionrio.",variant:"destructive"});return}if(r?.id&&I.id===r.id){n({title:"Ao no permitida",description:"Voc no pode desativar o seu prprio usurio.",variant:"destructive"});return}if(a.filter(W=>W.status==="active").length<=1){n({title:"Ao no permitida",description:"Deve haver pelo menos um funcionrio ativo.",variant:"destructive"});return}const{error:z}=await Oe.from("colaboradores").update({ativo:!1}).eq("id",I.id);if(z)throw z;n({title:"Funcionrio desativado",description:I.name}),await S()}catch(M){n({title:"Erro ao desativar",description:M.message||String(M),variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Equipe - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Gerencie sua equipe, permisses e atividades."})]}),s.jsx("div",{className:"h-full flex flex-col",children:s.jsxs(lr.div,{variants:CQe,initial:"hidden",animate:"visible",children:[s.jsxs(lr.div,{variants:vre,className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary tracking-tighter",children:"Gesto de Equipe"}),s.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Controle de funcionrios, permisses e logs."})]}),s.jsxs(Ee,{onClick:C,disabled:!t||!e?.codigo_empresa,title:t?e?.codigo_empresa?"":"Empresa sem cdigo. Defina o cdigo da empresa antes.":"Aguardando autenticao...",children:[s.jsx(Xa,{className:"mr-2 h-4 w-4"})," Novo Funcionrio"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(kA,{icon:hs,title:"Funcionrios Ativos",value:j.total,color:"text-brand"}),s.jsx(kA,{icon:kce,title:"Online Agora",value:j.online,color:"text-success"}),s.jsx(kA,{icon:Cce,title:"Administradores",value:j.admins,color:"text-info"})]}),s.jsx(lr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar por nome ou cargo...",className:"pl-9",value:g,onChange:I=>p(I.target.value)})]})}),s.jsx("div",{className:"md:hidden p-4 space-y-3",children:A.length===0?s.jsx("div",{className:"text-center py-10 text-text-muted",children:"Nenhum funcionrio cadastrado."}):A.map((I,M)=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",onClick:()=>P(I),children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-base text-text-primary truncate",children:I.name}),s.jsx("p",{className:"text-sm text-text-muted mt-0.5",children:I.role})]}),s.jsx("span",{className:Ot("inline-flex px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",I.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:I.status==="active"?"Ativo":"Inativo"})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(Ee,{variant:"outline",size:"sm",onClick:z=>{z.stopPropagation(),P(I)},className:"flex-1",children:"Ver Detalhes"}),s.jsx(Ee,{variant:"outline",size:"sm",onClick:z=>{z.stopPropagation(),R(I)},children:s.jsx(Nm,{className:"h-3 w-3"})}),s.jsxs(Mx,{children:[s.jsx(Rx,{asChild:!0,children:s.jsx(Ee,{variant:"outline",size:"sm",onClick:z=>z.stopPropagation(),children:s.jsx(XR,{className:"h-3 w-3"})})}),s.jsx(Dg,{align:"end",children:s.jsx(Pc,{className:"text-danger",disabled:M===0||a.filter(z=>z.status==="active").length<=1||r?.id&&I.id===r.id,onClick:z=>{z.stopPropagation(),T(I)},children:"Desativar"})})]})]})]},I.id))}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Funcionrio"}),s.jsx(_r,{children:"Cargo"}),s.jsx(_r,{children:"Status"}),s.jsx(_r,{className:"w-[50px]"})]})}),s.jsxs(Go,{children:[A.length===0&&s.jsx(Mn,{children:s.jsx(hr,{colSpan:4,className:"text-center py-10 text-text-muted",children:"Nenhum funcionrio cadastrado."})}),A.map((I,M)=>s.jsxs(Mn,{className:"cursor-pointer",onClick:()=>P(I),children:[s.jsx(hr,{className:"font-medium",children:s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("span",{children:I.name})})}),s.jsx(hr,{children:I.role}),s.jsx(hr,{children:s.jsx("span",{className:Ot("px-2 py-1 text-xs font-semibold rounded-full",I.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:I.status==="active"?"Ativo":"Inativo"})}),s.jsx(hr,{children:s.jsxs(Mx,{children:[s.jsx(Rx,{asChild:!0,children:s.jsx(Ee,{variant:"ghost",className:"h-8 w-8 p-0",onClick:z=>z.stopPropagation(),children:s.jsx(XR,{className:"h-4 w-4"})})}),s.jsxs(Dg,{align:"end",children:[s.jsx(Pc,{onClick:z=>{z.stopPropagation(),P(I)},children:"Ver Detalhes"}),s.jsx(Pc,{onClick:z=>{z.stopPropagation(),R(I)},children:"Editar"}),s.jsx(Pc,{className:"text-danger",disabled:M===0||a.filter(z=>z.status==="active").length<=1||r?.id&&I.id===r.id,onClick:z=>{z.stopPropagation(),T(I)},children:"Desativar"})]})]})})]},I.id))]})]})})]})})]})}),s.jsx(PQe,{open:o,onOpenChange:l,member:h,onSave:k,loading:y}),s.jsx(AQe,{open:c,onOpenChange:u,member:d,onEdit:E})]})}const kQe="v0.0.4";function Yy({title:e,icon:t,children:r,className:n="",collapsible:a=!1,defaultOpen:i=!0}){return a?s.jsx("div",{className:`bg-surface rounded-lg border border-border shadow-sm ${n}`,children:s.jsxs("details",{className:"group",open:i,children:[s.jsxs("summary",{className:"list-none cursor-pointer select-none p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[t&&s.jsx(t,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"text-base font-semibold",children:e})]}),s.jsx("span",{className:"text-xs text-text-secondary group-open:rotate-180 transition-transform",children:""})]}),s.jsx("div",{className:"px-4 pb-4",children:r})]})}):s.jsxs("div",{className:`bg-surface rounded-lg border border-border shadow-sm p-4 ${n}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t&&s.jsx(t,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"text-base font-semibold",children:e})]}),r]})}function sf({label:e,value:t}){return s.jsxs("div",{className:"flex items-center justify-between gap-3 py-1 text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:e}),s.jsx("span",{className:"font-medium truncate",children:t||""})]})}function OQe(){const{userProfile:e,company:t,authReady:r,loading:n}=po();Us();const[a,i]=v.useState("Agenda"),[o,l]=v.useState("Mdia"),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,m]=v.useState(!0),g="Fluxo7 Arena",p="fluxo7team@gmail.com",y="https://wa.me/5534998936088",x="tel:+5534998936088",b="+55 (34) 99893-6088";v.useEffect(()=>{try{const P=window.matchMedia("(pointer:fine)"),C=()=>m(P.matches);return C(),P.addEventListener?.("change",C),()=>P.removeEventListener?.("change",C)}catch{m(!0)}},[]);const w=v.useMemo(()=>{try{return{empresa:t?.nome||t?.fantasia||t?.razao_social||t?.razaoSocial||t?.displayName||t?.codigo_empresa||"",usuario:e?.nome||e?.name||e?.email||"",dataHora:new Date().toLocaleString("pt-BR")}}catch{return{empresa:"",usuario:"",dataHora:new Date().toLocaleString("pt-BR")}}},[t?.nome,t?.fantasia,t?.razao_social,t?.razaoSocial,t?.displayName,t?.codigo_empresa,e?.nome,e?.name,e?.email]),S=v.useMemo(()=>[`[${g} - Suporte]`,`Assunto: ${c||"(sem assunto)"} `,`Categoria: ${a} `,`Severidade: ${o}`,"","Descrio:",(d||"(adicione uma descrio detalhada, passos para reproduzir, prints se possvel)")+`
`," Dados ",`Empresa: ${w.empresa}`,`Usurio: ${w.usuario}`,`Data/Hora: ${w.dataHora}`].join(`
`),[c,a,o,d,w]),j=`${y}?text=${encodeURIComponent(S)}`,A=`mailto:${p}?subject=${encodeURIComponent(`[Suporte] ${c||"Assunto"}`)}&body=${encodeURIComponent(S)}`;return s.jsxs("div",{className:"px-4 md:px-6 lg:px-8 py-4 md:py-6",children:[s.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 md:p-6 mb-6",children:[s.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4 flex-col md:flex-row",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand/10 border border-brand/30 flex items-center justify-center",children:s.jsx(zW,{className:"w-5 h-5 text-brand"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Suporte"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Precisa de ajuda? Fale com a gente ou consulte as respostas rpidas abaixo."})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-10 h-10 bg-brand rounded-xl flex items-center justify-center",children:s.jsx(Ib,{className:"w-6 h-6 text-primary-foreground"})}),s.jsxs("div",{className:"flex items-baseline",children:[s.jsx("span",{className:"font-extrabold text-base md:text-xl",style:{color:"#FF6600"},children:"Fluxo"}),s.jsx("span",{className:"font-extrabold text-base md:text-xl",style:{color:"#FFAA33"},children:"7"}),s.jsx("span",{className:"font-medium text-base md:text-xl",style:{color:"#B0B0B0"},children:" Arena"})]})]}),s.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:["Verso ",kQe]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[s.jsx(Yy,{title:"Status",icon:cce,children:s.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[s.jsx(sf,{label:"Empresa",value:w.empresa}),s.jsx(sf,{label:"Usurio",value:`${w.usuario}`})]})}),s.jsx(Yy,{title:"Fale com a gente",icon:e5,children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("a",{href:y,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-brand text-black hover:opacity-90 transition",children:[s.jsx(e5,{className:"w-4 h-4"})," WhatsApp"]}),s.jsxs("a",{href:`mailto:${p}`,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(dE,{className:"w-4 h-4"})," E-mail"]}),s.jsxs("a",{href:x,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(JR,{className:"w-4 h-4"})," ",h?b:"Telefone"]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-3",children:s.jsx(Yy,{title:"Perguntas Frequentes (FAQ)",children:s.jsxs("div",{className:"divide-y divide-border/60",children:[s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como abrir comanda de balco?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Abra o caixa antes. A tela de balco utiliza uma comanda sem mesa (mesa_id nulo). Se no existir, o sistema cria ao abrir o balco; caso o caixa esteja fechado, a abertura da comanda  bloqueada."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Por que no consigo fechar o caixa?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"O fechamento  bloqueado se houver comandas com itens em aberto (inclui balco e mesas). Finalize ou feche as comandas pendentes antes de encerrar o caixa."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como adicionar participantes no agendamento?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"No modal de agendamento, selecione um ou mais clientes. Aps salvar, o chip de pagamentos  atualizado imediatamente. Se no visualizar, recarregue os dados da agenda."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como ver o histrico completo do cliente?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Abra o cliente e utilize o Histrico Recente, que combina comandas e agendamentos em uma nica timeline com totais e status."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como ajustar estoque mnimo e ver mais vendidos?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Na aba de Produtos voc pode gerenciar estoque, preos e relatrios. Utilize filtros e exportaes para anlise."})]})]})})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"space-y-3 lg:sticky lg:top-6",children:[s.jsx(Yy,{title:"Reportar um problema",icon:oce,collapsible:!0,defaultOpen:!1,children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Categoria"}),s.jsxs("select",{value:a,onChange:P=>i(P.target.value),className:"w-full mt-1 px-2 py-2 rounded-md bg-background border border-border",children:[s.jsx("option",{children:"Agenda"}),s.jsx("option",{children:"Vendas"}),s.jsx("option",{children:"Clientes"}),s.jsx("option",{children:"Produtos"}),s.jsx("option",{children:"Financeiro"}),s.jsx("option",{children:"Outros"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Severidade"}),s.jsxs("select",{value:o,onChange:P=>l(P.target.value),className:"w-full mt-1 px-2 py-2 rounded-md bg-background border border-border",children:[s.jsx("option",{children:"Baixa"}),s.jsx("option",{children:"Mdia"}),s.jsx("option",{children:"Alta"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Assunto"}),s.jsx("input",{value:c,onChange:P=>u(P.target.value),placeholder:"Ex.: Erro ao salvar agendamento",className:"w-full mt-1 px-3 py-2 rounded-md bg-background border border-border"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Descrio"}),s.jsx("textarea",{value:d,onChange:P=>f(P.target.value),rows:4,placeholder:"Descreva o que aconteceu, passos para reproduzir, expectativa.",className:"w-full mt-1 px-3 py-2 rounded-md bg-background border border-border resize-y"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[s.jsxs("a",{href:j,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-brand text-black hover:opacity-90 transition",children:[s.jsx(e5,{className:"w-4 h-4"})," Enviar no WhatsApp"]}),s.jsxs("a",{href:A,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(dE,{className:"w-4 h-4"})," Enviar por E-mail"]}),s.jsxs("a",{href:x,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(JR,{className:"w-4 h-4"})," ",h?b:"Ligar agora"]})]})]})}),s.jsx(Yy,{title:"Diagnstico",icon:dce,children:s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx(sf,{label:"Empresa",value:w.empresa}),s.jsx(sf,{label:"Usurio",value:`${w.usuario}`}),s.jsx(sf,{label:"Data/Hora",value:w.dataHora}),s.jsx(sf,{label:"Canal - WhatsApp",value:"(34) 99893-6088"}),s.jsx(sf,{label:"Canal - E-mail",value:"fluxo7team@gmail.com"}),s.jsx(sf,{label:"Canal - Telefone",value:"(34) 99893-6088"})]})})]})})]})]})}var Uc=Uint8Array,gl=Uint16Array,jD=Int32Array,ND=new Uc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),CD=new Uc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Nz=new Uc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yre=function(e,t){for(var r=new gl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new jD(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},xre=yre(ND,2),TQe=xre.b,YO=xre.r;TQe[28]=258,YO[258]=28;var IQe=yre(CD,0),Cz=IQe.r,XO=new gl(32768);for(var za=0;za<32768;++za){var lf=(za&43690)>>1|(za&21845)<<1;lf=(lf&52428)>>2|(lf&13107)<<2,lf=(lf&61680)>>4|(lf&3855)<<4,XO[za]=((lf&65280)>>8|(lf&255)<<8)>>1}var Bx=function(e,t,r){for(var n=e.length,a=0,i=new gl(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new gl(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new gl(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[XO[f]>>c]=u}else for(l=new gl(n),a=0;a<n;++a)e[a]&&(l[a]=XO[o[e[a]-1]++]>>15-e[a]);return l},rp=new Uc(288);for(var za=0;za<144;++za)rp[za]=8;for(var za=144;za<256;++za)rp[za]=9;for(var za=256;za<280;++za)rp[za]=7;for(var za=280;za<288;++za)rp[za]=8;var RS=new Uc(32);for(var za=0;za<32;++za)RS[za]=5;var DQe=Bx(rp,9,0),MQe=Bx(RS,5,0),bre=function(e){return(e+7)/8|0},RQe=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new Uc(e.subarray(t,r))},Gu=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Xy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},OA=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:_re,l:0};if(a==1){var o=new Uc(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,A){return j.f-A.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var m=new gl(h+1),g=JO(r[d-1],m,0);if(g>t){var n=0,p=0,y=g-t,x=1<<y;for(i.sort(function(A,P){return m[P.s]-m[A.s]||A.f-P.f});n<a;++n){var b=i[n].s;if(m[b]>t)p+=x-(1<<g-m[b]),m[b]=t;else break}for(p>>=y;p>0;){var w=i[n].s;m[w]<t?p-=1<<t-m[w]++-1:++n}for(;n>=0&&p;--n){var S=i[n].s;m[S]==t&&(--m[S],++p)}g=t}return{t:new Uc(m),l:g}},JO=function(e,t,r){return e.s==-1?Math.max(JO(e.l,t,r+1),JO(e.r,t,r+1)):t[e.s]=r},Az=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new gl(++t),n=0,a=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Jy=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},wre=function(e,t,r){var n=r.length,a=bre(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},Pz=function(e,t,r,n,a,i,o,l,c,u,d){Gu(t,d++,r),++a[256];for(var f=OA(a,15),h=f.t,m=f.l,g=OA(i,15),p=g.t,y=g.l,x=Az(h),b=x.c,w=x.n,S=Az(p),j=S.c,A=S.n,P=new gl(19),C=0;C<b.length;++C)++P[b[C]&31];for(var C=0;C<j.length;++C)++P[j[C]&31];for(var E=OA(P,7),R=E.t,k=E.l,T=19;T>4&&!R[Nz[T-1]];--T);var I=u+5<<3,M=Jy(a,rp)+Jy(i,RS)+o,z=Jy(a,h)+Jy(i,p)+o+14+3*T+Jy(P,R)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&I<=M&&I<=z)return wre(t,d,e.subarray(c,c+u));var W,U,$,G;if(Gu(t,d,1+(z<M)),d+=2,z<M){W=Bx(h,m,0),U=h,$=Bx(p,y,0),G=p;var me=Bx(R,k,0);Gu(t,d,w-257),Gu(t,d+5,A-1),Gu(t,d+10,T-4),d+=14;for(var C=0;C<T;++C)Gu(t,d+3*C,R[Nz[C]]);d+=3*T;for(var de=[b,j],L=0;L<2;++L)for(var B=de[L],C=0;C<B.length;++C){var X=B[C]&31;Gu(t,d,me[X]),d+=R[X],X>15&&(Gu(t,d,B[C]>>5&127),d+=B[C]>>12)}}else W=DQe,U=rp,$=MQe,G=RS;for(var C=0;C<l;++C){var q=n[C];if(q>255){var X=q>>18&31;Xy(t,d,W[X+257]),d+=U[X+257],X>7&&(Gu(t,d,q>>23&31),d+=ND[X]);var Y=q&31;Xy(t,d,$[Y]),d+=G[Y],Y>3&&(Xy(t,d,q>>5&8191),d+=CD[Y])}else Xy(t,d,W[q]),d+=U[q]}return Xy(t,d,W[256]),d+U[256]},LQe=new jD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_re=new Uc(0),$Qe=function(e,t,r,n,a,i){var o=i.z||e.length,l=new Uc(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=LQe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,p=i.p||new gl(32768),y=i.h||new gl(g+1),x=Math.ceil(r/3),b=2*x,w=function(_e){return(e[_e]^e[_e+1]<<x^e[_e+2]<<b)&g},S=new jD(25e3),j=new gl(288),A=new gl(32),P=0,C=0,E=i.i||0,R=0,k=i.w||0,T=0;E+2<o;++E){var I=w(E),M=E&32767,z=y[I];if(p[M]=z,y[I]=M,k<=E){var W=o-E;if((P>7e3||R>24576)&&(W>423||!u)){d=Pz(e,c,0,S,j,A,C,R,T,E-T,d),R=P=C=0,T=E;for(var U=0;U<286;++U)j[U]=0;for(var U=0;U<30;++U)A[U]=0}var $=2,G=0,me=m,de=M-z&32767;if(W>2&&I==w(E-de))for(var L=Math.min(h,W)-1,B=Math.min(32767,E),X=Math.min(258,W);de<=B&&--me&&M!=z;){if(e[E+$]==e[E+$-de]){for(var q=0;q<X&&e[E+q]==e[E+q-de];++q);if(q>$){if($=q,G=de,q>L)break;for(var Y=Math.min(de,q-2),Z=0,U=0;U<Y;++U){var ge=E-de+U&32767,re=p[ge],Se=ge-re&32767;Se>Z&&(Z=Se,z=ge)}}}M=z,z=p[M],de+=M-z&32767}if(G){S[R++]=268435456|YO[$]<<18|Cz[G];var Ie=YO[$]&31,pe=Cz[G]&31;C+=ND[Ie]+CD[pe],++j[257+Ie],++A[pe],k=E+$,++P}else S[R++]=e[E],++j[e[E]]}}for(E=Math.max(E,k);E<o;++E)S[R++]=e[E],++j[e[E]];d=Pz(e,c,u,S,j,A,C,R,T,E-T,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=y,i.p=p,i.i=E,i.w=k)}else{for(var E=i.w||0;E<o+u;E+=65535){var Ue=E+65535;Ue>=o&&(c[d/8|0]=u,Ue=o),d=wre(c,d+1,e.subarray(E,Ue))}i.i=o}return RQe(l,0,n+bre(d)+a)},Sre=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},FQe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Uc(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return $Qe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},jre=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},BQe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Sre();a.p(t.dictionary),jre(e,2,a.d())}};function QO(e,t){t||(t={});var r=Sre();r.p(e);var n=FQe(e,t,t.dictionary?6:2,4);return BQe(n,t),jre(n,n.length-4,r.d()),n}var zQe=typeof TextDecoder<"u"&&new TextDecoder,qQe=0;try{zQe.decode(_re,{stream:!0}),qQe=1}catch{}function UQe(e){if(Array.isArray(e))return e}function WQe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function VQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ez(e,t){return UQe(e)||WQe(e,t)||b7e(e,t)||VQe()}function kz(e,t="utf8"){return new TextDecoder(t).decode(e)}const HQe=new TextEncoder;function GQe(e){return HQe.encode(e)}const KQe=1024*8,YQe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),TA={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class AD{constructor(t=KQe,r={}){aa(this,"buffer");aa(this,"byteLength");aa(this,"byteOffset");aa(this,"length");aa(this,"offset");aa(this,"lastWrittenByte");aa(this,"littleEndian");aa(this,"_data");aa(this,"_mark");aa(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof AD)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=TA[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===YQe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new TA[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new TA[r](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return kz(this.readBytes(t))}decodeText(t=1,r="utf8"){return kz(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(GQe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const XQe=4,Oz=0,Tz=1,JQe=2;function cy(e){let t=e.length;for(;--t>=0;)e[t]=0}const QQe=0,Nre=1,ZQe=2,eZe=3,tZe=258,PD=29,p1=256,pb=p1+1+PD,$g=30,ED=19,Cre=2*pb+1,xm=15,IA=16,rZe=7,kD=256,Are=16,Pre=17,Ere=18,ZO=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),x2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nZe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kre=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aZe=512,rd=new Array((pb+2)*2);cy(rd);const zx=new Array($g*2);cy(zx);const gb=new Array(aZe);cy(gb);const vb=new Array(tZe-eZe+1);cy(vb);const OD=new Array(PD);cy(OD);const LS=new Array($g);cy(LS);function DA(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let Ore,Tre,Ire;function MA(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Dre=e=>e<256?gb[e]:gb[256+(e>>>7)],yb=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Rs=(e,t,r)=>{e.bi_valid>IA-r?(e.bi_buf|=t<<e.bi_valid&65535,yb(e,e.bi_buf),e.bi_buf=t>>IA-e.bi_valid,e.bi_valid+=r-IA):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},uu=(e,t,r)=>{Rs(e,r[t*2],r[t*2+1])},Mre=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},iZe=e=>{e.bi_valid===16?(yb(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},oZe=(e,t)=>{const r=t.dyn_tree,n=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,d,f,h,m,g,p=0;for(h=0;h<=xm;h++)e.bl_count[h]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<Cre;u++)d=e.heap[u],h=r[r[d*2+1]*2+1]+1,h>c&&(h=c,p++),r[d*2+1]=h,!(d>n)&&(e.bl_count[h]++,m=0,d>=l&&(m=o[d-l]),g=r[d*2],e.opt_len+=g*(h+m),i&&(e.static_len+=g*(a[d*2+1]+m)));if(p!==0){do{for(h=c-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(h=c;h!==0;h--)for(d=e.bl_count[h];d!==0;)f=e.heap[--u],!(f>n)&&(r[f*2+1]!==h&&(e.opt_len+=(h-r[f*2+1])*r[f*2],r[f*2+1]=h),d--)}},Rre=(e,t,r)=>{const n=new Array(xm+1);let a=0,i,o;for(i=1;i<=xm;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let l=e[o*2+1];l!==0&&(e[o*2]=Mre(n[l]++,l))}},sZe=()=>{let e,t,r,n,a;const i=new Array(xm+1);for(r=0,n=0;n<PD-1;n++)for(OD[n]=r,e=0;e<1<<ZO[n];e++)vb[r++]=n;for(vb[r-1]=n,a=0,n=0;n<16;n++)for(LS[n]=a,e=0;e<1<<x2[n];e++)gb[a++]=n;for(a>>=7;n<$g;n++)for(LS[n]=a<<7,e=0;e<1<<x2[n]-7;e++)gb[256+a++]=n;for(t=0;t<=xm;t++)i[t]=0;for(e=0;e<=143;)rd[e*2+1]=8,e++,i[8]++;for(;e<=255;)rd[e*2+1]=9,e++,i[9]++;for(;e<=279;)rd[e*2+1]=7,e++,i[7]++;for(;e<=287;)rd[e*2+1]=8,e++,i[8]++;for(Rre(rd,pb+1,i),e=0;e<$g;e++)zx[e*2+1]=5,zx[e*2]=Mre(e,5);Ore=new DA(rd,ZO,p1+1,pb,xm),Tre=new DA(zx,x2,0,$g,xm),Ire=new DA(new Array(0),nZe,0,ED,rZe)},Lre=e=>{let t;for(t=0;t<pb;t++)e.dyn_ltree[t*2]=0;for(t=0;t<$g;t++)e.dyn_dtree[t*2]=0;for(t=0;t<ED;t++)e.bl_tree[t*2]=0;e.dyn_ltree[kD*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},$re=e=>{e.bi_valid>8?yb(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Iz=(e,t,r,n)=>{const a=t*2,i=r*2;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},RA=(e,t,r)=>{const n=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Iz(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Iz(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},Dz=(e,t,r)=>{let n,a,i=0,o,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+i++]&255,n+=(e.pending_buf[e.sym_buf+i++]&255)<<8,a=e.pending_buf[e.sym_buf+i++],n===0?uu(e,a,t):(o=vb[a],uu(e,o+p1+1,t),l=ZO[o],l!==0&&(a-=OD[o],Rs(e,a,l)),n--,o=Dre(n),uu(e,o,r),l=x2[o],l!==0&&(n-=LS[o],Rs(e,n,l)));while(i<e.sym_next);uu(e,kD,t)},eT=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,l,c=-1,u;for(e.heap_len=0,e.heap_max=Cre,o=0;o<i;o++)r[o*2]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,a&&(e.static_len-=n[u*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)RA(e,r,o);u=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],RA(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,r[u*2]=r[o*2]+r[l*2],e.depth[u]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,r[o*2+1]=r[l*2+1]=u,e.heap[1]=u++,RA(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],oZe(e,t),Rre(r,c,e.bl_count)},Mz=(e,t,r)=>{let n,a=-1,i,o=t[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=t[(n+1)*2+1],!(++l<c&&i===o)&&(l<u?e.bl_tree[i*2]+=l:i!==0?(i!==a&&e.bl_tree[i*2]++,e.bl_tree[Are*2]++):l<=10?e.bl_tree[Pre*2]++:e.bl_tree[Ere*2]++,l=0,a=i,o===0?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},Rz=(e,t,r)=>{let n,a=-1,i,o=t[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[(n+1)*2+1],!(++l<c&&i===o)){if(l<u)do uu(e,i,e.bl_tree);while(--l!==0);else i!==0?(i!==a&&(uu(e,i,e.bl_tree),l--),uu(e,Are,e.bl_tree),Rs(e,l-3,2)):l<=10?(uu(e,Pre,e.bl_tree),Rs(e,l-3,3)):(uu(e,Ere,e.bl_tree),Rs(e,l-11,7));l=0,a=i,o===0?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}},lZe=e=>{let t;for(Mz(e,e.dyn_ltree,e.l_desc.max_code),Mz(e,e.dyn_dtree,e.d_desc.max_code),eT(e,e.bl_desc),t=ED-1;t>=3&&e.bl_tree[kre[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},cZe=(e,t,r,n)=>{let a;for(Rs(e,t-257,5),Rs(e,r-1,5),Rs(e,n-4,4),a=0;a<n;a++)Rs(e,e.bl_tree[kre[a]*2+1],3);Rz(e,e.dyn_ltree,t-1),Rz(e,e.dyn_dtree,r-1)},uZe=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Oz;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Tz;for(r=32;r<p1;r++)if(e.dyn_ltree[r*2]!==0)return Tz;return Oz};let Lz=!1;const dZe=e=>{Lz||(sZe(),Lz=!0),e.l_desc=new MA(e.dyn_ltree,Ore),e.d_desc=new MA(e.dyn_dtree,Tre),e.bl_desc=new MA(e.bl_tree,Ire),e.bi_buf=0,e.bi_valid=0,Lre(e)},Fre=(e,t,r,n)=>{Rs(e,(QQe<<1)+(n?1:0),3),$re(e),yb(e,r),yb(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},fZe=e=>{Rs(e,Nre<<1,3),uu(e,kD,rd),iZe(e)},hZe=(e,t,r,n)=>{let a,i,o=0;e.level>0?(e.strm.data_type===JQe&&(e.strm.data_type=uZe(e)),eT(e,e.l_desc),eT(e,e.d_desc),o=lZe(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=r+5,r+4<=a&&t!==-1?Fre(e,t,r,n):e.strategy===XQe||i===a?(Rs(e,(Nre<<1)+(n?1:0),3),Dz(e,rd,zx)):(Rs(e,(ZQe<<1)+(n?1:0),3),cZe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Dz(e,e.dyn_ltree,e.dyn_dtree)),Lre(e),n&&$re(e)},mZe=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(vb[r]+p1+1)*2]++,e.dyn_dtree[Dre(t)*2]++),e.sym_next===e.sym_end);var pZe=dZe,gZe=Fre,vZe=hZe,yZe=mZe,xZe=fZe,bZe={_tr_init:pZe,_tr_stored_block:gZe,_tr_flush_block:vZe,_tr_tally:yZe,_tr_align:xZe};const wZe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var xb=wZe;const _Ze=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},SZe=new Uint32Array(_Ze()),jZe=(e,t,r,n)=>{const a=SZe,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var oo=jZe,Ov={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},g1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:NZe,_tr_stored_block:tT,_tr_flush_block:CZe,_tr_tally:Xf,_tr_align:AZe}=bZe,{Z_NO_FLUSH:Jf,Z_PARTIAL_FLUSH:PZe,Z_FULL_FLUSH:EZe,Z_FINISH:Hl,Z_BLOCK:$z,Z_OK:Co,Z_STREAM_END:Fz,Z_STREAM_ERROR:Cu,Z_DATA_ERROR:kZe,Z_BUF_ERROR:LA,Z_DEFAULT_COMPRESSION:OZe,Z_FILTERED:TZe,Z_HUFFMAN_ONLY:Mw,Z_RLE:IZe,Z_FIXED:DZe,Z_DEFAULT_STRATEGY:MZe,Z_UNKNOWN:RZe,Z_DEFLATED:aC}=g1,LZe=9,$Ze=15,FZe=8,BZe=29,zZe=256,rT=zZe+1+BZe,qZe=30,UZe=19,WZe=2*rT+1,VZe=15,Rn=3,Tf=258,Au=Tf+Rn+1,HZe=32,Tv=42,TD=57,nT=69,aT=73,iT=91,oT=103,bm=113,cx=666,ys=1,uy=2,np=3,dy=4,GZe=3,wm=(e,t)=>(e.msg=Ov[t],t),Bz=e=>e*2-(e>4?9:0),Sf=e=>{let t=e.length;for(;--t>=0;)e[t]=0},KZe=e=>{let t,r,n,a=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t);t=a,n=t;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)};let YZe=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,Qf=YZe;const ol=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},vl=(e,t)=>{CZe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ol(e.strm)},Gn=(e,t)=>{e.pending_buf[e.pending++]=t},Qy=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},sT=(e,t,r,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),e.state.wrap===1?e.adler=xb(e.adler,t,a,r):e.state.wrap===2&&(e.adler=oo(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},Bre=(e,t)=>{let r=e.max_chain_length,n=e.strstart,a,i,o=e.prev_length,l=e.nice_match;const c=e.strstart>e.w_size-Au?e.strstart-(e.w_size-Au):0,u=e.window,d=e.w_mask,f=e.prev,h=e.strstart+Tf;let m=u[n+o-1],g=u[n+o];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(a=t,!(u[a+o]!==g||u[a+o-1]!==m||u[a]!==u[n]||u[++a]!==u[n+1])){n+=2,a++;do;while(u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&n<h);if(i=Tf-(h-n),n=h-Tf,i>o){if(e.match_start=t,o=i,i>=l)break;m=u[n+o-1],g=u[n+o]}}while((t=f[t&d])>c&&--r!==0);return o<=e.lookahead?o:e.lookahead},Iv=e=>{const t=e.w_size;let r,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Au)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),KZe(e),n+=t),e.strm.avail_in===0)break;if(r=sT(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Rn)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=Qf(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=Qf(e,e.ins_h,e.window[a+Rn-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Rn)););}while(e.lookahead<Au&&e.strm.avail_in!==0)},zre=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,i,o=0,l=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&t!==Hl||t===Jf||n!==a+e.strm.avail_in)))break;o=t===Hl&&n===a+e.strm.avail_in?1:0,tT(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ol(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(sT(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(o===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?dy:t!==Jf&&t!==Hl&&e.strm.avail_in===0&&e.strstart===e.block_start?uy:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(sT(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,r=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=r||(a||t===Hl)&&t!==Jf&&e.strm.avail_in===0&&a<=i)&&(n=a>i?i:a,o=t===Hl&&e.strm.avail_in===0&&n===a?1:0,tT(e,e.block_start,n,o),e.block_start+=n,ol(e.strm)),o?np:ys)},$A=(e,t)=>{let r,n;for(;;){if(e.lookahead<Au){if(Iv(e),e.lookahead<Au&&t===Jf)return ys;if(e.lookahead===0)break}if(r=0,e.lookahead>=Rn&&(e.ins_h=Qf(e,e.ins_h,e.window[e.strstart+Rn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Au&&(e.match_length=Bre(e,r)),e.match_length>=Rn)if(n=Xf(e,e.strstart-e.match_start,e.match_length-Rn),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Rn){e.match_length--;do e.strstart++,e.ins_h=Qf(e,e.ins_h,e.window[e.strstart+Rn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Qf(e,e.ins_h,e.window[e.strstart+1]);else n=Xf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(vl(e,!1),e.strm.avail_out===0))return ys}return e.insert=e.strstart<Rn-1?e.strstart:Rn-1,t===Hl?(vl(e,!0),e.strm.avail_out===0?np:dy):e.sym_next&&(vl(e,!1),e.strm.avail_out===0)?ys:uy},Bp=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<Au){if(Iv(e),e.lookahead<Au&&t===Jf)return ys;if(e.lookahead===0)break}if(r=0,e.lookahead>=Rn&&(e.ins_h=Qf(e,e.ins_h,e.window[e.strstart+Rn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Rn-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Au&&(e.match_length=Bre(e,r),e.match_length<=5&&(e.strategy===TZe||e.match_length===Rn&&e.strstart-e.match_start>4096)&&(e.match_length=Rn-1)),e.prev_length>=Rn&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Rn,n=Xf(e,e.strstart-1-e.prev_match,e.prev_length-Rn),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=Qf(e,e.ins_h,e.window[e.strstart+Rn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Rn-1,e.strstart++,n&&(vl(e,!1),e.strm.avail_out===0))return ys}else if(e.match_available){if(n=Xf(e,0,e.window[e.strstart-1]),n&&vl(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ys}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Xf(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Rn-1?e.strstart:Rn-1,t===Hl?(vl(e,!0),e.strm.avail_out===0?np:dy):e.sym_next&&(vl(e,!1),e.strm.avail_out===0)?ys:uy},XZe=(e,t)=>{let r,n,a,i;const o=e.window;for(;;){if(e.lookahead<=Tf){if(Iv(e),e.lookahead<=Tf&&t===Jf)return ys;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Rn&&e.strstart>0&&(a=e.strstart-1,n=o[a],n===o[++a]&&n===o[++a]&&n===o[++a])){i=e.strstart+Tf;do;while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);e.match_length=Tf-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Rn?(r=Xf(e,1,e.match_length-Rn),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Xf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(vl(e,!1),e.strm.avail_out===0))return ys}return e.insert=0,t===Hl?(vl(e,!0),e.strm.avail_out===0?np:dy):e.sym_next&&(vl(e,!1),e.strm.avail_out===0)?ys:uy},JZe=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(Iv(e),e.lookahead===0)){if(t===Jf)return ys;break}if(e.match_length=0,r=Xf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(vl(e,!1),e.strm.avail_out===0))return ys}return e.insert=0,t===Hl?(vl(e,!0),e.strm.avail_out===0?np:dy):e.sym_next&&(vl(e,!1),e.strm.avail_out===0)?ys:uy};function tu(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}const ux=[new tu(0,0,0,0,zre),new tu(4,4,8,4,$A),new tu(4,5,16,8,$A),new tu(4,6,32,32,$A),new tu(4,4,16,16,Bp),new tu(8,16,32,32,Bp),new tu(8,16,128,128,Bp),new tu(8,32,128,256,Bp),new tu(32,128,258,1024,Bp),new tu(32,258,258,4096,Bp)],QZe=e=>{e.window_size=2*e.w_size,Sf(e.head),e.max_lazy_match=ux[e.level].max_lazy,e.good_match=ux[e.level].good_length,e.nice_match=ux[e.level].nice_length,e.max_chain_length=ux[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Rn-1,e.match_available=0,e.ins_h=0};function ZZe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=aC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(WZe*2),this.dyn_dtree=new Uint16Array((2*qZe+1)*2),this.bl_tree=new Uint16Array((2*UZe+1)*2),Sf(this.dyn_ltree),Sf(this.dyn_dtree),Sf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(VZe+1),this.heap=new Uint16Array(2*rT+1),Sf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*rT+1),Sf(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const v1=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Tv&&t.status!==TD&&t.status!==nT&&t.status!==aT&&t.status!==iT&&t.status!==oT&&t.status!==bm&&t.status!==cx?1:0},qre=e=>{if(v1(e))return wm(e,Cu);e.total_in=e.total_out=0,e.data_type=RZe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?TD:t.wrap?Tv:bm,e.adler=t.wrap===2?0:1,t.last_flush=-2,NZe(t),Co},Ure=e=>{const t=qre(e);return t===Co&&QZe(e.state),t},eet=(e,t)=>v1(e)||e.state.wrap!==2?Cu:(e.state.gzhead=t,Co),Wre=(e,t,r,n,a,i)=>{if(!e)return Cu;let o=1;if(t===OZe&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>LZe||r!==aC||n<8||n>15||t<0||t>9||i<0||i>DZe||n===8&&o!==1)return wm(e,Cu);n===8&&(n=9);const l=new ZZe;return e.state=l,l.strm=e,l.status=Tv,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Rn-1)/Rn),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=i,l.method=r,Ure(e)},tet=(e,t)=>Wre(e,t,aC,$Ze,FZe,MZe),ret=(e,t)=>{if(v1(e)||t>$z||t<0)return e?wm(e,Cu):Cu;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===cx&&t!==Hl)return wm(e,e.avail_out===0?LA:Cu);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(ol(e),e.avail_out===0)return r.last_flush=-1,Co}else if(e.avail_in===0&&Bz(t)<=Bz(n)&&t!==Hl)return wm(e,LA);if(r.status===cx&&e.avail_in!==0)return wm(e,LA);if(r.status===Tv&&r.wrap===0&&(r.status=bm),r.status===Tv){let a=aC+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=Mw||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,a|=i<<6,r.strstart!==0&&(a|=HZe),a+=31-a%31,Qy(r,a),r.strstart!==0&&(Qy(r,e.adler>>>16),Qy(r,e.adler&65535)),e.adler=1,r.status=bm,ol(e),r.pending!==0)return r.last_flush=-1,Co}if(r.status===TD){if(e.adler=0,Gn(r,31),Gn(r,139),Gn(r,8),r.gzhead)Gn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Gn(r,r.gzhead.time&255),Gn(r,r.gzhead.time>>8&255),Gn(r,r.gzhead.time>>16&255),Gn(r,r.gzhead.time>>24&255),Gn(r,r.level===9?2:r.strategy>=Mw||r.level<2?4:0),Gn(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Gn(r,r.gzhead.extra.length&255),Gn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=oo(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=nT;else if(Gn(r,0),Gn(r,0),Gn(r,0),Gn(r,0),Gn(r,0),Gn(r,r.level===9?2:r.strategy>=Mw||r.level<2?4:0),Gn(r,GZe),r.status=bm,ol(e),r.pending!==0)return r.last_flush=-1,Co}if(r.status===nT){if(r.gzhead.extra){let a=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=oo(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=l,ol(e),r.pending!==0)return r.last_flush=-1,Co;a=0,i-=l}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>a&&(e.adler=oo(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=aT}if(r.status===aT){if(r.gzhead.name){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=oo(e.adler,r.pending_buf,r.pending-a,a)),ol(e),r.pending!==0)return r.last_flush=-1,Co;a=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,Gn(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=oo(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=iT}if(r.status===iT){if(r.gzhead.comment){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=oo(e.adler,r.pending_buf,r.pending-a,a)),ol(e),r.pending!==0)return r.last_flush=-1,Co;a=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,Gn(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=oo(e.adler,r.pending_buf,r.pending-a,a))}r.status=oT}if(r.status===oT){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ol(e),r.pending!==0))return r.last_flush=-1,Co;Gn(r,e.adler&255),Gn(r,e.adler>>8&255),e.adler=0}if(r.status=bm,ol(e),r.pending!==0)return r.last_flush=-1,Co}if(e.avail_in!==0||r.lookahead!==0||t!==Jf&&r.status!==cx){let a=r.level===0?zre(r,t):r.strategy===Mw?JZe(r,t):r.strategy===IZe?XZe(r,t):ux[r.level].func(r,t);if((a===np||a===dy)&&(r.status=cx),a===ys||a===np)return e.avail_out===0&&(r.last_flush=-1),Co;if(a===uy&&(t===PZe?AZe(r):t!==$z&&(tT(r,0,0,!1),t===EZe&&(Sf(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ol(e),e.avail_out===0))return r.last_flush=-1,Co}return t!==Hl?Co:r.wrap<=0?Fz:(r.wrap===2?(Gn(r,e.adler&255),Gn(r,e.adler>>8&255),Gn(r,e.adler>>16&255),Gn(r,e.adler>>24&255),Gn(r,e.total_in&255),Gn(r,e.total_in>>8&255),Gn(r,e.total_in>>16&255),Gn(r,e.total_in>>24&255)):(Qy(r,e.adler>>>16),Qy(r,e.adler&65535)),ol(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Co:Fz)},net=e=>{if(v1(e))return Cu;const t=e.state.status;return e.state=null,t===bm?wm(e,kZe):Co},aet=(e,t)=>{let r=t.length;if(v1(e))return Cu;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==Tv||n.lookahead)return Cu;if(a===1&&(e.adler=xb(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){a===0&&(Sf(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}const i=e.avail_in,o=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Iv(n);n.lookahead>=Rn;){let c=n.strstart,u=n.lookahead-(Rn-1);do n.ins_h=Qf(n,n.ins_h,n.window[c+Rn-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=Rn-1,Iv(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Rn-1,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=i,n.wrap=a,Co};var iet=tet,oet=Wre,set=Ure,cet=qre,uet=eet,det=ret,fet=net,het=aet,met="pako deflate (from Nodeca project)",qx={deflateInit:iet,deflateInit2:oet,deflateReset:set,deflateResetKeep:cet,deflateSetHeader:uet,deflate:det,deflateEnd:fet,deflateSetDictionary:het,deflateInfo:met};const pet=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var get=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)pet(r,n)&&(e[n]=r[n])}}return e},vet=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let o=e[n];r.set(o,a),a+=o.length}return r},iC={assign:get,flattenChunks:vet};let Vre=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vre=!1}const bb=new Uint8Array(256);for(let e=0;e<256;e++)bb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;bb[254]=bb[254]=1;var yet=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,o=e.length,l=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const xet=(e,t)=>{if(t<65534&&e.subarray&&Vre)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var bet=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){i[a++]=o;continue}let l=bb[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return xet(i,a)},wet=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+bb[e[r]]>t?r:t},wb={string2buf:yet,buf2string:bet,utf8border:wet};function _et(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Hre=_et;const Gre=Object.prototype.toString,{Z_NO_FLUSH:jet,Z_SYNC_FLUSH:Net,Z_FULL_FLUSH:Cet,Z_FINISH:Aet,Z_OK:$S,Z_STREAM_END:Pet,Z_DEFAULT_COMPRESSION:Eet,Z_DEFAULT_STRATEGY:ket,Z_DEFLATED:Oet}=g1;function ID(e){this.options=iC.assign({level:Eet,method:Oet,chunkSize:16384,windowBits:15,memLevel:8,strategy:ket},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Hre,this.strm.avail_out=0;let r=qx.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==$S)throw new Error(Ov[r]);if(t.header&&qx.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=wb.string2buf(t.dictionary):Gre.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=qx.deflateSetDictionary(this.strm,n),r!==$S)throw new Error(Ov[r]);this._dict_set=!0}}ID.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let a,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?Aet:jet,typeof e=="string"?r.input=wb.string2buf(e):Gre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===Net||i===Cet)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=qx.deflate(r,i),a===Pet)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=qx.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===$S;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};ID.prototype.onData=function(e){this.chunks.push(e)};ID.prototype.onEnd=function(e){e===$S&&(this.result=iC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const Rw=16209,Tet=16191;var Iet=function(t,r){let n,a,i,o,l,c,u,d,f,h,m,g,p,y,x,b,w,S,j,A,P,C,E,R;const k=t.state;n=t.next_in,E=t.input,a=n+(t.avail_in-5),i=t.next_out,R=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,h=k.window,m=k.hold,g=k.bits,p=k.lencode,y=k.distcode,x=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;e:do{g<15&&(m+=E[n++]<<g,g+=8,m+=E[n++]<<g,g+=8),w=p[m&x];t:for(;;){if(S=w>>>24,m>>>=S,g-=S,S=w>>>16&255,S===0)R[i++]=w&65535;else if(S&16){j=w&65535,S&=15,S&&(g<S&&(m+=E[n++]<<g,g+=8),j+=m&(1<<S)-1,m>>>=S,g-=S),g<15&&(m+=E[n++]<<g,g+=8,m+=E[n++]<<g,g+=8),w=y[m&b];r:for(;;){if(S=w>>>24,m>>>=S,g-=S,S=w>>>16&255,S&16){if(A=w&65535,S&=15,g<S&&(m+=E[n++]<<g,g+=8,g<S&&(m+=E[n++]<<g,g+=8)),A+=m&(1<<S)-1,A>c){t.msg="invalid distance too far back",k.mode=Rw;break e}if(m>>>=S,g-=S,S=i-o,A>S){if(S=A-S,S>d&&k.sane){t.msg="invalid distance too far back",k.mode=Rw;break e}if(P=0,C=h,f===0){if(P+=u-S,S<j){j-=S;do R[i++]=h[P++];while(--S);P=i-A,C=R}}else if(f<S){if(P+=u+f-S,S-=f,S<j){j-=S;do R[i++]=h[P++];while(--S);if(P=0,f<j){S=f,j-=S;do R[i++]=h[P++];while(--S);P=i-A,C=R}}}else if(P+=f-S,S<j){j-=S;do R[i++]=h[P++];while(--S);P=i-A,C=R}for(;j>2;)R[i++]=C[P++],R[i++]=C[P++],R[i++]=C[P++],j-=3;j&&(R[i++]=C[P++],j>1&&(R[i++]=C[P++]))}else{P=i-A;do R[i++]=R[P++],R[i++]=R[P++],R[i++]=R[P++],j-=3;while(j>2);j&&(R[i++]=R[P++],j>1&&(R[i++]=R[P++]))}}else if(S&64){t.msg="invalid distance code",k.mode=Rw;break e}else{w=y[(w&65535)+(m&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){k.mode=Tet;break e}else{t.msg="invalid literal/length code",k.mode=Rw;break e}else{w=p[(w&65535)+(m&(1<<S)-1)];continue t}break}}while(n<a&&i<l);j=g>>3,n-=j,g-=j<<3,m&=(1<<g)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<l?257+(l-i):257-(i-l),k.hold=m,k.bits=g};const zp=15,zz=852,qz=592,Uz=0,FA=1,Wz=2,Det=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Met=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ret=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Let=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$et=(e,t,r,n,a,i,o,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,m=0,g=0,p=0,y=0,x=0,b=0,w,S,j,A,P,C=null,E;const R=new Uint16Array(zp+1),k=new Uint16Array(zp+1);let T=null,I,M,z;for(u=0;u<=zp;u++)R[u]=0;for(d=0;d<n;d++)R[t[r+d]]++;for(m=c,h=zp;h>=1&&R[h]===0;h--);if(m>h&&(m=h),h===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&R[f]===0;f++);for(m<f&&(m=f),y=1,u=1;u<=zp;u++)if(y<<=1,y-=R[u],y<0)return-1;if(y>0&&(e===Uz||h!==1))return-1;for(k[1]=0,u=1;u<zp;u++)k[u+1]=k[u]+R[u];for(d=0;d<n;d++)t[r+d]!==0&&(o[k[t[r+d]]++]=d);if(e===Uz?(C=T=o,E=20):e===FA?(C=Det,T=Met,E=257):(C=Ret,T=Let,E=0),b=0,d=0,u=f,P=i,g=m,p=0,j=-1,x=1<<m,A=x-1,e===FA&&x>zz||e===Wz&&x>qz)return 1;for(;;){I=u-p,o[d]+1<E?(M=0,z=o[d]):o[d]>=E?(M=T[o[d]-E],z=C[o[d]-E]):(M=32+64,z=0),w=1<<u-p,S=1<<g,f=S;do S-=w,a[P+(b>>p)+S]=I<<24|M<<16|z|0;while(S!==0);for(w=1<<u-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,d++,--R[u]===0){if(u===h)break;u=t[r+o[d]]}if(u>m&&(b&A)!==j){for(p===0&&(p=m),P+=f,g=u-p,y=1<<g;g+p<h&&(y-=R[g+p],!(y<=0));)g++,y<<=1;if(x+=1<<g,e===FA&&x>zz||e===Wz&&x>qz)return 1;j=b&A,a[j]=m<<24|g<<16|P-i|0}}return b!==0&&(a[P+b]=u-p<<24|64<<16|0),l.bits=m,0};var Ux=$et;const Fet=0,Kre=1,Yre=2,{Z_FINISH:Vz,Z_BLOCK:Bet,Z_TREES:Lw,Z_OK:ap,Z_STREAM_END:zet,Z_NEED_DICT:qet,Z_STREAM_ERROR:ac,Z_DATA_ERROR:Xre,Z_MEM_ERROR:Jre,Z_BUF_ERROR:Uet,Z_DEFLATED:Hz}=g1,oC=16180,Gz=16181,Kz=16182,Yz=16183,Xz=16184,Jz=16185,Qz=16186,Zz=16187,eq=16188,tq=16189,FS=16190,Ku=16191,BA=16192,rq=16193,zA=16194,nq=16195,aq=16196,iq=16197,oq=16198,$w=16199,Fw=16200,sq=16201,lq=16202,cq=16203,uq=16204,dq=16205,qA=16206,fq=16207,hq=16208,Ga=16209,Qre=16210,Zre=16211,Wet=852,Vet=592,Het=15,Get=Het,mq=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Ket(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const xp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<oC||t.mode>Zre?1:0},ene=e=>{if(xp(e))return ac;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=oC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Wet),t.distcode=t.distdyn=new Int32Array(Vet),t.sane=1,t.back=-1,ap},tne=e=>{if(xp(e))return ac;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ene(e)},rne=(e,t)=>{let r;if(xp(e))return ac;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ac:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,tne(e))},nne=(e,t)=>{if(!e)return ac;const r=new Ket;e.state=r,r.strm=e,r.window=null,r.mode=oC;const n=rne(e,t);return n!==ap&&(e.state=null),n},Yet=e=>nne(e,Get);let pq=!0,UA,WA;const Xet=e=>{if(pq){UA=new Int32Array(512),WA=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ux(Kre,e.lens,0,288,UA,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ux(Yre,e.lens,0,32,WA,0,e.work,{bits:5}),pq=!1}e.lencode=UA,e.lenbits=9,e.distcode=WA,e.distbits=5},ane=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Jet=(e,t)=>{let r,n,a,i,o,l,c,u,d,f,h,m,g,p,y=0,x,b,w,S,j,A,P,C;const E=new Uint8Array(4);let R,k;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(xp(e)||!e.output||!e.input&&e.avail_in!==0)return ac;r=e.state,r.mode===Ku&&(r.mode=BA),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,f=l,h=c,C=ap;e:for(;;)switch(r.mode){case oC:if(r.wrap===0){r.mode=BA;break}for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=oo(r.check,E,2,0),u=0,d=0,r.mode=Gz;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Ga;break}if((u&15)!==Hz){e.msg="unknown compression method",r.mode=Ga;break}if(u>>>=4,d-=4,P=(u&15)+8,r.wbits===0&&(r.wbits=P),P>15||P>r.wbits){e.msg="invalid window size",r.mode=Ga;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?tq:Ku,u=0,d=0;break;case Gz:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==Hz){e.msg="unknown compression method",r.mode=Ga;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ga;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=oo(r.check,E,2,0)),u=0,d=0,r.mode=Kz;case Kz:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=oo(r.check,E,4,0)),u=0,d=0,r.mode=Yz;case Yz:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=oo(r.check,E,2,0)),u=0,d=0,r.mode=Xz;case Xz:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=oo(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=Jz;case Jz:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+m),P)),r.flags&512&&r.wrap&4&&(r.check=oo(r.check,n,m,i)),l-=m,i+=m,r.length-=m),r.length))break e;r.length=0,r.mode=Qz;case Qz:if(r.flags&2048){if(l===0)break e;m=0;do P=n[i+m++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P));while(P&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=oo(r.check,n,m,i)),l-=m,i+=m,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Zz;case Zz:if(r.flags&4096){if(l===0)break e;m=0;do P=n[i+m++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P));while(P&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=oo(r.check,n,m,i)),l-=m,i+=m,P)break e}else r.head&&(r.head.comment=null);r.mode=eq;case eq:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ga;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ku;break;case tq:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}e.adler=r.check=mq(u),u=0,d=0,r.mode=FS;case FS:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,qet;e.adler=r.check=1,r.mode=Ku;case Ku:if(t===Bet||t===Lw)break e;case BA:if(r.last){u>>>=d&7,d-=d&7,r.mode=qA;break}for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=rq;break;case 1:if(Xet(r),r.mode=$w,t===Lw){u>>>=2,d-=2;break e}break;case 2:r.mode=aq;break;case 3:e.msg="invalid block type",r.mode=Ga}u>>>=2,d-=2;break;case rq:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ga;break}if(r.length=u&65535,u=0,d=0,r.mode=zA,t===Lw)break e;case zA:r.mode=nq;case nq:if(m=r.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;a.set(n.subarray(i,i+m),o),l-=m,i+=m,c-=m,o+=m,r.length-=m;break}r.mode=Ku;break;case aq:for(;d<14;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ga;break}r.have=0,r.mode=iq;case iq:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.lens[T[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},C=Ux(Fet,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,C){e.msg="invalid code lengths set",r.mode=Ga;break}r.have=0,r.mode=oq;case oq:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[u&(1<<r.lenbits)-1],x=y>>>24,b=y>>>16&255,w=y&65535,!(x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(w<16)u>>>=x,d-=x,r.lens[r.have++]=w;else{if(w===16){for(k=x+2;d<k;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){e.msg="invalid bit length repeat",r.mode=Ga;break}P=r.lens[r.have-1],m=3+(u&3),u>>>=2,d-=2}else if(w===17){for(k=x+3;d<k;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=x,d-=x,P=0,m=3+(u&7),u>>>=3,d-=3}else{for(k=x+7;d<k;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=x,d-=x,P=0,m=11+(u&127),u>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ga;break}for(;m--;)r.lens[r.have++]=P}}if(r.mode===Ga)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ga;break}if(r.lenbits=9,R={bits:r.lenbits},C=Ux(Kre,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,C){e.msg="invalid literal/lengths set",r.mode=Ga;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},C=Ux(Yre,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,C){e.msg="invalid distances set",r.mode=Ga;break}if(r.mode=$w,t===Lw)break e;case $w:r.mode=Fw;case Fw:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,Iet(e,h),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,r.mode===Ku&&(r.back=-1);break}for(r.back=0;y=r.lencode[u&(1<<r.lenbits)-1],x=y>>>24,b=y>>>16&255,w=y&65535,!(x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(b&&!(b&240)){for(S=x,j=b,A=w;y=r.lencode[A+((u&(1<<S+j)-1)>>S)],x=y>>>24,b=y>>>16&255,w=y&65535,!(S+x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=S,d-=S,r.back+=S}if(u>>>=x,d-=x,r.back+=x,r.length=w,b===0){r.mode=dq;break}if(b&32){r.back=-1,r.mode=Ku;break}if(b&64){e.msg="invalid literal/length code",r.mode=Ga;break}r.extra=b&15,r.mode=sq;case sq:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=lq;case lq:for(;y=r.distcode[u&(1<<r.distbits)-1],x=y>>>24,b=y>>>16&255,w=y&65535,!(x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(!(b&240)){for(S=x,j=b,A=w;y=r.distcode[A+((u&(1<<S+j)-1)>>S)],x=y>>>24,b=y>>>16&255,w=y&65535,!(S+x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=S,d-=S,r.back+=S}if(u>>>=x,d-=x,r.back+=x,b&64){e.msg="invalid distance code",r.mode=Ga;break}r.offset=w,r.extra=b&15,r.mode=cq;case cq:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ga;break}r.mode=uq;case uq:if(c===0)break e;if(m=h-c,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ga;break}m>r.wnext?(m-=r.wnext,g=r.wsize-m):g=r.wnext-m,m>r.length&&(m=r.length),p=r.window}else p=a,g=o-r.offset,m=r.length;m>c&&(m=c),c-=m,r.length-=m;do a[o++]=p[g++];while(--m);r.length===0&&(r.mode=Fw);break;case dq:if(c===0)break e;a[o++]=r.length,c--,r.mode=Fw;break;case qA:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[i++]<<d,d+=8}if(h-=c,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?oo(r.check,a,h,o-h):xb(r.check,a,h,o-h)),h=c,r.wrap&4&&(r.flags?u:mq(u))!==r.check){e.msg="incorrect data check",r.mode=Ga;break}u=0,d=0}r.mode=fq;case fq:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ga;break}u=0,d=0}r.mode=hq;case hq:C=zet;break e;case Ga:C=Xre;break e;case Qre:return Jre;case Zre:default:return ac}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==e.avail_out&&r.mode<Ga&&(r.mode<qA||t!==Vz))&&ane(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?oo(r.check,a,h,e.next_out-h):xb(r.check,a,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ku?128:0)+(r.mode===$w||r.mode===zA?256:0),(f===0&&h===0||t===Vz)&&C===ap&&(C=Uet),C},Qet=e=>{if(xp(e))return ac;let t=e.state;return t.window&&(t.window=null),e.state=null,ap},Zet=(e,t)=>{if(xp(e))return ac;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,ap):ac},ett=(e,t)=>{const r=t.length;let n,a,i;return xp(e)||(n=e.state,n.wrap!==0&&n.mode!==FS)?ac:n.mode===FS&&(a=1,a=xb(a,t,r,0),a!==n.check)?Xre:(i=ane(e,t,r,r),i?(n.mode=Qre,Jre):(n.havedict=1,ap))};var ttt=tne,rtt=rne,ntt=ene,att=Yet,itt=nne,ott=Jet,stt=Qet,ltt=Zet,ctt=ett,utt="pako inflate (from Nodeca project)",nd={inflateReset:ttt,inflateReset2:rtt,inflateResetKeep:ntt,inflateInit:att,inflateInit2:itt,inflate:ott,inflateEnd:stt,inflateGetHeader:ltt,inflateSetDictionary:ctt,inflateInfo:utt};function dtt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ftt=dtt;const ine=Object.prototype.toString,{Z_NO_FLUSH:htt,Z_FINISH:mtt,Z_OK:_b,Z_STREAM_END:VA,Z_NEED_DICT:HA,Z_STREAM_ERROR:ptt,Z_DATA_ERROR:gq,Z_MEM_ERROR:gtt}=g1;function y1(e){this.options=iC.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Hre,this.strm.avail_out=0;let r=nd.inflateInit2(this.strm,t.windowBits);if(r!==_b)throw new Error(Ov[r]);if(this.header=new ftt,nd.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=wb.string2buf(t.dictionary):ine.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=nd.inflateSetDictionary(this.strm,t.dictionary),r!==_b)))throw new Error(Ov[r])}y1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?mtt:htt,ine.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=nd.inflate(r,o),i===HA&&a&&(i=nd.inflateSetDictionary(r,a),i===_b?i=nd.inflate(r,o):i===gq&&(i=HA));r.avail_in>0&&i===VA&&r.state.wrap>0&&e[r.next_in]!==0;)nd.inflateReset(r),i=nd.inflate(r,o);switch(i){case ptt:case gq:case HA:case gtt:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===VA))if(this.options.to==="string"){let c=wb.utf8border(r.output,r.next_out),u=r.next_out-c,d=wb.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===_b&&l===0)){if(i===VA)return i=nd.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};y1.prototype.onData=function(e){this.chunks.push(e)};y1.prototype.onEnd=function(e){e===_b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function DD(e,t){const r=new y1(t);if(r.push(e),r.err)throw r.msg||Ov[r.err];return r.result}function vtt(e,t){return t=t||{},t.raw=!0,DD(e,t)}var ytt=y1,xtt=DD,btt=vtt,wtt=DD,_tt=g1,Stt={Inflate:ytt,inflate:xtt,inflateRaw:btt,ungzip:wtt,constants:_tt};const{Inflate:jtt,inflate:Ntt,inflateRaw:Oat,ungzip:Tat}=Stt;var vq=jtt,Ctt=Ntt;const one=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;one[e]=t}const yq=4294967295;function Att(e,t,r){let n=e;for(let a=0;a<r;a++)n=one[(n^t[a])&255]^n>>>8;return n}function Ptt(e,t){return(Att(yq,e,t)^yq)>>>0}function xq(e,t,r){const n=e.readUint32(),a=Ptt(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function sne(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function lne(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function cne(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function une(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function dne(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+Ett(t[i-a],r[i],r[i-a])&255}}function Ett(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),o=Math.abs(n-r);return a<=i&&a<=o?e:i<=o?t:r}function ktt(e,t,r,n,a,i){switch(e){case 0:sne(t,r,a);break;case 1:lne(t,r,a,i);break;case 2:cne(t,r,n,a);break;case 3:une(t,r,n,a,i);break;case 4:dne(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Ott=new Uint16Array([255]),Ttt=new Uint8Array(Ott.buffer),Itt=Ttt[0]===255;function Dtt(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],h=Math.ceil((r-f.x)/f.xStep),m=Math.ceil((n-f.y)/f.yStep);if(h<=0||m<=0)continue;const g=h*l,p=new Uint8Array(g);for(let y=0;y<m;y++){const x=t[u++],b=t.subarray(u,u+g);u+=g;const w=new Uint8Array(g);ktt(x,b,w,p,g,l),p.set(w);for(let S=0;S<h;S++){const j=f.x+S*f.xStep,A=f.y+y*f.yStep;if(!(j>=r||A>=n))for(let P=0;P<l;P++)c[(A*r+j)*l+P]=w[S*l+P]}}}if(i===16){const d=new Uint16Array(c.buffer);if(Itt)for(let f=0;f<d.length;f++)d[f]=Mtt(d[f]);return d}else return c}function Mtt(e){return(e&255)<<8|e>>8&255}const Rtt=new Uint16Array([255]),Ltt=new Uint8Array(Rtt.buffer),$tt=Ltt[0]===255,Ftt=new Uint8Array(0);function bq(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(n*l);let u=Ftt,d=0,f,h;for(let m=0;m<n;m++){switch(f=t.subarray(d+1,d+1+l),h=c.subarray(m*l,(m+1)*l),t[d]){case 0:sne(f,h,l);break;case 1:lne(f,h,l,o);break;case 2:cne(f,h,u,l);break;case 3:une(f,h,u,l,o);break;case 4:dne(f,h,u,l,o);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=h,d+=l+1}if(i===16){const m=new Uint16Array(c.buffer);if($tt)for(let g=0;g<m.length;g++)m[g]=Btt(m[g]);return m}else return c}function Btt(e){return(e&255)<<8|e>>8&255}const b2=Uint8Array.of(137,80,78,71,13,10,26,10);function wq(e){if(!ztt(e.readBytes(b2.length)))throw new Error("wrong PNG signature")}function ztt(e){if(e.length<b2.length)return!1;for(let t=0;t<b2.length;t++)if(e[t]!==b2[t])return!1;return!0}const qtt="tEXt",Utt=0,fne=new TextDecoder("latin1");function Wtt(e){if(Htt(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Vtt=/^[\u0000-\u00FF]*$/;function Htt(e){if(!Vtt.test(e))throw new Error("invalid latin1 text")}function Gtt(e,t,r){const n=hne(t);e[n]=Ktt(t,r-n.length-1)}function hne(e){for(e.mark();e.readByte()!==Utt;);const t=e.offset;e.reset();const r=fne.decode(e.readBytes(t-e.offset-1));return e.skip(1),Wtt(r),r}function Ktt(e,t){return fne.decode(e.readBytes(t))}const rl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},GA={UNKNOWN:-1,DEFLATE:0},_q={UNKNOWN:-1,ADAPTIVE:0},KA={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Bw={NONE:0,BACKGROUND:1,PREVIOUS:2},YA={SOURCE:0,OVER:1};class Ytt extends AD{constructor(r,n={}){super(r);aa(this,"_checkCrc");aa(this,"_inflator");aa(this,"_png");aa(this,"_apng");aa(this,"_end");aa(this,"_hasPalette");aa(this,"_palette");aa(this,"_hasTransparency");aa(this,"_transparency");aa(this,"_compressionMethod");aa(this,"_filterMethod");aa(this,"_interlaceMethod");aa(this,"_colorType");aa(this,"_isAnimated");aa(this,"_numberOfFrames");aa(this,"_numberOfPlays");aa(this,"_frames");aa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new vq,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=GA.UNKNOWN,this._filterMethod=_q.UNKNOWN,this._interlaceMethod=KA.UNKNOWN,this._colorType=rl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(wq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(wq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case qtt:Gtt(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?xq(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?xq(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Xtt(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case rl.GREYSCALE:a=1;break;case rl.TRUECOLOUR:a=3;break;case rl.INDEXED_COLOUR:a=1;break;case rl.GREYSCALE_ALPHA:a=2;break;case rl.TRUECOLOUR_ALPHA:a=4;break;case rl.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==GA.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case rl.GREYSCALE:case rl.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case rl.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case rl.UNKNOWN:case rl.GREYSCALE_ALPHA:case rl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=hne(this),a=this.readUint8();if(a!==GA.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Ctt(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=bq({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case Bw.NONE:break;case Bw.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case Bw.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case YA.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case YA.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],m=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==_q.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===KA.NO_INTERLACE)this._png.data=bq({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===KA.ADAM7)this._png.data=Dtt({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Bw.NONE,blendOp:YA.SOURCE,data:r}),this._inflator=new vq,this._writingDataChunks=!1}}function Xtt(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var Sq;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(Sq||(Sq={}));function Jtt(e,t){return new Ytt(e,t).decode()}var Xr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function XA(){Xr.console&&typeof Xr.console.log=="function"&&Xr.console.log.apply(Xr.console,arguments)}var _a={log:XA,warn:function(e){Xr.console&&(typeof Xr.console.warn=="function"?Xr.console.warn.apply(Xr.console,arguments):XA.call(null,arguments))},error:function(e){Xr.console&&(typeof Xr.console.error=="function"?Xr.console.error.apply(Xr.console,arguments):XA(e))}};function JA(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){rm(n.response,t,r)},n.onerror=function(){_a.error("could not download file")},n.send()}function jq(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function zw(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rm=Xr.saveAs||((typeof window>"u"?"undefined":kn(window))!=="object"||window!==Xr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Xr.URL||Xr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?jq(a.href)?JA(e,t,r):zw(a,a.target="_blank"):zw(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){zw(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(jq(e))JA(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){zw(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:kn(i)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return JA(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Xr.HTMLElement)||Xr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":kn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Xr.URL||Xr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function mne(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var w2=Xr.atob.bind(Xr),Nq=Xr.btoa.bind(Xr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function QA(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=zo(r,n,a,i,t[0],7,-680876936),i=zo(i,r,n,a,t[1],12,-389564586),a=zo(a,i,r,n,t[2],17,606105819),n=zo(n,a,i,r,t[3],22,-1044525330),r=zo(r,n,a,i,t[4],7,-176418897),i=zo(i,r,n,a,t[5],12,1200080426),a=zo(a,i,r,n,t[6],17,-1473231341),n=zo(n,a,i,r,t[7],22,-45705983),r=zo(r,n,a,i,t[8],7,1770035416),i=zo(i,r,n,a,t[9],12,-1958414417),a=zo(a,i,r,n,t[10],17,-42063),n=zo(n,a,i,r,t[11],22,-1990404162),r=zo(r,n,a,i,t[12],7,1804603682),i=zo(i,r,n,a,t[13],12,-40341101),a=zo(a,i,r,n,t[14],17,-1502002290),r=qo(r,n=zo(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=qo(i,r,n,a,t[6],9,-1069501632),a=qo(a,i,r,n,t[11],14,643717713),n=qo(n,a,i,r,t[0],20,-373897302),r=qo(r,n,a,i,t[5],5,-701558691),i=qo(i,r,n,a,t[10],9,38016083),a=qo(a,i,r,n,t[15],14,-660478335),n=qo(n,a,i,r,t[4],20,-405537848),r=qo(r,n,a,i,t[9],5,568446438),i=qo(i,r,n,a,t[14],9,-1019803690),a=qo(a,i,r,n,t[3],14,-187363961),n=qo(n,a,i,r,t[8],20,1163531501),r=qo(r,n,a,i,t[13],5,-1444681467),i=qo(i,r,n,a,t[2],9,-51403784),a=qo(a,i,r,n,t[7],14,1735328473),r=Uo(r,n=qo(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Uo(i,r,n,a,t[8],11,-2022574463),a=Uo(a,i,r,n,t[11],16,1839030562),n=Uo(n,a,i,r,t[14],23,-35309556),r=Uo(r,n,a,i,t[1],4,-1530992060),i=Uo(i,r,n,a,t[4],11,1272893353),a=Uo(a,i,r,n,t[7],16,-155497632),n=Uo(n,a,i,r,t[10],23,-1094730640),r=Uo(r,n,a,i,t[13],4,681279174),i=Uo(i,r,n,a,t[0],11,-358537222),a=Uo(a,i,r,n,t[3],16,-722521979),n=Uo(n,a,i,r,t[6],23,76029189),r=Uo(r,n,a,i,t[9],4,-640364487),i=Uo(i,r,n,a,t[12],11,-421815835),a=Uo(a,i,r,n,t[15],16,530742520),r=Wo(r,n=Uo(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Wo(i,r,n,a,t[7],10,1126891415),a=Wo(a,i,r,n,t[14],15,-1416354905),n=Wo(n,a,i,r,t[5],21,-57434055),r=Wo(r,n,a,i,t[12],6,1700485571),i=Wo(i,r,n,a,t[3],10,-1894986606),a=Wo(a,i,r,n,t[10],15,-1051523),n=Wo(n,a,i,r,t[1],21,-2054922799),r=Wo(r,n,a,i,t[8],6,1873313359),i=Wo(i,r,n,a,t[15],10,-30611744),a=Wo(a,i,r,n,t[6],15,-1560198380),n=Wo(n,a,i,r,t[13],21,1309151649),r=Wo(r,n,a,i,t[4],6,-145523070),i=Wo(i,r,n,a,t[11],10,-1120210379),a=Wo(a,i,r,n,t[2],15,718787259),n=Wo(n,a,i,r,t[9],21,-343485551),e[0]=If(r,e[0]),e[1]=If(n,e[1]),e[2]=If(a,e[2]),e[3]=If(i,e[3])}function sC(e,t,r,n,a,i){return t=If(If(t,e),If(n,i)),If(t<<a|t>>>32-a,r)}function zo(e,t,r,n,a,i,o){return sC(t&r|~t&n,e,t,a,i,o)}function qo(e,t,r,n,a,i,o){return sC(t&n|r&~n,e,t,a,i,o)}function Uo(e,t,r,n,a,i,o){return sC(t^r^n,e,t,a,i,o)}function Wo(e,t,r,n,a,i,o){return sC(r^(t|~n),e,t,a,i,o)}function pne(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)QA(n,Qtt(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(QA(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,QA(n,a),n}function Qtt(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var Cq="0123456789abcdef".split("");function Ztt(e){for(var t="",r=0;r<4;r++)t+=Cq[e>>8*r+4&15]+Cq[e>>8*r&15];return t}function ert(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function lT(e){return pne(e).map(ert).join("")}var trt=function(e){for(var t=0;t<e.length;t++)e[t]=Ztt(e[t]);return e.join("")}(pne("hello"))!="5d41402abc4b2a76b9719d911017c592";function If(e,t){if(trt){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cT(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Aq={print:4,modify:8,copy:16,"annot-forms":32};function Kp(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(Aq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=Aq[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=lT(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=cT(this.encryptionKey,this.padding)}function Yp(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function Pq(e){if(kn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){Xr.console&&_a.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Sb(e){if(!(this instanceof Sb))return new Sb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function gne(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function jf(e,t,r,n,a){if(!(this instanceof jf))return new jf(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,gne.call(this,n,a)}function _m(e,t,r,n,a){if(!(this instanceof _m))return new _m(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,gne.call(this,n,a)}function Cr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",d=null;kn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=Pq;var g="1.3",p=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(O){g=O};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return y};var x=m.__private__.getPageFormat=function(O){return y[O]};a=a||"a4";var b="compat",w="advanced",S=b;function j(){this.saveGraphicsState(),ue(new He(At,0,0,-At,0,Xc()*At).toString()+" cm"),this.setFontSize(this.getFontSize()/At),u="n",S=w}function A(){this.restoreGraphicsState(),u="S",S=b}var P=m.__private__.combineFontStyleAndFontWeight=function(O,H){if(O=="bold"&&H=="normal"||O=="bold"&&H==400||O=="normal"&&H=="italic"||O=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(O=H==400||H==="normal"?O==="italic"?"italic":"normal":H!=700&&H!=="bold"||O!=="normal"?(H==700?"bold":H)+""+O:"bold"),O};m.advancedAPI=function(O){var H=S===b;return H&&j.call(this),typeof O!="function"||(O(this),H&&A.call(this)),this},m.compatAPI=function(O){var H=S===w;return H&&A.call(this),typeof O!="function"||(O(this),H&&j.call(this)),this},m.isAdvancedAPI=function(){return S===w};var C,E=function(O){if(S!==w)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(O,H){var xe=t||H;if(isNaN(O)||isNaN(xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(xe).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,c)}:c==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,16)};var k=m.f2=m.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return R(O,2)},T=m.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return R(O,3)},I=m.scale=m.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return S===b?O*At:S===w?O:void 0},M=function(O){return I(function(H){return S===b?Xc()-H:S===w?H:void 0}(O))};m.__private__.setPrecision=m.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(t=parseInt(O,10))};var z,W="00000000000000000000000000000000",U=m.__private__.getFileId=function(){return W},$=m.__private__.setFileId=function(O){return W=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(oe=new Kp(d.userPermissions,d.userPassword,d.ownerPassword,W)),W};m.setFileId=function(O){return $(O),this},m.getFileId=function(){return U()};var G=m.__private__.convertDateToPDFDate=function(O){var H=O.getTimezoneOffset(),xe=H<0?"+":"-",De=Math.floor(Math.abs(H/60)),Be=Math.abs(H%60),yt=[xe,X(De),"'",X(Be),"'"].join("");return["D:",O.getFullYear(),X(O.getMonth()+1),X(O.getDate()),X(O.getHours()),X(O.getMinutes()),X(O.getSeconds()),yt].join("")},me=m.__private__.convertPDFDateToDate=function(O){var H=parseInt(O.substr(2,4),10),xe=parseInt(O.substr(6,2),10)-1,De=parseInt(O.substr(8,2),10),Be=parseInt(O.substr(10,2),10),yt=parseInt(O.substr(12,2),10),Rt=parseInt(O.substr(14,2),10);return new Date(H,xe,De,Be,yt,Rt,0)},de=m.__private__.setCreationDate=function(O){var H;if(O===void 0&&(O=new Date),O instanceof Date)H=G(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=O}return z=H},L=m.__private__.getCreationDate=function(O){var H=z;return O==="jsDate"&&(H=me(z)),H};m.setCreationDate=function(O){return de(O),this},m.getCreationDate=function(O){return L(O)};var B,X=m.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},q=m.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},Y=0,Z=[],ge=[],re=0,Se=[],Ie=[],pe=!1,Ue=ge;m.__private__.setCustomOutputDestination=function(O){pe=!0,Ue=O};var _e=function(O){pe||(Ue=O)};m.__private__.resetCustomOutputDestination=function(){pe=!1,Ue=ge};var ue=m.__private__.out=function(O){return O=O.toString(),re+=O.length+1,Ue.push(O),Ue},Ft=m.__private__.write=function(O){return ue(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},qt=m.__private__.getArrayBuffer=function(O){for(var H=O.length,xe=new ArrayBuffer(H),De=new Uint8Array(xe);H--;)De[H]=O.charCodeAt(H);return xe},zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return zt};var it=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(O){return it=S===w?O/At:O,this};var ft,dt=m.__private__.getFontSize=m.getFontSize=function(){return S===b?it:it*At},ve=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(O){return ve=O,this},m.__private__.getR2L=m.getR2L=function(){return ve};var ut,Te=m.__private__.setZoomMode=function(O){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))ft=O;else if(isNaN(O)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');ft=O}else ft=parseInt(O,10)};m.__private__.getZoomMode=function(){return ft};var Ze,Ye=m.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');ut=O};m.__private__.getPageMode=function(){return ut};var Nt=m.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');Ze=O};m.__private__.getLayoutMode=function(){return Ze},m.__private__.setDisplayMode=m.setDisplayMode=function(O,H,xe){return Te(O),Nt(H),Ye(xe),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(O){if(Object.keys(nt).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[O]},m.__private__.getDocumentProperties=function(){return nt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(O){for(var H in nt)nt.hasOwnProperty(H)&&O[H]&&(nt[H]=O[H]);return this},m.__private__.setDocumentProperty=function(O,H){if(Object.keys(nt).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[O]=H};var mt,At,Pe,Je,Dt,qe={},lt={},Bt=[],Tt={},er={},tt={},ur={},ln=null,rn=0,fr=[],Zt=new Pq(m),Qn=e.hotfixes||[],Kn={},Ce={},We=[],He=function O(H,xe,De,Be,yt,Rt){if(!(this instanceof O))return new O(H,xe,De,Be,yt,Rt);isNaN(H)&&(H=1),isNaN(xe)&&(xe=0),isNaN(De)&&(De=0),isNaN(Be)&&(Be=1),isNaN(yt)&&(yt=0),isNaN(Rt)&&(Rt=0),this._matrix=[H,xe,De,Be,yt,Rt]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(O)},He.prototype.multiply=function(O){var H=O.sx*this.sx+O.shy*this.shx,xe=O.sx*this.shy+O.shy*this.sy,De=O.shx*this.sx+O.sy*this.shx,Be=O.shx*this.shy+O.sy*this.sy,yt=O.tx*this.sx+O.ty*this.shx+this.tx,Rt=O.tx*this.shy+O.ty*this.sy+this.ty;return new He(H,xe,De,Be,yt,Rt)},He.prototype.decompose=function(){var O=this.sx,H=this.shy,xe=this.shx,De=this.sy,Be=this.tx,yt=this.ty,Rt=Math.sqrt(O*O+H*H),vr=(O/=Rt)*xe+(H/=Rt)*De;xe-=O*vr,De-=H*vr;var mr=Math.sqrt(xe*xe+De*De);return vr/=mr,O*(De/=mr)<H*(xe/=mr)&&(O=-O,H=-H,vr=-vr,Rt=-Rt),{scale:new He(Rt,0,0,mr,0,0),translate:new He(1,0,0,1,Be,yt),rotate:new He(O,H,-H,O,0,0),skew:new He(1,0,vr,1,0,0)}},He.prototype.toString=function(O){return this.join(" ")},He.prototype.inversed=function(){var O=this.sx,H=this.shy,xe=this.shx,De=this.sy,Be=this.tx,yt=this.ty,Rt=1/(O*De-H*xe),vr=De*Rt,mr=-H*Rt,Mr=-xe*Rt,Yr=O*Rt;return new He(vr,mr,Mr,Yr,-vr*Be-Mr*yt,-mr*Be-Yr*yt)},He.prototype.applyToPoint=function(O){var H=O.x*this.sx+O.y*this.shx+this.tx,xe=O.x*this.shy+O.y*this.sy+this.ty;return new li(H,xe)},He.prototype.applyToRectangle=function(O){var H=this.applyToPoint(O),xe=this.applyToPoint(new li(O.x+O.w,O.y+O.h));return new Ss(H.x,H.y,xe.x-H.x,xe.y-H.y)},He.prototype.clone=function(){var O=this.sx,H=this.shy,xe=this.shx,De=this.sy,Be=this.tx,yt=this.ty;return new He(O,H,xe,De,Be,yt)},m.Matrix=He;var xt=m.matrixMult=function(O,H){return H.multiply(O)},at=new He(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=at;var st=function(O,H){if(!er[O]){var xe=(H instanceof jf?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);H.id=xe,er[O]=xe,Tt[xe]=H,Zt.publish("addPattern",H)}};m.ShadingPattern=jf,m.TilingPattern=_m,m.addShadingPattern=function(O,H){return E("addShadingPattern()"),st(O,H),this},m.beginTilingPattern=function(O){E("beginTilingPattern()"),Do(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},m.endTilingPattern=function(O,H){E("endTilingPattern()"),H.stream=Ie[B].join(`
`),st(O,H),Zt.publish("endTilingPattern",H),We.pop().restore()};var Mt,wt=m.__private__.newObject=function(){var O=Vt();return Qt(O,!0),O},Vt=m.__private__.newObjectDeferred=function(){return Y++,Z[Y]=function(){return re},Y},Qt=function(O,H){return H=typeof H=="boolean"&&H,Z[O]=re,H&&ue(O+" 0 obj"),O},nr=m.__private__.newAdditionalObject=function(){var O={objId:Vt(),content:""};return Se.push(O),O},Ar=Vt(),cn=Vt(),On=m.__private__.decodeColorString=function(O){var H=O.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var xe=parseFloat(H[0]);H=[xe,xe,xe,"r"]}for(var De="#",Be=0;Be<3;Be++)De+=("0"+Math.floor(255*parseFloat(H[Be])).toString(16)).slice(-2);return De},ca=m.__private__.encodeColorString=function(O){var H;typeof O=="string"&&(O={ch1:O});var xe=O.ch1,De=O.ch2,Be=O.ch3,yt=O.ch4,Rt=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof xe=="string"&&xe.charAt(0)!=="#"){var vr=new mne(xe);if(vr.ok)xe=vr.toHex();else if(!/^\d*\.?\d*$/.test(xe))throw new Error('Invalid color "'+xe+'" passed to jsPDF.encodeColorString.')}if(typeof xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(xe)&&(xe="#"+xe[1]+xe[1]+xe[2]+xe[2]+xe[3]+xe[3]),typeof xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xe)){var mr=parseInt(xe.substr(1),16);xe=mr>>16&255,De=mr>>8&255,Be=255&mr}if(De===void 0||yt===void 0&&xe===De&&De===Be)H=typeof xe=="string"?xe+" "+Rt[0]:O.precision===2?k(xe/255)+" "+Rt[0]:T(xe/255)+" "+Rt[0];else if(yt===void 0||kn(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return["1.","1.","1.",Rt[1]].join(" ");H=typeof xe=="string"?[xe,De,Be,Rt[1]].join(" "):O.precision===2?[k(xe/255),k(De/255),k(Be/255),Rt[1]].join(" "):[T(xe/255),T(De/255),T(Be/255),Rt[1]].join(" ")}else H=typeof xe=="string"?[xe,De,Be,yt,Rt[2]].join(" "):O.precision===2?[k(xe),k(De),k(Be),k(yt),Rt[2]].join(" "):[T(xe),T(De),T(Be),T(yt),Rt[2]].join(" ");return H},Yn=m.__private__.getFilters=function(){return o},oi=m.__private__.putStream=function(O){var H=(O=O||{}).data||"",xe=O.filters||Yn(),De=O.alreadyAppliedFilters||[],Be=O.addLength1||!1,yt=H.length,Rt=O.objectId,vr=function(Ma){return Ma};if(d!==null&&Rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(vr=oe.encryptor(Rt,0));var mr={};xe===!0&&(xe=["FlateEncode"]);var Mr=O.additionalKeyValues||[],Yr=(mr=Cr.API.processDataByFilters!==void 0?Cr.API.processDataByFilters(H,xe):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(De)?De.join(" "):De.toString());if(mr.data.length!==0&&(Mr.push({key:"Length",value:mr.data.length}),Be===!0&&Mr.push({key:"Length1",value:yt})),Yr.length!=0)if(Yr.split("/").length-1==1)Mr.push({key:"Filter",value:Yr});else{Mr.push({key:"Filter",value:"["+Yr+"]"});for(var Pn=0;Pn<Mr.length;Pn+=1)if(Mr[Pn].key==="DecodeParms"){for(var ea=[],ya=0;ya<mr.reverseChain.split("/").length-1;ya+=1)ea.push("null");ea.push(Mr[Pn].value),Mr[Pn].value="["+ea.join(" ")+"]"}}ue("<<");for(var wn=0;wn<Mr.length;wn++)ue("/"+Mr[wn].key+" "+Mr[wn].value);ue(">>"),mr.data.length!==0&&(ue("stream"),ue(vr(mr.data)),ue("endstream"))},An=m.__private__.putPage=function(O){var H=O.number,xe=O.data,De=O.objId,Be=O.contentsObjId;Qt(De,!0),ue("<</Type /Page"),ue("/Parent "+O.rootDictionaryObjId+" 0 R"),ue("/Resources "+O.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(C(O.mediaBox.bottomLeftX))+" "+parseFloat(C(O.mediaBox.bottomLeftY))+" "+C(O.mediaBox.topRightX)+" "+C(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&ue("/CropBox ["+C(O.cropBox.bottomLeftX)+" "+C(O.cropBox.bottomLeftY)+" "+C(O.cropBox.topRightX)+" "+C(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&ue("/BleedBox ["+C(O.bleedBox.bottomLeftX)+" "+C(O.bleedBox.bottomLeftY)+" "+C(O.bleedBox.topRightX)+" "+C(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&ue("/TrimBox ["+C(O.trimBox.bottomLeftX)+" "+C(O.trimBox.bottomLeftY)+" "+C(O.trimBox.topRightX)+" "+C(O.trimBox.topRightY)+"]"),O.artBox!==null&&ue("/ArtBox ["+C(O.artBox.bottomLeftX)+" "+C(O.artBox.bottomLeftY)+" "+C(O.artBox.topRightX)+" "+C(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&ue("/UserUnit "+O.userUnit),Zt.publish("putPage",{objId:De,pageContext:fr[H],pageNumber:H,page:xe}),ue("/Contents "+Be+" 0 R"),ue(">>"),ue("endobj");var yt=xe.join(`
`);return S===w&&(yt+=`
Q`),Qt(Be,!0),oi({data:yt,filters:Yn(),objectId:Be}),ue("endobj"),De},ua=m.__private__.putPages=function(){var O,H,xe=[];for(O=1;O<=rn;O++)fr[O].objId=Vt(),fr[O].contentsObjId=Vt();for(O=1;O<=rn;O++)xe.push(An({number:O,data:Ie[O],objId:fr[O].objId,contentsObjId:fr[O].contentsObjId,mediaBox:fr[O].mediaBox,cropBox:fr[O].cropBox,bleedBox:fr[O].bleedBox,trimBox:fr[O].trimBox,artBox:fr[O].artBox,userUnit:fr[O].userUnit,rootDictionaryObjId:Ar,resourceDictionaryObjId:cn}));Qt(Ar,!0),ue("<</Type /Pages");var De="/Kids [";for(H=0;H<rn;H++)De+=xe[H]+" 0 R ";ue(De+"]"),ue("/Count "+rn),ue(">>"),ue("endobj"),Zt.publish("postPutPages")},Ni=function(O){Zt.publish("putFont",{font:O,out:ue,newObject:wt,putStream:oi}),O.isAlreadyPutted!==!0&&(O.objectNumber=wt(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Yp(O.postScriptName)),ue("/Subtype /Type1"),typeof O.encoding=="string"&&ue("/Encoding /"+O.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},ei=function(O){O.objectNumber=wt();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[C(O.x),C(O.y),C(O.x+O.width),C(O.y+O.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var xe=O.pages[1].join(`
`);oi({data:xe,additionalKeyValues:H,objectId:O.objectNumber}),ue("endobj")},da=function(O,H){H||(H=21);var xe=wt(),De=function(Rt,vr){var mr,Mr=[],Yr=1/(vr-1);for(mr=0;mr<1;mr+=Yr)Mr.push(mr);if(Mr.push(1),Rt[0].offset!=0){var Pn={offset:0,color:Rt[0].color};Rt.unshift(Pn)}if(Rt[Rt.length-1].offset!=1){var ea={offset:1,color:Rt[Rt.length-1].color};Rt.push(ea)}for(var ya="",wn=0,Ma=0;Ma<Mr.length;Ma++){for(mr=Mr[Ma];mr>Rt[wn+1].offset;)wn++;var Wa=Rt[wn].offset,Va=(mr-Wa)/(Rt[wn+1].offset-Wa),Ns=Rt[wn].color,xo=Rt[wn+1].color;ya+=q(Math.round((1-Va)*Ns[0]+Va*xo[0]).toString(16))+q(Math.round((1-Va)*Ns[1]+Va*xo[1]).toString(16))+q(Math.round((1-Va)*Ns[2]+Va*xo[2]).toString(16))}return ya.trim()}(O.colors,H),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+H+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oi({data:De,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:xe}),ue("endobj"),O.objectNumber=wt(),ue("<< /ShadingType "+O.type),ue("/ColorSpace /DeviceRGB");var yt="/Coords ["+C(parseFloat(O.coords[0]))+" "+C(parseFloat(O.coords[1]))+" ";O.type===2?yt+=C(parseFloat(O.coords[2]))+" "+C(parseFloat(O.coords[3])):yt+=C(parseFloat(O.coords[2]))+" "+C(parseFloat(O.coords[3]))+" "+C(parseFloat(O.coords[4]))+" "+C(parseFloat(O.coords[5])),ue(yt+="]"),O.matrix&&ue("/Matrix ["+O.matrix.toString()+"]"),ue("/Function "+xe+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},Ia=function(O,H){var xe=Vt(),De=wt();H.push({resourcesOid:xe,objectOid:De}),O.objectNumber=De;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+O.boundingBox.map(C).join(" ")+"]"}),Be.push({key:"XStep",value:C(O.xStep)}),Be.push({key:"YStep",value:C(O.yStep)}),Be.push({key:"Resources",value:xe+" 0 R"}),O.matrix&&Be.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),oi({data:O.stream,additionalKeyValues:Be,objectId:O.objectNumber}),ue("endobj")},si=function(O){for(var H in O.objectNumber=wt(),ue("<<"),O)switch(H){case"opacity":ue("/ca "+k(O[H]));break;case"stroke-opacity":ue("/CA "+k(O[H]))}ue(">>"),ue("endobj")},Xn=function(O){Qt(O.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var H in ue("/Font <<"),qe)qe.hasOwnProperty(H)&&(f===!1||f===!0&&h.hasOwnProperty(H))&&ue("/"+H+" "+qe[H].objectNumber+" 0 R");ue(">>")}(),function(){if(Object.keys(Tt).length>0){for(var H in ue("/Shading <<"),Tt)Tt.hasOwnProperty(H)&&Tt[H]instanceof jf&&Tt[H].objectNumber>=0&&ue("/"+H+" "+Tt[H].objectNumber+" 0 R");Zt.publish("putShadingPatternDict"),ue(">>")}}(),function(H){if(Object.keys(Tt).length>0){for(var xe in ue("/Pattern <<"),Tt)Tt.hasOwnProperty(xe)&&Tt[xe]instanceof m.TilingPattern&&Tt[xe].objectNumber>=0&&Tt[xe].objectNumber<H&&ue("/"+xe+" "+Tt[xe].objectNumber+" 0 R");Zt.publish("putTilingPatternDict"),ue(">>")}}(O.objectOid),function(){if(Object.keys(tt).length>0){var H;for(H in ue("/ExtGState <<"),tt)tt.hasOwnProperty(H)&&tt[H].objectNumber>=0&&ue("/"+H+" "+tt[H].objectNumber+" 0 R");Zt.publish("putGStateDict"),ue(">>")}}(),function(){for(var H in ue("/XObject <<"),Kn)Kn.hasOwnProperty(H)&&Kn[H].objectNumber>=0&&ue("/"+H+" "+Kn[H].objectNumber+" 0 R");Zt.publish("putXobjectDict"),ue(">>")}(),ue(">>"),ue("endobj")},va=function(O){lt[O.fontName]=lt[O.fontName]||{},lt[O.fontName][O.fontStyle]=O.id},Ri=function(O,H,xe,De,Be){var yt={id:"F"+(Object.keys(qe).length+1).toString(10),postScriptName:O,fontName:H,fontStyle:xe,encoding:De,isStandardFont:Be||!1,metadata:{}};return Zt.publish("addFont",{font:yt,instance:this}),qe[yt.id]=yt,va(yt),yt.id},Sn=m.__private__.pdfEscape=m.pdfEscape=function(O,H){return function(xe,De){var Be,yt,Rt,vr,mr,Mr,Yr,Pn,ea;if(Rt=(De=De||{}).sourceEncoding||"Unicode",mr=De.outputEncoding,(De.autoencode||mr)&&qe[mt].metadata&&qe[mt].metadata[Rt]&&qe[mt].metadata[Rt].encoding&&(vr=qe[mt].metadata[Rt].encoding,!mr&&qe[mt].encoding&&(mr=qe[mt].encoding),!mr&&vr.codePages&&(mr=vr.codePages[0]),typeof mr=="string"&&(mr=vr[mr]),mr)){for(Yr=!1,Mr=[],Be=0,yt=xe.length;Be<yt;Be++)(Pn=mr[xe.charCodeAt(Be)])?Mr.push(String.fromCharCode(Pn)):Mr.push(xe[Be]),Mr[Be].charCodeAt(0)>>8&&(Yr=!0);xe=Mr.join("")}for(Be=xe.length;Yr===void 0&&Be!==0;)xe.charCodeAt(Be-1)>>8&&(Yr=!0),Be--;if(!Yr)return xe;for(Mr=De.noBOM?[]:[254,255],Be=0,yt=xe.length;Be<yt;Be++){if((ea=(Pn=xe.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+xe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mr.push(ea),Mr.push(Pn-(ea<<8))}return String.fromCharCode.apply(void 0,Mr)}(O,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Io=m.__private__.beginPage=function(O){Ie[++rn]=[],fr[rn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},Ci(rn),_e(Ie[B])},Li=function(O,H){var xe,De,Be;switch(r=H||r,typeof O=="string"&&(xe=x(O.toLowerCase()),Array.isArray(xe)&&(De=xe[0],Be=xe[1])),Array.isArray(O)&&(De=O[0]*At,Be=O[1]*At),isNaN(De)&&(De=a[0],Be=a[1]),(De>14400||Be>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),De=Math.min(14400,De),Be=Math.min(14400,Be)),a=[De,Be],r.substr(0,1)){case"l":Be>De&&(a=[Be,De]);break;case"p":De>Be&&(a=[Be,De])}Io(a),Br(dr),ue(nn),jn!==0&&ue(jn+" J"),Ua!==0&&ue(Ua+" j"),Zt.publish("addPage",{pageNumber:rn})},yo=function(O){O>0&&O<=rn&&(Ie.splice(O,1),fr.splice(O,1),rn--,B>rn&&(B=rn),this.setPage(B))},Ci=function(O){O>0&&O<=rn&&(B=O)},J=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ie.length-1},Le=function(O,H,xe){var De,Be=void 0;return xe=xe||{},O=O!==void 0?O:qe[mt].fontName,H=H!==void 0?H:qe[mt].fontStyle,De=O.toLowerCase(),lt[De]!==void 0&&lt[De][H]!==void 0?Be=lt[De][H]:lt[O]!==void 0&&lt[O][H]!==void 0?Be=lt[O][H]:xe.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+O+"', '"+H+"'. Refer to getFontList() for available fonts."),Be||xe.noFallback||(Be=lt.times[H])==null&&(Be=lt.times.normal),Be},Pt=m.__private__.putInfo=function(){var O=wt(),H=function(De){return De};for(var xe in d!==null&&(H=oe.encryptor(O,0)),ue("<<"),ue("/Producer ("+Sn(H("jsPDF "+Cr.version))+")"),nt)nt.hasOwnProperty(xe)&&nt[xe]&&ue("/"+xe.substr(0,1).toUpperCase()+xe.substr(1)+" ("+Sn(H(nt[xe]))+")");ue("/CreationDate ("+Sn(H(z))+")"),ue(">>"),ue("endobj")},Yt=m.__private__.putCatalog=function(O){var H=(O=O||{}).rootDictionaryObjId||Ar;switch(wt(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+H+" 0 R"),ft||(ft="fullwidth"),ft){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var xe=""+ft;xe.substr(xe.length-1)==="%"&&(ft=parseInt(ft)/100),typeof ft=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+k(ft)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}ut&&ue("/PageMode /"+ut),Zt.publish("putCatalog"),ue(">>"),ue("endobj")},ot=m.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(Y+1)),ue("/Root "+Y+" 0 R"),ue("/Info "+(Y-1)+" 0 R"),d!==null&&ue("/Encrypt "+oe.oid+" 0 R"),ue("/ID [ <"+W+"> <"+W+"> ]"),ue(">>")},Lt=m.__private__.putHeader=function(){ue("%PDF-"+g),ue("%")},ir=m.__private__.putXRef=function(){var O="0000000000";ue("xref"),ue("0 "+(Y+1)),ue("0000000000 65535 f ");for(var H=1;H<=Y;H++)typeof Z[H]=="function"?ue((O+Z[H]()).slice(-10)+" 00000 n "):Z[H]!==void 0?ue((O+Z[H]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},te=m.__private__.buildDocument=function(){var O;Y=0,re=0,ge=[],Z=[],Se=[],Ar=Vt(),cn=Vt(),_e(ge),Zt.publish("buildDocument"),Lt(),ua(),function(){Zt.publish("putAdditionalObjects");for(var xe=0;xe<Se.length;xe++){var De=Se[xe];Qt(De.objId,!0),ue(De.content),ue("endobj")}Zt.publish("postPutAdditionalObjects")}(),O=[],function(){for(var xe in qe)qe.hasOwnProperty(xe)&&(f===!1||f===!0&&h.hasOwnProperty(xe))&&Ni(qe[xe])}(),function(){var xe;for(xe in tt)tt.hasOwnProperty(xe)&&si(tt[xe])}(),function(){for(var xe in Kn)Kn.hasOwnProperty(xe)&&ei(Kn[xe])}(),function(xe){var De;for(De in Tt)Tt.hasOwnProperty(De)&&(Tt[De]instanceof jf?da(Tt[De]):Tt[De]instanceof _m&&Ia(Tt[De],xe))}(O),Zt.publish("putResources"),O.forEach(Xn),Xn({resourcesOid:cn,objectOid:Number.MAX_SAFE_INTEGER}),Zt.publish("postPutResources"),d!==null&&(oe.oid=wt(),ue("<<"),ue("/Filter /Standard"),ue("/V "+oe.v),ue("/R "+oe.r),ue("/U <"+oe.toHexString(oe.U)+">"),ue("/O <"+oe.toHexString(oe.O)+">"),ue("/P "+oe.P),ue(">>"),ue("endobj")),Pt(),Yt();var H=re;return ir(),ot(),ue("startxref"),ue(""+H),ue("%%EOF"),_e(Ie[B]),ge.join(`
`)},Ne=m.__private__.getBlob=function(O){return new Blob([qt(O)],{type:"application/pdf"})},V=m.output=m.__private__.output=(Mt=function(O,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",O){case void 0:return te();case"save":m.save(H.filename);break;case"arraybuffer":return qt(te());case"blob":return Ne(te());case"bloburi":case"bloburl":if(Xr.URL!==void 0&&typeof Xr.URL.createObjectURL=="function")return Xr.URL&&Xr.URL.createObjectURL(Ne(te()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var xe="",De=te();try{xe=Nq(De)}catch{xe=Nq(unescape(encodeURIComponent(De)))}return"data:application/pdf;filename="+H.filename+";base64,"+xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xr)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Be=H.pdfObjectUrl,yt="");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",vr=Xr.open();return vr!==null&&vr.document.write(Rt),vr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xr)==="[object Window]"){var mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Mr=Xr.open();if(Mr!==null){Mr.document.write(mr);var Yr=this;Mr.document.documentElement.querySelector("#pdfViewer").onload=function(){Mr.document.title=H.filename,Mr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Yr.output("bloburl"))}}return Mr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',ea=Xr.open();if(ea!==null&&(ea.document.write(Pn),ea.document.title=H.filename),ea||typeof safari>"u")return ea;break;case"datauri":case"dataurl":return Xr.document.location.href=this.output("datauristring",H);default:return null}},Mt.foo=function(){try{return Mt.apply(this,arguments)}catch(xe){var O=xe.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var H="Error in function "+O.split(`
`)[0].split("<")[0]+": "+xe.message;if(!Xr.console)throw new Error(H);Xr.console.error(H,xe),Xr.alert&&alert(H)}},Mt.foo.bar=Mt,Mt.foo),ee=function(O){return Array.isArray(Qn)===!0&&Qn.indexOf(O)>-1};switch(n){case"pt":At=1;break;case"mm":At=72/25.4;break;case"cm":At=72/2.54;break;case"in":At=72;break;case"px":At=ee("px_scaling")==1?.75:96/72;break;case"pc":case"em":At=12;break;case"ex":At=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);At=n}var oe=null;de(),$();var ye=m.__private__.getPageInfo=m.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fr[O].objId,pageNumber:O,pageContext:fr[O]}},ke=m.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in fr)if(fr[H].objId===O)break;return ye(H)},Me=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:fr[B].objId,pageNumber:B,pageContext:fr[B]}};m.addPage=function(){return Li.apply(this,arguments),this},m.setPage=function(){return Ci.apply(this,arguments),_e.call(this,Ie[B]),this},m.insertPage=function(O){return this.addPage(),this.movePage(B,O),this},m.movePage=function(O,H){var xe,De;if(O>H){xe=Ie[O],De=fr[O];for(var Be=O;Be>H;Be--)Ie[Be]=Ie[Be-1],fr[Be]=fr[Be-1];Ie[H]=xe,fr[H]=De,this.setPage(H)}else if(O<H){xe=Ie[O],De=fr[O];for(var yt=O;yt<H;yt++)Ie[yt]=Ie[yt+1],fr[yt]=fr[yt+1];Ie[H]=xe,fr[H]=De,this.setPage(H)}return this},m.deletePage=function(){return yo.apply(this,arguments),this},m.__private__.text=m.text=function(O,H,xe,De,Be){var yt,Rt,vr,mr,Mr,Yr,Pn,ea,ya,wn=(De=De||{}).scope||this;if(typeof O=="number"&&typeof H=="number"&&(typeof xe=="string"||Array.isArray(xe))){var Ma=xe;xe=H,H=O,O=Ma}if(arguments[3]instanceof He==0?(vr=arguments[4],mr=arguments[5],kn(Pn=arguments[3])==="object"&&Pn!==null||(typeof vr=="string"&&(mr=vr,vr=null),typeof Pn=="string"&&(mr=Pn,Pn=null),typeof Pn=="number"&&(vr=Pn,Pn=null),De={flags:Pn,angle:vr,align:mr})):(E("The transform parameter of text() with a Matrix value"),ya=Be),isNaN(H)||isNaN(xe)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return wn;var Wa,Va="",Ns=typeof De.lineHeightFactor=="number"?De.lineHeightFactor:sr,xo=wn.internal.scaleFactor;function Yd(qn){return qn=qn.split("	").join(Array(De.TabLen||9).join(" ")),Sn(qn,Pn)}function Jc(qn){for(var ba,vi=qn.concat(),Bi=[],$u=vi.length;$u--;)typeof(ba=vi.shift())=="string"?Bi.push(ba):Array.isArray(qn)&&(ba.length===1||ba[1]===void 0&&ba[2]===void 0)?Bi.push(ba[0]):Bi.push([ba[0],ba[1],ba[2]]);return Bi}function cc(qn,ba){var vi;if(typeof qn=="string")vi=ba(qn)[0];else if(Array.isArray(qn)){for(var Bi,$u,fy=qn.concat(),wp=[],b1=fy.length;b1--;)typeof(Bi=fy.shift())=="string"?wp.push(ba(Bi)[0]):Array.isArray(Bi)&&typeof Bi[0]=="string"&&($u=ba(Bi[0],Bi[1],Bi[2]),wp.push([$u[0],$u[1],$u[2]]));vi=wp}return vi}var Mo=!1,Ru=!0;if(typeof O=="string")Mo=!0;else if(Array.isArray(O)){var Ai=O.concat();Rt=[];for(var Il,ao=Ai.length;ao--;)(typeof(Il=Ai.shift())!="string"||Array.isArray(Il)&&typeof Il[0]!="string")&&(Ru=!1);Mo=Ru}if(Mo===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Ro=it/wn.internal.scaleFactor,Qc=Ro*(Ns-1);switch(De.baseline){case"bottom":xe-=Qc;break;case"top":xe+=Ro-Qc;break;case"hanging":xe+=Ro-2*Qc;break;case"middle":xe+=Ro/2-Qc}if((Yr=De.maxWidth||0)>0&&(typeof O=="string"?O=wn.splitTextToSize(O,Yr):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(qn,ba){return qn.concat(wn.splitTextToSize(ba,Yr))},[]))),yt={text:O,x:H,y:xe,options:De,mutex:{pdfEscape:Sn,activeFontKey:mt,fonts:qe,activeFontSize:it}},Zt.publish("preProcessText",yt),O=yt.text,vr=(De=yt.options).angle,ya instanceof He==0&&vr&&typeof vr=="number"){vr*=Math.PI/180,De.rotationDirection===0&&(vr=-vr),S===w&&(vr=-vr);var Oh=Math.cos(vr),Th=Math.sin(vr);ya=new He(Oh,Th,-Th,Oh,0,0)}else vr&&vr instanceof He&&(ya=vr);S!==w||ya||(ya=at),(Mr=De.charSpace||Fi)!==void 0&&(Va+=C(I(Mr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ea=De.horizontalScale)!==void 0&&(Va+=C(100*ea)+` Tz
`),De.lang;var Ha=-1,uc=De.renderingMode!==void 0?De.renderingMode:De.stroke,Lu=wn.internal.getCurrentPageInfo().pageContext;switch(uc){case 0:case!1:case"fill":Ha=0;break;case 1:case!0:case"stroke":Ha=1;break;case 2:case"fillThenStroke":Ha=2;break;case 3:case"invisible":Ha=3;break;case 4:case"fillAndAddForClipping":Ha=4;break;case 5:case"strokeAndAddPathForClipping":Ha=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ha=6;break;case 7:case"addToPathForClipping":Ha=7}var io=Lu.usedRenderingMode!==void 0?Lu.usedRenderingMode:-1;Ha!==-1?Va+=Ha+` Tr
`:io!==-1&&(Va+=`0 Tr
`),Ha!==-1&&(Lu.usedRenderingMode=Ha),mr=De.align||"left";var ts,Lo=it*Ns,gi=wn.internal.pageSize.getWidth(),Ih=qe[mt];Mr=De.charSpace||Fi,Yr=De.maxWidth||0,Pn=Object.assign({autoencode:!0,noBOM:!0},De.flags);var Zc=[],Ks=function(qn){return wn.getStringUnitWidth(qn,{font:Ih,charSpace:Mr,fontSize:it,doKerning:!1})*it/xo};if(Object.prototype.toString.call(O)==="[object Array]"){var ne;Rt=Jc(O),mr!=="left"&&(ts=Rt.map(Ks));var Ae,je=0;if(mr==="right"){H-=ts[0],O=[],ao=Rt.length;for(var ze=0;ze<ao;ze++)ze===0?(Ae=Zn(H),ne=Kr(xe)):(Ae=I(je-ts[ze]),ne=-Lo),O.push([Rt[ze],Ae,ne]),je=ts[ze]}else if(mr==="center"){H-=ts[0]/2,O=[],ao=Rt.length;for(var Qe=0;Qe<ao;Qe++)Qe===0?(Ae=Zn(H),ne=Kr(xe)):(Ae=I((je-ts[Qe])/2),ne=-Lo),O.push([Rt[Qe],Ae,ne]),je=ts[Qe]}else if(mr==="left"){O=[],ao=Rt.length;for(var kt=0;kt<ao;kt++)O.push(Rt[kt])}else if(mr==="justify"&&Ih.encoding==="Identity-H"){O=[],ao=Rt.length,Yr=Yr!==0?Yr:gi;for(var St=0,pt=0;pt<ao;pt++)if(ne=pt===0?Kr(xe):-Lo,Ae=pt===0?Zn(H):St,pt<ao-1){var wr=I((Yr-ts[pt])/(Rt[pt].split(" ").length-1)),Nr=Rt[pt].split(" ");O.push([Nr[0]+" ",Ae,ne]),St=0;for(var Tr=1;Tr<Nr.length;Tr++){var pa=(Ks(Nr[Tr-1]+" "+Nr[Tr])-Ks(Nr[Tr]))*xo+wr;Tr==Nr.length-1?O.push([Nr[Tr],pa,0]):O.push([Nr[Tr]+" ",pa,0]),St-=pa}}else O.push([Rt[pt],Ae,ne]);O.push(["",St,0])}else{if(mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],ao=Rt.length,Yr=Yr!==0?Yr:gi,pt=0;pt<ao;pt++){ne=pt===0?Kr(xe):-Lo,Ae=pt===0?Zn(H):0;var ci=Rt[pt].split(" ").length-1,Pi=ci>0?(Yr-ts[pt])/ci:0;pt<ao-1?Zc.push(C(I(Pi))):Zc.push(0),O.push([Rt[pt],Ae,ne])}}}(typeof De.R2L=="boolean"?De.R2L:ve)===!0&&(O=cc(O,function(qn,ba,vi){return[qn.split("").reverse().join(""),ba,vi]})),yt={text:O,x:H,y:xe,options:De,mutex:{pdfEscape:Sn,activeFontKey:mt,fonts:qe,activeFontSize:it}},Zt.publish("postProcessText",yt),O=yt.text,Wa=yt.mutex.isHex||!1;var hn=qe[mt].encoding;hn!=="WinAnsiEncoding"&&hn!=="StandardEncoding"||(O=cc(O,function(qn,ba,vi){return[Yd(qn),ba,vi]})),Rt=Jc(O),O=[];for(var yr,Fn,In,xa=Array.isArray(Rt[0])?1:0,ta="",rs=function(qn,ba,vi){var Bi="";return vi instanceof He?(vi=typeof De.angle=="number"?xt(vi,new He(1,0,0,1,qn,ba)):xt(new He(1,0,0,1,qn,ba),vi),S===w&&(vi=xt(new He(1,0,0,-1,0,0),vi)),Bi=vi.join(" ")+` Tm
`):Bi=C(qn)+" "+C(ba)+` Td
`,Bi},Ys=0;Ys<Rt.length;Ys++){switch(ta="",xa){case 1:In=(Wa?"<":"(")+Rt[Ys][0]+(Wa?">":")"),yr=parseFloat(Rt[Ys][1]),Fn=parseFloat(Rt[Ys][2]);break;case 0:In=(Wa?"<":"(")+Rt[Ys]+(Wa?">":")"),yr=Zn(H),Fn=Kr(xe)}Zc!==void 0&&Zc[Ys]!==void 0&&(ta=Zc[Ys]+` Tw
`),Ys===0?O.push(ta+rs(yr,Fn,ya)+In):xa===0?O.push(ta+In):xa===1&&O.push(ta+rs(yr,Fn,ya)+In)}O=xa===0?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var Dl=`BT
/`;return Dl+=mt+" "+it+` Tf
`,Dl+=C(it*Ns)+` TL
`,Dl+=fa+`
`,Dl+=Va,Dl+=O,ue(Dl+="ET"),h[mt]=!0,wn};var ie=m.__private__.clip=m.clip=function(O){return ue(O==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ie("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ue("n"),this};var ce=m.__private__.isValidStyle=function(O){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(H=!0),H};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(O){return ce(O)&&(u=O),this};var he=m.__private__.getStyle=m.getStyle=function(O){var H=u;switch(O){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=O}return H},Ke=m.close=function(){return ue("h"),this};m.stroke=function(){return ue("S"),this},m.fill=function(O){return rt("f",O),this},m.fillEvenOdd=function(O){return rt("f*",O),this},m.fillStroke=function(O){return rt("B",O),this},m.fillStrokeEvenOdd=function(O){return rt("B*",O),this};var rt=function(O,H){kn(H)==="object"?bt(H,O):ue(O)},Ge=function(O){O===null||S===w&&O===void 0||(O=he(O),ue(O))};function $e(O,H,xe,De,Be){var yt=new _m(H||this.boundingBox,xe||this.xStep,De||this.yStep,this.gState,Be||this.matrix);yt.stream=this.stream;var Rt=O+"$$"+this.cloneIndex+++"$$";return st(Rt,yt),yt}var bt=function(O,H){var xe=er[O.key],De=Tt[xe];if(De instanceof jf)ue("q"),ue(vt(H)),De.gState&&m.setGState(De.gState),ue(O.matrix.toString()+" cm"),ue("/"+xe+" sh"),ue("Q");else if(De instanceof _m){var Be=new He(1,0,0,-1,0,Xc());O.matrix&&(Be=Be.multiply(O.matrix||at),xe=$e.call(De,O.key,O.boundingBox,O.xStep,O.yStep,Be).id),ue("q"),ue("/Pattern cs"),ue("/"+xe+" scn"),De.gState&&m.setGState(De.gState),ue(H),ue("Q")}},vt=function(O){switch(O){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ht=m.moveTo=function(O,H){return ue(C(I(O))+" "+C(M(H))+" m"),this},tr=m.lineTo=function(O,H){return ue(C(I(O))+" "+C(M(H))+" l"),this},Gt=m.curveTo=function(O,H,xe,De,Be,yt){return ue([C(I(O)),C(M(H)),C(I(xe)),C(M(De)),C(I(Be)),C(M(yt)),"c"].join(" ")),this};m.__private__.line=m.line=function(O,H,xe,De,Be){if(isNaN(O)||isNaN(H)||isNaN(xe)||isNaN(De)||!ce(Be))throw new Error("Invalid arguments passed to jsPDF.line");return S===b?this.lines([[xe-O,De-H]],O,H,[1,1],Be||"S"):this.lines([[xe-O,De-H]],O,H,[1,1]).stroke()},m.__private__.lines=m.lines=function(O,H,xe,De,Be,yt){var Rt,vr,mr,Mr,Yr,Pn,ea,ya,wn,Ma,Wa,Va;if(typeof O=="number"&&(Va=xe,xe=H,H=O,O=Va),De=De||[1,1],yt=yt||!1,isNaN(H)||isNaN(xe)||!Array.isArray(O)||!Array.isArray(De)||!ce(Be)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ht(H,xe),Rt=De[0],vr=De[1],Mr=O.length,Ma=H,Wa=xe,mr=0;mr<Mr;mr++)(Yr=O[mr]).length===2?(Ma=Yr[0]*Rt+Ma,Wa=Yr[1]*vr+Wa,tr(Ma,Wa)):(Pn=Yr[0]*Rt+Ma,ea=Yr[1]*vr+Wa,ya=Yr[2]*Rt+Ma,wn=Yr[3]*vr+Wa,Ma=Yr[4]*Rt+Ma,Wa=Yr[5]*vr+Wa,Gt(Pn,ea,ya,wn,Ma,Wa));return yt&&Ke(),Ge(Be),this},m.path=function(O){for(var H=0;H<O.length;H++){var xe=O[H],De=xe.c;switch(xe.op){case"m":ht(De[0],De[1]);break;case"l":tr(De[0],De[1]);break;case"c":Gt.apply(this,De);break;case"h":Ke()}}return this},m.__private__.rect=m.rect=function(O,H,xe,De,Be){if(isNaN(O)||isNaN(H)||isNaN(xe)||isNaN(De)||!ce(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return S===b&&(De=-De),ue([C(I(O)),C(M(H)),C(I(xe)),C(I(De)),"re"].join(" ")),Ge(Be),this},m.__private__.triangle=m.triangle=function(O,H,xe,De,Be,yt,Rt){if(isNaN(O)||isNaN(H)||isNaN(xe)||isNaN(De)||isNaN(Be)||isNaN(yt)||!ce(Rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[xe-O,De-H],[Be-xe,yt-De],[O-Be,H-yt]],O,H,[1,1],Rt,!0),this},m.__private__.roundedRect=m.roundedRect=function(O,H,xe,De,Be,yt,Rt){if(isNaN(O)||isNaN(H)||isNaN(xe)||isNaN(De)||isNaN(Be)||isNaN(yt)||!ce(Rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vr=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*xe),yt=Math.min(yt,.5*De),this.lines([[xe-2*Be,0],[Be*vr,0,Be,yt-yt*vr,Be,yt],[0,De-2*yt],[0,yt*vr,-Be*vr,yt,-Be,yt],[2*Be-xe,0],[-Be*vr,0,-Be,-yt*vr,-Be,-yt],[0,2*yt-De],[0,-yt*vr,Be*vr,-yt,Be,-yt]],O+Be,H,[1,1],Rt,!0),this},m.__private__.ellipse=m.ellipse=function(O,H,xe,De,Be){if(isNaN(O)||isNaN(H)||isNaN(xe)||isNaN(De)||!ce(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*xe,Rt=4/3*(Math.SQRT2-1)*De;return ht(O+xe,H),Gt(O+xe,H-Rt,O+yt,H-De,O,H-De),Gt(O-yt,H-De,O-xe,H-Rt,O-xe,H),Gt(O-xe,H+Rt,O-yt,H+De,O,H+De),Gt(O+yt,H+De,O+xe,H+Rt,O+xe,H),Ge(Be),this},m.__private__.circle=m.circle=function(O,H,xe,De){if(isNaN(O)||isNaN(H)||isNaN(xe)||!ce(De))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,H,xe,xe,De)},m.setFont=function(O,H,xe){return xe&&(H=P(H,xe)),mt=Le(O,H,{disableWarning:!1}),this};var ct=m.__private__.getFont=m.getFont=function(){return qe[Le.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var O,H,xe={};for(O in lt)if(lt.hasOwnProperty(O))for(H in xe[O]=[],lt[O])lt[O].hasOwnProperty(H)&&xe[O].push(H);return xe},m.addFont=function(O,H,xe,De,Be){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(xe=P(xe,De)),Ri.call(this,O,H,xe,Be=Be||"Identity-H")};var sr,dr=e.lineWidth||.200025,Ht=m.__private__.getLineWidth=m.getLineWidth=function(){return dr},Br=m.__private__.setLineWidth=m.setLineWidth=function(O){return dr=O,ue(C(I(O))+" w"),this};m.__private__.setLineDash=Cr.API.setLineDash=Cr.API.setLineDashPattern=function(O,H){if(O=O||[],H=H||0,isNaN(H)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(xe){return C(I(xe))}).join(" "),H=C(I(H)),ue("["+O+"] "+H+" d"),this};var vn=m.__private__.getLineHeight=m.getLineHeight=function(){return it*sr};m.__private__.getLineHeight=m.getLineHeight=function(){return it*sr};var Da=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(sr=O),this},It=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return sr};Da(e.lineHeight);var Zn=m.__private__.getHorizontalCoordinate=function(O){return I(O)},Kr=m.__private__.getVerticalCoordinate=function(O){return S===w?O:fr[B].mediaBox.topRightY-fr[B].mediaBox.bottomLeftY-I(O)},$i=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(O){return C(Zn(O))},kl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(O){return C(Kr(O))},nn=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return On(nn)},m.__private__.setStrokeColor=m.setDrawColor=function(O,H,xe,De){return nn=ca({ch1:O,ch2:H,ch3:xe,ch4:De,pdfColorType:"draw",precision:2}),ue(nn),this};var $n=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return On($n)},m.__private__.setFillColor=m.setFillColor=function(O,H,xe,De){return $n=ca({ch1:O,ch2:H,ch3:xe,ch4:De,pdfColorType:"fill",precision:2}),ue($n),this};var fa=e.textColor||"0 g",ha=m.__private__.getTextColor=m.getTextColor=function(){return On(fa)};m.__private__.setTextColor=m.setTextColor=function(O,H,xe,De){return fa=ca({ch1:O,ch2:H,ch3:xe,ch4:De,pdfColorType:"text",precision:3}),this};var Fi=e.charSpace,ma=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Fi||0)};m.__private__.setCharSpace=m.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fi=O,this};var jn=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(O){var H=m.CapJoinStyles[O];if(H===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jn=H,ue(H+" J"),this};var Ua=0;m.__private__.setLineJoin=m.setLineJoin=function(O){var H=m.CapJoinStyles[O];if(H===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ua=H,ue(H+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(C(I(O))+" M"),this},m.GState=Sb,m.setGState=function(O){(O=typeof O=="string"?tt[ur[O]]:Ol(null,O)).equals(ln)||(ue("/"+O.id+" gs"),ln=O)};var Ol=function(O,H){if(!O||!ur[O]){var xe=!1;for(var De in tt)if(tt.hasOwnProperty(De)&&tt[De].equals(H)){xe=!0;break}if(xe)H=tt[De];else{var Be="GS"+(Object.keys(tt).length+1).toString(10);tt[Be]=H,H.id=Be}return O&&(ur[O]=H.id),Zt.publish("addGState",H),H}};m.addGState=function(O,H){return Ol(O,H),this},m.saveGraphicsState=function(){return ue("q"),Bt.push({key:mt,size:it,color:fa}),this},m.restoreGraphicsState=function(){ue("Q");var O=Bt.pop();return mt=O.key,it=O.size,fa=O.color,ln=null,this},m.setCurrentTransformationMatrix=function(O){return ue(O.toString()+" cm"),this},m.comment=function(O){return ue("#"+O),this};var li=function(O,H){var xe=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return xe},set:function(yt){isNaN(yt)||(xe=parseFloat(yt))}});var De=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(yt){Be=yt.toString()}}),this},Ss=function(O,H,xe,De){li.call(this,O,H),this.type="rect";var Be=xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(Rt){isNaN(Rt)||(Be=parseFloat(Rt))}});var yt=De||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Rt){isNaN(Rt)||(yt=parseFloat(Rt))}}),this},Hs=function(){this.page=rn,this.currentPage=B,this.pages=Ie.slice(0),this.pagesContext=fr.slice(0),this.x=Pe,this.y=Je,this.matrix=Dt,this.width=lc(B),this.height=js(B),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Hs.prototype.restore=function(){rn=this.page,B=this.currentPage,fr=this.pagesContext,Ie=this.pages,Pe=this.x,Je=this.y,Dt=this.matrix,Tl(B,this.width),no(B,this.height),Ue=this.outputDestination};var Do=function(O,H,xe,De,Be){We.push(new Hs),rn=B=0,Ie=[],Pe=O,Je=H,Dt=Be,Io([xe,De])};for(var Tn in m.beginFormObject=function(O,H,xe,De,Be){return Do(O,H,xe,De,Be),this},m.endFormObject=function(O){return function(H){if(Ce[H])We.pop().restore();else{var xe=new Hs,De="Xo"+(Object.keys(Kn).length+1).toString(10);xe.id=De,Ce[H]=De,Kn[De]=xe,Zt.publish("addFormObject",xe),We.pop().restore()}}(O),this},m.doFormObject=function(O,H){var xe=Kn[Ce[O]];return ue("q"),ue(H.toString()+" cm"),ue("/"+xe.id+" Do"),ue("Q"),this},m.getFormObject=function(O){var H=Kn[Ce[O]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},m.save=function(O,H){return O=O||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(rm(Ne(te()),O),typeof rm.unload=="function"&&Xr.setTimeout&&setTimeout(rm.unload,911),this):new Promise(function(xe,De){try{var Be=rm(Ne(te()),O);typeof rm.unload=="function"&&Xr.setTimeout&&setTimeout(rm.unload,911),xe(Be)}catch(yt){De(yt.message)}})},Cr.API)Cr.API.hasOwnProperty(Tn)&&(Tn==="events"&&Cr.API.events.length?function(O,H){var xe,De,Be;for(Be=H.length-1;Be!==-1;Be--)xe=H[Be][0],De=H[Be][1],O.subscribe.apply(O,[xe].concat(typeof De=="function"?[De]:De))}(Zt,Cr.API.events):m[Tn]=Cr.API[Tn]);function lc(O){return fr[O].mediaBox.topRightX-fr[O].mediaBox.bottomLeftX}function Tl(O,H){fr[O].mediaBox.topRightX=H+fr[O].mediaBox.bottomLeftX}function js(O){return fr[O].mediaBox.topRightY-fr[O].mediaBox.bottomLeftY}function no(O,H){fr[O].mediaBox.topRightY=H+fr[O].mediaBox.bottomLeftY}var Kd=m.getPageWidth=function(O){return lc(O=O||B)/At},Gs=m.setPageWidth=function(O,H){Tl(O,H*At)},Xc=m.getPageHeight=function(O){return js(O=O||B)/At},kh=m.setPageHeight=function(O,H){no(O,H*At)};return m.internal={pdfEscape:Sn,getStyle:he,getFont:ct,getFontSize:dt,getCharSpace:ma,getTextColor:ha,getLineHeight:vn,getLineHeightFactor:It,getLineWidth:Ht,write:Ft,getHorizontalCoordinate:Zn,getVerticalCoordinate:Kr,getCoordinateString:$i,getVerticalCoordinateString:kl,collections:{},newObject:wt,newAdditionalObject:nr,newObjectDeferred:Vt,newObjectDeferredBegin:Qt,getFilters:Yn,putStream:oi,events:Zt,scaleFactor:At,pageSize:{getWidth:function(){return Kd(B)},setWidth:function(O){Gs(B,O)},getHeight:function(){return Xc(B)},setHeight:function(O){kh(B,O)}},encryptionOptions:d,encryption:oe,getEncryptor:function(O){return d!==null?oe.encryptor(O,0):function(H){return H}},output:V,getNumberOfPages:J,pages:Ie,out:ue,f2:k,f3:T,getPageInfo:ye,getPageInfoByObjId:ke,getCurrentPageInfo:Me,getPDFVersion:p,Point:li,Rectangle:Ss,Matrix:He,hasHotfix:ee},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Kd(B)},set:function(O){Gs(B,O)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Xc(B)},set:function(O){kh(B,O)},enumerable:!0,configurable:!0}),function(O){for(var H=0,xe=zt.length;H<xe;H++){var De=Ri.call(this,O[H][0],O[H][1],O[H][2],zt[H][3],!0);f===!1&&(h[De]=!0);var Be=O[H][0].split("-");va({id:De,fontName:Be[0],fontStyle:Be[1]||""})}Zt.publish("addFonts",{fonts:qe,dictionary:lt})}.call(m,zt),mt="F1",Li(a,r),Zt.publish("initialized"),m}Kp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Kp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Kp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Kp.prototype.processOwnerPassword=function(e,t){return cT(lT(t).substr(0,5),e)},Kp.prototype.encryptor=function(e,t){var r=lT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return cT(r,n)}},Sb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||kn(e)!==kn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Cr.API={events:[]},Cr.version="3.0.3";var fi=Cr.API,MD=1,bp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(e){return e.toFixed(2)},cf=function(e){return e.toFixed(5)};fi.__acroform__={};var Vs=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Eq=function(e){return e*MD},ru=function(e){var t=new yne,r=br.internal.getHeight(e)||0,n=br.internal.getWidth(e)||0;return t.BBox=[0,0,Number(en(n)),Number(en(r))],t},rrt=fi.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},nrt=fi.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},art=fi.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},wi=fi.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return art(e,t-1)},_i=fi.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return rrt(e,t-1)},Si=fi.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nrt(e,t-1)},irt=fi.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},ort=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=uT(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+en(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ru(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},uT=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var i=r,o=br.internal.getHeight(e)||0;o=o<0?-o:o;var l=br.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(k,T,I){if(k+1<a.length){var M=T+" "+a[k+1][0];return qw(M,e,I).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=qw("3",e,i).height,h=e.multiline?o-i:(o-f)/2,m=h+=2,g=0,p=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+qw(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var x="",b=0,w=0;w<a.length;w++)if(a.hasOwnProperty(w)){var S=!1;if(a[w].length!==1&&y!==a[w].length-1){if((f+2)*(b+2)+2>o)continue e;x+=a[w][y],S=!0,p=w,w--}else{x=(x+=a[w][y]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(w),A=c(j,x,i),P=w>=a.length-1;if(A&&!P){x+=" ",y=0;continue}if(A||P){if(P)p=j;else if(e.multiline&&(f+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(b+2)+2>o)continue e;p=j}}for(var C="",E=g;E<=p;E++){var R=a[E];if(e.multiline){if(E===p){C+=R[y]+" ",y=(y+1)%R.length;continue}if(E===g){C+=R[R.length-1]+" ";continue}}C+=R[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,d=qw(C,e,i).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}t+=en(u)+" "+en(m)+` Td
`,t+="("+bp(C)+`) Tj
`,t+=-en(u)+` 0 Td
`,m=-(i+2),d=0,g=S?p:p+1,b++,x=""}break}return n.text=t,n.fontSize=i,n},qw=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},srt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lrt=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},crt=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Kc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(srt)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");MD=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new xne,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&lrt(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=irt(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=br.createDefaultAppearanceStream(l),kn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=ort(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&function(p,y){for(var x in p)if(p.hasOwnProperty(x)){var b=x,w=p[x];y.internal.newObjectDeferredBegin(w.objId,!0),kn(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete p[b]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},vne=fi.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),kn(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+bp(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ZA=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+bp(n(e))+")"},mu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mu.prototype.toString=function(){return this.objId+" 0 R"},mu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},mu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:vne(a,this.objId,this.scope)}):a instanceof mu?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var yne=function(){mu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Vs(yne,mu);var xne=function(){mu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+bp(r(e))+")"}},set:function(r){e=r}})};Vs(xne,mu);var Kc=function e(){mu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wi(t,3)},set:function(x){x?this.F=_i(t,3):this.F=Si(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof BS)return;i="FieldObject"+e.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+bp(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/MD:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof BS||this instanceof Zf))return ZA(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Xi==0?ZA(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Xi==0?x.substr(0,1)==="("?qp(x.substr(1,x.length-2)):qp(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xi==1?qp(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Xi==1?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Xi==0?ZA(m,this.objId,this.scope):m},set:function(x){x=x.toString(),m=this instanceof Xi==0?x.substr(0,1)==="("?qp(x.substr(1,x.length-2)):qp(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xi==1?qp(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Xi==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(x){g=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,1)},set:function(x){x?this.Ff=_i(this.Ff,1):this.Ff=Si(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,2)},set:function(x){x?this.Ff=_i(this.Ff,2):this.Ff=Si(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,3)},set:function(x){x?this.Ff=_i(this.Ff,3):this.Ff=Si(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');y=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(y){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};Vs(Kc,mu);var Tm=function(){Kc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vne(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,18)},set:function(r){r?this.Ff=_i(this.Ff,18):this.Ff=Si(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=_i(this.Ff,19):this.Ff=Si(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,20)},set:function(r){r?(this.Ff=_i(this.Ff,20),t.sort()):this.Ff=Si(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,22)},set:function(r){r?this.Ff=_i(this.Ff,22):this.Ff=Si(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,23)},set:function(r){r?this.Ff=_i(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,27)},set:function(r){r?this.Ff=_i(this.Ff,27):this.Ff=Si(this.Ff,27)}}),this.hasAppearanceStream=!1};Vs(Tm,Kc);var Im=function(){Tm.call(this),this.fontName="helvetica",this.combo=!1};Vs(Im,Tm);var Dm=function(){Im.call(this),this.combo=!0};Vs(Dm,Im);var Wx=function(){Dm.call(this),this.edit=!0};Vs(Wx,Dm);var Xi=function(){Kc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,15)},set:function(r){r?this.Ff=_i(this.Ff,15):this.Ff=Si(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,16)},set:function(r){r?this.Ff=_i(this.Ff,16):this.Ff=Si(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,17)},set:function(r){r?this.Ff=_i(this.Ff,17):this.Ff=Si(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,26)},set:function(r){r?this.Ff=_i(this.Ff,26):this.Ff=Si(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+bp(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){kn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Vs(Xi,Kc);var Vx=function(){Xi.call(this),this.pushButton=!0};Vs(Vx,Xi);var Mm=function(){Xi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Vs(Mm,Xi);var BS=function(){var e,t;Kc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+bp(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){kn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=br.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vs(BS,Kc),Mm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Mm.prototype.createOption=function(e){var t=new BS;return t.Parent=this,t.optionName=e,this.Kids.push(t),urt.call(this.scope,t),t};var Hx=function(){Xi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=br.CheckBox.createAppearanceStream()};Vs(Hx,Xi);var Zf=function(){Kc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,13)},set:function(t){t?this.Ff=_i(this.Ff,13):this.Ff=Si(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,21)},set:function(t){t?this.Ff=_i(this.Ff,21):this.Ff=Si(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,23)},set:function(t){t?this.Ff=_i(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,24)},set:function(t){t?this.Ff=_i(this.Ff,24):this.Ff=Si(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,25)},set:function(t){t?this.Ff=_i(this.Ff,25):this.Ff=Si(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,26)},set:function(t){t?this.Ff=_i(this.Ff,26):this.Ff=Si(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vs(Zf,Kc);var Gx=function(){Zf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,14)},set:function(e){e?this.Ff=_i(this.Ff,14):this.Ff=Si(this.Ff,14)}}),this.password=!0};Vs(Gx,Zf);var br={CheckBox:{createAppearanceStream:function(){return{N:{On:br.CheckBox.YesNormal},D:{On:br.CheckBox.YesPushDown,Off:br.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ru(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=uT(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+en(br.internal.getWidth(e))+" "+en(br.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ru(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=br.internal.getHeight(e),o=br.internal.getWidth(e),l=uT(e,e.caption);return a.push("1 g"),a.push("0 0 "+en(o)+" "+en(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+en(o-1)+" "+en(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+en(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=ru(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(br.internal.getWidth(e))+" "+en(br.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:br.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=br.RadioButton.Circle.YesNormal,t.D[e]=br.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ru(e);t.scope=e.scope;var r=[],n=br.internal.getWidth(e)<=br.internal.getHeight(e)?br.internal.getWidth(e)/4:br.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=br.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+cf(br.internal.getWidth(e)/2)+" "+cf(br.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ru(e);t.scope=e.scope;var r=[],n=br.internal.getWidth(e)<=br.internal.getHeight(e)?br.internal.getWidth(e)/4:br.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*br.internal.Bezier_C).toFixed(5)),o=Number((n*br.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+cf(br.internal.getWidth(e)/2)+" "+cf(br.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+cf(br.internal.getWidth(e)/2)+" "+cf(br.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ru(e);t.scope=e.scope;var r=[],n=br.internal.getWidth(e)<=br.internal.getHeight(e)?br.internal.getWidth(e)/4:br.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*br.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+cf(br.internal.getWidth(e)/2)+" "+cf(br.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:br.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=br.RadioButton.Cross.YesNormal,t.D[e]=br.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ru(e);t.scope=e.scope;var r=[],n=br.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+en(br.internal.getWidth(e)-2)+" "+en(br.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ru(e);t.scope=e.scope;var r=br.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(br.internal.getWidth(e))+" "+en(br.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(br.internal.getWidth(e)-2)+" "+en(br.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ru(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(br.internal.getWidth(e))+" "+en(br.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};br.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=br.internal.getWidth(e),r=br.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},br.internal.getWidth=function(e){var t=0;return kn(e)==="object"&&(t=Eq(e.Rect[2])),t},br.internal.getHeight=function(e){var t=0;return kn(e)==="object"&&(t=Eq(e.Rect[3])),t};var urt=fi.addField=function(e){if(crt(this,e),!(e instanceof Kc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};fi.AcroFormChoiceField=Tm,fi.AcroFormListBox=Im,fi.AcroFormComboBox=Dm,fi.AcroFormEditBox=Wx,fi.AcroFormButton=Xi,fi.AcroFormPushButton=Vx,fi.AcroFormRadioButton=Mm,fi.AcroFormCheckBox=Hx,fi.AcroFormTextField=Zf,fi.AcroFormPasswordField=Gx,fi.AcroFormAppearance=br,fi.AcroForm={ChoiceField:Tm,ListBox:Im,ComboBox:Dm,EditBox:Wx,Button:Xi,PushButton:Vx,RadioButton:Mm,CheckBox:Hx,TextField:Zf,PasswordField:Gx,Appearance:br},Cr.AcroForm={ChoiceField:Tm,ListBox:Im,ComboBox:Dm,EditBox:Wx,Button:Xi,PushButton:Vx,RadioButton:Mm,CheckBox:Hx,TextField:Zf,PasswordField:Gx,Appearance:br};var drt=Cr.AcroForm;function bne(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(k,T){var I,M,z,W,U,$=r;if((T=T||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(A(k))for(U in n)for(z=n[U],I=0;I<z.length;I+=1){for(W=!0,M=0;M<z[I].length;M+=1)if(z[I][M]!==void 0&&z[I][M]!==k[M]){W=!1;break}if(W===!0){$=U;break}}else for(U in n)for(z=n[U],I=0;I<z.length;I+=1){for(W=!0,M=0;M<z[I].length;M+=1)if(z[I][M]!==void 0&&z[I][M]!==k.charCodeAt(M)){W=!1;break}if(W===!0){$=U;break}}return $===r&&T!==r&&($=T),$},i=function k(T){for(var I=this.internal.write,M=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:T.width}),W.push({key:"Height",value:T.height}),T.colorSpace===x.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===x.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var U="",$=0,G=T.transparency.length;$<G;$++)U+=T.transparency[$]+" "+T.transparency[$]+" ";W.push({key:"Mask",value:"["+U+"]"})}T.sMask!==void 0&&W.push({key:"SMask",value:T.objectId+1+" 0 R"});var me=T.filter!==void 0?["/"+T.filter]:void 0;if(M({data:T.data,additionalKeyValues:W,alreadyAppliedFilters:me,objectId:T.objectId}),I("endobj"),"sMask"in T&&T.sMask!==void 0){var de,L=(de=T.sMaskBitsPerComponent)!==null&&de!==void 0?de:T.bitsPerComponent,B={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:T.sMask};"filter"in T&&(B.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(T.width),B.filter=T.filter),k.call(this,B)}if(T.colorSpace===x.INDEXED){var X=this.internal.newObject();M({data:C(new Uint8Array(T.palette)),objectId:X}),I("endobj")}},o=function(){var k=this.internal.collections[t+"images"];for(var T in k)i.call(this,k[T])},l=function(){var k,T=this.internal.collections[t+"images"],I=this.internal.write;for(var M in T)I("/I"+(k=T[M]).index,k.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[t+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(k){return typeof e["process"+k.toUpperCase()]=="function"},h=function(k){return kn(k)==="object"&&k.nodeType===1},m=function(k,T){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var I=""+k.getAttribute("src");if(I.indexOf("data:image/")===0)return w2(unescape(I).split("base64,").pop());var M=e.loadFile(I,!0);if(M!==void 0)return M}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var z;switch(T){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;default:z="image/jpeg"}return w2(k.toDataURL(z,1).split("base64,").pop())}},g=function(k){var T=this.internal.collections[t+"images"];if(T){for(var I in T)if(k===T[I].alias)return T[I]}},p=function(k,T,I){return k||T||(k=-96,T=-96),k<0&&(k=-1*I.width*72/k/this.internal.scaleFactor),T<0&&(T=-1*I.height*72/T/this.internal.scaleFactor),k===0&&(k=T*I.width/I.height),T===0&&(T=k*I.height/I.width),[k,T]},y=function(k,T,I,M,z,W){var U=p.call(this,I,M,z),$=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,me=u.call(this);if(I=U[0],M=U[1],me[z.index]=z,W){W*=Math.PI/180;var de=Math.cos(W),L=Math.sin(W),B=function(q){return q.toFixed(4)},X=[B(de),B(L),B(-1*L),B(de),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,$(k),G(T+M),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([$(I),"0","0",$(M),"0","0","cm"].join(" "))):this.internal.write([$(I),"0","0",$(M),$(k),G(T+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(k){var T,I,M=0;if(typeof k=="string")for(I=k.length,T=0;T<I;T++)M=(M<<5)-M+k.charCodeAt(T),M|=0;else if(A(k))for(I=k.byteLength/2,T=0;T<I;T++)M=(M<<5)-M+k[T],M|=0;return M},S=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var T=!0;return k.length===0&&(T=!1),k.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(T=!1),T},j=e.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var T=k.indexOf(",");return T<0?null:k.substring(0,T).trim().endsWith("base64")?k.substring(T+1):null};e.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},P=e.__addimage__.binaryStringToUint8Array=function(k){for(var T=k.length,I=new Uint8Array(T),M=0;M<T;M++)I[M]=k.charCodeAt(M);return I},C=e.__addimage__.arrayBufferToBinaryString=function(k){for(var T="",I=A(k)?k:new Uint8Array(k),M=0;M<I.length;M+=8192)T+=String.fromCharCode.apply(null,I.subarray(M,M+8192));return T};e.addImage=function(){var k,T,I,M,z,W,U,$,G;if(typeof arguments[1]=="number"?(T=r,I=arguments[1],M=arguments[2],z=arguments[3],W=arguments[4],U=arguments[5],$=arguments[6],G=arguments[7]):(T=arguments[1],I=arguments[2],M=arguments[3],z=arguments[4],W=arguments[5],U=arguments[6],$=arguments[7],G=arguments[8]),kn(k=arguments[0])==="object"&&!h(k)&&"imageData"in k){var me=k;k=me.imageData,T=me.format||T||r,I=me.x||I||0,M=me.y||M||0,z=me.w||me.width||z,W=me.h||me.height||W,U=me.alias||U,$=me.compression||$,G=me.rotation||me.angle||G}var de=this.internal.getFilters();if($===void 0&&de.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(I)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=E.call(this,k,T,U,$);return y.call(this,I,M,z,W,L,G),this};var E=function(k,T,I,M){var z,W,U;if(typeof k=="string"&&a(k)===r){k=unescape(k);var $=R(k,!1);($!==""||($=e.loadFile(k,!0))!==void 0)&&(k=$)}if(h(k)&&(k=m(k,T)),T=a(k,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((U=I)==null||U.length===0)&&(I=function(G){return typeof G=="string"||A(G)?w(G):A(G.data)?w(G.data):null}(k)),(z=g.call(this,I))||(k instanceof Uint8Array||T==="RGBA"||(W=k,k=P(k)),z=this["process"+T.toUpperCase()](k,d.call(this),I,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in e.image_compression?G:b.NONE}(M),W)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},R=e.__addimage__.convertBase64ToBinaryString=function(k,T){T=typeof T!="boolean"||T;var I,M="";if(typeof k=="string"){var z;I=(z=j(k))!==null&&z!==void 0?z:k;try{M=w2(I)}catch(W){if(T)throw S(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};e.getImageProperties=function(k){var T,I,M="";if(h(k)&&(k=m(k)),typeof k=="string"&&a(k)===r&&((M=R(k,!1))===""&&(M=e.loadFile(k)||""),k=M),I=a(k),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(k instanceof Uint8Array||(k=P(k)),!(T=this["process"+I.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=I,T}})(Cr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Cr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(x(n.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(x(b))+") >>",p.content=i;var w=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(p.objId,"0 R",y.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var A=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Cr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=e.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(p){var y=0,x=r,b="",w=0;for(y=0;y<p.length;y+=1)x[p.charCodeAt(y)]!==void 0?(w++,typeof(x=x[p.charCodeAt(y)])=="number"&&(b+=String.fromCharCode(x),x=r,w=0),y===p.length-1&&(x=r,b+=p.charAt(y-(w-1)),y-=w-1,w=0)):(x=r,b+=p.charAt(y-w),y-=w,w=0);return b};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(p,y,x){return o(p)?i(p)===!1?-1:!u(p)||!o(y)&&!o(x)||!o(x)&&l(y)||l(p)&&!o(y)||l(p)&&c(y)||l(p)&&l(y)?0:d(p)&&o(y)&&!l(y)&&o(x)&&u(x)?3:l(p)||!o(x)?1:2:-1},m=function(p){var y=0,x=0,b=0,w="",S="",j="",A=(p=p||"").split("\\s+"),P=[];for(y=0;y<A.length;y+=1){for(P.push(""),x=0;x<A[y].length;x+=1)w=A[y][x],S=A[y][x-1],j=A[y][x+1],o(w)?(b=h(w,S,j),P[y]+=b!==-1?String.fromCharCode(t[w.charCodeAt(0)][b]):w):P[y]+=w;P[y]=f(P[y])}return P.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var p,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(y)){var b=0;for(x=[],b=0;b<y.length;b+=1)Array.isArray(y[b])?x.push([m(y[b][0]),y[b][1],y[b][2]]):x.push([m(y[b])]);p=x}else p=m(y);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",g])}(Cr.API),Cr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Cr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(p){m=p}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(p){g=p}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,p=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,S){return w.concat(y.splitTextToSize(S,x))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)m<(p=this.getStringUnitWidth(c[b],{font:f})*d)&&(m=p);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,p,y,x=[],b=[],w=[],S={},j={},A=[],P=[],C=(h=h||{}).autoSize||!1,E=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,k=h.margins||Object.assign({width:this.getPageWidth()},t),T=typeof h.padding=="number"?h.padding:3,I=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),f==null)b=x=Object.keys(d[0]),w=x.map(function(){return"left"});else if(Array.isArray(f)&&kn(f[0])==="object")for(x=f.map(function(me){return me.name}),b=f.map(function(me){return me.prompt||me.name||""}),w=f.map(function(me){return me.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=.7499990551181103*f[m].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=x=f,w=x.map(function(){return"left"}));if(C||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<x.length;m+=1){for(S[y=x[m]]=d.map(function(me){return me[y]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(b[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=S[y],this.setFont(void 0,"normal"),p=0;p<g.length;p+=1)A.push(this.getTextDimensions(g[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[y]=Math.max.apply(null,A)+T+T,A=[]}if(E){var z={};for(m=0;m<x.length;m+=1)z[x[m]]={},z[x[m]].text=b[m],z[x[m]].align=w[m];var W=l.call(this,z,j);P=x.map(function(me){return new i(c,u,j[me],W,z[me].text,void 0,z[me].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var U=f.reduce(function(me,de){return me[de.name]=de.align,me},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var $=l.call(this,d[m],j);for(p=0;p<x.length;p+=1){var G=d[m][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:p,data:G},this),o.call(this,new i(c,u,j[x[p]],$,G,m+2,U[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Cr.API);var wne={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_ne=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dT=bne(_ne),Sne=[100,200,300,400,500,600,700,800,900],frt=bne(Sne);function eP(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return wne[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof dT[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function kq(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var hrt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Oq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tq(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Iq(e){return e.trimLeft()}function mrt(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function prt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Uw,Dq,Mq,Up,Ww,Rq,Lq,$q,tP=["times"];function Fq(e,t,r,n,a){var i=4,o=zq;switch(a){case Cr.API.image_compression.FAST:i=1,o=Bq;break;case Cr.API.image_compression.MEDIUM:i=6,o=qq;break;case Cr.API.image_compression.SLOW:i=9,o=Uq}e=function(c,u,d,f){for(var h,m=c.length/u,g=new Uint8Array(c.length+m),p=[grt,Bq,zq,qq,Uq],y=0;y<m;y+=1){var x=y*u,b=c.subarray(x,x+u);if(f)g.set(f(b,d,h),x+y);else{for(var w=p.length,S=[],j=0;j<w;j+=1)S[j]=p[j](b,d,h);var A=yrt(S.concat());g.set(S[A],x+y)}h=b}return g}(e,t,Math.ceil(r*n/8),o);var l=QO(e,{level:i});return Cr.API.__addimage__.arrayBufferToBinaryString(l)}function grt(e){var t=Array.apply([],e);return t.unshift(0),t}function Bq(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function zq(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=e[i]-o+256&255}return a}function qq(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(o+l>>>1)&255}return a}function Uq(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=vrt(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function vrt(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function yrt(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function rP(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return jne(e,a)>>i&o}function Wq(e,t,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,c=(t&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(e,i,jne(e,i)&~(l<<o)&65535|c)}function jne(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function xrt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],1&p||(h=null),m=p>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,S=e[t++],j=S>>6&1,A=1<<1+(7&S),P=l,C=c,E=!1;S>>7&&(E=!0,P=t,C=A,t+=3*A);var R=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}d.push({x:y,y:x,width:b,height:w,has_local_palette:E,palette_offset:P,palette_size:C,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,I){var M=this.frameInfo(T),z=M.width*M.height,W=new Uint8Array(z);Vq(e,M.data_offset,W,z);var U=M.palette_offset,$=M.transparent_index;$===null&&($=256);var G=M.width,me=r-G,de=G,L=4*(M.y*r+M.x),B=4*((M.y+M.height)*r+M.x),X=L,q=4*me;M.interlaced===!0&&(q+=4*r*7);for(var Y=8,Z=0,ge=W.length;Z<ge;++Z){var re=W[Z];if(de===0&&(de=G,(X+=q)>=B&&(q=4*me+4*r*(Y-1),X=L+(G+me)*(Y<<1),Y>>=1)),re===$)X+=4;else{var Se=e[U+3*re],Ie=e[U+3*re+1],pe=e[U+3*re+2];I[X++]=pe,I[X++]=Ie,I[X++]=Se,I[X++]=255}--de}},this.decodeAndBlitFrameRGBA=function(T,I){var M=this.frameInfo(T),z=M.width*M.height,W=new Uint8Array(z);Vq(e,M.data_offset,W,z);var U=M.palette_offset,$=M.transparent_index;$===null&&($=256);var G=M.width,me=r-G,de=G,L=4*(M.y*r+M.x),B=4*((M.y+M.height)*r+M.x),X=L,q=4*me;M.interlaced===!0&&(q+=4*r*7);for(var Y=8,Z=0,ge=W.length;Z<ge;++Z){var re=W[Z];if(de===0&&(de=G,(X+=q)>=B&&(q=4*me+4*r*(Y-1),X=L+(G+me)*(Y<<1),Y>>=1)),re===$)X+=4;else{var Se=e[U+3*re],Ie=e[U+3*re+1],pe=e[U+3*re+2];I[X++]=Se,I[X++]=Ie,I[X++]=pe,I[X++]=255}--de}}}function Vq(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),p=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var y=f&u;if(f>>=c,d-=c,y!==i){if(y===o)break;for(var x=y<l?y:p,b=0,w=x;w>i;)w=g[w]>>8,++b;var S=w;if(h+b+(x!==y?1:0)>n)return void _a.log("Warning, gif stream longer than expected.");r[h++]=S;var j=h+=b;for(x!==y&&(r[h++]=S),w=x;b--;)w=g[w],r[--j]=255&w,w>>=8;p!==null&&l<4096&&(g[l++]=p<<8|S,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=y}else l=o+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&_a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nP(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),p=[],y=0,x=7,b=new Array(64),w=new Array(64),S=new Array(64),j=new Array(256),A=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(L,B){for(var X=0,q=0,Y=new Array,Z=1;Z<=16;Z++){for(var ge=1;ge<=L[Z];ge++)Y[B[q]]=[],Y[B[q]][0]=X,Y[B[q]][1]=Z,q++,X++;X*=2}return Y}function U(L){for(var B=L[0],X=L[1]-1;X>=0;)B&1<<X&&(y|=1<<x),X--,--x<0&&(y==255?($(255),$(0)):$(y),x=7,y=0)}function $(L){p.push(L)}function G(L){$(L>>8&255),$(255&L)}function me(L,B,X,q,Y){for(var Z,ge=Y[0],re=Y[240],Se=function(it,ft){var dt,ve,ut,Te,Ze,Ye,Nt,nt,mt,At,Pe=0;for(mt=0;mt<8;++mt){dt=it[Pe],ve=it[Pe+1],ut=it[Pe+2],Te=it[Pe+3],Ze=it[Pe+4],Ye=it[Pe+5],Nt=it[Pe+6];var Je=dt+(nt=it[Pe+7]),Dt=dt-nt,qe=ve+Nt,lt=ve-Nt,Bt=ut+Ye,Tt=ut-Ye,er=Te+Ze,tt=Te-Ze,ur=Je+er,ln=Je-er,rn=qe+Bt,fr=qe-Bt;it[Pe]=ur+rn,it[Pe+4]=ur-rn;var Zt=.707106781*(fr+ln);it[Pe+2]=ln+Zt,it[Pe+6]=ln-Zt;var Qn=.382683433*((ur=tt+Tt)-(fr=lt+Dt)),Kn=.5411961*ur+Qn,Ce=1.306562965*fr+Qn,We=.707106781*(rn=Tt+lt),He=Dt+We,xt=Dt-We;it[Pe+5]=xt+Kn,it[Pe+3]=xt-Kn,it[Pe+1]=He+Ce,it[Pe+7]=He-Ce,Pe+=8}for(Pe=0,mt=0;mt<8;++mt){dt=it[Pe],ve=it[Pe+8],ut=it[Pe+16],Te=it[Pe+24],Ze=it[Pe+32],Ye=it[Pe+40],Nt=it[Pe+48];var at=dt+(nt=it[Pe+56]),st=dt-nt,Mt=ve+Nt,wt=ve-Nt,Vt=ut+Ye,Qt=ut-Ye,nr=Te+Ze,Ar=Te-Ze,cn=at+nr,On=at-nr,ca=Mt+Vt,Yn=Mt-Vt;it[Pe]=cn+ca,it[Pe+32]=cn-ca;var oi=.707106781*(Yn+On);it[Pe+16]=On+oi,it[Pe+48]=On-oi;var An=.382683433*((cn=Ar+Qt)-(Yn=wt+st)),ua=.5411961*cn+An,Ni=1.306562965*Yn+An,ei=.707106781*(ca=Qt+wt),da=st+ei,Ia=st-ei;it[Pe+40]=Ia+ua,it[Pe+24]=Ia-ua,it[Pe+8]=da+Ni,it[Pe+56]=da-Ni,Pe++}for(mt=0;mt<64;++mt)At=it[mt]*ft[mt],m[mt]=At>0?At+.5|0:At-.5|0;return m}(L,B),Ie=0;Ie<64;++Ie)g[P[Ie]]=Se[Ie];var pe=g[0]-X;X=g[0],pe==0?U(q[0]):(U(q[h[Z=32767+pe]]),U(f[Z]));for(var Ue=63;Ue>0&&g[Ue]==0;)Ue--;if(Ue==0)return U(ge),X;for(var _e,ue=1;ue<=Ue;){for(var Ft=ue;g[ue]==0&&ue<=Ue;)++ue;var qt=ue-Ft;if(qt>=16){_e=qt>>4;for(var zt=1;zt<=_e;++zt)U(re);qt&=15}Z=32767+g[ue],U(Y[(qt<<4)+h[Z]]),U(f[Z]),ue++}return Ue!=63&&U(ge),X}function de(L){L=Math.min(Math.max(L,1),100),i!=L&&(function(B){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var Y=o((X[q]*B+50)/100);Y=Math.min(Math.max(Y,1),255),l[P[q]]=Y}for(var Z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var re=o((Z[ge]*B+50)/100);re=Math.min(Math.max(re,1),255),c[P[ge]]=re}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,pe=0;pe<8;pe++)for(var Ue=0;Ue<8;Ue++)u[Ie]=1/(l[P[Ie]]*Se[pe]*Se[Ue]*8),d[Ie]=1/(c[P[Ie]]*Se[pe]*Se[Ue]*8),Ie++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,B){B&&de(B),p=new Array,y=0,x=7,G(65496),G(65504),G(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),G(1),G(1),$(0),$(0),function(){G(65499),G(132),$(0);for(var ve=0;ve<64;ve++)$(l[ve]);$(1);for(var ut=0;ut<64;ut++)$(c[ut])}(),function(ve,ut){G(65472),G(17),$(8),G(ut),G(ve),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(L.width,L.height),function(){G(65476),G(418),$(0);for(var ve=0;ve<16;ve++)$(C[ve+1]);for(var ut=0;ut<=11;ut++)$(E[ut]);$(16);for(var Te=0;Te<16;Te++)$(R[Te+1]);for(var Ze=0;Ze<=161;Ze++)$(k[Ze]);$(1);for(var Ye=0;Ye<16;Ye++)$(T[Ye+1]);for(var Nt=0;Nt<=11;Nt++)$(I[Nt]);$(17);for(var nt=0;nt<16;nt++)$(M[nt+1]);for(var mt=0;mt<=161;mt++)$(z[mt])}(),G(65498),G(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var X=0,q=0,Y=0;y=0,x=7,this.encode.displayName="_encode_";for(var Z,ge,re,Se,Ie,pe,Ue,_e,ue,Ft=L.data,qt=L.width,zt=L.height,it=4*qt,ft=0;ft<zt;){for(Z=0;Z<it;){for(Ie=it*ft+Z,Ue=-1,_e=0,ue=0;ue<64;ue++)pe=Ie+(_e=ue>>3)*it+(Ue=4*(7&ue)),ft+_e>=zt&&(pe-=it*(ft+1+_e-zt)),Z+Ue>=it&&(pe-=Z+Ue-it+4),ge=Ft[pe++],re=Ft[pe++],Se=Ft[pe++],b[ue]=(A[ge]+A[re+256|0]+A[Se+512|0]>>16)-128,w[ue]=(A[ge+768|0]+A[re+1024|0]+A[Se+1280|0]>>16)-128,S[ue]=(A[ge+1280|0]+A[re+1536|0]+A[Se+1792|0]>>16)-128;X=me(b,u,X,t,n),q=me(w,d,q,r,a),Y=me(S,d,Y,r,a),Z+=32}ft+=8}if(x>=0){var dt=[];dt[1]=x+1,dt[0]=(1<<x+1)-1,U(dt)}return G(65497),new Uint8Array(p)},e=e||50,function(){for(var L=String.fromCharCode,B=0;B<256;B++)j[B]=L(B)}(),t=W(C,E),r=W(T,I),n=W(R,k),a=W(M,z),function(){for(var L=1,B=2,X=1;X<=15;X++){for(var q=L;q<B;q++)h[32767+q]=X,f[32767+q]=[],f[32767+q][1]=X,f[32767+q][0]=q;for(var Y=-(B-1);Y<=-L;Y++)h[32767+Y]=X,f[32767+Y]=[],f[32767+Y][1]=X,f[32767+Y][0]=B-1+Y;L<<=1,B<<=1}}(),function(){for(var L=0;L<256;L++)A[L]=19595*L,A[L+256|0]=38470*L,A[L+512|0]=7471*L+32768,A[L+768|0]=-11059*L,A[L+1024|0]=-21709*L,A[L+1280|0]=32768*L+8421375,A[L+1536|0]=-27439*L,A[L+1792|0]=-5329*L}(),de(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function yc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Hq(e){function t(E){if(!E)throw Error("assert :P")}function r(E,R,k){for(var T=0;4>T;T++)if(E[R+T]!=k.charCodeAt(T))return!0;return!1}function n(E,R,k,T,I){for(var M=0;M<I;M++)E[R+M]=k[T+M]}function a(E,R,k,T){for(var I=0;I<T;I++)E[R+I]=k}function i(E){return new Int32Array(E)}function o(E,R){for(var k=[],T=0;T<E;T++)k.push(new R);return k}function l(E,R){var k=[];return function T(I,M,z){for(var W=z[M],U=0;U<W&&(I.push(z.length>M+1?[]:new R),!(z.length<M+1));U++)T(I[U],M+1,z)}(k,0,E),k}var c=function(){var E=this;function R(_,N){for(var D=1<<N-1>>>0;_&D;)D>>>=1;return D?(_&D-1)+D:_}function k(_,N,D,F,K){t(!(F%D));do _[N+(F-=D)]=K;while(0<F)}function T(_,N,D,F,K){if(t(2328>=K),512>=K)var Q=i(512);else if((Q=i(K))==null)return 0;return function(ae,se,fe,be,Re,et){var we,Fe,Ve=se,_t=1<<fe,Xe=i(16),Ct=i(16);for(t(Re!=0),t(be!=null),t(ae!=null),t(0<fe),Fe=0;Fe<Re;++Fe){if(15<be[Fe])return 0;++Xe[be[Fe]]}if(Xe[0]==Re)return 0;for(Ct[1]=0,we=1;15>we;++we){if(Xe[we]>1<<we)return 0;Ct[we+1]=Ct[we]+Xe[we]}for(Fe=0;Fe<Re;++Fe)we=be[Fe],0<be[Fe]&&(et[Ct[we]++]=Fe);if(Ct[15]==1)return(be=new I).g=0,be.value=et[0],k(ae,Ve,1,_t,be),_t;var Et,Kt=-1,Ut=_t-1,Pr=0,xr=1,un=1,Sr=1<<fe;for(Fe=0,we=1,Re=2;we<=fe;++we,Re<<=1){if(xr+=un<<=1,0>(un-=Xe[we]))return 0;for(;0<Xe[we];--Xe[we])(be=new I).g=we,be.value=et[Fe++],k(ae,Ve+Pr,Re,Sr,be),Pr=R(Pr,we)}for(we=fe+1,Re=2;15>=we;++we,Re<<=1){if(xr+=un<<=1,0>(un-=Xe[we]))return 0;for(;0<Xe[we];--Xe[we]){if(be=new I,(Pr&Ut)!=Kt){for(Ve+=Sr,Et=1<<(Kt=we)-fe;15>Kt&&!(0>=(Et-=Xe[Kt]));)++Kt,Et<<=1;_t+=Sr=1<<(Et=Kt-fe),ae[se+(Kt=Pr&Ut)].g=Et+fe,ae[se+Kt].value=Ve-se-Kt}be.g=we-fe,be.value=et[Fe++],k(ae,Ve+(Pr>>fe),Re,Sr,be),Pr=R(Pr,we)}}return xr!=2*Ct[15]-1?0:_t}(_,N,D,F,K,Q)}function I(){this.value=this.g=0}function M(){this.value=this.g=0}function z(){this.G=o(5,I),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ks,M)}function W(_,N,D,F){t(_!=null),t(N!=null),t(2147483648>F),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=N,_.pa=D,_.Jd=N,_.Yc=D+F,_.Zc=4<=F?D+F-4+1:D,ge(_)}function U(_,N){for(var D=0;0<N--;)D|=Se(_,128)<<N;return D}function $(_,N){var D=U(_,N);return re(_)?-D:D}function G(_,N,D,F){var K,Q=0;for(t(_!=null),t(N!=null),t(4294967288>F),_.Sb=F,_.Ra=0,_.u=0,_.h=0,4<F&&(F=4),K=0;K<F;++K)Q+=N[D+K]<<8*K;_.Ra=Q,_.bb=F,_.oa=N,_.pa=D}function me(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<je-8>>>0,++_.bb,_.u-=8;q(_)&&(_.h=1,_.u=0)}function de(_,N){if(t(0<=N),!_.h&&N<=Ae){var D=X(_)&ne[N];return _.u+=N,me(_),D}return _.h=1,_.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(_){return _.Ra>>>(_.u&je-1)>>>0}function q(_){return t(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>je}function Y(_,N){_.u=N,_.h=q(_)}function Z(_){_.u>=ze&&(t(_.u>=ze),me(_))}function ge(_){t(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(t(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function re(_){return U(_,1)}function Se(_,N){var D=_.Ca;0>_.b&&ge(_);var F=_.b,K=D*N>>>8,Q=(_.I>>>F>K)+0;for(Q?(D-=K,_.I-=K+1<<F>>>0):D=K+1,F=D,K=0;256<=F;)K+=8,F>>=8;return F=7^K+Qe[F],_.b-=F,_.Ca=(D<<F)-1,Q}function Ie(_,N,D){_[N+0]=D>>24&255,_[N+1]=D>>16&255,_[N+2]=D>>8&255,_[N+3]=255&D}function pe(_,N){return _[N+0]|_[N+1]<<8}function Ue(_,N){return pe(_,N)|_[N+2]<<16}function _e(_,N){return pe(_,N)|pe(_,N+2)<<16}function ue(_,N){var D=1<<N;return t(_!=null),t(0<N),_.X=i(D),_.X==null?0:(_.Mb=32-N,_.Xa=N,1)}function Ft(_,N){t(_!=null),t(N!=null),t(_.Xa==N.Xa),n(N.X,0,_.X,0,1<<N.Xa)}function qt(){this.X=[],this.Xa=this.Mb=0}function zt(_,N,D,F){t(D!=null),t(F!=null);var K=D[0],Q=F[0];return K==0&&(K=(_*Q+N/2)/N),Q==0&&(Q=(N*K+_/2)/_),0>=K||0>=Q?0:(D[0]=K,F[0]=Q,1)}function it(_,N){return _+(1<<N)-1>>>N}function ft(_,N){return((4278255360&_)+(4278255360&N)>>>0&4278255360)+((16711935&_)+(16711935&N)>>>0&16711935)>>>0}function dt(_,N){E[N]=function(D,F,K,Q,ae,se,fe){var be;for(be=0;be<ae;++be){var Re=E[_](se[fe+be-1],K,Q+be);se[fe+be]=ft(D[F+be],Re)}}}function ve(){this.ud=this.hd=this.jd=0}function ut(_,N){return((4278124286&(_^N))>>>1)+(_&N)>>>0}function Te(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Ze(_,N){return Te(_+(_-N+.5>>1))}function Ye(_,N,D){return Math.abs(N-D)-Math.abs(_-D)}function Nt(_,N,D,F,K,Q,ae){for(F=Q[ae-1],D=0;D<K;++D)Q[ae+D]=F=ft(_[N+D],F)}function nt(_,N,D,F,K){var Q;for(Q=0;Q<D;++Q){var ae=_[N+Q],se=ae>>8&255,fe=16711935&(fe=(fe=16711935&ae)+((se<<16)+se));F[K+Q]=(4278255360&ae)+fe>>>0}}function mt(_,N){N.jd=255&_,N.hd=_>>8&255,N.ud=_>>16&255}function At(_,N,D,F,K,Q){var ae;for(ae=0;ae<F;++ae){var se=N[D+ae],fe=se>>>8,be=se,Re=255&(Re=(Re=se>>>16)+((_.jd<<24>>24)*(fe<<24>>24)>>>5));be=255&(be=(be+=(_.hd<<24>>24)*(fe<<24>>24)>>>5)+((_.ud<<24>>24)*(Re<<24>>24)>>>5)),K[Q+ae]=(4278255360&se)+(Re<<16)+be}}function Pe(_,N,D,F,K){E[N]=function(Q,ae,se,fe,be,Re,et,we,Fe){for(fe=et;fe<we;++fe)for(et=0;et<Fe;++et)be[Re++]=K(se[F(Q[ae++])])},E[_]=function(Q,ae,se,fe,be,Re,et){var we=8>>Q.b,Fe=Q.Ea,Ve=Q.K[0],_t=Q.w;if(8>we)for(Q=(1<<Q.b)-1,_t=(1<<we)-1;ae<se;++ae){var Xe,Ct=0;for(Xe=0;Xe<Fe;++Xe)Xe&Q||(Ct=F(fe[be++])),Re[et++]=K(Ve[Ct&_t]),Ct>>=we}else E["VP8LMapColor"+D](fe,be,Ve,_t,Re,et,ae,se,Fe)}}function Je(_,N,D,F,K){for(D=N+D;N<D;){var Q=_[N++];F[K++]=Q>>16&255,F[K++]=Q>>8&255,F[K++]=255&Q}}function Dt(_,N,D,F,K){for(D=N+D;N<D;){var Q=_[N++];F[K++]=Q>>16&255,F[K++]=Q>>8&255,F[K++]=255&Q,F[K++]=Q>>24&255}}function qe(_,N,D,F,K){for(D=N+D;N<D;){var Q=(ae=_[N++])>>16&240|ae>>12&15,ae=240&ae|ae>>28&15;F[K++]=Q,F[K++]=ae}}function lt(_,N,D,F,K){for(D=N+D;N<D;){var Q=(ae=_[N++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;F[K++]=Q,F[K++]=ae}}function Bt(_,N,D,F,K){for(D=N+D;N<D;){var Q=_[N++];F[K++]=255&Q,F[K++]=Q>>8&255,F[K++]=Q>>16&255}}function Tt(_,N,D,F,K,Q){if(Q==0)for(D=N+D;N<D;)Ie(F,((Q=_[N++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),K+=32;else n(F,K,_,N,D)}function er(_,N){E[N][0]=E[_+"0"],E[N][1]=E[_+"1"],E[N][2]=E[_+"2"],E[N][3]=E[_+"3"],E[N][4]=E[_+"4"],E[N][5]=E[_+"5"],E[N][6]=E[_+"6"],E[N][7]=E[_+"7"],E[N][8]=E[_+"8"],E[N][9]=E[_+"9"],E[N][10]=E[_+"10"],E[N][11]=E[_+"11"],E[N][12]=E[_+"12"],E[N][13]=E[_+"13"],E[N][14]=E[_+"0"],E[N][15]=E[_+"0"]}function tt(_){return _==fC||_==hC||_==C1||_==mC}function ur(){this.eb=[],this.size=this.A=this.fb=0}function ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ur,this.f.kb=new ln,this.sd=null}function fr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Qn(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Kn(_,N){var D=_.T,F=N.ba.f.RGBA,K=F.eb,Q=F.fb+_.ka*F.A,ae=Rl[N.ba.S],se=_.y,fe=_.O,be=_.f,Re=_.N,et=_.ea,we=_.W,Fe=N.cc,Ve=N.dc,_t=N.Mc,Xe=N.Nc,Ct=_.ka,Et=_.ka+_.T,Kt=_.U,Ut=Kt+1>>1;for(Ct==0?ae(se,fe,null,null,be,Re,et,we,be,Re,et,we,K,Q,null,null,Kt):(ae(N.ec,N.fc,se,fe,Fe,Ve,_t,Xe,be,Re,et,we,K,Q-F.A,K,Q,Kt),++D);Ct+2<Et;Ct+=2)Fe=be,Ve=Re,_t=et,Xe=we,Re+=_.Rc,we+=_.Rc,Q+=2*F.A,ae(se,(fe+=2*_.fa)-_.fa,se,fe,Fe,Ve,_t,Xe,be,Re,et,we,K,Q-F.A,K,Q,Kt);return fe+=_.fa,_.j+Et<_.o?(n(N.ec,N.fc,se,fe,Kt),n(N.cc,N.dc,be,Re,Ut),n(N.Mc,N.Nc,et,we,Ut),D--):1&Et||ae(se,fe,null,null,be,Re,et,we,be,Re,et,we,K,Q+F.A,null,null,Kt),D}function Ce(_,N,D){var F=_.F,K=[_.J];if(F!=null){var Q=_.U,ae=N.ba.S,se=ae==N1||ae==C1;N=N.ba.f.RGBA;var fe=[0],be=_.ka;fe[0]=_.T,_.Kb&&(be==0?--fe[0]:(--be,K[0]-=_.width),_.j+_.ka+_.T==_.o&&(fe[0]=_.o-_.j-be));var Re=N.eb;be=N.fb+be*N.A,_=QD(F,K[0],_.width,Q,fe,Re,be+(se?0:3),N.A),t(D==fe),_&&tt(ae)&&hy(Re,be,se,Q,fe,N.A)}return 0}function We(_){var N=_.ma,D=N.ba.S,F=11>D,K=D==S1||D==j1||D==N1||D==dC||D==12||tt(D);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!gi(N.Oa,_,K?11:12))return 0;if(K&&tt(D)&&Yd(),_.da)alert("todo:use_scaling");else{if(F){if(N.Ib=Qn,_.Kb){if(D=_.U+1>>1,N.memory=i(_.U+2*D),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+_.U,N.Mc=N.cc,N.Nc=N.dc+D,N.Ib=Kn,Yd()}}else alert("todo:EmitYUV");K&&(N.Jb=Ce,F&&Ns())}if(F&&!pM){for(_=0;256>_;++_)Eae[_]=89858*(_-128)+P1>>A1,Tae[_]=-22014*(_-128)+P1,Oae[_]=-45773*(_-128),kae[_]=113618*(_-128)+P1>>A1;for(_=py;_<vC;++_)N=76283*(_-16)+P1>>A1,Iae[_-py]=Ha(N,255),Dae[_-py]=Ha(N+8>>4,15);pM=1}return 1}function He(_){var N=_.ma,D=_.U,F=_.T;return t(!(1&_.ka)),0>=D||0>=F?0:(D=N.Ib(_,N),N.Jb!=null&&N.Jb(_,N,D),N.Dc+=D,1)}function xt(_){_.ma.memory=null}function at(_,N,D,F){return de(_,8)!=47?0:(N[0]=de(_,14)+1,D[0]=de(_,14)+1,F[0]=de(_,1),de(_,3)!=0?0:!_.h)}function st(_,N){if(4>_)return _+1;var D=_-2>>1;return(2+(1&_)<<D)+de(N,D)+1}function Mt(_,N){return 120<N?N-120:1<=(D=((D=pae[N-1])>>4)*_+(8-(15&D)))?D:1;var D}function wt(_,N,D){var F=X(D),K=_[N+=255&F].g-8;return 0<K&&(Y(D,D.u+8),F=X(D),N+=_[N].value,N+=F&(1<<K)-1),Y(D,D.u+_[N].g),_[N].value}function Vt(_,N,D){return D.g+=_.g,D.value+=_.value<<N>>>0,t(8>=D.g),_.g}function Qt(_,N,D){var F=_.xc;return t((N=F==0?0:_.vc[_.md*(D>>F)+(N>>F)])<_.Wb),_.Ya[N]}function nr(_,N,D,F){var K=_.ab,Q=_.c*N,ae=_.C;N=ae+N;var se=D,fe=F;for(F=_.Ta,D=_.Ua;0<K--;){var be=_.gc[K],Re=ae,et=N,we=se,Fe=fe,Ve=(fe=F,se=D,be.Ea);switch(t(Re<et),t(et<=be.nc),be.hc){case 2:pt(we,Fe,(et-Re)*Ve,fe,se);break;case 0:var _t=Re,Xe=et,Ct=fe,Et=se,Kt=(Sr=be).Ea;_t==0&&(kt(we,Fe,null,null,1,Ct,Et),Nt(we,Fe+1,0,0,Kt-1,Ct,Et+1),Fe+=Kt,Et+=Kt,++_t);for(var Ut=1<<Sr.b,Pr=Ut-1,xr=it(Kt,Sr.b),un=Sr.K,Sr=Sr.w+(_t>>Sr.b)*xr;_t<Xe;){var Dn=un,zi=Sr,dn=1;for(St(we,Fe,Ct,Et-Kt,1,Ct,Et);dn<Kt;){var jr=(dn&~Pr)+Ut;jr>Kt&&(jr=Kt),(0,ci[Dn[zi++]>>8&15])(we,Fe+ +dn,Ct,Et+dn-Kt,jr-dn,Ct,Et+dn),dn=jr}Fe+=Kt,Et+=Kt,++_t&Pr||(Sr+=xr)}et!=be.nc&&n(fe,se-Ve,fe,se+(et-Re-1)*Ve,Ve);break;case 1:for(Ve=we,Xe=Fe,Kt=(we=be.Ea)-(Et=we&~(Ct=(Fe=1<<be.b)-1)),_t=it(we,be.b),Ut=be.K,be=be.w+(Re>>be.b)*_t;Re<et;){for(Pr=Ut,xr=be,un=new ve,Sr=Xe+Et,Dn=Xe+we;Xe<Sr;)mt(Pr[xr++],un),Pi(un,Ve,Xe,Fe,fe,se),Xe+=Fe,se+=Fe;Xe<Dn&&(mt(Pr[xr++],un),Pi(un,Ve,Xe,Kt,fe,se),Xe+=Kt,se+=Kt),++Re&Ct||(be+=_t)}break;case 3:if(we==fe&&Fe==se&&0<be.b){for(Xe=fe,we=Ve=se+(et-Re)*Ve-(Et=(et-Re)*it(be.Ea,be.b)),Fe=fe,Ct=se,_t=[],Et=(Kt=Et)-1;0<=Et;--Et)_t[Et]=Fe[Ct+Et];for(Et=Kt-1;0<=Et;--Et)Xe[we+Et]=_t[Et];wr(be,Re,et,fe,Ve,fe,se)}else wr(be,Re,et,we,Fe,fe,se)}se=F,fe=D}fe!=D&&n(F,D,se,fe,Q)}function Ar(_,N){var D=_.V,F=_.Ba+_.c*_.C,K=N-_.C;if(t(N<=_.l.o),t(16>=K),0<K){var Q=_.l,ae=_.Ta,se=_.Ua,fe=Q.width;if(nr(_,K,D,F),K=se=[se],t((D=_.C)<(F=N)),t(Q.v<Q.va),F>Q.o&&(F=Q.o),D<Q.j){var be=Q.j-D;D=Q.j,K[0]+=be*fe}if(D>=F?D=0:(K[0]+=4*Q.v,Q.ka=D-Q.j,Q.U=Q.va-Q.v,Q.T=F-D,D=1),D){if(se=se[0],11>(D=_.ca).S){var Re=D.f.RGBA,et=(F=D.S,K=Q.U,Q=Q.T,be=Re.eb,Re.A),we=Q;for(Re=Re.fb+_.Ma*Re.A;0<we--;){var Fe=ae,Ve=se,_t=K,Xe=be,Ct=Re;switch(F){case _1:hn(Fe,Ve,_t,Xe,Ct);break;case S1:yr(Fe,Ve,_t,Xe,Ct);break;case fC:yr(Fe,Ve,_t,Xe,Ct),hy(Xe,Ct,0,_t,1,0);break;case iM:xa(Fe,Ve,_t,Xe,Ct);break;case j1:Tt(Fe,Ve,_t,Xe,Ct,1);break;case hC:Tt(Fe,Ve,_t,Xe,Ct,1),hy(Xe,Ct,0,_t,1,0);break;case N1:Tt(Fe,Ve,_t,Xe,Ct,0);break;case C1:Tt(Fe,Ve,_t,Xe,Ct,0),hy(Xe,Ct,1,_t,1,0);break;case dC:Fn(Fe,Ve,_t,Xe,Ct);break;case mC:Fn(Fe,Ve,_t,Xe,Ct),JD(Xe,Ct,_t,1,0);break;case oM:In(Fe,Ve,_t,Xe,Ct);break;default:t(0)}se+=fe,Re+=et}_.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");t(_.Ma<=D.height)}}_.C=N,t(_.C<=_.i)}function cn(_){var N;if(0<_.ua)return 0;for(N=0;N<_.Wb;++N){var D=_.Ya[N].G,F=_.Ya[N].H;if(0<D[1][F[1]+0].g||0<D[2][F[2]+0].g||0<D[3][F[3]+0].g)return 0}return 1}function On(_,N,D,F,K,Q){if(_.Z!=0){var ae=_.qd,se=_.rd;for(t(Jd[_.Z]!=null);N<D;++N)Jd[_.Z](ae,se,F,K,F,K,Q),ae=F,se=K,K+=Q;_.qd=ae,_.rd=se}}function ca(_,N){var D=_.l.ma,F=D.Z==0||D.Z==1?_.l.j:_.C;if(F=_.C<F?F:_.C,t(N<=_.l.o),N>F){var K=_.l.width,Q=D.ca,ae=D.tb+K*F,se=_.V,fe=_.Ba+_.c*F,be=_.gc;t(_.ab==1),t(be[0].hc==3),Tr(be[0],F,N,se,fe,Q,ae),On(D,F,N,Q,ae,K)}_.C=_.Ma=N}function Yn(_,N,D,F,K,Q,ae){var se=_.$/F,fe=_.$%F,be=_.m,Re=_.s,et=D+_.$,we=et;K=D+F*K;var Fe=D+F*Q,Ve=280+Re.ua,_t=_.Pb?se:16777216,Xe=0<Re.ua?Re.Wa:null,Ct=Re.wc,Et=et<Fe?Qt(Re,fe,se):null;t(_.C<Q),t(Fe<=K);var Kt=!1;e:for(;;){for(;Kt||et<Fe;){var Ut=0;if(se>=_t){var Pr=et-D;t((_t=_).Pb),_t.wd=_t.m,_t.xd=Pr,0<_t.s.ua&&Ft(_t.s.Wa,_t.s.vb),_t=se+vae}if(fe&Ct||(Et=Qt(Re,fe,se)),t(Et!=null),Et.Qb&&(N[et]=Et.qb,Kt=!0),!Kt)if(Z(be),Et.jc){Ut=be,Pr=N;var xr=et,un=Et.pd[X(Ut)&Ks-1];t(Et.jc),256>un.g?(Y(Ut,Ut.u+un.g),Pr[xr]=un.value,Ut=0):(Y(Ut,Ut.u+un.g-256),t(256<=un.value),Ut=un.value),Ut==0&&(Kt=!0)}else Ut=wt(Et.G[0],Et.H[0],be);if(be.h)break;if(Kt||256>Ut){if(!Kt)if(Et.nd)N[et]=(Et.qb|Ut<<8)>>>0;else{if(Z(be),Kt=wt(Et.G[1],Et.H[1],be),Z(be),Pr=wt(Et.G[2],Et.H[2],be),xr=wt(Et.G[3],Et.H[3],be),be.h)break;N[et]=(xr<<24|Kt<<16|Ut<<8|Pr)>>>0}if(Kt=!1,++et,++fe>=F&&(fe=0,++se,ae!=null&&se<=Q&&!(se%16)&&ae(_,se),Xe!=null))for(;we<et;)Ut=N[we++],Xe.X[(506832829*Ut&4294967295)>>>Xe.Mb]=Ut}else if(280>Ut){if(Ut=st(Ut-256,be),Pr=wt(Et.G[4],Et.H[4],be),Z(be),Pr=Mt(F,Pr=st(Pr,be)),be.h)break;if(et-D<Pr||K-et<Ut)break e;for(xr=0;xr<Ut;++xr)N[et+xr]=N[et+xr-Pr];for(et+=Ut,fe+=Ut;fe>=F;)fe-=F,++se,ae!=null&&se<=Q&&!(se%16)&&ae(_,se);if(t(et<=K),fe&Ct&&(Et=Qt(Re,fe,se)),Xe!=null)for(;we<et;)Ut=N[we++],Xe.X[(506832829*Ut&4294967295)>>>Xe.Mb]=Ut}else{if(!(Ut<Ve))break e;for(Kt=Ut-280,t(Xe!=null);we<et;)Ut=N[we++],Xe.X[(506832829*Ut&4294967295)>>>Xe.Mb]=Ut;Ut=et,t(!(Kt>>>(Pr=Xe).Xa)),N[Ut]=Pr.X[Kt],Kt=!0}Kt||t(be.h==q(be))}if(_.Pb&&be.h&&et<K)t(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Ft(_.s.vb,_.s.Wa);else{if(be.h)break e;ae?.(_,se>Q?Q:se),_.a=0,_.$=et-D}return 1}return _.a=3,0}function oi(_){t(_!=null),_.vc=null,_.yc=null,_.Ya=null;var N=_.Wa;N!=null&&(N.X=null),_.vb=null,t(_!=null)}function An(){var _=new mr;return _==null?null:(_.a=0,_.xb=cM,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),pt=nt,Pi=At,hn=Je,yr=Dt,Fn=qe,In=lt,xa=Bt,E.VP8LMapColor32b=Nr,E.VP8LMapColor8b=pa,_)}function ua(_,N,D,F,K){var Q=1,ae=[_],se=[N],fe=F.m,be=F.s,Re=null,et=0;e:for(;;){if(D)for(;Q&&de(fe,1);){var we=ae,Fe=se,Ve=F,_t=1,Xe=Ve.m,Ct=Ve.gc[Ve.ab],Et=de(Xe,2);if(Ve.Oc&1<<Et)Q=0;else{switch(Ve.Oc|=1<<Et,Ct.hc=Et,Ct.Ea=we[0],Ct.nc=Fe[0],Ct.K=[null],++Ve.ab,t(4>=Ve.ab),Et){case 0:case 1:Ct.b=de(Xe,3)+2,_t=ua(it(Ct.Ea,Ct.b),it(Ct.nc,Ct.b),0,Ve,Ct.K),Ct.K=Ct.K[0];break;case 3:var Kt,Ut=de(Xe,8)+1,Pr=16<Ut?0:4<Ut?1:2<Ut?2:3;if(we[0]=it(Ct.Ea,Pr),Ct.b=Pr,Kt=_t=ua(Ut,1,0,Ve,Ct.K)){var xr,un=Ut,Sr=Ct,Dn=1<<(8>>Sr.b),zi=i(Dn);if(zi==null)Kt=0;else{var dn=Sr.K[0],jr=Sr.w;for(zi[0]=Sr.K[0][0],xr=1;xr<1*un;++xr)zi[xr]=ft(dn[jr+xr],zi[xr-1]);for(;xr<4*Dn;++xr)zi[xr]=0;Sr.K[0]=null,Sr.K[0]=zi,Kt=1}}_t=Kt;break;case 2:break;default:t(0)}Q=_t}}if(ae=ae[0],se=se[0],Q&&de(fe,1)&&!(Q=1<=(et=de(fe,4))&&11>=et)){F.a=3;break e}var or;if(or=Q)t:{var yi,an,Bn,Ra=F,bo=ae,ns=se,ui=et,$o=D,as=Ra.m,qi=Ra.s,Un=[null],ra=1,di=0,na=gae[ui];r:for(;;){if($o&&de(as,1)){var wo=de(as,3)+2,fc=it(bo,wo),xi=it(ns,wo),Cs=fc*xi;if(!ua(fc,xi,0,Ra,Un))break r;for(Un=Un[0],qi.xc=wo,yi=0;yi<Cs;++yi){var wa=Un[yi]>>8&65535;Un[yi]=wa,wa>=ra&&(ra=wa+1)}}if(as.h)break r;for(an=0;5>an;++an){var Ui=sM[an];!an&&0<ui&&(Ui+=1<<ui),di<Ui&&(di=Ui)}var Js=o(ra*na,I),is=ra,Qs=o(is,z);if(Qs==null)var Zs=null;else t(65536>=is),Zs=Qs;var As=i(di);if(Zs==null||As==null||Js==null){Ra.a=1;break r}var el=Js;for(yi=Bn=0;yi<ra;++yi){var Na=Zs[yi],tl=Na.G,hc=Na.H,Dh=0,Bu=1,_o=0;for(an=0;5>an;++an){Ui=sM[an],tl[an]=el,hc[an]=Bn,!an&&0<ui&&(Ui+=1<<ui);a:{var k1,yC=Ui,O1=Ra,gy=As,Lae=el,$ae=Bn,xC=0,Qd=O1.m,Fae=de(Qd,1);if(a(gy,0,0,yC),Fae){var Bae=de(Qd,1)+1,zae=de(Qd,1),yM=de(Qd,zae==0?1:8);gy[yM]=1,Bae==2&&(gy[yM=de(Qd,8)]=1);var T1=1}else{var xM=i(19),bM=de(Qd,4)+4;if(19<bM){O1.a=3;var I1=0;break a}for(k1=0;k1<bM;++k1)xM[mae[k1]]=de(Qd,3);var bC=void 0,vy=void 0,wM=O1,qae=xM,D1=yC,_M=gy,wC=0,Zd=wM.m,SM=8,jM=o(128,I);n:for(;T(jM,0,7,qae,19);){if(de(Zd,1)){var Uae=2+2*de(Zd,3);if((bC=2+de(Zd,Uae))>D1)break n}else bC=D1;for(vy=0;vy<D1&&bC--;){Z(Zd);var NM=jM[0+(127&X(Zd))];Y(Zd,Zd.u+NM.g);var _p=NM.value;if(16>_p)_M[vy++]=_p,_p!=0&&(SM=_p);else{var Wae=_p==16,CM=_p-16,Vae=fae[CM],AM=de(Zd,dae[CM])+Vae;if(vy+AM>D1)break n;for(var Hae=Wae?SM:0;0<AM--;)_M[vy++]=Hae}}wC=1;break n}wC||(wM.a=3),T1=wC}(T1=T1&&!Qd.h)&&(xC=T(Lae,$ae,8,gy,yC)),T1&&xC!=0?I1=xC:(O1.a=3,I1=0)}if(I1==0)break r;if(Bu&&hae[an]==1&&(Bu=el[Bn].g==0),Dh+=el[Bn].g,Bn+=I1,3>=an){var yy,_C=As[0];for(yy=1;yy<Ui;++yy)As[yy]>_C&&(_C=As[yy]);_o+=_C}}if(Na.nd=Bu,Na.Qb=0,Bu&&(Na.qb=(tl[3][hc[3]+0].value<<24|tl[1][hc[1]+0].value<<16|tl[2][hc[2]+0].value)>>>0,Dh==0&&256>tl[0][hc[0]+0].value&&(Na.Qb=1,Na.qb+=tl[0][hc[0]+0].value<<8)),Na.jc=!Na.Qb&&6>_o,Na.jc){var M1,zu=Na;for(M1=0;M1<Ks;++M1){var ef=M1,tf=zu.pd[ef],R1=zu.G[0][zu.H[0]+ef];256<=R1.value?(tf.g=R1.g+256,tf.value=R1.value):(tf.g=0,tf.value=0,ef>>=Vt(R1,8,tf),ef>>=Vt(zu.G[1][zu.H[1]+ef],16,tf),ef>>=Vt(zu.G[2][zu.H[2]+ef],0,tf),Vt(zu.G[3][zu.H[3]+ef],24,tf))}}}qi.vc=Un,qi.Wb=ra,qi.Ya=Zs,qi.yc=Js,or=1;break t}or=0}if(!(Q=or)){F.a=3;break e}if(0<et){if(be.ua=1<<et,!ue(be.Wa,et)){F.a=1,Q=0;break e}}else be.ua=0;var SC=F,PM=ae,Gae=se,jC=SC.s,NC=jC.xc;if(SC.c=PM,SC.i=Gae,jC.md=it(PM,NC),jC.wc=NC==0?-1:(1<<NC)-1,D){F.xb=jae;break e}if((Re=i(ae*se))==null){F.a=1,Q=0;break e}Q=(Q=Yn(F,Re,0,ae,se,se,null))&&!fe.h;break e}return Q?(K!=null?K[0]=Re:(t(Re==null),t(D)),F.$=0,D||oi(be)):oi(be),Q}function Ni(_,N){var D=_.c*_.i,F=D+N+16*N;return t(_.c<=N),_.V=i(F),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+D+N,1)}function ei(_,N){var D=_.C,F=N-D,K=_.V,Q=_.Ba+_.c*D;for(t(N<=_.l.o);0<F;){var ae=16<F?16:F,se=_.l.ma,fe=_.l.width,be=fe*ae,Re=se.ca,et=se.tb+fe*D,we=_.Ta,Fe=_.Ua;nr(_,ae,K,Q),ZD(we,Fe,Re,et,be),On(se,D,D+ae,Re,et,fe),F-=ae,K+=ae*_.c,D+=ae}t(D==N),_.C=_.Ma=N}function da(){this.ub=this.yd=this.td=this.Rb=0}function Ia(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function si(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Xn(){this.Yb=function(){var _=[];return function N(D,F,K){for(var Q=K[F],ae=0;ae<Q&&(D.push(K.length>F+1?[]:0),!(K.length<F+1));ae++)N(D[ae],F+1,K)}(_,0,[3,11]),_}()}function va(){this.jb=i(3),this.Wc=l([4,8],Xn),this.Xc=l([4,17],Xn)}function Ri(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Sn(){this.ld=this.La=this.dd=this.tc=0}function Io(){this.Na=this.la=0}function Li(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yo(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ci(){this.uc=this.M=this.Nb=0,this.wa=Array(new Sn),this.Y=0,this.ya=Array(new yo),this.aa=0,this.l=new Pt}function J(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Le(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new da,this.Kc=new Ia,this.ed=new Ri,this.Qa=new si,this.Ic=this.$c=this.Aa=0,this.D=new Ci,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,L),this.ia=0,this.pb=o(4,Li),this.Pa=new va,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new J),this.Hd=0,this.rb=Array(new Io),this.sb=0,this.wa=Array(new Sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yo),this.L=this.aa=0,this.gd=l([4,2],Sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yt(){var _=new Le;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,my||(my=te)),_}function ot(_,N,D){return _.a==0&&(_.a=N,_.sc=D,_.cb=0),0}function Lt(_,N,D){return 3<=D&&_[N+0]==157&&_[N+1]==1&&_[N+2]==42}function ir(_,N){if(_==null)return 0;if(_.a=0,_.sc="OK",N==null)return ot(_,2,"null VP8Io passed to VP8GetHeaders()");var D=N.data,F=N.w,K=N.ha;if(4>K)return ot(_,7,"Truncated header.");var Q=D[F+0]|D[F+1]<<8|D[F+2]<<16,ae=_.Od;if(ae.Rb=!(1&Q),ae.td=Q>>1&7,ae.yd=Q>>4&1,ae.ub=Q>>5,3<ae.td)return ot(_,3,"Incorrect keyframe parameters.");if(!ae.yd)return ot(_,4,"Frame not displayable.");F+=3,K-=3;var se=_.Kc;if(ae.Rb){if(7>K)return ot(_,7,"cannot parse picture header");if(!Lt(D,F,K))return ot(_,3,"Bad code word");se.c=16383&(D[F+4]<<8|D[F+3]),se.Td=D[F+4]>>6,se.i=16383&(D[F+6]<<8|D[F+5]),se.Ud=D[F+6]>>6,F+=7,K-=7,_.za=se.c+15>>4,_.Ub=se.i+15>>4,N.width=se.c,N.height=se.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((Q=_.Pa).jb,0,255,Q.jb.length),t((Q=_.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,a(Q.Zb,0,0,Q.Zb.length),a(Q.Lb,0,0,Q.Lb)}if(ae.ub>K)return ot(_,7,"bad partition length");W(Q=_.m,D,F,ae.ub),F+=ae.ub,K-=ae.ub,ae.Rb&&(se.Ld=re(Q),se.Kd=re(Q)),se=_.Qa;var fe,be=_.Pa;if(t(Q!=null),t(se!=null),se.Cb=re(Q),se.Cb){if(se.Bb=re(Q),re(Q)){for(se.Fb=re(Q),fe=0;4>fe;++fe)se.Zb[fe]=re(Q)?$(Q,7):0;for(fe=0;4>fe;++fe)se.Lb[fe]=re(Q)?$(Q,6):0}if(se.Bb)for(fe=0;3>fe;++fe)be.jb[fe]=re(Q)?U(Q,8):255}else se.Bb=0;if(Q.Ka)return ot(_,3,"cannot parse segment header");if((se=_.ed).zd=re(Q),se.Tb=U(Q,6),se.wb=U(Q,3),se.Pc=re(Q),se.Pc&&re(Q)){for(be=0;4>be;++be)re(Q)&&(se.vd[be]=$(Q,6));for(be=0;4>be;++be)re(Q)&&(se.od[be]=$(Q,6))}if(_.L=se.Tb==0?0:se.zd?1:2,Q.Ka)return ot(_,3,"cannot parse filter header");var Re=K;if(K=fe=F,F=fe+Re,se=Re,_.Xb=(1<<U(_.m,2))-1,Re<3*(be=_.Xb))D=7;else{for(fe+=3*be,se-=3*be,Re=0;Re<be;++Re){var et=D[K+0]|D[K+1]<<8|D[K+2]<<16;et>se&&(et=se),W(_.Jc[+Re],D,fe,et),fe+=et,se-=et,K+=3}W(_.Jc[+be],D,fe,se),D=fe<F?0:5}if(D!=0)return ot(_,D,"cannot parse partitions");for(D=U(fe=_.m,7),K=re(fe)?$(fe,4):0,F=re(fe)?$(fe,4):0,se=re(fe)?$(fe,4):0,be=re(fe)?$(fe,4):0,fe=re(fe)?$(fe,4):0,Re=_.Qa,et=0;4>et;++et){if(Re.Cb){var we=Re.Zb[et];Re.Fb||(we+=D)}else{if(0<et){_.pb[et]=_.pb[0];continue}we=D}var Fe=_.pb[et];Fe.Sc[0]=pC[Ha(we+K,127)],Fe.Sc[1]=gC[Ha(we+0,127)],Fe.Eb[0]=2*pC[Ha(we+F,127)],Fe.Eb[1]=101581*gC[Ha(we+se,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=pC[Ha(we+be,117)],Fe.Qc[1]=gC[Ha(we+fe,127)],Fe.lc=we+fe}if(!ae.Rb)return ot(_,4,"Not a key frame.");for(re(Q),ae=_.Pa,D=0;4>D;++D){for(K=0;8>K;++K)for(F=0;3>F;++F)for(se=0;11>se;++se)be=Se(Q,_ae[D][K][F][se])?U(Q,8):bae[D][K][F][se],ae.Wc[D][K].Yb[F][se]=be;for(K=0;17>K;++K)ae.Xc[D][K]=ae.Wc[D][Sae[K]]}return _.kc=re(Q),_.kc&&(_.Bd=U(Q,8)),_.cb=1}function te(_,N,D,F,K,Q,ae){var se=N[K].Yb[D];for(D=0;16>K;++K){if(!Se(_,se[D+0]))return K;for(;!Se(_,se[D+1]);)if(se=N[++K].Yb[0],D=0,K==16)return 16;var fe=N[K+1].Yb;if(Se(_,se[D+2])){var be=_,Re=0;if(Se(be,(we=se)[(et=D)+3]))if(Se(be,we[et+6])){for(se=0,et=2*(Re=Se(be,we[et+8]))+(we=Se(be,we[et+9+Re])),Re=0,we=yae[et];we[se];++se)Re+=Re+Se(be,we[se]);Re+=3+(8<<et)}else Se(be,we[et+7])?(Re=7+2*Se(be,165),Re+=Se(be,145)):Re=5+Se(be,159);else Re=Se(be,we[et+4])?3+Se(be,we[et+5]):2;se=fe[2]}else Re=1,se=fe[1];fe=ae+xae[K],0>(be=_).b&&ge(be);var et,we=be.b,Fe=(et=be.Ca>>1)-(be.I>>we)>>31;--be.b,be.Ca+=Fe,be.Ca|=1,be.I-=(et+1&Fe)<<we,Q[fe]=((Re^Fe)-Fe)*F[(0<K)+0]}return 16}function Ne(_){var N=_.rb[_.sb-1];N.la=0,N.Na=0,a(_.zc,0,0,_.zc.length),_.ja=0}function V(_,N,D,F,K){K=_[N+D+32*F]+(K>>3),_[N+D+32*F]=-256&K?0>K?0:255:K}function ee(_,N,D,F,K,Q){V(_,N,0,D,F+K),V(_,N,1,D,F+Q),V(_,N,2,D,F-Q),V(_,N,3,D,F-K)}function oe(_){return(20091*_>>16)+_}function ye(_,N,D,F){var K,Q=0,ae=i(16);for(K=0;4>K;++K){var se=_[N+0]+_[N+8],fe=_[N+0]-_[N+8],be=(35468*_[N+4]>>16)-oe(_[N+12]),Re=oe(_[N+4])+(35468*_[N+12]>>16);ae[Q+0]=se+Re,ae[Q+1]=fe+be,ae[Q+2]=fe-be,ae[Q+3]=se-Re,Q+=4,N++}for(K=Q=0;4>K;++K)se=(_=ae[Q+0]+4)+ae[Q+8],fe=_-ae[Q+8],be=(35468*ae[Q+4]>>16)-oe(ae[Q+12]),V(D,F,0,0,se+(Re=oe(ae[Q+4])+(35468*ae[Q+12]>>16))),V(D,F,1,0,fe+be),V(D,F,2,0,fe-be),V(D,F,3,0,se-Re),Q++,F+=32}function ke(_,N,D,F){var K=_[N+0]+4,Q=35468*_[N+4]>>16,ae=oe(_[N+4]),se=35468*_[N+1]>>16;ee(D,F,0,K+ae,_=oe(_[N+1]),se),ee(D,F,1,K+Q,_,se),ee(D,F,2,K-Q,_,se),ee(D,F,3,K-ae,_,se)}function Me(_,N,D,F,K){ye(_,N,D,F),K&&ye(_,N+16,D,F+4)}function ie(_,N,D,F){rs(_,N+0,D,F,1),rs(_,N+32,D,F+128,1)}function ce(_,N,D,F){var K;for(_=_[N+0]+4,K=0;4>K;++K)for(N=0;4>N;++N)V(D,F,N,K,_)}function he(_,N,D,F){_[N+0]&&qn(_,N+0,D,F),_[N+16]&&qn(_,N+16,D,F+4),_[N+32]&&qn(_,N+32,D,F+128),_[N+48]&&qn(_,N+48,D,F+128+4)}function Ke(_,N,D,F){var K,Q=i(16);for(K=0;4>K;++K){var ae=_[N+0+K]+_[N+12+K],se=_[N+4+K]+_[N+8+K],fe=_[N+4+K]-_[N+8+K],be=_[N+0+K]-_[N+12+K];Q[0+K]=ae+se,Q[8+K]=ae-se,Q[4+K]=be+fe,Q[12+K]=be-fe}for(K=0;4>K;++K)ae=(_=Q[0+4*K]+3)+Q[3+4*K],se=Q[1+4*K]+Q[2+4*K],fe=Q[1+4*K]-Q[2+4*K],be=_-Q[3+4*K],D[F+0]=ae+se>>3,D[F+16]=be+fe>>3,D[F+32]=ae-se>>3,D[F+48]=be-fe>>3,F+=64}function rt(_,N,D){var F,K=N-32,Q=Xs,ae=255-_[K-1];for(F=0;F<D;++F){var se,fe=Q,be=ae+_[N-1];for(se=0;se<D;++se)_[N+se]=fe[be+_[K+se]];N+=32}}function Ge(_,N){rt(_,N,4)}function $e(_,N){rt(_,N,8)}function bt(_,N){rt(_,N,16)}function vt(_,N){var D;for(D=0;16>D;++D)n(_,N+32*D,_,N-32,16)}function ht(_,N){var D;for(D=16;0<D;--D)a(_,N,_[N-1],16),N+=32}function tr(_,N,D){var F;for(F=0;16>F;++F)a(N,D+32*F,_,16)}function Gt(_,N){var D,F=16;for(D=0;16>D;++D)F+=_[N-1+32*D]+_[N+D-32];tr(F>>5,_,N)}function ct(_,N){var D,F=8;for(D=0;16>D;++D)F+=_[N-1+32*D];tr(F>>4,_,N)}function sr(_,N){var D,F=8;for(D=0;16>D;++D)F+=_[N+D-32];tr(F>>4,_,N)}function dr(_,N){tr(128,_,N)}function Ht(_,N,D){return _+2*N+D+2>>2}function Br(_,N){var D,F=N-32;for(F=new Uint8Array([Ht(_[F-1],_[F+0],_[F+1]),Ht(_[F+0],_[F+1],_[F+2]),Ht(_[F+1],_[F+2],_[F+3]),Ht(_[F+2],_[F+3],_[F+4])]),D=0;4>D;++D)n(_,N+32*D,F,0,F.length)}function vn(_,N){var D=_[N-1],F=_[N-1+32],K=_[N-1+64],Q=_[N-1+96];Ie(_,N+0,16843009*Ht(_[N-1-32],D,F)),Ie(_,N+32,16843009*Ht(D,F,K)),Ie(_,N+64,16843009*Ht(F,K,Q)),Ie(_,N+96,16843009*Ht(K,Q,Q))}function Da(_,N){var D,F=4;for(D=0;4>D;++D)F+=_[N+D-32]+_[N-1+32*D];for(F>>=3,D=0;4>D;++D)a(_,N+32*D,F,4)}function It(_,N){var D=_[N-1+0],F=_[N-1+32],K=_[N-1+64],Q=_[N-1-32],ae=_[N+0-32],se=_[N+1-32],fe=_[N+2-32],be=_[N+3-32];_[N+0+96]=Ht(F,K,_[N-1+96]),_[N+1+96]=_[N+0+64]=Ht(D,F,K),_[N+2+96]=_[N+1+64]=_[N+0+32]=Ht(Q,D,F),_[N+3+96]=_[N+2+64]=_[N+1+32]=_[N+0+0]=Ht(ae,Q,D),_[N+3+64]=_[N+2+32]=_[N+1+0]=Ht(se,ae,Q),_[N+3+32]=_[N+2+0]=Ht(fe,se,ae),_[N+3+0]=Ht(be,fe,se)}function Zn(_,N){var D=_[N+1-32],F=_[N+2-32],K=_[N+3-32],Q=_[N+4-32],ae=_[N+5-32],se=_[N+6-32],fe=_[N+7-32];_[N+0+0]=Ht(_[N+0-32],D,F),_[N+1+0]=_[N+0+32]=Ht(D,F,K),_[N+2+0]=_[N+1+32]=_[N+0+64]=Ht(F,K,Q),_[N+3+0]=_[N+2+32]=_[N+1+64]=_[N+0+96]=Ht(K,Q,ae),_[N+3+32]=_[N+2+64]=_[N+1+96]=Ht(Q,ae,se),_[N+3+64]=_[N+2+96]=Ht(ae,se,fe),_[N+3+96]=Ht(se,fe,fe)}function Kr(_,N){var D=_[N-1+0],F=_[N-1+32],K=_[N-1+64],Q=_[N-1-32],ae=_[N+0-32],se=_[N+1-32],fe=_[N+2-32],be=_[N+3-32];_[N+0+0]=_[N+1+64]=Q+ae+1>>1,_[N+1+0]=_[N+2+64]=ae+se+1>>1,_[N+2+0]=_[N+3+64]=se+fe+1>>1,_[N+3+0]=fe+be+1>>1,_[N+0+96]=Ht(K,F,D),_[N+0+64]=Ht(F,D,Q),_[N+0+32]=_[N+1+96]=Ht(D,Q,ae),_[N+1+32]=_[N+2+96]=Ht(Q,ae,se),_[N+2+32]=_[N+3+96]=Ht(ae,se,fe),_[N+3+32]=Ht(se,fe,be)}function $i(_,N){var D=_[N+0-32],F=_[N+1-32],K=_[N+2-32],Q=_[N+3-32],ae=_[N+4-32],se=_[N+5-32],fe=_[N+6-32],be=_[N+7-32];_[N+0+0]=D+F+1>>1,_[N+1+0]=_[N+0+64]=F+K+1>>1,_[N+2+0]=_[N+1+64]=K+Q+1>>1,_[N+3+0]=_[N+2+64]=Q+ae+1>>1,_[N+0+32]=Ht(D,F,K),_[N+1+32]=_[N+0+96]=Ht(F,K,Q),_[N+2+32]=_[N+1+96]=Ht(K,Q,ae),_[N+3+32]=_[N+2+96]=Ht(Q,ae,se),_[N+3+64]=Ht(ae,se,fe),_[N+3+96]=Ht(se,fe,be)}function kl(_,N){var D=_[N-1+0],F=_[N-1+32],K=_[N-1+64],Q=_[N-1+96];_[N+0+0]=D+F+1>>1,_[N+2+0]=_[N+0+32]=F+K+1>>1,_[N+2+32]=_[N+0+64]=K+Q+1>>1,_[N+1+0]=Ht(D,F,K),_[N+3+0]=_[N+1+32]=Ht(F,K,Q),_[N+3+32]=_[N+1+64]=Ht(K,Q,Q),_[N+3+64]=_[N+2+64]=_[N+0+96]=_[N+1+96]=_[N+2+96]=_[N+3+96]=Q}function nn(_,N){var D=_[N-1+0],F=_[N-1+32],K=_[N-1+64],Q=_[N-1+96],ae=_[N-1-32],se=_[N+0-32],fe=_[N+1-32],be=_[N+2-32];_[N+0+0]=_[N+2+32]=D+ae+1>>1,_[N+0+32]=_[N+2+64]=F+D+1>>1,_[N+0+64]=_[N+2+96]=K+F+1>>1,_[N+0+96]=Q+K+1>>1,_[N+3+0]=Ht(se,fe,be),_[N+2+0]=Ht(ae,se,fe),_[N+1+0]=_[N+3+32]=Ht(D,ae,se),_[N+1+32]=_[N+3+64]=Ht(F,D,ae),_[N+1+64]=_[N+3+96]=Ht(K,F,D),_[N+1+96]=Ht(Q,K,F)}function $n(_,N){var D;for(D=0;8>D;++D)n(_,N+32*D,_,N-32,8)}function fa(_,N){var D;for(D=0;8>D;++D)a(_,N,_[N-1],8),N+=32}function ha(_,N,D){var F;for(F=0;8>F;++F)a(N,D+32*F,_,8)}function Fi(_,N){var D,F=8;for(D=0;8>D;++D)F+=_[N+D-32]+_[N-1+32*D];ha(F>>4,_,N)}function ma(_,N){var D,F=4;for(D=0;8>D;++D)F+=_[N+D-32];ha(F>>3,_,N)}function jn(_,N){var D,F=4;for(D=0;8>D;++D)F+=_[N-1+32*D];ha(F>>3,_,N)}function Ua(_,N){ha(128,_,N)}function Ol(_,N,D){var F=_[N-D],K=_[N+0],Q=3*(K-F)+uC[1020+_[N-2*D]-_[N+D]],ae=w1[112+(Q+4>>3)];_[N-D]=Xs[255+F+w1[112+(Q+3>>3)]],_[N+0]=Xs[255+K-ae]}function li(_,N,D,F){var K=_[N+0],Q=_[N+D];return Ml[255+_[N-2*D]-_[N-D]]>F||Ml[255+Q-K]>F}function Ss(_,N,D,F){return 4*Ml[255+_[N-D]-_[N+0]]+Ml[255+_[N-2*D]-_[N+D]]<=F}function Hs(_,N,D,F,K){var Q=_[N-3*D],ae=_[N-2*D],se=_[N-D],fe=_[N+0],be=_[N+D],Re=_[N+2*D],et=_[N+3*D];return 4*Ml[255+se-fe]+Ml[255+ae-be]>F?0:Ml[255+_[N-4*D]-Q]<=K&&Ml[255+Q-ae]<=K&&Ml[255+ae-se]<=K&&Ml[255+et-Re]<=K&&Ml[255+Re-be]<=K&&Ml[255+be-fe]<=K}function Do(_,N,D,F){var K=2*F+1;for(F=0;16>F;++F)Ss(_,N+F,D,K)&&Ol(_,N+F,D)}function Tn(_,N,D,F){var K=2*F+1;for(F=0;16>F;++F)Ss(_,N+F*D,1,K)&&Ol(_,N+F*D,1)}function lc(_,N,D,F){var K;for(K=3;0<K;--K)Do(_,N+=4*D,D,F)}function Tl(_,N,D,F){var K;for(K=3;0<K;--K)Tn(_,N+=4,D,F)}function js(_,N,D,F,K,Q,ae,se){for(Q=2*Q+1;0<K--;){if(Hs(_,N,D,Q,ae))if(li(_,N,D,se))Ol(_,N,D);else{var fe=_,be=N,Re=D,et=fe[be-2*Re],we=fe[be-Re],Fe=fe[be+0],Ve=fe[be+Re],_t=fe[be+2*Re],Xe=27*(Et=uC[1020+3*(Fe-we)+uC[1020+et-Ve]])+63>>7,Ct=18*Et+63>>7,Et=9*Et+63>>7;fe[be-3*Re]=Xs[255+fe[be-3*Re]+Et],fe[be-2*Re]=Xs[255+et+Ct],fe[be-Re]=Xs[255+we+Xe],fe[be+0]=Xs[255+Fe-Xe],fe[be+Re]=Xs[255+Ve-Ct],fe[be+2*Re]=Xs[255+_t-Et]}N+=F}}function no(_,N,D,F,K,Q,ae,se){for(Q=2*Q+1;0<K--;){if(Hs(_,N,D,Q,ae))if(li(_,N,D,se))Ol(_,N,D);else{var fe=_,be=N,Re=D,et=fe[be-Re],we=fe[be+0],Fe=fe[be+Re],Ve=w1[112+(4+(_t=3*(we-et))>>3)],_t=w1[112+(_t+3>>3)],Xe=Ve+1>>1;fe[be-2*Re]=Xs[255+fe[be-2*Re]+Xe],fe[be-Re]=Xs[255+et+_t],fe[be+0]=Xs[255+we-Ve],fe[be+Re]=Xs[255+Fe-Xe]}N+=F}}function Kd(_,N,D,F,K,Q){js(_,N,D,1,16,F,K,Q)}function Gs(_,N,D,F,K,Q){js(_,N,1,D,16,F,K,Q)}function Xc(_,N,D,F,K,Q){var ae;for(ae=3;0<ae;--ae)no(_,N+=4*D,D,1,16,F,K,Q)}function kh(_,N,D,F,K,Q){var ae;for(ae=3;0<ae;--ae)no(_,N+=4,1,D,16,F,K,Q)}function O(_,N,D,F,K,Q,ae,se){js(_,N,K,1,8,Q,ae,se),js(D,F,K,1,8,Q,ae,se)}function H(_,N,D,F,K,Q,ae,se){js(_,N,1,K,8,Q,ae,se),js(D,F,1,K,8,Q,ae,se)}function xe(_,N,D,F,K,Q,ae,se){no(_,N+4*K,K,1,8,Q,ae,se),no(D,F+4*K,K,1,8,Q,ae,se)}function De(_,N,D,F,K,Q,ae,se){no(_,N+4,1,K,8,Q,ae,se),no(D,F+4,1,K,8,Q,ae,se)}function Be(){this.ba=new rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vr(){this.ua=0,this.Wa=new qt,this.vb=new qt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new I}function mr(){this.xb=this.a=0,this.l=new Pt,this.ca=new rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vr,this.ab=0,this.gc=o(4,Rt),this.Oc=0}function Mr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yr(_,N,D,F,K,Q,ae){for(_=_==null?0:_[N+0],N=0;N<ae;++N)K[Q+N]=_+D[F+N]&255,_=K[Q+N]}function Pn(_,N,D,F,K,Q,ae){var se;if(_==null)Yr(null,null,D,F,K,Q,ae);else for(se=0;se<ae;++se)K[Q+se]=_[N+se]+D[F+se]&255}function ea(_,N,D,F,K,Q,ae){if(_==null)Yr(null,null,D,F,K,Q,ae);else{var se,fe=_[N+0],be=fe,Re=fe;for(se=0;se<ae;++se)be=Re+(fe=_[N+se])-be,Re=D[F+se]+(-256&be?0>be?0:255:be)&255,be=fe,K[Q+se]=Re}}function ya(_,N,D,F){var K=N.width,Q=N.o;if(t(_!=null&&N!=null),0>D||0>=F||D+F>Q)return null;if(!_.Cc){if(_.ga==null){var ae;if(_.ga=new Mr,(ae=_.ga==null)||(ae=N.width*N.o,t(_.Gb.length==0),_.Gb=i(ae),_.Uc=0,_.Gb==null?ae=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,ae=1),ae=!ae),!ae){ae=_.ga;var se=_.Fa,fe=_.P,be=_.qc,Re=_.mb,et=_.nb,we=fe+1,Fe=be-1,Ve=ae.l;if(t(se!=null&&Re!=null&&N!=null),Jd[0]=null,Jd[1]=Yr,Jd[2]=Pn,Jd[3]=ea,ae.ca=Re,ae.tb=et,ae.c=N.width,ae.i=N.height,t(0<ae.c&&0<ae.i),1>=be)N=0;else if(ae.$a=3&se[fe+0],ae.Z=se[fe+0]>>2&3,ae.Lc=se[fe+0]>>4&3,fe=se[fe+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||fe)N=0;else if(Ve.put=He,Ve.ac=We,Ve.bc=xt,Ve.ma=ae,Ve.width=N.width,Ve.height=N.height,Ve.Da=N.Da,Ve.v=N.v,Ve.va=N.va,Ve.j=N.j,Ve.o=N.o,ae.$a)e:{t(ae.$a==1),N=An();t:for(;;){if(N==null){N=0;break e}if(t(ae!=null),ae.mc=N,N.c=ae.c,N.i=ae.i,N.l=ae.l,N.l.ma=ae,N.l.width=ae.c,N.l.height=ae.i,N.a=0,G(N.m,se,we,Fe),!ua(ae.c,ae.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&cn(N.s)?(ae.ic=1,se=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(se),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ae.ic=0,N=Ni(N,ae.c)),!N))break t;N=1;break e}ae.mc=null,N=0}else N=Fe>=ae.c*ae.i;ae=!N}if(ae)return null;_.ga.Lc!=1?_.Ga=0:F=Q-D}t(_.ga!=null),t(D+F<=Q);e:{if(N=(se=_.ga).c,Q=se.l.o,se.$a==0){if(we=_.rc,Fe=_.Vc,Ve=_.Fa,fe=_.P+1+D*N,be=_.mb,Re=_.nb+D*N,t(fe<=_.P+_.qc),se.Z!=0)for(t(Jd[se.Z]!=null),ae=0;ae<F;++ae)Jd[se.Z](we,Fe,Ve,fe,be,Re,N),we=be,Fe=Re,Re+=N,fe+=N;else for(ae=0;ae<F;++ae)n(be,Re,Ve,fe,N),we=be,Fe=Re,Re+=N,fe+=N;_.rc=we,_.Vc=Fe}else{if(t(se.mc!=null),N=D+F,t((ae=se.mc)!=null),t(N<=ae.i),ae.C>=N)N=1;else if(se.ic||Ns(),se.ic){se=ae.V,we=ae.Ba,Fe=ae.c;var _t=ae.i,Xe=(Ve=1,fe=ae.$/Fe,be=ae.$%Fe,Re=ae.m,et=ae.s,ae.$),Ct=Fe*_t,Et=Fe*N,Kt=et.wc,Ut=Xe<Et?Qt(et,be,fe):null;t(Xe<=Ct),t(N<=_t),t(cn(et));t:for(;;){for(;!Re.h&&Xe<Et;){if(be&Kt||(Ut=Qt(et,be,fe)),t(Ut!=null),Z(Re),256>(_t=wt(Ut.G[0],Ut.H[0],Re)))se[we+Xe]=_t,++Xe,++be>=Fe&&(be=0,++fe<=N&&!(fe%16)&&ca(ae,fe));else{if(!(280>_t)){Ve=0;break t}_t=st(_t-256,Re);var Pr,xr=wt(Ut.G[4],Ut.H[4],Re);if(Z(Re),!(Xe>=(xr=Mt(Fe,xr=st(xr,Re)))&&Ct-Xe>=_t)){Ve=0;break t}for(Pr=0;Pr<_t;++Pr)se[we+Xe+Pr]=se[we+Xe+Pr-xr];for(Xe+=_t,be+=_t;be>=Fe;)be-=Fe,++fe<=N&&!(fe%16)&&ca(ae,fe);Xe<Et&&be&Kt&&(Ut=Qt(et,be,fe))}t(Re.h==q(Re))}ca(ae,fe>N?N:fe);break t}!Ve||Re.h&&Xe<Ct?(Ve=0,ae.a=Re.h?5:3):ae.$=Xe,N=Ve}else N=Yn(ae,ae.V,ae.Ba,ae.c,ae.i,N,ei);if(!N){F=0;break e}}D+F>=Q&&(_.Cc=1),F=1}if(!F)return null;if(_.Cc&&((F=_.ga)!=null&&(F.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+D*K}function wn(_,N,D,F,K,Q){for(;0<K--;){var ae,se=_,fe=N+(D?1:0),be=_,Re=N+(D?0:3);for(ae=0;ae<F;++ae){var et=be[Re+4*ae];et!=255&&(et*=32897,se[fe+4*ae+0]=se[fe+4*ae+0]*et>>23,se[fe+4*ae+1]=se[fe+4*ae+1]*et>>23,se[fe+4*ae+2]=se[fe+4*ae+2]*et>>23)}N+=Q}}function Ma(_,N,D,F,K){for(;0<F--;){var Q;for(Q=0;Q<D;++Q){var ae=_[N+2*Q+0],se=15&(be=_[N+2*Q+1]),fe=4369*se,be=(240&be|be>>4)*fe>>16;_[N+2*Q+0]=(240&ae|ae>>4)*fe>>16&240|(15&ae|ae<<4)*fe>>16>>4&15,_[N+2*Q+1]=240&be|se}N+=K}}function Wa(_,N,D,F,K,Q,ae,se){var fe,be,Re=255;for(be=0;be<K;++be){for(fe=0;fe<F;++fe){var et=_[N+fe];Q[ae+4*fe]=et,Re&=et}N+=D,ae+=se}return Re!=255}function Va(_,N,D,F,K){var Q;for(Q=0;Q<K;++Q)D[F+Q]=_[N+Q]>>8}function Ns(){hy=wn,JD=Ma,QD=Wa,ZD=Va}function xo(_,N,D){E[_]=function(F,K,Q,ae,se,fe,be,Re,et,we,Fe,Ve,_t,Xe,Ct,Et,Kt){var Ut,Pr=Kt-1>>1,xr=se[fe+0]|be[Re+0]<<16,un=et[we+0]|Fe[Ve+0]<<16;t(F!=null);var Sr=3*xr+un+131074>>2;for(N(F[K+0],255&Sr,Sr>>16,_t,Xe),Q!=null&&(Sr=3*un+xr+131074>>2,N(Q[ae+0],255&Sr,Sr>>16,Ct,Et)),Ut=1;Ut<=Pr;++Ut){var Dn=se[fe+Ut]|be[Re+Ut]<<16,zi=et[we+Ut]|Fe[Ve+Ut]<<16,dn=xr+Dn+un+zi+524296,jr=dn+2*(Dn+un)>>3;Sr=jr+xr>>1,xr=(dn=dn+2*(xr+zi)>>3)+Dn>>1,N(F[K+2*Ut-1],255&Sr,Sr>>16,_t,Xe+(2*Ut-1)*D),N(F[K+2*Ut-0],255&xr,xr>>16,_t,Xe+(2*Ut-0)*D),Q!=null&&(Sr=dn+un>>1,xr=jr+zi>>1,N(Q[ae+2*Ut-1],255&Sr,Sr>>16,Ct,Et+(2*Ut-1)*D),N(Q[ae+2*Ut+0],255&xr,xr>>16,Ct,Et+(2*Ut+0)*D)),xr=Dn,un=zi}1&Kt||(Sr=3*xr+un+131074>>2,N(F[K+Kt-1],255&Sr,Sr>>16,_t,Xe+(Kt-1)*D),Q!=null&&(Sr=3*un+xr+131074>>2,N(Q[ae+Kt-1],255&Sr,Sr>>16,Ct,Et+(Kt-1)*D)))}}function Yd(){Rl[_1]=Nae,Rl[S1]=uM,Rl[iM]=Cae,Rl[j1]=dM,Rl[N1]=fM,Rl[dC]=hM,Rl[oM]=Aae,Rl[fC]=uM,Rl[hC]=dM,Rl[C1]=fM,Rl[mC]=hM}function Jc(_){return _&~Pae?0>_?0:255:_>>mM}function cc(_,N){return Jc((19077*_>>8)+(26149*N>>8)-14234)}function Mo(_,N,D){return Jc((19077*_>>8)-(6419*N>>8)-(13320*D>>8)+8708)}function Ru(_,N){return Jc((19077*_>>8)+(33050*N>>8)-17685)}function Ai(_,N,D,F,K){F[K+0]=cc(_,D),F[K+1]=Mo(_,N,D),F[K+2]=Ru(_,N)}function Il(_,N,D,F,K){F[K+0]=Ru(_,N),F[K+1]=Mo(_,N,D),F[K+2]=cc(_,D)}function ao(_,N,D,F,K){var Q=Mo(_,N,D);N=Q<<3&224|Ru(_,N)>>3,F[K+0]=248&cc(_,D)|Q>>5,F[K+1]=N}function Ro(_,N,D,F,K){var Q=240&Ru(_,N)|15;F[K+0]=240&cc(_,D)|Mo(_,N,D)>>4,F[K+1]=Q}function Qc(_,N,D,F,K){F[K+0]=255,Ai(_,N,D,F,K+1)}function Oh(_,N,D,F,K){Il(_,N,D,F,K),F[K+3]=255}function Th(_,N,D,F,K){Ai(_,N,D,F,K),F[K+3]=255}function Ha(_,N){return 0>_?0:_>N?N:_}function uc(_,N,D){E[_]=function(F,K,Q,ae,se,fe,be,Re,et){for(var we=Re+(-2&et)*D;Re!=we;)N(F[K+0],Q[ae+0],se[fe+0],be,Re),N(F[K+1],Q[ae+0],se[fe+0],be,Re+D),K+=2,++ae,++fe,Re+=2*D;1&et&&N(F[K+0],Q[ae+0],se[fe+0],be,Re)}}function Lu(_,N,D){return D==0?_==0?N==0?6:5:N==0?4:0:D}function io(_,N,D,F,K){switch(_>>>30){case 3:rs(N,D,F,K,0);break;case 2:Ys(N,D,F,K);break;case 1:qn(N,D,F,K)}}function ts(_,N){var D,F,K=N.M,Q=N.Nb,ae=_.oc,se=_.pc+40,fe=_.oc,be=_.pc+584,Re=_.oc,et=_.pc+600;for(D=0;16>D;++D)ae[se+32*D-1]=129;for(D=0;8>D;++D)fe[be+32*D-1]=129,Re[et+32*D-1]=129;for(0<K?ae[se-1-32]=fe[be-1-32]=Re[et-1-32]=129:(a(ae,se-32-1,127,21),a(fe,be-32-1,127,9),a(Re,et-32-1,127,9)),F=0;F<_.za;++F){var we=N.ya[N.aa+F];if(0<F){for(D=-1;16>D;++D)n(ae,se+32*D-4,ae,se+32*D+12,4);for(D=-1;8>D;++D)n(fe,be+32*D-4,fe,be+32*D+4,4),n(Re,et+32*D-4,Re,et+32*D+4,4)}var Fe=_.Gd,Ve=_.Hd+F,_t=we.ad,Xe=we.Hc;if(0<K&&(n(ae,se-32,Fe[Ve].y,0,16),n(fe,be-32,Fe[Ve].f,0,8),n(Re,et-32,Fe[Ve].ea,0,8)),we.Za){var Ct=ae,Et=se-32+16;for(0<K&&(F>=_.za-1?a(Ct,Et,Fe[Ve].y[15],4):n(Ct,Et,Fe[Ve+1].y,0,4)),D=0;4>D;D++)Ct[Et+128+D]=Ct[Et+256+D]=Ct[Et+384+D]=Ct[Et+0+D];for(D=0;16>D;++D,Xe<<=2)Ct=ae,Et=se+gM[D],dc[we.Ob[D]](Ct,Et),io(Xe,_t,16*+D,Ct,Et)}else if(Ct=Lu(F,K,we.Ob[0]),Xd[Ct](ae,se),Xe!=0)for(D=0;16>D;++D,Xe<<=2)io(Xe,_t,16*+D,ae,se+gM[D]);for(D=we.Gc,Ct=Lu(F,K,we.Dd),Fu[Ct](fe,be),Fu[Ct](Re,et),Xe=_t,Ct=fe,Et=be,255&(we=0|D)&&(170&we?Dl(Xe,256,Ct,Et):ba(Xe,256,Ct,Et)),we=Re,Xe=et,255&(D>>=8)&&(170&D?Dl(_t,320,we,Xe):ba(_t,320,we,Xe)),K<_.Ub-1&&(n(Fe[Ve].y,0,ae,se+480,16),n(Fe[Ve].f,0,fe,be+224,8),n(Fe[Ve].ea,0,Re,et+224,8)),D=8*Q*_.B,Fe=_.sa,Ve=_.ta+16*F+16*Q*_.R,_t=_.qa,we=_.ra+8*F+D,Xe=_.Ha,Ct=_.Ia+8*F+D,D=0;16>D;++D)n(Fe,Ve+D*_.R,ae,se+32*D,16);for(D=0;8>D;++D)n(_t,we+D*_.B,fe,be+32*D,8),n(Xe,Ct+D*_.B,Re,et+32*D,8)}}function Lo(_,N,D,F,K,Q,ae,se,fe){var be=[0],Re=[0],et=0,we=fe!=null?fe.kd:0,Fe=fe??new yt;if(_==null||12>D)return 7;Fe.data=_,Fe.w=N,Fe.ha=D,N=[N],D=[D],Fe.gb=[Fe.gb];e:{var Ve=N,_t=D,Xe=Fe.gb;if(t(_!=null),t(_t!=null),t(Xe!=null),Xe[0]=0,12<=_t[0]&&!r(_,Ve[0],"RIFF")){if(r(_,Ve[0]+8,"WEBP")){Xe=3;break e}var Ct=_e(_,Ve[0]+4);if(12>Ct||4294967286<Ct){Xe=3;break e}if(we&&Ct>_t[0]-8){Xe=7;break e}Xe[0]=Ct,Ve[0]+=12,_t[0]-=12}Xe=0}if(Xe!=0)return Xe;for(Ct=0<Fe.gb[0],D=D[0];;){e:{var Et=_;_t=N,Xe=D;var Kt=be,Ut=Re,Pr=Ve=[0];if((Sr=et=[et])[0]=0,8>Xe[0])Xe=7;else{if(!r(Et,_t[0],"VP8X")){if(_e(Et,_t[0]+4)!=10){Xe=3;break e}if(18>Xe[0]){Xe=7;break e}var xr=_e(Et,_t[0]+8),un=1+Ue(Et,_t[0]+12);if(2147483648<=un*(Et=1+Ue(Et,_t[0]+15))){Xe=3;break e}Pr!=null&&(Pr[0]=xr),Kt!=null&&(Kt[0]=un),Ut!=null&&(Ut[0]=Et),_t[0]+=18,Xe[0]-=18,Sr[0]=1}Xe=0}}if(et=et[0],Ve=Ve[0],Xe!=0)return Xe;if(_t=!!(2&Ve),!Ct&&et)return 3;if(Q!=null&&(Q[0]=!!(16&Ve)),ae!=null&&(ae[0]=_t),se!=null&&(se[0]=0),ae=be[0],Ve=Re[0],et&&_t&&fe==null){Xe=0;break}if(4>D){Xe=7;break}if(Ct&&et||!Ct&&!et&&!r(_,N[0],"ALPH")){D=[D],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{xr=_,Xe=N,Ct=D;var Sr=Fe.gb;Kt=Fe.na,Ut=Fe.P,Pr=Fe.Sa,un=22,t(xr!=null),t(Ct!=null),Et=Xe[0];var Dn=Ct[0];for(t(Kt!=null),t(Pr!=null),Kt[0]=null,Ut[0]=null,Pr[0]=0;;){if(Xe[0]=Et,Ct[0]=Dn,8>Dn){Xe=7;break e}var zi=_e(xr,Et+4);if(4294967286<zi){Xe=3;break e}var dn=8+zi+1&-2;if(un+=dn,0<Sr&&un>Sr){Xe=3;break e}if(!r(xr,Et,"VP8 ")||!r(xr,Et,"VP8L")){Xe=0;break e}if(Dn[0]<dn){Xe=7;break e}r(xr,Et,"ALPH")||(Kt[0]=xr,Ut[0]=Et+8,Pr[0]=zi),Et+=dn,Dn-=dn}}if(D=D[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],Xe!=0)break}D=[D],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(Sr=_,Xe=N,Ct=D,Kt=Fe.gb[0],Ut=Fe.Ja,Pr=Fe.xa,xr=Xe[0],Et=!r(Sr,xr,"VP8 "),un=!r(Sr,xr,"VP8L"),t(Sr!=null),t(Ct!=null),t(Ut!=null),t(Pr!=null),8>Ct[0])Xe=7;else{if(Et||un){if(Sr=_e(Sr,xr+4),12<=Kt&&Sr>Kt-12){Xe=3;break e}if(we&&Sr>Ct[0]-8){Xe=7;break e}Ut[0]=Sr,Xe[0]+=8,Ct[0]-=8,Pr[0]=un}else Pr[0]=5<=Ct[0]&&Sr[xr+0]==47&&!(Sr[xr+4]>>5),Ut[0]=Ct[0];Xe=0}if(D=D[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],N=N[0],Xe!=0)break;if(4294967286<Fe.Ja)return 3;if(se==null||_t||(se[0]=Fe.xa?2:1),ae=[ae],Ve=[Ve],Fe.xa){if(5>D){Xe=7;break}se=ae,we=Ve,_t=Q,_==null||5>D?_=0:5<=D&&_[N+0]==47&&!(_[N+4]>>5)?(Ct=[0],Sr=[0],Kt=[0],G(Ut=new B,_,N,D),at(Ut,Ct,Sr,Kt)?(se!=null&&(se[0]=Ct[0]),we!=null&&(we[0]=Sr[0]),_t!=null&&(_t[0]=Kt[0]),_=1):_=0):_=0}else{if(10>D){Xe=7;break}se=Ve,_==null||10>D||!Lt(_,N+3,D-3)?_=0:(we=_[N+0]|_[N+1]<<8|_[N+2]<<16,_t=16383&(_[N+7]<<8|_[N+6]),_=16383&(_[N+9]<<8|_[N+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=Fe.Ja||!_t||!_?_=0:(ae&&(ae[0]=_t),se&&(se[0]=_),_=1))}if(!_||(ae=ae[0],Ve=Ve[0],et&&(be[0]!=ae||Re[0]!=Ve)))return 3;fe!=null&&(fe[0]=Fe,fe.offset=N-fe.w,t(4294967286>N-fe.w),t(fe.offset==fe.ha-D));break}return Xe==0||Xe==7&&et&&fe==null?(Q!=null&&(Q[0]|=Fe.na!=null&&0<Fe.na.length),F!=null&&(F[0]=ae),K!=null&&(K[0]=Ve),0):Xe}function gi(_,N,D){var F=N.width,K=N.height,Q=0,ae=0,se=F,fe=K;if(N.Da=_!=null&&0<_.Da,N.Da&&(se=_.cd,fe=_.bd,Q=_.v,ae=_.j,11>D||(Q&=-2,ae&=-2),0>Q||0>ae||0>=se||0>=fe||Q+se>F||ae+fe>K))return 0;if(N.v=Q,N.j=ae,N.va=Q+se,N.o=ae+fe,N.U=se,N.T=fe,N.da=_!=null&&0<_.da,N.da){if(!zt(se,fe,D=[_.ib],Q=[_.hb]))return 0;N.ib=D[0],N.hb=Q[0]}return N.ob=_!=null&&_.ob,N.Kb=_==null||!_.Sd,N.da&&(N.ob=N.ib<3*F/4&&N.hb<3*K/4,N.Kb=0),1}function Ih(_){if(_==null)return 2;if(11>_.S){var N=_.f.RGBA;N.fb+=(_.height-1)*N.A,N.A=-N.A}else N=_.f.kb,_=_.height,N.O+=(_-1)*N.fa,N.fa=-N.fa,N.N+=(_-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(_-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(_-1)*N.lb,N.lb=-N.lb);return 0}function Zc(_,N,D,F){if(F==null||0>=_||0>=N)return 2;if(D!=null){if(D.Da){var K=D.cd,Q=D.bd,ae=-2&D.v,se=-2&D.j;if(0>ae||0>se||0>=K||0>=Q||ae+K>_||se+Q>N)return 2;_=K,N=Q}if(D.da){if(!zt(_,N,K=[D.ib],Q=[D.hb]))return 2;_=K[0],N=Q[0]}}F.width=_,F.height=N;e:{var fe=F.width,be=F.height;if(_=F.S,0>=fe||0>=be||!(_>=_1&&13>_))_=2;else{if(0>=F.Rd&&F.sd==null){ae=Q=K=N=0;var Re=(se=fe*vM[_])*be;if(11>_||(Q=(be+1)/2*(N=(fe+1)/2),_==12&&(ae=(K=fe)*be)),(be=i(Re+2*Q+ae))==null){_=1;break e}F.sd=be,11>_?((fe=F.f.RGBA).eb=be,fe.fb=0,fe.A=se,fe.size=Re):((fe=F.f.kb).y=be,fe.O=0,fe.fa=se,fe.Fd=Re,fe.f=be,fe.N=0+Re,fe.Ab=N,fe.Cd=Q,fe.ea=be,fe.W=0+Re+Q,fe.Db=N,fe.Ed=Q,_==12&&(fe.F=be,fe.J=0+Re+2*Q),fe.Tc=ae,fe.lb=K)}if(N=1,K=F.S,Q=F.width,ae=F.height,K>=_1&&13>K)if(11>K)_=F.f.RGBA,N&=(se=Math.abs(_.A))*(ae-1)+Q<=_.size,N&=se>=Q*vM[K],N&=_.eb!=null;else{_=F.f.kb,se=(Q+1)/2,Re=(ae+1)/2,fe=Math.abs(_.fa),be=Math.abs(_.Ab);var et=Math.abs(_.Db),we=Math.abs(_.lb),Fe=we*(ae-1)+Q;N&=fe*(ae-1)+Q<=_.Fd,N&=be*(Re-1)+se<=_.Cd,N=(N&=et*(Re-1)+se<=_.Ed)&fe>=Q&be>=se&et>=se,N&=_.y!=null,N&=_.f!=null,N&=_.ea!=null,K==12&&(N&=we>=Q,N&=Fe<=_.Tc,N&=_.F!=null)}else N=0;_=N?0:2}}return _!=0||D!=null&&D.fd&&(_=Ih(F)),_}var Ks=64,ne=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ae=24,je=32,ze=8,Qe=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(_){return _},E.Predictor2=function(_,N,D){return N[D+0]},E.Predictor3=function(_,N,D){return N[D+1]},E.Predictor4=function(_,N,D){return N[D-1]},E.Predictor5=function(_,N,D){return ut(ut(_,N[D+1]),N[D+0])},E.Predictor6=function(_,N,D){return ut(_,N[D-1])},E.Predictor7=function(_,N,D){return ut(_,N[D+0])},E.Predictor8=function(_,N,D){return ut(N[D-1],N[D+0])},E.Predictor9=function(_,N,D){return ut(N[D+0],N[D+1])},E.Predictor10=function(_,N,D){return ut(ut(_,N[D-1]),ut(N[D+0],N[D+1]))},E.Predictor11=function(_,N,D){var F=N[D+0];return 0>=Ye(F>>24&255,_>>24&255,(N=N[D-1])>>24&255)+Ye(F>>16&255,_>>16&255,N>>16&255)+Ye(F>>8&255,_>>8&255,N>>8&255)+Ye(255&F,255&_,255&N)?F:_},E.Predictor12=function(_,N,D){var F=N[D+0];return(Te((_>>24&255)+(F>>24&255)-((N=N[D-1])>>24&255))<<24|Te((_>>16&255)+(F>>16&255)-(N>>16&255))<<16|Te((_>>8&255)+(F>>8&255)-(N>>8&255))<<8|Te((255&_)+(255&F)-(255&N)))>>>0},E.Predictor13=function(_,N,D){var F=N[D-1];return(Ze((_=ut(_,N[D+0]))>>24&255,F>>24&255)<<24|Ze(_>>16&255,F>>16&255)<<16|Ze(_>>8&255,F>>8&255)<<8|Ze(255&_,255&F))>>>0};var kt=E.PredictorAdd0;E.PredictorAdd1=Nt,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var St=E.PredictorAdd2;Pe("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Pe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var pt,wr=E.ColorIndexInverseTransform,Nr=E.MapARGB,Tr=E.VP8LColorIndexInverseTransformAlpha,pa=E.MapAlpha,ci=E.VP8LPredictorsAdd=[];ci.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Pi,hn,yr,Fn,In,xa,ta,rs,Ys,Dl,qn,ba,vi,Bi,$u,fy,wp,b1,VD,HD,GD,KD,YD,XD,hy,JD,QD,ZD,eM=i(511),tM=i(2041),rM=i(225),nM=i(767),aM=0,uC=tM,w1=rM,Xs=nM,Ml=eM,_1=0,S1=1,iM=2,j1=3,N1=4,dC=5,oM=6,fC=7,hC=8,C1=9,mC=10,dae=[2,3,7],fae=[3,3,11],sM=[280,256,256,256,40],hae=[0,1,1,1,0],mae=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pae=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gae=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vae=8,pC=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gC=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],my=null,yae=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xae=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bae=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wae=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_ae=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sae=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xd=[],dc=[],Fu=[],jae=1,cM=2,Jd=[],Rl=[];xo("UpsampleRgbLinePair",Ai,3),xo("UpsampleBgrLinePair",Il,3),xo("UpsampleRgbaLinePair",Th,4),xo("UpsampleBgraLinePair",Oh,4),xo("UpsampleArgbLinePair",Qc,4),xo("UpsampleRgba4444LinePair",Ro,2),xo("UpsampleRgb565LinePair",ao,2);var Nae=E.UpsampleRgbLinePair,Cae=E.UpsampleBgrLinePair,uM=E.UpsampleRgbaLinePair,dM=E.UpsampleBgraLinePair,fM=E.UpsampleArgbLinePair,hM=E.UpsampleRgba4444LinePair,Aae=E.UpsampleRgb565LinePair,A1=16,P1=1<<A1-1,py=-227,vC=482,mM=6,Pae=(256<<mM)-1,pM=0,Eae=i(256),kae=i(256),Oae=i(256),Tae=i(256),Iae=i(vC-py),Dae=i(vC-py);uc("YuvToRgbRow",Ai,3),uc("YuvToBgrRow",Il,3),uc("YuvToRgbaRow",Th,4),uc("YuvToBgraRow",Oh,4),uc("YuvToArgbRow",Qc,4),uc("YuvToRgba4444Row",Ro,2),uc("YuvToRgb565Row",ao,2);var gM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],E1=[0,2,8],Mae=[8,7,6,4,4,2,2,2,1,1,1,1],Rae=1;this.WebPDecodeRGBA=function(_,N,D,F,K){var Q=S1,ae=new Be,se=new rn;ae.ba=se,se.S=Q,se.width=[se.width],se.height=[se.height];var fe=se.width,be=se.height,Re=new fr;if(Re==null||_==null)var et=2;else t(Re!=null),et=Lo(_,N,D,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(et!=0?fe=0:(fe!=null&&(fe[0]=Re.width[0]),be!=null&&(be[0]=Re.height[0]),fe=1),fe){se.width=se.width[0],se.height=se.height[0],F!=null&&(F[0]=se.width),K!=null&&(K[0]=se.height);e:{if(F=new Pt,(K=new yt).data=_,K.w=N,K.ha=D,K.kd=1,N=[0],t(K!=null),((_=Lo(K.data,K.w,K.ha,null,null,null,N,null,K))==0||_==7)&&N[0]&&(_=4),(N=_)==0){if(t(ae!=null),F.data=K.data,F.w=K.w+K.offset,F.ha=K.ha-K.offset,F.put=He,F.ac=We,F.bc=xt,F.ma=ae,K.xa){if((_=An())==null){ae=1;break e}if(function(we,Fe){var Ve=[0],_t=[0],Xe=[0];t:for(;;){if(we==null)return 0;if(Fe==null)return we.a=2,0;if(we.l=Fe,we.a=0,G(we.m,Fe.data,Fe.w,Fe.ha),!at(we.m,Ve,_t,Xe)){we.a=3;break t}if(we.xb=cM,Fe.width=Ve[0],Fe.height=_t[0],!ua(Ve[0],_t[0],1,we,null))break t;return 1}return t(we.a!=0),0}(_,F)){if(F=(N=Zc(F.width,F.height,ae.Oa,ae.ba))==0){t:{F=_;r:for(;;){if(F==null){F=0;break t}if(t(F.s.yc!=null),t(F.s.Ya!=null),t(0<F.s.Wb),t((D=F.l)!=null),t((K=D.ma)!=null),F.xb!=0){if(F.ca=K.ba,F.tb=K.tb,t(F.ca!=null),!gi(K.Oa,D,j1)){F.a=2;break r}if(!Ni(F,D.width)||D.da)break r;if((D.da||tt(F.ca.S))&&Ns(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Ns()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!ue(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!Yn(F,F.V,F.Ba,F.c,F.i,D.o,Ar))break r;K.Dc=F.Ma,F=1;break t}t(F.a!=0),F=0}F=!F}F&&(N=_.a)}else N=_.a}else{if((_=new Yt)==null){ae=1;break e}if(_.Fa=K.na,_.P=K.P,_.qc=K.Sa,ir(_,F)){if((N=Zc(F.width,F.height,ae.Oa,ae.ba))==0){if(_.Aa=0,D=ae.Oa,t((K=_)!=null),D!=null){if(0<(fe=0>(fe=D.Md)?0:100<fe?255:255*fe/100)){for(be=Re=0;4>be;++be)12>(et=K.pb[be]).lc&&(et.ia=fe*Mae[0>et.lc?0:et.lc]>>3),Re|=et.ia;Re&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=D.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}(function(we,Fe){if(we==null)return 0;if(Fe==null)return ot(we,2,"NULL VP8Io parameter in VP8Decode().");if(!we.cb&&!ir(we,Fe))return 0;if(t(we.cb),Fe.ac==null||Fe.ac(Fe)){Fe.ob&&(we.L=0);var Ve=E1[we.L];if(we.L==2?(we.yb=0,we.zb=0):(we.yb=Fe.v-Ve>>4,we.zb=Fe.j-Ve>>4,0>we.yb&&(we.yb=0),0>we.zb&&(we.zb=0)),we.Va=Fe.o+15+Ve>>4,we.Hb=Fe.va+15+Ve>>4,we.Hb>we.za&&(we.Hb=we.za),we.Va>we.Ub&&(we.Va=we.Ub),0<we.L){var _t=we.ed;for(Ve=0;4>Ve;++Ve){var Xe;if(we.Qa.Cb){var Ct=we.Qa.Lb[Ve];we.Qa.Fb||(Ct+=_t.Tb)}else Ct=_t.Tb;for(Xe=0;1>=Xe;++Xe){var Et=we.gd[Ve][Xe],Kt=Ct;if(_t.Pc&&(Kt+=_t.vd[0],Xe&&(Kt+=_t.od[0])),0<(Kt=0>Kt?0:63<Kt?63:Kt)){var Ut=Kt;0<_t.wb&&(Ut=4<_t.wb?Ut>>2:Ut>>1)>9-_t.wb&&(Ut=9-_t.wb),1>Ut&&(Ut=1),Et.dd=Ut,Et.tc=2*Kt+Ut,Et.ld=40<=Kt?2:15<=Kt?1:0}else Et.tc=0;Et.La=Xe}}}Ve=0}else ot(we,6,"Frame setup failed"),Ve=we.a;if(Ve=Ve==0){if(Ve){we.$c=0,0<we.Aa||(we.Ic=Rae);t:{Ve=we.Ic,_t=4*(Ut=we.za);var Pr=32*Ut,xr=Ut+1,un=0<we.L?Ut*(0<we.Aa?2:1):0,Sr=(we.Aa==2?2:1)*Ut;if((Et=_t+832+(Xe=3*(16*Ve+E1[we.L])/2*Pr)+(Ct=we.Fa!=null&&0<we.Fa.length?we.Kc.c*we.Kc.i:0))!=Et)Ve=0;else{if(Et>we.Vb){if(we.Vb=0,we.Ec=i(Et),we.Fc=0,we.Ec==null){Ve=ot(we,1,"no memory during frame initialization.");break t}we.Vb=Et}Et=we.Ec,Kt=we.Fc,we.Ac=Et,we.Bc=Kt,Kt+=_t,we.Gd=o(Pr,J),we.Hd=0,we.rb=o(xr+1,Io),we.sb=1,we.wa=un?o(un,Sn):null,we.Y=0,we.D.Nb=0,we.D.wa=we.wa,we.D.Y=we.Y,0<we.Aa&&(we.D.Y+=Ut),t(!0),we.oc=Et,we.pc=Kt,Kt+=832,we.ya=o(Sr,yo),we.aa=0,we.D.ya=we.ya,we.D.aa=we.aa,we.Aa==2&&(we.D.aa+=Ut),we.R=16*Ut,we.B=8*Ut,Ut=(Pr=E1[we.L])*we.R,Pr=Pr/2*we.B,we.sa=Et,we.ta=Kt+Ut,we.qa=we.sa,we.ra=we.ta+16*Ve*we.R+Pr,we.Ha=we.qa,we.Ia=we.ra+8*Ve*we.B+Pr,we.$c=0,Kt+=Xe,we.mb=Ct?Et:null,we.nb=Ct?Kt:null,t(Kt+Ct<=we.Fc+we.Vb),Ne(we),a(we.Ac,we.Bc,0,_t),Ve=1}}if(Ve){if(Fe.ka=0,Fe.y=we.sa,Fe.O=we.ta,Fe.f=we.qa,Fe.N=we.ra,Fe.ea=we.Ha,Fe.Vd=we.Ia,Fe.fa=we.R,Fe.Rc=we.B,Fe.F=null,Fe.J=0,!aM){for(Ve=-255;255>=Ve;++Ve)eM[255+Ve]=0>Ve?-Ve:Ve;for(Ve=-1020;1020>=Ve;++Ve)tM[1020+Ve]=-128>Ve?-128:127<Ve?127:Ve;for(Ve=-112;112>=Ve;++Ve)rM[112+Ve]=-16>Ve?-16:15<Ve?15:Ve;for(Ve=-255;510>=Ve;++Ve)nM[255+Ve]=0>Ve?0:255<Ve?255:Ve;aM=1}ta=Ke,rs=Me,Dl=ie,qn=ce,ba=he,Ys=ke,vi=Kd,Bi=Gs,$u=O,fy=H,wp=Xc,b1=kh,VD=xe,HD=De,GD=Do,KD=Tn,YD=lc,XD=Tl,dc[0]=Da,dc[1]=Ge,dc[2]=Br,dc[3]=vn,dc[4]=It,dc[5]=Kr,dc[6]=Zn,dc[7]=$i,dc[8]=nn,dc[9]=kl,Xd[0]=Gt,Xd[1]=bt,Xd[2]=vt,Xd[3]=ht,Xd[4]=ct,Xd[5]=sr,Xd[6]=dr,Fu[0]=Fi,Fu[1]=$e,Fu[2]=$n,Fu[3]=fa,Fu[4]=jn,Fu[5]=ma,Fu[6]=Ua,Ve=1}else Ve=0}Ve&&(Ve=function(Dn,zi){for(Dn.M=0;Dn.M<Dn.Va;++Dn.M){var dn,jr=Dn.Jc[Dn.M&Dn.Xb],or=Dn.m,yi=Dn;for(dn=0;dn<yi.za;++dn){var an=or,Bn=yi,Ra=Bn.Ac,bo=Bn.Bc+4*dn,ns=Bn.zc,ui=Bn.ya[Bn.aa+dn];if(Bn.Qa.Bb?ui.$b=Se(an,Bn.Pa.jb[0])?2+Se(an,Bn.Pa.jb[2]):Se(an,Bn.Pa.jb[1]):ui.$b=0,Bn.kc&&(ui.Ad=Se(an,Bn.Bd)),ui.Za=!Se(an,145)+0,ui.Za){var $o=ui.Ob,as=0;for(Bn=0;4>Bn;++Bn){var qi,Un=ns[0+Bn];for(qi=0;4>qi;++qi){Un=wae[Ra[bo+qi]][Un];for(var ra=lM[Se(an,Un[0])];0<ra;)ra=lM[2*ra+Se(an,Un[ra])];Un=-ra,Ra[bo+qi]=Un}n($o,as,Ra,bo,4),as+=4,ns[0+Bn]=Un}}else Un=Se(an,156)?Se(an,128)?1:3:Se(an,163)?2:0,ui.Ob[0]=Un,a(Ra,bo,Un,4),a(ns,0,Un,4);ui.Dd=Se(an,142)?Se(an,114)?Se(an,183)?1:3:2:0}if(yi.m.Ka)return ot(Dn,7,"Premature end-of-partition0 encountered.");for(;Dn.ja<Dn.za;++Dn.ja){if(yi=jr,an=(or=Dn).rb[or.sb-1],Ra=or.rb[or.sb+or.ja],dn=or.ya[or.aa+or.ja],bo=or.kc?dn.Ad:0)an.la=Ra.la=0,dn.Za||(an.Na=Ra.Na=0),dn.Hc=0,dn.Gc=0,dn.ia=0;else{var di,na;if(an=Ra,Ra=yi,bo=or.Pa.Xc,ns=or.ya[or.aa+or.ja],ui=or.pb[ns.$b],Bn=ns.ad,$o=0,as=or.rb[or.sb-1],Un=qi=0,a(Bn,$o,0,384),ns.Za)var wo=0,fc=bo[3];else{ra=i(16);var xi=an.Na+as.Na;if(xi=my(Ra,bo[1],xi,ui.Eb,0,ra,0),an.Na=as.Na=(0<xi)+0,1<xi)ta(ra,0,Bn,$o);else{var Cs=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)Bn[$o+ra]=Cs}wo=1,fc=bo[0]}var wa=15&an.la,Ui=15&as.la;for(ra=0;4>ra;++ra){var Js=1&Ui;for(Cs=na=0;4>Cs;++Cs)wa=wa>>1|(Js=(xi=my(Ra,fc,xi=Js+(1&wa),ui.Sc,wo,Bn,$o))>wo)<<7,na=na<<2|(3<xi?3:1<xi?2:Bn[$o+0]!=0),$o+=16;wa>>=4,Ui=Ui>>1|Js<<7,qi=(qi<<8|na)>>>0}for(fc=wa,wo=Ui>>4,di=0;4>di;di+=2){for(na=0,wa=an.la>>4+di,Ui=as.la>>4+di,ra=0;2>ra;++ra){for(Js=1&Ui,Cs=0;2>Cs;++Cs)xi=Js+(1&wa),wa=wa>>1|(Js=0<(xi=my(Ra,bo[2],xi,ui.Qc,0,Bn,$o)))<<3,na=na<<2|(3<xi?3:1<xi?2:Bn[$o+0]!=0),$o+=16;wa>>=2,Ui=Ui>>1|Js<<5}Un|=na<<4*di,fc|=wa<<4<<di,wo|=(240&Ui)<<di}an.la=fc,as.la=wo,ns.Hc=qi,ns.Gc=Un,ns.ia=43690&Un?0:ui.ia,bo=!(qi|Un)}if(0<or.L&&(or.wa[or.Y+or.ja]=or.gd[dn.$b][dn.Za],or.wa[or.Y+or.ja].La|=!bo),yi.Ka)return ot(Dn,7,"Premature end-of-file encountered.")}if(Ne(Dn),or=zi,yi=1,dn=(jr=Dn).D,an=0<jr.L&&jr.M>=jr.zb&&jr.M<=jr.Va,jr.Aa==0)t:{if(dn.M=jr.M,dn.uc=an,ts(jr,dn),yi=1,dn=(na=jr.D).Nb,an=(Un=E1[jr.L])*jr.R,Ra=Un/2*jr.B,ra=16*dn*jr.R,Cs=8*dn*jr.B,bo=jr.sa,ns=jr.ta-an+ra,ui=jr.qa,Bn=jr.ra-Ra+Cs,$o=jr.Ha,as=jr.Ia-Ra+Cs,Ui=(wa=na.M)==0,qi=wa>=jr.Va-1,jr.Aa==2&&ts(jr,na),na.uc)for(Js=(xi=jr).D.M,t(xi.D.uc),na=xi.yb;na<xi.Hb;++na){wo=na,fc=Js;var is=(Qs=(_o=xi).D).Nb;di=_o.R;var Qs=Qs.wa[Qs.Y+wo],Zs=_o.sa,As=_o.ta+16*is*di+16*wo,el=Qs.dd,Na=Qs.tc;if(Na!=0)if(t(3<=Na),_o.L==1)0<wo&&KD(Zs,As,di,Na+4),Qs.La&&XD(Zs,As,di,Na),0<fc&&GD(Zs,As,di,Na+4),Qs.La&&YD(Zs,As,di,Na);else{var tl=_o.B,hc=_o.qa,Dh=_o.ra+8*is*tl+8*wo,Bu=_o.Ha,_o=_o.Ia+8*is*tl+8*wo;is=Qs.ld,0<wo&&(Bi(Zs,As,di,Na+4,el,is),fy(hc,Dh,Bu,_o,tl,Na+4,el,is)),Qs.La&&(b1(Zs,As,di,Na,el,is),HD(hc,Dh,Bu,_o,tl,Na,el,is)),0<fc&&(vi(Zs,As,di,Na+4,el,is),$u(hc,Dh,Bu,_o,tl,Na+4,el,is)),Qs.La&&(wp(Zs,As,di,Na,el,is),VD(hc,Dh,Bu,_o,tl,Na,el,is))}}if(jr.ia&&alert("todo:DitherRow"),or.put!=null){if(na=16*wa,wa=16*(wa+1),Ui?(or.y=jr.sa,or.O=jr.ta+ra,or.f=jr.qa,or.N=jr.ra+Cs,or.ea=jr.Ha,or.W=jr.Ia+Cs):(na-=Un,or.y=bo,or.O=ns,or.f=ui,or.N=Bn,or.ea=$o,or.W=as),qi||(wa-=Un),wa>or.o&&(wa=or.o),or.F=null,or.J=null,jr.Fa!=null&&0<jr.Fa.length&&na<wa&&(or.J=ya(jr,or,na,wa-na),or.F=jr.mb,or.F==null&&or.F.length==0)){yi=ot(jr,3,"Could not decode alpha data.");break t}na<or.j&&(Un=or.j-na,na=or.j,t(!(1&Un)),or.O+=jr.R*Un,or.N+=jr.B*(Un>>1),or.W+=jr.B*(Un>>1),or.F!=null&&(or.J+=or.width*Un)),na<wa&&(or.O+=or.v,or.N+=or.v>>1,or.W+=or.v>>1,or.F!=null&&(or.J+=or.v),or.ka=na-or.j,or.U=or.va-or.v,or.T=wa-na,yi=or.put(or))}dn+1!=jr.Ic||qi||(n(jr.sa,jr.ta-an,bo,ns+16*jr.R,an),n(jr.qa,jr.ra-Ra,ui,Bn+8*jr.B,Ra),n(jr.Ha,jr.Ia-Ra,$o,as+8*jr.B,Ra))}if(!yi)return ot(Dn,6,"Output aborted.")}return 1}(we,Fe)),Fe.bc!=null&&Fe.bc(Fe),Ve&=1}return Ve?(we.cb=0,Ve):0})(_,F)||(N=_.a)}}else N=_.a}N==0&&ae.Oa!=null&&ae.Oa.fd&&(N=Ih(ae.ba))}ae=N}Q=ae!=0?null:11>Q?se.f.RGBA.eb:se.f.kb.y}else Q=null;return Q};var vM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,R){for(var k="",T=0;T<4;T++)k+=String.fromCharCode(E[R++]);return k}function d(E,R){return E[R+0]|E[R+1]<<8}function f(E,R){return(E[R+0]|E[R+1]<<8|E[R+2]<<16)>>>0}function h(E,R){return(E[R+0]|E[R+1]<<8|E[R+2]<<16|E[R+3]<<24)>>>0}new c;var m=[0],g=[0],p=[],y=new c,x=e,b=function(E,R){var k={},T=0,I=!1,M=0,z=0;if(k.frames=[],!function(L,B){for(var X=0;X<4;X++)if(L[B+X]!="RIFF".charCodeAt(X))return!0;return!1}(E,R)){for(h(E,R+=4),R+=8;R<E.length;){var W=u(E,R),U=h(E,R+=4);R+=4;var $=U+(1&U);switch(W){case"VP8 ":case"VP8L":k.frames[T]===void 0&&(k.frames[T]={}),(de=k.frames[T]).src_off=I?z:R-8,de.src_size=M+U+8,T++,I&&(I=!1,M=0,z=0);break;case"VP8X":(de=k.header={}).feature_flags=E[R];var G=R+4;de.canvas_width=1+f(E,G),G+=3,de.canvas_height=1+f(E,G),G+=3;break;case"ALPH":I=!0,M=$+8,z=R-8;break;case"ANIM":(de=k.header).bgcolor=h(E,R),G=R+4,de.loop_count=d(E,G),G+=2;break;case"ANMF":var me,de;(de=k.frames[T]={}).offset_x=2*f(E,R),R+=3,de.offset_y=2*f(E,R),R+=3,de.width=1+f(E,R),R+=3,de.height=1+f(E,R),R+=3,de.duration=f(E,R),R+=3,me=E[R++],de.dispose=1&me,de.blend=me>>1&1}W!="ANMF"&&(R+=$)}return k}}(x,0);b.response=x,b.rgbaoutput=!0,b.dataurl=!1;var w=b.header?b.header:null,S=b.frames?b.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],g=[w.canvas_width];for(var j=0;j<S.length&&S[j].blend!=0;j++);}var A=S[0],P=y.WebPDecodeRGBA(x,A.src_off,A.src_size,g,m);A.rgba=P,A.imgwidth=g[0],A.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)p[C]=P[C];return this.width=g,this.height=m,this.data=p,this}(function(e){var t,r,n,a,i,o,l,c,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=L;Object.defineProperty(this,"pdf",{get:function(){return B}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(_e){X=!!_e}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(_e){q=!!_e}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(_e){isNaN(_e)||(Y=_e)}});var Z=0;Object.defineProperty(this,"posY",{get:function(){return Z},set:function(_e){isNaN(_e)||(Z=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var ue;typeof _e=="number"?ue=[_e,_e,_e,_e]:((ue=new Array(4))[0]=_e[0],ue[1]=_e.length>=2?_e[1]:ue[0],ue[2]=_e.length>=3?_e[2]:ue[0],ue[3]=_e.length>=4?_e[3]:ue[1]),u.margin=ue}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(_e){ge=_e}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(_e){re=_e}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(_e){Se=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(_e){Ie=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var ue;ue=h(_e),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var ue=h(_e);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var pe=null,Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(_e){pe=null,Ue=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var ue;if(this.ctx.font=_e,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var Ft=ue[1];ue[2];var qt=ue[3],zt=ue[4];ue[5];var it=ue[6],ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(zt)[2];zt=Math.floor(ft==="px"?parseFloat(zt)*this.pdf.internal.scaleFactor:ft==="em"?parseFloat(zt)*this.pdf.getFontSize():parseFloat(zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(zt);var dt=function(At){var Pe,Je,Dt=[],qe=At.trim();if(qe==="")return tP;if(qe in Oq)return[Oq[qe]];for(;qe!=="";){switch(Je=null,Pe=(qe=Iq(qe)).charAt(0)){case'"':case"'":Je=mrt(qe.substring(1),Pe);break;default:Je=prt(qe)}if(Je===null||(Dt.push(Je[0]),(qe=Iq(Je[1]))!==""&&qe.charAt(0)!==","))return tP;qe=qe.replace(/^,/,"")}return Dt}(it);if(this.fontFaces){var ve=function(At,Pe){if(pe===null){var Je=function(Dt){var qe=[];return Object.keys(Dt).forEach(function(lt){Dt[lt].forEach(function(Bt){var Tt=null;switch(Bt){case"bold":Tt={family:lt,weight:"bold"};break;case"italic":Tt={family:lt,style:"italic"};break;case"bolditalic":Tt={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":Tt={family:lt}}Tt!==null&&(Tt.ref={name:lt,style:Bt},qe.push(Tt))})}),qe}(At.getFontList());pe=function(Dt){for(var qe={},lt=0;lt<Dt.length;++lt){var Bt=eP(Dt[lt]),Tt=Bt.family,er=Bt.stretch,tt=Bt.style,ur=Bt.weight;qe[Tt]=qe[Tt]||{},qe[Tt][er]=qe[Tt][er]||{},qe[Tt][er][tt]=qe[Tt][er][tt]||{},qe[Tt][er][tt][ur]=Bt}return qe}(Je.concat(Pe))}return pe}(this.pdf,this.fontFaces),ut=dt.map(function(At){return{family:At,stretch:"normal",weight:qt,style:Ft}}),Te=function(At,Pe,Je){for(var Dt=(Je=Je||{}).defaultFontFamily||"times",qe=Object.assign({},hrt,Je.genericFontFamilies||{}),lt=null,Bt=null,Tt=0;Tt<Pe.length;++Tt)if(qe[(lt=eP(Pe[Tt])).family]&&(lt.family=qe[lt.family]),At.hasOwnProperty(lt.family)){Bt=At[lt.family];break}if(!(Bt=Bt||At[Dt]))throw new Error("Could not find a font-family for the rule '"+Tq(lt)+"' and default family '"+Dt+"'.");if(Bt=function(er,tt){if(tt[er])return tt[er];var ur=dT[er],ln=ur<=dT.normal?-1:1,rn=kq(tt,_ne,ur,ln);if(!rn)throw new Error("Could not find a matching font-stretch value for "+er);return rn}(lt.stretch,Bt),Bt=function(er,tt){if(tt[er])return tt[er];for(var ur=wne[er],ln=0;ln<ur.length;++ln)if(tt[ur[ln]])return tt[ur[ln]];throw new Error("Could not find a matching font-style for "+er)}(lt.style,Bt),!(Bt=function(er,tt){if(tt[er])return tt[er];if(er===400&&tt[500])return tt[500];if(er===500&&tt[400])return tt[400];var ur=frt[er],ln=kq(tt,Sne,ur,er<400?-1:1);if(!ln)throw new Error("Could not find a matching font-weight for value "+er);return ln}(lt.weight,Bt)))throw new Error("Failed to resolve a font for the rule '"+Tq(lt)+"'.");return Bt}(ve,ut);this.pdf.setFont(Te.ref.name,Te.ref.style)}else{var Ze="";(qt==="bold"||parseInt(qt,10)>=700||Ft==="bold")&&(Ze="bold"),Ft==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var Ye="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},nt=0;nt<dt.length;nt++){if(this.pdf.internal.getFont(dt[nt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){Ye=dt[nt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(dt[nt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ye=dt[nt],Ze="bold";else if(this.pdf.internal.getFont(dt[nt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ye=dt[nt],Ze="normal";break}}if(Ye===""){for(var mt=0;mt<dt.length;mt++)if(Nt[dt[mt]]){Ye=Nt[dt[mt]];break}}Ye=Ye===""?"Times":Ye,this.pdf.setFont(Ye,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,B){if(isNaN(L)||isNaN(B))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(L,B));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(L,B)},f.prototype.closePath=function(){var L=new o(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&kn(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){L=new o(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},f.prototype.lineTo=function(L,B){if(isNaN(L)||isNaN(B))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(L,B));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,B,X,q){if(isNaN(X)||isNaN(q)||isNaN(L)||isNaN(B))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new o(X,q)),Z=this.ctx.transform.applyToPoint(new o(L,B));this.path.push({type:"qct",x1:Z.x,y1:Z.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.bezierCurveTo=function(L,B,X,q,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(Y,Z)),re=this.ctx.transform.applyToPoint(new o(L,B)),Se=this.ctx.transform.applyToPoint(new o(X,q));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:Se.x,y2:Se.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},f.prototype.arc=function(L,B,X,q,Y,Z){if(isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q)||isNaN(Y))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Z=!!Z,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(L,B));L=ge.x,B=ge.y;var re=this.ctx.transform.applyToPoint(new o(0,X)),Se=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(re.x-Se.x,2)+Math.pow(re.y-Se.y,2))}Math.abs(Y-q)>=2*Math.PI&&(q=0,Y=2*Math.PI),this.path.push({type:"arc",x:L,y:B,radius:X,startAngle:q,endAngle:Y,counterclockwise:Z})},f.prototype.arcTo=function(L,B,X,q,Y){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,B,X,q){if(isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,B),this.lineTo(L+X,B),this.lineTo(L+X,B+q),this.lineTo(L,B+q),this.lineTo(L,B),this.lineTo(L+X,B),this.lineTo(L,B)},f.prototype.fillRect=function(L,B,X,q){if(isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,B,X,q),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},f.prototype.strokeRect=function(L,B,X,q){if(isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,B,X,q),this.stroke())},f.prototype.clearRect=function(L,B,X,q){if(isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,B,X,q))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(B),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var B,X,q,Y;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))B=0,X=0,q=0,Y=0;else{var Z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Z!==null)B=parseInt(Z[1]),X=parseInt(Z[2]),q=parseInt(Z[3]),Y=1;else if((Z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)B=parseInt(Z[1]),X=parseInt(Z[2]),q=parseInt(Z[3]),Y=parseFloat(Z[4]);else{if(Y=1,typeof L=="string"&&L.charAt(0)!=="#"){var ge=new mne(L);L=ge.ok?ge.toHex():"#000000"}L.length===4?(B=L.substring(1,2),B+=B,X=L.substring(2,3),X+=X,q=L.substring(3,4),q+=q):(B=L.substring(1,3),X=L.substring(3,5),q=L.substring(5,7)),B=parseInt(B,16),X=parseInt(X,16),q=parseInt(q,16)}}return{r:B,g:X,b:q,a:Y,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,B,X,q){if(isNaN(B)||isNaN(X)||typeof L!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!m.call(this)){var Y=$(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;T.call(this,{text:L,x:B,y:X,scale:Z,angle:Y,align:this.textAlign,maxWidth:q})}},f.prototype.strokeText=function(L,B,X,q){if(isNaN(B)||isNaN(X)||typeof L!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){q=isNaN(q)?void 0:q;var Y=$(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;T.call(this,{text:L,x:B,y:X,scale:Z,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:q})}},f.prototype.measureText=function(L){if(typeof L!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,X=this.pdf.internal.scaleFactor,q=B.internal.getFontSize(),Y=B.getStringUnitWidth(L)*q/B.internal.scaleFactor;return new function(Z){var ge=(Z=Z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this}({width:Y*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(L,B){if(isNaN(L)||isNaN(B))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(L,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(L){if(isNaN(L))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.translate=function(L,B){if(isNaN(L)||isNaN(B))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,L,B);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(L,B,X,q,Y,Z){if(isNaN(L)||isNaN(B)||isNaN(X)||isNaN(q)||isNaN(Y)||isNaN(Z))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new c(L,B,X,q,Y,Z);this.ctx.transform=this.ctx.transform.multiply(ge)},f.prototype.setTransform=function(L,B,X,q,Y,Z){L=isNaN(L)?1:L,B=isNaN(B)?0:B,X=isNaN(X)?0:X,q=isNaN(q)?1:q,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?0:Z,this.ctx.transform=new c(L,B,X,q,Y,Z)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,B,X,q,Y,Z,ge,re,Se){var Ie=this.pdf.getImageProperties(L),pe=1,Ue=1,_e=1,ue=1;q!==void 0&&re!==void 0&&(_e=re/q,ue=Se/Y,pe=Ie.width/q*re/q,Ue=Ie.height/Y*Se/Y),Z===void 0&&(Z=B,ge=X,B=0,X=0),q!==void 0&&re===void 0&&(re=q,Se=Y),q===void 0&&re===void 0&&(re=Ie.width,Se=Ie.height);for(var Ft,qt=this.ctx.transform.decompose(),zt=$(qt.rotate.shx),it=new c,ft=(it=(it=(it=it.multiply(qt.translate)).multiply(qt.skew)).multiply(qt.scale)).applyToRectangle(new l(Z-B*_e,ge-X*ue,q*pe,Y*Ue)),dt=y.call(this,ft),ve=[],ut=0;ut<dt.length;ut+=1)ve.indexOf(dt[ut])===-1&&ve.push(dt[ut]);if(w(ve),this.autoPaging)for(var Te=ve[0],Ze=ve[ve.length-1],Ye=Te;Ye<Ze+1;Ye++){this.pdf.setPage(Ye);var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=Ye===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=Ye===1?0:mt+(Ye-2)*At;if(this.ctx.clip_path.length!==0){var Je=this.path;Ft=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Ft,this.posX+this.margin[3],-Pe+nt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Je}var Dt=JSON.parse(JSON.stringify(ft));Dt=b([Dt],this.posX+this.margin[3],-Pe+nt+this.ctx.prevPageLastElemOffset)[0];var qe=(Ye>Te||Ye<Ze)&&p.call(this);qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,At,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Dt.x,Dt.y,Dt.w,Dt.h,null,null,zt),qe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,zt)};var y=function(L,B,X){var q=[];B=B||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":q.push(Math.floor((L.y+Y)/X)+1);break;case"arc":q.push(Math.floor((L.y+Y-L.radius)/X)+1),q.push(Math.floor((L.y+Y+L.radius)/X)+1);break;case"qct":var Z=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);q.push(Math.floor((Z.y+Y)/X)+1),q.push(Math.floor((Z.y+Z.h+Y)/X)+1);break;case"bct":var ge=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);q.push(Math.floor((ge.y+Y)/X)+1),q.push(Math.floor((ge.y+ge.h+Y)/X)+1);break;case"rect":q.push(Math.floor((L.y+Y)/X)+1),q.push(Math.floor((L.y+L.h+Y)/X)+1)}for(var re=0;re<q.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<q[re];)x.call(this);return q},x=function(){var L=this.fillStyle,B=this.strokeStyle,X=this.font,q=this.lineCap,Y=this.lineWidth,Z=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=B,this.font=X,this.lineCap=q,this.lineWidth=Y,this.lineJoin=Z},b=function(L,B,X){for(var q=0;q<L.length;q++)switch(L[q].type){case"bct":L[q].x2+=B,L[q].y2+=X;case"qct":L[q].x1+=B,L[q].y1+=X;default:L[q].x+=B,L[q].y+=X}return L},w=function(L){return L.sort(function(B,X){return B-X})},S=function(L,B){for(var X,q,Y=this.fillStyle,Z=this.strokeStyle,ge=this.lineCap,re=this.lineWidth,Se=Math.abs(re*this.ctx.transform.scaleX),Ie=this.lineJoin,pe=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),_e=[],ue=0;ue<Ue.length;ue++)if(Ue[ue].x!==void 0)for(var Ft=y.call(this,Ue[ue]),qt=0;qt<Ft.length;qt+=1)_e.indexOf(Ft[qt])===-1&&_e.push(Ft[qt]);for(var zt=0;zt<_e.length;zt++)for(;this.pdf.internal.getNumberOfPages()<_e[zt];)x.call(this);if(w(_e),this.autoPaging)for(var it=_e[0],ft=_e[_e.length-1],dt=it;dt<ft+1;dt++){this.pdf.setPage(dt),this.fillStyle=Y,this.strokeStyle=Z,this.lineCap=ge,this.lineWidth=Se,this.lineJoin=Ie;var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=dt===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ye=dt===1?0:Te+(dt-2)*Ze;if(this.ctx.clip_path.length!==0){var Nt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(X,this.posX+this.margin[3],-Ye+ut+this.ctx.prevPageLastElemOffset),j.call(this,L,!0),this.path=Nt}if(q=JSON.parse(JSON.stringify(pe)),this.path=b(q,this.posX+this.margin[3],-Ye+ut+this.ctx.prevPageLastElemOffset),B===!1||dt===0){var nt=(dt>it||dt<ft)&&p.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,Ze,null).clip().discardPath()),j.call(this,L,B),nt&&this.pdf.restoreGraphicsState()}this.lineWidth=re}else this.lineWidth=Se,j.call(this,L,B),this.lineWidth=re;this.path=pe},j=function(L,B){if((L!=="stroke"||B||!g.call(this))&&(L==="stroke"||B||!m.call(this))){for(var X,q,Y=[],Z=this.path,ge=0;ge<Z.length;ge++){var re=Z[ge];switch(re.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:re,deltas:[],abs:[]});break;case"lt":var Se=Y.length;if(Z[ge-1]&&!isNaN(Z[ge-1].x)&&(X=[re.x-Z[ge-1].x,re.y-Z[ge-1].y],Se>0)){for(;Se>=0;Se--)if(Y[Se-1].close!==!0&&Y[Se-1].begin!==!0){Y[Se-1].deltas.push(X),Y[Se-1].abs.push(re);break}}break;case"bct":X=[re.x1-Z[ge-1].x,re.y1-Z[ge-1].y,re.x2-Z[ge-1].x,re.y2-Z[ge-1].y,re.x-Z[ge-1].x,re.y-Z[ge-1].y],Y[Y.length-1].deltas.push(X);break;case"qct":var Ie=Z[ge-1].x+2/3*(re.x1-Z[ge-1].x),pe=Z[ge-1].y+2/3*(re.y1-Z[ge-1].y),Ue=re.x+2/3*(re.x1-re.x),_e=re.y+2/3*(re.y1-re.y),ue=re.x,Ft=re.y;X=[Ie-Z[ge-1].x,pe-Z[ge-1].y,Ue-Z[ge-1].x,_e-Z[ge-1].y,ue-Z[ge-1].x,Ft-Z[ge-1].y],Y[Y.length-1].deltas.push(X);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(re)}}q=B?null:L==="stroke"?"stroke":"fill";for(var qt=!1,zt=0;zt<Y.length;zt++)if(Y[zt].arc)for(var it=Y[zt].abs,ft=0;ft<it.length;ft++){var dt=it[ft];dt.type==="arc"?C.call(this,dt.x,dt.y,dt.radius,dt.startAngle,dt.endAngle,dt.counterclockwise,void 0,B,!qt):I.call(this,dt.x,dt.y),qt=!0}else if(Y[zt].close===!0)this.pdf.internal.out("h"),qt=!1;else if(Y[zt].begin!==!0){var ve=Y[zt].start.x,ut=Y[zt].start.y;M.call(this,Y[zt].deltas,ve,ut),qt=!0}q&&E.call(this,q),B&&R.call(this)}},A=function(L){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-X;case"top":return L+B-X;case"hanging":return L+B-2*X;case"middle":return L+B/2-X;default:return L}},P=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(B,X){this.colorStops.push([B,X])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(L,B,X,q,Y,Z,ge,re,Se){for(var Ie=W.call(this,X,q,Y,Z),pe=0;pe<Ie.length;pe++){var Ue=Ie[pe];pe===0&&(Se?k.call(this,Ue.x1+L,Ue.y1+B):I.call(this,Ue.x1+L,Ue.y1+B)),z.call(this,L,B,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}re?R.call(this):E.call(this,ge)},E=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(L,B){this.pdf.internal.out(r(L)+" "+n(B)+" m")},T=function(L){var B;switch(L.align){case"right":case"end":B="right";break;case"center":B="center";break;default:B="left"}var X=this.pdf.getTextDimensions(L.text),q=A.call(this,L.y),Y=P.call(this,q)-X.h,Z=this.ctx.transform.applyToPoint(new o(L.x,q)),ge=this.ctx.transform.decompose(),re=new c;re=(re=(re=re.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Se,Ie,pe,Ue=this.ctx.transform.applyToRectangle(new l(L.x,q,X.w,X.h)),_e=re.applyToRectangle(new l(L.x,Y,X.w,X.h)),ue=y.call(this,_e),Ft=[],qt=0;qt<ue.length;qt+=1)Ft.indexOf(ue[qt])===-1&&Ft.push(ue[qt]);if(w(Ft),this.autoPaging)for(var zt=Ft[0],it=Ft[Ft.length-1],ft=zt;ft<it+1;ft++){this.pdf.setPage(ft);var dt=ft===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[2],Te=ut-this.margin[0],Ze=this.pdf.internal.pageSize.width-this.margin[1],Ye=Ze-this.margin[3],Nt=ft===1?0:ve+(ft-2)*Te;if(this.ctx.clip_path.length!==0){var nt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Se,this.posX+this.margin[3],-1*Nt+dt),j.call(this,"fill",!0),this.path=nt}var mt=b([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Nt+dt+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*L.scale),pe=this.lineWidth,this.lineWidth=pe*L.scale);var At=this.autoPaging!=="text";if(At||mt.y+mt.h<=ut){if(At||mt.y>=dt&&mt.x<=Ze){var Pe=At?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ze-mt.x)[0],Je=b([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-Nt+dt+this.ctx.prevPageLastElemOffset)[0],Dt=At&&(ft>zt||ft<it)&&p.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ye,Te,null).clip().discardPath()),this.pdf.text(Pe,Je.x,Je.y,{angle:L.angle,align:B,renderingMode:L.renderingMode}),Dt&&this.pdf.restoreGraphicsState()}}else mt.y<ut&&(this.ctx.prevPageLastElemOffset+=ut-mt.y);L.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=pe)}else L.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*L.scale),pe=this.lineWidth,this.lineWidth=pe*L.scale),this.pdf.text(L.text,Z.x+this.posX,Z.y+this.posY,{angle:L.angle,align:B,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=pe)},I=function(L,B,X,q){X=X||0,q=q||0,this.pdf.internal.out(r(L+X)+" "+n(B+q)+" l")},M=function(L,B,X){return this.pdf.lines(L,B,X,null,null)},z=function(L,B,X,q,Y,Z,ge,re){this.pdf.internal.out([t(a(X+L)),t(i(q+B)),t(a(Y+L)),t(i(Z+B)),t(a(ge+L)),t(i(re+B)),"c"].join(" "))},W=function(L,B,X,q){for(var Y=2*Math.PI,Z=Math.PI/2;B>X;)B-=Y;var ge=Math.abs(X-B);ge<Y&&q&&(ge=Y-ge);for(var re=[],Se=q?-1:1,Ie=B;ge>1e-5;){var pe=Ie+Se*Math.min(ge,Z);re.push(U.call(this,L,Ie,pe)),ge-=Math.abs(pe-Ie),Ie=pe}return re},U=function(L,B,X){var q=(X-B)/2,Y=L*Math.cos(q),Z=L*Math.sin(q),ge=Y,re=-Z,Se=ge*ge+re*re,Ie=Se+ge*Y+re*Z,pe=4/3*(Math.sqrt(2*Se*Ie)-Ie)/(ge*Z-re*Y),Ue=ge-pe*re,_e=re+pe*ge,ue=Ue,Ft=-_e,qt=q+B,zt=Math.cos(qt),it=Math.sin(qt);return{x1:L*Math.cos(B),y1:L*Math.sin(B),x2:Ue*zt-_e*it,y2:Ue*it+_e*zt,x3:ue*zt-Ft*it,y3:ue*it+Ft*zt,x4:L*Math.cos(X),y4:L*Math.sin(X)}},$=function(L){return 180*L/Math.PI},G=function(L,B,X,q,Y,Z){var ge=L+.5*(X-L),re=B+.5*(q-B),Se=Y+.5*(X-Y),Ie=Z+.5*(q-Z),pe=Math.min(L,Y,ge,Se),Ue=Math.max(L,Y,ge,Se),_e=Math.min(B,Z,re,Ie),ue=Math.max(B,Z,re,Ie);return new l(pe,_e,Ue-pe,ue-_e)},me=function(L,B,X,q,Y,Z,ge,re){var Se,Ie,pe,Ue,_e,ue,Ft,qt,zt,it,ft,dt,ve,ut,Te=X-L,Ze=q-B,Ye=Y-X,Nt=Z-q,nt=ge-Y,mt=re-Z;for(Ie=0;Ie<41;Ie++)zt=(Ft=(pe=L+(Se=Ie/40)*Te)+Se*((_e=X+Se*Ye)-pe))+Se*(_e+Se*(Y+Se*nt-_e)-Ft),it=(qt=(Ue=B+Se*Ze)+Se*((ue=q+Se*Nt)-Ue))+Se*(ue+Se*(Z+Se*mt-ue)-qt),Ie==0?(ft=zt,dt=it,ve=zt,ut=it):(ft=Math.min(ft,zt),dt=Math.min(dt,it),ve=Math.max(ve,zt),ut=Math.max(ut,it));return new l(Math.round(ft),Math.round(dt),Math.round(ve-ft),Math.round(ut-dt))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,B,X=(L=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:B}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Cr.API),function(e){var t=function(o){var l,c,u,d,f,h,m,g,p,y;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(y=f%85))/85)-(p=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)%85,c.push(h+33,m+33,g+33,p+33,y+33)):c.push(122);return function(x,b){for(var w=b;w>0;w--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,h=String,m="length",g=255,p="charCodeAt",y="slice",x="replace";for(o[y](-2),o=o[y](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[y](o[m]%5||5))[m];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(b,w){for(var S=w;S>0;S--)b.pop()}(u,l[m]),h.fromCharCode.apply(h,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=QO(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Cr.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var p=g.length,y=[],x=String.fromCharCode;for(h=0;h<p;h+=1)y.push(x(255&g.charCodeAt(h)));return y.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Cr.API),function(e){function t(){return(Xr.html2canvas?Promise.resolve(Xr.html2canvas):xu(()=>import("./html2canvas.esm-f16e60ff.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Xr.DOMPurify?Promise.resolve(Xr.DOMPurify):xu(()=>import("./purify.es-fd086bfc.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=kn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var g=d[m],p=g.src.find(function(y){return y.format==="truetype"});p&&u.addFont(p.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Cr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return o.convert(h,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Cr.getPageSize=function(l,c,u){if(kn(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var g,p=0,y=0;if(m.hasOwnProperty(h))p=m[h][1]/f,y=m[h][0]/f;else try{p=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",y>p&&(g=y,y=p,p=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>y&&(g=y,y=p,p=g)}return{width:y,height:p,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(eP):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Cr.API),Cr.API.addJS=function(e){return Mq=e,this.internal.events.subscribe("postPutResources",function(){Uw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Uw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Dq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Mq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Uw!==void 0&&Dq!==void 0&&this.internal.out("/Names <</JavaScript "+Uw+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Cr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,p={width:0,height:0,numcomponents:1},y=4;y<g;y+=2){if(y+=m,t.indexOf(f.charCodeAt(y+1))!==-1){h=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),p={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:h,numcomponents:f.charCodeAt(y+9)};break}m=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Cr.API),Cr.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=Jtt(e,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,u=i.palette,d=i.depth;a=u&&c===1?function(C){for(var E=C.width,R=C.height,k=C.data,T=C.palette,I=C.depth,M=!1,z=[],W=[],U=void 0,$=!1,G=0,me=0;me<T.length;me++){var de=Ez(T[me],4),L=de[0],B=de[1],X=de[2],q=de[3];z.push(L,B,X),q!=null&&(q===0?(G++,W.length<1&&W.push(me)):q<255&&($=!0))}if($||G>1){M=!0,W=void 0;var Y=E*R;U=new Uint8Array(Y);for(var Z=new DataView(k.buffer),ge=0;ge<Y;ge++){var re=rP(Z,ge,I),Se=Ez(T[re],4)[3];U[ge]=Se}}else G===0&&(W=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:k,alphaBytes:U,needSMask:M,palette:z,mask:W}}(i):c===2||c===4?function(C){for(var E=C.data,R=C.width,k=C.height,T=C.channels,I=C.depth,M=T===2?"DeviceGray":"DeviceRGB",z=T-1,W=R*k,U=z,$=W*U,G=1*W,me=Math.ceil($*I/8),de=Math.ceil(G*I/8),L=new Uint8Array(me),B=new Uint8Array(de),X=new DataView(E.buffer),q=new DataView(L.buffer),Y=new DataView(B.buffer),Z=!1,ge=0;ge<W;ge++){for(var re=ge*T,Se=0;Se<U;Se++)Wq(q,rP(X,re+Se,I),ge*U+Se,I);var Ie=rP(X,re+U,I);Ie<(1<<I)-1&&(Z=!0),Wq(Y,Ie,1*ge,I)}return{colorSpace:M,colorsPerPixel:z,sMaskBitsPerComponent:Z?I:void 0,colorBytes:L,alphaBytes:B,needSMask:Z}}(i):function(C){var E=C.data,R=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(k){for(var T=k.length,I=new Uint8Array(2*T),M=new DataView(I.buffer,I.byteOffset,I.byteLength),z=0;z<T;z++)M.setUint16(2*z,k[z],!1);return I}(E):E,needSMask:!1}}(i);var f,h,m,g=a,p=g.colorSpace,y=g.colorsPerPixel,x=g.sMaskBitsPerComponent,b=g.colorBytes,w=g.alphaBytes,S=g.needSMask,j=g.palette,A=g.mask,P=null;return n!==Cr.API.image_compression.NONE&&typeof QO=="function"?(P=function(C){var E;switch(C){case Cr.API.image_compression.FAST:E=11;break;case Cr.API.image_compression.MEDIUM:E=13;break;case Cr.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(P," /Colors ").concat(y," /BitsPerComponent ").concat(d," /Columns ").concat(o),e=Fq(b,Math.ceil(o*y*d/8),y,d,n),S&&(m=Fq(w,Math.ceil(o*x/8),1,x,n))):(f=void 0,h=void 0,e=b,S&&(m=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:e,index:t,filter:f,decodeParameters:h,transparency:A,palette:j,sMask:m,predictor:P,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new xrt(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new nP(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Cr.API),yc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},yc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_a.log("bit decode error:"+r)}},yc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},yc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},yc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},yc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},yc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},yc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},yc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},yc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new yc(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new nP(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Cr.API),Hq.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new Hq(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new nP(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Cr.API),Cr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];i[l++]=d,i[l++]=f,i[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Cr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Up=Cr.API,Ww=Up.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,p=l[0]||c,y=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?y.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(h=f&&kn(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,y.push((l[n]||p)/c+h)),g=n;return y},Rq=Up.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Up.processArabic&&(e=Up.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Ww.apply(this,arguments).reduce(function(i,o){return i+o},0)},Lq=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},$q=function(e,t,r){r||(r={});var n,a,i,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,p=e.split(" "),y=Ww.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),b=[];p.map(function(S){(S=S.split(/\s*\n/)).length>1?b=b.concat(S.map(function(j,A){return(A&&j.length?`
`:"")+j})):b.push(S[0])}),p=b,c=Rq.apply(this,[x,r])}for(i=0,o=p.length;i<o;i++){var w=0;if(n=p[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),h+m+(g=(a=Ww.apply(this,[n,r])).reduce(function(S,j){return S+j},0))>t||w){if(g>t){for(l=Lq.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(S,j){return S+j},0)}else d=[n];f.push(d),h=g+c,m=y}else d.push(n),h+=m+g,m=y}return u=c?function(S,j){return(j?x:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(u)},Up.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat($q.apply(this,[n[l],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var o=function(h){return"0x"+parseInt(h,10).toString(16)},l=e.__fontmetrics__.compress=function(h){var m,g,p,y,x=["{"];for(var b in h){if(m=h[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=o(b).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof m=="number")m<0?(p=o(m).slice(3),y="-"):(p=o(m).slice(2),y=""),p=y+p.slice(0,-1)+a[p.slice(-1)];else{if(kn(m)!=="object")throw new Error("Don't know what to do with value type "+kn(m)+".");p=l(m)}x.push(g+p)}return x.push("}"),x.join("")},c=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,p,y,x={},b=1,w=x,S=[],j="",A="",P=h.length-1,C=1;C<P;C+=1)(y=h[C])=="'"?m?(p=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(S.push([w,p]),w={},p=void 0):y=="}"?((g=S.pop())[0][g[1]]=w,p=void 0,w=g[0]):y=="-"?b=-1:p===void 0?n.hasOwnProperty(y)?(j+=n[y],p=parseInt(j,16)*b,b=1,j=""):j+=y:n.hasOwnProperty(y)?(A+=n[y],w[p]=parseInt(A,16)*b,b=1,p=void 0,A=""):A+=y;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,g=f.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode.encoding=p,m.encoding=p.codePages[0])}])}(Cr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(w2(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Cr),Cr.API.addSvgAsImage=function(e,t,r,n,a,i,o,l){if(isNaN(t)||isNaN(r))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Xr.canvg?Promise.resolve(Xr.canvg):xu(()=>import("./index.es-49e40bb4.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,o,l)})},Cr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Cr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,p){var y,x=!1;for(y=0;y<g.length;y+=1)g[y]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(kn(e)==="object"){for(a in e)if(i=e[a],h(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,p=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?p.push("/"+g+" /"+r[g].value):p.push("/"+g+" "+r[g].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Cr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=i.length;f<h;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(i){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(i).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var p=u();d({data:m,addLength1:!0,objectId:p}),c("endobj");var y=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Yp(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Yp(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+Yp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var y=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Yp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Yp(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,p=m,y="",x=0,b="",w=g[p].encoding;if(g[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(b=l,p=m,Array.isArray(l)&&(b=l[0]),x=0;x<b.length;x+=1)g[p].metadata.hasOwnProperty("cmap")&&(o=g[p].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),o||b[x].charCodeAt(0)<256&&g[p].metadata.hasOwnProperty("Unicode")?y+=b[x]:y+="";var S="";return parseInt(p.slice(1))<14||w==="WinAnsiEncoding"?S=h(y,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(S=r(y,g[p])),f.isHex=!0,{text:S,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Cr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Cr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var S=function(k){var T=k.charCodeAt(),I=T>>8,M=p[I];return M!==void 0?f[256*M+(255&T)]:I===252||I===253?"AL":x.test(I)?"L":I===8?"R":"N"},j=function(k){for(var T,I=0;I<k.length;I++){if((T=S(k.charAt(I)))==="L")return!1;if(T==="R")return!0}return!1},A=function(k,T,I,M){var z,W,U,$,G=T[M];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(G="AN");break;case"AL":b=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":M<1||M+1>=T.length||(z=I[M-1])!=="EN"&&z!=="AN"||(W=T[M+1])!=="EN"&&W!=="AN"?G="N":b&&(W="AN"),G=W===z?W:"N";break;case"ES":G=(z=M>0?I[M-1]:"B")==="EN"&&M+1<T.length&&T[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&I[M-1]==="EN"){G="EN";break}if(b){G="N";break}for(U=M+1,$=T.length;U<$&&T[U]==="ET";)U++;G=U<$&&T[U]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for($=T.length,U=M+1;U<$&&T[U]==="NSM";)U++;if(U<$){var me=k[M],de=me>=1425&&me<=2303||me===64286;if(z=T[U],de&&(z==="R"||z==="AL")){G="R";break}}}G=M<1||(z=T[M-1])==="B"?"N":I[M-1];break;case"B":b=!1,a=!0,G=w;break;case"S":i=!0,G="N"}return G},P=function(k,T,I){var M=k.split("");return I&&C(M,I,{hiLevel:w}),M.reverse(),T&&T.reverse(),M.join("")},C=function(k,T,I){var M,z,W,U,$,G=-1,me=k.length,de=0,L=[],B=w?m:h,X=[];for(b=!1,a=!1,i=!1,z=0;z<me;z++)X[z]=S(k[z]);for(W=0;W<me;W++){if($=de,L[W]=A(k,X,L,W),M=240&(de=B[$][g[L[W]]]),de&=15,T[W]=U=B[de][5],M>0)if(M===16){for(z=G;z<W;z++)T[z]=1;G=-1}else G=-1;if(B[de][6])G===-1&&(G=W);else if(G>-1){for(z=G;z<W;z++)T[z]=U;G=-1}X[W]==="B"&&(T[W]=0),I.hiLevel|=U}i&&function(q,Y,Z){for(var ge=0;ge<Z;ge++)if(q[ge]==="S"){Y[ge]=w;for(var re=ge-1;re>=0&&q[re]==="WS";re--)Y[re]=w}}(X,T,me)},E=function(k,T,I,M,z){if(!(z.hiLevel<k)){if(k===1&&w===1&&!a)return T.reverse(),void(I&&I.reverse());for(var W,U,$,G,me=T.length,de=0;de<me;){if(M[de]>=k){for($=de+1;$<me&&M[$]>=k;)$++;for(G=de,U=$-1;G<U;G++,U--)W=T[G],T[G]=T[U],T[U]=W,I&&(W=I[G],I[G]=I[U],I[U]=W);de=$}de++}}},R=function(k,T,I){var M=k.split(""),z={hiLevel:w};return I||(I=[]),C(M,I,z),function(W,U,$){if($.hiLevel!==0&&d)for(var G,me=0;me<W.length;me++)U[me]===1&&(G=y.indexOf(W[me]))>=0&&(W[me]=y[G+1])}(M,I,z),E(2,M,T,I,z),E(1,M,T,I,z),M.join("")};return this.__bidiEngine__.doBidiReorder=function(k,T,I){if(function(z,W){if(W)for(var U=0;U<z.length;U++)W[U]=U;l===void 0&&(l=j(z)),u===void 0&&(u=j(z))}(k,T),o||!c||u)if(o&&c&&l^u)w=l?1:0,k=P(k,T,I);else if(!o&&c&&u)w=l?1:0,k=R(k,T,I),k=P(k,T);else if(!o||l||c||u){if(o&&!c&&l^u)k=P(k,T),l?(w=0,k=R(k,T,I)):(w=1,k=R(k,T,I),k=P(k,T));else if(o&&l&&!c&&u)w=1,k=R(k,T,I),k=P(k,T);else if(!o&&!c&&l^u){var M=d;l?(w=1,k=R(k,T,I),w=0,d=!1,k=R(k,T,I),d=M):(w=0,k=R(k,T,I),k=P(k,T),w=1,d=!1,k=R(k,T,I),d=M,k=P(k,T))}}else w=0,k=R(k,T,I);else w=l?1:0,k=R(k,T,I);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Cr),Cr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new fh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Drt(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new brt(this.contents),this.head=new _rt(this),this.name=new Art(this),this.cmap=new Nne(this),this.toUnicode={},this.hhea=new Srt(this),this.maxp=new Prt(this),this.hmtx=new Ert(this),this.post=new Nrt(this),this.os2=new jrt(this),this.loca=new Irt(this),this.glyf=new krt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Yc,fh=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),brt=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,c,u,d,f,h,m,g,p;for(p in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new fh).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),i=16*m,u=a.pos+i,l=null,g=[],r)for(h=r[p],a.writeString(p),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=Cne.call(r);r.length%4;)r.push(0);for(i=new fh(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),wrt={}.hasOwnProperty,Mu=function(e,t){for(var r in t)wrt.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Yc=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var _rt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new fh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Gq=function(){function e(t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,y,x,b,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var S,j;for(j=[],c=S=0;0<=h?S<h:S>h;c=0<=h?++S:--S)j.push(t.readUInt16());return j}(),t.pos+=2,p=function(){var S,j;for(j=[],c=S=0;0<=h?S<h:S>h;c=0<=h?++S:--S)j.push(t.readUInt16());return j}(),u=function(){var S,j;for(j=[],c=S=0;0<=h?S<h:S>h;c=0<=h?++S:--S)j.push(t.readUInt16());return j}(),d=function(){var S,j;for(j=[],c=S=0;0<=h?S<h:S>h;c=0<=h?++S:--S)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var S,j;for(j=[],c=S=0;0<=a?S<a:S>a;c=0<=a?++S:--S)j.push(t.readUInt16());return j}(),c=x=0,w=i.length;x<w;c=++x)for(y=i[c],n=b=g=p[c];g<=y?b<=y:b>=y;n=g<=y?++b:--b)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,y,x,b,w,S,j,A,P,C,E,R,k,T,I,M,z,W,U,$,G,me,de,L,B,X,q,Y,Z,ge,re,Se,Ie,pe;switch(M=new fh,o=Object.keys(t).sort(function(Ue,_e){return Ue-_e}),r){case"macroman":for(p=0,y=function(){var Ue=[];for(g=0;g<256;++g)Ue.push(0);return Ue}(),b={0:0},i={},z=0,G=o.length;z<G;z++)b[re=t[a=o[z]]]==null&&(b[re]=++p),i[a]={old:t[a],new:b[t[a]]},y[a]=b[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(y),{charMap:i,subtable:M.data,maxGlyphID:p+1};case"unicode":for(T=[],f=[],w=0,b={},n={},x=u=null,W=0,me=o.length;W<me;W++)b[j=t[a=o[W]]]==null&&(b[j]=++w),n[a]={old:j,new:b[j]},l=b[j]-a,x!=null&&l===u||(x&&f.push(x),T.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),T.push(65535),R=2*(E=T.length),C=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(C/2)/Math.LN2,P=2*E-C,c=[],A=[],m=[],g=U=0,de=T.length;U<de;g=++U){if(k=T[g],d=f[g],k===65535){c.push(0),A.push(0);break}if(k-(I=n[k].new)>=32768)for(c.push(0),A.push(2*(m.length+E-g)),a=$=k;k<=d?$<=d:$>=d;a=k<=d?++$:--$)m.push(n[a].new);else c.push(I-k),A.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*E+2*m.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(C),M.writeUInt16(h),M.writeUInt16(P),Z=0,L=f.length;Z<L;Z++)a=f[Z],M.writeUInt16(a);for(M.writeUInt16(0),ge=0,B=T.length;ge<B;ge++)a=T[ge],M.writeUInt16(a);for(Se=0,X=c.length;Se<X;Se++)l=c[Se],M.writeUInt16(l);for(Ie=0,q=A.length;Ie<q;Ie++)S=A[Ie],M.writeUInt16(S);for(pe=0,Y=m.length;pe<Y;pe++)p=m[pe],M.writeUInt16(p);return{charMap:n,subtable:M.data,maxGlyphID:w+1}}},e}(),Nne=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new Gq(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=Gq.encode(t,r),(a=new fh).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),Srt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),jrt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Nrt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(t.readUInt32());return c}.call(this)}},e}(),Crt=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Art=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,o,l,c,u,d,f,h;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=d=0,f=n.length;d<f;i=++d)a=n[i],t.pos=a.offset,u=t.readString(a.length),o=new Crt(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Prt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Ert=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,o,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],h.push(i.advance);return h}.call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Cne=[].slice,krt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,o,l,c,u,d,f;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new fh(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new Trt(l,u,f,c,d):new Ort(l,o,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,o,l,c;for(o=[],i=[],l=0,c=r.length;l<c;l++)a=t[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),Ort=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Trt=function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new fh(Cne.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Irt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Mu(e,Yc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),Drt=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,y,x;for(a in n=Nne.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},x=n.charMap)m[(c=x[a]).old]=c.new;for(g in h=n.maxGlyphID,o)g in m||(m[g]=h++);return d=function(b){var w,S;for(w in S={},b)S[b[w]]=w;return S}(m),f=Object.keys(d).sort(function(b,w){return b-w}),p=function(){var b,w,S;for(S=[],b=0,w=f.length;b<w;b++)l=f[b],S.push(d[l]);return S}(),i=this.font.glyf.encode(o,p,m),u=this.font.loca.encode(i.offsets,p),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();Cr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const Mrt=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:drt,AcroFormAppearance:br,AcroFormButton:Xi,AcroFormCheckBox:Hx,AcroFormChoiceField:Tm,AcroFormComboBox:Dm,AcroFormEditBox:Wx,AcroFormListBox:Im,AcroFormPasswordField:Gx,AcroFormPushButton:Vx,AcroFormRadioButton:Mm,AcroFormTextField:Zf,GState:Sb,ShadingPattern:jf,TilingPattern:_m,default:Cr,jsPDF:Cr},Symbol.toStringTag,{value:"Module"}));function Ane(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-i),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var Kq={},Fg=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:Kq=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return Kq||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),fT=function(e,t){return fT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},fT(e,t)};function Pne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");fT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ene=function(e){Pne(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function Rrt(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Lrt(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function zS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function kne(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=One(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function One(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function lC(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Tne(e,t){var r=lC(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function $rt(e,t,r,n,a){var i={},o=1.3333333333333333,l=aP(t,function(w){return a.getComputedStyle(w).backgroundColor});l!=null&&(i.fillColor=l);var c=aP(t,function(w){return a.getComputedStyle(w).color});c!=null&&(i.textColor=c);var u=Brt(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=o*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var g=aP(t,function(w){return a.getComputedStyle(w)[d]});g!=null&&(i.lineColor=g);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(i.fontSize=y/o);var x=Frt(n);x&&(i.fontStyle=x);var b=(n.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(i.font=b),i}function Frt(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function aP(e,t){var r=Ine(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Ine(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Ine(e.parentElement,t):r}function Brt(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),o=lC(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function Dne(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],p=(o=(i=g?.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),y=zrt(c,u,r,g,n,a);y&&(p==="thead"?d.push(y):p==="tfoot"?h.push(y):f.push(y))}return{head:d,body:f,foot:h}}function zrt(e,t,r,n,a,i){for(var o=new Ene(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=$rt(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:qrt(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function qrt(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Urt(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function xd(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function RD(e,t){var r=new Fg(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Urt(a,n,t);var i=xd({},a,n,t),o;typeof window<"u"&&(o=window);var l=Wrt(a,n,t),c=Vrt(a,n,t),u=Hrt(r,i),d=Krt(r,i,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function Wrt(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=xd({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=xd({},m[0],m[1],m[2])}},i=0,o=Object.keys(n);i<o.length;i++){var l=o[i];a(l)}return n}function Vrt(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var l=o[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function Hrt(e,t){var r,n,a,i,o,l,c,u,d,f,h,m,g=lC(t.margin,40/e.scaleFactor()),p=(r=Grt(e,t.startY))!==null&&r!==void 0?r:g.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var x;t.showHead===!0?x="everyPage":t.showHead===!1?x="never":x=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,w=t.theme||(b?"plain":"striped"),S=!!t.horizontalPageBreak,j=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:w,startY:p,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:x,showFoot:y,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:S,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Grt(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&r?.finalY!=null?r.finalY+20/n:null}function Krt(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=Dne(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Yrt(n,a,i);return{columns:c,head:n,body:a,foot:i}}function Yrt(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(o=l?.colSpan||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var qS=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Mne=function(e){Pne(t,e);function t(r,n,a,i,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=i,c.column=o,c.section=i.section,c}return t}(qS),Rne=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new Mne(t,this,n,a,i,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new qS(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new qS(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),LD=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof Ene&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),$D=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=lC(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Lne=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function Xrt(e,t){Jrt(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=hT(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=hT(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Zrt(t),ent(t,e),Qrt(t)}function Jrt(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Tne(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=zS(u.text,u.styles,e)+f;var h=zS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function hT(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=hT(h,t,r))}return t}function Qrt(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:i}}}}}function Zrt(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function ent(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Yq(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=Yq(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function Yq(e,t,r,n,a){return e.map(function(i){return tnt(i,t,r,n,a)})}function tnt(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=zS(e,r,n))return e;for(;t<zS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function FD(e,t){var r=new Fg(e),n=rnt(t,r.scaleFactor()),a=new Rne(t,n);return Xrt(r,a),r.applyStyles(r.userStyles),a}function rnt(e,t){var r=e.content,n=ant(r.columns);if(r.head.length===0){var a=Xq(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=Xq(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:iP("head",r.head,n,o,i,t),body:iP("body",r.body,n,o,i,t),foot:iP("foot",r.foot,n,o,i,t)}}function iP(e,t,r,n,a,i){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,p=r;g<p.length;g++){var y=p[g];if(o[y.index]==null||o[y.index].left===0)if(m===0){var x=void 0;Array.isArray(c)?x=c[y.index-h-d]:x=c[y.dataKey];var b={};typeof x=="object"&&!Array.isArray(x)&&(b=x?.styles||{});var w=int(e,y,u,a,n,i,b),S=new $D(x,w,e);f[y.dataKey]=S,f[y.index]=S,m=S.colSpan-1,o[y.index]={left:S.rowSpan-1,times:m}}else m--,h++;else o[y.index].left--,m=o[y.index].times,d++}return new LD(c,u,e,f)});return l}function Xq(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=nnt(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function nnt(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function ant(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Lne(a,t,r)})}function int(e,t,r,n,a,i,o){var l=Lrt(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=xd({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?xd({},l.alternateRow,a.alternateRowStyles):{},m=Rrt(i),g=xd({},m,u,h,f);return xd(g,o)}function ont(e,t,r){var n;r===void 0&&(r={});var a=Tne(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r?.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function snt(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=ont(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function BD(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new Fg(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Fne(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=xd({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?lnt(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return zd(d,t,h,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;US(d,t,h,g,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return zd(d,t,h,i,t.columns)})),kne(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function lnt(e,t,r,n){var a=snt(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Kx(e,t,r,n,u.columns,!0):Jq(e,t,n,u.columns),cnt(e,t,r,n,u.columns),oP(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?Kx(e,t,r,n,d,!0):Jq(e,t,n,d),u=Qq(e,t,o+1,n,d),oP(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Kx(e,t,r,n,h.columns,!0),Qq(e,t,o+1,n,h.columns,f),oP(e,t,n,h.columns)}),o=u};o<t.body.length-1;)c()}function Jq(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return zd(e,t,i,r,n)})}function cnt(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;US(e,t,i,l,r,n,a)})}function Qq(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=$ne(e,t,d,n);c.canEntireRowFit(f,a)&&(zd(e,t,c,n,a),l=r+u)}),l}function oP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return zd(e,t,i,r,n)})}function unt(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function dnt(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new $D(u.raw,u.styles,u.section);d=xd(d,u),d.text=[];var f=unt(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var g=new LD(e.raw,-1,e.section,a,!0);g.height=i;for(var p=0,y=r.columns;p<y.length;p++){var c=y[p],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function fnt(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function US(e,t,r,n,a,i,o){var l=$ne(e,t,n,i);if(r.canEntireRowFit(l,o))zd(e,t,r,i,o);else if(fnt(e,r,l,t)){var c=dnt(r,l,t,e);zd(e,t,r,i,o),Kx(e,t,a,i,o),US(e,t,c,n,a,i,o)}else Kx(e,t,a,i,o),US(e,t,r,n,a,i,o)}function zd(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var l=o[i],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}hnt(e,c,n);var d=c.getTextPos();Ane(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function hnt(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=One(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),mnt(e,t,r,n.lineWidth))}function mnt(e,t,r,n){var a,i,o,l;n.top&&(a=r.x,i=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,o,l)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,o,l)),n.left&&(a=r.x,i=r.y,o=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,o,l)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function $ne(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Kx(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return zd(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;kne(e,t,r,n),Fne(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return zd(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function Fne(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Bne(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=RD(this,n),i=FD(this,a);return BD(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Ane(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Fg.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Fg.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Fg(this),i=Dne(a,t,window,r,!1),o=i.head,l=i.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var sP;function Zq(e,t){var r=RD(e,t),n=FD(e,r);BD(e,n)}function pnt(e,t){var r=RD(e,t);return FD(e,r)}function gnt(e,t){BD(e,t)}try{if(typeof window<"u"&&window){var e9=window,t9=e9.jsPDF||((sP=e9.jspdf)===null||sP===void 0?void 0:sP.jsPDF);t9&&Bne(t9)}}catch(e){console.error("Could not apply autoTable plugin",e)}const vnt=Object.freeze(Object.defineProperty({__proto__:null,Cell:$D,CellHookData:Mne,Column:Lne,HookData:qS,Row:LD,Table:Rne,__createTable:pnt,__drawTable:gnt,applyPlugin:Bne,autoTable:Zq,default:Zq},Symbol.toStringTag,{value:"Module"})),ynt={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.08,delayChildren:.1}}},cs={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function Vw({icon:e,label:t,value:r,delta:n,positive:a=!0,color:i="brand"}){return s.jsxs(lr.div,{variants:cs,className:"fx-card border-0 ring-0 outline-none shadow-none",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[s.jsx(e,{className:`w-4 h-4 text-${i}`}),s.jsx("span",{children:t})]}),n!=null&&s.jsxs("div",{className:`text-xs font-bold ${a?"text-success":"text-danger"}`,children:[a?"+":"",n]})]}),s.jsx("div",{className:"text-3xl font-bold text-text-primary tabular-nums",children:r})]})}function xnt(){const{toast:e}=Za(),{userProfile:t}=po(),[r,n]=Nle(),[a,i]=v.useState(r.get("tab")||"visao-geral"),[o,l]=v.useState(!1),[c,u]=v.useState(()=>{const J=new Date;return new Date(J.getFullYear(),J.getMonth(),1).toISOString().slice(0,10)}),[d,f]=v.useState(()=>new Date().toISOString().slice(0,10)),[h,m]=v.useState(null),[g,p]=v.useState(0),[y,x]=v.useState(0),[b,w]=v.useState([]),[S,j]=v.useState([]),[A,P]=v.useState([]),[C,E]=v.useState([]),[R,k]=v.useState([]),[T,I]=v.useState(0),[M,z]=v.useState(0),[W,U]=v.useState(!1),[$,G]=v.useState(!1),[me,de]=v.useState(null),[L,B]=v.useState([]),[X,q]=v.useState(!1),[Y,Z]=v.useState(!1),[ge,re]=v.useState(!1),[Se,Ie]=v.useState(null),[pe,Ue]=v.useState([]),[_e,ue]=v.useState([]);v.useState({open:!1,tipo:"suprimento",valor:"",observacao:"",loading:!1});const[Ft,qt]=v.useState(!1),[zt,it]=v.useState(!1),[ft,dt]=v.useState(null),[ve,ut]=v.useState([]),[Te,Ze]=v.useState(""),[Ye,Nt]=v.useState("all"),[nt,mt]=v.useState("all"),[At,Pe]=v.useState([]),[Je,Dt]=v.useState(""),[qe,lt]=v.useState("all"),[Bt,Tt]=v.useState("all"),[er,tt]=v.useState(!1),[ur,ln]=v.useState(null),[rn,fr]=v.useState([]),[Zt,Qn]=v.useState(!1),[Kn,Ce]=v.useState([]);v.useState("");const We=J=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(J||0)),He=J=>Number(J||0).toFixed(2),xt=async(J,Le,Pt,Yt)=>{try{const{default:ot}=await xu(()=>Promise.resolve().then(()=>Mrt),void 0);await xu(()=>Promise.resolve().then(()=>vnt),void 0);const Lt=new ot("p","mm","a4"),ir=Lt.internal.pageSize.getWidth();if(Lt.setFontSize(20),Lt.setTextColor(245,158,11),Lt.text(J,14,20),Lt.setDrawColor(245,158,11),Lt.setLineWidth(.5),Lt.line(14,23,ir-14,23),Lt.setFontSize(10),Lt.setTextColor(100,100,100),Lt.text(`Perodo: ${c||"N/A"} at ${d||"N/A"}`,14,30),Lt.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,14,35),typeof Lt.autoTable=="function"){Lt.autoTable({head:[Le],body:Pt,startY:42,theme:"striped",headStyles:{fillColor:[245,158,11],textColor:[255,255,255],fontStyle:"bold",fontSize:11},bodyStyles:{fontSize:10,textColor:[50,50,50]},alternateRowStyles:{fillColor:[249,249,249]},margin:{top:42,left:14,right:14}});const te=Lt.lastAutoTable.finalY||50;Lt.setFontSize(8),Lt.setTextColor(150,150,150),Lt.text("Relatrio gerado por Fluxo7Arena - Sistema de Gesto de Quadras Esportivas",ir/2,te+15,{align:"center"})}else{let te=45;Lt.setFontSize(11),Lt.setTextColor(0,0,0),Le.forEach((Ne,V)=>{const ee=14+V*60;Lt.text(Ne,ee,te)}),te+=7,Lt.setFontSize(10),Pt.forEach(Ne=>{Ne.forEach((V,ee)=>{const oe=14+ee*60;Lt.text(String(V),oe,te)}),te+=6})}Lt.save(`${Yt}_${Rr(new Date,"yyyy-MM-dd")}.pdf`),e({title:"PDF baixado com sucesso!",description:"O arquivo foi salvo na sua pasta de downloads"})}catch(ot){console.error("Erro ao gerar PDF:",ot),e({title:"Erro ao gerar PDF",description:ot.message,variant:"destructive"})}},at=({cx:J,cy:Le,midAngle:Pt,outerRadius:Yt,percent:ot})=>{const Lt=Math.PI/180,ir=(Yt||0)+12,te=J+ir*Math.cos(-Pt*Lt),Ne=Le+ir*Math.sin(-Pt*Lt);return s.jsx("text",{x:te,y:Ne,fill:"#fff",textAnchor:te>J?"start":"end",dominantBaseline:"central",style:{pointerEvents:"none",fontSize:15,fontWeight:700},children:`${Math.round((ot||0)*100)}%`})},st=J=>{const Le=Yn!=null&&Yn!==J;return{transition:"opacity 320ms ease-in-out, filter 320ms ease-in-out",opacity:Le?.25:1,filter:Le?"grayscale(15%)":"none",cursor:"pointer"}};v.useEffect(()=>{(async()=>{if(!er||!ur||ur.origem!=="Comanda"||!ur.comanda_id){fr([]),Ce([]);return}try{Qn(!0);const Le=t?.codigo_empresa;let Pt=Oe.from("comanda_itens").select("descricao, quantidade, preco_unitario").eq("comanda_id",ur.comanda_id);Le&&(Pt=Pt.eq("codigo_empresa",Le));const{data:Yt}=await Pt;fr(Yt||[]);let ot=Oe.from("pagamentos").select("id, valor, metodo, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").eq("comanda_id",ur.comanda_id);Le&&(ot=ot.eq("codigo_empresa",Le));const{data:Lt}=await ot;Ce(Lt||[])}catch(Le){console.warn("[Financeiro][RecebimentoModal] Falha ao carregar itens da comanda:",Le?.message),fr([]),Ce([])}finally{Qn(!1)}})()},[er,ur,t?.codigo_empresa]);const Mt=async()=>{try{l(!0);const J=nr(c)||void 0,Le=Ar(d)||void 0,Pt=t?.codigo_empresa;console.debug("[Financeiro][VisaoGeral] Carregando com perodo:",{fromISO:J,toISO:Le,codigo:Pt});const Yt=await Om({from:J,to:Le}).catch(()=>null);m(Yt||{totalPorFinalizadora:{},totalEntradas:0,totalVendasBrutas:0,totalDescontos:0,totalVendasLiquidas:0}),console.debug("[Financeiro][VisaoGeral] Resumo calculado:",Yt);try{let ot=Oe.from("pagamentos").select("valor, status").eq("codigo_empresa",Pt);J&&(ot=ot.gte("recebido_em",J)),Le&&(ot=ot.lte("recebido_em",Le));const{data:Lt}=await ot,ir=(Lt||[]).reduce((ee,oe)=>{const ye=oe.status||"Pago";return ye==="Cancelado"||ye==="Estornado"?ee:ee+Number(oe.valor||0)},0);p(ir);let te=Oe.from("v_agendamentos_detalhado").select("valor_pago").eq("codigo_empresa",Pt).eq("status_pagamento","Pago");J&&(te=te.gte("inicio",J)),Le&&(te=te.lte("inicio",Le));const{data:Ne}=await te,V=(Ne||[]).reduce((ee,oe)=>ee+Number(oe.valor_pago||0),0);x(V),console.debug("[Financeiro][VisaoGeral] Receitas por origem:",{totalComandas:ir,totalAg:V})}catch(ot){console.warn("[Financeiro][VisaoGeral] Falha ao calcular KPIs por origem:",ot?.message),p(0),x(0)}try{let ot=Oe.from("pagamentos").select("valor, status, origem").eq("codigo_empresa",Pt).eq("origem","xml");J&&(ot=ot.gte("recebido_em",J)),Le&&(ot=ot.lte("recebido_em",Le));const{data:Lt}=await ot,ir=(Lt||[]).reduce((Ne,V)=>["Cancelado","Estornado"].includes(V.status)?Ne:Ne+Number(V.valor||0),0);I(ir);const{count:te}=await Oe.from("produtos").select("id",{count:"exact",head:!0}).eq("codigo_empresa",Pt).or("importado_via_xml.is.true,categoria.ilike.Importados").gte("criado_em",J).lte("criado_em",Le);z(te||0)}catch(ot){console.warn("[Financeiro][VisaoGeral] Falha KPIs XML:",ot?.message),I(0),z(0)}if(Pt){let ot=Oe.from("comandas").select("id").eq("status","closed");Pt&&(ot=ot.eq("codigo_empresa",Pt)),J&&(ot=ot.gte("fechado_em",J)),Le&&(ot=ot.lte("fechado_em",Le));const{data:Lt,error:ir}=await ot;if(ir)throw ir;const te=(Lt||[]).map(oe=>oe.id);console.debug("[Financeiro][VisaoGeral] Comandas fechadas:",te.length);let Ne=[];if(te.length>0){let oe=Oe.from("comanda_itens").select("produto_id, quantidade, preco_unitario, produtos!comanda_itens_produto_id_fkey(nome)").in("comanda_id",te);Pt&&(oe=oe.eq("codigo_empresa",Pt));const{data:ye}=await oe;Ne=ye||[]}const V={};(Ne||[]).forEach(oe=>{const ye=oe.produtos?.nome||"Produto sem nome",ke=Number(oe.quantidade||0)*Number(oe.preco_unitario||0);V[ye]=(V[ye]||0)+ke});const ee=Object.entries(V).map(([oe,ye])=>({nome:oe,valor:ye})).sort((oe,ye)=>ye.valor-oe.valor);P(ee),w(ee.slice(0,5)),console.debug("[Financeiro][VisaoGeral] Produtos agregados:",{total:ee.length,top5:ee.slice(0,5)})}if(Pt)try{let ot=Oe.from("pagamentos").select("comanda_id, valor, status").eq("codigo_empresa",Pt).neq("status","Cancelado").neq("status","Estornado");J&&(ot=ot.gte("recebido_em",J)),Le&&(ot=ot.lte("recebido_em",Le));const{data:Lt}=await ot;console.debug("[Financeiro][VisaoGeral] Pagamentos carregados:",(Lt||[]).length);const ir=Array.from(new Set((Lt||[]).map(ke=>ke.comanda_id).filter(Boolean)));let te=[];if(ir.length>0){let ke=Oe.from("comanda_clientes").select("comanda_id, cliente_id, nome_livre").in("comanda_id",ir).eq("codigo_empresa",Pt);const{data:Me}=await ke;te=Me||[]}console.debug("[Financeiro][VisaoGeral] Vinculos comanda_clientes:",te.length);const Ne=Array.from(new Set(te.map(ke=>ke.cliente_id).filter(Boolean))),V={};if(Ne.length>0){const{data:ke}=await Oe.from("clientes").select("id, nome").in("id",Ne).eq("codigo_empresa",Pt);(ke||[]).forEach(Me=>{V[Me.id]=Me.nome})}const ee={};te.forEach(ke=>{const Me=ke.nome_livre||V[ke.cliente_id]||`Cliente ${ke.cliente_id||""}`;ee[ke.comanda_id]||(ee[ke.comanda_id]=new Set),Me&&ee[ke.comanda_id].add(Me)});const oe={};(Lt||[]).forEach(ke=>{const Me=Array.from(ee[ke.comanda_id]||[]),ie=Number(ke.valor||0);if(Me.length===0){const ce="Sem cliente";oe[ce]||(oe[ce]={id:null,nome:ce,valor:0}),oe[ce].valor+=ie}else Me.forEach(ce=>{oe[ce]||(oe[ce]={id:null,nome:ce,valor:0}),oe[ce].valor+=ie})});try{const ke=new Map(Object.values(V).map(($e,bt)=>[Object.keys(V)[bt],$e]));let Me=Oe.from("v_agendamento_participantes").select("agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text");Pt&&(Me=Me.eq("codigo_empresa",Pt));let{data:ie}=await Me;ie=ie||[];const ce=Array.from(new Set(ie.map($e=>$e.agendamento_id).filter(Boolean)));let he=new Set;if(ce.length>0){let $e=Oe.from("agendamentos").select("id, inicio").in("id",ce);Pt&&($e=$e.eq("codigo_empresa",Pt));const{data:bt}=await $e,vt=J?new Date(J).getTime():null,ht=Le?new Date(Le).getTime():null;(bt||[]).forEach(tr=>{const Gt=tr?.inicio?new Date(tr.inicio).getTime():null;Gt!=null&&(vt==null||Gt>=vt)&&(ht==null||Gt<=ht)&&he.add(tr.id)})}const Ke=ie.filter($e=>he.has($e.agendamento_id));console.debug("[Financeiro][Agendamentos] participantes no perodo (by agendamento.inicio):",Ke.length);const Ge=Array.from(new Set((Ke||[]).map($e=>$e.cliente_id).filter(Boolean).map(String))).filter($e=>!ke.has($e));if(Ge.length>0){const{data:$e}=await Oe.from("clientes").select("id,nome").in("id",Ge);($e||[]).forEach(bt=>ke.set(String(bt.id),bt.nome))}(Ke||[]).forEach($e=>{const bt=String($e.status_pagamento||$e.status_pagamento_text||"pago").toLowerCase();if(["cancelado","estornado"].includes(bt))return;const vt=$e.cliente_id,ht=vt?ke.get(String(vt))||`Cliente ${vt}`:null;if(!ht)return;const tr=Number($e.valor_cota||0);oe[ht]||(oe[ht]={id:vt||null,nome:ht,valor:0}),oe[ht].valor+=tr})}catch{}const ye=Object.values(oe).sort((ke,Me)=>Me.valor-ke.valor);E(ye),j(ye.slice(0,5)),console.debug("[Financeiro][VisaoGeral] Clientes agregados:",{total:ye.length,top5:ye.slice(0,5)})}catch(ot){console.error("Erro ao carregar top clientes:",ot),j([]),E([])}if(Pt&&J&&Le)try{let ot=Oe.from("pagamentos").select("recebido_em, valor, status").eq("codigo_empresa",Pt).gte("recebido_em",J).lte("recebido_em",Le).order("recebido_em",{ascending:!0});const{data:Lt}=await ot;let ir=Oe.from("v_agendamentos_detalhado").select("inicio, valor_pago, status_pagamento").eq("codigo_empresa",Pt).eq("status_pagamento","Pago").gte("inicio",J).lte("inicio",Le).order("inicio",{ascending:!0});const{data:te}=await ir,Ne={};(Lt||[]).forEach(ee=>{if(["Cancelado","Estornado"].includes(ee.status))return;const oe=new Date(ee.recebido_em).toLocaleDateString("pt-BR");Ne[oe]=(Ne[oe]||0)+Number(ee.valor||0)}),(te||[]).forEach(ee=>{const oe=new Date(ee.inicio).toLocaleDateString("pt-BR");Ne[oe]=(Ne[oe]||0)+Number(ee.valor_pago||0)});const V=Object.entries(Ne).map(([ee,oe])=>({data:ee,valor:oe})).sort((ee,oe)=>{const[ye,ke,Me]=ee.data.split("/").map(Number),[ie,ce,he]=oe.data.split("/").map(Number);return new Date(Me,ke-1,ye).getTime()-new Date(he,ce-1,ie).getTime()});k(V),console.debug("[Financeiro][VisaoGeral] Evoluo diria:",V.length,"dias")}catch(ot){console.warn("[Financeiro][VisaoGeral] Falha ao calcular evoluo diria:",ot?.message),k([])}else k([])}catch(J){e({title:"Falha ao carregar viso geral",description:J?.message||"Tente novamente",variant:"destructive"})}finally{l(!1)}},wt=async()=>{try{const J=t?.codigo_empresa,Le=await Of({codigoEmpresa:J});if(re(!!Le),Le){const[Yt,ot]=await Promise.all([cb({codigoEmpresa:J}),Rg({caixaSessaoId:Le.id,codigoEmpresa:J})]);Ie(Yt||null),Ue(ot||[])}else Ie(null),Ue([]);const Pt=await Oee({limit:50,codigoEmpresa:J});ue(Pt||[])}catch(J){e({title:"Falha ao carregar caixa",description:J?.message,variant:"destructive"})}},Vt=async()=>{try{l(!0);const J=t?.codigo_empresa,Le=nr(c)||void 0,Pt=Ar(d)||void 0;let Yt=Oe.from("pagamentos").select("id, comanda_id, valor, status, metodo, recebido_em, origem, xml_chave, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").eq("codigo_empresa",J).order("recebido_em",{ascending:!1});Le&&(Yt=Yt.gte("recebido_em",Le)),Pt&&(Yt=Yt.lte("recebido_em",Pt));const{data:ot}=await Yt;let Lt=new Map,ir=new Map;try{const oe=Array.from(new Set((ot||[]).map(ye=>ye.comanda_id).filter(Boolean)));if(oe.length>0){const{data:ye}=await Oe.from("comandas").select("id, cliente_id, tipo").in("id",oe).eq("codigo_empresa",J),ke=Array.from(new Set((ye||[]).map(ce=>ce.cliente_id).filter(Boolean)));let Me=new Map;if(ke.length>0){const{data:ce}=await Oe.from("clientes").select("id, nome").in("id",ke).eq("codigo_empresa",J);Me=new Map((ce||[]).map(he=>[he.id,he.nome]))}for(const ce of ye||[]){if(!ce)continue;const he=Me.get(ce.cliente_id)||null;Lt.set(ce.id,he),ir.set(ce.id,ce.tipo||null)}const ie=(ye||[]).filter(ce=>!ce?.cliente_id).map(ce=>ce.id);if(ie.length>0)try{const{data:ce}=await Oe.from("comanda_clientes").select("comanda_id, cliente_id").in("comanda_id",ie).eq("codigo_empresa",J),he=Array.from(new Set((ce||[]).map(Ke=>Ke.cliente_id).filter(Boolean)));if(he.length>0){const{data:Ke}=await Oe.from("clientes").select("id, nome").in("id",he).eq("codigo_empresa",J),rt=new Map((Ke||[]).map(Ge=>[Ge.id,Ge.nome]));for(const Ge of ce||[]){const $e=rt.get(Ge.cliente_id)||null;$e&&!Lt.get(Ge.comanda_id)&&Lt.set(Ge.comanda_id,$e)}}}catch{console.debug("[Financeiro][Recebimentos] comanda_clientes indisponvel (ok)")}}}catch(oe){console.warn("[Financeiro][Recebimentos] Falha ao buscar clientes de comandas:",oe?.message)}let te=Oe.from("v_agendamentos_detalhado").select("agendamento_id, agendamento_codigo, inicio, quadra_nome, participante_nome, valor_cota, status_pagamento, finalizadora_nome").eq("codigo_empresa",J).eq("status_pagamento","Pago").order("inicio",{ascending:!1});Le&&(te=te.gte("inicio",Le)),Pt&&(te=te.lte("inicio",Pt));const{data:Ne}=await te,V=(ot||[]).map(oe=>({id:oe.id,origem:ir.get(oe.comanda_id||"")==="balcao"?"Balco":"Comanda",comanda_id:oe.comanda_id||null,recebido_em:oe.recebido_em,finalizadoras:oe.finalizadoras,metodo:oe.metodo,valor:oe.valor,status:oe.status,descricao:Lt.get(oe.comanda_id||"")||null,fonte:oe.origem||"manual",xml_chave:oe.xml_chave||null})),ee=(Ne||[]).map((oe,ye)=>({id:`ag-${oe.agendamento_id}-${ye}`,origem:"Agendamento",recebido_em:oe.inicio,finalizadoras:oe.finalizadora_nome?{nome:oe.finalizadora_nome}:null,metodo:oe.finalizadora_nome||null,valor:oe.valor_cota,status:oe.status_pagamento,descricao:`#${oe.agendamento_codigo} - ${oe.participante_nome} (${oe.quadra_nome||""})`,agendamento_codigo:oe.agendamento_codigo,quadra_nome:oe.quadra_nome,participante_nome:oe.participante_nome,fonte:null}));ut([...V,...ee])}catch(J){e({title:"Falha ao carregar recebimentos",description:J?.message,variant:"destructive"})}finally{l(!1)}},Qt=async()=>{try{l(!0);const J=t?.codigo_empresa,Le=nr(c)||void 0,Pt=Ar(d)||void 0;let Yt=Oe.from("v_agendamentos_detalhado").select("agendamento_codigo, inicio, quadra_nome, participante_nome, valor_cota, finalizadora_nome, status_pagamento").eq("codigo_empresa",J).order("inicio",{ascending:!1});Le&&(Yt=Yt.gte("inicio",Le)),Pt&&(Yt=Yt.lte("inicio",Pt));const{data:ot}=await Yt;Pe(ot||[])}catch(J){e({title:"Falha ao carregar agendamentos",description:J?.message,variant:"destructive"})}finally{l(!1)}};v.useEffect(()=>{n({tab:a})},[a]);const nr=J=>{if(!J)return null;if(typeof J=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(J)){const[Le,Pt,Yt]=J.split("-").map(Number);return new Date(Le,Pt-1,Yt,0,0,0,0).toISOString()}return new Date(J).toISOString()},Ar=J=>{if(!J)return null;if(typeof J=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(J)){const[Le,Pt,Yt]=J.split("-").map(Number);return new Date(Le,Pt-1,Yt,23,59,59,999).toISOString()}return new Date(J).toISOString()};v.useEffect(()=>{t?.codigo_empresa&&(a==="visao-geral"||a==="relatorios"?Mt():a==="caixa"?wt():a==="recebimentos"?Vt():a==="agendamentos"&&Qt())},[a,c,d,t?.codigo_empresa]);const cn=v.useMemo(()=>{const J=h?.totalPorFinalizadora||{},Le=Object.entries(J).map(([Pt,Yt])=>({name:Pt,valor:Number(Yt||0)}));return Le.sort((Pt,Yt)=>Yt.valor-Pt.valor),Le},[h]),[On,ca]=v.useState(null),[Yn,oi]=v.useState(null),An={start:90,end:-270},ua=(J,Le,Pt)=>J+(Le-J)*Pt,Ni=J=>J<.5?4*J*J*J:1-Math.pow(-2*J+2,3)/2,ei=J=>{const Le=Number(g||0),Pt=Number(y||0),Yt=Math.max(1e-4,Le+Pt),ot=360*(Le/Yt);return J===0?{a:An.start,b:An.start-ot}:{a:An.start-ot,b:An.end}},[da,Ia]=v.useState({from:null,to:null,t:1}),si=Yn??On;v.useEffect(()=>{if(si==null)return;const J=ei(si);Ia(Lt=>({from:Lt.to||J,to:J,t:0}));let Le;const Pt=performance.now(),Yt=380,ot=Lt=>{const ir=Math.min(1,(Lt-Pt)/Yt),te=Ni(ir);Ia(Ne=>({...Ne,t:te})),ir<1&&(Le=requestAnimationFrame(ot))};return Le=requestAnimationFrame(ot),()=>Le&&cancelAnimationFrame(Le)},[si,g,y]);const Xn=86,va=94,Ri=80,[Sn,Io]=v.useState({from:[Xn,Xn],to:[Xn,Xn],t:1});v.useEffect(()=>{const J=si===0?[va,Ri]:si===1?[Ri,va]:[Xn,Xn];Io(Lt=>({from:Lt.to||J,to:J,t:0}));let Le;const Pt=performance.now(),Yt=380,ot=Lt=>{const ir=Math.min(1,(Lt-Pt)/Yt),te=Ni(ir);Io(Ne=>({...Ne,t:te})),ir<1&&(Le=requestAnimationFrame(ot))};return Le=requestAnimationFrame(ot),()=>Le&&cancelAnimationFrame(Le)},[si]);const Li=({cx:J,cy:Le,outerRadius:Pt})=>{if(!da.from||!da.to)return null;const Yt=ua(da.from.a,da.to.a,da.t),ot=ua(da.from.b,da.to.b,da.t),Lt=si===0?"#22C55E":"#F59E0B";return s.jsx(Z3,{cx:J,cy:Le,innerRadius:0,outerRadius:(Pt||0)+4,startAngle:Yt,endAngle:ot,fill:Lt,fillOpacity:.18,stroke:"transparent"})},yo=v.useMemo(()=>{let J=ve;if(Te){const Le=Te.toLowerCase();J=J.filter(Pt=>(Pt.descricao||"").toLowerCase().includes(Le)||(Pt.finalizadoras?.nome||"").toLowerCase().includes(Le)||String(Pt.valor||"").includes(Le)||(Pt.origem||"").toLowerCase().includes(Le))}return Ye!=="all"&&(J=J.filter(Le=>(Le.finalizadoras?.nome||Le.metodo)===Ye)),nt!=="all"&&(J=J.filter(Le=>(Le.fonte||"manual")===nt)),J},[ve,Te,Ye,nt]),Ci=v.useMemo(()=>{let J=At||[];if(qe!=="all"&&(J=J.filter(Le=>(Le.status_pagamento||"").toLowerCase()===qe.toLowerCase())),Bt!=="all"&&(J=J.filter(Le=>(Le.finalizadora_nome||"")===Bt)),Je){const Le=Je.toLowerCase();J=J.filter(Pt=>String(Pt.agendamento_codigo||"").toLowerCase().includes(Le)||(Pt.participante_nome||"").toLowerCase().includes(Le)||(Pt.quadra_nome||"").toLowerCase().includes(Le))}return J},[At,qe,Bt,Je]);return s.jsxs(s.Fragment,{children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Financeiro - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Gesto financeira completa: viso geral, caixa, recebimentos e relatrios."}),s.jsx("style",{children:`
          /* Remove outline feio ao focar no SVG do Recharts */
          .recharts-wrapper:focus, .recharts-surface:focus { outline: none; }
          .recharts-wrapper svg:focus, .recharts-wrapper svg *:focus { outline: none !important; }
          .recharts-wrapper svg { -webkit-tap-highlight-color: transparent; }
          .recharts-sector { outline: none !important; }
        `})]}),s.jsxs(lr.div,{variants:ynt,initial:"hidden",animate:"visible",className:"space-y-6",children:[s.jsx(lr.div,{variants:cs,className:"fx-card p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Financeiro"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Gesto completa das finanas da empresa"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[s.jsxs("div",{className:"flex flex-col justify-center flex-1 sm:flex-initial",children:[s.jsx("label",{className:"text-xs text-text-secondary mb-1",children:"Incio"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:"h-9 w-full sm:w-[160px] pl-3 pr-3 flex items-center gap-2 justify-start text-left font-medium bg-black border-warning/40 text-white hover:bg-black/80 hover:border-warning",children:[s.jsx(vu,{className:"h-5 w-5 text-warning flex-shrink-0"}),s.jsx("span",{className:"font-mono tracking-wide text-sm leading-none",children:c?Rr(new Date(c+"T00:00:00"),"dd/MM/yyyy",{locale:Zu}):"Selecione"})]})}),s.jsx(Ou,{className:"w-auto p-0 bg-black border-warning/40",align:"start",children:s.jsx(ju,{mode:"single",selected:c?new Date(c+"T00:00:00"):void 0,onSelect:J=>J&&u(Rr(J,"yyyy-MM-dd")),initialFocus:!0,classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md border-warning/40"}})})]})]}),s.jsxs("div",{className:"flex flex-col justify-center flex-1 sm:flex-initial",children:[s.jsx("label",{className:"text-xs text-text-secondary mb-1",children:"Fim"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:"h-9 w-full sm:w-[160px] pl-3 pr-3 flex items-center gap-2 justify-start text-left font-medium bg-black border-warning/40 text-white hover:bg-black/80 hover:border-warning",children:[s.jsx(vu,{className:"h-5 w-5 text-warning flex-shrink-0"}),s.jsx("span",{className:"font-mono tracking-wide text-sm leading-none",children:d?Rr(new Date(d+"T00:00:00"),"dd/MM/yyyy",{locale:Zu}):"Selecione"})]})}),s.jsx(Ou,{className:"w-auto p-0 bg-black border-warning/40",align:"start",children:s.jsx(ju,{mode:"single",selected:d?new Date(d+"T00:00:00"):void 0,onSelect:J=>J&&f(Rr(J,"yyyy-MM-dd")),initialFocus:!0,classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md border-warning/40"}})})]})]})]})]})}),s.jsxs(Ad,{value:a,onValueChange:i,children:[s.jsx("div",{className:"md:hidden mb-4",children:s.jsxs(yn,{value:a,onValueChange:i,children:[s.jsx(pn,{className:"w-full h-11 bg-black border-warning/40 text-white",children:s.jsx(xn,{placeholder:"Selecione uma aba"})}),s.jsxs(gn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Wt,{value:"visao-geral",children:"Viso Geral"}),s.jsx(Wt,{value:"caixa",children:"Caixa"}),s.jsx(Wt,{value:"recebimentos",children:"Recebimentos"}),s.jsx(Wt,{value:"agendamentos",children:"Agendamentos"}),s.jsx(Wt,{value:"relatorios",children:"Relatrios"})]})]})}),s.jsxs(Nu,{className:"hidden md:grid w-full grid-cols-5",children:[s.jsx(Jn,{value:"visao-geral",children:"Viso Geral"}),s.jsx(Jn,{value:"caixa",children:"Caixa"}),s.jsx(Jn,{value:"recebimentos",children:"Recebimentos"}),s.jsx(Jn,{value:"agendamentos",children:"Agendamentos"}),s.jsx(Jn,{value:"relatorios",children:"Relatrios"})]}),s.jsxs(Qi,{value:"visao-geral",className:"space-y-6 mt-6",children:[s.jsxs(lr.div,{variants:cs,className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsx(Vw,{icon:VW,label:"Total Geral",value:We(Number(g||0)+Number(y||0)),color:"brand"}),s.jsx(Vw,{icon:Ob,label:"Comandas",value:We(g),color:"success"}),s.jsx(Vw,{icon:vu,label:"Agendamentos",value:We(y),color:"success"}),s.jsx(Vw,{icon:um,label:"XML (Recebimentos)",value:We(T),color:"success"})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[s.jsx(um,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Proporo de Receita"})]})}),Number(g||0)+Number(y||0)===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem receitas no perodo."}):s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsx("div",{className:"w-full md:flex-1 h-[280px]",children:s.jsx(f2,{width:"100%",height:"100%",children:s.jsxs(z8e,{children:[s.jsxs(Eu,{data:function(){const J=ua(Sn.from?.[0]??Xn,Sn.to?.[0]??Xn,Sn.t),Le=ua(Sn.from?.[1]??Xn,Sn.to?.[1]??Xn,Sn.t);return[{name:"Comandas",value:Number(g||0),fill:"#22C55E",outerRadius:J},{name:"Agendamentos",value:Number(y||0),fill:"#F59E0B",outerRadius:Le}]}(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:0,stroke:"transparent",label:!1,labelLine:!1,isAnimationActive:!0,animationBegin:50,animationDuration:500,startAngle:An.start,endAngle:An.end,activeIndex:si,activeShape:void 0,onMouseEnter:(J,Le)=>ca(Le),onMouseLeave:()=>ca(null),onClick:(J,Le)=>{oi(Pt=>Pt===Le?null:Le),ca(Le)},children:[s.jsx(C0,{fill:"#22C55E",style:st(0)},"c"),s.jsx(C0,{fill:"#F59E0B",style:st(1)},"a")]}),Li({cx:"50%",cy:"50%",outerRadius:92}),s.jsx(Eu,{data:function(){const J=ua(Sn.from?.[0]??Xn,Sn.to?.[0]??Xn,Sn.t),Le=ua(Sn.from?.[1]??Xn,Sn.to?.[1]??Xn,Sn.t);return[{name:"Comandas",value:Number(g||0),fill:"transparent",outerRadius:J},{name:"Agendamentos",value:Number(y||0),fill:"transparent",outerRadius:Le}]}(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:0,stroke:"transparent",label:at,labelLine:!1,isAnimationActive:!1,startAngle:An.start,endAngle:An.end}),s.jsx(ul,{formatter:J=>We(J),contentStyle:{background:"rgba(10, 10, 10, 0.95)",border:"1px solid #fbbf24",borderRadius:"8px",padding:"8px 10px",color:"#fff"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"},cursor:{fill:"rgba(251, 191, 36, 0.06)"}})]})})}),s.jsx("div",{className:"w-full md:w-64 space-y-3 md:pr-2",children:[{name:"Comandas",value:Number(g||0),color:"#22C55E"},{name:"Agendamentos",value:Number(y||0),color:"#F59E0B"}].map((J,Le)=>s.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-md transition-all duration-200 ${On===Le?"bg-white/5":"hover:bg-white/5"} cursor-pointer ${Yn!=null&&Yn!==Le?"opacity-60":""}`,onMouseEnter:()=>ca(Le),onMouseLeave:()=>ca(null),onClick:()=>oi(Pt=>Pt===Le?null:Le),role:"button",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-3 h-3 rounded-sm",style:{backgroundColor:J.color}}),s.jsx("span",{className:"text-sm text-text-secondary",children:J.name})]}),s.jsx("div",{className:`text-sm font-semibold ${Yn!=null&&Yn!==Le?"opacity-70":""}`,children:We(J.value)})]},J.name))})]})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[s.jsx(um,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Entradas por Finalizadora"})]})}),cn.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos no perodo."}):s.jsx("div",{className:"h-[280px]",children:s.jsx(f2,{width:"100%",height:"100%",children:s.jsxs(B8e,{data:cn,margin:{top:8,right:8,left:8,bottom:8},children:[s.jsx(cO,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(Ym,{dataKey:"name",stroke:"#aaa"}),s.jsx(Xm,{stroke:"#aaa",tickFormatter:J=>We(J),width:80}),s.jsx(ul,{formatter:J=>We(J),labelFormatter:J=>`Finalizadora: ${J}`,contentStyle:{background:"rgba(10, 10, 10, 0.95)",border:"1px solid #fbbf24",borderRadius:"8px",padding:"8px 12px",color:"#fff"},cursor:{fill:"rgba(251, 191, 36, 0.1)"}}),s.jsx(Am,{}),s.jsx(gp,{dataKey:"valor",name:"Valor",fill:"#fbbf24"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(lr.div,{variants:cs,className:"fx-card p-4 border-0 ring-0 outline-none focus-visible:outline-none shadow-none cursor-pointer",onClick:()=>U(!0),children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider mb-3",children:[s.jsx(Xg,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Produtos (por faturamento)"}),A.length>5&&s.jsx(Ee,{variant:"outline",size:"xs",className:"ml-auto h-7 px-2",onClick:()=>U(!0),children:"Ver todos"})]}),b.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados no perodo."}):s.jsx("div",{className:"space-y-2",children:b.map((J,Le)=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[s.jsxs("span",{className:"text-sm text-text-primary",children:[Le+1,". ",J.nome]}),s.jsx("span",{className:"text-sm font-bold text-success",children:We(J.valor)})]},Le))})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4 border-0 ring-0 outline-none focus-visible:outline-none shadow-none cursor-pointer",onClick:()=>G(!0),children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider mb-3",children:[s.jsx(hs,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Clientes (por valor pago)"}),C.length>5&&s.jsx(Ee,{variant:"outline",size:"xs",className:"ml-auto h-7 px-2",onClick:()=>G(!0),children:"Ver todos"})]}),S.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados no perodo."}):s.jsx("div",{className:"space-y-2",children:S.map((J,Le)=>s.jsxs("button",{className:"w-full flex items-center justify-between py-2 border-b border-border last:border-0 hover:bg-surface-2 rounded-sm px-2 text-left",onClick:()=>{de(J),G(!0)},children:[s.jsxs("span",{className:"text-sm text-text-primary",children:[Le+1,". ",J.nome]}),s.jsx("span",{className:"text-sm font-bold text-success",children:We(J.valor)})]},Le))})]})]})]}),s.jsx(Qi,{value:"agendamentos",className:"space-y-6 mt-6",children:s.jsxs(lr.div,{variants:cs,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Agendamentos (Pagamentos por Participante)"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar (#cdigo, participante, quadra)",value:Je,onChange:J=>Dt(J.target.value),className:"pl-10 w-full md:w-[260px] bg-black border-warning/40 text-white placeholder:text-white/60"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs(yn,{value:qe,onValueChange:lt,children:[s.jsx(pn,{className:"w-full md:w-[170px] h-9 bg-black border-warning/40 text-white",children:s.jsx(xn,{placeholder:"Todos os Status"})}),s.jsxs(gn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Wt,{value:"all",children:"Todos os Status"}),s.jsx(Wt,{value:"Pago",children:"Pago"}),s.jsx(Wt,{value:"Pendente",children:"Pendente"}),s.jsx(Wt,{value:"Cancelado",children:"Cancelado"})]})]}),s.jsxs(yn,{value:Bt,onValueChange:Tt,children:[s.jsx(pn,{className:"w-full md:w-[220px] h-9 bg-black border-warning/40 text-white",children:s.jsx(xn,{placeholder:"Todas as Finalizadoras"})}),s.jsxs(gn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Wt,{value:"all",children:"Todas as Finalizadoras"}),[...new Set((At||[]).map(J=>J.finalizadora_nome).filter(Boolean))].map(J=>s.jsx(Wt,{value:J,children:J},J))]})]})]}),s.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>{try{const J=Ci||[],Pt=[["Data/Hora","Cdigo","Quadra","Participante","Finalizadora","Valor","Status"].join(";")];for(const V of J){const ee=[V.inicio?new Date(V.inicio).toLocaleString("pt-BR"):"",V.agendamento_codigo??"",(V.quadra_nome??"").replaceAll('"','""'),(V.participante_nome??"").replaceAll('"','""'),(V.finalizadora_nome??"").replaceAll('"','""'),String(He(V.valor_cota)).replace(".",","),V.status_pagamento??""].map(oe=>`"${String(oe)}"`).join(";");Pt.push(ee)}const Yt="\uFEFF"+Pt.join(`
`),ot=new Blob([Yt],{type:"text/csv;charset=utf-8;"}),Lt=URL.createObjectURL(ot),ir=document.createElement("a");ir.href=Lt;const te=c?new Date(c+"T00:00:00").toLocaleDateString("pt-BR"):"",Ne=d?new Date(d+"T00:00:00").toLocaleDateString("pt-BR"):"";ir.download=`agendamentos_${te}_a_${Ne}.csv`,document.body.appendChild(ir),ir.click(),document.body.removeChild(ir),URL.revokeObjectURL(Lt)}catch(J){e({title:"Falha ao exportar CSV",description:J?.message,variant:"destructive"})}},children:[s.jsx(cl,{className:"h-4 w-4 mr-2"})," Exportar CSV"]})]})]}),o?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),s.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):Ci.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros no perodo."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Data/Hora"}),s.jsx(_r,{children:"Cdigo"}),s.jsx(_r,{children:"Quadra"}),s.jsx(_r,{children:"Participante"}),s.jsx(_r,{children:"Finalizadora"}),s.jsx(_r,{className:"text-right",children:"Valor"}),s.jsx(_r,{children:"Status"})]})}),s.jsx(Go,{children:Ci.map((J,Le)=>s.jsxs(Mn,{children:[s.jsx(hr,{children:J.inicio?new Date(J.inicio).toLocaleString("pt-BR"):""}),s.jsxs(hr,{children:["#",J.agendamento_codigo||""]}),s.jsx(hr,{children:J.quadra_nome||""}),s.jsx(hr,{children:J.participante_nome||""}),s.jsx(hr,{children:J.finalizadora_nome||""}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor_cota)}),s.jsx(hr,{children:J.status_pagamento||""})]},`${J.agendamento_codigo}-${Le}`))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:Ci.map((J,Le)=>s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm font-semibold text-text-primary",children:["#",J.agendamento_codigo||""]}),s.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${J.status_pagamento==="Pago"?"bg-success/20 text-success":J.status_pagamento==="Cancelado"?"bg-danger/20 text-danger":"bg-warning/20 text-warning"}`,children:J.status_pagamento||"Pendente"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Data/Hora:"}),s.jsx("span",{className:"text-text-primary",children:J.inicio?new Date(J.inicio).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Quadra:"}),s.jsx("span",{className:"text-text-primary font-medium",children:J.quadra_nome||""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Participante:"}),s.jsx("span",{className:"text-text-primary",children:J.participante_nome||""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Finalizadora:"}),s.jsx("span",{className:"text-text-primary",children:J.finalizadora_nome||""})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor da Cota:"}),s.jsx("span",{className:"font-bold text-lg text-success",children:We(J.valor_cota)})]})]})]},`${J.agendamento_codigo}-${Le}`))})]})]})}),s.jsx(Qi,{value:"caixa",className:"space-y-6 mt-6",children:s.jsxs(lr.div,{variants:cs,className:"fx-card p-4",children:[s.jsx("h3",{className:"text-base font-bold mb-3",children:"Fechamentos Anteriores"}),_e.length===0?s.jsx("div",{className:"text-sm text-text-secondary",children:"Nenhum fechamento encontrado."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Aberto em"}),s.jsx(_r,{children:"Fechado em"}),s.jsx(_r,{className:"text-right",children:"Saldo Inicial"}),s.jsx(_r,{className:"text-right",children:"Saldo Final"}),s.jsx(_r,{children:"Status"})]})}),s.jsx(Go,{children:_e.map(J=>s.jsxs(Mn,{className:"cursor-pointer hover:bg-surface-2",onClick:async()=>{qt(!0),it(!0),dt(null);try{const Le=t?.codigo_empresa,Pt=typeof performance<"u"&&performance.now?performance.now():Date.now();console.log("[Caixa][Fechamento][Open]",{sessaoId:J.id,from:J.aberto_em,to:J.fechado_em,codigo:Le});let Yt=await LO({caixaSessaoId:J.id,codigoEmpresa:Le}),Lt=(ie=>{if(!ie)return null;if(ie.total_bruto!=null||ie.por_finalizadora!=null){let ce=ie.por_finalizadora;if(ce&&typeof ce=="string")try{ce=JSON.parse(ce)}catch{ce={}}return{from:ie.periodo_de||null,to:ie.periodo_ate||null,totalPorFinalizadora:ce||{},totalEntradas:Number(ie.total_entradas||0),totalVendasBrutas:Number(ie.total_bruto||0),totalDescontos:Number(ie.total_descontos||0),totalVendasLiquidas:Number(ie.total_liquido||0)}}return ie})(Yt);if(Lt||(console.log("[Caixa][Fechamento] Snapshot ausente, calculando resumo por perodo..."),Lt=await Om({from:J.aberto_em,to:J.fechado_em||new Date().toISOString(),codigoEmpresa:Le})),!Lt||!Lt.totalPorFinalizadora||Object.keys(Lt.totalPorFinalizadora).length===0)try{const ie=J.aberto_em,ce=J.fechado_em||new Date().toISOString();let he=Oe.from("pagamentos").select("metodo, valor, status, recebido_em, finalizadoras:finalizadoras!pagamentos_finalizadora_id_fkey(nome)").gte("recebido_em",ie).lte("recebido_em",ce);Le&&(he=he.eq("codigo_empresa",Le));const{data:Ke}=await he,rt={};let Ge=0;for(const $e of Ke||[]){if(!(($e.status||"Pago")!=="Cancelado"&&($e.status||"Pago")!=="Estornado"))continue;const vt=$e.finalizadoras?.nome||$e.metodo||"Outros",ht=Number($e.valor||0);rt[vt]=(rt[vt]||0)+ht,Ge+=ht}Lt={...Lt||{},totalPorFinalizadora:rt,totalEntradas:Number(Lt?.totalEntradas||0)||Ge},console.log("[Caixa][Fechamento][FallbackPF]",{methods:Object.keys(rt).length})}catch{}const te=await Rg({caixaSessaoId:J.id,codigoEmpresa:Le}),Ne=J.aberto_em,V=J.fechado_em||new Date().toISOString();let ee=Oe.from("pagamentos").select("id, valor, status, metodo, recebido_em, finalizadoras:finalizadoras!pagamentos_finalizadora_id_fkey(nome)").gte("recebido_em",Ne).lte("recebido_em",V).order("recebido_em",{ascending:!1});Le&&(ee=ee.eq("codigo_empresa",Le));const{data:oe}=await ee;console.log("[Caixa][Fechamento][Pays]",{count:(oe||[]).length}),dt({resumo:Lt,movimentacoes:te,pagamentos:oe||[],sessao:J});const ye=typeof performance<"u"&&performance.now?performance.now():Date.now(),ke=Array.isArray(te)?te.length:0,Me=Lt&&Lt.totalPorFinalizadora?Object.keys(Lt.totalPorFinalizadora).length:0;console.log("[Caixa][Fechamento][Loaded]",{sessaoId:J.id,finCount:Me,movCount:ke,ms:Math.round(ye-Pt)})}catch(Le){console.error("[Caixa][Fechamento][Error]",{sessaoId:J.id,message:Le?.message,code:Le?.code}),e({title:"Falha ao carregar fechamento",description:Le?.message||"Tente novamente",variant:"destructive"})}finally{it(!1)}},children:[s.jsx(hr,{children:J.aberto_em?new Date(J.aberto_em).toLocaleString("pt-BR"):""}),s.jsx(hr,{children:J.fechado_em?new Date(J.fechado_em).toLocaleString("pt-BR"):""}),s.jsx(hr,{className:"text-right",children:We(J.saldo_inicial)}),s.jsx(hr,{className:"text-right",children:We(J.saldo_final)}),s.jsx(hr,{children:String(J.status||"").toLowerCase()==="open"?"Aberto":"Fechado"})]},J.id))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:_e.map(J=>s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 cursor-pointer hover:bg-surface-2/80 transition-colors",onClick:async()=>{qt(!0),it(!0),dt(null);try{const Le=t?.codigo_empresa;let Pt=await LO({caixaSessaoId:J.id,codigoEmpresa:Le}),ot=(ir=>{if(!ir)return null;if(ir.total_bruto!=null||ir.por_finalizadora!=null){let te=ir.por_finalizadora;if(te&&typeof te=="string")try{te=JSON.parse(te)}catch{te={}}return{from:ir.periodo_de||null,to:ir.periodo_ate||null,totalPorFinalizadora:te||{},totalEntradas:Number(ir.total_entradas||0),totalVendasBrutas:Number(ir.total_bruto||0),totalDescontos:Number(ir.total_descontos||0),totalVendasLiquidas:Number(ir.total_liquido||0)}}return ir})(Pt);ot||(ot=await Om({from:J.aberto_em,to:J.fechado_em||new Date().toISOString(),codigoEmpresa:Le}));const Lt=await Rg({caixaSessaoId:J.id,codigoEmpresa:Le});dt({resumo:ot,movimentacoes:Lt,sessao:J,pagamentos:[]})}catch(Le){console.error("[Caixa][Fechamento][Error]",Le),e({title:"Erro ao carregar detalhes",description:Le?.message,variant:"destructive"})}finally{it(!1)}},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm font-semibold text-text-primary",children:["Sesso #",J.id]}),s.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${J.status==="fechado"?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:String(J.status||"").toLowerCase()==="open"?"Aberto":"Fechado"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Aberto em:"}),s.jsx("span",{className:"text-text-primary",children:J.aberto_em?new Date(J.aberto_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Fechado em:"}),s.jsx("span",{className:"text-text-primary",children:J.fechado_em?new Date(J.fechado_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Saldo Inicial:"}),s.jsx("span",{className:"font-semibold text-info",children:We(J.saldo_inicial)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Saldo Final:"}),s.jsx("span",{className:"font-semibold text-success",children:We(J.saldo_final)})]})]}),s.jsx("div",{className:"mt-3 text-xs text-text-muted text-center",children:"Toque para ver detalhes"})]},J.id))})]})]})}),s.jsx(Qi,{value:"recebimentos",className:"space-y-6 mt-6",children:s.jsxs(lr.div,{variants:cs,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Todos os Recebimentos"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar...",value:Te,onChange:J=>Ze(J.target.value),className:"pl-10 w-full md:w-[200px]"})]}),s.jsxs(yn,{value:nt,onValueChange:mt,children:[s.jsx(pn,{className:"w-full md:w-[160px] h-9 bg-black border-warning/40 text-white",children:s.jsx(xn,{placeholder:"Todas as Fontes"})}),s.jsxs(gn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Wt,{value:"all",children:"Todas as Fontes"}),s.jsx(Wt,{value:"manual",children:"Manual"}),s.jsx(Wt,{value:"xml",children:"XML"})]})]}),s.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>{try{const J=yo||[],Pt=[["Data/Hora","Origem","Fonte","Descrio","Finalizadora","Valor","Status"].join(";")];for(const V of J){const ee=[V.recebido_em?new Date(V.recebido_em).toLocaleString("pt-BR"):"",V.origem??"",V.fonte??"",(V.descricao??"").replaceAll('"','""'),(V.finalizadoras?.nome||V.metodo||"").replaceAll('"','""'),String(He(V.valor)).replace(".",","),V.status??""].map(oe=>`"${String(oe)}"`).join(";");Pt.push(ee)}const Yt="\uFEFF"+Pt.join(`
`),ot=new Blob([Yt],{type:"text/csv;charset=utf-8;"}),Lt=URL.createObjectURL(ot),ir=c?new Date(c+"T00:00:00").toLocaleDateString("pt-BR"):"",te=d?new Date(d+"T00:00:00").toLocaleDateString("pt-BR"):"",Ne=document.createElement("a");Ne.href=Lt,Ne.download=`recebimentos_${ir}_a_${te}.csv`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(Lt)}catch(J){e({title:"Falha ao exportar CSV",description:J?.message,variant:"destructive"})}},children:[s.jsx(cl,{className:"h-4 w-4 mr-2"})," Exportar CSV"]})]})]}),o?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),s.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):yo.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros no perodo."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Data/Hora"}),s.jsx(_r,{children:"Origem"}),s.jsx(_r,{children:"Fonte"}),s.jsx(_r,{children:"Descrio"}),s.jsx(_r,{children:"Finalizadora"}),s.jsx(_r,{className:"text-right",children:"Valor"}),s.jsx(_r,{children:"Status"})]})}),s.jsx(Go,{children:yo.map(J=>s.jsxs(Mn,{className:"cursor-pointer hover:bg-surface-2",onClick:()=>{ln(J),tt(!0)},children:[s.jsx(hr,{children:J.recebido_em?new Date(J.recebido_em).toLocaleString("pt-BR"):""}),s.jsx(hr,{children:J.origem||""}),s.jsx(hr,{children:J.fonte?J.fonte.toUpperCase():""}),s.jsx(hr,{className:"truncate max-w-[260px]",title:J.descricao||"",children:J.descricao||""}),s.jsx(hr,{children:J.finalizadoras?.nome||J.metodo||""}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)}),s.jsx(hr,{children:J.status||""})]},J.id))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:yo.map(J=>s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 cursor-pointer hover:bg-surface-2/80 transition-colors",onClick:()=>{ln(J),tt(!0)},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary",children:J.origem||"Recebimento"}),s.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${J.status==="Pago"?"bg-success/20 text-success":J.status==="Cancelado"?"bg-danger/20 text-danger":"bg-warning/20 text-warning"}`,children:J.status||"Pendente"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Data/Hora:"}),s.jsx("span",{className:"text-text-primary",children:J.recebido_em?new Date(J.recebido_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Fonte:"}),s.jsx("span",{className:"text-text-primary font-medium",children:J.fonte?J.fonte.toUpperCase():""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Finalizadora:"}),s.jsx("span",{className:"text-text-primary",children:J.finalizadoras?.nome||J.metodo||""})]}),J.descricao&&s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Descrio:"}),s.jsx("span",{className:"text-text-primary text-xs bg-surface/50 p-2 rounded",children:J.descricao})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor:"}),s.jsx("span",{className:"font-bold text-lg text-success",children:We(J.valor)})]})]}),s.jsx("div",{className:"mt-3 text-xs text-text-muted text-center",children:"Toque para ver detalhes"})]},J.id))})]})]})}),s.jsxs(Qi,{value:"relatorios",className:"space-y-6 mt-6",children:[s.jsxs(lr.div,{variants:cs,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(dl,{className:"w-5 h-5 text-success"}),"Faturamento Consolidado"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Resumo geral das receitas no perodo"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const Le=[["Mtrica","Valor"],["Receita de Comandas",We(g)],["Receita de Agendamentos",We(y)],["Receita Total",We(Number(g||0)+Number(y||0))],["Perodo",`${c||"N/A"} at ${d||"N/A"}`]].map(Lt=>Lt.map(ir=>`"${ir}"`).join(";")).join(`
`),Pt=new Blob(["\uFEFF"+Le],{type:"text/csv;charset=utf-8;"}),Yt=URL.createObjectURL(Pt),ot=document.createElement("a");ot.href=Yt,ot.download=`faturamento_consolidado_${Rr(new Date,"yyyy-MM-dd")}.csv`,ot.click(),URL.revokeObjectURL(Yt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const J=[["Receita de Comandas",We(g)],["Receita de Agendamentos",We(y)],["Receita Total",We(Number(g||0)+Number(y||0))]];xt("Faturamento Consolidado",["Mtrica","Valor"],J,"faturamento_consolidado")},children:[s.jsx(Ey,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-success/5 border border-success/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Comandas"}),s.jsx("div",{className:"text-2xl font-bold text-success",children:We(g)}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Vendas no perodo"})]}),s.jsxs("div",{className:"p-4 bg-purple-500/5 border border-purple-500/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Agendamentos"}),s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:We(y)}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Reservas pagas"})]}),s.jsxs("div",{className:"p-4 bg-brand/5 border border-brand/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Total"}),s.jsx("div",{className:"text-2xl font-bold text-brand",children:We(Number(g||0)+Number(y||0))}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Perodo selecionado"})]})]})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(um,{className:"w-5 h-5 text-info"}),"Pagamentos por Mtodo"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Distribuio por finalizadora"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-info/10 border-info/40 text-info hover:bg-info/20",onClick:()=>{const J=h?.totalPorFinalizadora||{},Le=Object.entries(J).map(([Ne,V])=>[Ne,We(V)]).sort((Ne,V)=>{const ee=Number(String(Ne[1]).replace(/[^\d,]/g,"").replace(",","."));return Number(String(V[1]).replace(/[^\d,]/g,"").replace(",","."))-ee}),Pt=Object.values(J).reduce((Ne,V)=>Ne+V,0),ot=[["Mtodo de Pagamento","Valor","% do Total"],...Le.map(([Ne,V])=>{const oe=((Object.entries(J).find(([ye])=>ye===Ne)?.[1]||0)/Pt*100).toFixed(1)+"%";return[Ne,V,oe]}),["TOTAL",We(Pt),"100%"]].map(Ne=>Ne.map(V=>`"${V}"`).join(";")).join(`
`),Lt=new Blob(["\uFEFF"+ot],{type:"text/csv;charset=utf-8;"}),ir=URL.createObjectURL(Lt),te=document.createElement("a");te.href=ir,te.download=`pagamentos_por_metodo_${Rr(new Date,"yyyy-MM-dd")}.csv`,te.click(),URL.revokeObjectURL(ir),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-info/10 border-info/40 text-info hover:bg-info/20",onClick:()=>{const J=h?.totalPorFinalizadora||{},Le=Object.values(J).reduce((Yt,ot)=>Yt+ot,0),Pt=Object.entries(J).sort(([,Yt],[,ot])=>ot-Yt).map(([Yt,ot])=>[Yt,We(ot),(ot/Le*100).toFixed(1)+"%"]);Pt.push(["TOTAL",We(Le),"100%"]),xt("Pagamentos por Mtodo",["Mtodo","Valor","% do Total"],Pt,"pagamentos_por_metodo")},children:[s.jsx(Ey,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),Object.keys(h?.totalPorFinalizadora||{}).length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem pagamentos no perodo."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Mtodo de Pagamento"}),s.jsx(_r,{className:"text-right",children:"Valor"}),s.jsx(_r,{className:"text-right",children:"% do Total"})]})}),s.jsxs(Go,{children:[Object.entries(h?.totalPorFinalizadora||{}).sort(([,J],[,Le])=>Le-J).map(([J,Le])=>{const Pt=Object.values(h?.totalPorFinalizadora||{}).reduce((ot,Lt)=>ot+Lt,0),Yt=(Le/Pt*100).toFixed(1);return s.jsxs(Mn,{children:[s.jsx(hr,{className:"font-medium",children:J}),s.jsx(hr,{className:"text-right font-semibold",children:We(Le)}),s.jsxs(hr,{className:"text-right text-text-secondary",children:[Yt,"%"]})]},J)}),s.jsxs(Mn,{className:"bg-surface-2 font-bold",children:[s.jsx(hr,{children:"TOTAL"}),s.jsx(hr,{className:"text-right",children:We(Object.values(h?.totalPorFinalizadora||{}).reduce((J,Le)=>J+Le,0))}),s.jsx(hr,{className:"text-right",children:"100%"})]})]})]})})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(Xg,{className:"w-5 h-5 text-purple-400"}),"Produtos Mais Vendidos"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Top produtos por faturamento"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-purple-500/10 border-purple-500/40 text-purple-400 hover:bg-purple-500/20",onClick:()=>{const Le=[["Posio","Produto","Faturamento"],...A.slice(0,50).map((Lt,ir)=>[ir+1,Lt.nome,We(Lt.valor)])].map(Lt=>Lt.map(ir=>`"${ir}"`).join(";")).join(`
`),Pt=new Blob(["\uFEFF"+Le],{type:"text/csv;charset=utf-8;"}),Yt=URL.createObjectURL(Pt),ot=document.createElement("a");ot.href=Yt,ot.download=`produtos_vendidos_${Rr(new Date,"yyyy-MM-dd")}.csv`,ot.click(),URL.revokeObjectURL(Yt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-purple-500/10 border-purple-500/40 text-purple-400 hover:bg-purple-500/20",onClick:()=>{const J=A.slice(0,50).map((Le,Pt)=>[Pt+1,Le.nome,We(Le.valor)]);xt("Produtos Mais Vendidos",["#","Produto","Faturamento"],J,"produtos_vendidos")},children:[s.jsx(Ey,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),A.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem produtos vendidos no perodo."}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{className:"w-16",children:"#"}),s.jsx(_r,{children:"Produto"}),s.jsx(_r,{className:"text-right",children:"Faturamento"})]})}),s.jsx(Go,{children:A.slice(0,20).map((J,Le)=>s.jsxs(Mn,{children:[s.jsx(hr,{className:"text-text-secondary font-mono",children:Le+1}),s.jsx(hr,{className:"font-medium",children:J.nome}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)})]},`${J.nome}-${Le}`))})]}),A.length>20&&s.jsx("div",{className:"text-center mt-4",children:s.jsxs(Ee,{variant:"ghost",size:"sm",className:"text-brand hover:text-brand/80",onClick:()=>U(!0),children:["Ver todos os ",A.length," produtos"]})})]})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(hs,{className:"w-5 h-5 text-warning"}),"Clientes que Mais Consomem"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Ranking por faturamento total"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-warning/10 border-warning/40 text-warning hover:bg-warning/20",onClick:()=>{const Le=[["Posio","Cliente","Faturamento"],...C.slice(0,50).map((Lt,ir)=>[ir+1,Lt.nome,We(Lt.valor)])].map(Lt=>Lt.map(ir=>`"${ir}"`).join(";")).join(`
`),Pt=new Blob(["\uFEFF"+Le],{type:"text/csv;charset=utf-8;"}),Yt=URL.createObjectURL(Pt),ot=document.createElement("a");ot.href=Yt,ot.download=`clientes_top_${Rr(new Date,"yyyy-MM-dd")}.csv`,ot.click(),URL.revokeObjectURL(Yt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-warning/10 border-warning/40 text-warning hover:bg-warning/20",onClick:()=>{const J=C.slice(0,50).map((Le,Pt)=>[Pt+1,Le.nome,We(Le.valor)]);xt("Clientes que Mais Consomem",["#","Cliente","Total Gasto"],J,"clientes_top")},children:[s.jsx(Ey,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),C.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem dados de clientes no perodo."}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{className:"w-16",children:"#"}),s.jsx(_r,{children:"Cliente"}),s.jsx(_r,{className:"text-right",children:"Total Gasto"})]})}),s.jsx(Go,{children:C.slice(0,20).map((J,Le)=>s.jsxs(Mn,{children:[s.jsx(hr,{className:"text-text-secondary font-mono",children:Le+1}),s.jsx(hr,{className:"font-medium",children:J.nome}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)})]},`${J.nome}-${Le}`))})]}),C.length>20&&s.jsx("div",{className:"text-center mt-4",children:s.jsxs(Ee,{variant:"ghost",size:"sm",className:"text-brand hover:text-brand/80",onClick:()=>G(!0),children:["Ver todos os ",C.length," clientes"]})})]})]}),s.jsxs(lr.div,{variants:cs,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(Tb,{className:"w-5 h-5 text-success"}),"Evoluo Diria de Receitas"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Faturamento dia a dia no perodo"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const Le=[["Data","Receita"],...R.map(Lt=>[Lt.data,We(Lt.valor)])].map(Lt=>Lt.map(ir=>`"${ir}"`).join(";")).join(`
`),Pt=new Blob(["\uFEFF"+Le],{type:"text/csv;charset=utf-8;"}),Yt=URL.createObjectURL(Pt),ot=document.createElement("a");ot.href=Yt,ot.download=`evolucao_diaria_${Rr(new Date,"yyyy-MM-dd")}.csv`,ot.click(),URL.revokeObjectURL(Yt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ee,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const J=R.map(Le=>[Le.data,We(Le.valor)]);xt("Evoluo Diria de Receitas",["Data","Receita"],J,"evolucao_diaria")},children:[s.jsx(Ey,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),R.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem dados de evoluo no perodo."}):s.jsx("div",{className:"h-80",children:s.jsx(f2,{width:"100%",height:"100%",children:s.jsxs(F8e,{data:R,margin:{top:5,right:20,bottom:5,left:0},children:[s.jsx(cO,{strokeDasharray:"3 3",stroke:"#2a2a2a"}),s.jsx(Ym,{dataKey:"data",stroke:"#888",tick:{fill:"#888",fontSize:11},tickFormatter:J=>{const Le=J.split("/");return`${Le[0]}/${Le[1]}`}}),s.jsx(Xm,{stroke:"#888",tick:{fill:"#888",fontSize:11},tickFormatter:J=>`R$ ${(J/1e3).toFixed(0)}k`}),s.jsx(ul,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"},labelStyle:{color:"#fff"},itemStyle:{color:"#22C55E"},formatter:J=>[We(J),"Receita"]}),s.jsx(Yb,{type:"monotone",dataKey:"valor",stroke:"#22C55E",strokeWidth:2,dot:{fill:"#22C55E",r:4},activeDot:{r:6}})]})})})]})]})]}),s.jsx(qr,{open:er,onOpenChange:tt,children:s.jsxs(Lr,{className:"max-w-lg",children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-xl font-bold",children:"Detalhes do Recebimento"}),s.jsx(Jr,{children:ur?.origem==="Comanda"?"Operao de comanda":ur?.origem==="Agendamento"?"Operao de agendamento":"Operao"})]}),ur&&s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Data/Hora"}),s.jsx("div",{className:"font-medium",children:ur.recebido_em?new Date(ur.recebido_em).toLocaleString("pt-BR"):""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Valor"}),s.jsx("div",{className:"font-semibold",children:We(ur.valor)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Origem"}),s.jsx("div",{children:ur.origem||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Fonte"}),s.jsx("div",{children:ur.fonte?ur.fonte.toUpperCase():""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Finalizadora"}),s.jsx("div",{children:ur.finalizadoras?.nome||ur.metodo||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Status"}),s.jsx("div",{children:ur.status||""})]})]}),ur.origem==="Comanda"&&s.jsxs("div",{className:"mt-2 p-3 rounded border border-border",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Comanda"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Cliente"}),s.jsx("div",{children:ur.descricao||""})]})}),s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-text-muted mb-1",children:"Produtos"}),Zt?s.jsx("div",{className:"text-xs text-text-muted",children:"Carregando itens..."}):rn.length===0?s.jsx("div",{className:"text-xs text-text-muted",children:"Sem itens encontrados."}):s.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:rn.map((J,Le)=>s.jsxs("div",{className:"text-xs flex justify-between gap-3",children:[s.jsxs("div",{className:"truncate",children:[s.jsx("span",{className:"font-mono",children:He(J.quantidade)}),s.jsx("span",{children:" x "}),s.jsx("span",{className:"font-medium",children:J.descricao})]}),s.jsx("div",{className:"whitespace-nowrap",children:We(Number(J.preco_unitario||0)*Number(J.quantidade||0))})]},Le))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-text-muted mb-1",children:"Pagamentos"}),Kn.length===0?s.jsx("div",{className:"text-xs text-text-muted",children:"Sem pagamentos adicionais."}):s.jsxs("div",{className:"space-y-1",children:[Kn.map((J,Le)=>s.jsxs("div",{className:"text-xs flex justify-between gap-3",children:[s.jsx("div",{className:"truncate",children:s.jsx("span",{className:"font-medium",children:J.finalizadoras?.nome||J.metodo||""})}),s.jsx("div",{className:"whitespace-nowrap",children:We(J.valor)})]},J.id||Le)),s.jsxs("div",{className:"text-xs flex justify-between gap-3 pt-2 border-t border-border",children:[s.jsx("div",{className:"font-semibold",children:"Total"}),s.jsx("div",{className:"font-semibold",children:We(Kn.reduce((J,Le)=>J+Number(Le.valor||0),0))})]})]})]})]}),ur.origem==="Agendamento"&&s.jsxs("div",{className:"mt-2 p-3 rounded border border-border",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Agendamento"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Cdigo"}),s.jsxs("div",{className:"font-mono",children:["#",ur.agendamento_codigo]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Participante"}),s.jsx("div",{children:ur.participante_nome})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("div",{className:"text-text-muted",children:"Quadra"}),s.jsx("div",{children:ur.quadra_nome||""})]})]})]})]})]})}),s.jsx(qr,{open:W,onOpenChange:U,children:s.jsxs(Lr,{className:"max-w-2xl bg-surface text-text-primary border-0",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Todos os Produtos"}),s.jsx(Jr,{children:"Ordenados por faturamento no perodo selecionado"})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Produto"}),s.jsx(_r,{className:"text-right",children:"Valor"})]})}),s.jsx(Go,{children:A.map((J,Le)=>s.jsxs(Mn,{children:[s.jsxs(hr,{children:[Le+1,". ",J.nome]}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)})]},`${J.nome}-${Le}`))})]})})]})}),s.jsx(qr,{open:Ft,onOpenChange:qt,children:s.jsxs(Lr,{className:"sm:max-w-[900px] w-full max-h-[85vh] overflow-y-auto bg-surface text-text-primary border-0",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Fechamento do Caixa"}),s.jsxs(Jr,{children:[ft?.sessao?.aberto_em?`${new Date(ft.sessao.aberto_em).toLocaleString("pt-BR")}`:"",ft?.sessao?.fechado_em?`  ${new Date(ft.sessao.fechado_em).toLocaleString("pt-BR")}`:""]})]}),zt?s.jsx("div",{className:"text-sm text-text-muted",children:"Carregando..."}):ft?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Inicial"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:We(ft.sessao?.saldo_inicial)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Entradas"}),s.jsx("p",{className:"text-2xl font-bold text-success tabular-nums",children:(()=>{const J=Number(ft.sessao?.saldo_inicial||0),Pt=Number(ft.sessao?.saldo_final||0)-J;return We(Pt)})()})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Final"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:We(ft.sessao?.saldo_final)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Bruto"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:We(ft.resumo?.totalVendasBrutas)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Descontos"}),s.jsx("p",{className:"text-2xl font-bold text-warning tabular-nums",children:We(ft.resumo?.totalDescontos)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Lquido"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:We(ft.resumo?.totalVendasLiquidas)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Entradas por Finalizadora"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:ft.resumo?.totalPorFinalizadora&&Object.keys(ft.resumo.totalPorFinalizadora).length>0?Object.entries(ft.resumo.totalPorFinalizadora).map(([J,Le])=>s.jsxs("div",{className:"bg-surface-2 rounded-md p-2 border border-border flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate",children:String(J)}),s.jsx("span",{className:"text-sm font-semibold",children:We(Le)})]},J)):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos."})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Movimentaes"}),!ft.movimentacoes||ft.movimentacoes.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem movimentaes nesta sesso."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Data"}),s.jsx(_r,{children:"Tipo"}),s.jsx(_r,{children:"Obs"}),s.jsx(_r,{className:"text-right",children:"Valor"})]})}),s.jsx(Go,{children:ft.movimentacoes.map(J=>s.jsxs(Mn,{children:[s.jsx(hr,{children:J.created_at?new Date(J.created_at).toLocaleString("pt-BR"):""}),s.jsx(hr,{className:"capitalize",children:J.tipo||""}),s.jsx(hr,{className:"truncate max-w-[280px]",title:J.observacao||"",children:J.observacao||""}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)})]},J.id))})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Recebimentos"}),!ft.pagamentos||ft.pagamentos.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem recebimentos no perodo deste caixa."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Data/Hora"}),s.jsx(_r,{children:"Finalizadora"}),s.jsx(_r,{className:"text-right",children:"Valor"}),s.jsx(_r,{children:"Status"})]})}),s.jsx(Go,{children:ft.pagamentos.map(J=>s.jsxs(Mn,{children:[s.jsx(hr,{children:J.recebido_em?new Date(J.recebido_em).toLocaleString("pt-BR"):""}),s.jsx(hr,{children:J.finalizadoras?.nome||J.metodo||""}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)}),s.jsx(hr,{children:J.status||""})]},J.id))})]})})]})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados."})]})}),s.jsx(qr,{open:$,onOpenChange:J=>{G(J),J||(de(null),B([]))},children:s.jsxs(Lr,{className:"max-w-3xl bg-surface text-text-primary border-0",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Clientes"}),s.jsx(Jr,{children:"Ordenados por valor pago no perodo selecionado"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("div",{className:"max-h-[60vh] overflow-y-auto border border-border rounded-md",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Cliente"}),s.jsx(_r,{className:"text-right",children:"Pago"})]})}),s.jsx(Go,{children:C.map((J,Le)=>s.jsxs(Mn,{className:`cursor-pointer ${me?.nome===J.nome?"bg-brand/10":""}`,onClick:async()=>{window.innerWidth<768&&Z(!0),de(J),q(!0);try{const Yt=nr(c),ot=Ar(d),Lt=(J.nome||"").trim(),ir=t?.codigo_empresa;let te=Oe.from("clientes").select("id, nome").eq("codigo_empresa",ir).ilike("nome",`%${Lt}%`);const{data:Ne}=await te,V=new Set((Ne||[]).map(Ge=>Ge.id));let ee=Oe.from("comanda_clientes").select("comanda_id").eq("codigo_empresa",ir).ilike("nome_livre",`%${Lt}%`);const{data:oe}=await ee;let ye=new Set((oe||[]).map(Ge=>Ge.comanda_id));if(V.size>0){let Ge=Oe.from("comanda_clientes").select("comanda_id, cliente_id").eq("codigo_empresa",ir).in("cliente_id",Array.from(V));const{data:$e}=await Ge;($e||[]).forEach(bt=>ye.add(bt.comanda_id))}const ke=Array.from(ye);let Me=Oe.from("pagamentos").select("id, valor, recebido_em, metodo, finalizadoras!pagamentos_finalizadora_id_fkey(nome), comanda_id, status").in("comanda_id",ke).neq("status","Cancelado").neq("status","Estornado").order("recebido_em",{ascending:!1}).limit(50);Yt&&(Me=Me.gte("recebido_em",Yt)),ot&&(Me=Me.lte("recebido_em",ot));const{data:ie}=await Me,ce=ie||[],he=Array.from(new Set(ce.map(Ge=>Ge.comanda_id).filter(Boolean))),Ke={};if(he.length>0){let Ge=Oe.from("comandas").select("id, tipo, mesa_id").in("id",he);const{data:$e}=await Ge,bt=Array.from(new Set(($e||[]).map(ht=>ht.mesa_id).filter(Boolean))),vt={};if(bt.length>0){let ht=Oe.from("mesas").select("id, numero, nome").in("id",bt);const{data:tr}=await ht;(tr||[]).forEach(Gt=>{vt[Gt.id]=(Gt.nome||`Mesa ${Gt.numero||""}`).trim()})}($e||[]).forEach(ht=>{let tr="";const Gt=String(ht?.tipo||"").toLowerCase();Gt==="balcao"||Gt==="balco"?tr="Balco":Gt==="mesa"||ht.mesa_id?tr=vt[ht.mesa_id]||"Mesa":Gt==="agendamento"&&(tr="Agendamento"),Ke[ht.id]=tr})}let rt=ce.map(Ge=>({...Ge,origem:Ge.comanda_id&&Ke[Ge.comanda_id]||""}));try{const Ge=t?.codigo_empresa;let $e=[];if(V&&V.size>0){let ct=Oe.from("v_agendamento_participantes").select("id, agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text").in("cliente_id",Array.from(V));Ge&&(ct=ct.eq("codigo_empresa",Ge));const{data:sr}=await ct;if($e=sr||[],$e.length===0&&Ge){let dr=Oe.from("v_agendamento_participantes").select("id, agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text").in("cliente_id",Array.from(V));const{data:Ht}=await dr;$e=Ht||[]}}let bt=[...$e];const vt=Array.from(new Set(bt.map(ct=>ct.agendamento_id).filter(Boolean)));let ht=new Set;const tr={};if(vt.length>0){let ct=Oe.from("agendamentos").select("id, inicio").in("id",vt);Ge&&(ct=ct.eq("codigo_empresa",Ge));const{data:sr}=await ct,dr=Yt?new Date(Yt).getTime():null,Ht=ot?new Date(ot).getTime():null;(sr||[]).forEach(Br=>{const vn=Br?.inicio?new Date(Br.inicio).getTime():null;vn!=null&&(dr==null||vn>=dr)&&(Ht==null||vn<=Ht)&&ht.add(Br.id),Br?.id&&(tr[Br.id]=Br.inicio||null)})}bt=bt.filter(ct=>ht.has(ct.agendamento_id));const Gt=new Set;console.debug("[Financeiro][Agendamentos][Detalhe] encontrados:",bt.length),bt.forEach(ct=>{const sr=`${ct.id}`;if(Gt.has(sr))return;Gt.add(sr);const dr=String(ct.status_pagamento||ct.status_pagamento_text||"pago").toLowerCase();if(["cancelado","estornado"].includes(dr))return;const Ht=ct.finalizadora_nome||ct.metodo||ct.metodo_pagamento||ct.forma_pagamento||"Agendamento";rt.push({id:`ag-${ct.id}`,recebido_em:tr[ct.agendamento_id]||null,finalizadoras:Ht?{nome:Ht}:null,metodo:Ht,origem:"Agendamento",valor:ct.valor_cota})})}catch{}B(rt)}finally{q(!1)}},children:[s.jsx(hr,{children:J.nome}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)})]},`${J.nome}-${Le}`))})]})}),s.jsx("div",{className:"hidden md:block max-h-[60vh] overflow-y-auto overflow-x-auto pr-1",children:me?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-sm font-semibold",children:["Detalhes de ",me.nome]}),X?s.jsx("div",{className:"text-sm text-text-muted",children:"Carregando..."}):L.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos no perodo."}):s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{children:"Data"}),s.jsx(_r,{children:"Finalizadora"}),s.jsx(_r,{children:"Origem"}),s.jsx(_r,{className:"text-right",children:"Valor"})]})}),s.jsx(Go,{children:L.map(J=>s.jsxs(Mn,{children:[s.jsx(hr,{children:J.recebido_em?new Date(J.recebido_em).toLocaleString("pt-BR"):""}),s.jsx(hr,{children:J.finalizadoras?.nome||J.metodo||""}),s.jsx(hr,{children:J.origem||""}),s.jsx(hr,{className:"text-right font-semibold",children:We(J.valor)})]},J.id))})]})]}):s.jsx("div",{className:"text-sm text-text-muted p-4",children:"Selecione um cliente para ver detalhes"})})]})]})}),s.jsx(qr,{open:Y,onOpenChange:Z,children:s.jsxs(Lr,{className:"max-w-full w-[95vw] h-[90vh] bg-surface text-text-primary border-0 p-4",children:[s.jsxs(Ur,{className:"pb-4",children:[s.jsx($r,{className:"text-lg",children:"Detalhes do Cliente"}),s.jsx(Jr,{className:"text-sm",children:me?.nome})]}),me?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-2 rounded-lg flex-shrink-0",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Total Pago"}),s.jsx("span",{className:"text-lg font-bold text-success",children:We(me.valor)})]}),X?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Carregando..."}):L.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem pagamentos no perodo."}):s.jsx("div",{className:"flex-1 overflow-y-auto -mx-4 px-4",children:s.jsx("div",{className:"min-w-full overflow-x-auto",children:s.jsxs(Vo,{children:[s.jsx(Ho,{children:s.jsxs(Mn,{children:[s.jsx(_r,{className:"text-sm min-w-[100px]",children:"Data"}),s.jsx(_r,{className:"text-sm min-w-[120px]",children:"Finalizadora"}),s.jsx(_r,{className:"text-sm min-w-[100px]",children:"Origem"}),s.jsx(_r,{className:"text-right text-sm min-w-[80px]",children:"Valor"})]})}),s.jsx(Go,{children:L.map(J=>s.jsxs(Mn,{children:[s.jsx(hr,{className:"text-sm py-3 min-w-[100px]",children:s.jsx("div",{className:"whitespace-nowrap",children:J.recebido_em?new Date(J.recebido_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})}),s.jsx(hr,{className:"text-sm py-3 min-w-[120px]",children:s.jsx("div",{className:"truncate max-w-[120px]",title:J.finalizadoras?.nome||J.metodo||"",children:J.finalizadoras?.nome||J.metodo||""})}),s.jsx(hr,{className:"text-sm py-3 min-w-[100px]",children:s.jsx("div",{className:"truncate max-w-[100px]",title:J.origem||"",children:J.origem||""})}),s.jsx(hr,{className:"text-right font-semibold text-sm py-3 min-w-[80px]",children:s.jsx("div",{className:"whitespace-nowrap",children:We(J.valor)})})]},J.id))})]})})})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhum cliente selecionado"})]})})]})]})}const bnt={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.06,delayChildren:.05}}},zD={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35}}};function wnt({children:e,className:t=""}){return s.jsx(lr.div,{variants:zD,className:`fx-card ${t}`,children:e})}const lP=({icon:e,title:t,value:r,subtitle:n,color:a})=>{const i=e;return s.jsxs(lr.div,{variants:zD,className:"bg-surface rounded-lg border-2 border-border hover:border-border-hover p-4 flex flex-col justify-between gap-2 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-text-secondary text-sm font-semibold",children:t}),s.jsx(i,{className:`w-5 h-5 ${a}`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r}),s.jsx("p",{className:"text-xs text-text-muted",children:n})]})]})};function r9({label:e,...t}){return s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:e}),s.jsx("input",{...t,className:`bg-surface-2 border border-border rounded-md px-3 py-2 text-sm ${t.className||""}`})]})}function _nt(){const{toast:e}=Za(),{userProfile:t,authReady:r}=po(),n=v.useRef(!1),[a,i]=v.useState(()=>{try{const q=JSON.parse(localStorage.getItem("quadras:list")||"[]");return Array.isArray(q)?q:[]}catch{return[]}}),[o,l]=v.useState(()=>{try{const q=JSON.parse(localStorage.getItem("quadras:list")||"[]");return!(Array.isArray(q)&&q.length>0)}catch{return!0}}),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[h,m]=v.useState({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),[g,p]=v.useState(""),[y,x]=v.useState(!1),[b,w]=v.useState(null),[S,j]=v.useState({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),[A,P]=v.useState(""),[C,E]=v.useState(!0),[R,k]=v.useState({mostUsed:"-",topClient:"-",totalBookings:"-"});v.useEffect(()=>{if(!c)return;const q=setTimeout(()=>{console.error("[Quadras] add/update stuck >15s",{route:"/quadras",codigo_empresa:t?.codigo_empresa,editingId:b,formQuadra:h,editForm:S})},15e3);return()=>clearTimeout(q)},[c,t?.codigo_empresa,b,h,S]);const T=q=>{if(!q)return null;const[Y,Z]=String(q).split(":");return`${Y.padStart(2,"0")}:${Z.padStart(2,"0")}:00`},I=q=>{const Y=String(q??"").replace(/\D/g,"");if(!Y)return"";const Z=(Number(Y)/100).toFixed(2),[ge,re]=Z.split(".");return`${ge.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${re}`},M=q=>{if(q==null||q==="")return NaN;const Y=String(q).replace(/\./g,"").replace(",","."),Z=parseFloat(Y);return Number.isFinite(Z)?Z:NaN},z=(q,Y=!1)=>{if(q==null||!Number.isFinite(Number(q)))return"-";const ge=Number(q).toFixed(2).split("."),re=ge[0],Se=ge[1],pe=`${re.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${Se}`;return Y?`R$ ${pe}`:pe},W=q=>{if(!q)return"";const[Y,Z]=String(q).split(":");return`${String(Y).padStart(2,"0")}:${String(Z).padStart(2,"0")}`},U=q=>{if(!q)return 0;const[Y,Z]=String(q).split(":").map(Number);return(Y||0)*60+(Z||0)},$=q=>{if(!q)return!1;const Y=String(q).split(":");if(Y.length<2)return!1;const Z=Number(Y[1]);return Z===0||Z===30},G=q=>{if(!q)return"";const[Y,Z]=String(q).split(":");let ge=Math.max(0,Math.min(23,parseInt(Y||"0",10))),re=Math.max(0,Math.min(59,parseInt(Z||"0",10)));const Se=Math.round(re/30);if(Se>=2?(ge+=1,re=0):re=Se*30,ge>=24)return"23:59";const Ie=String(ge).padStart(2,"0"),pe=String(re).padStart(2,"0");return`${Ie}:${pe}`},me=async()=>{if(!t?.codigo_empresa)return;const q=a&&a.length>0;q||l(!0);const{data:Y,error:Z}=await Oe.from("quadras").select("*").eq("codigo_empresa",t.codigo_empresa).order("nome",{ascending:!0});if(Z){if(!n.current){n.current=!0,setTimeout(me,800),q||l(!1);return}e({title:"Erro ao carregar quadras",description:Z.message}),q||l(!1);return}const ge=Y||[];if(ge.length===0&&q&&!n.current){n.current=!0,setTimeout(me,600),q||l(!1);return}n.current=!1,i(ge);try{localStorage.setItem("quadras:list",JSON.stringify(ge))}catch{}q||l(!1)},de=q=>{w(q.id),j({nome:q.nome||"",modalidades:Array.isArray(q.modalidades)?q.modalidades:q.modalidades?[q.modalidades]:[],tipo:q.tipo||"Descoberta",status:q.status||"Ativa",hora_inicio:W(q.hora_inicio||"06:00:00"),hora_fim:W(q.hora_fim||"24:00:00")||"23:59",valor_hora:q.valor!=null&&q.valor!==""?I(String((Number(q.valor)*2).toFixed(2))):""}),P(""),x(!0)},L=async()=>{if(!S.nome?.trim()){e({title:"Nome obrigatrio",description:"Informe um nome para a quadra."});return}if(!S.hora_inicio||!S.hora_fim){e({title:"Horrio obrigatrio",description:"Informe horrio de abertura e fechamento."});return}if(!$(S.hora_inicio)||!$(S.hora_fim)){e({title:"Intervalo invlido",description:"Use apenas horrios em horas cheias ou :30."});return}if(U(S.hora_fim)<=U(S.hora_inicio)){e({title:"Horrio invlido",description:"Fechamento deve ser depois da abertura."});return}if(!S.modalidades?.length){e({title:"Adicione ao menos uma modalidade",description:"Informe e adicione uma modalidade usando o boto +."});return}if(!t?.codigo_empresa||!b){e({title:"Atualizao indisponvel",description:"Dados insuficientes para atualizar."});return}u(!0);const q={nome:S.nome.trim(),modalidades:S.modalidades,tipo:S.tipo,status:S.status,hora_inicio:T(S.hora_inicio),hora_fim:T(S.hora_fim==="24:00"?"23:59":S.hora_fim)};if(S.valor_hora!=null&&String(S.valor_hora).trim()!==""){const re=M(S.valor_hora);!Number.isNaN(re)&&Number.isFinite(re)&&(q.valor=Math.round(re/2*100)/100)}else q.valor=null;const Y=(re,Se)=>Promise.race([re,new Promise((Ie,pe)=>setTimeout(()=>pe(new Error("Timeout ao atualizar quadra (>12s)")),Se))]);let Z,ge;try{({data:Z,error:ge}=await Y(Oe.from("quadras").update(q).eq("codigo_empresa",t.codigo_empresa).eq("id",b).select("id,nome,modalidades,tipo,status,hora_inicio,hora_fim,valor").single(),12e3))}catch(re){console.error("update timeout/error",re),e({title:"Tempo excedido",description:"Sem resposta do servidor ao atualizar. Verifique conexo e tente novamente."}),u(!1);return}if(u(!1),ge){e({title:"Erro ao atualizar quadra",description:ge.message});return}if(!Z){await me(),e({title:"Quadra atualizada",description:`${q.nome} foi atualizada.`}),x(!1),w(null),P("");return}e({title:"Quadra atualizada",description:`${Z.nome} foi atualizada.`}),x(!1),w(null),P(""),i(re=>re.map(Se=>Se.id===Z.id?Z:Se).sort((Se,Ie)=>Se.nome.localeCompare(Ie.nome)))};v.useEffect(()=>{try{const q=JSON.parse(localStorage.getItem("quadras:list")||"[]");Array.isArray(q)&&q.length&&a.length===0&&(i(q),l(!1))}catch{}},[]),v.useEffect(()=>{r&&t?.codigo_empresa&&(me(),B())},[r,t?.codigo_empresa]);const B=async()=>{if(t?.codigo_empresa)try{const q=new Date;q.setDate(q.getDate()-30);const{data:Y}=await Oe.from("agendamentos").select("quadra_id, cliente_id, quadras!inner(nome), clientes(nome)").eq("codigo_empresa",t.codigo_empresa).gte("inicio",q.toISOString()).neq("status","canceled");if(!Y||Y.length===0){k({mostUsed:"Sem dados",topClient:"Sem dados",totalBookings:"0"});return}const Z={};Y.forEach(Ie=>{const pe=Ie.quadras?.nome||"Sem nome";Z[pe]=(Z[pe]||0)+1});const ge=Object.entries(Z).sort((Ie,pe)=>pe[1]-Ie[1])[0],re={};Y.forEach(Ie=>{if(Ie.cliente_id&&Ie.clientes?.nome){const pe=Ie.clientes.nome;re[pe]=(re[pe]||0)+1}});const Se=Object.entries(re).sort((Ie,pe)=>pe[1]-Ie[1])[0];k({mostUsed:ge?`${ge[0]} (${ge[1]})`:"Sem dados",topClient:Se?`${Se[0]} (${Se[1]})`:"Sem dados",totalBookings:Y.length.toString()})}catch(q){console.error("Erro ao carregar stats:",q),k({mostUsed:"Erro",topClient:"Erro",totalBookings:"0"})}},X=async()=>{if(console.groupCollapsed("[Quadras] addQuadra: CLICK"),console.time("[Quadras] addQuadra duration"),console.log("pre-validate",{codigo_empresa:t?.codigo_empresa,formQuadra:h}),!h.nome?.trim()){e({title:"Nome obrigatrio",description:"Informe um nome para a quadra."}),console.warn("validation: missing nome"),console.groupEnd();return}if(!h.modalidades?.length){e({title:"Adicione ao menos uma modalidade",description:"Informe e adicione uma modalidade usando o boto +."});return}if(!h.hora_inicio||!h.hora_fim){e({title:"Horrio obrigatrio",description:"Informe horrio de abertura e fechamento."});return}if(!$(h.hora_inicio)||!$(h.hora_fim)){e({title:"Intervalo invlido",description:"Use apenas horrios em horas cheias ou :30."});return}if(U(h.hora_fim)<=U(h.hora_inicio)){e({title:"Horrio invlido",description:"Fechamento deve ser depois da abertura."});return}if(!t?.codigo_empresa){e({title:"Empresa no localizada",description:"Associe o usurio a uma empresa para cadastrar quadras."});return}u(!0),console.log("validated, building payload");const q={codigo_empresa:t.codigo_empresa,nome:h.nome.trim(),modalidades:h.modalidades,tipo:h.tipo,status:h.status,hora_inicio:T(h.hora_inicio),hora_fim:T(h.hora_fim==="24:00"?"23:59":h.hora_fim)};if(h.valor_hora!=null&&String(h.valor_hora).trim()!==""){const re=M(h.valor_hora);!Number.isNaN(re)&&Number.isFinite(re)&&(q.valor=Math.round(re/2*100)/100)}console.log("payload",q);const Y=(re,Se)=>Promise.race([re,new Promise((Ie,pe)=>setTimeout(()=>pe(new Error("Timeout ao inserir quadra (>12s)")),Se))]);let Z,ge;try{({data:Z,error:ge}=await Y(Oe.from("quadras").insert(q).select("id,nome,modalidades,tipo,status,hora_inicio,hora_fim,valor").single(),12e3))}catch(re){u(!1),console.error("insert timeout/error",re),e({title:"Tempo excedido",description:"Sem resposta do servidor ao cadastrar. Verifique conexo e tente novamente."}),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}if(u(!1),ge){e({title:"Erro ao cadastrar quadra",description:ge.message}),console.error("insert error",{code:ge.code,message:ge.message,details:ge.details}),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}if(!Z){console.warn("insert success sem representao; recarregando lista"),await me(),e({title:"Quadra adicionada",description:`${q.nome} foi cadastrada.`}),m({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),f(!1),p(""),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}console.log("insert success",{id:Z?.id,nome:Z?.nome}),e({title:"Quadra adicionada",description:`${Z.nome} foi cadastrada.`}),m({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),f(!1),p(""),i(re=>[Z,...re].sort((Se,Ie)=>Se.nome.localeCompare(Ie.nome))),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd()};return s.jsxs(s.Fragment,{children:[s.jsx(ho,{children:s.jsx("title",{children:"Cadastros  Quadras - Fluxo7 Arena"})}),s.jsxs(lr.div,{variants:bnt,initial:"hidden",animate:"visible",className:"space-y-6",children:[s.jsxs(lr.div,{variants:zD,className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-text-primary tracking-tighter",children:"Controle de Quadras"}),s.jsx("p",{className:"text-text-secondary",children:"Gerencie as quadras e horrios disponveis."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{variant:"outline",size:"icon",onClick:()=>E(q=>!q),title:C?"Ocultar resumo":"Mostrar resumo","aria-label":C?"Ocultar resumo":"Mostrar resumo",children:C?s.jsx(Eb,{className:"h-4 w-4"}):s.jsx(kb,{className:"h-4 w-4"})}),s.jsx(Ee,{onClick:()=>f(!0),className:"shadow-sm",children:"Adicionar Quadra"})]})]}),C&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(lP,{icon:Ib,title:"Quadra Mais Usada",value:R.mostUsed,subtitle:"ltimos 30 dias",color:"text-brand"}),s.jsx(lP,{icon:hs,title:"Cliente Top",value:R.topClient,subtitle:"Mais agendamentos no ms",color:"text-purple"}),s.jsx(lP,{icon:Tb,title:"Total de Agendamentos",value:R.totalBookings,subtitle:"ltimos 30 dias",color:"text-success"})]}),s.jsxs(wnt,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Quadras"}),s.jsx("div",{className:"text-xs text-text-muted",children:o?"Carregando...":`${a.length} registro(s)`})]}),!o&&a.length===0?s.jsxs("div",{className:"text-sm text-text-muted py-8 text-center",children:[s.jsx("div",{className:"font-medium mb-1",children:"Nenhuma quadra cadastrada"}),s.jsx("div",{className:"mb-4",children:'Clique em "Adicionar Quadra" para cadastrar a primeira.'}),s.jsx(Ee,{onClick:()=>f(!0),children:"Adicionar Quadra"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden space-y-3",children:a.map(q=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:"inline-block w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:gf(q.nome),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"},"aria-hidden":"true"}),s.jsx("span",{className:"font-semibold text-base text-text-primary truncate",children:q.nome})]}),s.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs border flex-shrink-0 ${q.status==="Ativa"?"bg-emerald-50/5 border-emerald-500/30 text-emerald-400":q.status==="Manuteno"?"bg-amber-50/5 border-amber-500/30 text-amber-400":"bg-surface-2 border-border text-text-muted"}`,children:q.status})]}),Array.isArray(q.modalidades)&&q.modalidades.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted mb-1 block",children:"Modalidades"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:q.modalidades.map(Y=>s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-xs",children:Y},Y))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Valor/hora"}),s.jsx("span",{className:"text-sm font-medium",children:q.valor==null||q.valor===""?"-":z(Number(q.valor)*2,!0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Funcionamento"}),s.jsxs("span",{className:"text-sm font-medium",children:[W(q.hora_inicio)," - ",W(q.hora_fim==="24:00:00"?"23:59:00":q.hora_fim)]})]})]}),s.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>de(q),className:"w-full",children:"Editar Quadra"})]},q.id))}),s.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-border bg-surface-0",children:s.jsxs(Vo,{children:[s.jsx(Ho,{className:"bg-surface-2/60 backdrop-blur supports-[backdrop-filter]:bg-surface-2/70",children:s.jsxs(Mn,{children:[s.jsx(_r,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Nome"}),s.jsx(_r,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Modalidades"}),s.jsx(_r,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Valor por hora"}),s.jsx(_r,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Funcionamento"}),s.jsx(_r,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Status"}),s.jsx(_r,{className:"text-right text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Aes"})]})}),s.jsx(Go,{children:a.map(q=>s.jsxs(Mn,{className:"hover:bg-surface-2/40 transition-colors",children:[s.jsx(hr,{className:"font-medium text-sm md:text-base text-text-primary",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:gf(q.nome),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"},"aria-hidden":"true"}),s.jsx("span",{children:q.nome})]})}),s.jsx(hr,{className:"text-sm md:text-base",children:Array.isArray(q.modalidades)&&q.modalidades.length>0?s.jsx("div",{className:"flex flex-wrap gap-1",children:q.modalidades.map(Y=>s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-[11px] md:text-xs",children:Y},Y))}):q.modalidades||""}),s.jsx(hr,{className:"text-sm md:text-base",children:q.valor==null||q.valor===""?"-":s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-[11px] md:text-xs",children:z(Number(q.valor)*2,!0)})}),s.jsxs(hr,{className:"text-sm md:text-base",children:[W(q.hora_inicio)," - ",W(q.hora_fim==="24:00:00"?"23:59:00":q.hora_fim)]}),s.jsx(hr,{className:"text-sm md:text-base",children:s.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-[11px] md:text-xs border ${q.status==="Ativa"?"bg-emerald-50/5 border-emerald-500/30 text-emerald-400":q.status==="Manuteno"?"bg-amber-50/5 border-amber-500/30 text-amber-400":"bg-surface-2 border-border text-text-muted"}`,children:q.status})}),s.jsx(hr,{className:"text-right",children:s.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>de(q),className:"text-sm",children:"Editar"})})]},q.id))})]})})]})]}),s.jsx(qr,{open:d,onOpenChange:f,children:s.jsxs(Lr,{className:"sm:max-w-[520px]",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Adicionar Quadra"}),s.jsx(Jr,{children:"Cadastre uma nova quadra da sua empresa."})]}),s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(r9,{label:"Nome",value:h.nome,onChange:q=>m({...h,nome:q.target.value}),placeholder:"Ex.: Quadra Society 2"}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Modalidades"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:g,onChange:q=>p(q.target.value),onKeyDown:q=>{if(q.key==="Enter"){q.preventDefault();const Y=g.trim();if(!Y)return;m(Z=>Z.modalidades.some(re=>re.toLowerCase()===Y.toLowerCase())?Z:{...Z,modalidades:[...Z.modalidades,Y]}),p("")}},placeholder:"Ex.: Society",className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-60 sm:w-72 focus:outline-none focus:ring-2 focus:ring-primary/30"}),s.jsx(Ee,{type:"button",variant:"secondary",className:"bg-amber-500 hover:bg-amber-400 text-black disabled:opacity-50 disabled:cursor-not-allowed",disabled:!g.trim(),onClick:()=>{const q=g.trim();q&&(m(Y=>Y.modalidades.some(ge=>ge.toLowerCase()===q.toLowerCase())?Y:{...Y,modalidades:[...Y.modalidades,q]}),p(""))},"aria-label":"Adicionar modalidade",title:"Adicionar modalidade",children:"+"})]}),h.modalidades.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:h.modalidades.map(q=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border bg-surface-2 text-xs",children:[s.jsx("span",{className:"px-0.5",children:q}),s.jsx("button",{type:"button",className:"text-text-muted hover:text-destructive/80",onClick:()=>m(Y=>({...Y,modalidades:Y.modalidades.filter(Z=>Z!==q)})),"aria-label":`Remover ${q}`,title:`Remover ${q}`,children:""})]},q))})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Tipo"}),s.jsxs("select",{value:h.tipo,onChange:q=>m({...h,tipo:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Descoberta"}),s.jsx("option",{children:"Coberta"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Valor por hora (R$)"}),s.jsx("input",{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:h.valor_hora,onChange:q=>m({...h,valor_hora:I(q.target.value)}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-40"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Abertura"}),s.jsx("input",{type:"time",step:"1800",value:h.hora_inicio,onChange:q=>m({...h,hora_inicio:q.target.value}),onBlur:q=>m(Y=>({...Y,hora_inicio:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Fechamento"}),s.jsx("input",{type:"time",step:"1800",value:h.hora_fim,onChange:q=>m({...h,hora_fim:q.target.value}),onBlur:q=>m(Y=>({...Y,hora_fim:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Status"}),s.jsxs("select",{value:h.status,onChange:q=>m({...h,status:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Ativa"}),s.jsx("option",{children:"Inativa"}),s.jsx("option",{children:"Manuteno"})]})]})]}),s.jsx(mn,{children:s.jsx(Ee,{onClick:X,disabled:c||h.modalidades.length===0,children:c?"Adicionando...":"Salvar"})})]})}),s.jsx(qr,{open:y,onOpenChange:x,children:s.jsxs(Lr,{className:"sm:max-w-[520px]",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Editar Quadra"}),s.jsx(Jr,{children:"Atualize os dados da quadra selecionada."})]}),s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(r9,{label:"Nome",value:S.nome,onChange:q=>j({...S,nome:q.target.value}),placeholder:"Ex.: Quadra Society 2"}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Modalidades"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:A,onChange:q=>P(q.target.value),onKeyDown:q=>{if(q.key==="Enter"){q.preventDefault();const Y=A.trim();if(!Y)return;j(Z=>Z.modalidades.some(re=>re.toLowerCase()===Y.toLowerCase())?Z:{...Z,modalidades:[...Z.modalidades,Y]}),P("")}},placeholder:"Ex.: Society",className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-60 sm:w-72 focus:outline-none focus:ring-2 focus:ring-primary/30"}),s.jsx(Ee,{type:"button",variant:"secondary",onClick:()=>{const q=A.trim();q&&(j(Y=>Y.modalidades.some(ge=>ge.toLowerCase()===q.toLowerCase())?Y:{...Y,modalidades:[...Y.modalidades,q]}),P(""))},children:"+"})]}),S.modalidades.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:S.modalidades.map(q=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border bg-surface-2 text-xs",children:[s.jsx("span",{className:"px-0.5",children:q}),s.jsx("button",{type:"button",className:"text-text-muted hover:text-destructive/80",onClick:()=>j(Y=>({...Y,modalidades:Y.modalidades.filter(Z=>Z!==q)})),"aria-label":`Remover ${q}`,title:`Remover ${q}`,children:""})]},q))})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Tipo"}),s.jsxs("select",{value:S.tipo,onChange:q=>j({...S,tipo:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Descoberta"}),s.jsx("option",{children:"Coberta"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Valor por hora (R$)"}),s.jsx("input",{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:S.valor_hora,onChange:q=>j({...S,valor_hora:I(q.target.value)}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-40"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Abertura"}),s.jsx("input",{type:"time",step:"1800",value:S.hora_inicio,onChange:q=>j({...S,hora_inicio:q.target.value}),onBlur:q=>j(Y=>({...Y,hora_inicio:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Fechamento"}),s.jsx("input",{type:"time",step:"1800",value:S.hora_fim,onChange:q=>j({...S,hora_fim:q.target.value}),onBlur:q=>j(Y=>({...Y,hora_fim:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Status"}),s.jsxs("select",{value:S.status,onChange:q=>j({...S,status:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Ativa"}),s.jsx("option",{children:"Inativa"}),s.jsx("option",{children:"Manuteno"})]})]})]}),s.jsx(mn,{children:s.jsx(Ee,{onClick:L,disabled:c||S.modalidades.length===0,children:c?"Salvando...":"Salvar alteraes"})})]})})]})]})}const Snt={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.06,delayChildren:.05}}},jnt={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35}}};function n9({children:e,className:t=""}){return s.jsx(lr.div,{variants:jnt,className:`fx-card ${t}`,children:e})}function Wp({label:e,...t}){return s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:e}),s.jsx("input",{...t,className:`bg-surface-2 border border-border rounded-md px-3 py-2 text-sm ${t.className||""}`})]})}function Nnt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,18)}function Cnt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,15)}function Ant(){const{toast:e}=Za(),{company:t,userProfile:r,reloadCompany:n}=po(),[a,i]=v.useState(!1),[o,l]=v.useState({razao_social:"",nome_fantasia:"",cnpj:"",email:"",telefone:"",endereco:"",logo_url:""}),c=v.useRef(null),[u,d]=v.useState(""),f=v.useRef(!0);v.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]),v.useEffect(()=>{(async()=>{try{const p=r?.codigo_empresa||null;if(!p)return;const y=`empresa:form:${p}`;try{const j=localStorage.getItem(y);if(j){const A=JSON.parse(j);A&&typeof A=="object"&&(l(P=>({...P,...A})),A.logo_url&&d(`${A.logo_url.split("?")[0]}?v=${Date.now()}`))}}catch{}const x=setTimeout(()=>{if(f.current)try{const j=localStorage.getItem(y);if(j){const A=JSON.parse(j);A&&typeof A=="object"&&(console.warn("[Empresas] slow fallback: using cached form"),l(P=>({...P,...A})),A.logo_url&&d(`${A.logo_url.split("?")[0]}?v=${Date.now()}`))}}catch{}},5e3),{data:b,error:w}=await Oe.from("empresas").select("*").eq("codigo_empresa",p).single();if(clearTimeout(x),w)throw w;if(!f.current)return;const S={razao_social:b?.razao_social||"",nome_fantasia:b?.nome_fantasia||b?.nome||"",cnpj:b?.cnpj||"",email:b?.email||"",telefone:b?.telefone||"",endereco:b?.endereco||"",logo_url:b?.logo_url||""};l(S),d(S.logo_url?`${S.logo_url.split("?")[0]}?v=${Date.now()}`:"");try{localStorage.setItem(y,JSON.stringify(S))}catch{}}catch(p){console.warn("Falha ao carregar empresa:",p)}})()},[r?.codigo_empresa]),v.useEffect(()=>{if(!o.logo_url){d("");return}const g=o.logo_url.split("?")[0];d(`${g}?v=${Date.now()}`)},[o.logo_url]);const h=async g=>{if(g.preventDefault(),!a){if(!o.razao_social?.trim()||!o.cnpj?.trim()){e({title:"Campos obrigatrios",description:"Preencha Razo Social e CNPJ."});return}if(!r?.codigo_empresa){e({title:"Empresa no vinculada",description:"No foi possvel identificar a empresa do usurio para salvar."});return}try{i(!0);const p={razao_social:o.razao_social||null,nome_fantasia:o.nome_fantasia||null,cnpj:o.cnpj?.replace(/\D/g,"")||null,email:o.email||null,telefone:o.telefone||null,endereco:o.endereco||null,logo_url:o.logo_url||null},{error:y}=await Oe.from("empresas").update(p).eq("codigo_empresa",r.codigo_empresa).select("id").single();if(y)throw y;await n?.(),e({title:"Dados salvos",description:"As informaes da empresa foram atualizadas."})}catch(p){console.error(p);const y=(p?.message||p?.hint||"").toString()||"No foi possvel salvar os dados. Verifique as permisses e tente novamente.";e({title:"Erro ao salvar",description:y})}finally{i(!1)}}},m=async g=>{try{const p=g.target.files?.[0];if(!p)return;if(!r?.codigo_empresa){e({title:"Empresa no vinculada",description:"Seu usurio no est associado a uma empresa."});return}const y=p.name.split(".").pop()?.toLowerCase()||"png",x=`${r.codigo_empresa}/logo.${y}`,{error:b}=await Oe.storage.from("logos").upload(x,p,{upsert:!0,contentType:p.type||void 0});if(b)throw b;const{data:w}=Oe.storage.from("logos").getPublicUrl(x),S=w?.publicUrl||"";l(j=>({...j,logo_url:S})),d(S?`${S}?v=${Date.now()}`:""),e({title:"Logo enviada",description:"A imagem foi carregada com sucesso. Lembre-se de salvar."})}catch(p){console.error("Falha no upload da logo:",p),e({title:"Erro no upload",description:"No foi possvel enviar a logo. Tente outro arquivo."})}finally{c.current&&(c.current.value="")}};return s.jsxs(s.Fragment,{children:[s.jsx(ho,{children:s.jsx("title",{children:"Cadastros  Empresa - Fluxo7 Arena"})}),s.jsxs(lr.div,{variants:Snt,initial:"hidden",animate:"visible",className:"space-y-6",children:[s.jsx(n9,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Cadastros  Empresa"})})}),s.jsxs(n9,{children:[s.jsx("h2",{className:"text-lg font-bold text-text-primary mb-4",children:"Dados da Empresa"}),s.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(Wp,{label:"Razo Social",value:o.razao_social,onChange:g=>l({...o,razao_social:g.target.value}),placeholder:"Ex.: Fluxo7 Arena LTDA"}),s.jsx(Wp,{label:"Nome Fantasia",value:o.nome_fantasia,onChange:g=>l({...o,nome_fantasia:g.target.value}),placeholder:"Ex.: Fluxo7 Arena"}),s.jsx(Wp,{label:"CNPJ",type:"text",inputMode:"numeric",value:o.cnpj,onChange:g=>l({...o,cnpj:Nnt(g.target.value)}),placeholder:"00.000.000/0000-00"}),s.jsx(Wp,{label:"Email",type:"email",value:o.email,onChange:g=>l({...o,email:g.target.value}),placeholder:"contato@empresa.com"}),s.jsx(Wp,{label:"Telefone",type:"tel",inputMode:"tel",value:o.telefone,onChange:g=>l({...o,telefone:Cnt(g.target.value)}),placeholder:"(11) 99999-9999"}),s.jsx(Wp,{label:"Endereo",value:o.endereco,onChange:g=>l({...o,endereco:g.target.value}),placeholder:"Rua, nmero, bairro, cidade",className:"md:col-span-2 lg:col-span-2"}),s.jsx("div",{className:"md:col-span-2 lg:col-span-2 grid grid-cols-1 gap-3",children:s.jsxs("div",{className:"flex items-center gap-4",children:[u||o.logo_url?s.jsx("img",{src:u||o.logo_url,alt:"Logo da empresa",className:"w-16 h-16 rounded-md object-cover border border-border"}):s.jsx("div",{className:"w-16 h-16 rounded-md border border-dashed border-border/60 bg-surface-2/40 flex items-center justify-center text-xs text-text-muted",children:"Sem logo"}),s.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Upload da Logo"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{type:"button",variant:"outline",onClick:()=>c.current?.click(),className:"px-3",children:"Escolher imagem"}),s.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:m,className:"hidden"}),(u||o.logo_url)&&s.jsx("span",{className:"text-xs text-text-muted truncate max-w-[260px]",title:o.logo_url||u,children:"Logo selecionada"})]}),s.jsx("span",{className:"text-[11px] text-text-muted",children:"Formatos: PNG/JPG. Tamanho recomendado: 256x256."})]})]})}),s.jsx("div",{className:"flex items-end",children:s.jsx(Ee,{type:"submit",className:"w-full md:w-auto",disabled:a,children:a?"Salvando...":"Salvar"})})]})]})]})]})}const Pnt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_2={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},a9=[{codigo:"01",nome:"Dinheiro"},{codigo:"02",nome:"Cheque"},{codigo:"03",nome:"Carto de Crdito"},{codigo:"04",nome:"Carto de Dbito"},{codigo:"05",nome:"Carto da Loja (Private Label)"},{codigo:"10",nome:"Vale Alimentao"},{codigo:"11",nome:"Vale Refeio"},{codigo:"12",nome:"Vale Presente"},{codigo:"13",nome:"Vale Combustvel"},{codigo:"14",nome:"Duplicata Mercantil"},{codigo:"15",nome:"Boleto Bancrio"},{codigo:"16",nome:"Depsito Bancrio"},{codigo:"17",nome:"PIX Dinmico (QR-Code)"},{codigo:"18",nome:"Transferncia Bancria / Carteira Digital"},{codigo:"19",nome:"Programa de Fidelidade / Cashback"},{codigo:"20",nome:"PIX Esttico"},{codigo:"21",nome:"Crdito em Loja"},{codigo:"22",nome:"Pagamento Eletrnico no Informado"},{codigo:"90",nome:"Sem Pagamento"},{codigo:"99",nome:"Outros"}],cP=({icon:e,title:t,value:r,subtitle:n,color:a,onClick:i,isActive:o})=>s.jsx(lr.div,{variants:_2,onClick:i,className:Ot("bg-surface rounded-lg border md:border-2 p-3 md:p-4 transition-all text-center h-[90px] md:h-auto",i?"cursor-pointer hover:shadow-md":"",o?`border-${a} bg-${a}/5`:"border-border",i&&!o?"hover:border-border-hover":""),children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 md:flex-row md:items-center md:gap-3 h-full",children:[s.jsx("div",{className:Ot("p-1.5 md:p-2 rounded-lg",`bg-${a}/10`),children:s.jsx(e,{className:Ot("w-4 h-4 md:w-5 md:h-5",`text-${a}`)})}),s.jsxs("div",{className:"flex-1 md:text-left",children:[s.jsx("p",{className:"text-base md:text-2xl font-bold text-text-primary leading-none",children:r}),s.jsx("p",{className:"text-[10px] md:text-xs font-semibold text-text-secondary md:mt-0.5",children:t}),s.jsx("p",{className:"hidden md:block text-xs text-text-muted",children:n})]})]})});function Ent(){const{toast:e}=Za(),{userProfile:t,authReady:r}=po(),[n,a]=v.useState([]),[i,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(""),[f,h]=v.useState("all"),[m,g]=v.useState("all"),[p,y]=v.useState(!0),[x,b]=v.useState(null),[w,S]=v.useState(!1),[j,A]=v.useState(null),[P,C]=v.useState({codigo_interno:"",codigo_sefaz:"",nome:"",taxa_percentual:"",ativo:!0}),[E,R]=v.useState(!1),[k,T]=v.useState(null),[I,M]=v.useState(null),[z,W]=v.useState(!1),[U,$]=v.useState("mes"),[G,me]=v.useState(!1),[de,L]=v.useState([]),[B,X]=v.useState("customizado"),[q,Y]=v.useState(""),[Z,ge]=v.useState(""),[re,Se]=v.useState(!1),[Ie,pe]=v.useState(!1);v.useEffect(()=>{const Te=()=>{try{pe(typeof window<"u"&&window.innerWidth<=640)}catch{}};return Te(),window.addEventListener("resize",Te),()=>window.removeEventListener("resize",Te)},[]);const Ue=async()=>{try{o(!0);const Te=t?.codigo_empresa;if(!Te)return;const Ze=await Mg({somenteAtivas:!1,codigoEmpresa:Te});console.log(" Finalizadoras carregadas:",Ze),console.log(" Primeira finalizadora:",Ze?.[0]),a(Array.isArray(Ze)?Ze:[])}catch(Te){e({title:"Erro ao carregar",description:Te?.message,variant:"destructive"})}finally{o(!1)}},_e=v.useMemo(()=>{const Te=n.length,Ze=n.filter(mt=>mt.ativo).length,Ye=n.length>0?n.reduce((mt,At)=>{const Pe=At.nome||"Sem nome";return mt[Pe]=(mt[Pe]||0)+1,mt},{}):{},Nt=Object.entries(Ye).sort((mt,At)=>At[1]-mt[1])[0],nt=Nt?Nt[0]:"-";return{total:Te,ativas:Ze,maisUsada:nt}},[n]),ue=v.useMemo(()=>{let Te=[...n];if(u){const Ze=u.toLowerCase();Te=Te.filter(Ye=>{const Nt=String(Ye.tipo||"").toLowerCase(),nt=String(Ye.nome||"").toLowerCase(),mt=String(Ye.codigo_interno||"").toLowerCase(),At=Ze.replace(/\D/g,""),Pe=String(Ye.codigo_interno||"").replace(/\D/g,"");return Nt.includes(Ze)||nt.includes(Ze)||mt.includes(Ze)||!!At&&Pe===At})}return f!=="all"&&(Te=Te.filter(Ze=>Ze.tipo===f)),m!=="all"&&(Te=Te.filter(Ze=>m==="active"?Ze.ativo:!Ze.ativo)),x==="ativas"&&(Te=Te.filter(Ze=>Ze.ativo)),Te.sort((Ze,Ye)=>{const Nt=parseInt(Ze.codigo_interno)||0,nt=parseInt(Ye.codigo_interno)||0;return Nt-nt}),Te},[n,u,f,m,x]),Ft=()=>{A(null);const Te=n.reduce((Ye,Nt)=>{const nt=parseInt(Nt.codigo_interno)||0;return nt>Ye?nt:Ye},0),Ze=String(Te+1).padStart(2,"0");C({codigo_interno:Ze,codigo_sefaz:"",nome:"",taxa_percentual:"",ativo:!0}),S(!0)},qt=Te=>{A(Te),C({codigo_interno:Te.codigo_interno||"",codigo_sefaz:Te.codigo_sefaz||"",nome:Te.nome||"",taxa_percentual:Te.taxa_percentual!=null?String(Te.taxa_percentual):"",ativo:Te.ativo!==!1}),S(!0)},zt=async(Te,Ze="mes")=>{try{W(!0);const Ye=t?.codigo_empresa;if(!Ye)return;const Nt=new Date;let nt,mt=Nt.toISOString();switch(Ze){case"hoje":nt=new Date(Nt.setHours(0,0,0,0)).toISOString();break;case"semana":nt=new Date(Nt.setDate(Nt.getDate()-7)).toISOString();break;case"mes":nt=new Date(Nt.setMonth(Nt.getMonth()-1)).toISOString();break;default:nt=new Date(Nt.setMonth(Nt.getMonth()-1)).toISOString()}const{data:At,error:Pe}=await Oe.from("pagamentos").select("valor, recebido_em, status").eq("finalizadora_id",Te).eq("codigo_empresa",Ye).gte("recebido_em",nt).lte("recebido_em",mt).neq("status","Cancelado").neq("status","Estornado");if(Pe)throw Pe;const Je=At?.length||0,Dt=At?.reduce((Bt,Tt)=>Bt+(Number(Tt.valor)||0),0)||0,qe=Je>0?Dt/Je:0,lt=At?.[At.length-1]?.recebido_em||null;M({transacoes:Je,faturamento:Dt,ticketMedio:qe,ultimaUtilizacao:lt})}catch(Ye){console.error("Erro ao carregar estatsticas:",Ye),e({title:"Erro ao carregar estatsticas",description:Ye?.message,variant:"destructive"})}finally{W(!1)}},it=async(Te="customizado",Ze=null,Ye=null)=>{try{Se(!0);const Nt=t?.codigo_empresa;if(!Nt)return;let nt,mt;if(Te==="customizado"&&Ze&&Ye)nt=new Date(Ze).toISOString(),mt=new Date(Ye+"T23:59:59").toISOString();else{const qe=new Date;switch(mt=qe.toISOString(),Te){case"hoje":nt=new Date(qe.setHours(0,0,0,0)).toISOString();break;case"semana":nt=new Date(qe.setDate(qe.getDate()-7)).toISOString();break;case"mes":nt=new Date(qe.setMonth(qe.getMonth()-1)).toISOString();break;default:nt=new Date(qe.setMonth(qe.getMonth()-1)).toISOString()}}const{data:At,error:Pe}=await Oe.from("pagamentos").select("finalizadora_id, valor, finalizadoras!pagamentos_finalizadora_id_fkey(id, codigo_interno, nome)").eq("codigo_empresa",Nt).gte("recebido_em",nt).lte("recebido_em",mt).neq("status","Cancelado").neq("status","Estornado");if(Pe)throw Pe;const Je={};At?.forEach(qe=>{const lt=qe.finalizadora_id;lt&&(Je[lt]||(Je[lt]={id:lt,codigo:qe.finalizadoras?.codigo_interno||"-",nome:qe.finalizadoras?.nome||"Sem nome",total:0,transacoes:0}),Je[lt].total+=Number(qe.valor)||0,Je[lt].transacoes+=1)});const Dt=Object.values(Je).sort((qe,lt)=>lt.total-qe.total);L(Dt)}catch(Nt){console.error("Erro ao carregar ranking:",Nt),e({title:"Erro ao carregar ranking",description:Nt?.message,variant:"destructive"})}finally{Se(!1)}},ft=()=>{me(!0),X("customizado");const Te=new Date,Ze=new Date;Ze.setMonth(Ze.getMonth()-1),Y(Ze.toISOString().split("T")[0]),ge(Te.toISOString().split("T")[0]),it("customizado",Ze.toISOString().split("T")[0],Te.toISOString().split("T")[0])},dt=Te=>{T(Te),R(!0),$("mes"),zt(Te.id,"mes")},ve=async()=>{try{if(!P.nome?.trim()){e({title:"Nome  obrigatrio",variant:"warning"});return}if(!P.codigo_sefaz){e({title:"Cdigo SEFAZ  obrigatrio",variant:"warning"});return}if(P.codigo_interno?.trim()&&n.some(Nt=>Nt.codigo_interno===P.codigo_interno.trim()&&(!j||Nt.id!==j.id))){e({title:"Cdigo j existe",description:"Este cdigo interno j est em uso por outra finalizadora",variant:"warning"});return}c(!0);const Te=t?.codigo_empresa,Ze={codigo_interno:P.codigo_interno?.trim()||null,codigo_sefaz:P.codigo_sefaz,nome:P.nome.trim(),tipo:"outros",taxa_percentual:P.taxa_percentual===""?null:Number(P.taxa_percentual),ativo:P.ativo};j?(await tHe(j.id,Ze,Te),e({title:"Finalizadora atualizada!",variant:"success"})):(await eHe(Ze,Te),e({title:"Finalizadora criada!",variant:"success"})),S(!1),await Ue()}catch(Te){e({title:"Erro ao salvar",description:Te?.message,variant:"destructive"})}finally{c(!1)}},ut=async Te=>{try{await rHe(Te.id,!Te.ativo,t?.codigo_empresa),e({title:Te.ativo?"Desativada":"Ativada",variant:"success"}),await Ue()}catch(Ze){e({title:"Erro ao alterar status",description:Ze?.message,variant:"destructive"})}};return v.useEffect(()=>{r&&t?.codigo_empresa&&Ue()},[r,t?.codigo_empresa]),s.jsxs(s.Fragment,{children:[s.jsx(ho,{children:s.jsx("title",{children:"Finalizadoras - Fluxo7 Arena"})}),s.jsxs(lr.div,{variants:Pnt,initial:"hidden",animate:"visible",className:"flex-1 space-y-6 p-4 md:p-6",children:[s.jsxs(lr.div,{variants:_2,className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"min-w-0",children:s.jsx("h1",{className:"text-2xl md:text-3xl font-black text-text-primary tracking-tight leading-tight",children:"Finalizadoras"})}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx(Ee,{variant:"ghost",size:"icon",onClick:()=>y(!p),className:"h-9 w-9",children:p?s.jsx(Eb,{className:"h-5 w-5"}):s.jsx(kb,{className:"h-5 w-5"})}),s.jsxs(Ee,{onClick:Ft,className:"gap-2 h-9 px-3 whitespace-nowrap",children:[s.jsx(Xa,{className:"h-4 w-4"}),s.jsx("span",{className:"md:hidden",children:"Nova"}),s.jsx("span",{className:"hidden md:inline",children:"Nova Finalizadora"})]})]})]}),p&&s.jsxs("div",{className:"grid grid-cols-3 gap-3 md:grid-cols-3 md:gap-6",children:[s.jsx(cP,{icon:um,title:"Total",value:_e.total,subtitle:"Finalizadoras cadastradas",color:"brand"}),s.jsx(cP,{icon:dl,title:"Ativas",value:_e.ativas,subtitle:"Disponveis para uso",color:"success",onClick:()=>b(x==="ativas"?null:"ativas"),isActive:x==="ativas"}),s.jsx(cP,{icon:Tb,title:"Mais Usada",value:_e.maisUsada,subtitle:"Mtodo mais popular",color:"warning",onClick:ft})]}),s.jsx(lr.div,{variants:_2,className:"bg-surface rounded-lg border border-border p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative min-w-0 basis-0 flex-grow",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar finalizadora...",value:u,onChange:Te=>d(Te.target.value),className:"pl-10 h-11"})]}),s.jsxs(yn,{value:m,onValueChange:g,children:[s.jsx(pn,{className:"w-[110px] md:w-[180px]",children:s.jsx(xn,{placeholder:"Filtrar por status"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"all",children:"Todos"}),s.jsx(Wt,{value:"active",children:"Ativas"}),s.jsx(Wt,{value:"inactive",children:"Inativas"})]})]})]})}),s.jsx(lr.div,{variants:_2,className:"bg-surface rounded-lg border border-border overflow-hidden",children:i?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),s.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):ue.length===0?s.jsxs("div",{className:"p-12 text-center text-text-muted",children:[s.jsx(um,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Nenhuma finalizadora encontrada"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden divide-y divide-border",children:ue.map(Te=>s.jsxs("div",{className:"p-3 flex flex-col gap-2 hover:bg-surface-2/50 cursor-pointer",onClick:()=>dt(Te),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-surface-2 border border-border font-mono text-xs text-text-secondary",children:Te.codigo_interno||"-"}),s.jsx("span",{className:"font-semibold text-sm text-text-primary truncate",title:Te.nome,children:Te.nome})]}),s.jsxs("span",{className:Ot("inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[11px] font-medium",Te.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[s.jsx("span",{className:Ot("w-1.5 h-1.5 rounded-full",Te.ativo?"bg-success":"bg-muted")}),Te.ativo?"Ativa":"Inativa"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("span",{children:["Taxa: ",Te.taxa_percentual?`${Te.taxa_percentual}%`:"-"]})}),s.jsxs("div",{className:"flex items-center gap-2",onClick:Ze=>Ze.stopPropagation(),children:[s.jsx(Ee,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>qt(Te),children:s.jsx(Nm,{className:"h-4 w-4"})}),s.jsx(Ee,{variant:Te.ativo?"ghost":"default",size:"sm",className:"h-7 px-2",onClick:()=>ut(Te),children:Te.ativo?"Desativar":"Ativar"})]})]})]},Te.id))}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-surface-2 border-b border-border",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Cdigo"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Descrio"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Taxa (%)"}),s.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-text-secondary",children:"Status"}),s.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-text-secondary",children:"Aes"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:ue.map(Te=>s.jsxs("tr",{className:"hover:bg-surface-2/50 transition-colors cursor-pointer",onClick:()=>dt(Te),children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-mono text-sm text-text-primary",children:Te.codigo_interno||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-semibold text-text-primary",children:Te.nome})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-text-secondary",children:Te.taxa_percentual?`${Te.taxa_percentual}%`:"-"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("span",{className:Ot("inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium",Te.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[s.jsx("span",{className:Ot("w-2 h-2 rounded-full",Te.ativo?"bg-success":"bg-muted")}),Te.ativo?"Ativa":"Inativa"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",onClick:Ze=>Ze.stopPropagation(),children:[s.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>qt(Te),children:s.jsx(Nm,{className:"h-4 w-4"})}),s.jsx(Ee,{variant:Te.ativo?"ghost":"default",size:"sm",onClick:()=>ut(Te),children:Te.ativo?"Desativar":"Ativar"})]})})]},Te.id))})]})})]})})]}),s.jsx(qr,{open:w,onOpenChange:S,children:s.jsxs(Lr,{className:"sm:max-w-[500px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:j?"Editar Finalizadora":"Nova Finalizadora"}),s.jsx(Jr,{children:j?"Atualize as informaes da finalizadora":"Adicione um novo mtodo de pagamento"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{htmlFor:"codigo_interno",children:"Cdigo Finalizadora"}),s.jsx($t,{id:"codigo_interno",type:"text",placeholder:"Ex: 01, 02, 03...",value:P.codigo_interno,onChange:Te=>C({...P,codigo_interno:Te.target.value})}),s.jsx("p",{className:"text-xs text-text-muted",children:"Gerado automaticamente, mas pode ser editado"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{htmlFor:"nome",children:"Descrio *"}),s.jsx($t,{id:"nome",placeholder:"Ex: PIX, Dinheiro, Carto de Crdito...",value:P.nome,onChange:Te=>C({...P,nome:Te.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{htmlFor:"codigo_sefaz",children:"Forma de Pagamento NF-e/NFC-e *"}),s.jsxs(yn,{value:P.codigo_sefaz,onValueChange:Te=>{const Ze=a9.find(Ye=>Ye.codigo===Te);C({...P,codigo_sefaz:Te,nome:P.nome||Ze?.nome||""})},children:[s.jsx(pn,{children:s.jsx(xn,{placeholder:"Selecione a forma de pagamento"})}),s.jsx(gn,{className:"max-h-[300px] border-2 border-border bg-surface shadow-xl",position:"popper",sideOffset:5,children:a9.map(Te=>s.jsxs(Wt,{value:Te.codigo,children:[Te.codigo," - ",Te.nome]},Te.codigo))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{htmlFor:"taxa",children:"Taxa (%)"}),s.jsx($t,{id:"taxa",type:"number",step:"0.01",min:"0",max:"100",placeholder:"0.00",value:P.taxa_percentual,onChange:Te=>C({...P,taxa_percentual:Te.target.value})}),s.jsx("p",{className:"text-xs text-text-muted",children:"Deixe vazio se no houver taxa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"ativo",checked:P.ativo,onChange:Te=>C({...P,ativo:Te.target.checked}),className:"h-4 w-4 rounded border-border"}),s.jsx(gt,{htmlFor:"ativo",className:"text-sm font-normal cursor-pointer",children:"Finalizadora ativa"})]})]}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>S(!1),disabled:l,children:"Cancelar"}),s.jsx(Ee,{onClick:ve,disabled:l,children:l?"Salvando...":"Salvar"})]})]})}),s.jsx(qr,{open:E,onOpenChange:R,children:s.jsxs(Lr,{className:"sm:max-w-[700px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Detalhes da Finalizadora"}),s.jsx(Jr,{children:"Estatsticas e informaes completas"})]}),k&&s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Informaes"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Cdigo Finalizadora"}),s.jsx("p",{className:"font-mono text-sm text-text-primary",children:k.codigo_interno||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Forma de Pagamento NF-e/NFC-e"}),s.jsx("p",{className:"font-mono text-sm text-text-primary",children:k.codigo_sefaz||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Descrio"}),s.jsx("p",{className:"font-medium text-text-primary",children:k.nome})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Taxa"}),s.jsx("p",{className:"font-medium text-text-primary",children:k.taxa_percentual?`${k.taxa_percentual}%`:"Sem taxa"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Status"}),s.jsxs("span",{className:Ot("inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs font-medium",k.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[s.jsx("span",{className:Ot("w-2 h-2 rounded-full",k.ativo?"bg-success":"bg-muted")}),k.ativo?"Ativa":"Inativa"]})]})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Perodo de Anlise"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{variant:U==="hoje"?"default":"outline",size:"sm",onClick:()=>{$("hoje"),zt(k.id,"hoje")},children:"Hoje"}),s.jsx(Ee,{variant:U==="semana"?"default":"outline",size:"sm",onClick:()=>{$("semana"),zt(k.id,"semana")},children:"7 Dias"}),s.jsx(Ee,{variant:U==="mes"?"default":"outline",size:"sm",onClick:()=>{$("mes"),zt(k.id,"mes")},children:"30 Dias"})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Estatsticas de Uso"}),z?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-brand border-t-transparent"})}):I?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Total de Transaes"}),s.jsx("span",{className:"font-semibold text-text-primary",children:I.transacoes})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Faturamento Total"}),s.jsxs("span",{className:"font-semibold text-success",children:["R$ ",I.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Ticket Mdio"}),s.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",I.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"ltima Utilizao"}),s.jsx("span",{className:"font-medium text-text-muted",children:I.ultimaUtilizacao?new Date(I.ultimaUtilizacao).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca utilizada"})]})]}):s.jsx("div",{className:"text-center py-8 text-text-muted",children:s.jsx("p",{className:"text-sm",children:"Nenhum dado disponvel"})})]})]}),s.jsxs(mn,{children:[s.jsx(Ee,{variant:"outline",onClick:()=>R(!1),children:"Fechar"}),s.jsxs(Ee,{onClick:()=>{R(!1),qt(k)},children:[s.jsx(Nm,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]})}),s.jsx(qr,{open:G,onOpenChange:me,children:s.jsxs(Lr,{className:"sm:max-w-[700px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Ranking de Finalizadoras"}),s.jsx(Jr,{children:"Faturamento por forma de pagamento"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Ee,{variant:B==="hoje"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{X("hoje"),it("hoje")},children:"Hoje"}),s.jsx(Ee,{variant:B==="semana"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{X("semana"),it("semana")},children:"7 Dias"}),s.jsx(Ee,{variant:B==="mes"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{X("mes"),it("mes")},children:"30 Dias"}),s.jsx(Ee,{variant:B==="customizado"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>X("customizado"),children:"Perodo"})]}),B==="customizado"&&(Ie?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"text-xs",children:"Data Inicial"}),s.jsx("input",{type:"date",className:"mt-1 h-9 w-full rounded-md border border-border bg-surface px-2 text-sm text-text-primary",value:q,onChange:Te=>Y(Te.target.value)})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"text-xs",children:"Data Final"}),s.jsx("input",{type:"date",className:"mt-1 h-9 w-full rounded-md border border-border bg-surface px-2 text-sm text-text-primary",value:Z,onChange:Te=>ge(Te.target.value)})]})]}),s.jsx(Ee,{className:"w-full",onClick:()=>it("customizado",q,Z),disabled:!q||!Z||re,children:re?"Buscando...":"Buscar"})]}):s.jsxs("div",{className:"flex gap-3 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(gt,{children:"Data Inicial"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:Ot("w-full justify-start text-left font-normal",!q&&"text-text-muted"),children:[s.jsx(vu,{className:"mr-2 h-4 w-4"}),q?new Date(q+"T12:00:00").toLocaleDateString("pt-BR"):"Selecione"]})}),s.jsx(Ou,{className:"w-auto p-0 bg-surface border border-border",align:"start",children:s.jsx(AO,{mode:"single",selected:q?new Date(q+"T12:00:00"):void 0,onSelect:Te=>{if(Te){const Ze=Te.getFullYear(),Ye=String(Te.getMonth()+1).padStart(2,"0"),Nt=String(Te.getDate()).padStart(2,"0");Y(`${Ze}-${Ye}-${Nt}`)}},className:"p-3"})})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(gt,{children:"Data Final"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ee,{variant:"outline",className:Ot("w-full justify-start text-left font-normal",!Z&&"text-text-muted"),children:[s.jsx(vu,{className:"mr-2 h-4 w-4"}),Z?new Date(Z+"T12:00:00").toLocaleDateString("pt-BR"):"Selecione"]})}),s.jsx(Ou,{className:"w-auto p-0 bg-surface border border-border",align:"start",children:s.jsx(AO,{mode:"single",selected:Z?new Date(Z+"T12:00:00"):void 0,onSelect:Te=>{if(Te){const Ze=Te.getFullYear(),Ye=String(Te.getMonth()+1).padStart(2,"0"),Nt=String(Te.getDate()).padStart(2,"0");ge(`${Ze}-${Ye}-${Nt}`)}},className:"p-3"})})]})]}),s.jsx(Ee,{onClick:()=>it("customizado",q,Z),disabled:!q||!Z||re,children:"Buscar"})]}))]}),re?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand border-t-transparent"})}):de.length===0?s.jsx("div",{className:"text-center py-12 text-text-muted",children:s.jsx("p",{children:"Nenhuma transao no perodo selecionado"})}):s.jsx("div",{className:"space-y-3",children:de.map((Te,Ze)=>s.jsx("div",{className:"bg-surface-2 rounded-lg p-3 md:p-4 border border-border",children:s.jsxs("div",{className:"flex items-start md:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start md:items-center gap-2 md:gap-3 flex-1 min-w-0",children:[s.jsxs("div",{className:Ot("flex items-center justify-center w-7 h-7 md:w-8 md:h-8 rounded-full font-bold text-xs md:text-sm flex-shrink-0",Ze===0?"bg-warning/20 text-warning":Ze===1?"bg-info/20 text-info":Ze===2?"bg-success/20 text-success":"bg-muted/20 text-muted"),children:[Ze+1,""]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[s.jsx("span",{className:"font-mono text-[10px] md:text-xs text-text-muted",children:Te.codigo}),s.jsx("span",{className:"font-semibold text-sm md:text-base text-text-primary truncate",children:Te.nome})]}),s.jsxs("p",{className:"text-[10px] md:text-xs text-text-muted",children:[Te.transacoes," transaes"]})]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-base md:text-lg font-bold text-success whitespace-nowrap",children:["R$ ",Te.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),s.jsxs("p",{className:"text-[10px] md:text-xs text-text-muted whitespace-nowrap",children:["Mdia: R$ ",(Te.total/Te.transacoes).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})},Te.id))})]}),s.jsx(mn,{children:s.jsx(Ee,{variant:"outline",onClick:()=>me(!1),children:"Fechar"})})]})})]})}function knt(){return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Pgina de Teste"}),s.jsx("p",{children:"Esta  uma pgina de teste para verificar se o roteamento est funcionando corretamente."})]})}function Ont(e){const t=new URLSearchParams(e.startsWith("#")?e.slice(1):e),r=t.get("access_token"),n=t.get("refresh_token");return{access_token:r,refresh_token:n}}const Tnt=()=>{const{toast:e}=Za(),t=Wc(),[r,n]=v.useState(""),[a,i]=v.useState(""),[o,l]=v.useState(!1),[c,u]=v.useState(!1),d=v.useMemo(()=>Ont(window.location.hash),[]);v.useEffect(()=>{(async()=>{const{data:{session:m}}=await Oe.auth.getSession();if(m){u(!0);return}if(d.access_token&&d.refresh_token){const{data:g,error:p}=await Oe.auth.setSession({access_token:d.access_token,refresh_token:d.refresh_token});p&&e({title:"Link invlido ou expirado",description:"Abra o link do email novamente.",variant:"destructive"}),u(!!g?.session)}else e({title:"Link invlido",description:"Abra o link de redefinio enviado por email.",variant:"destructive"})})()},[]);const f=async h=>{if(h.preventDefault(),r.length<6){e({title:"Senha muito curta",description:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"});return}if(r!==a){e({title:"Senhas no conferem",description:"As senhas digitadas so diferentes.",variant:"destructive"});return}l(!0);const{data:m,error:g}=await Oe.auth.updateUser({password:r});if(l(!1),g){e({title:"Erro ao redefinir senha",description:g.message||"Tente novamente.",variant:"destructive"});return}e({title:"Senha redefinida",description:"Voc j pode acessar o sistema.",variant:"default"}),t("/")};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:s.jsxs("div",{className:"w-full max-w-md bg-surface rounded-xl border border-border p-6 shadow",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2 text-text-primary",children:"Redefinir senha"}),s.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Defina uma nova senha para sua conta."}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1 text-text-secondary",children:"Nova senha"}),s.jsx($t,{type:"password",value:r,onChange:h=>n(h.target.value),placeholder:"",disabled:!c||o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1 text-text-secondary",children:"Confirmar nova senha"}),s.jsx($t,{type:"password",value:a,onChange:h=>i(h.target.value),placeholder:"",disabled:!c||o})]}),s.jsx(Ee,{type:"submit",className:"w-full",disabled:!c||o,children:o?"Salvando...":"Salvar nova senha"})]})]})})};function Int({open:e,onOpenChange:t,codigoEmpresa:r,onSuccess:n}){const{toast:a}=Za(),[i,o]=v.useState("upload"),[l,c]=v.useState(null),[u,d]=v.useState(null),[f,h]=v.useState(!1),[m,g]=v.useState({success:!1,comandaId:null,error:null}),p=async S=>{const j=S.target.files?.[0];if(j){if(!j.name.endsWith(".xml")){a({title:"Arquivo invlido",description:"Selecione um arquivo XML vlido.",variant:"destructive"});return}c(j);try{const A=await j.text(),P=mre(A);if(!P.success){a({title:"Erro ao ler XML",description:P.error||"XML invlido",variant:"destructive"});return}if(!P.produtos||P.produtos.length===0){a({title:"Nenhum produto encontrado",description:"O XML no contm produtos.",variant:"warning"});return}if(P.nfe?.tipo!=="Sada"){a({title:"Tipo de nota incorreto",description:"Este XML  de entrada. Use a importao em Produtos para notas de entrada.",variant:"warning"});return}d(P),o("preview")}catch(A){console.error("[XMLSalesImport] Erro ao processar arquivo:",A),a({title:"Erro ao processar XML",description:A.message,variant:"destructive"})}}},y=async()=>{o("processing"),h(!0);try{const S=await dh({searchTerm:"",limit:1e4,codigoEmpresa:r}),j=u.nfe?.dataEmissao?new Date(u.nfe.dataEmissao):new Date,A=u.nfe?.chaveAcesso||"",{data:P,error:C}=await Oe.from("comandas").insert({codigo_empresa:r,mesa_id:null,status:"closed",aberto_em:j.toISOString(),fechado_em:j.toISOString(),observacao:`Importado de XML - NF-e ${u.nfe?.numero||""}${A?`
Chave: ${A}`:""}`,origem:"xml",xml_chave:A||null}).select().single();if(C)throw C;const E=[],R=[];for(const T of u.produtos){const I=pre(T,S);if(I){E.push({comanda_id:P.id,produto_id:I.id,descricao:T.nome,quantidade:T.quantidade,preco_unitario:T.valorUnitario,desconto:T.desconto||0,codigo_empresa:r});const M=Math.max(0,(I.stock||I.estoque||0)-T.quantidade);await Oe.from("produtos").update({estoque:M}).eq("id",I.id).eq("codigo_empresa",r)}else R.push(T.nome)}if(E.length>0){const{error:T}=await Oe.from("comanda_itens").insert(E);if(T)throw T}const k=u.pagamentos||[];if(k.length>0){const{data:T}=await Oe.from("finalizadoras").select("id, codigo_sefaz, nome").eq("codigo_empresa",r).eq("ativo",!0),I=new Map((T||[]).map(W=>[W.codigo_sefaz,W])),M=k.map(W=>{const U=I.get(W.codigoSefaz);return{comanda_id:P.id,finalizadora_id:U?.id||null,metodo:W.descricao.toLowerCase(),valor:W.valor,status:"Pago",recebido_em:j.toISOString(),codigo_empresa:r,origem:"xml",xml_chave:A||null}}),{error:z}=await Oe.from("pagamentos").insert(M);if(z)throw z}else{const T=u.produtos.reduce((M,z)=>M+(z.valorTotal||0),0),{error:I}=await Oe.from("pagamentos").insert({comanda_id:P.id,finalizadora_id:null,metodo:"outros",valor:T,status:"Pago",recebido_em:j.toISOString(),codigo_empresa:r,origem:"xml",xml_chave:A||null});if(I)throw I}console.log("[XMLSalesImport] Venda importada com sucesso. Comanda ID:",P.id),R.length>0?a({title:"Venda importada com avisos",description:`${E.length} produto(s) registrado(s), ${R.length} no encontrado(s).`,variant:"warning",duration:5e3}):a({title:"Venda importada com sucesso!",description:`${E.length} produto(s) registrado(s). Total: R$ ${w.toFixed(2)}`,variant:"success"}),g({success:!0,comandaId:P.id,error:null,produtosNaoEncontrados:R,totalItens:E.length,totalVenda:w,dataEmissao:j.toISOString().slice(0,10)}),o("done"),n&&n(j.toISOString().slice(0,10))}catch(S){console.error("[XMLSalesImport] Erro ao importar:",S),g({success:!1,comandaId:null,error:S.message}),o("done"),a({title:"Erro ao importar XML",description:S.message,variant:"destructive"})}finally{h(!1)}},x=()=>{o("upload"),c(null),d(null),g({success:!1,comandaId:null,error:null}),t(!1)},b=()=>{o("upload"),c(null),d(null)},w=u?.produtos?.reduce((S,j)=>S+(j.valorTotal||0),0)||0;return s.jsx(qr,{open:e,onOpenChange:t,children:s.jsxs(Lr,{className:"max-w-3xl max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-2xl font-bold",children:"Importar XML de Venda (NF-e)"}),s.jsxs(Jr,{children:[i==="upload"&&"Selecione o arquivo XML da nota fiscal de sada",i==="preview"&&"Revise os dados da venda que ser importada",i==="processing"&&"Processando venda...",i==="done"&&"Importao finalizada"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-1",children:[i==="upload"&&s.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("label",{htmlFor:"xml-sales-upload",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer bg-surface hover:bg-surface-2 transition-colors",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(UW,{className:"w-12 h-12 mb-4 text-text-muted"}),s.jsx("p",{className:"mb-2 text-sm text-text-primary font-semibold",children:"Clique para selecionar ou arraste o arquivo"}),s.jsx("p",{className:"text-xs text-text-muted",children:"XML de NF-e de Sada (Venda)"})]}),s.jsx("input",{id:"xml-sales-upload",type:"file",accept:".xml",className:"hidden",onChange:p})]}),l&&s.jsxs("div",{className:"mt-4 p-3 bg-surface-2 rounded-lg flex items-center gap-2",children:[s.jsx(Kl,{className:"w-5 h-5 text-success"}),s.jsx("span",{className:"text-sm text-text-primary",children:l.name})]})]})}),i==="preview"&&s.jsxs("div",{className:"space-y-4",children:[u?.nfe&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Informaes da NF-e"}),u.fornecedor&&s.jsxs("div",{className:"mb-3 pb-3 border-b border-border",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary mb-1",children:u.fornecedor.razaoSocial||u.fornecedor.nomeFantasia||"Fornecedor"}),s.jsxs("div",{className:"text-xs text-text-muted",children:[u.fornecedor.cnpj&&`CNPJ: ${u.fornecedor.cnpj}`,u.fornecedor.endereco?.cidade&&u.fornecedor.endereco?.uf&&`  ${u.fornecedor.endereco.cidade}/${u.fornecedor.endereco.uf}`]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Nmero:"})," ",s.jsx("span",{className:"font-mono",children:u.nfe.numero})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Srie:"})," ",s.jsx("span",{className:"font-mono",children:u.nfe.serie})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Tipo:"})," ",s.jsx("span",{className:"text-warning font-semibold",children:u.nfe.tipo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Data:"})," ",s.jsx("span",{children:new Date(u.nfe.dataEmissao).toLocaleDateString("pt-BR")})]})]}),u.nfe.naturezaOperacao&&s.jsxs("div",{className:"mb-2 text-sm",children:[s.jsx("span",{className:"text-text-muted",children:"Natureza:"})," ",s.jsx("span",{className:"font-medium",children:u.nfe.naturezaOperacao})]}),u.nfe.totalNota!==void 0&&s.jsxs("div",{className:"mb-3 text-sm",children:[s.jsx("span",{className:"text-text-muted",children:"Total da Nota:"})," ",s.jsxs("span",{className:"font-mono font-semibold text-lg text-success",children:["R$ ",u.nfe.totalNota.toFixed(2)]})]}),u.nfe.chaveAcesso&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[s.jsx("span",{className:"text-text-muted text-xs",children:"Chave de Acesso:"}),s.jsx("p",{className:"font-mono text-xs break-all",children:u.nfe.chaveAcesso})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsxs("h3",{className:"font-semibold mb-3",children:["Produtos da Venda (",u.produtos.length,")"]}),s.jsx("div",{className:"space-y-2",children:u.produtos.map((S,j)=>s.jsxs("div",{className:"p-3 rounded-lg border border-border bg-surface flex items-start gap-3",children:[s.jsx(Ob,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-sm truncate",children:S.nome}),s.jsxs("p",{className:"text-xs text-text-muted",children:[S.codigo&&`Cdigo: ${S.codigo}  `,"Qtd: ",S.quantidade," ",S.unidade]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",S.valorTotal.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-text-muted",children:["Unit: R$ ",S.valorUnitario.toFixed(2)]})]})]})})]},j))})]}),u.pagamentos&&u.pagamentos.length>0&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsxs("h3",{className:"font-semibold mb-3",children:["Formas de Pagamento (",u.pagamentos.length,")"]}),s.jsx("div",{className:"space-y-2",children:u.pagamentos.map((S,j)=>s.jsxs("div",{className:"p-3 rounded-lg border border-border bg-surface flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:S.descricao}),s.jsxs("p",{className:"text-xs text-text-muted",children:["Cdigo SEFAZ: ",S.codigoSefaz]})]}),s.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",S.valor.toFixed(2)]})]},j))})]}),s.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(wd,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-sm mb-1",children:"Ateno: Venda Externa"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Esta venda ser registrada no histrico como uma venda externa (importada de XML). O estoque dos produtos ser subtrado automaticamente."})]})]})}),s.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total da Venda:"}),s.jsxs("span",{className:"text-success",children:["R$ ",w.toFixed(2)]})]})]}),i==="processing"&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(jg,{className:"w-12 h-12 animate-spin text-warning mb-4"}),s.jsx("p",{className:"text-lg font-semibold",children:"Processando venda..."}),s.jsx("p",{className:"text-sm text-text-muted",children:"Criando comanda e atualizando estoque"})]}),i==="done"&&s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"bg-surface-2 rounded-lg p-6 border border-border text-center",children:m.success?s.jsxs(s.Fragment,{children:[s.jsx(Ds,{className:"w-16 h-16 text-success mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Venda Importada com Sucesso!"}),s.jsx("p",{className:"text-sm text-text-muted mb-4",children:"A venda foi registrada no histrico"}),m.produtosNaoEncontrados&&m.produtosNaoEncontrados.length>0&&s.jsxs("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-3 text-left",children:[s.jsx("p",{className:"text-sm font-semibold mb-2",children:" Produtos no encontrados:"}),s.jsx("ul",{className:"text-xs text-text-muted space-y-1",children:m.produtosNaoEncontrados.map((S,j)=>s.jsxs("li",{children:[" ",S]},j))})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(wd,{className:"w-16 h-16 text-danger mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Erro na Importao"}),s.jsx("p",{className:"text-sm text-text-muted",children:m.error||"Ocorreu um erro ao importar a venda"})]})})})]}),s.jsxs(mn,{children:[i==="upload"&&s.jsx(Ee,{variant:"outline",onClick:x,children:"Cancelar"}),i==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(Ee,{variant:"outline",onClick:b,children:"Voltar"}),s.jsx(Ee,{onClick:y,children:"Confirmar Importao"})]}),i==="done"&&s.jsx(Ee,{onClick:x,children:"Fechar"})]})]})})}const Dnt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Zy={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function Mnt(e,t=300){const[r,n]=v.useState(e);return v.useEffect(()=>{const a=setTimeout(()=>n(e),t);return()=>clearTimeout(a)},[e,t]),r}function Hw({value:e,onChange:t}){const[r,n]=v.useState(!1),a=v.useRef(null),i=v.useRef(null),o=v.useRef(null),[l,c]=v.useState({top:0,left:0,width:0,center:!1,mode:"fixed"});v.useEffect(()=>{function p(b){const w=b.target,S=a.current&&a.current.contains(w),j=o.current&&o.current.contains(w);!S&&!j&&n(!1)}function y(b){b.key==="Escape"&&n(!1)}function x(){r&&u()}return window.addEventListener("mousedown",p),window.addEventListener("keydown",y),window.addEventListener("scroll",x,!0),window.addEventListener("resize",x),()=>{window.removeEventListener("mousedown",p),window.removeEventListener("keydown",y),window.removeEventListener("scroll",x,!0),window.removeEventListener("resize",x)}},[r]),v.useEffect(()=>{if(r){const p=requestAnimationFrame(()=>{u();const y=requestAnimationFrame(()=>u());return()=>cancelAnimationFrame(y)});return()=>cancelAnimationFrame(p)}},[r]),v.useEffect(()=>{if(r&&l.mode==="overlay"){const p=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=p}}},[r,l.mode]);const u=()=>{try{const p=i.current;if(!p)return;const y=p.getBoundingClientRect(),x=window.innerWidth,b=window.innerHeight,w=8,S=Math.max(y.width,280),j=Math.min(x-w*2,360),A=Math.min(S,j);let P=320;if(o.current)try{P=o.current.getBoundingClientRect().height||P}catch{}if(x<=640){c({top:0,left:0,width:Math.min(x-w*2,360),center:!0,mode:"overlay"});return}const C=a.current,E=C?C.getBoundingClientRect():y,R=y.bottom-E.top+6,k=Math.max(y.width,280);c({top:R,left:0,width:k,center:!1,mode:"anchor"})}catch{}},d=p=>{try{const[y,x,b]=String(p||"").split("-").map(Number);return!y||!x||!b?null:new Date(y,x-1,b)}catch{return null}},f=p=>{const y=x=>String(x).padStart(2,"0");return`${p.getFullYear()}-${y(p.getMonth()+1)}-${y(p.getDate())}`},h=p=>{const y=x=>String(x).padStart(2,"0");return`${y(p.getDate())}/${y(p.getMonth()+1)}/${p.getFullYear()}`},m=d(e),g=m?h(m):"";return s.jsxs("div",{className:"relative",ref:a,children:[s.jsx("button",{type:"button",className:"absolute left-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-warning/10 focus:outline-none",onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(p=>!p),setTimeout(u,0)},"aria-label":"Abrir calendrio",children:s.jsx(lce,{className:"h-4 w-4 text-warning"})}),typeof window<"u"&&window.innerWidth<=640?s.jsx("button",{type:"button",ref:i,onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(!0),setTimeout(u,0)},className:"pl-9 pr-3 h-10 w-full text-left bg-surface text-text-primary border border-warning/40 rounded-md",children:g||"Selecionar data"}):s.jsx($t,{type:"text",readOnly:!0,ref:i,inputMode:"none",onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(p=>!p),setTimeout(u,0)},className:"pl-9 pr-3 w-full bg-surface text-text-primary border border-warning/40 focus-visible:ring-warning focus-visible:border-warning",value:g}),r&&(l.mode==="overlay"?s.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:p=>{p.target===p.currentTarget&&n(!1)},children:s.jsx("div",{ref:o,className:"bg-black text-white border border-warning/40 rounded-md shadow-xl p-2 w-[92vw] max-w-[360px]",children:s.jsx(ju,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})})}):l.mode==="anchor"?s.jsx("div",{ref:o,className:"absolute z-[999] bg-black text-white border border-warning/40 rounded-md shadow-xl p-2 left-0",style:{top:`${l.top}px`,minWidth:`${l.width}px`,maxWidth:"92vw"},children:s.jsx(ju,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})}):s.jsx("div",{ref:o,className:"fixed z-[999] bg-black text-white border border-warning/40 rounded-md shadow-xl p-2",style:{top:`${l.top}px`,left:`${l.left}px`,width:`${l.width}px`,maxWidth:"92vw"},children:s.jsx(ju,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})}))]})}function Rnt(){const{toast:e}=Za(),t=Wc(),{userProfile:r}=po(),[n,a]=v.useState(!1),[i,o]=v.useState([]),[l,c]=v.useState(()=>new Date().toISOString().slice(0,10)),[u,d]=v.useState(()=>new Date().toISOString().slice(0,10)),[f,h]=v.useState("closed"),[m,g]=v.useState(""),p=Mnt(m,350),[y,x]=v.useState("all"),[b,w]=v.useState("comandas"),[S,j]=v.useState(!1),[A,P]=v.useState(null),[C,E]=v.useState({loading:!1,itens:[],pagamentos:[]}),[R,k]=v.useState(null),[T,I]=v.useState({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null},movs:[]}),[M,z]=v.useState(!1),[W,U]=v.useState(!1),[$,G]=v.useState(!1),me=async()=>{try{e({title:"Gerando CSV...",description:"Aguarde enquanto preparamos o arquivo",variant:"default"});const ve=await T7({status:f,from:l||void 0,to:u||void 0,search:p||"",limit:1e4,offset:0});if(!ve||ve.length===0){e({title:"Nenhum dado para exportar",variant:"warning"});return}const ut=ve.map(lt=>lt.id),Te=await RO(ut,r?.codigo_empresa),Ze=await vg(r?.codigo_empresa),Ye=new Map(Ze.map(lt=>[lt.id,lt.numero])),Nt=await E7(ut),nt=await k7(ut),mt=ve.map(lt=>{const Bt=lt.mesa_id?`Mesa ${Ye.get(lt.mesa_id)||"?"}`:"Balco",Tt=(Nt[lt.id]||[]).join(", ")||"Sem cliente",er=nt[lt.id],tt=Array.isArray(er)?er.join(", "):er||"No informado",ur=lt.fechado_em?"Fechada":"Aberta";return{Tipo:lt.tipo==="balcao"?"Balco":"Mesa","Mesa/Local":Bt,"Cliente(s)":Tt,Status:ur,Abertura:new Date(lt.aberto_em).toLocaleString("pt-BR"),Fechamento:lt.fechado_em?new Date(lt.fechado_em).toLocaleString("pt-BR"):"-","Total (R$)":Number(Te[lt.id]||0).toFixed(2),"Forma(s) Pagamento":tt,Observaes:lt.observacao||"-"}}),At=Object.keys(mt[0]),Pe=[At.join(";"),...mt.map(lt=>At.map(Bt=>{const Tt=lt[Bt]||"";return`"${String(Tt).replace(/"/g,'""')}"`}).join(";"))].join(`
`),Je=new Blob(["\uFEFF"+Pe],{type:"text/csv;charset=utf-8;"}),Dt=document.createElement("a"),qe=URL.createObjectURL(Je);Dt.setAttribute("href",qe),Dt.setAttribute("download",`historico_comandas_${new Date().toISOString().slice(0,10)}.csv`),Dt.style.visibility="hidden",document.body.appendChild(Dt),Dt.click(),document.body.removeChild(Dt),e({title:"CSV exportado!",description:`${mt.length} comandas exportadas`,variant:"success"})}catch(ve){console.error("Erro ao exportar CSV:",ve),e({title:"Erro ao exportar",description:ve.message,variant:"destructive"})}},de=100,[L,B]=v.useState(0),[X,q]=v.useState(!1),Y=v.useRef(!1),Z=v.useRef(0),ge=v.useRef(0),re=v.useRef(!1),Se=()=>{try{const ve=localStorage.getItem("auth:userProfile");return ve&&JSON.parse(ve)?.codigo_empresa||null}catch{return null}},Ie=v.useMemo(()=>`hist:comandas:${Se()||"na"}:${l}:${u}:${f}:${y}:${(p||"").trim()}`,[l,u,f,y,p]),pe=async({append:ve=!1,skipCacheWrite:ut=!1}={})=>{try{a(!0);const Te=Se();if(!Te){a(!1);return}const Ze=setTimeout(()=>a(!1),1e4);if(b==="comandas"){const Ye=!!(p&&p.trim()),mt=await T7({status:f,from:l,to:u,limit:Ye?1e3:de,offset:Ye?0:L}),At=(mt||[]).map(Tt=>Tt.id);let Pe={};if(At.length>0)try{Pe=await RO(At,Te)}catch{Pe={}}let Je=[];try{Je=await vg(Te)}catch{Je=[]}const Dt=new Map((Je||[]).map(Tt=>[Tt.id,Tt.numero]));let qe={},lt={};try{qe=await E7(At)}catch{qe={}}try{lt=await k7(At)}catch{lt={}}const Bt=(mt||[]).map(Tt=>{const er=qe[Tt.id],tt=lt[Tt.id];return{...Tt,statusDerived:Tt.fechado_em?"closed":Tt.status||"open",total:Number(Pe[Tt.id]||0),mesaNumero:Dt.get(Tt.mesa_id),clientesStr:Array.isArray(er)?er.join(", "):er||"",finalizadorasStr:Array.isArray(tt)?tt.join(", "):tt||""}});if(q(Ye?!1:(mt||[]).length===de),o(ve?Tt=>[...Tt,...Bt]:Bt),!ut)try{localStorage.setItem(Ie,JSON.stringify({ts:Date.now(),rows:Bt}))}catch{}}else{const Ye=await Oee({from:l,to:u,limit:100,offset:0,codigoEmpresa:Te});o(Ye||[])}clearTimeout(Ze)}catch(Te){e({title:"Falha ao carregar histrico",description:Te?.message||"Tente novamente",variant:"destructive"})}finally{a(!1),Z.current=Date.now()}};v.useEffect(()=>{if(Y.current=!0,b==="comandas")try{const ve=localStorage.getItem(Ie);if(ve){const ut=JSON.parse(ve);ut&&Array.isArray(ut.rows)&&Date.now()-Number(ut.ts||0)<12e4&&o(ut.rows)}}catch{}return()=>{Y.current=!1}},[Ie,b]),v.useEffect(()=>{b==="comandas"&&(B(0),q(!1)),pe({append:!1})},[f,p,l,u,b]),v.useEffect(()=>{if(!n&&b==="comandas"&&i.length===0){const ve=setTimeout(()=>{Y.current&&pe({append:!1,skipCacheWrite:!1})},1500);return()=>clearTimeout(ve)}},[i.length,n,b]),v.useEffect(()=>{const ve=()=>{document.visibilityState==="visible"&&Date.now()-(Z.current||0)>3e4&&pe({append:!1})},ut=()=>{Date.now()-(Z.current||0)>3e4&&pe({append:!1})};return window.addEventListener("visibilitychange",ve),window.addEventListener("focus",ut),()=>{window.removeEventListener("visibilitychange",ve),window.removeEventListener("focus",ut)}},[Ie,b]);const Ue=async ve=>{P(ve),E({loading:!0,itens:[],pagamentos:[]});const ut=Se();re.current=!0;const Te=++ge.current,Ze=setTimeout(()=>{ge.current===Te&&re.current&&E(Ye=>({...Ye,loading:!1}))},1e4);if(!ut){clearTimeout(Ze),ge.current===Te&&re.current&&E({loading:!1,itens:[],pagamentos:[]});return}try{const Ye=(i||[]).find(Nt=>Nt.id===ve)||null;if(Ye){const Nt=Ye.mesa_id==null?"Balco":Ye.mesaNumero!=null?`Mesa ${Ye.mesaNumero}`:"Comanda";k({mesaLabel:Nt,clientesStr:Ye.clientesStr||"",aberto_em:Ye.aberto_em||null,fechado_em:Ye.fechado_em||null,tipo:Ye.mesa_id==null?"balcao":"comanda"})}else k(null)}catch{k(null)}try{const Ye=async()=>{const[nt,mt]=await Promise.all([Ya({comandaId:ve,codigoEmpresa:ut}),aHe({comandaId:ve,codigoEmpresa:ut})]);let At=[];try{At=await Xo({comandaId:ve,codigoEmpresa:ut})}catch{}const Pe=new Map((At||[]).map(qe=>{const lt=qe?.cliente_id??qe?.clientes?.id??null,Bt=qe?.clientes?.nome??qe?.nome??qe?.nome_livre??"";return lt?[String(lt),Bt]:null}).filter(Boolean)),Je=Array.from(Pe.values()),Dt=(mt||[]).map((qe,lt)=>{let Bt="";return qe?.cliente_id?Bt=Pe.get(String(qe.cliente_id))||"":Je.length>0&&(Bt=Je[lt%Je.length]),{...qe,cliente_nome:Bt,finalizadora_nome:qe?.finalizadoras?.nome||qe?.metodo||""}});return{itens:nt||[],pagamentos:Dt}};let Nt=await Ye();Nt.itens.length===0&&Nt.pagamentos.length===0&&(await new Promise(nt=>setTimeout(nt,700)),Nt=await Ye()),ge.current===Te&&re.current&&E({loading:!1,itens:Nt.itens,pagamentos:Nt.pagamentos})}catch(Ye){ge.current===Te&&re.current&&E({loading:!1,itens:[],pagamentos:[]}),e({title:"Falha ao carregar detalhes",description:Ye?.message||"Tente novamente",variant:"destructive"})}finally{clearTimeout(Ze),ge.current===Te&&re.current&&E(Ye=>({...Ye,loading:!1}))}},_e=v.useMemo(()=>({sum:i.reduce((ut,Te)=>ut+Number(Te.total||0),0)}),[i]),ue=ve=>(ve||"").toString().toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,""),Ft=v.useMemo(()=>{const ve=(p||"").trim(),ut=ue(ve),Ze=i.filter(Ye=>{const Nt=Ye.mesa_id==null;return!(y==="balcao"&&!Nt||y==="comanda"&&Nt)}).filter(Ye=>{const Nt=Ye.fechado_em?"closed":Ye.status||"open";return f==="closed"?Nt==="closed":f==="open"?Nt==="open":f==="awaiting-payment"?Nt==="awaiting-payment":!0});return ut?Ze.filter(Ye=>{const Nt=Ye.mesaNumero!=null?String(Ye.mesaNumero):"",nt=Ye.mesa_id==null?"balcao":`mesa ${Nt}`;return[Nt,nt,Ye.clientesStr||"",Ye.finalizadorasStr||"",Ye.mesa_id==null?"balcao":"comanda",Ye.statusDerived||Ye.status||""].map(ue).join(" | ").includes(ut)}):Ze},[i,p,y,f]),qt=ve=>ve==="open"?"Aberta":ve==="awaiting-payment"?"Pagamento":ve==="closed"?"Fechada":ve||"",zt=ve=>{if(!ve)return"";try{return new Date(ve).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}},it=ve=>{const ut=String(ve||"").toLowerCase();return ut==="open"?"Aberto":ut==="closed"?"Fechado":""},ft=ve=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(ve||0)),dt=ve=>ve==="open"?"text-info bg-info/10 border-info/30":ve==="awaiting-payment"?"text-warning bg-warning/10 border-warning/30":ve==="closed"?"text-success bg-success/10 border-success/30":"text-text-secondary bg-transparent border-border/50";return s.jsxs(lr.div,{variants:Dnt,initial:"hidden",animate:"visible",className:"min-h-screen flex flex-col",children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Histrico - Fluxo7 Arena"}),s.jsx("meta",{name:"description",content:"Histrico de vendas, comandas e fechamentos de caixa."})]}),s.jsxs(lr.div,{variants:Zy,className:"mb-6 gap-3 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsx(Ad,{value:"historico",onValueChange:ve=>{ve==="mesas"&&t("/vendas"),ve==="balcao"&&t("/balcao"),ve==="historico"&&t("/historico")},children:s.jsxs(Nu,{className:"w-full grid grid-cols-3 sm:w-auto sm:inline-flex",children:[s.jsx(Jn,{value:"mesas",children:"Mesas"}),s.jsx(Jn,{value:"balcao",children:"Balco"}),s.jsx(Jn,{value:"historico",children:"Histrico"})]})}),s.jsxs("div",{className:"w-full flex items-center gap-2 sm:gap-3",children:[s.jsxs("div",{className:"flex sm:hidden items-center gap-2 w-full",children:[s.jsxs(yn,{value:b,onValueChange:w,children:[s.jsx(pn,{className:"w-[160px] text-sm",children:s.jsx(xn,{placeholder:"Selecionar"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"comandas",children:"Comandas"}),s.jsx(Wt,{value:"fechamentos",children:"Fechamentos"})]})]}),s.jsxs("div",{className:"ml-auto text-xs text-text-secondary whitespace-nowrap",children:["Total: ",s.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",_e.sum.toFixed(2)]})]}),b==="comandas"&&s.jsx(Ee,{type:"button",size:"icon",variant:"outline",className:"h-9 w-9 sm:hidden",onClick:()=>U(!0),title:"Aes",children:s.jsx(cl,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 ml-auto",children:s.jsx(Ad,{value:b,onValueChange:w,className:"w-full sm:w-auto",children:s.jsxs(Nu,{className:"w-full grid grid-cols-2 sm:w-auto sm:inline-flex text-sm",children:[s.jsx(Jn,{value:"comandas",className:"text-sm",children:"Comandas"}),s.jsx(Jn,{value:"fechamentos",className:"text-sm",children:"Fechamentos"})]})})})]}),s.jsx("div",{className:"hidden sm:flex w-full sm:w-auto items-center gap-2 sm:gap-3",children:b==="comandas"&&s.jsxs(s.Fragment,{children:[s.jsxs(Ee,{variant:"secondary",size:"sm",className:"hidden sm:inline-flex",onClick:()=>z(!0),children:[s.jsx(Kl,{className:"mr-2 h-4 w-4"}),"Importar XML"]}),s.jsxs(Ee,{variant:"outline",size:"sm",className:"hidden sm:inline-flex",onClick:me,children:[s.jsx(cl,{className:"mr-1 h-3 w-3"}),"Exportar"]}),s.jsx("button",{className:"hidden sm:inline-block text-xs text-text-muted hover:text-text-primary transition-colors",onClick:()=>{if($){const ve=new Date().toISOString().slice(0,10);c(ve),d(ve),G(!1)}else c(""),d(""),G(!0);B(0)},title:$?"Voltar ao filtro de hoje":"Mostrar todas as comandas",children:$?"":""}),s.jsxs("div",{className:"text-sm text-text-secondary whitespace-nowrap ml-auto",children:["Total: ",s.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",_e.sum.toFixed(2)]})]})]})})]}),s.jsx(qr,{open:W,onOpenChange:U,children:s.jsxs(Lr,{className:"sm:hidden w-[92vw] max-w-[360px] p-2",onOpenAutoFocus:ve=>ve.preventDefault(),onKeyDown:ve=>ve.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{className:"text-base",children:"Aes"}),s.jsx(Jr,{children:"Escolha uma ao para Comandas"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs(Ee,{variant:"secondary",onClick:()=>{U(!1),z(!0)},children:[s.jsx(Kl,{className:"mr-2 h-4 w-4"})," Importar XML"]}),s.jsxs(Ee,{variant:"outline",onClick:()=>{U(!1),me()},children:[s.jsx(cl,{className:"mr-2 h-4 w-4"})," Exportar CSV"]})]})]})}),b==="comandas"&&s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("div",{className:"text-xs text-text-secondary",children:["Carregadas ",i.length," ",i.length===1?"comanda":"comandas"]}),X&&s.jsx(Ee,{size:"sm",variant:"outline",disabled:n,onClick:async()=>{const ve=L+de;B(ve),await pe({append:!0})},children:"Carregar mais"})]}),b==="comandas"&&s.jsxs("div",{className:"sm:hidden bg-surface rounded-lg border border-border p-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Buscar...",className:"pl-9 h-9 text-sm",value:m,onChange:ve=>g(ve.target.value)})]}),s.jsx(Ee,{size:"sm",variant:"outline",className:"h-9",onClick:()=>j(ve=>!ve),children:S?"Ocultar":"Filtros"})]}),s.jsxs("div",{className:"mt-1 text-[11px] text-text-secondary truncate",children:[l||"","  ",u||""]})]}),b==="comandas"&&s.jsx(lr.div,{variants:Zy,className:`bg-surface rounded-lg border border-border p-4 mb-4 ${S?"":"hidden"} sm:block`,children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Perodo Inicial"}),s.jsx(Hw,{value:l,onChange:c})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Perodo Final"}),s.jsx(Hw,{value:u,onChange:d})]}),s.jsxs("div",{className:"md:col-span-2 hidden sm:block",children:[s.jsx(gt,{className:"mb-1 block",children:"Busca"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx($t,{placeholder:"Mesa, status (fechada/aberta) ou cliente",className:"pl-9",value:m,onChange:ve=>g(ve.target.value)})]})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Status"}),s.jsxs(yn,{value:f,onValueChange:h,children:[s.jsx(pn,{className:"w-full text-xs",children:s.jsx(xn,{placeholder:"Selecionar status"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"closed",children:"Fechadas"}),s.jsx(Wt,{value:"open",children:"Abertas"}),s.jsx(Wt,{value:"awaiting-payment",children:"Pagamento"})]})]})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Tipo"}),s.jsxs(yn,{value:y,onValueChange:x,children:[s.jsx(pn,{className:"w-full text-xs",children:s.jsx(xn,{placeholder:"Selecionar tipo"})}),s.jsxs(gn,{children:[s.jsx(Wt,{value:"all",children:"Todos"}),s.jsx(Wt,{value:"comanda",children:"Comandas"}),s.jsx(Wt,{value:"balcao",children:"Balco"})]})]})]})]})}),b==="comandas"&&s.jsxs(lr.div,{variants:Zy,className:"bg-surface rounded-lg border border-border p-0 overflow-hidden",children:[s.jsx("div",{className:"hidden sm:block overflow-x-auto pr-2 sm:pr-3",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Mesa"}),s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Tipo"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Clientes"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Finalizadora"}),s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Abertura"}),s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Fechamento"}),s.jsx("th",{className:"text-right px-4 py-3",children:"Total"})]})}),s.jsxs("tbody",{children:[Ft.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-text-muted",children:"Nenhuma comanda encontrada no perodo."})}),Ft.map(ve=>s.jsxs("tr",{className:"border-t border-border/70 hover:bg-warning/10 cursor-pointer transition-all duration-150 hover:translate-x-[1px]",onClick:()=>Ue(ve.id),children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:ve.mesa_id==null?"Balco":ve.mesaNumero!=null?`Mesa ${ve.mesaNumero}`:""}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:ve.mesa_id==null?"Balco":"Comanda"}),s.jsx("td",{className:"px-4 py-2 break-words",title:ve.clientesStr||"",children:ve.clientesStr||""}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:Ot("inline-flex items-center text-[11px] font-medium px-2 py-0.5 rounded-full border",dt(ve.statusDerived||ve.status)),children:qt(ve.statusDerived||ve.status)})}),s.jsx("td",{className:"px-4 py-2 break-words",title:ve.finalizadorasStr||"",children:ve.finalizadorasStr||""}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:zt(ve.aberto_em)}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:zt(ve.fechado_em)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold whitespace-nowrap",children:ft(ve.total)})]},ve.id))]})]})}),s.jsxs("div",{className:"sm:hidden divide-y divide-border",children:[Ft.length===0&&s.jsx("div",{className:"p-4 text-center text-text-muted",children:"Nenhuma comanda encontrada no perodo."}),Ft.map(ve=>s.jsxs("button",{className:"w-full text-left p-3 active:bg-warning/10",onClick:()=>Ue(ve.id),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:ve.mesa_id==null?"Balco":ve.mesaNumero!=null?`Mesa ${ve.mesaNumero}`:"Comanda"}),s.jsx("div",{className:"font-semibold truncate max-w-[220px]",children:ve.clientesStr||"Sem cliente"})]}),s.jsx("div",{children:s.jsx("div",{className:Ot("inline-flex items-center text-[10px] font-medium px-2 py-0.5 rounded-full border",dt(ve.statusDerived||ve.status)),children:qt(ve.statusDerived||ve.status)})})]}),s.jsx("div",{className:"mt-1 text-xs text-text-secondary truncate",children:ve.finalizadorasStr||""}),s.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0 text-[11px] text-text-muted truncate pr-2",children:[zt(ve.aberto_em),ve.fechado_em?`  ${zt(ve.fechado_em)}`:""]}),s.jsx("div",{className:"flex-shrink-0 font-mono font-semibold whitespace-nowrap text-right min-w-[84px]",children:ft(ve.total)})]})]},ve.id))]})]}),b==="fechamentos"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:hidden bg-surface rounded-lg border border-border p-3 mb-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Filtros"}),s.jsx(Ee,{size:"sm",variant:"outline",onClick:()=>j(ve=>!ve),children:S?"Ocultar filtros":"Mostrar filtros"})]})}),s.jsx(lr.div,{variants:Zy,className:`bg-surface rounded-lg border border-border p-4 mb-4 ${S?"":"hidden"} sm:block`,children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Perodo Inicial"}),s.jsx(Hw,{value:l,onChange:c})]}),s.jsxs("div",{children:[s.jsx(gt,{className:"mb-1 block",children:"Perodo Final"}),s.jsx(Hw,{value:u,onChange:d})]})]})}),s.jsx(lr.div,{variants:Zy,className:"bg-surface rounded-lg border border-border p-4 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto max-h-[60vh] overflow-y-auto pr-2 sm:pr-3",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3",children:"Abertura"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Fechamento"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),s.jsx("th",{className:"text-right px-4 py-3",children:"Saldo Inicial"}),s.jsx("th",{className:"text-right px-4 py-3",children:"Saldo Final"})]})}),s.jsxs("tbody",{children:[n&&(!i||i.length===0)&&s.jsx("tr",{children:s.jsxs("td",{colSpan:5,className:"px-4 py-6 text-center text-text-muted",children:[s.jsx(jg,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando fechamentos"]})}),(!i||i.length===0)&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-text-muted",children:"Nenhum fechamento encontrado no perodo."})}),(i||[]).map(ve=>s.jsxs("tr",{className:"border-t border-border/70 hover:bg-success/10 cursor-pointer transition-all duration-150 hover:translate-x-[1px]",onClick:async()=>{try{I({open:!0,loading:!0,resumo:null,periodo:{from:ve.aberto_em,to:ve.fechado_em},movs:[]});const ut=async()=>{const[Ye,Nt]=await Promise.all([LO({caixaSessaoId:ve.id}).catch(()=>null),Rg({caixaSessaoId:ve.id}).catch(()=>[])]);return{snap:Ye,movs:Nt}};let{snap:Te,movs:Ze}=await ut();if(Te||(await new Promise(Ye=>setTimeout(Ye,700)),{snap:Te,movs:Ze}=await ut()),Te){const Ye={totalVendasBrutas:Number(Te.total_bruto||0),totalDescontos:Number(Te.total_descontos||0),totalVendasLiquidas:Number(Te.total_liquido||0),totalEntradas:Number(Te.total_entradas||0),totalPorFinalizadora:Te.por_finalizadora||{}};I({open:!0,loading:!1,resumo:Ye,periodo:{from:Te.periodo_de||ve.aberto_em,to:Te.periodo_ate||ve.fechado_em},movs:Ze||[]})}else{const Ye=await Om({from:ve.aberto_em,to:ve.fechado_em||new Date().toISOString()});I({open:!0,loading:!1,resumo:Ye||null,periodo:{from:ve.aberto_em,to:ve.fechado_em},movs:Ze||[]})}}catch{I({open:!0,loading:!1,resumo:null,periodo:{from:ve.aberto_em,to:ve.fechado_em},movs:[]})}},children:[s.jsx("td",{className:"px-4 py-2",children:zt(ve.aberto_em)}),s.jsx("td",{className:"px-4 py-2",children:zt(ve.fechado_em)}),s.jsx("td",{className:"px-4 py-2",children:it(ve.status)}),s.jsx("td",{className:"px-4 py-2 text-right",children:ve?.saldo_inicial!=null?ft(ve.saldo_inicial):""}),s.jsx("td",{className:"px-4 py-2 text-right",children:ve?.saldo_final!=null?ft(ve.saldo_final):""})]},ve.id))]})]})})})]}),b==="comandas"&&s.jsx(qr,{open:!!A,onOpenChange:ve=>{ve?re.current=!0:(re.current=!1,P(null),E({loading:!1,itens:[],pagamentos:[]}),k(null))},children:s.jsxs(Lr,{className:"sm:max-w-4xl w-[92vw] max-h-[90vh] overflow-hidden flex flex-col animate-none",onKeyDown:ve=>ve.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsxs($r,{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{children:R?s.jsxs("span",{children:[R.mesaLabel,R.clientesStr?s.jsxs("span",{className:"text-text-secondary",children:["  ",R.clientesStr]}):null]}):s.jsxs(s.Fragment,{children:["Comanda #",A||""]})}),R&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:Ot("text-xs px-2 py-0.5 rounded-full border",dt(R.status)),children:R.status==="closed"?"Fechada":R.status==="open"?"Aberta":"Cancelada"}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full border bg-info/10 text-info border-info/30",children:R.tipo==="balcao"?"Balco":R.tipo==="comanda"?"Mesa":"Importada"})]})]}),s.jsx(Jr,{className:"space-y-1",children:R?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[R.aberto_em?s.jsxs(s.Fragment,{children:["Abertura: ",zt(R.aberto_em)]}):"",R.fechado_em&&s.jsxs(s.Fragment,{children:[" ",""," ","Fechamento: ",zt(R.fechado_em),(()=>{const ve=new Date(R.aberto_em),Te=new Date(R.fechado_em)-ve,Ze=Math.floor(Te/6e4),Ye=Math.floor(Ze/60),Nt=Ze%60;return Ze>0?s.jsxs("span",{className:"text-text-muted",children:[" (",Ye>0?`${Ye}h `:"",Nt,"min)"]}):null})()]})]}),R.observacao&&s.jsx("div",{className:"text-xs text-text-muted",children:R.observacao.includes("Importado de XML")?s.jsxs("span",{className:"text-warning",children:[" ",R.observacao.split(`
`)[0]]}):s.jsxs("span",{children:["Obs: ",R.observacao]})})]}):s.jsx(s.Fragment,{children:"Itens e pagamentos registrados."})})]}),C.loading?s.jsxs("div",{className:"p-6 text-center text-text-muted",children:[s.jsx(jg,{className:"mr-2 inline h-4 w-4 animate-spin"})," Carregando..."]}):s.jsxs("div",{className:"space-y-4 overflow-y-auto flex-1 px-1",children:[(()=>{const ve=C.itens.reduce((Nt,nt)=>Nt+Number(nt.quantidade||0)*Number(nt.preco_unitario||0),0),ut=C.itens.reduce((Nt,nt)=>Nt+Number(nt.desconto||0),0),Te=ve-ut,Ze=C.pagamentos.reduce((Nt,nt)=>Nt+Number(nt.valor||0),0),Ye=Ze-Te;return s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Resumo Financeiro"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Subtotal dos itens:"}),s.jsxs("span",{className:"font-mono",children:["R$ ",ve.toFixed(2)]})]}),ut>0&&s.jsxs("div",{className:"flex justify-between text-warning",children:[s.jsx("span",{children:"Descontos:"}),s.jsxs("span",{className:"font-mono",children:["- R$ ",ut.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t border-border",children:[s.jsx("span",{children:"Total da comanda:"}),s.jsxs("span",{className:"font-mono text-lg",children:["R$ ",Te.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-success",children:[s.jsx("span",{children:"Total pago:"}),s.jsxs("span",{className:"font-mono",children:["R$ ",Ze.toFixed(2)]})]}),Math.abs(Ye)>.01&&s.jsxs("div",{className:Ot("flex justify-between",Ye>0?"text-warning":"text-danger"),children:[s.jsx("span",{children:Ye>0?"Troco/Excedente:":"Faltando:"}),s.jsxs("span",{className:"font-mono",children:["R$ ",Math.abs(Ye).toFixed(2)]})]})]})]})})(),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border rounded-md p-3",children:[s.jsxs("div",{className:"font-semibold mb-2",children:["Itens (",C.itens.length,")"]}),C.itens.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem itens."}):s.jsx("ul",{className:"text-sm space-y-2 max-h-64 overflow-auto thin-scroll",children:C.itens.map(ve=>{const ut=Number(ve.quantidade||0)*Number(ve.preco_unitario||0),Te=Number(ve.desconto||0),Ze=ut-Te;return s.jsx("li",{className:"border-b border-border/50 pb-2 last:border-0",children:s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("span",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:ve.descricao}),s.jsxs("div",{className:"text-xs text-text-muted",children:[ve.quantidade," x R$ ",Number(ve.preco_unitario||0).toFixed(2),Te>0&&s.jsxs("span",{className:"text-warning",children:[" (desc: R$ ",Te.toFixed(2),")"]})]})]}),s.jsxs("span",{className:"font-mono font-semibold whitespace-nowrap",children:["R$ ",Ze.toFixed(2)]})]})},ve.id)})})]}),s.jsxs("div",{className:"border rounded-md p-3",children:[s.jsxs("div",{className:"font-semibold mb-2",children:["Pagamentos (",C.pagamentos.length,")"]}),C.pagamentos.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros."}):s.jsx("ul",{className:"text-sm space-y-2 max-h-64 overflow-auto thin-scroll",children:C.pagamentos.map(ve=>s.jsxs("li",{className:"flex justify-between gap-2 border-b border-border/50 pb-2 last:border-0",children:[s.jsxs("span",{className:"pr-2 break-words flex-1",children:[ve.cliente_nome?s.jsx("div",{className:"font-medium",children:ve.cliente_nome}):s.jsx("div",{className:"text-text-muted",children:"Sem cliente"}),s.jsx("div",{className:"text-xs text-text-secondary",children:ve.finalizadora_nome||"Outros"})]}),s.jsxs("span",{className:"font-mono font-semibold whitespace-nowrap",children:["R$ ",Number(ve.valor||0).toFixed(2)]})]},ve.id))})]})]})]}),s.jsx(mn,{children:s.jsx(Ee,{size:"sm",variant:"secondary",onClick:()=>{P(null)},children:"Fechar"})})]})}),b==="fechamentos"&&s.jsx(qr,{open:T.open,onOpenChange:ve=>{ve||I({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null}})},children:s.jsxs(Lr,{className:"max-w-2xl",onKeyDown:ve=>ve.stopPropagation(),children:[s.jsxs(Ur,{children:[s.jsx($r,{children:"Fechamento do Perodo"}),s.jsxs(Jr,{children:[T.periodo.from?zt(T.periodo.from):""," ","at"," ",T.periodo.to?zt(T.periodo.to):""]})]}),T.loading?s.jsxs("div",{className:"p-4 text-text-muted",children:[s.jsx(jg,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando resumo"]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Vendas Brutas (itens)"}),s.jsx("p",{className:"text-xl font-bold",children:ft(T.resumo?.totalVendasBrutas||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Descontos"}),s.jsx("p",{className:"text-xl font-bold",children:ft(T.resumo?.totalDescontos||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Entradas (pagamentos)"}),s.jsx("p",{className:"text-xl font-bold",children:ft(T.resumo?.totalEntradas||0)})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-1",children:"Por Finalizadora"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:T.resumo?.totalPorFinalizadora&&Object.keys(T.resumo.totalPorFinalizadora).length>0?Object.entries(T.resumo.totalPorFinalizadora).map(([ve,ut])=>s.jsxs("div",{className:"flex items-center justify-between bg-surface-2 rounded-md p-2 border border-border",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:String(ve)}),s.jsx("span",{className:"text-sm font-semibold",children:ft(ut)})]},ve)):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos registrados no perodo."})})]}),s.jsx("div",{className:"text-xs text-text-muted",children:"Observao: Sangrias, suprimentos e troco ainda no foram implementados."})]}),s.jsx(mn,{children:s.jsx(Ee,{size:"sm",variant:"secondary",onClick:()=>I({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null}}),children:"Fechar"})})]})}),s.jsx(Int,{open:M,onOpenChange:z,codigoEmpresa:r?.codigo_empresa,onSuccess:async ve=>{z(!1),ve&&(c(ve),d(ve)),await new Promise(ut=>setTimeout(ut,500)),B(0),await pe({append:!1})}})]})}const Lnt="18810778",Vp={hidden:{opacity:0,x:20},visible:{opacity:1,x:0,transition:{duration:.3}},exit:{opacity:0,x:-20,transition:{duration:.2}}};function $nt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,18)}function Fnt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").substring(0,15)}async function Bnt(){try{const{data:e,error:t}=await Oe.from("empresas").select("codigo_empresa").order("codigo_empresa",{ascending:!1}).limit(100);if(t)return console.warn("Erro ao buscar cdigos:",t),"1";let r=0;return e&&e.length>0&&e.forEach(n=>{const a=parseInt(n.codigo_empresa);!isNaN(a)&&a>r&&(r=a)}),(r+1).toString()}catch(e){return console.warn("Erro ao gerar cdigo:",e),"1"}}function znt(){const{toast:e}=Za(),t=Wc(),[r,n]=v.useState(1),[a,i]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState(""),[d,f]=v.useState({email:"",nomeUsuario:"",cargo:"",razaoSocial:"",nomeFantasia:"",cnpj:"",emailEmpresa:"",telefone:"",endereco:"",quadras:[],mesas:[],categorias:[]}),[h,m]=v.useState(null),g=U=>{U.preventDefault(),c===Lnt?(l(!0),n(2),e({title:"Acesso liberado",description:"Bem-vindo ao formulrio de criao de empresa."})):(e({title:"Senha incorreta",description:"Tente novamente.",variant:"destructive"}),u(""))},p=()=>!0,y=()=>d.razaoSocial.trim()?d.nomeFantasia.trim()?!0:(e({title:"Nome Fantasia obrigatrio",variant:"destructive"}),!1):(e({title:"Razo Social obrigatria",variant:"destructive"}),!1),x=()=>{r===2&&!p()||r===3&&!y()||n(r+1)},b=()=>{n(r-1)},w=()=>{const U=d.quadras.length+1;f({...d,quadras:[...d.quadras,{nome:`Quadra ${U}`}]})},S=U=>{f({...d,quadras:d.quadras.filter(($,G)=>G!==U)})},j=()=>{const U=d.mesas.length+1;f({...d,mesas:[...d.mesas,{numero:U,nome:`Mesa ${U}`}]})},A=U=>{f({...d,mesas:d.mesas.filter(($,G)=>G!==U)})},P=()=>{const U=prompt("Digite o nome da categoria:");U&&U.trim()&&f({...d,categorias:[...d.categorias,{nome:U.trim(),descricao:""}]})},C=U=>{f({...d,categorias:d.categorias.filter(($,G)=>G!==U)})},E=async()=>{try{i(!0);let U=null;d.email.trim()&&(console.log("Email fornecido:",d.email),console.log("Nota: O vnculo com o usurio ser criado no primeiro login"),U=null);const $=await Bnt();console.log("Cdigo da empresa gerado:",$);const{data:G,error:me}=await Oe.from("empresas").insert({codigo_empresa:$,nome:d.nomeFantasia,razao_social:d.razaoSocial,nome_fantasia:d.nomeFantasia,cnpj:d.cnpj?d.cnpj.replace(/\D/g,""):null,email:d.emailEmpresa||null,telefone:d.telefone||null,endereco:d.endereco||null}).select().single();if(me)throw new Error("Erro ao criar empresa: "+me.message);const{error:de}=await Oe.from("empresa_counters").insert({empresa_id:G.id,next_cliente_codigo:1,next_agendamento_codigo:1});if(de&&console.warn("Erro ao criar contador:",de),d.email.trim()||d.nomeUsuario.trim())try{const L="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){const Y=Math.random()*16|0;return(q==="x"?Y:Y&3|8).toString(16)}),{error:B}=await Oe.from("usuarios").insert({id:L,email:d.email||null,nome:d.nomeUsuario||null,papel:d.cargo||"admin",codigo_empresa:$});B&&console.warn("Aviso ao criar usurio:",B.message);const{error:X}=await Oe.from("colaboradores").insert({id:L,nome:d.nomeUsuario||"Administrador",cargo:d.cargo||"admin",ativo:!0,codigo_empresa:$});X&&console.warn("Aviso ao criar colaborador:",X.message),d.email&&(console.log(" APS O PRIMEIRO LOGIN, execute este SQL no Supabase:"),console.log(`
-- Atualizar ID do colaborador com o ID real do auth.users
UPDATE public.colaboradores 
SET id = (SELECT id FROM auth.users WHERE email = '${d.email}')
WHERE codigo_empresa = '${$}' AND id = '${L}';

-- Atualizar ID do usurio
UPDATE public.usuarios 
SET id = (SELECT id FROM auth.users WHERE email = '${d.email}')
WHERE codigo_empresa = '${$}' AND id = '${L}';
            `))}catch(L){console.warn("Erro ao criar registros de usurio:",L)}if(await Oe.from("agenda_settings").insert({empresa_id:G.id,auto_confirm_enabled:!1,auto_start_enabled:!0,auto_finish_enabled:!0}),d.quadras.length>0){const L=d.quadras.map(B=>({nome:B.nome,codigo_empresa:$}));await Oe.from("quadras").insert(L)}if(d.mesas.length>0){const L=d.mesas.map(B=>({numero:B.numero,nome:B.nome,codigo_empresa:$,status:"available"}));await Oe.from("mesas").insert(L)}if(d.categorias.length>0){const L=d.categorias.map(B=>({nome:B.nome,descricao:B.descricao||null,codigo_empresa:$,ativa:!0}));await Oe.from("produto_categorias").insert(L)}m({success:!0,codigoEmpresa:$,email:d.email,nomeEmpresa:d.nomeFantasia,numQuadras:d.quadras.length,numMesas:d.mesas.length,numCategorias:d.categorias.length}),n(6),e({title:" Empresa criada com sucesso!",description:`Cdigo: ${$}`})}catch(U){console.error("Erro ao criar empresa:",U),e({title:"Erro ao criar empresa",description:U.message,variant:"destructive"})}finally{i(!1)}},R=()=>{if(r===1||r===6)return null;const U=(r-1)/4*100;return s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-sm text-text-muted",children:["Etapa ",r-1," de 4"]}),s.jsxs("span",{className:"text-sm text-text-muted",children:[Math.round(U),"%"]})]}),s.jsx("div",{className:"h-2 bg-surface-2 rounded-full overflow-hidden",children:s.jsx(lr.div,{className:"h-full bg-brand",initial:{width:0},animate:{width:`${U}%`},transition:{duration:.3}})})]})},k=()=>s.jsxs(lr.div,{variants:Vp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(zm,{className:"w-8 h-8 text-brand"})}),s.jsx("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"rea Restrita"}),s.jsx("p",{className:"text-text-muted",children:"Digite a senha para acessar"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"senha",children:"Senha de Acesso"}),s.jsx($t,{id:"senha",type:"password",value:c,onChange:U=>u(U.target.value),placeholder:"Digite a senha",className:"text-center text-lg tracking-widest",autoFocus:!0})]}),s.jsxs(Ee,{type:"submit",className:"w-full",children:["Acessar",s.jsx(tw,{className:"ml-2 h-4 w-4"})]})]})]},"step1"),T=()=>s.jsxs(lr.div,{variants:Vp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(mE,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Primeiro Usurio"}),s.jsx("p",{className:"text-text-muted",children:"Informaes do administrador da empresa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"email",children:"Email cadastrado no Supabase Auth"}),s.jsx($t,{id:"email",type:"email",value:d.email,onChange:U=>f({...d,email:U.target.value}),placeholder:"usuario@email.com"}),s.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Este email j deve estar cadastrado no Supabase Auth"})]}),s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"nomeUsuario",children:"Nome Completo"}),s.jsx($t,{id:"nomeUsuario",type:"text",value:d.nomeUsuario,onChange:U=>f({...d,nomeUsuario:U.target.value}),placeholder:"Joo Silva"})]}),s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"cargo",children:"Cargo na Empresa"}),s.jsx($t,{id:"cargo",type:"text",value:d.cargo,onChange:U=>f({...d,cargo:U.target.value}),placeholder:"Ex: Proprietrio, Gerente, Administrador, Scio, etc."}),s.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Digite o cargo que voc ocupa na empresa"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(Ee,{type:"button",variant:"outline",onClick:()=>t("/"),className:"flex-1",children:"Cancelar"}),s.jsxs(Ee,{type:"button",onClick:x,className:"flex-1",children:["Prximo",s.jsx(tw,{className:"ml-2 h-4 w-4"})]})]})]})]},"step2"),I=()=>s.jsxs(lr.div,{variants:Vp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(uE,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Dados da Empresa"}),s.jsx("p",{className:"text-text-muted",children:"Informaes cadastrais da empresa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(gt,{htmlFor:"razaoSocial",children:"Razo Social *"}),s.jsx($t,{id:"razaoSocial",type:"text",value:d.razaoSocial,onChange:U=>f({...d,razaoSocial:U.target.value}),placeholder:"Empresa LTDA"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(gt,{htmlFor:"nomeFantasia",children:"Nome Fantasia *"}),s.jsx($t,{id:"nomeFantasia",type:"text",value:d.nomeFantasia,onChange:U=>f({...d,nomeFantasia:U.target.value}),placeholder:"Minha Empresa"}),s.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Como a empresa aparecer no sistema"})]}),s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"cnpj",children:"CNPJ"}),s.jsx($t,{id:"cnpj",type:"text",value:d.cnpj,onChange:U=>f({...d,cnpj:$nt(U.target.value)}),placeholder:"00.000.000/0000-00"})]}),s.jsxs("div",{children:[s.jsx(gt,{htmlFor:"telefone",children:"Telefone"}),s.jsx($t,{id:"telefone",type:"tel",value:d.telefone,onChange:U=>f({...d,telefone:Fnt(U.target.value)}),placeholder:"(11) 99999-9999"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(gt,{htmlFor:"emailEmpresa",children:"Email da Empresa"}),s.jsx($t,{id:"emailEmpresa",type:"email",value:d.emailEmpresa,onChange:U=>f({...d,emailEmpresa:U.target.value}),placeholder:"contato@empresa.com"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(gt,{htmlFor:"endereco",children:"Endereo Completo (opcional)"}),s.jsx($t,{id:"endereco",type:"text",value:d.endereco,onChange:U=>f({...d,endereco:U.target.value}),placeholder:"Rua X, 123, Bairro, Cidade - UF"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(Ee,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:[s.jsx(ZC,{className:"mr-2 h-4 w-4"}),"Voltar"]}),s.jsxs(Ee,{type:"button",onClick:x,className:"flex-1",children:["Prximo",s.jsx(tw,{className:"ml-2 h-4 w-4"})]})]})]})]},"step3"),M=()=>s.jsxs(lr.div,{variants:Vp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(fE,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Configurao Inicial"}),s.jsx("p",{className:"text-text-muted",children:"Adicione dados iniciais ou pule esta etapa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vce,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Quadras Esportivas"})]}),s.jsxs(Ee,{type:"button",onClick:w,size:"sm",className:"gap-2",children:[s.jsx(Xa,{className:"w-4 h-4"}),"Adicionar Quadra"]})]}),d.quadras.length>0?s.jsx("div",{className:"space-y-2",children:d.quadras.map((U,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[s.jsx("span",{className:"text-sm text-text-primary",children:U.nome}),s.jsx(Ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>S($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:s.jsx(_d,{className:"w-4 h-4"})})]},$))}):s.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma quadra adicionada"})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hs,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Mesas da Loja"})]}),s.jsxs(Ee,{type:"button",onClick:j,size:"sm",className:"gap-2",children:[s.jsx(Xa,{className:"w-4 h-4"}),"Adicionar Mesa"]})]}),d.mesas.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:d.mesas.map((U,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[s.jsx("span",{className:"text-sm text-text-primary",children:U.nome}),s.jsx(Ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>A($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:s.jsx(_d,{className:"w-4 h-4"})})]},$))}):s.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma mesa adicionada"})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xg,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Categorias de Produtos"})]}),s.jsxs(Ee,{type:"button",onClick:P,size:"sm",className:"gap-2",children:[s.jsx(Xa,{className:"w-4 h-4"}),"Adicionar Categoria"]})]}),d.categorias.length>0?s.jsx("div",{className:"space-y-2",children:d.categorias.map((U,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[s.jsx("span",{className:"text-sm text-text-primary",children:U.nome}),s.jsx(Ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>C($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:s.jsx(_d,{className:"w-4 h-4"})})]},$))}):s.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma categoria adicionada"})]}),s.jsx("div",{className:"bg-info/10 border border-info/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(wd,{className:"w-5 h-5 text-info mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Configuraes Opcionais"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Voc pode adicionar quadras, mesas e categorias agora ou configurar depois no sistema."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(Ee,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:[s.jsx(ZC,{className:"mr-2 h-4 w-4"}),"Voltar"]}),s.jsxs(Ee,{type:"button",onClick:x,className:"flex-1",children:["Prximo",s.jsx(tw,{className:"ml-2 h-4 w-4"})]})]})]})]},"step4"),z=()=>s.jsxs(lr.div,{variants:Vp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(Ds,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Reviso Final"}),s.jsx("p",{className:"text-text-muted",children:"Confira os dados antes de criar a empresa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(mE,{className:"w-5 h-5"}),"Primeiro Usurio"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Email:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Nome:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.nomeUsuario})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Cargo:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.cargo})]})]})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(uE,{className:"w-5 h-5"}),"Empresa"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Razo Social:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.razaoSocial})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Nome Fantasia:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.nomeFantasia})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"CNPJ:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.cnpj})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Email:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.emailEmpresa})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Telefone:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.telefone})]}),d.endereco&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Endereo:"}),s.jsx("span",{className:"text-text-primary font-medium text-right",children:d.endereco})]})]})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(fE,{className:"w-5 h-5"}),"Configuraes Iniciais"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Quadras:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.quadras.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Mesas:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.mesas.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Categorias de Produtos:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.categorias.length})]})]})]}),s.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(wd,{className:"w-5 h-5 text-warning mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Ateno"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Esta ao criar a empresa no banco de dados. Certifique-se de que todos os dados esto corretos."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(Ee,{type:"button",variant:"outline",onClick:b,className:"flex-1",disabled:a,children:[s.jsx(ZC,{className:"mr-2 h-4 w-4"}),"Voltar"]}),s.jsx(Ee,{type:"button",onClick:E,className:"flex-1 bg-emerald-600 hover:bg-emerald-500",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(jg,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):s.jsx(s.Fragment,{children:" Criar Empresa"})})]})]})]},"step5"),W=()=>s.jsxs(lr.div,{variants:Vp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-success/10 rounded-full mb-6",children:s.jsx(Ds,{className:"w-12 h-12 text-success"})}),s.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:" Empresa Criada!"}),s.jsx("p",{className:"text-text-muted",children:"Tudo pronto para comear a usar o sistema"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-brand/10 border border-brand/30 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-text-muted mb-2",children:"Cdigo da Empresa"}),s.jsx("p",{className:"text-3xl font-bold text-brand font-mono",children:h?.codigoEmpresa})]})}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Dados de Acesso"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Email:"}),s.jsx("span",{className:"text-text-primary font-medium",children:h?.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Senha:"}),s.jsx("span",{className:"text-text-primary font-medium",children:"(a que voc definiu no Supabase)"})]})]})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Dados Criados"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),s.jsx("div",{className:"text-xs text-text-muted",children:"Empresa"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),s.jsx("div",{className:"text-xs text-text-muted",children:"Configuraes"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numQuadras}),s.jsx("div",{className:"text-xs text-text-muted",children:"Quadras"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numMesas}),s.jsx("div",{className:"text-xs text-text-muted",children:"Mesas"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numCategorias}),s.jsx("div",{className:"text-xs text-text-muted",children:"Categorias"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),s.jsx("div",{className:"text-xs text-text-muted",children:"Pronto para Uso"})]})]})]}),s.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(wd,{className:"w-5 h-5 text-warning mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-text-primary mb-2",children:" IMPORTANTE: Execute o SQL Antes de Fazer Login"}),s.jsxs("div",{className:"space-y-2 text-xs text-text-muted",children:[s.jsx("p",{className:"font-semibold text-text-primary",children:"Para vincular seu usurio  empresa, siga estes passos:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Abra o ",s.jsx("strong",{children:"Console do Navegador"})," (pressione F12)"]}),s.jsxs("li",{children:["Procure pela mensagem ",s.jsx("strong",{children:'" APS O PRIMEIRO LOGIN, execute este SQL"'})]}),s.jsx("li",{children:"Copie o comando SQL que aparece no console"}),s.jsxs("li",{children:["Acesse o ",s.jsx("strong",{children:"Supabase  SQL Editor"})]}),s.jsx("li",{children:"Cole e execute o SQL"}),s.jsx("li",{children:"Agora sim, faa login normalmente"})]}),s.jsx("p",{className:"mt-2 text-warning font-medium",children:' Se no executar o SQL, voc ver o erro "Empresa no vinculada"'})]})]})]})}),s.jsx("div",{className:"pt-4",children:s.jsx(Ee,{type:"button",onClick:()=>t("/"),className:"w-full bg-brand hover:bg-brand/90",children:"Ir para Login"})})]})]},"step6");return s.jsxs(s.Fragment,{children:[s.jsx(ho,{children:s.jsx("title",{children:"Criar Empresa - Fluxo7 Arena"})}),s.jsx("div",{className:"min-h-screen bg-background text-text-primary p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[R(),s.jsxs(Khe,{mode:"wait",children:[r===1&&k(),r===2&&T(),r===3&&I(),r===4&&M(),r===5&&z(),r===6&&W()]})]})})]})}function qnt(){const[e,t]=v.useState(!0),[r,n]=v.useState(!1),a=()=>{try{typeof window<"u"&&window.innerWidth>=768?n(l=>{const c=!l;return c&&t(!0),c}):t(l=>!l)}catch{t(l=>!l)}},o=Us().pathname==="/agenda";return s.jsx(hye,{children:s.jsxs("div",{className:"flex h-screen bg-background text-text-primary",children:[s.jsxs(ho,{children:[s.jsx("title",{children:"Fluxo7 Arena - Gesto de Quadras Esportivas"}),s.jsx("meta",{name:"description",content:"Software para gesto de quadras esportivas."})]}),s.jsx(tme,{isVisible:e,setIsVisible:t,sidebarPinned:r}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(mye,{onToggleSidebar:a,sidebarVisible:e,sidebarPinned:r}),s.jsx("main",{className:Ot("flex-1 overflow-x-hidden overflow-y-auto bg-background",o?"p-0 md:p-8":"p-8"),children:s.jsxs(PW,{children:[s.jsx(Ki,{path:"/",element:s.jsx(W7e,{})}),s.jsx(Ki,{path:"/agenda",element:s.jsx(pHe,{})}),s.jsx(Ki,{path:"/vendas",element:s.jsx(eQe,{})}),s.jsx(Ki,{path:"/balcao",element:s.jsx(tQe,{})}),s.jsx(Ki,{path:"/produtos",element:s.jsx(yQe,{})}),s.jsx(Ki,{path:"/clientes",element:s.jsx(SQe,{})}),s.jsx(Ki,{path:"/equipe",element:s.jsx(EQe,{})}),s.jsx(Ki,{path:"/financeiro",element:s.jsx(xnt,{})}),s.jsx(Ki,{path:"/caixa",element:s.jsx(ule,{to:"/financeiro?tab=caixa",replace:!0})}),s.jsx(Ki,{path:"/quadras",element:s.jsx(_nt,{})}),s.jsx(Ki,{path:"/empresas",element:s.jsx(Ant,{})}),s.jsx(Ki,{path:"/finalizadoras",element:s.jsx(Ent,{})}),s.jsx(Ki,{path:"/test-page",element:s.jsx(knt,{})}),s.jsx(Ki,{path:"/historico",element:s.jsx(Rnt,{})}),s.jsx(Ki,{path:"/suporte",element:s.jsx(OQe,{})})]})})]})]})})}function Unt(){return s.jsxs(PW,{children:[s.jsx(Ki,{path:"/reset-password",element:s.jsx(Tnt,{})}),s.jsx(Ki,{path:"/40028922",element:s.jsx(znt,{})}),s.jsx(Ki,{path:"/*",element:s.jsx(hxe,{children:s.jsx(qnt,{})})})]})}var qD="ToastProvider",[UD,Wnt,Vnt]=PN("Toast"),[zne,Iat]=ic("Toast",[Vnt]),[Hnt,cC]=zne(qD),qne=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=v.useState(null),[u,d]=v.useState(0),f=v.useRef(!1),h=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${qD}\`. Expected non-empty \`string\`.`),s.jsx(UD.Provider,{scope:t,children:s.jsx(Hnt,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:v.useCallback(()=>d(m=>m+1),[]),onToastRemove:v.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};qne.displayName=qD;var Une="ToastViewport",Gnt=["F8"],mT="toast.viewportPause",pT="toast.viewportResume",Wne=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Gnt,label:a="Notifications ({hotkey})",...i}=e,o=cC(Une,r),l=Wnt(r),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),f=v.useRef(null),h=Ln(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;v.useEffect(()=>{const y=x=>{n.length!==0&&n.every(w=>x[w]||x.code===w)&&f.current?.focus()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),v.useEffect(()=>{const y=c.current,x=f.current;if(g&&y&&x){const b=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(mT);x.dispatchEvent(A),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(pT);x.dispatchEvent(A),o.isClosePausedRef.current=!1}},S=A=>{!y.contains(A.relatedTarget)&&w()},j=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",b),y.addEventListener("focusout",S),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",S),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const p=v.useCallback(({tabbingDirection:y})=>{const b=l().map(w=>{const S=w.ref.current,j=[S,...oat(S)];return y==="forwards"?j:j.reverse()});return(y==="forwards"?b.reverse():b).flat()},[l]);return v.useEffect(()=>{const y=f.current;if(y){const x=b=>{const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const j=document.activeElement,A=b.shiftKey;if(b.target===y&&A){u.current?.focus();return}const E=p({tabbingDirection:A?"backwards":"forwards"}),R=E.findIndex(k=>k===j);uP(E.slice(R+1))?b.preventDefault():A?u.current?.focus():d.current?.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,p]),s.jsxs(yme,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(gT,{ref:u,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});uP(y)}}),s.jsx(UD.Slot,{scope:r,children:s.jsx(Vr.ol,{tabIndex:-1,...i,ref:h})}),g&&s.jsx(gT,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});uP(y)}})]})});Wne.displayName=Une;var Vne="ToastFocusProxy",gT=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=cC(Vne,r);return s.jsx(M4,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!i.viewport?.contains(l)&&n()}})});gT.displayName=Vne;var x1="Toast",Knt="toast.swipeStart",Ynt="toast.swipeMove",Xnt="toast.swipeCancel",Jnt="toast.swipeEnd",Hne=v.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Id({prop:n,defaultProp:a??!0,onChange:i,caller:x1});return s.jsx(Pl,{present:r||l,children:s.jsx(eat,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:qs(e.onPause),onResume:qs(e.onResume),onSwipeStart:cr(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:cr(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:cr(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:cr(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Hne.displayName=x1;var[Qnt,Znt]=zne(x1,{onClose(){}}),eat=v.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=cC(x1,r),[y,x]=v.useState(null),b=Ln(t,M=>x(M)),w=v.useRef(null),S=v.useRef(null),j=a||p.duration,A=v.useRef(0),P=v.useRef(j),C=v.useRef(0),{onToastAdd:E,onToastRemove:R}=p,k=qs(()=>{y?.contains(document.activeElement)&&p.viewport?.focus(),o()}),T=v.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),A.current=new Date().getTime(),C.current=window.setTimeout(k,M))},[k]);v.useEffect(()=>{const M=p.viewport;if(M){const z=()=>{T(P.current),u?.()},W=()=>{const U=new Date().getTime()-A.current;P.current=P.current-U,window.clearTimeout(C.current),c?.()};return M.addEventListener(mT,W),M.addEventListener(pT,z),()=>{M.removeEventListener(mT,W),M.removeEventListener(pT,z)}}},[p.viewport,j,c,u,T]),v.useEffect(()=>{i&&!p.isClosePausedRef.current&&T(j)},[i,j,p.isClosePausedRef,T]),v.useEffect(()=>(E(),()=>R()),[E,R]);const I=v.useMemo(()=>y?Zne(y):null,[y]);return p.viewport?s.jsxs(s.Fragment,{children:[I&&s.jsx(tat,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:I}),s.jsx(Qnt,{scope:r,onClose:k,children:gh.createPortal(s.jsx(UD.ItemSlot,{scope:r,children:s.jsx(vme,{asChild:!0,onEscapeKeyDown:cr(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||k(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Vr.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:cr(e.onKeyDown,M=>{M.key==="Escape"&&(l?.(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:cr(e.onPointerDown,M=>{M.button===0&&(w.current={x:M.clientX,y:M.clientY})}),onPointerMove:cr(e.onPointerMove,M=>{if(!w.current)return;const z=M.clientX-w.current.x,W=M.clientY-w.current.y,U=!!S.current,$=["left","right"].includes(p.swipeDirection),G=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,me=$?G(0,z):0,de=$?0:G(0,W),L=M.pointerType==="touch"?10:2,B={x:me,y:de},X={originalEvent:M,delta:B};U?(S.current=B,Gw(Ynt,f,X,{discrete:!1})):i9(B,p.swipeDirection,L)?(S.current=B,Gw(Knt,d,X,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(z)>L||Math.abs(W)>L)&&(w.current=null)}),onPointerUp:cr(e.onPointerUp,M=>{const z=S.current,W=M.target;if(W.hasPointerCapture(M.pointerId)&&W.releasePointerCapture(M.pointerId),S.current=null,w.current=null,z){const U=M.currentTarget,$={originalEvent:M,delta:z};i9(z,p.swipeDirection,p.swipeThreshold)?Gw(Jnt,m,$,{discrete:!0}):Gw(Xnt,h,$,{discrete:!0}),U.addEventListener("click",G=>G.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),tat=e=>{const{__scopeToast:t,children:r,...n}=e,a=cC(x1,t),[i,o]=v.useState(!1),[l,c]=v.useState(!1);return aat(()=>o(!0)),v.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Bv,{asChild:!0,children:s.jsx(M4,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},rat="ToastTitle",Gne=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Vr.div,{...n,ref:t})});Gne.displayName=rat;var nat="ToastDescription",Kne=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Vr.div,{...n,ref:t})});Kne.displayName=nat;var Yne="ToastAction",Xne=v.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Qne,{altText:r,asChild:!0,children:s.jsx(WD,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Yne}\`. Expected non-empty \`string\`.`),null)});Xne.displayName=Yne;var Jne="ToastClose",WD=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=Znt(Jne,r);return s.jsx(Qne,{asChild:!0,children:s.jsx(Vr.button,{type:"button",...n,ref:t,onClick:cr(e.onClick,a.onClose)})})});WD.displayName=Jne;var Qne=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Vr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Zne(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),iat(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Zne(n))}}),t}function Gw(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?WI(a,i):a.dispatchEvent(i)}var i9=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function aat(e=()=>{}){const t=qs(e);To(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function iat(e){return e.nodeType===e.ELEMENT_NODE}function oat(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function uP(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var sat=qne,eae=Wne,tae=Hne,rae=Gne,nae=Kne,aae=Xne,iae=WD;const lat=sat,oae=le.forwardRef(({className:e,...t},r)=>s.jsx(eae,{ref:r,className:Ot("fixed z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));oae.displayName=eae.displayName;const cat=UI("group relative pointer-events-auto flex w-full items-start justify-between gap-4 overflow-hidden rounded-lg border p-4 pr-8 shadow-xl transition-all data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-warning text-black border-warning",destructive:"bg-danger text-white border-danger",success:"bg-success text-white border-success",info:"bg-info text-black border-info",warning:"bg-warning text-black border-warning"}},defaultVariants:{variant:"default"}}),sae=le.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(tae,{ref:n,className:Ot(cat({variant:t}),e),...r}));sae.displayName=tae.displayName;const uat=le.forwardRef(({className:e,...t},r)=>s.jsx(aae,{ref:r,className:Ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));uat.displayName=aae.displayName;const lae=le.forwardRef(({className:e,...t},r)=>s.jsx(iae,{ref:r,className:Ot("absolute right-2 top-2 rounded-md p-1 text-white/80 transition-opacity hover:text-white focus:outline-none focus:ring-2 focus:ring-white/50 group-[.default]:text-black/70 group-[.default]:hover:text-black",e),...t,children:s.jsx(_d,{className:"h-4 w-4"})}));lae.displayName=iae.displayName;const cae=le.forwardRef(({className:e,...t},r)=>s.jsx(rae,{ref:r,className:Ot("text-sm font-semibold",e),...t}));cae.displayName=rae.displayName;const uae=le.forwardRef(({className:e,...t},r)=>s.jsx(nae,{ref:r,className:Ot("text-sm",e),...t}));uae.displayName=nae.displayName;function dat(){const{toasts:e}=Za();return s.jsxs(lat,{children:[e.map(({id:t,title:r,description:n,action:a,dismiss:i,...o})=>s.jsxs(sae,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(cae,{children:r}),n&&s.jsx(uae,{children:n})]}),a,s.jsx(lae,{onClick:i})]},t)),s.jsx(oae,{})]})}dP.createRoot(document.getElementById("root")).render(s.jsx(ble,{children:s.jsxs(fye,{children:[s.jsx(Unt,{}),s.jsx(dat,{})]})}));export{S7e as _,Zo as c,zn as g};
