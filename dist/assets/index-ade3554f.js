var Rie=Object.defineProperty;var Lie=(e,t,r)=>t in e?Rie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pa=(e,t,r)=>(Lie(e,typeof t!="symbol"?t+"":t,r),r);function $ie(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fie(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var z9={exports:{}},yj={},q9={exports:{}},ea={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=Symbol.for("react.element"),Bie=Symbol.for("react.portal"),zie=Symbol.for("react.fragment"),qie=Symbol.for("react.strict_mode"),Uie=Symbol.for("react.profiler"),Vie=Symbol.for("react.provider"),Wie=Symbol.for("react.context"),Hie=Symbol.for("react.forward_ref"),Gie=Symbol.for("react.suspense"),Kie=Symbol.for("react.memo"),Yie=Symbol.for("react.lazy"),rR=Symbol.iterator;function Xie(e){return e===null||typeof e!="object"?null:(e=rR&&e[rR]||e["@@iterator"],typeof e=="function"?e:null)}var U9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V9=Object.assign,W9={};function ax(e,t,r){this.props=e,this.context=t,this.refs=W9,this.updater=r||U9}ax.prototype.isReactComponent={};ax.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ax.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function H9(){}H9.prototype=ax.prototype;function t3(e,t,r){this.props=e,this.context=t,this.refs=W9,this.updater=r||U9}var r3=t3.prototype=new H9;r3.constructor=t3;V9(r3,ax.prototype);r3.isPureReactComponent=!0;var nR=Array.isArray,G9=Object.prototype.hasOwnProperty,n3={current:null},K9={key:!0,ref:!0,__self:!0,__source:!0};function Y9(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)G9.call(t,n)&&!K9.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Hb,type:e,key:i,ref:s,props:a,_owner:n3.current}}function Jie(e,t){return{$$typeof:Hb,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function a3(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hb}function Qie(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var aR=/\/+/g;function n5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qie(""+e.key):t.toString(36)}function x2(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Hb:case Bie:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+n5(s,0):n,nR(a)?(r="",e!=null&&(r=e.replace(aR,"$&/")+"/"),x2(a,t,r,"",function(u){return u})):a!=null&&(a3(a)&&(a=Jie(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(aR,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",nR(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+n5(i,l);s+=x2(i,t,r,c,a)}else if(c=Xie(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+n5(i,l++),s+=x2(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function iw(e,t,r){if(e==null)return e;var n=[],a=0;return x2(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Zie(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ds={current:null},y2={transition:null},eoe={ReactCurrentDispatcher:Ds,ReactCurrentBatchConfig:y2,ReactCurrentOwner:n3};function X9(){throw Error("act(...) is not supported in production builds of React.")}ea.Children={map:iw,forEach:function(e,t,r){iw(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return iw(e,function(){t++}),t},toArray:function(e){return iw(e,function(t){return t})||[]},only:function(e){if(!a3(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ea.Component=ax;ea.Fragment=zie;ea.Profiler=Uie;ea.PureComponent=t3;ea.StrictMode=qie;ea.Suspense=Gie;ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eoe;ea.act=X9;ea.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=V9({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=n3.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)G9.call(t,c)&&!K9.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Hb,type:e.type,key:a,ref:i,props:n,_owner:s}};ea.createContext=function(e){return e={$$typeof:Wie,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vie,_context:e},e.Consumer=e};ea.createElement=Y9;ea.createFactory=function(e){var t=Y9.bind(null,e);return t.type=e,t};ea.createRef=function(){return{current:null}};ea.forwardRef=function(e){return{$$typeof:Hie,render:e}};ea.isValidElement=a3;ea.lazy=function(e){return{$$typeof:Yie,_payload:{_status:-1,_result:e},_init:Zie}};ea.memo=function(e,t){return{$$typeof:Kie,type:e,compare:t===void 0?null:t}};ea.startTransition=function(e){var t=y2.transition;y2.transition={};try{e()}finally{y2.transition=t}};ea.unstable_act=X9;ea.useCallback=function(e,t){return Ds.current.useCallback(e,t)};ea.useContext=function(e){return Ds.current.useContext(e)};ea.useDebugValue=function(){};ea.useDeferredValue=function(e){return Ds.current.useDeferredValue(e)};ea.useEffect=function(e,t){return Ds.current.useEffect(e,t)};ea.useId=function(){return Ds.current.useId()};ea.useImperativeHandle=function(e,t,r){return Ds.current.useImperativeHandle(e,t,r)};ea.useInsertionEffect=function(e,t){return Ds.current.useInsertionEffect(e,t)};ea.useLayoutEffect=function(e,t){return Ds.current.useLayoutEffect(e,t)};ea.useMemo=function(e,t){return Ds.current.useMemo(e,t)};ea.useReducer=function(e,t,r){return Ds.current.useReducer(e,t,r)};ea.useRef=function(e){return Ds.current.useRef(e)};ea.useState=function(e){return Ds.current.useState(e)};ea.useSyncExternalStore=function(e,t,r){return Ds.current.useSyncExternalStore(e,t,r)};ea.useTransition=function(){return Ds.current.useTransition()};ea.version="18.3.1";q9.exports=ea;var v=q9.exports;const se=fa(v),i3=$ie({__proto__:null,default:se},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var toe=v,roe=Symbol.for("react.element"),noe=Symbol.for("react.fragment"),aoe=Object.prototype.hasOwnProperty,ioe=toe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ooe={key:!0,ref:!0,__self:!0,__source:!0};function J9(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)aoe.call(t,n)&&!ooe.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:roe,type:e,key:i,ref:s,props:a,_owner:ioe.current}}yj.Fragment=noe;yj.jsx=J9;yj.jsxs=J9;z9.exports=yj;var o=z9.exports,VP={},Q9={exports:{}},Bl={},Z9={exports:{}},eU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,H){var ce=$.length;$.push(H);e:for(;0<ce;){var oe=ce-1>>>1,L=$[oe];if(0<a(L,H))$[oe]=H,$[ce]=L,ce=oe;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var H=$[0],ce=$.pop();if(ce!==H){$[0]=ce;e:for(var oe=0,L=$.length,U=L>>>1;oe<U;){var J=2*(oe+1)-1,V=$[J],Z=J+1,K=$[Z];if(0>a(V,ce))Z<L&&0>a(K,V)?($[oe]=K,$[Z]=ce,oe=Z):($[oe]=V,$[J]=ce,oe=J);else if(Z<L&&0>a(K,ce))$[oe]=K,$[Z]=ce,oe=Z;else break e}}return H}function a($,H){var ce=$.sortIndex-H.sortIndex;return ce!==0?ce:$.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=$)n(u),H.sortIndex=H.expirationTime,t(c,H);else break;H=r(u)}}function _($){if(p=!1,w($),!g)if(r(c)!==null)g=!0,W(j);else{var H=r(u);H!==null&&F(_,H.startTime-$)}}function j($,H){g=!1,p&&(p=!1,y(A),A=-1),m=!0;var ce=h;try{for(w(H),f=r(c);f!==null&&(!(f.expirationTime>H)||$&&!E());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,h=f.priorityLevel;var L=oe(f.expirationTime<=H);H=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(c)&&n(c),w(H)}else n(c);f=r(c)}if(f!==null)var U=!0;else{var J=r(u);J!==null&&F(_,J.startTime-H),U=!1}return U}finally{f=null,h=ce,m=!1}}var N=!1,P=null,A=-1,k=5,M=-1;function E(){return!(e.unstable_now()-M<k)}function I(){if(P!==null){var $=e.unstable_now();M=$;var H=!0;try{H=P(!0,$)}finally{H?O():(N=!1,P=null)}}else N=!1}var O;if(typeof b=="function")O=function(){b(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,B=R.port2;R.port1.onmessage=I,O=function(){B.postMessage(null)}}else O=function(){x(I,0)};function W($){P=$,N||(N=!0,O())}function F($,H){A=x(function(){$(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,W(j))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var ce=h;h=H;try{return $()}finally{h=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ce=h;h=$;try{return H()}finally{h=ce}},e.unstable_scheduleCallback=function($,H,ce){var oe=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?oe+ce:oe):ce=oe,$){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ce+L,$={id:d++,callback:H,priorityLevel:$,startTime:ce,expirationTime:L,sortIndex:-1},ce>oe?($.sortIndex=ce,t(u,$),r(c)===null&&$===r(u)&&(p?(y(A),A=-1):p=!0,F(_,ce-oe))):($.sortIndex=L,t(c,$),g||m||(g=!0,W(j))),$},e.unstable_shouldYield=E,e.unstable_wrapCallback=function($){var H=h;return function(){var ce=h;h=H;try{return $.apply(this,arguments)}finally{h=ce}}}})(eU);Z9.exports=eU;var soe=Z9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var loe=v,$l=soe;function or(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tU=new Set,gy={};function Ap(e,t){uv(e,t),uv(e+"Capture",t)}function uv(e,t){for(gy[e]=t,e=0;e<t.length;e++)tU.add(t[e])}var Wd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),WP=Object.prototype.hasOwnProperty,coe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iR={},oR={};function uoe(e){return WP.call(oR,e)?!0:WP.call(iR,e)?!1:coe.test(e)?oR[e]=!0:(iR[e]=!0,!1)}function doe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function foe(e,t,r,n){if(t===null||typeof t>"u"||doe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ms(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Ho={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ho[e]=new Ms(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ho[t]=new Ms(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ho[e]=new Ms(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ho[e]=new Ms(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ho[e]=new Ms(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ho[e]=new Ms(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ho[e]=new Ms(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ho[e]=new Ms(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ho[e]=new Ms(e,5,!1,e.toLowerCase(),null,!1,!1)});var o3=/[\-:]([a-z])/g;function s3(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(o3,s3);Ho[t]=new Ms(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(o3,s3);Ho[t]=new Ms(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(o3,s3);Ho[t]=new Ms(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ho[e]=new Ms(e,1,!1,e.toLowerCase(),null,!1,!1)});Ho.xlinkHref=new Ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ho[e]=new Ms(e,1,!1,e.toLowerCase(),null,!0,!0)});function l3(e,t,r,n){var a=Ho.hasOwnProperty(t)?Ho[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(foe(t,r,a,n)&&(r=null),n||a===null?uoe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var of=loe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ow=Symbol.for("react.element"),Sg=Symbol.for("react.portal"),jg=Symbol.for("react.fragment"),c3=Symbol.for("react.strict_mode"),HP=Symbol.for("react.profiler"),rU=Symbol.for("react.provider"),nU=Symbol.for("react.context"),u3=Symbol.for("react.forward_ref"),GP=Symbol.for("react.suspense"),KP=Symbol.for("react.suspense_list"),d3=Symbol.for("react.memo"),Rf=Symbol.for("react.lazy"),aU=Symbol.for("react.offscreen"),sR=Symbol.iterator;function Ux(e){return e===null||typeof e!="object"?null:(e=sR&&e[sR]||e["@@iterator"],typeof e=="function"?e:null)}var Ni=Object.assign,a5;function _0(e){if(a5===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);a5=t&&t[1]||""}return`
`+a5+e}var i5=!1;function o5(e,t){if(!e||i5)return"";i5=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,l=i.length-1;1<=s&&0<=l&&a[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==i[l]){var c=`
`+a[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{i5=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_0(e):""}function hoe(e){switch(e.tag){case 5:return _0(e.type);case 16:return _0("Lazy");case 13:return _0("Suspense");case 19:return _0("SuspenseList");case 0:case 2:case 15:return e=o5(e.type,!1),e;case 11:return e=o5(e.type.render,!1),e;case 1:return e=o5(e.type,!0),e;default:return""}}function YP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jg:return"Fragment";case Sg:return"Portal";case HP:return"Profiler";case c3:return"StrictMode";case GP:return"Suspense";case KP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nU:return(e.displayName||"Context")+".Consumer";case rU:return(e._context.displayName||"Context")+".Provider";case u3:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case d3:return t=e.displayName||null,t!==null?t:YP(e.type)||"Memo";case Rf:t=e._payload,e=e._init;try{return YP(e(t))}catch{}}return null}function moe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return YP(t);case 8:return t===c3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iU(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function poe(e){var t=iU(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sw(e){e._valueTracker||(e._valueTracker=poe(e))}function oU(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=iU(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function G2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function XP(e,t){var r=t.checked;return Ni({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lR(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Sh(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sU(e,t){t=t.checked,t!=null&&l3(e,"checked",t,!1)}function JP(e,t){sU(e,t);var r=Sh(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?QP(e,t.type,r):t.hasOwnProperty("defaultValue")&&QP(e,t.type,Sh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cR(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function QP(e,t,r){(t!=="number"||G2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var S0=Array.isArray;function Wg(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Sh(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ZP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(or(91));return Ni({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uR(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(or(92));if(S0(r)){if(1<r.length)throw Error(or(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Sh(r)}}function lU(e,t){var r=Sh(t.value),n=Sh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function dR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cU(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cU(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lw,uU=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lw=lw||document.createElement("div"),lw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var I0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},goe=["Webkit","ms","Moz","O"];Object.keys(I0).forEach(function(e){goe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),I0[t]=I0[e]})});function dU(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||I0.hasOwnProperty(e)&&I0[e]?(""+t).trim():t+"px"}function fU(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=dU(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var voe=Ni({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tE(e,t){if(t){if(voe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(or(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(or(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(or(61))}if(t.style!=null&&typeof t.style!="object")throw Error(or(62))}}function rE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nE=null;function f3(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var aE=null,Hg=null,Gg=null;function fR(e){if(e=Yb(e)){if(typeof aE!="function")throw Error(or(280));var t=e.stateNode;t&&(t=jj(t),aE(e.stateNode,e.type,t))}}function hU(e){Hg?Gg?Gg.push(e):Gg=[e]:Hg=e}function mU(){if(Hg){var e=Hg,t=Gg;if(Gg=Hg=null,fR(e),t)for(e=0;e<t.length;e++)fR(t[e])}}function pU(e,t){return e(t)}function gU(){}var s5=!1;function vU(e,t,r){if(s5)return e(t,r);s5=!0;try{return pU(e,t,r)}finally{s5=!1,(Hg!==null||Gg!==null)&&(gU(),mU())}}function xy(e,t){var r=e.stateNode;if(r===null)return null;var n=jj(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(or(231,t,typeof r));return r}var iE=!1;if(Wd)try{var Vx={};Object.defineProperty(Vx,"passive",{get:function(){iE=!0}}),window.addEventListener("test",Vx,Vx),window.removeEventListener("test",Vx,Vx)}catch{iE=!1}function xoe(e,t,r,n,a,i,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var D0=!1,K2=null,Y2=!1,oE=null,yoe={onError:function(e){D0=!0,K2=e}};function boe(e,t,r,n,a,i,s,l,c){D0=!1,K2=null,xoe.apply(yoe,arguments)}function woe(e,t,r,n,a,i,s,l,c){if(boe.apply(this,arguments),D0){if(D0){var u=K2;D0=!1,K2=null}else throw Error(or(198));Y2||(Y2=!0,oE=u)}}function Pp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hR(e){if(Pp(e)!==e)throw Error(or(188))}function _oe(e){var t=e.alternate;if(!t){if(t=Pp(e),t===null)throw Error(or(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return hR(a),e;if(i===n)return hR(a),t;i=i.sibling}throw Error(or(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(or(189))}}if(r.alternate!==n)throw Error(or(190))}if(r.tag!==3)throw Error(or(188));return r.stateNode.current===r?e:t}function yU(e){return e=_oe(e),e!==null?bU(e):null}function bU(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bU(e);if(t!==null)return t;e=e.sibling}return null}var wU=$l.unstable_scheduleCallback,mR=$l.unstable_cancelCallback,Soe=$l.unstable_shouldYield,joe=$l.unstable_requestPaint,Bi=$l.unstable_now,Noe=$l.unstable_getCurrentPriorityLevel,h3=$l.unstable_ImmediatePriority,_U=$l.unstable_UserBlockingPriority,X2=$l.unstable_NormalPriority,Coe=$l.unstable_LowPriority,SU=$l.unstable_IdlePriority,bj=null,zu=null;function Aoe(e){if(zu&&typeof zu.onCommitFiberRoot=="function")try{zu.onCommitFiberRoot(bj,e,void 0,(e.current.flags&128)===128)}catch{}}var ru=Math.clz32?Math.clz32:koe,Poe=Math.log,Eoe=Math.LN2;function koe(e){return e>>>=0,e===0?32:31-(Poe(e)/Eoe|0)|0}var cw=64,uw=4194304;function j0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function J2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var l=s&~a;l!==0?n=j0(l):(i&=s,i!==0&&(n=j0(i)))}else s=r&~a,s!==0?n=j0(s):i!==0&&(n=j0(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ru(t),a=1<<r,n|=e[r],t&=~a;return n}function Ooe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Toe(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-ru(i),l=1<<s,c=a[s];c===-1?(!(l&r)||l&n)&&(a[s]=Ooe(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function sE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jU(){var e=cw;return cw<<=1,!(cw&4194240)&&(cw=64),e}function l5(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Gb(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ru(t),e[t]=r}function Ioe(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ru(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function m3(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ru(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ka=0;function NU(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CU,p3,AU,PU,EU,lE=!1,dw=[],th=null,rh=null,nh=null,yy=new Map,by=new Map,zf=[],Doe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pR(e,t){switch(e){case"focusin":case"focusout":th=null;break;case"dragenter":case"dragleave":rh=null;break;case"mouseover":case"mouseout":nh=null;break;case"pointerover":case"pointerout":yy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":by.delete(t.pointerId)}}function Wx(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Yb(t),t!==null&&p3(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Moe(e,t,r,n,a){switch(t){case"focusin":return th=Wx(th,e,t,r,n,a),!0;case"dragenter":return rh=Wx(rh,e,t,r,n,a),!0;case"mouseover":return nh=Wx(nh,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return yy.set(i,Wx(yy.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,by.set(i,Wx(by.get(i)||null,e,t,r,n,a)),!0}return!1}function kU(e){var t=jm(e.target);if(t!==null){var r=Pp(t);if(r!==null){if(t=r.tag,t===13){if(t=xU(r),t!==null){e.blockedOn=t,EU(e.priority,function(){AU(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function b2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=cE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);nE=n,r.target.dispatchEvent(n),nE=null}else return t=Yb(r),t!==null&&p3(t),e.blockedOn=r,!1;t.shift()}return!0}function gR(e,t,r){b2(e)&&r.delete(t)}function Roe(){lE=!1,th!==null&&b2(th)&&(th=null),rh!==null&&b2(rh)&&(rh=null),nh!==null&&b2(nh)&&(nh=null),yy.forEach(gR),by.forEach(gR)}function Hx(e,t){e.blockedOn===t&&(e.blockedOn=null,lE||(lE=!0,$l.unstable_scheduleCallback($l.unstable_NormalPriority,Roe)))}function wy(e){function t(a){return Hx(a,e)}if(0<dw.length){Hx(dw[0],e);for(var r=1;r<dw.length;r++){var n=dw[r];n.blockedOn===e&&(n.blockedOn=null)}}for(th!==null&&Hx(th,e),rh!==null&&Hx(rh,e),nh!==null&&Hx(nh,e),yy.forEach(t),by.forEach(t),r=0;r<zf.length;r++)n=zf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<zf.length&&(r=zf[0],r.blockedOn===null);)kU(r),r.blockedOn===null&&zf.shift()}var Kg=of.ReactCurrentBatchConfig,Q2=!0;function Loe(e,t,r,n){var a=ka,i=Kg.transition;Kg.transition=null;try{ka=1,g3(e,t,r,n)}finally{ka=a,Kg.transition=i}}function $oe(e,t,r,n){var a=ka,i=Kg.transition;Kg.transition=null;try{ka=4,g3(e,t,r,n)}finally{ka=a,Kg.transition=i}}function g3(e,t,r,n){if(Q2){var a=cE(e,t,r,n);if(a===null)x5(e,t,n,Z2,r),pR(e,n);else if(Moe(a,e,t,r,n))n.stopPropagation();else if(pR(e,n),t&4&&-1<Doe.indexOf(e)){for(;a!==null;){var i=Yb(a);if(i!==null&&CU(i),i=cE(e,t,r,n),i===null&&x5(e,t,n,Z2,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else x5(e,t,n,null,r)}}var Z2=null;function cE(e,t,r,n){if(Z2=null,e=f3(n),e=jm(e),e!==null)if(t=Pp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xU(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Z2=e,null}function OU(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Noe()){case h3:return 1;case _U:return 4;case X2:case Coe:return 16;case SU:return 536870912;default:return 16}default:return 16}}var Gf=null,v3=null,w2=null;function TU(){if(w2)return w2;var e,t=v3,r=t.length,n,a="value"in Gf?Gf.value:Gf.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return w2=a.slice(e,1<n?1-n:void 0)}function _2(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fw(){return!0}function vR(){return!1}function zl(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fw:vR,this.isPropagationStopped=vR,this}return Ni(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fw)},persist:function(){},isPersistent:fw}),t}var ix={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x3=zl(ix),Kb=Ni({},ix,{view:0,detail:0}),Foe=zl(Kb),c5,u5,Gx,wj=Ni({},Kb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y3,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gx&&(Gx&&e.type==="mousemove"?(c5=e.screenX-Gx.screenX,u5=e.screenY-Gx.screenY):u5=c5=0,Gx=e),c5)},movementY:function(e){return"movementY"in e?e.movementY:u5}}),xR=zl(wj),Boe=Ni({},wj,{dataTransfer:0}),zoe=zl(Boe),qoe=Ni({},Kb,{relatedTarget:0}),d5=zl(qoe),Uoe=Ni({},ix,{animationName:0,elapsedTime:0,pseudoElement:0}),Voe=zl(Uoe),Woe=Ni({},ix,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hoe=zl(Woe),Goe=Ni({},ix,{data:0}),yR=zl(Goe),Koe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yoe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xoe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Joe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xoe[e])?!!t[e]:!1}function y3(){return Joe}var Qoe=Ni({},Kb,{key:function(e){if(e.key){var t=Koe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yoe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y3,charCode:function(e){return e.type==="keypress"?_2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zoe=zl(Qoe),ese=Ni({},wj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bR=zl(ese),tse=Ni({},Kb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y3}),rse=zl(tse),nse=Ni({},ix,{propertyName:0,elapsedTime:0,pseudoElement:0}),ase=zl(nse),ise=Ni({},wj,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ose=zl(ise),sse=[9,13,27,32],b3=Wd&&"CompositionEvent"in window,M0=null;Wd&&"documentMode"in document&&(M0=document.documentMode);var lse=Wd&&"TextEvent"in window&&!M0,IU=Wd&&(!b3||M0&&8<M0&&11>=M0),wR=String.fromCharCode(32),_R=!1;function DU(e,t){switch(e){case"keyup":return sse.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MU(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ng=!1;function cse(e,t){switch(e){case"compositionend":return MU(t);case"keypress":return t.which!==32?null:(_R=!0,wR);case"textInput":return e=t.data,e===wR&&_R?null:e;default:return null}}function use(e,t){if(Ng)return e==="compositionend"||!b3&&DU(e,t)?(e=TU(),w2=v3=Gf=null,Ng=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IU&&t.locale!=="ko"?null:t.data;default:return null}}var dse={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dse[e.type]:t==="textarea"}function RU(e,t,r,n){hU(n),t=e_(t,"onChange"),0<t.length&&(r=new x3("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var R0=null,_y=null;function fse(e){GU(e,0)}function _j(e){var t=Pg(e);if(oU(t))return e}function hse(e,t){if(e==="change")return t}var LU=!1;if(Wd){var f5;if(Wd){var h5="oninput"in document;if(!h5){var jR=document.createElement("div");jR.setAttribute("oninput","return;"),h5=typeof jR.oninput=="function"}f5=h5}else f5=!1;LU=f5&&(!document.documentMode||9<document.documentMode)}function NR(){R0&&(R0.detachEvent("onpropertychange",$U),_y=R0=null)}function $U(e){if(e.propertyName==="value"&&_j(_y)){var t=[];RU(t,_y,e,f3(e)),vU(fse,t)}}function mse(e,t,r){e==="focusin"?(NR(),R0=t,_y=r,R0.attachEvent("onpropertychange",$U)):e==="focusout"&&NR()}function pse(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _j(_y)}function gse(e,t){if(e==="click")return _j(t)}function vse(e,t){if(e==="input"||e==="change")return _j(t)}function xse(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lu=typeof Object.is=="function"?Object.is:xse;function Sy(e,t){if(lu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!WP.call(t,a)||!lu(e[a],t[a]))return!1}return!0}function CR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AR(e,t){var r=CR(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=CR(r)}}function FU(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FU(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BU(){for(var e=window,t=G2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=G2(e.document)}return t}function w3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yse(e){var t=BU(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&FU(r.ownerDocument.documentElement,r)){if(n!==null&&w3(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=AR(r,i);var s=AR(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bse=Wd&&"documentMode"in document&&11>=document.documentMode,Cg=null,uE=null,L0=null,dE=!1;function PR(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dE||Cg==null||Cg!==G2(n)||(n=Cg,"selectionStart"in n&&w3(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),L0&&Sy(L0,n)||(L0=n,n=e_(uE,"onSelect"),0<n.length&&(t=new x3("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Cg)))}function hw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ag={animationend:hw("Animation","AnimationEnd"),animationiteration:hw("Animation","AnimationIteration"),animationstart:hw("Animation","AnimationStart"),transitionend:hw("Transition","TransitionEnd")},m5={},zU={};Wd&&(zU=document.createElement("div").style,"AnimationEvent"in window||(delete Ag.animationend.animation,delete Ag.animationiteration.animation,delete Ag.animationstart.animation),"TransitionEvent"in window||delete Ag.transitionend.transition);function Sj(e){if(m5[e])return m5[e];if(!Ag[e])return e;var t=Ag[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in zU)return m5[e]=t[r];return e}var qU=Sj("animationend"),UU=Sj("animationiteration"),VU=Sj("animationstart"),WU=Sj("transitionend"),HU=new Map,ER="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dh(e,t){HU.set(e,t),Ap(t,[e])}for(var p5=0;p5<ER.length;p5++){var g5=ER[p5],wse=g5.toLowerCase(),_se=g5[0].toUpperCase()+g5.slice(1);Dh(wse,"on"+_se)}Dh(qU,"onAnimationEnd");Dh(UU,"onAnimationIteration");Dh(VU,"onAnimationStart");Dh("dblclick","onDoubleClick");Dh("focusin","onFocus");Dh("focusout","onBlur");Dh(WU,"onTransitionEnd");uv("onMouseEnter",["mouseout","mouseover"]);uv("onMouseLeave",["mouseout","mouseover"]);uv("onPointerEnter",["pointerout","pointerover"]);uv("onPointerLeave",["pointerout","pointerover"]);Ap("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ap("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ap("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ap("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ap("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ap("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var N0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sse=new Set("cancel close invalid load scroll toggle".split(" ").concat(N0));function kR(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,woe(n,t,void 0,e),e.currentTarget=null}function GU(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var l=n[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;kR(a,l,u),i=c}else for(s=0;s<n.length;s++){if(l=n[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;kR(a,l,u),i=c}}}if(Y2)throw e=oE,Y2=!1,oE=null,e}function ai(e,t){var r=t[gE];r===void 0&&(r=t[gE]=new Set);var n=e+"__bubble";r.has(n)||(KU(t,e,2,!1),r.add(n))}function v5(e,t,r){var n=0;t&&(n|=4),KU(r,e,n,t)}var mw="_reactListening"+Math.random().toString(36).slice(2);function jy(e){if(!e[mw]){e[mw]=!0,tU.forEach(function(r){r!=="selectionchange"&&(Sse.has(r)||v5(r,!1,e),v5(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mw]||(t[mw]=!0,v5("selectionchange",!1,t))}}function KU(e,t,r,n){switch(OU(t)){case 1:var a=Loe;break;case 4:a=$oe;break;default:a=g3}r=a.bind(null,t,r,e),a=void 0,!iE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function x5(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;l!==null;){if(s=jm(l),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}l=l.parentNode}}n=n.return}vU(function(){var u=i,d=f3(r),f=[];e:{var h=HU.get(e);if(h!==void 0){var m=x3,g=e;switch(e){case"keypress":if(_2(r)===0)break e;case"keydown":case"keyup":m=Zoe;break;case"focusin":g="focus",m=d5;break;case"focusout":g="blur",m=d5;break;case"beforeblur":case"afterblur":m=d5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=zoe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=rse;break;case qU:case UU:case VU:m=Voe;break;case WU:m=ase;break;case"scroll":m=Foe;break;case"wheel":m=ose;break;case"copy":case"cut":case"paste":m=Hoe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=bR}var p=(t&4)!==0,x=!p&&e==="scroll",y=p?h!==null?h+"Capture":null:h;p=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,y!==null&&(_=xy(b,y),_!=null&&p.push(Ny(b,_,w)))),x)break;b=b.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==nE&&(g=r.relatedTarget||r.fromElement)&&(jm(g)||g[Hd]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?jm(g):null,g!==null&&(x=Pp(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=xR,_="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=bR,_="onPointerLeave",y="onPointerEnter",b="pointer"),x=m==null?h:Pg(m),w=g==null?h:Pg(g),h=new p(_,b+"leave",m,r,d),h.target=x,h.relatedTarget=w,_=null,jm(d)===u&&(p=new p(y,b+"enter",g,r,d),p.target=w,p.relatedTarget=x,_=p),x=_,m&&g)t:{for(p=m,y=g,b=0,w=p;w;w=Wp(w))b++;for(w=0,_=y;_;_=Wp(_))w++;for(;0<b-w;)p=Wp(p),b--;for(;0<w-b;)y=Wp(y),w--;for(;b--;){if(p===y||y!==null&&p===y.alternate)break t;p=Wp(p),y=Wp(y)}p=null}else p=null;m!==null&&OR(f,h,m,p,!1),g!==null&&x!==null&&OR(f,x,g,p,!0)}}e:{if(h=u?Pg(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=hse;else if(SR(h))if(LU)j=vse;else{j=pse;var N=mse}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=gse);if(j&&(j=j(e,u))){RU(f,j,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&QP(h,"number",h.value)}switch(N=u?Pg(u):window,e){case"focusin":(SR(N)||N.contentEditable==="true")&&(Cg=N,uE=u,L0=null);break;case"focusout":L0=uE=Cg=null;break;case"mousedown":dE=!0;break;case"contextmenu":case"mouseup":case"dragend":dE=!1,PR(f,r,d);break;case"selectionchange":if(bse)break;case"keydown":case"keyup":PR(f,r,d)}var P;if(b3)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ng?DU(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(IU&&r.locale!=="ko"&&(Ng||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ng&&(P=TU()):(Gf=d,v3="value"in Gf?Gf.value:Gf.textContent,Ng=!0)),N=e_(u,A),0<N.length&&(A=new yR(A,e,null,r,d),f.push({event:A,listeners:N}),P?A.data=P:(P=MU(r),P!==null&&(A.data=P)))),(P=lse?cse(e,r):use(e,r))&&(u=e_(u,"onBeforeInput"),0<u.length&&(d=new yR("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=P))}GU(f,t)})}function Ny(e,t,r){return{instance:e,listener:t,currentTarget:r}}function e_(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=xy(e,r),i!=null&&n.unshift(Ny(e,i,a)),i=xy(e,t),i!=null&&n.push(Ny(e,i,a))),e=e.return}return n}function Wp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function OR(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=xy(r,i),c!=null&&s.unshift(Ny(r,c,l))):a||(c=xy(r,i),c!=null&&s.push(Ny(r,c,l)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var jse=/\r\n?/g,Nse=/\u0000|\uFFFD/g;function TR(e){return(typeof e=="string"?e:""+e).replace(jse,`
`).replace(Nse,"")}function pw(e,t,r){if(t=TR(t),TR(e)!==t&&r)throw Error(or(425))}function t_(){}var fE=null,hE=null;function mE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pE=typeof setTimeout=="function"?setTimeout:void 0,Cse=typeof clearTimeout=="function"?clearTimeout:void 0,IR=typeof Promise=="function"?Promise:void 0,Ase=typeof queueMicrotask=="function"?queueMicrotask:typeof IR<"u"?function(e){return IR.resolve(null).then(e).catch(Pse)}:pE;function Pse(e){setTimeout(function(){throw e})}function y5(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),wy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);wy(t)}function ah(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ox=Math.random().toString(36).slice(2),Eu="__reactFiber$"+ox,Cy="__reactProps$"+ox,Hd="__reactContainer$"+ox,gE="__reactEvents$"+ox,Ese="__reactListeners$"+ox,kse="__reactHandles$"+ox;function jm(e){var t=e[Eu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Hd]||r[Eu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=DR(e);e!==null;){if(r=e[Eu])return r;e=DR(e)}return t}e=r,r=e.parentNode}return null}function Yb(e){return e=e[Eu]||e[Hd],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(or(33))}function jj(e){return e[Cy]||null}var vE=[],Eg=-1;function Mh(e){return{current:e}}function ci(e){0>Eg||(e.current=vE[Eg],vE[Eg]=null,Eg--)}function Ya(e,t){Eg++,vE[Eg]=e.current,e.current=t}var jh={},ds=Mh(jh),Qs=Mh(!1),rp=jh;function dv(e,t){var r=e.type.contextTypes;if(!r)return jh;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zs(e){return e=e.childContextTypes,e!=null}function r_(){ci(Qs),ci(ds)}function MR(e,t,r){if(ds.current!==jh)throw Error(or(168));Ya(ds,t),Ya(Qs,r)}function YU(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(or(108,moe(e)||"Unknown",a));return Ni({},r,n)}function n_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jh,rp=ds.current,Ya(ds,e),Ya(Qs,Qs.current),!0}function RR(e,t,r){var n=e.stateNode;if(!n)throw Error(or(169));r?(e=YU(e,t,rp),n.__reactInternalMemoizedMergedChildContext=e,ci(Qs),ci(ds),Ya(ds,e)):ci(Qs),Ya(Qs,r)}var Ad=null,Nj=!1,b5=!1;function XU(e){Ad===null?Ad=[e]:Ad.push(e)}function Ose(e){Nj=!0,XU(e)}function Rh(){if(!b5&&Ad!==null){b5=!0;var e=0,t=ka;try{var r=Ad;for(ka=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ad=null,Nj=!1}catch(a){throw Ad!==null&&(Ad=Ad.slice(e+1)),wU(h3,Rh),a}finally{ka=t,b5=!1}}return null}var kg=[],Og=0,a_=null,i_=0,ac=[],ic=0,np=null,Od=1,Td="";function cm(e,t){kg[Og++]=i_,kg[Og++]=a_,a_=e,i_=t}function JU(e,t,r){ac[ic++]=Od,ac[ic++]=Td,ac[ic++]=np,np=e;var n=Od;e=Td;var a=32-ru(n)-1;n&=~(1<<a),r+=1;var i=32-ru(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Od=1<<32-ru(t)+a|r<<a|n,Td=i+e}else Od=1<<i|r<<a|n,Td=e}function _3(e){e.return!==null&&(cm(e,1),JU(e,1,0))}function S3(e){for(;e===a_;)a_=kg[--Og],kg[Og]=null,i_=kg[--Og],kg[Og]=null;for(;e===np;)np=ac[--ic],ac[ic]=null,Td=ac[--ic],ac[ic]=null,Od=ac[--ic],ac[ic]=null}var Tl=null,Al=null,pi=!1,Wc=null;function QU(e,t){var r=cc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function LR(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tl=e,Al=ah(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tl=e,Al=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=np!==null?{id:Od,overflow:Td}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=cc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Tl=e,Al=null,!0):!1;default:return!1}}function xE(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yE(e){if(pi){var t=Al;if(t){var r=t;if(!LR(e,t)){if(xE(e))throw Error(or(418));t=ah(r.nextSibling);var n=Tl;t&&LR(e,t)?QU(n,r):(e.flags=e.flags&-4097|2,pi=!1,Tl=e)}}else{if(xE(e))throw Error(or(418));e.flags=e.flags&-4097|2,pi=!1,Tl=e}}}function $R(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tl=e}function gw(e){if(e!==Tl)return!1;if(!pi)return $R(e),pi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mE(e.type,e.memoizedProps)),t&&(t=Al)){if(xE(e))throw ZU(),Error(or(418));for(;t;)QU(e,t),t=ah(t.nextSibling)}if($R(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(or(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Al=ah(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Al=null}}else Al=Tl?ah(e.stateNode.nextSibling):null;return!0}function ZU(){for(var e=Al;e;)e=ah(e.nextSibling)}function fv(){Al=Tl=null,pi=!1}function j3(e){Wc===null?Wc=[e]:Wc.push(e)}var Tse=of.ReactCurrentBatchConfig;function Kx(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(or(309));var n=r.stateNode}if(!n)throw Error(or(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=a.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(or(284));if(!r._owner)throw Error(or(290,e))}return e}function vw(e,t){throw e=Object.prototype.toString.call(t),Error(or(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function FR(e){var t=e._init;return t(e._payload)}function eV(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function r(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=lh(y,b),y.index=0,y.sibling=null,y}function i(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,_){return b===null||b.tag!==6?(b=A5(w,y.mode,_),b.return=y,b):(b=a(b,w),b.return=y,b)}function c(y,b,w,_){var j=w.type;return j===jg?d(y,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rf&&FR(j)===b.type)?(_=a(b,w.props),_.ref=Kx(y,b,w),_.return=y,_):(_=E2(w.type,w.key,w.props,null,y.mode,_),_.ref=Kx(y,b,w),_.return=y,_)}function u(y,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=P5(w,y.mode,_),b.return=y,b):(b=a(b,w.children||[]),b.return=y,b)}function d(y,b,w,_,j){return b===null||b.tag!==7?(b=Vm(w,y.mode,_,j),b.return=y,b):(b=a(b,w),b.return=y,b)}function f(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=A5(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ow:return w=E2(b.type,b.key,b.props,null,y.mode,w),w.ref=Kx(y,null,b),w.return=y,w;case Sg:return b=P5(b,y.mode,w),b.return=y,b;case Rf:var _=b._init;return f(y,_(b._payload),w)}if(S0(b)||Ux(b))return b=Vm(b,y.mode,w,null),b.return=y,b;vw(y,b)}return null}function h(y,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(y,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ow:return w.key===j?c(y,b,w,_):null;case Sg:return w.key===j?u(y,b,w,_):null;case Rf:return j=w._init,h(y,b,j(w._payload),_)}if(S0(w)||Ux(w))return j!==null?null:d(y,b,w,_,null);vw(y,w)}return null}function m(y,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(w)||null,l(b,y,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ow:return y=y.get(_.key===null?w:_.key)||null,c(b,y,_,j);case Sg:return y=y.get(_.key===null?w:_.key)||null,u(b,y,_,j);case Rf:var N=_._init;return m(y,b,w,N(_._payload),j)}if(S0(_)||Ux(_))return y=y.get(w)||null,d(b,y,_,j,null);vw(b,_)}return null}function g(y,b,w,_){for(var j=null,N=null,P=b,A=b=0,k=null;P!==null&&A<w.length;A++){P.index>A?(k=P,P=null):k=P.sibling;var M=h(y,P,w[A],_);if(M===null){P===null&&(P=k);break}e&&P&&M.alternate===null&&t(y,P),b=i(M,b,A),N===null?j=M:N.sibling=M,N=M,P=k}if(A===w.length)return r(y,P),pi&&cm(y,A),j;if(P===null){for(;A<w.length;A++)P=f(y,w[A],_),P!==null&&(b=i(P,b,A),N===null?j=P:N.sibling=P,N=P);return pi&&cm(y,A),j}for(P=n(y,P);A<w.length;A++)k=m(P,y,A,w[A],_),k!==null&&(e&&k.alternate!==null&&P.delete(k.key===null?A:k.key),b=i(k,b,A),N===null?j=k:N.sibling=k,N=k);return e&&P.forEach(function(E){return t(y,E)}),pi&&cm(y,A),j}function p(y,b,w,_){var j=Ux(w);if(typeof j!="function")throw Error(or(150));if(w=j.call(w),w==null)throw Error(or(151));for(var N=j=null,P=b,A=b=0,k=null,M=w.next();P!==null&&!M.done;A++,M=w.next()){P.index>A?(k=P,P=null):k=P.sibling;var E=h(y,P,M.value,_);if(E===null){P===null&&(P=k);break}e&&P&&E.alternate===null&&t(y,P),b=i(E,b,A),N===null?j=E:N.sibling=E,N=E,P=k}if(M.done)return r(y,P),pi&&cm(y,A),j;if(P===null){for(;!M.done;A++,M=w.next())M=f(y,M.value,_),M!==null&&(b=i(M,b,A),N===null?j=M:N.sibling=M,N=M);return pi&&cm(y,A),j}for(P=n(y,P);!M.done;A++,M=w.next())M=m(P,y,A,M.value,_),M!==null&&(e&&M.alternate!==null&&P.delete(M.key===null?A:M.key),b=i(M,b,A),N===null?j=M:N.sibling=M,N=M);return e&&P.forEach(function(I){return t(y,I)}),pi&&cm(y,A),j}function x(y,b,w,_){if(typeof w=="object"&&w!==null&&w.type===jg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ow:e:{for(var j=w.key,N=b;N!==null;){if(N.key===j){if(j=w.type,j===jg){if(N.tag===7){r(y,N.sibling),b=a(N,w.props.children),b.return=y,y=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rf&&FR(j)===N.type){r(y,N.sibling),b=a(N,w.props),b.ref=Kx(y,N,w),b.return=y,y=b;break e}r(y,N);break}else t(y,N);N=N.sibling}w.type===jg?(b=Vm(w.props.children,y.mode,_,w.key),b.return=y,y=b):(_=E2(w.type,w.key,w.props,null,y.mode,_),_.ref=Kx(y,b,w),_.return=y,y=_)}return s(y);case Sg:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(y,b.sibling),b=a(b,w.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else t(y,b);b=b.sibling}b=P5(w,y.mode,_),b.return=y,y=b}return s(y);case Rf:return N=w._init,x(y,b,N(w._payload),_)}if(S0(w))return g(y,b,w,_);if(Ux(w))return p(y,b,w,_);vw(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(y,b.sibling),b=a(b,w),b.return=y,y=b):(r(y,b),b=A5(w,y.mode,_),b.return=y,y=b),s(y)):r(y,b)}return x}var hv=eV(!0),tV=eV(!1),o_=Mh(null),s_=null,Tg=null,N3=null;function C3(){N3=Tg=s_=null}function A3(e){var t=o_.current;ci(o_),e._currentValue=t}function bE(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yg(e,t){s_=e,N3=Tg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ys=!0),e.firstContext=null)}function vc(e){var t=e._currentValue;if(N3!==e)if(e={context:e,memoizedValue:t,next:null},Tg===null){if(s_===null)throw Error(or(308));Tg=e,s_.dependencies={lanes:0,firstContext:e}}else Tg=Tg.next=e;return t}var Nm=null;function P3(e){Nm===null?Nm=[e]:Nm.push(e)}function rV(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,P3(t)):(r.next=a.next,a.next=r),t.interleaved=r,Gd(e,n)}function Gd(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Lf=!1;function E3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nV(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ih(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ga&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Gd(e,r)}return a=n.interleaved,a===null?(t.next=t,P3(n)):(t.next=a.next,a.next=t),n.interleaved=t,Gd(e,r)}function S2(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,m3(e,r)}}function BR(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function l_(e,t,r,n){var a=e.updateQueue;Lf=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Ni({},f,h);break e;case 2:Lf=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,s|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ip|=s,e.lanes=s,e.memoizedState=f}}function zR(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(or(191,a));a.call(n)}}}var Xb={},qu=Mh(Xb),Ay=Mh(Xb),Py=Mh(Xb);function Cm(e){if(e===Xb)throw Error(or(174));return e}function k3(e,t){switch(Ya(Py,t),Ya(Ay,e),Ya(qu,Xb),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=eE(t,e)}ci(qu),Ya(qu,t)}function mv(){ci(qu),ci(Ay),ci(Py)}function aV(e){Cm(Py.current);var t=Cm(qu.current),r=eE(t,e.type);t!==r&&(Ya(Ay,e),Ya(qu,r))}function O3(e){Ay.current===e&&(ci(qu),ci(Ay))}var bi=Mh(0);function c_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var w5=[];function T3(){for(var e=0;e<w5.length;e++)w5[e]._workInProgressVersionPrimary=null;w5.length=0}var j2=of.ReactCurrentDispatcher,_5=of.ReactCurrentBatchConfig,ap=0,Si=null,mo=null,Po=null,u_=!1,$0=!1,Ey=0,Ise=0;function Qo(){throw Error(or(321))}function I3(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lu(e[r],t[r]))return!1;return!0}function D3(e,t,r,n,a,i){if(ap=i,Si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j2.current=e===null||e.memoizedState===null?Lse:$se,e=r(n,a),$0){i=0;do{if($0=!1,Ey=0,25<=i)throw Error(or(301));i+=1,Po=mo=null,t.updateQueue=null,j2.current=Fse,e=r(n,a)}while($0)}if(j2.current=d_,t=mo!==null&&mo.next!==null,ap=0,Po=mo=Si=null,u_=!1,t)throw Error(or(300));return e}function M3(){var e=Ey!==0;return Ey=0,e}function Cu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Po===null?Si.memoizedState=Po=e:Po=Po.next=e,Po}function xc(){if(mo===null){var e=Si.alternate;e=e!==null?e.memoizedState:null}else e=mo.next;var t=Po===null?Si.memoizedState:Po.next;if(t!==null)Po=t,mo=e;else{if(e===null)throw Error(or(310));mo=e,e={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},Po===null?Si.memoizedState=Po=e:Po=Po.next=e}return Po}function ky(e,t){return typeof t=="function"?t(e):t}function S5(e){var t=xc(),r=t.queue;if(r===null)throw Error(or(311));r.lastRenderedReducer=e;var n=mo,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((ap&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,s=n):c=c.next=f,Si.lanes|=d,ip|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=l,lu(n,t.memoizedState)||(Ys=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Si.lanes|=i,ip|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function j5(e){var t=xc(),r=t.queue;if(r===null)throw Error(or(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);lu(i,t.memoizedState)||(Ys=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function iV(){}function oV(e,t){var r=Si,n=xc(),a=t(),i=!lu(n.memoizedState,a);if(i&&(n.memoizedState=a,Ys=!0),n=n.queue,R3(cV.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Po!==null&&Po.memoizedState.tag&1){if(r.flags|=2048,Oy(9,lV.bind(null,r,n,a,t),void 0,null),ko===null)throw Error(or(349));ap&30||sV(r,t,a)}return a}function sV(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Si.updateQueue,t===null?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lV(e,t,r,n){t.value=r,t.getSnapshot=n,uV(t)&&dV(e)}function cV(e,t,r){return r(function(){uV(t)&&dV(e)})}function uV(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lu(e,r)}catch{return!0}}function dV(e){var t=Gd(e,1);t!==null&&nu(t,e,1,-1)}function qR(e){var t=Cu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ky,lastRenderedState:e},t.queue=e,e=e.dispatch=Rse.bind(null,Si,e),[t.memoizedState,e]}function Oy(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Si.updateQueue,t===null?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fV(){return xc().memoizedState}function N2(e,t,r,n){var a=Cu();Si.flags|=e,a.memoizedState=Oy(1|t,r,void 0,n===void 0?null:n)}function Cj(e,t,r,n){var a=xc();n=n===void 0?null:n;var i=void 0;if(mo!==null){var s=mo.memoizedState;if(i=s.destroy,n!==null&&I3(n,s.deps)){a.memoizedState=Oy(t,r,i,n);return}}Si.flags|=e,a.memoizedState=Oy(1|t,r,i,n)}function UR(e,t){return N2(8390656,8,e,t)}function R3(e,t){return Cj(2048,8,e,t)}function hV(e,t){return Cj(4,2,e,t)}function mV(e,t){return Cj(4,4,e,t)}function pV(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gV(e,t,r){return r=r!=null?r.concat([e]):null,Cj(4,4,pV.bind(null,t,e),r)}function L3(){}function vV(e,t){var r=xc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&I3(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function xV(e,t){var r=xc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&I3(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function yV(e,t,r){return ap&21?(lu(r,t)||(r=jU(),Si.lanes|=r,ip|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ys=!0),e.memoizedState=r)}function Dse(e,t){var r=ka;ka=r!==0&&4>r?r:4,e(!0);var n=_5.transition;_5.transition={};try{e(!1),t()}finally{ka=r,_5.transition=n}}function bV(){return xc().memoizedState}function Mse(e,t,r){var n=sh(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wV(e))_V(t,r);else if(r=rV(e,t,r,n),r!==null){var a=Is();nu(r,e,n,a),SV(r,t,n)}}function Rse(e,t,r){var n=sh(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wV(e))_V(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,r);if(a.hasEagerState=!0,a.eagerState=l,lu(l,s)){var c=t.interleaved;c===null?(a.next=a,P3(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=rV(e,t,a,n),r!==null&&(a=Is(),nu(r,e,n,a),SV(r,t,n))}}function wV(e){var t=e.alternate;return e===Si||t!==null&&t===Si}function _V(e,t){$0=u_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function SV(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,m3(e,r)}}var d_={readContext:vc,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useInsertionEffect:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useDeferredValue:Qo,useTransition:Qo,useMutableSource:Qo,useSyncExternalStore:Qo,useId:Qo,unstable_isNewReconciler:!1},Lse={readContext:vc,useCallback:function(e,t){return Cu().memoizedState=[e,t===void 0?null:t],e},useContext:vc,useEffect:UR,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,N2(4194308,4,pV.bind(null,t,e),r)},useLayoutEffect:function(e,t){return N2(4194308,4,e,t)},useInsertionEffect:function(e,t){return N2(4,2,e,t)},useMemo:function(e,t){var r=Cu();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Cu();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Mse.bind(null,Si,e),[n.memoizedState,e]},useRef:function(e){var t=Cu();return e={current:e},t.memoizedState=e},useState:qR,useDebugValue:L3,useDeferredValue:function(e){return Cu().memoizedState=e},useTransition:function(){var e=qR(!1),t=e[0];return e=Dse.bind(null,e[1]),Cu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Si,a=Cu();if(pi){if(r===void 0)throw Error(or(407));r=r()}else{if(r=t(),ko===null)throw Error(or(349));ap&30||sV(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,UR(cV.bind(null,n,i,e),[e]),n.flags|=2048,Oy(9,lV.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Cu(),t=ko.identifierPrefix;if(pi){var r=Td,n=Od;r=(n&~(1<<32-ru(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ey++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ise++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$se={readContext:vc,useCallback:vV,useContext:vc,useEffect:R3,useImperativeHandle:gV,useInsertionEffect:hV,useLayoutEffect:mV,useMemo:xV,useReducer:S5,useRef:fV,useState:function(){return S5(ky)},useDebugValue:L3,useDeferredValue:function(e){var t=xc();return yV(t,mo.memoizedState,e)},useTransition:function(){var e=S5(ky)[0],t=xc().memoizedState;return[e,t]},useMutableSource:iV,useSyncExternalStore:oV,useId:bV,unstable_isNewReconciler:!1},Fse={readContext:vc,useCallback:vV,useContext:vc,useEffect:R3,useImperativeHandle:gV,useInsertionEffect:hV,useLayoutEffect:mV,useMemo:xV,useReducer:j5,useRef:fV,useState:function(){return j5(ky)},useDebugValue:L3,useDeferredValue:function(e){var t=xc();return mo===null?t.memoizedState=e:yV(t,mo.memoizedState,e)},useTransition:function(){var e=j5(ky)[0],t=xc().memoizedState;return[e,t]},useMutableSource:iV,useSyncExternalStore:oV,useId:bV,unstable_isNewReconciler:!1};function $c(e,t){if(e&&e.defaultProps){t=Ni({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function wE(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ni({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Aj={isMounted:function(e){return(e=e._reactInternals)?Pp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Is(),a=sh(e),i=Fd(n,a);i.payload=t,r!=null&&(i.callback=r),t=ih(e,i,a),t!==null&&(nu(t,e,a,n),S2(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Is(),a=sh(e),i=Fd(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ih(e,i,a),t!==null&&(nu(t,e,a,n),S2(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Is(),n=sh(e),a=Fd(r,n);a.tag=2,t!=null&&(a.callback=t),t=ih(e,a,n),t!==null&&(nu(t,e,n,r),S2(t,e,n))}};function VR(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!Sy(r,n)||!Sy(a,i):!0}function jV(e,t,r){var n=!1,a=jh,i=t.contextType;return typeof i=="object"&&i!==null?i=vc(i):(a=Zs(t)?rp:ds.current,n=t.contextTypes,i=(n=n!=null)?dv(e,a):jh),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Aj,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function WR(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Aj.enqueueReplaceState(t,t.state,null)}function _E(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},E3(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=vc(i):(i=Zs(t)?rp:ds.current,a.context=dv(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(wE(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Aj.enqueueReplaceState(a,a.state,null),l_(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function pv(e,t){try{var r="",n=t;do r+=hoe(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function N5(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function SE(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Bse=typeof WeakMap=="function"?WeakMap:Map;function NV(e,t,r){r=Fd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){h_||(h_=!0,IE=n),SE(e,t)},r}function CV(e,t,r){r=Fd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){SE(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){SE(e,t),typeof n!="function"&&(oh===null?oh=new Set([this]):oh.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function HR(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Bse;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=ele.bind(null,e,t,r),t.then(e,e))}function GR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function KR(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Fd(-1,1),t.tag=2,ih(r,t,1))),r.lanes|=1),e)}var zse=of.ReactCurrentOwner,Ys=!1;function Ns(e,t,r,n){t.child=e===null?tV(t,null,r,n):hv(t,e.child,r,n)}function YR(e,t,r,n,a){r=r.render;var i=t.ref;return Yg(t,a),n=D3(e,t,r,n,i,a),r=M3(),e!==null&&!Ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Kd(e,t,a)):(pi&&r&&_3(t),t.flags|=1,Ns(e,t,n,a),t.child)}function XR(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!W3(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,AV(e,t,i,n,a)):(e=E2(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:Sy,r(s,n)&&e.ref===t.ref)return Kd(e,t,a)}return t.flags|=1,e=lh(i,n),e.ref=t.ref,e.return=t,t.child=e}function AV(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Sy(i,n)&&e.ref===t.ref)if(Ys=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ys=!0);else return t.lanes=e.lanes,Kd(e,t,a)}return jE(e,t,r,n,a)}function PV(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ya(Dg,wl),wl|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ya(Dg,wl),wl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ya(Dg,wl),wl|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ya(Dg,wl),wl|=n;return Ns(e,t,a,r),t.child}function EV(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function jE(e,t,r,n,a){var i=Zs(r)?rp:ds.current;return i=dv(t,i),Yg(t,a),r=D3(e,t,r,n,i,a),n=M3(),e!==null&&!Ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Kd(e,t,a)):(pi&&n&&_3(t),t.flags|=1,Ns(e,t,r,a),t.child)}function JR(e,t,r,n,a){if(Zs(r)){var i=!0;n_(t)}else i=!1;if(Yg(t,a),t.stateNode===null)C2(e,t),jV(t,r,n),_E(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=vc(u):(u=Zs(r)?rp:ds.current,u=dv(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||c!==u)&&WR(t,s,n,u),Lf=!1;var h=t.memoizedState;s.state=h,l_(t,n,s,a),c=t.memoizedState,l!==n||h!==c||Qs.current||Lf?(typeof d=="function"&&(wE(t,r,d,n),c=t.memoizedState),(l=Lf||VR(t,r,l,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,nV(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:$c(t.type,l),s.props=u,f=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=vc(c):(c=Zs(r)?rp:ds.current,c=dv(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==c)&&WR(t,s,n,c),Lf=!1,h=t.memoizedState,s.state=h,l_(t,n,s,a);var g=t.memoizedState;l!==f||h!==g||Qs.current||Lf?(typeof m=="function"&&(wE(t,r,m,n),g=t.memoizedState),(u=Lf||VR(t,r,u,n,h,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return NE(e,t,r,n,i,a)}function NE(e,t,r,n,a,i){EV(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&RR(t,r,!1),Kd(e,t,i);n=t.stateNode,zse.current=t;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=hv(t,e.child,null,i),t.child=hv(t,null,l,i)):Ns(e,t,l,i),t.memoizedState=n.state,a&&RR(t,r,!0),t.child}function kV(e){var t=e.stateNode;t.pendingContext?MR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&MR(e,t.context,!1),k3(e,t.containerInfo)}function QR(e,t,r,n,a){return fv(),j3(a),t.flags|=256,Ns(e,t,r,n),t.child}var CE={dehydrated:null,treeContext:null,retryLane:0};function AE(e){return{baseLanes:e,cachePool:null,transitions:null}}function OV(e,t,r){var n=t.pendingProps,a=bi.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ya(bi,a&1),e===null)return yE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=kj(s,n,0,null),e=Vm(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=AE(r),t.memoizedState=CE,e):$3(t,s));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return qse(e,t,s,n,l,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=lh(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=lh(l,i):(i=Vm(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?AE(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=CE,n}return i=e.child,e=i.sibling,n=lh(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function $3(e,t){return t=kj({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xw(e,t,r,n){return n!==null&&j3(n),hv(t,e.child,null,r),e=$3(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qse(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=N5(Error(or(422))),xw(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=kj({mode:"visible",children:n.children},a,0,null),i=Vm(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&hv(t,e.child,null,s),t.child.memoizedState=AE(s),t.memoizedState=CE,i);if(!(t.mode&1))return xw(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(or(419)),n=N5(i,n,void 0),xw(e,t,s,n)}if(l=(s&e.childLanes)!==0,Ys||l){if(n=ko,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Gd(e,a),nu(n,e,a,-1))}return V3(),n=N5(Error(or(421))),xw(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=tle.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Al=ah(a.nextSibling),Tl=t,pi=!0,Wc=null,e!==null&&(ac[ic++]=Od,ac[ic++]=Td,ac[ic++]=np,Od=e.id,Td=e.overflow,np=t),t=$3(t,n.children),t.flags|=4096,t)}function ZR(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),bE(e.return,t,r)}function C5(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function TV(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ns(e,t,n.children,r),n=bi.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ZR(e,r,t);else if(e.tag===19)ZR(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ya(bi,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&c_(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),C5(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&c_(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}C5(t,!0,r,null,i);break;case"together":C5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function C2(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kd(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ip|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(or(153));if(t.child!==null){for(e=t.child,r=lh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=lh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Use(e,t,r){switch(t.tag){case 3:kV(t),fv();break;case 5:aV(t);break;case 1:Zs(t.type)&&n_(t);break;case 4:k3(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ya(o_,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ya(bi,bi.current&1),t.flags|=128,null):r&t.child.childLanes?OV(e,t,r):(Ya(bi,bi.current&1),e=Kd(e,t,r),e!==null?e.sibling:null);Ya(bi,bi.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return TV(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ya(bi,bi.current),n)break;return null;case 22:case 23:return t.lanes=0,PV(e,t,r)}return Kd(e,t,r)}var IV,PE,DV,MV;IV=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};PE=function(){};DV=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Cm(qu.current);var i=null;switch(r){case"input":a=XP(e,a),n=XP(e,n),i=[];break;case"select":a=Ni({},a,{value:void 0}),n=Ni({},n,{value:void 0}),i=[];break;case"textarea":a=ZP(e,a),n=ZP(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=t_)}tE(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gy.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a?.[u],n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gy.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ai("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};MV=function(e,t,r,n){r!==n&&(t.flags|=4)};function Yx(e,t){if(!pi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Vse(e,t,r){var n=t.pendingProps;switch(S3(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zo(t),null;case 1:return Zs(t.type)&&r_(),Zo(t),null;case 3:return n=t.stateNode,mv(),ci(Qs),ci(ds),T3(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wc!==null&&(RE(Wc),Wc=null))),PE(e,t),Zo(t),null;case 5:O3(t);var a=Cm(Py.current);if(r=t.type,e!==null&&t.stateNode!=null)DV(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(or(166));return Zo(t),null}if(e=Cm(qu.current),gw(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Eu]=t,n[Cy]=i,e=(t.mode&1)!==0,r){case"dialog":ai("cancel",n),ai("close",n);break;case"iframe":case"object":case"embed":ai("load",n);break;case"video":case"audio":for(a=0;a<N0.length;a++)ai(N0[a],n);break;case"source":ai("error",n);break;case"img":case"image":case"link":ai("error",n),ai("load",n);break;case"details":ai("toggle",n);break;case"input":lR(n,i),ai("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ai("invalid",n);break;case"textarea":uR(n,i),ai("invalid",n)}tE(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&pw(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&pw(n.textContent,l,e),a=["children",""+l]):gy.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ai("scroll",n)}switch(r){case"input":sw(n),cR(n,i,!0);break;case"textarea":sw(n),dR(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=t_)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cU(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Eu]=t,e[Cy]=n,IV(e,t,!1,!1),t.stateNode=e;e:{switch(s=rE(r,n),r){case"dialog":ai("cancel",e),ai("close",e),a=n;break;case"iframe":case"object":case"embed":ai("load",e),a=n;break;case"video":case"audio":for(a=0;a<N0.length;a++)ai(N0[a],e);a=n;break;case"source":ai("error",e),a=n;break;case"img":case"image":case"link":ai("error",e),ai("load",e),a=n;break;case"details":ai("toggle",e),a=n;break;case"input":lR(e,n),a=XP(e,n),ai("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ni({},n,{value:void 0}),ai("invalid",e);break;case"textarea":uR(e,n),a=ZP(e,n),ai("invalid",e);break;default:a=n}tE(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fU(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uU(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vy(e,c):typeof c=="number"&&vy(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gy.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ai("scroll",e):c!=null&&l3(e,i,c,s))}switch(r){case"input":sw(e),cR(e,n,!1);break;case"textarea":sw(e),dR(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Sh(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Wg(e,!!n.multiple,i,!1):n.defaultValue!=null&&Wg(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=t_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zo(t),null;case 6:if(e&&t.stateNode!=null)MV(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(or(166));if(r=Cm(Py.current),Cm(qu.current),gw(t)){if(n=t.stateNode,r=t.memoizedProps,n[Eu]=t,(i=n.nodeValue!==r)&&(e=Tl,e!==null))switch(e.tag){case 3:pw(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pw(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Eu]=t,t.stateNode=n}return Zo(t),null;case 13:if(ci(bi),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pi&&Al!==null&&t.mode&1&&!(t.flags&128))ZU(),fv(),t.flags|=98560,i=!1;else if(i=gw(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(or(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(or(317));i[Eu]=t}else fv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zo(t),i=!1}else Wc!==null&&(RE(Wc),Wc=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||bi.current&1?yo===0&&(yo=3):V3())),t.updateQueue!==null&&(t.flags|=4),Zo(t),null);case 4:return mv(),PE(e,t),e===null&&jy(t.stateNode.containerInfo),Zo(t),null;case 10:return A3(t.type._context),Zo(t),null;case 17:return Zs(t.type)&&r_(),Zo(t),null;case 19:if(ci(bi),i=t.memoizedState,i===null)return Zo(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)Yx(i,!1);else{if(yo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=c_(e),s!==null){for(t.flags|=128,Yx(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ya(bi,bi.current&1|2),t.child}e=e.sibling}i.tail!==null&&Bi()>gv&&(t.flags|=128,n=!0,Yx(i,!1),t.lanes=4194304)}else{if(!n)if(e=c_(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yx(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!pi)return Zo(t),null}else 2*Bi()-i.renderingStartTime>gv&&r!==1073741824&&(t.flags|=128,n=!0,Yx(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Bi(),t.sibling=null,r=bi.current,Ya(bi,n?r&1|2:r&1),t):(Zo(t),null);case 22:case 23:return U3(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?wl&1073741824&&(Zo(t),t.subtreeFlags&6&&(t.flags|=8192)):Zo(t),null;case 24:return null;case 25:return null}throw Error(or(156,t.tag))}function Wse(e,t){switch(S3(t),t.tag){case 1:return Zs(t.type)&&r_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mv(),ci(Qs),ci(ds),T3(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return O3(t),null;case 13:if(ci(bi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(or(340));fv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ci(bi),null;case 4:return mv(),null;case 10:return A3(t.type._context),null;case 22:case 23:return U3(),null;case 24:return null;default:return null}}var yw=!1,ss=!1,Hse=typeof WeakSet=="function"?WeakSet:Set,Rr=null;function Ig(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ti(e,t,n)}else r.current=null}function EE(e,t,r){try{r()}catch(n){Ti(e,t,n)}}var eL=!1;function Gse(e,t){if(fE=Q2,e=BU(),w3(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=s),h===i&&++d===n&&(c=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(hE={focusedElem:e,selectionRange:r},Q2=!1,Rr=t;Rr!==null;)if(t=Rr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Rr=e;else for(;Rr!==null;){t=Rr;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:$c(t.type,p),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(or(163))}}catch(_){Ti(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Rr=e;break}Rr=t.return}return g=eL,eL=!1,g}function F0(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&EE(t,r,i)}a=a.next}while(a!==n)}}function Pj(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kE(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function RV(e){var t=e.alternate;t!==null&&(e.alternate=null,RV(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Eu],delete t[Cy],delete t[gE],delete t[Ese],delete t[kse])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function LV(e){return e.tag===5||e.tag===3||e.tag===4}function tL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||LV(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function OE(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=t_));else if(n!==4&&(e=e.child,e!==null))for(OE(e,t,r),e=e.sibling;e!==null;)OE(e,t,r),e=e.sibling}function TE(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(TE(e,t,r),e=e.sibling;e!==null;)TE(e,t,r),e=e.sibling}var qo=null,Bc=!1;function Sf(e,t,r){for(r=r.child;r!==null;)$V(e,t,r),r=r.sibling}function $V(e,t,r){if(zu&&typeof zu.onCommitFiberUnmount=="function")try{zu.onCommitFiberUnmount(bj,r)}catch{}switch(r.tag){case 5:ss||Ig(r,t);case 6:var n=qo,a=Bc;qo=null,Sf(e,t,r),qo=n,Bc=a,qo!==null&&(Bc?(e=qo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qo.removeChild(r.stateNode));break;case 18:qo!==null&&(Bc?(e=qo,r=r.stateNode,e.nodeType===8?y5(e.parentNode,r):e.nodeType===1&&y5(e,r),wy(e)):y5(qo,r.stateNode));break;case 4:n=qo,a=Bc,qo=r.stateNode.containerInfo,Bc=!0,Sf(e,t,r),qo=n,Bc=a;break;case 0:case 11:case 14:case 15:if(!ss&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&EE(r,t,s),a=a.next}while(a!==n)}Sf(e,t,r);break;case 1:if(!ss&&(Ig(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ti(r,t,l)}Sf(e,t,r);break;case 21:Sf(e,t,r);break;case 22:r.mode&1?(ss=(n=ss)||r.memoizedState!==null,Sf(e,t,r),ss=n):Sf(e,t,r);break;default:Sf(e,t,r)}}function rL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Hse),t.forEach(function(n){var a=rle.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Oc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:qo=l.stateNode,Bc=!1;break e;case 3:qo=l.stateNode.containerInfo,Bc=!0;break e;case 4:qo=l.stateNode.containerInfo,Bc=!0;break e}l=l.return}if(qo===null)throw Error(or(160));$V(i,s,a),qo=null,Bc=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ti(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)FV(t,e),t=t.sibling}function FV(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Oc(t,e),Su(e),n&4){try{F0(3,e,e.return),Pj(3,e)}catch(p){Ti(e,e.return,p)}try{F0(5,e,e.return)}catch(p){Ti(e,e.return,p)}}break;case 1:Oc(t,e),Su(e),n&512&&r!==null&&Ig(r,r.return);break;case 5:if(Oc(t,e),Su(e),n&512&&r!==null&&Ig(r,r.return),e.flags&32){var a=e.stateNode;try{vy(a,"")}catch(p){Ti(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&sU(a,i),rE(l,s);var u=rE(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?fU(a,f):d==="dangerouslySetInnerHTML"?uU(a,f):d==="children"?vy(a,f):l3(a,d,f,u)}switch(l){case"input":JP(a,i);break;case"textarea":lU(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Wg(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Wg(a,!!i.multiple,i.defaultValue,!0):Wg(a,!!i.multiple,i.multiple?[]:"",!1))}a[Cy]=i}catch(p){Ti(e,e.return,p)}}break;case 6:if(Oc(t,e),Su(e),n&4){if(e.stateNode===null)throw Error(or(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){Ti(e,e.return,p)}}break;case 3:if(Oc(t,e),Su(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wy(t.containerInfo)}catch(p){Ti(e,e.return,p)}break;case 4:Oc(t,e),Su(e);break;case 13:Oc(t,e),Su(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(z3=Bi())),n&4&&rL(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ss=(u=ss)||d,Oc(t,e),ss=u):Oc(t,e),Su(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Rr=e,d=e.child;d!==null;){for(f=Rr=d;Rr!==null;){switch(h=Rr,m=h.child,h.tag){case 0:case 11:case 14:case 15:F0(4,h,h.return);break;case 1:Ig(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Ti(n,r,p)}}break;case 5:Ig(h,h.return);break;case 22:if(h.memoizedState!==null){aL(f);continue}}m!==null?(m.return=h,Rr=m):aL(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dU("display",s))}catch(p){Ti(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Ti(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Oc(t,e),Su(e),n&4&&rL(e);break;case 21:break;default:Oc(t,e),Su(e)}}function Su(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(LV(r)){var n=r;break e}r=r.return}throw Error(or(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(vy(a,""),n.flags&=-33);var i=tL(e);TE(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,l=tL(e);OE(e,l,s);break;default:throw Error(or(161))}}catch(c){Ti(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kse(e,t,r){Rr=e,BV(e)}function BV(e,t,r){for(var n=(e.mode&1)!==0;Rr!==null;){var a=Rr,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||yw;if(!s){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ss;l=yw;var u=ss;if(yw=s,(ss=c)&&!u)for(Rr=a;Rr!==null;)s=Rr,c=s.child,s.tag===22&&s.memoizedState!==null?iL(a):c!==null?(c.return=s,Rr=c):iL(a);for(;i!==null;)Rr=i,BV(i),i=i.sibling;Rr=a,yw=l,ss=u}nL(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Rr=i):nL(e)}}function nL(e){for(;Rr!==null;){var t=Rr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ss||Pj(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ss)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:$c(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zR(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zR(t,s,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&wy(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(or(163))}ss||t.flags&512&&kE(t)}catch(h){Ti(t,t.return,h)}}if(t===e){Rr=null;break}if(r=t.sibling,r!==null){r.return=t.return,Rr=r;break}Rr=t.return}}function aL(e){for(;Rr!==null;){var t=Rr;if(t===e){Rr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Rr=r;break}Rr=t.return}}function iL(e){for(;Rr!==null;){var t=Rr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Pj(4,t)}catch(c){Ti(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ti(t,a,c)}}var i=t.return;try{kE(t)}catch(c){Ti(t,i,c)}break;case 5:var s=t.return;try{kE(t)}catch(c){Ti(t,s,c)}}}catch(c){Ti(t,t.return,c)}if(t===e){Rr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Rr=l;break}Rr=t.return}}var Yse=Math.ceil,f_=of.ReactCurrentDispatcher,F3=of.ReactCurrentOwner,mc=of.ReactCurrentBatchConfig,ga=0,ko=null,eo=null,Wo=0,wl=0,Dg=Mh(0),yo=0,Ty=null,ip=0,Ej=0,B3=0,B0=null,Hs=null,z3=0,gv=1/0,jd=null,h_=!1,IE=null,oh=null,bw=!1,Kf=null,m_=0,z0=0,DE=null,A2=-1,P2=0;function Is(){return ga&6?Bi():A2!==-1?A2:A2=Bi()}function sh(e){return e.mode&1?ga&2&&Wo!==0?Wo&-Wo:Tse.transition!==null?(P2===0&&(P2=jU()),P2):(e=ka,e!==0||(e=window.event,e=e===void 0?16:OU(e.type)),e):1}function nu(e,t,r,n){if(50<z0)throw z0=0,DE=null,Error(or(185));Gb(e,r,n),(!(ga&2)||e!==ko)&&(e===ko&&(!(ga&2)&&(Ej|=r),yo===4&&qf(e,Wo)),el(e,n),r===1&&ga===0&&!(t.mode&1)&&(gv=Bi()+500,Nj&&Rh()))}function el(e,t){var r=e.callbackNode;Toe(e,t);var n=J2(e,e===ko?Wo:0);if(n===0)r!==null&&mR(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&mR(r),t===1)e.tag===0?Ose(oL.bind(null,e)):XU(oL.bind(null,e)),Ase(function(){!(ga&6)&&Rh()}),r=null;else{switch(NU(n)){case 1:r=h3;break;case 4:r=_U;break;case 16:r=X2;break;case 536870912:r=SU;break;default:r=X2}r=KV(r,zV.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zV(e,t){if(A2=-1,P2=0,ga&6)throw Error(or(327));var r=e.callbackNode;if(Xg()&&e.callbackNode!==r)return null;var n=J2(e,e===ko?Wo:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=p_(e,n);else{t=n;var a=ga;ga|=2;var i=UV();(ko!==e||Wo!==t)&&(jd=null,gv=Bi()+500,Um(e,t));do try{Qse();break}catch(l){qV(e,l)}while(1);C3(),f_.current=i,ga=a,eo!==null?t=0:(ko=null,Wo=0,t=yo)}if(t!==0){if(t===2&&(a=sE(e),a!==0&&(n=a,t=ME(e,a))),t===1)throw r=Ty,Um(e,0),qf(e,n),el(e,Bi()),r;if(t===6)qf(e,n);else{if(a=e.current.alternate,!(n&30)&&!Xse(a)&&(t=p_(e,n),t===2&&(i=sE(e),i!==0&&(n=i,t=ME(e,i))),t===1))throw r=Ty,Um(e,0),qf(e,n),el(e,Bi()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(or(345));case 2:um(e,Hs,jd);break;case 3:if(qf(e,n),(n&130023424)===n&&(t=z3+500-Bi(),10<t)){if(J2(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Is(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pE(um.bind(null,e,Hs,jd),t);break}um(e,Hs,jd);break;case 4:if(qf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-ru(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=Bi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yse(n/1960))-n,10<n){e.timeoutHandle=pE(um.bind(null,e,Hs,jd),n);break}um(e,Hs,jd);break;case 5:um(e,Hs,jd);break;default:throw Error(or(329))}}}return el(e,Bi()),e.callbackNode===r?zV.bind(null,e):null}function ME(e,t){var r=B0;return e.current.memoizedState.isDehydrated&&(Um(e,t).flags|=256),e=p_(e,t),e!==2&&(t=Hs,Hs=r,t!==null&&RE(t)),e}function RE(e){Hs===null?Hs=e:Hs.push.apply(Hs,e)}function Xse(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!lu(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qf(e,t){for(t&=~B3,t&=~Ej,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ru(t),n=1<<r;e[r]=-1,t&=~n}}function oL(e){if(ga&6)throw Error(or(327));Xg();var t=J2(e,0);if(!(t&1))return el(e,Bi()),null;var r=p_(e,t);if(e.tag!==0&&r===2){var n=sE(e);n!==0&&(t=n,r=ME(e,n))}if(r===1)throw r=Ty,Um(e,0),qf(e,t),el(e,Bi()),r;if(r===6)throw Error(or(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,um(e,Hs,jd),el(e,Bi()),null}function q3(e,t){var r=ga;ga|=1;try{return e(t)}finally{ga=r,ga===0&&(gv=Bi()+500,Nj&&Rh())}}function op(e){Kf!==null&&Kf.tag===0&&!(ga&6)&&Xg();var t=ga;ga|=1;var r=mc.transition,n=ka;try{if(mc.transition=null,ka=1,e)return e()}finally{ka=n,mc.transition=r,ga=t,!(ga&6)&&Rh()}}function U3(){wl=Dg.current,ci(Dg)}function Um(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Cse(r)),eo!==null)for(r=eo.return;r!==null;){var n=r;switch(S3(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&r_();break;case 3:mv(),ci(Qs),ci(ds),T3();break;case 5:O3(n);break;case 4:mv();break;case 13:ci(bi);break;case 19:ci(bi);break;case 10:A3(n.type._context);break;case 22:case 23:U3()}r=r.return}if(ko=e,eo=e=lh(e.current,null),Wo=wl=t,yo=0,Ty=null,B3=Ej=ip=0,Hs=B0=null,Nm!==null){for(t=0;t<Nm.length;t++)if(r=Nm[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Nm=null}return e}function qV(e,t){do{var r=eo;try{if(C3(),j2.current=d_,u_){for(var n=Si.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}u_=!1}if(ap=0,Po=mo=Si=null,$0=!1,Ey=0,F3.current=null,r===null||r.return===null){yo=1,Ty=t,eo=null;break}e:{var i=e,s=r.return,l=r,c=t;if(t=Wo,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=GR(s);if(m!==null){m.flags&=-257,KR(m,s,l,i,t),m.mode&1&&HR(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){HR(i,u,t),V3();break e}c=Error(or(426))}}else if(pi&&l.mode&1){var x=GR(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),KR(x,s,l,i,t),j3(pv(c,l));break e}}i=c=pv(c,l),yo!==4&&(yo=2),B0===null?B0=[i]:B0.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=NV(i,c,t);BR(i,y);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oh===null||!oh.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=CV(i,l,t);BR(i,_);break e}}i=i.return}while(i!==null)}WV(r)}catch(j){t=j,eo===r&&r!==null&&(eo=r=r.return);continue}break}while(1)}function UV(){var e=f_.current;return f_.current=d_,e===null?d_:e}function V3(){(yo===0||yo===3||yo===2)&&(yo=4),ko===null||!(ip&268435455)&&!(Ej&268435455)||qf(ko,Wo)}function p_(e,t){var r=ga;ga|=2;var n=UV();(ko!==e||Wo!==t)&&(jd=null,Um(e,t));do try{Jse();break}catch(a){qV(e,a)}while(1);if(C3(),ga=r,f_.current=n,eo!==null)throw Error(or(261));return ko=null,Wo=0,yo}function Jse(){for(;eo!==null;)VV(eo)}function Qse(){for(;eo!==null&&!Soe();)VV(eo)}function VV(e){var t=GV(e.alternate,e,wl);e.memoizedProps=e.pendingProps,t===null?WV(e):eo=t,F3.current=null}function WV(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Wse(r,t),r!==null){r.flags&=32767,eo=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yo=6,eo=null;return}}else if(r=Vse(r,t,wl),r!==null){eo=r;return}if(t=t.sibling,t!==null){eo=t;return}eo=t=e}while(t!==null);yo===0&&(yo=5)}function um(e,t,r){var n=ka,a=mc.transition;try{mc.transition=null,ka=1,Zse(e,t,r,n)}finally{mc.transition=a,ka=n}return null}function Zse(e,t,r,n){do Xg();while(Kf!==null);if(ga&6)throw Error(or(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(or(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Ioe(e,i),e===ko&&(eo=ko=null,Wo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bw||(bw=!0,KV(X2,function(){return Xg(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=mc.transition,mc.transition=null;var s=ka;ka=1;var l=ga;ga|=4,F3.current=null,Gse(e,r),FV(r,e),yse(hE),Q2=!!fE,hE=fE=null,e.current=r,Kse(r),joe(),ga=l,ka=s,mc.transition=i}else e.current=r;if(bw&&(bw=!1,Kf=e,m_=a),i=e.pendingLanes,i===0&&(oh=null),Aoe(r.stateNode),el(e,Bi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(h_)throw h_=!1,e=IE,IE=null,e;return m_&1&&e.tag!==0&&Xg(),i=e.pendingLanes,i&1?e===DE?z0++:(z0=0,DE=e):z0=0,Rh(),null}function Xg(){if(Kf!==null){var e=NU(m_),t=mc.transition,r=ka;try{if(mc.transition=null,ka=16>e?16:e,Kf===null)var n=!1;else{if(e=Kf,Kf=null,m_=0,ga&6)throw Error(or(331));var a=ga;for(ga|=4,Rr=e.current;Rr!==null;){var i=Rr,s=i.child;if(Rr.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Rr=u;Rr!==null;){var d=Rr;switch(d.tag){case 0:case 11:case 15:F0(8,d,i)}var f=d.child;if(f!==null)f.return=d,Rr=f;else for(;Rr!==null;){d=Rr;var h=d.sibling,m=d.return;if(RV(d),d===u){Rr=null;break}if(h!==null){h.return=m,Rr=h;break}Rr=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}Rr=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,Rr=s;else e:for(;Rr!==null;){if(i=Rr,i.flags&2048)switch(i.tag){case 0:case 11:case 15:F0(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Rr=y;break e}Rr=i.return}}var b=e.current;for(Rr=b;Rr!==null;){s=Rr;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,Rr=w;else e:for(s=b;Rr!==null;){if(l=Rr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pj(9,l)}}catch(j){Ti(l,l.return,j)}if(l===s){Rr=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Rr=_;break e}Rr=l.return}}if(ga=a,Rh(),zu&&typeof zu.onPostCommitFiberRoot=="function")try{zu.onPostCommitFiberRoot(bj,e)}catch{}n=!0}return n}finally{ka=r,mc.transition=t}}return!1}function sL(e,t,r){t=pv(r,t),t=NV(e,t,1),e=ih(e,t,1),t=Is(),e!==null&&(Gb(e,1,t),el(e,t))}function Ti(e,t,r){if(e.tag===3)sL(e,e,r);else for(;t!==null;){if(t.tag===3){sL(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(oh===null||!oh.has(n))){e=pv(r,e),e=CV(t,e,1),t=ih(t,e,1),e=Is(),t!==null&&(Gb(t,1,e),el(t,e));break}}t=t.return}}function ele(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Is(),e.pingedLanes|=e.suspendedLanes&r,ko===e&&(Wo&r)===r&&(yo===4||yo===3&&(Wo&130023424)===Wo&&500>Bi()-z3?Um(e,0):B3|=r),el(e,t)}function HV(e,t){t===0&&(e.mode&1?(t=uw,uw<<=1,!(uw&130023424)&&(uw=4194304)):t=1);var r=Is();e=Gd(e,t),e!==null&&(Gb(e,t,r),el(e,r))}function tle(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),HV(e,r)}function rle(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(or(314))}n!==null&&n.delete(t),HV(e,r)}var GV;GV=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qs.current)Ys=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ys=!1,Use(e,t,r);Ys=!!(e.flags&131072)}else Ys=!1,pi&&t.flags&1048576&&JU(t,i_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;C2(e,t),e=t.pendingProps;var a=dv(t,ds.current);Yg(t,r),a=D3(null,t,n,e,a,r);var i=M3();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zs(n)?(i=!0,n_(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,E3(t),a.updater=Aj,t.stateNode=a,a._reactInternals=t,_E(t,n,e,r),t=NE(null,t,n,!0,i,r)):(t.tag=0,pi&&i&&_3(t),Ns(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(C2(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=ale(n),e=$c(n,e),a){case 0:t=jE(null,t,n,e,r);break e;case 1:t=JR(null,t,n,e,r);break e;case 11:t=YR(null,t,n,e,r);break e;case 14:t=XR(null,t,n,$c(n.type,e),r);break e}throw Error(or(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$c(n,a),jE(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$c(n,a),JR(e,t,n,a,r);case 3:e:{if(kV(t),e===null)throw Error(or(387));n=t.pendingProps,i=t.memoizedState,a=i.element,nV(e,t),l_(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=pv(Error(or(423)),t),t=QR(e,t,n,r,a);break e}else if(n!==a){a=pv(Error(or(424)),t),t=QR(e,t,n,r,a);break e}else for(Al=ah(t.stateNode.containerInfo.firstChild),Tl=t,pi=!0,Wc=null,r=tV(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fv(),n===a){t=Kd(e,t,r);break e}Ns(e,t,n,r)}t=t.child}return t;case 5:return aV(t),e===null&&yE(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,mE(n,a)?s=null:i!==null&&mE(n,i)&&(t.flags|=32),EV(e,t),Ns(e,t,s,r),t.child;case 6:return e===null&&yE(t),null;case 13:return OV(e,t,r);case 4:return k3(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=hv(t,null,n,r):Ns(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$c(n,a),YR(e,t,n,a,r);case 7:return Ns(e,t,t.pendingProps,r),t.child;case 8:return Ns(e,t,t.pendingProps.children,r),t.child;case 12:return Ns(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Ya(o_,n._currentValue),n._currentValue=s,i!==null)if(lu(i.value,s)){if(i.children===a.children&&!Qs.current){t=Kd(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Fd(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),bE(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(or(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),bE(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ns(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Yg(t,r),a=vc(a),n=n(a),t.flags|=1,Ns(e,t,n,r),t.child;case 14:return n=t.type,a=$c(n,t.pendingProps),a=$c(n.type,a),XR(e,t,n,a,r);case 15:return AV(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$c(n,a),C2(e,t),t.tag=1,Zs(n)?(e=!0,n_(t)):e=!1,Yg(t,r),jV(t,n,a),_E(t,n,a,r),NE(null,t,n,!0,e,r);case 19:return TV(e,t,r);case 22:return PV(e,t,r)}throw Error(or(156,t.tag))};function KV(e,t){return wU(e,t)}function nle(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cc(e,t,r,n){return new nle(e,t,r,n)}function W3(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ale(e){if(typeof e=="function")return W3(e)?1:0;if(e!=null){if(e=e.$$typeof,e===u3)return 11;if(e===d3)return 14}return 2}function lh(e,t){var r=e.alternate;return r===null?(r=cc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function E2(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")W3(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case jg:return Vm(r.children,a,i,t);case c3:s=8,a|=8;break;case HP:return e=cc(12,r,t,a|2),e.elementType=HP,e.lanes=i,e;case GP:return e=cc(13,r,t,a),e.elementType=GP,e.lanes=i,e;case KP:return e=cc(19,r,t,a),e.elementType=KP,e.lanes=i,e;case aU:return kj(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rU:s=10;break e;case nU:s=9;break e;case u3:s=11;break e;case d3:s=14;break e;case Rf:s=16,n=null;break e}throw Error(or(130,e==null?e:typeof e,""))}return t=cc(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Vm(e,t,r,n){return e=cc(7,e,n,t),e.lanes=r,e}function kj(e,t,r,n){return e=cc(22,e,n,t),e.elementType=aU,e.lanes=r,e.stateNode={isHidden:!1},e}function A5(e,t,r){return e=cc(6,e,null,t),e.lanes=r,e}function P5(e,t,r){return t=cc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ile(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l5(0),this.expirationTimes=l5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l5(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function H3(e,t,r,n,a,i,s,l,c){return e=new ile(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=cc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},E3(i),e}function ole(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sg,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function YV(e){if(!e)return jh;e=e._reactInternals;e:{if(Pp(e)!==e||e.tag!==1)throw Error(or(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(or(171))}if(e.tag===1){var r=e.type;if(Zs(r))return YU(e,r,t)}return t}function XV(e,t,r,n,a,i,s,l,c){return e=H3(r,n,!0,e,a,i,s,l,c),e.context=YV(null),r=e.current,n=Is(),a=sh(r),i=Fd(n,a),i.callback=t??null,ih(r,i,a),e.current.lanes=a,Gb(e,a,n),el(e,n),e}function Oj(e,t,r,n){var a=t.current,i=Is(),s=sh(a);return r=YV(r),t.context===null?t.context=r:t.pendingContext=r,t=Fd(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ih(a,t,s),e!==null&&(nu(e,a,s,i),S2(e,a,s)),s}function g_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function G3(e,t){lL(e,t),(e=e.alternate)&&lL(e,t)}function sle(){return null}var JV=typeof reportError=="function"?reportError:function(e){console.error(e)};function K3(e){this._internalRoot=e}Tj.prototype.render=K3.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(or(409));Oj(e,t,null,null)};Tj.prototype.unmount=K3.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;op(function(){Oj(null,e,null,null)}),t[Hd]=null}};function Tj(e){this._internalRoot=e}Tj.prototype.unstable_scheduleHydration=function(e){if(e){var t=PU();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zf.length&&t!==0&&t<zf[r].priority;r++);zf.splice(r,0,e),r===0&&kU(e)}};function Y3(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ij(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cL(){}function lle(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=g_(s);i.call(u)}}var s=XV(t,n,e,0,null,!1,!1,"",cL);return e._reactRootContainer=s,e[Hd]=s.current,jy(e.nodeType===8?e.parentNode:e),op(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=g_(c);l.call(u)}}var c=H3(e,0,!1,null,null,!1,!1,"",cL);return e._reactRootContainer=c,e[Hd]=c.current,jy(e.nodeType===8?e.parentNode:e),op(function(){Oj(t,c,r,n)}),c}function Dj(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var l=a;a=function(){var c=g_(s);l.call(c)}}Oj(t,s,e,a)}else s=lle(r,t,e,a,n);return g_(s)}CU=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=j0(t.pendingLanes);r!==0&&(m3(t,r|1),el(t,Bi()),!(ga&6)&&(gv=Bi()+500,Rh()))}break;case 13:op(function(){var n=Gd(e,1);if(n!==null){var a=Is();nu(n,e,1,a)}}),G3(e,1)}};p3=function(e){if(e.tag===13){var t=Gd(e,134217728);if(t!==null){var r=Is();nu(t,e,134217728,r)}G3(e,134217728)}};AU=function(e){if(e.tag===13){var t=sh(e),r=Gd(e,t);if(r!==null){var n=Is();nu(r,e,t,n)}G3(e,t)}};PU=function(){return ka};EU=function(e,t){var r=ka;try{return ka=e,t()}finally{ka=r}};aE=function(e,t,r){switch(t){case"input":if(JP(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=jj(n);if(!a)throw Error(or(90));oU(n),JP(n,a)}}}break;case"textarea":lU(e,r);break;case"select":t=r.value,t!=null&&Wg(e,!!r.multiple,t,!1)}};pU=q3;gU=op;var cle={usingClientEntryPoint:!1,Events:[Yb,Pg,jj,hU,mU,q3]},Xx={findFiberByHostInstance:jm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ule={bundleType:Xx.bundleType,version:Xx.version,rendererPackageName:Xx.rendererPackageName,rendererConfig:Xx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:of.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yU(e),e===null?null:e.stateNode},findFiberByHostInstance:Xx.findFiberByHostInstance||sle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ww=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ww.isDisabled&&ww.supportsFiber)try{bj=ww.inject(ule),zu=ww}catch{}}Bl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cle;Bl.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Y3(t))throw Error(or(200));return ole(e,t,null,r)};Bl.createRoot=function(e,t){if(!Y3(e))throw Error(or(299));var r=!1,n="",a=JV;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=H3(e,1,!1,null,null,r,!1,n,a),e[Hd]=t.current,jy(e.nodeType===8?e.parentNode:e),new K3(t)};Bl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(or(188)):(e=Object.keys(e).join(","),Error(or(268,e)));return e=yU(t),e=e===null?null:e.stateNode,e};Bl.flushSync=function(e){return op(e)};Bl.hydrate=function(e,t,r){if(!Ij(t))throw Error(or(200));return Dj(null,e,t,!0,r)};Bl.hydrateRoot=function(e,t,r){if(!Y3(e))throw Error(or(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=JV;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=XV(t,null,e,1,r??null,a,!1,i,s),e[Hd]=t.current,jy(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Tj(t)};Bl.render=function(e,t,r){if(!Ij(t))throw Error(or(200));return Dj(null,e,t,!1,r)};Bl.unmountComponentAtNode=function(e){if(!Ij(e))throw Error(or(40));return e._reactRootContainer?(op(function(){Dj(null,null,e,!1,function(){e._reactRootContainer=null,e[Hd]=null})}),!0):!1};Bl.unstable_batchedUpdates=q3;Bl.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ij(r))throw Error(or(200));if(e==null||e._reactInternals===void 0)throw Error(or(38));return Dj(e,t,r,!1,n)};Bl.version="18.3.1-next-f1338f8080-20240426";function QV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QV)}catch(e){console.error(e)}}QV(),Q9.exports=Bl;var Lh=Q9.exports;const ZV=fa(Lh);var uL=Lh;VP.createRoot=uL.createRoot,VP.hydrateRoot=uL.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iy.apply(this,arguments)}var Yf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yf||(Yf={}));const dL="popstate";function dle(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:s,hash:l}=n.location;return LE("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:v_(a)}return hle(t,r,null,e)}function ji(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fle(){return Math.random().toString(36).substr(2,8)}function fL(e,t){return{usr:e.state,key:e.key,idx:t}}function LE(e,t,r,n){return r===void 0&&(r=null),Iy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sx(t):t,{state:r,key:t&&t.key||n||fle()})}function v_(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sx(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function hle(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l=Yf.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(Iy({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){l=Yf.Pop;let x=d(),y=x==null?null:x-u;u=x,c&&c({action:l,location:p.location,delta:y})}function h(x,y){l=Yf.Push;let b=LE(p.location,x,y);r&&r(b,x),u=d()+1;let w=fL(b,u),_=p.createHref(b);try{s.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:p.location,delta:1})}function m(x,y){l=Yf.Replace;let b=LE(p.location,x,y);r&&r(b,x),u=d();let w=fL(b,u),_=p.createHref(b);s.replaceState(w,"",_),i&&c&&c({action:l,location:p.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof x=="string"?x:v_(x);return b=b.replace(/ $/,"%20"),ji(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let p={get action(){return l},get location(){return e(a,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(dL,f),c=x,()=>{a.removeEventListener(dL,f),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return s.go(x)}};return p}var hL;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hL||(hL={}));function mle(e,t,r){return r===void 0&&(r="/"),ple(e,t,r,!1)}function ple(e,t,r,n){let a=typeof t=="string"?sx(t):t,i=vv(a.pathname||"/",r);if(i==null)return null;let s=tW(e);gle(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=Ale(i);l=Nle(s[c],u,n)}return l}function tW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(ji(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ch([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ji(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tW(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Sle(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,s);else for(let c of rW(i.path))a(i,s,c)}),t}function rW(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=rW(n.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function gle(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:jle(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const vle=/^:[\w-]+$/,xle=3,yle=2,ble=1,wle=10,_le=-2,mL=e=>e==="*";function Sle(e,t){let r=e.split("/"),n=r.length;return r.some(mL)&&(n+=_le),t&&(n+=yle),r.filter(a=>!mL(a)).reduce((a,i)=>a+(vle.test(i)?xle:i===""?ble:wle),n)}function jle(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Nle(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},i="/",s=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=x_({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=x_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:ch([i,f.pathname]),pathnameBase:Ole(ch([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=ch([i,f.pathnameBase]))}return s}function x_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Cle(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let p=l[f]||"";s=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function Cle(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),eW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Ale(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return eW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Ple(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?sx(e):e;return{pathname:r?r.startsWith("/")?r:Ele(r,t):t,search:Tle(n),hash:Ile(a)}}function Ele(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function E5(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kle(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function X3(e,t){let r=kle(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function J3(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=sx(e):(a=Iy({},e),ji(!a.pathname||!a.pathname.includes("?"),E5("?","pathname","search",a)),ji(!a.pathname||!a.pathname.includes("#"),E5("#","pathname","hash",a)),ji(!a.search||!a.search.includes("#"),E5("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=Ple(a,l),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ch=e=>e.join("/").replace(/\/\/+/g,"/"),Ole=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Tle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ile=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Dle(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nW=["post","put","patch","delete"];new Set(nW);const Mle=["get",...nW];new Set(Mle);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dy.apply(this,arguments)}const Mj=v.createContext(null),aW=v.createContext(null),sf=v.createContext(null),Rj=v.createContext(null),$h=v.createContext({outlet:null,matches:[],isDataRoute:!1}),iW=v.createContext(null);function Rle(e,t){let{relative:r}=t===void 0?{}:t;lx()||ji(!1);let{basename:n,navigator:a}=v.useContext(sf),{hash:i,pathname:s,search:l}=Lj(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:ch([n,s])),a.createHref({pathname:c,search:l,hash:i})}function lx(){return v.useContext(Rj)!=null}function Ko(){return lx()||ji(!1),v.useContext(Rj).location}function oW(e){v.useContext(sf).static||v.useLayoutEffect(e)}function wc(){let{isDataRoute:e}=v.useContext($h);return e?Yle():Lle()}function Lle(){lx()||ji(!1);let e=v.useContext(Mj),{basename:t,future:r,navigator:n}=v.useContext(sf),{matches:a}=v.useContext($h),{pathname:i}=Ko(),s=JSON.stringify(X3(a,r.v7_relativeSplatPath)),l=v.useRef(!1);return oW(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=J3(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ch([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}function Lj(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=v.useContext(sf),{matches:a}=v.useContext($h),{pathname:i}=Ko(),s=JSON.stringify(X3(a,n.v7_relativeSplatPath));return v.useMemo(()=>J3(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function $le(e,t){return Fle(e,t)}function Fle(e,t,r,n){lx()||ji(!1);let{navigator:a}=v.useContext(sf),{matches:i}=v.useContext($h),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Ko(),d;if(t){var f;let x=typeof t=="string"?sx(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||ji(!1),d=x}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=mle(e,{pathname:m}),p=Vle(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ch([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ch([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&p?v.createElement(Rj.Provider,{value:{location:Dy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yf.Pop}},p):p}function Ble(){let e=Kle(),t=Dle(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,i)}const zle=v.createElement(Ble,null);class qle extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement($h.Provider,{value:this.props.routeContext},v.createElement(iW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ule(e){let{routeContext:t,match:r,children:n}=e,a=v.useContext(Mj);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement($h.Provider,{value:t},n)}function Vle(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=s.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);d>=0||ji(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let m,g=!1,p=null,x=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||zle,c&&(u<0&&h===0?(Xle("route-fallback",!1),g=!0,x=null):u===h&&(g=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,h+1)),b=()=>{let w;return m?w=p:g?w=x:f.route.Component?w=v.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,v.createElement(Ule,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?v.createElement(qle,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var sW=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(sW||{}),y_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(y_||{});function Wle(e){let t=v.useContext(Mj);return t||ji(!1),t}function Hle(e){let t=v.useContext(aW);return t||ji(!1),t}function Gle(e){let t=v.useContext($h);return t||ji(!1),t}function lW(e){let t=Gle(),r=t.matches[t.matches.length-1];return r.route.id||ji(!1),r.route.id}function Kle(){var e;let t=v.useContext(iW),r=Hle(y_.UseRouteError),n=lW(y_.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Yle(){let{router:e}=Wle(sW.UseNavigateStable),t=lW(y_.UseNavigateStable),r=v.useRef(!1);return oW(()=>{r.current=!0}),v.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Dy({fromRouteId:t},i)))},[e,t])}const pL={};function Xle(e,t,r){!t&&!pL[e]&&(pL[e]=!0)}function Jle(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Qle(e){let{to:t,replace:r,state:n,relative:a}=e;lx()||ji(!1);let{future:i,static:s}=v.useContext(sf),{matches:l}=v.useContext($h),{pathname:c}=Ko(),u=wc(),d=J3(t,X3(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function ho(e){ji(!1)}function Zle(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Yf.Pop,navigator:i,static:s=!1,future:l}=e;lx()&&ji(!1);let c=t.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:i,static:s,future:Dy({v7_relativeSplatPath:!1},l)}),[c,l,i,s]);typeof n=="string"&&(n=sx(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=n,p=v.useMemo(()=>{let x=vv(d,c);return x==null?null:{location:{pathname:x,search:f,hash:h,state:m,key:g},navigationType:a}},[c,d,f,h,m,g,a]);return p==null?null:v.createElement(sf.Provider,{value:u},v.createElement(Rj.Provider,{children:r,value:p}))}function cW(e){let{children:t,location:r}=e;return $le($E(t),r)}new Promise(()=>{});function $E(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let i=[...t,a];if(n.type===v.Fragment){r.push.apply(r,$E(n.props.children,i));return}n.type!==ho&&ji(!1),!n.props.index||!n.props.children||ji(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=$E(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b_.apply(this,arguments)}function uW(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ece(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tce(e,t){return e.button===0&&(!t||t==="_self")&&!ece(e)}function FE(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function rce(e,t){let r=FE(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const nce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ace=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ice="6";try{window.__reactRouterVersion=ice}catch{}const oce=v.createContext({isTransitioning:!1}),sce="startTransition",gL=i3[sce];function lce(e){let{basename:t,children:r,future:n,window:a}=e,i=v.useRef();i.current==null&&(i.current=dle({window:a,v5Compat:!0}));let s=i.current,[l,c]=v.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=v.useCallback(f=>{u&&gL?gL(()=>c(f)):c(f)},[c,u]);return v.useLayoutEffect(()=>s.listen(d),[s,d]),v.useEffect(()=>Jle(n),[n]),v.createElement(Zle,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}const cce=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q3=v.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=uW(t,nce),{basename:m}=v.useContext(sf),g,p=!1;if(typeof u=="string"&&uce.test(u)&&(g=u,cce))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=vv(_.pathname,m);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:p=!0}catch{}let x=Rle(u,{relative:a}),y=fce(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function b(w){n&&n(w),w.defaultPrevented||y(w)}return v.createElement("a",b_({},h,{href:g||x,onClick:p||i?n:b,ref:r,target:c}))}),Of=v.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:u,children:d}=t,f=uW(t,ace),h=Lj(c,{relative:f.relative}),m=Ko(),g=v.useContext(aW),{navigator:p,basename:x}=v.useContext(sf),y=g!=null&&hce(h)&&u===!0,b=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,w=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(w=w.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&x&&(_=vv(_,x)||_);const j=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let N=w===b||!s&&w.startsWith(b)&&w.charAt(j)==="/",P=_!=null&&(_===b||!s&&_.startsWith(b)&&_.charAt(b.length)==="/"),A={isActive:N,isPending:P,isTransitioning:y},k=N?n:void 0,M;typeof i=="function"?M=i(A):M=[i,N?"active":null,P?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let E=typeof l=="function"?l(A):l;return v.createElement(Q3,b_({},f,{"aria-current":k,className:M,ref:r,style:E,to:c,viewTransition:u}),typeof d=="function"?d(A):d)});var BE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(BE||(BE={}));var vL;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vL||(vL={}));function dce(e){let t=v.useContext(Mj);return t||ji(!1),t}function fce(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:l}=t===void 0?{}:t,c=wc(),u=Ko(),d=Lj(e,{relative:s});return v.useCallback(f=>{if(tce(f,r)){f.preventDefault();let h=n!==void 0?n:v_(u)===v_(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:s,viewTransition:l})}},[u,c,d,n,a,r,e,i,s,l])}function dW(e){let t=v.useRef(FE(e)),r=v.useRef(!1),n=Ko(),a=v.useMemo(()=>rce(n.search,r.current?null:t.current),[n.search]),i=wc(),s=v.useCallback((l,c)=>{const u=FE(typeof l=="function"?l(a):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,s]}function hce(e,t){t===void 0&&(t={});let r=v.useContext(oce);r==null&&ji(!1);let{basename:n}=dce(BE.useViewTransitionState),a=Lj(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=vv(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=vv(r.nextLocation.pathname,n)||r.nextLocation.pathname;return x_(a.pathname,s)!=null||x_(a.pathname,i)!=null}function fW(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=fW(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function An(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=fW(e))&&(n&&(n+=" "),n+=t);return n}function mce(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=hW(t))&&(n&&(n+=" "),n+=r);return n}function hW(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=hW(e[n]))&&(r&&(r+=" "),r+=t);return r}var Z3="-";function pce(e){var t=vce(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var c=l.split(Z3);return c[0]===""&&c.length!==1&&c.shift(),mW(c,t)||gce(l)}function s(l,c){var u=r[l]||[];return c&&a[l]?[].concat(u,a[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function mW(e,t){if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),a=n?mW(e.slice(1),n):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(Z3);return t.validators.find(function(s){var l=s.validator;return l(i)})?.classGroupId}}var xL=/^\[(.+)\]$/;function gce(e){if(xL.test(e)){var t=xL.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function vce(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},a=yce(Object.entries(e.classGroups),r);return a.forEach(function(i){var s=i[0],l=i[1];zE(l,n,s,t)}),n}function zE(e,t,r,n){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:yL(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(xce(a)){zE(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(s){var l=s[0],c=s[1];zE(c,yL(t,l),r,n)})})}function yL(e,t){var r=e;return t.split(Z3).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function xce(e){return e.isThemeGetter}function yce(e,t){return t?e.map(function(r){var n=r[0],a=r[1],i=a.map(function(s){return typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):s});return[n,i]}):e}function bce(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function a(i,s){r.set(i,s),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(s){var l=r.get(s);if(l!==void 0)return l;if((l=n.get(s))!==void 0)return a(s,l),l},set:function(s,l){r.has(s)?r.set(s,l):a(s,l)}}}var pW="!";function wce(e){var t=e.separator||":",r=t.length===1,n=t[0],a=t.length;return function(s){for(var l=[],c=0,u=0,d,f=0;f<s.length;f++){var h=s[f];if(c===0){if(h===n&&(r||s.slice(f,f+a)===t)){l.push(s.slice(u,f)),u=f+a;continue}if(h==="/"){d=f;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?s:s.substring(u),g=m.startsWith(pW),p=g?m.substring(1):m,x=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:x}}}function _ce(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var a=n[0]==="[";a?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function Sce(e){return{cache:bce(e.cacheSize),splitModifiers:wce(e),...pce(e)}}var jce=/\s+/;function Nce(e,t){var r=t.splitModifiers,n=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(jce).map(function(s){var l=r(s),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,f=l.maybePostfixModifierPosition,h=n(f?d.substring(0,f):d),m=!!f;if(!h){if(!f)return{isTailwindClass:!1,originalClassName:s};if(h=n(d),!h)return{isTailwindClass:!1,originalClassName:s};m=!1}var g=_ce(c).join(":"),p=u?g+pW:g;return{isTailwindClass:!0,modifierId:p,classGroupId:h,originalClassName:s,hasPostfixModifier:m}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var l=s.modifierId,c=s.classGroupId,u=s.hasPostfixModifier,d=l+c;return i.has(d)?!1:(i.add(d),a(c,u).forEach(function(f){return i.add(l+f)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function Cce(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a,i,s=l;function l(u){var d=t[0],f=t.slice(1),h=f.reduce(function(m,g){return g(m)},d());return n=Sce(h),a=n.cache.get,i=n.cache.set,s=c,c(u)}function c(u){var d=a(u);if(d)return d;var f=Nce(u,n);return i(u,f),f}return function(){return s(mce.apply(null,arguments))}}function ni(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var gW=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ace=/^\d+\/\d+$/,Pce=new Set(["px","full","screen"]),Ece=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kce=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Oce=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Tc(e){return Am(e)||Pce.has(e)||Ace.test(e)||qE(e)}function qE(e){return Ep(e,"length",Lce)}function Tce(e){return Ep(e,"size",vW)}function Ice(e){return Ep(e,"position",vW)}function Dce(e){return Ep(e,"url",$ce)}function _w(e){return Ep(e,"number",Am)}function Am(e){return!Number.isNaN(Number(e))}function Mce(e){return e.endsWith("%")&&Am(e.slice(0,-1))}function Jx(e){return bL(e)||Ep(e,"number",bL)}function ta(e){return gW.test(e)}function Qx(){return!0}function jf(e){return Ece.test(e)}function Rce(e){return Ep(e,"",Fce)}function Ep(e,t,r){var n=gW.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function Lce(e){return kce.test(e)}function vW(){return!1}function $ce(e){return e.startsWith("url(")}function bL(e){return Number.isInteger(Number(e))}function Fce(e){return Oce.test(e)}function Bce(){var e=ni("colors"),t=ni("spacing"),r=ni("blur"),n=ni("brightness"),a=ni("borderColor"),i=ni("borderRadius"),s=ni("borderSpacing"),l=ni("borderWidth"),c=ni("contrast"),u=ni("grayscale"),d=ni("hueRotate"),f=ni("invert"),h=ni("gap"),m=ni("gradientColorStops"),g=ni("gradientColorStopPositions"),p=ni("inset"),x=ni("margin"),y=ni("opacity"),b=ni("padding"),w=ni("saturate"),_=ni("scale"),j=ni("sepia"),N=ni("skew"),P=ni("space"),A=ni("translate"),k=function(){return["auto","contain","none"]},M=function(){return["auto","hidden","clip","visible","scroll"]},E=function(){return["auto",ta,t]},I=function(){return[ta,t]},O=function(){return["",Tc]},R=function(){return["auto",Am,ta]},B=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},W=function(){return["solid","dashed","dotted","double","none"]},F=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},H=function(){return["","0",ta]},ce=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},oe=function(){return[Am,_w]},L=function(){return[Am,ta]};return{cacheSize:500,theme:{colors:[Qx],spacing:[Tc],blur:["none","",jf,ta],brightness:oe(),borderColor:[e],borderRadius:["none","","full",jf,ta],borderSpacing:I(),borderWidth:O(),contrast:oe(),grayscale:H(),hueRotate:L(),invert:H(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[Mce,qE],inset:E(),margin:E(),opacity:oe(),padding:I(),saturate:oe(),scale:oe(),sepia:H(),skew:L(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",ta]}],container:["container"],columns:[{columns:[jf]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(B(),[ta])}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jx]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ta]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Jx]}],"grid-cols":[{"grid-cols":[Qx]}],"col-start-end":[{col:["auto",{span:["full",Jx]},ta]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Qx]}],"row-start-end":[{row:["auto",{span:[Jx]},ta]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ta]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ta]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ta,t]}],"min-w":[{"min-w":["min","max","fit",ta,Tc]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[jf]},jf,ta]}],h:[{h:[ta,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ta,Tc]}],"max-h":[{"max-h":[ta,t,"min","max","fit"]}],"font-size":[{text:["base",jf,qE]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_w]}],"font-family":[{font:[Qx]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ta]}],"line-clamp":[{"line-clamp":["none",Am,_w]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ta,Tc]}],"list-image":[{"list-image":["none",ta]}],"list-style-type":[{list:["none","disc","decimal",ta]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(W(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Tc]}],"underline-offset":[{"underline-offset":["auto",ta,Tc]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ta]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ta]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(B(),[Ice])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Tce]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Dce]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(W(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:W()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(W())}],"outline-offset":[{"outline-offset":[ta,Tc]}],"outline-w":[{outline:[Tc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Tc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",jf,Rce]}],"shadow-color":[{shadow:[Qx]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":F()}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jf,ta]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ta]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",ta]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",ta]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Jx,ta]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ta]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ta]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ta]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Tc,_w]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var zce=Cce(Bce);function kt(...e){return zce(An(e))}const wL=["#3B82F6","#22C55E","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#F43F5E","#10B981","#A855F7","#EAB308"];function qce(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return Math.abs(t)}function $f(e){if(!e)return"#94A3B8";const t=qce(String(e))%wL.length;return wL[t]}var Uce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Vce=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xr=(e,t)=>{const r=v.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,children:l,...c},u)=>v.createElement("svg",{ref:u,...Uce,width:a,height:a,stroke:n,strokeWidth:s?Number(i)*24/Number(a):i,className:`lucide lucide-${Vce(e)}`,...c},[...t.map(([d,f])=>v.createElement(d,f)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},au=xr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),sp=xr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Wce=xr("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),k5=xr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Sw=xr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),e4=xr("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),xW=xr("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),w_=xr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Hce=xr("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),UE=xr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Gce=xr("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),t4=xr("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),Kce=xr("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),r4=xr("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]),k2=xr("CalendarX",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"10",x2:"14",y1:"14",y2:"18",key:"1g3qc0"}],["line",{x1:"14",x2:"10",y1:"14",y2:"18",key:"1az83m"}]]),Uu=xr("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),jw=xr("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Cs=xr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),My=xr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),__=xr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),yW=xr("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),$j=xr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Yce=xr("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),Xce=xr("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Jce=xr("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),xv=xr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Pm=xr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Gs=xr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),po=xr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Jb=xr("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Qb=xr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Hp=xr("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),uc=xr("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Qce=xr("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),Zce=xr("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),eue=xr("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),tue=xr("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),rue=xr("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),nue=xr("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),bW=xr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),aue=xr("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),iue=xr("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),oue=xr("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),wW=xr("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),Em=xr("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),yv=xr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),sue=xr("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),lue=xr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),VE=xr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),cue=xr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),O5=xr("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),_L=xr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),uue=xr("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),SL=xr("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),bv=xr("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Zc=xr("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),jL=xr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_W=xr("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),oi=xr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),due=xr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Zi=xr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),WE=xr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),NL=xr("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),fue=xr("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),HE=xr("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Zb=xr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),hue=xr("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),T5=xr("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),mue=xr("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),n4=xr("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),pue=xr("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),S_=xr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),e1=xr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),t1=xr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),SW=xr("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),jW=xr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),gue=xr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),vue=xr("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),NW=xr("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),GE=xr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),As=xr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),CW=xr("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),j_=xr("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Vu=xr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),AW=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Fj=v.createContext({}),Bj=v.createContext(null),zj=typeof document<"u",a4=zj?v.useLayoutEffect:v.useEffect,PW=v.createContext({strict:!1}),i4=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),xue="framerAppearId",EW="data-"+i4(xue);function yue(e,t,r,n){const{visualElement:a}=v.useContext(Fj),i=v.useContext(PW),s=v.useContext(Bj),l=v.useContext(AW).reducedMotion,c=v.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:a,props:r,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;v.useInsertionEffect(()=>{u&&u.update(r,s)});const d=v.useRef(!!(r[EW]&&!window.HandoffComplete));return a4(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Mg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function bue(e,t,r){return v.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Mg(r)&&(r.current=n))},[t])}function Ry(e){return typeof e=="string"||Array.isArray(e)}function qj(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const o4=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],s4=["initial",...o4];function Uj(e){return qj(e.animate)||s4.some(t=>Ry(e[t]))}function kW(e){return!!(Uj(e)||e.variants)}function wue(e,t){if(Uj(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Ry(r)?r:void 0,animate:Ry(n)?n:void 0}}return e.inherit!==!1?t:{}}function _ue(e){const{initial:t,animate:r}=wue(e,v.useContext(Fj));return v.useMemo(()=>({initial:t,animate:r}),[CL(t),CL(r)])}function CL(e){return Array.isArray(e)?e.join(" "):e}const AL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ly={};for(const e in AL)Ly[e]={isEnabled:t=>AL[e].some(r=>!!t[r])};function Sue(e){for(const t in e)Ly[t]={...Ly[t],...e[t]}}const l4=v.createContext({}),OW=v.createContext({}),jue=Symbol.for("motionComponentSymbol");function Nue({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){e&&Sue(e);function i(l,c){let u;const d={...v.useContext(AW),...l,layoutId:Cue(l)},{isStatic:f}=d,h=_ue(l),m=n(l,f);if(!f&&zj){h.visualElement=yue(a,m,d,t);const g=v.useContext(OW),p=v.useContext(PW).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,p,e,g))}return v.createElement(Fj.Provider,{value:h},u&&h.visualElement?v.createElement(u,{visualElement:h.visualElement,...d}):null,r(a,l,bue(m,h.visualElement,c),m,f,h.visualElement))}const s=v.forwardRef(i);return s[jue]=a,s}function Cue({layoutId:e}){const t=v.useContext(l4).id;return t&&e!==void 0?t+"-"+e:e}function Aue(e){function t(n,a={}){return Nue(e(n,a))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,a)=>(r.has(a)||r.set(a,t(a)),r.get(a))})}const Pue=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function c4(e){return typeof e!="string"||e.includes("-")?!1:!!(Pue.indexOf(e)>-1||/[A-Z]/.test(e))}const N_={};function Eue(e){Object.assign(N_,e)}const r1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kp=new Set(r1);function TW(e,{layout:t,layoutId:r}){return kp.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!N_[e]||e==="opacity")}const nl=e=>!!(e&&e.getVelocity),kue={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Oue=r1.length;function Tue(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,a){let i="";for(let s=0;s<Oue;s++){const l=r1[s];if(e[l]!==void 0){const c=kue[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):r&&n&&(i="none"),i}const IW=e=>t=>typeof t=="string"&&t.startsWith(e),DW=IW("--"),KE=IW("var(--"),Iue=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Due=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Nh=(e,t,r)=>Math.min(Math.max(r,e),t),Op={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},q0={...Op,transform:e=>Nh(0,1,e)},Nw={...Op,default:1},U0=e=>Math.round(e*1e5)/1e5,Vj=/(-)?([\d]*\.?[\d])+/g,MW=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Mue=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function n1(e){return typeof e=="string"}const a1=e=>({test:t=>n1(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Tf=a1("deg"),Wu=a1("%"),bn=a1("px"),Rue=a1("vh"),Lue=a1("vw"),PL={...Wu,parse:e=>Wu.parse(e)/100,transform:e=>Wu.transform(e*100)},EL={...Op,transform:Math.round},RW={borderWidth:bn,borderTopWidth:bn,borderRightWidth:bn,borderBottomWidth:bn,borderLeftWidth:bn,borderRadius:bn,radius:bn,borderTopLeftRadius:bn,borderTopRightRadius:bn,borderBottomRightRadius:bn,borderBottomLeftRadius:bn,width:bn,maxWidth:bn,height:bn,maxHeight:bn,size:bn,top:bn,right:bn,bottom:bn,left:bn,padding:bn,paddingTop:bn,paddingRight:bn,paddingBottom:bn,paddingLeft:bn,margin:bn,marginTop:bn,marginRight:bn,marginBottom:bn,marginLeft:bn,rotate:Tf,rotateX:Tf,rotateY:Tf,rotateZ:Tf,scale:Nw,scaleX:Nw,scaleY:Nw,scaleZ:Nw,skew:Tf,skewX:Tf,skewY:Tf,distance:bn,translateX:bn,translateY:bn,translateZ:bn,x:bn,y:bn,z:bn,perspective:bn,transformPerspective:bn,opacity:q0,originX:PL,originY:PL,originZ:bn,zIndex:EL,fillOpacity:q0,strokeOpacity:q0,numOctaves:EL};function u4(e,t,r,n){const{style:a,vars:i,transform:s,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const f in t){const h=t[f];if(DW(f)){i[f]=h;continue}const m=RW[f],g=Due(h,m);if(kp.has(f)){if(c=!0,s[f]=g,!d)continue;h!==(m.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,l[f]=g):a[f]=g}if(t.transform||(c||n?a.transform=Tue(e.transform,r,d,n):a.transform&&(a.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:m=0}=l;a.transformOrigin=`${f} ${h} ${m}`}}const d4=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LW(e,t,r){for(const n in t)!nl(t[n])&&!TW(n,r)&&(e[n]=t[n])}function $ue({transformTemplate:e},t,r){return v.useMemo(()=>{const n=d4();return u4(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Fue(e,t,r){const n=e.style||{},a={};return LW(a,n,e),Object.assign(a,$ue(e,t,r)),e.transformValues?e.transformValues(a):a}function Bue(e,t,r){const n={},a=Fue(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const zue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function C_(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zue.has(e)}let $W=e=>!C_(e);function que(e){e&&($W=t=>t.startsWith("on")?!C_(t):e(t))}try{que(require("@emotion/is-prop-valid").default)}catch{}function Uue(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||($W(a)||r===!0&&C_(a)||!t&&!C_(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function kL(e,t,r){return typeof e=="string"?e:bn.transform(t+r*e)}function Vue(e,t,r){const n=kL(t,e.x,e.width),a=kL(r,e.y,e.height);return`${n} ${a}`}const Wue={offset:"stroke-dashoffset",array:"stroke-dasharray"},Hue={offset:"strokeDashoffset",array:"strokeDasharray"};function Gue(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?Wue:Hue;e[i.offset]=bn.transform(-n);const s=bn.transform(t),l=bn.transform(r);e[i.array]=`${s} ${l}`}function f4(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...u},d,f,h){if(u4(e,u,d,h),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g,dimensions:p}=e;m.transform&&(p&&(g.transform=m.transform),delete m.transform),p&&(a!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=Vue(p,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),s!==void 0&&Gue(m,s,l,c,!1)}const FW=()=>({...d4(),attrs:{}}),h4=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Kue(e,t,r,n){const a=v.useMemo(()=>{const i=FW();return f4(i,t,{enableHardwareAcceleration:!1},h4(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};LW(i,e.style,e),a.style={...i,...a.style}}return a}function Yue(e=!1){return(r,n,a,{latestValues:i},s)=>{const c=(c4(r)?Kue:Bue)(n,i,s,r),d={...Uue(n,typeof r=="string",e),...c,ref:a},{children:f}=n,h=v.useMemo(()=>nl(f)?f.get():f,[f]);return v.createElement(r,{...d,children:h})}}function BW(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const zW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qW(e,t,r,n){BW(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(zW.has(a)?a:i4(a),t.attrs[a])}function m4(e,t){const{style:r}=e,n={};for(const a in r)(nl(r[a])||t.style&&nl(t.style[a])||TW(a,e))&&(n[a]=r[a]);return n}function UW(e,t){const r=m4(e,t);for(const n in e)if(nl(e[n])||nl(t[n])){const a=r1.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=e[n]}return r}function p4(e,t,r,n={},a={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),t}function VW(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const A_=e=>Array.isArray(e),Xue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Jue=e=>A_(e)?e[e.length-1]||0:e;function O2(e){const t=nl(e)?e.get():e;return Xue(t)?t.toValue():t}function Que({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,a,i){const s={latestValues:Zue(n,a,i,e),renderState:t()};return r&&(s.mount=l=>r(n,l,s)),s}const WW=e=>(t,r)=>{const n=v.useContext(Fj),a=v.useContext(Bj),i=()=>Que(e,t,n,a);return r?i():VW(i)};function Zue(e,t,r,n){const a={},i=n(e,{});for(const h in i)a[h]=O2(i[h]);let{initial:s,animate:l}=e;const c=Uj(e),u=kW(e);t&&u&&!c&&e.inherit!==!1&&(s===void 0&&(s=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||s===!1;const f=d?l:s;return f&&typeof f!="boolean"&&!qj(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const g=p4(e,m);if(!g)return;const{transitionEnd:p,transition:x,...y}=g;for(const b in y){let w=y[b];if(Array.isArray(w)){const _=d?w.length-1:0;w=w[_]}w!==null&&(a[b]=w)}for(const b in p)a[b]=p[b]}),a}const Di=e=>e;class OL{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ede(e){let t=new OL,r=new OL,n=0,a=!1,i=!1;const s=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const f=d&&a,h=f?t:r;return u&&s.add(c),h.add(c)&&f&&a&&(n=t.order.length),c},cancel:c=>{r.remove(c),s.delete(c)},process:c=>{if(a){i=!0;return}if(a=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),s.has(d)&&(l.schedule(d),e())}a=!1,i&&(i=!1,l.process(c))}};return l}const Cw=["prepare","read","update","preRender","render","postRender"],tde=40;function rde(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=Cw.reduce((f,h)=>(f[h]=ede(()=>r=!0),f),{}),s=f=>i[f].process(a),l=()=>{const f=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(f-a.timestamp,tde),1),a.timestamp=f,a.isProcessing=!0,Cw.forEach(s),a.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,a.isProcessing||e(l)};return{schedule:Cw.reduce((f,h)=>{const m=i[h];return f[h]=(g,p=!1,x=!1)=>(r||c(),m.schedule(g,p,x)),f},{}),cancel:f=>Cw.forEach(h=>i[h].cancel(f)),state:a,steps:i}}const{schedule:Xa,cancel:Yd,state:as,steps:I5}=rde(typeof requestAnimationFrame<"u"?requestAnimationFrame:Di,!0),nde={useVisualState:WW({scrapeMotionValuesFromProps:UW,createRenderState:FW,onMount:(e,t,{renderState:r,latestValues:n})=>{Xa.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Xa.render(()=>{f4(r,n,{enableHardwareAcceleration:!1},h4(t.tagName),e.transformTemplate),qW(t,r)})}})},ade={useVisualState:WW({scrapeMotionValuesFromProps:m4,createRenderState:d4})};function ide(e,{forwardMotionProps:t=!1},r,n){return{...c4(e)?nde:ade,preloadedFeatures:r,useRender:Yue(t),createVisualElement:n,Component:e}}function Id(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const HW=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Wj(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ode=e=>t=>HW(t)&&e(t,Wj(t));function Bd(e,t,r,n){return Id(e,t,ode(r),n)}const sde=(e,t)=>r=>t(e(r)),uh=(...e)=>e.reduce(sde);function GW(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const TL=GW("dragHorizontal"),IL=GW("dragVertical");function KW(e){let t=!1;if(e==="y")t=IL();else if(e==="x")t=TL();else{const r=TL(),n=IL();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function YW(){const e=KW(!0);return e?(e(),!1):!0}class Fh{constructor(t){this.isMounted=!1,this.node=t}update(){}}function DL(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,s)=>{if(i.pointerType==="touch"||YW())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Xa.update(()=>l[n](i,s))};return Bd(e.current,r,a,{passive:!e.getProps()[n]})}class lde extends Fh{mount(){this.unmount=uh(DL(this.node,!0),DL(this.node,!1))}unmount(){}}class cde extends Fh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=uh(Id(this.node.current,"focus",()=>this.onFocus()),Id(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const XW=(e,t)=>t?e===t?!0:XW(e,t.parentElement):!1;function D5(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Wj(r))}class ude extends Fh{constructor(){super(...arguments),this.removeStartListeners=Di,this.removeEndListeners=Di,this.removeAccessibleListeners=Di,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Bd(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Xa.update(()=>{!f&&!XW(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),s=Bd(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=uh(i,s),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const s=l=>{l.key!=="Enter"||!this.checkPressEnd()||D5("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Xa.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Id(this.node.current,"keyup",s),D5("down",(l,c)=>{this.startPress(l,c)})},r=Id(this.node.current,"keydown",t),n=()=>{this.isPressing&&D5("cancel",(i,s)=>this.cancelPress(i,s))},a=Id(this.node.current,"blur",n);this.removeAccessibleListeners=uh(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Xa.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!YW()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Xa.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Bd(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Id(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=uh(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const YE=new WeakMap,M5=new WeakMap,dde=e=>{const t=YE.get(e.target);t&&t(e)},fde=e=>{e.forEach(dde)};function hde({root:e,...t}){const r=e||document;M5.has(r)||M5.set(r,{});const n=M5.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(fde,{root:e,...t})),n[a]}function mde(e,t,r){const n=hde(t);return YE.set(e,r),n.observe(e),()=>{YE.delete(e),n.unobserve(e)}}const pde={some:0,all:1};class gde extends Fh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:pde[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return mde(this.node.current,s,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(vde(t,r))&&this.startObserver()}unmount(){}}function vde({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const xde={inView:{Feature:gde},tap:{Feature:ude},focus:{Feature:cde},hover:{Feature:lde}};function JW(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function yde(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function bde(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Hj(e,t,r){const n=e.getProps();return p4(n,t,r!==void 0?r:n.custom,yde(e),bde(e))}let wde=Di,g4=Di;const dh=e=>e*1e3,zd=e=>e/1e3,_de={current:!1},QW=e=>Array.isArray(e)&&typeof e[0]=="number";function ZW(e){return!!(!e||typeof e=="string"&&eH[e]||QW(e)||Array.isArray(e)&&e.every(ZW))}const C0=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,eH={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:C0([0,.65,.55,1]),circOut:C0([.55,0,1,.45]),backIn:C0([.31,.01,.66,-.59]),backOut:C0([.33,1.53,.69,.99])};function tH(e){if(e)return QW(e)?C0(e):Array.isArray(e)?e.map(tH):eH[e]}function Sde(e,t,r,{delay:n=0,duration:a,repeat:i=0,repeatType:s="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=tH(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"})}function jde(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const rH=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Nde=1e-7,Cde=12;function Ade(e,t,r,n,a){let i,s,l=0;do s=t+(r-t)/2,i=rH(s,n,a)-e,i>0?r=s:t=s;while(Math.abs(i)>Nde&&++l<Cde);return s}function i1(e,t,r,n){if(e===t&&r===n)return Di;const a=i=>Ade(i,0,1,e,r);return i=>i===0||i===1?i:rH(a(i),t,n)}const Pde=i1(.42,0,1,1),Ede=i1(0,0,.58,1),nH=i1(.42,0,.58,1),kde=e=>Array.isArray(e)&&typeof e[0]!="number",aH=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iH=e=>t=>1-e(1-t),v4=e=>1-Math.sin(Math.acos(e)),oH=iH(v4),Ode=aH(v4),sH=i1(.33,1.53,.69,.99),x4=iH(sH),Tde=aH(x4),Ide=e=>(e*=2)<1?.5*x4(e):.5*(2-Math.pow(2,-10*(e-1))),Dde={linear:Di,easeIn:Pde,easeInOut:nH,easeOut:Ede,circIn:v4,circInOut:Ode,circOut:oH,backIn:x4,backInOut:Tde,backOut:sH,anticipate:Ide},ML=e=>{if(Array.isArray(e)){g4(e.length===4);const[t,r,n,a]=e;return i1(t,r,n,a)}else if(typeof e=="string")return Dde[e];return e},y4=(e,t)=>r=>!!(n1(r)&&Mue.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),lH=(e,t,r)=>n=>{if(!n1(n))return n;const[a,i,s,l]=n.match(Vj);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(s),alpha:l!==void 0?parseFloat(l):1}},Mde=e=>Nh(0,255,e),R5={...Op,transform:e=>Math.round(Mde(e))},km={test:y4("rgb","red"),parse:lH("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+R5.transform(e)+", "+R5.transform(t)+", "+R5.transform(r)+", "+U0(q0.transform(n))+")"};function Rde(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const XE={test:y4("#"),parse:Rde,transform:km.transform},Rg={test:y4("hsl","hue"),parse:lH("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Wu.transform(U0(t))+", "+Wu.transform(U0(r))+", "+U0(q0.transform(n))+")"},Ss={test:e=>km.test(e)||XE.test(e)||Rg.test(e),parse:e=>km.test(e)?km.parse(e):Rg.test(e)?Rg.parse(e):XE.parse(e),transform:e=>n1(e)?e:e.hasOwnProperty("red")?km.transform(e):Rg.transform(e)},_i=(e,t,r)=>-r*e+r*t+e;function L5(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Lde({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,s=0;if(!t)a=i=s=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=L5(c,l,e+1/3),i=L5(c,l,e),s=L5(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:n}}const $5=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},$de=[XE,km,Rg],Fde=e=>$de.find(t=>t.test(e));function RL(e){const t=Fde(e);let r=t.parse(e);return t===Rg&&(r=Lde(r)),r}const cH=(e,t)=>{const r=RL(e),n=RL(t),a={...r};return i=>(a.red=$5(r.red,n.red,i),a.green=$5(r.green,n.green,i),a.blue=$5(r.blue,n.blue,i),a.alpha=_i(r.alpha,n.alpha,i),km.transform(a))};function Bde(e){var t,r;return isNaN(e)&&n1(e)&&(((t=e.match(Vj))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(MW))===null||r===void 0?void 0:r.length)||0)>0}const uH={regex:Iue,countKey:"Vars",token:"${v}",parse:Di},dH={regex:MW,countKey:"Colors",token:"${c}",parse:Ss.parse},fH={regex:Vj,countKey:"Numbers",token:"${n}",parse:Op.parse};function F5(e,{regex:t,countKey:r,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function P_(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&F5(r,uH),F5(r,dH),F5(r,fH),r}function hH(e){return P_(e).values}function mH(e){const{values:t,numColors:r,numVars:n,tokenised:a}=P_(e),i=t.length;return s=>{let l=a;for(let c=0;c<i;c++)c<n?l=l.replace(uH.token,s[c]):c<n+r?l=l.replace(dH.token,Ss.transform(s[c])):l=l.replace(fH.token,U0(s[c]));return l}}const zde=e=>typeof e=="number"?0:e;function qde(e){const t=hH(e);return mH(e)(t.map(zde))}const Ch={test:Bde,parse:hH,createTransformer:mH,getAnimatableNone:qde},pH=(e,t)=>r=>`${r>0?t:e}`;function gH(e,t){return typeof e=="number"?r=>_i(e,t,r):Ss.test(e)?cH(e,t):e.startsWith("var(")?pH(e,t):xH(e,t)}const vH=(e,t)=>{const r=[...e],n=r.length,a=e.map((i,s)=>gH(i,t[s]));return i=>{for(let s=0;s<n;s++)r[s]=a[s](i);return r}},Ude=(e,t)=>{const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=gH(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},xH=(e,t)=>{const r=Ch.createTransformer(t),n=P_(e),a=P_(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?uh(vH(n.values,a.values),r):pH(e,t)},$y=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},LL=(e,t)=>r=>_i(e,t,r);function Vde(e){return typeof e=="number"?LL:typeof e=="string"?Ss.test(e)?cH:xH:Array.isArray(e)?vH:typeof e=="object"?Ude:LL}function Wde(e,t,r){const n=[],a=r||Vde(e[0]),i=e.length-1;for(let s=0;s<i;s++){let l=a(e[s],e[s+1]);if(t){const c=Array.isArray(t)?t[s]||Di:t;l=uh(c,l)}n.push(l)}return n}function yH(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(g4(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=Wde(t,n,a),l=s.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=$y(e[d],e[d+1],u);return s[d](f)};return r?u=>c(Nh(e[0],e[i-1],u)):c}function Hde(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=$y(0,t,n);e.push(_i(r,1,a))}}function Gde(e){const t=[0];return Hde(t,e.length-1),t}function Kde(e,t){return e.map(r=>r*t)}function Yde(e,t){return e.map(()=>t||nH).splice(0,e.length-1)}function E_({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=kde(n)?n.map(ML):ML(n),i={done:!1,value:t[0]},s=Kde(r&&r.length===t.length?r:Gde(t),e),l=yH(s,t,{ease:Array.isArray(a)?a:Yde(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function bH(e,t){return t?e*(1e3/t):0}const Xde=5;function wH(e,t,r){const n=Math.max(t-Xde,0);return bH(r-e(n),t-n)}const B5=.001,Jde=.01,$L=10,Qde=.05,Zde=1;function efe({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let a,i;wde(e<=dh($L));let s=1-t;s=Nh(Qde,Zde,s),e=Nh(Jde,$L,zd(e)),s<1?(a=u=>{const d=u*s,f=d*e,h=d-r,m=JE(u,s),g=Math.exp(-f);return B5-h/m*g},i=u=>{const f=u*s*e,h=f*r+r,m=Math.pow(s,2)*Math.pow(u,2)*e,g=Math.exp(-f),p=JE(Math.pow(u,2),s);return(-a(u)+B5>0?-1:1)*((h-m)*g)/p}):(a=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-B5+d*f},i=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=rfe(a,i,l);if(e=dh(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:s*2*Math.sqrt(n*u),duration:e}}}const tfe=12;function rfe(e,t,r){let n=r;for(let a=1;a<tfe;a++)n=n-e(n)/t(n);return n}function JE(e,t){return e*Math.sqrt(1-t*t)}const nfe=["duration","bounce"],afe=["stiffness","damping","mass"];function FL(e,t){return t.some(r=>e[r]!==void 0)}function ife(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!FL(e,afe)&&FL(e,nfe)){const r=efe(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function _H({keyframes:e,restDelta:t,restSpeed:r,...n}){const a=e[0],i=e[e.length-1],s={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=ife({...n,velocity:-zd(n.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*u)),p=i-a,x=zd(Math.sqrt(l/u)),y=Math.abs(p)<5;r||(r=y?.01:2),t||(t=y?.005:.5);let b;if(g<1){const w=JE(x,g);b=_=>{const j=Math.exp(-g*x*_);return i-j*((m+g*x*p)/w*Math.sin(w*_)+p*Math.cos(w*_))}}else if(g===1)b=w=>i-Math.exp(-x*w)*(p+(m+x*p)*w);else{const w=x*Math.sqrt(g*g-1);b=_=>{const j=Math.exp(-g*x*_),N=Math.min(w*_,300);return i-j*((m+g*x*p)*Math.sinh(N)+w*p*Math.cosh(N))/w}}return{calculatedDuration:h&&d||null,next:w=>{const _=b(w);if(h)s.done=w>=d;else{let j=m;w!==0&&(g<1?j=wH(b,w,_):j=0);const N=Math.abs(j)<=r,P=Math.abs(i-_)<=t;s.done=N&&P}return s.value=s.done?i:_,s}}}function BL({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},m=A=>l!==void 0&&A<l||c!==void 0&&A>c,g=A=>l===void 0?c:c===void 0||Math.abs(l-A)<Math.abs(c-A)?l:c;let p=r*t;const x=f+p,y=s===void 0?x:s(x);y!==x&&(p=y-f);const b=A=>-p*Math.exp(-A/n),w=A=>y+b(A),_=A=>{const k=b(A),M=w(A);h.done=Math.abs(k)<=u,h.value=h.done?y:M};let j,N;const P=A=>{m(h.value)&&(j=A,N=_H({keyframes:[h.value,g(h.value)],velocity:wH(w,A,h.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:A=>{let k=!1;return!N&&j===void 0&&(k=!0,_(A),P(A)),j!==void 0&&A>j?N.next(A-j):(!k&&_(A),h)}}}const ofe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Xa.update(t,!0),stop:()=>Yd(t),now:()=>as.isProcessing?as.timestamp:performance.now()}},zL=2e4;function qL(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<zL;)t+=r,n=e.next(t);return t>=zL?1/0:t}const sfe={decay:BL,inertia:BL,tween:E_,keyframes:E_,spring:_H};function k_({autoplay:e=!0,delay:t=0,driver:r=ofe,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...h}){let m=1,g=!1,p,x;const y=()=>{x=new Promise(oe=>{p=oe})};y();let b;const w=sfe[a]||E_;let _;w!==E_&&typeof n[0]!="number"&&(_=yH([0,100],n,{clamp:!1}),n=[0,100]);const j=w({...h,keyframes:n});let N;l==="mirror"&&(N=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let P="idle",A=null,k=null,M=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=qL(j));const{calculatedDuration:E}=j;let I=1/0,O=1/0;E!==null&&(I=E+s,O=I*(i+1)-s);let R=0;const B=oe=>{if(k===null)return;m>0&&(k=Math.min(k,oe)),m<0&&(k=Math.min(oe-O/m,k)),A!==null?R=A:R=Math.round(oe-k)*m;const L=R-t*(m>=0?1:-1),U=m>=0?L<0:L>O;R=Math.max(L,0),P==="finished"&&A===null&&(R=O);let J=R,V=j;if(i){const te=Math.min(R,O)/I;let me=Math.floor(te),Ee=te%1;!Ee&&te>=1&&(Ee=1),Ee===1&&me--,me=Math.min(me,i+1),!!(me%2)&&(l==="reverse"?(Ee=1-Ee,s&&(Ee-=s/I)):l==="mirror"&&(V=N)),J=Nh(0,1,Ee)*I}const Z=U?{done:!1,value:n[0]}:V.next(J);_&&(Z.value=_(Z.value));let{done:K}=Z;!U&&E!==null&&(K=m>=0?R>=O:R<=0);const he=A===null&&(P==="finished"||P==="running"&&K);return f&&f(Z.value),he&&$(),Z},W=()=>{b&&b.stop(),b=void 0},F=()=>{P="idle",W(),p(),y(),k=M=null},$=()=>{P="finished",d&&d(),W(),p()},H=()=>{if(g)return;b||(b=r(B));const oe=b.now();c&&c(),A!==null?k=oe-A:(!k||P==="finished")&&(k=oe),P==="finished"&&y(),M=k,A=null,P="running",b.start()};e&&H();const ce={then(oe,L){return x.then(oe,L)},get time(){return zd(R)},set time(oe){oe=dh(oe),R=oe,A!==null||!b||m===0?A=oe:k=b.now()-oe/m},get duration(){const oe=j.calculatedDuration===null?qL(j):j.calculatedDuration;return zd(oe)},get speed(){return m},set speed(oe){oe===m||!b||(m=oe,ce.time=zd(R))},get state(){return P},play:H,pause:()=>{P="paused",A=R},stop:()=>{g=!0,P!=="idle"&&(P="idle",u&&u(),F())},cancel:()=>{M!==null&&B(M),F()},complete:()=>{P="finished"},sample:oe=>(k=0,B(oe))};return ce}function lfe(e){let t;return()=>(t===void 0&&(t=e()),t)}const cfe=lfe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ufe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Aw=10,dfe=2e4,ffe=(e,t)=>t.type==="spring"||e==="backgroundColor"||!ZW(t.ease);function hfe(e,t,{onUpdate:r,onComplete:n,...a}){if(!(cfe()&&ufe.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let s=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:f,duration:h=300,ease:m,times:g}=a;if(ffe(t,a)){const w=k_({...a,repeat:0,delay:0});let _={done:!1,value:f[0]};const j=[];let N=0;for(;!_.done&&N<dfe;)_=w.sample(N),j.push(_.value),N+=Aw;g=void 0,f=j,h=N-Aw,m="linear"}const p=Sde(e.owner.current,t,f,{...a,duration:h,ease:m,times:g}),x=()=>{u=!1,p.cancel()},y=()=>{u=!0,Xa.update(x),l(),d()};return p.onfinish=()=>{u||(e.set(jde(f,a)),n&&n(),y())},{then(w,_){return c.then(w,_)},attachTimeline(w){return p.timeline=w,p.onfinish=null,Di},get time(){return zd(p.currentTime||0)},set time(w){p.currentTime=dh(w)},get speed(){return p.playbackRate},set speed(w){p.playbackRate=w},get duration(){return zd(h)},play:()=>{s||(p.play(),Yd(x))},pause:()=>p.pause(),stop:()=>{if(s=!0,p.playState==="idle")return;const{currentTime:w}=p;if(w){const _=k_({...a,autoplay:!1});e.setWithVelocity(_.sample(w-Aw).value,_.sample(w).value,Aw)}y()},complete:()=>{u||p.finish()},cancel:y}}function mfe({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const a=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Di,pause:Di,stop:Di,then:i=>(i(),Promise.resolve()),cancel:Di,complete:Di});return t?k_({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const pfe={type:"spring",stiffness:500,damping:25,restSpeed:10},gfe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),vfe={type:"keyframes",duration:.8},xfe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yfe=(e,{keyframes:t})=>t.length>2?vfe:kp.has(e)?e.startsWith("scale")?gfe(t[1]):pfe:xfe,QE=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ch.test(t)||t==="0")&&!t.startsWith("url(")),bfe=new Set(["brightness","contrast","saturate","opacity"]);function wfe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Vj)||[];if(!n)return e;const a=r.replace(n,"");let i=bfe.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const _fe=/([a-z-]*)\(.*?\)/g,ZE={...Ch,getAnimatableNone:e=>{const t=e.match(_fe);return t?t.map(wfe).join(" "):e}},Sfe={...RW,color:Ss,backgroundColor:Ss,outlineColor:Ss,fill:Ss,stroke:Ss,borderColor:Ss,borderTopColor:Ss,borderRightColor:Ss,borderBottomColor:Ss,borderLeftColor:Ss,filter:ZE,WebkitFilter:ZE},b4=e=>Sfe[e];function SH(e,t){let r=b4(e);return r!==ZE&&(r=Ch),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const jH=e=>/^0[^.\s]+$/.test(e);function jfe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||jH(e)}function Nfe(e,t,r,n){const a=QE(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const s=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?s:i[u-1]),jfe(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(a&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=SH(t,l)}return i}function Cfe({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function w4(e,t){return e[t]||e.default||e}const Afe={skipAnimations:!1},_4=(e,t,r,n={})=>a=>{const i=w4(n,e)||{},s=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-dh(s);const c=Nfe(t,e,r,i),u=c[0],d=c[c.length-1],f=QE(e,u),h=QE(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(Cfe(i)||(m={...m,...yfe(e,m)}),m.duration&&(m.duration=dh(m.duration)),m.repeatDelay&&(m.repeatDelay=dh(m.repeatDelay)),!f||!h||_de.current||i.type===!1||Afe.skipAnimations)return mfe(m);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=hfe(t,e,m);if(g)return g}return k_(m)};function O_(e){return!!(nl(e)&&e.add)}const NH=e=>/^\-?\d*\.?\d+$/.test(e);function S4(e,t){e.indexOf(t)===-1&&e.push(t)}function j4(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class N4{constructor(){this.subscriptions=[]}add(t){return S4(this.subscriptions,t),()=>j4(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pfe=e=>!isNaN(parseFloat(e));class Efe{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:s}=as;this.lastUpdated!==s&&(this.timeDelta=i,this.lastUpdated=s,Xa.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Xa.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Pfe(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new N4);const n=this.events[t].add(r);return t==="change"?()=>{n(),Xa.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?bH(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wv(e,t){return new Efe(e,t)}const CH=e=>t=>t.test(e),kfe={test:e=>e==="auto",parse:e=>e},AH=[Op,bn,Wu,Tf,Lue,Rue,kfe],Zx=e=>AH.find(CH(e)),Ofe=[...AH,Ss,Ch],Tfe=e=>Ofe.find(CH(e));function Ife(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,wv(r))}function Dfe(e,t){const r=Hj(e,t);let{transitionEnd:n={},transition:a={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const s in i){const l=Jue(i[s]);Ife(e,s,l)}}function Mfe(e,t,r){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),s=i.length;if(s)for(let l=0;l<s;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(a=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&a!==void 0?a:t[c]),d!=null&&(typeof d=="string"&&(NH(d)||jH(d))?d=parseFloat(d):!Tfe(d)&&Ch.test(u)&&(d=SH(c,u)),e.addValue(c,wv(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function Rfe(e,t){return t?(t[e]||t.default||t).from:void 0}function Lfe(e,t,r){const n={};for(const a in e){const i=Rfe(a,t);if(i!==void 0)n[a]=i;else{const s=r.getValue(a);s&&(n[a]=s.get())}}return n}function $fe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function Ffe(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function PH(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const f in l){const h=e.getValue(f),m=l[f];if(!h||m===void 0||d&&$fe(d,f))continue;const g={delay:r,elapsed:0,...w4(i||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[EW];if(y){const b=window.HandoffAppearAnimations(y,f,h,Xa);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let p=!g.isHandoff&&!Ffe(h,m);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(p=!1),h.animation&&(p=!1),p)continue;h.start(_4(f,h,m,e.shouldReduceMotion&&kp.has(f)?{type:!1}:g));const x=h.animation;O_(c)&&(c.add(f),x.then(()=>c.remove(f))),u.push(x)}return s&&Promise.all(u).then(()=>{s&&Dfe(e,s)}),u}function ek(e,t,r={}){const n=Hj(e,t,r.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(PH(e,n,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=a;return Bfe(e,t,u+c,d,f,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,u]=l==="beforeChildren"?[i,s]:[s,i];return c().then(()=>u())}else return Promise.all([i(),s(r.delay)])}function Bfe(e,t,r=0,n=0,a=1,i){const s=[],l=(e.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(zfe).forEach((u,d)=>{u.notify("AnimationStart",t),s.push(ek(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function zfe(e,t){return e.sortNodePosition(t)}function qfe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>ek(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=ek(e,t,r);else{const a=typeof t=="function"?Hj(e,t,r.custom):t;n=Promise.all(PH(e,a,r))}return n.then(()=>e.notify("AnimationComplete",t))}const Ufe=[...o4].reverse(),Vfe=o4.length;function Wfe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>qfe(e,r,n)))}function Hfe(e){let t=Wfe(e);const r=Kfe();let n=!0;const a=(c,u)=>{const d=Hj(e,u);if(d){const{transition:f,transitionEnd:h,...m}=d;c={...c,...m,...h}}return c};function i(c){t=c(e)}function s(c,u){const d=e.getProps(),f=e.getVariantContext(!0)||{},h=[],m=new Set;let g={},p=1/0;for(let y=0;y<Vfe;y++){const b=Ufe[y],w=r[b],_=d[b]!==void 0?d[b]:f[b],j=Ry(_),N=b===u?w.isActive:null;N===!1&&(p=y);let P=_===f[b]&&_!==d[b]&&j;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...g},!w.isActive&&N===null||!_&&!w.prevProp||qj(_)||typeof _=="boolean")continue;let k=Gfe(w.prevProp,_)||b===u&&w.isActive&&!P&&j||y>p&&j,M=!1;const E=Array.isArray(_)?_:[_];let I=E.reduce(a,{});N===!1&&(I={});const{prevResolvedValues:O={}}=w,R={...O,...I},B=W=>{k=!0,m.has(W)&&(M=!0,m.delete(W)),w.needsAnimating[W]=!0};for(const W in R){const F=I[W],$=O[W];if(g.hasOwnProperty(W))continue;let H=!1;A_(F)&&A_($)?H=!JW(F,$):H=F!==$,H?F!==void 0?B(W):m.add(W):F!==void 0&&m.has(W)?B(W):w.protectedKeys[W]=!0}w.prevProp=_,w.prevResolvedValues=I,w.isActive&&(g={...g,...I}),n&&e.blockInitialAnimation&&(k=!1),k&&(!P||M)&&h.push(...E.map(W=>({animation:W,options:{type:b,...c}})))}if(m.size){const y={};m.forEach(b=>{const w=e.getBaseTarget(b);w!==void 0&&(y[b]=w)}),h.push({animation:y})}let x=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(h):Promise.resolve()}function l(c,u,d){var f;if(r[c].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const h=s(d,c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:s,setActive:l,setAnimateFunction:i,getState:()=>r}}function Gfe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!JW(t,e):!1}function tm(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Kfe(){return{animate:tm(!0),whileInView:tm(),whileHover:tm(),whileTap:tm(),whileDrag:tm(),whileFocus:tm(),exit:tm()}}class Yfe extends Fh{constructor(t){super(t),t.animationState||(t.animationState=Hfe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),qj(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Xfe=0;class Jfe extends Fh{constructor(){super(...arguments),this.id=Xfe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Qfe={animation:{Feature:Yfe},exit:{Feature:Jfe}},UL=(e,t)=>Math.abs(e-t);function Zfe(e,t){const r=UL(e.x,t.x),n=UL(e.y,t.y);return Math.sqrt(r**2+n**2)}class EH{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=q5(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=Zfe(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=f,{timestamp:p}=as;this.history.push({...g,timestamp:p});const{onStart:x,onMove:y}=this.handlers;h||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=z5(h,this.transformPagePoint),Xa.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=q5(f.type==="pointercancel"?this.lastMoveEventInfo:z5(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),g&&g(f,x)},!HW(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const s=Wj(t),l=z5(s,this.transformPagePoint),{point:c}=l,{timestamp:u}=as;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,q5(l,this.history)),this.removeListeners=uh(Bd(this.contextWindow,"pointermove",this.handlePointerMove),Bd(this.contextWindow,"pointerup",this.handlePointerUp),Bd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Yd(this.updatePoint)}}function z5(e,t){return t?{point:t(e.point)}:e}function VL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function q5({point:e},t){return{point:e,delta:VL(e,kH(t)),offset:VL(e,ehe(t)),velocity:the(t,.1)}}function ehe(e){return e[0]}function kH(e){return e[e.length-1]}function the(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=kH(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>dh(t)));)r--;if(!n)return{x:0,y:0};const i=zd(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Fl(e){return e.max-e.min}function tk(e,t=0,r=.01){return Math.abs(e-t)<=r}function WL(e,t,r,n=.5){e.origin=n,e.originPoint=_i(t.min,t.max,e.origin),e.scale=Fl(r)/Fl(t),(tk(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=_i(r.min,r.max,e.origin)-e.originPoint,(tk(e.translate)||isNaN(e.translate))&&(e.translate=0)}function V0(e,t,r,n){WL(e.x,t.x,r.x,n?n.originX:void 0),WL(e.y,t.y,r.y,n?n.originY:void 0)}function HL(e,t,r){e.min=r.min+t.min,e.max=e.min+Fl(t)}function rhe(e,t,r){HL(e.x,t.x,r.x),HL(e.y,t.y,r.y)}function GL(e,t,r){e.min=t.min-r.min,e.max=e.min+Fl(t)}function W0(e,t,r){GL(e.x,t.x,r.x),GL(e.y,t.y,r.y)}function nhe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?_i(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?_i(r,e,n.max):Math.min(e,r)),e}function KL(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function ahe(e,{top:t,left:r,bottom:n,right:a}){return{x:KL(e.x,r,a),y:KL(e.y,t,n)}}function YL(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function ihe(e,t){return{x:YL(e.x,t.x),y:YL(e.y,t.y)}}function ohe(e,t){let r=.5;const n=Fl(e),a=Fl(t);return a>n?r=$y(t.min,t.max-n,e.min):n>a&&(r=$y(e.min,e.max-a,t.min)),Nh(0,1,r)}function she(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const rk=.35;function lhe(e=rk){return e===!1?e=0:e===!0&&(e=rk),{x:XL(e,"left","right"),y:XL(e,"top","bottom")}}function XL(e,t,r){return{min:JL(e,t),max:JL(e,r)}}function JL(e,t){return typeof e=="number"?e:e[t]||0}const QL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lg=()=>({x:QL(),y:QL()}),ZL=()=>({min:0,max:0}),Yi=()=>({x:ZL(),y:ZL()});function rc(e){return[e("x"),e("y")]}function OH({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function che({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function uhe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function U5(e){return e===void 0||e===1}function nk({scale:e,scaleX:t,scaleY:r}){return!U5(e)||!U5(t)||!U5(r)}function dm(e){return nk(e)||TH(e)||e.z||e.rotate||e.rotateX||e.rotateY}function TH(e){return e6(e.x)||e6(e.y)}function e6(e){return e&&e!=="0%"}function T_(e,t,r){const n=e-r,a=t*n;return r+a}function t6(e,t,r,n,a){return a!==void 0&&(e=T_(e,a,n)),T_(e,r,n)+t}function ak(e,t=0,r=1,n,a){e.min=t6(e.min,t,r,n,a),e.max=t6(e.max,t,r,n,a)}function IH(e,{x:t,y:r}){ak(e.x,t.translate,t.scale,t.originPoint),ak(e.y,r.translate,r.scale,r.originPoint)}function dhe(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,s;for(let l=0;l<a;l++){i=r[l],s=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&$g(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,IH(e,s)),n&&dm(i.latestValues)&&$g(e,i.latestValues))}t.x=r6(t.x),t.y=r6(t.y)}function r6(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ff(e,t){e.min=e.min+t,e.max=e.max+t}function n6(e,t,[r,n,a]){const i=t[a]!==void 0?t[a]:.5,s=_i(e.min,e.max,i);ak(e,t[r],t[n],s,t.scale)}const fhe=["x","scaleX","originX"],hhe=["y","scaleY","originY"];function $g(e,t){n6(e.x,t,fhe),n6(e.y,t,hhe)}function DH(e,t){return OH(uhe(e.getBoundingClientRect(),t))}function mhe(e,t,r){const n=DH(e,r),{scroll:a}=t;return a&&(Ff(n.x,a.offset.x),Ff(n.y,a.offset.y)),n}const MH=({current:e})=>e?e.ownerDocument.defaultView:null,phe=new WeakMap;class ghe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yi(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Wj(d,"page").point)},i=(d,f)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=KW(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rc(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Wu.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[x];w&&(y=Fl(w)*(parseFloat(y)/100))}}this.originPoint[x]=y}),g&&Xa.update(()=>g(d,f),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(d,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=vhe(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),p&&p(d,f)},l=(d,f)=>this.stop(d,f),c=()=>rc(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new EH(t,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:MH(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Xa.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!Pw(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(s=nhe(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&Mg(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=ahe(a.layoutBox,r):this.constraints=!1,this.elastic=lhe(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&rc(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=she(a.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Mg(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=mhe(n,a.root,this.visualElement.getTransformPagePoint());let s=ihe(a.layout.layoutBox,i);if(r){const l=r(che(s));this.hasMutatedConstraints=!!l,l&&(s=OH(l))}return s}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=rc(d=>{if(!Pw(d,r,this.currentDirection))return;let f=c&&c[d]||{};s&&(f={min:0,max:0});const h=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(_4(t,n,0,r))}stopAnimation(){rc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){rc(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){rc(r=>{const{drag:n}=this.getProps();if(!Pw(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:s,max:l}=a.layout.layoutBox[r];i.set(t[r]-_i(s,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Mg(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};rc(s=>{const l=this.getAxisMotionValue(s);if(l){const c=l.get();a[s]=ohe({min:c,max:c},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),rc(s=>{if(!Pw(s,t,null))return;const l=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];l.set(_i(c,u,a[s]))})}addListeners(){if(!this.visualElement.current)return;phe.set(this.visualElement,this);const t=this.visualElement.current,r=Bd(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Mg(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const s=Id(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(rc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=rk,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:l}}}function Pw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function vhe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class xhe extends Fh{constructor(t){super(t),this.removeGroupControls=Di,this.removeListeners=Di,this.controls=new ghe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Di}unmount(){this.removeGroupControls(),this.removeListeners()}}const a6=e=>(t,r)=>{e&&Xa.update(()=>e(t,r))};class yhe extends Fh{constructor(){super(...arguments),this.removePointerDownListener=Di}onPointerDown(t){this.session=new EH(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MH(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:a6(t),onStart:a6(r),onMove:n,onEnd:(i,s)=>{delete this.session,a&&Xa.update(()=>a(i,s))}}}mount(){this.removePointerDownListener=Bd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function bhe(){const e=v.useContext(Bj);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,a=v.useId();return v.useEffect(()=>n(a),[]),!t&&r?[!1,()=>r&&r(a)]:[!0]}const T2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function i6(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const e0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(bn.test(e))e=parseFloat(e);else return e;const r=i6(e,t.target.x),n=i6(e,t.target.y);return`${r}% ${n}%`}},whe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=Ch.parse(e);if(a.length>5)return n;const i=Ch.createTransformer(e),s=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+s]/=l,a[1+s]/=c;const u=_i(l,c,.5);return typeof a[2+s]=="number"&&(a[2+s]/=u),typeof a[3+s]=="number"&&(a[3+s]/=u),i(a)}};class _he extends se.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;Eue(She),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),T2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,s=n.projection;return s&&(s.isPresent=i,a||t.layoutDependency!==r||r===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||Xa.postRender(()=>{const l=s.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function RH(e){const[t,r]=bhe(),n=v.useContext(l4);return se.createElement(_he,{...e,layoutGroup:n,switchLayoutGroup:v.useContext(OW),isPresent:t,safeToRemove:r})}const She={borderRadius:{...e0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:e0,borderTopRightRadius:e0,borderBottomLeftRadius:e0,borderBottomRightRadius:e0,boxShadow:whe},LH=["TopLeft","TopRight","BottomLeft","BottomRight"],jhe=LH.length,o6=e=>typeof e=="string"?parseFloat(e):e,s6=e=>typeof e=="number"||bn.test(e);function Nhe(e,t,r,n,a,i){a?(e.opacity=_i(0,r.opacity!==void 0?r.opacity:1,Che(n)),e.opacityExit=_i(t.opacity!==void 0?t.opacity:1,0,Ahe(n))):i&&(e.opacity=_i(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let s=0;s<jhe;s++){const l=`border${LH[s]}Radius`;let c=l6(t,l),u=l6(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||s6(c)===s6(u)?(e[l]=Math.max(_i(o6(c),o6(u),n),0),(Wu.test(u)||Wu.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=_i(t.rotate||0,r.rotate||0,n))}function l6(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Che=$H(0,.5,oH),Ahe=$H(.5,.95,Di);function $H(e,t,r){return n=>n<e?0:n>t?1:r($y(e,t,n))}function c6(e,t){e.min=t.min,e.max=t.max}function Jl(e,t){c6(e.x,t.x),c6(e.y,t.y)}function u6(e,t,r,n,a){return e-=t,e=T_(e,1/r,n),a!==void 0&&(e=T_(e,1/a,n)),e}function Phe(e,t=0,r=1,n=.5,a,i=e,s=e){if(Wu.test(t)&&(t=parseFloat(t),t=_i(s.min,s.max,t/100)-s.min),typeof t!="number")return;let l=_i(i.min,i.max,n);e===i&&(l-=t),e.min=u6(e.min,t,r,l,a),e.max=u6(e.max,t,r,l,a)}function d6(e,t,[r,n,a],i,s){Phe(e,t[r],t[n],t[a],t.scale,i,s)}const Ehe=["x","scaleX","originX"],khe=["y","scaleY","originY"];function f6(e,t,r,n){d6(e.x,t,Ehe,r?r.x:void 0,n?n.x:void 0),d6(e.y,t,khe,r?r.y:void 0,n?n.y:void 0)}function h6(e){return e.translate===0&&e.scale===1}function FH(e){return h6(e.x)&&h6(e.y)}function Ohe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function BH(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function m6(e){return Fl(e.x)/Fl(e.y)}class The{constructor(){this.members=[]}add(t){S4(this.members,t),t.scheduleRender()}remove(t){if(j4(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function p6(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return(s!==1||l!==1)&&(n+=`scale(${s}, ${l})`),n||"none"}const Ihe=(e,t)=>e.depth-t.depth;class Dhe{constructor(){this.children=[],this.isDirty=!1}add(t){S4(this.children,t),this.isDirty=!0}remove(t){j4(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ihe),this.isDirty=!1,this.children.forEach(t)}}function Mhe(e,t){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(Yd(n),e(i-t))};return Xa.read(n,!0),()=>Yd(n)}function Rhe(e){window.MotionDebug&&window.MotionDebug.record(e)}function Lhe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function $he(e,t,r){const n=nl(e)?e:wv(e);return n.start(_4("",n,t,r)),n.animation}const g6=["","X","Y","Z"],Fhe={visibility:"hidden"},v6=1e3;let Bhe=0;const fm={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function zH({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(s={},l=t?.()){this.id=Bhe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fm.totalNodes=fm.resolvedTargetDeltas=fm.recalculatedProjection=0,this.nodes.forEach(Uhe),this.nodes.forEach(Khe),this.nodes.forEach(Yhe),this.nodes.forEach(Vhe),Rhe(fm)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dhe)}addEventListener(s,l){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new N4),this.eventHandlers.get(s).add(l)}notifyListeners(s,...l){const c=this.eventHandlers.get(s);c&&c.notify(...l)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Lhe(s),this.instance=s;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Mhe(h,250),T2.hasAnimatedSinceResize&&(T2.hasAnimatedSinceResize=!1,this.nodes.forEach(y6))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||d.getDefaultTransition()||eme,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=d.getProps(),b=!this.targetLayout||!BH(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const _={...w4(p,"layout"),onPlay:x,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||y6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Yd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Xhe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(x6);return}this.isUpdating||this.nodes.forEach(Hhe),this.isUpdating=!1,this.nodes.forEach(Ghe),this.nodes.forEach(zhe),this.nodes.forEach(qhe),this.clearAllSnapshots();const l=performance.now();as.delta=Nh(0,1e3/60,l-as.timestamp),as.timestamp=l,as.isProcessing=!0,I5.update.process(as),I5.preRender.process(as),I5.render.process(as),as.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Whe),this.sharedNodes.forEach(Jhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!FH(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&(l||dm(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return s&&(c=this.removeTransform(c)),tme(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Yi();const l=s.measureViewportBox(),{scroll:c}=this.root;return c&&(Ff(l.x,c.offset.x),Ff(l.y,c.offset.y)),l}removeElementScroll(s){const l=Yi();Jl(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){Jl(l,s);const{scroll:h}=this.root;h&&(Ff(l.x,-h.offset.x),Ff(l.y,-h.offset.y))}Ff(l.x,d.offset.x),Ff(l.y,d.offset.y)}}return l}applyTransform(s,l=!1){const c=Yi();Jl(c,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&$g(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),dm(d.latestValues)&&$g(c,d.latestValues)}return dm(this.latestValues)&&$g(c,this.latestValues),c}removeTransform(s){const l=Yi();Jl(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!dm(u.latestValues))continue;nk(u.latestValues)&&u.updateSnapshot();const d=Yi(),f=u.measurePageBox();Jl(d,f),f6(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return dm(this.latestValues)&&f6(l,this.latestValues),l}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==as.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=as.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yi(),this.relativeTargetOrigin=Yi(),W0(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Jl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Yi(),this.targetWithTransforms=Yi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rhe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jl(this.target,this.layout.layoutBox),IH(this.target,this.targetDelta)):Jl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yi(),this.relativeTargetOrigin=Yi(),W0(this.relativeTargetOrigin,this.target,m.target),Jl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fm.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||nk(this.parent.latestValues)||TH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===as.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Jl(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;dhe(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Lg(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Lg(),this.projectionDeltaWithTransform=Lg());const p=this.projectionTransform;V0(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=p6(this.projectionDelta,this.treeScale),(this.projectionTransform!==p||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),fm.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Lg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Yi(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,x=this.getStack(),y=!x||x.members.length<=1,b=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(Zhe));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;b6(f.x,s.x,j),b6(f.y,s.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(W0(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Qhe(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&Ohe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Yi()),Jl(w,this.relativeTarget)),p&&(this.animationValues=d,Nhe(d,u,this.latestValues,j,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Yd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xa.update(()=>{T2.hasAnimatedSinceResize=!0,this.currentAnimation=$he(0,v6,{...s,onUpdate:l=>{this.mixTargetDelta(l),s.onUpdate&&s.onUpdate(l)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(v6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=s;if(!(!l||!c||!u)){if(this!==s&&this.layout&&u&&qH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Yi();const f=Fl(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+f;const h=Fl(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+h}Jl(l,c),$g(l,d),V0(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(s,l){this.sharedNodes.has(s)||this.sharedNodes.set(s,new The),this.sharedNodes.get(s).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:l}=this.options;return l?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:l}=this.options;return l?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let l=!1;const{latestValues:c}=s;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<g6.length;d++){const f="rotate"+g6[d];c[f]&&(u[f]=c[f],s.setStaticValue(f,0))}s.render();for(const d in u)s.setStaticValue(d,u[d]);s.scheduleRender()}getProjectionStyles(s){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Fhe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=O2(s?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=O2(s?.pointerEvents)||""),this.hasProjected&&!dm(this.latestValues)&&(p.transform=d?d({},""):"none",this.hasProjected=!1),p}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=p6(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in N_){if(h[p]===void 0)continue;const{correct:x,applyTo:y}=N_[p],b=u.transform==="none"?h[p]:x(h[p],f);if(y){const w=y.length;for(let _=0;_<w;_++)u[y[_]]=b}else u[p]=b}return this.options.layoutId&&(u.pointerEvents=f===this?O2(s?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var l;return(l=s.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(x6),this.root.sharedNodes.clear()}}}function zhe(e){e.updateLayout()}function qhe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,s=r.source!==e.layout.source;i==="size"?rc(f=>{const h=s?r.measuredBox[f]:r.layoutBox[f],m=Fl(h);h.min=n[f].min,h.max=h.min+m}):qH(i,r.layoutBox,n)&&rc(f=>{const h=s?r.measuredBox[f]:r.layoutBox[f],m=Fl(n[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=Lg();V0(l,n,r.layoutBox);const c=Lg();s?V0(c,e.applyTransform(a,!0),r.measuredBox):V0(c,n,r.layoutBox);const u=!FH(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const g=Yi();W0(g,r.layoutBox,h.layoutBox);const p=Yi();W0(p,n,m.layoutBox),BH(g,p)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Uhe(e){fm.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Vhe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Whe(e){e.clearSnapshot()}function x6(e){e.clearMeasurements()}function Hhe(e){e.isLayoutDirty=!1}function Ghe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function y6(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Khe(e){e.resolveTargetDelta()}function Yhe(e){e.calcProjection()}function Xhe(e){e.resetRotation()}function Jhe(e){e.removeLeadSnapshot()}function b6(e,t,r){e.translate=_i(t.translate,0,r),e.scale=_i(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function w6(e,t,r,n){e.min=_i(t.min,r.min,n),e.max=_i(t.max,r.max,n)}function Qhe(e,t,r,n){w6(e.x,t.x,r.x,n),w6(e.y,t.y,r.y,n)}function Zhe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const eme={duration:.45,ease:[.4,0,.1,1]},_6=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),S6=_6("applewebkit/")&&!_6("chrome/")?Math.round:Di;function j6(e){e.min=S6(e.min),e.max=S6(e.max)}function tme(e){j6(e.x),j6(e.y)}function qH(e,t,r){return e==="position"||e==="preserve-aspect"&&!tk(m6(t),m6(r),.2)}const rme=zH({attachResizeListener:(e,t)=>Id(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),V5={current:void 0},UH=zH({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!V5.current){const e=new rme({});e.mount(window),e.setOptions({layoutScroll:!0}),V5.current=e}return V5.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),nme={pan:{Feature:yhe},drag:{Feature:xhe,ProjectionNode:UH,MeasureLayout:RH}},ame=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ime(e){const t=ame.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function ik(e,t,r=1){const[n,a]=ime(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const s=i.trim();return NH(s)?parseFloat(s):s}else return KE(a)?ik(a,t,r+1):a}function ome(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(a=>{const i=a.get();if(!KE(i))return;const s=ik(i,n);s&&a.set(s)});for(const a in t){const i=t[a];if(!KE(i))continue;const s=ik(i,n);s&&(t[a]=s,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:t,transitionEnd:r}}const sme=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),VH=e=>sme.has(e),lme=e=>Object.keys(e).some(VH),N6=e=>e===Op||e===bn,C6=(e,t)=>parseFloat(e.split(", ")[t]),A6=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return C6(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?C6(i[1],e):0}},cme=new Set(["x","y","z"]),ume=r1.filter(e=>!cme.has(e));function dme(e){const t=[];return ume.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const _v={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:A6(4,13),y:A6(5,14)};_v.translateX=_v.x;_v.translateY=_v.y;const fme=(e,t,r)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:s}=i,l={};s==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=_v[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=_v[u](c,i)}),e},hme=(e,t,r={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(VH);let i=[],s=!1;const l=[];if(a.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],f=Zx(d);const h=t[c];let m;if(A_(h)){const g=h.length,p=h[0]===null?1:0;d=h[p],f=Zx(d);for(let x=p;x<g&&h[x]!==null;x++)m?g4(Zx(h[x])===m):m=Zx(h[x])}else m=Zx(h);if(f!==m)if(N6(f)&&N6(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&m===bn&&(t[c]=h.map(parseFloat))}else f?.transform&&m?.transform&&(d===0||h===0)?d===0?u.set(m.transform(d)):t[c]=f.transform(h):(s||(i=dme(e),s=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=fme(t,e,l);return i.length&&i.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),zj&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function mme(e,t,r,n){return lme(t)?hme(e,t,r,n):{target:t,transitionEnd:n}}const pme=(e,t,r,n)=>{const a=ome(e,t,n);return t=a.target,n=a.transitionEnd,mme(e,t,r,n)},ok={current:null},WH={current:!1};function gme(){if(WH.current=!0,!!zj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ok.current=e.matches;e.addListener(t),t()}else ok.current=!1}function vme(e,t,r){const{willChange:n}=t;for(const a in t){const i=t[a],s=r[a];if(nl(i))e.addValue(a,i),O_(n)&&n.add(a);else if(nl(s))e.addValue(a,wv(i,{owner:e})),O_(n)&&n.remove(a);else if(s!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,wv(l!==void 0?l:i,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const P6=new WeakMap,HH=Object.keys(Ly),xme=HH.length,E6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yme=s4.length;class bme{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Xa.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=s,this.isControllingVariants=Uj(r),this.isVariantNode=kW(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const f in d){const h=d[f];l[f]!==void 0&&nl(h)&&(h.set(l[f],!1),O_(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,P6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),WH.current||gme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ok.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){P6.delete(this.current),this.projection&&this.projection.unmount(),Yd(this.notifyUpdate),Yd(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=kp.has(t),a=r.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&Xa.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,a,i){let s,l;for(let c=0;c<xme;c++){const u=HH[c],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:m}=Ly[u];h&&(s=h),d(r)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:m}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&Mg(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<E6.length;n++){const a=E6[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=vme(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<yme;n++){const a=s4[n],i=this.props[a];(Ry(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=wv(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=p4(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!nl(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new N4),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class GH extends bme{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:a},i){let s=Lfe(n,t||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),s&&(s=a(s))),i){Mfe(this,n,s);const l=pme(this,n,s,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function wme(e){return window.getComputedStyle(e)}class _me extends GH{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(kp.has(r)){const n=b4(r);return n&&n.default||0}else{const n=wme(t),a=(DW(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return DH(t,r)}build(t,r,n,a){u4(t,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,r){return m4(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nl(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,a){BW(t,r,n,a)}}class Sme extends GH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(kp.has(r)){const n=b4(r);return n&&n.default||0}return r=zW.has(r)?r:i4(r),t.getAttribute(r)}measureInstanceViewportBox(){return Yi()}scrapeMotionValuesFromProps(t,r){return UW(t,r)}build(t,r,n,a){f4(t,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,r,n,a){qW(t,r,n,a)}mount(t){this.isSVGTag=h4(t.tagName),super.mount(t)}}const jme=(e,t)=>c4(e)?new Sme(t,{enableHardwareAcceleration:!1}):new _me(t,{enableHardwareAcceleration:!0}),Nme={layout:{ProjectionNode:UH,MeasureLayout:RH}},Cme={...Qfe,...xde,...nme,...Nme},Pr=Aue((e,t)=>ide(e,t,Cme,jme));function KH(){const e=v.useRef(!1);return a4(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Ame(){const e=KH(),[t,r]=v.useState(0),n=v.useCallback(()=>{e.current&&r(t+1)},[t]);return[v.useCallback(()=>Xa.postRender(n),[n]),t]}class Pme extends v.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Eme({children:e,isPresent:t}){const r=v.useId(),n=v.useRef(null),a=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:i,height:s,top:l,left:c}=a.current;if(t||!n.current||!i||!s)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),v.createElement(Pme,{isPresent:t,childRef:n,sizeRef:a},v.cloneElement(e,{ref:n}))}const W5=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:s})=>{const l=VW(kme),c=v.useId(),u=v.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:d=>{l.set(d,!0);for(const f of l.values())if(!f)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return v.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[r]),v.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),s==="popLayout"&&(e=v.createElement(Eme,{isPresent:r},e)),v.createElement(Bj.Provider,{value:u},e)};function kme(){return new Map}function Ome(e){return v.useEffect(()=>()=>e(),[])}const hm=e=>e.key||"";function Tme(e,t){e.forEach(r=>{const n=hm(r);t.set(n,r)})}function Ime(e){const t=[];return v.Children.forEach(e,r=>{v.isValidElement(r)&&t.push(r)}),t}const Dme=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:s="sync"})=>{const l=v.useContext(l4).forceRender||Ame()[0],c=KH(),u=Ime(e);let d=u;const f=v.useRef(new Map).current,h=v.useRef(d),m=v.useRef(new Map).current,g=v.useRef(!0);if(a4(()=>{g.current=!1,Tme(u,m),h.current=d}),Ome(()=>{g.current=!0,m.clear(),f.clear()}),g.current)return v.createElement(v.Fragment,null,d.map(b=>v.createElement(W5,{key:hm(b),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:s},b)));d=[...d];const p=h.current.map(hm),x=u.map(hm),y=p.length;for(let b=0;b<y;b++){const w=p[b];x.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return s==="wait"&&f.size&&(d=[]),f.forEach((b,w)=>{if(x.indexOf(w)!==-1)return;const _=m.get(w);if(!_)return;const j=p.indexOf(w);let N=b;if(!N){const P=()=>{f.delete(w);const A=Array.from(m.keys()).filter(k=>!x.includes(k));if(A.forEach(k=>m.delete(k)),h.current=u.filter(k=>{const M=hm(k);return M===w||A.includes(M)}),!f.size){if(c.current===!1)return;l(),n&&n()}};N=v.createElement(W5,{key:hm(_),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:s},_),f.set(w,N)}d.splice(j,0,N)}),d=d.map(b=>{const w=b.key;return f.has(w)?b:v.createElement(W5,{key:hm(b),isPresent:!0,presenceAffectsLayout:i,mode:s},b)}),v.createElement(v.Fragment,null,f.size?d:d.map(b=>v.cloneElement(b)))};function k6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Gj(...e){return t=>{let r=!1;const n=e.map(a=>{const i=k6(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():k6(e[a],null)}}}}function oa(...e){return v.useCallback(Gj(...e),e)}function Ah(e){const t=Rme(e),r=v.forwardRef((n,a)=>{const{children:i,...s}=n,l=v.Children.toArray(i),c=l.find($me);if(c){const u=c.props.children,d=l.map(f=>f===c?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...s,ref:a,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return o.jsx(t,{...s,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var Mme=Ah("Slot");function Rme(e){const t=v.forwardRef((r,n)=>{const{children:a,...i}=r;if(v.isValidElement(a)){const s=Bme(a),l=Fme(i,a.props);return a.type!==v.Fragment&&(l.ref=n?Gj(n,s):s),v.cloneElement(a,l)}return v.Children.count(a)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var YH=Symbol("radix.slottable");function Lme(e){const t=({children:r})=>o.jsx(o.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=YH,t}function $me(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===YH}function Fme(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Bme(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const O6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,T6=An,C4=(e,t)=>r=>{var n;if(t?.variants==null)return T6(e,r?.class,r?.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=r?.[u],f=i?.[u];if(d===null)return null;const h=O6(d)||O6(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,x]=g;return Array.isArray(x)?x.includes({...i,...l}[p]):{...i,...l}[p]===x})?[...u,f,h]:u},[]);return T6(e,s,c,r?.class,r?.className)},Fy=C4("inline-flex items-center justify-center rounded-sm text-sm font-bold tracking-wide transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-brand text-primary-foreground hover:bg-brand/90 shadow-lg shadow-brand/15",destructive:"bg-danger text-white hover:bg-danger/90 shadow-lg shadow-danger/15",outline:"border border-border bg-transparent hover:bg-accent hover:text-accent-foreground",secondary:"bg-surface-2 text-secondary-foreground hover:bg-surface-2/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-brand underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90 shadow-lg shadow-success/15"},size:{default:"h-10 px-5 py-2 gap-2",sm:"h-9 rounded-sm px-3 gap-1.5",lg:"h-12 rounded-md px-8 gap-2.5 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ye=se.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const s=n?Mme:"button";return o.jsx(s,{className:kt(Fy({variant:t,size:r,className:e})),ref:i,...a})});ye.displayName="Button";const H5=[{to:"/",icon:oue,label:"Painel Principal"},{to:"/agenda",icon:Uu,label:"Agenda"},{to:"/vendas",icon:Zb,label:"Loja"},{to:"/financeiro",icon:CW,label:"Financeiro"}],sk={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:e*.05+.3,duration:.3,ease:"easeOut"}})},zme=({to:e,icon:t,label:r,index:n,onNavigate:a})=>{const i="flex items-center h-[52px] px-4 rounded-sm bg-brand text-primary-foreground font-bold shadow-lg shadow-brand/10 border-l-4 border-brand",s="flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 border-transparent";return o.jsx(Pr.li,{custom:n,variants:sk,initial:"hidden",animate:"visible",whileHover:{x:4},transition:{type:"spring",stiffness:300,damping:15},children:o.jsxs(Of,{to:e,onClick:a,className:({isActive:l})=>l?i:s,children:[o.jsx(t,{className:"h-5 w-5 mr-4 flex-shrink-0"}),o.jsx("span",{className:"text-base",children:r})]})})};function qme({onNavigate:e,isVisible:t,setIsVisible:r,sidebarPinned:n}){const a=Ko(),i=["/produtos","/clientes","/equipe","/quadras","/empresas","/finalizadoras"],s=v.useMemo(()=>i.includes(a.pathname),[a.pathname]),[l,c]=v.useState(s),u=v.useRef(null);v.useRef(null);const d=v.useRef(0),f=v.useRef(0),h=()=>{window.innerWidth<768&&r(!1)};return v.useEffect(()=>{const m=x=>{window.innerWidth>=768||(d.current=x.touches[0].clientX,f.current=x.touches[0].clientY)},g=x=>{if(window.innerWidth>=768)return;const y=x.touches[0].clientX,b=x.touches[0].clientY,w=y-d.current,_=Math.abs(b-f.current);d.current<50&&w>50&&_<50&&r(!0)},p=()=>{d.current=0,f.current=0};return window.addEventListener("touchstart",m,{passive:!0}),window.addEventListener("touchmove",g,{passive:!0}),window.addEventListener("touchend",p,{passive:!0}),()=>{window.removeEventListener("touchstart",m),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",p)}},[t]),o.jsx(o.Fragment,{children:o.jsxs(Pr.aside,{ref:u,initial:!1,animate:{width:n||t?280:0},className:"h-screen flex-shrink-0 bg-surface flex flex-col border-r border-border shadow-xl shadow-black/20 overflow-hidden",children:[o.jsxs(Pr.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"flex items-center px-6 pt-8 pb-6 h-[120px] flex-shrink-0",children:[o.jsx("div",{className:"w-14 h-14 bg-brand rounded-xl flex items-center justify-center mr-4",children:o.jsx(t1,{className:"w-8 h-8 text-primary-foreground"})}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"font-extrabold text-2xl",style:{color:"#FF6600"},children:"Fluxo"}),o.jsx("span",{className:"font-extrabold text-2xl",style:{color:"#FFAA33"},children:"7"}),o.jsx("span",{className:"font-medium text-2xl",style:{color:"#B0B0B0"},children:" Arena"})]})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto px-6 py-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent hover:scrollbar-thumb-border-hover",children:o.jsxs("ul",{className:"space-y-3",children:[H5.map((m,g)=>o.jsx(zme,{...m,index:g,onNavigate:h},m.to)),o.jsxs(Pr.li,{custom:H5.length,variants:sk,initial:"hidden",animate:"visible",children:[o.jsxs("button",{type:"button",onClick:()=>c(m=>!m),className:`w-full flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 ${s?"bg-brand text-primary-foreground font-bold border-brand":"border-transparent"}`,children:[o.jsx(Zce,{className:"h-5 w-5 mr-4 flex-shrink-0"}),o.jsx("span",{className:"text-base flex-1 text-left",children:"Cadastros"}),o.jsx(__,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]}),l&&o.jsxs("ul",{className:"mt-2 ml-8 space-y-2",children:[o.jsx("li",{children:o.jsxs(Of,{to:"/clientes",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[o.jsx(As,{className:"h-4 w-4 mr-3"})," Clientes & Fornecedores"]})}),o.jsx("li",{children:o.jsxs(Of,{to:"/finalizadoras",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[o.jsx(Pm,{className:"h-4 w-4 mr-3"})," Finalizadoras"]})}),o.jsx("li",{children:o.jsxs(Of,{to:"/produtos",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[o.jsx(bv,{className:"h-4 w-4 mr-3"})," Produtos"]})}),o.jsx("li",{children:o.jsxs(Of,{to:"/equipe",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[o.jsx(vue,{className:"h-4 w-4 mr-3"})," Equipe"]})}),o.jsx("li",{children:o.jsxs(Of,{to:"/quadras",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[o.jsx(iue,{className:"h-4 w-4 mr-3"})," Quadras"]})}),o.jsx("li",{children:o.jsxs(Of,{to:"/empresas",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[o.jsx(UE,{className:"h-4 w-4 mr-3"})," Empresa"]})})]})]}),o.jsx(Pr.li,{custom:H5.length+1,variants:sk,initial:"hidden",animate:"visible",className:"pt-4 border-t border-border/50 mt-4",children:o.jsxs(Of,{to:"/suporte",onClick:h,className:({isActive:m})=>m?"flex items-center h-[52px] px-4 rounded-sm bg-brand text-primary-foreground font-bold shadow-lg shadow-brand/10 border-l-4 border-brand":"flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 border-transparent",children:[o.jsx(wW,{className:"h-5 w-5 mr-4 flex-shrink-0"}),o.jsx("span",{className:"text-base",children:"Suporte"})]})})]})})]})})}function Sr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function Ume(e,t){const r=v.createContext(t),n=i=>{const{children:s,...l}=i,c=v.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:s})};n.displayName=e+"Provider";function a(i){const s=v.useContext(r);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function _c(e,t=[]){let r=[];function n(i,s){const l=v.createContext(s),c=r.length;r=[...r,s];const u=f=>{const{scope:h,children:m,...g}=f,p=h?.[e]?.[c]||l,x=v.useMemo(()=>g,Object.values(g));return o.jsx(p.Provider,{value:x,children:m})};u.displayName=i+"Provider";function d(f,h){const m=h?.[e]?.[c]||l,g=v.useContext(m);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(s=>v.createContext(s));return function(l){const c=l?.[e]||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Vme(a,...t)]}function Vme(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var Go=globalThis?.document?v.useLayoutEffect:()=>{},Wme=i3[" useId ".trim().toString()]||(()=>{}),Hme=0;function iu(e){const[t,r]=v.useState(Wme());return Go(()=>{e||r(n=>n??String(Hme++))},[e]),e||(t?`radix-${t}`:"")}var Gme=i3[" useInsertionEffect ".trim().toString()]||Go;function Xd({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,s]=Kme({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=v.useRef(e!==void 0);v.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=v.useCallback(d=>{if(l){const f=Yme(d)?d(e):d;f!==e&&s.current?.(f)}else i(d)},[l,e,i,s]);return[c,u]}function Kme({defaultProp:e,onChange:t}){const[r,n]=v.useState(e),a=v.useRef(r),i=v.useRef(t);return Gme(()=>{i.current=t},[t]),v.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function Yme(e){return typeof e=="function"}var Xme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xn=Xme.reduce((e,t)=>{const r=Ah(`Primitive.${t}`),n=v.forwardRef((a,i)=>{const{asChild:s,...l}=a,c=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function A4(e,t){e&&Lh.flushSync(()=>e.dispatchEvent(t))}function al(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>t.current?.(...r),[])}function Jme(e,t=globalThis?.document){const r=al(e);v.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Qme="DismissableLayer",lk="dismissableLayer.update",Zme="dismissableLayer.pointerDownOutside",epe="dismissableLayer.focusOutside",I6,XH=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cx=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:l,...c}=e,u=v.useContext(XH),[d,f]=v.useState(null),h=d?.ownerDocument??globalThis?.document,[,m]=v.useState({}),g=oa(t,P=>f(P)),p=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(x),b=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=b>=y,j=rpe(P=>{const A=P.target,k=[...u.branches].some(M=>M.contains(A));!_||k||(a?.(P),s?.(P),P.defaultPrevented||l?.())},h),N=npe(P=>{const A=P.target;[...u.branches].some(M=>M.contains(A))||(i?.(P),s?.(P),P.defaultPrevented||l?.())},h);return Jme(P=>{b===u.layers.size-1&&(n?.(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},h),v.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(I6=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),D6(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=I6)}},[d,h,r,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),D6())},[d,u]),v.useEffect(()=>{const P=()=>m({});return document.addEventListener(lk,P),()=>document.removeEventListener(lk,P)},[]),o.jsx(xn.div,{...c,ref:g,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:Sr(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Sr(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Sr(e.onPointerDownCapture,j.onPointerDownCapture)})});cx.displayName=Qme;var tpe="DismissableLayerBranch",JH=v.forwardRef((e,t)=>{const r=v.useContext(XH),n=v.useRef(null),a=oa(t,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx(xn.div,{...e,ref:a})});JH.displayName=tpe;function rpe(e,t=globalThis?.document){const r=al(e),n=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){QH(Zme,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function npe(e,t=globalThis?.document){const r=al(e),n=v.useRef(!1);return v.useEffect(()=>{const a=i=>{i.target&&!n.current&&QH(epe,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function D6(){const e=new CustomEvent(lk);document.dispatchEvent(e)}function QH(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?A4(a,i):a.dispatchEvent(i)}var ape=cx,ipe=JH,G5="focusScope.autoFocusOnMount",K5="focusScope.autoFocusOnUnmount",M6={bubbles:!1,cancelable:!0},ope="FocusScope",o1=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[l,c]=v.useState(null),u=al(a),d=al(i),f=v.useRef(null),h=oa(t,p=>c(p)),m=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:If(f.current,{select:!0})},x=function(w){if(m.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||If(f.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&If(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",x),b.disconnect()}}},[n,l,m.paused]),v.useEffect(()=>{if(l){L6.add(m);const p=document.activeElement;if(!l.contains(p)){const y=new CustomEvent(G5,M6);l.addEventListener(G5,u),l.dispatchEvent(y),y.defaultPrevented||(spe(fpe(ZH(l)),{select:!0}),document.activeElement===p&&If(l))}return()=>{l.removeEventListener(G5,u),setTimeout(()=>{const y=new CustomEvent(K5,M6);l.addEventListener(K5,d),l.dispatchEvent(y),y.defaultPrevented||If(p??document.body,{select:!0}),l.removeEventListener(K5,d),L6.remove(m)},0)}}},[l,u,d,m]);const g=v.useCallback(p=>{if(!r&&!n||m.paused)return;const x=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(x&&y){const b=p.currentTarget,[w,_]=lpe(b);w&&_?!p.shiftKey&&y===_?(p.preventDefault(),r&&If(w,{select:!0})):p.shiftKey&&y===w&&(p.preventDefault(),r&&If(_,{select:!0})):y===b&&p.preventDefault()}},[r,n,m.paused]);return o.jsx(xn.div,{tabIndex:-1,...s,ref:h,onKeyDown:g})});o1.displayName=ope;function spe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(If(n,{select:t}),document.activeElement!==r)return}function lpe(e){const t=ZH(e),r=R6(t,e),n=R6(t.reverse(),e);return[r,n]}function ZH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function R6(e,t){for(const r of e)if(!cpe(r,{upTo:t}))return r}function cpe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function upe(e){return e instanceof HTMLInputElement&&"select"in e}function If(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&upe(e)&&t&&e.select()}}var L6=dpe();function dpe(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=$6(e,t),e.unshift(t)},remove(t){e=$6(e,t),e[0]?.resume()}}}function $6(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function fpe(e){return e.filter(t=>t.tagName!=="A")}var hpe="Portal",ux=v.forwardRef((e,t)=>{const{container:r,...n}=e,[a,i]=v.useState(!1);Go(()=>i(!0),[]);const s=r||a&&globalThis?.document?.body;return s?ZV.createPortal(o.jsx(xn.div,{...n,ref:t}),s):null});ux.displayName=hpe;function mpe(e,t){return v.useReducer((r,n)=>t[r][n]??r,e)}var ql=e=>{const{present:t,children:r}=e,n=ppe(t),a=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=oa(n.ref,gpe(a));return typeof r=="function"||n.isPresent?v.cloneElement(a,{ref:i}):null};ql.displayName="Presence";function ppe(e){const[t,r]=v.useState(),n=v.useRef(null),a=v.useRef(e),i=v.useRef("none"),s=e?"mounted":"unmounted",[l,c]=mpe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const u=Ew(n.current);i.current=l==="mounted"?u:"none"},[l]),Go(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Ew(u);e?c("MOUNT"):m==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Go(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=Ew(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(i.current=Ew(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:v.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Ew(e){return e?.animationName||"none"}function gpe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Y5=0;function Kj(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??F6()),document.body.insertAdjacentElement("beforeend",e[1]??F6()),Y5++,()=>{Y5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Y5--}},[])}function F6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ku=function(){return ku=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ku.apply(this,arguments)};function eG(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function vpe(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var I2="right-scroll-bar-position",D2="width-before-scroll-bar",xpe="with-scroll-bars-hidden",ype="--removed-body-scroll-bar-size";function X5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bpe(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var wpe=typeof window<"u"?v.useLayoutEffect:v.useEffect,B6=new WeakMap;function _pe(e,t){var r=bpe(t||null,function(n){return e.forEach(function(a){return X5(a,n)})});return wpe(function(){var n=B6.get(r);if(n){var a=new Set(n),i=new Set(e),s=r.current;a.forEach(function(l){i.has(l)||X5(l,null)}),i.forEach(function(l){a.has(l)||X5(l,s)})}B6.set(r,e)},[e]),r}function Spe(e){return e}function jpe(e,t){t===void 0&&(t=Spe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var s=t(i,n);return r.push(s),function(){r=r.filter(function(l){return l!==s})}},assignSyncMedium:function(i){for(n=!0;r.length;){var s=r;r=[],s.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var s=[];if(r.length){var l=r;r=[],l.forEach(i),s=r}var c=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),r}}}};return a}function Npe(e){e===void 0&&(e={});var t=jpe(null);return t.options=ku({async:!0,ssr:!1},e),t}var tG=function(e){var t=e.sideCar,r=eG(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return v.createElement(n,ku({},r))};tG.isSideCarExport=!0;function Cpe(e,t){return e.useMedium(t),tG}var rG=Npe(),J5=function(){},Yj=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:J5,onWheelCapture:J5,onTouchMoveCapture:J5}),a=n[0],i=n[1],s=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,_=eG(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,N=_pe([r,t]),P=ku(ku({},_),a);return v.createElement(v.Fragment,null,d&&v.createElement(j,{sideCar:rG,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!x,lockRef:r,gapMode:w}),s?v.cloneElement(v.Children.only(l),ku(ku({},P),{ref:N})):v.createElement(b,ku({},P,{className:c,ref:N}),l))});Yj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yj.classNames={fullWidth:D2,zeroRight:I2};var z6,Ape=function(){if(z6)return z6;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ppe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ape();return t&&e.setAttribute("nonce",t),e}function Epe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kpe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ope=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Ppe())&&(Epe(t,r),kpe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Tpe=function(){var e=Ope();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},nG=function(){var e=Tpe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Ipe={left:0,top:0,right:0,gap:0},Q5=function(e){return parseInt(e||"",10)||0},Dpe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Q5(r),Q5(n),Q5(a)]},Mpe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ipe;var t=Dpe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Rpe=nG(),Jg="data-scroll-locked",Lpe=function(e,t,r,n){var a=e.left,i=e.top,s=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(xpe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Jg,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(I2,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(D2,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(I2," .").concat(I2,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(D2," .").concat(D2,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Jg,`] {
    `).concat(ype,": ").concat(l,`px;
  }
`)},q6=function(){var e=parseInt(document.body.getAttribute(Jg)||"0",10);return isFinite(e)?e:0},$pe=function(){v.useEffect(function(){return document.body.setAttribute(Jg,(q6()+1).toString()),function(){var e=q6()-1;e<=0?document.body.removeAttribute(Jg):document.body.setAttribute(Jg,e.toString())}},[])},Fpe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;$pe();var i=v.useMemo(function(){return Mpe(a)},[a]);return v.createElement(Rpe,{styles:Lpe(i,!t,a,r?"":"!important")})},ck=!1;if(typeof window<"u")try{var kw=Object.defineProperty({},"passive",{get:function(){return ck=!0,!0}});window.addEventListener("test",kw,kw),window.removeEventListener("test",kw,kw)}catch{ck=!1}var Gp=ck?{passive:!1}:!1,Bpe=function(e){return e.tagName==="TEXTAREA"},aG=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Bpe(e)&&r[t]==="visible")},zpe=function(e){return aG(e,"overflowY")},qpe=function(e){return aG(e,"overflowX")},U6=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=iG(e,n);if(a){var i=oG(e,n),s=i[1],l=i[2];if(s>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Upe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Vpe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},iG=function(e,t){return e==="v"?zpe(t):qpe(t)},oG=function(e,t){return e==="v"?Upe(t):Vpe(t)},Wpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Hpe=function(e,t,r,n,a){var i=Wpe(e,window.getComputedStyle(t).direction),s=i*n,l=r.target,c=t.contains(l),u=!1,d=s>0,f=0,h=0;do{if(!l)break;var m=oG(e,l),g=m[0],p=m[1],x=m[2],y=p-x-i*g;(g||y)&&iG(e,l)&&(f+=y,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(a&&Math.abs(f)<1||!a&&s>f)||!d&&(a&&Math.abs(h)<1||!a&&-s>h))&&(u=!0),u},Ow=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},V6=function(e){return[e.deltaX,e.deltaY]},W6=function(e){return e&&"current"in e?e.current:e},Gpe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Kpe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ype=0,Kp=[];function Xpe(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),a=v.useState(Ype++)[0],i=v.useState(nG)[0],s=v.useRef(e);v.useEffect(function(){s.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=vpe([e.lockRef.current],(e.shards||[]).map(W6),!0).filter(Boolean);return p.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=v.useCallback(function(p,x){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var y=Ow(p),b=r.current,w="deltaX"in p?p.deltaX:b[0]-y[0],_="deltaY"in p?p.deltaY:b[1]-y[1],j,N=p.target,P=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in p&&P==="h"&&N.type==="range")return!1;var A=U6(P,N);if(!A)return!0;if(A?j=P:(j=P==="v"?"h":"v",A=U6(P,N)),!A)return!1;if(!n.current&&"changedTouches"in p&&(w||_)&&(n.current=j),!j)return!0;var k=n.current||j;return Hpe(k,x,p,k==="h"?w:_,!0)},[]),c=v.useCallback(function(p){var x=p;if(!(!Kp.length||Kp[Kp.length-1]!==i)){var y="deltaY"in x?V6(x):Ow(x),b=t.current.filter(function(j){return j.name===x.type&&(j.target===x.target||x.target===j.shadowParent)&&Gpe(j.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(s.current.shards||[]).map(W6).filter(Boolean).filter(function(j){return j.contains(x.target)}),_=w.length>0?l(x,w[0]):!s.current.noIsolation;_&&x.cancelable&&x.preventDefault()}}},[]),u=v.useCallback(function(p,x,y,b){var w={name:p,delta:x,target:y,should:b,shadowParent:Jpe(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=v.useCallback(function(p){r.current=Ow(p),n.current=void 0},[]),f=v.useCallback(function(p){u(p.type,V6(p),p.target,l(p,e.lockRef.current))},[]),h=v.useCallback(function(p){u(p.type,Ow(p),p.target,l(p,e.lockRef.current))},[]);v.useEffect(function(){return Kp.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Gp),document.addEventListener("touchmove",c,Gp),document.addEventListener("touchstart",d,Gp),function(){Kp=Kp.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Gp),document.removeEventListener("touchmove",c,Gp),document.removeEventListener("touchstart",d,Gp)}},[]);var m=e.removeScrollBar,g=e.inert;return v.createElement(v.Fragment,null,g?v.createElement(i,{styles:Kpe(a)}):null,m?v.createElement(Fpe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Jpe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Qpe=Cpe(rG,Xpe);var sG=v.forwardRef(function(e,t){return v.createElement(Yj,ku({},e,{ref:t,sideCar:Qpe}))});sG.classNames=Yj.classNames;const Xj=sG;var Zpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yp=new WeakMap,Tw=new WeakMap,Iw={},Z5=0,lG=function(e){return e&&(e.host||lG(e.parentNode))},ege=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=lG(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},tge=function(e,t,r,n){var a=ege(t,Array.isArray(e)?e:[e]);Iw[r]||(Iw[r]=new WeakMap);var i=Iw[r],s=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",p=(Yp.get(h)||0)+1,x=(i.get(h)||0)+1;Yp.set(h,p),i.set(h,x),s.push(h),p===1&&g&&Tw.set(h,!0),x===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return d(t),l.clear(),Z5++,function(){s.forEach(function(f){var h=Yp.get(f)-1,m=i.get(f)-1;Yp.set(f,h),i.set(f,m),h||(Tw.has(f)||f.removeAttribute(n),Tw.delete(f)),m||f.removeAttribute(r)}),Z5--,Z5||(Yp=new WeakMap,Yp=new WeakMap,Tw=new WeakMap,Iw={})}},Jj=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||Zpe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),tge(n,a,r,"aria-hidden")):function(){return null}},Qj="Dialog",[cG,uG]=_c(Qj),[rge,pu]=cG(Qj),dG=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,l=v.useRef(null),c=v.useRef(null),[u,d]=Xd({prop:n,defaultProp:a??!1,onChange:i,caller:Qj});return o.jsx(rge,{scope:t,triggerRef:l,contentRef:c,contentId:iu(),titleId:iu(),descriptionId:iu(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(f=>!f),[d]),modal:s,children:r})};dG.displayName=Qj;var fG="DialogTrigger",hG=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=pu(fG,r),i=oa(t,a.triggerRef);return o.jsx(xn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":k4(a.open),...n,ref:i,onClick:Sr(e.onClick,a.onOpenToggle)})});hG.displayName=fG;var P4="DialogPortal",[nge,mG]=cG(P4,{forceMount:void 0}),pG=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=pu(P4,t);return o.jsx(nge,{scope:t,forceMount:r,children:v.Children.map(n,s=>o.jsx(ql,{present:r||i.open,children:o.jsx(ux,{asChild:!0,container:a,children:s})}))})};pG.displayName=P4;var I_="DialogOverlay",gG=v.forwardRef((e,t)=>{const r=mG(I_,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=pu(I_,e.__scopeDialog);return i.modal?o.jsx(ql,{present:n||i.open,children:o.jsx(ige,{...a,ref:t})}):null});gG.displayName=I_;var age=Ah("DialogOverlay.RemoveScroll"),ige=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=pu(I_,r);return o.jsx(Xj,{as:age,allowPinchZoom:!0,shards:[a.contentRef],children:o.jsx(xn.div,{"data-state":k4(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),lp="DialogContent",vG=v.forwardRef((e,t)=>{const r=mG(lp,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=pu(lp,e.__scopeDialog);return o.jsx(ql,{present:n||i.open,children:i.modal?o.jsx(oge,{...a,ref:t}):o.jsx(sge,{...a,ref:t})})});vG.displayName=lp;var oge=v.forwardRef((e,t)=>{const r=pu(lp,e.__scopeDialog),n=v.useRef(null),a=oa(t,r.contentRef,n);return v.useEffect(()=>{const i=n.current;if(i)return Jj(i)},[]),o.jsx(xG,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Sr(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Sr(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0;(s.button===2||l)&&i.preventDefault()}),onFocusOutside:Sr(e.onFocusOutside,i=>i.preventDefault())})}),sge=v.forwardRef((e,t)=>{const r=pu(lp,e.__scopeDialog),n=v.useRef(!1),a=v.useRef(!1);return o.jsx(xG,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;r.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),xG=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,l=pu(lp,r),c=v.useRef(null),u=oa(t,c);return Kj(),o.jsxs(o.Fragment,{children:[o.jsx(o1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:o.jsx(cx,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":k4(l.open),...s,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(cge,{titleId:l.titleId}),o.jsx(dge,{contentRef:c,descriptionId:l.descriptionId})]})]})}),E4="DialogTitle",yG=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=pu(E4,r);return o.jsx(xn.h2,{id:a.titleId,...n,ref:t})});yG.displayName=E4;var bG="DialogDescription",wG=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=pu(bG,r);return o.jsx(xn.p,{id:a.descriptionId,...n,ref:t})});wG.displayName=bG;var _G="DialogClose",SG=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=pu(_G,r);return o.jsx(xn.button,{type:"button",...n,ref:t,onClick:Sr(e.onClick,()=>a.onOpenChange(!1))})});SG.displayName=_G;function k4(e){return e?"open":"closed"}var jG="DialogTitleWarning",[lge,NG]=Ume(jG,{contentName:lp,titleName:E4,docsSlug:"dialog"}),cge=({titleId:e})=>{const t=NG(jG),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},uge="DialogDescriptionWarning",dge=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NG(uge).contentName}}.`;return v.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},CG=dG,fge=hG,AG=pG,O4=gG,T4=vG,I4=yG,D4=wG,Zj=SG;const cn=CG,hge=AG,cp=Zj,PG=se.forwardRef(({className:e,disableAnimations:t,...r},n)=>{const a=typeof window<"u"&&(window.matchMedia?.("(pointer: coarse)")?.matches||window.innerWidth<768),i=typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,s=(t??!1)||a||i;return o.jsx(O4,{ref:n,className:kt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",s?"data-[state=open]:animate-none data-[state=closed]:animate-none":"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r})});PG.displayName=O4.displayName;const on=se.forwardRef(({className:e,children:t,overlayClassName:r,disableAnimations:n,alignTop:a,...i},s)=>{const l=typeof window<"u"&&(window.matchMedia?.("(pointer: coarse)")?.matches||window.innerWidth<768),c=typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,u=(n??!1)||l||c;return o.jsxs(hge,{children:[o.jsx(PG,{disableAnimations:u,className:r}),o.jsxs(T4,{ref:s,className:kt("fixed z-50 grid w-full max-w-lg gap-4 border border-border bg-surface p-6 shadow-lg duration-200 sm:rounded-lg",a?"left-1/2 top-[10%] -translate-x-1/2":"left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",u?"data-[state=open]:animate-none data-[state=closed]:animate-none":"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...i,children:[t,o.jsxs(Zj,{className:"absolute right-3 top-3 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1",children:[o.jsx(Vu,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});on.displayName=T4.displayName;const an=({className:e,...t})=>o.jsx("div",{className:kt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});an.displayName="DialogHeader";const $n=({className:e,...t})=>o.jsx("div",{className:kt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$n.displayName="DialogFooter";const en=se.forwardRef(({className:e,...t},r)=>o.jsx(I4,{ref:r,className:kt("text-lg font-semibold leading-none tracking-tight",e),...t}));en.displayName=I4.displayName;const hn=se.forwardRef(({className:e,...t},r)=>o.jsx(D4,{ref:r,className:kt("text-sm text-text-secondary",e),...t}));hn.displayName=D4.displayName;const mge=1;let eA=0;function pge(){return eA=(eA+1)%Number.MAX_VALUE,eA.toString()}const js={state:{toasts:[]},listeners:[],getState:()=>js.state,setState:e=>{typeof e=="function"?js.state=e(js.state):js.state={...js.state,...e},js.listeners.forEach(t=>t(js.state))},subscribe:e=>(js.listeners.push(e),()=>{js.listeners=js.listeners.filter(t=>t!==e)})},gge=({...e})=>{const t=pge(),r=a=>js.setState(i=>({...i,toasts:i.toasts.map(s=>s.id===t?{...s,...a}:s)})),n=()=>js.setState(a=>({...a,toasts:a.toasts.filter(i=>i.id!==t)}));return js.setState(a=>({...a,toasts:[{...e,id:t,dismiss:n},...a.toasts].slice(0,mge)})),{id:t,dismiss:n,update:r}};function Qa(){const[e,t]=v.useState(js.getState());return v.useEffect(()=>js.subscribe(n=>{t(n)}),[]),v.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const a=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(a)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:gge,toasts:e.toasts}}const vge="modulepreload",xge=function(e){return"/"+e},H6={},Hu=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=xge(i),i in H6)return;H6[i]=!0;const s=i.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!n)for(let d=a.length-1;d>=0;d--){const f=a[d];if(f.href===i&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":vge,s||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),s)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},yge=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hu(()=>Promise.resolve().then(()=>dx),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class M4 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class G6 extends M4{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class K6 extends M4{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Y6 extends M4{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var uk;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(uk||(uk={}));var bge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class wge{constructor(t,{headers:r={},customFetch:n,region:a=uk.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=yge(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return bge(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:s,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new G6(y)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new K6(m);if(!m.ok)throw new Y6(m);let p=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield m.json():p==="application/octet-stream"?x=yield m.blob():p==="text/event-stream"?x=m:p==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new G6(i)}:{data:null,error:i,response:i instanceof Y6||i instanceof K6?i.context:void 0}}})}}var Ks={},R4={},eN={},s1={},tN={},rN={},_ge=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sv=_ge();const Sge=Sv.fetch,EG=Sv.fetch.bind(Sv),kG=Sv.Headers,jge=Sv.Request,Nge=Sv.Response,dx=Object.freeze(Object.defineProperty({__proto__:null,Headers:kG,Request:jge,Response:Nge,default:EG,fetch:Sge},Symbol.toStringTag,{value:"Module"})),Cge=Fie(dx);var nN={};Object.defineProperty(nN,"__esModule",{value:!0});let Age=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};nN.default=Age;var OG=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rN,"__esModule",{value:!0});const Pge=OG(Cge),Ege=OG(nN);let kge=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Pge.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var s,l,c,u;let d=null,f=null,h=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?f=b:f=JSON.parse(b))}const x=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");x&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await i.text();try{d=JSON.parse(x),Array.isArray(d)&&i.status===404&&(f=[],d=null,m=200,g="OK")}catch{i.status===404&&x===""?(m=204,g="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((u=d?.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new Ege.default(d)}return{error:d,data:f,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var s,l,c;return{error:{message:`${(s=i?.name)!==null&&s!==void 0?s:"FetchError"}: ${i?.message}`,details:`${(l=i?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};rN.default=kge;var Oge=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tN,"__esModule",{value:!0});const Tge=Oge(rN);let Ige=class extends Tge.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const s=i?`${i}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:s="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${u}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};tN.default=Ige;var Dge=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s1,"__esModule",{value:!0});const Mge=Dge(tN);let Rge=class extends Mge.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};s1.default=Rge;var Lge=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eN,"__esModule",{value:!0});const t0=Lge(s1);let $ge=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,r){const{head:n=!1,count:a}=r??{},i=n?"HEAD":"GET";let s=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",l),a&&this.headers.append("Prefer",`count=${a}`),new t0.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(s.length>0){const l=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new t0.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var s;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t0.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new t0.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new t0.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};eN.default=$ge;var TG=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R4,"__esModule",{value:!0});const Fge=TG(eN),Bge=TG(s1);let zge=class IG{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Fge.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new IG(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var s;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Bge.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};R4.default=zge;var fx=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.PostgrestError=Ks.PostgrestBuilder=Ks.PostgrestTransformBuilder=Ks.PostgrestFilterBuilder=Ks.PostgrestQueryBuilder=Ks.PostgrestClient=void 0;const DG=fx(R4);Ks.PostgrestClient=DG.default;const MG=fx(eN);Ks.PostgrestQueryBuilder=MG.default;const RG=fx(s1);Ks.PostgrestFilterBuilder=RG.default;const LG=fx(tN);Ks.PostgrestTransformBuilder=LG.default;const $G=fx(rN);Ks.PostgrestBuilder=$G.default;const FG=fx(nN);Ks.PostgrestError=FG.default;var qge=Ks.default={PostgrestClient:DG.default,PostgrestQueryBuilder:MG.default,PostgrestFilterBuilder:RG.default,PostgrestTransformBuilder:LG.default,PostgrestBuilder:$G.default,PostgrestError:FG.default};const{PostgrestClient:Uge,PostgrestQueryBuilder:eot,PostgrestFilterBuilder:tot,PostgrestTransformBuilder:rot,PostgrestBuilder:not,PostgrestError:aot}=qge;class Vge{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Wge="2.75.0",Hge=`realtime-js/${Wge}`,Gge="1.0.0",dk=1e4,Kge=1e3,Yge=100;var H0;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(H0||(H0={}));var fo;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(fo||(fo={}));var zc;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(zc||(zc={}));var fk;(function(e){e.websocket="websocket"})(fk||(fk={}));var wm;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(wm||(wm={}));class Xge{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let s=this.HEADER_LENGTH+2;const l=n.decode(t.slice(s,s+a));s=s+a;const c=n.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class BG{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ha;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ha||(Ha={}));const X6=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=Jge(s,e,t,a),i),{}):{}},Jge=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a?.type,s=r[e];return i&&!n.includes(i)?zG(i,s):hk(s)},zG=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return tve(t,r)}switch(e){case Ha.bool:return Qge(t);case Ha.float4:case Ha.float8:case Ha.int2:case Ha.int4:case Ha.int8:case Ha.numeric:case Ha.oid:return Zge(t);case Ha.json:case Ha.jsonb:return eve(t);case Ha.timestamp:return rve(t);case Ha.abstime:case Ha.date:case Ha.daterange:case Ha.int4range:case Ha.int8range:case Ha.money:case Ha.reltime:case Ha.text:case Ha.time:case Ha.timestamptz:case Ha.timetz:case Ha.tsrange:case Ha.tstzrange:return hk(t);default:return hk(t)}},hk=e=>e,Qge=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Zge=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eve=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tve=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(l=>zG(t,l))}return e},rve=e=>typeof e=="string"?e.replace(" ","T"):e,qG=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class tA{constructor(t,r,n={},a=dk){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var J6;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(J6||(J6={}));class G0{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=G0.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=G0.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=G0.syncDiff(this.state,a,i,s),l())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),g=d.filter(x=>m.indexOf(x.presence_ref)<0),p=f.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(s,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Q6;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Q6||(Q6={}));var K0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(K0||(K0={}));var Nd;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Nd||(Nd={}));class L4{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=fo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new tA(this,zc.join,this.params,this.timeout),this.rejoinTimer=new BG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fo.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zc.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new G0(this),this.broadcastEndpointURL=qG(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fo.closed){const{config:{broadcast:s,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[K0.PRESENCE]&&this.bindings[K0.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t?.(Nd.CHANNEL_ERROR,m)),this._onClose(()=>t?.(Nd.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t?.(Nd.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,x=(g=p?.length)!==null&&g!==void 0?g:0,y=[];for(let b=0;b<x;b++){const w=p[b],{filter:{event:_,schema:j,table:N,filter:P}}=w,A=m&&m[b];if(A&&A.event===_&&A.schema===j&&A.table===N&&A.filter===P)y.push(Object.assign(Object.assign({},w),{id:A.id}));else{this.unsubscribe(),this.state=fo.errored,t?.(Nd.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Nd.SUBSCRIBED);return}}).receive("error",m=>{this.state=fo.errored,t?.(Nd.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t?.(Nd.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===fo.joined&&t===K0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=fo.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zc.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new tA(this,zc.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fo.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new tA(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Yge){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=zc;if(n&&[l,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(p=m.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(m=>m.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(m=>{var g,p,x,y,b,w;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(j==="*"||j?.toLocaleLowerCase()===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(b=(y=m?.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:x,commit_timestamp:y,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:p,table:x,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===fo.closed}_isJoined(){return this.state===fo.joined}_isJoining(){return this.state===fo.joining}_isLeaving(){return this.state===fo.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&L4.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zc.close,{},t)}_onError(t){this._on(zc.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fo.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=X6(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=X6(t.columns,t.old_record)),r}}const rA=()=>{},Dw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nve=[1e3,2e3,5e3,1e4],ave=1e4,ive=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ove{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dk,this.transport=null,this.heartbeatIntervalMs=Dw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rA,this.ref=0,this.reconnectTimer=null,this.logger=rA,this.conn=null,this.sendBuffer=[],this.serializer=new Xge,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...s)=>Hu(()=>Promise.resolve().then(()=>dx),void 0).then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...s)=>i(...s)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${fk.websocket}`,this.httpEndpoint=qG(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vge.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Gge}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case H0.connecting:return wm.Connecting;case H0.open:return wm.Open;case H0.closing:return wm.Closing;default:return wm.Closed}}isConnected(){return this.connectionState()===wm.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new L4(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Kge,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Dw.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:s}=r,l=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(zc.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ive],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:Hge};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(zc.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new BG(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Dw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,s,l,c,u,d;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:dk,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:Dw.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:rA,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t?.reconnectAfterMs)!==null&&c!==void 0?c:f=>nve[f-1]||ave,this.encode=(u=t?.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class $4 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Qi(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class sve extends $4{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mk extends $4{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var lve=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const UG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hu(()=>Promise.resolve().then(()=>dx),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cve=()=>lve(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hu(()=>Promise.resolve().then(()=>dx),void 0)).Response:Response}),pk=e=>{if(Array.isArray(e))return e.map(r=>pk(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=pk(n)}),t},uve=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Tp=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const nA=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dve=(e,t,r)=>Tp(void 0,void 0,void 0,function*(){const n=yield cve();e instanceof n&&!r?.noResolveJson?e.json().then(a=>{const i=e.status||500,s=a?.statusCode||i+"";t(new sve(nA(a),i,s))}).catch(a=>{t(new mk(nA(a),a))}):t(new mk(nA(e),e))}),fve=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||!n?a:(uve(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,t?.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function l1(e,t,r,n,a,i){return Tp(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,fve(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>dve(c,l,n))})})}function D_(e,t,r,n){return Tp(this,void 0,void 0,function*(){return l1(e,"GET",t,r,n)})}function Au(e,t,r,n,a){return Tp(this,void 0,void 0,function*(){return l1(e,"POST",t,n,a,r)})}function gk(e,t,r,n,a){return Tp(this,void 0,void 0,function*(){return l1(e,"PUT",t,n,a,r)})}function hve(e,t,r,n){return Tp(this,void 0,void 0,function*(){return l1(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function VG(e,t,r,n,a){return Tp(this,void 0,void 0,function*(){return l1(e,"DELETE",t,n,a,r)})}var mve=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class pve{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return mve(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qi(t))return{data:null,error:t};throw t}})}}var gve=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class vve{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new pve(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return gve(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qi(t))return{data:null,error:t};throw t}})}}var qs=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const xve={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yve{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=UG(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return qs(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Z6),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?gk:Au)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qi(i))return{data:null,error:i};throw i}})}upload(t,r,n){return qs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return qs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Z6.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield gk(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Qi(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return qs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const i=yield Au(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),l=s.searchParams.get("token");if(!l)throw new $4("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qi(n))return{data:null,error:n};throw n}})}update(t,r,n){return qs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return qs(this,void 0,void 0,function*(){try{return{data:yield Au(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qi(a))return{data:null,error:a};throw a}})}copy(t,r,n){return qs(this,void 0,void 0,function*(){try{return{data:{path:(yield Au(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qi(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return qs(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Au(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qi(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return qs(this,void 0,void 0,function*(){try{const a=yield Au(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qi(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>D_(this.fetch,`${this.url}/${a}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new vve(c,this.shouldThrowOnError)}info(t){return qs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield D_(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:pk(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qi(n))return{data:null,error:n};throw n}})}exists(t){return qs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield hve(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qi(n)&&n instanceof mk){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return qs(this,void 0,void 0,function*(){try{return{data:yield VG(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qi(r))return{data:null,error:r};throw r}})}list(t,r,n){return qs(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},xve),r),{prefix:t||""});return{data:yield Au(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qi(a))return{data:null,error:a};throw a}})}listV2(t,r){return qs(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Au(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qi(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const bve="2.75.0",wve={"X-Client-Info":`storage-js/${bve}`};var Xp=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class _ve{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wve),r),this.fetch=UG(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Xp(this,void 0,void 0,function*(){try{return{data:yield D_(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qi(t))return{data:null,error:t};throw t}})}getBucket(t){return Xp(this,void 0,void 0,function*(){try{return{data:yield D_(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qi(r))return{data:null,error:r};throw r}})}createBucket(t){return Xp(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Au(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qi(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Xp(this,void 0,void 0,function*(){try{return{data:yield gk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qi(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Xp(this,void 0,void 0,function*(){try{return{data:yield Au(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qi(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Xp(this,void 0,void 0,function*(){try{return{data:yield VG(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qi(r))return{data:null,error:r};throw r}})}}class Sve extends _ve{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new yve(this.url,this.headers,t,this.fetch)}}const jve="2.75.0";let A0="";typeof Deno<"u"?A0="deno":typeof document<"u"?A0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?A0="react-native":A0="node";const Nve={"X-Client-Info":`supabase-js-${A0}/${jve}`},Cve={headers:Nve},Ave={schema:"public"},Pve={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Eve={};var kve=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ove=e=>{let t;return e?t=e:typeof fetch>"u"?t=EG:t=fetch,(...r)=>t(...r)},Tve=()=>typeof Headers>"u"?kG:Headers,Ive=(e,t,r)=>{const n=Ove(r),a=Tve();return(i,s)=>kve(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(s?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))})};var Dve=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Mve(e){return e.endsWith("/")?e:e+"/"}function Rve(e,t){var r,n;const{db:a,auth:i,realtime:s,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Dve(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Lve(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Mve(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const WG="2.75.0",yg=30*1e3,vk=3,aA=vk*yg,$ve="http://localhost:9999",Fve="supabase.auth.token",Bve={"X-Client-Info":`gotrue-js/${WG}`},xk="X-Supabase-Api-Version",HG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qve=10*60*1e3;class By extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function mn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Uve extends By{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Vve(e){return mn(e)&&e.name==="AuthApiError"}class _m extends By{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Bh extends By{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Df extends Bh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wve(e){return mn(e)&&e.name==="AuthSessionMissingError"}class Jp extends Bh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mw extends Bh{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Rw extends Bh{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Hve(e){return mn(e)&&e.name==="AuthImplicitGrantRedirectError"}class e$ extends Bh{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yk extends Bh{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function iA(e){return mn(e)&&e.name==="AuthRetryableFetchError"}class t$ extends Bh{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class bk extends Bh{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const M_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r$=` 	
\r=`.split(""),Gve=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<r$.length;t+=1)e[r$[t].charCodeAt(0)]=-2;for(let t=0;t<M_.length;t+=1)e[M_[t].charCodeAt(0)]=t;return e})();function n$(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(M_[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(M_[n]),t.queuedBits-=6}}function GG(e,t,r){const n=Gve[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function a$(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{Xve(s,n,r)};for(let s=0;s<e.length;s+=1)GG(e.charCodeAt(s),a,i);return t.join("")}function Kve(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Yve(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Kve(n,t)}}function Xve(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Qg(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)GG(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Jve(e){const t=[];return Yve(e,r=>t.push(r)),new Uint8Array(t)}function Om(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>n$(a,r,n)),n$(null,r,n),t.join("")}function Qve(e){return Math.round(Date.now()/1e3)+e}function Zve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const xl=()=>typeof window<"u"&&typeof document<"u",rm={tested:!1,writable:!1},KG=()=>{if(!xl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rm.tested)return rm.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rm.tested=!0,rm.writable=!0}catch{rm.tested=!0,rm.writable=!1}return rm.writable};function exe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const YG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hu(()=>Promise.resolve().then(()=>dx),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},txe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bg=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},nm=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nf=async(e,t)=>{await e.removeItem(t)};class aN{constructor(){this.promise=new aN.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}aN.promiseConstructor=Promise;function oA(e){const t=e.split(".");if(t.length!==3)throw new bk("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!zve.test(t[n]))throw new bk("JWT not in base64url format");return{header:JSON.parse(a$(t[0])),payload:JSON.parse(a$(t[1])),signature:Qg(t[2]),raw:{header:t[0],payload:t[1]}}}async function rxe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function nxe(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function axe(e){return("0"+e.toString(16)).substr(-2)}function ixe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,axe).join("")}async function oxe(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function sxe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await oxe(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qp(e,t,r=!1){const n=ixe();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await bg(e,`${t}-code-verifier`,a);const i=await sxe(n);return[i,n===i?"plain":"s256"]}const lxe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cxe(e){const t=e.headers.get(xk);if(!t||!t.match(lxe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function uxe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function dxe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fxe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zp(e){if(!fxe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sA(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function i$(e){return JSON.parse(JSON.stringify(e))}var hxe=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const mm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mxe=[502,503,504];async function o$(e){var t;if(!txe(e))throw new yk(mm(e),0);if(mxe.includes(e.status))throw new yk(mm(e),e.status);let r;try{r=await e.json()}catch(i){throw new _m(mm(i),i)}let n;const a=cxe(e);if(a&&a.getTime()>=HG["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new t$(mm(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Df}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new t$(mm(r),e.status,r.weak_password.reasons);throw new Uve(mm(r),e.status||500,n)}const pxe=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function kn(e,t,r,n){var a;const i=Object.assign({},n?.headers);i[xk]||(i[xk]=HG["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(s.redirect_to=n.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await gxe(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function gxe(e,t,r,n,a,i){const s=pxe(t,n,a,i);let l;try{l=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new yk(mm(c),0)}if(l.ok||await o$(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await o$(c)}}function Rc(e){var t;let r=null;yxe(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Qve(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function s$(e){const t=Rc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Uf(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vxe(e){return{data:e,error:null}}function xxe(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=hxe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function l$(e){return e}function yxe(e){return e.access_token&&e.refresh_token&&e.expires_in}const lA=["global","local","others"];var bxe=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class wxe{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=YG(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=lA[0]){if(lA.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lA.join(", ")}`);try{return await kn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(mn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await kn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Uf})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=bxe(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await kn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:xxe,redirectTo:r?.redirectTo})}catch(r){if(mn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await kn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Uf})}catch(r){if(mn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await kn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:l$});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(mn(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Zp(t);try{return await kn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Uf})}catch(r){if(mn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Zp(t);try{return await kn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Uf})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Zp(t);try{return await kn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Uf})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zp(t.userId);try{const{data:r,error:n}=await kn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Zp(t.userId),Zp(t.id);try{return{data:await kn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await kn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:l$});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(mn(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await kn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await kn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await kn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await kn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}}function c$(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const eg={debug:!!(globalThis&&KG()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XG extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _xe extends XG{}async function Sxe(e,t,r){eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),eg.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _xe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(eg.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function jxe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function JG(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Nxe(e){return parseInt(e,16)}function Cxe(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Axe(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=JG(e.address),g=d?`${d}://${n}`:n,p=e.statement?`${e.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${m}

${p}`;let y=`URI: ${f}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}y+=b}return`${x}
${y}`}class Ji extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class R_ extends Ji{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Pxe({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ji({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ji({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ji({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ji({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ji({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ji({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ji({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ji({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(ZG(s)){if(i.rp.id!==s)return new Ji({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ji({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ji({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ji({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ji({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Exe({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ji({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ji({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(ZG(n)){if(r.rpId!==n)return new Ji({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ji({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ji({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ji({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var QG=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class kxe{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Oxe=new kxe;function Txe(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=QG(e,["challenge","user","excludeCredentials"]),i=Qg(t).buffer,s=Object.assign(Object.assign({},r),{id:Qg(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Qg(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Ixe(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=QG(e,["challenge","allowCredentials"]),a=Qg(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const l=r[s];i.allowCredentials[s]=Object.assign(Object.assign({},l),{id:Qg(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Dxe(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Om(new Uint8Array(e.response.attestationObject)),clientDataJSON:Om(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mxe(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Om(new Uint8Array(a.authenticatorData)),clientDataJSON:Om(new Uint8Array(a.clientDataJSON)),signature:Om(new Uint8Array(a.signature)),userHandle:a.userHandle?Om(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ZG(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function u$(){var e,t;return!!(xl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Rxe(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new R_("Browser returned unexpected credential type",t)}:{data:null,error:new R_("Empty credential response",t)}}catch(t){return{data:null,error:Pxe({error:t,options:e})}}}async function Lxe(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new R_("Browser returned unexpected credential type",t)}:{data:null,error:new R_("Empty credential response",t)}}catch(t){return{data:null,error:Exe({error:t,options:e})}}}const $xe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Fxe={userVerification:"preferred",hints:["security-key"]};function L_(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))n[i]=s;else if(r(s))n[i]=s;else if(t(s)){const l=n[i];t(l)?n[i]=L_(l,s):n[i]=L_(s)}else n[i]=s}return n}function Bxe(e,t){return L_($xe,e,t||{})}function zxe(e,t){return L_(Fxe,e,t||{})}class qxe{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:l};const c=a??Oxe.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=Bxe(s.webauthn.credential_options.publicKey,i?.create),{data:d,error:f}=await Rxe({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=zxe(s.webauthn.credential_options.publicKey,i?.request),{data:d,error:f}=await Lxe(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return mn(s)?{data:null,error:s}:{data:null,error:new _m("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new By("rpId is required for WebAuthn authentication")};try{if(!u$())return{data:null,error:new _m("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!s)return{data:null,error:l};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return mn(s)?{data:null,error:s}:{data:null,error:new _m("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new By("rpId is required for WebAuthn registration")};try{if(!u$())return{data:null,error:new _m("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return mn(s)?{data:null,error:s}:{data:null,error:new _m("Unexpected error in register",s)}}}}jxe();const Uxe={url:$ve,storageKey:Fve,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Bve,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function d$(e,t,r){return await r()}const tg={};class zy{get jwks(){var t,r;return(r=(t=tg[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){tg[this.storageKey]=Object.assign(Object.assign({},tg[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=tg[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tg[this.storageKey]=Object.assign(Object.assign({},tg[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zy.nextInstanceID,zy.nextInstanceID+=1,this.instanceID>0&&xl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Uxe),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new wxe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=YG(a.fetch),this.lock=a.lock||d$,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:xl()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Sxe:this.lock=d$,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qxe(this)},this.persistSession?(a.storage?this.storage=a.storage:KG()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c$(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=c$(this.memoryStorage)),xl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${WG}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=exe(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),xl()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Hve(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return mn(r)?{error:r}:{error:new _m("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await kn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Rc}),{data:s,error:l}=i;if(l||!s)return{data:{user:null,session:null},error:l};const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(mn(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Qp(this.storage,this.storageKey)),i=await kn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:d,password:f,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:g},xform:Rc})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await kn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(a=h?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Rc})}else throw new Mw("You must provide either an email or phone number and a password");const{data:s,error:l}=i;if(l||!s)return{data:{user:null,session:null},error:l};const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(mn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:l}=t;r=await kn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:s$})}else if("phone"in t){const{phone:i,password:s,options:l}=t;r=await kn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:s$})}else throw new Mw("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Jp}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(mn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,s,l,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:p,wallet:x,statement:y,options:b}=t;let w;if(xl())if(typeof x=="object")w=x;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const _=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=JG(j[0]);let P=(n=b?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!P){const k=await w.request({method:"eth_chainId"});P=Nxe(k)}const A={domain:_.host,address:N,statement:y,uri:_.href,version:"1",chainId:P,nonce:(a=b?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=b?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=b?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b?.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Axe(A),g=await w.request({method:"personal_sign",params:[Cxe(m),N]})}try{const{data:p,error:x}=await kn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Rc});if(x)throw x;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Jp}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:x})}catch(p){if(mn(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithSolana(t){var r,n,a,i,s,l,c,u,d,f,h,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:x,wallet:y,statement:b,options:w}=t;let _;if(xl())if(typeof y=="object")_=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const j=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)g=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),p=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((s=w?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=N}}try{const{data:x,error:y}=await kn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Om(p)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Rc});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Jp}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(mn(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await nm(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:s}=await kn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Rc});if(await Nf(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Jp}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(mn(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,l=await kn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Rc}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Jp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(mn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Qp(this.storage,this.storageKey));const{error:f}=await kn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await kn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(s=c?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Mw("You must provide either an email or phone number.")}catch(l){if(mn(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:l}=await kn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Rc});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(mn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await Qp(this.storage,this.storageKey)),await kn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:vxe})}catch(i){if(mn(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Df;const{error:a}=await kn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(mn(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await kn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:l}=await kn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:l}}throw new Mw("You must provide either an email or phone number and a type")}catch(r){if(mn(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await nm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<aA:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await nm(this.userStorage,this.storageKey+"-user");s?.user?t.user=s.user:t.user=sA()}if(this.storage.isServer&&t.user){let s=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!s&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await kn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Uf}):await this._useSession(async r=>{var n,a,i;const{data:s,error:l}=r;if(l)throw l;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Df}:await kn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Uf})})}catch(r){if(mn(r))return Wve(r)&&(await this._removeSession(),await Nf(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Df;const s=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Qp(this.storage,this.storageKey));const{data:u,error:d}=await kn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:Uf});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Df;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=oA(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(mn(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:l}=r;if(l)throw l;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Df;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(mn(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!xl())throw new Rw("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Rw(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new e$("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rw("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new e$("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!s||!u)throw new Rw("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=yg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:x}=await this._getUser(i);if(x)throw x;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(mn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await nm(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(Vve(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Nf(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Zve(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Qp(this.storage,this.storageKey,!0));try{return await kn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(mn(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(mn(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await kn(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return xl()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(mn(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:s,provider:l,token:c,access_token:u,nonce:d}=t,f=await kn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Rc}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Jp}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(a){if(mn(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await kn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await nxe(async a=>(a>0&&await rxe(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await kn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Rc})),(a,i)=>{const s=200*Math.pow(2,a);return i&&iA(i)&&Date.now()+s-n<yg})}catch(n){if(this._debug(r,"error",n),mn(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),xl()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await nm(this.storage,this.storageKey);if(a&&this.userStorage){let s=await nm(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await bg(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s?.user)!==null&&t!==void 0?t:sA()}else if(a&&!a.user&&!a.user){const s=await nm(this.storage,this.storageKey+"-user");s&&s?.user?(a.user=s.user,await Nf(this.storage,this.storageKey+"-user"),await bg(this.storage,this.storageKey,a)):a.user=sA()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<aA;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${aA}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),iA(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(a.access_token);!l&&s?.user?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Df;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new aN;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Df;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),mn(i)){const s={data:null,error:i};return iA(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await bg(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=i$(a);await bg(this.storage,this.storageKey,i)}else{const a=i$(r);await bg(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Nf(this.storage,this.storageKey),await Nf(this.storage,this.storageKey+"-code-verifier"),await Nf(this.storage,this.storageKey+"-user"),this.userStorage&&await Nf(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&xl()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yg);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/yg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${yg}ms, refresh threshold is ${vk} ticks`),a<=vk&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof XG)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xl()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Qp(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await kn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return{data:null,error:s};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await kn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&c.type==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Dxe(t.webauthn.credential_response):Mxe(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await kn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(mn(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const s=await kn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Txe(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Ixe(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(mn(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=oA(a.access_token);let l=null;s.aal&&(l=s.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=s.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+qve>a)return n;const{data:i,error:s}=await kn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:a,payload:i,signature:s,raw:{header:l,payload:c}}=oA(n);r?.allowExpired||uxe(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:s},error:null}}const d=dxe(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,Jve(`${l}.${c}`)))throw new bk("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(mn(n))return{data:null,error:n};throw n}}}zy.nextInstanceID=0;const Vxe=zy;class Wxe extends Vxe{constructor(t){super(t)}}var Hxe=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Gxe{constructor(t,r,n){var a,i,s;this.supabaseUrl=t,this.supabaseKey=r;const l=Lve(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Ave,realtime:Eve,auth:Object.assign(Object.assign({},Pve),{storageKey:c}),global:Cve},d=Rve(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=Ive(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Uge(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Sve(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new wge(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Hxe(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:s,flowType:l,lock:c,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wxe({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ove(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Kxe=(e,t,r)=>new Gxe(e,t,r);function Yxe(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Yxe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const F4="https://dlfryxtyxqoacuunswuc.supabase.co",wk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZnJ5eHR5eHFvYWN1dW5zd3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODg0MzcsImV4cCI6MjA3MTQ2NDQzN30.AizQBbCE1p_xfAQ9T0Eha1anGzcFETcc__8AV4iaQTY";function Xxe(){try{return(new URL(F4).host||"").split(".")[0]||""}catch{return""}}function Jxe(){const e=Xxe();return e?`sb-${e}-auth-token`:"sb-auth-token"}async function Qxe(){try{if(typeof fh<"u"&&fh?.auth?.getSession){const e=new Promise((a,i)=>setTimeout(()=>i(new Error("getSession timeout")),1e3)),t=fh.auth.getSession(),{data:r}=await Promise.race([t,e]),n=r?.session?.access_token;if(n)return console.debug("[Supabase Wrapper] Token obtido via getSession"),n}}catch(e){console.debug("[Supabase Wrapper] getSession falhou ou timeout:",e.message)}try{const e=Jxe(),t=localStorage.getItem(e);if(t){const r=JSON.parse(t);if(r?.access_token)return console.debug("[Supabase Wrapper] Token obtido via localStorage"),r.access_token;if(r?.currentSession?.access_token)return console.debug("[Supabase Wrapper] Token obtido via localStorage (currentSession)"),r.currentSession.access_token}}catch(e){console.warn("[Supabase Wrapper] Erro ao ler localStorage:",e)}return console.warn("[Supabase Wrapper]  Nenhum token encontrado - usando anon key"),null}const Zxe=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&(Array.isArray(n)?n.forEach(a=>t.append(r,String(a))):t.append(r,String(n)))}),t.toString()},eK=async(e,t={})=>{const{method:r="GET",body:n,headers:a={},params:i={},signal:s,timeoutMs:l=8e3}=t,c=Zxe(i),u=`${F4}/rest/v1/${e}${c?`?${c}`:""}`,d={apikey:wk,Authorization:`Bearer ${wk}`,"Content-Type":"application/json",Prefer:"return=representation",...a};try{const w=await Qxe();w&&(d.Authorization=`Bearer ${w}`)}catch(w){console.warn("[Supabase Wrapper] Erro ao obter token de sesso:",w)}const f={method:r,headers:d};n&&(f.body=JSON.stringify(n)),s&&(f.signal=s);const h=new AbortController,m=setTimeout(()=>{try{h.abort("timeout")}catch{}},Math.max(2e3,l)),g=(()=>{if(!s)return h.signal;try{s.addEventListener("abort",()=>{try{h.abort("upstream-abort")}catch{}})}catch{}return h.signal})();f.signal=g;const p=Date.now();let x;try{x=await fetch(u,f)}finally{clearTimeout(m)}if(!x.ok){let w="";try{w=await x.text()}catch{}const _=Date.now()-p;throw new Error(`[Supabase Wrapper] HTTP ${x.status} (${_}ms) - ${w||"unknown error"}`)}const y=Date.now()-p;let b;try{b=await x.json()}catch(w){throw console.error(`[Supabase Wrapper] Erro ao parsear JSON de ${e}:`,w),new Error(`[Supabase Wrapper] JSON parse error: ${w.message}`)}return y>3e3?console.warn(`[Supabase Wrapper]  fetch ${e} LENTO (${y}ms)`):console.debug(`[Supabase Wrapper] fetch ${e} OK (${y}ms)`),{data:b,error:null}};class e0e{constructor(t){this.table=t,this.params={},this.multiFilters={},this.selectColumns="*",this.signal=null}select(t="*"){return this.selectColumns=t,this.params.select=t,this}eq(t,r){return this._addFilter(t,`eq.${r}`),this}neq(t,r){return this.params[t]=`neq.${r}`,this}gt(t,r){return this.params[t]=`gt.${r}`,this}gte(t,r){return this._addFilter(t,`gte.${r}`),this}lt(t,r){return this.params[t]=`lt.${r}`,this}lte(t,r){return this._addFilter(t,`lte.${r}`),this}like(t,r){return this.params[t]=`like.${r}`,this}ilike(t,r){return this.params[t]=`ilike.${r}`,this}is(t,r){return this.params[t]=`is.${r}`,this}in(t,r){return this.params[t]=`in.(${r.join(",")})`,this}not(t,r,n){return this.params[t]=`not.${r}.${n}`,this}or(t){return this.params.or=`(${t})`,this}contains(t,r){return this.params[t]=`cs.{${r}}`,this}containedBy(t,r){return this.params[t]=`cd.{${r}}`,this}filter(t,r,n){return this._addFilter(t,`${r}.${n}`),this}order(t,r={}){const n=r.ascending===!1?"desc":"asc";return this.params.order=`${t}.${n}`,this}limit(t){return this.params.limit=t,this}range(t,r){return this.params.offset=t,this.params.limit=r-t+1,this}single(){return this.params.limit=1,this.isSingle=!0,this}maybeSingle(){return this.params.limit=1,this.isMaybeSingle=!0,this}abortSignal(t){return this.signal=t,this}_addFilter(t,r){this.multiFilters[t]||(this.multiFilters[t]=[]),this.multiFilters[t].push(r)}async then(t,r){try{const n={...this.params};Object.entries(this.multiFilters).forEach(([i,s])=>{s.length===1?n[i]=s[0]:s.length>1&&(n[i]=s)});const a=await eK(this.table,{method:"GET",params:n,signal:this.signal});this.isSingle&&a.data&&(a.data=a.data[0]||null),this.isMaybeSingle&&a.data&&(a.data=a.data[0]||null),t(a)}catch(n){r(n)}}}class t0e extends e0e{insert(t){return this.method="POST",this.body=Array.isArray(t)?t:[t],this}update(t){return this.method="PATCH",this.body=t,this}upsert(t,r={}){this.method="POST",this.body=Array.isArray(t)?t:[t];const n=r.ignoreDuplicates?"resolution=ignore-duplicates":"resolution=merge-duplicates",a=r.returning==="minimal"?"return=minimal":"return=representation";return this.headers={...this.headers||{},Prefer:`${n},${a}`},r.onConflict&&(this.params.on_conflict=r.onConflict),this}delete(){return this.method="DELETE",this}async then(t,r){try{const n={...this.params};Object.entries(this.multiFilters).forEach(([i,s])=>{s.length===1?n[i]=s[0]:s.length>1&&(n[i]=s)});const a=await eK(this.table,{method:this.method||"GET",body:this.body,params:n,signal:this.signal,headers:this.headers||{}});this.isSingle&&a.data&&(a.data=a.data[0]||null),this.isMaybeSingle&&a.data&&(a.data=a.data[0]||null),t(a)}catch(n){r(n)}}}const fh={from(e){return new t0e(e)},auth:null,supabaseUrl:F4,supabaseKey:wk};typeof window<"u"&&fh.from("empresas").select("id").limit(1).then(({data:e,error:t})=>{t&&console.error("[Supabase Wrapper]  ERRO:",t)}).catch(e=>{console.error("[Supabase Wrapper]  EXCEPTION:",e)});const tK="https://dlfryxtyxqoacuunswuc.supabase.co",rK="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZnJ5eHR5eHFvYWN1dW5zd3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODg0MzcsImV4cCI6MjA3MTQ2NDQzN30.AizQBbCE1p_xfAQ9T0Eha1anGzcFETcc__8AV4iaQTY",Pu=Kxe(tK,rK,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0},global:{headers:{"X-Client-Info":"fluxo7arena-web"}}});try{typeof window<"u"&&fh&&(fh.auth=Pu.auth)}catch{}const Ne={from:e=>fh.from(e),auth:Pu.auth,storage:Pu.storage,functions:Pu.functions,realtime:Pu.realtime,channel:(...e)=>Pu.channel(...e),removeChannel:(...e)=>Pu.removeChannel(...e),removeAllChannels:()=>Pu.removeAllChannels(),getChannels:()=>Pu.getChannels(),supabaseUrl:tK,supabaseKey:rK};typeof window<"u"&&(window.__supabase=Ne,window.__supabase_original=Pu,window.__supabase_wrapper=fh);const nK=v.createContext({}),Wi=()=>{const e=v.useContext(nK);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},r0e=({children:e})=>{const[t,r]=v.useState(null),[n,a]=v.useState(null),[i,s]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(!1),f=v.useRef(null),h=v.useRef(!1);v.useEffect(()=>{if((()=>{try{return sessionStorage.getItem("auth:forceLogout")==="1"}catch{return!1}})()){try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company")}catch{}r(null),a(null),s(null),d(!0),c(!1);try{sessionStorage.removeItem("auth:forceLogout")}catch{}try{Ne.auth.signOut({scope:"global"}).catch(()=>{})}catch{}return}try{const P=localStorage.getItem("auth:userProfile"),A=localStorage.getItem("auth:company");P&&a(JSON.parse(P)),A&&s(JSON.parse(A)),(P||A)&&d(!0)}catch(P){console.warn("AuthContext: falha ao hidratar cache local:",P)}(async()=>{try{const{data:{session:P},error:A}=await Ne.auth.getSession();A&&console.error("supabase.auth.getSession error:",A),P?.user?(r(P.user),d(!0),await m(P.user.id),f.current=P.user.id):d(!0)}catch(P){console.error("getSession exception:",P)}finally{c(!1)}})();const{data:j}=Ne.auth.onAuthStateChange(async(P,A)=>{console.log("[AuthContext] onAuthStateChange",{event:P,userId:A?.user?.id||null});try{if(P==="SIGNED_OUT"){try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company")}catch{}r(null),a(null),s(null),f.current=null,h.current=!1,c(!1),d(!0);return}const k=A?.user||null;r(k),d(!0),k?.id&&(await m(k.id),f.current=k.id,c(!1))}catch(k){console.error("onAuthStateChange handler error:",k),c(!1),d(!0)}}),N=setTimeout(()=>{c(P=>P&&!1),d(P=>P||!0)},12e3);return()=>{clearTimeout(N),j.subscription.unsubscribe()}},[]),v.useEffect(()=>{(async()=>{try{if(!u||!t)return;const _=!n,j=!!n&&!i&&!!n.codigo_empresa;(_||j)&&(await m(t.id),f.current=t.id)}catch{}})()},[u,t?.id,!!n,n?.codigo_empresa,!!i]),v.useEffect(()=>{const w=()=>{try{const N=localStorage.getItem("auth:userProfile"),P=localStorage.getItem("auth:company");if(N){const A=JSON.parse(N);(!n||!n.codigo_empresa)&&a(A)}if(P){const A=JSON.parse(P);(!i||!i.codigo_empresa)&&s(A)}}catch{}},_=()=>{w(),t?.id&&m(t.id).catch(()=>{})},j=()=>{document.visibilityState==="visible"&&_()};return window.addEventListener("focus",_),document.addEventListener("visibilitychange",j),()=>{window.removeEventListener("focus",_),document.removeEventListener("visibilitychange",j)}},[t?.id]);const m=async w=>{if(h.current){console.log("[AuthDebug] loadUserProfile:skip (already running)");return}h.current=!0;try{const _=[300,800,1600,3e3],j=A=>new Promise(k=>setTimeout(k,A)),N=async(A,k)=>{let M;try{const E=new Promise(O=>{M=setTimeout(()=>O({__timeout:!0}),k)});return await Promise.race([A,E])}finally{clearTimeout(M)}},P=1200;for(let A=0;A<=_.length;A++){console.log("[AuthDebug] loadUserProfile:start",{userId:w,attempt:A});try{console.log("[AuthDebug] querying colaboradores",{userId:w});const k=Ne.from("colaboradores").select("*").eq("id",w).single(),M=await N(k,P);if(M&&M.__timeout){console.warn("[AuthDebug] colaboradores:timeout, using usuarios fallback (inline)");try{console.log("[AuthDebug] fallback-inline: querying usuarios by id");const{data:O,error:R}=await Ne.from("usuarios").select("*").eq("id",w).maybeSingle();if(!R&&O){let B=null;if(O.codigo_empresa){console.log("[AuthDebug] fallback-inline: querying empresas by codigo",{codigo_empresa:O.codigo_empresa});const{data:F,error:$}=await Ne.from("empresas").select("*").eq("codigo_empresa",O.codigo_empresa).single();$?console.warn("[AuthDebug] fallback-inline: empresa error",{status:$.status,code:$.code,message:$.message}):(B=F,console.log("[AuthDebug] fallback-inline: empresa loaded"))}const W={id:w,nome:O.nome||null,cargo:O.papel||"user",codigo_empresa:O.codigo_empresa||null,_source:"usuarios"};a(W);try{localStorage.setItem("auth:userProfile",JSON.stringify(W))}catch{}if(B){s(B);try{localStorage.setItem("auth:company",JSON.stringify(B))}catch{}console.log("[AuthDebug] fallback-inline: set company from usuarios path")}else console.warn("[AuthDebug] fallback-inline: no company resolved; preserving previous company");return}R&&console.warn("[AuthDebug] fallback-inline: usuarios error",{status:R.status,code:R.code,message:R.message})}catch(O){console.warn("[AuthDebug] fallback-inline: unexpected error",O?.message||O)}if(A<_.length){await j(_[A]);continue}return}const{data:E,error:I}=M||{};if(console.log("[AuthDebug] colaboradores:success",{hasProfile:!!E,codigo_empresa:E?.codigo_empresa||null}),I){if(console.warn("[AuthDebug] colaboradores:error",{code:I.code,status:I.status,message:I.message}),I.code==="42P17"){if(A<_.length){await j(_[A]);continue}console.warn("RLS recursion (42P17) persistente ao carregar perfil. Prosseguindo sem alterar cache.");return}if([401,403].includes(Number(I.status))&&(console.warn("[AuthDebug] Erro de autorizao detectado, tentando fallback"),A<_.length)){await j(_[A]);continue}if(I.code==="PGRST116"){try{console.log("[AuthDebug] fallback: querying usuarios by id");const{data:R,error:B}=await Ne.from("usuarios").select("*").eq("id",w).maybeSingle();if(!B&&R){let W=null;if(R.codigo_empresa){console.log("[AuthDebug] fallback: querying empresas by codigo",{codigo_empresa:R.codigo_empresa});const{data:$,error:H}=await Ne.from("empresas").select("*").eq("codigo_empresa",R.codigo_empresa).single();H?console.warn("[AuthDebug] fallback: empresa error",{status:H.status,code:H.code,message:H.message}):(W=$,console.log("[AuthDebug] fallback: empresa loaded"))}const F={id:w,nome:R.nome||null,cargo:R.papel||"user",codigo_empresa:R.codigo_empresa||null,_source:"usuarios"};a(F);try{localStorage.setItem("auth:userProfile",JSON.stringify(F))}catch{}if(W){s(W);try{localStorage.setItem("auth:company",JSON.stringify(W))}catch{}console.log("[AuthDebug] fallback: set company from usuarios path")}else console.warn("[AuthDebug] fallback: no company resolved; preserving previous company");return}B&&console.warn("[AuthDebug] fallback: usuarios error",{status:B.status,code:B.code,message:B.message})}catch{}console.warn("AuthContext: perfil no encontrado (PGRST116) e fallback falhou; mantendo cache atual.");return}if([401,403,406].includes(Number(I.status))&&A<_.length){await j(_[A]);continue}throw I}if(!E){if(A<_.length){await j(_[A]);continue}return}a(E);try{localStorage.setItem("auth:userProfile",JSON.stringify(E))}catch{}if(E?.codigo_empresa){console.log("[AuthDebug] company: querying empresas by codigo from colaboradores",{codigo_empresa:E.codigo_empresa});const{data:O,error:R}=await Ne.from("empresas").select("*").eq("codigo_empresa",E.codigo_empresa).single();if(R){if([401,403,406].includes(Number(R.status))&&A<_.length){await j(_[A]);continue}console.warn("[AuthDebug] company: load error; preserving previous company",{status:R.status,code:R.code,message:R.message});return}else{s(O);try{localStorage.setItem("auth:company",JSON.stringify(O))}catch{}console.log("[AuthDebug] company: set from colaboradores path")}}else console.warn("[AuthDebug] company: no codigo_empresa available on profile; preserving previous company");return}catch(k){if(console.error("[AuthDebug] loadUserProfile:unexpected error",{message:k?.message,code:k?.code,status:k?.status}),A<_.length){await j(_[A]);continue}console.error("Error loading user profile:",k);return}}}finally{h.current=!1}},b={user:t,userProfile:n,company:i,loading:l,authReady:u,signUp:async(w,_,j,N=null)=>{try{const{data:P,error:A}=await Ne.auth.signUp({email:w,password:_});if(A)throw A;if(P?.user&&N){const{data:k,error:M}=await Ne.from("empresas").select("id, codigo_empresa").eq("codigo_empresa",N).single();if(M)throw new Error("Cdigo de empresa invlido. Verifique o cdigo informado.");const{error:E}=await Ne.from("colaboradores").insert({id:P.user.id,codigo_empresa:k.codigo_empresa,nome:j,cargo:"user",ativo:!0});if(E)throw E}return{data:P,error:null}}catch(P){let A="No foi possvel cadastrar. Verifique os dados e tente novamente.";const k=(P?.message||"").toLowerCase();return k.includes("user already registered")||k.includes("already registered")||k.includes("user already exists")?A="Email j cadastrado. Tente entrar ou redefinir a senha.":k.includes("password")&&k.includes("length")&&(A="Senha muito curta. Use ao menos 6 caracteres."),{data:null,error:new Error(A)}}},signIn:async(w,_)=>{try{const{data:j,error:N}=await Ne.auth.signInWithPassword({email:w,password:_});if(N){let P="No foi possvel entrar. Tente novamente.";const A=(N.message||"").toLowerCase(),k=N.status;return A.includes("invalid login")||A.includes("invalid credentials")||k===400?P="Email ou senha invlidos.":A.includes("email not confirmed")||A.includes("not confirmed")?P="Email no confirmado. Verifique sua caixa de entrada.":k===429?P="Muitas tentativas. Aguarde alguns minutos e tente novamente.":k>=500&&(P="Servio indisponvel no momento. Tente novamente mais tarde."),{data:null,error:new Error(P)}}return j.user&&await Ne.from("colaboradores").select("id").eq("id",j.user.id).single(),{data:j,error:null}}catch(j){return{data:null,error:j}}},signOut:async()=>{try{const w=Ne.auth.signOut({scope:"global"}),_=new Promise(j=>setTimeout(j,700));await Promise.race([w,_])}catch(w){console.warn("[AuthContext] signOut(): error during signOut",w?.message||w)}f.current=null,r(null),a(null),s(null),c(!1),d(!0);try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company"),localStorage.removeItem("clientes:list"),localStorage.removeItem("quadras:list"),localStorage.removeItem("agenda:courts"),localStorage.removeItem("agenda:selectedCourts"),localStorage.removeItem("agenda:viewFilter"),Object.keys(localStorage).filter(w=>w.startsWith("agenda:bookings:")).forEach(w=>localStorage.removeItem(w)),Object.keys(localStorage).filter(w=>w.startsWith("sb-")).forEach(w=>localStorage.removeItem(w)),Object.keys(sessionStorage).filter(w=>w.startsWith("sb-")).forEach(w=>sessionStorage.removeItem(w))}catch{}try{sessionStorage.setItem("auth:forceLogout","1")}catch{}try{window.location.replace("/")}catch{}return{error:null}},reloadCompany:async()=>{try{const w=n&&n.codigo_empresa?n.codigo_empresa:null;if(!w)return;const{data:_,error:j}=await Ne.from("empresas").select("*").eq("codigo_empresa",w).single();if(!j&&_){s(_);try{localStorage.setItem("auth:company",JSON.stringify(_))}catch{}}}catch{}}};return o.jsx(nK.Provider,{value:b,children:e})};function ra(e){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(e)}function wo(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function un(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Fn(e){un(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ra(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wi(e,t){un(2,arguments);var r=Fn(e),n=wo(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function cu(e,t){un(2,arguments);var r=Fn(e),n=wo(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),i=new Date(r.getTime());i.setMonth(r.getMonth()+n+1,0);var s=i.getDate();return a>=s?i:(r.setFullYear(i.getFullYear(),i.getMonth(),a),r)}function n0e(e,t){un(2,arguments);var r=Fn(e).getTime(),n=wo(t);return new Date(r+n)}var a0e={};function zh(){return a0e}function uu(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=zh(),f=wo((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Fn(e),m=h.getDay(),g=(m<f?7:0)+m-f;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h}function up(e){return un(1,arguments),uu(e,{weekStartsOn:1})}function i0e(e){un(1,arguments);var t=Fn(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var a=up(n),i=new Date(0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);var s=up(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function o0e(e){un(1,arguments);var t=i0e(e),r=new Date(0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);var n=up(r);return n}function qy(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Pl(e){un(1,arguments);var t=Fn(e);return t.setHours(0,0,0,0),t}var s0e=864e5;function Dd(e,t){un(2,arguments);var r=Pl(e),n=Pl(t),a=r.getTime()-qy(r),i=n.getTime()-qy(n);return Math.round((a-i)/s0e)}function _k(e,t){un(2,arguments);var r=wo(t),n=r*7;return wi(e,n)}function l0e(e,t){un(2,arguments);var r=wo(t);return cu(e,r*12)}function c0e(e){un(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(ra(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(n){var a=Fn(n);(r===void 0||r<a||isNaN(Number(a)))&&(r=a)}),r||new Date(NaN)}function u0e(e){un(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(ra(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(n){var a=Fn(n);(r===void 0||r>a||isNaN(a.getDate()))&&(r=a)}),r||new Date(NaN)}var aK=6e4,iK=36e5;function Ps(e,t){un(2,arguments);var r=Pl(e),n=Pl(t);return r.getTime()===n.getTime()}function B4(e){return un(1,arguments),e instanceof Date||ra(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function d0e(e){if(un(1,arguments),!B4(e)&&typeof e!="number")return!1;var t=Fn(e);return!isNaN(Number(t))}function Uy(e,t){un(2,arguments);var r=Fn(e),n=Fn(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}var f0e=6048e5;function h0e(e,t,r){un(2,arguments);var n=uu(e,r),a=uu(t,r),i=n.getTime()-qy(n),s=a.getTime()-qy(a);return Math.round((i-s)/f0e)}function Sk(e){un(1,arguments);var t=Fn(e);return t.setHours(23,59,59,999),t}function z4(e){un(1,arguments);var t=Fn(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function tl(e){un(1,arguments);var t=Fn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function m0e(e){un(1,arguments);var t=Fn(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function q4(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=zh(),f=wo((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Fn(e),m=h.getDay(),g=(m<f?-7:0)+6-(m-f);return h.setDate(h.getDate()+g),h.setHours(23,59,59,999),h}function oK(e){return un(1,arguments),q4(e,{weekStartsOn:1})}function p0e(e,t){un(2,arguments);var r=wo(t);return n0e(e,-r)}var g0e=864e5;function v0e(e){un(1,arguments);var t=Fn(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/g0e)+1}function $_(e){un(1,arguments);var t=1,r=Fn(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function sK(e){un(1,arguments);var t=Fn(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=$_(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var s=$_(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function x0e(e){un(1,arguments);var t=sK(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=$_(r);return n}var y0e=6048e5;function b0e(e){un(1,arguments);var t=Fn(e),r=$_(t).getTime()-x0e(t).getTime();return Math.round(r/y0e)+1}function F_(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=zh(),f=wo((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Fn(e),m=h.getUTCDay(),g=(m<f?7:0)+m-f;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function lK(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=Fn(e),f=d.getUTCFullYear(),h=zh(),m=wo((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,m),g.setUTCHours(0,0,0,0);var p=F_(g,t),x=new Date(0);x.setUTCFullYear(f,0,m),x.setUTCHours(0,0,0,0);var y=F_(x,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=y.getTime()?f:f-1}function w0e(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=zh(),f=wo((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=lK(e,t),m=new Date(0);m.setUTCFullYear(h,0,f),m.setUTCHours(0,0,0,0);var g=F_(m,t);return g}var _0e=6048e5;function S0e(e,t){un(1,arguments);var r=Fn(e),n=F_(r,t).getTime()-w0e(r,t).getTime();return Math.round(n/_0e)+1}function Ea(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var j0e={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return Ea(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):Ea(n+1,2)},d:function(t,r){return Ea(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return Ea(t.getUTCHours()%12||12,r.length)},H:function(t,r){return Ea(t.getUTCHours(),r.length)},m:function(t,r){return Ea(t.getUTCMinutes(),r.length)},s:function(t,r){return Ea(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return Ea(i,r.length)}};const Cf=j0e;var rg={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N0e={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Cf.y(t,r)},Y:function(t,r,n,a){var i=lK(t,a),s=i>0?i:1-i;if(r==="YY"){var l=s%100;return Ea(l,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ea(s,r.length)},R:function(t,r){var n=sK(t);return Ea(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return Ea(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return Ea(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return Ea(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return Cf.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return Ea(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var i=S0e(t,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):Ea(i,r.length)},I:function(t,r,n){var a=b0e(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):Ea(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Cf.d(t,r)},D:function(t,r,n){var a=v0e(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):Ea(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var i=t.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return Ea(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var i=t.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return Ea(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return Ea(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),i;switch(a===12?i=rg.noon:a===0?i=rg.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),i;switch(a>=17?i=rg.evening:a>=12?i=rg.afternoon:a>=4?i=rg.morning:i=rg.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Cf.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Cf.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):Ea(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):Ea(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Cf.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Cf.s(t,r)},S:function(t,r){return Cf.S(t,r)},X:function(t,r,n,a){var i=a._originalDate||t,s=i.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return h$(s);case"XXXX":case"XX":return pm(s);case"XXXXX":case"XXX":default:return pm(s,":")}},x:function(t,r,n,a){var i=a._originalDate||t,s=i.getTimezoneOffset();switch(r){case"x":return h$(s);case"xxxx":case"xx":return pm(s);case"xxxxx":case"xxx":default:return pm(s,":")}},O:function(t,r,n,a){var i=a._originalDate||t,s=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+f$(s,":");case"OOOO":default:return"GMT"+pm(s,":")}},z:function(t,r,n,a){var i=a._originalDate||t,s=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+f$(s,":");case"zzzz":default:return"GMT"+pm(s,":")}},t:function(t,r,n,a){var i=a._originalDate||t,s=Math.floor(i.getTime()/1e3);return Ea(s,r.length)},T:function(t,r,n,a){var i=a._originalDate||t,s=i.getTime();return Ea(s,r.length)}};function f$(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var s=t||"";return r+String(a)+s+Ea(i,2)}function h$(e,t){if(e%60===0){var r=e>0?"-":"+";return r+Ea(Math.abs(e)/60,2)}return pm(e,t)}function pm(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),i=Ea(Math.floor(a/60),2),s=Ea(a%60,2);return n+i+r+s}const C0e=N0e;var m$=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},cK=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},A0e=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return m$(t,r);var s;switch(a){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",m$(a,r)).replace("{{time}}",cK(i,r))},P0e={p:cK,P:A0e};const E0e=P0e;var k0e=["D","DD"],O0e=["YY","YYYY"];function T0e(e){return k0e.indexOf(e)!==-1}function I0e(e){return O0e.indexOf(e)!==-1}function p$(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var D0e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M0e=function(t,r,n){var a,i=D0e[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};const R0e=M0e;function Zg(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var L0e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$0e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},F0e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B0e={date:Zg({formats:L0e,defaultWidth:"full"}),time:Zg({formats:$0e,defaultWidth:"full"}),dateTime:Zg({formats:F0e,defaultWidth:"full"})};const z0e=B0e;var q0e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},U0e=function(t,r,n,a){return q0e[t]};const V0e=U0e;function Ou(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=r!=null&&r.width?String(r.width):i;a=e.formattingValues[s]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var W0e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},H0e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},G0e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},K0e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y0e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},X0e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J0e=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Q0e={ordinalNumber:J0e,era:Ou({values:W0e,defaultWidth:"wide"}),quarter:Ou({values:H0e,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ou({values:G0e,defaultWidth:"wide"}),day:Ou({values:K0e,defaultWidth:"wide"}),dayPeriod:Ou({values:Y0e,defaultWidth:"wide",formattingValues:X0e,defaultFormattingWidth:"wide"})};const Z0e=Q0e;function Tu(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var s=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?tye(l,function(f){return f.test(s)}):eye(l,function(f){return f.test(s)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(s.length);return{value:u,rest:d}}}function eye(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function tye(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function uK(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var s=e.valueCallback?e.valueCallback(i[0]):i[0];s=r.valueCallback?r.valueCallback(s):s;var l=t.slice(a.length);return{value:s,rest:l}}}var rye=/^(\d+)(th|st|nd|rd)?/i,nye=/\d+/i,aye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iye={any:[/^b/i,/^(a|c)/i]},oye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sye={any:[/1/i,/2/i,/3/i,/4/i]},lye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mye={ordinalNumber:uK({matchPattern:rye,parsePattern:nye,valueCallback:function(t){return parseInt(t,10)}}),era:Tu({matchPatterns:aye,defaultMatchWidth:"wide",parsePatterns:iye,defaultParseWidth:"any"}),quarter:Tu({matchPatterns:oye,defaultMatchWidth:"wide",parsePatterns:sye,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Tu({matchPatterns:lye,defaultMatchWidth:"wide",parsePatterns:cye,defaultParseWidth:"any"}),day:Tu({matchPatterns:uye,defaultMatchWidth:"wide",parsePatterns:dye,defaultParseWidth:"any"}),dayPeriod:Tu({matchPatterns:fye,defaultMatchWidth:"any",parsePatterns:hye,defaultParseWidth:"any"})};const pye=mye;var gye={code:"en-US",formatDistance:R0e,formatLong:z0e,formatRelative:V0e,localize:Z0e,match:pye,options:{weekStartsOn:0,firstWeekContainsDate:1}};const dK=gye;var vye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yye=/^'([^]*?)'?$/,bye=/''/g,wye=/[a-zA-Z]/;function ln(e,t,r){var n,a,i,s,l,c,u,d,f,h,m,g,p,x,y,b,w,_;un(2,arguments);var j=String(t),N=zh(),P=(n=(a=r?.locale)!==null&&a!==void 0?a:N.locale)!==null&&n!==void 0?n:dK,A=wo((i=(s=(l=(c=r?.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:N.firstWeekContainsDate)!==null&&s!==void 0?s:(f=N.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=wo((m=(g=(p=(x=r?.weekStartsOn)!==null&&x!==void 0?x:r==null||(y=r.locale)===null||y===void 0||(b=y.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&p!==void 0?p:N.weekStartsOn)!==null&&g!==void 0?g:(w=N.locale)===null||w===void 0||(_=w.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&m!==void 0?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var M=Fn(e);if(!d0e(M))throw new RangeError("Invalid time value");var E=qy(M),I=p0e(M,E),O={firstWeekContainsDate:A,weekStartsOn:k,locale:P,_originalDate:M},R=j.match(xye).map(function(B){var W=B[0];if(W==="p"||W==="P"){var F=E0e[W];return F(B,P.formatLong)}return B}).join("").match(vye).map(function(B){if(B==="''")return"'";var W=B[0];if(W==="'")return _ye(B);var F=C0e[W];if(F)return!(r!=null&&r.useAdditionalWeekYearTokens)&&I0e(B)&&p$(B,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&T0e(B)&&p$(B,t,String(e)),F(I,B,P.localize,O);if(W.match(wye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");return B}).join("");return R}function _ye(e){var t=e.match(yye);return t?t[1].replace(bye,"'"):e}function Sye(e){un(1,arguments);var t=Fn(e),r=t.getFullYear(),n=t.getMonth(),a=new Date(0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function gd(e){un(1,arguments);var t=Fn(e),r=t.getHours();return r}var jye=6048e5;function Nye(e){un(1,arguments);var t=Fn(e),r=up(t).getTime()-o0e(t).getTime();return Math.round(r/jye)+1}function vd(e){un(1,arguments);var t=Fn(e),r=t.getMinutes();return r}function Cye(e){un(1,arguments);var t=Fn(e),r=t.getTime();return r}function Aye(e){return un(1,arguments),Math.floor(Cye(e)/1e3)}function Pye(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=Fn(e),f=d.getFullYear(),h=zh(),m=wo((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(f+1,0,m),g.setHours(0,0,0,0);var p=uu(g,t),x=new Date(0);x.setFullYear(f,0,m),x.setHours(0,0,0,0);var y=uu(x,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=y.getTime()?f:f-1}function Eye(e,t){var r,n,a,i,s,l,c,u;un(1,arguments);var d=zh(),f=wo((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(s=t.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=Pye(e,t),m=new Date(0);m.setFullYear(h,0,f),m.setHours(0,0,0,0);var g=uu(m,t);return g}var kye=6048e5;function Oye(e,t){un(1,arguments);var r=Fn(e),n=uu(r,t).getTime()-Eye(r,t).getTime();return Math.round(n/kye)+1}function Tye(e){un(1,arguments);var t=Fn(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Iye(e,t){return un(1,arguments),h0e(Tye(e),tl(e),t)+1}function jk(e,t){un(2,arguments);var r=Fn(e),n=Fn(t);return r.getTime()>n.getTime()}function fK(e,t){un(2,arguments);var r=Fn(e),n=Fn(t);return r.getTime()<n.getTime()}function g$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Dye(e,t){if(e){if(typeof e=="string")return g$(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g$(e,t):void 0}}function Nk(e,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Nk(e,t)}function Mye(e,t){if(ra(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ra(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rye(e){var t=Mye(e,"string");return ra(t)=="symbol"?t:t+""}function Lye(e,t,r){return(t=Rye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U4(e,t){un(2,arguments);var r=Fn(e),n=Fn(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function $ye(e,t){un(2,arguments);var r=Fn(e),n=Fn(t);return r.getFullYear()===n.getFullYear()}function M2(e,t){un(2,arguments);var r=wo(t);return wi(e,-r)}function v$(e,t){var r;un(1,arguments);var n=wo((r=t?.additionalDigits)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=qye(e),i;if(a.date){var s=Uye(a.date,n);i=Vye(s.restDateString,s.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),c=0,u;if(a.time&&(c=Wye(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(u=Hye(a.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(l+c),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(l+c+u)}var Lw={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Fye=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Bye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,zye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qye(e){var t={},r=e.split(Lw.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Lw.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Lw.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){var a=Lw.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Uye(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Vye(e,t){if(t===null)return new Date(NaN);var r=e.match(Fye);if(!r)return new Date(NaN);var n=!!r[4],a=r0(r[1]),i=r0(r[2])-1,s=r0(r[3]),l=r0(r[4]),c=r0(r[5])-1;if(n)return Jye(t,l,c)?Gye(t,l,c):new Date(NaN);var u=new Date(0);return!Yye(t,i,s)||!Xye(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,s)),u)}function r0(e){return e?parseInt(e):1}function Wye(e){var t=e.match(Bye);if(!t)return NaN;var r=cA(t[1]),n=cA(t[2]),a=cA(t[3]);return Qye(r,n,a)?r*iK+n*aK+a*1e3:NaN}function cA(e){return e&&parseFloat(e.replace(",","."))||0}function Hye(e){if(e==="Z")return 0;var t=e.match(zye);if(!t)return 0;var r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Zye(n,a)?r*(n*iK+a*aK):NaN}function Gye(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var Kye=[31,null,31,30,31,30,31,31,30,31,30,31];function hK(e){return e%400===0||e%4===0&&e%100!==0}function Yye(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Kye[t]||(hK(e)?29:28))}function Xye(e,t){return t>=1&&t<=(hK(e)?366:365)}function Jye(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Qye(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Zye(e,t){return t>=0&&t<=59}function uA(e,t){un(2,arguments);var r=Fn(e),n=wo(t),a=r.getFullYear(),i=r.getDate(),s=new Date(0);s.setFullYear(a,n,15),s.setHours(0,0,0,0);var l=Sye(s);return r.setMonth(n,Math.min(i,l)),r}function x$(e,t){un(2,arguments);var r=Fn(e),n=wo(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(n),r)}const mK=v.createContext(),ebe=({children:e})=>{const{userProfile:t}=Wi(),r=Ko(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),f=v.useRef(r.pathname),h=v.useCallback(()=>document.querySelectorAll('[role="dialog"]').length>0,[]),m=v.useCallback(async()=>{if(t?.codigo_empresa)try{d(!0);const g=t.codigo_empresa,p=new Date,x=Pl(p).toISOString(),y=Sk(p).toISOString(),b=[],{data:w}=await Ne.from("produtos").select("nome, estoque, estoque_minimo, status").eq("codigo_empresa",g).not("estoque_minimo","is",null),_=(w||[]).filter(W=>{const F=Number(W.estoque||0),$=Number(W.estoque_minimo||0);return F<=$&&$>0});_.length>0&&b.push({tipo:"estoque",icone:"Package",cor:"danger",mensagem:`${_.length} produto${_.length>1?"s":""} com estoque baixo`,link:"/produtos"});const{data:j}=await Ne.from("agendamento_participantes").select("id, agendamento_id").eq("codigo_empresa",g).eq("status_pagamento","Pendente");if(j&&j.length>0){const W=[...new Set(j.map(ce=>ce.agendamento_id))],{data:F}=await Ne.from("agendamentos").select("id, inicio, status").in("id",W).not("status","in","(canceled,absent)").order("inicio",{ascending:!0}),$=new Set((F||[]).map(ce=>ce.id)),H=j.filter(ce=>$.has(ce.agendamento_id));if(H.length>0){const ce=F?.[0],oe=ln(ce?new Date(ce.inicio):p,"yyyy-MM-dd");b.push({tipo:"pagamento",icone:"DollarSign",cor:"warning",mensagem:`${H.length} pagamento${H.length>1?"s":""} pendente${H.length>1?"s":""} em agendamentos`,link:`/agenda?date=${oe}`})}}const N=new Date;N.setHours(N.getHours()-3);const{data:P}=await Ne.from("comandas").select("id, aberto_em, status").eq("codigo_empresa",g).eq("status","open").is("fechado_em",null).lte("aberto_em",N.toISOString());P&&P.length>0&&b.push({tipo:"comanda",icone:"Clock",cor:"warning",mensagem:`${P.length} comanda${P.length>1?"s":""} aberta${P.length>1?"s":""} h mais de 3 horas`,link:"/vendas"});const A=new Date;A.setHours(A.getHours()-12);const{data:k}=await Ne.from("caixa_sessoes").select("id, aberto_em").eq("codigo_empresa",g).eq("status","open").lte("aberto_em",A.toISOString()).limit(1);k&&k.length>0&&b.push({tipo:"caixa",icone:"ShoppingCart",cor:"danger",mensagem:"Caixa aberto h mais de 12 horas",link:"/vendas"});const{data:M}=await Ne.from("mesas").select("id, nome, numero").eq("codigo_empresa",g).eq("status","awaiting-payment");if(M&&M.length>0){const W=M.map($=>$.id),{data:F}=await Ne.from("comandas").select("id, mesa_id").eq("codigo_empresa",g).in("mesa_id",W).eq("status","open");if(F&&F.length>0){const $=F.map(L=>L.id),{data:H}=await Ne.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",$),ce={};(H||[]).forEach(L=>{const U=(Number(L.quantidade)||0)*(Number(L.preco_unitario)||0),J=Number(L.desconto)||0,V=U-J;ce[L.comanda_id]=(ce[L.comanda_id]||0)+V});const oe=Object.values(ce).filter(L=>L>100).length;oe>0&&b.push({tipo:"mesa",icone:"Store",cor:"info",mensagem:`${oe} mesa${oe>1?"s":""} com saldo alto aguardando pagamento`,link:"/vendas"})}}const{data:E}=await Ne.from("clientes").select("id, nome, aniversario").eq("codigo_empresa",g).eq("status","Ativo").not("aniversario","is",null),I=ln(p,"MM-dd"),O=(E||[]).filter(W=>W.aniversario?ln(new Date(W.aniversario),"MM-dd")===I:!1);O.length>0&&b.push({tipo:"aniversario",icone:"Users",cor:"success",mensagem:` ${O.length} aniversariante${O.length>1?"s":""} hoje!`,link:"/clientes"});const R=[];for(let W=1;W<=7;W++){const F=new Date(p);F.setDate(F.getDate()+W),R.push(ln(F,"MM-dd"))}const B=(E||[]).filter(W=>{if(!W.aniversario)return!1;const F=ln(new Date(W.aniversario),"MM-dd");return R.includes(F)});B.length>0&&b.push({tipo:"aniversario-semana",icone:"CalendarPlus",cor:"purple",mensagem:` ${B.length} aniversariante${B.length>1?"s":""} esta semana`,link:"/clientes"}),a(b)}catch(g){console.error("[AlertsContext] Erro ao carregar alertas:",g)}finally{d(!1)}},[t?.codigo_empresa]);return v.useEffect(()=>{if(t?.codigo_empresa){m();const g=setInterval(()=>{m()},5*60*1e3);return()=>clearInterval(g)}},[t?.codigo_empresa,m]),v.useEffect(()=>{if(!t?.codigo_empresa)return;const g=()=>{if(document.visibilityState==="visible"){if(h()){console.log("[AlertsContext] Aba voltou a ficar visvel, mas h modais abertos - ignorando recarga");return}console.log("[AlertsContext] Aba voltou a ficar visvel - recarregando alertas"),m()}},p=()=>{if(h()){console.log("[AlertsContext] Janela ganhou foco, mas h modais abertos - ignorando recarga");return}console.log("[AlertsContext] Janela ganhou foco - recarregando alertas"),m()};return document.addEventListener("visibilitychange",g),window.addEventListener("focus",p),()=>{document.removeEventListener("visibilitychange",g),window.removeEventListener("focus",p)}},[t?.codigo_empresa,m,h]),v.useEffect(()=>{if(t?.codigo_empresa){if(f.current===r.pathname)return;if(f.current=r.pathname,h()){console.log("[AlertsContext] Mudana de rota detectada, mas h modais abertos - ignorando recarga");return}console.log("[AlertsContext] Mudana de rota detectada - recarregando alertas"),m()}},[r.pathname,t?.codigo_empresa,m,h]),o.jsx(mK.Provider,{value:{alerts:n,setAlerts:a,showModal:i,setShowModal:s,showBalloon:l,setShowBalloon:c,loading:u,loadAlerts:m},children:e})},iN=()=>{const e=v.useContext(mK);if(!e)throw new Error("useAlerts must be used within AlertsProvider");return e};function tbe({onToggleSidebar:e,sidebarVisible:t,sidebarPinned:r}){const{toast:n}=Qa(),{signOut:a,userProfile:i,company:s,user:l}=Wi(),{alerts:c,showModal:u,setShowModal:d}=iN(),f=wc(),h=i?.nome||"Usurio",m=se.useMemo(()=>{const M=h.trim().split(/\s+/);return M.length>=2?`${M[0]} ${M[1]}`:h},[h]),g=i?.cargo||i?.papel||"";let p="";try{const M=localStorage.getItem("auth:company");if(M){const E=JSON.parse(M);p=E?.nome_fantasia||E?.razao_social||E?.nome||E?.codigoEmpresa||"";var x=E?.logo_url||""}}catch{}const y=s?.nome_fantasia||s?.razao_social||s?.nome||s?.codigoEmpresa||p||"Empresa no vinculada",b=s?.logo_url||(typeof x<"u"?x:""),w=se.useMemo(()=>s?.logo_url?`${s.logo_url}?v=${Date.now()}`:b||"",[s?.logo_url]),_=M=>({Package:bv,DollarSign:Gs,CalendarCheck:t4,Clock:xv,ShoppingCart:Zb,Store:n4,Users:As,CalendarPlus:r4,AlertTriangle:sp,Info:bW})[M]||sp,j=M=>({danger:"text-danger",warning:"text-warning",info:"text-info",success:"text-success",purple:"text-purple"})[M]||"text-warning",N=({alert:M,onClick:E})=>{const I=_(M.icone),O=j(M.cor);return o.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-white/5 transition-colors cursor-pointer group",onClick:E,children:[o.jsx(I,{className:`w-4 h-4 flex-shrink-0 ${O}`}),o.jsx("span",{className:"text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:M.mensagem}),M.link&&o.jsx(e4,{className:"w-3 h-3 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]})},P=async()=>{console.log("[Header] Logout button clicked",{at:new Date().toISOString(),userBefore:!!l});const{error:M}=await a();console.log("[Header] Logout completed",{error:M,userAfter:!!l}),n(M?{title:"Erro ao sair",description:"Ocorreu um erro ao fazer logout. Tente novamente.",variant:"destructive"}:{title:"Logout realizado",description:"Voc foi desconectado com sucesso.",variant:"default"})};new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});const A=Ko(),k=se.useMemo(()=>{try{const M=String(A?.pathname||"");if(M==="/"||M.startsWith("/dashboard"))return"";const I=[{key:"/agenda",label:"Agenda"},{key:"/clientes",label:"Clientes & Fornecedores"},{key:"/produtos",label:"Produtos"},{key:"/vendas",label:"Vendas"},{key:"/financeiro",label:"Financeiro"},{key:"/balcao",label:"Balco"},{key:"/cadastros",label:"Cadastros"},{key:"/quadras",label:"Quadras"},{key:"/equipe",label:"Equipe"},{key:"/finalizadoras",label:"Finalizadoras"},{key:"/empresas",label:"Empresas"},{key:"/configuracoes",label:"Configuraes"},{key:"/login",label:"Login"}].find(O=>M.startsWith(O.key));if(I)return I.label;if(typeof document<"u"){const O=String(document.title||"");return(O.includes(" - ")?O.split(" - ")[0]:O)||""}}catch{}return""},[A?.pathname]);return o.jsxs(Pr.header,{animate:{opacity:1,y:0},transition:{duration:.6,ease:[.22,1,.36,1]},className:"relative bg-surface/80 backdrop-blur-sm text-text-primary h-[72px] flex-shrink-0 flex items-center justify-between px-8 border-b border-border shadow-[0_1px_0_RGBA(255,255,255,0.04)]",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ye,{variant:"ghost",size:"icon",onClick:e,"aria-label":t?"Ocultar barra lateral":"Mostrar barra lateral",className:"h-12 w-12 hover:bg-surface-2/60 transition-colors",children:o.jsx(cue,{className:`w-7 h-7 transition-colors ${t?"text-brand":"text-text-primary"}`})}),o.jsxs("div",{className:"group pl-3 pr-5 py-1.5 border border-white/10 bg-gradient-to-b from-surface-2/60 to-surface/60 text-text-primary flex items-center gap-4 shadow-sm hover:border-white/20 transition-colors",title:y,children:[o.jsx("div",{className:"relative w-11 h-11 shrink-0 overflow-hidden border border-white/10 bg-surface-2/60 grid place-items-center shadow-[0_0_0_3px_RGBA(0,0,0,0.2)]",children:w?o.jsx("img",{src:w,alt:"Logo",className:"w-full h-full object-cover"}):o.jsx(Gce,{className:"w-6 h-6 opacity-80"})}),o.jsx("span",{className:"tracking-tight max-w-[240px] md:max-w-[320px] truncate leading-[44px] text-base text-text-primary font-semibold",children:y})]})]}),k?o.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 hidden md:block",children:o.jsx("h1",{className:"text-lg md:text-xl font-bold tracking-tight text-text-primary",children:k})}):null,o.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[o.jsxs(ye,{variant:"ghost",size:"icon",onClick:()=>d(!0),className:"relative text-text-secondary hover:text-text-primary transition-colors duration-200",children:[o.jsx(w_,{className:"h-5 w-5"}),c.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:c.length})]}),o.jsx(ye,{variant:"ghost",size:"icon",onClick:P,className:"text-text-secondary hover:text-brand hover:bg-brand/10 transition-colors duration-200 shrink-0",children:o.jsx(lue,{className:"h-5 w-5"})}),o.jsx("div",{className:"w-px h-8 bg-border mx-1 md:mx-2"}),o.jsxs("div",{className:"group pl-2 pr-3 md:pl-4 md:pr-4 py-1.5 rounded-full border border-white/10 bg-gradient-to-b from-surface-2/60 to-surface/60 text-text-primary flex items-center gap-2 md:gap-3 shadow-sm hover:border-white/20 transition-colors",title:`${m}  ${g}`,children:[o.jsx("span",{className:"text-xs md:text-sm font-semibold truncate max-w-[120px] md:max-w-[180px]",children:m}),o.jsx("span",{className:"text-[10px] md:text-[11px] px-1.5 md:px-2 py-0.5 rounded-full bg-brand/15 text-brand font-medium tracking-wide",children:g})]})]}),o.jsx(cn,{open:u,onOpenChange:d,children:o.jsxs(on,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsx(an,{children:o.jsxs(en,{className:"flex items-center gap-2",children:[o.jsx(w_,{className:"h-5 w-5 text-brand"}),"Todos os Alertas (",c.length,")"]})}),o.jsx("div",{className:"mt-4",children:c.length===0?o.jsx("p",{className:"text-sm text-text-muted text-center py-8",children:"Nenhum alerta no momento! "}):o.jsx("ul",{className:"space-y-2 text-sm",children:c.map((M,E)=>o.jsx(N,{alert:M,onClick:()=>{M.link&&(f(M.link),d(!1))}},E))})})]})})]})}const $t=se.forwardRef(({className:e,type:t,...r},n)=>o.jsx("input",{type:t,className:kt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));$t.displayName="Input";var rbe="Label",pK=v.forwardRef((e,t)=>o.jsx(xn.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));pK.displayName=rbe;var gK=pK;const nbe=C4("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),vt=se.forwardRef(({className:e,...t},r)=>o.jsx(gK,{ref:r,className:kt(nbe(),e),...t}));vt.displayName=gK.displayName;const abe=e=>{const t={"Invalid login credentials":"Email ou senha incorretos","Email not confirmed":"Email no confirmado","User not found":"Usurio no encontrado","Invalid email":"Email invlido","Password should be at least 6 characters":"A senha deve ter pelo menos 6 caracteres","Unable to validate email address: invalid format":"Formato de email invlido","Email rate limit exceeded":"Muitas tentativas. Aguarde alguns minutos","Network request failed":"Erro de conexo. Verifique sua internet","Failed to fetch":"Erro de conexo. Verifique sua internet"};if(t[e])return t[e];for(const[r,n]of Object.entries(t))if(e.includes(r))return n;return"Erro ao fazer login. Verifique suas credenciais e tente novamente."},ibe=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[a,i]=v.useState(""),[s,l]=v.useState({email:"",password:""}),{signIn:c,user:u,authReady:d}=Wi(),{toast:f}=Qa();v.useEffect(()=>{if(d&&u)try{const p=sessionStorage.getItem("auth:returnUrl");sessionStorage.removeItem("auth:returnUrl");const x=p||"/";console.log("[LoginPage] Redirecionando para:",x),window.location.replace(x)}catch{}},[d,!!u]);const h=p=>{l({...s,[p.target.name]:p.target.value}),a&&i("")},m=async p=>{p.preventDefault(),n(!0),i("");try{const x=await c(s.email,s.password);if(x.error)throw x.error;f({title:"Login realizado!",description:"Bem-vindo de volta!",variant:"default"});try{const y=sessionStorage.getItem("auth:returnUrl");sessionStorage.removeItem("auth:returnUrl");const b=y||"/";console.log("[LoginPage] Redirecionando aps login para:",b),window.location.replace(b)}catch{}}catch(x){const y=x.message||"Ocorreu um erro. Tente novamente.",b=abe(y);i(b),f({title:"Erro",description:b,variant:"destructive"})}finally{n(!1)}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}};return o.jsx(o.Fragment,{children:o.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 sm:p-6",children:[o.jsx("div",{className:"absolute inset-0 bg-court-pattern opacity-[0.02] mix-blend-overlay"}),o.jsxs(Pr.div,{variants:g,initial:"hidden",animate:"visible",className:"relative z-10 w-full max-w-md pb-20 sm:pb-0",children:[o.jsxs("div",{className:"fx-card",children:[o.jsx("div",{className:"text-center mb-6",children:o.jsxs("div",{className:"flex items-center justify-center mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-brand rounded-xl flex items-center justify-center mr-4",children:o.jsx(t1,{className:"w-8 h-8 text-primary-foreground"})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-5xl font-extrabold",children:[o.jsx("span",{style:{color:"#FF6600"},children:"Fluxo"}),o.jsx("span",{style:{color:"#FFAA33"},children:"7"})]}),o.jsx("p",{className:"text-2xl font-semibold",style:{color:"#B0B0B0"},children:"Arena"})]})]})}),o.jsxs("form",{onSubmit:m,className:"space-y-5 sm:space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(vt,{htmlFor:"email",className:"text-text-primary flex items-center gap-2 text-sm sm:text-base",children:[o.jsx(VE,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Email"]}),o.jsx($t,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:s.email,onChange:h,required:!0,className:"placeholder:text-[#B0B0B0] h-12 sm:h-10 text-base sm:text-sm"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(vt,{htmlFor:"password",className:"text-text-primary flex items-center gap-2 text-sm sm:text-base",children:[o.jsx(yv,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Senha"]}),o.jsxs("div",{className:"relative",children:[o.jsx($t,{id:"password",name:"password",type:e?"text":"password",placeholder:"Sua senha",value:s.password,onChange:h,required:!0,className:"pr-10 placeholder:text-[#B0B0B0] h-12 sm:h-10 text-base sm:text-sm"}),o.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:e?o.jsx(Jb,{className:"w-5 h-5 sm:w-4 sm:h-4"}):o.jsx(Qb,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]}),a&&o.jsx(Pr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-destructive/10 border border-destructive/30 text-destructive text-sm",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-base",children:""}),o.jsx("span",{className:"flex-1",children:a})]})}),o.jsx(ye,{type:"submit",className:"w-full h-12 sm:h-10 text-base sm:text-sm",disabled:r,children:r?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sue,{className:"w-4 h-4"}),"Entrar"]})})]})]}),o.jsx("p",{className:"mt-4 text-center text-xs text-text-muted opacity-70",children:" 2025 Fluxo7 Arena  Todos os direitos reservados."})]})]})})},obe=({children:e})=>{const{user:t,authReady:r}=Wi(),n=Ko();return v.useEffect(()=>{if(r&&!t&&n.pathname!=="/login")try{sessionStorage.setItem("auth:returnUrl",n.pathname+n.search),console.log("[ProtectedRoute] Salvando rota de retorno:",n.pathname+n.search)}catch(a){console.warn("[ProtectedRoute] Erro ao salvar rota de retorno:",a)}},[r,t,n.pathname,n.search]),r?t?e:o.jsx(ibe,{}):o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-brand border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"text-text-primary font-medium",children:"Carregando..."})]})})},sbe=v.createContext(),lbe=({children:e})=>{const[t,r]=v.useState({payment:{open:!1,data:null},editParticipant:{open:!1,data:null}}),[n,a]=v.useState(new Set),i=v.useCallback((f,h=null)=>{console.log(" [MODALS] Abrindo modal:",f,h),r(m=>({...m,[f]:{open:!0,data:h}}))},[]),s=v.useCallback(f=>{if(n.has(f)){console.log(` [ModalsContext] Modal "${f}" est protegido, ignorando fechamento`);return}r(h=>({...h,[f]:{open:!1,data:{}}}))},[n]),l=v.useCallback(f=>t[f]?.open||!1,[t]),c=v.useCallback(f=>t[f]?.data||{},[t]),u=v.useCallback(f=>{console.log(` [ModalsContext] Protegendo modal "${f}"`),a(h=>new Set([...h,f]))},[]),d=v.useCallback(f=>{console.log(` [ModalsContext] Desprotegendo modal "${f}"`),a(h=>{const m=new Set(h);return m.delete(f),m})},[]);return o.jsx(sbe.Provider,{value:{openModal:i,closeModal:s,isModalOpen:l,getModalData:c,protectModal:u,unprotectModal:d},children:e})},vK=v.createContext(),B_=()=>{const e=v.useContext(vK);if(!e)throw new Error("useAgenda must be used within AgendaProvider");return e},cbe=({children:e})=>{const[t,r]=v.useState(!1),[n,a]=v.useState(!1),[i,s]=v.useState(!1),[l,c]=v.useState({participantId:null,participantName:""}),[u,d]=v.useState(null),[f,h]=v.useState([]),[m,g]=v.useState(""),[p,x]=v.useState([]),[y,b]=v.useState(null),[w,_]=v.useState([]),j=v.useRef({isProtected:!1,protectedUntil:0}),N=v.useRef(0),P=v.useRef(null),A=v.useCallback((R=2e3)=>{const B=Date.now()+R;if(B>j.current.protectedUntil)j.current.isProtected=!0,j.current.protectedUntil=B;else return;setTimeout(()=>{Date.now()>=j.current.protectedUntil&&(j.current.isProtected=!1)},R)},[]),k=v.useCallback(()=>{r(!0)},[]),M=v.useCallback(()=>{const R=Date.now();if(j.current.isProtected&&R<j.current.protectedUntil){const W=j.current.protectedUntil-R;return console.log(` [PaymentModal] Fechamento bloqueado por proteo (${W}ms restantes)`),!1}return Date.now()-N.current<500?(console.log(" [PaymentModal] Fechamento bloqueado por mudana de visibilidade recente"),!1):(console.log(" [PaymentModal] Fechando modal (no protegido)"),r(!1),!0)},[]),E=v.useCallback((R,B)=>{c({participantId:R,participantName:B}),a(!0),A(3e3)},[A]),I=v.useCallback(()=>{a(!1),c({participantId:null,participantName:""})},[]);v.useEffect(()=>{const R=()=>{N.current=Date.now()},B=()=>{N.current=Date.now()};return document.addEventListener("visibilitychange",R),window.addEventListener("focus",B),()=>{document.removeEventListener("visibilitychange",R),window.removeEventListener("focus",B)}},[]);const O={isPaymentModalOpen:t,isEditParticipantModalOpen:n,isAddBookingModalOpen:i,openPaymentModal:k,closePaymentModal:M,openEditParticipantModal:E,closeEditParticipantModal:I,setIsAddBookingModalOpen:s,editParticipantData:l,editingBooking:u,setEditingBooking:d,participantsForm:f,setParticipantsForm:h,paymentTotal:m,setPaymentTotal:g,payMethods:p,setPayMethods:x,bookingForm:y,setBookingForm:b,localCustomers:w,setLocalCustomers:_,protectPaymentModal:A,onParticipantReplacedRef:P};return o.jsx(vK.Provider,{value:O,children:e})};var ube=Array.isArray,il=ube,dbe=typeof cs=="object"&&cs&&cs.Object===Object&&cs,xK=dbe,fbe=xK,hbe=typeof self=="object"&&self&&self.Object===Object&&self,mbe=fbe||hbe||Function("return this")(),id=mbe,pbe=id,gbe=pbe.Symbol,c1=gbe,y$=c1,yK=Object.prototype,vbe=yK.hasOwnProperty,xbe=yK.toString,n0=y$?y$.toStringTag:void 0;function ybe(e){var t=vbe.call(e,n0),r=e[n0];try{e[n0]=void 0;var n=!0}catch{}var a=xbe.call(e);return n&&(t?e[n0]=r:delete e[n0]),a}var bbe=ybe,wbe=Object.prototype,_be=wbe.toString;function Sbe(e){return _be.call(e)}var jbe=Sbe,b$=c1,Nbe=bbe,Cbe=jbe,Abe="[object Null]",Pbe="[object Undefined]",w$=b$?b$.toStringTag:void 0;function Ebe(e){return e==null?e===void 0?Pbe:Abe:w$&&w$ in Object(e)?Nbe(e):Cbe(e)}var lf=Ebe;function kbe(e){return e!=null&&typeof e=="object"}var cf=kbe,Obe=lf,Tbe=cf,Ibe="[object Symbol]";function Dbe(e){return typeof e=="symbol"||Tbe(e)&&Obe(e)==Ibe}var hx=Dbe,Mbe=il,Rbe=hx,Lbe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$be=/^\w*$/;function Fbe(e,t){if(Mbe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Rbe(e)?!0:$be.test(e)||!Lbe.test(e)||t!=null&&e in Object(t)}var V4=Fbe;function Bbe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var qh=Bbe;const mx=fa(qh);var zbe=lf,qbe=qh,Ube="[object AsyncFunction]",Vbe="[object Function]",Wbe="[object GeneratorFunction]",Hbe="[object Proxy]";function Gbe(e){if(!qbe(e))return!1;var t=zbe(e);return t==Vbe||t==Wbe||t==Ube||t==Hbe}var W4=Gbe;const vn=fa(W4);var Kbe=id,Ybe=Kbe["__core-js_shared__"],Xbe=Ybe,dA=Xbe,_$=function(){var e=/[^.]+$/.exec(dA&&dA.keys&&dA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Jbe(e){return!!_$&&_$ in e}var Qbe=Jbe,Zbe=Function.prototype,e1e=Zbe.toString;function t1e(e){if(e!=null){try{return e1e.call(e)}catch{}try{return e+""}catch{}}return""}var bK=t1e,r1e=W4,n1e=Qbe,a1e=qh,i1e=bK,o1e=/[\\^$.*+?()[\]{}|]/g,s1e=/^\[object .+?Constructor\]$/,l1e=Function.prototype,c1e=Object.prototype,u1e=l1e.toString,d1e=c1e.hasOwnProperty,f1e=RegExp("^"+u1e.call(d1e).replace(o1e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h1e(e){if(!a1e(e)||n1e(e))return!1;var t=r1e(e)?f1e:s1e;return t.test(i1e(e))}var m1e=h1e;function p1e(e,t){return e?.[t]}var g1e=p1e,v1e=m1e,x1e=g1e;function y1e(e,t){var r=x1e(e,t);return v1e(r)?r:void 0}var Ip=y1e,b1e=Ip,w1e=b1e(Object,"create"),oN=w1e,S$=oN;function _1e(){this.__data__=S$?S$(null):{},this.size=0}var S1e=_1e;function j1e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var N1e=j1e,C1e=oN,A1e="__lodash_hash_undefined__",P1e=Object.prototype,E1e=P1e.hasOwnProperty;function k1e(e){var t=this.__data__;if(C1e){var r=t[e];return r===A1e?void 0:r}return E1e.call(t,e)?t[e]:void 0}var O1e=k1e,T1e=oN,I1e=Object.prototype,D1e=I1e.hasOwnProperty;function M1e(e){var t=this.__data__;return T1e?t[e]!==void 0:D1e.call(t,e)}var R1e=M1e,L1e=oN,$1e="__lodash_hash_undefined__";function F1e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=L1e&&t===void 0?$1e:t,this}var B1e=F1e,z1e=S1e,q1e=N1e,U1e=O1e,V1e=R1e,W1e=B1e;function px(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}px.prototype.clear=z1e;px.prototype.delete=q1e;px.prototype.get=U1e;px.prototype.has=V1e;px.prototype.set=W1e;var H1e=px;function G1e(){this.__data__=[],this.size=0}var K1e=G1e;function Y1e(e,t){return e===t||e!==e&&t!==t}var H4=Y1e,X1e=H4;function J1e(e,t){for(var r=e.length;r--;)if(X1e(e[r][0],t))return r;return-1}var sN=J1e,Q1e=sN,Z1e=Array.prototype,ewe=Z1e.splice;function twe(e){var t=this.__data__,r=Q1e(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():ewe.call(t,r,1),--this.size,!0}var rwe=twe,nwe=sN;function awe(e){var t=this.__data__,r=nwe(t,e);return r<0?void 0:t[r][1]}var iwe=awe,owe=sN;function swe(e){return owe(this.__data__,e)>-1}var lwe=swe,cwe=sN;function uwe(e,t){var r=this.__data__,n=cwe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var dwe=uwe,fwe=K1e,hwe=rwe,mwe=iwe,pwe=lwe,gwe=dwe;function gx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gx.prototype.clear=fwe;gx.prototype.delete=hwe;gx.prototype.get=mwe;gx.prototype.has=pwe;gx.prototype.set=gwe;var lN=gx,vwe=Ip,xwe=id,ywe=vwe(xwe,"Map"),G4=ywe,j$=H1e,bwe=lN,wwe=G4;function _we(){this.size=0,this.__data__={hash:new j$,map:new(wwe||bwe),string:new j$}}var Swe=_we;function jwe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Nwe=jwe,Cwe=Nwe;function Awe(e,t){var r=e.__data__;return Cwe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var cN=Awe,Pwe=cN;function Ewe(e){var t=Pwe(this,e).delete(e);return this.size-=t?1:0,t}var kwe=Ewe,Owe=cN;function Twe(e){return Owe(this,e).get(e)}var Iwe=Twe,Dwe=cN;function Mwe(e){return Dwe(this,e).has(e)}var Rwe=Mwe,Lwe=cN;function $we(e,t){var r=Lwe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Fwe=$we,Bwe=Swe,zwe=kwe,qwe=Iwe,Uwe=Rwe,Vwe=Fwe;function vx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}vx.prototype.clear=Bwe;vx.prototype.delete=zwe;vx.prototype.get=qwe;vx.prototype.has=Uwe;vx.prototype.set=Vwe;var K4=vx,wK=K4,Wwe="Expected a function";function Y4(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Wwe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(Y4.Cache||wK),r}Y4.Cache=wK;var _K=Y4;const Hwe=fa(_K);var Gwe=_K,Kwe=500;function Ywe(e){var t=Gwe(e,function(n){return r.size===Kwe&&r.clear(),n}),r=t.cache;return t}var Xwe=Ywe,Jwe=Xwe,Qwe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zwe=/\\(\\)?/g,e2e=Jwe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Qwe,function(r,n,a,i){t.push(a?i.replace(Zwe,"$1"):n||r)}),t}),t2e=e2e;function r2e(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var X4=r2e,N$=c1,n2e=X4,a2e=il,i2e=hx,o2e=1/0,C$=N$?N$.prototype:void 0,A$=C$?C$.toString:void 0;function SK(e){if(typeof e=="string")return e;if(a2e(e))return n2e(e,SK)+"";if(i2e(e))return A$?A$.call(e):"";var t=e+"";return t=="0"&&1/e==-o2e?"-0":t}var s2e=SK,l2e=s2e;function c2e(e){return e==null?"":l2e(e)}var jK=c2e,u2e=il,d2e=V4,f2e=t2e,h2e=jK;function m2e(e,t){return u2e(e)?e:d2e(e,t)?[e]:f2e(h2e(e))}var NK=m2e,p2e=hx,g2e=1/0;function v2e(e){if(typeof e=="string"||p2e(e))return e;var t=e+"";return t=="0"&&1/e==-g2e?"-0":t}var uN=v2e,x2e=NK,y2e=uN;function b2e(e,t){t=x2e(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[y2e(t[r++])];return r&&r==n?e:void 0}var J4=b2e,w2e=J4;function _2e(e,t,r){var n=e==null?void 0:w2e(e,t);return n===void 0?r:n}var CK=_2e;const Il=fa(CK);function S2e(e){return e==null}var j2e=S2e;const Cn=fa(j2e);var N2e=lf,C2e=il,A2e=cf,P2e="[object String]";function E2e(e){return typeof e=="string"||!C2e(e)&&A2e(e)&&N2e(e)==P2e}var k2e=E2e;const dp=fa(k2e);var AK={exports:{}},Oa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q4=Symbol.for("react.element"),Z4=Symbol.for("react.portal"),dN=Symbol.for("react.fragment"),fN=Symbol.for("react.strict_mode"),hN=Symbol.for("react.profiler"),mN=Symbol.for("react.provider"),pN=Symbol.for("react.context"),O2e=Symbol.for("react.server_context"),gN=Symbol.for("react.forward_ref"),vN=Symbol.for("react.suspense"),xN=Symbol.for("react.suspense_list"),yN=Symbol.for("react.memo"),bN=Symbol.for("react.lazy"),T2e=Symbol.for("react.offscreen"),PK;PK=Symbol.for("react.module.reference");function Sc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Q4:switch(e=e.type,e){case dN:case hN:case fN:case vN:case xN:return e;default:switch(e=e&&e.$$typeof,e){case O2e:case pN:case gN:case bN:case yN:case mN:return e;default:return t}}case Z4:return t}}}Oa.ContextConsumer=pN;Oa.ContextProvider=mN;Oa.Element=Q4;Oa.ForwardRef=gN;Oa.Fragment=dN;Oa.Lazy=bN;Oa.Memo=yN;Oa.Portal=Z4;Oa.Profiler=hN;Oa.StrictMode=fN;Oa.Suspense=vN;Oa.SuspenseList=xN;Oa.isAsyncMode=function(){return!1};Oa.isConcurrentMode=function(){return!1};Oa.isContextConsumer=function(e){return Sc(e)===pN};Oa.isContextProvider=function(e){return Sc(e)===mN};Oa.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q4};Oa.isForwardRef=function(e){return Sc(e)===gN};Oa.isFragment=function(e){return Sc(e)===dN};Oa.isLazy=function(e){return Sc(e)===bN};Oa.isMemo=function(e){return Sc(e)===yN};Oa.isPortal=function(e){return Sc(e)===Z4};Oa.isProfiler=function(e){return Sc(e)===hN};Oa.isStrictMode=function(e){return Sc(e)===fN};Oa.isSuspense=function(e){return Sc(e)===vN};Oa.isSuspenseList=function(e){return Sc(e)===xN};Oa.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dN||e===hN||e===fN||e===vN||e===xN||e===T2e||typeof e=="object"&&e!==null&&(e.$$typeof===bN||e.$$typeof===yN||e.$$typeof===mN||e.$$typeof===pN||e.$$typeof===gN||e.$$typeof===PK||e.getModuleId!==void 0)};Oa.typeOf=Sc;AK.exports=Oa;var I2e=AK.exports,D2e=lf,M2e=cf,R2e="[object Number]";function L2e(e){return typeof e=="number"||M2e(e)&&D2e(e)==R2e}var EK=L2e;const $2e=fa(EK);var F2e=EK;function B2e(e){return F2e(e)&&e!=+e}var z2e=B2e;const xx=fa(z2e);var Es=function(t){return t===0?0:t>0?1:-1},Tm=function(t){return dp(t)&&t.indexOf("%")===t.length-1},ir=function(t){return $2e(t)&&!xx(t)},q2e=function(t){return Cn(t)},bo=function(t){return ir(t)||dp(t)},U2e=0,Dp=function(t){var r=++U2e;return"".concat(t||"").concat(r)},ks=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ir(t)&&!dp(t))return n;var i;if(Tm(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return xx(i)&&(i=n),a&&i>r&&(i=r),i},Vf=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},V2e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},vo=function(t,r){return ir(t)&&ir(r)?function(n){return t+n*(r-t)}:function(){return r}};function z_(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Il(n,t))===r})}var W2e=function(t,r){return ir(t)&&ir(r)?t-r:dp(t)&&dp(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ev(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Ck(e){"@babel/helpers - typeof";return Ck=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ck(e)}var H2e=["viewBox","children"],G2e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P$=["points","pathLength"],fA={svg:H2e,polygon:P$,polyline:P$},eI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],q_=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(v.isValidElement(t)&&(n=t.props),!mx(n))return null;var a={};return Object.keys(n).forEach(function(i){eI.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},K2e=function(t,r,n){return function(a){return t(r,n,a),null}},fp=function(t,r,n){if(!mx(t)||Ck(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];eI.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=K2e(s,r,n))}),a},Y2e=["children"],X2e=["children"];function E$(e,t){if(e==null)return{};var r=J2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function J2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ak(e){"@babel/helpers - typeof";return Ak=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ak(e)}var k$={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},qd=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},O$=null,hA=null,tI=function e(t){if(t===O$&&Array.isArray(hA))return hA;var r=[];return v.Children.forEach(t,function(n){Cn(n)||(I2e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),hA=r,O$=t,r};function Dl(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return qd(a)}):n=[qd(t)],tI(e).forEach(function(a){var i=Il(a,"type.displayName")||Il(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function _l(e,t){var r=Dl(e,t);return r&&r[0]}var T$=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!ir(n)||n<=0||!ir(a)||a<=0)},Q2e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Z2e=function(t){return t&&t.type&&dp(t.type)&&Q2e.indexOf(t.type)>=0},kK=function(t){return t&&Ak(t)==="object"&&"clipDot"in t},e_e=function(t,r,n,a){var i,s=(i=fA?.[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!vn(t)&&(a&&s.includes(r)||G2e.includes(r))||n&&eI.includes(r)},tn=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(v.isValidElement(t)&&(a=t.props),!mx(a))return null;var i={};return Object.keys(a).forEach(function(s){var l;e_e((l=a)===null||l===void 0?void 0:l[s],s,r,n)&&(i[s]=a[s])}),i},Pk=function e(t,r){if(t===r)return!0;var n=v.Children.count(t);if(n!==v.Children.count(r))return!1;if(n===0)return!0;if(n===1)return I$(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!I$(i,s))return!1}return!0},I$=function(t,r){if(Cn(t)&&Cn(r))return!0;if(!Cn(t)&&!Cn(r)){var n=t.props||{},a=n.children,i=E$(n,Y2e),s=r.props||{},l=s.children,c=E$(s,X2e);return a&&l?ev(i,c)&&Pk(a,l):!a&&!l?ev(i,c):!1}return!1},D$=function(t,r){var n=[],a={};return tI(t).forEach(function(i,s){if(Z2e(i))n.push(i);else if(i){var l=qd(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,s);n.push(f),a[l]=!0}}}),n},t_e=function(t){var r=t&&t.type;return r&&k$[r]?k$[r]:null},r_e=function(t,r){return tI(r).indexOf(t)},n_e=["children","width","height","viewBox","className","style","title","desc"];function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ek.apply(this,arguments)}function a_e(e,t){if(e==null)return{};var r=i_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kk(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,l=e.title,c=e.desc,u=a_e(e,n_e),d=a||{width:r,height:n,x:0,y:0},f=An("recharts-surface",i);return se.createElement("svg",Ek({},tn(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),se.createElement("title",null,l),se.createElement("desc",null,c),t)}var o_e=["children","className"];function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ok.apply(this,arguments)}function s_e(e,t){if(e==null)return{};var r=l_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Zn=se.forwardRef(function(e,t){var r=e.children,n=e.className,a=s_e(e,o_e),i=An("recharts-layer",n);return se.createElement("g",Ok({className:i},tn(a,!0),{ref:t}),r)}),ou=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function c_e(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var u_e=c_e,d_e=u_e;function f_e(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:d_e(e,t,r)}var h_e=f_e,m_e="\\ud800-\\udfff",p_e="\\u0300-\\u036f",g_e="\\ufe20-\\ufe2f",v_e="\\u20d0-\\u20ff",x_e=p_e+g_e+v_e,y_e="\\ufe0e\\ufe0f",b_e="\\u200d",w_e=RegExp("["+b_e+m_e+x_e+y_e+"]");function __e(e){return w_e.test(e)}var OK=__e;function S_e(e){return e.split("")}var j_e=S_e,TK="\\ud800-\\udfff",N_e="\\u0300-\\u036f",C_e="\\ufe20-\\ufe2f",A_e="\\u20d0-\\u20ff",P_e=N_e+C_e+A_e,E_e="\\ufe0e\\ufe0f",k_e="["+TK+"]",Tk="["+P_e+"]",Ik="\\ud83c[\\udffb-\\udfff]",O_e="(?:"+Tk+"|"+Ik+")",IK="[^"+TK+"]",DK="(?:\\ud83c[\\udde6-\\uddff]){2}",MK="[\\ud800-\\udbff][\\udc00-\\udfff]",T_e="\\u200d",RK=O_e+"?",LK="["+E_e+"]?",I_e="(?:"+T_e+"(?:"+[IK,DK,MK].join("|")+")"+LK+RK+")*",D_e=LK+RK+I_e,M_e="(?:"+[IK+Tk+"?",Tk,DK,MK,k_e].join("|")+")",R_e=RegExp(Ik+"(?="+Ik+")|"+M_e+D_e,"g");function L_e(e){return e.match(R_e)||[]}var $_e=L_e,F_e=j_e,B_e=OK,z_e=$_e;function q_e(e){return B_e(e)?z_e(e):F_e(e)}var U_e=q_e,V_e=h_e,W_e=OK,H_e=U_e,G_e=jK;function K_e(e){return function(t){t=G_e(t);var r=W_e(t)?H_e(t):void 0,n=r?r[0]:t.charAt(0),a=r?V_e(r,1).join(""):t.slice(1);return n[e]()+a}}var Y_e=K_e,X_e=Y_e,J_e=X_e("toUpperCase"),Q_e=J_e;const wN=fa(Q_e);function Ka(e){return function(){return e}}const $K=Math.cos,U_=Math.sin,gu=Math.sqrt,V_=Math.PI,_N=2*V_,Dk=Math.PI,Mk=2*Dk,gm=1e-6,Z_e=Mk-gm;function FK(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function eSe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return FK;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class tSe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?FK:eSe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,c=n-t,u=a-r,d=s-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>gm)if(!(Math.abs(f*c-u*d)>gm)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,g=a-l,p=c*c+u*u,x=m*m+g*g,y=Math.sqrt(p),b=Math.sqrt(h),w=i*Math.tan((Dk-Math.acos((p+h-x)/(2*y*b)))/2),_=w/b,j=w/y;Math.abs(_-1)>gm&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>gm||Math.abs(this._y1-d)>gm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Mk+Mk),h>Z_e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>gm&&this._append`A${n},${n},0,${+(h>=Dk)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function rI(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new tSe(t)}function nI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BK(e){this._context=e}BK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function SN(e){return new BK(e)}function zK(e){return e[0]}function qK(e){return e[1]}function UK(e,t){var r=Ka(!0),n=null,a=SN,i=null,s=rI(l);e=typeof e=="function"?e:e===void 0?zK:Ka(e),t=typeof t=="function"?t:t===void 0?qK:Ka(t);function l(c){var u,d=(c=nI(c)).length,f,h=!1,m;for(n==null&&(i=a(m=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ka(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ka(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ka(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function $w(e,t,r){var n=null,a=Ka(!0),i=null,s=SN,l=null,c=rI(u);e=typeof e=="function"?e:e===void 0?zK:Ka(+e),t=typeof t=="function"?t:Ka(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?qK:Ka(+r);function u(f){var h,m,g,p=(f=nI(f)).length,x,y=!1,b,w=new Array(p),_=new Array(p);for(i==null&&(l=s(b=c())),h=0;h<=p;++h){if(!(h<p&&a(x=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],_[g]);l.lineEnd(),l.areaEnd()}y&&(w[h]=+e(x,h,f),_[h]=+t(x,h,f),l.point(n?+n(x,h,f):w[h],r?+r(x,h,f):_[h]))}if(b)return l=null,b+""||null}function d(){return UK().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ka(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ka(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ka(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ka(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ka(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ka(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ka(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),u):i},u}class VK{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function rSe(e){return new VK(e,!0)}function nSe(e){return new VK(e,!1)}const aI={draw(e,t){const r=gu(t/V_);e.moveTo(r,0),e.arc(0,0,r,0,_N)}},aSe={draw(e,t){const r=gu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},WK=gu(1/3),iSe=WK*2,oSe={draw(e,t){const r=gu(t/iSe),n=r*WK;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},sSe={draw(e,t){const r=gu(t),n=-r/2;e.rect(n,n,r,r)}},lSe=.8908130915292852,HK=U_(V_/10)/U_(7*V_/10),cSe=U_(_N/10)*HK,uSe=-$K(_N/10)*HK,dSe={draw(e,t){const r=gu(t*lSe),n=cSe*r,a=uSe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=_N*i/5,l=$K(s),c=U_(s);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},mA=gu(3),fSe={draw(e,t){const r=-gu(t/(mA*3));e.moveTo(0,r*2),e.lineTo(-mA*r,-r),e.lineTo(mA*r,-r),e.closePath()}},Ql=-.5,Zl=gu(3)/2,Rk=1/gu(12),hSe=(Rk/2+1)*3,mSe={draw(e,t){const r=gu(t/hSe),n=r/2,a=r*Rk,i=n,s=r*Rk+r,l=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(l,c),e.lineTo(Ql*n-Zl*a,Zl*n+Ql*a),e.lineTo(Ql*i-Zl*s,Zl*i+Ql*s),e.lineTo(Ql*l-Zl*c,Zl*l+Ql*c),e.lineTo(Ql*n+Zl*a,Ql*a-Zl*n),e.lineTo(Ql*i+Zl*s,Ql*s-Zl*i),e.lineTo(Ql*l+Zl*c,Ql*c-Zl*l),e.closePath()}};function pSe(e,t){let r=null,n=rI(a);e=typeof e=="function"?e:Ka(e||aI),t=typeof t=="function"?t:Ka(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ka(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ka(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function W_(){}function H_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GK(e){this._context=e}GK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:H_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:H_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gSe(e){return new GK(e)}function KK(e){this._context=e}KK.prototype={areaStart:W_,areaEnd:W_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:H_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vSe(e){return new KK(e)}function YK(e){this._context=e}YK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:H_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xSe(e){return new YK(e)}function XK(e){this._context=e}XK.prototype={areaStart:W_,areaEnd:W_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ySe(e){return new XK(e)}function M$(e){return e<0?-1:1}function R$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),l=(i*a+s*n)/(n+a);return(M$(i)+M$(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function L$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function pA(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,s-l*r,i,s)}function G_(e){this._context=e}G_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pA(this,this._t0,L$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pA(this,L$(this,r=R$(this,e,t)),r);break;default:pA(this,this._t0,r=R$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function JK(e){this._context=new QK(e)}(JK.prototype=Object.create(G_.prototype)).point=function(e,t){G_.prototype.point.call(this,t,e)};function QK(e){this._context=e}QK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function bSe(e){return new G_(e)}function wSe(e){return new JK(e)}function ZK(e){this._context=e}ZK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=$$(e),a=$$(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $$(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function _Se(e){return new ZK(e)}function jN(e,t){this._context=e,this._t=t}jN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function SSe(e){return new jN(e,.5)}function jSe(e){return new jN(e,0)}function NSe(e){return new jN(e,1)}function jv(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,l=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Lk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function CSe(e,t){return e[t]}function ASe(e){const t=[];return t.key=e,t}function PSe(){var e=Ka([]),t=Lk,r=jv,n=CSe;function a(i){var s=Array.from(e.apply(this,arguments),ASe),l,c=s.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(s[l][u]=[0,+n(f,s[l].key,u,i)]).data=f;for(l=0,d=nI(t(s));l<c;++l)s[d[l]].index=l;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ka(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ka(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Lk:typeof i=="function"?i:Ka(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??jv,a):r},a}function ESe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}jv(e,t)}}function kSe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,l=0;s<a;++s)l+=e[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}jv(e,t)}}function OSe(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var l=0,c=0,u=0;l<s;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],x=p[n][1]||0,y=p[n-1][1]||0;m+=x-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,jv(e,t)}}function Vy(e){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vy(e)}var TSe=["type","size","sizeType"];function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$k.apply(this,arguments)}function F$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F$(Object(r),!0).forEach(function(n){ISe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ISe(e,t,r){return t=DSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DSe(e){var t=MSe(e,"string");return Vy(t)=="symbol"?t:t+""}function MSe(e,t){if(Vy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RSe(e,t){if(e==null)return{};var r=LSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var eY={symbolCircle:aI,symbolCross:aSe,symbolDiamond:oSe,symbolSquare:sSe,symbolStar:dSe,symbolTriangle:fSe,symbolWye:mSe},$Se=Math.PI/180,FSe=function(t){var r="symbol".concat(wN(t));return eY[r]||aI},BSe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*$Se;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},zSe=function(t,r){eY["symbol".concat(wN(t))]=r},iI=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,l=s===void 0?"area":s,c=RSe(t,TSe),u=B$(B$({},c),{},{type:n,size:i,sizeType:l}),d=function(){var x=FSe(n),y=pSe().type(x).size(BSe(i,l,n));return y()},f=u.className,h=u.cx,m=u.cy,g=tn(u,!0);return h===+h&&m===+m&&i===+i?se.createElement("path",$k({},g,{className:An("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};iI.registerSymbol=zSe;function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function Fk(){return Fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fk.apply(this,arguments)}function z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(r),!0).forEach(function(n){Wy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function USe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rY(n.key),n)}}function VSe(e,t,r){return t&&q$(e.prototype,t),r&&q$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WSe(e,t,r){return t=K_(t),HSe(e,tY()?Reflect.construct(t,r||[],K_(e).constructor):t.apply(e,r))}function HSe(e,t){if(t&&(Nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GSe(e)}function GSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tY=function(){return!!e})()}function K_(e){return K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K_(e)}function KSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bk(e,t)}function Bk(e,t){return Bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Bk(e,t)}function Wy(e,t,r){return t=rY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=YSe(e,"string");return Nv(t)=="symbol"?t:t+""}function YSe(e,t){if(Nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ec=32,oI=function(e){function t(){return USe(this,t),WSe(this,t,arguments)}return KSe(t,e),VSe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ec/2,s=ec/6,l=ec/3,c=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ec,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ec,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ec/8,"h").concat(ec,"v").concat(ec*3/4,"h").concat(-ec,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var u=qSe({},n);return delete u.legendIcon,se.cloneElement(n.legendIcon,u)}return se.createElement(iI,{fill:c,cx:i,cy:i,size:ec,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ec,height:ec},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,x=An(Wy(Wy({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=vn(m.value)?null:m.value;ou(!vn(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return se.createElement("li",Fk({className:x,style:f,key:"legend-item-".concat(g)},fp(n.props,m,g)),se.createElement(kk,{width:s,height:s,viewBox:d,style:h},n.renderIcon(m)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(y,m,g):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);Wy(oI,"displayName","Legend");Wy(oI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var XSe=lN;function JSe(){this.__data__=new XSe,this.size=0}var QSe=JSe;function ZSe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var eje=ZSe;function tje(e){return this.__data__.get(e)}var rje=tje;function nje(e){return this.__data__.has(e)}var aje=nje,ije=lN,oje=G4,sje=K4,lje=200;function cje(e,t){var r=this.__data__;if(r instanceof ije){var n=r.__data__;if(!oje||n.length<lje-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new sje(n)}return r.set(e,t),this.size=r.size,this}var uje=cje,dje=lN,fje=QSe,hje=eje,mje=rje,pje=aje,gje=uje;function yx(e){var t=this.__data__=new dje(e);this.size=t.size}yx.prototype.clear=fje;yx.prototype.delete=hje;yx.prototype.get=mje;yx.prototype.has=pje;yx.prototype.set=gje;var nY=yx,vje="__lodash_hash_undefined__";function xje(e){return this.__data__.set(e,vje),this}var yje=xje;function bje(e){return this.__data__.has(e)}var wje=bje,_je=K4,Sje=yje,jje=wje;function Y_(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new _je;++t<r;)this.add(e[t])}Y_.prototype.add=Y_.prototype.push=Sje;Y_.prototype.has=jje;var aY=Y_;function Nje(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var iY=Nje;function Cje(e,t){return e.has(t)}var oY=Cje,Aje=aY,Pje=iY,Eje=oY,kje=1,Oje=2;function Tje(e,t,r,n,a,i){var s=r&kje,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&Oje?new Aje:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],p=t[f];if(n)var x=s?n(p,g,f,t,e,i):n(g,p,f,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!Pje(t,function(y,b){if(!Eje(m,b)&&(g===y||a(g,y,r,n,i)))return m.push(b)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var sY=Tje,Ije=id,Dje=Ije.Uint8Array,Mje=Dje;function Rje(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Lje=Rje;function $je(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var sI=$je,U$=c1,V$=Mje,Fje=H4,Bje=sY,zje=Lje,qje=sI,Uje=1,Vje=2,Wje="[object Boolean]",Hje="[object Date]",Gje="[object Error]",Kje="[object Map]",Yje="[object Number]",Xje="[object RegExp]",Jje="[object Set]",Qje="[object String]",Zje="[object Symbol]",eNe="[object ArrayBuffer]",tNe="[object DataView]",W$=U$?U$.prototype:void 0,gA=W$?W$.valueOf:void 0;function rNe(e,t,r,n,a,i,s){switch(r){case tNe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case eNe:return!(e.byteLength!=t.byteLength||!i(new V$(e),new V$(t)));case Wje:case Hje:case Yje:return Fje(+e,+t);case Gje:return e.name==t.name&&e.message==t.message;case Xje:case Qje:return e==t+"";case Kje:var l=zje;case Jje:var c=n&Uje;if(l||(l=qje),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=Vje,s.set(e,t);var d=Bje(l(e),l(t),n,a,i,s);return s.delete(e),d;case Zje:if(gA)return gA.call(e)==gA.call(t)}return!1}var nNe=rNe;function aNe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var lY=aNe,iNe=lY,oNe=il;function sNe(e,t,r){var n=t(e);return oNe(e)?n:iNe(n,r(e))}var lNe=sNe;function cNe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var uNe=cNe;function dNe(){return[]}var fNe=dNe,hNe=uNe,mNe=fNe,pNe=Object.prototype,gNe=pNe.propertyIsEnumerable,H$=Object.getOwnPropertySymbols,vNe=H$?function(e){return e==null?[]:(e=Object(e),hNe(H$(e),function(t){return gNe.call(e,t)}))}:mNe,xNe=vNe;function yNe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var bNe=yNe,wNe=lf,_Ne=cf,SNe="[object Arguments]";function jNe(e){return _Ne(e)&&wNe(e)==SNe}var NNe=jNe,G$=NNe,CNe=cf,cY=Object.prototype,ANe=cY.hasOwnProperty,PNe=cY.propertyIsEnumerable,ENe=G$(function(){return arguments}())?G$:function(e){return CNe(e)&&ANe.call(e,"callee")&&!PNe.call(e,"callee")},lI=ENe,X_={exports:{}};function kNe(){return!1}var ONe=kNe;X_.exports;(function(e,t){var r=id,n=ONe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(X_,X_.exports);var uY=X_.exports,TNe=9007199254740991,INe=/^(?:0|[1-9]\d*)$/;function DNe(e,t){var r=typeof e;return t=t??TNe,!!t&&(r=="number"||r!="symbol"&&INe.test(e))&&e>-1&&e%1==0&&e<t}var cI=DNe,MNe=9007199254740991;function RNe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MNe}var uI=RNe,LNe=lf,$Ne=uI,FNe=cf,BNe="[object Arguments]",zNe="[object Array]",qNe="[object Boolean]",UNe="[object Date]",VNe="[object Error]",WNe="[object Function]",HNe="[object Map]",GNe="[object Number]",KNe="[object Object]",YNe="[object RegExp]",XNe="[object Set]",JNe="[object String]",QNe="[object WeakMap]",ZNe="[object ArrayBuffer]",eCe="[object DataView]",tCe="[object Float32Array]",rCe="[object Float64Array]",nCe="[object Int8Array]",aCe="[object Int16Array]",iCe="[object Int32Array]",oCe="[object Uint8Array]",sCe="[object Uint8ClampedArray]",lCe="[object Uint16Array]",cCe="[object Uint32Array]",ii={};ii[tCe]=ii[rCe]=ii[nCe]=ii[aCe]=ii[iCe]=ii[oCe]=ii[sCe]=ii[lCe]=ii[cCe]=!0;ii[BNe]=ii[zNe]=ii[ZNe]=ii[qNe]=ii[eCe]=ii[UNe]=ii[VNe]=ii[WNe]=ii[HNe]=ii[GNe]=ii[KNe]=ii[YNe]=ii[XNe]=ii[JNe]=ii[QNe]=!1;function uCe(e){return FNe(e)&&$Ne(e.length)&&!!ii[LNe(e)]}var dCe=uCe;function fCe(e){return function(t){return e(t)}}var dY=fCe,J_={exports:{}};J_.exports;(function(e,t){var r=xK,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(J_,J_.exports);var hCe=J_.exports,mCe=dCe,pCe=dY,K$=hCe,Y$=K$&&K$.isTypedArray,gCe=Y$?pCe(Y$):mCe,fY=gCe,vCe=bNe,xCe=lI,yCe=il,bCe=uY,wCe=cI,_Ce=fY,SCe=Object.prototype,jCe=SCe.hasOwnProperty;function NCe(e,t){var r=yCe(e),n=!r&&xCe(e),a=!r&&!n&&bCe(e),i=!r&&!n&&!a&&_Ce(e),s=r||n||a||i,l=s?vCe(e.length,String):[],c=l.length;for(var u in e)(t||jCe.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wCe(u,c)))&&l.push(u);return l}var CCe=NCe,ACe=Object.prototype;function PCe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ACe;return e===r}var ECe=PCe;function kCe(e,t){return function(r){return e(t(r))}}var hY=kCe,OCe=hY,TCe=OCe(Object.keys,Object),ICe=TCe,DCe=ECe,MCe=ICe,RCe=Object.prototype,LCe=RCe.hasOwnProperty;function $Ce(e){if(!DCe(e))return MCe(e);var t=[];for(var r in Object(e))LCe.call(e,r)&&r!="constructor"&&t.push(r);return t}var FCe=$Ce,BCe=W4,zCe=uI;function qCe(e){return e!=null&&zCe(e.length)&&!BCe(e)}var u1=qCe,UCe=CCe,VCe=FCe,WCe=u1;function HCe(e){return WCe(e)?UCe(e):VCe(e)}var NN=HCe,GCe=lNe,KCe=xNe,YCe=NN;function XCe(e){return GCe(e,YCe,KCe)}var JCe=XCe,X$=JCe,QCe=1,ZCe=Object.prototype,e5e=ZCe.hasOwnProperty;function t5e(e,t,r,n,a,i){var s=r&QCe,l=X$(e),c=l.length,u=X$(t),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var h=l[f];if(!(s?h in t:e5e.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var x=s;++f<c;){h=l[f];var y=e[h],b=t[h];if(n)var w=s?n(b,y,h,t,e,i):n(y,b,h,e,t,i);if(!(w===void 0?y===b||a(y,b,r,n,i):w)){p=!1;break}x||(x=h=="constructor")}if(p&&!x){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(e),i.delete(t),p}var r5e=t5e,n5e=Ip,a5e=id,i5e=n5e(a5e,"DataView"),o5e=i5e,s5e=Ip,l5e=id,c5e=s5e(l5e,"Promise"),u5e=c5e,d5e=Ip,f5e=id,h5e=d5e(f5e,"Set"),mY=h5e,m5e=Ip,p5e=id,g5e=m5e(p5e,"WeakMap"),v5e=g5e,zk=o5e,qk=G4,Uk=u5e,Vk=mY,Wk=v5e,pY=lf,bx=bK,J$="[object Map]",x5e="[object Object]",Q$="[object Promise]",Z$="[object Set]",eF="[object WeakMap]",tF="[object DataView]",y5e=bx(zk),b5e=bx(qk),w5e=bx(Uk),_5e=bx(Vk),S5e=bx(Wk),vm=pY;(zk&&vm(new zk(new ArrayBuffer(1)))!=tF||qk&&vm(new qk)!=J$||Uk&&vm(Uk.resolve())!=Q$||Vk&&vm(new Vk)!=Z$||Wk&&vm(new Wk)!=eF)&&(vm=function(e){var t=pY(e),r=t==x5e?e.constructor:void 0,n=r?bx(r):"";if(n)switch(n){case y5e:return tF;case b5e:return J$;case w5e:return Q$;case _5e:return Z$;case S5e:return eF}return t});var j5e=vm,vA=nY,N5e=sY,C5e=nNe,A5e=r5e,rF=j5e,nF=il,aF=uY,P5e=fY,E5e=1,iF="[object Arguments]",oF="[object Array]",Fw="[object Object]",k5e=Object.prototype,sF=k5e.hasOwnProperty;function O5e(e,t,r,n,a,i){var s=nF(e),l=nF(t),c=s?oF:rF(e),u=l?oF:rF(t);c=c==iF?Fw:c,u=u==iF?Fw:u;var d=c==Fw,f=u==Fw,h=c==u;if(h&&aF(e)){if(!aF(t))return!1;s=!0,d=!1}if(h&&!d)return i||(i=new vA),s||P5e(e)?N5e(e,t,r,n,a,i):C5e(e,t,c,r,n,a,i);if(!(r&E5e)){var m=d&&sF.call(e,"__wrapped__"),g=f&&sF.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,x=g?t.value():t;return i||(i=new vA),a(p,x,r,n,i)}}return h?(i||(i=new vA),A5e(e,t,r,n,a,i)):!1}var T5e=O5e,I5e=T5e,lF=cf;function gY(e,t,r,n,a){return e===t?!0:e==null||t==null||!lF(e)&&!lF(t)?e!==e&&t!==t:I5e(e,t,r,n,gY,a)}var dI=gY,D5e=nY,M5e=dI,R5e=1,L5e=2;function $5e(e,t,r,n){var a=r.length,i=a,s=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new D5e;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?M5e(d,u,R5e|L5e,n,f):h))return!1}}return!0}var F5e=$5e,B5e=qh;function z5e(e){return e===e&&!B5e(e)}var vY=z5e,q5e=vY,U5e=NN;function V5e(e){for(var t=U5e(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,q5e(a)]}return t}var W5e=V5e;function H5e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var xY=H5e,G5e=F5e,K5e=W5e,Y5e=xY;function X5e(e){var t=K5e(e);return t.length==1&&t[0][2]?Y5e(t[0][0],t[0][1]):function(r){return r===e||G5e(r,e,t)}}var J5e=X5e;function Q5e(e,t){return e!=null&&t in Object(e)}var Z5e=Q5e,eAe=NK,tAe=lI,rAe=il,nAe=cI,aAe=uI,iAe=uN;function oAe(e,t,r){t=eAe(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var s=iAe(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&aAe(a)&&nAe(s,a)&&(rAe(e)||tAe(e)))}var sAe=oAe,lAe=Z5e,cAe=sAe;function uAe(e,t){return e!=null&&cAe(e,t,lAe)}var dAe=uAe,fAe=dI,hAe=CK,mAe=dAe,pAe=V4,gAe=vY,vAe=xY,xAe=uN,yAe=1,bAe=2;function wAe(e,t){return pAe(e)&&gAe(t)?vAe(xAe(e),t):function(r){var n=hAe(r,e);return n===void 0&&n===t?mAe(r,e):fAe(t,n,yAe|bAe)}}var _Ae=wAe;function SAe(e){return e}var wx=SAe;function jAe(e){return function(t){return t?.[e]}}var NAe=jAe,CAe=J4;function AAe(e){return function(t){return CAe(t,e)}}var PAe=AAe,EAe=NAe,kAe=PAe,OAe=V4,TAe=uN;function IAe(e){return OAe(e)?EAe(TAe(e)):kAe(e)}var DAe=IAe,MAe=J5e,RAe=_Ae,LAe=wx,$Ae=il,FAe=DAe;function BAe(e){return typeof e=="function"?e:e==null?LAe:typeof e=="object"?$Ae(e)?RAe(e[0],e[1]):MAe(e):FAe(e)}var od=BAe;function zAe(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var yY=zAe;function qAe(e){return e!==e}var UAe=qAe;function VAe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var WAe=VAe,HAe=yY,GAe=UAe,KAe=WAe;function YAe(e,t,r){return t===t?KAe(e,t,r):HAe(e,GAe,r)}var XAe=YAe,JAe=XAe;function QAe(e,t){var r=e==null?0:e.length;return!!r&&JAe(e,t,0)>-1}var ZAe=QAe;function ePe(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var tPe=ePe;function rPe(){}var nPe=rPe,xA=mY,aPe=nPe,iPe=sI,oPe=1/0,sPe=xA&&1/iPe(new xA([,-0]))[1]==oPe?function(e){return new xA(e)}:aPe,lPe=sPe,cPe=aY,uPe=ZAe,dPe=tPe,fPe=oY,hPe=lPe,mPe=sI,pPe=200;function gPe(e,t,r){var n=-1,a=uPe,i=e.length,s=!0,l=[],c=l;if(r)s=!1,a=dPe;else if(i>=pPe){var u=t?null:hPe(e);if(u)return mPe(u);s=!1,a=fPe,c=new cPe}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,s&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var vPe=gPe,xPe=od,yPe=vPe;function bPe(e,t){return e&&e.length?yPe(e,xPe(t)):[]}var wPe=bPe;const cF=fa(wPe);function bY(e,t,r){return t===!0?cF(e,r):vn(t)?cF(e,t):e}function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(e)}var _Pe=["ref"];function uF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uF(Object(r),!0).forEach(function(n){CN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_Y(n.key),n)}}function jPe(e,t,r){return t&&dF(e.prototype,t),r&&dF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NPe(e,t,r){return t=Q_(t),CPe(e,wY()?Reflect.construct(t,r||[],Q_(e).constructor):t.apply(e,r))}function CPe(e,t){if(t&&(Cv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return APe(e)}function APe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wY=function(){return!!e})()}function Q_(e){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q_(e)}function PPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hk(e,t)}function Hk(e,t){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hk(e,t)}function CN(e,t,r){return t=_Y(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Y(e){var t=EPe(e,"string");return Cv(t)=="symbol"?t:t+""}function EPe(e,t){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kPe(e,t){if(e==null)return{};var r=OPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TPe(e){return e.value}function IPe(e,t){if(se.isValidElement(e))return se.cloneElement(e,t);if(typeof e=="function")return se.createElement(e,t);t.ref;var r=kPe(t,_Pe);return se.createElement(oI,r)}var fF=1,Wm=function(e){function t(){var r;SPe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=NPe(this,t,[].concat(a)),CN(r,"lastBoundingBox",{width:-1,height:-1}),r}return PPe(t,e),jPe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>fF||Math.abs(a.height-this.lastBoundingBox.height)>fF)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?xd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return xd(xd({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=xd(xd({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return se.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},IPe(i,xd(xd({},this.props),{},{payload:bY(d,u,TPe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=xd(xd({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&ir(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(v.PureComponent);CN(Wm,"displayName","Legend");CN(Wm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hF=c1,DPe=lI,MPe=il,mF=hF?hF.isConcatSpreadable:void 0;function RPe(e){return MPe(e)||DPe(e)||!!(mF&&e&&e[mF])}var LPe=RPe,$Pe=lY,FPe=LPe;function SY(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=FPe),a||(a=[]);++i<s;){var l=e[i];t>0&&r(l)?t>1?SY(l,t-1,r,n,a):$Pe(a,l):n||(a[a.length]=l)}return a}var jY=SY;function BPe(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var zPe=BPe,qPe=zPe,UPe=qPe(),VPe=UPe,WPe=VPe,HPe=NN;function GPe(e,t){return e&&WPe(e,t,HPe)}var NY=GPe,KPe=u1;function YPe(e,t){return function(r,n){if(r==null)return r;if(!KPe(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&n(s[i],i,s)!==!1;);return r}}var XPe=YPe,JPe=NY,QPe=XPe,ZPe=QPe(JPe),fI=ZPe,eEe=fI,tEe=u1;function rEe(e,t){var r=-1,n=tEe(e)?Array(e.length):[];return eEe(e,function(a,i,s){n[++r]=t(a,i,s)}),n}var CY=rEe;function nEe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var aEe=nEe,pF=hx;function iEe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=pF(e),s=t!==void 0,l=t===null,c=t===t,u=pF(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!s&&a||!c)return-1}return 0}var oEe=iEe,sEe=oEe;function lEe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,l=r.length;++n<s;){var c=sEe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var cEe=lEe,yA=X4,uEe=J4,dEe=od,fEe=CY,hEe=aEe,mEe=dY,pEe=cEe,gEe=wx,vEe=il;function xEe(e,t,r){t.length?t=yA(t,function(i){return vEe(i)?function(s){return uEe(s,i.length===1?i[0]:i)}:i}):t=[gEe];var n=-1;t=yA(t,mEe(dEe));var a=fEe(e,function(i,s,l){var c=yA(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return hEe(a,function(i,s){return pEe(i,s,r)})}var yEe=xEe;function bEe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var wEe=bEe,_Ee=wEe,gF=Math.max;function SEe(e,t,r){return t=gF(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=gF(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(s),_Ee(e,this,l)}}var jEe=SEe;function NEe(e){return function(){return e}}var CEe=NEe,AEe=Ip,PEe=function(){try{var e=AEe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),AY=PEe,EEe=CEe,vF=AY,kEe=wx,OEe=vF?function(e,t){return vF(e,"toString",{configurable:!0,enumerable:!1,value:EEe(t),writable:!0})}:kEe,TEe=OEe,IEe=800,DEe=16,MEe=Date.now;function REe(e){var t=0,r=0;return function(){var n=MEe(),a=DEe-(n-r);if(r=n,a>0){if(++t>=IEe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var LEe=REe,$Ee=TEe,FEe=LEe,BEe=FEe($Ee),zEe=BEe,qEe=wx,UEe=jEe,VEe=zEe;function WEe(e,t){return VEe(UEe(e,t,qEe),e+"")}var HEe=WEe,GEe=H4,KEe=u1,YEe=cI,XEe=qh;function JEe(e,t,r){if(!XEe(r))return!1;var n=typeof t;return(n=="number"?KEe(r)&&YEe(t,r.length):n=="string"&&t in r)?GEe(r[t],e):!1}var AN=JEe,QEe=jY,ZEe=yEe,eke=HEe,xF=AN,tke=eke(function(e,t){if(e==null)return[];var r=t.length;return r>1&&xF(e,t[0],t[1])?t=[]:r>2&&xF(t[0],t[1],t[2])&&(t=[t[0]]),ZEe(e,QEe(t,1),[])}),rke=tke;const hI=fa(rke);function Hy(e){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hy(e)}function Gk(){return Gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gk.apply(this,arguments)}function nke(e,t){return ske(e)||oke(e,t)||ike(e,t)||ake()}function ake(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ike(e,t){if(e){if(typeof e=="string")return yF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yF(e,t)}}function yF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function ske(e){if(Array.isArray(e))return e}function bF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(r),!0).forEach(function(n){lke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lke(e,t,r){return t=cke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cke(e){var t=uke(e,"string");return Hy(t)=="symbol"?t:t+""}function uke(e,t){if(Hy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dke(e){return Array.isArray(e)&&bo(e[0])&&bo(e[1])?e.join(" ~ "):e}var fke=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,x=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(d&&d.length){var I={padding:0,margin:0},O=(h?hI(d,h):d).map(function(R,B){if(R.type==="none")return null;var W=bA({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),F=R.formatter||f||dke,$=R.value,H=R.name,ce=$,oe=H;if(F&&ce!=null&&oe!=null){var L=F($,H,R,B,d);if(Array.isArray(L)){var U=nke(L,2);ce=U[0],oe=U[1]}else ce=L}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:W},bo(oe)?se.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,bo(oe)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},ce),se.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:I},O)}return null},_=bA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=bA({margin:0},u),N=!Cn(p),P=N?p:"",A=An("recharts-default-tooltip",m),k=An("recharts-tooltip-label",g);N&&x&&d!==void 0&&d!==null&&(P=x(p,d));var M=b?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",Gk({className:A,style:_},M),se.createElement("p",{className:k,style:j},se.isValidElement(P)?P:"".concat(P)),w())};function Gy(e){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(e)}function Bw(e,t,r){return t=hke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hke(e){var t=mke(e,"string");return Gy(t)=="symbol"?t:t+""}function mke(e,t){if(Gy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a0="recharts-tooltip-wrapper",pke={visibility:"hidden"};function gke(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return An(a0,Bw(Bw(Bw(Bw({},"".concat(a0,"-right"),ir(r)&&t&&ir(t.x)&&r>=t.x),"".concat(a0,"-left"),ir(r)&&t&&ir(t.x)&&r<t.x),"".concat(a0,"-bottom"),ir(n)&&t&&ir(t.y)&&n>=t.y),"".concat(a0,"-top"),ir(n)&&t&&ir(t.y)&&n<t.y))}function wF(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&ir(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,p=c[n]+u;return g>p?Math.max(d,c[n]):Math.max(f,c[n])}function vke(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xke(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=wF({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=wF({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=vke({translateX:d,translateY:f,useTranslate3d:l})):u=pke,{cssProperties:u,cssClasses:gke({translateX:d,translateY:f,coordinate:r})}}function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}function _F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_F(Object(r),!0).forEach(function(n){Yk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_F(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EY(n.key),n)}}function bke(e,t,r){return t&&jF(e.prototype,t),r&&jF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wke(e,t,r){return t=Z_(t),_ke(e,PY()?Reflect.construct(t,r||[],Z_(e).constructor):t.apply(e,r))}function _ke(e,t){if(t&&(Av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ske(e)}function Ske(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PY=function(){return!!e})()}function Z_(e){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z_(e)}function jke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t)}function Kk(e,t){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Kk(e,t)}function Yk(e,t,r){return t=EY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EY(e){var t=Nke(e,"string");return Av(t)=="symbol"?t:t+""}function Nke(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NF=1,Cke=function(e){function t(){var r;yke(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=wke(this,t,[].concat(a)),Yk(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Yk(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return jke(t,e),bke(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>NF||Math.abs(n.height-this.state.lastBoundingBox.height)>NF)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,w=xke({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),_=w.cssClasses,j=w.cssProperties,N=SF(SF({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return se.createElement("div",{tabIndex:-1,className:_,style:N,ref:function(A){n.wrapperNode=A}},u)}}])}(v.PureComponent),Ake=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},su={isSsr:Ake(),get:function(t){return su[t]},set:function(t,r){if(typeof t=="string")su[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){su[a]=t[a]})}}};function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function CF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CF(Object(r),!0).forEach(function(n){mI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OY(n.key),n)}}function Eke(e,t,r){return t&&PF(e.prototype,t),r&&PF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kke(e,t,r){return t=eS(t),Oke(e,kY()?Reflect.construct(t,r||[],eS(e).constructor):t.apply(e,r))}function Oke(e,t){if(t&&(Pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tke(e)}function Tke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kY=function(){return!!e})()}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eS(e)}function Ike(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xk(e,t)}function Xk(e,t){return Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xk(e,t)}function mI(e,t,r){return t=OY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OY(e){var t=Dke(e,"string");return Pv(t)=="symbol"?t:t+""}function Dke(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mke(e){return e.dataKey}function Rke(e,t){return se.isValidElement(e)?se.cloneElement(e,t):typeof e=="function"?se.createElement(e,t):se.createElement(fke,t)}var jl=function(e){function t(){return Pke(this,t),kke(this,t,arguments)}return Ike(t,e),Eke(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,x=a.position,y=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,_=a.wrapperStyle,j=g??[];f&&j.length&&(j=bY(g.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),p,Mke));var N=j.length>0;return se.createElement(Cke,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:N,offset:m,position:x,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:_},Rke(u,AF(AF({},this.props),{},{payload:j})))}}])}(v.PureComponent);mI(jl,"displayName","Tooltip");mI(jl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!su.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Lke=id,$ke=function(){return Lke.Date.now()},Fke=$ke,Bke=/\s/;function zke(e){for(var t=e.length;t--&&Bke.test(e.charAt(t)););return t}var qke=zke,Uke=qke,Vke=/^\s+/;function Wke(e){return e&&e.slice(0,Uke(e)+1).replace(Vke,"")}var Hke=Wke,Gke=Hke,EF=qh,Kke=hx,kF=0/0,Yke=/^[-+]0x[0-9a-f]+$/i,Xke=/^0b[01]+$/i,Jke=/^0o[0-7]+$/i,Qke=parseInt;function Zke(e){if(typeof e=="number")return e;if(Kke(e))return kF;if(EF(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=EF(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Gke(e);var r=Xke.test(e);return r||Jke.test(e)?Qke(e.slice(2),r?2:8):Yke.test(e)?kF:+e}var TY=Zke,eOe=qh,wA=Fke,OF=TY,tOe="Expected a function",rOe=Math.max,nOe=Math.min;function aOe(e,t,r){var n,a,i,s,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(tOe);t=OF(t)||0,eOe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?rOe(OF(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(N){var P=n,A=a;return n=a=void 0,u=N,s=e.apply(A,P),s}function g(N){return u=N,l=setTimeout(y,t),d?m(N):s}function p(N){var P=N-c,A=N-u,k=t-P;return f?nOe(k,i-A):k}function x(N){var P=N-c,A=N-u;return c===void 0||P>=t||P<0||f&&A>=i}function y(){var N=wA();if(x(N))return b(N);l=setTimeout(y,p(N))}function b(N){return l=void 0,h&&n?m(N):(n=a=void 0,s)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?s:b(wA())}function j(){var N=wA(),P=x(N);if(n=arguments,a=this,c=N,P){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),s}return j.cancel=w,j.flush=_,j}var iOe=aOe,oOe=iOe,sOe=qh,lOe="Expected a function";function cOe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(lOe);return sOe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),oOe(e,t,{leading:n,maxWait:t,trailing:a})}var uOe=cOe;const IY=fa(uOe);function Ky(e){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ky(e)}function TF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(r),!0).forEach(function(n){dOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dOe(e,t,r){return t=fOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fOe(e){var t=hOe(e,"string");return Ky(t)=="symbol"?t:t+""}function hOe(e,t){if(Ky(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ky(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mOe(e,t){return xOe(e)||vOe(e,t)||gOe(e,t)||pOe()}function pOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gOe(e,t){if(e){if(typeof e=="string")return IF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IF(e,t)}}function IF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function xOe(e){if(Array.isArray(e))return e}var R2=v.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,x=e.id,y=e.className,b=e.onResize,w=e.style,_=w===void 0?{}:w,j=v.useRef(null),N=v.useRef();N.current=b,v.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var P=v.useState({containerWidth:a.width,containerHeight:a.height}),A=mOe(P,2),k=A[0],M=A[1],E=v.useCallback(function(O,R){M(function(B){var W=Math.round(O),F=Math.round(R);return B.containerWidth===W&&B.containerHeight===F?B:{containerWidth:W,containerHeight:F}})},[]);v.useEffect(function(){var O=function(H){var ce,oe=H[0].contentRect,L=oe.width,U=oe.height;E(L,U),(ce=N.current)===null||ce===void 0||ce.call(N,L,U)};p>0&&(O=IY(O,p,{trailing:!0,leading:!1}));var R=new ResizeObserver(O),B=j.current.getBoundingClientRect(),W=B.width,F=B.height;return E(W,F),R.observe(j.current),function(){R.disconnect()}},[E,p]);var I=v.useMemo(function(){var O=k.containerWidth,R=k.containerHeight;if(O<0||R<0)return null;ou(Tm(s)||Tm(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),ou(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=Tm(s)?O:s,W=Tm(c)?R:c;r&&r>0&&(B?W=B/r:W&&(B=W*r),h&&W>h&&(W=h)),ou(B>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,W,s,c,d,f,r);var F=!Array.isArray(m)&&qd(m.type).endsWith("Chart");return se.Children.map(m,function($){return se.isValidElement($)?v.cloneElement($,zw({width:B,height:W},F?{style:zw({height:"100%",width:"100%",maxHeight:W,maxWidth:B},$.props.style)}:{})):$})},[r,m,c,h,f,d,k,s]);return se.createElement("div",{id:x?"".concat(x):void 0,className:An("recharts-responsive-container",y),style:zw(zw({},_),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},I)}),Yy=function(t){return null};Yy.displayName="Cell";function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}function DF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(r),!0).forEach(function(n){yOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yOe(e,t,r){return t=bOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bOe(e){var t=wOe(e,"string");return Xy(t)=="symbol"?t:t+""}function wOe(e,t){if(Xy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ng={widthCache:{},cacheCount:0},_Oe=2e3,SOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MF="recharts_measurement_span";function jOe(e){var t=Jk({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Y0=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||su.isSsr)return{width:0,height:0};var n=jOe(r),a=JSON.stringify({text:t,copyStyle:n});if(ng.widthCache[a])return ng.widthCache[a];try{var i=document.getElementById(MF);i||(i=document.createElement("span"),i.setAttribute("id",MF),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=Jk(Jk({},SOe),n);Object.assign(i.style,s),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ng.widthCache[a]=c,++ng.cacheCount>_Oe&&(ng.cacheCount=0,ng.widthCache={}),c}catch{return{width:0,height:0}}},NOe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Jy(e){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jy(e)}function tS(e,t){return EOe(e)||POe(e,t)||AOe(e,t)||COe()}function COe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AOe(e,t){if(e){if(typeof e=="string")return RF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RF(e,t)}}function RF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function POe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function EOe(e){if(Array.isArray(e))return e}function kOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TOe(n.key),n)}}function OOe(e,t,r){return t&&LF(e.prototype,t),r&&LF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TOe(e){var t=IOe(e,"string");return Jy(t)=="symbol"?t:t+""}function IOe(e,t){if(Jy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $F=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,DY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ROe=Object.keys(DY),Fg="NaN";function LOe(e,t){return e*DY[t]}var qw=function(){function e(t,r){kOe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!DOe.test(r)&&(this.num=NaN,this.unit=""),ROe.includes(r)&&(this.num=LOe(t,r),this.unit="px")}return OOe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=MOe.exec(r))!==null&&n!==void 0?n:[],i=tS(a,3),s=i[1],l=i[2];return new e(parseFloat(s),l??"")}}])}();function MY(e){if(e.includes(Fg))return Fg;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=$F.exec(t))!==null&&r!==void 0?r:[],a=tS(n,4),i=a[1],s=a[2],l=a[3],c=qw.parse(i??""),u=qw.parse(l??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Fg;t=t.replace($F,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=FF.exec(t))!==null&&f!==void 0?f:[],m=tS(h,4),g=m[1],p=m[2],x=m[3],y=qw.parse(g??""),b=qw.parse(x??""),w=p==="+"?y.add(b):y.subtract(b);if(w.isNaN())return Fg;t=t.replace(FF,w.toString())}return t}var BF=/\(([^()]*)\)/;function $Oe(e){for(var t=e;t.includes("(");){var r=BF.exec(t),n=tS(r,2),a=n[1];t=t.replace(BF,MY(a))}return t}function FOe(e){var t=e.replace(/\s+/g,"");return t=$Oe(t),t=MY(t),t}function BOe(e){try{return FOe(e)}catch{return Fg}}function _A(e){var t=BOe(e.slice(5,-1));return t===Fg?"":t}var zOe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qOe=["dx","dy","angle","className","breakAll"];function Qk(){return Qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qk.apply(this,arguments)}function zF(e,t){if(e==null)return{};var r=UOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qF(e,t){return GOe(e)||HOe(e,t)||WOe(e,t)||VOe()}function VOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WOe(e,t){if(e){if(typeof e=="string")return UF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UF(e,t)}}function UF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function GOe(e){if(Array.isArray(e))return e}var RY=/[ \f\n\r\t\v\u2028\u2029]+/,LY=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Cn(r)||(n?i=r.toString().split(""):i=r.toString().split(RY));var s=i.map(function(c){return{word:c,width:Y0(c,a).width}}),l=n?0:Y0("",a).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},KOe=function(t,r,n,a,i){var s=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=ir(s),f=l,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(W,F){var $=F.word,H=F.width,ce=W[W.length-1];if(ce&&(a==null||i||ce.width+H+n<Number(a)))ce.words.push($),ce.width+=H+n;else{var oe={words:[$],width:H};W.push(oe)}return W},[])},m=h(r),g=function(B){return B.reduce(function(W,F){return W.width>F.width?W:F})};if(!d)return m;for(var p="",x=function(B){var W=f.slice(0,B),F=LY({breakAll:u,style:c,children:W+p}).wordsWithComputedWidth,$=h(F),H=$.length>s||g($).width>Number(a);return[H,$]},y=0,b=f.length-1,w=0,_;y<=b&&w<=f.length-1;){var j=Math.floor((y+b)/2),N=j-1,P=x(N),A=qF(P,2),k=A[0],M=A[1],E=x(j),I=qF(E,1),O=I[0];if(!k&&!O&&(y=j+1),k&&O&&(b=j-1),!k&&O){_=M;break}w++}return _||m},VF=function(t){var r=Cn(t)?[]:t.toString().split(RY);return[{words:r}]},YOe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,l=t.maxLines;if((r||n)&&!su.isSsr){var c,u,d=LY({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return VF(a);return KOe({breakAll:s,children:a,maxLines:l,style:i},c,u,r,n)}return VF(a)},WF="#808080",hp=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,x=t.fill,y=x===void 0?WF:x,b=zF(t,zOe),w=v.useMemo(function(){return YOe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),_=b.dx,j=b.dy,N=b.angle,P=b.className,A=b.breakAll,k=zF(b,qOe);if(!bo(n)||!bo(i))return null;var M=n+(ir(_)?_:0),E=i+(ir(j)?j:0),I;switch(p){case"start":I=_A("calc(".concat(u,")"));break;case"middle":I=_A("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=_A("calc(".concat(w.length-1," * -").concat(l,")"));break}var O=[];if(f){var R=w[0].width,B=b.width;O.push("scale(".concat((ir(B)?B/R:1)/R,")"))}return N&&O.push("rotate(".concat(N,", ").concat(M,", ").concat(E,")")),O.length&&(k.transform=O.join(" ")),se.createElement("text",Qk({},tn(k,!0),{x:M,y:E,className:An("recharts-text",P),textAnchor:m,fill:y.includes("url")?WF:y}),w.map(function(W,F){var $=W.words.join(A?"":" ");return se.createElement("tspan",{x:M,dy:F===0?I:l,key:"".concat($,"-").concat(F)},$)}))};function hh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XOe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pI(e){let t,r,n;e.length!==2?(t=hh,r=(l,c)=>hh(e(l),c),n=(l,c)=>e(l)-c):(t=e===hh||e===XOe?e:JOe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:s,right:i}}function JOe(){return 0}function $Y(e){return e===null?NaN:+e}function*QOe(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const ZOe=pI(hh),eTe=ZOe.right;pI($Y).center;const d1=eTe;class HF extends Map{constructor(t,r=nTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(GF(this,t))}has(t){return super.has(GF(this,t))}set(t,r){return super.set(tTe(this,t),r)}delete(t){return super.delete(rTe(this,t))}}function GF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function tTe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function rTe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function nTe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function aTe(e=hh){if(e===hh)return FY;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function FY(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const iTe=Math.sqrt(50),oTe=Math.sqrt(10),sTe=Math.sqrt(2);function rS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=iTe?10:i>=oTe?5:i>=sTe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?rS(e,t,r*2):[l,c,u]}function Zk(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?rS(t,e,r):rS(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(s<0)for(let u=0;u<l;++u)c[u]=(i-u)/-s;else for(let u=0;u<l;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(a+u)/-s;else for(let u=0;u<l;++u)c[u]=(a+u)*s;return c}function eO(e,t,r){return t=+t,e=+e,r=+r,rS(e,t,r)[2]}function tO(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?eO(t,e,r):eO(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function KF(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function YF(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function BY(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?FY:aTe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));BY(e,t,m,g,a)}const i=e[t];let s=r,l=n;for(i0(e,r,t),a(e[n],i)>0&&i0(e,r,n);s<l;){for(i0(e,s,l),++s,--l;a(e[s],i)<0;)++s;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?i0(e,r,l):(++l,i0(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function i0(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function lTe(e,t,r){if(e=Float64Array.from(QOe(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return YF(e);if(t>=1)return KF(e);var n,a=(n-1)*t,i=Math.floor(a),s=KF(BY(e,i).subarray(0,i+1)),l=YF(e.subarray(i+1));return s+(l-s)*(a-i)}}function cTe(e,t,r=$Y){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return s+(l-s)*(a-i)}}function uTe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function jc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function uf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rO=Symbol("implicit");function gI(){var e=new HF,t=[],r=[],n=rO;function a(i){let s=e.get(i);if(s===void 0){if(n!==rO)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new HF;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return gI(t,r).unknown(n)},jc.apply(a,arguments),a}function Qy(){var e=gI().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,p=m?n:a;i=(p-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*d,s=i*(1-c),l&&(g=Math.round(g),s=Math.round(s));var x=uTe(h).map(function(y){return g+i*y});return r(m?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Qy(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},jc.apply(f(),arguments)}function zY(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zY(t())},e}function X0(){return zY(Qy.apply(null,arguments).paddingInner(1))}function vI(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function qY(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function f1(){}var Zy=.7,nS=1/Zy,tv="\\s*([+-]?\\d+)\\s*",eb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dTe=/^#([0-9a-f]{3,8})$/,fTe=new RegExp(`^rgb\\(${tv},${tv},${tv}\\)$`),hTe=new RegExp(`^rgb\\(${Gu},${Gu},${Gu}\\)$`),mTe=new RegExp(`^rgba\\(${tv},${tv},${tv},${eb}\\)$`),pTe=new RegExp(`^rgba\\(${Gu},${Gu},${Gu},${eb}\\)$`),gTe=new RegExp(`^hsl\\(${eb},${Gu},${Gu}\\)$`),vTe=new RegExp(`^hsla\\(${eb},${Gu},${Gu},${eb}\\)$`),XF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vI(f1,tb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:JF,formatHex:JF,formatHex8:xTe,formatHsl:yTe,formatRgb:QF,toString:QF});function JF(){return this.rgb().formatHex()}function xTe(){return this.rgb().formatHex8()}function yTe(){return UY(this).formatHsl()}function QF(){return this.rgb().formatRgb()}function tb(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dTe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?ZF(t):r===3?new Xs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Uw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Uw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fTe.exec(e))?new Xs(t[1],t[2],t[3],1):(t=hTe.exec(e))?new Xs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mTe.exec(e))?Uw(t[1],t[2],t[3],t[4]):(t=pTe.exec(e))?Uw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gTe.exec(e))?r8(t[1],t[2]/100,t[3]/100,1):(t=vTe.exec(e))?r8(t[1],t[2]/100,t[3]/100,t[4]):XF.hasOwnProperty(e)?ZF(XF[e]):e==="transparent"?new Xs(NaN,NaN,NaN,0):null}function ZF(e){return new Xs(e>>16&255,e>>8&255,e&255,1)}function Uw(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xs(e,t,r,n)}function bTe(e){return e instanceof f1||(e=tb(e)),e?(e=e.rgb(),new Xs(e.r,e.g,e.b,e.opacity)):new Xs}function nO(e,t,r,n){return arguments.length===1?bTe(e):new Xs(e,t,r,n??1)}function Xs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}vI(Xs,nO,qY(f1,{brighter(e){return e=e==null?nS:Math.pow(nS,e),new Xs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zy:Math.pow(Zy,e),new Xs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xs(Hm(this.r),Hm(this.g),Hm(this.b),aS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:e8,formatHex:e8,formatHex8:wTe,formatRgb:t8,toString:t8}));function e8(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}`}function wTe(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}${Im((isNaN(this.opacity)?1:this.opacity)*255)}`}function t8(){const e=aS(this.opacity);return`${e===1?"rgb(":"rgba("}${Hm(this.r)}, ${Hm(this.g)}, ${Hm(this.b)}${e===1?")":`, ${e})`}`}function aS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Im(e){return e=Hm(e),(e<16?"0":"")+e.toString(16)}function r8(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hc(e,t,r,n)}function UY(e){if(e instanceof Hc)return new Hc(e.h,e.s,e.l,e.opacity);if(e instanceof f1||(e=tb(e)),!e)return new Hc;if(e instanceof Hc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,l=i-a,c=(i+a)/2;return l?(t===i?s=(r-n)/l+(r<n)*6:r===i?s=(n-t)/l+2:s=(t-r)/l+4,l/=c<.5?i+a:2-i-a,s*=60):l=c>0&&c<1?0:s,new Hc(s,l,c,e.opacity)}function _Te(e,t,r,n){return arguments.length===1?UY(e):new Hc(e,t,r,n??1)}function Hc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}vI(Hc,_Te,qY(f1,{brighter(e){return e=e==null?nS:Math.pow(nS,e),new Hc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zy:Math.pow(Zy,e),new Hc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Xs(SA(e>=240?e-240:e+120,a,n),SA(e,a,n),SA(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Hc(n8(this.h),Vw(this.s),Vw(this.l),aS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=aS(this.opacity);return`${e===1?"hsl(":"hsla("}${n8(this.h)}, ${Vw(this.s)*100}%, ${Vw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function n8(e){return e=(e||0)%360,e<0?e+360:e}function Vw(e){return Math.max(0,Math.min(1,e||0))}function SA(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const xI=e=>()=>e;function STe(e,t){return function(r){return e+r*t}}function jTe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function NTe(e){return(e=+e)==1?VY:function(t,r){return r-t?jTe(t,r,e):xI(isNaN(t)?r:t)}}function VY(e,t){var r=t-e;return r?STe(e,r):xI(isNaN(e)?t:e)}const a8=function e(t){var r=NTe(t);function n(a,i){var s=r((a=nO(a)).r,(i=nO(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=VY(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function CTe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function ATe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PTe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=_x(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(l){for(s=0;s<n;++s)i[s]=a[s](l);return i}}function ETe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function iS(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function kTe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=_x(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var aO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jA=new RegExp(aO.source,"g");function OTe(e){return function(){return e}}function TTe(e){return function(t){return e(t)+""}}function ITe(e,t){var r=aO.lastIndex=jA.lastIndex=0,n,a,i,s=-1,l=[],c=[];for(e=e+"",t=t+"";(n=aO.exec(e))&&(a=jA.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[s]?l[s]+=i:l[++s]=i),(n=n[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,c.push({i:s,x:iS(n,a)})),r=jA.lastIndex;return r<t.length&&(i=t.slice(r),l[s]?l[s]+=i:l[++s]=i),l.length<2?c[0]?TTe(c[0].x):OTe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function _x(e,t){var r=typeof t,n;return t==null||r==="boolean"?xI(t):(r==="number"?iS:r==="string"?(n=tb(t))?(t=n,a8):ITe:t instanceof tb?a8:t instanceof Date?ETe:ATe(t)?CTe:Array.isArray(t)?PTe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?kTe:iS)(e,t)}function yI(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DTe(e,t){t===void 0&&(t=e,e=_x);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[l](s-l)}}function MTe(e){return function(){return e}}function oS(e){return+e}var i8=[0,1];function Os(e){return e}function iO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:MTe(isNaN(t)?NaN:.5)}function RTe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function LTe(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=iO(a,n),i=r(s,i)):(n=iO(n,a),i=r(i,s)),function(l){return i(n(l))}}function $Te(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=iO(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(l){var c=d1(e,l,1,n)-1;return i[c](a[c](l))}}function h1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function PN(){var e=i8,t=i8,r=_x,n,a,i,s=Os,l,c,u;function d(){var h=Math.min(e.length,t.length);return s!==Os&&(s=RTe(e[0],e[h-1])),l=h>2?$Te:LTe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=l(t,e.map(n),iS)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,oS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=yI,d()},f.clamp=function(h){return arguments.length?(s=h?!0:Os,d()):s!==Os},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function bI(){return PN()(Os,Os)}function FTe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ev(e){return e=sS(Math.abs(e)),e?e[1]:NaN}function BTe(e,t){return function(r,n){for(var a=r.length,i=[],s=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[s=(s+1)%e.length];return i.reverse().join(t)}}function zTe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var qTe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rb(e){if(!(t=qTe.exec(e)))throw new Error("invalid format: "+e);var t;return new wI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}rb.prototype=wI.prototype;function wI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}wI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UTe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var WY;function VTe(e,t){var r=sS(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(WY=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+sS(e,Math.max(0,t+i-1))[0]}function o8(e,t){var r=sS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const s8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:FTe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>o8(e*100,t),r:o8,s:VTe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function l8(e){return e}var c8=Array.prototype.map,u8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WTe(e){var t=e.grouping===void 0||e.thousands===void 0?l8:BTe(c8.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?l8:zTe(c8.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=rb(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,x=f.zero,y=f.width,b=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(b=!0,j="g"):s8[j]||(w===void 0&&(w=12),_=!0,j="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var N=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",P=p==="$"?n:/[%p]/.test(j)?s:"",A=s8[j],k=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M(E){var I=N,O=P,R,B,W;if(j==="c")O=A(E)+O,E="";else{E=+E;var F=E<0||1/E<0;if(E=isNaN(E)?c:A(Math.abs(E),w),_&&(E=UTe(E)),F&&+E==0&&g!=="+"&&(F=!1),I=(F?g==="("?g:l:g==="-"||g==="("?"":g)+I,O=(j==="s"?u8[8+WY/3]:"")+O+(F&&g==="("?")":""),k){for(R=-1,B=E.length;++R<B;)if(W=E.charCodeAt(R),48>W||W>57){O=(W===46?a+E.slice(R+1):E.slice(R))+O,E=E.slice(0,R);break}}}b&&!x&&(E=t(E,1/0));var $=I.length+E.length+O.length,H=$<y?new Array(y-$+1).join(h):"";switch(b&&x&&(E=t(H+E,H.length?y-O.length:1/0),H=""),m){case"<":E=I+E+O+H;break;case"=":E=I+H+E+O;break;case"^":E=H.slice(0,$=H.length>>1)+I+E+O+H.slice($);break;default:E=H+I+E+O;break}return i(E)}return M.toString=function(){return f+""},M}function d(f,h){var m=u((f=rb(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ev(h)/3)))*3,p=Math.pow(10,-g),x=u8[8+g/3];return function(y){return m(p*y)+x}}return{format:u,formatPrefix:d}}var Ww,_I,HY;HTe({thousands:",",grouping:[3],currency:["$",""]});function HTe(e){return Ww=WTe(e),_I=Ww.format,HY=Ww.formatPrefix,Ww}function GTe(e){return Math.max(0,-Ev(Math.abs(e)))}function KTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ev(t)/3)))*3-Ev(Math.abs(e)))}function YTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ev(t)-Ev(e))+1}function GY(e,t,r,n){var a=tO(e,t,r),i;switch(n=rb(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=KTe(a,s))&&(n.precision=i),HY(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=YTe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=GTe(a))&&(n.precision=i-(n.type==="%")*2);break}}return _I(n)}function Uh(e){var t=e.domain;return e.ticks=function(r){var n=t();return Zk(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return GY(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],l=n[i],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=eO(s,l,r),u===c)return n[a]=s,n[i]=l,t(n);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function lS(){var e=bI();return e.copy=function(){return h1(e,lS())},jc.apply(e,arguments),Uh(e)}function KY(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,oS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return KY(e).unknown(t)},e=arguments.length?Array.from(e,oS):[0,1],Uh(r)}function YY(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function d8(e){return Math.log(e)}function f8(e){return Math.exp(e)}function XTe(e){return-Math.log(-e)}function JTe(e){return-Math.exp(-e)}function QTe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZTe(e){return e===10?QTe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function e3e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function h8(e){return(t,r)=>-e(-t,r)}function SI(e){const t=e(d8,f8),r=t.domain;let n=10,a,i;function s(){return a=e3e(n),i=ZTe(n),r()[0]<0?(a=h8(a),i=h8(i),e(XTe,JTe)):e(d8,f8),t}return t.base=function(l){return arguments.length?(n=+l,s()):n},t.domain=function(l){return arguments.length?(r(l),s()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,p;const x=l==null?10:+l;let y=[];if(!(n%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;y.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;y.push(p)}y.length*2<x&&(y=Zk(u,d,x))}else y=Zk(h,m,Math.min(m-h,x)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=rb(c)).precision==null&&(c.trim=!0),c=_I(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(YY(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function XY(){const e=SI(PN()).domain([1,10]);return e.copy=()=>h1(e,XY()).base(e.base()),jc.apply(e,arguments),e}function m8(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function p8(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jI(e){var t=1,r=e(m8(t),p8(t));return r.constant=function(n){return arguments.length?e(m8(t=+n),p8(t)):t},Uh(r)}function JY(){var e=jI(PN());return e.copy=function(){return h1(e,JY()).constant(e.constant())},jc.apply(e,arguments)}function g8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function t3e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function r3e(e){return e<0?-e*e:e*e}function NI(e){var t=e(Os,Os),r=1;function n(){return r===1?e(Os,Os):r===.5?e(t3e,r3e):e(g8(r),g8(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Uh(t)}function CI(){var e=NI(PN());return e.copy=function(){return h1(e,CI()).exponent(e.exponent())},jc.apply(e,arguments),e}function n3e(){return CI.apply(null,arguments).exponent(.5)}function v8(e){return Math.sign(e)*e*e}function a3e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function QY(){var e=bI(),t=[0,1],r=!1,n;function a(i){var s=a3e(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(v8(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,oS)).map(v8)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return QY(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},jc.apply(a,arguments),Uh(a)}function ZY(){var e=[],t=[],r=[],n;function a(){var s=0,l=Math.max(1,t.length);for(r=new Array(l-1);++s<l;)r[s-1]=cTe(e,s/l);return i}function i(s){return s==null||isNaN(s=+s)?n:t[d1(r,s)]}return i.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(hh),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return ZY().domain(e).range(t).unknown(n)},jc.apply(i,arguments)}function eX(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[d1(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return eX().domain([e,t]).range(a).unknown(i)},jc.apply(Uh(s),arguments)}function tX(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[d1(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return tX().domain(e).range(t).unknown(r)},jc.apply(a,arguments)}const NA=new Date,CA=new Date;function _o(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),l=a.ceil(i);return i-s<l-i?s:l},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<s)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<s);return c},a.filter=i=>_o(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!i(s););else for(;--l>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(NA.setTime(+i),CA.setTime(+s),e(NA),e(CA),Math.floor(r(NA,CA))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const cS=_o(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_o(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):cS);cS.range;const Md=1e3,dc=Md*60,Rd=dc*60,Jd=Rd*24,AI=Jd*7,x8=Jd*30,AA=Jd*365,Dm=_o(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Md)},(e,t)=>(t-e)/Md,e=>e.getUTCSeconds());Dm.range;const PI=_o(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Md)},(e,t)=>{e.setTime(+e+t*dc)},(e,t)=>(t-e)/dc,e=>e.getMinutes());PI.range;const EI=_o(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*dc)},(e,t)=>(t-e)/dc,e=>e.getUTCMinutes());EI.range;const kI=_o(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Md-e.getMinutes()*dc)},(e,t)=>{e.setTime(+e+t*Rd)},(e,t)=>(t-e)/Rd,e=>e.getHours());kI.range;const OI=_o(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Rd)},(e,t)=>(t-e)/Rd,e=>e.getUTCHours());OI.range;const m1=_o(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*dc)/Jd,e=>e.getDate()-1);m1.range;const EN=_o(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jd,e=>e.getUTCDate()-1);EN.range;const rX=_o(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jd,e=>Math.floor(e/Jd));rX.range;function Mp(e){return _o(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*dc)/AI)}const kN=Mp(0),uS=Mp(1),i3e=Mp(2),o3e=Mp(3),kv=Mp(4),s3e=Mp(5),l3e=Mp(6);kN.range;uS.range;i3e.range;o3e.range;kv.range;s3e.range;l3e.range;function Rp(e){return _o(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/AI)}const ON=Rp(0),dS=Rp(1),c3e=Rp(2),u3e=Rp(3),Ov=Rp(4),d3e=Rp(5),f3e=Rp(6);ON.range;dS.range;c3e.range;u3e.range;Ov.range;d3e.range;f3e.range;const TI=_o(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());TI.range;const II=_o(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());II.range;const Qd=_o(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_o(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qd.range;const Zd=_o(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_o(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Zd.range;function nX(e,t,r,n,a,i){const s=[[Dm,1,Md],[Dm,5,5*Md],[Dm,15,15*Md],[Dm,30,30*Md],[i,1,dc],[i,5,5*dc],[i,15,15*dc],[i,30,30*dc],[a,1,Rd],[a,3,3*Rd],[a,6,6*Rd],[a,12,12*Rd],[n,1,Jd],[n,2,2*Jd],[r,1,AI],[t,1,x8],[t,3,3*x8],[e,1,AA]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=pI(([,,x])=>x).right(s,h);if(m===s.length)return e.every(tO(u/AA,d/AA,f));if(m===0)return cS.every(Math.max(tO(u,d,f),1));const[g,p]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[h3e,m3e]=nX(Zd,II,ON,rX,OI,EI),[p3e,g3e]=nX(Qd,TI,kN,m1,kI,PI);function PA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function EA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o0(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function v3e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=s0(a),d=l0(a),f=s0(i),h=l0(i),m=s0(s),g=l0(s),p=s0(l),x=l0(l),y=s0(c),b=l0(c),w={a:F,A:$,b:H,B:ce,c:null,d:j8,e:j8,f:B3e,g:X3e,G:Q3e,H:L3e,I:$3e,j:F3e,L:aX,m:z3e,M:q3e,p:oe,q:L,Q:A8,s:P8,S:U3e,u:V3e,U:W3e,V:H3e,w:G3e,W:K3e,x:null,X:null,y:Y3e,Y:J3e,Z:Z3e,"%":C8},_={a:U,A:J,b:V,B:Z,c:null,d:N8,e:N8,f:n4e,g:h4e,G:p4e,H:e4e,I:t4e,j:r4e,L:oX,m:a4e,M:i4e,p:K,q:he,Q:A8,s:P8,S:o4e,u:s4e,U:l4e,V:c4e,w:u4e,W:d4e,x:null,X:null,y:f4e,Y:m4e,Z:g4e,"%":C8},j={a:M,A:E,b:I,B:O,c:R,d:_8,e:_8,f:I3e,g:w8,G:b8,H:S8,I:S8,j:E3e,L:T3e,m:P3e,M:k3e,p:k,q:A3e,Q:M3e,s:R3e,S:O3e,u:_3e,U:S3e,V:j3e,w:w3e,W:N3e,x:B,X:W,y:w8,Y:b8,Z:C3e,"%":D3e};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(te,me){return function(Ee){var Se=[],We=-1,be=0,ne=te.length,Qt,bt,Pt;for(Ee instanceof Date||(Ee=new Date(+Ee));++We<ne;)te.charCodeAt(We)===37&&(Se.push(te.slice(be,We)),(bt=y8[Qt=te.charAt(++We)])!=null?Qt=te.charAt(++We):bt=Qt==="e"?" ":"0",(Pt=me[Qt])&&(Qt=Pt(Ee,bt)),Se.push(Qt),be=We+1);return Se.push(te.slice(be,We)),Se.join("")}}function P(te,me){return function(Ee){var Se=o0(1900,void 0,1),We=A(Se,te,Ee+="",0),be,ne;if(We!=Ee.length)return null;if("Q"in Se)return new Date(Se.Q);if("s"in Se)return new Date(Se.s*1e3+("L"in Se?Se.L:0));if(me&&!("Z"in Se)&&(Se.Z=0),"p"in Se&&(Se.H=Se.H%12+Se.p*12),Se.m===void 0&&(Se.m="q"in Se?Se.q:0),"V"in Se){if(Se.V<1||Se.V>53)return null;"w"in Se||(Se.w=1),"Z"in Se?(be=EA(o0(Se.y,0,1)),ne=be.getUTCDay(),be=ne>4||ne===0?dS.ceil(be):dS(be),be=EN.offset(be,(Se.V-1)*7),Se.y=be.getUTCFullYear(),Se.m=be.getUTCMonth(),Se.d=be.getUTCDate()+(Se.w+6)%7):(be=PA(o0(Se.y,0,1)),ne=be.getDay(),be=ne>4||ne===0?uS.ceil(be):uS(be),be=m1.offset(be,(Se.V-1)*7),Se.y=be.getFullYear(),Se.m=be.getMonth(),Se.d=be.getDate()+(Se.w+6)%7)}else("W"in Se||"U"in Se)&&("w"in Se||(Se.w="u"in Se?Se.u%7:"W"in Se?1:0),ne="Z"in Se?EA(o0(Se.y,0,1)).getUTCDay():PA(o0(Se.y,0,1)).getDay(),Se.m=0,Se.d="W"in Se?(Se.w+6)%7+Se.W*7-(ne+5)%7:Se.w+Se.U*7-(ne+6)%7);return"Z"in Se?(Se.H+=Se.Z/100|0,Se.M+=Se.Z%100,EA(Se)):PA(Se)}}function A(te,me,Ee,Se){for(var We=0,be=me.length,ne=Ee.length,Qt,bt;We<be;){if(Se>=ne)return-1;if(Qt=me.charCodeAt(We++),Qt===37){if(Qt=me.charAt(We++),bt=j[Qt in y8?me.charAt(We++):Qt],!bt||(Se=bt(te,Ee,Se))<0)return-1}else if(Qt!=Ee.charCodeAt(Se++))return-1}return Se}function k(te,me,Ee){var Se=u.exec(me.slice(Ee));return Se?(te.p=d.get(Se[0].toLowerCase()),Ee+Se[0].length):-1}function M(te,me,Ee){var Se=m.exec(me.slice(Ee));return Se?(te.w=g.get(Se[0].toLowerCase()),Ee+Se[0].length):-1}function E(te,me,Ee){var Se=f.exec(me.slice(Ee));return Se?(te.w=h.get(Se[0].toLowerCase()),Ee+Se[0].length):-1}function I(te,me,Ee){var Se=y.exec(me.slice(Ee));return Se?(te.m=b.get(Se[0].toLowerCase()),Ee+Se[0].length):-1}function O(te,me,Ee){var Se=p.exec(me.slice(Ee));return Se?(te.m=x.get(Se[0].toLowerCase()),Ee+Se[0].length):-1}function R(te,me,Ee){return A(te,t,me,Ee)}function B(te,me,Ee){return A(te,r,me,Ee)}function W(te,me,Ee){return A(te,n,me,Ee)}function F(te){return s[te.getDay()]}function $(te){return i[te.getDay()]}function H(te){return c[te.getMonth()]}function ce(te){return l[te.getMonth()]}function oe(te){return a[+(te.getHours()>=12)]}function L(te){return 1+~~(te.getMonth()/3)}function U(te){return s[te.getUTCDay()]}function J(te){return i[te.getUTCDay()]}function V(te){return c[te.getUTCMonth()]}function Z(te){return l[te.getUTCMonth()]}function K(te){return a[+(te.getUTCHours()>=12)]}function he(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var me=N(te+="",w);return me.toString=function(){return te},me},parse:function(te){var me=P(te+="",!1);return me.toString=function(){return te},me},utcFormat:function(te){var me=N(te+="",_);return me.toString=function(){return te},me},utcParse:function(te){var me=P(te+="",!0);return me.toString=function(){return te},me}}}var y8={"-":"",_:" ",0:"0"},Io=/^\s*\d+/,x3e=/^%/,y3e=/[\\^$*+?|[\]().{}]/g;function xa(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function b3e(e){return e.replace(y3e,"\\$&")}function s0(e){return new RegExp("^(?:"+e.map(b3e).join("|")+")","i")}function l0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function w3e(e,t,r){var n=Io.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function _3e(e,t,r){var n=Io.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function S3e(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function j3e(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function N3e(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function b8(e,t,r){var n=Io.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function w8(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function C3e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function A3e(e,t,r){var n=Io.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function P3e(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function _8(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function E3e(e,t,r){var n=Io.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function S8(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function k3e(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function O3e(e,t,r){var n=Io.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function T3e(e,t,r){var n=Io.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function I3e(e,t,r){var n=Io.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function D3e(e,t,r){var n=x3e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function M3e(e,t,r){var n=Io.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function R3e(e,t,r){var n=Io.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function j8(e,t){return xa(e.getDate(),t,2)}function L3e(e,t){return xa(e.getHours(),t,2)}function $3e(e,t){return xa(e.getHours()%12||12,t,2)}function F3e(e,t){return xa(1+m1.count(Qd(e),e),t,3)}function aX(e,t){return xa(e.getMilliseconds(),t,3)}function B3e(e,t){return aX(e,t)+"000"}function z3e(e,t){return xa(e.getMonth()+1,t,2)}function q3e(e,t){return xa(e.getMinutes(),t,2)}function U3e(e,t){return xa(e.getSeconds(),t,2)}function V3e(e){var t=e.getDay();return t===0?7:t}function W3e(e,t){return xa(kN.count(Qd(e)-1,e),t,2)}function iX(e){var t=e.getDay();return t>=4||t===0?kv(e):kv.ceil(e)}function H3e(e,t){return e=iX(e),xa(kv.count(Qd(e),e)+(Qd(e).getDay()===4),t,2)}function G3e(e){return e.getDay()}function K3e(e,t){return xa(uS.count(Qd(e)-1,e),t,2)}function Y3e(e,t){return xa(e.getFullYear()%100,t,2)}function X3e(e,t){return e=iX(e),xa(e.getFullYear()%100,t,2)}function J3e(e,t){return xa(e.getFullYear()%1e4,t,4)}function Q3e(e,t){var r=e.getDay();return e=r>=4||r===0?kv(e):kv.ceil(e),xa(e.getFullYear()%1e4,t,4)}function Z3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xa(t/60|0,"0",2)+xa(t%60,"0",2)}function N8(e,t){return xa(e.getUTCDate(),t,2)}function e4e(e,t){return xa(e.getUTCHours(),t,2)}function t4e(e,t){return xa(e.getUTCHours()%12||12,t,2)}function r4e(e,t){return xa(1+EN.count(Zd(e),e),t,3)}function oX(e,t){return xa(e.getUTCMilliseconds(),t,3)}function n4e(e,t){return oX(e,t)+"000"}function a4e(e,t){return xa(e.getUTCMonth()+1,t,2)}function i4e(e,t){return xa(e.getUTCMinutes(),t,2)}function o4e(e,t){return xa(e.getUTCSeconds(),t,2)}function s4e(e){var t=e.getUTCDay();return t===0?7:t}function l4e(e,t){return xa(ON.count(Zd(e)-1,e),t,2)}function sX(e){var t=e.getUTCDay();return t>=4||t===0?Ov(e):Ov.ceil(e)}function c4e(e,t){return e=sX(e),xa(Ov.count(Zd(e),e)+(Zd(e).getUTCDay()===4),t,2)}function u4e(e){return e.getUTCDay()}function d4e(e,t){return xa(dS.count(Zd(e)-1,e),t,2)}function f4e(e,t){return xa(e.getUTCFullYear()%100,t,2)}function h4e(e,t){return e=sX(e),xa(e.getUTCFullYear()%100,t,2)}function m4e(e,t){return xa(e.getUTCFullYear()%1e4,t,4)}function p4e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ov(e):Ov.ceil(e),xa(e.getUTCFullYear()%1e4,t,4)}function g4e(){return"+0000"}function C8(){return"%"}function A8(e){return+e}function P8(e){return Math.floor(+e/1e3)}var ag,lX,cX;v4e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function v4e(e){return ag=v3e(e),lX=ag.format,ag.parse,cX=ag.utcFormat,ag.utcParse,ag}function x4e(e){return new Date(e)}function y4e(e){return e instanceof Date?+e:+new Date(+e)}function DI(e,t,r,n,a,i,s,l,c,u){var d=bI(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?g:s(N)<N?p:i(N)<N?x:n(N)<N?a(N)<N?y:b:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,y4e)):h().map(x4e)},d.ticks=function(N){var P=h();return e(P[0],P[P.length-1],N??10)},d.tickFormat=function(N,P){return P==null?j:u(P)},d.nice=function(N){var P=h();return(!N||typeof N.range!="function")&&(N=t(P[0],P[P.length-1],N??10)),N?h(YY(P,N)):d},d.copy=function(){return h1(d,DI(e,t,r,n,a,i,s,l,c,u))},d}function b4e(){return jc.apply(DI(p3e,g3e,Qd,TI,kN,m1,kI,PI,Dm,lX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function w4e(){return jc.apply(DI(h3e,m3e,Zd,II,ON,EN,OI,EI,Dm,cX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function TN(){var e=0,t=1,r,n,a,i,s=Os,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,s=f(m,g),u):[s(0),s(1)]}}return u.range=d(_x),u.rangeRound=d(yI),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Vh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uX(){var e=Uh(TN()(Os));return e.copy=function(){return Vh(e,uX())},uf.apply(e,arguments)}function dX(){var e=SI(TN()).domain([1,10]);return e.copy=function(){return Vh(e,dX()).base(e.base())},uf.apply(e,arguments)}function fX(){var e=jI(TN());return e.copy=function(){return Vh(e,fX()).constant(e.constant())},uf.apply(e,arguments)}function MI(){var e=NI(TN());return e.copy=function(){return Vh(e,MI()).exponent(e.exponent())},uf.apply(e,arguments)}function _4e(){return MI.apply(null,arguments).exponent(.5)}function hX(){var e=[],t=Os;function r(n){if(n!=null&&!isNaN(n=+n))return t((d1(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(hh),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>lTe(e,i/n))},r.copy=function(){return hX(t).domain(e)},uf.apply(r,arguments)}function IN(){var e=0,t=.5,r=1,n=1,a,i,s,l,c,u=Os,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),i=d(t=+t),s=d(r=+r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(x){var y,b,w;return arguments.length?([y,b,w]=x,u=DTe(p,[y,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(_x),m.rangeRound=g(yI),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,a=p(e),i=p(t),s=p(r),l=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m}}function mX(){var e=Uh(IN()(Os));return e.copy=function(){return Vh(e,mX())},uf.apply(e,arguments)}function pX(){var e=SI(IN()).domain([.1,1,10]);return e.copy=function(){return Vh(e,pX()).base(e.base())},uf.apply(e,arguments)}function gX(){var e=jI(IN());return e.copy=function(){return Vh(e,gX()).constant(e.constant())},uf.apply(e,arguments)}function RI(){var e=NI(IN());return e.copy=function(){return Vh(e,RI()).exponent(e.exponent())},uf.apply(e,arguments)}function S4e(){return RI.apply(null,arguments).exponent(.5)}const E8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qy,scaleDiverging:mX,scaleDivergingLog:pX,scaleDivergingPow:RI,scaleDivergingSqrt:S4e,scaleDivergingSymlog:gX,scaleIdentity:KY,scaleImplicit:rO,scaleLinear:lS,scaleLog:XY,scaleOrdinal:gI,scalePoint:X0,scalePow:CI,scaleQuantile:ZY,scaleQuantize:eX,scaleRadial:QY,scaleSequential:uX,scaleSequentialLog:dX,scaleSequentialPow:MI,scaleSequentialQuantile:hX,scaleSequentialSqrt:_4e,scaleSequentialSymlog:fX,scaleSqrt:n3e,scaleSymlog:JY,scaleThreshold:tX,scaleTime:b4e,scaleUtc:w4e,tickFormat:GY},Symbol.toStringTag,{value:"Module"}));var j4e=hx;function N4e(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],s=t(i);if(s!=null&&(l===void 0?s===s&&!j4e(s):r(s,l)))var l=s,c=i}return c}var DN=N4e;function C4e(e,t){return e>t}var vX=C4e,A4e=DN,P4e=vX,E4e=wx;function k4e(e){return e&&e.length?A4e(e,E4e,P4e):void 0}var O4e=k4e;const Xf=fa(O4e);function T4e(e,t){return e<t}var xX=T4e,I4e=DN,D4e=xX,M4e=wx;function R4e(e){return e&&e.length?I4e(e,M4e,D4e):void 0}var L4e=R4e;const MN=fa(L4e);var $4e=X4,F4e=od,B4e=CY,z4e=il;function q4e(e,t){var r=z4e(e)?$4e:B4e;return r(e,F4e(t))}var U4e=q4e,V4e=jY,W4e=U4e;function H4e(e,t){return V4e(W4e(e,t),1)}var G4e=H4e;const K4e=fa(G4e);var Y4e=dI;function X4e(e,t){return Y4e(e,t)}var J4e=X4e;const mp=fa(J4e);var Sx=1e9,Q4e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$I,gi=!0,yc="[DecimalError] ",Gm=yc+"Invalid argument: ",LI=yc+"Exponent out of range: ",jx=Math.floor,xm=Math.pow,Z4e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cl,Ao=1e7,si=7,yX=9007199254740991,fS=jx(yX/si),Lr={};Lr.absoluteValue=Lr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Lr.comparedTo=Lr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Lr.decimalPlaces=Lr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*si;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Lr.dividedBy=Lr.div=function(e){return Ud(this,new this.constructor(e))};Lr.dividedToIntegerBy=Lr.idiv=function(e){var t=this,r=t.constructor;return qa(Ud(t,new r(e),0,1),r.precision)};Lr.equals=Lr.eq=function(e){return!this.cmp(e)};Lr.exponent=function(){return to(this)};Lr.greaterThan=Lr.gt=function(e){return this.cmp(e)>0};Lr.greaterThanOrEqualTo=Lr.gte=function(e){return this.cmp(e)>=0};Lr.isInteger=Lr.isint=function(){return this.e>this.d.length-2};Lr.isNegative=Lr.isneg=function(){return this.s<0};Lr.isPositive=Lr.ispos=function(){return this.s>0};Lr.isZero=function(){return this.s===0};Lr.lessThan=Lr.lt=function(e){return this.cmp(e)<0};Lr.lessThanOrEqualTo=Lr.lte=function(e){return this.cmp(e)<1};Lr.logarithm=Lr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Cl))throw Error(yc+"NaN");if(r.s<1)throw Error(yc+(r.s?"NaN":"-Infinity"));return r.eq(Cl)?new n(0):(gi=!1,t=Ud(nb(r,i),nb(e,i),i),gi=!0,qa(t,a))};Lr.minus=Lr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_X(t,e):bX(t,(e.s=-e.s,e))};Lr.modulo=Lr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(yc+"NaN");return r.s?(gi=!1,t=Ud(r,e,0,1).times(e),gi=!0,r.minus(t)):qa(new n(r),a)};Lr.naturalExponential=Lr.exp=function(){return wX(this)};Lr.naturalLogarithm=Lr.ln=function(){return nb(this)};Lr.negated=Lr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Lr.plus=Lr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bX(t,e):_X(t,(e.s=-e.s,e))};Lr.precision=Lr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Gm+e);if(t=to(a)+1,n=a.d.length-1,r=n*si+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Lr.squareRoot=Lr.sqrt=function(){var e,t,r,n,a,i,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(yc+"NaN")}for(e=to(l),gi=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Lu(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=jx((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(Ud(l,i,s+2)).times(.5),Lu(i.d).slice(0,s)===(t=Lu(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(qa(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;s+=4}return gi=!0,qa(n,r)};Lr.times=Lr.mul=function(e){var t,r,n,a,i,s,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%Ao|0,t=l/Ao|0;i[a]=(i[a]+t)%Ao|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,gi?qa(e,f.precision):e};Lr.toDecimalPlaces=Lr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(td(e,0,Sx),t===void 0?t=n.rounding:td(t,0,8),qa(r,e+to(r)+1,t))};Lr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=pp(n,!0):(td(e,0,Sx),t===void 0?t=a.rounding:td(t,0,8),n=qa(new a(n),e+1,t),r=pp(n,!0,e+1)),r};Lr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?pp(a):(td(e,0,Sx),t===void 0?t=i.rounding:td(t,0,8),n=qa(new i(a),e+to(a)+1,t),r=pp(n.abs(),!1,e+to(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Lr.toInteger=Lr.toint=function(){var e=this,t=e.constructor;return qa(new t(e),to(e)+1,t.rounding)};Lr.toNumber=function(){return+this};Lr.toPower=Lr.pow=function(e){var t,r,n,a,i,s,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Cl);if(l=new c(l),!l.s){if(e.s<1)throw Error(yc+"Infinity");return l}if(l.eq(Cl))return l;if(n=c.precision,e.eq(Cl))return qa(l,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=l.s,s){if((r=d<0?-d:d)<=yX){for(a=new c(Cl),t=Math.ceil(n/si+4),gi=!1;r%2&&(a=a.times(l),O8(a.d,t)),r=jx(r/2),r!==0;)l=l.times(l),O8(l.d,t);return gi=!0,e.s<0?new c(Cl).div(a):qa(a,n)}}else if(i<0)throw Error(yc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,gi=!1,a=e.times(nb(l,n+u)),gi=!0,a=wX(a),a.s=i,a};Lr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=to(a),n=pp(a,r<=i.toExpNeg||r>=i.toExpPos)):(td(e,1,Sx),t===void 0?t=i.rounding:td(t,0,8),a=qa(new i(a),e,t),r=to(a),n=pp(a,e<=r||r<=i.toExpNeg,e)),n};Lr.toSignificantDigits=Lr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(td(e,1,Sx),t===void 0?t=n.rounding:td(t,0,8)),qa(new n(r),e,t)};Lr.toString=Lr.valueOf=Lr.val=Lr.toJSON=Lr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=to(e),r=e.constructor;return pp(e,t<=r.toExpNeg||t>=r.toExpPos)};function bX(e,t){var r,n,a,i,s,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),gi?qa(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=s,l=c.length),s=Math.ceil(f/si),l=s>l?s+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Ao|0,c[i]%=Ao;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,gi?qa(t,f):t}function td(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Gm+e)}function Lu(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=si-n.length,r&&(i+=Bf(r)),i+=n;s=e[t],n=s+"",r=si-n.length,r&&(i+=Bf(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Ud=function(){function e(n,a){var i,s=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+s,n[l]=i%Ao|0,s=i/Ao|0;return s&&n.unshift(s),n}function t(n,a,i,s){var l,c;if(i!=s)c=i>s?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Ao+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var l,c,u,d,f,h,m,g,p,x,y,b,w,_,j,N,P,A,k=n.constructor,M=n.s==a.s?1:-1,E=n.d,I=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(yc+"Division by zero");for(c=n.e-a.e,P=I.length,j=E.length,m=new k(M),g=m.d=[],u=0;I[u]==(E[u]||0);)++u;if(I[u]>(E[u]||0)&&--c,i==null?b=i=k.precision:s?b=i+(to(n)-to(a))+1:b=i,b<0)return new k(0);if(b=b/si+2|0,u=0,P==1)for(d=0,I=I[0],b++;(u<j||d)&&b--;u++)w=d*Ao+(E[u]||0),g[u]=w/I|0,d=w%I|0;else{for(d=Ao/(I[0]+1)|0,d>1&&(I=e(I,d),E=e(E,d),P=I.length,j=E.length),_=P,p=E.slice(0,P),x=p.length;x<P;)p[x++]=0;A=I.slice(),A.unshift(0),N=I[0],I[1]>=Ao/2&&++N;do d=0,l=t(I,p,P,x),l<0?(y=p[0],P!=x&&(y=y*Ao+(p[1]||0)),d=y/N|0,d>1?(d>=Ao&&(d=Ao-1),f=e(I,d),h=f.length,x=p.length,l=t(f,p,h,x),l==1&&(d--,r(f,P<h?A:I,h))):(d==0&&(l=d=1),f=I.slice()),h=f.length,h<x&&f.unshift(0),r(p,f,x),l==-1&&(x=p.length,l=t(I,p,P,x),l<1&&(d++,r(p,P<x?A:I,x))),x=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[x++]=E[_]||0:(p=[E[_]],x=1);while((_++<j||p[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,qa(m,s?i+to(m)+1:i)}}();function wX(e,t){var r,n,a,i,s,l,c=0,u=0,d=e.constructor,f=d.precision;if(to(e)>16)throw Error(LI+to(e));if(!e.s)return new d(Cl);for(t==null?(gi=!1,l=f):l=t,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(xm(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Cl),d.precision=l;;){if(a=qa(a.times(e),l),r=r.times(++c),s=i.plus(Ud(a,r,l)),Lu(s.d).slice(0,l)===Lu(i.d).slice(0,l)){for(;u--;)i=qa(i.times(i),l);return d.precision=f,t==null?(gi=!0,qa(i,f)):i}i=s}}function to(e){for(var t=e.e*si,r=e.d[0];r>=10;r/=10)t++;return t}function kA(e,t,r){if(t>e.LN10.sd())throw gi=!0,r&&(e.precision=r),Error(yc+"LN10 precision limit exceeded");return qa(new e(e.LN10),t)}function Bf(e){for(var t="";e--;)t+="0";return t}function nb(e,t){var r,n,a,i,s,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,x=p.precision;if(m.s<1)throw Error(yc+(m.s?"NaN":"-Infinity"));if(m.eq(Cl))return new p(0);if(t==null?(gi=!1,u=x):u=t,m.eq(10))return t==null&&(gi=!0),kA(p,u);if(u+=h,p.precision=u,r=Lu(g),n=r.charAt(0),i=to(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Lu(m.d),n=r.charAt(0),f++;i=to(m),n>1?(m=new p("0."+r),i++):m=new p(n+"."+r.slice(1))}else return c=kA(p,u+2,x).times(i+""),m=nb(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=x,t==null?(gi=!0,qa(m,x)):m;for(l=s=m=Ud(m.minus(Cl),m.plus(Cl),u),d=qa(m.times(m),u),a=3;;){if(s=qa(s.times(d),u),c=l.plus(Ud(s,new p(a),u)),Lu(c.d).slice(0,u)===Lu(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(kA(p,u+2,x).times(i+""))),l=Ud(l,new p(f),u),p.precision=x,t==null?(gi=!0,qa(l,x)):l;l=c,a+=2}}function k8(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=jx(r/si),e.d=[],n=(r+1)%si,r<0&&(n+=si),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=si;n<a;)e.d.push(+t.slice(n,n+=si));t=t.slice(n),n=si-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),gi&&(e.e>fS||e.e<-fS))throw Error(LI+r)}else e.s=0,e.e=0,e.d=[0];return e}function qa(e,t,r){var n,a,i,s,l,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=si,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/si),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=si,a=n-si+s}if(r!==void 0&&(i=xm(10,s-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/xm(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=to(e),f.length=1,t=t-i-1,f[0]=xm(10,(si-t%si)%si),e.e=jx(-t/si)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=xm(10,si-n),f[d]=a>0?(u/xm(10,s-a)%xm(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Ao&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Ao)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(gi&&(e.e>fS||e.e<-fS))throw Error(LI+to(e));return e}function _X(e,t){var r,n,a,i,s,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),gi?qa(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/si),l)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Ao-1;--c[i],c[a]+=Ao}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,gi?qa(t,m):t):new h(0)}function pp(e,t,r){var n,a=to(e),i=Lu(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Bf(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Bf(-a-1)+i,r&&(n=r-s)>0&&(i+=Bf(n))):a>=s?(i+=Bf(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Bf(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Bf(n))),e.s<0?"-"+i:i}function O8(e,t){if(e.length>t)return e.length=t,!0}function SX(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Gm+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return k8(s,i.toString())}else if(typeof i!="string")throw Error(Gm+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,Z4e.test(i))k8(s,i);else throw Error(Gm+i)}if(a.prototype=Lr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=SX,a.config=a.set=eIe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function eIe(e){if(!e||typeof e!="object")throw Error(yc+"Object expected");var t,r,n,a=["precision",1,Sx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(jx(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Gm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Gm+r+": "+n);return this}var $I=SX(Q4e);Cl=new $I(1);const Ma=$I;function tIe(e){return iIe(e)||aIe(e)||nIe(e)||rIe()}function rIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nIe(e,t){if(e){if(typeof e=="string")return oO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oO(e,t)}}function aIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function iIe(e){if(Array.isArray(e))return oO(e)}function oO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oIe=function(t){return t},jX={"@@functional/placeholder":!0},NX=function(t){return t===jX},T8=function(t){return function r(){return arguments.length===0||arguments.length===1&&NX(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},sIe=function e(t,r){return t===1?r:T8(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(l){return l!==jX}).length;return s>=t?r.apply(void 0,a):e(t-s,T8(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return NX(f)?c.shift():f});return r.apply(void 0,tIe(d).concat(c))}))})},RN=function(t){return sIe(t.length,t)},sO=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},lIe=RN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),cIe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return oIe;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},lO=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},CX=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function uIe(e){var t;return e===0?t=1:t=Math.floor(new Ma(e).abs().log(10).toNumber())+1,t}function dIe(e,t,r){for(var n=new Ma(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var fIe=RN(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),hIe=RN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),mIe=RN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const LN={rangeStep:dIe,getDigitCount:uIe,interpolateNumber:fIe,uninterpolateNumber:hIe,uninterpolateTruncation:mIe};function cO(e){return vIe(e)||gIe(e)||AX(e)||pIe()}function pIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vIe(e){if(Array.isArray(e))return uO(e)}function ab(e,t){return bIe(e)||yIe(e,t)||AX(e,t)||xIe()}function xIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AX(e,t){if(e){if(typeof e=="string")return uO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uO(e,t)}}function uO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yIe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function bIe(e){if(Array.isArray(e))return e}function PX(e){var t=ab(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function EX(e,t,r){if(e.lte(0))return new Ma(0);var n=LN.getDigitCount(e.toNumber()),a=new Ma(10).pow(n),i=e.div(a),s=n!==1?.05:.1,l=new Ma(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=l.mul(a);return t?c:new Ma(Math.ceil(c))}function wIe(e,t,r){var n=1,a=new Ma(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ma(10).pow(LN.getDigitCount(e)-1),a=new Ma(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ma(Math.floor(e)))}else e===0?a=new Ma(Math.floor((t-1)/2)):r||(a=new Ma(Math.floor(e)));var s=Math.floor((t-1)/2),l=cIe(lIe(function(c){return a.add(new Ma(c-s).mul(n)).toNumber()}),sO);return l(0,t)}function kX(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ma(0),tickMin:new Ma(0),tickMax:new Ma(0)};var i=EX(new Ma(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new Ma(0):(s=new Ma(e).add(t).div(2),s=s.sub(new Ma(s).mod(i)));var l=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new Ma(t).sub(s).div(i).toNumber()),u=l+c+1;return u>r?kX(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:s.sub(new Ma(l).mul(i)),tickMax:s.add(new Ma(c).mul(i))})}function _Ie(e){var t=ab(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),l=PX([r,n]),c=ab(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(cO(sO(0,a-1).map(function(){return 1/0}))):[].concat(cO(sO(0,a-1).map(function(){return-1/0})),[d]);return r>n?lO(f):f}if(u===d)return wIe(u,a,i);var h=kX(u,d,s,i),m=h.step,g=h.tickMin,p=h.tickMax,x=LN.rangeStep(g,p.add(new Ma(.1).mul(m)),m);return r>n?lO(x):x}function SIe(e,t){var r=ab(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=PX([n,a]),l=ab(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=EX(new Ma(u).sub(c).div(d-1),i,0),h=[].concat(cO(LN.rangeStep(new Ma(c),new Ma(u).sub(new Ma(.99).mul(f)),f)),[u]);return n>a?lO(h):h}var jIe=CX(_Ie),NIe=CX(SIe),CIe=!0,OA="Invariant failed";function Ph(e,t){if(!e){if(CIe)throw new Error(OA);var r=typeof t=="function"?t():t,n=r?"".concat(OA,": ").concat(r):OA;throw new Error(n)}}var AIe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hS.apply(this,arguments)}function PIe(e,t){return TIe(e)||OIe(e,t)||kIe(e,t)||EIe()}function EIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kIe(e,t){if(e){if(typeof e=="string")return I8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I8(e,t)}}function I8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function TIe(e){if(Array.isArray(e))return e}function IIe(e,t){if(e==null)return{};var r=DIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IX(n.key),n)}}function RIe(e,t,r){return t&&D8(e.prototype,t),r&&D8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function LIe(e,t,r){return t=mS(t),$Ie(e,OX()?Reflect.construct(t,r||[],mS(e).constructor):t.apply(e,r))}function $Ie(e,t){if(t&&(Tv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FIe(e)}function FIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OX=function(){return!!e})()}function mS(e){return mS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mS(e)}function BIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}function dO(e,t){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dO(e,t)}function TX(e,t,r){return t=IX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){var t=zIe(e,"string");return Tv(t)=="symbol"?t:t+""}function zIe(e,t){if(Tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p1=function(e){function t(){return MIe(this,t),LIe(this,t,arguments)}return BIe(t,e),RIe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=IIe(n,AIe),m=tn(h,!1);this.props.direction==="x"&&d.type!=="number"&&Ph(!1);var g=c.map(function(p){var x=u(p,l),y=x.x,b=x.y,w=x.value,_=x.errorVal;if(!_)return null;var j=[],N,P;if(Array.isArray(_)){var A=PIe(_,2);N=A[0],P=A[1]}else N=P=_;if(i==="vertical"){var k=d.scale,M=b+a,E=M+s,I=M-s,O=k(w-N),R=k(w+P);j.push({x1:R,y1:E,x2:R,y2:I}),j.push({x1:O,y1:M,x2:R,y2:M}),j.push({x1:O,y1:E,x2:O,y2:I})}else if(i==="horizontal"){var B=f.scale,W=y+a,F=W-s,$=W+s,H=B(w-N),ce=B(w+P);j.push({x1:F,y1:ce,x2:$,y2:ce}),j.push({x1:W,y1:H,x2:W,y2:ce}),j.push({x1:F,y1:H,x2:$,y2:H})}return se.createElement(Zn,hS({className:"recharts-errorBar",key:"bar-".concat(j.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},m),j.map(function(oe){return se.createElement("line",hS({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return se.createElement(Zn,{className:"recharts-errorBars"},g)}}])}(se.Component);TX(p1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});TX(p1,"displayName","ErrorBar");function ib(e){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ib(e)}function M8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function am(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M8(Object(r),!0).forEach(function(n){qIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qIe(e,t,r){return t=UIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UIe(e){var t=VIe(e,"string");return ib(t)=="symbol"?t:t+""}function VIe(e,t){if(ib(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ib(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DX=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=_l(r,Wm);if(!s)return null;var l=Wm.defaultProps,c=l!==void 0?am(am({},l),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:s.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?am(am({},h),f.props):{},g=m.dataKey,p=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:FI(f),value:p||g,payload:m}}),am(am(am({},c),Wm.getWithHeight(s,a)),{},{payload:u,item:s})};function ob(e){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ob(e)}function R8(e){return KIe(e)||GIe(e)||HIe(e)||WIe()}function WIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HIe(e,t){if(e){if(typeof e=="string")return fO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fO(e,t)}}function GIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KIe(e){if(Array.isArray(e))return fO(e)}function fO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L8(Object(r),!0).forEach(function(n){rv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rv(e,t,r){return t=YIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YIe(e){var t=XIe(e,"string");return ob(t)=="symbol"?t:t+""}function XIe(e,t){if(ob(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ob(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vi(e,t,r){return Cn(e)||Cn(t)?r:bo(t)?Il(e,t,r):vn(t)?t(e):r}function J0(e,t,r,n){var a=K4e(e,function(l){return Vi(l,t)});if(r==="number"){var i=a.filter(function(l){return ir(l)||parseFloat(l)});return i.length?[MN(i),Xf(i)]:[1/0,-1/0]}var s=n?a.filter(function(l){return!Cn(l)}):a;return s.map(function(l){return bo(l)||l instanceof Date?l:""})}var JIe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Es(f-d)!==Es(h-f)){var g=[];if(Es(h-f)===Es(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var x=h+c[1]-c[0];g[0]=Math.min(f,(x+f)/2),g[1]=Math.max(f,(x+f)/2)}var y=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){s=a[u].index;break}}else{var b=Math.min(d,h),w=Math.max(d,h);if(t>(b+f)/2&&t<=(w+f)/2){s=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){s=n[_].index;break}return s},FI=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ii(Ii({},t.type.defaultProps),t.props):t.props,s=i.stroke,l=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},QIe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,x=g.cateAxisId,y=p.filter(function(P){return qd(P.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Ii(Ii({},b),y[0].props):y[0].props,_=w.barSize,j=w[x];s[j]||(s[j]=[]);var N=Cn(_)?r:_;s[j].push({item:y[0],stackList:y.slice(1),barSize:Cn(N)?void 0:ks(N,n,0)})}}return s},ZIe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,l=t.maxBarSize,c=s.length;if(c<1)return null;var u=ks(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,m=a/c,g=s.reduce(function(_,j){return _+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,x={offset:p-u,size:0};d=s.reduce(function(_,j){var N={item:j.item,position:{offset:x.offset+x.size+u,size:h?m:j.barSize}},P=[].concat(R8(_),[N]);return x=P[P.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){P.push({item:A,position:x})}),P},f)}else{var y=ks(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var b=(a-2*y-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;d=s.reduce(function(_,j,N){var P=[].concat(R8(_),[{item:j.item,position:{offset:y+(b+u)*N+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){P.push({item:A,position:P[P.length-1].position})}),P},f)}return d},eDe=function(t,r,n,a){var i=n.children,s=n.width,l=n.margin,c=s-(l.left||0)-(l.right||0),u=DX({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&ir(t[m]))return Ii(Ii({},t),{},rv({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&ir(t[g]))return Ii(Ii({},t),{},rv({},g,t[g]+(h||0)))}return t},tDe=function(t,r,n){return Cn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},MX=function(t,r,n,a,i){var s=r.props.children,l=Dl(s,p1).filter(function(u){return tDe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Vi(d,n);if(Cn(f))return u;var h=Array.isArray(f)?[MN(f),Xf(f)]:[f,f],m=c.reduce(function(g,p){var x=Vi(d,p,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},rDe=function(t,r,n,a,i){var s=r.map(function(l){return MX(t,l,n,i,a)}).filter(function(l){return!Cn(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},RX=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&MX(t,c,u,a)||J0(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},LX=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},$X=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||l.push(r),s||l.push(n),l},Ld=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Es(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!xx(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},TA=new WeakMap,Hw=function(t,r){if(typeof r!="function")return t;TA.has(t)||TA.set(t,new WeakMap);var n=TA.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},FX=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,l=t.axisType;if(a==="auto")return s==="radial"&&l==="radiusAxis"?{scale:Qy(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:lS(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:X0(),realScaleType:"point"}:i==="category"?{scale:Qy(),realScaleType:"band"}:{scale:lS(),realScaleType:"linear"};if(dp(a)){var c="scale".concat(wN(a));return{scale:(E8[c]||X0)(),realScaleType:E8[c]?c:"point"}}return vn(a)?{scale:a}:{scale:X0(),realScaleType:"point"}},$8=1e-4,BX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-$8,s=Math.max(a[0],a[1])+$8,l=t(r[0]),c=t(r[n-1]);(l<i||l>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},nDe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},aDe=function(t,r){if(!r||r.length!==2||!ir(r[0])||!ir(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ir(t[0])||t[0]<n)&&(i[0]=n),(!ir(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},iDe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,l=0;l<r;++l){var c=xx(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1])}},oDe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var l=xx(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},sDe={sign:iDe,expand:ESe,none:jv,silhouette:kSe,wiggle:OSe,positive:oDe},lDe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=sDe[n],s=PSe().keys(a).value(function(l,c){return+Vi(l,c,0)}).order(Lk).offset(i);return s(t)},cDe=function(t,r,n,a,i,s){if(!t)return null;var l=s?r.reverse():r,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Ii(Ii({},h.type.defaultProps),h.props):h.props,p=g.stackId,x=g.hide;if(x)return f;var y=g[n],b=f[y]||{hasStack:!1,stackGroups:{}};if(bo(p)){var w=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[p]=w}else b.stackGroups[Dp("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Ii(Ii({},f),{},rv({},y,b))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,x){var y=m.stackGroups[x];return Ii(Ii({},p),{},rv({},x,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:lDe(t,y.items,i)}))},g)}return Ii(Ii({},f),{},rv({},h,m))},d)},zX=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=jIe(u,i,l);return t.domain([MN(d),Xf(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=NIe(f,i,l);return{niceTicks:h}}return null};function pS(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Cn(a[t.dataKey])){var l=z_(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Vi(a,Cn(s)?t.dataKey:s);return Cn(c)?null:t.scale(c)}var F8=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Vi(s,r.dataKey,r.domain[l]);return Cn(c)?null:r.scale(c)-i/2+a},uDe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},dDe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ii(Ii({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(bo(i)){var s=r[i];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},fDe=function(t){return t.reduce(function(r,n){return[MN(n.concat([r[0]]).filter(ir)),Xf(n.concat([r[1]]).filter(ir))]},[1/0,-1/0])},qX=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],l=s.stackedData,c=l.reduce(function(u,d){var f=fDe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},B8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,z8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hO=function(t,r,n){if(vn(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(ir(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(B8.test(t[0])){var i=+B8.exec(t[0])[1];a[0]=r[0]-i}else vn(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ir(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(z8.test(t[1])){var s=+z8.exec(t[1])[1];a[1]=r[1]+s}else vn(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},gS=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=hI(r,function(f){return f.coordinate}),s=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},q8=function(t,r,n){return!t||!t.length||mp(t,Il(n,"type.defaultProps.domain"))?r:t},UX=function(t,r){var n=t.type.defaultProps?Ii(Ii({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Ii(Ii({},tn(t,!1)),{},{dataKey:a,unit:s,formatter:l,name:i||a,color:FI(t),value:Vi(r,a),type:c,payload:r,chartType:u,hide:d})};function sb(e){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sb(e)}function U8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U8(Object(r),!0).forEach(function(n){VX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VX(e,t,r){return t=hDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hDe(e){var t=mDe(e,"string");return sb(t)=="symbol"?t:t+""}function mDe(e,t){if(sb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pDe(e,t){return yDe(e)||xDe(e,t)||vDe(e,t)||gDe()}function gDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vDe(e,t){if(e){if(typeof e=="string")return V8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V8(e,t)}}function V8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function yDe(e){if(Array.isArray(e))return e}var vS=Math.PI/180,bDe=function(t){return t*180/Math.PI},Ja=function(t,r,n,a){return{x:t+Math.cos(-vS*a)*n,y:r+Math.sin(-vS*a)*n}},WX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wDe=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=ks(t.cx,s,s/2),f=ks(t.cy,l,l/2),h=WX(s,l,n),m=ks(t.innerRadius,h,0),g=ks(t.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(x,y){var b=r[y],w=b.domain,_=b.reversed,j;if(Cn(b.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,g]),_&&(j=[j[1],j[0]]);else{j=b.range;var N=j,P=pDe(N,2);c=P[0],u=P[1]}var A=FX(b,i),k=A.realScaleType,M=A.scale;M.domain(w).range(j),BX(M);var E=zX(M,Cd(Cd({},b),{},{realScaleType:k})),I=Cd(Cd(Cd({},b),E),{},{range:j,radius:g,realScaleType:k,scale:M,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return Cd(Cd({},x),{},VX({},y,I))},{})},_De=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},SDe=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,l=_De({x:n,y:a},{x:i,y:s});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:l,angle:bDe(u),angleInRadian:u}},jDe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},NDe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),l=Math.min(i,s);return t+l*360},W8=function(t,r){var n=t.x,a=t.y,i=SDe({x:n,y:a},r),s=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=jDe(r),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?Cd(Cd({},r),{},{radius:s,angle:NDe(m,r)}):null},HX=function(t){return!v.isValidElement(t)&&!vn(t)&&typeof t!="boolean"?t.className:""};function lb(e){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lb(e)}var CDe=["offset"];function ADe(e){return ODe(e)||kDe(e)||EDe(e)||PDe()}function PDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EDe(e,t){if(e){if(typeof e=="string")return mO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mO(e,t)}}function kDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ODe(e){if(Array.isArray(e))return mO(e)}function mO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TDe(e,t){if(e==null)return{};var r=IDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function H8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H8(Object(r),!0).forEach(function(n){DDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DDe(e,t,r){return t=MDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MDe(e){var t=RDe(e,"string");return lb(t)=="symbol"?t:t+""}function RDe(e,t){if(lb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cb(){return cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cb.apply(this,arguments)}var LDe=function(t){var r=t.value,n=t.formatter,a=Cn(t.children)?r:t.children;return vn(n)?n(a):a},$De=function(t,r){var n=Es(r-t),a=Math.min(Math.abs(r-t),360);return n*a},FDe=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,x=(f+h)/2,y=$De(m,g),b=y>=0?1:-1,w,_;a==="insideStart"?(w=m+b*s,_=p):a==="insideEnd"?(w=g-b*s,_=!p):a==="end"&&(w=g+b*s,_=p),_=y<=0?_:!_;var j=Ja(u,d,x,w),N=Ja(u,d,x,w+(_?1:-1)*359),P="M".concat(j.x,",").concat(j.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(N.x,",").concat(N.y),A=Cn(t.id)?Dp("recharts-radial-line-"):t.id;return se.createElement("text",cb({},n,{dominantBaseline:"central",className:An("recharts-radial-bar-label",l)}),se.createElement("defs",null,se.createElement("path",{id:A,d:P})),se.createElement("textPath",{xlinkHref:"#".concat(A)},r))},BDe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=Ja(s,l,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Ja(s,l,x,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},zDe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,l=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,x=p*a,y=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return uo(uo({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return uo(uo({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return uo(uo({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var N={x:l+u+x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return uo(uo({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return i==="insideLeft"?uo({x:l+x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},P):i==="insideRight"?uo({x:l+u-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},P):i==="insideTop"?uo({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},P):i==="insideBottom"?uo({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},P):i==="insideTopLeft"?uo({x:l+x,y:c+h,textAnchor:b,verticalAnchor:g},P):i==="insideTopRight"?uo({x:l+u-x,y:c+h,textAnchor:y,verticalAnchor:g},P):i==="insideBottomLeft"?uo({x:l+x,y:c+d-h,textAnchor:b,verticalAnchor:m},P):i==="insideBottomRight"?uo({x:l+u-x,y:c+d-h,textAnchor:y,verticalAnchor:m},P):mx(i)&&(ir(i.x)||Tm(i.x))&&(ir(i.y)||Tm(i.y))?uo({x:l+ks(i.x,u),y:c+ks(i.y,d),textAnchor:"end",verticalAnchor:"end"},P):uo({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},qDe=function(t){return"cx"in t&&ir(t.cx)};function Eo(e){var t=e.offset,r=t===void 0?5:t,n=TDe(e,CDe),a=uo({offset:r},n),i=a.viewBox,s=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||Cn(l)&&Cn(c)&&!v.isValidElement(u)&&!vn(u))return null;if(v.isValidElement(u))return v.cloneElement(u,a);var m;if(vn(u)){if(m=v.createElement(u,a),v.isValidElement(m))return m}else m=LDe(a);var g=qDe(i),p=tn(a,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return FDe(a,m,p);var x=g?BDe(a):zDe(a);return se.createElement(hp,cb({className:An("recharts-label",f)},p,x,{breakAll:h}),m)}Eo.displayName="Label";var GX=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,x=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(ir(p)&&ir(x)){if(ir(f)&&ir(h))return{x:f,y:h,width:p,height:x};if(ir(m)&&ir(g))return{x:m,y:g,width:p,height:x}}return ir(f)&&ir(h)?{x:f,y:h,width:0,height:0}:ir(r)&&ir(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},UDe=function(t,r){return t?t===!0?se.createElement(Eo,{key:"label-implicit",viewBox:r}):bo(t)?se.createElement(Eo,{key:"label-implicit",viewBox:r,value:t}):v.isValidElement(t)?t.type===Eo?v.cloneElement(t,{key:"label-implicit",viewBox:r}):se.createElement(Eo,{key:"label-implicit",content:t,viewBox:r}):vn(t)?se.createElement(Eo,{key:"label-implicit",content:t,viewBox:r}):mx(t)?se.createElement(Eo,cb({viewBox:r},t,{key:"label-implicit"})):null:null},VDe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=GX(t),s=Dl(a,Eo).map(function(c,u){return v.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var l=UDe(t.label,r||i);return[l].concat(ADe(s))};Eo.parseViewBox=GX;Eo.renderCallByParent=VDe;function WDe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var HDe=WDe;const GDe=fa(HDe);function ub(e){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ub(e)}var KDe=["valueAccessor"],YDe=["data","dataKey","clockWise","id","textBreakAll"];function XDe(e){return eMe(e)||ZDe(e)||QDe(e)||JDe()}function JDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QDe(e,t){if(e){if(typeof e=="string")return pO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(e,t)}}function ZDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eMe(e){if(Array.isArray(e))return pO(e)}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xS(){return xS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xS.apply(this,arguments)}function G8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G8(Object(r),!0).forEach(function(n){tMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tMe(e,t,r){return t=rMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rMe(e){var t=nMe(e,"string");return ub(t)=="symbol"?t:t+""}function nMe(e,t){if(ub(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ub(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y8(e,t){if(e==null)return{};var r=aMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var iMe=function(t){return Array.isArray(t.value)?GDe(t.value):t.value};function Ku(e){var t=e.valueAccessor,r=t===void 0?iMe:t,n=Y8(e,KDe),a=n.data,i=n.dataKey,s=n.clockWise,l=n.id,c=n.textBreakAll,u=Y8(n,YDe);return!a||!a.length?null:se.createElement(Zn,{className:"recharts-label-list"},a.map(function(d,f){var h=Cn(i)?r(d,f):Vi(d&&d.payload,i),m=Cn(l)?{}:{id:"".concat(l,"-").concat(f)};return se.createElement(Eo,xS({},tn(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:Eo.parseViewBox(Cn(s)?d:K8(K8({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}Ku.displayName="LabelList";function oMe(e,t){return e?e===!0?se.createElement(Ku,{key:"labelList-implicit",data:t}):se.isValidElement(e)||vn(e)?se.createElement(Ku,{key:"labelList-implicit",data:t,content:e}):mx(e)?se.createElement(Ku,xS({data:t},e,{key:"labelList-implicit"})):null:null}function sMe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Dl(n,Ku).map(function(s,l){return v.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=oMe(e.label,t);return[i].concat(XDe(a))}Ku.renderCallByParent=sMe;function db(e){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},db(e)}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gO.apply(this,arguments)}function X8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(r),!0).forEach(function(n){lMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lMe(e,t,r){return t=cMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cMe(e){var t=uMe(e,"string");return db(t)=="symbol"?t:t+""}function uMe(e,t){if(db(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(db(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dMe=function(t,r){var n=Es(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Gw=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/vS,h=u?i:i+s*f,m=Ja(r,n,d,h),g=Ja(r,n,a,h),p=u?i-s*f:i,x=Ja(r,n,d*Math.cos(f*vS),p);return{center:m,circleTangency:g,lineTangency:x,theta:f}},KX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,l=t.endAngle,c=dMe(s,l),u=s+c,d=Ja(r,n,i,s),f=Ja(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Ja(r,n,a,s),g=Ja(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},fMe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Es(d-u),h=Gw({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,x=Gw({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),y=x.circleTangency,b=x.lineTangency,w=x.theta,_=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):KX({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var N=Gw({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),P=N.circleTangency,A=N.lineTangency,k=N.theta,M=Gw({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),E=M.circleTangency,I=M.lineTangency,O=M.theta,R=c?Math.abs(u-d):Math.abs(u-d)-k-O;if(R<0&&s===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(I.x,",").concat(I.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},hMe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BI=function(t){var r=J8(J8({},hMe),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(s<i||d===f)return null;var m=An("recharts-sector",h),g=s-i,p=ks(l,g,0,!0),x;return p>0&&Math.abs(d-f)<360?x=fMe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=KX({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),se.createElement("path",gO({},tn(r,!0),{className:m,d:x,role:"img"}))};function fb(e){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fb(e)}function vO(){return vO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vO.apply(this,arguments)}function Q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q8(Object(r),!0).forEach(function(n){mMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mMe(e,t,r){return t=pMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pMe(e){var t=gMe(e,"string");return fb(t)=="symbol"?t:t+""}function gMe(e,t){if(fb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eB={curveBasisClosed:vSe,curveBasisOpen:xSe,curveBasis:gSe,curveBumpX:rSe,curveBumpY:nSe,curveLinearClosed:ySe,curveLinear:SN,curveMonotoneX:bSe,curveMonotoneY:wSe,curveNatural:_Se,curveStep:SSe,curveStepAfter:NSe,curveStepBefore:jSe},Kw=function(t){return t.x===+t.x&&t.y===+t.y},c0=function(t){return t.x},u0=function(t){return t.y},vMe=function(t,r){if(vn(t))return t;var n="curve".concat(wN(t));return(n==="curveMonotone"||n==="curveBump")&&r?eB["".concat(n).concat(r==="vertical"?"Y":"X")]:eB[n]||SN},xMe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=vMe(n,l),f=u?i.filter(function(p){return Kw(p)}):i,h;if(Array.isArray(s)){var m=u?s.filter(function(p){return Kw(p)}):s,g=f.map(function(p,x){return Z8(Z8({},p),{},{base:m[x]})});return l==="vertical"?h=$w().y(u0).x1(c0).x0(function(p){return p.base.x}):h=$w().x(c0).y1(u0).y0(function(p){return p.base.y}),h.defined(Kw).curve(d),h(g)}return l==="vertical"&&ir(s)?h=$w().y(u0).x1(c0).x0(s):ir(s)?h=$w().x(c0).y1(u0).y0(s):h=UK().x(c0).y(u0),h.defined(Kw).curve(d),h(f)},Km=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?xMe(t):a;return v.createElement("path",vO({},tn(t,!1),q_(t),{className:An("recharts-curve",r),d:s,ref:i}))},YX={exports:{}},yMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bMe=yMe,wMe=bMe;function XX(){}function JX(){}JX.resetWarningCache=XX;var _Me=function(){function e(n,a,i,s,l,c){if(c!==wMe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:JX,resetWarningCache:XX};return r.PropTypes=r,r};YX.exports=_Me();var SMe=YX.exports;const dn=fa(SMe);var jMe=Object.getOwnPropertyNames,NMe=Object.getOwnPropertySymbols,CMe=Object.prototype.hasOwnProperty;function tB(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Yw(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,s=i.get(r),l=i.get(n);if(s&&l)return s===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function rB(e){return jMe(e).concat(NMe(e))}var AMe=Object.hasOwn||function(e,t){return CMe.call(e,t)};function Lp(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var PMe="__v",EMe="__o",kMe="_owner",nB=Object.getOwnPropertyDescriptor,aB=Object.keys;function OMe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function TMe(e,t){return Lp(e.getTime(),t.getTime())}function IMe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function DMe(e,t){return e===t}function iB(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),s,l,c=0;(s=i.next())&&!s.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=s.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var MMe=Lp;function RMe(e,t,r){var n=aB(e),a=n.length;if(aB(t).length!==a)return!1;for(;a-- >0;)if(!QX(e,t,r,n[a]))return!1;return!0}function d0(e,t,r){var n=rB(e),a=n.length;if(rB(t).length!==a)return!1;for(var i,s,l;a-- >0;)if(i=n[a],!QX(e,t,r,i)||(s=nB(e,i),l=nB(t,i),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function LMe(e,t){return Lp(e.valueOf(),t.valueOf())}function $Me(e,t){return e.source===t.source&&e.flags===t.flags}function oB(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),s,l;(s=i.next())&&!s.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(s.value,l.value,s.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function FMe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function BMe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function QX(e,t,r,n){return(n===kMe||n===EMe||n===PMe)&&(e.$$typeof||t.$$typeof)?!0:AMe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var zMe="[object Arguments]",qMe="[object Boolean]",UMe="[object Date]",VMe="[object Error]",WMe="[object Map]",HMe="[object Number]",GMe="[object Object]",KMe="[object RegExp]",YMe="[object Set]",XMe="[object String]",JMe="[object URL]",QMe=Array.isArray,sB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,lB=Object.assign,ZMe=Object.prototype.toString.call.bind(Object.prototype.toString);function eRe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,s=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,x){if(g===p)return!0;if(g==null||p==null)return!1;var y=typeof g;if(y!==typeof p)return!1;if(y!=="object")return y==="number"?s(g,p,x):y==="function"?a(g,p,x):!1;var b=g.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(g,p,x);if(QMe(g))return t(g,p,x);if(sB!=null&&sB(g))return f(g,p,x);if(b===Date)return r(g,p,x);if(b===RegExp)return u(g,p,x);if(b===Map)return i(g,p,x);if(b===Set)return d(g,p,x);var w=ZMe(g);return w===UMe?r(g,p,x):w===KMe?u(g,p,x):w===WMe?i(g,p,x):w===YMe?d(g,p,x):w===GMe?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,x):w===JMe?h(g,p,x):w===VMe?n(g,p,x):w===zMe?l(g,p,x):w===qMe||w===HMe||w===XMe?c(g,p,x):!1}}function tRe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?d0:OMe,areDatesEqual:TMe,areErrorsEqual:IMe,areFunctionsEqual:DMe,areMapsEqual:n?tB(iB,d0):iB,areNumbersEqual:MMe,areObjectsEqual:n?d0:RMe,arePrimitiveWrappersEqual:LMe,areRegExpsEqual:$Me,areSetsEqual:n?tB(oB,d0):oB,areTypedArraysEqual:n?d0:FMe,areUrlsEqual:BMe};if(r&&(a=lB({},a,r(a))),t){var i=Yw(a.areArraysEqual),s=Yw(a.areMapsEqual),l=Yw(a.areObjectsEqual),c=Yw(a.areSetsEqual);a=lB({},a,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:c})}return a}function rRe(e){return function(t,r,n,a,i,s,l){return e(t,r,l)}}function nRe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var s={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,s)}}var aRe=Wh();Wh({strict:!0});Wh({circular:!0});Wh({circular:!0,strict:!0});Wh({createInternalComparator:function(){return Lp}});Wh({strict:!0,createInternalComparator:function(){return Lp}});Wh({circular:!0,createInternalComparator:function(){return Lp}});Wh({circular:!0,createInternalComparator:function(){return Lp},strict:!0});function Wh(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,s=i===void 0?!1:i,l=tRe(e),c=eRe(l),u=n?n(c):rRe(c);return nRe({circular:r,comparator:c,createState:a,equals:u,strict:s})}function iRe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function cB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):iRe(a)};requestAnimationFrame(n)}function xO(e){"@babel/helpers - typeof";return xO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xO(e)}function oRe(e){return uRe(e)||cRe(e)||lRe(e)||sRe()}function sRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lRe(e,t){if(e){if(typeof e=="string")return uB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uB(e,t)}}function uB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uRe(e){if(Array.isArray(e))return e}function dRe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,l=oRe(s),c=l[0],u=l.slice(1);if(typeof c=="number"){cB(a.bind(null,u),c);return}a(c),cB(a.bind(null,u));return}xO(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function hb(e){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hb(e)}function dB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dB(Object(r),!0).forEach(function(n){ZX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZX(e,t,r){return t=fRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fRe(e){var t=hRe(e,"string");return hb(t)==="symbol"?t:String(t)}function hRe(e,t){if(hb(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hb(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mRe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},pRe=function(t){return t},gRe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Q0=function(t,r){return Object.keys(r).reduce(function(n,a){return fB(fB({},n),{},ZX({},a,t(a,r[a])))},{})},hB=function(t,r,n){return t.map(function(a){return"".concat(gRe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function vRe(e,t){return bRe(e)||yRe(e,t)||eJ(e,t)||xRe()}function xRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function bRe(e){if(Array.isArray(e))return e}function wRe(e){return jRe(e)||SRe(e)||eJ(e)||_Re()}function _Re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eJ(e,t){if(e){if(typeof e=="string")return yO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yO(e,t)}}function SRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jRe(e){if(Array.isArray(e))return yO(e)}function yO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yS=1e-4,tJ=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},rJ=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},mB=function(t,r){return function(n){var a=tJ(t,r);return rJ(a,n)}},NRe=function(t,r){return function(n){var a=tJ(t,r),i=[].concat(wRe(a.map(function(s,l){return s*l}).slice(1)),[0]);return rJ(i,n)}},pB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,l=1;break;case"ease":a=.25,i=.1,s=.25,l=1;break;case"ease-in":a=.42,i=0,s=1,l=1;break;case"ease-out":a=.42,i=0,s=.58,l=1;break;case"ease-in-out":a=0,i=0,s=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=vRe(u,4);a=d[0],i=d[1],s=d[2],l=d[3]}}}var f=mB(a,s),h=mB(i,l),m=NRe(a,s),g=function(y){return y>1?1:y<0?0:y},p=function(y){for(var b=y>1?1:y,w=b,_=0;_<8;++_){var j=f(w)-b,N=m(w);if(Math.abs(j-b)<yS||N<yS)return h(w);w=g(w-j/N)}return h(w)};return p.isStepper=!1,p},CRe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,l=s===void 0?17:s,c=function(d,f,h){var m=-(d-f)*n,g=h*i,p=h+(m-g)*l/1e3,x=h*l/1e3+d;return Math.abs(x-f)<yS&&Math.abs(p)<yS?[f,0]:[x,p]};return c.isStepper=!0,c.dt=l,c},ARe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pB(a);case"spring":return CRe();default:if(a.split("(")[0]==="cubic-bezier")return pB(a)}return typeof a=="function"?a:null};function mb(e){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mb(e)}function gB(e){return kRe(e)||ERe(e)||nJ(e)||PRe()}function PRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ERe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kRe(e){if(Array.isArray(e))return wO(e)}function vB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vB(Object(r),!0).forEach(function(n){bO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bO(e,t,r){return t=ORe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ORe(e){var t=TRe(e,"string");return mb(t)==="symbol"?t:String(t)}function TRe(e,t){if(mb(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mb(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IRe(e,t){return RRe(e)||MRe(e,t)||nJ(e,t)||DRe()}function DRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nJ(e,t){if(e){if(typeof e=="string")return wO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wO(e,t)}}function wO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function RRe(e){if(Array.isArray(e))return e}var bS=function(t,r,n){return t+(r-t)*n},_O=function(t){var r=t.from,n=t.to;return r!==n},LRe=function e(t,r,n){var a=Q0(function(i,s){if(_O(s)){var l=t(s.from,s.to,s.velocity),c=IRe(l,2),u=c[0],d=c[1];return zo(zo({},s),{},{from:u,velocity:d})}return s},r);return n<1?Q0(function(i,s){return _O(s)?zo(zo({},s),{},{velocity:bS(s.velocity,a[i].velocity,n),from:bS(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const $Re=function(e,t,r,n,a){var i=mRe(e,t),s=i.reduce(function(x,y){return zo(zo({},x),{},bO({},y,[e[y],t[y]]))},{}),l=i.reduce(function(x,y){return zo(zo({},x),{},bO({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Q0(function(y,b){return b.from},l)},m=function(){return!Object.values(l).filter(_O).length},g=function(y){u||(u=y);var b=y-u,w=b/r.dt;l=LRe(r,l,w),a(zo(zo(zo({},e),t),h())),u=y,m()||(c=requestAnimationFrame(f))},p=function(y){d||(d=y);var b=(y-d)/n,w=Q0(function(j,N){return bS.apply(void 0,gB(N).concat([r(b)]))},s);if(a(zo(zo(zo({},e),t),w)),b<1)c=requestAnimationFrame(f);else{var _=Q0(function(j,N){return bS.apply(void 0,gB(N).concat([r(1)]))},s);a(zo(zo(zo({},e),t),_))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}var FRe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function BRe(e,t){if(e==null)return{};var r=zRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zRe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function IA(e){return WRe(e)||VRe(e)||URe(e)||qRe()}function qRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function URe(e,t){if(e){if(typeof e=="string")return SO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SO(e,t)}}function VRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WRe(e){if(Array.isArray(e))return SO(e)}function SO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(r),!0).forEach(function(n){P0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P0(e,t,r){return t=aJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aJ(n.key),n)}}function GRe(e,t,r){return t&&yB(e.prototype,t),r&&yB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aJ(e){var t=KRe(e,"string");return Iv(t)==="symbol"?t:String(t)}function KRe(e,t){if(Iv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Iv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jO(e,t)}function jO(e,t){return jO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jO(e,t)}function XRe(e){var t=JRe();return function(){var n=wS(e),a;if(t){var i=wS(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return NO(this,a)}}function NO(e,t){if(t&&(Iv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CO(e)}function CO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wS(e){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wS(e)}var $N=function(e){YRe(r,e);var t=XRe(r);function r(n,a){var i;HRe(this,r),i=t.call(this,n,a);var s=i.props,l=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,h=s.children,m=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(CO(i)),i.changeStyle=i.changeStyle.bind(CO(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),NO(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},NO(i);i.state={style:c?P0({},c,u):u}}else i.state={style:{}};return i}return GRe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!s){var m={style:c?P0({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(aRe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:a.to;if(this.state&&h){var x={style:c?P0({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(x)}this.runAnimation(Ic(Ic({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=$Re(s,l,ARe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,l=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,x,y){if(y===0)return p;var b=x.duration,w=x.easing,_=w===void 0?"ease":w,j=x.style,N=x.properties,P=x.onAnimationEnd,A=y>0?s[y-1]:x,k=N||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(IA(p),[i.runJSAnimation.bind(i,{from:A.style,to:j,duration:b,easing:_}),b]);var M=hB(k,b,_),E=Ic(Ic(Ic({},A.style),j),{},{transition:M});return[].concat(IA(p),[E,b,P]).filter(pRe)};return this.manager.start([c].concat(IA(s.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=dRe());var i=a.begin,s=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=l?P0({},l,c):c,x=hB(Object.keys(p),s,u);g.start([d,i,Ic(Ic({},p),{},{transition:x}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=BRe(a,FRe),u=v.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||s<=0)return i;var f=function(m){var g=m.props,p=g.style,x=p===void 0?{}:p,y=g.className,b=v.cloneElement(m,Ic(Ic({},c),{},{style:Ic(Ic({},x),d),className:y}));return b};return u===1?f(v.Children.only(i)):se.createElement("div",null,v.Children.map(i,function(h){return f(h)}))}}]),r}(v.PureComponent);$N.displayName="Animate";$N.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};$N.propTypes={from:dn.oneOfType([dn.object,dn.string]),to:dn.oneOfType([dn.object,dn.string]),attributeName:dn.string,duration:dn.number,begin:dn.number,easing:dn.oneOfType([dn.string,dn.func]),steps:dn.arrayOf(dn.shape({duration:dn.number.isRequired,style:dn.object.isRequired,easing:dn.oneOfType([dn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),dn.func]),properties:dn.arrayOf("string"),onAnimationEnd:dn.func})),children:dn.oneOfType([dn.node,dn.func]),isActive:dn.bool,canBegin:dn.bool,onAnimationEnd:dn.func,shouldReAnimate:dn.bool,onAnimationStart:dn.func,onAnimationReStart:dn.func};const Eh=$N;function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pn.apply(null,arguments)}function _S(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iJ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Nk(e,t)}function pb(e){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pb(e)}function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SS.apply(this,arguments)}function QRe(e,t){return rLe(e)||tLe(e,t)||eLe(e,t)||ZRe()}function ZRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eLe(e,t){if(e){if(typeof e=="string")return bB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bB(e,t)}}function bB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function rLe(e){if(Array.isArray(e))return e}function wB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(r),!0).forEach(function(n){nLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nLe(e,t,r){return t=aLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aLe(e){var t=iLe(e,"string");return pb(t)=="symbol"?t:t+""}function iLe(e,t){if(pb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SB=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>s?s:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},oLe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(s,s+c),h=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},sLe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zI=function(t){var r=_B(_B({},sLe),t),n=v.useRef(),a=v.useState(-1),i=QRe(a,2),s=i[0],l=i[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,x=r.animationBegin,y=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=An("recharts-rectangle",m);return b?se.createElement(Eh,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(_){var j=_.width,N=_.height,P=_.x,A=_.y;return se.createElement(Eh,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,isActive:y,easing:g},se.createElement("path",SS({},tn(r,!0),{className:w,d:SB(P,A,j,N,h),ref:n})))}):se.createElement("path",SS({},tn(r,!0),{className:w,d:SB(c,u,d,f,h)}))},lLe=["points","className","baseLinePoints","connectNulls"];function Bg(){return Bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bg.apply(this,arguments)}function cLe(e,t){if(e==null)return{};var r=uLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jB(e){return mLe(e)||hLe(e)||fLe(e)||dLe()}function dLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fLe(e,t){if(e){if(typeof e=="string")return AO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AO(e,t)}}function hLe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mLe(e){if(Array.isArray(e))return AO(e)}function AO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var NB=function(t){return t&&t.x===+t.x&&t.y===+t.y},pLe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){NB(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),NB(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Z0=function(t,r){var n=pLe(t);r&&(n=[n.reduce(function(i,s){return[].concat(jB(i),jB(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,l,c){return"".concat(s).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},gLe=function(t,r,n){var a=Z0(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Z0(r.reverse(),n).slice(1))},vLe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=cLe(t,lLe);if(!r||!r.length)return null;var l=An("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=gLe(r,a,i);return se.createElement("g",{className:l},se.createElement("path",Bg({},tn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?se.createElement("path",Bg({},tn(s,!0),{fill:"none",d:Z0(r,i)})):null,c?se.createElement("path",Bg({},tn(s,!0),{fill:"none",d:Z0(a,i)})):null)}var d=Z0(r,i);return se.createElement("path",Bg({},tn(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:l,d}))};function PO(){return PO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PO.apply(this,arguments)}var g1=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=An("recharts-dot",i);return r===+r&&n===+n&&a===+a?v.createElement("circle",PO({},tn(t,!1),q_(t),{className:s,cx:r,cy:n,r:a})):null};function gb(e){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gb(e)}var xLe=["x","y","top","left","width","height","className"];function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO.apply(this,arguments)}function CB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CB(Object(r),!0).forEach(function(n){bLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bLe(e,t,r){return t=wLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wLe(e){var t=_Le(e,"string");return gb(t)=="symbol"?t:t+""}function _Le(e,t){if(gb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SLe(e,t){if(e==null)return{};var r=jLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var NLe=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},CLe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,l=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=SLe(t,xLe),x=yLe({x:n,y:i,top:l,left:u,width:f,height:m},p);return!ir(n)||!ir(i)||!ir(f)||!ir(m)||!ir(l)||!ir(u)?null:se.createElement("path",EO({},tn(x,!0),{className:An("recharts-cross",g),d:NLe(n,i,f,m,l,u)}))},ALe=DN,PLe=vX,ELe=od;function kLe(e,t){return e&&e.length?ALe(e,ELe(t),PLe):void 0}var OLe=kLe;const TLe=fa(OLe);var ILe=DN,DLe=od,MLe=xX;function RLe(e,t){return e&&e.length?ILe(e,DLe(t),MLe):void 0}var LLe=RLe;const $Le=fa(LLe);var FLe=["cx","cy","angle","ticks","axisLine"],BLe=["ticks","tick","angle","tickFormatter","stroke"];function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ey.apply(this,arguments)}function AB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AB(Object(r),!0).forEach(function(n){FN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PB(e,t){if(e==null)return{};var r=zLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sJ(n.key),n)}}function ULe(e,t,r){return t&&EB(e.prototype,t),r&&EB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VLe(e,t,r){return t=jS(t),WLe(e,oJ()?Reflect.construct(t,r||[],jS(e).constructor):t.apply(e,r))}function WLe(e,t){if(t&&(Dv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HLe(e)}function HLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oJ=function(){return!!e})()}function jS(e){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jS(e)}function GLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kO(e,t)}function FN(e,t,r){return t=sJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sJ(e){var t=KLe(e,"string");return Dv(t)=="symbol"?t:t+""}function KLe(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BN=function(e){function t(){return qLe(this,t),VLe(this,t,arguments)}return GLe(t,e),ULe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,l=i.cx,c=i.cy;return Ja(l,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=TLe(l,function(d){return d.coordinate||0}),u=$Le(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,l=n.ticks,c=n.axisLine,u=PB(n,FLe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=Ja(a,i,d[0],s),h=Ja(a,i,d[1],s),m=im(im(im({},tn(u,!1)),{},{fill:"none"},tn(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return se.createElement("line",ey({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=PB(a,BLe),f=this.getTickTextAnchor(),h=tn(d,!1),m=tn(s,!1),g=i.map(function(p,x){var y=n.getTickValueCoord(p),b=im(im(im(im({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:x},y),{},{payload:p});return se.createElement(Zn,ey({className:An("recharts-polar-radius-axis-tick",HX(s)),key:"tick-".concat(p.coordinate)},fp(n.props,p,x)),t.renderTickItem(s,b,c?c(p.value,x):p.value))});return se.createElement(Zn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:se.createElement(Zn,{className:An("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),Eo.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,a):vn(n)?s=n(a):s=se.createElement(hp,ey({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])}(v.PureComponent);FN(BN,"displayName","PolarRadiusAxis");FN(BN,"axisType","radiusAxis");FN(BN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sm.apply(this,arguments)}function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(n){zN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cJ(n.key),n)}}function XLe(e,t,r){return t&&OB(e.prototype,t),r&&OB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function JLe(e,t,r){return t=NS(t),QLe(e,lJ()?Reflect.construct(t,r||[],NS(e).constructor):t.apply(e,r))}function QLe(e,t){if(t&&(Mv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZLe(e)}function ZLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lJ=function(){return!!e})()}function NS(e){return NS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},NS(e)}function e6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OO(e,t)}function OO(e,t){return OO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},OO(e,t)}function zN(e,t,r){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJ(e){var t=t6e(e,"string");return Mv(t)=="symbol"?t:t+""}function t6e(e,t){if(Mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r6e=Math.PI/180,TB=1e-5,qN=function(e){function t(){return YLe(this,t),JLe(this,t,arguments)}return e6e(t,e),XLe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Ja(i,s,l,n.coordinate),h=Ja(i,s,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*r6e),s;return i>TB?s=a==="outer"?"start":"end":i<-TB?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,l=n.axisLine,c=n.axisLineType,u=om(om({},tn(this.props,!1)),{},{fill:"none"},tn(l,!1));if(c==="circle")return se.createElement(g1,Sm({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:s}));var d=this.props.ticks,f=d.map(function(h){return Ja(a,i,s,h.coordinate)});return se.createElement(vLe,Sm({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=tn(this.props,!1),f=tn(s,!1),h=om(om({},d),{},{fill:"none"},tn(l,!1)),m=i.map(function(g,p){var x=n.getTickLineCoord(g),y=n.getTickTextAnchor(g),b=om(om(om({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:x.x2,y:x.y2});return se.createElement(Zn,Sm({className:An("recharts-polar-angle-axis-tick",HX(s)),key:"tick-".concat(g.coordinate)},fp(n.props,g,p)),l&&se.createElement("line",Sm({className:"recharts-polar-angle-axis-tick-line"},h,x)),s&&t.renderTickItem(s,b,c?c(g.value,p):g.value))});return se.createElement(Zn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(Zn,{className:An("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,a):vn(n)?s=n(a):s=se.createElement(hp,Sm({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])}(v.PureComponent);zN(qN,"displayName","PolarAngleAxis");zN(qN,"axisType","angleAxis");zN(qN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var n6e=hY,a6e=n6e(Object.getPrototypeOf,Object),i6e=a6e,o6e=lf,s6e=i6e,l6e=cf,c6e="[object Object]",u6e=Function.prototype,d6e=Object.prototype,uJ=u6e.toString,f6e=d6e.hasOwnProperty,h6e=uJ.call(Object);function m6e(e){if(!l6e(e)||o6e(e)!=c6e)return!1;var t=s6e(e);if(t===null)return!0;var r=f6e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&uJ.call(r)==h6e}var p6e=m6e;const g6e=fa(p6e);var v6e=lf,x6e=cf,y6e="[object Boolean]";function b6e(e){return e===!0||e===!1||x6e(e)&&v6e(e)==y6e}var w6e=b6e;const _6e=fa(w6e);function vb(e){"@babel/helpers - typeof";return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vb(e)}function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CS.apply(this,arguments)}function S6e(e,t){return A6e(e)||C6e(e,t)||N6e(e,t)||j6e()}function j6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N6e(e,t){if(e){if(typeof e=="string")return IB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IB(e,t)}}function IB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function A6e(e){if(Array.isArray(e))return e}function DB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(r),!0).forEach(function(n){P6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P6e(e,t,r){return t=E6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E6e(e){var t=k6e(e,"string");return vb(t)=="symbol"?t:t+""}function k6e(e,t){if(vb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RB=function(t,r,n,a,i){var s=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-s/2,",").concat(r+i),l+="L ".concat(t+n-s/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},O6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},T6e=function(t){var r=MB(MB({},O6e),t),n=v.useRef(),a=v.useState(-1),i=S6e(a,2),s=i[0],l=i[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,x=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=An("recharts-trapezoid",m);return y?se.createElement(Eh,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:y},function(w){var _=w.upperWidth,j=w.lowerWidth,N=w.height,P=w.x,A=w.y;return se.createElement(Eh,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,easing:g},se.createElement("path",CS({},tn(r,!0),{className:b,d:RB(P,A,_,j,N),ref:n})))}):se.createElement("g",null,se.createElement("path",CS({},tn(r,!0),{className:b,d:RB(c,u,d,f,h)})))},I6e=["option","shapeType","propTransformer","activeClassName","isActive"];function xb(e){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xb(e)}function D6e(e,t){if(e==null)return{};var r=M6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function M6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(r),!0).forEach(function(n){R6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R6e(e,t,r){return t=L6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L6e(e){var t=$6e(e,"string");return xb(t)=="symbol"?t:t+""}function $6e(e,t){if(xb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F6e(e,t){return AS(AS({},t),e)}function B6e(e,t){return e==="symbols"}function $B(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return se.createElement(zI,r);case"trapezoid":return se.createElement(T6e,r);case"sector":return se.createElement(BI,r);case"symbols":if(B6e(t))return se.createElement(iI,r);break;default:return null}}function z6e(e){return v.isValidElement(e)?e.props:e}function dJ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?F6e:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,l=e.isActive,c=D6e(e,I6e),u;if(v.isValidElement(t))u=v.cloneElement(t,AS(AS({},c),z6e(t)));else if(vn(t))u=t(c);else if(g6e(t)&&!_6e(t)){var d=a(t,c);u=se.createElement($B,{shapeType:r,elementProps:d})}else{var f=c;u=se.createElement($B,{shapeType:r,elementProps:f})}return l?se.createElement(Zn,{className:s},u):u}function UN(e,t){return t!=null&&"trapezoids"in e.props}function VN(e,t){return t!=null&&"sectors"in e.props}function yb(e,t){return t!=null&&"points"in e.props}function q6e(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function U6e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function V6e(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function W6e(e,t){var r;return UN(e,t)?r=q6e:VN(e,t)?r=U6e:yb(e,t)&&(r=V6e),r}function H6e(e,t){var r;return UN(e,t)?r="trapezoids":VN(e,t)?r="sectors":yb(e,t)&&(r="points"),r}function G6e(e,t){if(UN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(VN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return yb(e,t)?t.payload:{}}function K6e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=H6e(r,t),i=G6e(r,t),s=n.filter(function(c,u){var d=mp(i,c),f=r.props[a].filter(function(g){var p=W6e(r,t);return p(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(s[s.length-1]);return l}var L2;function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(this,arguments)}function FB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(r),!0).forEach(function(n){oc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hJ(n.key),n)}}function X6e(e,t,r){return t&&BB(e.prototype,t),r&&BB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function J6e(e,t,r){return t=PS(t),Q6e(e,fJ()?Reflect.construct(t,r||[],PS(e).constructor):t.apply(e,r))}function Q6e(e,t){if(t&&(Rv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z6e(e)}function Z6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fJ=function(){return!!e})()}function PS(e){return PS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},PS(e)}function e$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TO(e,t)}function TO(e,t){return TO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TO(e,t)}function oc(e,t,r){return t=hJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hJ(e){var t=t$e(e,"string");return Rv(t)=="symbol"?t:t+""}function t$e(e,t){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rd=function(e){function t(r){var n;return Y6e(this,t),n=J6e(this,t,[r]),oc(n,"pieRef",null),oc(n,"sectorRefs",[]),oc(n,"id",Dp("recharts-pie-")),oc(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),vn(a)&&a()}),oc(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),vn(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return e$e(t,e),X6e(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=tn(this.props,!1),f=tn(s,!1),h=tn(l,!1),m=s&&s.offsetRadius||20,g=n.map(function(p,x){var y=(p.startAngle+p.endAngle)/2,b=Ja(p.cx,p.cy,p.outerRadius+m,y),w=Ga(Ga(Ga(Ga({},d),p),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(b.x,p.cx)},b),_=Ga(Ga(Ga(Ga({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:x,points:[Ja(p.cx,p.cy,p.outerRadius,y),b]}),j=c;return Cn(c)&&Cn(u)?j="value":Cn(c)&&(j=u),se.createElement(Zn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(s,w,Vi(p,j)))});return se.createElement(Zn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?s:h,g=Ga(Ga({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return se.createElement(Zn,zg({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},fp(a.props,u,d),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(d)}),se.createElement(dJ,zg({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return se.createElement(Eh,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,x=[],y=i&&i[0],b=y.startAngle;return i.forEach(function(w,_){var j=h&&h[_],N=_>0?Il(w,"paddingAngle",0):0;if(j){var P=vo(j.endAngle-j.startAngle,w.endAngle-w.startAngle),A=Ga(Ga({},w),{},{startAngle:b+N,endAngle:b+P(p)+N});x.push(A),b=A.endAngle}else{var k=w.endAngle,M=w.startAngle,E=vo(0,k-M),I=E(p),O=Ga(Ga({},w),{},{startAngle:b+N,endAngle:b+I+N});x.push(O),b=O.endAngle}}),se.createElement(Zn,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!mp(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!s||!s.length||!ir(u)||!ir(d)||!ir(f)||!ir(h))return null;var p=An("recharts-pie",l);return se.createElement(Zn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(s),Eo.renderCallByParent(this.props,null,!1),(!m||g)&&Ku.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(se.isValidElement(n))return se.cloneElement(n,a);if(vn(n))return n(a);var s=An("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return se.createElement(Km,zg({},a,{key:i,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,a,i){if(se.isValidElement(n))return se.cloneElement(n,a);var s=i;if(vn(n)&&(s=n(a),se.isValidElement(s)))return s;var l=An("recharts-pie-label-text",typeof n!="boolean"&&!vn(n)?n.className:"");return se.createElement(hp,zg({},a,{alignmentBaseline:"middle",className:l}),s)}}])}(v.PureComponent);L2=rd;oc(rd,"displayName","Pie");oc(rd,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!su.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oc(rd,"parseDeltaAngle",function(e,t){var r=Es(t-e),n=Math.min(Math.abs(t-e),360);return r*n});oc(rd,"getRealPieData",function(e){var t=e.data,r=e.children,n=tn(e,!1),a=Dl(r,Yy);return t&&t.length?t.map(function(i,s){return Ga(Ga(Ga({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return Ga(Ga({},n),i.props)}):[]});oc(rd,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=WX(a,i),l=n+ks(e.cx,a,a/2),c=r+ks(e.cy,i,i/2),u=ks(e.innerRadius,s,0),d=ks(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});oc(rd,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Ga(Ga({},t.type.defaultProps),t.props):t.props,a=L2.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=L2.parseCoordinateOfPie(n,r),p=L2.parseDeltaAngle(s,l),x=Math.abs(p),y=u;Cn(u)&&Cn(f)?(ou(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Cn(u)&&(ou(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var b=a.filter(function(A){return Vi(A,y,0)!==0}).length,w=(x>=360?b:b-1)*c,_=x-b*m-w,j=a.reduce(function(A,k){var M=Vi(k,y,0);return A+(ir(M)?M:0)},0),N;if(j>0){var P;N=a.map(function(A,k){var M=Vi(A,y,0),E=Vi(A,d,k),I=(ir(M)?M:0)/j,O;k?O=P.endAngle+Es(p)*c*(M!==0?1:0):O=s;var R=O+Es(p)*((M!==0?m:0)+I*_),B=(O+R)/2,W=(g.innerRadius+g.outerRadius)/2,F=[{name:E,value:M,payload:A,dataKey:y,type:h}],$=Ja(g.cx,g.cy,W,B);return P=Ga(Ga(Ga({percent:I,cornerRadius:i,name:E,tooltipPayload:F,midAngle:B,middleRadius:W,tooltipPosition:$},A),g),{},{value:Vi(A,y),startAngle:O,endAngle:R,payload:A,paddingAngle:Es(p)*c}),P})}return Ga(Ga({},g),{},{sectors:N,data:a})});var r$e=Math.ceil,n$e=Math.max;function a$e(e,t,r,n){for(var a=-1,i=n$e(r$e((t-e)/(r||1)),0),s=Array(i);i--;)s[n?i:++a]=e,e+=r;return s}var i$e=a$e,o$e=TY,zB=1/0,s$e=17976931348623157e292;function l$e(e){if(!e)return e===0?e:0;if(e=o$e(e),e===zB||e===-zB){var t=e<0?-1:1;return t*s$e}return e===e?e:0}var mJ=l$e,c$e=i$e,u$e=AN,DA=mJ;function d$e(e){return function(t,r,n){return n&&typeof n!="number"&&u$e(t,r,n)&&(r=n=void 0),t=DA(t),r===void 0?(r=t,t=0):r=DA(r),n=n===void 0?t<r?1:-1:DA(n),c$e(t,r,n,e)}}var f$e=d$e,h$e=f$e,m$e=h$e(),p$e=m$e;const ES=fa(p$e);function bb(e){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bb(e)}function qB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(r),!0).forEach(function(n){pJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pJ(e,t,r){return t=g$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g$e(e){var t=v$e(e,"string");return bb(t)=="symbol"?t:t+""}function v$e(e,t){if(bb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x$e=["Webkit","Moz","O","ms"],y$e=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=x$e.reduce(function(i,s){return UB(UB({},i),{},pJ({},s+n,r))},{});return a[t]=r,a};function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kS.apply(this,arguments)}function VB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VB(Object(r),!0).forEach(function(n){yl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vJ(n.key),n)}}function w$e(e,t,r){return t&&WB(e.prototype,t),r&&WB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _$e(e,t,r){return t=OS(t),S$e(e,gJ()?Reflect.construct(t,r||[],OS(e).constructor):t.apply(e,r))}function S$e(e,t){if(t&&(Lv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j$e(e)}function j$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gJ=function(){return!!e})()}function OS(e){return OS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},OS(e)}function N$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IO(e,t)}function IO(e,t){return IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},IO(e,t)}function yl(e,t,r){return t=vJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vJ(e){var t=C$e(e,"string");return Lv(t)=="symbol"?t:t+""}function C$e(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A$e=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=X0().domain(ES(0,c)).range([i,i+s-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},HB=function(t){return t.changedTouches&&!!t.changedTouches.length},$v=function(e){function t(r){var n;return b$e(this,t),n=_$e(this,t,[r]),yl(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),yl(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),yl(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,l=a.startIndex;s?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),yl(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),yl(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),yl(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),yl(n,"handleSlideDragStart",function(a){var i=HB(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return N$e(t,e),w$e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(s,f),g=t.getIndexInRange(s,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,l=a.dataKey,c=Vi(i[n],l,n);return vn(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-s):p<0&&(p=Math.max(p,u-s,u-l));var x=this.getIndex({startX:s+p,endX:l+p});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:s+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=HB(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,x=d.data,y={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),y[s]=u+b;var w=this.getIndex(y),_=w.startIndex,j=w.endIndex,N=function(){var A=x.length-1;return s==="startX"&&(l>c?_%p===0:j%p===0)||l<c&&j===A||s==="endX"&&(l>c?j%p===0:_%p===0)||l>c&&j===A};this.setState(yl(yl({},s,u+b),"brushMoveStartX",n.pageX),function(){g&&N()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,l=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(yl({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.fill,u=n.stroke;return se.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=v.Children.only(u);return f?se.cloneElement(f,{x:a,y:i,width:s,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,x=c.endIndex,y=Math.max(n,this.props.x),b=MA(MA({},tn(this.props,!1)),{},{x:y,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=g[x])===null||s===void 0?void 0:s.name);return se.createElement(Zn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return se.createElement(Zn,{className:"recharts-brush-texts"},se.createElement(hp,kS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:s+l/2},g),this.getTextOfTick(a)),se.createElement(hp,kS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:s+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!ir(l)||!ir(c)||!ir(u)||!ir(d)||u<=0||d<=0)return null;var w=An("recharts-brush",i),_=se.Children.count(s)===1,j=y$e("userSelect","none");return se.createElement(Zn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||x||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:s,height:l,fill:c,stroke:"none"}),se.createElement("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):vn(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return MA({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s},i&&i.length?A$e({data:i,width:s,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+s-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,l=i-1;l-s>1;){var c=Math.floor((s+l)/2);n[c]>a?l=c:s=c}return a>=n[l]?l:s}}])}(v.PureComponent);yl($v,"displayName","Brush");yl($v,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var P$e=fI;function E$e(e,t){var r;return P$e(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var k$e=E$e,O$e=iY,T$e=od,I$e=k$e,D$e=il,M$e=AN;function R$e(e,t,r){var n=D$e(e)?O$e:I$e;return r&&M$e(e,t,r)&&(t=void 0),n(e,T$e(t))}var L$e=R$e;const $$e=fa(L$e);var Yu=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},GB=AY;function F$e(e,t,r){t=="__proto__"&&GB?GB(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var B$e=F$e,z$e=B$e,q$e=NY,U$e=od;function V$e(e,t){var r={};return t=U$e(t),q$e(e,function(n,a,i){z$e(r,a,t(n,a,i))}),r}var W$e=V$e;const H$e=fa(W$e);function G$e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var K$e=G$e,Y$e=fI;function X$e(e,t){var r=!0;return Y$e(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var J$e=X$e,Q$e=K$e,Z$e=J$e,eFe=od,tFe=il,rFe=AN;function nFe(e,t,r){var n=tFe(e)?Q$e:Z$e;return r&&rFe(e,t,r)&&(t=void 0),n(e,eFe(t))}var aFe=nFe;const xJ=fa(aFe);var iFe=["x","y"];function wb(e){"@babel/helpers - typeof";return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(e)}function DO(){return DO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DO.apply(this,arguments)}function KB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KB(Object(r),!0).forEach(function(n){oFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oFe(e,t,r){return t=sFe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sFe(e){var t=lFe(e,"string");return wb(t)=="symbol"?t:t+""}function lFe(e,t){if(wb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cFe(e,t){if(e==null)return{};var r=uFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dFe(e,t){var r=e.x,n=e.y,a=cFe(e,iFe),i="".concat(r),s=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return f0(f0(f0(f0(f0({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function YB(e){return se.createElement(dJ,DO({shapeType:"rectangle",propTransformer:dFe,activeClassName:"recharts-active-bar"},e))}var fFe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=ir(n)||q2e(n);return i?t(n,a):(i||Ph(!1),r)}},hFe=["value","background"],yJ;function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}function mFe(e,t){if(e==null)return{};var r=pFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TS.apply(this,arguments)}function XB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XB(Object(r),!0).forEach(function(n){Jf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wJ(n.key),n)}}function vFe(e,t,r){return t&&JB(e.prototype,t),r&&JB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xFe(e,t,r){return t=IS(t),yFe(e,bJ()?Reflect.construct(t,r||[],IS(e).constructor):t.apply(e,r))}function yFe(e,t){if(t&&(Fv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bFe(e)}function bFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bJ=function(){return!!e})()}function IS(e){return IS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},IS(e)}function wFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MO(e,t)}function MO(e,t){return MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},MO(e,t)}function Jf(e,t,r){return t=wJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wJ(e){var t=_Fe(e,"string");return Fv(t)=="symbol"?t:t+""}function _Fe(e,t){if(Fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $p=function(e){function t(){var r;gFe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=xFe(this,t,[].concat(a)),Jf(r,"state",{isAnimationFinished:!1}),Jf(r,"id",Dp("recharts-bar-")),Jf(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Jf(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return wFe(t,e),vFe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=tn(this.props,!1);return n&&n.map(function(f,h){var m=h===c,g=m?u:s,p=Xi(Xi(Xi({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(Zn,TS({className:"recharts-bar-rectangle"},fp(a.props,f,h),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(h)}),se.createElement(YB,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return se.createElement(Eh,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(x,y){var b=h&&h[y];if(b){var w=vo(b.x,x.x),_=vo(b.y,x.y),j=vo(b.width,x.width),N=vo(b.height,x.height);return Xi(Xi({},x),{},{x:w(g),y:_(g),width:j(g),height:N(g)})}if(s==="horizontal"){var P=vo(0,x.height),A=P(g);return Xi(Xi({},x),{},{y:x.y+x.height-A,height:A})}var k=vo(0,x.width),M=k(g);return Xi(Xi({},x),{},{width:M})});return se.createElement(Zn,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!mp(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,l=a.activeIndex,c=tn(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=mFe(u,hFe);if(!f)return null;var m=Xi(Xi(Xi(Xi(Xi({},h),{},{fill:"#eee"},f),c),fp(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return se.createElement(YB,TS({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Dl(d,p1);if(!f)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,m=function(x,y){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:Vi(x,y)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Zn,g,f.map(function(p){return se.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,y=An("recharts-bar",s),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,_=b||w,j=Cn(p)?this.id:p;return se.createElement(Zn,{className:y},b||w?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(j)},se.createElement("rect",{x:b?u:u-f/2,y:w?d:d-h/2,width:b?f:f*2,height:w?h:h*2}))):null,se.createElement(Zn,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||x)&&Ku.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(v.PureComponent);yJ=$p;Jf($p,"displayName","Bar");Jf($p,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!su.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Jf($p,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=nDe(n,r);if(!m)return null;var g=t.layout,p=r.type.defaultProps,x=p!==void 0?Xi(Xi({},p),r.props):r.props,y=x.dataKey,b=x.children,w=x.minPointSize,_=g==="horizontal"?s:i,j=u?_.scale.domain():null,N=uDe({numericAxis:_}),P=Dl(b,Yy),A=f.map(function(k,M){var E,I,O,R,B,W;u?E=aDe(u[d+M],j):(E=Vi(k,y),Array.isArray(E)||(E=[N,E]));var F=fFe(w,yJ.defaultProps.minPointSize)(E[1],M);if(g==="horizontal"){var $,H=[s.scale(E[0]),s.scale(E[1])],ce=H[0],oe=H[1];I=F8({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:k,index:M}),O=($=oe??ce)!==null&&$!==void 0?$:void 0,R=m.size;var L=ce-oe;if(B=Number.isNaN(L)?0:L,W={x:I,y:s.y,width:R,height:s.height},Math.abs(F)>0&&Math.abs(B)<Math.abs(F)){var U=Es(B||F)*(Math.abs(F)-Math.abs(B));O-=U,B+=U}}else{var J=[i.scale(E[0]),i.scale(E[1])],V=J[0],Z=J[1];if(I=V,O=F8({axis:s,ticks:c,bandSize:a,offset:m.offset,entry:k,index:M}),R=Z-V,B=m.size,W={x:i.x,y:O,width:i.width,height:B},Math.abs(F)>0&&Math.abs(R)<Math.abs(F)){var K=Es(R||F)*(Math.abs(F)-Math.abs(R));R+=K}}return Xi(Xi(Xi({},k),{},{x:I,y:O,width:R,height:B,value:u?E:E[1],payload:k,background:W},P&&P[M]&&P[M].props),{},{tooltipPayload:[UX(r,k)],tooltipPosition:{x:I+R/2,y:O+B/2}})});return Xi({data:A,layout:g},h)});function _b(e){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_b(e)}function SFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_J(n.key),n)}}function jFe(e,t,r){return t&&QB(e.prototype,t),r&&QB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZB(Object(r),!0).forEach(function(n){WN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WN(e,t,r){return t=_J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _J(e){var t=NFe(e,"string");return _b(t)=="symbol"?t:t+""}function NFe(e,t){if(_b(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_b(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qI=function(t,r,n,a,i){var s=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!_l(u,$p);return d.reduce(function(m,g){var p=r[g],x=p.orientation,y=p.domain,b=p.padding,w=b===void 0?{}:b,_=p.mirror,j=p.reversed,N="".concat(x).concat(_?"Mirror":""),P,A,k,M,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=y[1]-y[0],O=1/0,R=p.categoricalDomain.sort(W2e);if(R.forEach(function(J,V){V>0&&(O=Math.min((J||0)-(R[V-1]||0),O))}),Number.isFinite(O)){var B=O/I,W=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(P=B*W/2),p.padding==="no-gap"){var F=ks(t.barCategoryGap,B*W),$=B*W/2;P=$-F-($-F)/W*F}}}a==="xAxis"?A=[n.left+(w.left||0)+(P||0),n.left+n.width-(w.right||0)-(P||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(P||0),n.top+n.height-(w.bottom||0)-(P||0)]:A=p.range,j&&(A=[A[1],A[0]]);var H=FX(p,i,h),ce=H.scale,oe=H.realScaleType;ce.domain(y).range(A),BX(ce);var L=zX(ce,qc(qc({},p),{},{realScaleType:oe}));a==="xAxis"?(E=x==="top"&&!_||x==="bottom"&&_,k=n.left,M=f[N]-E*p.height):a==="yAxis"&&(E=x==="left"&&!_||x==="right"&&_,k=f[N]-E*p.width,M=n.top);var U=qc(qc(qc({},p),L),{},{realScaleType:oe,x:k,y:M,scale:ce,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return U.bandSize=gS(U,L),!p.hide&&a==="xAxis"?f[N]+=(E?-1:1)*U.height:p.hide||(f[N]+=(E?-1:1)*U.width),qc(qc({},m),{},WN({},g,U))},{})},SJ=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},CFe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return SJ({x:r,y:n},{x:a,y:i})},jJ=function(){function e(t){SFe(this,e),this.scale=t}return jFe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();WN(jJ,"EPS",1e-4);var UI=function(t){var r=Object.keys(t).reduce(function(n,a){return qc(qc({},n),{},WN({},a,jJ.create(t[a])))},{});return qc(qc({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,l=i.position;return H$e(a,function(c,u){return r[u].apply(c,{bandAware:s,position:l})})},isInRange:function(a){return xJ(a,function(i,s){return r[s].isInRange(i)})}})};function AFe(e){return(e%180+180)%180}var PFe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=AFe(a),s=i*Math.PI/180,l=Math.atan(n/r),c=s>l&&s<Math.PI-l?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},EFe=od,kFe=u1,OFe=NN;function TFe(e){return function(t,r,n){var a=Object(t);if(!kFe(t)){var i=EFe(r);t=OFe(t),r=function(l){return i(a[l],l,a)}}var s=e(t,r,n);return s>-1?a[i?t[s]:s]:void 0}}var IFe=TFe,DFe=mJ;function MFe(e){var t=DFe(e),r=t%1;return t===t?r?t-r:t:0}var RFe=MFe,LFe=yY,$Fe=od,FFe=RFe,BFe=Math.max;function zFe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:FFe(r);return a<0&&(a=BFe(n+a,0)),LFe(e,$Fe(t),a)}var qFe=zFe,UFe=IFe,VFe=qFe,WFe=UFe(VFe),HFe=WFe;const GFe=fa(HFe);var KFe=Hwe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),VI=v.createContext(void 0),WI=v.createContext(void 0),NJ=v.createContext(void 0),CJ=v.createContext({}),AJ=v.createContext(void 0),PJ=v.createContext(0),EJ=v.createContext(0),e7=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,l=t.children,c=t.width,u=t.height,d=KFe(i);return se.createElement(VI.Provider,{value:n},se.createElement(WI.Provider,{value:a},se.createElement(CJ.Provider,{value:i},se.createElement(NJ.Provider,{value:d},se.createElement(AJ.Provider,{value:s},se.createElement(PJ.Provider,{value:u},se.createElement(EJ.Provider,{value:c},l)))))))},YFe=function(){return v.useContext(AJ)},kJ=function(t){var r=v.useContext(VI);r==null&&Ph(!1);var n=r[t];return n==null&&Ph(!1),n},XFe=function(){var t=v.useContext(VI);return Vf(t)},JFe=function(){var t=v.useContext(WI),r=GFe(t,function(n){return xJ(n.domain,Number.isFinite)});return r||Vf(t)},OJ=function(t){var r=v.useContext(WI);r==null&&Ph(!1);var n=r[t];return n==null&&Ph(!1),n},QFe=function(){var t=v.useContext(NJ);return t},ZFe=function(){return v.useContext(CJ)},HI=function(){return v.useContext(EJ)},GI=function(){return v.useContext(PJ)};function Bv(e){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(e)}function e8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IJ(n.key),n)}}function t8e(e,t,r){return t&&t7(e.prototype,t),r&&t7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r8e(e,t,r){return t=DS(t),n8e(e,TJ()?Reflect.construct(t,r||[],DS(e).constructor):t.apply(e,r))}function n8e(e,t){if(t&&(Bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a8e(e)}function a8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TJ=function(){return!!e})()}function DS(e){return DS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},DS(e)}function i8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RO(e,t)}function RO(e,t){return RO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},RO(e,t)}function r7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r7(Object(r),!0).forEach(function(n){KI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KI(e,t,r){return t=IJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IJ(e){var t=o8e(e,"string");return Bv(t)=="symbol"?t:t+""}function o8e(e,t){if(Bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s8e(e,t){return d8e(e)||u8e(e,t)||c8e(e,t)||l8e()}function l8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c8e(e,t){if(e){if(typeof e=="string")return a7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a7(e,t)}}function a7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function d8e(e){if(Array.isArray(e))return e}function LO(){return LO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LO.apply(this,arguments)}var f8e=function(t,r){var n;return se.isValidElement(t)?n=se.cloneElement(t,r):vn(t)?n=t(r):n=se.createElement("line",LO({},r,{className:"recharts-reference-line-line"})),n},h8e=function(t,r,n,a,i,s,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var g=u.y,p=t.y.apply(g,{position:s});if(Yu(u,"discard")&&!t.y.isInRange(p))return null;var x=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?x.reverse():x}if(r){var y=u.x,b=t.x.apply(y,{position:s});if(Yu(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?w.reverse():w}if(a){var _=u.segment,j=_.map(function(N){return t.apply(N,{position:s})});return Yu(u,"discard")&&$$e(j,function(N){return!t.isInRange(N)})?null:j}return null};function m8e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=YFe(),d=kJ(a),f=OJ(i),h=QFe();if(!u||!h)return null;ou(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=UI({x:d.scale,y:f.scale}),g=bo(t),p=bo(r),x=n&&n.length===2,y=h8e(m,g,p,x,h,e.position,d.orientation,f.orientation,e);if(!y)return null;var b=s8e(y,2),w=b[0],_=w.x,j=w.y,N=b[1],P=N.x,A=N.y,k=Yu(e,"hidden")?"url(#".concat(u,")"):void 0,M=n7(n7({clipPath:k},tn(e,!0)),{},{x1:_,y1:j,x2:P,y2:A});return se.createElement(Zn,{className:An("recharts-reference-line",l)},f8e(s,M),Eo.renderCallByParent(e,CFe({x1:_,y1:j,x2:P,y2:A})))}var YI=function(e){function t(){return e8e(this,t),r8e(this,t,arguments)}return i8e(t,e),t8e(t,[{key:"render",value:function(){return se.createElement(m8e,this.props)}}])}(se.Component);KI(YI,"displayName","ReferenceLine");KI(YI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function $O(){return $O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$O.apply(this,arguments)}function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function i7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(r),!0).forEach(function(n){HN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MJ(n.key),n)}}function g8e(e,t,r){return t&&s7(e.prototype,t),r&&s7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v8e(e,t,r){return t=MS(t),x8e(e,DJ()?Reflect.construct(t,r||[],MS(e).constructor):t.apply(e,r))}function x8e(e,t){if(t&&(zv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y8e(e)}function y8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DJ=function(){return!!e})()}function MS(e){return MS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},MS(e)}function b8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FO(e,t)}function FO(e,t){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FO(e,t)}function HN(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=w8e(e,"string");return zv(t)=="symbol"?t:t+""}function w8e(e,t){if(zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _8e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=UI({x:a.scale,y:i.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return Yu(t,"discard")&&!s.isInRange(l)?null:l},GN=function(e){function t(){return p8e(this,t),v8e(this,t,arguments)}return b8e(t,e),g8e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,l=n.alwaysShow,c=n.clipPathId,u=bo(a),d=bo(i);if(ou(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=_8e(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,x=g.className,y=Yu(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=o7(o7({clipPath:y},tn(this.props,!0)),{},{cx:h,cy:m});return se.createElement(Zn,{className:An("recharts-reference-dot",x)},t.renderDot(p,b),Eo.renderCallByParent(this.props,{x:h-s,y:m-s,width:2*s,height:2*s}))}}])}(se.Component);HN(GN,"displayName","ReferenceDot");HN(GN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});HN(GN,"renderDot",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):vn(e)?r=e(t):r=se.createElement(g1,$O({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function BO(){return BO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BO.apply(this,arguments)}function qv(e){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(e)}function l7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l7(Object(r),!0).forEach(function(n){KN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LJ(n.key),n)}}function j8e(e,t,r){return t&&u7(e.prototype,t),r&&u7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N8e(e,t,r){return t=RS(t),C8e(e,RJ()?Reflect.construct(t,r||[],RS(e).constructor):t.apply(e,r))}function C8e(e,t){if(t&&(qv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A8e(e)}function A8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RJ=function(){return!!e})()}function RS(e){return RS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},RS(e)}function P8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zO(e,t)}function zO(e,t){return zO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zO(e,t)}function KN(e,t,r){return t=LJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=E8e(e,"string");return qv(t)=="symbol"?t:t+""}function E8e(e,t){if(qv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k8e=function(t,r,n,a,i){var s=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=UI({x:d.scale,y:f.scale}),m={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Yu(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:SJ(m,g)},YN=function(e){function t(){return S8e(this,t),N8e(this,t,arguments)}return P8e(t,e),j8e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;ou(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=bo(a),h=bo(i),m=bo(s),g=bo(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var x=k8e(f,h,m,g,this.props);if(!x&&!p)return null;var y=Yu(this.props,"hidden")?"url(#".concat(d,")"):void 0;return se.createElement(Zn,{className:An("recharts-reference-area",c)},t.renderRect(p,c7(c7({clipPath:y},tn(this.props,!0)),x)),Eo.renderCallByParent(this.props,x))}}])}(se.Component);KN(YN,"displayName","ReferenceArea");KN(YN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});KN(YN,"renderRect",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):vn(e)?r=e(t):r=se.createElement(zI,BO({},t,{className:"recharts-reference-area-rect"})),r});function $J(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)n.push(e[a]);else return;return n}function O8e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return PFe(n,r)}function T8e(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+s:i+l}:{start:n?a+s:i+l,end:n?a:i}}function LS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function I8e(e,t){return $J(e,t+1)}function D8e(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,l=t.end,c=0,u=1,d=s,f=function(){var g=n?.[c];if(g===void 0)return{v:$J(n,u)};var p=c,x,y=function(){return x===void 0&&(x=r(g,p)),x},b=g.coordinate,w=c===0||LS(e,b,y,d,l);w||(c=0,d=s,u+=1),w&&(d=b+e*(y()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function Sb(e){"@babel/helpers - typeof";return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb(e)}function d7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d7(Object(r),!0).forEach(function(n){M8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M8e(e,t,r){return t=R8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R8e(e){var t=L8e(e,"string");return Sb(t)=="symbol"?t:t+""}function L8e(e,t){if(Sb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $8e(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===s-1){var x=e*(m.coordinate+e*p()/2-c);i[h]=m=is(is({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else i[h]=m=is(is({},m),{},{tickCoord:m.coordinate});var y=LS(e,m.tickCoord,p,l,c);y&&(c=m.tickCoord-e*(p()/2+a),i[h]=is(is({},m),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function F8e(e,t,r,n,a,i){var s=(n||[]).slice(),l=s.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);s[l-1]=d=is(is({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=LS(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),s[l-1]=is(is({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(b){var w=s[b],_,j=function(){return _===void 0&&(_=r(w,b)),_};if(b===0){var N=e*(w.coordinate-e*j()/2-c);s[b]=w=is(is({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else s[b]=w=is(is({},w),{},{tickCoord:w.coordinate});var P=LS(e,w.tickCoord,j,c,u);P&&(c=w.tickCoord+e*(j()/2+a),s[b]=is(is({},w),{},{isShow:!0}))},x=0;x<g;x++)p(x);return s}function XI(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(ir(c)||su.isSsr)return I8e(a,typeof c=="number"&&ir(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Y0(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(w,_){var j=vn(u)?u(w.value,_):w.value;return m==="width"?O8e(Y0(j,{fontSize:t,letterSpacing:r}),g,f):Y0(j,{fontSize:t,letterSpacing:r})[m]},x=a.length>=2?Es(a[1].coordinate-a[0].coordinate):1,y=T8e(i,x,m);return c==="equidistantPreserveStart"?D8e(x,y,p,a,s):(c==="preserveStart"||c==="preserveStartEnd"?h=F8e(x,y,p,a,s,c==="preserveStartEnd"):h=$8e(x,y,p,a,s),h.filter(function(b){return b.isShow}))}var B8e=["viewBox"],z8e=["viewBox"],q8e=["ticks"];function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function qg(){return qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qg.apply(this,arguments)}function f7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f7(Object(r),!0).forEach(function(n){JI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RA(e,t){if(e==null)return{};var r=U8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function V8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BJ(n.key),n)}}function W8e(e,t,r){return t&&h7(e.prototype,t),r&&h7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function H8e(e,t,r){return t=$S(t),G8e(e,FJ()?Reflect.construct(t,r||[],$S(e).constructor):t.apply(e,r))}function G8e(e,t){if(t&&(Uv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K8e(e)}function K8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FJ=function(){return!!e})()}function $S(e){return $S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$S(e)}function Y8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qO(e,t)}function qO(e,t){return qO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qO(e,t)}function JI(e,t,r){return t=BJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BJ(e){var t=X8e(e,"string");return Uv(t)=="symbol"?t:t+""}function X8e(e,t){if(Uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nx=function(e){function t(r){var n;return V8e(this,t),n=H8e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Y8e(t,e),W8e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=RA(n,B8e),l=this.props,c=l.viewBox,u=RA(l,z8e);return!ev(i,c)||!ev(s,u)||!ev(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,p,x,y,b,w=f?-1:1,_=n.tickSize||d,j=ir(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,x=s+ +!f*c,p=x-w*_,b=p-w*h,y=j;break;case"left":p=x=n.coordinate,g=i+ +!f*l,m=g-w*_,y=m-w*h,b=j;break;case"right":p=x=n.coordinate,g=i+ +f*l,m=g+w*_,y=m+w*h,b=j;break;default:m=g=n.coordinate,x=s+ +f*c,p=x+w*_,b=p+w*h,y=j;break}return{line:{x1:m,y1:p,x2:g,y2:x},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=lo(lo(lo({},tn(this.props,!1)),tn(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=lo(lo({},f),{},{x1:a,y1:i+h*l,x2:a+s,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=lo(lo({},f),{},{x1:a+m*s,y1:i,x2:a+m*s,y2:i+l})}return se.createElement("line",qg({},f,{className:An("recharts-cartesian-axis-line",Il(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=XI(lo(lo({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),x=tn(this.props,!1),y=tn(d,!1),b=lo(lo({},x),{},{fill:"none"},tn(c,!1)),w=m.map(function(_,j){var N=s.getTickLineCoord(_),P=N.line,A=N.tick,k=lo(lo(lo(lo({textAnchor:g,verticalAnchor:p},x),{},{stroke:"none",fill:u},y),A),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return se.createElement(Zn,qg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},fp(s.props,_,j)),c&&se.createElement("line",qg({},b,P,{className:An("recharts-cartesian-axis-tick-line",Il(c,"className"))})),d&&t.renderTickItem(d,k,"".concat(vn(f)?f(_.value,j):_.value).concat(h||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=RA(f,q8e),g=h;return vn(c)&&(g=h&&h.length>0?c(this.props):c(m)),s<=0||l<=0||!g||!g.length?null:se.createElement(Zn,{className:An("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Eo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,l=An(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?s=se.cloneElement(n,lo(lo({},a),{},{className:l})):vn(n)?s=n(lo(lo({},a),{},{className:l})):s=se.createElement(hp,qg({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])}(v.Component);JI(Nx,"displayName","CartesianAxis");JI(Nx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var J8e=["x1","y1","x2","y2","key"],Q8e=["offset"];function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function m7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m7(Object(r),!0).forEach(function(n){Z8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z8e(e,t,r){return t=eBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eBe(e){var t=tBe(e,"string");return gp(t)=="symbol"?t:t+""}function tBe(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mm.apply(this,arguments)}function p7(e,t){if(e==null)return{};var r=rBe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rBe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var nBe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,l=t.height,c=t.ry;return se.createElement("rect",{x:a,y:i,ry:c,width:s,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function zJ(e,t){var r;if(se.isValidElement(e))r=se.cloneElement(e,t);else if(vn(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,l=t.key,c=p7(t,J8e),u=tn(c,!1);u.offset;var d=p7(u,Q8e);r=se.createElement("line",Mm({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:l}))}return r}function aBe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=ls(ls({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return zJ(a,u)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function iBe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(l,c){var u=ls(ls({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return zJ(a,u)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function oBe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+s-h:d[m+1]-h;if(p<=0)return null;var x=m%t.length;return se.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function sBe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+l-h:d[m+1]-h;if(p<=0)return null;var x=m%n.length;return se.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:p,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var lBe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return $X(XI(ls(ls(ls({},Nx.defaultProps),n),{},{ticks:Ld(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},cBe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return $X(XI(ls(ls(ls({},Nx.defaultProps),n),{},{ticks:Ld(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},ig={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function UO(e){var t,r,n,a,i,s,l=HI(),c=GI(),u=ZFe(),d=ls(ls({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ig.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:ig.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:ig.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:ig.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:ig.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:ig.verticalFill,x:ir(e.x)?e.x:u.left,y:ir(e.y)?e.y:u.top,width:ir(e.width)?e.width:u.width,height:ir(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,x=d.horizontalValues,y=d.verticalValues,b=XFe(),w=JFe();if(!ir(m)||m<=0||!ir(g)||g<=0||!ir(f)||f!==+f||!ir(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||lBe,j=d.horizontalCoordinatesGenerator||cBe,N=d.horizontalPoints,P=d.verticalPoints;if((!N||!N.length)&&vn(j)){var A=x&&x.length,k=j({yAxis:w?ls(ls({},w),{},{ticks:A?x:w.ticks}):void 0,width:l,height:c,offset:u},A?!0:p);ou(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(gp(k),"]")),Array.isArray(k)&&(N=k)}if((!P||!P.length)&&vn(_)){var M=y&&y.length,E=_({xAxis:b?ls(ls({},b),{},{ticks:M?y:b.ticks}):void 0,width:l,height:c,offset:u},M?!0:p);ou(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(gp(E),"]")),Array.isArray(E)&&(P=E)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(nBe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),se.createElement(aBe,Mm({},d,{offset:u,horizontalPoints:N,xAxis:b,yAxis:w})),se.createElement(iBe,Mm({},d,{offset:u,verticalPoints:P,xAxis:b,yAxis:w})),se.createElement(oBe,Mm({},d,{horizontalPoints:N})),se.createElement(sBe,Mm({},d,{verticalPoints:P})))}UO.displayName="CartesianGrid";var uBe=["type","layout","connectNulls","ref"],dBe=["key"];function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function g7(e,t){if(e==null)return{};var r=fBe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fBe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}function v7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v7(Object(r),!0).forEach(function(n){Uc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function og(e){return gBe(e)||pBe(e)||mBe(e)||hBe()}function hBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mBe(e,t){if(e){if(typeof e=="string")return VO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VO(e,t)}}function pBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gBe(e){if(Array.isArray(e))return VO(e)}function VO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UJ(n.key),n)}}function xBe(e,t,r){return t&&x7(e.prototype,t),r&&x7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yBe(e,t,r){return t=FS(t),bBe(e,qJ()?Reflect.construct(t,r||[],FS(e).constructor):t.apply(e,r))}function bBe(e,t){if(t&&(Vv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wBe(e)}function wBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qJ=function(){return!!e})()}function FS(e){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},FS(e)}function _Be(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WO(e,t)}function WO(e,t){return WO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WO(e,t)}function Uc(e,t,r){return t=UJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=SBe(e,"string");return Vv(t)=="symbol"?t:t+""}function SBe(e,t){if(Vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v1=function(e){function t(){var r;vBe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=yBe(this,t,[].concat(a)),Uc(r,"state",{isAnimationFinished:!0,totalLength:0}),Uc(r,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),Uc(r,"getStrokeDasharray",function(s,l,c){var u=c.reduce(function(y,b){return y+b});if(!u)return r.generateSimpleStrokeDasharray(l,s);for(var d=Math.floor(s/u),f=s%u,h=l-s,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>f){m=[].concat(og(c.slice(0,g)),[f-p]);break}var x=m.length%2===0?[0,h]:[h];return[].concat(og(t.repeat(c,d)),og(m),x).map(function(y){return"".concat(y,"px")}).join(", ")}),Uc(r,"id",Dp("recharts-line-")),Uc(r,"pathRef",function(s){r.mainCurve=s}),Uc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Uc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return _Be(t,e),xBe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Dl(d,p1);if(!f)return null;var h=function(p,x){return{x:p.x,y:p.y,value:p.value,errorVal:Vi(p.payload,x)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Zn,m,f.map(function(g){return se.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=tn(this.props,!1),h=tn(c,!0),m=u.map(function(p,x){var y=vl(vl(vl({key:"dot-".concat(x),r:3},f),h),{},{index:x,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,y)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return se.createElement(Zn,ty({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,a,i,s){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=g7(l,uBe),h=vl(vl(vl({},tn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},s),{},{type:c,layout:u,connectNulls:d});return se.createElement(Km,ty({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,s=this.props,l=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,m=s.animationId,g=s.animateNewValues,p=s.width,x=s.height,y=this.state,b=y.prevPoints,w=y.totalLength;return se.createElement(Eh,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(b){var N=b.length/l.length,P=l.map(function(I,O){var R=Math.floor(O*N);if(b[R]){var B=b[R],W=vo(B.x,I.x),F=vo(B.y,I.y);return vl(vl({},I),{},{x:W(j),y:F(j)})}if(g){var $=vo(p*2,I.x),H=vo(x/2,I.y);return vl(vl({},I),{},{x:$(j),y:H(j)})}return vl(vl({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(P,n,a)}var A=vo(0,w),k=A(j),M;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});M=i.getStrokeDasharray(k,w,E)}else M=i.generateSimpleStrokeDasharray(w,k);return i.renderCurveStatically(l,n,a,{strokeDasharray:M})})}},{key:"renderCurve",value:function(n,a){var i=this.props,s=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&s&&s.length&&(!u&&d>0||!mp(u,s))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,g=a.height,p=a.isAnimationActive,x=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,b=l.length===1,w=An("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,N=_||j,P=Cn(x)?this.id:x,A=(n=tn(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=A.r,M=k===void 0?3:k,E=A.strokeWidth,I=E===void 0?2:E,O=kK(s)?s:{},R=O.clipDot,B=R===void 0?!0:R,W=M*2+I;return se.createElement(Zn,{className:w},_||j?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(P)},se.createElement("rect",{x:_?h:h-m/2,y:j?f:f-g/2,width:_?m:m*2,height:j?g:g*2})),!B&&se.createElement("clipPath",{id:"clipPath-dots-".concat(P)},se.createElement("rect",{x:h-W/2,y:f-W/2,width:m+W,height:g+W}))):null,!b&&this.renderCurve(N,P),this.renderErrorBar(N,P),(b||s)&&this.renderDots(N,B,P),(!p||y)&&Ku.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(og(n),[0]):n,s=[],l=0;l<a;++l)s=[].concat(og(s),og(i));return s}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(vn(n))i=n(a);else{var s=a.key,l=g7(a,dBe),c=An("recharts-line-dot",typeof n!="boolean"?n.className:"");i=se.createElement(g1,ty({key:s},l,{className:c}))}return i}}])}(v.PureComponent);Uc(v1,"displayName","Line");Uc(v1,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!su.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Uc(v1,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,s=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var g=Vi(h,s);return d==="horizontal"?{x:pS({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:Cn(g)?null:n.scale(g),value:g,payload:h}:{x:Cn(g)?null:r.scale(g),y:pS({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:g,payload:h}});return vl({points:f,layout:d},u)});var jBe=["layout","type","stroke","connectNulls","isRange","ref"],NBe=["key"],VJ;function Wv(e){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function WJ(e,t){if(e==null)return{};var r=CBe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CBe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rm.apply(this,arguments)}function y7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y7(Object(r),!0).forEach(function(n){$u(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ABe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GJ(n.key),n)}}function PBe(e,t,r){return t&&b7(e.prototype,t),r&&b7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function EBe(e,t,r){return t=BS(t),kBe(e,HJ()?Reflect.construct(t,r||[],BS(e).constructor):t.apply(e,r))}function kBe(e,t){if(t&&(Wv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OBe(e)}function OBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HJ=function(){return!!e})()}function BS(e){return BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},BS(e)}function TBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HO(e,t)}function HO(e,t){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HO(e,t)}function $u(e,t,r){return t=GJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GJ(e){var t=IBe(e,"string");return Wv(t)=="symbol"?t:t+""}function IBe(e,t){if(Wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hh=function(e){function t(){var r;ABe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=EBe(this,t,[].concat(a)),$u(r,"state",{isAnimationFinished:!0}),$u(r,"id",Dp("recharts-area-")),$u(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),vn(s)&&s()}),$u(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),vn(s)&&s()}),r}return TBe(t,e),PBe(t,[{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(s&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=tn(this.props,!1),m=tn(u,!0),g=d.map(function(x,y){var b=Mf(Mf(Mf({key:"dot-".concat(y),r:3},h),m),{},{index:y,cx:x.x,cy:x.y,dataKey:f,value:x.value,payload:x.payload,points:d});return t.renderDotItem(u,b)}),p={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return se.createElement(Zn,Rm({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,s=a.points,l=a.strokeWidth,c=s[0].x,u=s[s.length-1].x,d=n*Math.abs(c-u),f=Xf(s.map(function(h){return h.y||0}));return ir(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Xf(i.map(function(h){return h.y||0})),f)),ir(f)?se.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,s=a.points,l=a.strokeWidth,c=s[0].y,u=s[s.length-1].y,d=n*Math.abs(c-u),f=Xf(s.map(function(h){return h.x||0}));return ir(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Xf(i.map(function(h){return h.x||0})),f)),ir(f)?se.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,s){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=WJ(l,jBe);return se.createElement(Zn,{clipPath:i?"url(#clipPath-".concat(s,")"):null},se.createElement(Km,Rm({},tn(m,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&se.createElement(Km,Rm({},tn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&se.createElement(Km,Rm({},tn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,s=this.props,l=s.points,c=s.baseLine,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,m=s.animationId,g=this.state,p=g.prevPoints,x=g.prevBaseLine;return se.createElement(Eh,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(p){var w=p.length/l.length,_=l.map(function(A,k){var M=Math.floor(k*w);if(p[M]){var E=p[M],I=vo(E.x,A.x),O=vo(E.y,A.y);return Mf(Mf({},A),{},{x:I(b),y:O(b)})}return A}),j;if(ir(c)&&typeof c=="number"){var N=vo(x,c);j=N(b)}else if(Cn(c)||xx(c)){var P=vo(x,0);j=P(b)}else j=c.map(function(A,k){var M=Math.floor(k*w);if(x[M]){var E=x[M],I=vo(E.x,A.x),O=vo(E.y,A.y);return Mf(Mf({},A),{},{x:I(b),y:O(b)})}return A});return i.renderAreaStatically(_,j,n,a)}return se.createElement(Zn,null,se.createElement("defs",null,se.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),se.createElement(Zn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,s=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&s&&s.length&&(!d&&h>0||!mp(d,s)||!mp(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(s,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,g=a.height,p=a.isAnimationActive,x=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,b=l.length===1,w=An("recharts-area",c),_=f&&f.allowDataOverflow,j=h&&h.allowDataOverflow,N=_||j,P=Cn(x)?this.id:x,A=(n=tn(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=A.r,M=k===void 0?3:k,E=A.strokeWidth,I=E===void 0?2:E,O=kK(s)?s:{},R=O.clipDot,B=R===void 0?!0:R,W=M*2+I;return se.createElement(Zn,{className:w},_||j?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(P)},se.createElement("rect",{x:_?d:d-m/2,y:j?u:u-g/2,width:_?m:m*2,height:j?g:g*2})),!B&&se.createElement("clipPath",{id:"clipPath-dots-".concat(P)},se.createElement("rect",{x:d-W/2,y:u-W/2,width:m+W,height:g+W}))):null,b?null:this.renderArea(N,P),(s||b)&&this.renderDots(N,B,P),(!p||y)&&Ku.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(v.PureComponent);VJ=Hh;$u(Hh,"displayName","Area");$u(Hh,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!su.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});$u(Hh,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,s=t.props.baseValue,l=s??i;if(ir(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});$u(Hh,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,g=u&&u.length,p=VJ.getBaseValue(t,r,n,a),x=m==="horizontal",y=!1,b=f.map(function(_,j){var N;g?N=u[d+j]:(N=Vi(_,c),Array.isArray(N)?y=!0:N=[p,N]);var P=N[1]==null||g&&Vi(_,c)==null;return x?{x:pS({axis:n,ticks:i,bandSize:l,entry:_,index:j}),y:P?null:a.scale(N[1]),value:N,payload:_}:{x:P?null:n.scale(N[1]),y:pS({axis:a,ticks:s,bandSize:l,entry:_,index:j}),value:N,payload:_}}),w;return g||y?w=b.map(function(_){var j=Array.isArray(_.value)?_.value[0]:null;return x?{x:_.x,y:j!=null&&_.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:_.y}}):w=x?a.scale(p):n.scale(p),Mf({points:b,baseLine:w,layout:m,isRange:y},h)});$u(Hh,"renderDotItem",function(e,t){var r;if(se.isValidElement(e))r=se.cloneElement(e,t);else if(vn(e))r=e(t);else{var n=An("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=WJ(t,NBe);r=se.createElement(g1,Rm({},i,{key:a,className:n}))}return r});function Hv(e){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hv(e)}function DBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XJ(n.key),n)}}function MBe(e,t,r){return t&&w7(e.prototype,t),r&&w7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RBe(e,t,r){return t=zS(t),LBe(e,KJ()?Reflect.construct(t,r||[],zS(e).constructor):t.apply(e,r))}function LBe(e,t){if(t&&(Hv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Be(e)}function $Be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KJ=function(){return!!e})()}function zS(e){return zS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zS(e)}function FBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GO(e,t)}function GO(e,t){return GO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GO(e,t)}function YJ(e,t,r){return t=XJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XJ(e){var t=BBe(e,"string");return Hv(t)=="symbol"?t:t+""}function BBe(e,t){if(Hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KO(){return KO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KO.apply(this,arguments)}function zBe(e){var t=e.xAxisId,r=HI(),n=GI(),a=kJ(t);return a==null?null:v.createElement(Nx,KO({},a,{className:An("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Ld(s,!0)}}))}var vp=function(e){function t(){return DBe(this,t),RBe(this,t,arguments)}return FBe(t,e),MBe(t,[{key:"render",value:function(){return v.createElement(zBe,this.props)}}])}(v.Component);YJ(vp,"displayName","XAxis");YJ(vp,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gv(e)}function qBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZJ(n.key),n)}}function UBe(e,t,r){return t&&_7(e.prototype,t),r&&_7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VBe(e,t,r){return t=qS(t),WBe(e,JJ()?Reflect.construct(t,r||[],qS(e).constructor):t.apply(e,r))}function WBe(e,t){if(t&&(Gv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HBe(e)}function HBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JJ=function(){return!!e})()}function qS(e){return qS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qS(e)}function GBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YO(e,t)}function YO(e,t){return YO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YO(e,t)}function QJ(e,t,r){return t=ZJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZJ(e){var t=KBe(e,"string");return Gv(t)=="symbol"?t:t+""}function KBe(e,t){if(Gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XO(){return XO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XO.apply(this,arguments)}var YBe=function(t){var r=t.yAxisId,n=HI(),a=GI(),i=OJ(r);return i==null?null:v.createElement(Nx,XO({},i,{className:An("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Ld(l,!0)}}))},xp=function(e){function t(){return qBe(this,t),VBe(this,t,arguments)}return GBe(t,e),UBe(t,[{key:"render",value:function(){return v.createElement(YBe,this.props)}}])}(v.Component);QJ(xp,"displayName","YAxis");QJ(xp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function S7(e){return ZBe(e)||QBe(e)||JBe(e)||XBe()}function XBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JBe(e,t){if(e){if(typeof e=="string")return JO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JO(e,t)}}function QBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZBe(e){if(Array.isArray(e))return JO(e)}function JO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var QO=function(t,r,n,a,i){var s=Dl(t,YI),l=Dl(t,GN),c=[].concat(S7(s),S7(l)),u=Dl(t,YN),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(p,x){if(x.props[d]===n&&Yu(x.props,"extendDomain")&&ir(x.props[f])){var y=x.props[f];return[Math.min(p[0],y),Math.max(p[1],y)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,x){if(x.props[d]===n&&Yu(x.props,"extendDomain")&&ir(x.props[m])&&ir(x.props[g])){var y=x.props[m],b=x.props[g];return[Math.min(p[0],y,b),Math.max(p[1],y,b)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,x){return ir(x)?[Math.min(p[0],x),Math.max(p[1],x)]:p},h)),h},eQ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var x=this._events[p],y=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,m),!0;case 6:return x.fn.call(x.context,d,f,h,m,g),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var _=x.length,j;for(w=0;w<_;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),y){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,d);break;case 3:x[w].fn.call(x[w].context,d,f);break;case 4:x[w].fn.call(x[w].context,d,f,h);break;default:if(!b)for(j=1,b=new Array(y-1);j<y;j++)b[j-1]=arguments[j];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,m);else{for(var p=0,x=[],y=g.length;p<y;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&x.push(g[p]);x.length?this._events[m]=x.length===1?x[0]:x:s(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(eQ);var e7e=eQ.exports;const t7e=fa(e7e);var LA=new t7e,$A="recharts.syncMouseEvents";function jb(e){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jb(e)}function r7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tQ(n.key),n)}}function n7e(e,t,r){return t&&j7(e.prototype,t),r&&j7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FA(e,t,r){return t=tQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e){var t=a7e(e,"string");return jb(t)=="symbol"?t:t+""}function a7e(e,t){if(jb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i7e=function(){function e(){r7e(this,e),FA(this,"activeIndex",0),FA(this,"coordinateList",[]),FA(this,"layout","horizontal")}return n7e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,l=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=s+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function o7e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],a=e?.[1];if(n&&a&&ir(n)&&ir(a))return!0}return!1}function s7e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function rQ(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=Ja(t,r,n,a),l=Ja(t,r,n,i);return{points:[s,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function l7e(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Ja(l,c,u,f),m=Ja(l,c,d,f);n=h.x,a=h.y,i=m.x,s=m.y}else return rQ(t);return[{x:n,y:a},{x:i,y:s}]}function Nb(e){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nb(e)}function N7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N7(Object(r),!0).forEach(function(n){c7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c7e(e,t,r){return t=u7e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u7e(e){var t=d7e(e,"string");return Nb(t)=="symbol"?t:t+""}function d7e(e,t){if(Nb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f7e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!s||h!=="ScatterChart"&&a!=="axis")return null;var g,p=Km;if(h==="ScatterChart")g=s,p=CLe;else if(h==="BarChart")g=s7e(f,s,c,d),p=zI;else if(f==="radial"){var x=rQ(s),y=x.cx,b=x.cy,w=x.radius,_=x.startAngle,j=x.endAngle;g={cx:y,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},p=BI}else g={points:l7e(f,s,c)},p=Km;var N=Xw(Xw(Xw(Xw({stroke:"#ccc",pointerEvents:"none"},c),g),tn(m,!1)),{},{payload:l,payloadIndex:u,className:An("recharts-tooltip-cursor",m.className)});return v.isValidElement(m)?v.cloneElement(m,N):v.createElement(p,N)}var h7e=["item"],m7e=["children","className","width","height","style","compact","title","desc"];function Kv(e){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(e)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug.apply(this,arguments)}function C7(e,t){return v7e(e)||g7e(e,t)||aQ(e,t)||p7e()}function p7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function v7e(e){if(Array.isArray(e))return e}function A7(e,t){if(e==null)return{};var r=x7e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function x7e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iQ(n.key),n)}}function b7e(e,t,r){return t&&P7(e.prototype,t),r&&P7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function w7e(e,t,r){return t=US(t),_7e(e,nQ()?Reflect.construct(t,r||[],US(e).constructor):t.apply(e,r))}function _7e(e,t){if(t&&(Kv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S7e(e)}function S7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nQ=function(){return!!e})()}function US(e){return US=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},US(e)}function j7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZO(e,t)}function ZO(e,t){return ZO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ZO(e,t)}function Yv(e){return A7e(e)||C7e(e)||aQ(e)||N7e()}function N7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQ(e,t){if(e){if(typeof e=="string")return eT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eT(e,t)}}function C7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A7e(e){if(Array.isArray(e))return eT(e)}function eT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E7(Object(r),!0).forEach(function(n){gn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gn(e,t,r){return t=iQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iQ(e){var t=P7e(e,"string");return Kv(t)=="symbol"?t:t+""}function P7e(e,t){if(Kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E7e={xAxis:["bottom","top"],yAxis:["left","right"]},k7e={width:"100%",height:"100%"},oQ={x:0,y:0};function Jw(e){return e}var O7e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},T7e=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,l=a.radius;return Mt(Mt(Mt({},a),Ja(a.cx,a.cy,l,s)),{},{angle:s,radius:l})}var c=i.coordinate,u=a.angle;return Mt(Mt(Mt({},a),Ja(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return oQ},XN=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Yv(l),Yv(u)):l},[]);return s.length>0?s:t&&t.length&&ir(a)&&ir(i)?t.slice(a,i+1):[]};function sQ(e){return e==="number"?[0,"auto"]:void 0}var tT=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,l=XN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var m=f===void 0?l:f;h=z_(m,s.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(Yv(c),[UX(u,h)]):c},[])},k7=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=O7e(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=JIe(s,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=tT(t,r,d,f),m=T7e(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},I7e=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=LX(d,i);return n.reduce(function(g,p){var x,y=p.type.defaultProps!==void 0?Mt(Mt({},p.type.defaultProps),p.props):p.props,b=y.type,w=y.dataKey,_=y.allowDataOverflow,j=y.allowDuplicatedCategory,N=y.scale,P=y.ticks,A=y.includeHidden,k=y[s];if(g[k])return g;var M=XN(t.data,{graphicalItems:a.filter(function(L){var U,J=s in L.props?L.props[s]:(U=L.type.defaultProps)===null||U===void 0?void 0:U[s];return J===k}),dataStartIndex:c,dataEndIndex:u}),E=M.length,I,O,R;o7e(y.domain,_,b)&&(I=hO(y.domain,null,_),m&&(b==="number"||N!=="auto")&&(R=J0(M,w,"category")));var B=sQ(b);if(!I||I.length===0){var W,F=(W=y.domain)!==null&&W!==void 0?W:B;if(w){if(I=J0(M,w,b),b==="category"&&m){var $=V2e(I);j&&$?(O=I,I=ES(0,E)):j||(I=q8(F,I,p).reduce(function(L,U){return L.indexOf(U)>=0?L:[].concat(Yv(L),[U])},[]))}else if(b==="category")j?I=I.filter(function(L){return L!==""&&!Cn(L)}):I=q8(F,I,p).reduce(function(L,U){return L.indexOf(U)>=0||U===""||Cn(U)?L:[].concat(Yv(L),[U])},[]);else if(b==="number"){var H=rDe(M,a.filter(function(L){var U,J,V=s in L.props?L.props[s]:(U=L.type.defaultProps)===null||U===void 0?void 0:U[s],Z="hide"in L.props?L.props.hide:(J=L.type.defaultProps)===null||J===void 0?void 0:J.hide;return V===k&&(A||!Z)}),w,i,d);H&&(I=H)}m&&(b==="number"||N!=="auto")&&(R=J0(M,w,"category"))}else m?I=ES(0,E):l&&l[k]&&l[k].hasStack&&b==="number"?I=h==="expand"?[0,1]:qX(l[k].stackGroups,c,u):I=RX(M,a.filter(function(L){var U=s in L.props?L.props[s]:L.type.defaultProps[s],J="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return U===k&&(A||!J)}),b,d,!0);if(b==="number")I=QO(f,I,k,i,P),F&&(I=hO(F,I,_));else if(b==="category"&&F){var ce=F,oe=I.every(function(L){return ce.indexOf(L)>=0});oe&&(I=ce)}}return Mt(Mt({},g),{},gn({},k,Mt(Mt({},y),{},{axisType:i,domain:I,categoricalDomain:R,duplicateDomain:O,originalDomain:(x=y.domain)!==null&&x!==void 0?x:B,isCategorical:m,layout:d})))},{})},D7e=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=XN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=LX(d,i),p=-1;return n.reduce(function(x,y){var b=y.type.defaultProps!==void 0?Mt(Mt({},y.type.defaultProps),y.props):y.props,w=b[s],_=sQ("number");if(!x[w]){p++;var j;return g?j=ES(0,m):l&&l[w]&&l[w].hasStack?(j=qX(l[w].stackGroups,c,u),j=QO(f,j,w,i)):(j=hO(_,RX(h,n.filter(function(N){var P,A,k=s in N.props?N.props[s]:(P=N.type.defaultProps)===null||P===void 0?void 0:P[s],M="hide"in N.props?N.props.hide:(A=N.type.defaultProps)===null||A===void 0?void 0:A.hide;return k===w&&!M}),"number",d),a.defaultProps.allowDataOverflow),j=QO(f,j,w,i)),Mt(Mt({},x),{},gn({},w,Mt(Mt({axisType:i},a.defaultProps),{},{hide:!0,orientation:Il(E7e,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:_,isCategorical:g,layout:d})))}return x},{})},M7e=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=Dl(d,i),m={};return h&&h.length?m=I7e(t,{axes:h,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(m=D7e(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},R7e=function(t){var r=Vf(t),n=Ld(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:hI(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:gS(r,n)}},O7=function(t){var r=t.children,n=t.defaultShowTooltip,a=_l(r,$v),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},L7e=function(t){return!t||!t.length?!1:t.some(function(r){var n=qd(r&&r.type);return n&&n.indexOf("Bar")>=0})},T7=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$7e=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=_l(f,$v),g=_l(f,Wm),p=Object.keys(c).reduce(function(j,N){var P=c[N],A=P.orientation;return!P.mirror&&!P.hide?Mt(Mt({},j),{},gn({},A,j[A]+P.width)):j},{left:h.left||0,right:h.right||0}),x=Object.keys(s).reduce(function(j,N){var P=s[N],A=P.orientation;return!P.mirror&&!P.hide?Mt(Mt({},j),{},gn({},A,Il(j,"".concat(A))+P.height)):j},{top:h.top||0,bottom:h.bottom||0}),y=Mt(Mt({},x),p),b=y.bottom;m&&(y.bottom+=m.props.height||$v.defaultProps.height),g&&r&&(y=eDe(y,a,n,r));var w=u-y.left-y.right,_=d-y.top-y.bottom;return Mt(Mt({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(_,0)})},F7e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},JN=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(y,b){var w=b.graphicalItems,_=b.stackGroups,j=b.offset,N=b.updateId,P=b.dataStartIndex,A=b.dataEndIndex,k=y.barSize,M=y.layout,E=y.barGap,I=y.barCategoryGap,O=y.maxBarSize,R=T7(M),B=R.numericAxisName,W=R.cateAxisName,F=L7e(w),$=[];return w.forEach(function(H,ce){var oe=XN(y.data,{graphicalItems:[H],dataStartIndex:P,dataEndIndex:A}),L=H.type.defaultProps!==void 0?Mt(Mt({},H.type.defaultProps),H.props):H.props,U=L.dataKey,J=L.maxBarSize,V=L["".concat(B,"Id")],Z=L["".concat(W,"Id")],K={},he=c.reduce(function(mt,_t){var ue=b["".concat(_t.axisType,"Map")],Ct=L["".concat(_t.axisType,"Id")];ue&&ue[Ct]||_t.axisType==="zAxis"||Ph(!1);var At=ue[Ct];return Mt(Mt({},mt),{},gn(gn({},_t.axisType,At),"".concat(_t.axisType,"Ticks"),Ld(At)))},K),te=he[W],me=he["".concat(W,"Ticks")],Ee=_&&_[V]&&_[V].hasStack&&dDe(H,_[V].stackGroups),Se=qd(H.type).indexOf("Bar")>=0,We=gS(te,me),be=[],ne=F&&QIe({barSize:k,stackGroups:_,totalSize:F7e(he,W)});if(Se){var Qt,bt,Pt=Cn(J)?O:J,Qe=(Qt=(bt=gS(te,me,!0))!==null&&bt!==void 0?bt:Pt)!==null&&Qt!==void 0?Qt:0;be=ZIe({barGap:E,barCategoryGap:I,bandSize:Qe!==We?Qe:We,sizeList:ne[Z],maxBarSize:Pt}),Qe!==We&&(be=be.map(function(mt){return Mt(Mt({},mt),{},{position:Mt(Mt({},mt.position),{},{offset:mt.position.offset-Qe/2})})}))}var ft=H&&H.type&&H.type.getComposedData;ft&&$.push({props:Mt(Mt({},ft(Mt(Mt({},he),{},{displayedData:oe,props:y,dataKey:U,item:H,bandSize:We,barPosition:be,offset:j,stackedData:Ee,layout:M,dataStartIndex:P,dataEndIndex:A}))),{},gn(gn(gn({key:H.key||"item-".concat(ce)},B,he[B]),W,he[W]),"animationId",N)),childIndex:r_e(H,y.children),item:H})}),$},m=function(y,b){var w=y.props,_=y.dataStartIndex,j=y.dataEndIndex,N=y.updateId;if(!T$({props:w}))return null;var P=w.children,A=w.layout,k=w.stackOffset,M=w.data,E=w.reverseStackOrder,I=T7(A),O=I.numericAxisName,R=I.cateAxisName,B=Dl(P,n),W=cDe(M,B,"".concat(O,"Id"),"".concat(R,"Id"),k,E),F=c.reduce(function(L,U){var J="".concat(U.axisType,"Map");return Mt(Mt({},L),{},gn({},J,M7e(w,Mt(Mt({},U),{},{graphicalItems:B,stackGroups:U.axisType===O&&W,dataStartIndex:_,dataEndIndex:j}))))},{}),$=$7e(Mt(Mt({},F),{},{props:w,graphicalItems:B}),b?.legendBBox);Object.keys(F).forEach(function(L){F[L]=d(w,F[L],$,L.replace("Map",""),r)});var H=F["".concat(R,"Map")],ce=R7e(H),oe=h(w,Mt(Mt({},F),{},{dataStartIndex:_,dataEndIndex:j,updateId:N,graphicalItems:B,stackGroups:W,offset:$}));return Mt(Mt({formattedGraphicalItems:oe,graphicalItems:B,offset:$,stackGroups:W},ce),F)},g=function(x){function y(b){var w,_,j;return y7e(this,y),j=w7e(this,y,[b]),gn(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gn(j,"accessibilityManager",new i7e),gn(j,"handleLegendBBoxUpdate",function(N){if(N){var P=j.state,A=P.dataStartIndex,k=P.dataEndIndex,M=P.updateId;j.setState(Mt({legendBBox:N},m({props:j.props,dataStartIndex:A,dataEndIndex:k,updateId:M},Mt(Mt({},j.state),{},{legendBBox:N}))))}}),gn(j,"handleReceiveSyncEvent",function(N,P,A){if(j.props.syncId===N){if(A===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(P)}}),gn(j,"handleBrushChange",function(N){var P=N.startIndex,A=N.endIndex;if(P!==j.state.dataStartIndex||A!==j.state.dataEndIndex){var k=j.state.updateId;j.setState(function(){return Mt({dataStartIndex:P,dataEndIndex:A},m({props:j.props,dataStartIndex:P,dataEndIndex:A,updateId:k},j.state))}),j.triggerSyncEvent({dataStartIndex:P,dataEndIndex:A})}}),gn(j,"handleMouseEnter",function(N){var P=j.getMouseInfo(N);if(P){var A=Mt(Mt({},P),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var k=j.props.onMouseEnter;vn(k)&&k(A,N)}}),gn(j,"triggeredAfterMouseMove",function(N){var P=j.getMouseInfo(N),A=P?Mt(Mt({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(A),j.triggerSyncEvent(A);var k=j.props.onMouseMove;vn(k)&&k(A,N)}),gn(j,"handleItemMouseEnter",function(N){j.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),gn(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),gn(j,"handleMouseMove",function(N){N.persist(),j.throttleTriggeredAfterMouseMove(N)}),gn(j,"handleMouseLeave",function(N){j.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var A=j.props.onMouseLeave;vn(A)&&A(P,N)}),gn(j,"handleOuterEvent",function(N){var P=t_e(N),A=Il(j.props,"".concat(P));if(P&&vn(A)){var k,M;/.*touch.*/i.test(P)?M=j.getMouseInfo(N.changedTouches[0]):M=j.getMouseInfo(N),A((k=M)!==null&&k!==void 0?k:{},N)}}),gn(j,"handleClick",function(N){var P=j.getMouseInfo(N);if(P){var A=Mt(Mt({},P),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var k=j.props.onClick;vn(k)&&k(A,N)}}),gn(j,"handleMouseDown",function(N){var P=j.props.onMouseDown;if(vn(P)){var A=j.getMouseInfo(N);P(A,N)}}),gn(j,"handleMouseUp",function(N){var P=j.props.onMouseUp;if(vn(P)){var A=j.getMouseInfo(N);P(A,N)}}),gn(j,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),gn(j,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseDown(N.changedTouches[0])}),gn(j,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseUp(N.changedTouches[0])}),gn(j,"handleDoubleClick",function(N){var P=j.props.onDoubleClick;if(vn(P)){var A=j.getMouseInfo(N);P(A,N)}}),gn(j,"handleContextMenu",function(N){var P=j.props.onContextMenu;if(vn(P)){var A=j.getMouseInfo(N);P(A,N)}}),gn(j,"triggerSyncEvent",function(N){j.props.syncId!==void 0&&LA.emit($A,j.props.syncId,N,j.eventEmitterSymbol)}),gn(j,"applySyncEvent",function(N){var P=j.props,A=P.layout,k=P.syncMethod,M=j.state.updateId,E=N.dataStartIndex,I=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)j.setState(Mt({dataStartIndex:E,dataEndIndex:I},m({props:j.props,dataStartIndex:E,dataEndIndex:I,updateId:M},j.state)));else if(N.activeTooltipIndex!==void 0){var O=N.chartX,R=N.chartY,B=N.activeTooltipIndex,W=j.state,F=W.offset,$=W.tooltipTicks;if(!F)return;if(typeof k=="function")B=k($,N);else if(k==="value"){B=-1;for(var H=0;H<$.length;H++)if($[H].value===N.activeLabel){B=H;break}}var ce=Mt(Mt({},F),{},{x:F.left,y:F.top}),oe=Math.min(O,ce.x+ce.width),L=Math.min(R,ce.y+ce.height),U=$[B]&&$[B].value,J=tT(j.state,j.props.data,B),V=$[B]?{x:A==="horizontal"?$[B].coordinate:oe,y:A==="horizontal"?L:$[B].coordinate}:oQ;j.setState(Mt(Mt({},N),{},{activeLabel:U,activeCoordinate:V,activePayload:J,activeTooltipIndex:B}))}else j.setState(N)}),gn(j,"renderCursor",function(N){var P,A=j.state,k=A.isTooltipActive,M=A.activeCoordinate,E=A.activePayload,I=A.offset,O=A.activeTooltipIndex,R=A.tooltipAxisBandSize,B=j.getTooltipEventType(),W=(P=N.props.active)!==null&&P!==void 0?P:k,F=j.props.layout,$=N.key||"_recharts-cursor";return se.createElement(f7e,{key:$,activeCoordinate:M,activePayload:E,activeTooltipIndex:O,chartName:r,element:N,isActive:W,layout:F,offset:I,tooltipAxisBandSize:R,tooltipEventType:B})}),gn(j,"renderPolarAxis",function(N,P,A){var k=Il(N,"type.axisType"),M=Il(j.state,"".concat(k,"Map")),E=N.type.defaultProps,I=E!==void 0?Mt(Mt({},E),N.props):N.props,O=M&&M[I["".concat(k,"Id")]];return v.cloneElement(N,Mt(Mt({},O),{},{className:An(k,O.className),key:N.key||"".concat(P,"-").concat(A),ticks:Ld(O,!0)}))}),gn(j,"renderPolarGrid",function(N){var P=N.props,A=P.radialLines,k=P.polarAngles,M=P.polarRadius,E=j.state,I=E.radiusAxisMap,O=E.angleAxisMap,R=Vf(I),B=Vf(O),W=B.cx,F=B.cy,$=B.innerRadius,H=B.outerRadius;return v.cloneElement(N,{polarAngles:Array.isArray(k)?k:Ld(B,!0).map(function(ce){return ce.coordinate}),polarRadius:Array.isArray(M)?M:Ld(R,!0).map(function(ce){return ce.coordinate}),cx:W,cy:F,innerRadius:$,outerRadius:H,key:N.key||"polar-grid",radialLines:A})}),gn(j,"renderLegend",function(){var N=j.state.formattedGraphicalItems,P=j.props,A=P.children,k=P.width,M=P.height,E=j.props.margin||{},I=k-(E.left||0)-(E.right||0),O=DX({children:A,formattedGraphicalItems:N,legendWidth:I,legendContent:u});if(!O)return null;var R=O.item,B=A7(O,h7e);return v.cloneElement(R,Mt(Mt({},B),{},{chartWidth:k,chartHeight:M,margin:E,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),gn(j,"renderTooltip",function(){var N,P=j.props,A=P.children,k=P.accessibilityLayer,M=_l(A,jl);if(!M)return null;var E=j.state,I=E.isTooltipActive,O=E.activeCoordinate,R=E.activePayload,B=E.activeLabel,W=E.offset,F=(N=M.props.active)!==null&&N!==void 0?N:I;return v.cloneElement(M,{viewBox:Mt(Mt({},W),{},{x:W.left,y:W.top}),active:F,label:B,payload:F?R:[],coordinate:O,accessibilityLayer:k})}),gn(j,"renderBrush",function(N){var P=j.props,A=P.margin,k=P.data,M=j.state,E=M.offset,I=M.dataStartIndex,O=M.dataEndIndex,R=M.updateId;return v.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Hw(j.handleBrushChange,N.props.onChange),data:k,x:ir(N.props.x)?N.props.x:E.left,y:ir(N.props.y)?N.props.y:E.top+E.height+E.brushBottom-(A.bottom||0),width:ir(N.props.width)?N.props.width:E.width,startIndex:I,endIndex:O,updateId:"brush-".concat(R)})}),gn(j,"renderReferenceElement",function(N,P,A){if(!N)return null;var k=j,M=k.clipPathId,E=j.state,I=E.xAxisMap,O=E.yAxisMap,R=E.offset,B=N.type.defaultProps||{},W=N.props,F=W.xAxisId,$=F===void 0?B.xAxisId:F,H=W.yAxisId,ce=H===void 0?B.yAxisId:H;return v.cloneElement(N,{key:N.key||"".concat(P,"-").concat(A),xAxis:I[$],yAxis:O[ce],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:M})}),gn(j,"renderActivePoints",function(N){var P=N.item,A=N.activePoint,k=N.basePoint,M=N.childIndex,E=N.isRange,I=[],O=P.props.key,R=P.item.type.defaultProps!==void 0?Mt(Mt({},P.item.type.defaultProps),P.item.props):P.item.props,B=R.activeDot,W=R.dataKey,F=Mt(Mt({index:M,dataKey:W,cx:A.x,cy:A.y,r:4,fill:FI(P.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},tn(B,!1)),q_(B));return I.push(y.renderActiveDot(B,F,"".concat(O,"-activePoint-").concat(M))),k?I.push(y.renderActiveDot(B,Mt(Mt({},F),{},{cx:k.x,cy:k.y}),"".concat(O,"-basePoint-").concat(M))):E&&I.push(null),I}),gn(j,"renderGraphicChild",function(N,P,A){var k=j.filterFormatItem(N,P,A);if(!k)return null;var M=j.getTooltipEventType(),E=j.state,I=E.isTooltipActive,O=E.tooltipAxis,R=E.activeTooltipIndex,B=E.activeLabel,W=j.props.children,F=_l(W,jl),$=k.props,H=$.points,ce=$.isRange,oe=$.baseLine,L=k.item.type.defaultProps!==void 0?Mt(Mt({},k.item.type.defaultProps),k.item.props):k.item.props,U=L.activeDot,J=L.hide,V=L.activeBar,Z=L.activeShape,K=!!(!J&&I&&F&&(U||V||Z)),he={};M!=="axis"&&F&&F.props.trigger==="click"?he={onClick:Hw(j.handleItemMouseEnter,N.props.onClick)}:M!=="axis"&&(he={onMouseLeave:Hw(j.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Hw(j.handleItemMouseEnter,N.props.onMouseEnter)});var te=v.cloneElement(N,Mt(Mt({},k.props),he));function me(_t){return typeof O.dataKey=="function"?O.dataKey(_t.payload):null}if(K)if(R>=0){var Ee,Se;if(O.dataKey&&!O.allowDuplicatedCategory){var We=typeof O.dataKey=="function"?me:"payload.".concat(O.dataKey.toString());Ee=z_(H,We,B),Se=ce&&oe&&z_(oe,We,B)}else Ee=H?.[R],Se=ce&&oe&&oe[R];if(Z||V){var be=N.props.activeIndex!==void 0?N.props.activeIndex:R;return[v.cloneElement(N,Mt(Mt(Mt({},k.props),he),{},{activeIndex:be})),null,null]}if(!Cn(Ee))return[te].concat(Yv(j.renderActivePoints({item:k,activePoint:Ee,basePoint:Se,childIndex:R,isRange:ce})))}else{var ne,Qt=(ne=j.getItemByXY(j.state.activeCoordinate))!==null&&ne!==void 0?ne:{graphicalItem:te},bt=Qt.graphicalItem,Pt=bt.item,Qe=Pt===void 0?N:Pt,ft=bt.childIndex,mt=Mt(Mt(Mt({},k.props),he),{},{activeIndex:ft});return[v.cloneElement(Qe,mt),null,null]}return ce?[te,null,null]:[te,null]}),gn(j,"renderCustomized",function(N,P,A){return v.cloneElement(N,Mt(Mt({key:"recharts-customized-".concat(A)},j.props),j.state))}),gn(j,"renderMap",{CartesianGrid:{handler:Jw,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Jw},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Jw},YAxis:{handler:Jw},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Dp("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=IY(j.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return j7e(y,x),b7e(y,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,j=w.data,N=w.height,P=w.layout,A=_l(_,jl);if(A){var k=A.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,E=tT(this.state,j,k,M),I=this.state.tooltipTicks[k].coordinate,O=(this.state.offset.top+N)/2,R=P==="horizontal",B=R?{x:I,y:O}:{y:I,x:O},W=this.state.formattedGraphicalItems.find(function($){var H=$.item;return H.type.name==="Scatter"});W&&(B=Mt(Mt({},B),W.props.points[k].tooltipPosition),E=W.props.points[k].tooltipPayload);var F={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:M,activePayload:E,activeCoordinate:B};this.setState(F),this.renderCursor(A),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,N;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){Pk([_l(w.children,jl)],[_l(this.props.children,jl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=_l(this.props.children,jl);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),N=NOe(j),P={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},A=j.width/_.offsetWidth||1,k=this.inRange(P.chartX,P.chartY,A);if(!k)return null;var M=this.state,E=M.xAxisMap,I=M.yAxisMap,O=this.getTooltipEventType(),R=k7(this.state,this.props.data,this.props.layout,k);if(O!=="axis"&&E&&I){var B=Vf(E).scale,W=Vf(I).scale,F=B&&B.invert?B.invert(P.chartX):null,$=W&&W.invert?W.invert(P.chartY):null;return Mt(Mt({},P),{},{xValue:F,yValue:$},R)}return R?Mt(Mt({},P),R):null}},{key:"inRange",value:function(w,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,P=w/j,A=_/j;if(N==="horizontal"||N==="vertical"){var k=this.state.offset,M=P>=k.left&&P<=k.left+k.width&&A>=k.top&&A<=k.top+k.height;return M?{x:P,y:A}:null}var E=this.state,I=E.angleAxisMap,O=E.radiusAxisMap;if(I&&O){var R=Vf(I);return W8({x:P,y:A},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),j=_l(w,jl),N={};j&&_==="axis"&&(j.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=q_(this.props,this.handleOuterEvent);return Mt(Mt({},P),N)}},{key:"addListener",value:function(){LA.on($A,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){LA.removeListener($A,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,j){for(var N=this.state.formattedGraphicalItems,P=0,A=N.length;P<A;P++){var k=N[P];if(k.item===w||k.props.key===w.key||_===qd(k.item.type)&&j===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,j=_.left,N=_.top,P=_.height,A=_.width;return se.createElement("defs",null,se.createElement("clipPath",{id:w},se.createElement("rect",{x:j,y:N,height:P,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,j){var N=C7(j,2),P=N[0],A=N[1];return Mt(Mt({},_),{},gn({},P,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,j){var N=C7(j,2),P=N[0],A=N[1];return Mt(Mt({},_),{},gn({},P,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,j=_.formattedGraphicalItems,N=_.activeItem;if(j&&j.length)for(var P=0,A=j.length;P<A;P++){var k=j[P],M=k.props,E=k.item,I=E.type.defaultProps!==void 0?Mt(Mt({},E.type.defaultProps),E.props):E.props,O=qd(E.type);if(O==="Bar"){var R=(M.data||[]).find(function($){return oLe(w,$)});if(R)return{graphicalItem:k,payload:R}}else if(O==="RadialBar"){var B=(M.data||[]).find(function($){return W8(w,$)});if(B)return{graphicalItem:k,payload:B}}else if(UN(k,N)||VN(k,N)||yb(k,N)){var W=K6e({graphicalItem:k,activeTooltipItem:N,itemData:I.data}),F=I.activeIndex===void 0?W:I.activeIndex;return{graphicalItem:Mt(Mt({},k),{},{childIndex:F}),payload:yb(k,N)?I.data[W]:k.props.data[W]}}}return null}},{key:"render",value:function(){var w=this;if(!T$(this))return null;var _=this.props,j=_.children,N=_.className,P=_.width,A=_.height,k=_.style,M=_.compact,E=_.title,I=_.desc,O=A7(_,m7e),R=tn(O,!1);if(M)return se.createElement(e7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(kk,Ug({},R,{width:P,height:A,title:E,desc:I}),this.renderClipPath(),D$(j,this.renderMap)));if(this.props.accessibilityLayer){var B,W;R.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,R.role=(W=this.props.role)!==null&&W!==void 0?W:"application",R.onKeyDown=function($){w.accessibilityManager.keyboardEvent($)},R.onFocus=function(){w.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return se.createElement(e7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Ug({className:An("recharts-wrapper",N),style:Mt({position:"relative",cursor:"default",width:P,height:A},k)},F,{ref:function(H){w.container=H}}),se.createElement(kk,Ug({},R,{width:P,height:A,title:E,desc:I,style:k7e}),this.renderClipPath(),D$(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);gn(g,"displayName",r),gn(g,"defaultProps",Mt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),gn(g,"getDerivedStateFromProps",function(x,y){var b=x.dataKey,w=x.data,_=x.children,j=x.width,N=x.height,P=x.layout,A=x.stackOffset,k=x.margin,M=y.dataStartIndex,E=y.dataEndIndex;if(y.updateId===void 0){var I=O7(x);return Mt(Mt(Mt({},I),{},{updateId:0},m(Mt(Mt({props:x},I),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:N,prevLayout:P,prevStackOffset:A,prevMargin:k,prevChildren:_})}if(b!==y.prevDataKey||w!==y.prevData||j!==y.prevWidth||N!==y.prevHeight||P!==y.prevLayout||A!==y.prevStackOffset||!ev(k,y.prevMargin)){var O=O7(x),R={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},B=Mt(Mt({},k7(y,w,P)),{},{updateId:y.updateId+1}),W=Mt(Mt(Mt({},O),R),B);return Mt(Mt(Mt({},W),m(Mt({props:x},W),y)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:N,prevLayout:P,prevStackOffset:A,prevMargin:k,prevChildren:_})}if(!Pk(_,y.prevChildren)){var F,$,H,ce,oe=_l(_,$v),L=oe&&(F=($=oe.props)===null||$===void 0?void 0:$.startIndex)!==null&&F!==void 0?F:M,U=oe&&(H=(ce=oe.props)===null||ce===void 0?void 0:ce.endIndex)!==null&&H!==void 0?H:E,J=L!==M||U!==E,V=!Cn(w),Z=V&&!J?y.updateId:y.updateId+1;return Mt(Mt({updateId:Z},m(Mt(Mt({props:x},y),{},{updateId:Z,dataStartIndex:L,dataEndIndex:U}),y)),{},{prevChildren:_,dataStartIndex:L,dataEndIndex:U})}return null}),gn(g,"renderActiveDot",function(x,y,b){var w;return v.isValidElement(x)?w=v.cloneElement(x,y):vn(x)?w=x(y):w=se.createElement(g1,y),se.createElement(Zn,{className:"recharts-active-dot",key:b},w)});var p=v.forwardRef(function(y,b){return se.createElement(g,Ug({},y,{ref:b}))});return p.displayName=g.displayName,p},B7e=JN({chartName:"LineChart",GraphicalChild:v1,axisComponents:[{axisType:"xAxis",AxisComp:vp},{axisType:"yAxis",AxisComp:xp}],formatAxisMap:qI}),z7e=JN({chartName:"BarChart",GraphicalChild:$p,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:vp},{axisType:"yAxis",AxisComp:xp}],formatAxisMap:qI}),q7e=JN({chartName:"PieChart",GraphicalChild:rd,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qN},{axisType:"radiusAxis",AxisComp:BN}],formatAxisMap:wDe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),U7e=JN({chartName:"AreaChart",GraphicalChild:Hh,axisComponents:[{axisType:"xAxis",AxisComp:vp},{axisType:"yAxis",AxisComp:xp}],formatAxisMap:qI});const I7=({icon:e,title:t,value:r,trend:n,trendValue:a,color:i,className:s,loading:l})=>{const c=n==="up"?e4:Wce,u=n==="up"?"text-success":"text-danger";return o.jsx(Pr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group flex flex-col justify-between ${s}`,children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10",style:{color:`var(--${i})`},children:o.jsx(e,{className:"h-5 w-5"})}),!l&&n&&a&&o.jsxs("div",{className:`flex items-center text-xs font-bold ${u}`,children:[o.jsx(c,{className:"w-3.5 h-3.5 mr-1"}),o.jsx("span",{children:a})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2",children:t}),l?o.jsx("div",{className:"h-9 bg-white/5 rounded animate-pulse"}):o.jsx("p",{className:"text-3xl font-bold text-text-primary tabular-nums tracking-tight",children:r})]})]})})},V7e=({alerts:e,className:t})=>{const r=wc(),[n,a]=v.useState(!1),i=d=>({Package:bv,DollarSign:Gs,CalendarCheck:t4,Clock:xv,ShoppingCart:Zb,Store:n4,Users:As,CalendarPlus:r4,AlertTriangle:sp,Info:bW})[d]||sp,s=d=>({danger:"text-danger",warning:"text-warning",info:"text-info",success:"text-success",purple:"text-purple"})[d]||"text-warning",l=e.length>2?e.slice(0,2):e,c=e.length>2,u=({alert:d,onClick:f})=>{const h=i(d.icone),m=s(d.cor);return o.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-white/5 transition-colors cursor-pointer group",onClick:f,children:[o.jsx(h,{className:`w-4 h-4 flex-shrink-0 ${m}`}),o.jsx("span",{className:"text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:d.mensagem}),d.link&&o.jsx(e4,{className:"w-3 h-3 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]})};return o.jsxs(o.Fragment,{children:[o.jsxs(Pr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card ${t||""}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center",children:[o.jsx(w_,{className:"mr-2 h-5 w-5 text-brand"})," Alertas do Dia"]}),c&&o.jsx(ye,{variant:"ghost",size:"sm",className:"text-xs text-brand hover:text-brand/80",onClick:()=>a(!0),children:"Ver todos"})]}),e.length===0?o.jsx("p",{className:"text-sm text-text-muted",children:"Nenhum alerta no momento! "}):o.jsx("ul",{className:"space-y-2 text-sm",children:l.map((d,f)=>o.jsx(u,{alert:d,onClick:()=>d.link&&r(d.link)},f))})]}),o.jsx(cn,{open:n,onOpenChange:a,children:o.jsxs(on,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsx(an,{children:o.jsxs(en,{className:"flex items-center gap-2",children:[o.jsx(w_,{className:"h-5 w-5 text-brand"}),"Todos os Alertas (",e.length,")"]})}),o.jsx("div",{className:"mt-4",children:e.length===0?o.jsx("p",{className:"text-sm text-text-muted text-center py-8",children:"Nenhum alerta no momento! "}):o.jsx("ul",{className:"space-y-2 text-sm",children:e.map((d,f)=>o.jsx(u,{alert:d,onClick:()=>{d.link&&(r(d.link),a(!1))}},f))})})]})})]})},W7e=({title:e,icon:t,data:r,color:n,className:a,loading:i})=>{const s=r.reduce((u,d)=>u+(d.receita||0),0),l=r.reduce((u,d)=>u+(d.despesa||0),0),c=s-l;return o.jsxs(Pr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group ${a||""}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10 mr-3",style:{color:`var(--${n})`},children:o.jsx(t,{className:"h-5 w-5"})}),o.jsx("h3",{className:"text-base font-bold text-text-primary flex-1",children:e}),o.jsx("div",{className:"text-xs font-semibold text-text-muted",children:"ltimos 14 dias"})]}),o.jsx("div",{className:"mb-2",children:o.jsx(R2,{width:"100%",height:90,children:o.jsxs(U7e,{data:r,margin:{top:4,right:0,left:0,bottom:0},children:[o.jsx(jl,{cursor:{stroke:"var(--border)",strokeDasharray:"3 3"},contentStyle:{background:"rgba(10, 10, 10, 0.85)",borderColor:"var(--border)",color:"var(--text-primary)",borderRadius:"var(--radius-sm)"},formatter:(u,d)=>d==="saldo"?[`R$ ${u.toLocaleString("pt-BR")}`,"Saldo"]:u,labelFormatter:u=>u}),o.jsx(Hh,{type:"monotone",dataKey:"saldo",stroke:"var(--brand)",strokeWidth:2,fill:"var(--brand)",fillOpacity:.15})]})})}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-text-secondary",children:"Receita"}),i?o.jsx("div",{className:"h-5 w-20 bg-white/5 rounded animate-pulse mt-1"}):o.jsxs("p",{className:"font-bold text-success tabular-nums",children:["R$ ",s.toLocaleString("pt-BR")]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-text-secondary",children:"Despesa"}),i?o.jsx("div",{className:"h-5 w-20 bg-white/5 rounded animate-pulse mt-1"}):o.jsxs("p",{className:"font-bold text-danger tabular-nums",children:["R$ ",l.toLocaleString("pt-BR")]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-text-secondary",children:"Saldo"}),i?o.jsx("div",{className:"h-5 w-20 bg-white/5 rounded animate-pulse mt-1"}):o.jsxs("p",{className:"font-bold text-text-primary tabular-nums",children:["R$ ",c.toLocaleString("pt-BR")]})]})]})]})},H7e=({title:e,icon:t,data:r,color:n,className:a,loading:i})=>o.jsxs(Pr.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group flex flex-col ${a||""}`,children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10 mr-3",style:{color:`var(--${n})`},children:o.jsx(t,{className:"h-5 w-5"})}),o.jsx("h3",{className:"text-base font-bold text-text-primary",children:e})]}),o.jsx("div",{className:"space-y-3 mt-auto",children:i?Array.from({length:3}).map((s,l)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("div",{className:"h-4 w-24 bg-white/5 rounded animate-pulse"}),o.jsx("div",{className:"h-4 w-12 bg-white/5 rounded animate-pulse"})]},l)):r.map((s,l)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-text-secondary",children:s.name}),o.jsx("span",{className:"font-bold text-text-primary tabular-nums",children:s.value})]},l))})]}),G7e={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1,delayChildren:.2}}},BA={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}};function K7e(){Qa();const{userProfile:e}=Wi(),{alerts:t}=iN(),r=wc(),[n,a]=v.useState(!0),[i,s]=v.useState(0),[l,c]=v.useState({finalizados:0,total:0}),[u,d]=v.useState(0),[f,h]=v.useState(0),[m,g]=v.useState(0),[p,x]=v.useState(0),[y,b]=v.useState(0),[w,_]=v.useState(0),[j,N]=v.useState([]);v.useEffect(()=>{(async()=>{if(e?.codigo_empresa)try{a(!0);const M=e.codigo_empresa,E=new Date,I=Pl(E).toISOString(),O=Sk(E).toISOString(),{data:R}=await Ne.from("pagamentos").select("valor, status").eq("codigo_empresa",M).gte("recebido_em",I).lte("recebido_em",O),B=(R||[]).filter(ne=>!["Cancelado","Estornado"].includes(ne.status)).reduce((ne,Qt)=>ne+Number(Qt.valor||0),0),{data:W}=await Ne.from("agendamentos").select("id").eq("codigo_empresa",M).gte("inicio",I).lte("inicio",O);let F=0;if(W&&W.length>0){const ne=W.map(bt=>bt.id),{data:Qt}=await Ne.from("agendamento_participantes").select("valor_cota, status_pagamento, aplicar_taxa, finalizadora_id, finalizadoras!agp_finalizadora_id_fkey(taxa_percentual)").eq("codigo_empresa",M).in("agendamento_id",ne).eq("status_pagamento","Pago");F=(Qt||[]).reduce((bt,Pt)=>{let Qe=Number(Pt.valor_cota||0);if(Pt.aplicar_taxa===!0){const ft=Number(Pt.finalizadoras?.taxa_percentual||0);ft>0&&(Qe=Qe/(1+ft/100))}return bt+Qe},0)}const $=B+F;s($);const{data:H}=await Ne.from("agendamentos").select("id, status, inicio, fim").eq("codigo_empresa",M).gte("inicio",I).lte("inicio",O),ce=(H||[]).filter(ne=>ne.status==="finished").length;c({finalizados:ce,total:H?.length||0});const oe=new Date().toISOString(),L=(H||[]).filter(ne=>ne.inicio>oe&&!["canceled","finished"].includes(ne.status)).length;d(L);const U=(H||[]).filter(ne=>ne.status==="in_progress").length;h(U);const{data:J}=await Ne.from("quadras").select("id").eq("codigo_empresa",M),K=(J?.length||0)*17;let he=0;for(const ne of H||[])if(!["canceled","no_show"].includes(ne.status))if(ne.inicio&&ne.fim){const Qt=new Date(ne.inicio),Qe=(new Date(ne.fim)-Qt)/(1e3*60*60);he+=Qe}else he+=1;const te=K>0?Math.round(he/K*100):0;g(te);const{data:me}=await Ne.from("comandas").select("id").eq("codigo_empresa",M).eq("status","open");x(me?.length||0);const{data:Ee}=await Ne.from("mesas").select("id, status").eq("codigo_empresa",M),Se=(Ee||[]).filter(ne=>["in-use","awaiting-payment"].includes(ne.status)).length;b(Se);const{data:We}=await Ne.from("comandas").select("id").eq("codigo_empresa",M).eq("status","closed").gte("fechado_em",I).lte("fechado_em",O);_(We?.length||0);const be=[];for(let ne=13;ne>=0;ne--){const Qt=new Date;Qt.setDate(Qt.getDate()-ne);const bt=Pl(Qt).toISOString(),Pt=Sk(Qt).toISOString(),{data:Qe}=await Ne.from("pagamentos").select("valor, status").eq("codigo_empresa",M).gte("recebido_em",bt).lte("recebido_em",Pt),ft=(Qe||[]).filter(Ct=>!["Cancelado","Estornado"].includes(Ct.status)).reduce((Ct,At)=>Ct+Number(At.valor||0),0),{data:mt}=await Ne.from("agendamentos").select("id").eq("codigo_empresa",M).gte("inicio",bt).lte("inicio",Pt);let _t=0;if(mt&&mt.length>0){const Ct=mt.map(Wt=>Wt.id),{data:At}=await Ne.from("agendamento_participantes").select("valor_cota").eq("codigo_empresa",M).in("agendamento_id",Ct).eq("status_pagamento","Pago");_t=(At||[]).reduce((Wt,wt)=>Wt+Number(wt.valor_cota||0),0)}const ue=ft+_t;be.push({name:ne===0?"Hoje":`${ne}d`,saldo:Math.round(ue),receita:Math.round(ue),despesa:0})}N(be)}catch(M){console.error("Erro ao carregar dashboard:",M)}finally{a(!1)}})()},[e?.codigo_empresa]);const P=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(k||0)),A=[{name:"Comandas Abertas",value:p},{name:"Mesas Ocupadas",value:y},{name:"Vendas Hoje",value:w}];return o.jsx(o.Fragment,{children:o.jsxs(Pr.div,{variants:G7e,initial:"hidden",animate:"visible",className:"space-y-4",children:[o.jsxs(Pr.div,{variants:BA,className:"relative grid grid-cols-1 xl:grid-cols-12 gap-4 items-start",children:[o.jsx("div",{className:"xl:col-span-8",children:o.jsxs("div",{className:"bg-surface/70 backdrop-blur-sm relative p-4 rounded-xl border border-white/10 overflow-hidden shadow-1",children:[o.jsx("div",{className:"absolute inset-0 bg-court-pattern opacity-[0.03] mix-blend-overlay"}),o.jsxs("div",{className:"relative z-10 max-w-[720px]",children:[o.jsxs("h1",{className:"text-3xl font-black mb-2 text-text-primary tracking-tighter",children:["Bem-vindo de volta, ",o.jsxs("span",{className:"text-brand",children:[(e?.nome_exibicao||e?.nome||e?.email?.split("@")[0]||"Admin").split(" ")[0],"!"]})]}),o.jsx("p",{className:"text-text-secondary mb-3 max-w-[60ch] text-sm md:text-base font-normal",children:"Sua central de comando para uma gesto de sucesso. Monitore agendamentos, faturamento e clientes em um s lugar."}),o.jsxs("div",{className:"flex flex-wrap gap-2.5",children:[o.jsxs(ye,{onClick:()=>r("/agenda",{state:{openModal:!0}}),size:"default",children:[o.jsx(r4,{className:"mr-2 h-4 w-4"}),"+ Agendamento"]}),o.jsxs(ye,{onClick:()=>r("/clientes",{state:{openModal:!0}}),variant:"outline",size:"default",children:[o.jsx(As,{className:"mr-2 h-4 w-4"}),"Adicionar Cliente"]})]})]})]})}),o.jsx("div",{className:"xl:col-span-4",children:o.jsxs("div",{className:"fx-card",children:[o.jsxs("h2",{className:"text-lg font-bold text-text-primary mb-3 flex items-center",children:[o.jsx(xv,{className:"mr-2 h-5 w-5 text-brand"})," Resumo do Dia"]}),o.jsxs("ul",{className:"space-y-2 text-sm",children:[o.jsxs("li",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-text-secondary",children:"Prximas Reservas"}),n?o.jsx("div",{className:"h-6 w-12 bg-white/5 rounded animate-pulse"}):o.jsx("span",{className:"font-bold text-text-primary tabular-nums",children:u})]}),o.jsxs("li",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-text-secondary",children:"Quadras em Uso"}),n?o.jsx("div",{className:"h-6 w-12 bg-white/5 rounded animate-pulse"}):o.jsx("span",{className:"font-bold text-success tabular-nums",children:f})]}),o.jsxs("li",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-text-secondary",children:"Taxa de Ocupao"}),n?o.jsx("div",{className:"h-6 w-16 bg-white/5 rounded animate-pulse"}):o.jsxs("span",{className:`font-bold tabular-nums ${m>=70?"text-success":m>=40?"text-warning":"text-danger"}`,children:[m,"%"]})]})]})]})})]}),o.jsxs(Pr.div,{variants:BA,className:"relative grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-12 gap-4 items-stretch",children:[o.jsx("div",{className:"xl:col-span-3",children:o.jsx(I7,{icon:Gs,title:"Faturamento do Dia",value:P(i),color:"success",className:"h-full",loading:n})}),o.jsx("div",{className:"xl:col-span-3",children:o.jsx(I7,{icon:t4,title:"Agend. Finalizados",value:`${l.finalizados} de ${l.total}`,color:"info",className:"h-full",loading:n})}),o.jsx("div",{className:"xl:col-span-3",children:o.jsx(V7e,{className:"h-full",alerts:t})}),o.jsx("div",{className:"xl:col-span-3",children:o.jsx(H7e,{icon:n4,title:"Informaes da Loja",data:A,color:"purple",className:"h-full",loading:n})})]}),o.jsx(Pr.div,{variants:BA,className:"grid grid-cols-1 gap-4",children:o.jsx(W7e,{icon:e1,title:"Resumo Financeiro",data:j,color:"brand",loading:n})})]})})}var Y7e={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},X7e=function(t,r,n){var a,i=Y7e[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",String(r)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+a:"h "+a:a};const J7e=X7e;var Q7e={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Z7e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},eze={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tze={date:Zg({formats:Q7e,defaultWidth:"full"}),time:Zg({formats:Z7e,defaultWidth:"full"}),dateTime:Zg({formats:eze,defaultWidth:"full"})};const rze=tze;var nze={lastWeek:function(t){var r=t.getUTCDay(),n=r===0||r===6?"ltimo":"ltima";return"'"+n+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},aze=function(t,r,n,a){var i=nze[t];return typeof i=="function"?i(r):i};const ize=aze;var oze={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},sze={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},lze={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},cze={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},uze={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},dze={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},fze=function(t,r){var n=Number(t);return r?.unit==="week"?n+"":n+""},hze={ordinalNumber:fze,era:Ou({values:oze,defaultWidth:"wide"}),quarter:Ou({values:sze,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ou({values:lze,defaultWidth:"wide"}),day:Ou({values:cze,defaultWidth:"wide"}),dayPeriod:Ou({values:uze,defaultWidth:"wide",formattingValues:dze,defaultFormattingWidth:"wide"})};const mze=hze;var pze=/^(\d+)[o]?/i,gze=/\d+/i,vze={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},xze={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},yze={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},bze={any:[/1/i,/2/i,/3/i,/4/i]},wze={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},_ze={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Sze={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},jze={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},Nze={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},Cze={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Aze={ordinalNumber:uK({matchPattern:pze,parsePattern:gze,valueCallback:function(t){return parseInt(t,10)}}),era:Tu({matchPatterns:vze,defaultMatchWidth:"wide",parsePatterns:xze,defaultParseWidth:"any"}),quarter:Tu({matchPatterns:yze,defaultMatchWidth:"wide",parsePatterns:bze,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Tu({matchPatterns:wze,defaultMatchWidth:"wide",parsePatterns:_ze,defaultParseWidth:"any"}),day:Tu({matchPatterns:Sze,defaultMatchWidth:"wide",parsePatterns:jze,defaultParseWidth:"any"}),dayPeriod:Tu({matchPatterns:Nze,defaultMatchWidth:"any",parsePatterns:Cze,defaultParseWidth:"any"})};const Pze=Aze;var Eze={code:"pt-BR",formatDistance:J7e,formatLong:rze,formatRelative:ize,localize:mze,match:Pze,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Fc=Eze,kze=["top","right","bottom","left"],kh=Math.min,Nl=Math.max,VS=Math.round,Qw=Math.floor,Xu=e=>({x:e,y:e}),Oze={left:"right",right:"left",bottom:"top",top:"bottom"},Tze={start:"end",end:"start"};function rT(e,t,r){return Nl(e,kh(t,r))}function ef(e,t){return typeof e=="function"?e(t):e}function tf(e){return e.split("-")[0]}function Cx(e){return e.split("-")[1]}function QI(e){return e==="x"?"y":"x"}function ZI(e){return e==="y"?"height":"width"}const Ize=new Set(["top","bottom"]);function Fu(e){return Ize.has(tf(e))?"y":"x"}function eD(e){return QI(Fu(e))}function Dze(e,t,r){r===void 0&&(r=!1);const n=Cx(e),a=eD(e),i=ZI(a);let s=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=WS(s)),[s,WS(s)]}function Mze(e){const t=WS(e);return[nT(e),t,nT(t)]}function nT(e){return e.replace(/start|end/g,t=>Tze[t])}const D7=["left","right"],M7=["right","left"],Rze=["top","bottom"],Lze=["bottom","top"];function $ze(e,t,r){switch(e){case"top":case"bottom":return r?t?M7:D7:t?D7:M7;case"left":case"right":return t?Rze:Lze;default:return[]}}function Fze(e,t,r,n){const a=Cx(e);let i=$ze(tf(e),r==="start",n);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(nT)))),i}function WS(e){return e.replace(/left|right|bottom|top/g,t=>Oze[t])}function Bze(e){return{top:0,right:0,bottom:0,left:0,...e}}function lQ(e){return typeof e!="number"?Bze(e):{top:e,right:e,bottom:e,left:e}}function HS(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function R7(e,t,r){let{reference:n,floating:a}=e;const i=Fu(t),s=eD(t),l=ZI(s),c=tf(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Cx(t)){case"start":m[s]-=h*(r&&u?-1:1);break;case"end":m[s]+=h*(r&&u?-1:1);break}return m}const zze=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:s}=r,l=i.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=R7(u,n,c),h=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:x,fn:y}=l[p],{x:b,y:w,data:_,reset:j}=await y({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:s,elements:{reference:e,floating:t}});d=b??d,f=w??f,m={...m,[x]:{...m[x],..._}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=R7(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function Cb(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:s,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=ef(t,e),g=lQ(m),x=l[h?f==="floating"?"reference":"floating":f],y=HS(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(x)))==null||r?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:n,y:a,width:s.floating.width,height:s.floating.height}:s.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=HS(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-j.top+g.top)/_.y,bottom:(j.bottom-y.bottom+g.bottom)/_.y,left:(y.left-j.left+g.left)/_.x,right:(j.right-y.right+g.right)/_.x}}const qze=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:s,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ef(e,t)||{};if(u==null)return{};const f=lQ(d),h={x:r,y:n},m=eD(a),g=ZI(m),p=await s.getDimensions(u),x=m==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let P=N?N[w]:0;(!P||!await(s.isElement==null?void 0:s.isElement(N)))&&(P=l.floating[w]||i.floating[g]);const A=_/2-j/2,k=P/2-p[g]/2-1,M=kh(f[y],k),E=kh(f[b],k),I=M,O=P-p[g]-E,R=P/2-p[g]/2+A,B=rT(I,R,O),W=!c.arrow&&Cx(a)!=null&&R!==B&&i.reference[g]/2-(R<I?M:E)-p[g]/2<0,F=W?R<I?R-I:R-O:0;return{[m]:h[m]+F,data:{[m]:B,centerOffset:R-B-F,...W&&{alignmentOffset:F}},reset:W}}}),Uze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:s,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...x}=ef(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=tf(a),b=Fu(l),w=tf(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!p?[WS(l)]:Mze(l)),N=g!=="none";!h&&N&&j.push(...Fze(l,p,g,_));const P=[l,...j],A=await Cb(t,x),k=[];let M=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&k.push(A[y]),f){const R=Dze(a,s,_);k.push(A[R[0]],A[R[1]])}if(M=[...M,{placement:a,overflows:k}],!k.every(R=>R<=0)){var E,I;const R=(((E=i.flip)==null?void 0:E.index)||0)+1,B=P[R];if(B&&(!(f==="alignment"?b!==Fu(B):!1)||M.every($=>Fu($.placement)===b?$.overflows[0]>0:!0)))return{data:{index:R,overflows:M},reset:{placement:B}};let W=(I=M.filter(F=>F.overflows[0]<=0).sort((F,$)=>F.overflows[1]-$.overflows[1])[0])==null?void 0:I.placement;if(!W)switch(m){case"bestFit":{var O;const F=(O=M.filter($=>{if(N){const H=Fu($.placement);return H===b||H==="y"}return!0}).map($=>[$.placement,$.overflows.filter(H=>H>0).reduce((H,ce)=>H+ce,0)]).sort(($,H)=>$[1]-H[1])[0])==null?void 0:O[0];F&&(W=F);break}case"initialPlacement":W=l;break}if(a!==W)return{reset:{placement:W}}}return{}}}};function L7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $7(e){return kze.some(t=>e[t]>=0)}const Vze=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=ef(e,t);switch(n){case"referenceHidden":{const i=await Cb(t,{...a,elementContext:"reference"}),s=L7(i,r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:$7(s)}}}case"escaped":{const i=await Cb(t,{...a,altBoundary:!0}),s=L7(i,r.floating);return{data:{escapedOffsets:s,escaped:$7(s)}}}default:return{}}}}},cQ=new Set(["left","top"]);async function Wze(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),s=tf(r),l=Cx(r),c=Fu(r)==="y",u=cQ.has(s)?-1:1,d=i&&c?-1:1,f=ef(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const Hze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:s,middlewareData:l}=t,c=await Wze(t,e);return s===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:s}}}}},Gze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=ef(e,t),u={x:r,y:n},d=await Cb(t,c),f=Fu(tf(a)),h=QI(f);let m=u[h],g=u[f];if(i){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+d[x],w=m-d[y];m=rT(b,m,w)}if(s){const x=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=g+d[x],w=g-d[y];g=rT(b,g,w)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[f]:s}}}}}},Kze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:s}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ef(e,t),d={x:r,y:n},f=Fu(a),h=QI(f);let m=d[h],g=d[f];const p=ef(l,t),x=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",_=i.reference[h]-i.floating[w]+x.mainAxis,j=i.reference[h]+i.reference[w]-x.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var y,b;const w=h==="y"?"width":"height",_=cQ.has(tf(a)),j=i.reference[f]-i.floating[w]+(_&&((y=s.offset)==null?void 0:y[f])||0)+(_?0:x.crossAxis),N=i.reference[f]+i.reference[w]+(_?0:((b=s.offset)==null?void 0:b[f])||0)-(_?x.crossAxis:0);g<j?g=j:g>N&&(g=N)}return{[h]:m,[f]:g}}}},Yze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:s,elements:l}=t,{apply:c=()=>{},...u}=ef(e,t),d=await Cb(t,u),f=tf(a),h=Cx(a),m=Fu(a)==="y",{width:g,height:p}=i.floating;let x,y;f==="top"||f==="bottom"?(x=f,y=h===(await(s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,x=h==="end"?"top":"bottom");const b=p-d.top-d.bottom,w=g-d.left-d.right,_=kh(p-d[x],b),j=kh(g-d[y],w),N=!t.middlewareData.shift;let P=_,A=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(A=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(P=b),N&&!h){const M=Nl(d.left,0),E=Nl(d.right,0),I=Nl(d.top,0),O=Nl(d.bottom,0);m?A=g-2*(M!==0||E!==0?M+E:Nl(d.left,d.right)):P=p-2*(I!==0||O!==0?I+O:Nl(d.top,d.bottom))}await c({...t,availableWidth:A,availableHeight:P});const k=await s.getDimensions(l.floating);return g!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function QN(){return typeof window<"u"}function Ax(e){return uQ(e)?(e.nodeName||"").toLowerCase():"#document"}function Ml(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sd(e){var t;return(t=(uQ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function uQ(e){return QN()?e instanceof Node||e instanceof Ml(e).Node:!1}function du(e){return QN()?e instanceof Element||e instanceof Ml(e).Element:!1}function nd(e){return QN()?e instanceof HTMLElement||e instanceof Ml(e).HTMLElement:!1}function F7(e){return!QN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ml(e).ShadowRoot}const Xze=new Set(["inline","contents"]);function x1(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=fu(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Xze.has(a)}const Jze=new Set(["table","td","th"]);function Qze(e){return Jze.has(Ax(e))}const Zze=[":popover-open",":modal"];function ZN(e){return Zze.some(t=>{try{return e.matches(t)}catch{return!1}})}const eqe=["transform","translate","scale","rotate","perspective"],tqe=["transform","translate","scale","rotate","perspective","filter"],rqe=["paint","layout","strict","content"];function tD(e){const t=rD(),r=du(e)?fu(e):e;return eqe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||tqe.some(n=>(r.willChange||"").includes(n))||rqe.some(n=>(r.contain||"").includes(n))}function nqe(e){let t=Oh(e);for(;nd(t)&&!Xv(t);){if(tD(t))return t;if(ZN(t))return null;t=Oh(t)}return null}function rD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aqe=new Set(["html","body","#document"]);function Xv(e){return aqe.has(Ax(e))}function fu(e){return Ml(e).getComputedStyle(e)}function eC(e){return du(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Oh(e){if(Ax(e)==="html")return e;const t=e.assignedSlot||e.parentNode||F7(e)&&e.host||sd(e);return F7(t)?t.host:t}function dQ(e){const t=Oh(e);return Xv(t)?e.ownerDocument?e.ownerDocument.body:e.body:nd(t)&&x1(t)?t:dQ(t)}function Ab(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=dQ(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),s=Ml(a);if(i){const l=aT(s);return t.concat(s,s.visualViewport||[],x1(a)?a:[],l&&r?Ab(l):[])}return t.concat(a,Ab(a,[],r))}function aT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fQ(e){const t=fu(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=nd(e),i=a?e.offsetWidth:r,s=a?e.offsetHeight:n,l=VS(r)!==i||VS(n)!==s;return l&&(r=i,n=s),{width:r,height:n,$:l}}function nD(e){return du(e)?e:e.contextElement}function nv(e){const t=nD(e);if(!nd(t))return Xu(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=fQ(t);let s=(i?VS(r.width):r.width)/n,l=(i?VS(r.height):r.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const iqe=Xu(0);function hQ(e){const t=Ml(e);return!rD()||!t.visualViewport?iqe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oqe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ml(e)?!1:t}function yp(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=nD(e);let s=Xu(1);t&&(n?du(n)&&(s=nv(n)):s=nv(e));const l=oqe(i,r,n)?hQ(i):Xu(0);let c=(a.left+l.x)/s.x,u=(a.top+l.y)/s.y,d=a.width/s.x,f=a.height/s.y;if(i){const h=Ml(i),m=n&&du(n)?Ml(n):n;let g=h,p=aT(g);for(;p&&n&&m!==g;){const x=nv(p),y=p.getBoundingClientRect(),b=fu(p),w=y.left+(p.clientLeft+parseFloat(b.paddingLeft))*x.x,_=y.top+(p.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,f*=x.y,c+=w,u+=_,g=Ml(p),p=aT(g)}}return HS({width:d,height:f,x:c,y:u})}function aD(e,t){const r=eC(e).scrollLeft;return t?t.left+r:yp(sd(e)).left+r}function mQ(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:aD(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function sqe(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",s=sd(n),l=t?ZN(t.floating):!1;if(n===s||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Xu(1);const d=Xu(0),f=nd(n);if((f||!f&&!i)&&((Ax(n)!=="body"||x1(s))&&(c=eC(n)),nd(n))){const m=yp(n);u=nv(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=s&&!f&&!i?mQ(s,c,!0):Xu(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function lqe(e){return Array.from(e.getClientRects())}function cqe(e){const t=sd(e),r=eC(e),n=e.ownerDocument.body,a=Nl(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Nl(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+aD(e);const l=-r.scrollTop;return fu(n).direction==="rtl"&&(s+=Nl(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:s,y:l}}function uqe(e,t){const r=Ml(e),n=sd(e),a=r.visualViewport;let i=n.clientWidth,s=n.clientHeight,l=0,c=0;if(a){i=a.width,s=a.height;const u=rD();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:s,x:l,y:c}}const dqe=new Set(["absolute","fixed"]);function fqe(e,t){const r=yp(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=nd(e)?nv(e):Xu(1),s=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:s,height:l,x:c,y:u}}function B7(e,t,r){let n;if(t==="viewport")n=uqe(e,r);else if(t==="document")n=cqe(sd(e));else if(du(t))n=fqe(t,r);else{const a=hQ(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return HS(n)}function pQ(e,t){const r=Oh(e);return r===t||!du(r)||Xv(r)?!1:fu(r).position==="fixed"||pQ(r,t)}function hqe(e,t){const r=t.get(e);if(r)return r;let n=Ab(e,[],!1).filter(l=>du(l)&&Ax(l)!=="body"),a=null;const i=fu(e).position==="fixed";let s=i?Oh(e):e;for(;du(s)&&!Xv(s);){const l=fu(s),c=tD(s);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&dqe.has(a.position)||x1(s)&&!c&&pQ(e,s))?n=n.filter(d=>d!==s):a=l,s=Oh(s)}return t.set(e,n),n}function mqe(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const s=[...r==="clippingAncestors"?ZN(t)?[]:hqe(t,this._c):[].concat(r),n],l=s[0],c=s.reduce((u,d)=>{const f=B7(t,d,a);return u.top=Nl(f.top,u.top),u.right=kh(f.right,u.right),u.bottom=kh(f.bottom,u.bottom),u.left=Nl(f.left,u.left),u},B7(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function pqe(e){const{width:t,height:r}=fQ(e);return{width:t,height:r}}function gqe(e,t,r){const n=nd(t),a=sd(t),i=r==="fixed",s=yp(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Xu(0);function u(){c.x=aD(a)}if(n||!n&&!i)if((Ax(t)!=="body"||x1(a))&&(l=eC(t)),n){const m=yp(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?mQ(a,l):Xu(0),f=s.left+l.scrollLeft-c.x-d.x,h=s.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:s.width,height:s.height}}function zA(e){return fu(e).position==="static"}function z7(e,t){if(!nd(e)||fu(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return sd(e)===r&&(r=r.ownerDocument.body),r}function gQ(e,t){const r=Ml(e);if(ZN(e))return r;if(!nd(e)){let a=Oh(e);for(;a&&!Xv(a);){if(du(a)&&!zA(a))return a;a=Oh(a)}return r}let n=z7(e,t);for(;n&&Qze(n)&&zA(n);)n=z7(n,t);return n&&Xv(n)&&zA(n)&&!tD(n)?r:n||nqe(e)||r}const vqe=async function(e){const t=this.getOffsetParent||gQ,r=this.getDimensions,n=await r(e.floating);return{reference:gqe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function xqe(e){return fu(e).direction==="rtl"}const yqe={convertOffsetParentRelativeRectToViewportRelativeRect:sqe,getDocumentElement:sd,getClippingRect:mqe,getOffsetParent:gQ,getElementRects:vqe,getClientRects:lqe,getDimensions:pqe,getScale:nv,isElement:du,isRTL:xqe};function vQ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function bqe(e,t){let r=null,n;const a=sd(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function s(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=Qw(f),p=Qw(a.clientWidth-(d+h)),x=Qw(a.clientHeight-(f+m)),y=Qw(d),w={rootMargin:-g+"px "+-p+"px "+-x+"px "+-y+"px",threshold:Nl(0,kh(1,c))||1};let _=!0;function j(N){const P=N[0].intersectionRatio;if(P!==c){if(!_)return s();P?s(!1,P):n=setTimeout(()=>{s(!1,1e-7)},1e3)}P===1&&!vQ(u,e.getBoundingClientRect())&&s(),_=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return s(!0),i}function wqe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=nD(e),d=a||i?[...u?Ab(u):[],...Ab(t)]:[];d.forEach(y=>{a&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const f=u&&l?bqe(u,r):null;let h=-1,m=null;s&&(m=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?yp(e):null;c&&x();function x(){const y=yp(e);p&&!vQ(p,y)&&r(),p=y,g=requestAnimationFrame(x)}return r(),()=>{var y;d.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f?.(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const _qe=Hze,Sqe=Gze,jqe=Uze,Nqe=Yze,Cqe=Vze,q7=qze,Aqe=Kze,Pqe=(e,t,r)=>{const n=new Map,a={platform:yqe,...r},i={...a.platform,_c:n};return zze(e,t,{...a,platform:i})};var Eqe=typeof document<"u",kqe=function(){},$2=Eqe?v.useLayoutEffect:kqe;function GS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!GS(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!GS(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function xQ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function U7(e,t){const r=xQ(e);return Math.round(t*r)/r}function qA(e){const t=v.useRef(e);return $2(()=>{t.current=e}),t}function Oqe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:s}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=v.useState(n);GS(h,n)||m(n);const[g,p]=v.useState(null),[x,y]=v.useState(null),b=v.useCallback($=>{$!==N.current&&(N.current=$,p($))},[]),w=v.useCallback($=>{$!==P.current&&(P.current=$,y($))},[]),_=i||g,j=s||x,N=v.useRef(null),P=v.useRef(null),A=v.useRef(d),k=c!=null,M=qA(c),E=qA(a),I=qA(u),O=v.useCallback(()=>{if(!N.current||!P.current)return;const $={placement:t,strategy:r,middleware:h};E.current&&($.platform=E.current),Pqe(N.current,P.current,$).then(H=>{const ce={...H,isPositioned:I.current!==!1};R.current&&!GS(A.current,ce)&&(A.current=ce,Lh.flushSync(()=>{f(ce)}))})},[h,t,r,E,I]);$2(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[u]);const R=v.useRef(!1);$2(()=>(R.current=!0,()=>{R.current=!1}),[]),$2(()=>{if(_&&(N.current=_),j&&(P.current=j),_&&j){if(M.current)return M.current(_,j,O);O()}},[_,j,O,M,k]);const B=v.useMemo(()=>({reference:N,floating:P,setReference:b,setFloating:w}),[b,w]),W=v.useMemo(()=>({reference:_,floating:j}),[_,j]),F=v.useMemo(()=>{const $={position:r,left:0,top:0};if(!W.floating)return $;const H=U7(W.floating,d.x),ce=U7(W.floating,d.y);return l?{...$,transform:"translate("+H+"px, "+ce+"px)",...xQ(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:ce}},[r,l,W.floating,d.x,d.y]);return v.useMemo(()=>({...d,update:O,refs:B,elements:W,floatingStyles:F}),[d,O,B,W,F])}const Tqe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?q7({element:n.current,padding:a}).fn(r):{}:n?q7({element:n,padding:a}).fn(r):{}}}},Iqe=(e,t)=>({..._qe(e),options:[e,t]}),Dqe=(e,t)=>({...Sqe(e),options:[e,t]}),Mqe=(e,t)=>({...Aqe(e),options:[e,t]}),Rqe=(e,t)=>({...jqe(e),options:[e,t]}),Lqe=(e,t)=>({...Nqe(e),options:[e,t]}),$qe=(e,t)=>({...Cqe(e),options:[e,t]}),Fqe=(e,t)=>({...Tqe(e),options:[e,t]});var Bqe="Arrow",yQ=v.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return o.jsx(xn.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});yQ.displayName=Bqe;var zqe=yQ;function bQ(e){const[t,r]=v.useState(void 0);return Go(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;s=u.inlineSize,l=u.blockSize}else s=e.offsetWidth,l=e.offsetHeight;r({width:s,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var iD="Popper",[wQ,Px]=_c(iD),[qqe,_Q]=wQ(iD),SQ=e=>{const{__scopePopper:t,children:r}=e,[n,a]=v.useState(null);return o.jsx(qqe,{scope:t,anchor:n,onAnchorChange:a,children:r})};SQ.displayName=iD;var jQ="PopperAnchor",NQ=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=_Q(jQ,r),s=v.useRef(null),l=oa(t,s),c=v.useRef(null);return v.useEffect(()=>{const u=c.current;c.current=n?.current||s.current,u!==c.current&&i.onAnchorChange(c.current)}),n?null:o.jsx(xn.div,{...a,ref:l})});NQ.displayName=jQ;var oD="PopperContent",[Uqe,Vqe]=wQ(oD),CQ=v.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,x=_Q(oD,r),[y,b]=v.useState(null),w=oa(t,K=>b(K)),[_,j]=v.useState(null),N=bQ(_),P=N?.width??0,A=N?.height??0,k=n+(i!=="center"?"-"+i:""),M=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},E=Array.isArray(u)?u:[u],I=E.length>0,O={padding:M,boundary:E.filter(Hqe),altBoundary:I},{refs:R,floatingStyles:B,placement:W,isPositioned:F,middlewareData:$}=Oqe({strategy:"fixed",placement:k,whileElementsMounted:(...K)=>wqe(...K,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[Iqe({mainAxis:a+A,alignmentAxis:s}),c&&Dqe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Mqe():void 0,...O}),c&&Rqe({...O}),Lqe({...O,apply:({elements:K,rects:he,availableWidth:te,availableHeight:me})=>{const{width:Ee,height:Se}=he.reference,We=K.floating.style;We.setProperty("--radix-popper-available-width",`${te}px`),We.setProperty("--radix-popper-available-height",`${me}px`),We.setProperty("--radix-popper-anchor-width",`${Ee}px`),We.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),_&&Fqe({element:_,padding:l}),Gqe({arrowWidth:P,arrowHeight:A}),h&&$qe({strategy:"referenceHidden",...O})]}),[H,ce]=EQ(W),oe=al(g);Go(()=>{F&&oe?.()},[F,oe]);const L=$.arrow?.x,U=$.arrow?.y,J=$.arrow?.centerOffset!==0,[V,Z]=v.useState();return Go(()=>{y&&Z(window.getComputedStyle(y).zIndex)},[y]),o.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:F?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:V,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(Uqe,{scope:r,placedSide:H,onArrowChange:j,arrowX:L,arrowY:U,shouldHideArrow:J,children:o.jsx(xn.div,{"data-side":H,"data-align":ce,...p,ref:w,style:{...p.style,animation:F?void 0:"none"}})})})});CQ.displayName=oD;var AQ="PopperArrow",Wqe={top:"bottom",right:"left",bottom:"top",left:"right"},PQ=v.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=Vqe(AQ,n),s=Wqe[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(zqe,{...a,ref:r,style:{...a.style,display:"block"}})})});PQ.displayName=AQ;function Hqe(e){return e!==null}var Gqe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:a}=t,s=a.arrow?.centerOffset!==0,l=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[u,d]=EQ(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(a.arrow?.x??0)+l/2,m=(a.arrow?.y??0)+c/2;let g="",p="";return u==="bottom"?(g=s?f:`${h}px`,p=`${-c}px`):u==="top"?(g=s?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=s?f:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,p=s?f:`${m}px`),{data:{x:g,y:p}}}});function EQ(e){const[t,r="center"]=e.split("-");return[t,r]}var sD=SQ,tC=NQ,lD=CQ,cD=PQ,rC="Popover",[kQ,iot]=_c(rC,[Px]),y1=Px(),[Kqe,Gh]=kQ(rC),OQ=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,l=y1(t),c=v.useRef(null),[u,d]=v.useState(!1),[f,h]=Xd({prop:n,defaultProp:a??!1,onChange:i,caller:rC});return o.jsx(sD,{...l,children:o.jsx(Kqe,{scope:t,contentId:iu(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:v.useCallback(()=>d(!0),[]),onCustomAnchorRemove:v.useCallback(()=>d(!1),[]),modal:s,children:r})})};OQ.displayName=rC;var TQ="PopoverAnchor",Yqe=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Gh(TQ,r),i=y1(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:l}=a;return v.useEffect(()=>(s(),()=>l()),[s,l]),o.jsx(tC,{...i,...n,ref:t})});Yqe.displayName=TQ;var IQ="PopoverTrigger",DQ=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Gh(IQ,r),i=y1(r),s=oa(t,a.triggerRef),l=o.jsx(xn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":FQ(a.open),...n,ref:s,onClick:Sr(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:o.jsx(tC,{asChild:!0,...i,children:l})});DQ.displayName=IQ;var uD="PopoverPortal",[Xqe,Jqe]=kQ(uD,{forceMount:void 0}),MQ=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Gh(uD,t);return o.jsx(Xqe,{scope:t,forceMount:r,children:o.jsx(ql,{present:r||i.open,children:o.jsx(ux,{asChild:!0,container:a,children:n})})})};MQ.displayName=uD;var Jv="PopoverContent",RQ=v.forwardRef((e,t)=>{const r=Jqe(Jv,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Gh(Jv,e.__scopePopover);return o.jsx(ql,{present:n||i.open,children:i.modal?o.jsx(Zqe,{...a,ref:t}):o.jsx(e9e,{...a,ref:t})})});RQ.displayName=Jv;var Qqe=Ah("PopoverContent.RemoveScroll"),Zqe=v.forwardRef((e,t)=>{const r=Gh(Jv,e.__scopePopover),n=v.useRef(null),a=oa(t,n),i=v.useRef(!1);return v.useEffect(()=>{const s=n.current;if(s)return Jj(s)},[]),o.jsx(Xj,{as:Qqe,allowPinchZoom:!0,children:o.jsx(LQ,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Sr(e.onCloseAutoFocus,s=>{s.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Sr(e.onPointerDownOutside,s=>{const l=s.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Sr(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),e9e=v.forwardRef((e,t)=>{const r=Gh(Jv,e.__scopePopover),n=v.useRef(!1),a=v.useRef(!1);return o.jsx(LQ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;r.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),LQ=v.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Gh(Jv,r),m=y1(r);return Kj(),o.jsx(o1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:o.jsx(cx,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:o.jsx(lD,{"data-state":FQ(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$Q="PopoverClose",t9e=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Gh($Q,r);return o.jsx(xn.button,{type:"button",...n,ref:t,onClick:Sr(e.onClick,()=>a.onOpenChange(!1))})});t9e.displayName=$Q;var r9e="PopoverArrow",n9e=v.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=y1(r);return o.jsx(cD,{...a,...n,ref:t})});n9e.displayName=r9e;function FQ(e){return e?"open":"closed"}var a9e=OQ,i9e=DQ,o9e=MQ,BQ=RQ;const rf=a9e,nf=i9e,ad=se.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>o.jsx(o9e,{children:o.jsx(BQ,{ref:a,align:t,sideOffset:r,className:kt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ad.displayName=BQ.displayName;var Sn=function(){return Sn=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Sn.apply(this,arguments)};function s9e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function zQ(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function b1(e){return e.mode==="multiple"}function w1(e){return e.mode==="range"}function nC(e){return e.mode==="single"}var l9e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function c9e(e,t){return ln(e,"LLLL y",t)}function u9e(e,t){return ln(e,"d",t)}function d9e(e,t){return ln(e,"LLLL",t)}function f9e(e){return"".concat(e)}function h9e(e,t){return ln(e,"cccccc",t)}function m9e(e,t){return ln(e,"yyyy",t)}var p9e=Object.freeze({__proto__:null,formatCaption:c9e,formatDay:u9e,formatMonthCaption:d9e,formatWeekNumber:f9e,formatWeekdayName:h9e,formatYearCaption:m9e}),g9e=function(e,t,r){return ln(e,"do MMMM (EEEE)",r)},v9e=function(){return"Month: "},x9e=function(){return"Go to next month"},y9e=function(){return"Go to previous month"},b9e=function(e,t){return ln(e,"cccc",t)},w9e=function(e){return"Week n. ".concat(e)},_9e=function(){return"Year: "},S9e=Object.freeze({__proto__:null,labelDay:g9e,labelMonthDropdown:v9e,labelNext:x9e,labelPrevious:y9e,labelWeekNumber:w9e,labelWeekday:b9e,labelYearDropdown:_9e});function j9e(){var e="buttons",t=l9e,r=dK,n={},a={},i=1,s={},l=new Date;return{captionLayout:e,classNames:t,formatters:p9e,labels:S9e,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:s,today:l,mode:"default"}}function N9e(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,s=e.toDate;return n?i=tl(n):t&&(i=new Date(t,0,1)),a?s=z4(a):r&&(s=new Date(r,11,31)),{fromDate:i?Pl(i):void 0,toDate:s?Pl(s):void 0}}var qQ=v.createContext(void 0);function C9e(e){var t,r=e.initialProps,n=j9e(),a=N9e(r),i=a.fromDate,s=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!s)&&(l="buttons");var c;(nC(r)||b1(r)||w1(r))&&(c=r.onSelect);var u=Sn(Sn(Sn({},n),r),{captionLayout:l,classNames:Sn(Sn({},n.classNames),r.classNames),components:Sn({},r.components),formatters:Sn(Sn({},n.formatters),r.formatters),fromDate:i,labels:Sn(Sn({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Sn(Sn({},n.modifiers),r.modifiers),modifiersClassNames:Sn(Sn({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Sn(Sn({},n.styles),r.styles),toDate:s});return o.jsx(qQ.Provider,{value:u,children:e.children})}function Za(){var e=v.useContext(qQ);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function UQ(e){var t=Za(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return o.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function A9e(e){return o.jsx("svg",Sn({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:o.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function VQ(e){var t,r,n=e.onChange,a=e.value,i=e.children,s=e.caption,l=e.className,c=e.style,u=Za(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:A9e;return o.jsxs("div",{className:l,style:c,children:[o.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),o.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),o.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[s,o.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function P9e(e){var t,r=Za(),n=r.fromDate,a=r.toDate,i=r.styles,s=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return o.jsx(o.Fragment,{});if(!a)return o.jsx(o.Fragment,{});var f=[];if($ye(n,a))for(var h=tl(n),m=n.getMonth();m<=a.getMonth();m++)f.push(uA(h,m));else for(var h=tl(new Date),m=0;m<=11;m++)f.push(uA(h,m));var g=function(x){var y=Number(x.target.value),b=uA(tl(e.displayMonth),y);e.onChange(b)},p=(t=u?.Dropdown)!==null&&t!==void 0?t:VQ;return o.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:s}),children:f.map(function(x){return o.jsx("option",{value:x.getMonth(),children:l(x,{locale:s})},x.getMonth())})})}function E9e(e){var t,r=e.displayMonth,n=Za(),a=n.fromDate,i=n.toDate,s=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return o.jsx(o.Fragment,{});if(!i)return o.jsx(o.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),p=m;p<=g;p++)h.push(x$(m0e(new Date),p));var x=function(b){var w=x$(tl(r),Number(b.target.value));e.onChange(w)},y=(t=u?.Dropdown)!==null&&t!==void 0?t:VQ;return o.jsx(y,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:r.getFullYear(),caption:d(r,{locale:s}),children:h.map(function(b){return o.jsx("option",{value:b.getFullYear(),children:d(b,{locale:s})},b.getFullYear())})})}function k9e(e,t){var r=v.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function O9e(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,s=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Uy(i,a)<0){var u=-1*(c-1);a=cu(i,u)}return s&&Uy(a,s)<0&&(a=s),tl(a)}function T9e(){var e=Za(),t=O9e(e),r=k9e(t,e.month),n=r[0],a=r[1],i=function(s){var l;if(!e.disableNavigation){var c=tl(s);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function I9e(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=tl(e),i=tl(cu(a,n)),s=Uy(i,a),l=[],c=0;c<s;c++){var u=cu(a,c);l.push(u)}return r&&(l=l.reverse()),l}function D9e(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,s=n?i:1,l=tl(e);if(!r)return cu(l,s);var c=Uy(r,e);if(!(c<i))return cu(l,s)}}function M9e(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,s=n?i:1,l=tl(e);if(!r)return cu(l,-s);var c=Uy(l,r);if(!(c<=0))return cu(l,-s)}}var WQ=v.createContext(void 0);function R9e(e){var t=Za(),r=T9e(),n=r[0],a=r[1],i=I9e(n,t),s=D9e(n,t),l=M9e(n,t),c=function(f){return i.some(function(h){return U4(f,h)})},u=function(f,h){c(f)||(h&&fK(f,h)?a(cu(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:s,isDateDisplayed:c};return o.jsx(WQ.Provider,{value:d,children:e.children})}function _1(){var e=v.useContext(WQ);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function V7(e){var t,r=Za(),n=r.classNames,a=r.styles,i=r.components,s=_1().goToMonth,l=function(d){s(cu(d,e.displayIndex?-e.displayIndex:0))},c=(t=i?.CaptionLabel)!==null&&t!==void 0?t:UQ,u=o.jsx(c,{id:e.id,displayMonth:e.displayMonth});return o.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[o.jsx("div",{className:n.vhidden,children:u}),o.jsx(P9e,{onChange:l,displayMonth:e.displayMonth}),o.jsx(E9e,{onChange:l,displayMonth:e.displayMonth})]})}function L9e(e){return o.jsx("svg",Sn({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:o.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function $9e(e){return o.jsx("svg",Sn({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:o.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var KS=v.forwardRef(function(e,t){var r=Za(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var s=i.join(" "),l=Sn(Sn({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),o.jsx("button",Sn({},e,{ref:t,type:"button",className:s,style:l}))});function F9e(e){var t,r,n=Za(),a=n.dir,i=n.locale,s=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return o.jsx(o.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[s.nav_button,s.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:i}),p=[s.nav_button,s.nav_button_next].join(" "),x=(t=f?.IconRight)!==null&&t!==void 0?t:$9e,y=(r=f?.IconLeft)!==null&&r!==void 0?r:L9e;return o.jsxs("div",{className:s.nav,style:l.nav,children:[!e.hidePrevious&&o.jsx(KS,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?o.jsx(x,{className:s.nav_icon,style:l.nav_icon}):o.jsx(y,{className:s.nav_icon,style:l.nav_icon})}),!e.hideNext&&o.jsx(KS,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?o.jsx(y,{className:s.nav_icon,style:l.nav_icon}):o.jsx(x,{className:s.nav_icon,style:l.nav_icon})})]})}function W7(e){var t=Za().numberOfMonths,r=_1(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,s=r.displayMonths,l=s.findIndex(function(g){return U4(e.displayMonth,g)}),c=l===0,u=l===s.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return o.jsx(F9e,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function B9e(e){var t,r=Za(),n=r.classNames,a=r.disableNavigation,i=r.styles,s=r.captionLayout,l=r.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:UQ,u;return a?u=o.jsx(c,{id:e.id,displayMonth:e.displayMonth}):s==="dropdown"?u=o.jsx(V7,{displayMonth:e.displayMonth,id:e.id}):s==="dropdown-buttons"?u=o.jsxs(o.Fragment,{children:[o.jsx(V7,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),o.jsx(W7,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=o.jsxs(o.Fragment,{children:[o.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),o.jsx(W7,{displayMonth:e.displayMonth,id:e.id})]}),o.jsx("div",{className:n.caption,style:i.caption,children:u})}function z9e(e){var t=Za(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?o.jsx("tfoot",{className:a,style:n.tfoot,children:o.jsx("tr",{children:o.jsx("td",{colSpan:8,children:r})})}):o.jsx(o.Fragment,{})}function q9e(e,t,r){for(var n=r?up(new Date):uu(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var s=wi(n,i);a.push(s)}return a}function U9e(){var e=Za(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,s=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=q9e(a,i,s);return o.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&o.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return o.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function V9e(){var e,t=Za(),r=t.classNames,n=t.styles,a=t.components,i=(e=a?.HeadRow)!==null&&e!==void 0?e:U9e;return o.jsx("thead",{style:n.head,className:r.head,children:o.jsx(i,{})})}function W9e(e){var t=Za(),r=t.locale,n=t.formatters.formatDay;return o.jsx(o.Fragment,{children:n(e.date,{locale:r})})}var dD=v.createContext(void 0);function H9e(e){if(!b1(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return o.jsx(dD.Provider,{value:t,children:e.children})}return o.jsx(G9e,{initialProps:e.initialProps,children:e.children})}function G9e(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,s=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&n?.length===a);if(!g){var p=!!(!d.selected&&i&&n?.length===i);if(!p){var x=n?zQ([],n,!0):[];if(d.selected){var y=x.findIndex(function(b){return Ps(u,b)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return Ps(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:s,modifiers:l};return o.jsx(dD.Provider,{value:c,children:r})}function fD(){var e=v.useContext(dD);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function K9e(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Ps(a,e)&&Ps(n,e)?void 0:Ps(a,e)?{from:a,to:void 0}:Ps(n,e)?void 0:jk(n,e)?{from:e,to:a}:{from:n,to:e}:a?jk(e,a)?{from:a,to:e}:{from:e,to:a}:n?fK(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var hD=v.createContext(void 0);function Y9e(e){if(!w1(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return o.jsx(hD.Provider,{value:t,children:e.children})}return o.jsx(X9e,{initialProps:e.initialProps,children:e.children})}function X9e(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,s=a.to,l=t.min,c=t.max,u=function(m,g,p){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,p);var b=K9e(m,n);(y=t.onSelect)===null||y===void 0||y.call(t,b,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],s?(d.range_end=[s],Ps(i,s)||(d.range_middle=[{after:i,before:s}])):d.range_end=[i]):s&&(d.range_start=[s],d.range_end=[s]),l&&(i&&!s&&d.disabled.push({after:M2(i,l-1),before:wi(i,l-1)}),i&&s&&d.disabled.push({after:i,before:wi(i,l-1)}),!i&&s&&d.disabled.push({after:M2(s,l-1),before:wi(s,l-1)})),c){if(i&&!s&&(d.disabled.push({before:wi(i,-c+1)}),d.disabled.push({after:wi(i,c-1)})),i&&s){var f=Dd(s,i)+1,h=c-f;d.disabled.push({before:M2(i,h)}),d.disabled.push({after:wi(s,h)})}!i&&s&&(d.disabled.push({before:wi(s,-c+1)}),d.disabled.push({after:wi(s,c-1)}))}return o.jsx(hD.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function mD(){var e=v.useContext(hD);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function F2(e){return Array.isArray(e)?zQ([],e,!0):e!==void 0?[e]:[]}function J9e(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=F2(a)}),t}var hu;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(hu||(hu={}));var Q9e=hu.Selected,yd=hu.Disabled,Z9e=hu.Hidden,eUe=hu.Today,UA=hu.RangeEnd,VA=hu.RangeMiddle,WA=hu.RangeStart,tUe=hu.Outside;function rUe(e,t,r){var n,a=(n={},n[Q9e]=F2(e.selected),n[yd]=F2(e.disabled),n[Z9e]=F2(e.hidden),n[eUe]=[e.today],n[UA]=[],n[VA]=[],n[WA]=[],n[tUe]=[],n);return e.fromDate&&a[yd].push({before:e.fromDate}),e.toDate&&a[yd].push({after:e.toDate}),b1(e)?a[yd]=a[yd].concat(t.modifiers[yd]):w1(e)&&(a[yd]=a[yd].concat(r.modifiers[yd]),a[WA]=r.modifiers[WA],a[VA]=r.modifiers[VA],a[UA]=r.modifiers[UA]),a}var HQ=v.createContext(void 0);function nUe(e){var t=Za(),r=fD(),n=mD(),a=rUe(t,r,n),i=J9e(t.modifiers),s=Sn(Sn({},a),i);return o.jsx(HQ.Provider,{value:s,children:e.children})}function GQ(){var e=v.useContext(HQ);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function aUe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function iUe(e){return!!(e&&typeof e=="object"&&"from"in e)}function oUe(e){return!!(e&&typeof e=="object"&&"after"in e)}function sUe(e){return!!(e&&typeof e=="object"&&"before"in e)}function lUe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function cUe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=Dd(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var s=Dd(e,n)>=0&&Dd(a,e)>=0;return s}return a?Ps(a,e):n?Ps(n,e):!1}function uUe(e){return B4(e)}function dUe(e){return Array.isArray(e)&&e.every(B4)}function fUe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(uUe(r))return Ps(e,r);if(dUe(r))return r.includes(e);if(iUe(r))return cUe(e,r);if(lUe(r))return r.dayOfWeek.includes(e.getDay());if(aUe(r)){var n=Dd(r.before,e),a=Dd(r.after,e),i=n>0,s=a<0,l=jk(r.before,r.after);return l?s&&i:i||s}return oUe(r)?Dd(e,r.after)>0:sUe(r)?Dd(r.before,e)>0:typeof r=="function"?r(e):!1})}function pD(e,t,r){var n=Object.keys(t).reduce(function(i,s){var l=t[s];return fUe(e,l)&&i.push(s),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!U4(e,r)&&(a.outside=!0),a}function hUe(e,t){for(var r=tl(e[0]),n=z4(e[e.length-1]),a,i,s=r;s<=n;){var l=pD(s,t),c=!l.disabled&&!l.hidden;if(!c){s=wi(s,1);continue}if(l.selected)return s;l.today&&!i&&(i=s),a||(a=s),s=wi(s,1)}return i||a}var mUe=365;function KQ(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,s=t.retry,l=s===void 0?{count:0,lastFocused:e}:s,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:wi,week:_k,month:cu,year:l0e,startOfWeek:function(x){return a.ISOWeek?up(x):uu(x,{locale:f,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?oK(x):q4(x,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=c0e([u,m]):n==="after"&&d&&(m=u0e([d,m]));var g=!0;if(i){var p=pD(m,i);g=!p.disabled&&!p.hidden}return g?m:l.count>mUe?l.lastFocused:KQ(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:Sn(Sn({},l),{count:l.count+1})})}var YQ=v.createContext(void 0);function pUe(e){var t=_1(),r=GQ(),n=v.useState(),a=n[0],i=n[1],s=v.useState(),l=s[0],c=s[1],u=hUe(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(x){i(x)},m=Za(),g=function(x,y){if(a){var b=KQ(a,{moveBy:x,direction:y,context:m,modifiers:r});Ps(a,b)||(t.goToDate(b,a),h(b))}},p={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return o.jsx(YQ.Provider,{value:p,children:e.children})}function gD(){var e=v.useContext(YQ);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function gUe(e,t){var r=GQ(),n=pD(e,r,t);return n}var vD=v.createContext(void 0);function vUe(e){if(!nC(e.initialProps)){var t={selected:void 0};return o.jsx(vD.Provider,{value:t,children:e.children})}return o.jsx(xUe,{initialProps:e.initialProps,children:e.children})}function xUe(e){var t=e.initialProps,r=e.children,n=function(i,s,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,s,l),s.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,s,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,s,l)},a={selected:t.selected,onDayClick:n};return o.jsx(vD.Provider,{value:a,children:r})}function XQ(){var e=v.useContext(vD);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function yUe(e,t){var r=Za(),n=XQ(),a=fD(),i=mD(),s=gD(),l=s.focusDayAfter,c=s.focusDayBefore,u=s.focusWeekAfter,d=s.focusWeekBefore,f=s.blur,h=s.focus,m=s.focusMonthBefore,g=s.focusMonthAfter,p=s.focusYearBefore,x=s.focusYearAfter,y=s.focusStartOfWeek,b=s.focusEndOfWeek,w=function(F){var $,H,ce,oe;nC(r)?($=n.onDayClick)===null||$===void 0||$.call(n,e,t,F):b1(r)?(H=a.onDayClick)===null||H===void 0||H.call(a,e,t,F):w1(r)?(ce=i.onDayClick)===null||ce===void 0||ce.call(i,e,t,F):(oe=r.onDayClick)===null||oe===void 0||oe.call(r,e,t,F)},_=function(F){var $;h(e),($=r.onDayFocus)===null||$===void 0||$.call(r,e,t,F)},j=function(F){var $;f(),($=r.onDayBlur)===null||$===void 0||$.call(r,e,t,F)},N=function(F){var $;($=r.onDayMouseEnter)===null||$===void 0||$.call(r,e,t,F)},P=function(F){var $;($=r.onDayMouseLeave)===null||$===void 0||$.call(r,e,t,F)},A=function(F){var $;($=r.onDayPointerEnter)===null||$===void 0||$.call(r,e,t,F)},k=function(F){var $;($=r.onDayPointerLeave)===null||$===void 0||$.call(r,e,t,F)},M=function(F){var $;($=r.onDayTouchCancel)===null||$===void 0||$.call(r,e,t,F)},E=function(F){var $;($=r.onDayTouchEnd)===null||$===void 0||$.call(r,e,t,F)},I=function(F){var $;($=r.onDayTouchMove)===null||$===void 0||$.call(r,e,t,F)},O=function(F){var $;($=r.onDayTouchStart)===null||$===void 0||$.call(r,e,t,F)},R=function(F){var $;($=r.onDayKeyUp)===null||$===void 0||$.call(r,e,t,F)},B=function(F){var $;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),d();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?p():m();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?x():g();break;case"Home":F.preventDefault(),F.stopPropagation(),y();break;case"End":F.preventDefault(),F.stopPropagation(),b();break}($=r.onDayKeyDown)===null||$===void 0||$.call(r,e,t,F)},W={onClick:w,onFocus:_,onBlur:j,onKeyDown:B,onKeyUp:R,onMouseEnter:N,onMouseLeave:P,onPointerEnter:A,onPointerLeave:k,onTouchCancel:M,onTouchEnd:E,onTouchMove:I,onTouchStart:O};return W}function bUe(){var e=Za(),t=XQ(),r=fD(),n=mD(),a=nC(e)?t.selected:b1(e)?r.selected:w1(e)?n.selected:void 0;return a}function wUe(e){return Object.values(hu).includes(e)}function _Ue(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(wUe(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function SUe(e,t){var r=Sn({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=Sn(Sn({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function jUe(e,t,r){var n,a,i,s=Za(),l=gD(),c=gUe(e,t),u=yUe(e,c),d=bUe(),f=!!(s.onDayClick||s.mode!=="default");v.useEffect(function(){var N;c.outside||l.focusedDay&&f&&Ps(l.focusedDay,e)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,e,r,f,c.outside]);var h=_Ue(s,c).join(" "),m=SUe(s,c),g=!!(c.outside&&!s.showOutsideDays||c.hidden),p=(i=(a=s.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:W9e,x=o.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:h,children:x,role:"gridcell"},b=l.focusTarget&&Ps(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Ps(l.focusedDay,e),_=Sn(Sn(Sn({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||b?0:-1,n)),u),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:y};return j}function NUe(e){var t=v.useRef(null),r=jUe(e.date,e.displayMonth,t);return r.isHidden?o.jsx("div",{role:"gridcell"}):r.isButton?o.jsx(KS,Sn({name:"day",ref:t},r.buttonProps)):o.jsx("div",Sn({},r.divProps))}function CUe(e){var t=e.number,r=e.dates,n=Za(),a=n.onWeekNumberClick,i=n.styles,s=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return o.jsx("span",{className:s.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return o.jsx(KS,{name:"week-number","aria-label":f,className:s.weeknumber,style:i.weeknumber,onClick:h,children:d})}function AUe(e){var t,r,n=Za(),a=n.styles,i=n.classNames,s=n.showWeekNumber,l=n.components,c=(t=l?.Day)!==null&&t!==void 0?t:NUe,u=(r=l?.WeekNumber)!==null&&r!==void 0?r:CUe,d;return s&&(d=o.jsx("td",{className:i.cell,style:a.cell,children:o.jsx(u,{number:e.weekNumber,dates:e.dates})})),o.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return o.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:o.jsx(c,{displayMonth:e.displayMonth,date:f})},Aye(f))})]})}function H7(e,t,r){for(var n=r?.ISOWeek?oK(t):q4(t,r),a=r?.ISOWeek?up(e):uu(e,r),i=Dd(n,a),s=[],l=0;l<=i;l++)s.push(wi(a,l));var c=s.reduce(function(u,d){var f=r?.ISOWeek?Nye(d):Oye(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function PUe(e,t){var r=H7(tl(e),z4(e),t);if(t?.useFixedWeeks){var n=Iye(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],s=_k(i,6-n),l=H7(_k(i,1),s,t);r.push.apply(r,l)}}return r}function EUe(e){var t,r,n,a=Za(),i=a.locale,s=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=PUe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d?.Head)!==null&&t!==void 0?t:V9e,x=(r=d?.Row)!==null&&r!==void 0?r:AUe,y=(n=d?.Footer)!==null&&n!==void 0?n:z9e;return o.jsxs("table",{id:e.id,className:s.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&o.jsx(p,{}),o.jsx("tbody",{className:s.tbody,style:l.tbody,children:g.map(function(b){return o.jsx(x,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),o.jsx(y,{displayMonth:e.displayMonth})]})}function kUe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var OUe=kUe()?v.useLayoutEffect:v.useEffect,HA=!1,TUe=0;function G7(){return"react-day-picker-".concat(++TUe)}function IUe(e){var t,r=e??(HA?G7():null),n=v.useState(r),a=n[0],i=n[1];return OUe(function(){a===null&&i(G7())},[]),v.useEffect(function(){HA===!1&&(HA=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function DUe(e){var t,r,n=Za(),a=n.dir,i=n.classNames,s=n.styles,l=n.components,c=_1().displayMonths,u=IUe(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=s.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=Sn(Sn({},h),s.caption_start)),g&&(f.push(i.caption_end),h=Sn(Sn({},h),s.caption_end)),p&&(f.push(i.caption_between),h=Sn(Sn({},h),s.caption_between));var x=(r=l?.Caption)!==null&&r!==void 0?r:B9e;return o.jsxs("div",{className:f.join(" "),style:h,children:[o.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),o.jsx(EUe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function MUe(e){var t=Za(),r=t.classNames,n=t.styles;return o.jsx("div",{className:r.months,style:n.months,children:e.children})}function RUe(e){var t,r,n=e.initialProps,a=Za(),i=gD(),s=_1(),l=v.useState(!1),c=l[0],u=l[1];v.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=Sn(Sn({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var x;return Sn(Sn({},g),(x={},x[p]=n[p],x))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:MUe;return o.jsx("div",Sn({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:o.jsx(m,{children:s.displayMonths.map(function(g,p){return o.jsx(DUe,{displayIndex:p,displayMonth:g},p)})})}))}function LUe(e){var t=e.children,r=s9e(e,["children"]);return o.jsx(C9e,{initialProps:r,children:o.jsx(R9e,{children:o.jsx(vUe,{initialProps:r,children:o.jsx(H9e,{initialProps:r,children:o.jsx(Y9e,{initialProps:r,children:o.jsx(nUe,{children:o.jsx(pUe,{children:t})})})})})})})}function iT(e){return o.jsx(LUe,Sn({},e,{children:o.jsx(RUe,{initialProps:e})}))}function Ju({className:e,classNames:t,showOutsideDays:r=!0,weekStartsOn:n=1,locale:a=Fc,...i}){const s=["dom","seg","ter","qua","qui","sex","sb"];return o.jsx(iT,{showOutsideDays:r,weekStartsOn:n,locale:a,className:kt("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:kt(Fy({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:kt(Fy({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},formatters:{formatWeekdayName:(l,c)=>s[l.getDay()]},components:{IconLeft:({...l})=>o.jsx(yW,{className:"h-4 w-4"}),IconRight:({...l})=>o.jsx($j,{className:"h-4 w-4"})},...i})}Ju.displayName="Calendar";var JQ="AlertDialog",[$Ue,oot]=_c(JQ,[uG]),df=uG(),QQ=e=>{const{__scopeAlertDialog:t,...r}=e,n=df(t);return o.jsx(CG,{...n,...r,modal:!0})};QQ.displayName=JQ;var FUe="AlertDialogTrigger",ZQ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=df(r);return o.jsx(fge,{...a,...n,ref:t})});ZQ.displayName=FUe;var BUe="AlertDialogPortal",eZ=e=>{const{__scopeAlertDialog:t,...r}=e,n=df(t);return o.jsx(AG,{...n,...r})};eZ.displayName=BUe;var zUe="AlertDialogOverlay",tZ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=df(r);return o.jsx(O4,{...a,...n,ref:t})});tZ.displayName=zUe;var av="AlertDialogContent",[qUe,UUe]=$Ue(av),VUe=Lme("AlertDialogContent"),rZ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=df(r),s=v.useRef(null),l=oa(t,s),c=v.useRef(null);return o.jsx(lge,{contentName:av,titleName:nZ,docsSlug:"alert-dialog",children:o.jsx(qUe,{scope:r,cancelRef:c,children:o.jsxs(T4,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Sr(a.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(VUe,{children:n}),o.jsx(HUe,{contentRef:s})]})})})});rZ.displayName=av;var nZ="AlertDialogTitle",aZ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=df(r);return o.jsx(I4,{...a,...n,ref:t})});aZ.displayName=nZ;var iZ="AlertDialogDescription",oZ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=df(r);return o.jsx(D4,{...a,...n,ref:t})});oZ.displayName=iZ;var WUe="AlertDialogAction",sZ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=df(r);return o.jsx(Zj,{...a,...n,ref:t})});sZ.displayName=WUe;var lZ="AlertDialogCancel",cZ=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=UUe(lZ,r),i=df(r),s=oa(t,a);return o.jsx(Zj,{...i,...n,ref:s})});cZ.displayName=lZ;var HUe=({contentRef:e})=>{const t=`\`${av}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${av}\` by passing a \`${iZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${av}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},GUe=QQ,KUe=ZQ,YUe=eZ,uZ=tZ,dZ=rZ,fZ=sZ,hZ=cZ,mZ=aZ,pZ=oZ;const Iu=GUe,Lm=KUe,XUe=YUe,gZ=se.forwardRef(({className:e,...t},r)=>o.jsx(uZ,{className:kt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));gZ.displayName=uZ.displayName;const Gc=se.forwardRef(({className:e,...t},r)=>o.jsxs(XUe,{children:[o.jsx(gZ,{}),o.jsx(dZ,{ref:r,className:kt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Gc.displayName=dZ.displayName;const Kc=({className:e,...t})=>o.jsx("div",{className:kt("flex flex-col space-y-2 text-center sm:text-left",e),...t});Kc.displayName="AlertDialogHeader";const Yc=({className:e,...t})=>o.jsx("div",{className:kt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Yc.displayName="AlertDialogFooter";const Xc=se.forwardRef(({className:e,...t},r)=>o.jsx(mZ,{ref:r,className:kt("text-lg font-semibold",e),...t}));Xc.displayName=mZ.displayName;const Jc=se.forwardRef(({className:e,...t},r)=>o.jsx(pZ,{ref:r,className:kt("text-sm text-muted-foreground",e),...t}));Jc.displayName=pZ.displayName;const Du=se.forwardRef(({className:e,...t},r)=>o.jsx(fZ,{ref:r,className:kt(Fy(),e),...t}));Du.displayName=fZ.displayName;const Qc=se.forwardRef(({className:e,...t},r)=>o.jsx(hZ,{ref:r,className:kt(Fy({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Qc.displayName=hZ.displayName;function K7(e,[t,r]){return Math.min(r,Math.max(t,e))}function aC(e){const t=e+"CollectionProvider",[r,n]=_c(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:x,children:y}=p,b=se.useRef(null),w=se.useRef(new Map).current;return o.jsx(a,{scope:x,itemMap:w,collectionRef:b,children:y})};s.displayName=t;const l=e+"CollectionSlot",c=Ah(l),u=se.forwardRef((p,x)=>{const{scope:y,children:b}=p,w=i(l,y),_=oa(x,w.collectionRef);return o.jsx(c,{ref:_,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Ah(d),m=se.forwardRef((p,x)=>{const{scope:y,children:b,...w}=p,_=se.useRef(null),j=oa(x,_),N=i(d,y);return se.useEffect(()=>(N.itemMap.set(_,{ref:_,...w}),()=>void N.itemMap.delete(_))),o.jsx(h,{[f]:"",ref:j,children:b})});m.displayName=d;function g(p){const x=i(e+"CollectionConsumer",p);return se.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((N,P)=>w.indexOf(N.ref.current)-w.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:u,ItemSlot:m},g,n]}var JUe=v.createContext(void 0);function iC(e){const t=v.useContext(JUe);return e||t||"ltr"}function vZ(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var xZ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QUe="VisuallyHidden",xD=v.forwardRef((e,t)=>o.jsx(xn.span,{...e,ref:t,style:{...xZ,...e.style}}));xD.displayName=QUe;var ZUe=[" ","Enter","ArrowUp","ArrowDown"],eVe=[" ","Enter"],bp="Select",[oC,sC,tVe]=aC(bp),[Ex,sot]=_c(bp,[tVe,Px]),lC=Px(),[rVe,Kh]=Ex(bp),[nVe,aVe]=Ex(bp),yZ=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:s,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=lC(t),[x,y]=v.useState(null),[b,w]=v.useState(null),[_,j]=v.useState(!1),N=iC(u),[P,A]=Xd({prop:n,defaultProp:a??!1,onChange:i,caller:bp}),[k,M]=Xd({prop:s,defaultProp:l,onChange:c,caller:bp}),E=v.useRef(null),I=x?g||!!x.closest("form"):!0,[O,R]=v.useState(new Set),B=Array.from(O).map(W=>W.props.value).join(";");return o.jsx(sD,{...p,children:o.jsxs(rVe,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:iu(),value:k,onValueChange:M,open:P,onOpenChange:A,dir:N,triggerPointerDownPosRef:E,disabled:h,children:[o.jsx(oC.Provider,{scope:t,children:o.jsx(nVe,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(W=>{R(F=>new Set(F).add(W))},[]),onNativeOptionRemove:v.useCallback(W=>{R(F=>{const $=new Set(F);return $.delete(W),$})},[]),children:r})}),I?o.jsxs(zZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:k,onChange:W=>M(W.target.value),disabled:h,form:g,children:[k===void 0?o.jsx("option",{value:""}):null,Array.from(O)]},B):null]})})};yZ.displayName=bp;var bZ="SelectTrigger",wZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=lC(r),s=Kh(bZ,r),l=s.disabled||n,c=oa(t,s.onTriggerChange),u=sC(r),d=v.useRef("touch"),[f,h,m]=UZ(p=>{const x=u().filter(w=>!w.disabled),y=x.find(w=>w.value===s.value),b=VZ(x,p,y);b!==void 0&&s.onValueChange(b.value)}),g=p=>{l||(s.onOpenChange(!0),m()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return o.jsx(tC,{asChild:!0,...i,children:o.jsx(xn.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":qZ(s.value)?"":void 0,...a,ref:c,onClick:Sr(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:Sr(a.onPointerDown,p=>{d.current=p.pointerType;const x=p.target;x.hasPointerCapture(p.pointerId)&&x.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Sr(a.onKeyDown,p=>{const x=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(x&&p.key===" ")&&ZUe.includes(p.key)&&(g(),p.preventDefault())})})})});wZ.displayName=bZ;var _Z="SelectValue",SZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:s="",...l}=e,c=Kh(_Z,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=oa(t,c.onValueNodeChange);return Go(()=>{u(d)},[u,d]),o.jsx(xn.span,{...l,ref:f,style:{pointerEvents:"none"},children:qZ(c.value)?o.jsx(o.Fragment,{children:s}):i})});SZ.displayName=_Z;var iVe="SelectIcon",jZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return o.jsx(xn.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});jZ.displayName=iVe;var oVe="SelectPortal",NZ=e=>o.jsx(ux,{asChild:!0,...e});NZ.displayName=oVe;var wp="SelectContent",CZ=v.forwardRef((e,t)=>{const r=Kh(wp,e.__scopeSelect),[n,a]=v.useState();if(Go(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Lh.createPortal(o.jsx(AZ,{scope:e.__scopeSelect,children:o.jsx(oC.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(PZ,{...e,ref:t})});CZ.displayName=wp;var Lc=10,[AZ,Yh]=Ex(wp),sVe="SelectContentImpl",lVe=Ah("SelectContent.RemoveScroll"),PZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:x,...y}=e,b=Kh(wp,r),[w,_]=v.useState(null),[j,N]=v.useState(null),P=oa(t,K=>_(K)),[A,k]=v.useState(null),[M,E]=v.useState(null),I=sC(r),[O,R]=v.useState(!1),B=v.useRef(!1);v.useEffect(()=>{if(w)return Jj(w)},[w]),Kj();const W=v.useCallback(K=>{const[he,...te]=I().map(Se=>Se.ref.current),[me]=te.slice(-1),Ee=document.activeElement;for(const Se of K)if(Se===Ee||(Se?.scrollIntoView({block:"nearest"}),Se===he&&j&&(j.scrollTop=0),Se===me&&j&&(j.scrollTop=j.scrollHeight),Se?.focus(),document.activeElement!==Ee))return},[I,j]),F=v.useCallback(()=>W([A,w]),[W,A,w]);v.useEffect(()=>{O&&F()},[O,F]);const{onOpenChange:$,triggerPointerDownPosRef:H}=b;v.useEffect(()=>{if(w){let K={x:0,y:0};const he=me=>{K={x:Math.abs(Math.round(me.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(me.pageY)-(H.current?.y??0))}},te=me=>{K.x<=10&&K.y<=10?me.preventDefault():w.contains(me.target)||$(!1),document.removeEventListener("pointermove",he),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",te,{capture:!0})}}},[w,$,H]),v.useEffect(()=>{const K=()=>$(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[$]);const[ce,oe]=UZ(K=>{const he=I().filter(Ee=>!Ee.disabled),te=he.find(Ee=>Ee.ref.current===document.activeElement),me=VZ(he,K,te);me&&setTimeout(()=>me.ref.current.focus())}),L=v.useCallback((K,he,te)=>{const me=!B.current&&!te;(b.value!==void 0&&b.value===he||me)&&(k(K),me&&(B.current=!0))},[b.value]),U=v.useCallback(()=>w?.focus(),[w]),J=v.useCallback((K,he,te)=>{const me=!B.current&&!te;(b.value!==void 0&&b.value===he||me)&&E(K)},[b.value]),V=n==="popper"?oT:EZ,Z=V===oT?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:x}:{};return o.jsx(AZ,{scope:r,content:w,viewport:j,onViewportChange:N,itemRefCallback:L,selectedItem:A,onItemLeave:U,itemTextRefCallback:J,focusSelectedItem:F,selectedItemText:M,position:n,isPositioned:O,searchRef:ce,children:o.jsx(Xj,{as:lVe,allowPinchZoom:!0,children:o.jsx(o1,{asChild:!0,trapped:b.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:Sr(a,K=>{b.trigger?.focus({preventScroll:!0}),K.preventDefault()}),children:o.jsx(cx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:o.jsx(V,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:K=>K.preventDefault(),...y,...Z,onPlaced:()=>R(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Sr(y.onKeyDown,K=>{const he=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!he&&K.key.length===1&&oe(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let me=I().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(K.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const Ee=K.target,Se=me.indexOf(Ee);me=me.slice(Se+1)}setTimeout(()=>W(me)),K.preventDefault()}})})})})})})});PZ.displayName=sVe;var cVe="SelectItemAlignedPosition",EZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Kh(wp,r),s=Yh(wp,r),[l,c]=v.useState(null),[u,d]=v.useState(null),f=oa(t,P=>d(P)),h=sC(r),m=v.useRef(!1),g=v.useRef(!0),{viewport:p,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=s,w=v.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&x&&y){const P=i.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),M=y.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=M.left-A.left,Se=k.left-Ee,We=P.left-Se,be=P.width+We,ne=Math.max(be,A.width),Qt=window.innerWidth-Lc,bt=K7(Se,[Lc,Math.max(Lc,Qt-ne)]);l.style.minWidth=be+"px",l.style.left=bt+"px"}else{const Ee=A.right-M.right,Se=window.innerWidth-k.right-Ee,We=window.innerWidth-P.right-Se,be=P.width+We,ne=Math.max(be,A.width),Qt=window.innerWidth-Lc,bt=K7(Se,[Lc,Math.max(Lc,Qt-ne)]);l.style.minWidth=be+"px",l.style.right=bt+"px"}const E=h(),I=window.innerHeight-Lc*2,O=p.scrollHeight,R=window.getComputedStyle(u),B=parseInt(R.borderTopWidth,10),W=parseInt(R.paddingTop,10),F=parseInt(R.borderBottomWidth,10),$=parseInt(R.paddingBottom,10),H=B+W+O+$+F,ce=Math.min(x.offsetHeight*5,H),oe=window.getComputedStyle(p),L=parseInt(oe.paddingTop,10),U=parseInt(oe.paddingBottom,10),J=P.top+P.height/2-Lc,V=I-J,Z=x.offsetHeight/2,K=x.offsetTop+Z,he=B+W+K,te=H-he;if(he<=J){const Ee=E.length>0&&x===E[E.length-1].ref.current;l.style.bottom="0px";const Se=u.clientHeight-p.offsetTop-p.offsetHeight,We=Math.max(V,Z+(Ee?U:0)+Se+F),be=he+We;l.style.height=be+"px"}else{const Ee=E.length>0&&x===E[0].ref.current;l.style.top="0px";const We=Math.max(J,B+p.offsetTop+(Ee?L:0)+Z)+te;l.style.height=We+"px",p.scrollTop=he-J+p.offsetTop}l.style.margin=`${Lc}px 0`,l.style.minHeight=ce+"px",l.style.maxHeight=I+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,p,x,y,i.dir,n]);Go(()=>w(),[w]);const[_,j]=v.useState();Go(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=v.useCallback(P=>{P&&g.current===!0&&(w(),b?.(),g.current=!1)},[w,b]);return o.jsx(dVe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:N,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:o.jsx(xn.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});EZ.displayName=cVe;var uVe="SelectPopperPosition",oT=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Lc,...i}=e,s=lC(r);return o.jsx(lD,{...s,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});oT.displayName=uVe;var[dVe,yD]=Ex(wp,{}),sT="SelectViewport",kZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Yh(sT,r),s=yD(sT,r),l=oa(t,i.onViewportChange),c=v.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(oC.Slot,{scope:r,children:o.jsx(xn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Sr(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=s;if(h?.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-Lc*2,p=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),y=Math.max(p,x);if(y<g){const b=y+m,w=Math.min(g,b),_=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});kZ.displayName=sT;var OZ="SelectGroup",[fVe,hVe]=Ex(OZ),mVe=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=iu();return o.jsx(fVe,{scope:r,id:a,children:o.jsx(xn.div,{role:"group","aria-labelledby":a,...n,ref:t})})});mVe.displayName=OZ;var TZ="SelectLabel",IZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=hVe(TZ,r);return o.jsx(xn.div,{id:a.id,...n,ref:t})});IZ.displayName=TZ;var YS="SelectItem",[pVe,DZ]=Ex(YS),MZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...s}=e,l=Kh(YS,r),c=Yh(YS,r),u=l.value===n,[d,f]=v.useState(i??""),[h,m]=v.useState(!1),g=oa(t,b=>c.itemRefCallback?.(b,n,a)),p=iu(),x=v.useRef("touch"),y=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(pVe,{scope:r,value:n,disabled:a,textId:p,isSelected:u,onItemTextChange:v.useCallback(b=>{f(w=>w||(b?.textContent??"").trim())},[]),children:o.jsx(oC.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:o.jsx(xn.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:g,onFocus:Sr(s.onFocus,()=>m(!0)),onBlur:Sr(s.onBlur,()=>m(!1)),onClick:Sr(s.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Sr(s.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Sr(s.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Sr(s.onPointerMove,b=>{x.current=b.pointerType,a?c.onItemLeave?.():x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Sr(s.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Sr(s.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(eVe.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});MZ.displayName=YS;var E0="SelectItemText",RZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,s=Kh(E0,r),l=Yh(E0,r),c=DZ(E0,r),u=aVe(E0,r),[d,f]=v.useState(null),h=oa(t,y=>f(y),c.onItemTextChange,y=>l.itemTextRefCallback?.(y,c.value,c.disabled)),m=d?.textContent,g=v.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:x}=u;return Go(()=>(p(g),()=>x(g)),[p,x,g]),o.jsxs(o.Fragment,{children:[o.jsx(xn.span,{id:c.textId,...i,ref:h}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Lh.createPortal(i.children,s.valueNode):null]})});RZ.displayName=E0;var LZ="SelectItemIndicator",$Z=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return DZ(LZ,r).isSelected?o.jsx(xn.span,{"aria-hidden":!0,...n,ref:t}):null});$Z.displayName=LZ;var lT="SelectScrollUpButton",gVe=v.forwardRef((e,t)=>{const r=Yh(lT,e.__scopeSelect),n=yD(lT,e.__scopeSelect),[a,i]=v.useState(!1),s=oa(t,n.onScrollButtonChange);return Go(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?o.jsx(FZ,{...e,ref:s,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});gVe.displayName=lT;var cT="SelectScrollDownButton",vVe=v.forwardRef((e,t)=>{const r=Yh(cT,e.__scopeSelect),n=yD(cT,e.__scopeSelect),[a,i]=v.useState(!1),s=oa(t,n.onScrollButtonChange);return Go(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?o.jsx(FZ,{...e,ref:s,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});vVe.displayName=cT;var FZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Yh("SelectScrollButton",r),s=v.useRef(null),l=sC(r),c=v.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),Go(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),o.jsx(xn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Sr(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:Sr(a.onPointerMove,()=>{i.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:Sr(a.onPointerLeave,()=>{c()})})}),xVe="SelectSeparator",BZ=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return o.jsx(xn.div,{"aria-hidden":!0,...n,ref:t})});BZ.displayName=xVe;var uT="SelectArrow",yVe=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=lC(r),i=Kh(uT,r),s=Yh(uT,r);return i.open&&s.position==="popper"?o.jsx(cD,{...a,...n,ref:t}):null});yVe.displayName=uT;var bVe="SelectBubbleInput",zZ=v.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=v.useRef(null),i=oa(n,a),s=vZ(t);return v.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[s,t]),o.jsx(xn.select,{...r,style:{...xZ,...r.style},ref:i,defaultValue:t})});zZ.displayName=bVe;function qZ(e){return e===""||e===void 0}function UZ(e){const t=al(e),r=v.useRef(""),n=v.useRef(0),a=v.useCallback(s=>{const l=r.current+s;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=v.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function VZ(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let s=wVe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==r));const c=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function wVe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var _Ve=yZ,WZ=wZ,SVe=SZ,jVe=jZ,NVe=NZ,HZ=CZ,CVe=kZ,GZ=IZ,KZ=MZ,AVe=RZ,PVe=$Z,YZ=BZ;const Yn=_Ve,Xn=SVe,Hn=se.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(WZ,{ref:n,className:kt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,o.jsx(jVe,{asChild:!0,children:o.jsx(__,{className:"h-4 w-4 opacity-50"})})]}));Hn.displayName=WZ.displayName;const Gn=se.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>o.jsx(NVe,{children:o.jsx(HZ,{ref:a,className:kt("relative z-50 min-w-[8rem] max-h-[340px] overflow-auto fx-scroll rounded-md border bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:o.jsx(CVe,{className:kt("p-1",r==="popper"&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Gn.displayName=HZ.displayName;const EVe=se.forwardRef(({className:e,...t},r)=>o.jsx(GZ,{ref:r,className:kt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));EVe.displayName=GZ.displayName;const qt=se.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(KZ,{ref:n,className:kt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(PVe,{children:o.jsx(My,{className:"h-4 w-4"})})}),o.jsx(AVe,{children:t})]}));qt.displayName=KZ.displayName;const kVe=se.forwardRef(({className:e,...t},r)=>o.jsx(YZ,{ref:r,className:kt("-mx-1 my-1 h-px bg-muted",e),...t}));kVe.displayName=YZ.displayName;var cC="Checkbox",[OVe,lot]=_c(cC),[TVe,bD]=OVe(cC);function IVe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:s,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Xd({prop:r,defaultProp:a??!1,onChange:c,caller:cC}),[g,p]=v.useState(null),[x,y]=v.useState(null),b=v.useRef(!1),w=g?!!s||!!g.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:s,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:mh(a)?!1:a,isFormControl:w,bubbleInput:x,setBubbleInput:y};return o.jsx(TVe,{scope:t,..._,children:DVe(f)?f(_):n})}var XZ="CheckboxTrigger",JZ=v.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:s,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=bD(XZ,e),p=oa(a,d),x=v.useRef(c);return v.useEffect(()=>{const y=i?.form;if(y){const b=()=>f(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[i,f]),o.jsx(xn.button,{type:"button",role:"checkbox","aria-checked":mh(c)?"mixed":c,"aria-required":u,"data-state":ree(c),"data-disabled":l?"":void 0,disabled:l,value:s,...n,ref:p,onKeyDown:Sr(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Sr(r,y=>{f(b=>mh(b)?!0:!b),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});JZ.displayName=XZ;var wD=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:s,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return o.jsx(IVe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:s,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>o.jsxs(o.Fragment,{children:[o.jsx(JZ,{...f,ref:t,__scopeCheckbox:r}),h&&o.jsx(tee,{__scopeCheckbox:r})]})})});wD.displayName=cC;var QZ="CheckboxIndicator",ZZ=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=bD(QZ,r);return o.jsx(ql,{present:n||mh(i.checked)||i.checked===!0,children:o.jsx(xn.span,{"data-state":ree(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});ZZ.displayName=QZ;var eee="CheckboxBubbleInput",tee=v.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:s,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=bD(eee,e),g=oa(r,m),p=vZ(i),x=bQ(n);v.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,N=!a.current;if(p!==i&&j){const P=new Event("click",{bubbles:N});b.indeterminate=mh(i),j.call(b,mh(i)?!1:i),b.dispatchEvent(P)}},[h,p,i,a]);const y=v.useRef(mh(i)?!1:i);return o.jsx(xn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??y.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});tee.displayName=eee;function DVe(e){return typeof e=="function"}function mh(e){return e==="indeterminate"}function ree(e){return mh(e)?"indeterminate":e?"checked":"unchecked"}const Sl=se.forwardRef(({className:e,...t},r)=>o.jsx(wD,{ref:r,className:kt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:o.jsx(ZZ,{className:kt("flex items-center justify-center text-current"),children:o.jsx(My,{className:"h-4 w-4"})})}));Sl.displayName=wD.displayName;var GA="rovingFocusGroup.onEntryFocus",MVe={bubbles:!1,cancelable:!0},S1="RovingFocusGroup",[dT,nee,RVe]=aC(S1),[LVe,uC]=_c(S1,[RVe]),[$Ve,FVe]=LVe(S1),aee=v.forwardRef((e,t)=>o.jsx(dT.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(dT.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(BVe,{...e,ref:t})})}));aee.displayName=S1;var BVe=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=v.useRef(null),m=oa(t,h),g=iC(i),[p,x]=Xd({prop:s,defaultProp:l??null,onChange:c,caller:S1}),[y,b]=v.useState(!1),w=al(u),_=nee(r),j=v.useRef(!1),[N,P]=v.useState(0);return v.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(GA,w),()=>A.removeEventListener(GA,w)},[w]),o.jsx($Ve,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:v.useCallback(A=>x(A),[x]),onItemShiftTab:v.useCallback(()=>b(!0),[]),onFocusableItemAdd:v.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:v.useCallback(()=>P(A=>A-1),[]),children:o.jsx(xn.div,{tabIndex:y||N===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Sr(e.onMouseDown,()=>{j.current=!0}),onFocus:Sr(e.onFocus,A=>{const k=!j.current;if(A.target===A.currentTarget&&k&&!y){const M=new CustomEvent(GA,MVe);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const E=_().filter(W=>W.focusable),I=E.find(W=>W.active),O=E.find(W=>W.id===p),B=[I,O,...E].filter(Boolean).map(W=>W.ref.current);see(B,d)}}j.current=!1}),onBlur:Sr(e.onBlur,()=>b(!1))})})}),iee="RovingFocusGroupItem",oee=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:s,...l}=e,c=iu(),u=i||c,d=FVe(iee,r),f=d.currentTabStopId===u,h=nee(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return v.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),o.jsx(dT.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:o.jsx(xn.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Sr(e.onMouseDown,x=>{n?d.onItemFocus(u):x.preventDefault()}),onFocus:Sr(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Sr(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=UVe(x,d.orientation,d.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const _=w.indexOf(x.currentTarget);w=d.loop?VVe(w,_+1):w.slice(_+1)}setTimeout(()=>see(w))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:p!=null}):s})})});oee.displayName=iee;var zVe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qVe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function UVe(e,t,r){const n=qVe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return zVe[n]}function see(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function VVe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var lee=aee,cee=oee,fT=["Enter"," "],WVe=["ArrowDown","PageUp","Home"],uee=["ArrowUp","PageDown","End"],HVe=[...WVe,...uee],GVe={ltr:[...fT,"ArrowRight"],rtl:[...fT,"ArrowLeft"]},KVe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},j1="Menu",[Pb,YVe,XVe]=aC(j1),[Fp,dee]=_c(j1,[XVe,Px,uC]),dC=Px(),fee=uC(),[JVe,Bp]=Fp(j1),[QVe,N1]=Fp(j1),hee=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:s=!0}=e,l=dC(t),[c,u]=v.useState(null),d=v.useRef(!1),f=al(i),h=iC(a);return v.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),o.jsx(sD,{...l,children:o.jsx(JVe,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(QVe,{scope:t,onClose:v.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:s,children:n})})})};hee.displayName=j1;var ZVe="MenuAnchor",_D=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=dC(r);return o.jsx(tC,{...a,...n,ref:t})});_D.displayName=ZVe;var SD="MenuPortal",[eWe,mee]=Fp(SD,{forceMount:void 0}),pee=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Bp(SD,t);return o.jsx(eWe,{scope:t,forceMount:r,children:o.jsx(ql,{present:r||i.open,children:o.jsx(ux,{asChild:!0,container:a,children:n})})})};pee.displayName=SD;var pc="MenuContent",[tWe,jD]=Fp(pc),gee=v.forwardRef((e,t)=>{const r=mee(pc,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Bp(pc,e.__scopeMenu),s=N1(pc,e.__scopeMenu);return o.jsx(Pb.Provider,{scope:e.__scopeMenu,children:o.jsx(ql,{present:n||i.open,children:o.jsx(Pb.Slot,{scope:e.__scopeMenu,children:s.modal?o.jsx(rWe,{...a,ref:t}):o.jsx(nWe,{...a,ref:t})})})})}),rWe=v.forwardRef((e,t)=>{const r=Bp(pc,e.__scopeMenu),n=v.useRef(null),a=oa(t,n);return v.useEffect(()=>{const i=n.current;if(i)return Jj(i)},[]),o.jsx(ND,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Sr(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),nWe=v.forwardRef((e,t)=>{const r=Bp(pc,e.__scopeMenu);return o.jsx(ND,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),aWe=Ah("MenuContent.ScrollLock"),ND=v.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,x=Bp(pc,r),y=N1(pc,r),b=dC(r),w=fee(r),_=YVe(r),[j,N]=v.useState(null),P=v.useRef(null),A=oa(t,P,x.onContentChange),k=v.useRef(0),M=v.useRef(""),E=v.useRef(0),I=v.useRef(null),O=v.useRef("right"),R=v.useRef(0),B=g?Xj:v.Fragment,W=g?{as:aWe,allowPinchZoom:!0}:void 0,F=H=>{const ce=M.current+H,oe=_().filter(K=>!K.disabled),L=document.activeElement,U=oe.find(K=>K.ref.current===L)?.textValue,J=oe.map(K=>K.textValue),V=gWe(J,ce,U),Z=oe.find(K=>K.textValue===V)?.ref.current;(function K(he){M.current=he,window.clearTimeout(k.current),he!==""&&(k.current=window.setTimeout(()=>K(""),1e3))})(ce),Z&&setTimeout(()=>Z.focus())};v.useEffect(()=>()=>window.clearTimeout(k.current),[]),Kj();const $=v.useCallback(H=>O.current===I.current?.side&&xWe(H,I.current?.area),[]);return o.jsx(tWe,{scope:r,searchRef:M,onItemEnter:v.useCallback(H=>{$(H)&&H.preventDefault()},[$]),onItemLeave:v.useCallback(H=>{$(H)||(P.current?.focus(),N(null))},[$]),onTriggerLeave:v.useCallback(H=>{$(H)&&H.preventDefault()},[$]),pointerGraceTimerRef:E,onPointerGraceIntentChange:v.useCallback(H=>{I.current=H},[]),children:o.jsx(B,{...W,children:o.jsx(o1,{asChild:!0,trapped:a,onMountAutoFocus:Sr(i,H=>{H.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:o.jsx(cx,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:o.jsx(lee,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:Sr(c,H=>{y.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(lD,{role:"menu","aria-orientation":"vertical","data-state":Tee(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:Sr(p.onKeyDown,H=>{const oe=H.target.closest("[data-radix-menu-content]")===H.currentTarget,L=H.ctrlKey||H.altKey||H.metaKey,U=H.key.length===1;oe&&(H.key==="Tab"&&H.preventDefault(),!L&&U&&F(H.key));const J=P.current;if(H.target!==J||!HVe.includes(H.key))return;H.preventDefault();const Z=_().filter(K=>!K.disabled).map(K=>K.ref.current);uee.includes(H.key)&&Z.reverse(),mWe(Z)}),onBlur:Sr(e.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(k.current),M.current="")}),onPointerMove:Sr(e.onPointerMove,Eb(H=>{const ce=H.target,oe=R.current!==H.clientX;if(H.currentTarget.contains(ce)&&oe){const L=H.clientX>R.current?"right":"left";O.current=L,R.current=H.clientX}}))})})})})})})});gee.displayName=pc;var iWe="MenuGroup",CD=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(xn.div,{role:"group",...n,ref:t})});CD.displayName=iWe;var oWe="MenuLabel",vee=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(xn.div,{...n,ref:t})});vee.displayName=oWe;var XS="MenuItem",Y7="menu.itemSelect",fC=v.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=v.useRef(null),s=N1(XS,e.__scopeMenu),l=jD(XS,e.__scopeMenu),c=oa(t,i),u=v.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(Y7,{bubbles:!0,cancelable:!0});f.addEventListener(Y7,m=>n?.(m),{once:!0}),A4(f,h),h.defaultPrevented?u.current=!1:s.onClose()}};return o.jsx(xee,{...a,ref:c,disabled:r,onClick:Sr(e.onClick,d),onPointerDown:f=>{e.onPointerDown?.(f),u.current=!0},onPointerUp:Sr(e.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:Sr(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||fT.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});fC.displayName=XS;var xee=v.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,s=jD(XS,r),l=fee(r),c=v.useRef(null),u=oa(t,c),[d,f]=v.useState(!1),[h,m]=v.useState("");return v.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),o.jsx(Pb.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:o.jsx(cee,{asChild:!0,...l,focusable:!n,children:o.jsx(xn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Sr(e.onPointerMove,Eb(g=>{n?s.onItemLeave(g):(s.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Sr(e.onPointerLeave,Eb(g=>s.onItemLeave(g))),onFocus:Sr(e.onFocus,()=>f(!0)),onBlur:Sr(e.onBlur,()=>f(!1))})})})}),sWe="MenuCheckboxItem",yee=v.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return o.jsx(jee,{scope:e.__scopeMenu,checked:r,children:o.jsx(fC,{role:"menuitemcheckbox","aria-checked":JS(r)?"mixed":r,...a,ref:t,"data-state":PD(r),onSelect:Sr(a.onSelect,()=>n?.(JS(r)?!0:!r),{checkForDefaultPrevented:!1})})})});yee.displayName=sWe;var bee="MenuRadioGroup",[lWe,cWe]=Fp(bee,{value:void 0,onValueChange:()=>{}}),wee=v.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=al(n);return o.jsx(lWe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:o.jsx(CD,{...a,ref:t})})});wee.displayName=bee;var _ee="MenuRadioItem",See=v.forwardRef((e,t)=>{const{value:r,...n}=e,a=cWe(_ee,e.__scopeMenu),i=r===a.value;return o.jsx(jee,{scope:e.__scopeMenu,checked:i,children:o.jsx(fC,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":PD(i),onSelect:Sr(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});See.displayName=_ee;var AD="MenuItemIndicator",[jee,uWe]=Fp(AD,{checked:!1}),Nee=v.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=uWe(AD,r);return o.jsx(ql,{present:n||JS(i.checked)||i.checked===!0,children:o.jsx(xn.span,{...a,ref:t,"data-state":PD(i.checked)})})});Nee.displayName=AD;var dWe="MenuSeparator",Cee=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(xn.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Cee.displayName=dWe;var fWe="MenuArrow",Aee=v.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=dC(r);return o.jsx(cD,{...a,...n,ref:t})});Aee.displayName=fWe;var hWe="MenuSub",[cot,Pee]=Fp(hWe),k0="MenuSubTrigger",Eee=v.forwardRef((e,t)=>{const r=Bp(k0,e.__scopeMenu),n=N1(k0,e.__scopeMenu),a=Pee(k0,e.__scopeMenu),i=jD(k0,e.__scopeMenu),s=v.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=v.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return v.useEffect(()=>d,[d]),v.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(_D,{asChild:!0,...u,children:o.jsx(xee,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":Tee(r.open),...e,ref:Gj(t,a.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Sr(e.onPointerMove,Eb(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Sr(e.onPointerLeave,Eb(f=>{d();const h=r.content?.getBoundingClientRect();if(h){const m=r.content?.dataset.side,g=m==="right",p=g?-5:5,x=h[g?"left":"right"],y=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+p,y:f.clientY},{x,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x,y:h.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Sr(e.onKeyDown,f=>{const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||GVe[n.dir].includes(f.key)&&(r.onOpenChange(!0),r.content?.focus(),f.preventDefault())})})})});Eee.displayName=k0;var kee="MenuSubContent",Oee=v.forwardRef((e,t)=>{const r=mee(pc,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Bp(pc,e.__scopeMenu),s=N1(pc,e.__scopeMenu),l=Pee(kee,e.__scopeMenu),c=v.useRef(null),u=oa(t,c);return o.jsx(Pb.Provider,{scope:e.__scopeMenu,children:o.jsx(ql,{present:n||i.open,children:o.jsx(Pb.Slot,{scope:e.__scopeMenu,children:o.jsx(ND,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{s.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Sr(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Sr(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:Sr(e.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),h=KVe[s.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});Oee.displayName=kee;function Tee(e){return e?"open":"closed"}function JS(e){return e==="indeterminate"}function PD(e){return JS(e)?"indeterminate":e?"checked":"unchecked"}function mWe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function pWe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function gWe(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let s=pWe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==r));const c=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function vWe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const l=t[i],c=t[s],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function xWe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return vWe(r,t)}function Eb(e){return t=>t.pointerType==="mouse"?e(t):void 0}var yWe=hee,bWe=_D,wWe=pee,_We=gee,SWe=CD,jWe=vee,NWe=fC,CWe=yee,AWe=wee,PWe=See,EWe=Nee,kWe=Cee,OWe=Aee,TWe=Eee,IWe=Oee,hC="DropdownMenu",[DWe,uot]=_c(hC,[dee]),Rs=dee(),[MWe,Iee]=DWe(hC),Dee=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:s,modal:l=!0}=e,c=Rs(t),u=v.useRef(null),[d,f]=Xd({prop:a,defaultProp:i??!1,onChange:s,caller:hC});return o.jsx(MWe,{scope:t,triggerId:iu(),triggerRef:u,contentId:iu(),open:d,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(h=>!h),[f]),modal:l,children:o.jsx(yWe,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};Dee.displayName=hC;var Mee="DropdownMenuTrigger",Ree=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=Iee(Mee,r),s=Rs(r);return o.jsx(bWe,{asChild:!0,...s,children:o.jsx(xn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Gj(t,i.triggerRef),onPointerDown:Sr(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Sr(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Ree.displayName=Mee;var RWe="DropdownMenuPortal",Lee=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Rs(t);return o.jsx(wWe,{...n,...r})};Lee.displayName=RWe;var $ee="DropdownMenuContent",Fee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Iee($ee,r),i=Rs(r),s=v.useRef(!1);return o.jsx(_We,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:Sr(e.onCloseAutoFocus,l=>{s.current||a.triggerRef.current?.focus(),s.current=!1,l.preventDefault()}),onInteractOutside:Sr(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Fee.displayName=$ee;var LWe="DropdownMenuGroup",$We=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(SWe,{...a,...n,ref:t})});$We.displayName=LWe;var FWe="DropdownMenuLabel",Bee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(jWe,{...a,...n,ref:t})});Bee.displayName=FWe;var BWe="DropdownMenuItem",zee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(NWe,{...a,...n,ref:t})});zee.displayName=BWe;var zWe="DropdownMenuCheckboxItem",qee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(CWe,{...a,...n,ref:t})});qee.displayName=zWe;var qWe="DropdownMenuRadioGroup",UWe=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(AWe,{...a,...n,ref:t})});UWe.displayName=qWe;var VWe="DropdownMenuRadioItem",Uee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(PWe,{...a,...n,ref:t})});Uee.displayName=VWe;var WWe="DropdownMenuItemIndicator",Vee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(EWe,{...a,...n,ref:t})});Vee.displayName=WWe;var HWe="DropdownMenuSeparator",Wee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(kWe,{...a,...n,ref:t})});Wee.displayName=HWe;var GWe="DropdownMenuArrow",KWe=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(OWe,{...a,...n,ref:t})});KWe.displayName=GWe;var YWe="DropdownMenuSubTrigger",Hee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(TWe,{...a,...n,ref:t})});Hee.displayName=YWe;var XWe="DropdownMenuSubContent",Gee=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Rs(r);return o.jsx(IWe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gee.displayName=XWe;var JWe=Dee,QWe=Ree,ZWe=Lee,Kee=Fee,Yee=Bee,Xee=zee,Jee=qee,Qee=Uee,Zee=Vee,ete=Wee,tte=Hee,rte=Gee;const ry=JWe,ny=QWe,eHe=se.forwardRef(({className:e,inset:t,children:r,...n},a)=>o.jsxs(tte,{ref:a,className:kt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,o.jsx($j,{className:"ml-auto h-4 w-4"})]}));eHe.displayName=tte.displayName;const tHe=se.forwardRef(({className:e,...t},r)=>o.jsx(rte,{ref:r,className:kt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));tHe.displayName=rte.displayName;const iv=se.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(ZWe,{children:o.jsx(Kee,{ref:n,sideOffset:t,className:kt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));iv.displayName=Kee.displayName;const nc=se.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(Xee,{ref:n,className:kt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));nc.displayName=Xee.displayName;const rHe=se.forwardRef(({className:e,children:t,checked:r,...n},a)=>o.jsxs(Jee,{ref:a,className:kt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Zee,{children:o.jsx(My,{className:"h-4 w-4"})})}),t]}));rHe.displayName=Jee.displayName;const nHe=se.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(Qee,{ref:n,className:kt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Zee,{children:o.jsx(Xce,{className:"h-2 w-2 fill-current"})})}),t]}));nHe.displayName=Qee.displayName;const nte=se.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(Yee,{ref:n,className:kt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));nte.displayName=Yee.displayName;const hT=se.forwardRef(({className:e,...t},r)=>o.jsx(ete,{ref:r,className:kt("-mx-1 my-1 h-px bg-muted",e),...t}));hT.displayName=ete.displayName;function Dn(){try{const e=localStorage.getItem("auth:userProfile");if(e){const r=JSON.parse(e);if(r?.codigo_empresa)return r.codigo_empresa}const t=localStorage.getItem("auth:company");if(t){const r=JSON.parse(t);if(r?.codigo_empresa)return r.codigo_empresa;if(r?.codigo)return r.codigo}return typeof window<"u"&&window.__authProfile&&window.__authProfile.codigo_empresa?window.__authProfile.codigo_empresa:null}catch{return null}}async function ov({somenteAtivas:e=!0,codigoEmpresa:t}={}){const r=t||Dn();let n=Ne.from("finalizadoras").select("*").order("codigo_interno",{ascending:!0,nullsFirst:!1}).order("nome",{ascending:!0});r&&(n=n.eq("codigo_empresa",r)),e&&(n=n.eq("ativo",!0));const{data:a,error:i}=await n;if(i)throw i;const s=a||[];return s.sort((l,c)=>{const u=parseInt(l?.codigo_interno)||0,d=parseInt(c?.codigo_interno)||0;if(u!==d)return u-d;const f=(l?.nome||"").toLowerCase(),h=(c?.nome||"").toLowerCase();return f.localeCompare(h)}),s}async function aHe(e,t){const r=t||Dn(),n={codigo_interno:e?.codigo_interno||null,codigo_sefaz:e?.codigo_sefaz||null,nome:(e?.nome||"").trim(),tipo:e?.tipo||"outros",ativo:e?.ativo??!0,taxa_percentual:e?.taxa_percentual==null?null:Number(e.taxa_percentual)};if(!n.nome)throw new Error("Nome  obrigatrio");r&&(n.codigo_empresa=r);const{data:a,error:i}=await Ne.from("finalizadoras").insert(n).select("*").single();if(i)throw i;return a}async function QS({caixaSessaoId:e,codigoEmpresa:t}={}){if(!e)throw new Error("caixaSessaoId  obrigatrio");const r=t||Dn();let n=Ne.from("caixa_sessoes").select("id, aberto_em, fechado_em, saldo_inicial, saldo_final").eq("id",e).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const s=Array.isArray(a)?a[0]:a;if(!s)throw new Error("Sesso no encontrada");const l=s.aberto_em,c=s.fechado_em||new Date().toISOString(),u=await fc({from:l,to:c,codigoEmpresa:r});let d=0,f=0,h=0,m=0;try{let p=Ne.from("caixa_movimentacoes").select("tipo, valor").eq("caixa_sessao_id",e);r&&(p=p.eq("codigo_empresa",r));const{data:x}=await p;for(const y of x||[]){const b=Number(y?.valor||0),w=String(y?.tipo||"").toLowerCase();w==="suprimento"?d+=b:w==="sangria"?f+=b:w==="ajuste"?h+=b:w==="troco"&&(m+=b)}}catch{}const g=d+h-f-m;return{...u,saldoInicial:Number(s.saldo_inicial||0),saldoFinal:s.saldo_final!=null?Number(s.saldo_final):null,movimentos:{suprimentos:d,sangrias:f,ajustes:h,troco:m,totalMovimentos:g}}}async function iHe(e,t,r){if(!e)throw new Error("ID invlido");const n=r||Dn(),a={codigo_interno:t?.codigo_interno||null,codigo_sefaz:t?.codigo_sefaz||null,nome:(t?.nome||"").trim(),tipo:t?.tipo||"outros",ativo:t?.ativo??!0,taxa_percentual:t?.taxa_percentual==null?null:Number(t.taxa_percentual)};if(!a.nome)throw new Error("Nome  obrigatrio");let i=Ne.from("finalizadoras").update(a).eq("id",e);n&&(i=i.eq("codigo_empresa",n));const{data:s,error:l}=await i.select("*").single();if(l)throw l;return s}async function oHe(e,t,r){if(!e)throw new Error("ID invlido");const n=r||Dn();let a=Ne.from("finalizadoras").update({ativo:!!t}).eq("id",e);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:s}=await a.select("*").single();if(s)throw s;return i}async function ED({codigoEmpresa:e}={}){const t=e||Dn();let r=Ne.from("caixa_sessoes").select("id").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;if(!(Array.isArray(n)&&n.length>0)){const s=new Error(" necessrio abrir o caixa antes de criar comandas.");throw s.code="NO_OPEN_CASH_SESSION",s}return!0}async function X7(e=[],t){if(!Array.isArray(e)||e.length===0)return{};const r=t||Dn(),n=async s=>{let l=Ne.from("comanda_clientes").select(`comanda_id, cliente_id, nome_livre, clientes:clientes${s}(id, nome)`).in("comanda_id",e);return r&&(l=l.eq("codigo_empresa",r)),l};let a=[];try{const{data:s,error:l}=await n("!comanda_clientes_cliente_id_fkey");if(l)throw l;a=s||[]}catch{try{const{data:s,error:l}=await n("!fk_comanda_clientes_cliente");if(l)throw l;a=s||[]}catch{let s=Ne.from("comanda_clientes").select("comanda_id, cliente_id, nome_livre").in("comanda_id",e);r&&(s=s.eq("codigo_empresa",r));const{data:l}=await s;a=l||[]}}const i={};for(const s of a){const l=s.comanda_id,c=s.clientes?.nome||s.nome_livre||"";i[l]||(i[l]=[]),c&&i[l].push(c)}for(const s of Object.keys(i))i[s]=Array.from(new Set(i[s])).join(", ");return i}async function J7(e=[],t){if(!Array.isArray(e)||e.length===0)return{};const r=t||Dn();let n=Ne.from("pagamentos").select("comanda_id, metodo, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").in("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const s={};for(const c of a||[]){if(!((c.status||"Pago")!=="Cancelado"&&(c.status||"Pago")!=="Estornado"))continue;const d=c.comanda_id,f=c?.finalizadoras?.nome||c.metodo||"Outros";s[d]||(s[d]=[]),s[d].push(f)}const l={};for(const[c,u]of Object.entries(s))u.length===0?l[c]="":u.length===1?l[c]=u[0]:l[c]=`${u[0]} +${u.length-1}`;return l}async function sHe({comandaId:e,codigoEmpresa:t}={}){if(!e)throw new Error("comandaId  obrigatrio");const r=t||Dn();let n=Ne.from("comanda_itens").select("produto_id, quantidade").eq("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const s=new Map;for(const m of a||[]){const g=m.produto_id,p=Number(m.quantidade||0);s.set(g,(s.get(g)||0)+p)}if(s.size===0)return!0;const l=Array.from(s.keys());let c=Ne.from("produtos").select("id, nome, estoque");c=c.in("id",l),r&&(c=c.eq("codigo_empresa",r));const{data:u,error:d}=await c;if(d)throw d;const f=new Map((u||[]).map(m=>[m.id,{nome:m.nome,estoque:Number(m.estoque||0)}])),h=[];for(const[m,g]of s.entries()){const p=f.get(m)||{nome:`Produto ${m}`,estoque:0};g>p.estoque&&h.push({id:m,name:p.nome,solicitado:g,estoque:p.estoque})}if(h.length>0){const m=h.map(p=>`${p.name}: solicitado ${p.solicitado}, estoque ${p.estoque}`).join("; "),g=new Error(`Estoque insuficiente para finalizar: ${m}`);throw g.code="INSUFFICIENT_STOCK_COMANDA",g.items=h,g}return!0}async function ate({codigoEmpresa:e}={}){const t=e||Dn();let r=Ne.from("comandas").select("id,status,aberto_em").is("mesa_id",null).in("status",["open","awaiting-payment"]).order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n?.[0]||null}async function Q7({codigoEmpresa:e}={}){const t=e||Dn();console.log("[getOrCreateComandaBalcao] Iniciando com codigo_empresa:",t),await ED({codigoEmpresa:t});const r=await ate({codigoEmpresa:t});if(r)return console.log("[getOrCreateComandaBalcao] Comanda existente encontrada:",r),r;const n={status:"open",mesa_id:null,aberto_em:new Date().toISOString()};console.log("[getOrCreateComandaBalcao] Criando nova comanda (codigo_empresa via DEFAULT):",n);const{data:a,error:i}=await Ne.from("comandas").insert(n).select("id,status,aberto_em,tipo,codigo_empresa").single();if(i)throw console.error("[getOrCreateComandaBalcao] ERRO ao criar comanda:",i),i;return console.log("[getOrCreateComandaBalcao] Comanda criada com sucesso:",a),console.log("[getOrCreateComandaBalcao] Codigo da comanda criada:",a?.codigo_empresa,"vs esperado:",t),await new Promise(s=>setTimeout(s,100)),a}async function Z7({status:e,from:t,to:r,search:n="",limit:a=50,offset:i=0,codigoEmpresa:s}={}){const l=s||Dn();let c=Ne.from("comandas").select("id, mesa_id, status, aberto_em, fechado_em").order("fechado_em",{ascending:!1,nullsFirst:!1}).order("aberto_em",{ascending:!1}).range(i,i+a-1);l&&(c=c.eq("codigo_empresa",l)),e&&Array.isArray(e)&&e.length?c=c.in("status",e):typeof e=="string"&&(e==="closed"?c=c.or("status.eq.closed,fechado_em.not.is.null").neq("status","cancelled"):c=c.eq("status",e));const u=x=>{if(!x)return null;if(typeof x=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(x)){const[y,b,w]=x.split("-").map(Number);return new Date(y,b-1,w,0,0,0,0)}return new Date(x)},d=x=>{if(!x)return null;if(typeof x=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(x)){const[y,b,w]=x.split("-").map(Number);return new Date(y,b-1,w,23,59,59,999)}return new Date(x)},f=u(t),h=d(r);f&&(c=c.gte("aberto_em",f.toISOString())),h&&(c=c.lte("aberto_em",h.toISOString()));const m=(n||"").trim();if(m){const x=/^\d+$/.test(m),y=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(m);x||y?c=c.or(`id.eq.${m},status.ilike.%${m}%`):c=c.or(`status.ilike.%${m}%`)}const{data:g,error:p}=await c;if(p)throw p;return g||[]}async function fc({from:e,to:t,codigoEmpresa:r}={}){const n="[listarResumoPeriodo]",a=r||Dn();console.log(`${n} Iniciando consulta`),console.log(`${n} Perodo: ${e||"SEM from"} at ${t||"SEM to"}`),console.log(`${n} codigo_empresa: ${a}`);let i=[];try{let h=Ne.from("comandas").select("id, fechado_em").eq("status","closed");a&&(h=h.eq("codigo_empresa",a)),e&&(h=h.gte("fechado_em",new Date(e).toISOString())),t&&(h=h.lte("fechado_em",new Date(t).toISOString()));const{data:m,error:g}=await h;if(g)throw g;i=m||[]}catch{i=[]}const s=(i||[]).map(h=>h.id);let l=0,c=0;if(s.length>0)try{let h=Ne.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",s);a&&(h=h.eq("codigo_empresa",a));const{data:m,error:g}=await h;if(g)throw g;for(const p of m||[]){const x=Number(p.quantidade||0)*Number(p.preco_unitario||0),y=Number(p.desconto||0);l+=x,c+=y}}catch{}const u=Math.max(0,l-c),d={};let f=0;try{let h=Ne.from("pagamentos").select("metodo, valor, recebido_em, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)");a&&(h=h.eq("codigo_empresa",a)),e&&(h=h.gte("recebido_em",new Date(e).toISOString())),t&&(h=h.lte("recebido_em",new Date(t).toISOString())),console.log(`${n} Consultando pagamentos de comandas...`);const{data:m,error:g}=await h;if(g)throw console.error(`${n}  Erro ao buscar pagamentos:`,g),g;console.log(`${n} Total de pagamentos de comandas encontrados: ${(m||[]).length}`);for(const p of m||[]){if(!((p.status||"Pago")!=="Cancelado"&&(p.status||"Pago")!=="Estornado"))continue;const y=p.finalizadoras?.nome||p.metodo||"outros",b=Number(p.valor||0);d[y]=(d[y]||0)+b,f+=b}console.log(`${n}  Resumo comandas por finalizadora:`,d)}catch(h){console.error(`${n}  Exception ao processar pagamentos de comandas:`,h)}try{let h=Ne.from("agendamentos").select("id, inicio");a&&(h=h.eq("codigo_empresa",a)),e&&(h=h.gte("inicio",new Date(e).toISOString())),t&&(h=h.lte("inicio",new Date(t).toISOString())),console.log(`${n} Consultando agendamentos no perodo...`);const{data:m,error:g}=await h;if(g)throw console.error(`${n}  Erro ao buscar agendamentos:`,g),g;if(console.log(`${n} Total de agendamentos encontrados: ${(m||[]).length}`),m&&m.length>0){const p=m.map(w=>w.id);let x=Ne.from("agendamento_participantes").select("valor_cota, status_pagamento, finalizadora_id, aplicar_taxa, finalizadoras!agp_finalizadora_id_fkey(nome, taxa_percentual)").in("agendamento_id",p).eq("status_pagamento","Pago");a&&(x=x.eq("codigo_empresa",a)),console.log(`${n} Consultando participantes pagos...`);const{data:y,error:b}=await x;if(b)throw console.error(`${n}  Erro ao buscar participantes:`,b),b;console.log(`${n} Total de participantes pagos encontrados: ${(y||[]).length}`);for(const w of y||[]){const _=w.finalizadoras?.nome||"Outros";let j=Number(w.valor_cota||0);if(w.aplicar_taxa===!0){const N=Number(w.finalizadoras?.taxa_percentual||0);N>0&&(j=j/(1+N/100),console.log(`${n}  Participante com taxa: valor_cota=${w.valor_cota}, taxa=${N}%, valor_real=${j.toFixed(2)}`))}d[_]=(d[_]||0)+j,f+=j}console.log(`${n}  Resumo agendamentos por finalizadora:`,d)}}catch(h){console.error(`${n}  Exception ao processar pagamentos de agendamentos:`,h)}return console.log(`${n}  RESUMO FINAL por finalizadora:`,d),console.log(`${n} Total de entradas: R$ ${f.toFixed(2)}`),{from:e?new Date(e).toISOString():null,to:t?new Date(t).toISOString():null,totalPorFinalizadora:d,totalEntradas:f,totalVendasBrutas:l,totalDescontos:c,totalVendasLiquidas:u}}async function kb({codigoEmpresa:e}={}){const t=e||Dn();let r=null;try{let a=Ne.from("caixa_sessoes").select("aberto_em").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(a=a.eq("codigo_empresa",t));const{data:i,error:s}=await a;if(s)throw s;r=i?.[0]?.aberto_em||null}catch{}if(!r)return null;const n=new Date().toISOString();return fc({from:r,to:n,codigoEmpresa:t})}async function lHe({comandaId:e,codigoEmpresa:t}={}){const r=t||Dn();let n=Ne.from("pagamentos").select("*, finalizadoras!pagamentos_finalizadora_id_fkey(id, nome, codigo_sefaz, codigo_interno)").order("recebido_em",{ascending:!0});e&&(n=n.eq("comanda_id",e)),r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function B2({searchTerm:e="",limit:t=20,codigoEmpresa:r}={}){const n=r||Dn();let a=Ne.from("clientes").select("*").eq("status","active").eq("flag_cliente",!0).order("nome",{ascending:!0}).limit(t);n&&(a=a.eq("codigo_empresa",n));const i=(e||"").trim();i&&(/^\d+$/.test(i)?a=a.or(`codigo.eq.${i},nome.ilike.%${i}%,email.ilike.%${i}%,telefone.ilike.%${i}%`):a=a.or(`nome.ilike.%${i}%,email.ilike.%${i}%,telefone.ilike.%${i}%`));const{data:s,error:l}=await a;if(l)throw l;return s||[]}async function sc({codigoEmpresa:e}={}){const t="[listarComandasAbertas]",r=e||Dn(),n=async()=>{const a=new Promise((c,u)=>setTimeout(()=>u(new Error("listarComandasAbertas timeout aps 30s")),3e4));let i=Ne.from("comandas").select("id, mesa_id, status, aberto_em, fechado_em").is("fechado_em",null).neq("status","cancelled").order("aberto_em",{ascending:!1}).limit(500);r&&(i=i.eq("codigo_empresa",r));const{data:s,error:l}=await Promise.race([i,a]);if(l)throw l;return s||[]};try{try{return await n()}catch(a){if(String(a?.message||"").includes("timeout"))return console.warn(`${t} timeout na primeira tentativa, retornando array vazio`),[];throw a}}catch(a){return console.error(`${t}  EXCEPTION:`,a?.message||a),[]}}async function mT(e=[],t){if(!e||e.length===0)return{};const r=t||Dn();let n=Ne.from("comanda_itens").select("comanda_id, quantidade, preco_unitario").in("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const s={};for(const l of a||[]){const c=l.comanda_id,u=Number(l.quantidade||0)*Number(l.preco_unitario||0);s[c]=(s[c]||0)+u}return s}async function Vg(e){const t="[listMesas]",r=e||Dn(),n=async()=>{const a=new Promise((c,u)=>setTimeout(()=>u(new Error("listMesas timeout aps 30s")),3e4));let i=Ne.from("mesas").select("id, numero, nome, status").order("numero",{ascending:!0}).limit(200);r&&(i=i.eq("codigo_empresa",r));const{data:s,error:l}=await Promise.race([i,a]);if(l)throw l;return s||[]};try{try{return await n()}catch(a){if(String(a?.message||"").includes("timeout"))return console.warn(`${t} timeout na primeira tentativa, retornando array vazio`),[];throw a}}catch(a){return console.error(`${t}  EXCEPTION:`,a?.message||a),[]}}async function cHe({numero:e,nome:t,codigoEmpresa:r}={}){const n=r||Dn();let a=e;if(!a){let s=Ne.from("mesas").select("numero").order("numero",{ascending:!1}).limit(1);n&&(s=s.eq("codigo_empresa",n));const{data:l,error:c}=await s;if(c)throw c;a=(l?.[0]?.numero||0)+1}const i={numero:a,status:"available"};t&&typeof t=="string"&&t.trim()&&(i.nome=t.trim()),n&&(i.codigo_empresa=n);try{const{data:s,error:l}=await Ne.from("mesas").insert(i).select("*").single();if(l)throw l;return s}catch(s){const l=String(s?.message||s||"");if(/column\s+\"?nome\"?\s+of\s+relation/i.test(l)||/column\s+\"?nome\"?\s+does not exist/i.test(l)){const c={numero:a,status:"available"};n&&(c.codigo_empresa=n);const{data:u,error:d}=await Ne.from("mesas").insert(c).select("*").single();if(d)throw d;return u}throw s}}async function kd({saldoInicial:e=0,codigoEmpresa:t}={}){const r=t||Dn();let n=Ne.from("caixa_sessoes").select("id,status,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;if(a&&a.length>0){const u=a[0];try{const d=new Date(u.aberto_em),f=new Date;if(d.toDateString()!==f.toDateString()){try{const b=await sc({codigoEmpresa:r});if(Array.isArray(b)&&b.length>0)return console.warn("[ensureCaixaAberto] Sesso de dia anterior detectada, mas h comandas abertas. No fechar automaticamente."),u}catch{}const m=f.toISOString();let g=0,p=0;try{const b=await fc({from:u.aberto_em,to:m,codigoEmpresa:r});g=Number(b?.totalEntradas||0)}catch{}try{let b=Ne.from("caixa_movimentacoes").select("tipo,valor").eq("caixa_sessao_id",u.id);r&&(b=b.eq("codigo_empresa",r));const{data:w}=await b;for(const _ of w||[]){const j=Number(_?.valor||0),N=String(_?.tipo||"").toLowerCase();N==="suprimento"||N==="ajuste"?p+=j:(N==="sangria"||N==="troco")&&(p-=j)}}catch{}const x=Number(u?.saldo_inicial||0)+g+p;let y=Ne.from("caixa_sessoes").update({status:"closed",saldo_final:x,fechado_em:m}).eq("id",u.id).eq("status","open");r&&(y=y.eq("codigo_empresa",r)),await y;try{const b=await QS({caixaSessaoId:u.id,codigoEmpresa:r}).catch(async()=>await fc({from:u.aberto_em,to:m,codigoEmpresa:r})),w={codigo_empresa:r||Dn(),caixa_sessao_id:u.id,periodo_de:b?.from||u.aberto_em,periodo_ate:b?.to||m,total_bruto:Number(b?.totalVendasBrutas||0),total_descontos:Number(b?.totalDescontos||0),total_liquido:Number(b?.totalVendasLiquidas||0),total_entradas:Number(b?.totalEntradas||0),por_finalizadora:b?.totalPorFinalizadora||{}},_=w.por_finalizadora;await Ne.from("caixa_resumos").insert({...w,por_finalizadora:_&&typeof _!="string"?JSON.stringify(_):_})}catch{}}else{try{if(u?.saldo_inicial==null&&e!=null){let m=Ne.from("caixa_sessoes").update({saldo_inicial:Number(e)||0}).eq("id",u.id);return r&&(m=m.eq("codigo_empresa",r)),await m,{...u,saldo_inicial:Number(e)||0}}}catch{}return u}}catch{}return u}const s={status:"open",saldo_inicial:e};r&&(s.codigo_empresa=r);const{data:l,error:c}=await Ne.from("caixa_sessoes").insert(s).select("id,status,aberto_em").single();if(c)throw c;return l}async function Qf({codigoEmpresa:e}={}){const t=e||Dn();let r=Ne.from("caixa_sessoes").select("id,status,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n?.[0]||null}async function ite({saldoFinal:e=null,valorFinalDinheiro:t=null,codigoEmpresa:r}={}){console.log("[fecharCaixa] Iniciando fechamento:",{valorFinalDinheiro:t,saldoFinal:e,codigoEmpresa:r});const n=r||Dn();try{console.log("[fecharCaixa]  Limpeza preventiva: corrigindo comandas inconsistentes...");const{data:y}=await Ne.from("comandas").select("id, status, fechado_em").eq("codigo_empresa",n).is("fechado_em",null).neq("status","open").neq("status","awaiting-payment");if(y&&y.length>0){console.log(`[fecharCaixa]  Encontradas ${y.length} comandas inconsistentes, corrigindo...`);const b=new Date().toISOString();for(const w of y)try{await Ne.from("comandas").update({fechado_em:b}).eq("id",w.id).eq("codigo_empresa",n),console.log(`[fecharCaixa]  Comanda ${w.id} (status: ${w.status}) corrigida`)}catch{}}else console.log("[fecharCaixa]  Nenhuma comanda inconsistente encontrada")}catch(y){console.warn("[fecharCaixa]  Erro na limpeza preventiva:",y?.message)}try{let y=await sc({codigoEmpresa:n});y=y||[],console.log(`[fecharCaixa]  Comandas abertas encontradas: ${y.length}`,y.map(w=>({id:w.id,status:w.status,mesa:w.mesa_id})));for(const w of y||[])try{(await Fi({comandaId:w.id,codigoEmpresa:n})||[]).length===0&&await Xm({comandaId:w.id,codigoEmpresa:n})}catch{}let b=0;for(;b<12&&(y=await sc({codigoEmpresa:n}),!(!y||y.length===0));)await new Promise(w=>setTimeout(w,250)),b++;if(y&&y.length>0){const w=y.map(P=>P.id);let _=new Map,j=new Map;try{if(w.length>0){let P=Ne.from("comanda_itens").select("comanda_id, quantidade").in("comanda_id",w);n&&(P=P.eq("codigo_empresa",n));const{data:A}=await P;_=new Map;for(const k of A||[]){const M=k.comanda_id,E=Number(k.quantidade||0);_.set(M,(_.get(M)||0)+E)}}}catch{}try{if(w.length>0){let P=Ne.from("pagamentos").select("comanda_id, status").in("comanda_id",w);n&&(P=P.eq("codigo_empresa",n));const{data:A}=await P;j=new Map;for(const k of A||[]){const M=String(k?.status||"Pago");if(M==="Cancelado"||M==="Estornado")continue;const E=k.comanda_id;j.set(E,(j.get(E)||0)+1)}}}catch{}for(const P of y){const A=Number(_.get(P.id)||0)>0,k=Number(j.get(P.id)||0)>0;if(!A&&!k)try{await Xm({comandaId:P.id,codigoEmpresa:n})}catch{}}let N=await sc({codigoEmpresa:n});if(N=N||[],N.length>0){const P=N.map(E=>E.id);let A=new Map,k=new Map;try{if(P.length>0){let E=Ne.from("comanda_itens").select("comanda_id, quantidade").in("comanda_id",P);n&&(E=E.eq("codigo_empresa",n));const{data:I}=await E;A=new Map;for(const O of I||[]){const R=O.comanda_id,B=Number(O.quantidade||0);A.set(R,(A.get(R)||0)+B)}}}catch{}try{if(P.length>0){let E=Ne.from("pagamentos").select("comanda_id, status").in("comanda_id",P);n&&(E=E.eq("codigo_empresa",n));const{data:I}=await E;k=new Map;for(const O of I||[]){const R=String(O?.status||"Pago");if(R==="Cancelado"||R==="Estornado")continue;const B=O.comanda_id;k.set(B,(k.get(B)||0)+1)}}}catch{}const M=N.filter(E=>Number(A.get(E.id)||0)>0||Number(k.get(E.id)||0)>0);if(M.length>0){const E=M.map(I=>`${I.id}${I.mesa_id?`@mesa:${I.mesa_id}`:"@balcao"}`).join(", ");throw new Error(`Existem ${M.length} comandas abertas. IDs: ${E}. Feche todas antes de encerrar o caixa.`)}}}}catch(y){if(y&&/Existem \d+ comandas/.test(y.message||""))throw y;const b=new Error("Falha ao validar comandas abertas. Tente novamente e verifique sua conexo.");throw b.code="CASH_CLOSE_VALIDATION_FAILED",b}let a=Ne.from("caixa_sessoes").select("id,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:s}=await a;if(s)throw s;const l=i?.[0]?.id||null,c=i?.[0]?.aberto_em||null,u=Number(i?.[0]?.saldo_inicial||0);if(!l)throw new Error("Nenhuma sesso de caixa aberta encontrada.");const d=new Date().toISOString();let f=0,h=0;try{const y=await fc({from:c,to:d,codigoEmpresa:n});f=Number(y?.totalEntradas||0)}catch{}try{let y=Ne.from("caixa_movimentacoes").select("tipo, valor").eq("caixa_sessao_id",l);n&&(y=y.eq("codigo_empresa",n));const{data:b}=await y;for(const w of b||[]){const _=Number(w?.valor||0),j=String(w?.tipo||"").toLowerCase();j==="suprimento"||j==="ajuste"?h+=_:(j==="sangria"||j==="troco")&&(h-=_)}}catch{}const m=e!=null?Number(e):u+f+h;try{let y=await sc({codigoEmpresa:n});if(y=y||[],y.length>0){const b=y.map(N=>N.id);let w=new Map,_=new Map;try{if(b.length>0){let N=Ne.from("comanda_itens").select("comanda_id, quantidade").in("comanda_id",b);n&&(N=N.eq("codigo_empresa",n));const{data:P}=await N;w=new Map;for(const A of P||[]){const k=A.comanda_id,M=Number(A.quantidade||0);w.set(k,(w.get(k)||0)+M)}}}catch{}try{if(b.length>0){let N=Ne.from("pagamentos").select("comanda_id, status").in("comanda_id",b);n&&(N=N.eq("codigo_empresa",n));const{data:P}=await N;_=new Map;for(const A of P||[]){const k=String(A?.status||"Pago");if(k==="Cancelado"||k==="Estornado")continue;const M=A.comanda_id;_.set(M,(_.get(M)||0)+1)}}}catch{}for(const N of y){const P=Number(w.get(N.id)||0)>0,A=Number(_.get(N.id)||0)>0;if(!P&&!A)try{await Xm({comandaId:N.id,codigoEmpresa:n})}catch{}}let j=await sc({codigoEmpresa:n});if(j=j||[],j.length>0){const N=j.map(P=>`${P.id}${P.mesa_id?`@mesa:${P.mesa_id}`:"@balcao"}`).join(", ");throw new Error(`Existem ${j.length} comandas abertas. IDs: ${N}. Feche todas antes de encerrar o caixa.`)}}}catch(y){if(!(y&&y.message)){const b=new Error("Falha ao validar comandas abertas no momento do fechamento. Tente novamente.");throw b.code="CASH_CLOSE_FINAL_CHECK_FAILED",b}throw y}let g=Ne.from("caixa_sessoes").update({status:"closed",saldo_final:m,fechado_em:d}).eq("id",l).eq("status","open");n&&(g=g.eq("codigo_empresa",n));const{data:p,error:x}=await g.select("id,status,fechado_em,saldo_final").single();if(x){const y=String(x.message||"");if(y.toLowerCase().includes("row")||y.toLowerCase().includes("single")){let b=Ne.from("caixa_sessoes").select("id,status,fechado_em,saldo_final").eq("id",l).limit(1);n&&(b=b.eq("codigo_empresa",n));const{data:w}=await b;if(w&&w[0])return w[0]}throw x}try{if(c&&d&&p?.status==="closed"){let y;try{y=await QS({caixaSessaoId:l,codigoEmpresa:n})}catch{y=await fc({from:c,to:d,codigoEmpresa:n})}const b={codigo_empresa:n||Dn(),caixa_sessao_id:l,periodo_de:y?.from||c,periodo_ate:y?.to||d,total_bruto:Number(y?.totalVendasBrutas||0),total_descontos:Number(y?.totalDescontos||0),total_liquido:Number(y?.totalVendasLiquidas||0),total_entradas:Number(y?.totalEntradas||0),por_finalizadora:y?.totalPorFinalizadora||{}},w=t!=null?Number(t):null,_=w!=null?w-Number(m||0):null;console.log("[fecharCaixa] Valores para snapshot:",{contado:w,diferenca:_,efetivoSaldoFinal:m,valorFinalDinheiroOriginal:t});const N=await(async P=>{const A={...P},k=A.por_finalizadora;k&&typeof k!="string"&&(A.por_finalizadora=JSON.stringify(k));let M=!0,E=!0;try{const F=localStorage.getItem("schema:caixa_resumos:valor_final_dinheiro"),$=localStorage.getItem("schema:caixa_resumos:diferenca_dinheiro");F==="no"&&(M=!1),$==="no"&&(E=!1)}catch{}if(!M||!E)try{let F=Ne.from("caixa_resumos").select("valor_final_dinheiro, diferenca_dinheiro").limit(1);const{error:$}=await F;if(!$){M=!0,E=!0;try{localStorage.setItem("schema:caixa_resumos:valor_final_dinheiro","yes"),localStorage.setItem("schema:caixa_resumos:diferenca_dinheiro","yes")}catch{}}}catch{}if(!M&&!E)return await Ne.from("caixa_resumos").insert(A);let I={...A};M&&w!=null&&(I.valor_final_dinheiro=w),E&&_!=null&&(I.diferenca_dinheiro=_),console.log("[fecharCaixa] Tentando inserir snapshot com:",{supportValor:M,supportDif:E,contado:w,diferenca:_,hasValorFinalDinheiro:"valor_final_dinheiro"in I});const O=await Ne.from("caixa_resumos").insert(I);if(!O.error)return O;const R=`${O.error?.message||""} ${O.error?.details||""}`.toLowerCase(),B=O.error?.code;if(B==="42703"||B==="PGRST204"||R.includes("column")||R.includes("schema cache")){try{I.valor_final_dinheiro!==void 0&&localStorage.setItem("schema:caixa_resumos:valor_final_dinheiro","no"),I.diferenca_dinheiro!==void 0&&localStorage.setItem("schema:caixa_resumos:diferenca_dinheiro","no")}catch{}return await Ne.from("caixa_resumos").insert(A)}return O})(b);if(N.error)throw console.error("[fecharCaixa] Erro ao inserir snapshot:",N.error),N.error;console.log("[fecharCaixa]  Snapshot inserido com sucesso");try{const{data:P}=await Ne.from("caixa_resumos").select("valor_final_dinheiro, diferenca_dinheiro").eq("caixa_sessao_id",l).order("criado_em",{ascending:!1}).limit(1).single();console.log("[fecharCaixa] Verificao ps-insert:",P)}catch(P){console.warn("[fecharCaixa] Falha ao verificar snapshot:",P?.message)}}}catch(y){console.warn("[fecharCaixa] Falha ao gravar snapshot de fechamento:",y)}try{let y=Ne.from("caixa_sessoes").select("id,aberto_em,saldo_inicial").eq("status","open");n&&(y=y.eq("codigo_empresa",n));const{data:b}=await y;if(Array.isArray(b)&&b.length>0)for(const w of b)try{const _=w?.aberto_em,j=Number(w?.saldo_inicial||0),N=new Date().toISOString();let P=0,A=0;try{const M=await fc({from:_,to:N,codigoEmpresa:n});P=Number(M?.totalEntradas||0)}catch{}try{let M=Ne.from("caixa_movimentacoes").select("tipo,valor").eq("caixa_sessao_id",w.id);n&&(M=M.eq("codigo_empresa",n));const{data:E}=await M;for(const I of E||[]){const O=Number(I?.valor||0),R=String(I?.tipo||"").toLowerCase();R==="suprimento"||R==="ajuste"?A+=O:(R==="sangria"||R==="troco")&&(A-=O)}}catch{}const k=j+P+A;await Ne.from("caixa_sessoes").update({status:"closed",saldo_final:k,fechado_em:N}).eq("id",w.id).eq("status","open").eq(n?"codigo_empresa":"id",n||w.id);try{const M=await QS({caixaSessaoId:w.id,codigoEmpresa:n}).catch(async()=>await fc({from:_,to:N,codigoEmpresa:n})),E={codigo_empresa:n||Dn(),caixa_sessao_id:w.id,periodo_de:M?.from||_,periodo_ate:M?.to||N,total_bruto:Number(M?.totalVendasBrutas||0),total_descontos:Number(M?.totalDescontos||0),total_liquido:Number(M?.totalVendasLiquidas||0),total_entradas:Number(M?.totalEntradas||0),por_finalizadora:M?.totalPorFinalizadora||{}},I=E.por_finalizadora;await Ne.from("caixa_resumos").insert({...E,por_finalizadora:I&&typeof I!="string"?JSON.stringify(I):I})}catch{}}catch(_){try{console.warn("[fecharCaixa] Saneamento: falhou ao fechar sesso remanescente",w?.id,_?.message||_)}catch{}}}catch{}return p}async function ote({from:e,to:t,limit:r=50,codigoEmpresa:n}={}){console.log("[listarFechamentosCaixa] Iniciando busca de fechamentos",{from:e,to:t,limit:r});const a=n||Dn();let i=Ne.from("caixa_sessoes").select("id, aberto_em, fechado_em, saldo_inicial, saldo_final, status").eq("status","closed").order("fechado_em",{ascending:!1}).limit(r);a&&(i=i.eq("codigo_empresa",a)),e&&(i=i.gte("fechado_em",`${e}T00:00:00`)),t&&(i=i.lte("fechado_em",`${t}T23:59:59`));const{data:s,error:l}=await i;if(l)throw l;const c=Array.isArray(s)?s:[];if(console.log("[listarFechamentosCaixa] Sesses fechadas encontradas:",c.length),c.length===0)return[];const u=c.map(m=>m.id);let d=[];try{let m=!0,g=!0;try{const _=localStorage.getItem("schema:caixa_resumos:valor_final_dinheiro"),j=localStorage.getItem("schema:caixa_resumos:diferenca_dinheiro");_==="no"&&(m=!1),j==="no"&&(g=!1)}catch{}if(!m||!g)try{let _=Ne.from("caixa_resumos").select("valor_final_dinheiro, diferenca_dinheiro").limit(1);const{error:j}=await _;if(!j){m=!0,g=!0;try{localStorage.setItem("schema:caixa_resumos:valor_final_dinheiro","yes"),localStorage.setItem("schema:caixa_resumos:diferenca_dinheiro","yes")}catch{}}}catch{}const p=["caixa_sessao_id"];m&&p.push("valor_final_dinheiro"),g&&p.push("diferenca_dinheiro");const x=p.join(", ");let y=Ne.from("caixa_resumos").select(x).in("caixa_sessao_id",u).order("criado_em",{ascending:!1});a&&(y=y.eq("codigo_empresa",a));let{data:b,error:w}=await y;if(w){const _=w?.code,j=`${w?.message||""} ${w?.details||""}`.toLowerCase();if(_==="42703"||_==="PGRST204"||j.includes("column")||j.includes("schema cache")){try{m&&localStorage.setItem("schema:caixa_resumos:valor_final_dinheiro","no"),g&&localStorage.setItem("schema:caixa_resumos:diferenca_dinheiro","no")}catch{}let P=Ne.from("caixa_resumos").select("caixa_sessao_id").in("caixa_sessao_id",u).order("criado_em",{ascending:!1});a&&(P=P.eq("codigo_empresa",a));const{data:A}=await P;d=A||[]}else throw w}else d=b||[]}catch(m){console.warn("[listarFechamentosCaixa] Erro ao buscar snapshots:",m?.message),d=[]}console.log("[listarFechamentosCaixa] Snapshots encontrados:",d.length,d);const f=new Map(d.map(m=>[m.caixa_sessao_id,m])),h=c.map(m=>{const g=f.get(m.id),p={...m,valor_final_dinheiro:g?.valor_final_dinheiro??null,diferenca_dinheiro:g?.diferenca_dinheiro??null};return g&&console.log(`[listarFechamentosCaixa] Sesso ${m.id} enriquecida com snapshot:`,{valor_final_dinheiro:g.valor_final_dinheiro,diferenca_dinheiro:g.diferenca_dinheiro}),p});return console.log("[listarFechamentosCaixa] Resultado final:",h.length,"sesses com dados enriquecidos"),h}async function ZS({caixaSessaoId:e,codigoEmpresa:t}={}){if(!e)throw new Error("caixaSessaoId  obrigatrio");const r=t||Dn();let n=null;try{let a=!0,i=!0;try{const f=localStorage.getItem("schema:caixa_resumos:valor_final_dinheiro"),h=localStorage.getItem("schema:caixa_resumos:diferenca_dinheiro");f==="no"&&(a=!1),h==="no"&&(i=!1)}catch{}if(!a||!i)try{let f=Ne.from("caixa_resumos").select("valor_final_dinheiro, diferenca_dinheiro").limit(1);const{error:h}=await f;if(!h){a=!0,i=!0;try{localStorage.setItem("schema:caixa_resumos:valor_final_dinheiro","yes"),localStorage.setItem("schema:caixa_resumos:diferenca_dinheiro","yes")}catch{}}}catch{}const s=["caixa_sessao_id","periodo_de","periodo_ate","total_bruto","total_descontos","total_liquido","total_entradas","por_finalizadora"];a&&s.push("valor_final_dinheiro"),i&&s.push("diferenca_dinheiro");const l=s.join(", ");let c=Ne.from("caixa_resumos").select(l).eq("caixa_sessao_id",e).order("criado_em",{ascending:!1}).limit(1);r&&(c=c.eq("codigo_empresa",r));let{data:u,error:d}=await c;if(d){const f=d?.code,h=`${d?.message||""} ${d?.details||""}`.toLowerCase();if(f==="42703"||f==="PGRST204"||h.includes("column")||h.includes("schema cache")){try{a&&localStorage.setItem("schema:caixa_resumos:valor_final_dinheiro","no"),i&&localStorage.setItem("schema:caixa_resumos:diferenca_dinheiro","no")}catch{}let g=Ne.from("caixa_resumos").select("caixa_sessao_id, periodo_de, periodo_ate, total_bruto, total_descontos, total_liquido, total_entradas, por_finalizadora").eq("caixa_sessao_id",e).order("criado_em",{ascending:!1}).limit(1);r&&(g=g.eq("codigo_empresa",r));const{data:p}=await g;n=p?.[0]||null}else throw d}else n=u?.[0]||null}catch(a){try{console.warn("[getCaixaResumo] Snapshot select falhou, usando fallback dinmico:",a?.message||a)}catch{}}if(!n||typeof n.saldo_inicial>"u"||typeof n.saldo_final>"u"){const a=await QS({caixaSessaoId:e,codigoEmpresa:r});let i=null;try{let s=Ne.from("caixa_sessoes").select("saldo_inicial, saldo_final").eq("id",e).limit(1);r&&(s=s.eq("codigo_empresa",r));const{data:l}=await s;i=l?.[0]||null}catch{}n={codigo_empresa:r,caixa_sessao_id:e,periodo_de:a?.from||null,periodo_ate:a?.to||null,total_bruto:Number(a?.totalVendasBrutas||0),total_descontos:Number(a?.totalDescontos||0),total_liquido:Number(a?.totalVendasLiquidas||0),total_entradas:Number(a?.totalEntradas||0),por_finalizadora:a?.totalPorFinalizadora||{},saldo_inicial:Number(i?.saldo_inicial??a?.saldoInicial??0),saldo_final:i?.saldo_final!=null?Number(i.saldo_final):null,movimentos:a?.movimentos||{suprimentos:0,sangrias:0,ajustes:0,troco:0,totalMovimentos:0}}}else if(typeof n.por_finalizadora=="string")try{n.por_finalizadora=JSON.parse(n.por_finalizadora)}catch{n.por_finalizadora={}}return n}async function pT({tipo:e,valor:t,observacao:r="",caixaSessaoId:n,codigoEmpresa:a}={}){const i=a||Dn();if(!e||!["sangria","suprimento","troco","ajuste"].includes(e))throw new Error("Tipo invlido de movimentao");let s=n;if(!s){let d=Ne.from("caixa_sessoes").select("id").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);i&&(d=d.eq("codigo_empresa",i));const{data:f,error:h}=await d;if(h)throw h;s=f?.[0]?.id||null}if(!s)throw new Error("Sesso de caixa no encontrada para registrar movimentao");const l={codigo_empresa:i,caixa_sessao_id:s,tipo:e,valor:Math.max(0,Number(t)||0),observacao:(r||"").trim()||null},{data:c,error:u}=await Ne.from("caixa_movimentacoes").insert(l).select("*").single();if(u)throw u;return c}async function Ym({caixaSessaoId:e,codigoEmpresa:t}={}){const r=t||Dn();if(!e)throw new Error("caixaSessaoId  obrigatrio");let n=Ne.from("caixa_movimentacoes").select("*").eq("caixa_sessao_id",e).order("criado_em",{ascending:!0});r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function uHe({mesaId:e,codigoEmpresa:t}={}){const r=t||Dn();await ED({codigoEmpresa:r}),console.log(`[abrirComandaParaMesa] Iniciando para mesaId: ${e}, codigo_empresa: ${r}`);try{const n={status:"open",aberto_em:new Date().toISOString()};e&&(n.mesa_id=e),console.log("[abrirComandaParaMesa] Payload (codigo_empresa via DEFAULT):",n);const{data:a,error:i}=await Ne.from("comandas").insert(n).select("*").single();if(i)throw console.error("[abrirComandaParaMesa] ERRO ao criar comanda:",i),i;return console.log("[abrirComandaParaMesa]  Comanda criada:",a),await new Promise(s=>setTimeout(s,100)),a}catch(n){throw console.error("[abrirComandaParaMesa] ERRO:",n),n}}async function dHe({mesaId:e,codigoEmpresa:t}){const r=t||Dn();let n=Ne.from("comandas").select("id,status,aberto_em,fechado_em").eq("mesa_id",e).is("fechado_em",null).in("status",["open","awaiting-payment"]).order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a?.[0]||null}async function Fi({comandaId:e,codigoEmpresa:t}){const r=t||Dn();let n=Ne.from("comanda_itens").select("*").eq("comanda_id",e).order("created_at",{ascending:!0});r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}const Zw=new Map;async function fHe({mesaId:e,codigoEmpresa:t}={}){const r=`${e}:${t||Dn()}`;if(Zw.has(r))return console.log(`[getOrCreateComandaForMesa]  Operao j em andamento para mesa ${e}, aguardando...`),Zw.get(r);const n=t||Dn(),a=(async()=>{try{await ED({codigoEmpresa:n}),console.log(`[getOrCreateComandaForMesa]  Criando nova comanda para mesa ${e}`);const i=await dHe({mesaId:e,codigoEmpresa:n});if(i){console.log(`[getOrCreateComandaForMesa]  Comanda existente ${i.id} encontrada, verificando se est vazia...`);let l=!1,c=!1;try{l=(await Fi({comandaId:i.id,codigoEmpresa:n})||[]).length>0}catch{}try{const{data:u}=await Ne.from("pagamentos").select("id, status").eq("comanda_id",i.id).eq("codigo_empresa",n);c=(u||[]).filter(f=>{const h=String(f?.status||"Pago");return h!=="Cancelado"&&h!=="Estornado"}).length>0}catch{}if(!l&&!c){console.log(`[getOrCreateComandaForMesa]  Comanda ${i.id} est vazia, fechando automaticamente...`);try{await Xm({comandaId:i.id,codigoEmpresa:n}),console.log(`[getOrCreateComandaForMesa]  Comanda ${i.id} fechada com sucesso`)}catch(u){console.warn(`[getOrCreateComandaForMesa]  Erro ao fechar comanda ${i.id}:`,u?.message)}}else console.log(`[getOrCreateComandaForMesa]  Comanda ${i.id} tem dados (itens: ${l}, pagamentos: ${c}), no ser fechada automaticamente`)}console.log(`[getOrCreateComandaForMesa]  Criando comanda zerada para mesa ${e}`);const s=await uHe({mesaId:e,codigoEmpresa:n});return console.log(`[getOrCreateComandaForMesa]  Comanda ${s.id} criada com sucesso`),s}finally{Zw.delete(r),console.log(`[getOrCreateComandaForMesa]  Lock liberado para mesa ${e}`)}})();return Zw.set(r,a),a}async function ay({comandaId:e,clienteIds:t=[],nomesLivres:r=[],codigoEmpresa:n}={}){const a=n||Dn();if(!e)throw new Error("comandaId  obrigatrio");console.log(`[adicionarClientesAComanda] Adicionando clientes  comanda ${e}:`,{clienteIds:t,nomesLivres:r,codigo:a});const{data:i}=await Ne.from("comanda_clientes").select("cliente_id").eq("comanda_id",e),s=new Set((i||[]).map(d=>d.cliente_id).filter(Boolean)),l=[];for(const d of t||[])s.has(d)?console.log(`[adicionarClientesAComanda] Cliente ${d} j vinculado, pulando`):l.push({comanda_id:e,cliente_id:d});for(const d of r||[]){const f=(d||"").trim();f&&l.push({comanda_id:e,nome_livre:f})}if(l.length===0)return console.log("[adicionarClientesAComanda] Nenhum cliente novo para adicionar"),!0;const c=l.map(d=>a?{...d,codigo_empresa:a}:d);console.log("[adicionarClientesAComanda] Payload para insero:",c);const{error:u}=await Ne.from("comanda_clientes").insert(c);if(u)throw console.error("[adicionarClientesAComanda] ERRO ao inserir clientes:",u),u;return console.log("[adicionarClientesAComanda] Clientes adicionados com sucesso"),!0}async function os({comandaId:e,codigoEmpresa:t}={}){if(t||Dn(),!e)throw new Error("comandaId  obrigatrio");try{const{data:r,error:n}=await Ne.from("comanda_clientes").select("id, cliente_id, nome_livre, clientes:clientes!comanda_clientes_cliente_id_fkey(id, nome, email, telefone)").eq("comanda_id",e).order("created_at",{ascending:!0});if(n)throw n;return(r||[]).map(a=>({id:a.id,tipo:a.cliente_id?"cadastrado":"comum",nome:a.clientes?.nome||a.nome_livre,cliente_id:a.cliente_id}))}catch{try{const{data:n,error:a}=await Ne.from("comanda_clientes").select("id, cliente_id, nome_livre, clientes:clientes!fk_comanda_clientes_cliente(id, nome, email, telefone)").eq("comanda_id",e).order("created_at",{ascending:!0});if(a)throw a;return(n||[]).map(i=>({id:i.id,tipo:i.cliente_id?"cadastrado":"comum",nome:i.clientes?.nome||i.nome_livre,cliente_id:i.cliente_id}))}catch{const{data:a,error:i}=await Ne.from("comanda_clientes").select("id, cliente_id, nome_livre").eq("comanda_id",e).order("created_at",{ascending:!0});if(i)throw i;return(a||[]).map(s=>({id:s.id,tipo:s.cliente_id?"cadastrado":"comum",nome:s.nome_livre||"",cliente_id:s.cliente_id}))}}}async function gT({comandaId:e,produtoId:t,descricao:r,quantidade:n,precoUnitario:a,desconto:i=0,codigoEmpresa:s}){const l=s||Dn();console.log(`[adicionarItem] Adicionando item  comanda ${e}:`,{produtoId:t,descricao:r,quantidade:n,precoUnitario:a,codigo:l});try{let f=Ne.from("produtos").select("id, estoque, estoque_minimo, nome").eq("id",t).limit(1);l&&(f=f.eq("codigo_empresa",l));const{data:h,error:m}=await f;if(m)throw m;const g=Array.isArray(h)?h[0]:h;if(g){const p=Number(g.estoque??0),x=Number(g.estoque_minimo??0),y=Number(n??1);if(p<=0){const P=new Error(`Produto sem estoque: ${g.nome||""}`.trim());throw P.code="OUT_OF_STOCK",P}let b=Ne.from("comanda_itens").select("quantidade").eq("comanda_id",e).eq("produto_id",t);l&&(b=b.eq("codigo_empresa",l));const{data:w,error:_}=await b;if(_)throw _;const j=Array.isArray(w)&&w.length?w.reduce((P,A)=>P+Number(A?.quantidade||0),0):0;if(j+y>p){const P=new Error(`Estoque insuficiente. Em comanda: ${j}, solicitado: +${y}, disponvel: ${p}`);throw P.code="INSUFFICIENT_STOCK",P}if(p<=x&&p>0)try{console.warn(`[adicionarItem] Aviso: estoque baixo para produto '${g.nome}' (estoque=${p}, minimo=${x})`)}catch{}}}catch(f){throw f}const c={comanda_id:e,produto_id:t,descricao:r,quantidade:n,preco_unitario:a,desconto:i};l&&(c.codigo_empresa=l);const{data:u,error:d}=await Ne.from("comanda_itens").insert(c).select("*").single();if(d)throw d;return u}async function Mu({itemId:e,quantidade:t,codigoEmpresa:r}){const n=r||Dn();let a=Ne.from("comanda_itens").select("id, quantidade, produto_id, comanda_id").eq("id",e).limit(1);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:s}=await a;if(s)throw s;const l=Array.isArray(i)?i[0]:i,c=Number(t||0);if(!l)throw new Error("Item no encontrado");const u=Number(l.quantidade||0);if(c-u>0){let g=Ne.from("produtos").select("id, estoque, nome, estoque_minimo").eq("id",l.produto_id).limit(1);n&&(g=g.eq("codigo_empresa",n));const{data:p,error:x}=await g;if(x)throw x;const y=Array.isArray(p)?p[0]:p;if(y){const b=Number(y.estoque??0);let w=Ne.from("comanda_itens").select("quantidade").eq("comanda_id",l.comanda_id).eq("produto_id",l.produto_id).neq("id",l.id);n&&(w=w.eq("codigo_empresa",n));const{data:_,error:j}=await w;if(j)throw j;const N=Array.isArray(_)&&_.length?_.reduce((M,E)=>M+Number(E?.quantidade||0),0):0;if(N+c>b){const M=new Error(`Estoque insuficiente. Em comanda (outros itens): ${N}, novo para este item: ${c}, disponvel: ${b}`);throw M.code="INSUFFICIENT_STOCK",M}const A=Number(y.estoque_minimo??0),k=b-(N+c);if(k<=A&&k>=0)try{console.warn(`[atualizarQuantidadeItem] Aviso: produto '${y.nome}' atingiu nvel de estoque baixo (restante=${k}, minimo=${A})`)}catch{}}}let f=Ne.from("comanda_itens").update({quantidade:c}).eq("id",e);n&&(f=f.eq("codigo_empresa",n));const{data:h,error:m}=await f.select("*").single();if(m)throw m;return h}async function $m({itemId:e,codigoEmpresa:t}){const r=t||Dn();let n=Ne.from("comanda_itens").delete().eq("id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n.select("id").single();if(i)throw i;return!!a}function hHe(e){if(!e)return!1;const t=e.code?String(e.code):"",r=[e.message,e.details,e.hint].filter(Boolean).join(" ").toLowerCase();return t==="22P02"||r.includes("invalid input value for enum")}async function vT({comandaId:e,finalizadoraId:t,metodo:r,valor:n,status:a="Pago",codigoEmpresa:i,clienteId:s=null}){const l=i||Dn();if(!l)throw new Error("Empresa no identificada (codigo_empresa ausente).");const c=a&&["Pendente","Pago","Estornado","Cancelado"].includes(a)?a:"Pago",u=["dinheiro","credito","debito","pix","voucher","outros"],f=(m=>{if(!m)return"outros";const g=String(m).toLowerCase().trim(),x={"cartao credito":"credito","carto credito":"credito","cartao debito":"debito","carto debito":"debito","carto de credito":"credito","carto de dbito":"debito","cartao de credito":"credito","cartao de debito":"debito"}[g]||g;return u.includes(x)?x:"outros"})(r),h={comanda_id:e,finalizadora_id:t||null,metodo:f,valor:Math.max(0,Number(n)||0),status:c,recebido_em:new Date().toISOString(),codigo_empresa:l};console.log("[registrarPagamento] Iniciando registro de pagamento:",{comandaId:e,finalizadoraId:t,metodo:f,valor:h.valor,status:h.status,codigoEmpresa:l,payload:h});try{const{data:m,error:g}=await Ne.from("pagamentos").insert(h).select().single();if(g){console.warn("[registrarPagamento] Primeira tentativa falhou:",{code:g.code,message:g.message});const p=`${g?.message||""} ${g?.details||""}`.toLowerCase();if(g?.code==="42703"||p.includes("column")&&p.includes("cliente_id")){const{cliente_id:y,...b}=h;try{localStorage.setItem("schema:pagamentos:cliente_id","no")}catch{}const{data:w,error:_}=await Ne.from("pagamentos").insert(b).select().single();if(_)throw _;return console.log("[registrarPagamento] Pagamento registrado sem cliente_id:",w),w}if(hHe(g)){console.log("[registrarPagamento] Tentando abordagem alternativa sem status...");try{const y={...h};delete y.status;const{data:b,error:w}=await Ne.from("pagamentos").insert(y).select().single();if(w)throw w;return console.log("[registrarPagamento] Pagamento registrado com sucesso (abordagem alternativa):",b),b}catch(y){throw console.error("[registrarPagamento] Falha na abordagem alternativa:",y),new Error(`Falha ao processar pagamento: ${y.message}`)}}throw g}return console.log("[registrarPagamento] Pagamento registrado com sucesso:",m),m}catch(m){throw console.error("[registrarPagamento] Erro ao registrar pagamento:",{error:{message:m.message,code:m.code,details:m.details,hint:m.hint},comandaId:e,finalizadoraId:t,valor:h.valor,status:h.status,codigoEmpresa:l}),m}}async function Xm({comandaId:e,codigoEmpresa:t}){const r=t||Dn(),n="[fecharComandaEMesa]";try{console.group(n)}catch{}try{console.time?.(n)}catch{}try{console.log(`${n} Iniciando fechamento da comanda ${e}`),console.log(`${n} Obtendo dados da comanda...`);const{data:a,error:i}=await Ne.from("comandas").select("id, mesa_id, status, fechado_em").eq("id",e).single();if(i||!a)throw console.error(`${n} Erro ao buscar comanda:`,i?.message||"Comanda no encontrada"),i||new Error("Comanda no encontrada");if(a.fechado_em)return console.log(`${n} Comanda ${e} j est fechada em ${a.fechado_em}`),!0;const s=new Date().toISOString();console.log(`${n} Atualizando comanda...`),console.log(`${n} Fechando comanda com status closed + fechado_em...`);const{error:l}=await Ne.from("comandas").update({status:"closed",fechado_em:s}).eq("id",e).eq("codigo_empresa",r);if(l)throw console.error(`${n} Erro ao fechar comanda:`,l),l;if(console.log(`${n} Comanda ${e} fechada com sucesso`),a.mesa_id){console.log(`${n} Atualizando status da mesa ${a.mesa_id} para disponvel...`);try{const{error:c}=await Ne.from("mesas").update({status:"available"}).eq("id",a.mesa_id).select("id").single();c?console.error(`${n} Erro ao atualizar status da mesa:`,c):console.log(`${n} Mesa ${a.mesa_id} marcada como disponvel`)}catch(c){console.error(`${n} Exceo ao atualizar mesa:`,c)}}else console.log(`${n} Nenhuma mesa associada para liberar`);return console.log(`${n} Fechamento da comanda ${e} concludo com sucesso`),!0}catch(a){throw console.error(`${n} Erro fatal ao fechar comanda:`,a),a}finally{try{console.timeEnd?.(n)}catch{}try{console.groupEnd()}catch{}}}async function ez({comandaId:e,codigoEmpresa:t}){const r=t||Dn(),n="[cancelarComandaEMesa]";try{console.group(n)}catch{}try{console.time?.(n)}catch{}try{if(!e)throw new Error("comandaId obrigatrio");if(!r)throw new Error("codigo_empresa obrigatrio");console.log(`${n} Cancelando comanda ${e}`);const{data:a}=await Ne.from("comandas").select("id, mesa_id").eq("id",e).single();try{await Ne.from("comanda_itens").delete().eq("comanda_id",e).eq("codigo_empresa",r)}catch{}try{await Ne.from("comanda_clientes").delete().eq("comanda_id",e).eq("codigo_empresa",r)}catch{}const i=new Date().toISOString(),{error:s}=await Ne.from("comandas").update({status:"cancelled",fechado_em:i}).eq("id",e).eq("codigo_empresa",r);if(s)throw s;if(a?.mesa_id){console.log(`${n} Liberando mesa ${a.mesa_id}`);try{await Ne.from("mesas").update({status:"available"}).eq("id",a.mesa_id)}catch(l){console.error(`${n} Erro ao liberar mesa:`,l)}}return console.log(`${n} Comanda ${e} cancelada com sucesso`),!0}catch(a){throw console.error(`${n} Falha:`,a),a}finally{try{console.timeEnd?.(n)}catch{}try{console.groupEnd?.(n)}catch{}}}var mC="Tabs",[mHe,dot]=_c(mC,[uC]),ste=uC(),[pHe,kD]=mHe(mC),lte=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=iC(l),[f,h]=Xd({prop:n,onChange:a,defaultProp:i??"",caller:mC});return o.jsx(pHe,{scope:r,baseId:iu(),value:f,onValueChange:h,orientation:s,dir:d,activationMode:c,children:o.jsx(xn.div,{dir:d,"data-orientation":s,...u,ref:t})})});lte.displayName=mC;var cte="TabsList",ute=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=kD(cte,r),s=ste(r);return o.jsx(lee,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(xn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});ute.displayName=cte;var dte="TabsTrigger",fte=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,s=kD(dte,r),l=ste(r),c=pte(s.baseId,n),u=gte(s.baseId,n),d=n===s.value;return o.jsx(cee,{asChild:!0,...l,focusable:!a,active:d,children:o.jsx(xn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Sr(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?s.onValueChange(n):f.preventDefault()}),onKeyDown:Sr(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(n)}),onFocus:Sr(e.onFocus,()=>{const f=s.activationMode!=="manual";!d&&!a&&f&&s.onValueChange(n)})})})});fte.displayName=dte;var hte="TabsContent",mte=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...s}=e,l=kD(hte,r),c=pte(l.baseId,n),u=gte(l.baseId,n),d=n===l.value,f=v.useRef(d);return v.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),o.jsx(ql,{present:a||d,children:({present:h})=>o.jsx(xn.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});mte.displayName=hte;function pte(e,t){return`${e}-trigger-${t}`}function gte(e,t){return`${e}-content-${t}`}var gHe=lte,vte=ute,xte=fte,yte=mte;const Vd=gHe,Qu=se.forwardRef(({className:e,...t},r)=>o.jsx(vte,{ref:r,className:kt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Qu.displayName=vte.displayName;const Na=se.forwardRef(({className:e,...t},r)=>o.jsx(xte,{ref:r,className:kt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Na.displayName=xte.displayName;const xo=se.forwardRef(({className:e,...t},r)=>o.jsx(yte,{ref:r,className:kt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));xo.displayName=yte.displayName;function bte({open:e,onOpenChange:t,client:r,onSaved:n}){const{toast:a}=Qa(),{userProfile:i}=Wi(),s=E=>({tipo_pessoa:E?.tipo_pessoa||"PF",tipo_cadastro:E?.tipo_cadastro||"cliente",nome:E?.nome||"",apelido:E?.apelido||"",cpf:E?.cpf||"",cnpj:E?.cnpj||"",rg:E?.rg||"",ie:E?.ie||"",email:E?.email||"",telefone:E?.telefone||"",fone2:E?.fone2||"",celular1:E?.celular1||"",celular2:E?.celular2||"",whatsapp:E?.whatsapp||"",cep:E?.cep||"",endereco:E?.endereco||"",numero:E?.numero||"",complemento:E?.complemento||"",bairro:E?.bairro||"",cidade:E?.cidade||"",uf:E?.uf||"",cidade_ibge:E?.cidade_ibge||"",limite_credito:E?.limite_credito??"",tipo_recebimento:E?.tipo_recebimento||"",regime_tributario:E?.regime_tributario||"",tipo_contribuinte:E?.tipo_contribuinte||"",aniversario:E?.aniversario?String(E.aniversario).slice(0,10):"",sexo:E?.sexo||"",estado_civil:E?.estado_civil||"",nome_mae:E?.nome_mae||"",nome_pai:E?.nome_pai||"",observacoes:E?.observacoes||"",status:E?.status||"active"}),[l,c]=v.useState(s(r)),[u,d]=v.useState("basicos"),[f,h]=v.useState(!1);v.useEffect(()=>{let E="cliente";r?.flag_cliente&&r?.flag_fornecedor?E="ambos":r?.flag_fornecedor&&(E="fornecedor"),c({tipo_pessoa:r?.tipo_pessoa||"PF",tipo_cadastro:E,nome:r?.nome||"",apelido:r?.apelido||"",cpf:r?.cpf||"",cnpj:r?.cnpj||"",rg:r?.rg||"",ie:r?.ie||"",email:r?.email||"",telefone:r?.telefone||"",fone2:r?.fone2||"",celular1:r?.celular1||"",celular2:r?.celular2||"",whatsapp:r?.whatsapp||"",cep:r?.cep||"",endereco:r?.endereco||"",numero:r?.numero||"",complemento:r?.complemento||"",bairro:r?.bairro||"",cidade:r?.cidade||"",uf:r?.uf||"",cidade_ibge:r?.cidade_ibge||"",limite_credito:r?.limite_credito??"",tipo_recebimento:r?.tipo_recebimento||"",regime_tributario:r?.regime_tributario||"",tipo_contribuinte:r?.tipo_contribuinte||"",aniversario:r?.aniversario?String(r.aniversario).slice(0,10):"",sexo:r?.sexo||"",estado_civil:r?.estado_civil||"",nome_mae:r?.nome_mae||"",nome_pai:r?.nome_pai||"",observacoes:r?.observacoes||"",status:r?.status||"active"})},[r]),v.useEffect(()=>{e?c(s(r||null)):r||c(s(null))},[e,!!r]);const m=E=>{const{id:I,value:O}=E.target;c(R=>({...R,[I]:O}))},g=E=>E===""?null:E,p=E=>{if(E==null)return null;if(typeof E=="number")return E;const I=String(E).trim();if(!I)return null;const O=I.replace(/\s+/g,"").replace(/\.(?=\d{3}(?:\D|$))/g,"").replace(/,/g,"."),R=Number(O);return Number.isFinite(R)?R:null},x=v.useMemo(()=>({digits:E=>(E||"").replace(/\D+/g,"")}),[]),y=E=>x.digits(E).slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),b=E=>x.digits(E).slice(0,14).replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2"),w=E=>x.digits(E).slice(0,8).replace(/(\d{5})(\d)/,"$1-$2"),_=E=>{const I=x.digits(E).slice(0,11);return I.length<=10?I.replace(/(\d{2})(\d{4})(\d{0,4})/,"($1) $2-$3").trim():I.replace(/(\d{2})(\d{5})(\d{0,4})/,"($1) $2-$3").trim()},j=E=>String(E||"").replace(/[^a-z]/gi,"").toUpperCase().slice(0,2),N=(E,I=6)=>x.digits(E).slice(0,I),P=E=>{const I=x.digits(E);return I?(Number(I)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},A=(E,I)=>{let O=I;E==="cpf"&&(O=y(I)),E==="cnpj"&&(O=b(I)),E==="cep"&&(O=w(I)),["telefone","fone2","celular1","celular2","whatsapp"].includes(E)&&(O=_(I)),E==="uf"&&(O=j(I)),E==="numero"&&(O=N(I,8)),E==="cidade_ibge"&&(O=N(I,7)),E==="limite_credito"&&(O=P(I)),c(R=>({...R,[E]:O}))},k=async()=>{const E=x.digits(l.cep);if(!E||E.length!==8){a({title:"CEP invlido",description:"Informe 8 dgitos.",variant:"destructive"});return}try{h(!0),c(R=>({...R,endereco:"Buscando...",bairro:"Buscando...",cidade:"Buscando...",uf:""}));const O=await(await fetch(`https://viacep.com.br/ws/${E}/json/`)).json();if(O.erro)throw new Error("CEP no encontrado");c(R=>({...R,endereco:O.logradouro||"",bairro:O.bairro||"",cidade:O.localidade||"",uf:O.uf||"",cidade_ibge:O.ibge||""})),a({title:"CEP encontrado!",description:"Endereo preenchido automaticamente.",variant:"success"})}catch(I){c(O=>({...O,endereco:"",bairro:"",cidade:"",uf:""})),a({title:"Falha ao buscar CEP",description:I.message||"Tente novamente.",variant:"destructive"})}finally{h(!1)}},M=async E=>{E?.preventDefault?.(),window.__protectPaymentModal&&window.__protectPaymentModal(5e3);try{if(!l.nome||l.nome.trim().length<2)throw new Error("Informe o nome/razo social do cliente.");const I={tipo_pessoa:g(l.tipo_pessoa),nome:l.nome,apelido:g(l.apelido),cpf:g(l.cpf),cnpj:g(l.cnpj),rg:g(l.rg),ie:g(l.ie),email:g(l.email),telefone:g(l.telefone),fone2:g(l.fone2),celular1:g(l.celular1),celular2:g(l.celular2),whatsapp:g(l.whatsapp),cep:g(l.cep),endereco:g(l.endereco),numero:g(l.numero),complemento:g(l.complemento),bairro:g(l.bairro),cidade:g(l.cidade),uf:g(l.uf),cidade_ibge:g(l.cidade_ibge),limite_credito:p(l.limite_credito),tipo_recebimento:g(l.tipo_recebimento),regime_tributario:g(l.regime_tributario),tipo_contribuinte:g(l.tipo_contribuinte),aniversario:g(l.aniversario),sexo:g(l.sexo),estado_civil:g(l.estado_civil),nome_mae:g(l.nome_mae),nome_pai:g(l.nome_pai),observacoes:g(l.observacoes),flag_cliente:l.tipo_cadastro==="cliente"||l.tipo_cadastro==="ambos",flag_fornecedor:l.tipo_cadastro==="fornecedor"||l.tipo_cadastro==="ambos",flag_funcionario:!1,flag_administradora:!1,flag_parceiro:!1,flag_ccf_spc:!1,status:l.status};let O,R=null;if(r?.id){const{data:B,error:W}=await Ne.from("clientes").update(I).eq("id",r.id).select().single();O=W,R=B??null}else{const B=i?.codigo_empresa||null;if(!B)throw new Error("No foi possvel identificar a empresa do usurio (codigo_empresa). Tente recarregar a pgina ou entrar novamente.");const W={...I,codigo_empresa:B},{data:F,error:$}=await Ne.from("clientes").insert(W).select().single();O=$,R=F??null}if(O)throw O;a({title:"Cliente salvo!",description:"As informaes do cliente foram atualizadas.",variant:"success"}),n?.(R),setTimeout(()=>{t?.(!1)},50)}catch(I){const O=(I?.message||"").toLowerCase(),R=I?.code||"";let B="Erro ao salvar cliente",W=I.message;R==="23505"||O.includes("duplicate key")&&O.includes("uq_clientes_empresa_codigo")?(B="Cdigo j cadastrado",W="J existe um cliente com este cdigo na sua empresa. Deixe o campo cdigo em branco para gerar automaticamente ou escolha outro nmero."):O.includes("column")&&O.includes("does not exist")&&(W="Seu banco pode no estar migrado para os novos campos. Atualize o schema conforme estrutura_bd."),a({title:B,description:W,variant:"destructive"})}};return o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto w-full",children:[o.jsxs(an,{children:[o.jsx(en,{children:r?"Editar Cliente":"Novo Cliente"}),o.jsx(hn,{children:"Preencha os dados cadastrais do cliente."})]}),o.jsx("form",{onSubmit:M,className:"grid gap-4 sm:gap-6 py-2",children:o.jsxs(Vd,{value:u,onValueChange:d,className:"w-full",children:[o.jsx("div",{className:"sm:hidden mb-4",children:o.jsxs(Yn,{value:u,onValueChange:d,children:[o.jsx(Hn,{className:"w-full",children:o.jsx(Xn,{})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"basicos",children:"Dados Bsicos"}),o.jsx(qt,{value:"endereco",children:"Endereo"}),o.jsx(qt,{value:"financeiro",children:"Financeiro"}),o.jsx(qt,{value:"adicionais",children:"Adicionais"})]})]})}),o.jsxs(Qu,{className:"hidden sm:grid grid-cols-4 gap-2",children:[o.jsx(Na,{value:"basicos",children:"Dados Bsicos"}),o.jsx(Na,{value:"endereco",children:"Endereo"}),o.jsx(Na,{value:"financeiro",children:"Financeiro"}),o.jsx(Na,{value:"adicionais",children:"Adicionais"})]}),o.jsx(xo,{value:"basicos",className:"space-y-3 sm:space-y-4 mt-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{children:"Tipo de Pessoa"}),o.jsxs(Yn,{value:l.tipo_pessoa,onValueChange:E=>c(I=>({...I,tipo_pessoa:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Pessoa"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"PF",children:"Fsica"}),o.jsx(qt,{value:"PJ",children:"Jurdica"})]})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{children:"Tipo de Cadastro *"}),o.jsxs(Yn,{value:l.tipo_cadastro,onValueChange:E=>c(I=>({...I,tipo_cadastro:E})),required:!0,children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"cliente",children:"Cliente"}),o.jsx(qt,{value:"fornecedor",children:"Fornecedor"}),o.jsx(qt,{value:"ambos",children:"Cliente e Fornecedor"})]})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[o.jsx(vt,{htmlFor:"nome",children:l.tipo_pessoa==="PJ"?"Razo Social":"Nome"}),o.jsx($t,{id:"nome",value:l.nome,onChange:m,required:!0})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[o.jsx(vt,{htmlFor:"apelido",children:l.tipo_pessoa==="PJ"?"Nome Fantasia":"Apelido"}),o.jsx($t,{id:"apelido",value:l.apelido,onChange:m})]}),l.tipo_pessoa==="PF"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"cpf",children:"CPF"}),o.jsx($t,{id:"cpf",value:l.cpf,onChange:E=>A("cpf",E.target.value),placeholder:"000.000.000-00"})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"rg",children:"RG"}),o.jsx($t,{id:"rg",value:l.rg,onChange:m})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"cnpj",children:"CNPJ"}),o.jsx($t,{id:"cnpj",value:l.cnpj,onChange:E=>A("cnpj",E.target.value),placeholder:"00.000.000/0000-00"})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"ie",children:"Inscrio Estadual (IE)"}),o.jsx($t,{id:"ie",value:l.ie,onChange:m})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[o.jsx(vt,{htmlFor:"email",children:"Email"}),o.jsx($t,{id:"email",type:"email",value:l.email,onChange:m})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"telefone",children:"Telefone"}),o.jsx($t,{id:"telefone",value:l.telefone,onChange:E=>A("telefone",E.target.value)})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"celular1",children:"Celular"}),o.jsx($t,{id:"celular1",value:l.celular1,onChange:E=>A("celular1",E.target.value)})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"whatsapp",children:"WhatsApp"}),o.jsx($t,{id:"whatsapp",value:l.whatsapp,onChange:E=>A("whatsapp",E.target.value),placeholder:"(DDD) 9...."})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"fone2",children:"Fone 2"}),o.jsx($t,{id:"fone2",value:l.fone2,onChange:E=>A("fone2",E.target.value)})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"celular2",children:"Celular 2"}),o.jsx($t,{id:"celular2",value:l.celular2,onChange:E=>A("celular2",E.target.value)})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"aniversario",children:"Nascimento"}),o.jsx($t,{id:"aniversario",type:"date",value:l.aniversario||"",onChange:m})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{children:"Status"}),o.jsxs(Yn,{value:l.status,onValueChange:E=>c(I=>({...I,status:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Status"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"active",children:"Ativo"}),o.jsx(qt,{value:"inactive",children:"Inativo"})]})]})]})]})}),o.jsx(xo,{value:"endereco",className:"space-y-3 sm:space-y-4 mt-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"cep",children:"CEP"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx($t,{id:"cep",value:l.cep,onChange:E=>A("cep",E.target.value),placeholder:"00000-000"}),o.jsx(ye,{type:"button",variant:"outline",onClick:k,disabled:f,children:f?"Buscando...":"Buscar"})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[o.jsx(vt,{htmlFor:"endereco",children:"Endereo"}),o.jsx($t,{id:"endereco",value:l.endereco,onChange:m})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"numero",children:"Nmero"}),o.jsx($t,{id:"numero",value:l.numero,onChange:E=>A("numero",E.target.value)})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[o.jsx(vt,{htmlFor:"complemento",children:"Complemento"}),o.jsx($t,{id:"complemento",value:l.complemento,onChange:m})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[o.jsx(vt,{htmlFor:"bairro",children:"Bairro"}),o.jsx($t,{id:"bairro",value:l.bairro,onChange:m})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"cidade",children:"Cidade"}),o.jsx($t,{id:"cidade",value:l.cidade,onChange:m})]}),o.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[o.jsx(vt,{htmlFor:"uf",children:"UF"}),o.jsx($t,{id:"uf",value:l.uf,onChange:E=>A("uf",E.target.value),placeholder:"UF"})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"cidade_ibge",children:"Cd. IBGE"}),o.jsx($t,{id:"cidade_ibge",value:l.cidade_ibge,onChange:E=>A("cidade_ibge",E.target.value)})]})]})}),o.jsx(xo,{value:"financeiro",className:"space-y-3 sm:space-y-4 mt-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{htmlFor:"limite_credito",children:"Limite de Crdito"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary text-sm",children:"R$"}),o.jsx($t,{id:"limite_credito",value:l.limite_credito,onChange:E=>A("limite_credito",E.target.value),placeholder:"0,00",className:"pl-10"})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{children:"Tipo de Recebimento"}),o.jsxs(Yn,{value:l.tipo_recebimento||"",onValueChange:E=>c(I=>({...I,tipo_recebimento:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"avista",children:" vista"}),o.jsx(qt,{value:"aprazo",children:"A prazo"}),o.jsx(qt,{value:"misto",children:"Misto"})]})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{children:"Regime Tributrio"}),o.jsxs(Yn,{value:l.regime_tributario||"",onValueChange:E=>c(I=>({...I,regime_tributario:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"simples",children:"Simples"}),o.jsx(qt,{value:"lucro_presumido",children:"Lucro Presumido"}),o.jsx(qt,{value:"lucro_real",children:"Lucro Real"})]})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[o.jsx(vt,{children:"Tipo de Contribuinte"}),o.jsxs(Yn,{value:l.tipo_contribuinte||"",onValueChange:E=>c(I=>({...I,tipo_contribuinte:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"nao_contribuinte",children:"No Contribuinte"}),o.jsx(qt,{value:"contribuinte",children:"Contribuinte"}),o.jsx(qt,{value:"isento",children:"Isento"})]})]})]})]})}),o.jsx(xo,{value:"adicionais",className:"space-y-3 sm:space-y-4 mt-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[o.jsx(vt,{htmlFor:"sexo",children:"Sexo"}),o.jsxs(Yn,{value:l.sexo||"",onValueChange:E=>c(I=>({...I,sexo:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"m",children:"Masculino"}),o.jsx(qt,{value:"f",children:"Feminino"}),o.jsx(qt,{value:"o",children:"Outro"})]})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[o.jsx(vt,{htmlFor:"estado_civil",children:"Estado Civil"}),o.jsxs(Yn,{value:l.estado_civil||"",onValueChange:E=>c(I=>({...I,estado_civil:E})),children:[o.jsx(Hn,{children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"solteiro",children:"Solteiro(a)"}),o.jsx(qt,{value:"casado",children:"Casado(a)"}),o.jsx(qt,{value:"divorciado",children:"Divorciado(a)"}),o.jsx(qt,{value:"viuvo",children:"Vivo(a)"})]})]})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[o.jsx(vt,{htmlFor:"nome_mae",children:"Nome da Me"}),o.jsx($t,{id:"nome_mae",value:l.nome_mae,onChange:m})]}),o.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[o.jsx(vt,{htmlFor:"nome_pai",children:"Nome do Pai"}),o.jsx($t,{id:"nome_pai",value:l.nome_pai,onChange:m})]}),o.jsxs("div",{className:"col-span-12",children:[o.jsx(vt,{htmlFor:"observacoes",children:"Observaes"}),o.jsx("textarea",{id:"observacoes",value:l.observacoes,onChange:m,rows:4,className:"w-full rounded-md border border-border bg-background p-2 text-sm"})]})]})})]})}),o.jsxs($n,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Cancelar"})}),o.jsx(ye,{type:"submit",onClick:M,className:"w-full sm:w-auto",children:"Salvar Cliente"})]})]})})}function vHe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const xHe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function ph(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let sg=null;function wte(e={}){return sg||(e.includeStyleProperties?(sg=e.includeStyleProperties,sg):(sg=ph(window.getComputedStyle(document.documentElement)),sg))}function ej(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function yHe(e){const t=ej(e,"border-left-width"),r=ej(e,"border-right-width");return e.clientWidth+t+r}function bHe(e){const t=ej(e,"border-top-width"),r=ej(e,"border-bottom-width");return e.clientHeight+t+r}function _te(e,t={}){const r=t.width||yHe(e),n=t.height||bHe(e);return{width:r,height:n}}function wHe(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const pl=16384;function _He(e){(e.width>pl||e.height>pl)&&(e.width>pl&&e.height>pl?e.width>e.height?(e.height*=pl/e.width,e.width=pl):(e.width*=pl/e.height,e.height=pl):e.width>pl?(e.height*=pl/e.width,e.width=pl):(e.width*=pl/e.height,e.height=pl))}function tj(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function SHe(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function jHe(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),i=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),a.appendChild(i),i.appendChild(e),SHe(a)}const rl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||rl(r,t)};function NHe(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function CHe(e,t){return wte(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function AHe(e,t,r,n){const a=`.${e}:${t}`,i=r.cssText?NHe(r):CHe(r,n);return document.createTextNode(`${a}{${i}}`)}function tz(e,t,r,n){const a=window.getComputedStyle(e,r),i=a.getPropertyValue("content");if(i===""||i==="none")return;const s=xHe();try{t.className=`${t.className} ${s}`}catch{return}const l=document.createElement("style");l.appendChild(AHe(s,r,a,n)),t.appendChild(l)}function PHe(e,t,r){tz(e,t,":before",r),tz(e,t,":after",r)}const rz="application/font-woff",nz="image/jpeg",EHe={woff:rz,woff2:rz,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:nz,jpeg:nz,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function kHe(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function OD(e){const t=kHe(e).toLowerCase();return EHe[t]||""}function OHe(e){return e.split(/,/)[1]}function xT(e){return e.search(/^(data:)/)!==-1}function Ste(e,t){return`data:${t};base64,${e}`}async function jte(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((i,s)=>{const l=new FileReader;l.onerror=s,l.onloadend=()=>{try{i(r({res:n,result:l.result}))}catch(c){s(c)}},l.readAsDataURL(a)})}const KA={};function THe(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function TD(e,t,r){const n=THe(e,t,r.includeQueryParams);if(KA[n]!=null)return KA[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const i=await jte(e,r.fetchRequestInit,({res:s,result:l})=>(t||(t=s.headers.get("Content-Type")||""),OHe(l)));a=Ste(i,t)}catch(i){a=r.imagePlaceholder||"";let s=`Failed to fetch resource: ${e}`;i&&(s=typeof i=="string"?i:i.message),s&&console.warn(s)}return KA[n]=a,a}async function IHe(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):tj(t)}async function DHe(e,t){if(e.currentSrc){const i=document.createElement("canvas"),s=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,s?.drawImage(e,0,0,i.width,i.height);const l=i.toDataURL();return tj(l)}const r=e.poster,n=OD(r),a=await TD(r,n,t);return tj(a)}async function MHe(e,t){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await pC(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function RHe(e,t){return rl(e,HTMLCanvasElement)?IHe(e):rl(e,HTMLVideoElement)?DHe(e,t):rl(e,HTMLIFrameElement)?MHe(e,t):e.cloneNode(Nte(e))}const LHe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Nte=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function $He(e,t,r){var n,a;if(Nte(t))return t;let i=[];return LHe(e)&&e.assignedNodes?i=ph(e.assignedNodes()):rl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?i=ph(e.contentDocument.body.childNodes):i=ph(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),i.length===0||rl(e,HTMLVideoElement)||await i.reduce((s,l)=>s.then(()=>pC(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function FHe(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):wte(r).forEach(i=>{let s=a.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),rl(e,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),n.setProperty(i,s,a.getPropertyPriority(i))})}function BHe(e,t){rl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),rl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function zHe(e,t){if(rl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function qHe(e,t,r){return rl(t,Element)&&(FHe(e,t,r),PHe(e,t,r),BHe(e,t),zHe(e,t)),t}async function UHe(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let i=0;i<r.length;i++){const l=r[i].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await pC(u,t,!0))}}const a=Object.values(n);if(a.length){const i="http://www.w3.org/1999/xhtml",s=document.createElementNS(i,"svg");s.setAttribute("xmlns",i),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const l=document.createElementNS(i,"defs");s.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(s)}return e}async function pC(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>RHe(n,t)).then(n=>$He(e,n,t)).then(n=>qHe(e,n,t)).then(n=>UHe(n,t))}const Cte=/url\((['"]?)([^'"]+?)\1\)/g,VHe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,WHe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function HHe(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function GHe(e){const t=[];return e.replace(Cte,(r,n,a)=>(t.push(a),r)),t.filter(r=>!xT(r))}async function KHe(e,t,r,n,a){try{const i=r?vHe(t,r):t,s=OD(t);let l;if(a){const c=await a(i);l=Ste(c,s)}else l=await TD(i,s,n);return e.replace(HHe(t),`$1${l}$3`)}catch{}return e}function YHe(e,{preferredFontFormat:t}){return t?e.replace(WHe,r=>{for(;;){const[n,,a]=VHe.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Ate(e){return e.search(Cte)!==-1}async function Pte(e,t,r){if(!Ate(e))return e;const n=YHe(e,r);return GHe(n).reduce((i,s)=>i.then(l=>KHe(l,s,t,r)),Promise.resolve(n))}async function lg(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const i=await Pte(a,null,r);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function XHe(e,t){await lg("background",e,t)||await lg("background-image",e,t),await lg("mask",e,t)||await lg("-webkit-mask",e,t)||await lg("mask-image",e,t)||await lg("-webkit-mask-image",e,t)}async function JHe(e,t){const r=rl(e,HTMLImageElement);if(!(r&&!xT(e.src))&&!(rl(e,SVGImageElement)&&!xT(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await TD(n,OD(n),t);await new Promise((i,s)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...c)=>{try{i(t.onImageErrorHandler(...c))}catch(u){s(u)}}:s;const l=e;l.decode&&(l.decode=i),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function QHe(e,t){const n=ph(e.childNodes).map(a=>Ete(a,t));await Promise.all(n).then(()=>e)}async function Ete(e,t){rl(e,Element)&&(await XHe(e,t),await JHe(e,t),await QHe(e,t))}function ZHe(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const az={};async function iz(e){let t=az[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},az[e]=t,t}async function oz(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,i=(r.match(/url\([^)]+\)/g)||[]).map(async s=>{let l=s.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),jte(l,t.fetchRequestInit,({result:c})=>(r=r.replace(s,`url(${c})`),[s,c]))});return Promise.all(i).then(()=>r)}function sz(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(s,"gi");for(;;){let c=i.exec(n);if(c===null){if(c=l.exec(n),c===null)break;i.lastIndex=l.lastIndex}else l.lastIndex=i.lastIndex;t.push(c[0])}return t}async function eGe(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{ph(a.cssRules||[]).forEach((i,s)=>{if(i.type===CSSRule.IMPORT_RULE){let l=s+1;const c=i.href,u=iz(c).then(d=>oz(d,t)).then(d=>sz(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(i){const s=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(iz(a.href).then(l=>oz(l,t)).then(l=>sz(l).forEach(c=>{s.insertRule(c,s.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",i)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{ph(a.cssRules||[]).forEach(i=>{r.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${a.href}`,i)}}),r))}function tGe(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Ate(t.style.getPropertyValue("src")))}async function rGe(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=ph(e.ownerDocument.styleSheets),n=await eGe(r,t);return tGe(n)}function kte(e){return e.trim().replace(/["']/g,"")}function nGe(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(i=>{t.add(kte(i))}),Array.from(n.children).forEach(i=>{i instanceof HTMLElement&&r(i)})}return r(e),t}async function aGe(e,t){const r=await rGe(e,t),n=nGe(e);return(await Promise.all(r.filter(i=>n.has(kte(i.style.fontFamily))).map(i=>{const s=i.parentStyleSheet?i.parentStyleSheet.href:null;return Pte(i.cssText,s,t)}))).join(`
`)}async function iGe(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await aGe(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function oGe(e,t={}){const{width:r,height:n}=_te(e,t),a=await pC(e,t,!0);return await iGe(a,t),await Ete(a,t),ZHe(a,t),await jHe(a,r,n)}async function sGe(e,t={}){const{width:r,height:n}=_te(e,t),a=await oGe(e,t),i=await tj(a),s=document.createElement("canvas"),l=s.getContext("2d"),c=t.pixelRatio||wHe(),u=t.canvasWidth||r,d=t.canvasHeight||n;return s.width=u*c,s.height=d*c,t.skipAutoScale||_He(s),s.style.width=`${u}`,s.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,s.width,s.height)),l.drawImage(i,0,0,s.width,s.height),s}async function lGe(e,t={}){return(await sGe(e,t)).toDataURL()}const co=e=>{const t=String(e??"").replace(/\D/g,"");if(!t)return"";const r=(Number(t)/100).toFixed(2),[n,a]=r.split(".");return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${a}`},Dc=e=>{if(e==null||e==="")return NaN;const t=String(e).replace(/\./g,"").replace(",","."),r=parseFloat(t);return Number.isFinite(r)?r:NaN};function cGe({setIsModalOpen:e,setBookings:t,form:r,setForm:n,localCustomers:a,onOpenClientModal:i,onClientModalSuccess:s}){const{toast:l}=Qa(),{userProfile:c}=Wi(),{loadAlerts:u}=iN(),{isPaymentModalOpen:d,closePaymentModal:f,editingBooking:h,paymentTotal:m,setPaymentTotal:g,participantsForm:p,setParticipantsForm:x,payMethods:y,openEditParticipantModal:b,protectPaymentModal:w,onParticipantReplacedRef:_}=B_();window.__protectPaymentModal=w,v.useEffect(()=>(d&&(document.body.style.overflow="auto",document.body.style.pointerEvents="auto"),()=>{document.body.style.overflow="",document.body.style.pointerEvents=""}),[d]);const[j,N]=v.useState(""),[P,A]=v.useState([]);v.useState(null);const[k,M]=v.useState(null),[E,I]=v.useState(!1),[O,R]=v.useState(""),[B,W]=v.useState(!1),[F,$]=v.useState([]);v.useState(null);const[H,ce]=v.useState(!1),[oe,L]=v.useState(""),[U,J]=v.useState([]),[V,Z]=v.useState([]),K=v.useRef(null),he=v.useRef(null),te=v.useRef(null),me=v.useRef(null),Ee=v.useRef(null),Se=v.useRef(!1),[We,be]=v.useState(!1),ne=v.useCallback((Y,ve)=>{Z(Ve=>{const $e=[...Ve];return Y>=0&&Y<$e.length&&($e[Y]={...$e[Y],nome:ve}),x($e),$e})},[x]),Qt=v.useCallback(Y=>!a||!Array.isArray(a)?!1:a.find(Ve=>Ve.id===Y)?.is_consumidor_final===!0,[a]),bt=v.useCallback(()=>{if(!y||y.length===0)return null;const Y=y.find(ve=>ve.codigo_interno==="01");return Y||y[0]},[y]),Pt=v.useMemo(()=>{const Y=V||[],ve=P||[];return Y.filter((Ve,$e)=>!ve.includes($e)).length},[V,P]),Qe=v.useMemo(()=>{const Y=V||[],ve=P||[],Ve=Y.filter((ht,st)=>!ve.includes(st)),$e=Dc(m);let Le=0,it=0,Ye=0,Ge=!1;Ve.forEach(ht=>{let st=Dc(ht?.valor_cota);if(ht?.aplicar_taxa===!0&&Number.isFinite(st)){const rr=y.find(fn=>String(fn.id)===String(ht.finalizadora_id)),Zt=Number(rr?.taxa_percentual||0);Zt>0&&(st=st/(1+Zt/100),Ge=!0)}Number.isFinite(st)&&(Le+=st),(ht?.status_pagamento||"Pendente")==="Pago"?it++:Ye++});const Xe=Number.isFinite($e)?Le-$e:0;return{totalTarget:$e,totalAssigned:Le,diff:Xe,paid:it,pending:Ye,temTaxaAplicada:Ge}},[V,P,m,y]),ft=()=>{const Y=Dc(m);if(!Number.isFinite(Y)||Pt===0)return;const ve=Y/Pt,Ve=co(String(ve.toFixed(2))),$e=P||[];Z(Le=>{const it=[...Le];return it.forEach((Ye,Ge)=>{$e.includes(Ge)||(it[Ge]={...it[Ge],valor_cota:Ve,status_pagamento:"Pago",aplicar_taxa:!1})}),it})},mt=()=>{const Y=P||[];Z(ve=>{const Ve=[...ve];return Ve.forEach(($e,Le)=>{Y.includes(Le)||(Ve[Le]={...Ve[Le],valor_cota:"",status_pagamento:"Pendente",aplicar_taxa:!1})}),Ve})},_t=()=>{const Y=P||[];Z(ve=>{const Ve=[...ve];return Ve.forEach(($e,Le)=>{if(!Y.includes(Le)){const it=Dc($e.valor_cota);if(it>0){const Ge=y.find(ht=>String(ht.id)===String($e.finalizadora_id)),Xe=Number(Ge?.taxa_percentual||0);if(Xe>0&&!$e.aplicar_taxa){const ht=it*(1+Xe/100);Ve[Le]={...Ve[Le],aplicar_taxa:!0,valor_cota:co(ht.toFixed(2))}}}}}),Ve})},ue=(Y,ve)=>{b(Y,ve)},Ct=()=>{L(m||""),ce(!0)},At=()=>{g(oe),ce(!1)},Wt=()=>{L(""),ce(!1)},wt=async(Y={})=>{const{autoSave:ve=!1}=Y;try{if(E)return;I(!0);const Ve=h?.id,$e=c?.codigo_empresa;if(!Ve||!$e){l({title:"Erro ao salvar pagamentos",description:"Agendamento ou empresa indisponvel.",variant:"destructive"});return}const Le=P||[],it=(V||[]).filter((Zt,fn)=>!Le.includes(fn)),Ye=it.reduce((Zt,fn)=>{const Yr=fn.status_pagamento||"Pendente";return Zt+(Yr!=="Pago"?1:0)},0),Ge=new Date().toISOString();console.log(`

========== SALVAMENTO INICIADO ${Ge} ==========`),console.log(" DELETANDO participantes antigos:",{agendamentoId:Ve,codigo:$e});const{error:Xe}=await Ne.from("agendamento_participantes").delete().eq("codigo_empresa",$e).eq("agendamento_id",Ve);if(Xe?console.error(" ERRO ao deletar:",Xe):console.log(" Participantes antigos deletados"),Xe)throw console.error("[PaymentModal] Delete error",Xe),l({title:"Erro ao salvar pagamentos",description:"Falha ao limpar registros anteriores.",variant:"destructive"}),Xe;const ht=it.map(Zt=>{const fn=Dc(Zt.valor_cota),Yr=bt(),Bn=Zt.finalizadora_id||(Yr?.id?String(Yr.id):null),hr={codigo_empresa:$e,agendamento_id:Ve,cliente_id:Zt.cliente_id,nome:Zt.nome,valor_cota:Number.isFinite(fn)?fn:0,status_pagamento:Zt.status_pagamento||"Pendente",finalizadora_id:Bn,aplicar_taxa:Zt.aplicar_taxa||!1};return console.log(` SALVAR: ${Zt.nome} | Valor: ${Zt.valor_cota}  ${hr.valor_cota} | Fin: ${Bn?.slice(-4)} | Taxa: ${hr.aplicar_taxa} | Status: ${hr.status_pagamento}`),hr});if(console.log(` TOTAL A SALVAR: ${ht.length} participantes`),console.log(" AGENDAMENTO ID:",Ve),console.log(" EMPRESA:",$e),ht.length>0){console.log(" INSERINDO no banco...");const{data:Zt,error:fn}=await Ne.from("agendamento_participantes").insert(ht).select();if(fn)throw console.error(" ERRO ao inserir:",fn),l({title:"Erro ao salvar pagamentos",description:"Falha ao inserir pagamentos.",variant:"destructive"}),fn;console.log(" INSERT bem-sucedido! Registros inseridos:",Zt?.length||0),console.log(`========== SALVAMENTO CONCLUDO ==========

`),Zt&&Zt.length>0&&Zt.forEach((Yr,Bn)=>{console.log(` SALVO #${Bn+1}: ${Yr.nome} | Valor: ${Yr.valor_cota} | Fin: ${Yr.finalizadora_id?.slice(-4)} | Taxa: ${Yr.aplicar_taxa} | Status: ${Yr.status_pagamento}`)})}const st=it.map(Zt=>({id:Zt.cliente_id,nome:Zt.nome,codigo:Zt.codigo!==null&&Zt.codigo!==void 0?Zt.codigo:null})),lr=st[0]||null,rr=st.map(Zt=>Zt?.nome).filter(Boolean);await Ne.from("agendamentos").update({cliente_id:lr?.id??null,clientes:rr}).eq("codigo_empresa",$e).eq("id",Ve),n(Zt=>({...Zt,selectedClients:st})),t(Zt=>Zt.map(fn=>fn.id===Ve?{...fn,customer:lr?.nome||fn.customer,cliente_id:lr?.id??null,clientes:rr}:fn)),A([]),ve||(Ye>0?l({title:"Pagamentos salvos",description:`${Ye} ${Ye===1?"pendente":"pendentes"}`,variant:"warning"}):l({title:"Pagamentos salvos",variant:"success"})),M(null),x(it);try{await u()}catch(Zt){console.error("[PaymentModal] Erro ao recarregar alertas:",Zt)}ve||(f(),e(!1))}catch{l({title:"Erro ao salvar pagamentos",description:"Tente novamente.",variant:"destructive"})}finally{I(!1)}};v.useEffect(()=>{const Y=ve=>{d&&(B||(ve.key==="Escape"&&(ve.preventDefault(),console.log(" [Auto-save Payments] Salvando ao fechar modal (ESC)..."),me.current&&clearTimeout(me.current),wt({autoSave:!0}).then(()=>{console.log(" [Auto-save Payments] Salvo ao fechar (ESC)!"),f()}).catch(Ve=>{console.error(" [Auto-save Payments] Erro ao salvar ao fechar (ESC):",Ve),f()})),ve.key==="F8"&&(ve.preventDefault(),m&&Pt>0&&ft()),ve.key==="F9"&&(ve.preventDefault(),Pt>0&&_t()),ve.key==="F10"&&(ve.preventDefault(),Pt>0&&mt())))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[d,B,m,Pt,ft,_t,mt,E,wt,f]),v.useEffect(()=>(d?(te.current=setTimeout(()=>{if(!he.current&&(!y||y.length===0)){const Y=(r?.selectedClients||[]).map(ve=>{let Ve=ve.codigo;if(Ve==null&&a&&Array.isArray(a)){const $e=a.find(Le=>Le.id===ve.id);Ve=$e?.codigo!==null&&$e?.codigo!==void 0?$e.codigo:null}return{cliente_id:ve.id,nome:ve.nome,codigo:Ve,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:null,aplicar_taxa:!1}});Z(Y),he.current=Date.now()}},3e3),!he.current&&y&&y.length>0&&(te.current&&(clearTimeout(te.current),te.current=null),(async()=>{const{defaultMethod:ve,defaultFinalizadoraId:Ve,defaultAplicarTaxa:$e}=(()=>{const Ge=bt(),Xe=Ge?.id?String(Ge.id):null,ht=Number(Ge?.taxa_percentual||0)>0;return{defaultMethod:Ge,defaultFinalizadoraId:Xe,defaultAplicarTaxa:ht}})();let Le=[],it="nenhuma";if(p&&p.length>0)Le=p,it="participantsForm (contexto)";else if(r?.selectedClients&&r.selectedClients.length>0)Le=(r?.selectedClients||[]).map(Ge=>{let Xe=Ge.codigo;if(Xe==null&&a&&Array.isArray(a)){const ht=a.find(st=>st.id===Ge.id);Xe=ht?.codigo!==null&&ht?.codigo!==void 0?ht.codigo:null}return{cliente_id:Ge.id,nome:Ge.nome,codigo:Xe,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:Ve,aplicar_taxa:$e}}),it="form.selectedClients";else if(h?.id){const Ge=new Date().toISOString();console.log(`

========== CARREGAMENTO INICIADO ${Ge} ==========`),console.log(" BUSCANDO PARTICIPANTES DO BANCO..."),console.log(" Query params:",{agendamento_id:h.id,codigo_empresa:c?.codigo_empresa});try{const{data:Xe,error:ht}=await Ne.from("agendamento_participantes").select("*").eq("agendamento_id",h.id).eq("codigo_empresa",c?.codigo_empresa);console.log(" Resultado da query:",{encontrados:Xe?.length||0,erro:ht,dados:Xe}),ht?console.error(" Erro ao buscar participantes:",ht):Xe&&Xe.length>0?(console.log(` ${Xe.length} participantes encontrados no banco`),Le=Xe.map(st=>({cliente_id:st.cliente_id,nome:st.nome,codigo:null,valor_cota:st.valor_cota?co(String(Number(st.valor_cota).toFixed(2))):"0,00",status_pagamento:st.status_pagamento||"Pendente",finalizadora_id:st.finalizadora_id?String(st.finalizadora_id):Ve,aplicar_taxa:st.aplicar_taxa||!1})),it="banco de dados"):(console.log(" Nenhum participante encontrado no banco!"),it="banco vazio")}catch(Xe){console.error(" Erro ao buscar participantes:",Xe)}}const Ye=Le.map(Ge=>{let Xe=Ge.codigo;if(Xe==null&&a&&Array.isArray(a)){const st=a.find(lr=>lr.id===Ge.cliente_id);Xe=st?.codigo!==null&&st?.codigo!==void 0?st.codigo:null}let ht=Ge.finalizadora_id;if(!ht){const st=bt();ht=st?.id?String(st.id):null}return{...Ge,codigo:Xe??Ge.codigo,finalizadora_id:ht}});if(Ye.length===0&&h?.id){console.error(" ALERTA CRTICO: Nenhum participante encontrado em NENHUMA fonte!"),console.error(" Agendamento ID:",h.id),console.error(" Empresa:",c?.codigo_empresa),console.error(" Isso pode indicar perda de dados!");try{const{data:Ge,error:Xe}=await Ne.from("agendamento_participantes").select("*").eq("agendamento_id",h.id);console.error(" Busca sem filtro de empresa:",{encontrados:Ge?.length||0,dados:Ge,erro:Xe})}catch(Ge){console.error(" Erro na busca de debug:",Ge)}}console.log(` CARREGANDO: ${Ye.length} participantes de ${it}`),console.log(`========== CARREGAMENTO CONCLUDO ==========

`),Ye.forEach((Ge,Xe)=>{console.log(` #${Xe+1}: ${Ge.nome} (cod:${Ge.codigo}) | Valor: ${Ge.valor_cota} | Fin: ${Ge.finalizadora_id?.slice(-4)} | Taxa: ${Ge.aplicar_taxa} | Status: ${Ge.status_pagamento}`)}),Ye.length>0||!h?.id?(Z(Ye),he.current=Date.now()):(console.error(" BLOQUEADO: No vou sobrescrever com array vazio!"),console.error(" Mantendo dados anteriores para evitar perda."))})())):(te.current&&(clearTimeout(te.current),te.current=null),N(""),M(null),A([]),Z([]),he.current=null),()=>{te.current&&clearTimeout(te.current)}),[d,y,bt,p,r?.selectedClients,a]),v.useEffect(()=>(_.current=Y=>{J([Y]),setTimeout(()=>{J([])},1e3)},()=>{_.current=null}),[_]);const Ae=v.useCallback(Y=>{Z(Y)},[]);v.useEffect(()=>(d&&(x.updateLocal=Ae,x.getLocal=()=>V),()=>{x.updateLocal&&(delete x.updateLocal,delete x.getLocal)}),[d,Ae,V]),v.useEffect(()=>{B||($([]),R(""))},[B]),v.useEffect(()=>{const Y=ve=>{if(B&&(ve.key==="Escape"&&(ve.preventDefault(),W(!1),R(""),$([])),ve.key==="Enter"&&ve.target.tagName!=="INPUT"&&F.length>0)){ve.preventDefault();const Ve=F.map($e=>({cliente_id:$e.id,nome:$e.nome,codigo:$e.codigo,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:(()=>{const Le=bt();return Le?.id?String(Le.id):null})(),aplicar_taxa:(()=>{const Le=bt();return Number(Le?.taxa_percentual||0)>0})()}));Z($e=>{const Le=$e.length,it=Ve.map((Ye,Ge)=>Le+Ge);return J(it),setTimeout(()=>{J([])},1e3),[...$e,...Ve]}),W(!1),$([]),R("")}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[B,F,bt,Z,l,R,W,$]),v.useEffect(()=>{if(!d){Se.current=!1,Ee.current=null;return}if(!Se.current){const ve=setTimeout(()=>{Se.current=!0,Ee.current=JSON.stringify(V)},500);return()=>clearTimeout(ve)}const Y=JSON.stringify(V);if(Y!==Ee.current)return me.current&&clearTimeout(me.current),me.current=setTimeout(async()=>{console.log(" [Auto-save Payments] Salvando alteraes..."),be(!0);try{await wt({autoSave:!0}),Ee.current=Y,console.log(" [Auto-save Payments] Salvo com sucesso!")}catch(ve){console.error(" [Auto-save Payments] Erro ao salvar:",ve)}finally{be(!1)}},1500),()=>{me.current&&clearTimeout(me.current)}},[d,V,wt]);const qe=v.useRef(null),Ot=async()=>{try{if(!qe.current)throw new Error("Elemento do relatrio no encontrado");l({title:"Gerando imagem...",description:"Aguarde um momento."});const Y=qe.current;Y.style.left="0",Y.style.top="0",Y.style.zIndex="9999",await new Promise($e=>setTimeout($e,100));const ve=await lGe(Y,{quality:1,pixelRatio:2,backgroundColor:"#1a1a1a"});Y.style.left="-9999px",Y.style.top="-9999px",Y.style.zIndex="-1";const Ve=document.createElement("a");Ve.download=`relatorio-pagamento-${h?.code||"agendamento"}.png`,Ve.href=ve,Ve.click(),l({title:"Imagem baixada!",description:"O relatrio foi salvo como imagem.",variant:"success"})}catch(Y){console.error("Erro ao gerar imagem:",Y),l({title:"Erro ao gerar imagem",description:Y?.message||"No foi possvel gerar a imagem.",variant:"destructive"})}};return o.jsxs(o.Fragment,{children:[o.jsx(cn,{open:d,onOpenChange:Y=>{Y||f()},children:o.jsx(on,{forceMount:!0,className:"w-[95vw] sm:max-w-[1100px] max-h-[90vh] overflow-y-scroll",onOpenAutoFocus:Y=>Y.preventDefault(),onInteractOutside:async Y=>{if(B){Y.preventDefault();return}if(he.current&&Date.now()-he.current<500){Y.preventDefault();return}Y.preventDefault(),console.log(" [Auto-save Payments] Salvando ao clicar fora do modal...");try{me.current&&clearTimeout(me.current),await wt({autoSave:!0}),console.log(" [Auto-save Payments] Salvo ao clicar fora!")}catch(ve){console.error(" [Auto-save Payments] Erro ao salvar ao clicar fora:",ve)}finally{f()}},onEscapeKeyDown:Y=>{Y.preventDefault()},children:!y||y.length===0?he.current?o.jsxs(o.Fragment,{children:[o.jsxs(an,{className:"sr-only",children:[o.jsx(en,{children:"Aviso"}),o.jsx(hn,{children:"Nenhuma forma de pagamento cadastrada"})]}),o.jsxs("div",{className:"p-8 flex flex-col items-center justify-center gap-4",children:[o.jsx(sp,{className:"w-12 h-12 text-amber-500"}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("p",{className:"font-semibold text-amber-500",children:"Nenhuma forma de pagamento cadastrada"}),o.jsx("p",{className:"text-sm text-text-muted",children:"Cadastre pelo menos uma finalizadora para gerenciar pagamentos."})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(ye,{type:"button",variant:"outline",onClick:f,children:"Fechar"}),o.jsx(Q3,{to:"/finalizadoras",children:o.jsx(ye,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white",onClick:f,children:"Cadastrar Finalizadora"})})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(an,{className:"sr-only",children:[o.jsx(en,{children:"Carregando"}),o.jsx(hn,{children:"Carregando formas de pagamento"})]}),o.jsxs("div",{className:"p-8 flex flex-col items-center justify-center gap-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"}),o.jsx("p",{className:"text-sm text-text-muted",children:"Carregando formas de pagamento..."})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(an,{className:"relative pb-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(en,{children:"Registrar pagamento"}),We&&o.jsxs("span",{className:"inline-flex items-center gap-2 px-2.5 py-1 rounded-full border text-xs bg-blue-600/10 text-blue-400 border-blue-700/30",children:[o.jsxs("svg",{className:"w-3 h-3 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Salvando..."]})]}),o.jsx(hn,{children:"As alteraes so salvas automaticamente enquanto voc edita."})]}),o.jsxs(ye,{type:"button",variant:"outline",size:"sm",onClick:Ot,className:"flex-shrink-0 gap-2 w-full sm:w-auto mt-2 sm:mt-0",title:"Baixar relatrio como imagem",children:[o.jsx(po,{className:"w-4 h-4"}),o.jsx("span",{children:"Baixar Relatrio"})]})]})}),o.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[o.jsxs("div",{className:"sm:hidden space-y-2 max-w-md mx-auto",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded-lg bg-emerald-600/10 border border-emerald-500/30 min-w-0 relative group",children:[o.jsx("div",{className:"text-[10px] text-emerald-300/80 mb-1 truncate",children:"Total"}),H?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx($t,{type:"text",value:oe,onChange:Y=>L(co(Y.target.value)),className:"w-full h-6 text-xs text-center font-bold bg-emerald-950/50 border-emerald-400/50 text-emerald-300 px-1",placeholder:"0,00",autoFocus:!0,onKeyDown:Y=>{Y.key==="Enter"&&oe!==m?At():Y.key==="Escape"&&Wt()},onBlur:()=>{oe!==m?At():Wt()}}),oe!==m&&o.jsx("button",{onMouseDown:Y=>Y.preventDefault(),onClick:At,className:"p-0.5 rounded hover:bg-emerald-500/20 transition-colors flex-shrink-0",title:"Confirmar",children:o.jsx(My,{className:"w-3 h-3 text-emerald-400"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-sm font-bold text-emerald-400 truncate",children:co(m)||"R$ 0,00"}),o.jsx("button",{onClick:Ct,className:"absolute right-1 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-emerald-500/20 transition-colors",title:"Editar",children:o.jsx(Zc,{className:"w-3 h-3 text-emerald-400"})})]})]}),o.jsxs("div",{className:`p-2 rounded-lg border min-w-0 ${Qe.diff===0?"bg-emerald-600/10 border-emerald-500/30":Qe.diff>0?"bg-amber-600/10 border-amber-500/30":"bg-rose-600/10 border-rose-500/30"}`,children:[o.jsx("div",{className:`text-[10px] mb-1 truncate ${Qe.diff===0?"text-emerald-300/80":Qe.diff>0?"text-amber-300/80":"text-rose-300/80"}`,children:"Diferena"}),o.jsxs("div",{className:`text-sm font-bold truncate ${Qe.diff===0?"text-emerald-400":Qe.diff>0?"text-amber-400":"text-rose-400"}`,children:[Qe.diff>0?"+":"",co(String(Math.abs(Qe.diff).toFixed(2)))]})]})]}),o.jsxs("div",{className:"flex gap-1.5 text-xs justify-center",children:[o.jsxs("span",{className:"px-2.5 py-1.5 rounded bg-white/5 border border-white/10 whitespace-nowrap",children:[o.jsx("span",{className:"text-text-secondary",children:"Participantes:"})," ",o.jsx("strong",{children:Pt})]}),o.jsxs("span",{className:"px-2.5 py-1.5 rounded bg-white/5 border border-white/10 whitespace-nowrap",children:[o.jsx("span",{className:"text-text-secondary",children:"Atribudo:"})," ",o.jsxs("strong",{children:["R$ ",Qe.totalAssigned.toFixed(2)]})]}),o.jsxs("span",{className:"px-2.5 py-1.5 rounded bg-white/5 border border-white/10 whitespace-nowrap",children:[o.jsx("span",{className:"text-text-secondary",children:"Alvo:"})," ",o.jsxs("strong",{children:["R$ ",Qe.totalTarget.toFixed(2)]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(ye,{type:"button",size:"sm",className:"bg-sky-600 hover:bg-sky-500 text-white text-xs h-8 px-3",onClick:ft,disabled:!m||Pt===0,children:(()=>{const Y=Dc(m);if(Number.isFinite(Y)&&Pt>0){const ve=Y/Pt;return`Dividir (${co(String(ve.toFixed(2)))})`}return"Dividir"})()}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"border border-amber-500/30 text-amber-400 hover:bg-amber-500/10 text-xs h-8 px-3 flex-1",onClick:_t,disabled:Pt===0,children:"Aplicar taxas"}),o.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"border border-white/10 text-xs h-8 px-3 flex-1",onClick:mt,disabled:Pt===0,children:"Zerar"})]})]})]}),o.jsx("div",{className:"hidden sm:block p-4 rounded-lg border border-border bg-gradient-to-br from-surface-2 to-surface shadow-md",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-3 w-full",children:[o.jsxs("div",{className:"flex flex-row gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(vt,{className:"font-bold text-base text-white",children:"Valor total a receber"}),o.jsx("div",{className:"w-[180px] px-3 py-2 rounded-md bg-gradient-to-br from-emerald-600/20 to-emerald-700/20 border-2 border-emerald-500/40 shadow-lg flex items-center justify-center gap-2 relative group",children:H?o.jsxs(o.Fragment,{children:[o.jsx($t,{type:"text",value:oe,onChange:Y=>L(co(Y.target.value)),className:"w-full h-8 text-center text-lg font-bold bg-emerald-950/50 border-emerald-400/50 text-emerald-300",placeholder:"0,00",autoFocus:!0,onKeyDown:Y=>{Y.key==="Enter"&&oe!==m?At():Y.key==="Escape"&&Wt()},onBlur:()=>{oe!==m?At():Wt()}}),oe!==m&&o.jsx("button",{onMouseDown:Y=>Y.preventDefault(),onClick:At,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-emerald-500/20 transition-colors",title:"Confirmar (Enter)",children:o.jsx(My,{className:"w-4 h-4 text-emerald-400"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xl font-bold text-emerald-400",children:co(m)||"R$ 0,00"}),o.jsx("button",{onClick:Ct,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-emerald-500/20 transition-colors opacity-0 group-hover:opacity-100",title:"Editar valor total",children:o.jsx(Zc,{className:"w-4 h-4 text-emerald-400"})})]})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(vt,{className:"font-bold text-base text-white",children:"Diferena"}),o.jsx("div",{className:`w-[180px] px-3 py-2 rounded-md border-2 shadow-lg flex items-center justify-center ${Qe.diff===0?"bg-gradient-to-br from-emerald-600/20 to-emerald-700/20 border-emerald-500/40":Qe.diff>0?"bg-gradient-to-br from-amber-600/20 to-amber-700/20 border-amber-500/40":"bg-gradient-to-br from-rose-600/20 to-rose-700/20 border-rose-500/40"}`,children:o.jsxs("span",{className:`text-xl font-bold ${Qe.diff===0?"text-emerald-400":Qe.diff>0?"text-amber-400":"text-rose-400"}`,children:[Qe.diff>0?"+":"",co(String(Math.abs(Qe.diff).toFixed(2)))]})})]})]}),o.jsxs("div",{className:"ml-auto flex flex-col gap-3 items-end",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[o.jsx("span",{className:"text-text-secondary",children:"Participantes:"}),o.jsx("strong",{children:Pt})]}),o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[o.jsx("span",{className:"text-text-secondary",children:"Atribudo:"}),o.jsxs("strong",{children:["R$ ",Qe.totalAssigned.toFixed(2)]})]}),o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[o.jsx("span",{className:"text-text-secondary",children:"Alvo:"}),o.jsxs("strong",{children:["R$ ",Qe.totalTarget.toFixed(2)]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsx(ye,{type:"button",variant:"secondary",size:"sm",className:"bg-sky-600 hover:bg-sky-500 text-white flex-shrink-0",onClick:ft,disabled:!m||Pt===0,children:(()=>{const Y=Dc(m);if(Number.isFinite(Y)&&Pt>0){const ve=Y/Pt;return o.jsxs(o.Fragment,{children:["Dividir igualmente (",co(String(ve.toFixed(2)))," cada)",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-sky-700/50 rounded border border-sky-500/30",children:"F8"})]})}return o.jsxs(o.Fragment,{children:["Dividir igualmente",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-sky-700/50 rounded border border-sky-500/30",children:"F8"})]})})()}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{type:"button",variant:"ghost",size:"sm",className:"border border-amber-500/30 text-amber-400 hover:bg-amber-500/10 flex-1 sm:flex-initial whitespace-nowrap",onClick:_t,disabled:Pt===0,children:["Aplicar taxas",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-amber-700/50 rounded border border-amber-500/30",children:"F9"})]}),o.jsxs(ye,{type:"button",variant:"ghost",size:"sm",className:"border border-white/10 flex-1 sm:flex-initial",onClick:mt,disabled:Pt===0,children:["Zerar",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-white/10 rounded border border-white/20",children:"F10"})]})]})]})]})]})}),(r.selectedClients||[]).length===0?o.jsx("div",{className:"text-xs text-text-muted italic",children:'Nenhum participante neste agendamento. Adicione participantes no campo "Clientes" do modal principal.'}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs("div",{className:"relative flex-1 min-w-0",children:[o.jsx($t,{ref:K,type:"text",placeholder:"Buscar participante...",value:j,onChange:Y=>N(Y.target.value),className:"pr-16"}),o.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-amber-400 hover:text-amber-300",onClick:()=>{N(""),K.current?.focus()},children:"limpar"})]}),o.jsxs(ye,{type:"button",size:"sm",className:"bg-amber-500 hover:bg-amber-400 text-black shadow-md flex-shrink-0",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),w(2e3),W(!0)},children:[o.jsx("span",{className:"hidden sm:inline",children:"Adicionar participante +"}),o.jsx("span",{className:"sm:hidden",children:"Participante +"})]})]}),k?.type==="pending"&&o.jsxs("div",{role:"alert",className:"mb-2 rounded-md border border-amber-600/40 bg-amber-500/10 px-3 py-2 text-amber-200 flex items-start gap-3",children:[o.jsx(sp,{className:"w-4 h-4 text-amber-300 mt-0.5"}),o.jsxs("div",{className:"flex-1 text-sm",children:[o.jsx("strong",{children:"Ateno:"})," Existem ",o.jsx("strong",{children:k.count})," participante(s) com status ",o.jsx("strong",{children:"Pendente"}),"."]}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-amber-500/20 hover:bg-amber-500/30 border border-amber-600/40",onClick:()=>M(null),children:"Entendi"})]}),o.jsx("div",{className:"border border-border rounded-md overflow-hidden",children:o.jsx("div",{className:"divide-y divide-border max-h-[50vh] overflow-y-scroll",children:(()=>{const Y=j.trim().toLowerCase(),ve=P||[],$e=(V||[]).map((Le,it)=>({...Le,_originalIndex:it})).filter(Le=>!ve.includes(Le._originalIndex)).filter(Le=>!Y||String(Le?.nome||"").toLowerCase().includes(Y));return $e.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Nenhum participante com esse nome"}):$e.map(Le=>{const it=`participant-${Le._originalIndex}`,Ye=Le._originalIndex,Ge=U.includes(Ye);return o.jsxs("div",{className:`p-2 sm:p-3 border-b last:border-b-0 transition-all duration-500 ease-out ${Ge?"bg-white/10":""}`,children:[o.jsxs("div",{className:"sm:hidden space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[Le.codigo!==null&&Le.codigo!==void 0&&o.jsxs("span",{className:`text-xs font-bold rounded px-1.5 py-0.5 shrink-0 ${Le.status_pagamento==="Pago"?"text-emerald-400 bg-emerald-600/20 border border-emerald-700/40":"text-amber-400 bg-amber-600/20 border border-amber-700/40"}`,children:["#",Le.codigo]}),Qt(Le.cliente_id)?o.jsx("input",{type:"text",value:Le.nome||"",onChange:Xe=>ne(Ye,Xe.target.value),onBlur:async()=>{try{me.current&&clearTimeout(me.current),await wt({autoSave:!0})}catch(Xe){console.error("[PaymentModal] Erro ao salvar ao sair do nome consumidor (compacto):",Xe)}},placeholder:"Nome do cliente...",className:"font-medium text-sm bg-black/40 text-white placeholder:text-white/50 border border-white/15 rounded px-2 py-0.5 focus:border-white/30 focus:outline-none focus:ring-1 focus:ring-white/20 w-full min-w-0",title:"Editar nome do Cliente Consumidor (histrico do agendamento)"}):o.jsx("span",{className:"font-medium text-sm truncate",children:Le.nome})]}),o.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[o.jsx("button",{type:"button",className:"p-1 text-text-secondary hover:text-brand transition-colors",onClick:()=>ue(Ye,Le.nome),title:"Trocar",children:o.jsx(Zc,{className:"w-4 h-4"})}),o.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400 h-6 w-6 p-0",onClick:()=>{A(Xe=>[...Xe,Ye])},children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx(vt,{className:"text-[10px] text-text-muted",children:"Mtodo"}),o.jsxs(Yn,{value:String(Le.finalizadora_id||""),onValueChange:Xe=>{Z(ht=>{const st=[...ht];if(Ye>=0&&Ye<st.length){const lr=y.find(Zt=>String(Zt.id)===String(Xe)),rr=Number(lr?.taxa_percentual||0)>0;st[Ye]={...st[Ye],finalizadora_id:Xe,aplicar_taxa:rr?st[Ye].aplicar_taxa??!0:!1}}return st})},children:[o.jsx(Hn,{className:"h-8 text-xs",children:o.jsx(Xn,{placeholder:"Mtodo"})}),o.jsx(Gn,{children:y.map(Xe=>o.jsx(qt,{value:String(Xe.id),children:Xe.nome||Xe.tipo||"Outros"},Xe.id))})]}),(()=>{const Xe=y.find(rr=>String(rr.id)===String(Le.finalizadora_id)),ht=Number(Xe?.taxa_percentual||0);if(ht<=0)return o.jsx("div",{className:"h-4 mt-1"});const st=Dc(Le.valor_cota),lr=Number.isFinite(st)&&st>0;return o.jsxs("label",{className:`flex items-center gap-1.5 mt-1 text-[11px] ${lr?"cursor-pointer":"cursor-not-allowed opacity-50"}`,title:lr?`Taxa de ${ht.toFixed(2)}%`:"Informe o valor primeiro",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:!!Le.aplicar_taxa,disabled:!lr,onChange:rr=>{if(!lr){l({title:"Valor necessrio",description:"Informe o valor antes de aplicar a taxa.",variant:"destructive"});return}Z(Zt=>{const fn=[...Zt];if(Ye>=0&&Ye<fn.length){const Yr=rr.target.checked;let Bn=st;Yr?Bn=st*(1+ht/100):Bn=st/(1+ht/100),fn[Ye]={...fn[Ye],aplicar_taxa:Yr,valor_cota:co(Bn.toFixed(2))}}return fn})},style:{accentColor:"#f59e0b"}}),o.jsxs("span",{className:"text-amber-500 font-medium",children:["Taxa (",ht.toFixed(2),"%)"]})]})})()]}),o.jsxs("div",{className:"isolate",children:[o.jsx(vt,{className:"text-[10px] text-text-muted",children:"Valor"}),o.jsx($t,{type:"text",inputMode:"decimal",placeholder:"R$ 0,00",value:co(Le.valor_cota),onChange:Xe=>{const ht=co(Xe.target.value),st=Dc(ht),lr=Number.isFinite(st)&&st>0?"Pago":"Pendente";Z(rr=>{const Zt=[...rr];return Ye>=0&&Ye<Zt.length&&(Zt[Ye]={...Zt[Ye],valor_cota:ht,status_pagamento:lr,aplicar_taxa:ht===""||st<=0?!1:Zt[Ye].aplicar_taxa}),Zt})},className:"h-8 text-xs text-text-primary placeholder:text-slate-400 bg-surface-2 border-border hover:border-border-hover focus:border-brand focus:ring-2 focus:ring-brand/20"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("span",{className:`inline-flex items-center justify-center px-3 py-0.5 rounded text-xs font-medium border ${Le.status_pagamento==="Pago"?"bg-emerald-600/20 text-emerald-400 border-emerald-700/40":"bg-amber-600/20 text-amber-400 border-amber-700/40"}`,children:Le.status_pagamento==="Pago"?"Pago":"Pendente"})})]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-2",children:[Le.codigo!==null&&Le.codigo!==void 0&&o.jsxs("span",{className:`text-sm font-bold rounded-md px-2.5 py-1 shadow-sm ${Le.status_pagamento==="Pago"?"text-emerald-400 bg-emerald-600/20 border border-emerald-700/40":"text-amber-400 bg-amber-600/20 border border-amber-700/40"}`,children:["#",Le.codigo]}),Qt(Le.cliente_id)?o.jsx("input",{type:"text",value:Le.nome||"",onChange:Xe=>ne(Ye,Xe.target.value),onBlur:async()=>{try{me.current&&clearTimeout(me.current),await wt({autoSave:!0})}catch(Xe){console.error("[PaymentModal] Erro ao salvar ao sair do nome consumidor (normal):",Xe)}},placeholder:"Nome do cliente...",className:"font-medium text-base bg-black/40 text-white placeholder:text-white/50 border border-white/15 rounded-md px-3 py-1.5 focus:border-white/30 focus:outline-none focus:ring-2 focus:ring-white/20 min-w-[200px] max-w-[300px]",title:"Editar nome do Cliente Consumidor (histrico do agendamento)"}):o.jsx("span",{className:"font-medium text-base",children:Le.nome}),o.jsx("button",{type:"button",className:"p-1 text-text-secondary hover:text-brand transition-colors",onClick:()=>ue(Ye,Le.nome),title:"Trocar participante",children:o.jsx(Zc,{className:"w-5 h-5"})})]})}),o.jsxs("div",{className:"flex items-center gap-2 min-w-[240px] isolate",children:[o.jsxs(Yn,{value:String(Le.finalizadora_id||""),onValueChange:Xe=>{Z(ht=>{const st=[...ht];if(Ye>=0&&Ye<st.length){const lr=y.find(Zt=>String(Zt.id)===String(Xe)),rr=Number(lr?.taxa_percentual||0)>0;st[Ye]={...st[Ye],finalizadora_id:Xe,aplicar_taxa:rr?st[Ye].aplicar_taxa??!0:!1}}return st})},children:[o.jsx(Hn,{className:"w-[140px] flex-shrink-0",children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsx(Gn,{children:y.map(Xe=>o.jsx(qt,{value:String(Xe.id),children:Xe.nome||Xe.tipo||"Outros"},Xe.id))})]}),o.jsx("div",{className:"flex-1 min-w-0 isolate",children:(()=>{const Xe=y.find(rr=>String(rr.id)===String(Le.finalizadora_id)),ht=Number(Xe?.taxa_percentual||0);if(ht<=0)return o.jsx("div",{className:"h-5"});const st=Dc(Le.valor_cota),lr=st>0;return o.jsxs("label",{className:`flex items-center gap-1.5 text-xs transition-colors ${lr?"cursor-pointer hover:text-text-primary":"cursor-not-allowed opacity-50"}`,title:lr?`Taxa de ${ht.toFixed(2)}%`:"Informe o valor primeiro",children:[o.jsx("input",{type:"checkbox",checked:!!Le.aplicar_taxa,disabled:!lr,onChange:rr=>{if(!lr){l({title:"Valor necessrio",description:"Informe o valor antes de aplicar a taxa.",variant:"destructive"});return}Z(Zt=>{const fn=[...Zt];if(Ye>=0&&Ye<fn.length){const Yr=rr.target.checked;let Bn=st;Yr?Bn=st*(1+ht/100):Bn=st/(1+ht/100),fn[Ye]={...fn[Ye],aplicar_taxa:Yr,valor_cota:co(Bn.toFixed(2))}}return fn})},className:`w-4 h-4 rounded border-2 border-amber-500 checked:bg-amber-500 checked:border-amber-500 focus:ring-2 focus:ring-amber-500 focus:ring-offset-1 ${lr?"cursor-pointer":"cursor-not-allowed"}`,style:{accentColor:"#f59e0b"}}),o.jsxs("span",{className:"whitespace-nowrap text-amber-500 font-medium",children:["Taxa (",ht.toFixed(2),"%)"]})]})})()})]}),o.jsx("div",{className:"isolate",children:o.jsx($t,{type:"text",inputMode:"decimal",placeholder:"R$ 0,00",value:co(Le.valor_cota),onChange:Xe=>{const ht=co(Xe.target.value),st=Dc(ht),lr=Number.isFinite(st)&&st>0?"Pago":"Pendente";Z(rr=>{const Zt=[...rr];return Ye>=0&&Ye<Zt.length&&(Zt[Ye]={...Zt[Ye],valor_cota:ht,status_pagamento:lr,aplicar_taxa:ht===""||st<=0?!1:Zt[Ye].aplicar_taxa}),Zt})},className:"w-28 text-text-primary placeholder:text-slate-400 bg-surface-2 border-border hover:border-border-hover focus:border-brand focus:ring-2 focus:ring-brand/20"})}),o.jsx("span",{className:`inline-flex items-center justify-center w-[90px] px-3 py-1 rounded text-sm font-medium border ${Le.status_pagamento==="Pago"?"bg-emerald-600/20 text-emerald-400 border-emerald-700/40":"bg-amber-600/20 text-amber-400 border-amber-700/40"}`,children:Le.status_pagamento==="Pago"?"Pago":"Pendente"}),o.jsx(ye,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400",onClick:()=>{A(Xe=>[...Xe,Ye])},children:"Remover"})]})]},it)})})()})})]})]}),o.jsx($n,{className:"gap-2",children:o.jsxs(ye,{type:"button",variant:"ghost",className:"border border-white/10",onClick:async()=>{console.log(" [Auto-save Payments] Salvando ao fechar modal...");try{me.current&&clearTimeout(me.current),await wt({autoSave:!0}),console.log(" [Auto-save Payments] Salvo ao fechar!")}catch(Y){console.error(" [Auto-save Payments] Erro ao salvar ao fechar:",Y)}f()},children:["Fechar",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-white/10 rounded border border-white/20",children:"Esc"})]})})]})})}),o.jsxs("div",{ref:qe,style:{position:"fixed",left:"-9999px",top:"-9999px",width:"1000px",padding:"60px",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:[o.jsx("div",{style:{marginBottom:"50px",textAlign:"center",borderBottom:"5px solid #4ade80",paddingBottom:"30px"},children:o.jsx("h1",{style:{fontSize:"48px",fontWeight:"bold",color:"#4ade80",margin:0,letterSpacing:"2px"},children:"RELATRIO DE PAGAMENTOS"})}),o.jsx("div",{style:{marginBottom:"45px",backgroundColor:"#2a2a2a",padding:"35px",borderRadius:"12px",borderLeft:"6px solid #3b82f6"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",fontSize:"20px"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:" Data:"}),o.jsx("strong",{style:{marginLeft:"15px",fontSize:"24px"},children:h?.start?new Date(h.start).toLocaleDateString("pt-BR"):""})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:" Horrio:"}),o.jsx("strong",{style:{marginLeft:"15px",fontSize:"24px"},children:h?.start&&h?.end?`${new Date(h.start).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})} - ${new Date(h.end).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}`:""})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:" Quadra:"}),o.jsx("strong",{style:{marginLeft:"15px",fontSize:"24px"},children:h?.court||""})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:" Modalidade:"}),o.jsx("strong",{style:{marginLeft:"15px",fontSize:"24px"},children:h?.modality||""})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:" Cdigo:"}),o.jsxs("strong",{style:{marginLeft:"15px",fontSize:"24px"},children:["#",h?.code||""]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:" Valor Total:"}),o.jsxs("strong",{style:{marginLeft:"15px",color:"#4ade80",fontSize:"26px"},children:["R$ ",co(m||0)]})]})]})}),o.jsxs("div",{style:{marginBottom:"45px"},children:[o.jsx("h2",{style:{fontSize:"32px",fontWeight:"bold",color:"#4ade80",marginBottom:"25px",borderBottom:"4px solid #374151",paddingBottom:"15px"},children:"PARTICIPANTES"}),(V||[]).filter((Y,ve)=>!(P||[]).includes(ve)).map((Y,ve)=>o.jsxs("div",{style:{marginBottom:"30px",backgroundColor:"#2a2a2a",padding:"28px",borderRadius:"12px",borderLeft:Y.status_pagamento==="Pago"?"6px solid #4ade80":"6px solid #fbbf24"},children:[o.jsxs("div",{style:{fontSize:"26px",fontWeight:"bold",marginBottom:"15px",color:Y.status_pagamento==="Pago"?"#4ade80":"#fbbf24"},children:[ve+1,". ",Y.nome||"Sem nome"]}),o.jsxs("div",{style:{fontSize:"20px",color:"#e5e7eb",lineHeight:"2.2"},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af"},children:"Cdigo:"})," ",o.jsx("strong",{style:{marginLeft:"12px",fontSize:"22px"},children:Y.codigo||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af"},children:"Valor:"})," ",o.jsxs("strong",{style:{marginLeft:"12px",color:"#4ade80",fontSize:"22px"},children:["R$ ",co(Y.valor_cota||0)]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af"},children:"Status:"})," ",o.jsxs("strong",{style:{marginLeft:"12px",fontSize:"22px"},children:[Y.status_pagamento==="Pago"?"":""," ",Y.status_pagamento||"Pendente"]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af"},children:"Finalizadora:"})," ",o.jsx("strong",{style:{marginLeft:"12px",fontSize:"22px"},children:y.find(Ve=>String(Ve.id)===String(Y.finalizadora_id))?.nome||"No definido"})]}),Y.pago_em&&o.jsxs("div",{children:[o.jsx("span",{style:{color:"#9ca3af"},children:"Pago em:"})," ",o.jsx("strong",{style:{marginLeft:"12px",fontSize:"22px"},children:new Date(Y.pago_em).toLocaleString("pt-BR")})]})]})]},ve))]}),o.jsxs("div",{style:{marginTop:"45px",textAlign:"center",fontSize:"18px",color:"#9ca3af",borderTop:"4px solid #374151",paddingTop:"25px"},children:["Gerado em: ",new Date().toLocaleString("pt-BR")]})]}),o.jsx(cn,{open:B,onOpenChange:Y=>{Y||($([]),R("")),W(Y)},children:o.jsxs(on,{className:"sm:max-w-[500px]",onInteractOutside:Y=>{Y.preventDefault(),w(2e3),W(!1)},children:[o.jsxs(an,{children:[o.jsx(en,{children:"Adicionar Participante"}),o.jsx(hn,{children:"Selecione um cliente para adicionar aos pagamentos."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar por cdigo ou nome...",value:O,onChange:Y=>R(Y.target.value),className:"pl-10 pr-10"}),O&&o.jsx("button",{type:"button",onClick:()=>R(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text",children:o.jsx(Vu,{className:"h-4 w-4"})})]}),o.jsx(ye,{type:"button",size:"sm",className:"bg-amber-500 hover:bg-amber-400 text-black shadow-md",onClick:()=>{i&&(w(15e3),i(()=>{W(!0)}),W(!1),R(""))},children:"+Novo"})]}),o.jsx("div",{className:"border rounded-md max-h-[400px] overflow-y-auto",children:(()=>{const Y=O.toLowerCase().trim(),ve=(a||[]).filter(Ye=>{if(!Y)return!0;const Ge=String(Ye.codigo||""),Xe=(Ye.nome||"").toLowerCase();return Ge.includes(Y)||Xe.includes(Y)}),Ve=ve.find(Ye=>Ye?.is_consumidor_final===!0),Le=ve.filter(Ye=>Ye?.is_consumidor_final!==!0).sort((Ye,Ge)=>{const Xe=Ye.codigo||0,ht=Ge.codigo||0;return Xe-ht}),it=Ve?[Ve,...Le]:Le;return it.length===0?o.jsx("div",{className:"p-8 text-center text-text-muted",children:"Nenhum cliente encontrado."}):it.map(Ye=>{const Ge=Ye?.is_consumidor_final===!0,Xe=F.filter(ht=>ht.id===Ye.id).length;return o.jsxs("div",{role:"button",tabIndex:0,className:`w-full px-4 py-3 text-left transition-all border-b border-border last:border-0 flex items-center gap-3 cursor-pointer ${Ge?"bg-gradient-to-r from-amber-500/5 to-transparent hover:from-amber-500/10 border-l-2 border-l-amber-500/40":Xe>0?"bg-emerald-600/20 hover:bg-emerald-600/30":"hover:bg-surface-2"}`,onClick:ht=>{ht.preventDefault(),ht.stopPropagation();const st={...Ye,timestamp:Date.now()};$(lr=>[...lr,st])},onKeyDown:ht=>{if(ht.key==="Enter"||ht.key===" "){ht.preventDefault();const st={...Ye,timestamp:Date.now()};$(lr=>[...lr,st])}},children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[(()=>Ye.codigo!==null&&Ye.codigo!==void 0?o.jsxs("span",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full font-bold text-sm transition-colors ${Ge?"bg-amber-500/15 text-amber-300/90 ring-1 ring-amber-500/20":"bg-emerald-600/20 text-emerald-400"}`,children:["#",Ye.codigo]}):null)(),o.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[o.jsx("span",{className:`font-medium ${Ge?"text-amber-100/90":""}`,children:Ye.nome}),Ge&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-amber-400/70 font-medium",children:[o.jsx("svg",{className:"w-3 h-3 opacity-60",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Cliente Padro"]})]})]}),Xe>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-7 h-7 rounded-full bg-rose-600 hover:bg-rose-500 text-white text-base font-bold transition-colors",onClick:ht=>{ht.preventDefault(),ht.stopPropagation(),$(st=>{const lr=st.findIndex(rr=>rr.id===Ye.id);if(lr!==-1){const rr=[...st];return rr.splice(lr,1),rr}return st})},children:"-"}),o.jsx("span",{className:"inline-flex items-center justify-center min-w-[32px] h-7 px-2 rounded-full bg-sky-600 text-white text-base font-bold",children:Xe}),o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-7 h-7 rounded-full bg-emerald-600 hover:bg-emerald-500 text-white text-base font-bold transition-colors",onClick:ht=>{ht.preventDefault(),ht.stopPropagation();const st={...Ye,timestamp:Date.now()};$(lr=>[...lr,st])},children:"+"})]})]},Ye.id)})})()})]}),o.jsxs($n,{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-sm text-text-muted",children:F.length>0&&o.jsxs("span",{className:"font-medium",children:[F.length," ",F.length===1?"participante selecionado":"participantes selecionados"]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{type:"button",variant:"ghost",className:"border border-border",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),w(1e3),W(!1),R(""),$([])},children:["Cancelar",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-white/10 rounded border border-white/20",children:"Esc"})]}),o.jsxs(ye,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white",disabled:F.length===0,onClick:Y=>{console.log("[AddParticipant] Boto Salvar clicado"),Y.preventDefault(),Y.stopPropagation(),console.log("[AddParticipant] Protegendo modal de pagamentos (3000ms)"),w(3e3),console.log("[AddParticipant] Adicionando participantes:",F.length);const ve=F.map(Ve=>({cliente_id:Ve.id,nome:Ve.nome,codigo:Ve.codigo,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:(()=>{const $e=bt();return $e?.id?String($e.id):null})(),aplicar_taxa:(()=>{const $e=bt();return Number($e?.taxa_percentual||0)>0})()}));Z(Ve=>{const $e=Ve.length,Le=ve.map((it,Ye)=>$e+Ye);return J(Le),setTimeout(()=>{J([])},1e3),[...Ve,...ve]}),console.log("[AddParticipant] Fechando modal de adicionar participante"),W(!1),R(""),$([]),console.log("[AddParticipant] Concludo")},children:["Confirmar (",F.length,")",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-emerald-700/50 rounded border border-emerald-500/30",children:""})]})]})]})]})})]})}function uGe({form:e,setForm:t,localCustomers:r}){Qa(),Wi();const{isEditParticipantModalOpen:n,closeEditParticipantModal:a,editParticipantData:i,participantsForm:s,setParticipantsForm:l,payMethods:c,protectPaymentModal:u,onParticipantReplacedRef:d}=B_(),[f,h]=v.useState(""),[m,g]=v.useState(!1),p=N=>{const P=i.participantId;if(s[P]?.cliente_id===N.id)return;console.log(" [EditParticipantModal] Substituindo participante:",{de:i.participantName,para:N.nome,indice:P,id_para:N.id});const A=s[P];if(l.updateLocal&&l.getLocal){const k=l.getLocal();if(P>=0&&P<k.length){const M={cliente_id:N.id,nome:N.nome,codigo:N.codigo,valor_cota:A?.valor_cota||"",status_pagamento:A?.status_pagamento||"Pendente",finalizadora_id:A?.finalizadora_id||(c[0]?.id?String(c[0].id):null),aplicar_taxa:A?.aplicar_taxa||!1},E=[...k];E[P]=M,l.updateLocal(E)}}else l(k=>{if(P<0||P>=k.length)return k;const M={cliente_id:N.id,nome:N.nome,codigo:N.codigo,valor_cota:A?.valor_cota||"",status_pagamento:A?.status_pagamento||"Pendente",finalizadora_id:A?.finalizadora_id||(c[0]?.id?String(c[0].id):null),aplicar_taxa:A?.aplicar_taxa||!1},E=[...k];return E[P]=M,E});u(3e3),a(),h(""),d?.current&&d.current(P)};if(v.useEffect(()=>{n&&(h(""),g(!1))},[n]),!n)return null;const x=f.trim().toLowerCase(),y=(r||[]).filter(N=>x?String(N?.nome||"").toLowerCase().includes(x):!0),b=y.find(N=>N?.is_consumidor_final===!0),_=y.filter(N=>N?.is_consumidor_final!==!0).sort((N,P)=>{const A=Number(N?.codigo),k=Number(P?.codigo);return Number.isFinite(A)&&Number.isFinite(k)?A-k:String(N?.nome||"").localeCompare(String(P?.nome||""))}),j=b?[b,..._]:_;return o.jsx(cn,{open:n,onOpenChange:N=>{console.log("[EditParticipantModal] onOpenChange:",N),N||(console.log("[EditParticipantModal] Protegendo modal de pagamentos"),u(2e3),a(),h(""))},modal:!0,children:o.jsxs(on,{className:"sm:max-w-[500px]",onPointerDownOutside:N=>{console.log(" [EditParticipantModal] onPointerDownOutside - prevenindo"),N.preventDefault(),N.stopPropagation()},onInteractOutside:N=>{console.log(" [EditParticipantModal] onInteractOutside - prevenindo"),N.preventDefault(),N.stopPropagation(),u(2e3)},children:[o.jsxs(an,{children:[o.jsx(en,{children:"Trocar Participante"}),o.jsxs(hn,{children:["Substituindo: ",o.jsx("strong",{children:i.participantName})]})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"edit-participant-search",children:"Buscar cliente"}),o.jsx($t,{id:"edit-participant-search",type:"text",placeholder:"Digite o nome do cliente...",value:f,onChange:N=>h(N.target.value),className:"mt-1",autoFocus:!0})]}),o.jsx("div",{className:"border border-border rounded-md max-h-[300px] overflow-y-auto",children:m?o.jsx("div",{className:"p-4 text-center text-sm text-text-muted",children:"Carregando clientes..."}):j.length===0?o.jsx("div",{className:"p-4 text-center text-sm text-text-muted",children:x?"Nenhum cliente encontrado":"Nenhum cliente cadastrado"}):j.map(N=>{const P=i.participantId,A=s[P]?.cliente_id===N.id,k=N?.is_consumidor_final===!0;return o.jsxs("button",{type:"button",className:kt("w-full px-4 py-3 text-left transition-all","border-b border-border last:border-b-0","flex items-center gap-3",A&&"bg-brand/10 cursor-not-allowed opacity-60",!A&&k&&"bg-gradient-to-r from-amber-500/5 to-transparent hover:from-amber-500/10 border-l-2 border-l-amber-500/40",!A&&!k&&"hover:bg-surface-2"),disabled:A,onClick:M=>{M.preventDefault(),M.stopPropagation(),console.log("[EditParticipantModal] Cliente selecionado - protegendo modal"),u(2e3),p(N)},children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[N.codigo!==null&&N.codigo!==void 0&&o.jsxs("span",{className:kt("inline-flex items-center justify-center w-10 h-10 rounded-full font-bold text-sm transition-colors",k&&"bg-amber-500/15 text-amber-300/90 ring-1 ring-amber-500/20",!k&&"bg-emerald-600/20 text-emerald-400"),children:["#",N.codigo]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[o.jsx("span",{className:kt("font-medium",k&&"text-amber-100/90"),children:N.nome}),k&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-amber-400/70 font-medium",children:[o.jsx("svg",{className:"w-3 h-3 opacity-60",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Cliente Padro"]})]})]}),A&&o.jsx("span",{className:"text-xs text-brand font-medium",children:"Atual"})]},N.id)})})]}),o.jsx($n,{children:o.jsx(ye,{type:"button",variant:"ghost",className:"border border-white/10",onClick:N=>{console.log(" [EditParticipantModal] ========== BOTO CANCELAR CLICADO =========="),console.log(" [EditParticipantModal] preventDefault()"),N.preventDefault(),console.log(" [EditParticipantModal] stopPropagation()"),N.stopPropagation(),console.log(" [EditParticipantModal] Protegendo modal de pagamentos (2000ms)"),u(2e3),console.log(" [EditParticipantModal] Fechando modal de editar participante"),a(),console.log(" [EditParticipantModal] Limpando busca"),h(""),console.log(" [EditParticipantModal] ========== CANCELAR CONCLUDO ==========")},children:"Cancelar"})})]})})}const Qn=30,cg=e=>{const t=String(e??"").replace(/\D/g,"");if(!t)return"";const r=(Number(t)/100).toFixed(2),[n,a]=r.split(".");return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${a}`},bd=e=>{if(e==null||e==="")return NaN;const t=String(e).replace(/\./g,"").replace(",","."),r=parseFloat(t);return Number.isFinite(r)?r:NaN};function lz(e){const t=String(e||"").trim().split(/\s+/).filter(Boolean);return t.length===0?"":t.length===1?t[0]:`${t[0]} ${t[1]}`}const vs=56,dGe=6,yT=6,Ote=24;Array.from({length:(Ote-yT)*(60/Qn)},(e,t)=>{const r=yT*60+t*Qn,n=Math.floor(r/60),a=r%60;return{time:`${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`,isHourMark:a===0}});const sm=["Futebol","Beach Tennis","Futevlei","Treino"],Us={scheduled:{label:"Agendado",accent:"bg-[#3B82F6]",text:"text-[#3B82F6]",border:"border-[#3B82F6]",hex:"#3B82F6",icon:Uu},confirmed:{label:"Confirmado",accent:"bg-[#22C55E]",text:"text-[#22C55E]",border:"border-[#22C55E]",hex:"#22C55E",icon:Cs},in_progress:{label:"Em andamento",accent:"bg-[#FACC15]",text:"text-[#FACC15]",border:"border-[#FACC15]",hex:"#FACC15",icon:_W},finished:{label:"Finalizado",accent:"bg-[#6B7280]",text:"text-[#6B7280]",border:"border-[#6B7280]",hex:"#6B7280",icon:Qce},canceled:{label:"Cancelado",accent:"bg-[#EF4444]",text:"text-[#EF4444]",border:"border-[#EF4444]",hex:"#EF4444",icon:j_},absent:{label:"Ausente",accent:"bg-[#F97316]",text:"text-[#F97316]",border:"border-[#F97316]",hex:"#F97316",icon:NW}},fGe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},cz={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},uz=e=>{const t=Math.floor(e/60),r=e%60;return`${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`};function hGe(){const{toast:e}=Qa(),{loadAlerts:t}=iN(),r=Ko(),{isPaymentModalOpen:n,openPaymentModal:a,closePaymentModal:i,isEditParticipantModalOpen:s,openEditParticipantModal:l,closeEditParticipantModal:c,editParticipantData:u,editingBooking:d,setEditingBooking:f,participantsForm:h,setParticipantsForm:m,paymentTotal:g,setPaymentTotal:p,payMethods:x,setPayMethods:y}=B_(),b=v.useMemo(()=>{try{return typeof window<"u"&&localStorage.getItem("debug:agenda")==="1"}catch{return!1}},[]),w=v.useCallback((...xe)=>{if(b)try{console.log("[AgendaDbg]",...xe)}catch{}},[b]);v.useEffect(()=>{const xe=console.log,je=console.info,Ie=console.debug,De=console.warn,Re=console.error,nt=Q=>{const Ce=String(Q||"");return Ce.startsWith("[AgendaDbg]")||!1||Ce.startsWith("[PulseDump]")||Ce.startsWith("[Clientes:load]")||Ce.startsWith("[AgendaSettings]")||Ce.startsWith("[Auto]")||Ce.startsWith("[DEBUG-PaymentModal]")||Ce.startsWith(" EditGuard")};return console.log=(...Q)=>{try{if(nt(Q[0]))return}catch{}return xe(...Q)},console.info=(...Q)=>{try{if(nt(Q[0]))return}catch{}return je(...Q)},console.debug=(...Q)=>{try{if(nt(Q[0]))return}catch{}return Ie(...Q)},console.warn=(...Q)=>{try{if(nt(Q[0]))return}catch{}return De(...Q)},console.error=(...Q)=>{try{if(nt(Q[0]))return}catch{}return Re(...Q)},()=>{console.log=xe,console.info=je,console.debug=Ie,console.warn=De,console.error=Re}},[]);const _=v.useRef({active:!1,tag:"",start:0,timer:null,events:[]}),j=v.useCallback((xe,je)=>{if(b)try{const Ie=Date.now(),De=_.current&&_.current.active?Ie-(_.current.start||Ie):0;_.current.events.push({t:Ie,ms:De,event:xe,data:je})}catch{}},[b]),N=v.useCallback(xe=>{if(b){try{if(!_.current.active)return;const{tag:je,start:Ie,events:De}=_.current,Re=`[PulseDump] tag=${je} dur=${Date.now()-Ie}ms reason=${xe}`;console.groupCollapsed(Re);for(const nt of De)console.log(` +${String(nt.ms).padStart(4," ")}ms`,nt.event,nt.data||{});console.groupEnd()}catch{}try{_.current.timer&&clearTimeout(_.current.timer)}catch{}_.current={active:!1,tag:"",start:0,timer:null,events:[]}}},[b]),P=v.useCallback((xe,je=5e3)=>{if(b){try{_.current.timer&&clearTimeout(_.current.timer)}catch{}_.current={active:!0,tag:xe,start:Date.now(),timer:null,events:[]},_.current.timer=setTimeout(()=>N("timeout"),je),w("PulseStart",{tag:xe,timeoutMs:je})}},[b,N,w]),{userProfile:A,authReady:k,company:M}=Wi(),[E,I]=dW(),[O,R]=v.useState(new Date);v.useEffect(()=>{const xe=E.get("date");if(xe)try{const je=new Date(xe+"T00:00:00");isNaN(je.getTime())||(R(je),E.delete("date"),I(E,{replace:!0}))}catch(je){console.error("[AgendaPage] Erro ao parsear date da URL:",je)}},[E,I]);const[B,W]=v.useState([]),[F,$]=v.useState(!1),[H,ce]=v.useState(!1),[oe,L]=v.useState(4),[U,J]=v.useState(!1),[V,Z]=v.useState(!1),K=d,he=f,[te,me]=v.useState({}),Ee=v.useRef(0),Se=v.useRef(""),We=v.useRef(!1);v.useEffect(()=>{We.current=F,w("Modal state change:",{isModalOpen:F}),j("modal",{open:F})},[F,w]);const be=v.useRef("init"),ne=v.useRef(0),Qt=v.useRef(!1),bt=v.useRef(0),Pt=v.useRef(!1),Qe=v.useRef(0),[ft,mt]=v.useState(!1),_t=v.useRef(0),ue=v.useRef(!1),Ct=v.useRef(0),At=v.useCallback((xe=800)=>{Ct.current=Date.now()+xe,w("UI:busy set",{ms:xe})},[w]),Wt=v.useCallback(()=>Date.now()<Ct.current,[]),wt=v.useRef(0),Ae=v.useRef(0),qe=v.useRef(!1),Ot=v.useCallback(()=>{const xe=Date.now();F||xe-Ae.current<350||(Ae.current=xe,$(!0),qe.current=!0)},[F]),Y=v.useRef(!1);v.useEffect(()=>{r.state?.openModal&&!F&&!Y.current&&(Y.current=!0,Ot(),window.history.replaceState({},document.title))},[r.state?.openModal,F,Ot]);const[ve,Ve]=v.useState({scheduled:!0,available:!0,canceledOnly:!1,pendingPayments:!1}),[$e,Le]=v.useState(null),[it,Ye]=v.useState(!0),Ge=v.useMemo(()=>Object.fromEntries(($e??[]).map(xe=>[xe.nome,xe])),[$e]),Xe=v.useMemo(()=>($e??[]).map(xe=>xe.nome),[$e]),[ht,st]=v.useState([]),lr=A?.codigo_empresa,rr=v.useMemo(()=>lr?`quadras:list:${lr}`:"quadras:list",[lr]),Zt=v.useMemo(()=>lr?`agenda:selectedCourts:${lr}`:"agenda:selectedCourts",[lr]),fn=v.useMemo(()=>lr?`agenda:viewFilter:${lr}`:"agenda:viewFilter",[lr]),[Yr,Bn]=v.useState(null),[hr,qr]=v.useState(0);v.useEffect(()=>{ht.length>0&&Yr===null&&Bn(ht[0])},[ht,Yr]);const[ya,ui]=v.useState([]),Va=v.useRef(null),Kn=v.useRef({scheduled:!0,canceledOnly:!1}),[Cr,zn]=v.useState(null),[Wn,vi]=v.useState(""),ei=v.useRef(0),ba=v.useRef(!1),wa=v.useRef(!1),[xi,de]=v.useState(!1),[pt,xt]=v.useState(()=>{try{return localStorage.getItem("agenda:hideCanceledInfo")==="1"}catch{return!1}});v.useEffect(()=>{try{localStorage.setItem("agenda:hideCanceledInfo",pt?"1":"0")}catch{}},[pt]);const yt=v.useMemo(()=>{if(!A?.codigo_empresa)return null;const xe=ln(O,"yyyy-MM-dd");return`agenda:bookings:${A.codigo_empresa}:${xe}`},[A?.codigo_empresa,O]),ot=v.useMemo(()=>{if(!A?.codigo_empresa)return null;const xe=ln(O,"yyyy-MM-dd");return`agenda:participants:${A.codigo_empresa}:${xe}`},[A?.codigo_empresa,O]),[St,Ht]=v.useState(!1),Ut=v.useMemo(()=>({autoConfirmEnabled:!1,autoConfirmMinutesBefore:120,autoStartEnabled:!0,autoFinishEnabled:!0}),[]),[nr,ur]=v.useState(Ut),[mr,Ar]=v.useState(Ut),[Nn,yn]=v.useState(!1),[_r,Mn]=v.useState(0),Sa=v.useCallback(()=>Date.now()+(Number.isFinite(_r)?_r:0),[_r]),[ja,Mi]=v.useState(null);v.useEffect(()=>{(async()=>{if(console.log("[AgendaSettings][LOAD] Iniciando carregamento...",{authReady:k,company_id:M?.id}),!k||!M?.id){console.warn("[AgendaSettings][LOAD] Aguardando autenticao...");return}try{console.log("[AgendaSettings][LOAD] Modo:","PRODUO (wrapper)"),console.log("[AgendaSettings][LOAD] Buscando para empresa_id:",M.id);const{data:je,error:Ie}=await Ne.from("agenda_settings").select("*").eq("empresa_id",M.id).maybeSingle();if(console.log("[AgendaSettings][LOAD] Resultado da query:",{data:je,error:Ie}),console.log("[AgendaSettings][LOAD] Data type:",je===null?"null":typeof je),Ie){console.error("[AgendaSettings][LOAD] ERRO ao carregar:",Ie);return}if(!je){console.warn("[AgendaSettings][LOAD] Nenhum registro encontrado (ainda no criado)");return}console.log("[AgendaSettings][LOAD]  Registro encontrado:",je);const De={autoConfirmEnabled:!!je.auto_confirm_enabled,autoConfirmMinutesBefore:je.auto_confirm_enabled&&Number.isFinite(Number(je.auto_confirm_hours))?Number(je.auto_confirm_hours)*60:Ut.autoConfirmMinutesBefore,autoStartEnabled:!!je.auto_start_enabled,autoFinishEnabled:!!je.auto_finish_enabled};console.log("[AgendaSettings][LOAD]  Estado mapeado:",De),ur(Re=>({...Re,...De})),Ar(De),console.log("[AgendaSettings][LOAD]  Estados atualizados com sucesso!")}catch(je){console.warn("[AgendaSettings] unexpected load error",je)}})()},[k,M?.id]),v.useEffect(()=>{let xe=!0,je=null,Ie=!1;const De=async()=>{try{const{data:Re,error:nt}=await Ne.functions.invoke("time-br",{body:{}});if(!nt&&Re&&xe){const Q=Number(Re.nowMs);if(Number.isFinite(Q)){const Ce=Q-Date.now();Mn(Ce),Mi(Date.now());return}}if(!Ie){Ie=!0;try{console.warn("[TimeSync] time-br sem dados vlidos; usando relgio local.")}catch{}}}catch{if(!Ie){Ie=!0;try{console.warn("[TimeSync] time-br falhou; usando relgio local.")}catch{}}}};return De(),je=setInterval(De,5*60*1e3),()=>{xe=!1,je&&clearInterval(je)}},[]);const[G,Te]=v.useState({}),Je=2*60*60*1e3,Xt=v.useCallback(xe=>{Te(je=>({...je,[xe]:Date.now()}))},[]),It=v.useCallback(xe=>{Te(je=>{if(!je||!(xe in je))return je;const Ie={...je};return delete Ie[xe],Ie})},[]),jt=v.useCallback(xe=>{const je=G?.[xe];return typeof je=="number"&&Date.now()-je<Je},[G]),[cr,wr]=v.useState(null),gr=v.useCallback(()=>new Promise(xe=>{wr({resolve:xe})}),[]),zt=v.useRef(new Map),Er=async()=>{console.log(" [AgendaSettings][SAVE] FUNO CHAMADA! "),console.log("[AgendaSettings][SAVE] Linha 509 - Antes do try");try{if(console.log("[AgendaSettings][SAVE] Linha 511 - Dentro do try"),console.log("[AgendaSettings][SAVE] authReady:",k),console.log("[AgendaSettings][SAVE] company:",M),!k||!M?.id){console.error("[AgendaSettings][SAVE] ERRO: No autenticado",{authReady:k,company:M}),e({title:"No autenticado",description:"Faa login para salvar as configuraes.",variant:"destructive"});return}console.log("[AgendaSettings][SAVE]  Autenticado! Preparando payload..."),console.log("[AgendaSettings][SAVE] automation atual:",nr),yn(!0);const xe={empresa_id:M.id,auto_confirm_enabled:!!nr.autoConfirmEnabled,auto_confirm_hours:nr.autoConfirmEnabled?Math.max(0,Math.round(Number(nr.autoConfirmMinutesBefore||0)/60)):null,auto_start_enabled:!!nr.autoStartEnabled,auto_finish_enabled:!!nr.autoFinishEnabled};console.log("[AgendaSettings][SAVE] Payload preparado:",xe),console.log("[AgendaSettings][SAVE] Modo:","PRODUO (wrapper)"),console.log("[AgendaSettings][SAVE] Supabase client type:",typeof Ne.from);const{data:je,error:Ie}=await Ne.from("agenda_settings").upsert(xe,{onConflict:"empresa_id"}).select();if(console.log("[AgendaSettings][SAVE] Resultado do upsert:",{data:je,error:Ie}),console.log("[AgendaSettings][SAVE] Data type:",Array.isArray(je)?"array":typeof je),console.log("[AgendaSettings][SAVE] Data length:",je?.length),Ie)throw console.error("[AgendaSettings][SAVE]  ERRO no upsert:",Ie),Ie;!je||je.length===0?console.error("[AgendaSettings][SAVE]  AVISO: Upsert no retornou dados!"):console.log("[AgendaSettings][SAVE]  Dados salvos com sucesso:",je[0]),Ar(nr),console.log("[AgendaSettings][SAVE]  savedAutomation atualizado:",nr),e({title:"Configuraes salvas",description:"As automaes da agenda foram atualizadas com sucesso."}),Ht(!1),console.log("[AgendaSettings][SAVE]  Salvamento concludo!")}catch(xe){console.error(" [AgendaSettings][SAVE] ERRO CAPTURADO:",xe),console.error("[AgendaSettings][SAVE] Stack:",xe?.stack),console.error("[AgendaSettings][SAVE] Message:",xe?.message);const je=xe?.message||"Falha ao salvar as configuraes.";e({title:"Erro ao salvar",description:je,variant:"destructive"})}finally{console.log("[AgendaSettings][SAVE] Finally executado"),yn(!1)}},Bt=v.useCallback(async(xe,je,Ie="user")=>{try{const De=["canceled","finished","absent"],Re=["scheduled","confirmed","in_progress"],nt=De.includes(je);let Q=!1;if(Ie==="user"&&Re.includes(je)){const Ze=(B||[]).find(at=>at.id===xe),Gt=Ze?De.includes(Ze.status):!1,Kt=Ze?!!Ze.auto_disabled:!1;(Gt||Kt)&&(Q=!!await gr())}const Ce=nt?{status:je,auto_disabled:!0}:Q?{status:je,auto_disabled:!1}:{status:je},{error:Ke}=await Ne.from("agendamentos").update(Ce).eq("codigo_empresa",A.codigo_empresa).eq("id",xe).select("id");if(Ke)throw Ke;W(Ze=>Ze.map(Gt=>{if(Gt.id!==xe)return Gt;const Kt={...Gt,status:je,customer:Gt.customer||""};return nt?Kt.auto_disabled=!0:Q&&(Kt.auto_disabled=!1),Kt}));try{zt.current.set(xe,{status:je,ts:Date.now()})}catch{}try{const Ze=JSON.parse(localStorage.getItem(yt)||"[]");if(Array.isArray(Ze)&&Ze.length>0){const Gt=Array.isArray(Ze)?Ze.map(Kt=>{if(Kt.id!==xe)return Kt;const at={...Kt,status:je,customer:Kt.customer||""};return nt?at.auto_disabled=!0:Q&&(at.auto_disabled=!1),at}):Ze;localStorage.setItem(yt,JSON.stringify(Gt))}}catch{}if(Ie==="user")try{Q?It(xe):Xt(xe)}catch{}}catch(De){console.error("Auto-status: falha ao atualizar",xe,je,De)}},[B,yt,Xt,It,gr,ve]),Xr=v.useRef(!1),Vr=v.useRef(null),rn=v.useRef(null),na=v.useCallback(()=>{try{Vr.current&&(clearTimeout(Vr.current),Vr.current=null)}catch{}},[]),Jr=v.useCallback(()=>{if(!k||!A?.codigo_empresa)return;if(Date.now()<(wt.current||0)){console.log("[AutoDiag] scheduleNextAutomation:deferred returning-from-hidden"),setTimeout(()=>Jr(),600);return}if(We.current){w("scheduleNextAutomation:skipped (modal open)");return}j("auto:schedule"),na();const je=Sa();let Ie=1/0;const De=Re=>{Number.isFinite(Re)&&Re>je&&Re<Ie&&(Ie=Re)};try{for(const Re of B||[]){if(!Re||Re.auto_disabled||jt(Re.id))continue;const nt=Re.start instanceof Date?Re.start.getTime():new Date(Re.start).getTime(),Q=Re.end instanceof Date?Re.end.getTime():new Date(Re.end).getTime();if(Re.status==="scheduled"&&mr.autoConfirmEnabled){const Ce=Number(mr.autoConfirmMinutesBefore||0)*6e4;De(nt-Ce),mr.autoFinishEnabled&&De(Q)}Re.status==="confirmed"&&(mr.autoStartEnabled&&De(nt),mr.autoFinishEnabled&&De(Q)),Re.status==="in_progress"&&mr.autoFinishEnabled&&De(Q)}}catch{}if(Ie!==1/0){const Re=Math.max(0,Math.min(Ie-je+250,6e5));try{console.debug("[Auto] next schedule in ms",Re)}catch{}try{tr(Ie)}catch{}Vr.current=setTimeout(()=>{try{rn.current&&rn.current()}catch{}},Re)}},[k,A?.codigo_empresa,B,mr,jt,na,Sa]),ut=v.useCallback(async xe=>{try{if(!(typeof ja=="number"&&Date.now()-ja<6e5))try{const{data:De}=await Ne.functions.invoke("time-br",{body:{}}),Re=Number(De?.nowMs);Number.isFinite(Re)&&(Mn(Re-Date.now()),Mi(Date.now()))}catch{}try{Jr()}catch{}let Ie=null;if(xe?.id&&A?.codigo_empresa){const{data:De}=await Ne.from("agendamentos").select("id, inicio, fim, status, modalidade, quadra_id, cliente_id, auto_disabled").eq("codigo_empresa",A.codigo_empresa).eq("id",xe.id).single();if(De){const Re={...xe,start:new Date(De.inicio),end:new Date(De.fim),status:De.status||xe.status,modality:De.modalidade||xe.modality,auto_disabled:!!De.auto_disabled,customer:xe.customer||""};Ie=Re,W(nt=>nt.map(Q=>Q.id===xe.id?Re:Q))}}try{const De=Ie||xe;if(De&&De.id){const Re=Sa(),nt=De.start instanceof Date?De.start.getTime():new Date(De.start).getTime(),Q=De.end instanceof Date?De.end.getTime():new Date(De.end).getTime();if(!De.auto_disabled&&!jt(De.id))if(De.status==="in_progress"&&mr.autoFinishEnabled&&Number.isFinite(Q)&&Re>=Q)await Bt(De.id,"finished","automation");else if(De.status==="scheduled"&&mr.autoStartEnabled&&Number.isFinite(nt)&&Re>=nt)await Bt(De.id,"in_progress","automation");else if(De.status==="confirmed"&&mr.autoStartEnabled&&Number.isFinite(nt)&&Re>=nt)await Bt(De.id,"in_progress","automation");else if(De.status==="scheduled"&&mr.autoConfirmEnabled&&Number.isFinite(nt)){const Ke=Number(mr.autoConfirmMinutesBefore||0)*6e4;Re>=nt-Ke&&await Bt(De.id,"confirmed","automation")}else(De.status==="scheduled"||De.status==="confirmed")&&mr.autoFinishEnabled&&Number.isFinite(Q)&&Re>=Q&&await Bt(De.id,"finished","automation")}}catch{}try{rn.current&&rn.current()}catch{}try{console.log(" EditGuard | ok | tempo=",typeof ja=="number"?"Servidor":"Local")}catch{}return{booking:Ie}}catch(je){try{console.warn(" EditGuard | falha leve",je?.message||je)}catch{}return{booking:null}}},[ja,Ne,A,W,Jr,Sa,nr,jt,Bt]),Br=v.useCallback(async()=>{if(!(!k||!A?.codigo_empresa)){if(We.current){w("runAutomation:skipped (modal open)");return}if(!Xr.current){Xr.current=!0;try{try{console.debug("[Auto] tick")}catch{}j("auto:tick");const xe=Sa(),je=new Date(xe),Ie=ln(je,"yyyy-MM-dd");let De=(B||[]).filter(nt=>ln(nt.start,"yyyy-MM-dd")===Ie);if(De.length===0)try{const nt=Pl(je),Q=wi(nt,1),{data:Ce,error:Ke}=await Ne.from("agendamentos").select("id, inicio, fim, status, auto_disabled").eq("codigo_empresa",A.codigo_empresa).gte("inicio",nt.toISOString()).lt("inicio",Q.toISOString());!Ke&&Array.isArray(Ce)&&(De=Ce.map(Ze=>({id:Ze.id,start:new Date(Ze.inicio),end:new Date(Ze.fim),status:Ze.status||"scheduled",auto_disabled:!!Ze.auto_disabled})))}catch{}try{const{data:nt,error:Q}=await Ne.from("agendamentos").select("id, inicio, fim, status, auto_disabled").eq("codigo_empresa",A.codigo_empresa).lt("fim",je.toISOString()).in("status",["scheduled","confirmed","in_progress"]);if(!Q&&Array.isArray(nt)&&nt.length>0){const Ce=nt.map(Ze=>({id:Ze.id,start:new Date(Ze.inicio),end:new Date(Ze.fim),status:Ze.status||"scheduled",auto_disabled:!!Ze.auto_disabled})),Ke=new Map(De.map(Ze=>[Ze.id,Ze]));for(const Ze of Ce)Ke.has(Ze.id)||Ke.set(Ze.id,Ze);De=Array.from(Ke.values())}}catch{}let Re=!1;for(const nt of De){if(nt.auto_disabled||jt(nt.id))continue;const Q=nt.start instanceof Date?nt.start.getTime():new Date(nt.start).getTime(),Ce=nt.end instanceof Date?nt.end.getTime():new Date(nt.end).getTime();if(nt.status==="in_progress"&&mr.autoFinishEnabled&&xe>=Ce){try{console.debug("[Auto] finish",{id:nt.id})}catch{}await Bt(nt.id,"finished","automation"),Re=!0;continue}if(nt.status==="scheduled"&&mr.autoStartEnabled&&xe>=Q){try{console.debug("[Auto] start-direct (skip confirm)",{id:nt.id})}catch{}await Bt(nt.id,"in_progress","automation"),Re=!0;continue}if(nt.status==="confirmed"&&mr.autoStartEnabled&&xe>=Q){try{console.debug("[Auto] start",{id:nt.id})}catch{}await Bt(nt.id,"in_progress","automation"),Re=!0;continue}if(nt.status==="scheduled"&&mr.autoConfirmEnabled){const Ke=Number(mr.autoConfirmMinutesBefore||0)*6e4;if(xe>=Q-Ke){try{console.debug("[Auto] confirm",{id:nt.id})}catch{}await Bt(nt.id,"confirmed","automation"),Re=!0;continue}}if((nt.status==="scheduled"||nt.status==="confirmed")&&mr.autoFinishEnabled&&xe>=Ce){try{console.debug("[Auto] catchup-finish",{id:nt.id})}catch{}await Bt(nt.id,"finished","automation"),Re=!0;continue}}if(Re)try{setTimeout(()=>{try{jr()}catch{}},800)}catch{}try{Jr()}catch{}}finally{Xr.current=!1}}}},[k,A?.codigo_empresa,B,mr,Bt,jt,Jr,Sa]);v.useEffect(()=>{rn.current=Br},[Br]),v.useEffect(()=>{const xe=setInterval(Br,1e4);try{rn.current&&rn.current()}catch{}try{Jr()}catch{}return()=>clearInterval(xe)},[Br]),v.useEffect(()=>{const xe=setInterval(()=>{try{if(!!!(mr?.autoConfirmEnabled||mr?.autoStartEnabled||mr?.autoFinishEnabled))return;rn.current&&(console.debug("[Auto][Watchdog] forcing periodic automation run"),rn.current())}catch{}},18e5);return()=>clearInterval(xe)},[mr]),v.useEffect(()=>{if(yt)try{const xe=JSON.parse(localStorage.getItem(yt)||"[]");if(Array.isArray(xe)&&xe.length>0){const je=xe.map(Ie=>({...Ie,start:new Date(Ie.start),end:new Date(Ie.end),customer:Ie.customer||""}));w("cache:bookings:hydrate",{count:je.length,sample:je[0]}),j("cache:hydrate",{count:je.length}),W(Ie=>Ie&&Ie.length>0?Ie:je),At(1200)}}catch{}},[yt,w]),v.useEffect(()=>{const xe=()=>{try{const De=new Date().toISOString();if(document.visibilityState==="visible"){const Re=Date.now();wt.current=Re+800}}catch{}},je=()=>{try{const De=new Date().toISOString()}catch{}},Ie=()=>{try{const De=new Date().toISOString()}catch{}};return document.addEventListener("visibilitychange",xe),window.addEventListener("focus",je),window.addEventListener("blur",Ie),()=>{document.removeEventListener("visibilitychange",xe),window.removeEventListener("focus",je),window.removeEventListener("blur",Ie)}},[F,B]),v.useEffect(()=>{try{Jr()}catch{}return()=>{try{na()}catch{}}},[B,nr,Jr,na]),v.useEffect(()=>{if(ot)try{const xe=JSON.parse(localStorage.getItem(ot)||"{}");xe&&typeof xe=="object"&&(me(xe),Se.current=ln(O,"yyyy-MM-dd"))}catch{}},[ot]);const jr=v.useCallback(async()=>{if(!k||!A?.codigo_empresa||Date.now()<(wt.current||0)||F)return;w("fetchBookings:start",{date:ln(O,"yyyy-MM-dd"),empresa:A?.codigo_empresa}),j("fetch:start",{day:ln(O,"yyyy-MM-dd")});const xe=Pl(O),je=wi(xe,1),{data:Ie,error:De}=await Ne.from("agendamentos").select(`
        id, codigo, codigo_empresa, quadra_id, cliente_id, clientes, inicio, fim, modalidade, status, auto_disabled,
        quadra:quadra_id ( nome )
      `).eq("codigo_empresa",A.codigo_empresa).gte("inicio",xe.toISOString()).lt("inicio",je.toISOString()).order("inicio",{ascending:!0});if(De){w("fetchBookings:error",{message:De?.message,code:De?.code,status:De?.status}),j("fetch:error",{message:De?.message,code:De?.code,status:De?.status}),e({title:"Erro ao carregar agendamentos",description:De.message,variant:"destructive"}),ba.current||(ba.current=!0,setTimeout(jr,900));return}if(!Ie||Ie.length===0){w("fetchBookings:empty-first-hit"),j("fetch:empty-first");let Q=!1;try{const Ce=yt?JSON.parse(localStorage.getItem(yt)||"[]"):[];Q=Array.isArray(Ce)&&Ce.length>0}catch{}if(!ba.current&&(ba.current=!0,Q)){setTimeout(jr,700);return}}ba.current=!1;const Re=Date.now(),nt=(Ie||[]).map(Q=>{const Ce=new Date(Q.inicio),Ke=new Date(Q.fim),Ze=Q.quadra?.[0]?.nome||Q.quadra?.nome||Object.values(Ge).find(Dt=>Dt.id===Q.quadra_id)?.nome||"";let Gt="";if(te[Q.id]){const Dt=te[Q.id];Array.isArray(Dt)&&Dt.length>0&&(Gt=Dt[0]?.nome||"")}if(!Gt&&Q.clientes)try{const Dt=typeof Q.clientes=="string"?JSON.parse(Q.clientes):Q.clientes;Array.isArray(Dt)&&Dt.length>0&&(Gt=Dt[0]?.nome||Dt[0]||"")}catch{}const Kt=zt.current.get(Q.id),at=Kt&&Re-Kt.ts<4e3;return{id:Q.id,code:Q.codigo,court:Ze,customer:Gt,start:Ce,end:Ke,status:at?Kt.status:Q.status||"scheduled",modality:Q.modalidade||"",auto_disabled:!!Q.auto_disabled}});W(nt);try{if(yt){const Q=nt.map(Ce=>({id:Ce.id,code:Ce.code,court:Ce.court,customer:Ce.customer,start:Ce.start.toISOString(),end:Ce.end.toISOString(),status:Ce.status,modality:Ce.modality,auto_disabled:Ce.auto_disabled}));localStorage.setItem(yt,JSON.stringify(Q))}}catch{}},[k,A?.codigo_empresa,O,Ge,yt,e,w,b,te]);v.useEffect(()=>{if(b)try{const xe=(B||[]).map(je=>`${je.id}:${ln(je.start,"HH:mm")}-${ln(je.end,"HH:mm")}:${je.status}`).join(" | ");console.log("[AgendaDbg] bookings:changed",{count:Array.isArray(B)?B.length:0,summary:xe})}catch{}},[B,b]),v.useEffect(()=>{try{const xe=Date.now()+1800;bt.current=xe,w("Picker:suppressClose window set",{until:xe})}catch{}},[B]),v.useEffect(()=>{k&&A?.codigo_empresa&&jr()},[k,A?.codigo_empresa,O,Ge,yt]);const ie=v.useRef(null),[pe,Be]=v.useState("idle"),[ze,Me]=v.useState(null),lt=v.useRef(!1);v.useEffect(()=>{if(!k||!A?.codigo_empresa)return;const xe=Pl(O);wi(xe,1);const je=setInterval(()=>{We.current||jr()},3e4);return()=>{try{ie.current&&clearTimeout(ie.current)}catch{}try{clearInterval(je)}catch{}try{Be("polling")}catch{}}},[k,A?.codigo_empresa,O,jr]),v.useEffect(()=>{if(!F&&lt.current){lt.current=!1;try{w("Modal closed: flushing pending realtime refresh"),j("rt:flushAfterModalClose"),jr()}catch{}}},[F,jr,w]);const[tt,tr]=v.useState(null),Lt=v.useRef("");v.useEffect(()=>{try{const xe=typeof ja=="number"&&Date.now()-ja<6e5,je=Ze=>typeof Ze=="number"?ln(new Date(Ze),"HH:mm:ss",{locale:Fc}):"",Ie=Ze=>typeof Ze=="number"?ln(new Date(Ze),"HH:mm",{locale:Fc}):"",De=xe?"":"",nt=String(pe).toUpperCase()==="SUBSCRIBED"||String(pe).toLowerCase()==="polling"?"":"",Q=typeof tt=="number"?"":"",Ce=Array.isArray(B)?B.length:0,Ke=` Agenda | ${De} Tempo=${xe?"Servidor":"Local"} (${Math.round(_r)}ms, sync ${je(ja)}) |  Realtime=${nt} ${pe}${ze?` (${je(ze)})`:""} | ${Q} Prximo=${Ie(tt)} |  Agendamentos=${Ce}`;Lt.current!==Ke&&(Lt.current=Ke,console.log(Ke)),typeof window<"u"&&(window.__AgendaConn={usingServer:xe,serverOffsetMs:_r,lastTimeSyncAtMs:ja,realtimeStatus:pe,lastRealtimeEventAtMs:ze,nextAutoAtMs:tt})}catch{}},[_r,ja,pe,ze,nr,tt,A?.codigo_empresa,O,Array.isArray(B)?B.length:0]),v.useEffect(()=>{const xe=setInterval(()=>{try{const je=Date.now();if(je<(wt.current||0)){console.log("[AutoDiag] reconcile:skipped returning-from-hidden");return}if(F){console.log("[AutoDiag] reconcile:skipped modal-open");return}const Ie=String(pe||"").toUpperCase()==="SUBSCRIBED",De=typeof ze=="number"?je-ze:1/0,Re=!Ie||De>7*60*1e3,nt=typeof tt=="number"?je>tt+60*1e3:!1;if(Re||nt){console.debug("[Reconcile] forcing fetchBookings (stale=",Re," tickDue=",nt,")"),jr();try{Jr()}catch{}}}catch{}},3e5);return()=>clearInterval(xe)},[pe,ze,tt,jr,Jr]),v.useEffect(()=>{(async()=>{if(!k||!A?.codigo_empresa||Date.now()<(wt.current||0))return;if(We.current){w("Participants:skipped (modal open)");return}w("Participants:load start"),j("parts:start");const je=(B||[]).map(Ce=>Ce.id).filter(Boolean),Ie=ln(O,"yyyy-MM-dd");if(!je.length){if(Se.current!==Ie){me({});try{ot&&localStorage.setItem(ot,"{}")}catch{}}Se.current=Ie;return}const De=++Ee.current,{data:Re,error:nt}=await Ne.from("agendamento_participantes").select("id, agendamento_id, codigo_empresa, cliente_id, nome, valor_cota, status_pagamento, finalizadora_id, aplicar_taxa, cliente:clientes!agendamento_participantes_cliente_id_fkey(nome, codigo)").in("agendamento_id",je);if(Ee.current!==De)return;if(nt){console.warn("[Participants] load error",nt),w("Participants:error",{message:nt?.message,code:nt?.code,status:nt?.status}),j("parts:error",{code:nt?.code});return}const Q={};for(const Ce of Re||[]){const Ke=Ce.agendamento_id;Q[Ke]||(Q[Ke]=[]);const Ze=Ce.nome||(Array.isArray(Ce.cliente)?Ce.cliente[0]?.nome:Ce.cliente?.nome)||"",Gt=(Array.isArray(Ce.cliente)?Ce.cliente[0]?.codigo:Ce.cliente?.codigo)||null;Q[Ke].push({...Ce,nome:Ze,codigo:Gt})}w("Participants:loaded",{bookings:je.length,rows:(Re||[]).length}),j("parts:loaded",{rows:(Re||[]).length}),Se.current=Ie,me(Ce=>{const Ke={...Ce};for(const Ze of je)Ke[Ze]=Q[Ze]||[];try{ot&&localStorage.setItem(ot,JSON.stringify(Ke))}catch{}return w("Participants:set state for ids",{ids:je}),j("parts:set",{idsCount:je.length}),Ke})})()},[k,A?.codigo_empresa,B,O,ot,w]),v.useEffect(()=>{if(lr)try{const xe=JSON.parse(localStorage.getItem(rr)||"[]");Array.isArray(xe)&&xe.length&&(!$e||$e.length===0)&&(Le(xe),Ye(!1))}catch{}},[lr,rr]),v.useEffect(()=>{const xe=async()=>{if(!A?.codigo_empresa)return;try{const Re=JSON.parse(localStorage.getItem(rr)||"[]");if(Array.isArray(Re)&&Re.length>0){const nt=Re[0]?.codigo_empresa;if(nt&&nt!==A.codigo_empresa){console.warn(" [Cache Limpo] Quadras de outra empresa detectadas e removidas"),localStorage.removeItem(rr),localStorage.removeItem(Zt),Le([]);try{st([])}catch{}try{Bn(null)}catch{}try{setForm(Q=>({...Q,court:""}))}catch{}}}}catch{}(!$e||$e.length===0)&&Ye(!0);const{data:je,error:Ie}=await Ne.from("quadras").select("id, nome, modalidades, hora_inicio, hora_fim, valor, codigo_empresa, status").eq("codigo_empresa",A.codigo_empresa).eq("status","Ativa").order("nome",{ascending:!0});if(Ie){e({title:"Erro ao carregar quadras",description:Ie.message}),wa.current?Ye(!1):(wa.current=!0,setTimeout(xe,900));return}const De=je||[];if(De.length===0){let Re=0;try{const nt=JSON.parse(localStorage.getItem("quadras:list")||"[]");Re=Array.isArray(nt)?nt.length:0}catch{}if(Re>0&&!wa.current){wa.current=!0,Ye(!1),setTimeout(xe,700);return}}wa.current=!1,Le(De);try{localStorage.setItem(rr,JSON.stringify(De))}catch{}Ye(!1)};k&&A?.codigo_empresa&&xe()},[k,A?.codigo_empresa,rr,Zt]),v.useEffect(()=>{try{if(it)return;const xe=Xe||[];form?.court&&!xe.includes(form.court)&&setForm(je=>({...je,court:xe[0]||""})),(!form?.court||form.court==="")&&xe.length>0&&setForm(je=>({...je,court:xe[0]}))}catch{}},[it,Xe,A?.codigo_empresa]),v.useEffect(()=>{if(it)return;const xe=(()=>{try{return JSON.parse(localStorage.getItem(Zt)||"[]")}catch{return[]}})(),je=(()=>{try{return JSON.parse(localStorage.getItem(fn)||"{}")}catch{return{}}})(),Ie=xe.filter(De=>Xe.includes(De));Ie.length>0?st(Ie):ht.length===0&&st(Xe),je&&typeof je=="object"&&Ve(De=>({...De,canceledOnly:!1,...je}))},[it,Xe.length]),v.useEffect(()=>{try{localStorage.setItem(Zt,JSON.stringify(ht))}catch{}},[ht,Zt]),v.useEffect(()=>{try{localStorage.setItem(fn,JSON.stringify(ve))}catch{}},[ve,fn]);const pr=v.useMemo(()=>{const xe=ht.map(Ie=>Ge[Ie]?.hora_inicio||"06:00:00").map(Ie=>{const[De,Re]=String(Ie).split(":").map(Number);return(De||0)*60+(Re||0)});if(!xe.length)return yT;const je=Math.min(...xe);return Math.floor(je/60)},[ht,Ge]),kr=v.useMemo(()=>{const xe=ht.map(Ie=>Ge[Ie]?.hora_fim||"24:00:00").map(Ie=>{const[De,Re]=String(Ie).split(":").map(Number);return(De||0)*60+(Re||0)});if(!xe.length)return Ote;const je=Math.max(...xe);return Math.ceil(je/60)},[ht,Ge]);v.useEffect(()=>{const xe=new Date,je=gd(xe),Ie=vd(xe);setTimeout(()=>{if(!Va.current)return;const Re=Math.max(0,(je-pr)*60+Ie)/Qn;Va.current.scrollTop=Math.max(0,Re*vs-120)},150)},[pr]);const wn=({booking:xe,courtGridStart:je,courtGridEnd:Ie})=>{const De=vs,Re=Jn=>gd(Jn)*60+vd(Jn),nt=Re(xe.start),Q=Re(xe.end),Ce=je!==void 0?je:Yr?_n.start*60:pr*60,Ke=Ie!==void 0?Ie:Yr?_n.end*60:kr*60,Ze=nt-Ce,Gt=(Ke-Ce)/Qn;let Kt=Math.floor(Ze/Qn);const at=Math.max(0,Q-nt),Dt=Math.max(1,Math.ceil(at/Qn));let fr=Kt+Dt;Kt=Math.max(0,Math.min(Kt,Gt-1)),fr=Math.max(0,Math.min(fr,Gt)),fr<=Kt&&(fr=Kt+1),fr=Math.min(fr,Gt);const er=Kt*De;let Tr=(fr-Kt)*De;const zr=Us[xe.status]||Us.confirmed,Ur=zr.icon,sa=zr.border,va=Dt===1,Ci=va?4:dGe,fs=er+Ci,T=Math.max(va?40:32,Tr-Ci*2),q=at>=90,ge=2,Pe=1.15,Ue=q?(()=>{const Jn=Math.min(Math.max((at-90)/90,0),1);return Math.min(Pe+Jn*(ge-Pe),ge)})():1,Et=16,gt=14,sr=va?16:24,yr=Math.round(Et*(q?Ue:1)),Ir=Math.round(gt*(q?Ue:1)),nn=Math.round(sr*(q?Ue:1)),Rn=va?12:16,On=va?12:16,Ln=q?Math.min(Ue,1.3):1,la=Math.round(Rn*Ln),Ra=Math.round(On*Ln),La=te[xe.id]||[],di=La.filter(Jn=>String(Jn.status_pagamento||"").toLowerCase()==="pago").length,Ai=La.length;return o.jsxs(Pr.div,{layout:F?!1:"position",initial:F?!1:{opacity:0,y:6},animate:F?!1:{opacity:1,y:0},exit:F?!1:{opacity:0,y:6},id:`booking-${xe.id}`,className:kt("absolute left-2 right-2 rounded-md border-2 bg-surface text-sm shadow-sm z-0 cursor-pointer",sa,"overflow-hidden transition-all duration-150 hover:bg-surface-2 hover:shadow-md"),style:{top:`${fs}px`,height:`${T}px`},onClick:async()=>{const Jn=ut(xe),Vl=new Promise(yi=>setTimeout(yi,600));let hs=null;try{hs=await Promise.race([Jn,Vl])}catch{}const ro=hs&&hs.booking||B.find(yi=>yi.id===xe.id)||xe;he(ro),Ot()},children:[o.jsx("div",{className:kt("absolute left-0 top-0 h-full w-[6px] rounded-l-md",zr.accent)}),o.jsx("div",{className:kt("h-full flex",va?"px-3 py-3":"px-4 py-4"),style:{paddingLeft:la,paddingRight:la,paddingTop:Ra,paddingBottom:Ra},children:o.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[o.jsx("p",{className:"font-semibold text-text-primary truncate text-base",style:{fontSize:yr,lineHeight:1.15},children:lz(xe.customer)}),va&&o.jsx("span",{className:"text-xs font-bold text-white truncate bg-gradient-to-r from-slate-700 to-slate-800 border border-slate-600/60 rounded-md px-2 py-0.5 whitespace-nowrap shadow-md",style:{fontSize:Ir},children:xe.modality})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs("span",{className:kt("text-text-muted font-semibold text-base whitespace-nowrap"),style:{fontSize:yr},children:[ln(xe.start,"HH:mm"),"",ln(xe.end,"HH:mm")]}),va&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ur,{className:kt(zr.text),style:{width:nn,height:nn}}),o.jsx("span",{className:kt("truncate font-semibold",zr.text,"text-base"),style:{fontSize:yr},children:zr.label})]}),va&&Ai>0&&o.jsxs("span",{className:`text-xs font-semibold rounded-full px-2 py-0.5 border ${di===Ai?"text-emerald-300 bg-emerald-500/10 border-emerald-400/30":"text-amber-300 bg-amber-500/10 border-amber-400/30"}`,style:{fontSize:Math.max(11,Math.round(11*(q?Ue:1)))},children:[di,"/",Ai]})]}),o.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 flex-wrap",children:[!va&&o.jsx("span",{className:"text-xs font-bold text-white truncate bg-gradient-to-r from-slate-700 to-slate-800 border border-slate-600/60 rounded-md px-2.5 py-1 shadow-md",style:{fontSize:Ir},children:xe.modality}),!va&&o.jsxs("div",{className:"flex items-center gap-1.5 text-base flex-wrap justify-end",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ur,{className:kt(zr.text),style:{width:nn,height:nn}}),o.jsx("span",{className:kt("truncate font-semibold",zr.text),style:{fontSize:yr},children:(()=>typeof window<"u"&&window.innerWidth<768&&xe.status==="in_progress"?"Andamento":zr.label)()})]}),Ai>0&&(()=>{const Jn=typeof window<"u"&&window.innerWidth<768;return o.jsxs("span",{className:kt("font-bold rounded-full border flex items-center gap-1 whitespace-nowrap",va?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm",di===Ai?"text-emerald-300 bg-emerald-500/10 border-emerald-400/30":"text-amber-300 bg-amber-500/10 border-amber-400/30"),style:{fontSize:Math.max(va?11:13,Math.round((va?11:13)*(q?Ue:1)))},children:[o.jsx(Gs,{className:"w-3 h-3 flex-shrink-0"}),o.jsxs("span",{className:"whitespace-nowrap",children:[di,"/",Ai,Jn?"":" pagos"]})]})})()]})]})]})})]})},Wr=()=>{v.useRef(Math.random().toString(36).slice(2)),B_();const xe=v.useRef(0),je=v.useRef(""),Ie=ae=>{if(!ae)return"";if(typeof ae=="string")return ae;const ke=ae.nome||ae.name||"",Oe=ae.codigo??ae.code;return Oe!=null?`[${Oe}] ${ke}`:ke},De=ae=>ae?typeof ae=="string"?ae:ae.nome||ae.name||"":"",Re=ae=>{const ke=Ge[ae];if(!ke)return{start:pr*60,end:kr*60};const[Oe,rt]=String(ke.hora_inicio||"06:00:00").split(":").map(Number),[Nt,dr]=String(ke.hora_fim||"24:00:00").split(":").map(Number);return{start:Oe*60+(rt||0),end:Nt*60+(dr||0)}},nt=()=>{const ae=gd(new Date),ke=vd(new Date),Oe=ae*60+ke,rt=Xe[0]||"",Nt=Re(rt);return Math.max(Nt.start,Math.min(Nt.end-Qn,Math.round(Oe/Qn)*Qn))},[Q,Ce]=v.useState(()=>{let ae=[];try{const ke=sessionStorage.getItem("agenda:customerPicker:closingAt"),Oe=ke?Number(ke):0,rt=Oe&&Date.now()-Oe<1e4,Nt=sessionStorage.getItem(Pe),dr=Nt?JSON.parse(Nt):[];if(rt&&Array.isArray(dr)&&dr.length>0?ae=dr:Array.isArray(sr)&&sr.length>0?ae=sr:Array.isArray(q.current)&&q.current.length>0&&(ae=q.current),ae.length>0)try{Ze.current=!0}catch{}}catch{}return{selectedClients:ae,court:Xe[0]||"",modality:sm[0],status:"scheduled",date:O,startMinutes:nt(),endMinutes:nt()+60}}),Ke=v.useRef([]),Ze=v.useRef(!1),Gt=v.useRef(null);v.useEffect(()=>{Ke.current=Array.isArray(Q.selectedClients)?Q.selectedClients:[];try{(Ke.current||[]).length>0&&(Ze.current=!0)}catch{}},[Q.selectedClients]);const[Kt,at]=v.useState(!1),[Dt,fr]=v.useState(""),er=v.useRef(0),Tr=v.useRef(!1);v.useEffect(()=>{const ae=()=>{try{if(document.visibilityState==="hidden"){Tr.current=!!(ft||Kt);const ke=Date.now();try{_t.current=ke+1200}catch{}try{bt.current=ke+1200}catch{}try{er.current=ke+800}catch{}}else if(document.visibilityState==="visible"){const ke=Tr.current;Tr.current=!1;const Oe=Date.now();try{_t.current=Math.max(_t.current||0,Oe+600)}catch{}try{bt.current=Math.max(bt.current||0,Oe+600)}catch{}try{er.current=Math.max(er.current||0,Oe+400)}catch{}ke&&!We.current&&setTimeout(()=>{We.current||(at(!0),mt(!0))},60)}}catch{}};return document.addEventListener("visibilitychange",ae),()=>document.removeEventListener("visibilitychange",ae)},[ft,Kt,F]),v.useEffect(()=>{},[Kt,ft]);const zr=v.useRef(0);v.useEffect(()=>{const ae=Array.isArray(Q.selectedClients)?Q.selectedClients.length:-1,ke=zr.current;ae!==ke&&(zr.current=ae)},[Q.selectedClients,Kt,ft]);const[Ur,sa]=v.useState(!1),[va,So]=v.useState(null),[Ci,fs]=v.useState(!1),T=v.useRef(!1),q=v.useRef([]),ge=v.useRef("init"),Pe=v.useMemo(()=>{try{return`agenda:lastSelection:${A?.codigo_empresa||"no-company"}`}catch{return"agenda:lastSelection:no-company"}},[A?.codigo_empresa]),Ue=v.useCallback(ae=>{try{sessionStorage.setItem(Pe,JSON.stringify(ae||[]))}catch{}},[Pe]),Et=v.useCallback(()=>{try{const ae=sessionStorage.getItem(Pe);if(ae){const ke=JSON.parse(ae);Array.isArray(ke)&&(q.current=ke)}}catch{}},[Pe]),gt=v.useRef(!1),[sr,yr]=v.useState([]),Ir=v.useCallback(ae=>{yr(ae)},[]),nn=v.useRef(null),[Rn,On]=v.useState(!1),[Ln,la]=v.useState(!1);v.useState(!1);const[Ra,La]=v.useState(!1),[di,Ai]=v.useState(!1),Jn=v.useRef(null),Vl=v.useRef(null),hs=v.useRef(!1);v.useEffect(()=>{if(!n)return;let ae=!1;return(async()=>{try{if(!k||!A?.codigo_empresa)return;const ke=await ov({somenteAtivas:!0,codigoEmpresa:A.codigo_empresa});ae||y(Array.isArray(ke)?ke:[])}catch{}})(),()=>{ae=!0}},[n,k,A?.codigo_empresa]),v.useEffect(()=>{if(!n||!Array.isArray(x)||x.length===0)return;const ae=String(x[0].id);m(ke=>ke.length===0&&Array.isArray(Q.selectedClients)&&Q.selectedClients.length>0?Q.selectedClients.map(Nt=>({cliente_id:Nt.id,nome:Nt.nome,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:ae})):ke.map(rt=>({...rt,finalizadora_id:rt.finalizadora_id&&rt.finalizadora_id!==""?rt.finalizadora_id:ae})))},[n,x]);const ro=v.useCallback((ae,ke)=>{try{const Oe=Date.now(),rt=Oe<(ei.current||0)||Oe<(bt.current||0),Nt=!ft,dr=!!gt.current;let Yt=Array.isArray(ke)?ke:[];if(Yt.length===0&&Nt&&rt&&!dr){const Vt=Array.isArray(q.current)?q.current:[];Vt.length>0&&(Yt=Vt)}try{if(!K&&Array.isArray(Yt)&&Yt.length>0&&Gt.current){const Vt=Yt.findIndex(Or=>Or&&Or.id===Gt.current);Vt>0&&(Yt=[Yt[Vt],...Yt.filter((Nr,Pn)=>Pn!==Vt)])}}catch{}if(Ce(Vt=>({...Vt,selectedClients:Yt})),Array.isArray(Yt)&&Yt.length>0){q.current=Yt,Ir(Yt);try{sessionStorage.setItem(Pe,JSON.stringify(Yt))}catch{}gt.current=!1}try{ge.current=ae}catch{}}catch{}},[ft,Ce,Ir,Pe]);v.useState(""),v.useRef(null),v.useEffect(()=>{try{ne.current=Date.now()}catch{}},[Kt,Ln]),v.useEffect(()=>{if(b){if(Qt.current=Kt,Kt)P("customer-picker",6e3),j("picker:open"),Pt.current=!0,mt(!0);else if(j("picker:close"),N("picker-close"),lt.current){lt.current=!1;try{w("Picker closed: flushing pending refresh"),j("picker:flush"),jr()}catch{}}}},[Kt]);const yi=v.useCallback((ae,ke={})=>{if(b)try{const Oe=new Date().toISOString(),rt=be.current,Nt=!!Pt.current,dr=!!T.current}catch{}},[b,F,Kt,ft,Ln,Ur]);v.useEffect(()=>{b&&yi("state-change",{isCustomerPickerOpen:Kt,effectiveCustomerPickerOpen:ft})},[b,Kt,ft]),v.useEffect(()=>{if(!F||ft)return;const ae=Array.isArray(Q.selectedClients)?Q.selectedClients:[],ke=Array.isArray(q.current)?q.current:[],Oe=Date.now()<(_t.current||0);if(ae.length===0&&ke.length>0&&!gt.current&&Oe)ge.current="global:restore",Ce(rt=>({...rt,selectedClients:ke}));else if(ae.length===0&&ke.length>0&&gt.current&&!Oe)try{q.current=[]}catch{}},[F,ft,Q.selectedClients]),v.useEffect(()=>{if(!F)return;let ae=Pt.current;try{const Oe=localStorage.getItem("agenda:customerPicker:desiredAt");if(Oe){const rt=Number(Oe);Number.isFinite(rt)&&Date.now()-rt<3e3&&(ae=!0)}}catch{}if(!ae||Kt||Date.now()<bt.current||Wt())return;const ke=Date.now();ke-Qe.current<800||(Qe.current=ke,be.current="open",at(!0),mt(!0))},[Kt,F]),v.useEffect(()=>{const ae=Array.isArray(Q.selectedClients)?Q.selectedClients:[];ae.length>0&&(q.current=ae,Ue(ae),Ir(ae))},[Q.selectedClients,Ue]),v.useEffect(()=>{if(!F||(Et(),ft)||Pt.current)return;const ae=Array.isArray(Q.selectedClients)?Q.selectedClients:[],ke=(()=>{const Oe=Array.isArray(q.current)?q.current:[];if(Oe&&Oe.length>0)return Oe;try{const rt=sessionStorage.getItem(Pe),Nt=rt?JSON.parse(rt):[];return Array.isArray(Nt)?Nt:[]}catch{return[]}})();ae.length===0&&ke.length>0&&!gt.current&&(Ce(Oe=>({...Oe,selectedClients:ke})),T.current=!1)},[ft,F,Et,Pe]);const bu=v.useRef(0);v.useEffect(()=>{try{const ae=Date.now(),ke=Array.isArray(Ke.current)?Ke.current:[],Oe=Array.isArray(q.current)?q.current:[];if(ae-bu.current>300&&(bu.current=ae),F&&!ft&&ke.length===0&&Oe.length>0&&!gt.current){try{ei.current=Date.now()+2e3}catch{}try{const rt=bt?.current||0,Nt={ts:new Date().toISOString(),reason:"empty-after-close",modalOpen:F,pickerOpen:ft,formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:ke.length,lastLen:Oe.length,clearedByUser:!!gt?.current,lastAction:ge?.current,chipsLen:Array.isArray(sr)?sr.length:NaN,clientsLoading:!!Ln,suppressUntil:rt}}catch{}Ir(Oe);try{sessionStorage.setItem(Pe,JSON.stringify(Oe))}catch{}Ce(rt=>({...rt,selectedClients:[...Oe]}));try{Promise.resolve().then(()=>{Ce(rt=>({...rt,selectedClients:[...q.current]}))})}catch{}try{requestAnimationFrame(()=>{Ce(rt=>({...rt,selectedClients:[...q.current||[]]}))})}catch{}setTimeout(()=>{const rt=Array.isArray(Ke.current)?Ke.current:[],Nt=Array.isArray(q.current)?q.current:[];rt.length===0&&Nt.length>0&&Ce(dr=>({...dr,selectedClients:[...Nt]}))},25),setTimeout(()=>{const rt=Array.isArray(Ke.current)?Ke.current:[],Nt=Array.isArray(q.current)?q.current:[];rt.length===0&&Nt.length>0&&Ce(dr=>({...dr,selectedClients:[...Nt]}))},120),setTimeout(()=>{const rt=Array.isArray(Ke.current)?Ke.current:[],Nt=Array.isArray(q.current)?q.current:[];rt.length===0&&Nt.length>0&&Ce(dr=>({...dr,selectedClients:[...Nt]}))},240)}}catch{}},[Q.selectedClients,ft,F]),v.useEffect(()=>{try{const ae=now<(ei.current||0),ke=Array.isArray(Ke.current)?Ke.current:[],Oe=Array.isArray(q.current)?q.current:[],rt=now<(_t.current||0);if(F&&!ft&&(ae||rt)&&ke.length===0&&Oe.length>0&&!gt.current){yr(Oe);try{sessionStorage.setItem(Pe,JSON.stringify(Oe))}catch{}Ce(Nt=>({...Nt,selectedClients:[...Oe]}));try{requestAnimationFrame(()=>Ce(Nt=>({...Nt,selectedClients:[...q.current||[]]})))}catch{}setTimeout(()=>Ce(Nt=>({...Nt,selectedClients:[...q.current||[]]})),32),setTimeout(()=>Ce(Nt=>({...Nt,selectedClients:[...q.current||[]]})),96)}}catch{}},[Q.selectedClients,ft,F]),v.useEffect(()=>{const ae=Date.now();if(ae<(wt.current||0)||!F||ft||ae>=(_t.current||0))return;const ke=Array.isArray(Q.selectedClients)?Q.selectedClients:[],Oe=Array.isArray(q.current)?q.current:[];if(ke.length===0&&Oe.length>0){yr(Oe);try{sessionStorage.setItem(Pe,JSON.stringify(Oe))}catch{}Ce(rt=>({...rt,selectedClients:[...Oe]})),Promise.resolve().then(()=>Ce(rt=>({...rt,selectedClients:[...q.current||[]]}))),setTimeout(()=>Ce(rt=>({...rt,selectedClients:[...q.current||[]]})),24),setTimeout(()=>Ce(rt=>({...rt,selectedClients:[...q.current||[]]})),80),setTimeout(()=>Ce(rt=>({...rt,selectedClients:[...q.current||[]]})),240)}},[Q.selectedClients,F,ft]);const[ff,cd]=v.useState([]);v.useEffect(()=>{n&&cd([])},[n]);const Ia=v.useRef(!1),Hi=v.useRef(!1),[ud,Wl]=v.useState(null);v.useState(null);const wu=v.useRef(!1);v.useEffect(()=>{const ae=Array.isArray(Q.selectedClients)?Q.selectedClients:[],ke=ud,Oe=ke&&ae.some(rt=>rt&&rt.id===ke);ae.length>0&&!Oe?Wl(ae[0]?.id||null):ae.length===0&&ke&&Wl(null)},[Q.selectedClients,F,K]);const Da=v.useRef(!1),jo=v.useRef(!1),[Gi,_u]=v.useState(ya),Yo=v.useRef(0);v.useEffect(()=>{if(!(Date.now()<(wt.current||0)))if(Ln){Yo.current||(Yo.current=Date.now());const ke=setTimeout(()=>{Ln&&(!Array.isArray(Gi)||Gi.length===0)&&la(!1)},2e3);return()=>clearTimeout(ke)}else Yo.current=0},[Ln,Gi]);const Ls=v.useMemo(()=>Array.isArray(Q.selectedClients)?Q.selectedClients:[],[Q.selectedClients]),Jh=v.useMemo(()=>{const ae=Ls||[];if(ae.length===0)return"Adicionar clientes";const ke=ae[0]?.nome||"Cliente",Oe=ae.length-1;return Oe>0?`${ke} +${Oe}`:ke},[Ls]),hf=v.useMemo(()=>{const ae=Array.isArray(Q.selectedClients)?Q.selectedClients:[],ke=Array.isArray(Ke.current)?Ke.current:[],Oe=Array.isArray(q.current)?q.current:[],rt=Array.isArray(sr)?sr:[];return ae.length>0&&ae.every(Nt=>Nt?.nome)?ae:ae.length>0?ae.map(Nt=>{if(Nt?.nome)return Nt;const dr=ke.find(Nr=>Nr?.id===Nt?.id),Yt=Oe.find(Nr=>Nr?.id===Nt?.id),Vt=rt.find(Nr=>Nr?.id===Nt?.id),Or=(Gi||[]).find(Nr=>Nr?.id===Nt?.id);return{...Nt,nome:dr?.nome||Yt?.nome||Vt?.nome||Or?.nome||Nt?.nome||"Cliente"}}):ke.length>0&&ke.every(Nt=>Nt?.nome)?ke:rt.length>0&&rt.every(Nt=>Nt?.nome)?rt:Oe.length>0&&Oe.every(Nt=>Nt?.nome)?Oe:ae},[Q.selectedClients,sr,Gi]);v.useEffect(()=>{if(!(Date.now()<(wt.current||0)))try{w("Chips:effective change",{effectiveLen:Array.isArray(Ls)?Ls.length:0,formLen:Array.isArray(Q.selectedClients)?Q.selectedClients.length:0,lastLen:Array.isArray(q.current)?q.current.length:0,pickerOpen:Kt})}catch{}},[Ls,Q.selectedClients,Kt]);const Hl=v.useRef(null),Nc=v.useRef(!1);v.useEffect(()=>{if(F){Array.isArray(ya)&&ya.length>0&&_u(ya);try{if(!Gi||Gi.length===0){const ae=A?.codigo_empresa?`clientes:list:${A.codigo_empresa}`:null;if(ae){const ke=JSON.parse(localStorage.getItem(ae)||"[]");Array.isArray(ke)&&ke.length>0&&_u(ke)}}}catch{}}},[F,ya]),v.useEffect(()=>{F||(Hl.current=null,la(!1))},[F]),v.useEffect(()=>{F||(Ia.current=!1,Hi.current=!1,La(!1),jo.current=!1)},[F]);const Mo=v.useRef(!1);v.useEffect(()=>{if(F&&!Mo.current){Mo.current=!0;try{const ae=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",ke=sessionStorage.getItem("agenda:customerPicker:closingAt"),Oe=ke?Number(ke):0,rt=Oe&&Date.now()-Oe<1e4;ae&&rt?je.current=ae:je.current||(je.current=`${Date.now()}-${Math.random().toString(36).slice(2)}`),sessionStorage.setItem("agenda:modal:sessionId",je.current)}catch{}if(!K){try{const ae=sessionStorage.getItem("agenda:customerPicker:closingAt"),ke=ae?Number(ae):0,Oe=ke&&Date.now()-ke<1e4,rt=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Nt=sessionStorage.getItem("agenda:modal:sessionId")||"",dr=sessionStorage.getItem(Pe),Yt=dr?JSON.parse(dr):[];if(Oe&&Array.isArray(Yt)&&Yt.length>0&&rt&&Nt&&rt===Nt){try{Ze.current=!0}catch{}Ce(Vt=>({...Vt,selectedClients:Yt})),q.current=Yt,Ir(Yt);try{gt.current=!1}catch{}try{Promise.resolve().then(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}try{requestAnimationFrame(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),24),setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),96);return}if(Oe&&Array.isArray(Yt)&&Yt.length>0){try{Ze.current=!0}catch{}Ce(Vt=>({...Vt,selectedClients:Yt})),q.current=Yt,Ir(Yt);try{gt.current=!1}catch{}try{Promise.resolve().then(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}try{requestAnimationFrame(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),24),setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),96);return}}catch{}try{if(Date.now()<(xe.current||0))return}catch{}try{Pt.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{const ae=sessionStorage.getItem(Pe),ke=ae?JSON.parse(ae):[],Oe=Array.isArray(q.current)?q.current:[];if(!(Array.isArray(ke)&&ke.length>0||Array.isArray(Oe)&&Oe.length>0)){try{q.current=[]}catch{}try{yr([])}catch{}try{gt.current=!1}catch{}Ce(rt=>({...rt,selectedClients:[]}))}}catch{try{q.current=[]}catch{}try{yr([])}catch{}try{gt.current=!1}catch{}Ce(ae=>({...ae,selectedClients:[]}))}}}else!F&&Mo.current;if(K)Ri.current=!1;else{if(Ri.current)return;Ri.current=!0;try{const ae=sessionStorage.getItem("agenda:customerPicker:closingAt"),ke=ae?Number(ae):0,Oe=ke&&Date.now()-ke<5e3,rt=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Nt=sessionStorage.getItem("agenda:modal:sessionId")||"",dr=sessionStorage.getItem(Pe),Yt=dr?JSON.parse(dr):[];if(Oe&&Array.isArray(Yt)&&Yt.length>0&&rt&&Nt&&rt===Nt){try{Ze.current=!0}catch{}Ce(Vt=>({...Vt,selectedClients:Yt})),q.current=Yt,Ir(Yt);try{gt.current=!1}catch{}try{Promise.resolve().then(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}try{requestAnimationFrame(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),24),setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),96);return}if(Oe&&Array.isArray(Yt)&&Yt.length>0){try{Ze.current=!0}catch{}Ce(Vt=>({...Vt,selectedClients:Yt})),q.current=Yt,Ir(Yt);try{gt.current=!1}catch{}try{Promise.resolve().then(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}try{requestAnimationFrame(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})))}catch{}setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),24),setTimeout(()=>Ce(Vt=>({...Vt,selectedClients:[...q.current||[]]})),96);return}}catch{}try{if(Date.now()<(xe.current||0))return}catch{}try{Pt.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{gt.current=!1}catch{}try{const ae=sessionStorage.getItem(Pe),ke=ae?JSON.parse(ae):[],Oe=Array.isArray(q.current)?q.current:[];if(!(Array.isArray(ke)&&ke.length>0||Array.isArray(Oe)&&Oe.length>0)){try{q.current=[]}catch{}try{yr([])}catch{}Ce(rt=>({...rt,selectedClients:[]}))}}catch{try{q.current=[]}catch{}try{yr([])}catch{}Ce(ae=>({...ae,selectedClients:[]}))}}},[F,K]);const Ri=v.useRef(!1);v.useEffect(()=>{if(!F){Ri.current=!1;try{sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt"),sessionStorage.removeItem("agenda:customerPicker:sessionId"),sessionStorage.removeItem("agenda:modal:sessionId"),je.current="",sessionStorage.removeItem(Pe);try{q.current=[]}catch{}try{yr([])}catch{}try{Ze.current=!1}catch{}try{xe.current=0}catch{}try{_t.current=0}catch{}ce(!1),L(4);try{bt.current=0}catch{}try{be.current=null}catch{}try{Pt.current=!1}catch{}Ce(ae=>({...ae,selectedClients:[]})),Wl(null)}catch{}return}if(K)Ri.current=!1;else{if(Ri.current)return;Ri.current=!0;try{if(Date.now()<(xe.current||0))return}catch{}try{Pt.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{gt.current=!1}catch{}try{const ae=sessionStorage.getItem(Pe),ke=ae?JSON.parse(ae):[],Oe=Array.isArray(q.current)?q.current:[];if(!(Array.isArray(ke)&&ke.length>0||Array.isArray(Oe)&&Oe.length>0)){try{q.current=[]}catch{}try{yr([])}catch{}Ce(rt=>({...rt,selectedClients:[]}))}}catch{try{q.current=[]}catch{}try{yr([])}catch{}Ce(ae=>({...ae,selectedClients:[]}))}}},[F,K]);const No=v.useCallback(async(ae={})=>{const{autoSave:ke=!1}=ae;if(!Ra){La(!0);try{const Oe=Ge[Q.court];if(!Oe){e({title:"Selecione uma quadra",variant:"destructive"}),Ia.current=!1,Hi.current=!1;return}const rt=Q.startMinutes,Nt=Q.endMinutes;if(!(Number.isFinite(rt)&&Number.isFinite(Nt)&&Nt>rt)){e({title:"Horrio invlido",variant:"destructive"}),Ia.current=!1,Hi.current=!1;return}if(!Ro(rt,Nt)){e({title:"Conflito de horrio",description:"O horrio selecionado est ocupado.",variant:"destructive"}),Ia.current=!1,Hi.current=!1;return}const Yt=(ca,Fa)=>new Date(ca.getFullYear(),ca.getMonth(),ca.getDate(),Math.floor(Fa/60),Fa%60,0,0),Vt=Yt(Q.date,rt),Or=Yt(Q.date,Nt);let Nr=Array.isArray(Q.selectedClients)&&Q.selectedClients.length>0?Q.selectedClients:Array.isArray(Ke.current)?Ke.current:[];if((!Nr||Nr.length===0)&&K?.id)try{const ca=Array.isArray(q.current)?q.current:[];ca&&ca.length>0&&(Nr=ca,Ce(Fa=>({...Fa,selectedClients:ca})))}catch{}const Pn=Nr[0],$a=Nr.map(De).filter(Boolean);if(!K?.id&&!Pn?.id){e({title:"Selecione um cliente",description:"Para criar um agendamento, selecione pelo menos um cliente.",variant:"destructive"});return}if(K?.id){const ca=K.status,Fa=Q.status!==ca,Cc={quadra_id:Oe.id,cliente_id:Pn?.id??null,clientes:$a,inicio:Vt.toISOString(),fim:Or.toISOString(),modalidade:Q.modality};if(!Fa){let ua=Q.status;try{const Xo=Sa(),gf=Vt.getTime();if(!!nr?.autoConfirmEnabled&&Number.isFinite(Number(nr?.autoConfirmMinutesBefore))){const q1=Number(nr.autoConfirmMinutesBefore)*6e4,Lx=gf-q1;ua==="confirmed"&&Xo<Lx?ua="scheduled":ua==="scheduled"&&Xo>=Lx&&(ua="confirmed")}}catch{}Cc.status=ua}const{error:no}=await Ne.from("agendamentos").update(Cc).eq("codigo_empresa",A.codigo_empresa).eq("id",K.id);if(no)throw no;const{data:ll}=await Ne.from("agendamento_participantes").select("*").eq("codigo_empresa",A.codigo_empresa).eq("agendamento_id",K.id),Ki=new Map;(ll||[]).forEach(ua=>{Ki.set(ua.cliente_id,ua)});const{error:ao}=await Ne.from("agendamento_participantes").delete().eq("codigo_empresa",A.codigo_empresa).eq("agendamento_id",K.id);if(ao&&console.error("Erro ao deletar participantes:",ao),Nr&&Nr.length>0){const ua=Nr.map(gf=>{const fd=Ki.get(gf.id);return{codigo_empresa:A.codigo_empresa,agendamento_id:K.id,cliente_id:gf.id,nome:gf.nome,valor_cota:fd?.valor_cota??0,status_pagamento:fd?.status_pagamento??"Pendente",finalizadora_id:fd?.finalizadora_id??null,aplicar_taxa:fd?.aplicar_taxa??!1,pago_em:fd?.pago_em??null}}),{error:Xo}=await Ne.from("agendamento_participantes").insert(ua);Xo&&console.error("Erro ao inserir participantes:",Xo)}const Fs=Pn?.nome||Pn?.name||De(Pn)||$a[0]||K.customer,Ac={...K,court:Q.court,customer:Fs,start:Vt,end:Or,modality:Q.modality,...Fa?{}:{status:Cc.status??Q.status}};if(W(ua=>ua.map(Xo=>Xo.id===K.id?Ac:Xo)),he(Ac),Fa)try{$(!1),await Bt(K.id,Q.status,"user")}catch{}ke||e({title:"Agendamento atualizado"}),Hi.current=!0,Ia.current=!1;const Rx=Nr.map(ua=>{const Xo=Ki.get(ua.id);return{cliente_id:ua.id,nome:ua.nome,codigo:ua.codigo||null,valor_cota:Xo?.valor_cota??0,status_pagamento:Xo?.status_pagamento??"Pendente",finalizadora_id:Xo?.finalizadora_id??null,aplicar_taxa:Xo?.aplicar_taxa??!1}});me(ua=>({...ua,[K.id]:Rx})),m(Rx.map(ua=>({cliente_id:ua.cliente_id,nome:ua.nome,codigo:ua.codigo,valor_cota:ua.valor_cota?cg(String(Number(ua.valor_cota).toFixed(2))):"",status_pagamento:ua.status_pagamento,finalizadora_id:ua.finalizadora_id?String(ua.finalizadora_id):x?.[0]?.id?String(x[0].id):null,aplicar_taxa:ua.aplicar_taxa})));try{await t()}catch(ua){console.error("[AgendaPage] Erro ao recarregar alertas:",ua)}if(!ke){try{q.current=[]}catch{}try{yr([])}catch{}try{sessionStorage.removeItem(Pe)}catch{}$(!1)}return}let ti=null;try{const{data:ca}=await Ne.from("agendamentos").select("id, status, codigo").eq("codigo_empresa",A.codigo_empresa).eq("quadra_id",Oe.id).eq("inicio",Vt.toISOString()).eq("fim",Or.toISOString()).limit(1);Array.isArray(ca)&&ca.length>0&&(ti=ca[0])}catch{}if(ti?.id&&ti.status!=="canceled"){const ca={id:ti.id,code:ti.codigo,court:Q.court,customer:Pn?.nome||$a[0]||"",start:Vt,end:Or,status:Q.status,modality:Q.modality};W(Fa=>Fa.some(no=>no.id===ti.id)?Fa:[...Fa,ca]),e({title:"Agendamento confirmado"}),Hi.current=!0,$(!1);return}if(H&&oe>1){const ca=[],Fa=[];for(let Ki=0;Ki<oe;Ki++){const ao=wi(Q.date,Ki*7),Fs=new Date(ao);Fs.setHours(Math.floor(Q.startMinutes/60),Q.startMinutes%60,0,0);const Ac=new Date(ao);Ac.setHours(Math.floor(Q.endMinutes/60),Q.endMinutes%60,0,0),ca.push({codigo_empresa:A.codigo_empresa,quadra_id:Oe.id,cliente_id:Pn?.id??null,clientes:$a,inicio:Fs.toISOString(),fim:Ac.toISOString(),modalidade:Q.modality,status:Q.status})}const{data:Cc,error:no}=await Ne.from("agendamentos").insert(ca).select("id, codigo, inicio, fim");if(no)throw no;const ll=[];for(const Ki of Cc){const ao=(Q.selectedClients||[]).map(Fs=>({codigo_empresa:A.codigo_empresa,agendamento_id:Ki.id,cliente_id:Fs.id,nome:Fs.nome,valor_cota:0,status_pagamento:"Pendente"}));ll.push(...ao),Fa.push({id:Ki.id,code:Ki.codigo,court:Q.court,customer:Pn?.nome||$a[0]||"",start:new Date(Ki.inicio),end:new Date(Ki.fim),status:Q.status,modality:Q.modality})}ll.length>0&&await Ne.from("agendamento_participantes").insert(ll),W(Ki=>[...Ki,...Fa]),e({title:`${oe} Agendamentos criados!`,description:"Agendamentos recorrentes criados com sucesso.",variant:"success"}),ce(!1),L(4)}else{const{data:ca,error:Fa}=await Ne.from("agendamentos").insert({codigo_empresa:A.codigo_empresa,quadra_id:Oe.id,cliente_id:Pn?.id??null,clientes:$a,inicio:Vt.toISOString(),fim:Or.toISOString(),modalidade:Q.modality,status:Q.status}).select("id, codigo").single();if(Fa)throw Fa;const Cc={id:ca.id,code:ca.codigo,court:Q.court,customer:Pn?.nome||$a[0]||"",start:Vt,end:Or,status:Q.status,modality:Q.modality};W(no=>[...no,Cc]),e({title:"Agendamento criado"});try{await t()}catch(no){console.error("[AgendaPage] Erro ao recarregar alertas:",no)}try{const no=(Q.selectedClients||[]).map(ll=>({codigo_empresa:A.codigo_empresa,agendamento_id:ca.id,cliente_id:ll.id,nome:ll.nome,valor_cota:0,status_pagamento:"Pendente"}));if(no.length>0){const{error:ll}=await Ne.from("agendamento_participantes").insert(no);if(!ll){const Ki=no.map(ao=>({agendamento_id:ao.agendamento_id,cliente_id:ao.cliente_id,nome:Q.selectedClients.find(Fs=>Fs.id===ao.cliente_id)?.nome||"",codigo:Q.selectedClients.find(Fs=>Fs.id===ao.cliente_id)?.codigo||null,valor_cota:ao.valor_cota,status_pagamento:ao.status_pagamento}));me(ao=>({...ao,[ca.id]:Ki}))}}}catch{}}Hi.current=!0,Ia.current=!1;try{q.current=[]}catch{}try{yr([])}catch{}try{sessionStorage.removeItem(Pe)}catch{}$(!1)}catch(Oe){e({title:"Erro ao salvar agendamento",description:Oe?.message||"Tentando novamente automaticamente",variant:"destructive"})}finally{La(!1)}}},[Ra,Ge,Q,K,A,Ro,W,e,$,Bt]);v.useEffect(()=>{if(!K?.id){hs.current=!1,Vl.current=null;return}if(!jo.current||!hs.current){const ke=setTimeout(()=>{jo.current&&(hs.current=!0,Vl.current=JSON.stringify({court:Q.court,startMinutes:Q.startMinutes,endMinutes:Q.endMinutes,modality:Q.modality,status:Q.status,selectedClients:Q.selectedClients}))},500);return()=>clearTimeout(ke)}const ae=JSON.stringify({court:Q.court,startMinutes:Q.startMinutes,endMinutes:Q.endMinutes,modality:Q.modality,status:Q.status,selectedClients:Q.selectedClients});if(ae!==Vl.current)return Jn.current&&clearTimeout(Jn.current),Jn.current=setTimeout(async()=>{if(!Ge[Q.court])return;const Oe=Q.startMinutes,rt=Q.endMinutes;if(!(!(Number.isFinite(Oe)&&Number.isFinite(rt)&&rt>Oe)||!Ro(Oe,rt))){console.log(" [Auto-save] Salvando alteraes..."),Ai(!0);try{await No({autoSave:!0}),Vl.current=ae,console.log(" [Auto-save] Salvo com sucesso!")}catch(dr){console.error(" [Auto-save] Erro ao salvar:",dr)}finally{Ai(!1)}}},1500),()=>{Jn.current&&clearTimeout(Jn.current)}},[K?.id,Q.court,Q.startMinutes,Q.endMinutes,Q.modality,Q.status,Q.selectedClients,Ge,Ro,No]),v.useEffect(()=>{const ae=async()=>{if(!F||!A?.codigo_empresa)return;const ke=String(A.codigo_empresa);if(Hl.current!==ke)try{la(!0);try{const Nt=`clientes:list:${A.codigo_empresa}`,dr=JSON.parse(localStorage.getItem(Nt)||"[]");if(Array.isArray(dr)&&dr.length>0){_u(dr);try{ui(Yt=>JSON.stringify(Yt)===JSON.stringify(dr)?Yt:dr)}catch{}}}catch{}const{data:Oe,error:rt}=await Ne.from("clientes").select("id, nome, codigo, email, telefone, status, codigo_empresa, is_consumidor_final").eq("codigo_empresa",A.codigo_empresa).eq("status","active").eq("flag_cliente",!0).order("nome",{ascending:!0});if(rt){console.error("Falha ao carregar clientes:",rt);return}if(Array.isArray(Oe)){if(Oe.length===0){let Nt=0;try{const dr=`clientes:list:${A.codigo_empresa}`,Yt=JSON.parse(localStorage.getItem(dr)||"[]");Nt=Array.isArray(Yt)?Yt.length:0}catch{}if(Nt>0&&!Nc.current){Nc.current=!0,setTimeout(ae,700);return}}Nc.current=!1,Hl.current=ke,_u(Oe);try{const Nt=`clientes:list:${A.codigo_empresa}`;localStorage.setItem(Nt,JSON.stringify(Oe))}catch{}try{ui(Nt=>JSON.stringify(Nt)===JSON.stringify(Oe)?Nt:Oe)}catch{}}}catch{}finally{la(!1)}};ae()},[F,A?.codigo_empresa]),v.useEffect(()=>{const ae=Ge[Q.court];if(!ae)return;const ke=Number(ae.valor||0);if(!Number.isFinite(ke)||ke<=0)return;const Oe=Math.max(0,Q.endMinutes-Q.startMinutes);if(Oe<=0)return;const rt=Oe/Qn,Nt=Math.round(ke*rt*100)/100;p(cg(String(Nt.toFixed(2))))},[Ge,Q.court,Q.startMinutes,Q.endMinutes]),v.useEffect(()=>{if(F&&!jo.current)if(K){const ae=gd(K.start)*60+vd(K.start),ke=gd(K.end)*60+vd(K.end),Oe=te[K.id]||[],rt=Oe.filter(Yt=>Yt&&Yt.cliente_id).map(Yt=>({id:Yt.cliente_id,nome:Yt.nome,codigo:Yt.codigo||null})),Nt=Ge[K.court]?.modalidades||sm,dr=Nt.includes(K.modality)?K.modality:Nt[0]||"";Ce({selectedClients:rt,court:K.court,modality:dr,status:K.status,date:Pl(K.start),startMinutes:ae,endMinutes:ke}),Da.current=!0,m(Oe.map(Yt=>({cliente_id:Yt.cliente_id,nome:Yt.nome,codigo:Yt.codigo,valor_cota:(()=>{const Vt=Number.isFinite(Number(Yt.valor_cota))?Number(Yt.valor_cota):bd(Yt.valor_cota);return cg(String((Number.isFinite(Vt)?Vt:0).toFixed(2)))})(),status_pagamento:Yt.status_pagamento||"Pendente",finalizadora_id:Yt.finalizadora_id?String(Yt.finalizadora_id):null,aplicar_taxa:Yt.aplicar_taxa||!1}))),Wl(rt[0]?.id||null),rt.length===0&&(async()=>{try{const{data:Yt,error:Vt}=await Ne.from("agendamento_participantes").select("cliente_id, nome, valor_cota, status_pagamento, finalizadora_id, aplicar_taxa, cliente:clientes!agendamento_participantes_cliente_id_fkey ( nome, codigo )").eq("codigo_empresa",A.codigo_empresa).eq("agendamento_id",K.id);if(!Vt&&Array.isArray(Yt)){const Or=Yt.filter(Nr=>Nr&&Nr.cliente_id).map(Nr=>({id:Nr.cliente_id,nome:Nr.nome||Nr.cliente?.nome||"",codigo:Nr.cliente?.codigo||null}));Ce(Nr=>({...Nr,selectedClients:Or})),m(Yt.map(Nr=>({cliente_id:Nr.cliente_id,nome:Nr.nome||Nr.cliente?.nome||"",codigo:Nr.cliente?.codigo||null,valor_cota:(()=>{const Pn=Number.isFinite(Number(Nr.valor_cota))?Number(Nr.valor_cota):bd(Nr.valor_cota);return cg(String((Number.isFinite(Pn)?Pn:0).toFixed(2)))})(),status_pagamento:Nr.status_pagamento||"Pendente",finalizadora_id:Nr.finalizadora_id?String(Nr.finalizadora_id):null,aplicar_taxa:Nr.aplicar_taxa||!1}))),Wl(Or[0]?.id||null)}}catch(Yt){console.error("Falha ao carregar participantes (fallback)",Yt)}})(),jo.current=!0,Vl.current=JSON.stringify({court:K.court,startMinutes:ae,endMinutes:ke,modality:dr,status:K.status,selectedClients:rt})}else if(Cr){const ae=(Xe||[]).includes(Cr.court)?Cr.court:(Xe||[])[0]||"";Ce({selectedClients:Ze.current?Array.isArray(Q.selectedClients)?Q.selectedClients:[]:[],court:ae,modality:(()=>(Ge[ae]?.modalidades||sm)[0]||"")(),status:"scheduled",date:Cr.date??O,startMinutes:Cr.startMinutes??nt(),endMinutes:Cr.endMinutes??nt()+60}),m([]),Da.current=!0,jo.current=!0}else{const ae=Xe[0]||"",ke=Ge[ae]?.modalidades||sm,Oe=Array.isArray(sr)?sr:[],rt=Ze.current?Array.isArray(Q.selectedClients)?Q.selectedClients:[]:Oe.length>0?Oe:[];if(!Ze.current&&Oe.length>0)try{Ze.current=!0}catch{}Ce({selectedClients:rt,court:ae,modality:ke[0]||"",status:"scheduled",date:O,startMinutes:nt(),endMinutes:nt()+60}),m([]),Da.current=!0,jo.current=!0}},[F,K,O,Cr,Xe,sm,te]),v.useEffect(()=>{if(F&&K){jo.current=!1,wu.current=!1,Ze.current||Ce(ae=>({...ae,selectedClients:[]}));try{gt.current=!1}catch{}}},[K,F]),v.useEffect(()=>{if(!F||!K||wu.current||hs.current)return;const ae=te[K.id]||[];if(!ae.length)return;const ke=ae.filter(Oe=>Oe&&Oe.cliente_id).map(Oe=>({id:Oe.cliente_id,nome:Oe.nome,codigo:Oe.codigo||null}));ke.length>0&&(Ce(Oe=>({...Oe,selectedClients:ke})),m(ae.map(Oe=>({cliente_id:Oe.cliente_id,nome:Oe.nome,codigo:Oe.codigo||null,valor_cota:(()=>{const rt=Number.isFinite(Number(Oe.valor_cota))?Number(Oe.valor_cota):bd(Oe.valor_cota);return cg(String((Number.isFinite(rt)?rt:0).toFixed(2)))})(),status_pagamento:Oe.status_pagamento||"Pendente",finalizadora_id:Oe.finalizadora_id||null,aplicar_taxa:Oe.aplicar_taxa||!1}))),Wl(ke[0]?.id||null),wu.current=!0)},[F,K,te]),v.useEffect(()=>{const ae=ke=>{if(F&&!n){if(ke.key==="Escape"){if(ke.preventDefault(),K?.id){console.log(" [Auto-save] Salvando ao fechar modal (ESC)..."),Jn.current&&clearTimeout(Jn.current),No({autoSave:!0}).then(()=>{console.log(" [Auto-save] Salvo ao fechar (ESC)!"),$(!1)}).catch(Oe=>{console.error(" [Auto-save] Erro ao salvar ao fechar (ESC):",Oe),$(!1)});return}$(!1)}ke.key==="Enter"&&!["INPUT","TEXTAREA"].includes(ke.target.tagName)&&(ke.preventDefault(),!Ia.current&&!Hi.current&&(Ia.current=!0,Hi.current=!1,No().catch(()=>{}))),K&&(ke.key==="F3"&&(ke.preventDefault(),On(!0)),ke.key==="F4"&&(ke.preventDefault(),a()))}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[F,K,n,a,On,No,Ia,Hi,$,Q]);const Pi=v.useMemo(()=>{const ae=Ge[Q.court];if(!ae)return{start:pr*60,end:kr*60};const[ke,Oe]=String(ae.hora_inicio||"06:00:00").split(":").map(Number),[rt,Nt]=String(ae.hora_fim||"24:00:00").split(":").map(Number);return{start:ke*60+(Oe||0),end:rt*60+(Nt||0)}},[Ge,Q.court,pr,kr]),sl=v.useMemo(()=>{const ae=ln(Q.date,"yyyy-MM-dd"),ke=Oe=>gd(Oe)*60+vd(Oe);return B.filter(Oe=>Oe.court===Q.court&&ln(Oe.start,"yyyy-MM-dd")===ae&&Oe.status!=="canceled"&&(!K||Oe.id!==K.id)).map(Oe=>[ke(Oe.start),ke(Oe.end)]).sort((Oe,rt)=>Oe[0]-rt[0])},[B,Q.court,Q.date,K]),Qh=(ae,ke,Oe,rt)=>ae<rt&&Oe<ke;function Ro(ae,ke){if(ke<=ae||ae<Pi.start||ke>Pi.end)return!1;for(const[Oe,rt]of sl)if(Qh(ae,ke,Oe,rt))return!1;return!0}const fi=ae=>{let ke=ae+Qn;if(!Ro(ae,ke))return null;for(;ke+Qn<=Pi.end&&Ro(ae,ke+Qn);)ke+=Qn;return ke},Up=v.useMemo(()=>{const ae=Pi,ke=[];for(let Oe=ae.start;Oe<=ae.end-Qn;Oe+=Qn){const rt=Ro(Oe,Oe+Qn),Nt=Math.floor(Oe/60),dr=Oe%60;ke.push({value:Oe,label:`${String(Nt).padStart(2,"0")}:${String(dr).padStart(2,"0")}`,available:rt})}return ke},[Pi,sl]),Gl=v.useMemo(()=>{const ae=fi(Q.startMinutes),ke=[];for(let Oe=Q.startMinutes+Qn;Oe<=Pi.end;Oe+=Qn){const rt=!!ae&&Oe<=ae,Nt=Math.floor(Oe/60),dr=Oe%60;ke.push({value:Oe,label:`${String(Nt).padStart(2,"0")}:${String(dr).padStart(2,"0")}`,available:rt})}return ke},[Q.startMinutes,sl,Pi]);v.useEffect(()=>{if(Da.current){Da.current=!1;return}const ke=(()=>{if(Ro(Q.startMinutes,Q.startMinutes+Qn))return Q.startMinutes;for(let Nt=Math.max(Pi.start,Q.startMinutes);Nt<=Pi.end-Qn;Nt+=Qn)if(Ro(Nt,Nt+Qn))return Nt;for(let Nt=Pi.start;Nt<=Pi.end-Qn;Nt+=Qn)if(Ro(Nt,Nt+Qn))return Nt;return Q.startMinutes})();if(ke!==Q.startMinutes){Ce(Nt=>({...Nt,startMinutes:ke}));return}const Oe=fi(ke);if(!Oe)return;let rt=Q.endMinutes;(!Number.isFinite(rt)||rt<=ke||rt>Oe)&&(rt=Math.min(ke+60,Oe),rt<ke+Qn&&(rt=ke+Qn),Ce(Nt=>({...Nt,endMinutes:rt})))},[Q.startMinutes,Q.court,Q.date,sl,Pi]);const Kl=v.useMemo(()=>Ge[Q.court]?.modalidades||sm,[Ge,Q.court]);v.useEffect(()=>{const ae=Ge[Q.court]?.modalidades||sm;ae.includes(Q.modality)||Ce(ke=>({...ke,modality:ae[0]||""}))},[Q.court,Ge]);const Zh=v.useMemo(()=>{const ae=Math.max(0,Q.endMinutes-Q.startMinutes),ke=Math.floor(ae/60),Oe=ae%60;return ke>0&&Oe>0?`${ke}h ${Oe}min`:ke>0?`${ke}h`:`${Oe}min`},[Q.startMinutes,Q.endMinutes]),mf=v.useMemo(()=>{if(!F)return"";const ae=new Date,ke=gd(ae)*60+vd(ae),Oe=Number(Q.startMinutes),rt=Number(Q.endMinutes),Nt=dr=>{const Yt=Math.floor(dr/60),Vt=dr%60;return`${String(Yt).padStart(2,"0")}:${String(Vt).padStart(2,"0")}`};if(nr.autoConfirmEnabled&&Q.status==="scheduled"){const dr=Math.max(0,Oe-Number(nr.autoConfirmMinutesBefore||0));if(ke<dr)return`Este agendamento est com automao ativa (Confirmar automaticamente s ${Nt(dr)})`}return nr.autoStartEnabled&&Q.status==="confirmed"&&ke<Oe?`Este agendamento est com automao ativa (Iniciar automaticamente s ${Nt(Oe)})`:nr.autoFinishEnabled&&Q.status==="in_progress"&&ke<rt?`Este agendamento est com automao ativa (Finalizar automaticamente s ${Nt(rt)})`:""},[F,Q.startMinutes,Q.endMinutes,Q.status,nr]),pf=v.useMemo(()=>(h||[]).length,[h]),dd=v.useMemo(()=>{const ke=(h||[]).map(Vt=>{const Or=bd(Vt?.valor_cota);return Number.isFinite(Or)?Or:0}).reduce((Vt,Or)=>Vt+Or,0),Oe=bd(g),rt=Number.isFinite(Oe)?Oe:0,Nt=Number((rt-ke).toFixed(2));let dr=0,Yt=0;for(const Vt of h||[])(Vt?.status_pagamento||"Pendente")==="Pago"?dr++:Yt++;return{totalAssigned:ke,totalTarget:rt,diff:Nt,paid:dr,pending:Yt}},[h,g]);v.useEffect(()=>{const ae=bd(g);if(!Number.isFinite(ae)||ae<=0)return;(h||[]).some(Oe=>bd(Oe?.valor_cota)>=ae)&&(h||[]).some(Oe=>Oe.status_pagamento!=="Pago")&&m(Oe=>Oe.map(rt=>({...rt,status_pagamento:"Pago"})))},[h,g]),v.useCallback(()=>{const ae=(Q.selectedClients||[]).length;if(!ae)return;const ke=bd(g);if(!Number.isFinite(ke)||ke<0)return;const Oe=Math.round(ke*100),rt=Math.floor(Oe/ae);let Nt=Oe-rt*ae;m(dr=>{const Yt=new Map(dr.map(Or=>[Or.cliente_id,Or]));return(Q.selectedClients||[]).slice().forEach((Or,Nr)=>{const Pn=rt+(Nt>0?1:0);Nt>0&&Nt--;const $a=(Pn/100).toFixed(2),ti=cg(String($a)),ca=bd(ti),Fa=Yt.get(Or.id)||{cliente_id:Or.id,nome:Or.nome,status_pagamento:"Pendente",valor_cota:""};Fa.valor_cota=ti,Fa.status_pagamento=Number.isFinite(ca)&&ca>0?"Pago":"Pendente",Yt.set(Or.id,Fa)}),Array.from(Yt.values())})},[Q.selectedClients,g,m]),v.useCallback(()=>{m(ae=>ae.map(ke=>({...ke,valor_cota:"",status_pagamento:"Pendente"})))},[m]);const $s=v.useCallback(()=>{try{Pt.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{be.current="close"}catch{}try{at(!1),mt(!1)}catch{}},[]);return o.jsxs(o.Fragment,{children:[cr&&o.jsx(cn,{open:!0,onOpenChange:ae=>{if(!ae&&cr){try{cr.resolve(!1)}catch{}wr(null)}},children:o.jsxs(on,{onOpenAutoFocus:ae=>ae.preventDefault(),children:[o.jsxs(an,{children:[o.jsx(en,{children:"Reativar automao?"}),o.jsx(hn,{children:"Ao reativar, este agendamento voltar a ser atualizado automaticamente (incio e trmino) pelas regras da agenda."})]}),o.jsx($n,{children:o.jsxs("div",{className:"ml-auto flex gap-2",children:[o.jsx(ye,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>{try{cr?.resolve(!1)}catch{}wr(null)},children:"Cancelar"}),o.jsx(ye,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white",onClick:()=>{try{cr?.resolve(!0)}catch{}wr(null)},children:"Reativar"})]})})]})}),F&&o.jsx(cn,{open:!0,onOpenChange:ae=>{if(ae)$(!0);else{try{const ke=Date.now()<(bt.current||0);if(ft||Ur||ke){try{const Oe={ts:new Date().toISOString(),hook:"Dialog:onOpenChange(blocked)",effectiveCustomerPickerOpen:ft,isClientFormOpen:Ur,suppressUntil:bt.current,formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:Array.isArray(Ke.current)?Ke.current.length:NaN,lastLen:Array.isArray(q.current)?q.current.length:NaN};console.warn("[CustomerPicker][DIALOG:block-close]",Oe)}catch{}return}}catch{}try{const ke={ts:new Date().toISOString(),hook:"Dialog:onOpenChange(allow-close)",effectiveCustomerPickerOpen:ft,isClientFormOpen:Ur,suppressUntil:bt.current,formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:Array.isArray(Ke.current)?Ke.current.length:NaN,lastLen:Array.isArray(q.current)?q.current.length:NaN};console.warn("[CustomerPicker][DIALOG:allow-close]",ke)}catch{}if(n){console.log("[Dialog] Tentativa de fechar modal principal bloqueada - modal de pagamentos est aberto");return}$(!1),he(null),zn(null),i(),wu.current=!1,ce(!1),L(4)}},children:o.jsxs(on,{forceMount:!0,disableAnimations:!0,alignTop:!0,className:"sm:max-w-[960px] max-h-[85vh] min-h-[360px] flex flex-col p-0",onOpenAutoFocus:ae=>ae.preventDefault(),onInteractOutside:async ae=>{try{const ke=Date.now()<(bt.current||0);if(n||ft||Ur||ke){try{const Oe={ts:new Date().toISOString(),hook:"DialogContent:onInteractOutside(blocked)",effectiveCustomerPickerOpen:ft,isClientFormOpen:Ur,isPaymentModalOpen:n,suppressUntil:bt.current,formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:Array.isArray(Ke.current)?Ke.current.length:NaN,lastLen:Array.isArray(q.current)?q.current.length:NaN}}catch{}ae.preventDefault();return}if(K?.id){ae.preventDefault(),console.log(" [Auto-save] Salvando ao clicar fora do modal...");try{Jn.current&&clearTimeout(Jn.current),await No({autoSave:!0}),console.log(" [Auto-save] Salvo ao clicar fora!")}catch(Oe){console.error(" [Auto-save] Erro ao salvar ao clicar fora:",Oe)}finally{$(!1)}return}}catch{}},onEscapeKeyDown:ae=>{try{const ke=Date.now()<(bt.current||0);if(n||ft||Ur||ke){ae.preventDefault();return}}catch{}},children:[o.jsxs(an,{className:"px-6 pt-6 pb-4 flex-shrink-0",children:[o.jsxs(en,{className:"flex items-center justify-between gap-3 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{children:K?(()=>{const ae=K?.code,ke=typeof ae=="number"?String(ae).padStart(3,"0"):null;return ke?`Editar agendamento - ${ke}`:"Editar Agendamento"})():"Novo Agendamento"}),di&&o.jsxs("span",{className:"inline-flex items-center gap-2 px-2.5 py-1 rounded-full border text-xs bg-blue-600/10 text-blue-400 border-blue-700/30",children:[o.jsxs("svg",{className:"w-3 h-3 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Salvando..."]})]}),K&&(()=>{dd?.pending===0&&pf>0;const ae=(dd?.pending||0)>0,ke="inline-flex items-center gap-2 px-2.5 py-1 rounded-full border text-xs",Oe="bg-emerald-600/10 text-emerald-400 border-emerald-700/30",rt="bg-amber-600/15 text-amber-400 border-amber-700/30",Nt=dr=>o.jsx("span",{"aria-hidden":!0,className:`inline-block w-2 h-2 rounded-full ${dr}`});return o.jsxs("span",{className:`${ke} ${ae?rt:Oe}`,title:ae?"H pagamentos pendentes":"Todos participantes pagos","aria-live":"polite",children:[Nt(ae?"bg-amber-400":"bg-emerald-400"),o.jsx("span",{className:"tracking-wide",children:"Pagos"}),o.jsx("strong",{className:"text-base font-semibold tabular-nums",children:dd?.paid||0}),o.jsx("span",{className:"opacity-60",children:"/"}),o.jsx("span",{className:"text-base font-semibold tabular-nums",children:pf})]})})(),o.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-md border text-sm bg-white/5 border-white/10 text-text-primary",title:"Data do agendamento",children:[o.jsx(Uu,{className:"w-4 h-4 opacity-80"}),o.jsxs("span",{className:"font-semibold",children:[ln(Q.date,"dd/MM/yyyy"),(()=>{const ae=Number(Q?.startMinutes),ke=Number(Q?.endMinutes);if(!(Number.isFinite(ae)&&Number.isFinite(ke)&&ke>ae))return"";const rt=Nt=>`${String(Math.floor(Nt/60)).padStart(2,"0")}:${String(Nt%60).padStart(2,"0")}`;return`  ${rt(ae)}${rt(ke)}`})()]})]})]}),o.jsx(hn,{children:K?"As alteraes so salvas automaticamente enquanto voc edita.":"Preencha os detalhes para criar uma nova reserva."})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pb-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"clientes-field",className:"font-bold",children:"Clientes"}),o.jsxs("div",{className:"flex gap-2 mt-1",children:[o.jsxs(rf,{modal:!1,open:ft,onOpenChange:ae=>{const ke=Date.now(),Oe=ke<(_t.current||0)||ke<(bt.current||0)||ke<(er.current||0)||Wt();if(!((Ur||Ln)&&ae===!1)){if(!ae&&Oe){yi("onOpenChange:blocked:guard-window");return}if(!ae&&be.current!=="close"){yi("onOpenChange:blocked:sticky-close");return}if(ae){Pt.current=!0;try{localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}mt(!0),yi("open:accepted")}else{Pt.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{const rt=Array.isArray(Ke.current)?[...Ke.current]:[];if(rt.length>0){ge.current="onOpenChange:close:preserve";try{sessionStorage.setItem(Pe,JSON.stringify(rt))}catch{}Ir(rt),ro("onOpenChange:close:preserve",rt)}else gt.current||(ge.current="onOpenChange:close:empty",ro("onOpenChange:close:empty",[]))}catch{}try{bt.current=Date.now()+1500}catch{}try{const rt={ts:new Date().toISOString(),hook:"onOpenChange(false)",formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:Array.isArray(Ke.current)?Ke.current.length:NaN,lastLen:Array.isArray(q.current)?q.current.length:NaN,chipsLen:Array.isArray(sr)?sr.length:NaN,clientsLoading:!!Ln,lastAction:ge?.current,clearedByUser:!!gt?.current,suppressUntil:bt.current};console.warn("[CustomerPicker][CLOSE:onOpenChange]",rt)}catch{}mt(!1),yi("close:accepted")}!ae&&T.current&&(fs(!0),T.current=!1,setTimeout(()=>fs(!1),1200)),be.current=ae?"open":"close",at(ae)}},children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{type:"button",variant:"outline",className:kt("min-w-[180px] justify-between",Ci&&"ring-2 ring-emerald-500/40 ring-offset-2 ring-offset-transparent transition-shadow"),onClick:()=>{yi("trigger:click");try{be.current="open"}catch{}try{Pt.current=!0,localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}at(!0),mt(!0),setTimeout(()=>{at(!0),mt(!0),yi("trigger:reassert-open")},30),yi("trigger:after-set-open")},children:[Jh,o.jsx(__,{className:"w-4 h-4 ml-2 opacity-60"})]})}),o.jsx(ad,{forceMount:!0,side:"bottom",align:"start",className:"w-[360px] p-2 z-[9999]",onPointerDownOutside:ae=>{const ke=Date.now();if(ke<(_t.current||0)||ke<(bt.current||0)||ke<(er.current||0)||Wt()){ae.preventDefault();return}if(Ur||Ln){ae.preventDefault();return}try{const rt=Array.isArray(Ke.current)?[...Ke.current]:[];if(rt.length>0){ge.current="outside:close:snapshot",q.current=rt;try{sessionStorage.setItem(Pe,JSON.stringify(rt))}catch{}Ir(rt),ro("outside:close:apply",rt),gt.current=!1}else{if(ge.current="outside:close:empty",gt.current){q.current=[];try{sessionStorage.removeItem(Pe)}catch{}console.warn("[CustomerPicker][outside:close:empty:cleared]",{ts:new Date().toISOString()})}ro("outside:close:empty",[])}}catch{}try{bt.current=Date.now()+1500}catch{}try{const rt={ts:new Date().toISOString(),hook:"onPointerDownOutside",formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:Array.isArray(Ke.current)?Ke.current.length:NaN,lastLen:Array.isArray(q.current)?q.current.length:NaN,chipsLen:Array.isArray(sr)?sr.length:NaN,clientsLoading:!!Ln,lastAction:ge?.current,clearedByUser:!!gt?.current,suppressUntil:bt.current}}catch{}T.current=!0,be.current="close",Pt.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}at(!1),mt(!1)},onFocusOutside:ae=>{yi("focusOutside"),(Ur||Ln)&&ae.preventDefault()},onEscapeKeyDown:ae=>{yi("escapeKeyDown"),(Ur||Ln)&&ae.preventDefault()},children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{ref:nn,placeholder:"Buscar por cdigo ou nome...",value:Dt,onChange:ae=>fr(ae.target.value),className:"pl-10 pr-10"}),Dt&&o.jsx("button",{type:"button","aria-label":"Limpar busca",className:"absolute right-2 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary p-1 rounded hover:bg-white/10",onClick:()=>{fr(""),nn.current?.focus()},children:o.jsx(Vu,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"max-h-[260px] overflow-y-auto divide-y divide-border rounded-md border border-border",onWheel:ae=>{ae.stopPropagation()},onTouchMove:ae=>{ae.stopPropagation()},style:{overscrollBehavior:"contain"},children:[Ln&&(Gi||[]).length===0&&o.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Carregando clientes"}),!Ln&&(Gi||[]).length===0&&o.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Nenhum cliente encontrado"}),!Ln&&(()=>{const ae=(Gi||[]).filter(dr=>{const Yt=Dt.trim().toLowerCase();return Yt?String(Ie(dr)||"").toLowerCase().includes(Yt):!0}),ke=ae.find(dr=>dr?.is_consumidor_final===!0),rt=ae.filter(dr=>dr?.is_consumidor_final!==!0).slice().sort((dr,Yt)=>{const Vt=typeof dr=="object"&&Number.isFinite(Number(dr?.codigo))?Number(dr.codigo):1/0,Or=typeof Yt=="object"&&Number.isFinite(Number(Yt?.codigo))?Number(Yt.codigo):1/0;if(Vt!==Or)return Vt-Or;const Nr=String(De(dr)||"").toLowerCase(),Pn=String(De(Yt)||"").toLowerCase();return Nr.localeCompare(Pn)});return ke?[ke,...rt]:rt})().map(ae=>{const ke=ae?.is_consumidor_final===!0,Oe=typeof ae=="object"?ae.id:null,rt=De(ae),Nt=typeof ae=="object"?ae.codigo:null,dr=String(rt||"").toLowerCase(),Yt=Or=>Or.id&&Oe?Or.id===Oe:String(Or.nome||"").toLowerCase()===dr,Vt=(Q.selectedClients||[]).some(Yt);return o.jsxs("button",{type:"button",className:`w-full text-left py-3 px-4 flex items-center gap-3 transition-all border-b border-border last:border-0 ${ke?"bg-gradient-to-r from-amber-500/5 to-transparent hover:from-amber-500/10 border-l-2 border-l-amber-500/40":Vt?"bg-emerald-600/20 hover:bg-emerald-600/30":"hover:bg-surface-2"}`,onMouseDown:Or=>{Or.stopPropagation()},role:"option","aria-checked":Vt,onClick:()=>{const Or={id:Oe,nome:rt,codigo:Nt},Nr=[...Array.isArray(Ke.current)?Ke.current:[],Or];try{(Ke.current||[]).length===0&&(Gt.current=Oe||null)}catch{}try{gt.current=!1}catch{}try{Nr.length>0&&(q.current=Nr)}catch{}try{Ke.current=Nr}catch{}ro("list:add",Nr),Pt.current=!0;try{localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}},children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Nt!=null&&o.jsxs("span",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full font-bold text-sm transition-colors ${ke?"bg-amber-500/15 text-amber-300/90 ring-1 ring-amber-500/20":"bg-emerald-600/20 text-emerald-400"}`,children:["#",Nt]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[o.jsx("span",{className:`font-medium truncate ${ke?"text-amber-100/90":""}`,children:rt}),ke&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-amber-400/70 font-medium",children:[o.jsx("svg",{className:"w-3 h-3 opacity-60",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Cliente Padro"]})]})]}),(()=>{const Or=(Q.selectedClients||[]).filter(Nr=>Yt(Nr)).length;return Or>0?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-7 h-7 rounded-full bg-rose-600 hover:bg-rose-500 text-white text-base font-bold transition-colors",onClick:Nr=>{Nr.stopPropagation();const Pn=Array.isArray(Ke.current)?Ke.current:[],$a=Pn.findIndex(ti=>Yt(ti));if($a!==-1){const ti=[...Pn];ti.splice($a,1);try{gt.current=ti.length===0}catch{}try{ti.length===0&&(Gt.current=null)}catch{}try{ti.length>0&&(q.current=ti)}catch{}try{Ke.current=ti}catch{}ro("list:remove-one",ti)}},children:"-"}),o.jsx("span",{className:"inline-flex items-center justify-center min-w-[32px] h-7 px-2 rounded-full bg-sky-600 text-white text-base font-bold",children:Or}),o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-7 h-7 rounded-full bg-emerald-600 hover:bg-emerald-500 text-white text-base font-bold transition-colors",onClick:Nr=>{Nr.stopPropagation();const Pn={id:Oe,nome:rt,codigo:Nt},$a=[...Array.isArray(Ke.current)?Ke.current:[],Pn];try{(Ke.current||[]).length===0&&(Gt.current=Oe||null)}catch{}try{gt.current=!1}catch{}try{$a.length>0&&(q.current=$a)}catch{}try{Ke.current=$a}catch{}ro("list:add-one",$a)},children:"+"})]}):null})()]},Oe||dr)})]}),o.jsxs("div",{className:"flex items-center justify-between pt-1",children:[o.jsx(ye,{type:"button",size:"sm",className:"bg-emerald-600 hover:bg-emerald-500 text-white shadow-md ring-2 ring-emerald-400/40 ring-offset-2 ring-offset-transparent",onMouseDown:ae=>{try{bt.current=Date.now()+3e3}catch{}try{_t.current=Date.now()+3500}catch{}try{xe.current=Date.now()+5e3}catch{}try{be.current="close"}catch{}try{Pt.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{sessionStorage.setItem("agenda:customerPicker:closing","1"),sessionStorage.setItem("agenda:customerPicker:closingAt",String(Date.now()));const ke=je.current||sessionStorage.getItem("agenda:modal:sessionId")||"";ke&&sessionStorage.setItem("agenda:customerPicker:sessionId",ke);const Oe=Array.isArray(Ke.current)?Ke.current:[];Oe.length>0&&sessionStorage.setItem(Pe,JSON.stringify(Oe));try{const rt={ts:new Date().toISOString(),hook:"conclude:mousedown",modalSessionId:ke,closingAt:sessionStorage.getItem("agenda:customerPicker:closingAt"),selLen:Array.isArray(Oe)?Oe.length:NaN,formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,lockUntil:_t.current,suppressUntil:bt.current,isPickerOpen:!!ft,isModalOpen:!!F}}catch{}}catch{}ae.stopPropagation()},onClick:()=>{be.current="close",Pt.current=!1;try{xe.current=Date.now()+5e3}catch{}try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}ue.current=!0;const ke=Array.isArray(Ke.current)?[...Ke.current]:[];try{ke.length>0&&(ge.current="conclude:close:snapshot",q.current=ke,sessionStorage.setItem(Pe,JSON.stringify(ke)))}catch{}Ir(ke);try{_t.current=Date.now()+3e3}catch{}ro("conclude:close:apply",ke),Ce(Oe=>({...Oe,selectedClients:[...ke]}));try{gt.current=!1}catch{}try{bt.current=Date.now()+2500}catch{}at(!1),mt(!1),setTimeout(()=>{try{bt.current=Date.now()+2500}catch{}at(!1),mt(!1)},15),setTimeout(()=>{try{bt.current=Date.now()+2500}catch{}at(!1),mt(!1)},120);try{bt.current=Date.now()+2500}catch{}try{const Oe={ts:new Date().toISOString(),hook:"conclude:click",formLen:Array.isArray(Q?.selectedClients)?Q.selectedClients.length:NaN,curLen:Array.isArray(Ke.current)?Ke.current.length:NaN,lastLen:Array.isArray(q.current)?q.current.length:NaN,chipsLen:Array.isArray(sr)?sr.length:NaN,clientsLoading:!!Ln,lastAction:ge?.current,clearedByUser:!!gt?.current,suppressUntil:bt.current,selectionLockUntil:_t.current,restoreGuardUntil:ei.current,modalSessionId:je.current||sessionStorage.getItem("agenda:modal:sessionId")||"",closingAt:sessionStorage.getItem("agenda:customerPicker:closingAt"),pickerOpen:!!ft,modalOpen:!!F}}catch{}setTimeout(()=>{try{ue.current=!1}catch{}},3e3)},children:"Concluir"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("span",{className:"text-xs text-text-muted",children:[(Ls||[]).length," selecionado(s)"]})})]})]})})]}),o.jsx(ye,{type:"button",onClick:()=>{try{const ae=Array.isArray(Ke.current)?Ke.current:[];ae.length>0&&(q.current=ae,sessionStorage.setItem(Pe,JSON.stringify(ae)),Ir(ae),console.warn("[CustomerPicker][+Novo:save-selection]",{savedCount:ae.length}))}catch{}Pt.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}be.current="close",at(!1),mt(!1),So(null),sa(!0)},children:"+ Novo"})]}),hf.length>0?o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:hf.map((ae,ke)=>{const Oe=String(ae?.nome||"").toLowerCase(),rt=`${ae?.id||Oe}-${ke}`,Nt=ae?.id||`__name:${Oe}`;return o.jsxs("span",{className:"text-sm font-medium bg-white/5 border border-white/10 rounded px-2 py-1 flex items-center gap-2",children:[lz(ae.nome),o.jsxs("button",{type:"button","aria-label":"Remover cliente",title:"Remover cliente",className:"text-text-muted hover:text-red-400 p-1 rounded hover:bg-red-500/10",onClick:()=>{w("CustomerPicker:chip:remove",{token:Nt,chipIdx:ke});const dr=(Array.isArray(Ke.current)?Ke.current:[]).filter((Yt,Vt)=>Vt!==ke);try{gt.current=dr.length===0}catch{}try{q.current=dr,dr.length===0&&(sessionStorage.removeItem(Pe),console.warn("[CustomerPicker][chip:remove:cleared-all]",{ts:new Date().toISOString()}))}catch{}try{Ke.current=dr}catch{}ro("chips:remove",dr)},children:[o.jsx(Vu,{className:"w-5 h-5"}),o.jsx("span",{className:"sr-only",children:"Remover"})]})]},rt)})}):null]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"quadra-select",className:"font-bold",children:"Quadra"}),o.jsxs(Yn,{value:Q.court,onValueChange:ae=>Ce(ke=>({...ke,court:ae})),children:[o.jsx(Hn,{className:"mt-1",onMouseDown:()=>{ft&&setTimeout($s,0)},children:o.jsx(Xn,{children:Q.court&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:$f(Q.court)}}),o.jsx("span",{children:Q.court})]})})}),o.jsx(Gn,{className:"z-[60]",children:Xe.map(ae=>o.jsx(qt,{value:ae,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:$f(ae)}}),o.jsx("span",{children:ae})]})},ae))})]})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"modalidade-select",className:"font-bold",children:"Modalidade"}),o.jsxs(Yn,{value:Q.modality,onValueChange:ae=>Ce(ke=>({...ke,modality:ae})),children:[o.jsx(Hn,{className:"mt-1",onMouseDown:()=>{ft&&setTimeout($s,0)},children:o.jsx(Xn,{})}),o.jsx(Gn,{children:(Kl||[]).map(ae=>o.jsx(qt,{value:ae,children:ae},ae))})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"status-select",className:"font-bold",children:"Status"}),o.jsxs(Yn,{value:Q.status,onValueChange:ae=>Ce(ke=>({...ke,status:ae})),children:[o.jsx(Hn,{className:"mt-1",onMouseDown:()=>{ft&&setTimeout($s,0)},children:o.jsx(Xn,{})}),o.jsx(Gn,{children:Object.keys(Us).map(ae=>o.jsx(qt,{value:ae,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{"aria-hidden":!0,className:`inline-block h-4 w-1 rounded ${Us[ae].accent}`}),Us[ae].label]})},ae))})]}),mf&&o.jsx("div",{className:"mt-1.5 text-xs text-text-primary font-medium bg-brand/5 border border-brand/20 rounded px-2 py-1.5",children:mf})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"horario-inicio",className:"font-bold",children:"Horrio"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsxs(Yn,{value:String(Q.startMinutes),onValueChange:ae=>Ce(ke=>({...ke,startMinutes:Number(ae)})),children:[o.jsx(Hn,{className:"w-32","aria-label":"Hora incio",onMouseDown:()=>{ft&&setTimeout($s,0)},children:o.jsx(Xn,{})}),o.jsx(Gn,{className:"max-h-[300px] z-[60] [&>div]:scrollbar-thin [&>div]:scrollbar-track-surface [&>div]:scrollbar-thumb-brand/40 [&>div]:hover:scrollbar-thumb-brand/60",children:Up.map(ae=>o.jsx(qt,{value:String(ae.value),disabled:!ae.available,className:kt(!ae.available&&"opacity-60"),children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[ae.available?o.jsx(xv,{className:"w-4 h-4 opacity-80"}):o.jsx(yv,{className:"w-4 h-4 opacity-80"}),ae.label]})},ae.value))})]}),o.jsxs(Yn,{value:String(Q.endMinutes),onValueChange:ae=>Ce(ke=>({...ke,endMinutes:Number(ae)})),children:[o.jsx(Hn,{className:"w-32","aria-label":"Hora fim",onMouseDown:()=>{ft&&setTimeout($s,0)},children:o.jsx(Xn,{})}),o.jsx(Gn,{className:"max-h-[300px] z-[60] [&>div]:scrollbar-thin [&>div]:scrollbar-track-surface [&>div]:scrollbar-thumb-brand/40 [&>div]:hover:scrollbar-thumb-brand/60",children:Gl.map(ae=>o.jsx(qt,{value:String(ae.value),disabled:!ae.available,className:kt(!ae.available&&"opacity-60"),children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[ae.available?o.jsx(xv,{className:"w-4 h-4 opacity-80"}):o.jsx(yv,{className:"w-4 h-4 opacity-80"}),ae.label]})},ae.value))})]})]}),o.jsxs("div",{className:"mt-1 inline-block text-xs font-semibold text-text-secondary bg-white/5 border border-white/10 rounded px-2 py-0.5",children:["Durao: ",Zh]})]}),!K&&o.jsxs("div",{className:"border-t border-border pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("input",{type:"checkbox",id:"is-recorrente",checked:H,onChange:ae=>ce(ae.target.checked),className:"mt-1 h-4 w-4 rounded border-gray-300 text-brand focus:ring-brand"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{htmlFor:"is-recorrente",className:"font-semibold text-text-primary cursor-pointer",children:"Agendamento Fixo (Recorrente)"}),o.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:"Criar este agendamento automaticamente nas prximas semanas, no mesmo dia e horrio"})]})]}),H&&o.jsxs("div",{className:"ml-7 mt-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"quantidade-semanas",className:"text-sm font-medium",children:"Repetir por quantas semanas?"}),o.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[o.jsxs("div",{className:"flex items-center border border-border rounded-md bg-surface-2",children:[o.jsx("button",{type:"button",onClick:()=>L(ae=>Math.max(2,(ae||2)-1)),className:"px-3 py-2 hover:bg-surface-3 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:oe<=2,children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),o.jsx("div",{className:"px-4 py-2 min-w-[60px] text-center font-semibold border-x border-border",children:oe}),o.jsx("button",{type:"button",onClick:()=>L(ae=>(ae||2)+1),className:"px-3 py-2 hover:bg-surface-3 transition-colors",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),o.jsxs("span",{className:"text-sm text-text-secondary",children:["semanas (",oe," agendamentos)"]})]})]}),Q.date&&oe>=2&&o.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-300 mb-2 uppercase tracking-wide",children:"Datas que sero criadas:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:oe}).map((ae,ke)=>{const Oe=wi(Q.date,ke*7);return o.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-slate-700/50 border border-slate-600 rounded px-2 py-1",children:[o.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("span",{className:"text-xs font-medium text-white",children:ln(Oe,"dd/MM/yyyy '('EEEE')'",{locale:Fc})})]},ke)})})]}),o.jsx("div",{className:"bg-slate-800/50 border-l-4 border-blue-600 rounded-r-lg p-3",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"text-xs text-gray-300",children:[o.jsx("p",{className:"font-semibold mb-1 text-blue-300",children:"Importante: Revise os dados antes de salvar"}),o.jsxs("p",{children:["Sero criados ",o.jsxs("strong",{className:"text-white",children:[oe," agendamentos"]})," incluindo a data selecionada e as prximas ",oe-1," semanas. Editar ou cancelar depois exigir alterar cada agendamento individualmente."]})]})]})})]})]})]})]})}),o.jsx($n,{className:"flex-shrink-0 border-t border-border bg-surface px-6 py-3",children:o.jsxs("div",{className:"w-full flex flex-col gap-3 sm:flex-row sm:items-center",children:[K&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:mr-auto w-full sm:w-auto",children:[o.jsxs(ye,{type:"button",variant:"destructive",className:"bg-red-600 hover:bg-red-500 text-white border border-red-700 w-full sm:w-auto justify-center",onClick:()=>On(!0),children:[o.jsx(j_,{className:"w-4 h-4 mr-2 opacity-90"}),"Cancelar agendamento",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-red-700/50 rounded border border-red-500/30",children:"F3"})]}),o.jsxs(ye,{type:"button",variant:"secondary",className:"bg-teal-600 hover:bg-teal-500 text-white border-teal-700 w-full sm:w-auto justify-center",onClick:()=>{a()},children:[o.jsx(Gs,{className:"w-4 h-4 mr-2 opacity-90"}),o.jsx("span",{className:"hidden sm:inline",children:"Gerenciar Pagamentos"}),o.jsx("span",{className:"sm:hidden",children:"Pagamentos"}),o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-teal-700/50 rounded border border-teal-500/30",children:"F4"})]})]}),o.jsx(Iu,{open:Rn,onOpenChange:On,children:o.jsxs(Gc,{children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Cancelar agendamento?"}),o.jsx(Jc,{children:'Ao cancelar, este agendamento deixar de aparecer na agenda padro. Ele s ser visvel ao selecionar o filtro "Cancelados".'})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{children:"Voltar"}),o.jsx(Du,{className:"bg-red-600 hover:bg-red-500",onClick:async()=>{try{On(!1),$(!1),await Bt(K.id,"canceled","user"),e({title:"Agendamento cancelado"})}catch(ae){e({title:"Erro ao cancelar",description:ae?.message||"Tente novamente."})}},children:"Confirmar cancelamento"})]})]})})]}),o.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[o.jsxs(ye,{type:"button",variant:"ghost",className:"border border-white/10 flex-1 sm:flex-none",onClick:async()=>{if(K?.id){console.log(" [Auto-save] Salvando ao fechar modal...");try{Jn.current&&clearTimeout(Jn.current),await No({autoSave:!0}),console.log(" [Auto-save] Salvo ao fechar!")}catch(ae){console.error(" [Auto-save] Erro ao salvar ao fechar:",ae)}}$(!1)},children:["Fechar",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-white/10 rounded border border-white/20",children:"Esc"})]}),!K?.id&&o.jsxs(ye,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white disabled:opacity-60 disabled:cursor-not-allowed flex-1 sm:flex-none",disabled:Ra,onClick:async()=>{try{if(Ra)return;if(H&&!K){J(!0);return}Ia.current=!0,Hi.current=!1,await No()}catch{}},children:["Salvar",o.jsx("kbd",{className:"hidden sm:inline ml-2 px-2 py-1 text-sm font-mono bg-emerald-700/50 rounded border border-emerald-500/30",children:""})]})]})]})})]})}),o.jsx(Iu,{open:U,onOpenChange:J,children:o.jsxs(Gc,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(Kc,{children:[o.jsxs(Xc,{className:"flex items-center gap-3 text-xl",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-orange-600/20 border border-orange-600/40",children:o.jsx("svg",{className:"w-6 h-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),"Confirmar Criao de Agendamentos Recorrentes"]}),o.jsxs(Jc,{className:"space-y-4 mt-4",children:[Q.date&&oe>=2&&o.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-300 mb-2 uppercase tracking-wide",children:" Datas que sero criadas:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:Array.from({length:oe}).map((ae,ke)=>{const Oe=wi(Q.date,ke*7);return o.jsxs("div",{className:"flex items-center gap-2 bg-slate-700/50 border border-slate-600 rounded px-2 py-1.5",children:[o.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["#",ke+1]}),o.jsx("span",{className:"text-xs font-medium text-white",children:ln(Oe,"dd/MM/yyyy '('EEEE')'",{locale:Fc})})]},ke)})})]}),o.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3 uppercase tracking-wide",children:"Resumo do Agendamento"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700/50",children:[o.jsx("span",{className:"text-sm text-slate-400",children:"Quadra"}),o.jsx("span",{className:"font-semibold text-white",children:Ge[Q.court]?.name||Q.court})]}),o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700/50",children:[o.jsx("span",{className:"text-sm text-slate-400",children:"Horrio"}),o.jsxs("span",{className:"font-semibold text-white font-mono",children:[uz(Q.startMinutes)," - ",uz(Q.endMinutes)]})]}),o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700/50",children:[o.jsx("span",{className:"text-sm text-slate-400",children:"Modalidade"}),o.jsx("span",{className:"font-semibold text-white",children:Q.modality})]}),o.jsxs("div",{className:"flex items-start justify-between py-2",children:[o.jsx("span",{className:"text-sm text-slate-400",children:"Participantes"}),o.jsx("div",{className:"text-right max-w-xs",children:Q.selectedClients?.length>0?o.jsxs("div",{className:"font-semibold text-white",children:[V?Q.selectedClients.map(ae=>ae.nome).join(", "):Q.selectedClients.slice(0,3).map(ae=>ae.nome).join(", "),!V&&Q.selectedClients.length>3&&o.jsxs("span",{className:"text-slate-400",children:[" +",Q.selectedClients.length-3]}),Q.selectedClients.length>3&&o.jsxs(o.Fragment,{children:[" ",o.jsx("button",{type:"button",onClick:()=>Z(!V),className:"text-xs text-blue-400 hover:text-blue-300 underline inline",children:V?"Ver menos":"Ver todos"})]})]}):o.jsx("span",{className:"font-semibold text-white",children:"Nenhum participante"})})]})]})]}),o.jsx("div",{className:"bg-red-900/30 border-l-4 border-red-600 rounded-r-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-300",children:[o.jsx("strong",{className:"text-red-300",children:"Importante:"})," Aps criar, editar ou cancelar exigir alterar cada agendamento individualmente. Certifique-se de que todos os dados esto corretos!"]})})]})})]})]}),o.jsxs(Yc,{className:"gap-2",children:[o.jsx(Qc,{onClick:()=>{J(!1),Z(!1)},className:"border-slate-600 hover:bg-slate-800",children:"Cancelar e Revisar"}),o.jsxs(Du,{className:"bg-emerald-700 hover:bg-emerald-600 text-white font-semibold",onClick:async()=>{J(!1),Z(!1),Ia.current=!0,Hi.current=!1,await No()},children:[o.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Confirmar e Criar ",oe," Agendamentos"]})]})]})}),Ur&&o.jsx(bte,{open:Ur,onOpenChange:ae=>{sa(ae),ae||(So(null),window.__paymentModalCallback&&(window.__paymentModalCallback=null))},client:va,onSaved:ae=>{try{if(ae&&typeof ae=="object"){console.warn("[CustomerPicker][onSaved:START]",{clientId:ae.id,clientName:ae.nome,currentSelection:Array.isArray(Ke.current)?Ke.current.length:0});try{xe.current=Date.now()+3e3,_t.current=Date.now()+3e3,ei.current=Date.now()+3e3}catch{}(Gi||[]).some(Oe=>typeof Oe=="object"?Oe.id===ae.id:!1)||(_u(Oe=>[...Oe||[],ae]),ui(Oe=>[...Oe||[],ae])),Ce(Oe=>{const rt=Array.isArray(Oe.selectedClients)?Oe.selectedClients:[],Nt={id:ae.id,nome:ae.nome||ae.name||De(ae),codigo:ae.codigo},dr=rt.filter(Vt=>Vt.id!==ae.id),Yt=[Nt,...dr];try{Ke.current=Yt}catch{}try{q.current=Yt}catch{}try{Ir(Yt)}catch{}try{sessionStorage.setItem(Pe,JSON.stringify(Yt))}catch{}try{gt.current=!1}catch{}return console.warn("[CustomerPicker][onSaved:COMPLETE]",{newClientId:ae.id,newClientName:ae.nome,totalSelected:Yt.length,refsSynced:!0,protectionActive:!0}),{...Oe,selectedClients:Yt}}),Promise.resolve().then(()=>{try{const Oe=Array.isArray(Ke.current)?Ke.current:[];Oe.length>0&&(Ce(rt=>({...rt,selectedClients:[...Oe]})),console.warn("[CustomerPicker][onSaved:REASSERT]",{count:Oe.length}))}catch{}})}if(window.__paymentModalCallback&&typeof window.__paymentModalCallback=="function")try{window.__protectPaymentModal&&window.__protectPaymentModal(3e3),window.__paymentModalCallback(),window.__paymentModalCallback=null}catch(ke){console.error("[PaymentModal][callback:ERROR]",ke)}}catch(ke){console.error("[CustomerPicker][onSaved:ERROR]",ke)}}}),n&&o.jsx(cGe,{setIsModalOpen:$,setBookings:W,form:Q,setForm:Ce,localCustomers:Gi,onOpenClientModal:ae=>{sa(!0),window.__paymentModalCallback=ae}}),s&&o.jsx(uGe,{form:Q,setForm:Ce,localCustomers:Gi})]})},Mr=v.useMemo(()=>{const xe=ln(O,"yyyy-MM-dd");let je=B.filter(Ie=>ln(Ie.start,"yyyy-MM-dd")===xe);if(je=ve.canceledOnly?je.filter(Ie=>Ie.status==="canceled"):je.filter(Ie=>Ie.status!=="canceled"),ve.pendingPayments&&(je=je.filter(Ie=>{const De=te[Ie.id]||[];return De.some(nt=>String(nt.status_pagamento||"").toLowerCase()!=="pago")&&De.length>0})),Wn.trim()){const Ie=Wn.trim().toLowerCase();je=je.filter(De=>(De.customer||"").toLowerCase().includes(Ie)||(De.court||"").toLowerCase().includes(Ie)||(Us[De.status]?.label||"").toLowerCase().includes(Ie))}return ve.scheduled||ve.canceledOnly||ve.pendingPayments?je:[]},[B,O,ve.scheduled,ve.canceledOnly,ve.pendingPayments,Wn,te]);v.useEffect(()=>{if(!Wn.trim()||!(ve.scheduled||ve.canceledOnly||ve.pendingPayments)||!Mr||Mr.length===0)return;const xe=[...Mr].sort((Ie,De)=>Ie.start-De.start)[0];if(!xe?.id)return;const je=document.getElementById(`booking-${xe.id}`);je?.scrollIntoView&&je.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},[Wn,Mr,ve.scheduled,ve.canceledOnly,ve.pendingPayments]),v.useEffect(()=>{const xe=Va.current,je=Kn.current||{},Ie=ve.canceledOnly&&!je.canceledOnly,De=ve.scheduled&&!je.scheduled&&!ve.canceledOnly,Re=ve.pendingPayments&&!je.pendingPayments;if(!xe||!Ie&&!De&&!Re){Kn.current={scheduled:ve.scheduled,canceledOnly:ve.canceledOnly,pendingPayments:ve.pendingPayments};return}const nt=Mr||[];if(nt.length===0){Kn.current={scheduled:ve.scheduled,canceledOnly:ve.canceledOnly,pendingPayments:ve.pendingPayments};return}const Q=xe.getBoundingClientRect();if(!nt.some(Ke=>{const Ze=document.getElementById(`booking-${Ke.id}`);if(!Ze)return!1;const Gt=Ze.getBoundingClientRect();return Gt.bottom>Q.top&&Gt.top<Q.bottom})){const Ke=[...nt].sort((Gt,Kt)=>Gt.start-Kt.start)[0],Ze=Ke&&document.getElementById(`booking-${Ke.id}`);Ze?.scrollIntoView&&Ze.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}Kn.current={scheduled:ve.scheduled,canceledOnly:ve.canceledOnly,pendingPayments:ve.pendingPayments}},[ve.scheduled,ve.canceledOnly,ve.pendingPayments,Mr]);const _n=v.useMemo(()=>{if(!Yr||!Ge[Yr])return{start:pr,end:kr};const xe=Ge[Yr],je=xe.hora_inicio||`${pr}:00:00`,Ie=xe.hora_fim||`${kr}:00:00`,[De,Re]=String(je).split(":").map(Number),[nt,Q]=String(Ie).split(":").map(Number);return{start:De||pr,end:nt||kr,startMinutes:(De||0)*60+(Re||0),endMinutes:(nt||0)*60+(Q||0)}},[Yr,Ge,pr,kr]);return v.useMemo(()=>{const xe=_n.start,je=_n.end;return Array.from({length:Math.max(0,je-xe)},(Ie,De)=>xe+De)},[_n]),v.useMemo(()=>{const xe=_n.start,je=_n.end;return Math.max(0,je-xe)*(60/Qn)*vs},[_n]),o.jsxs(o.Fragment,{children:[o.jsxs(Pr.div,{variants:F?void 0:fGe,initial:F?!1:"hidden",animate:F?!1:"visible",className:"h-full flex flex-col md:px-0",children:[o.jsx(Pr.div,{variants:cz,className:"p-3 bg-surface mb-6 md:rounded-lg",children:o.jsxs("div",{className:"max-w-[1200px] mx-auto w-full flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ye,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>R(M2(O,1)),children:o.jsx(yW,{className:"h-5 w-5"})}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"ghost",className:"w-full sm:w-auto max-w-full justify-center text-base font-semibold whitespace-nowrap truncate",children:[o.jsx(Uu,{className:"mr-2 h-5 w-5"}),o.jsx("span",{className:"hidden sm:inline",children:ln(O,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:Fc})}),o.jsx("span",{className:"sm:hidden",children:ln(O,"EEEE, dd/MM/yyyy",{locale:Fc})})]})}),o.jsx(ad,{className:"w-auto p-0",children:o.jsx(Ju,{mode:"single",selected:O,onSelect:xe=>xe&&R(xe),initialFocus:!0})})]}),o.jsx(ye,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>R(wi(O,1)),children:o.jsx($j,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex items-center flex-wrap gap-3 justify-end",children:[o.jsxs("div",{className:"relative w-full sm:w-56",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar agendamento...",className:"pl-9",value:Wn,onChange:xe=>vi(xe.target.value),onBlur:()=>vi("")}),Wn&&o.jsx("button",{type:"button","aria-label":"Limpar busca",className:"absolute right-2 top-1/2 -translate-y-1/2 px-2 py-0.5 rounded text-xs font-medium text-primary hover:bg-surface-2",onClick:()=>vi(""),children:"Limpar"})]}),o.jsxs(ye,{size:"sm",onClick:()=>{he(null),zn(null);try{sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt")}catch{}Ot()},"aria-label":"Novo agendamento",className:"gap-2",disabled:Xe.length===0,children:[o.jsx(oi,{className:"h-4 w-4"})," Agendar"]}),o.jsxs(ry,{children:[o.jsx(ny,{asChild:!0,children:o.jsxs(ye,{variant:"outline",size:"sm",className:"gap-2",disabled:Xe.length===0,children:[o.jsx(hue,{className:"h-4 w-4"})," Filtros"]})}),o.jsxs(iv,{align:"end",className:"w-64",children:[o.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[o.jsx(nte,{className:"p-0",children:"Exibio"}),o.jsx(ye,{variant:"ghost",size:"sm",className:"h-7 text-xs text-text-muted hover:text-text-primary",onClick:()=>Ve({scheduled:!0,available:!0,canceledOnly:!1,pendingPayments:!1}),children:"Limpar"})]}),o.jsx(hT,{}),o.jsx(nc,{onClick:xe=>xe.preventDefault(),children:o.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Uu,{className:"h-4 w-4 text-text-muted"}),o.jsx("span",{children:"Agendados"})]}),o.jsx(Sl,{checked:ve.scheduled,onCheckedChange:xe=>Ve(je=>({...je,scheduled:!!xe,canceledOnly:xe?!1:je.canceledOnly}))})]})}),o.jsx(nc,{onClick:xe=>xe.preventDefault(),children:o.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mue,{className:"h-4 w-4 text-text-muted"}),o.jsx("span",{children:"Livres"})]}),o.jsx(Sl,{checked:ve.available,onCheckedChange:xe=>Ve(je=>({...je,available:!!xe,canceledOnly:xe?!1:je.canceledOnly}))})]})}),o.jsx(nc,{onClick:xe=>xe.preventDefault(),children:o.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(j_,{className:"h-4 w-4 text-rose-400"}),o.jsx("span",{children:"Cancelados"})]}),o.jsx(Sl,{checked:ve.canceledOnly,onCheckedChange:xe=>{const je=!!xe;Ve(Ie=>({...Ie,canceledOnly:je,scheduled:je?!1:Ie.scheduled,available:je?!1:Ie.available})),je&&!pt&&de(!0)}})]})}),o.jsx(nc,{onClick:xe=>xe.preventDefault(),children:o.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gs,{className:"h-4 w-4 text-warning"}),o.jsx("span",{children:"Pagamentos Pendentes"})]}),o.jsx(Sl,{checked:ve.pendingPayments,onCheckedChange:xe=>Ve(je=>({...je,pendingPayments:!!xe}))})]})})]})]}),o.jsx(ye,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>Ht(!0),disabled:Xe.length===0,"aria-label":"Configurar agenda",title:"Configurar agenda",children:o.jsx(WE,{className:"h-5 w-5"})})]})]})}),o.jsx(cn,{open:St,onOpenChange:xe=>{xe||ur(mr),Ht(xe)},children:o.jsxs(on,{className:"sm:max-w-[680px]",onOpenAutoFocus:xe=>xe.preventDefault(),children:[o.jsx(an,{className:"pb-3 border-b border-border bg-surface-2/40 rounded-t-lg px-2 -mx-2 -mt-2",children:o.jsx(en,{className:"text-base font-semibold tracking-tight",children:"Configuraes da Agenda"})}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[o.jsx(Cs,{className:"h-4 w-4",style:{color:Us.confirmed.hex}}),o.jsx("span",{className:"text-sm font-medium",children:"Confirmao automtica"})]}),o.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-3",style:{borderLeftWidth:3,borderLeftColor:Us.confirmed.hex},children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sl,{id:"autoConfirmEnabled",checked:nr.autoConfirmEnabled,onCheckedChange:xe=>ur(je=>({...je,autoConfirmEnabled:!!xe}))}),o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:Us.confirmed.hex}}),o.jsx(vt,{htmlFor:"autoConfirmEnabled",className:"font-medium",children:"Confirmao automtica"})]})]})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(vt,{htmlFor:"autoconfirm-hours",className:"text-sm text-text-muted",children:"Confirmar se faltar"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Yn,{value:String(Math.max(0,Math.round((nr.autoConfirmMinutesBefore||0)/60))),onValueChange:xe=>ur(je=>({...je,autoConfirmMinutesBefore:Math.max(0,Number(xe))*60})),disabled:!nr.autoConfirmEnabled,children:[o.jsx(Hn,{className:"w-32",children:o.jsx(Xn,{placeholder:"Horas"})}),o.jsxs(Gn,{align:"start",children:[o.jsx(qt,{value:"0",children:"Imediato"}),o.jsx(qt,{value:"1",children:"1 h"}),o.jsx(qt,{value:"2",children:"2 h"}),o.jsx(qt,{value:"3",children:"3 h"}),o.jsx(qt,{value:"4",children:"4 h"}),o.jsx(qt,{value:"6",children:"6 h"}),o.jsx(qt,{value:"8",children:"8 h"}),o.jsx(qt,{value:"12",children:"12 h"}),o.jsx(qt,{value:"24",children:"24 h"})]})]}),o.jsx("span",{className:"text-sm text-text-muted",children:"antes"})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[o.jsx(_W,{className:"h-4 w-4",style:{color:Us.in_progress.hex}}),o.jsx("span",{className:"text-sm font-medium",children:"Transies automticas"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-2",style:{borderLeftWidth:3,borderLeftColor:Us.in_progress.hex},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sl,{id:"autoStartEnabled",checked:nr.autoStartEnabled,onCheckedChange:xe=>ur(je=>({...je,autoStartEnabled:!!xe}))}),o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:Us.in_progress.hex}}),o.jsx(vt,{htmlFor:"autoStartEnabled",className:"font-medium",children:"Iniciar no horrio"})]})]}),o.jsx("p",{className:"text-xs text-text-muted ml-7",children:"Confirmado  Em andamento no horrio de incio."})]}),o.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-2",style:{borderLeftWidth:3,borderLeftColor:Us.finished.hex},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sl,{id:"autoFinishEnabled",checked:nr.autoFinishEnabled,onCheckedChange:xe=>ur(je=>({...je,autoFinishEnabled:!!xe}))}),o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:Us.finished.hex}}),o.jsx(vt,{htmlFor:"autoFinishEnabled",className:"font-medium",children:"Finalizar ao trmino"})]})]}),o.jsx("p",{className:"text-xs text-text-muted ml-7",children:"Em andamento  Finalizado no horrio de trmino."})]})]})]})]}),o.jsxs($n,{className:"mt-2 gap-2",children:[o.jsx(ye,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>Ht(!1),children:"Cancelar"}),o.jsx(ye,{type:"button",variant:"default",onClick:()=>{console.log(" BOTO SALVAR CLICADO!"),Er()},disabled:Nn,children:Nn?"Salvando":"Salvar"})]})]})}),o.jsx(cn,{open:xi,onOpenChange:de,children:o.jsxs(on,{className:"sm:max-w-[520px]",onOpenAutoFocus:xe=>xe.preventDefault(),children:[o.jsxs(an,{children:[o.jsx(en,{children:"Sobre agendamentos cancelados"}),o.jsx(hn,{children:"Agendamentos cancelados no aparecem na agenda quando o filtro no est selecionado e no ocupam horrio."})]}),o.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[o.jsx(Sl,{id:"hide-canceled-info",checked:pt,onCheckedChange:xe=>xt(!!xe),className:"mt-0.5"}),o.jsx(vt,{htmlFor:"hide-canceled-info",className:"text-sm cursor-pointer text-text-secondary",children:"No mostrar novamente"})]}),o.jsx($n,{className:"mt-4",children:o.jsx(ye,{type:"button",onClick:()=>de(!1),children:"Entendi"})})]})}),!it&&Xe.length===0&&o.jsxs("div",{className:"mb-4 p-4 rounded-lg border border-border bg-surface text-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Nenhuma quadra encontrada"}),o.jsx("div",{className:"text-text-muted",children:"Cadastre suas quadras para comear a usar a agenda."})]}),o.jsx(ye,{asChild:!0,className:"w-full sm:w-auto",children:o.jsxs(Q3,{to:"/quadras",children:[o.jsx("span",{className:"hidden sm:inline",children:"Ir para Cadastros  Quadras"}),o.jsx("span",{className:"sm:hidden",children:"Adicionar"})]})})]}),ht.length>0&&(()=>{const xe=typeof window<"u"&&window.innerWidth<768,je=xe?[ht[hr%ht.length]]:Yr?[Yr]:ht,Ie=xe?je[0]:Yr,De=(()=>{if(Ie&&Ge[Ie]){const Q=Ge[Ie],Ce=Q.hora_inicio||`${pr}:00:00`,Ke=Q.hora_fim||`${kr}:00:00`,[Ze]=String(Ce).split(":").map(Number),[Gt]=String(Ke).split(":").map(Number);return{start:Ze||pr,end:Gt||kr}}return{start:pr,end:kr}})(),Re=Array.from({length:Math.max(0,De.end-De.start)},(Q,Ce)=>De.start+Ce),nt=Math.max(0,De.end-De.start)*(60/Qn)*vs;return o.jsx(o.Fragment,{children:o.jsx(Pr.div,{variants:F?void 0:cz,className:kt("flex-1 overflow-auto bg-surface fx-scroll",xe?"":"rounded-lg border border-border"),ref:Va,children:o.jsxs("div",{className:kt("grid",!xe&&"mx-auto"),style:{gridTemplateColumns:xe?"60px 1fr":je.length===1?"120px 760px":je.length===2?"120px repeat(2, 520px)":`120px repeat(${je.length}, 1fr)`,width:xe?"100%":je.length<=2?"fit-content":void 0,columnGap:xe?"4px":"16px"},children:[o.jsxs("div",{className:"sticky left-0 bg-surface z-20",children:[o.jsx("div",{className:"sticky top-0 z-20 h-14 border-b border-r border-border bg-surface flex items-center justify-center px-2",children:o.jsxs(ry,{children:[o.jsx(ny,{asChild:!0,children:o.jsx(ye,{size:"sm",variant:"ghost",className:"hover:bg-surface-2/50 text-lg font-semibold",children:Ps(O,new Date)?"Hoje":ln(O,"EEEE",{locale:Fc})})}),o.jsxs(iv,{align:"center",children:[o.jsx(nc,{onClick:()=>R(new Date),children:"Hoje"}),o.jsx(hT,{}),(()=>{const Q=["Segunda","Tera","Quarta","Quinta","Sexta","Sbado","Domingo"],Ce=uu(O,{weekStartsOn:1,locale:Fc});return Q.map((Ke,Ze)=>o.jsx(nc,{onClick:()=>R(wi(Ce,Ze)),children:Ke},Ke))})()]})]})}),Re.map(Q=>o.jsxs("div",{className:kt("border-r border-border",Q%2===1&&"bg-surface-2/30"),children:[o.jsx("div",{className:"relative border-b border-border/80",style:{height:vs},children:o.jsxs("span",{className:kt("absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-surface rounded font-bold",xe?"px-1 text-sm":"px-2 text-lg"),children:[String(Q).padStart(2,"0"),":00"]})}),o.jsx("div",{className:"relative border-b border-border/80",style:{height:vs},children:o.jsxs("span",{className:kt("absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-surface rounded font-bold",xe?"px-1 text-sm":"px-2 text-lg"),children:[String(Q).padStart(2,"0"),":30"]})})]},`time-${Q}`))]}),je.map(Q=>o.jsxs("div",{className:"relative border-r border-border",children:[!xe&&ht.length>1?o.jsx("div",{className:"h-14 border-b border-border sticky top-0 bg-surface z-10 flex items-center justify-center gap-2 px-3 overflow-x-auto",children:ht.map(Ce=>o.jsxs("button",{onClick:()=>Bn(Ce),className:kt("px-4 py-2 rounded-lg font-semibold text-base transition-all duration-200 whitespace-nowrap flex items-center gap-2.5 flex-shrink-0",Yr===Ce?"bg-surface-2 text-text-primary border-2 border-brand/60":Ce===Q?"bg-surface-2/50 text-text-primary hover:bg-surface-2":"hover:bg-surface-2/60 text-text-muted hover:text-text-primary"),children:[o.jsx("span",{className:kt("inline-block w-2.5 h-2.5 rounded-full shadow-sm",Yr===Ce&&"ring-2 ring-brand/40"),style:{backgroundColor:$f(Ce)}}),o.jsx("span",{className:"tracking-tight font-bold",children:Ce})]},Ce))}):o.jsx("div",{className:"h-14 border-b border-border sticky top-0 bg-surface z-10 flex items-center justify-center",children:xe&&ht.length>1?o.jsxs(ry,{children:[o.jsx(ny,{asChild:!0,children:o.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-surface-2 transition-colors",children:[o.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:$f(Q)}}),o.jsx("span",{className:"font-semibold text-lg tracking-tight",children:Q}),o.jsx(__,{className:"h-4 w-4 text-text-muted"})]})}),o.jsx(iv,{align:"center",className:"w-56",children:ht.map((Ce,Ke)=>o.jsxs(nc,{onClick:()=>qr(Ke),className:kt("flex items-center gap-2",Ce===Q&&"bg-surface-2"),children:[o.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:$f(Ce)}}),o.jsx("span",{className:"font-semibold",children:Ce}),Ce===Q&&o.jsx("span",{className:"ml-auto text-brand",children:""})]},Ce))})]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:$f(Q),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"}}),o.jsx("span",{className:"font-semibold text-lg tracking-tight",children:Q})]})}),o.jsxs("div",{className:"relative",style:{height:nt},children:[(ve.scheduled||ve.canceledOnly||ve.pendingPayments)&&(()=>{const Ce=De.start*60,Ke=De.end*60,Ze=(()=>{const Ur=Ge[Q]?.hora_inicio,sa=Ge[Q]?.hora_fim,[va,So]=String(Ur||`${De.start}:00:00`).split(":").map(Number),[Ci,fs]=String(sa||`${De.end}:00:00`).split(":").map(Number);return{start:(va||0)*60+(So||0),end:(Ci||0)*60+(fs||0)}})(),Gt=Math.max(Ze.start,Ce),Kt=Math.min(Ze.end,Ke),at=Math.max(0,Math.floor((Gt-Ce)/Qn)),Dt=Math.max(at,Math.ceil((Kt-Ce)/Qn)),fr=Math.max(0,(Ke-Ce)/Qn),er=at*vs,Tr=Math.min(fr,Math.max(0,Dt-at)),zr=Math.max(0,(fr-Dt)*vs);return o.jsxs(o.Fragment,{children:[er>0&&o.jsx("div",{style:{height:er}}),Array.from({length:Tr},(Ur,sa)=>{const va=at+sa,Ci=(Math.floor(va/(60/Qn))+Math.floor(Ce/60))%2===1;return o.jsx("div",{className:kt("border-b border-border/80",Ci&&"bg-surface-2/30"),style:{height:vs}},`base-${Q}-slot-${va}`)}),zr>0&&o.jsx("div",{style:{height:zr}})]})})(),(ve.scheduled||ve.canceledOnly||ve.pendingPayments)&&Mr.filter(Ce=>Ce.court===Q).map(Ce=>o.jsx(wn,{booking:Ce,courtGridStart:De.start*60,courtGridEnd:De.end*60},Ce.id)),ve.available&&(()=>{const Ce=(()=>{const er=Ge[Q]?.hora_inicio;if(!er)return pr*60;const[Tr,zr]=String(er).split(":").map(Number);return Tr*60+(zr||0)})(),Ke=(()=>{const er=Ge[Q]?.hora_fim;if(!er)return kr*60;const[Tr,zr]=String(er).split(":").map(Number);return Tr*60+(zr||0)})(),Ze=er=>gd(er)*60+vd(er),Gt=ln(O,"yyyy-MM-dd"),Kt=B.filter(er=>er.court===Q&&ln(er.start,"yyyy-MM-dd")===Gt&&er.status!=="canceled").map(er=>[Ze(er.start),Ze(er.end)]).sort((er,Tr)=>er[0]-Tr[0]),at=[];let Dt=Ce;for(const[er,Tr]of Kt)er>Dt&&at.push([Dt,er]),Dt=Math.max(Dt,Tr);Dt<Ke&&at.push([Dt,Ke]);const fr=({startM:er,endM:Tr})=>{const[zr,Ur]=v.useState(null),sa=De.start*60,va=Math.floor((er-sa)/Qn),So=Math.max(1,Math.ceil((Tr-er)/Qn)),Ci=va+So,fs=va*vs-1,T=(Ci-va)*vs+2,q=`${String(Math.floor(er/60)).padStart(2,"0")}:${String(er%60).padStart(2,"0")}`,ge=`${String(Math.floor(Tr/60)).padStart(2,"0")}:${String(Tr%60).padStart(2,"0")}`;return o.jsxs("div",{className:kt("absolute left-2 right-2 rounded-md border-2 border-dashed text-sm z-0 cursor-pointer","border-[#10B981]","bg-transparent hover:border-[#10B981]/80 hover:shadow-sm"),style:{top:`${fs}px`,height:`${T}px`},onMouseMove:Pe=>{const Ue=Pe.currentTarget.getBoundingClientRect(),Et=Math.min(Math.max(0,Pe.clientY-Ue.top),Ue.height);let gt=Math.floor(Et/vs);gt=Math.max(0,Math.min(gt,So-1)),Ur(gt)},onMouseLeave:()=>Ur(null),onClick:Pe=>{const Ue=Pe.currentTarget.getBoundingClientRect(),Et=Math.min(Math.max(0,Pe.clientY-Ue.top),Ue.height),gt=Math.floor(Et/vs);let sr=er+gt*Qn;sr=Math.max(er,Math.min(sr,Tr-Qn));const yr=(()=>B.filter(On=>On.court===Q&&ln(On.start,"yyyy-MM-dd")===Gt).map(On=>gd(On.start)*60+vd(On.start)).filter(On=>On>sr).sort((On,Ln)=>On-Ln)[0])(),Ir=typeof yr=="number"?yr:Ke;let nn=Math.min(sr+60,Ir);if(nn-sr<30){const Rn=Ir-30;Rn>=er?(sr=Math.max(er,Math.min(sr,Rn)),nn=Ir):(sr=er,nn=Math.min(Ir,Tr))}he(null);{const Rn=Xe||[],On=Rn.includes(Q)?Q:Rn[0]||"";zn({court:On,date:O,startMinutes:sr,endMinutes:nn})}try{lastNonEmptySelectionRef.current=[],setChipsSnapshot([]),sessionStorage.removeItem(persistLastKey),sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt")}catch{}Ot()},title:`Livre: ${q}${ge}`,children:[zr!==null&&o.jsx("div",{className:"pointer-events-none absolute left-[6px] right-[6px] rounded-md border border-white/10 bg-white/5",style:{top:`${zr*vs}px`,height:`${vs}px`}}),o.jsxs("div",{className:"h-full px-3 py-2 flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-[#10B981]",children:"Livre"}),o.jsxs("span",{className:"text-text-muted",children:[q,"",ge]})]})]})};return at.map(([er,Tr],zr)=>o.jsx(fr,{startM:er,endM:Tr},`free-${Q}-${zr}`))})()]})]},Q))]})})})})()]}),Wr()]})}function dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dz(Object(r),!0).forEach(function(n){Lye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ws(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var hz=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),YA=function(){return Math.random().toString(36).substring(7).split("").join(".")},mz={INIT:"@@redux/INIT"+YA(),REPLACE:"@@redux/REPLACE"+YA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+YA()}};function mGe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Tte(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ws(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ws(1));return r(Tte)(e,t)}if(typeof e!="function")throw new Error(Ws(2));var a=e,i=t,s=[],l=s,c=!1;function u(){l===s&&(l=s.slice())}function d(){if(c)throw new Error(Ws(3));return i}function f(p){if(typeof p!="function")throw new Error(Ws(4));if(c)throw new Error(Ws(5));var x=!0;return u(),l.push(p),function(){if(x){if(c)throw new Error(Ws(6));x=!1,u();var b=l.indexOf(p);l.splice(b,1),s=null}}}function h(p){if(!mGe(p))throw new Error(Ws(7));if(typeof p.type>"u")throw new Error(Ws(8));if(c)throw new Error(Ws(9));try{c=!0,i=a(i,p)}finally{c=!1}for(var x=s=l,y=0;y<x.length;y++){var b=x[y];b()}return p}function m(p){if(typeof p!="function")throw new Error(Ws(10));a=p,h({type:mz.REPLACE})}function g(){var p,x=f;return p={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ws(11));function w(){b.next&&b.next(d())}w();var _=x(w);return{unsubscribe:_}}},p[hz]=function(){return this},p}return h({type:mz.INIT}),n={dispatch:h,subscribe:f,getState:d,replaceReducer:m},n[hz]=g,n}function pz(e,t){return function(){return t(e.apply(this,arguments))}}function gz(e,t){if(typeof e=="function")return pz(e,t);if(typeof e!="object"||e===null)throw new Error(Ws(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=pz(a,t))}return r}function Ite(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function pGe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Ws(15))},s={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(s)});return i=Ite.apply(void 0,l)(a.dispatch),fz(fz({},a),{},{dispatch:i})}}}var Dte=se.createContext(null);function gGe(e){e()}var Mte=gGe,vGe=function(t){return Mte=t},xGe=function(){return Mte};function yGe(){var e=xGe(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,s=r={callback:a,next:null,prev:r};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var vz={notify:function(){},get:function(){return[]}};function Rte(e,t){var r,n=vz;function a(f){return c(),n.subscribe(f)}function i(){n.notify()}function s(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(s):e.subscribe(s),n=yGe())}function u(){r&&(r(),r=void 0,n.clear(),n=vz)}var d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:s,isSubscribed:l,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return d}var Lte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect;function bGe(e){var t=e.store,r=e.context,n=e.children,a=v.useMemo(function(){var l=Rte(t);return{store:t,subscription:l}},[t]),i=v.useMemo(function(){return t.getState()},[t]);Lte(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,i]);var s=r||Dte;return se.createElement(s.Provider,{value:a},n)}var $te={exports:{}},Ta={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=typeof Symbol=="function"&&Symbol.for,ID=Do?Symbol.for("react.element"):60103,DD=Do?Symbol.for("react.portal"):60106,gC=Do?Symbol.for("react.fragment"):60107,vC=Do?Symbol.for("react.strict_mode"):60108,xC=Do?Symbol.for("react.profiler"):60114,yC=Do?Symbol.for("react.provider"):60109,bC=Do?Symbol.for("react.context"):60110,MD=Do?Symbol.for("react.async_mode"):60111,wC=Do?Symbol.for("react.concurrent_mode"):60111,_C=Do?Symbol.for("react.forward_ref"):60112,SC=Do?Symbol.for("react.suspense"):60113,wGe=Do?Symbol.for("react.suspense_list"):60120,jC=Do?Symbol.for("react.memo"):60115,NC=Do?Symbol.for("react.lazy"):60116,_Ge=Do?Symbol.for("react.block"):60121,SGe=Do?Symbol.for("react.fundamental"):60117,jGe=Do?Symbol.for("react.responder"):60118,NGe=Do?Symbol.for("react.scope"):60119;function Ul(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ID:switch(e=e.type,e){case MD:case wC:case gC:case xC:case vC:case SC:return e;default:switch(e=e&&e.$$typeof,e){case bC:case _C:case NC:case jC:case yC:return e;default:return t}}case DD:return t}}}function Fte(e){return Ul(e)===wC}Ta.AsyncMode=MD;Ta.ConcurrentMode=wC;Ta.ContextConsumer=bC;Ta.ContextProvider=yC;Ta.Element=ID;Ta.ForwardRef=_C;Ta.Fragment=gC;Ta.Lazy=NC;Ta.Memo=jC;Ta.Portal=DD;Ta.Profiler=xC;Ta.StrictMode=vC;Ta.Suspense=SC;Ta.isAsyncMode=function(e){return Fte(e)||Ul(e)===MD};Ta.isConcurrentMode=Fte;Ta.isContextConsumer=function(e){return Ul(e)===bC};Ta.isContextProvider=function(e){return Ul(e)===yC};Ta.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ID};Ta.isForwardRef=function(e){return Ul(e)===_C};Ta.isFragment=function(e){return Ul(e)===gC};Ta.isLazy=function(e){return Ul(e)===NC};Ta.isMemo=function(e){return Ul(e)===jC};Ta.isPortal=function(e){return Ul(e)===DD};Ta.isProfiler=function(e){return Ul(e)===xC};Ta.isStrictMode=function(e){return Ul(e)===vC};Ta.isSuspense=function(e){return Ul(e)===SC};Ta.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gC||e===wC||e===xC||e===vC||e===SC||e===wGe||typeof e=="object"&&e!==null&&(e.$$typeof===NC||e.$$typeof===jC||e.$$typeof===yC||e.$$typeof===bC||e.$$typeof===_C||e.$$typeof===SGe||e.$$typeof===jGe||e.$$typeof===NGe||e.$$typeof===_Ge)};Ta.typeOf=Ul;$te.exports=Ta;var CGe=$te.exports,RD=CGe,AGe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},PGe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},EGe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Bte={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LD={};LD[RD.ForwardRef]=EGe;LD[RD.Memo]=Bte;function xz(e){return RD.isMemo(e)?Bte:LD[e.$$typeof]||AGe}var kGe=Object.defineProperty,OGe=Object.getOwnPropertyNames,yz=Object.getOwnPropertySymbols,TGe=Object.getOwnPropertyDescriptor,IGe=Object.getPrototypeOf,bz=Object.prototype;function zte(e,t,r){if(typeof t!="string"){if(bz){var n=IGe(t);n&&n!==bz&&zte(e,n,r)}var a=OGe(t);yz&&(a=a.concat(yz(t)));for(var i=xz(e),s=xz(t),l=0;l<a.length;++l){var c=a[l];if(!PGe[c]&&!(r&&r[c])&&!(s&&s[c])&&!(i&&i[c])){var u=TGe(t,c);try{kGe(e,c,u)}catch{}}}}return e}var DGe=zte;const wz=fa(DGe);var qte={exports:{}},Ua={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC=60103,AC=60106,C1=60107,A1=60108,P1=60114,E1=60109,k1=60110,O1=60112,T1=60113,$D=60120,I1=60115,D1=60116,Ute=60121,Vte=60122,Wte=60117,Hte=60129,Gte=60131;if(typeof Symbol=="function"&&Symbol.for){var Bo=Symbol.for;CC=Bo("react.element"),AC=Bo("react.portal"),C1=Bo("react.fragment"),A1=Bo("react.strict_mode"),P1=Bo("react.profiler"),E1=Bo("react.provider"),k1=Bo("react.context"),O1=Bo("react.forward_ref"),T1=Bo("react.suspense"),$D=Bo("react.suspense_list"),I1=Bo("react.memo"),D1=Bo("react.lazy"),Ute=Bo("react.block"),Vte=Bo("react.server.block"),Wte=Bo("react.fundamental"),Hte=Bo("react.debug_trace_mode"),Gte=Bo("react.legacy_hidden")}function vu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case CC:switch(e=e.type,e){case C1:case P1:case A1:case T1:case $D:return e;default:switch(e=e&&e.$$typeof,e){case k1:case O1:case D1:case I1:case E1:return e;default:return t}}case AC:return t}}}var MGe=E1,RGe=CC,LGe=O1,$Ge=C1,FGe=D1,BGe=I1,zGe=AC,qGe=P1,UGe=A1,VGe=T1;Ua.ContextConsumer=k1;Ua.ContextProvider=MGe;Ua.Element=RGe;Ua.ForwardRef=LGe;Ua.Fragment=$Ge;Ua.Lazy=FGe;Ua.Memo=BGe;Ua.Portal=zGe;Ua.Profiler=qGe;Ua.StrictMode=UGe;Ua.Suspense=VGe;Ua.isAsyncMode=function(){return!1};Ua.isConcurrentMode=function(){return!1};Ua.isContextConsumer=function(e){return vu(e)===k1};Ua.isContextProvider=function(e){return vu(e)===E1};Ua.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===CC};Ua.isForwardRef=function(e){return vu(e)===O1};Ua.isFragment=function(e){return vu(e)===C1};Ua.isLazy=function(e){return vu(e)===D1};Ua.isMemo=function(e){return vu(e)===I1};Ua.isPortal=function(e){return vu(e)===AC};Ua.isProfiler=function(e){return vu(e)===P1};Ua.isStrictMode=function(e){return vu(e)===A1};Ua.isSuspense=function(e){return vu(e)===T1};Ua.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===C1||e===P1||e===Hte||e===A1||e===T1||e===$D||e===Gte||typeof e=="object"&&e!==null&&(e.$$typeof===D1||e.$$typeof===I1||e.$$typeof===E1||e.$$typeof===k1||e.$$typeof===O1||e.$$typeof===Wte||e.$$typeof===Ute||e[0]===Vte)};Ua.typeOf=vu;qte.exports=Ua;var WGe=qte.exports,HGe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],GGe=["reactReduxForwardedRef"],KGe=[],YGe=[null,null];function XGe(e,t){var r=e[1];return[t.payload,r+1]}function _z(e,t,r){Lte(function(){return e.apply(void 0,t)},r)}function JGe(e,t,r,n,a,i,s){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,s())}function QGe(e,t,r,n,a,i,s,l,c,u){if(e){var d=!1,f=null,h=function(){if(!d){var p=t.getState(),x,y;try{x=n(p,a.current)}catch(b){y=b,f=b}y||(f=null),x===i.current?s.current||c():(i.current=x,l.current=x,s.current=!0,u({type:"STORE_UPDATED",payload:{error:y}}))}};r.onStateChange=h,r.trySubscribe(),h();var m=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return m}}var ZGe=function(){return[null,0]};function eKe(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(w){return"ConnectAdvanced("+w+")"}:n,i=r.methodName,s=i===void 0?"connectAdvanced":i,l=r.renderCountProp,c=l===void 0?void 0:l,u=r.shouldHandleStateChanges,d=u===void 0?!0:u,f=r.storeKey,h=f===void 0?"store":f;r.withRef;var m=r.forwardRef,g=m===void 0?!1:m,p=r.context,x=p===void 0?Dte:p,y=_S(r,HGe),b=x;return function(_){var j=_.displayName||_.name||"Component",N=a(j),P=pn({},y,{getDisplayName:a,methodName:s,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:N,wrappedComponentName:j,WrappedComponent:_}),A=y.pure;function k(R){return e(R.dispatch,P)}var M=A?v.useMemo:function(R){return R()};function E(R){var B=v.useMemo(function(){var Qe=R.reactReduxForwardedRef,ft=_S(R,GGe);return[R.context,Qe,ft]},[R]),W=B[0],F=B[1],$=B[2],H=v.useMemo(function(){return W&&W.Consumer&&WGe.isContextConsumer(se.createElement(W.Consumer,null))?W:b},[W,b]),ce=v.useContext(H),oe=!!R.store&&!!R.store.getState&&!!R.store.dispatch;ce&&ce.store;var L=oe?R.store:ce.store,U=v.useMemo(function(){return k(L)},[L]),J=v.useMemo(function(){if(!d)return YGe;var Qe=Rte(L,oe?null:ce.subscription),ft=Qe.notifyNestedSubs.bind(Qe);return[Qe,ft]},[L,oe,ce]),V=J[0],Z=J[1],K=v.useMemo(function(){return oe?ce:pn({},ce,{subscription:V})},[oe,ce,V]),he=v.useReducer(XGe,KGe,ZGe),te=he[0],me=te[0],Ee=he[1];if(me&&me.error)throw me.error;var Se=v.useRef(),We=v.useRef($),be=v.useRef(),ne=v.useRef(!1),Qt=M(function(){return be.current&&$===We.current?be.current:U(L.getState(),$)},[L,me,$]);_z(JGe,[We,Se,ne,$,Qt,be,Z]),_z(QGe,[d,L,V,U,We,Se,ne,be,Z,Ee],[L,V,U]);var bt=v.useMemo(function(){return se.createElement(_,pn({},Qt,{ref:F}))},[F,_,Qt]),Pt=v.useMemo(function(){return d?se.createElement(H.Provider,{value:K},bt):bt},[H,bt,K]);return Pt}var I=A?se.memo(E):E;if(I.WrappedComponent=_,I.displayName=E.displayName=N,g){var O=se.forwardRef(function(B,W){return se.createElement(I,pn({},B,{reactReduxForwardedRef:W}))});return O.displayName=N,O.WrappedComponent=_,wz(O,_)}return wz(I,_)}}function Sz(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function XA(e,t){if(Sz(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Sz(e[r[a]],t[r[a]]))return!1;return!0}function tKe(e,t){var r={},n=function(s){var l=e[s];typeof l=="function"&&(r[s]=function(){return t(l.apply(void 0,arguments))})};for(var a in e)n(a);return r}function FD(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function jz(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Kte(e,t){return function(n,a){a.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=jz(e);var u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=jz(u),u=i(l,c)),u},i}}function rKe(e){return typeof e=="function"?Kte(e):void 0}function nKe(e){return e?void 0:FD(function(t){return{dispatch:t}})}function aKe(e){return e&&typeof e=="object"?FD(function(t){return tKe(e,t)}):void 0}const iKe=[rKe,nKe,aKe];function oKe(e){return typeof e=="function"?Kte(e):void 0}function sKe(e){return e?void 0:FD(function(){return{}})}const lKe=[oKe,sKe];function cKe(e,t,r){return pn({},r,e,t)}function uKe(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,s=!1,l;return function(u,d,f){var h=e(u,d,f);return s?(!a||!i(h,l))&&(l=h):(s=!0,l=h),l}}}function dKe(e){return typeof e=="function"?uKe(e):void 0}function fKe(e){return e?void 0:function(){return cKe}}const hKe=[dKe,fKe];var mKe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function pKe(e,t,r,n){return function(i,s){return r(e(i,s),t(n,s),s)}}function gKe(e,t,r,n,a){var i=a.areStatesEqual,s=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,u,d,f,h,m;function g(w,_){return u=w,d=_,f=e(u,d),h=t(n,d),m=r(f,h,d),c=!0,m}function p(){return f=e(u,d),t.dependsOnOwnProps&&(h=t(n,d)),m=r(f,h,d),m}function x(){return e.dependsOnOwnProps&&(f=e(u,d)),t.dependsOnOwnProps&&(h=t(n,d)),m=r(f,h,d),m}function y(){var w=e(u,d),_=!l(w,f);return f=w,_&&(m=r(f,h,d)),m}function b(w,_){var j=!s(_,d),N=!i(w,u,_,d);return u=w,d=_,j&&N?p():j?x():N?y():m}return function(_,j){return c?b(_,j):g(_,j)}}function vKe(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=_S(t,mKe),s=r(e,i),l=n(e,i),c=a(e,i),u=i.pure?gKe:pKe;return u(s,l,c,e,i)}var xKe=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function JA(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,s){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+s.wrappedComponentName+".")}}function yKe(e,t){return e===t}function bKe(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?eKe:r,a=t.mapStateToPropsFactories,i=a===void 0?lKe:a,s=t.mapDispatchToPropsFactories,l=s===void 0?iKe:s,c=t.mergePropsFactories,u=c===void 0?hKe:c,d=t.selectorFactory,f=d===void 0?vKe:d;return function(m,g,p,x){x===void 0&&(x={});var y=x,b=y.pure,w=b===void 0?!0:b,_=y.areStatesEqual,j=_===void 0?yKe:_,N=y.areOwnPropsEqual,P=N===void 0?XA:N,A=y.areStatePropsEqual,k=A===void 0?XA:A,M=y.areMergedPropsEqual,E=M===void 0?XA:M,I=_S(y,xKe),O=JA(m,i,"mapStateToProps"),R=JA(g,l,"mapDispatchToProps"),B=JA(p,u,"mergeProps");return n(f,pn({methodName:"connect",getDisplayName:function(F){return"Connect("+F+")"},shouldHandleStateChanges:!!m,initMapStateToProps:O,initMapDispatchToProps:R,initMergeProps:B,pure:w,areStatesEqual:j,areOwnPropsEqual:P,areStatePropsEqual:k,areMergedPropsEqual:E},I))}}const Yte=bKe();vGe(Lh.unstable_batchedUpdates);function wKe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Xte(e,t){var r=v.useState(function(){return{inputs:t,result:e()}})[0],n=v.useRef(!0),a=v.useRef(r),i=n.current||!!(t&&a.current.inputs&&wKe(t,a.current.inputs)),s=i?a.current:{inputs:t,result:e()};return v.useEffect(function(){n.current=!1,a.current=s},[s]),s.result}function _Ke(e,t){return Xte(function(){return e},t)}var pa=Xte,sn=_Ke,eu=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,s=n-i,l=a-r,c={top:r,right:n,bottom:a,left:i,width:s,height:l,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},BD=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Nz=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},SKe=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},QA={top:0,right:0,bottom:0,left:0},zD=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?QA:n,i=t.border,s=i===void 0?QA:i,l=t.padding,c=l===void 0?QA:l,u=eu(BD(r,a)),d=eu(Nz(r,s)),f=eu(Nz(d,c));return{marginBox:u,borderBox:eu(r),paddingBox:d,contentBox:f,margin:a,border:s,padding:c}},tc=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&Ph(!1),a},jKe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},rj=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,s=t.padding,l=SKe(n,r);return zD({borderBox:l,border:a,margin:i,padding:s})},nj=function(t,r){return r===void 0&&(r=jKe()),rj(t,r)},Jte=function(t,r){var n={top:tc(r.marginTop),right:tc(r.marginRight),bottom:tc(r.marginBottom),left:tc(r.marginLeft)},a={top:tc(r.paddingTop),right:tc(r.paddingRight),bottom:tc(r.paddingBottom),left:tc(r.paddingLeft)},i={top:tc(r.borderTopWidth),right:tc(r.borderRightWidth),bottom:tc(r.borderBottomWidth),left:tc(r.borderLeftWidth)};return zD({borderBox:t,margin:n,padding:a,border:i})},Qte=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Jte(r,n)},Cz=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function NKe(e,t){return!!(e===t||Cz(e)&&Cz(t))}function CKe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!NKe(e[r],t[r]))return!1;return!0}function Oo(e,t){t===void 0&&(t=CKe);var r,n=[],a,i=!1;function s(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&r===this&&t(l,n)||(a=e.apply(this,l),i=!0,r=this,n=l),a}return s}var AKe=function(t){var r=[],n=null,a=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};const Ob=AKe;function Zte(e,t){}Zte.bind(null,"warn");Zte.bind(null,"error");function gh(){}function PKe(e,t){return pn({},e,{},t)}function hc(e,t,r){var n=t.map(function(a){var i=PKe(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var EKe="Invariant failed";function aj(e){this.message=e}aj.prototype.toString=function(){return this.message};function vr(e,t){if(!e)throw new aj(EKe)}var kKe=function(e){iJ(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=gh,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=l.error;u instanceof aj&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=hc(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof aj){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(se.Component),OKe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ij=function(t){return t+1},TKe=function(t){return`
  You have lifted an item in position `+ij(t.source.index)+`
`},ere=function(t,r){var n=t.droppableId===r.droppableId,a=ij(t.index),i=ij(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},tre=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},IKe=function(t){var r=t.destination;if(r)return ere(t.source,r);var n=t.combine;return n?tre(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Az=function(t){return`
  The item has returned to its starting position
  of `+ij(t.index)+`
`},DKe=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Az(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+ere(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+tre(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Az(t.source)+`
  `},z2={dragHandleUsageInstructions:OKe,onDragStart:TKe,onDragUpdate:IKe,onDragEnd:DKe},To={x:0,y:0},Vo=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},El=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},vh=function(t,r){return t.x===r.x&&t.y===r.y},kx=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},_p=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Tb=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Pz=function(t,r){return Math.min.apply(Math,r.map(function(n){return Tb(t,n)}))},rre=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},MKe=function(e,t){var r=eu({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},M1=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Ez=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},RKe={top:0,right:0,bottom:0,left:0},LKe=function(t,r){return r?M1(t,r.scroll.diff.displacement):t},$Ke=function(t,r,n){if(n&&n.increasedBy){var a;return pn({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},FKe=function(t,r){return r&&r.shouldClipSubject?MKe(r.pageMarginBox,t):eu(t)},Qv=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=LKe(t.marginBox,a),s=$Ke(i,n,r),l=FKe(s,a);return{page:t,withPlaceholder:r,active:l}},qD=function(e,t){e.frame||vr(!1);var r=e.frame,n=El(t,r.scroll.initial),a=kx(n),i=pn({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),s=Qv({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=pn({},e,{frame:i,subject:s});return l};function oj(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function UD(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Xh(e,t){if(e.find)return e.find(t);var r=UD(e,t);if(r!==-1)return e[r]}function nre(e){return Array.prototype.slice.call(e)}var are=Oo(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),ire=Oo(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),PC=Oo(function(e){return oj(e)}),BKe=Oo(function(e){return oj(e)}),Ox=Oo(function(e,t){var r=BKe(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function VD(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function EC(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var kC=Oo(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),zKe=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var s=VD(i);if(!s)return null;function l(p){var x={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return pn({},i,{at:x})}var c=i.displaced.all,u=c.length?c[0]:null;if(t)return u?l(u):null;var d=kC(r,a);if(!u){if(!d.length)return null;var f=d[d.length-1];return l(f.descriptor.id)}var h=UD(d,function(p){return p.descriptor.id===u});h===-1&&vr(!1);var m=h-1;if(m<0)return null;var g=d[m];return l(g.descriptor.id)},Tx=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ore={point:To,value:0},Ib={invisible:{},visible:{},all:[]},qKe={displaced:Ib,displacedBy:ore,at:null},gc=function(e,t){return function(r){return e<=r&&r<=t}},sre=function(e){var t=gc(e.top,e.bottom),r=gc(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),s=r(n.left)||r(n.right),l=i&&s;if(l)return!0;var c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right,d=c&&u;if(d)return!0;var f=c&&s||u&&i;return f}},UKe=function(e){var t=gc(e.top,e.bottom),r=gc(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},WD={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},lre={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},VKe=function(e){return function(t){var r=gc(t.top,t.bottom),n=gc(t.left,t.right);return function(a){return e===WD?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},WKe=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:To;return M1(t,n)},HKe=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},GKe=function(t,r,n){return n(r)(t)},HD=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,s=t.isVisibleThroughFrameFn,l=i?WKe(r,n):r;return HKe(l,n,s)&&GKe(l,a,s)},KKe=function(t){return HD(pn({},t,{isVisibleThroughFrameFn:sre}))},cre=function(t){return HD(pn({},t,{isVisibleThroughFrameFn:UKe}))},YKe=function(t){return HD(pn({},t,{isVisibleThroughFrameFn:VKe(t.destination.axis)}))},XKe=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var s=i[t];return s?s.shouldAnimate:!0};function JKe(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return eu(BD(r,n))}function Db(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,s=e.last;return t.reduce(function(c,u){var d=JKe(u,n),f=u.descriptor.id;c.all.push(f);var h=KKe({target:d,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var m=XKe(f,s,i),g={draggableId:f,shouldAnimate:m};return c.visible[f]=g,c},{all:[],visible:{},invisible:{}})}function QKe(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function kz(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=QKe(t,{inHomeList:r});return{displaced:Ib,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function sj(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,s=e.last,l=e.index,c=e.forceShouldAnimate,u=Tx(t,n);if(l==null)return kz({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var d=Xh(r,function(p){return p.descriptor.index===l});if(!d)return kz({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var f=kC(t,r),h=r.indexOf(d),m=f.slice(h),g=Db({afterDragging:m,destination:n,displacedBy:i,last:s,viewport:a.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function Th(e,t){return!!t.effected[e]}var ZKe=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var s=a.draggableId,l=n[s],c=l.descriptor.index,u=Th(s,i);return u?t?c:c-1:t?c+1:c},eYe=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,s=t?i+1:i-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return s<l||s>u?null:s},tYe=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,s=e.insideDestination,l=e.previousImpact,c=e.viewport,u=e.afterCritical,d=l.at;if(d||vr(!1),d.type==="REORDER"){var f=eYe({isMovingForward:t,isInHomeList:r,location:d.destination,insideDestination:s});return f==null?null:sj({draggable:n,insideDestination:s,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})}var h=ZKe({isMovingForward:t,destination:i,displaced:l.displaced,draggables:a,combine:d.combine,afterCritical:u});return h==null?null:sj({draggable:n,insideDestination:s,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},rYe=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return Th(n,r)?i?To:kx(a.point):i?a.point:To},nYe=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=EC(r);a||vr(!1);var i=a.draggableId,s=n[i].page.borderBox.center,l=rYe({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Vo(s,l)},ure=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},aYe=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},GD=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Oz=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return _p(r.line,n.marginBox[r.end]+ure(r,a),GD(r,n.marginBox,a))},Tz=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return _p(r.line,n.marginBox[r.start]-aYe(r,a),GD(r,n.marginBox,a))},iYe=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return _p(r.line,n.contentBox[r.start]+ure(r,a),GD(r,n.contentBox,a))},oYe=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,s=Ox(a.descriptor.id,n),l=r.page,c=a.axis;if(!s.length)return iYe({axis:c,moveInto:a.page,isMoving:l});var u=t.displaced,d=t.displacedBy,f=u.all[0];if(f){var h=n[f];if(Th(f,i))return Tz({axis:c,moveRelativeTo:h.page,isMoving:l});var m=rj(h.page,d.point);return Tz({axis:c,moveRelativeTo:m,isMoving:l})}var g=s[s.length-1];if(g.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Th(g.descriptor.id,i)){var p=rj(g.page,kx(i.displacedBy.point));return Oz({axis:c,moveRelativeTo:p,isMoving:l})}return Oz({axis:c,moveRelativeTo:g.page,isMoving:l})},bT=function(e,t){var r=e.frame;return r?Vo(t,r.scroll.diff.displacement):t},sYe=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,s=t.afterCritical,l=n.page.borderBox.center,c=r.at;return!a||!c?l:c.type==="REORDER"?oYe({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:s}):nYe({impact:r,draggables:i,afterCritical:s})},OC=function(e){var t=sYe(e),r=e.droppable,n=r?bT(r,t):t;return n},dre=function(e,t){var r=El(t,e.scroll.initial),n=kx(r),a=eu({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function Iz(e,t){return e.map(function(r){return t[r]})}function lYe(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var cYe=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,s=dre(r,Vo(r.scroll.current,i)),l=n.frame?qD(n,Vo(n.frame.scroll.current,i)):n,c=t.displaced,u=Db({afterDragging:Iz(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:s.frame,last:c,forceShouldAnimate:!1}),d=Db({afterDragging:Iz(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),f={},h={},m=[c,u,d];c.all.forEach(function(p){var x=lYe(p,m);if(x){h[p]=x;return}f[p]=!0});var g=pn({},t,{displaced:{all:c.all,invisible:f,visible:h}});return g},uYe=function(e,t){return Vo(e.scroll.diff.displacement,t)},KD=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=uYe(n,t),i=El(a,r.page.borderBox.center);return Vo(r.client.borderBox.center,i)},fre=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,s=e.onlyOnMainAxis,l=s===void 0?!1:s,c=El(n,t.page.borderBox.center),u=M1(t.page.borderBox,c),d={target:u,destination:r,withDroppableDisplacement:i,viewport:a};return l?YKe(d):cre(d)},dYe=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,s=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var d=Ox(n.descriptor.id,a),f=Tx(r,n),h=zKe({isMovingForward:t,draggable:r,destination:n,insideDestination:d,previousImpact:i})||tYe({isMovingForward:t,isInHomeList:f,draggable:r,draggables:a,destination:n,insideDestination:d,previousImpact:i,viewport:s,afterCritical:u});if(!h)return null;var m=OC({impact:h,draggable:r,droppable:n,draggables:a,afterCritical:u}),g=fre({draggable:r,destination:n,newPageBorderBoxCenter:m,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var p=KD({pageBorderBoxCenter:m,draggable:r,viewport:s});return{clientSelection:p,impact:h,scrollJumpRequest:null}}var x=El(m,l),y=cYe({impact:h,viewport:s,destination:n,draggables:a,maxScrollChange:x});return{clientSelection:c,impact:y,scrollJumpRequest:x}},xs=function(t){var r=t.subject.active;return r||vr(!1),r},fYe=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,s=n.subject.active;if(!s)return null;var l=n.axis,c=gc(s[l.start],s[l.end]),u=PC(a).filter(function(f){return f!==n}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return sre(i.frame)(xs(f))}).filter(function(f){var h=xs(f);return t?s[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<s[l.crossAxisStart]}).filter(function(f){var h=xs(f),m=gc(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||m(s[l.start])||m(s[l.end])}).sort(function(f,h){var m=xs(f)[l.crossAxisStart],g=xs(h)[l.crossAxisStart];return t?m-g:g-m}).filter(function(f,h,m){return xs(f)[l.crossAxisStart]===xs(m[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=gc(xs(f)[l.start],xs(f)[l.end]);return h(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return xs(f)[l.start]-xs(h)[l.start]})[0]:u.sort(function(f,h){var m=Pz(r,Ez(xs(f))),g=Pz(r,Ez(xs(h)));return m!==g?m-g:xs(f)[l.start]-xs(h)[l.start]})[0]},Dz=function(t,r){var n=t.page.borderBox.center;return Th(t.descriptor.id,r)?El(n,r.displacedBy.point):n},hYe=function(t,r){var n=t.page.borderBox;return Th(t.descriptor.id,r)?M1(n,kx(r.displacedBy.point)):n},mYe=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,s=a.filter(function(l){return cre({target:hYe(l,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var u=Tb(t,bT(n,Dz(l,i))),d=Tb(t,bT(n,Dz(c,i)));return u<d?-1:d<u?1:l.descriptor.index-c.descriptor.index});return s[0]||null},R1=Oo(function(t,r){var n=r[t.line];return{value:n,point:_p(t.line,n)}}),pYe=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return _p(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],s=Ox(t.descriptor.id,n),l=s.reduce(function(d,f){return d+f.client.marginBox[a.size]},0),c=l+r[a.line],u=c-i;return u<=0?null:_p(a.line,u)},hre=function(t,r){return pn({},t,{scroll:pn({},t.scroll,{max:r})})},mre=function(t,r,n){var a=t.frame;Tx(r,t)&&vr(!1),t.subject.withPlaceholder&&vr(!1);var i=R1(t.axis,r.displaceBy).point,s=pYe(t,i,n),l={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=Qv({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return pn({},t,{subject:c})}var u=s?Vo(a.scroll.max,s):a.scroll.max,d=hre(a,u),f=Qv({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:d});return pn({},t,{subject:f,frame:d})},gYe=function(t){var r=t.subject.withPlaceholder;r||vr(!1);var n=t.frame;if(!n){var a=Qv({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return pn({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||vr(!1);var s=hre(n,i),l=Qv({page:t.subject.page,axis:t.axis,frame:s,withPlaceholder:null});return pn({},t,{subject:l,frame:s})},vYe=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,s=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:Ib,displacedBy:ore,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=OC({impact:u,draggable:a,droppable:s,draggables:i,afterCritical:c}),f=Tx(a,s)?s:mre(s,a,i),h=fre({draggable:a,destination:f,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var m=t[s.axis.line]<=r.page.borderBox.center[s.axis.line],g=function(){var x=r.descriptor.index;return r.descriptor.id===a.descriptor.id||m?x:x+1}(),p=R1(s.axis,a.displaceBy);return sj({draggable:a,insideDestination:n,destination:s,viewport:l,displacedBy:p,last:Ib,index:g})},xYe=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,s=e.droppables,l=e.viewport,c=e.afterCritical,u=fYe({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:s,viewport:l});if(!u)return null;var d=Ox(u.descriptor.id,i),f=mYe({pageBorderBoxCenter:r,viewport:l,destination:u,insideDestination:d,afterCritical:c}),h=vYe({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:i,moveRelativeTo:f,insideDestination:d,viewport:l,afterCritical:c});if(!h)return null;var m=OC({impact:h,draggable:n,droppable:u,draggables:i,afterCritical:c}),g=KD({pageBorderBoxCenter:m,draggable:n,viewport:l});return{clientSelection:g,impact:h,scrollJumpRequest:null}},Rl=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},yYe=function(t,r){var n=Rl(t);return n?r[n]:null},bYe=function(e){var t=e.state,r=e.type,n=yYe(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],s=n||i,l=s.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,h=t.dimensions,m=h.draggables,g=h.droppables;return c?dYe({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:s,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):xYe({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:s,draggables:m,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})};function ym(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function pre(e){var t=gc(e.top,e.bottom),r=gc(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function wYe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function _Ye(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(s){var l=s.axis,c=_p(s.axis.line,t.center[l.line],s.page.borderBox.center[l.crossAxisLine]);return{id:s.descriptor.id,distance:Tb(a,c)}}).sort(function(s,l){return l.distance-s.distance});return i[0]?i[0].id:null}function SYe(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=PC(n).filter(function(i){if(!i.isEnabled)return!1;var s=i.subject.active;if(!s||!wYe(t,s))return!1;if(pre(s)(t.center))return!0;var l=i.axis,c=s.center[l.crossAxisLine],u=t[l.crossAxisStart],d=t[l.crossAxisEnd],f=gc(s[l.crossAxisStart],s[l.crossAxisEnd]),h=f(u),m=f(d);return!h&&!m?!0:h?u<c:d>c});return a.length?a.length===1?a[0].descriptor.id:_Ye({pageBorderBox:t,draggable:r,candidates:a}):null}var gre=function(t,r){return eu(M1(t,r))},jYe=function(e,t){var r=e.frame;return r?gre(t,r.scroll.diff.value):t};function vre(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function NYe(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var CYe=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,s=e.viewport,l=e.afterCritical,c=n.axis,u=R1(n.axis,r.displaceBy),d=u.value,f=t[c.start],h=t[c.end],m=kC(r,a),g=Xh(m,function(x){var y=x.descriptor.id,b=x.page.borderBox.center[c.line],w=Th(y,l),_=vre({displaced:i,id:y});return w?_?h<=b:f<b-d:_?h<=b+d:f<b}),p=NYe({draggable:r,closest:g,inHomeList:Tx(r,n)});return sj({draggable:r,insideDestination:a,destination:n,viewport:s,last:i,displacedBy:u,index:p})},AYe=4,PYe=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,s=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=R1(a.axis,t.displaceBy),u=c.value,d=r[l.start],f=r[l.end],h=kC(t,i),m=Xh(h,function(p){var x=p.descriptor.id,y=p.page.borderBox,b=y[l.size],w=b/AYe,_=Th(x,s),j=vre({displaced:n.displaced,id:x});return _?j?f>y[l.start]+w&&f<y[l.end]-w:d>y[l.start]-u+w&&d<y[l.end]-u-w:j?f>y[l.start]+u+w&&f<y[l.end]+u-w:d>y[l.start]+w&&d<y[l.end]-w});if(!m)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:a.descriptor.id}}};return g},xre=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,s=e.viewport,l=e.afterCritical,c=gre(r.page.borderBox,t),u=SYe({pageBorderBox:c,draggable:r,droppables:a});if(!u)return qKe;var d=a[u],f=Ox(d.descriptor.id,n),h=jYe(d,c);return PYe({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:d,insideDestination:f,afterCritical:l})||CYe({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:f,last:i.displaced,viewport:s,afterCritical:l})},YD=function(e,t){var r;return pn({},e,(r={},r[t.descriptor.id]=t,r))},EYe=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=Rl(r),s=Rl(n);if(!i||i===s)return a;var l=a[i];if(!l.subject.withPlaceholder)return a;var c=gYe(l);return YD(a,c)},kYe=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,s=EYe({previousImpact:a,impact:i,droppables:n}),l=Rl(i);if(!l)return s;var c=n[l];if(Tx(t,c)||c.subject.withPlaceholder)return s;var u=mre(c,t,r);return YD(s,u)},iy=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,s=e.scrollJumpRequest,l=a||t.viewport,c=n||t.dimensions,u=r||t.current.client.selection,d=El(u,t.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Vo(t.initial.client.borderBoxCenter,d)},h={selection:Vo(f.selection,l.scroll.current),borderBoxCenter:Vo(f.borderBoxCenter,l.scroll.current),offset:Vo(f.offset,l.scroll.diff.value)},m={client:f,page:h};if(t.phase==="COLLECTING")return pn({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:m});var g=c.draggables[t.critical.draggable.id],p=i||xre({pageOffset:h.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),x=kYe({draggable:g,impact:p,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),y=pn({},t,{current:m,dimensions:{draggables:c.draggables,droppables:x},impact:p,viewport:l,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null});return y};function OYe(e,t){return e.map(function(r){return t[r]})}var yre=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,s=t.displaced,l=OYe(s.all,n),c=Db({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:s});return pn({},t,{displaced:c})},bre=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,s=e.afterCritical,l=OC({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:s});return KD({pageBorderBoxCenter:l,draggable:r,viewport:i})},wre=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&vr(!1);var a=t.impact,i=n||t.viewport,s=r||t.dimensions,l=s.draggables,c=s.droppables,u=l[t.critical.draggable.id],d=Rl(a);d||vr(!1);var f=c[d],h=yre({impact:a,viewport:i,destination:f,draggables:l}),m=bre({impact:h,draggable:u,droppable:f,draggables:l,viewport:i,afterCritical:t.afterCritical});return iy({impact:h,clientSelection:m,state:t,dimensions:s,viewport:i})},TYe=function(e){return{index:e.index,droppableId:e.droppableId}},_re=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=R1(r.axis,t.displaceBy),s=Ox(r.descriptor.id,n),l=s.indexOf(t);l===-1&&vr(!1);var c=s.slice(l+1),u=c.reduce(function(m,g){return m[g.descriptor.id]=!0,m},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:u},f=Db({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:i,at:{type:"REORDER",destination:TYe(t.descriptor)}};return{impact:h,afterCritical:d}},IYe=function(e,t){return{draggables:e.draggables,droppables:YD(e.droppables,t)}},DYe=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=rj(t.client,r),i=nj(a,n),s=pn({},t,{placeholder:pn({},t.placeholder,{client:a}),client:a,page:i});return s},MYe=function(e){var t=e.frame;return t||vr(!1),t},RYe=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var s=i.descriptor.droppableId,l=r[s],c=MYe(l),u=c.scroll.diff.value,d=Vo(a,u),f=DYe({draggable:i,offset:d,initialWindowScroll:n.scroll.initial});return f})},LYe=function(e){var t=e.state,r=e.published,n=r.modified.map(function(w){var _=t.dimensions.droppables[w.droppableId],j=qD(_,w.scroll);return j}),a=pn({},t.dimensions.droppables,{},are(n)),i=ire(RYe({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),s=pn({},t.dimensions.draggables,{},i);r.removals.forEach(function(w){delete s[w]});var l={droppables:a,draggables:s},c=Rl(t.impact),u=c?l.droppables[c]:null,d=l.draggables[t.critical.draggable.id],f=l.droppables[t.critical.droppable.id],h=_re({draggable:d,home:f,draggables:s,viewport:t.viewport}),m=h.impact,g=h.afterCritical,p=u&&u.isCombineEnabled?t.impact:m,x=xre({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:p,viewport:t.viewport,afterCritical:g}),y=pn({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:x,onLiftImpact:m,dimensions:l,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return y;var b=pn({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},wT=function(t){return t.movementMode==="SNAP"},ZA=function(t,r,n){var a=IYe(t.dimensions,r);return!wT(t)||n?iy({state:t,dimensions:a}):wre({state:t,dimensions:a})};function eP(e){return e.isDragging&&e.movementMode==="SNAP"?pn({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Mz={phase:"IDLE",completed:null,shouldFlush:!1},$Ye=function(e,t){if(e===void 0&&(e=Mz),t.type==="FLUSH")return pn({},Mz,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&vr(!1);var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,s=r.dimensions,l=r.movementMode,c=s.draggables[n.draggable.id],u=s.droppables[n.droppable.id],d={selection:a,borderBoxCenter:c.client.borderBox.center,offset:To},f={client:d,page:{selection:Vo(d.selection,i.scroll.initial),borderBoxCenter:Vo(d.selection,i.scroll.initial),offset:Vo(d.selection,i.scroll.diff.value)}},h=PC(s.droppables).every(function(Ee){return!Ee.isFixedOnPage}),m=_re({draggable:c,home:u,draggables:s.draggables,viewport:i}),g=m.impact,p=m.afterCritical,x={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:s,initial:f,current:f,isWindowScrollAllowed:h,impact:g,afterCritical:p,onLiftImpact:g,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return x}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&vr(!1);var y=pn({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||vr(!1),LYe({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ym(e)||vr(!1);var b=t.payload.client;return vh(b,e.current.client.selection)?e:iy({state:e,clientSelection:b,impact:wT(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return eP(e);ym(e)||vr(!1);var w=t.payload,_=w.id,j=w.newScroll,N=e.dimensions.droppables[_];if(!N)return e;var P=qD(N,j);return ZA(e,P,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ym(e)||vr(!1);var A=t.payload,k=A.id,M=A.isEnabled,E=e.dimensions.droppables[k];E||vr(!1),E.isEnabled===M&&vr(!1);var I=pn({},E,{isEnabled:M});return ZA(e,I,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ym(e)||vr(!1);var O=t.payload,R=O.id,B=O.isCombineEnabled,W=e.dimensions.droppables[R];W||vr(!1),W.isCombineEnabled===B&&vr(!1);var F=pn({},W,{isCombineEnabled:B});return ZA(e,F,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ym(e)||vr(!1),e.isWindowScrollAllowed||vr(!1);var $=t.payload.newScroll;if(vh(e.viewport.scroll.current,$))return eP(e);var H=dre(e.viewport,$);return wT(e)?wre({state:e,viewport:H}):iy({state:e,viewport:H})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ym(e))return e;var ce=t.payload.maxScroll;if(vh(ce,e.viewport.scroll.max))return e;var oe=pn({},e.viewport,{scroll:pn({},e.viewport.scroll,{max:ce})});return pn({phase:"DRAGGING"},e,{viewport:oe})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&vr(!1);var L=bYe({state:e,type:t.type});return L?iy({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var U=t.payload.reason;e.phase!=="COLLECTING"&&vr(!1);var J=pn({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:U});return J}if(t.type==="DROP_ANIMATE"){var V=t.payload,Z=V.completed,K=V.dropDuration,he=V.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||vr(!1);var te={phase:"DROP_ANIMATING",completed:Z,dropDuration:K,newHomeClientOffset:he,dimensions:e.dimensions};return te}if(t.type==="DROP_COMPLETE"){var me=t.payload.completed;return{phase:"IDLE",completed:me,shouldFlush:!1}}return e},FYe=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},BYe=function(t){return{type:"LIFT",payload:t}},zYe=function(t){return{type:"INITIAL_PUBLISH",payload:t}},qYe=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},UYe=function(){return{type:"COLLECTION_STARTING",payload:null}},VYe=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},WYe=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},HYe=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Sre=function(t){return{type:"MOVE",payload:t}},GYe=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},KYe=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},YYe=function(){return{type:"MOVE_UP",payload:null}},XYe=function(){return{type:"MOVE_DOWN",payload:null}},JYe=function(){return{type:"MOVE_RIGHT",payload:null}},QYe=function(){return{type:"MOVE_LEFT",payload:null}},XD=function(){return{type:"FLUSH",payload:null}},ZYe=function(t){return{type:"DROP_ANIMATE",payload:t}},JD=function(t){return{type:"DROP_COMPLETE",payload:t}},jre=function(t){return{type:"DROP",payload:t}},eXe=function(t){return{type:"DROP_PENDING",payload:t}},Nre=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},tXe=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var s=i.payload,l=s.id,c=s.clientSelection,u=s.movementMode,d=r();d.phase==="DROP_ANIMATING"&&n(JD({completed:d.completed})),r().phase!=="IDLE"&&vr(!1),n(XD()),n(FYe({draggableId:l,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:l,scrollOptions:f},m=e.startPublishing(h),g=m.critical,p=m.dimensions,x=m.viewport;n(zYe({critical:g,dimensions:p,clientSelection:c,movementMode:u,viewport:x}))}}}},rXe=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},QD={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Mb={opacity:{drop:0,combining:.7},scale:{drop:.75}},ZD={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},lm=ZD.outOfTheWay+"s "+QD.outOfTheWay,oy={fluid:"opacity "+lm,snap:"transform "+lm+", opacity "+lm,drop:function(t){var r=t+"s "+QD.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+lm,placeholder:"height "+lm+", width "+lm+", margin "+lm},Rz=function(t){return vh(t,To)?null:"translate("+t.x+"px, "+t.y+"px)"},_T={moveTo:Rz,drop:function(t,r){var n=Rz(t);return n?r?n+" scale("+Mb.scale.drop+")":n:null}},ST=ZD.minDropTime,Cre=ZD.maxDropTime,nXe=Cre-ST,Lz=1500,aXe=.6,iXe=function(e){var t=e.current,r=e.destination,n=e.reason,a=Tb(t,r);if(a<=0)return ST;if(a>=Lz)return Cre;var i=a/Lz,s=ST+nXe*i,l=n==="CANCEL"?s*aXe:s;return Number(l.toFixed(2))},oXe=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,s=n.draggables,l=n.droppables,c=Rl(t),u=c?l[c]:null,d=l[r.descriptor.droppableId],f=bre({impact:t,draggable:r,draggables:s,afterCritical:i,droppable:u||d,viewport:a}),h=El(f,r.client.borderBox.center);return h},sXe=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,s=e.onLiftImpact;if(!n.at||r!=="DROP"){var l=yre({draggables:t,impact:s,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=pn({},n,{displaced:Ib});return{impact:c,didDropInsideDroppable:!0}},lXe=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),s=a.payload.reason;if(i.phase==="COLLECTING"){r(eXe({reason:s}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&vr(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||vr(!1);var c=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],f=sXe({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=f.impact,m=f.didDropInsideDroppable,g=m?VD(h):null,p=m?EC(h):null,x={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:x,reason:s,mode:i.movementMode,destination:g,combine:p},b=oXe({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),w={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:h},_=!vh(i.current.client.offset,b)||!!y.combine;if(!_){r(JD({completed:w}));return}var j=iXe({current:i.current.client.offset,destination:b,reason:s}),N={newHomeClientOffset:b,dropDuration:j,completed:w};r(ZYe(N))}}}},Are=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function cXe(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function uXe(e){var t=e.onWindowScroll;function r(){t(Are())}var n=Ob(r),a=cXe(n),i=gh;function s(){return i!==gh}function l(){s()&&vr(!1),i=hc(window,[a])}function c(){s()||vr(!1),n.cancel(),i(),i=gh}return{start:l,stop:c,isActive:s}}var dXe=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},fXe=function(e){var t=uXe({onWindowScroll:function(n){e.dispatch(GYe({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&dXe(n)&&t.stop(),r(n)}}},hXe=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(s){t||r||(t=!0,e(s),clearTimeout(n))};return a.wasCalled=function(){return t},a},mXe=function(){var e=[],t=function(i){var s=UD(e,function(u){return u.timerId===i});s===-1&&vr(!1);var l=e.splice(s,1),c=l[0];c.callback()},r=function(i){var s=setTimeout(function(){return t(s)}),l={timerId:s,callback:i};e.push(l)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(s){clearTimeout(s.timerId),s.callback()})}};return{add:r,flush:n}},pXe=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},gXe=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},vXe=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},h0=function(t,r){r()},e2=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},tP=function(t,r,n,a){if(!t){n(a(r));return}var i=hXe(n),s={announce:i};t(r,s),i.wasCalled()||n(a(r))},xXe=function(e,t){var r=mXe(),n=null,a=function(h,m){n&&vr(!1),h0("onBeforeCapture",function(){var g=e().onBeforeCapture;if(g){var p={draggableId:h,mode:m};g(p)}})},i=function(h,m){n&&vr(!1),h0("onBeforeDragStart",function(){var g=e().onBeforeDragStart;g&&g(e2(h,m))})},s=function(h,m){n&&vr(!1);var g=e2(h,m);n={mode:m,lastCritical:h,lastLocation:g.source,lastCombine:null},r.add(function(){h0("onDragStart",function(){return tP(e().onDragStart,g,t,z2.onDragStart)})})},l=function(h,m){var g=VD(m),p=EC(m);n||vr(!1);var x=!vXe(h,n.lastCritical);x&&(n.lastCritical=h);var y=!pXe(n.lastLocation,g);y&&(n.lastLocation=g);var b=!gXe(n.lastCombine,p);if(b&&(n.lastCombine=p),!(!x&&!y&&!b)){var w=pn({},e2(h,n.mode),{combine:p,destination:g});r.add(function(){h0("onDragUpdate",function(){return tP(e().onDragUpdate,w,t,z2.onDragUpdate)})})}},c=function(){n||vr(!1),r.flush()},u=function(h){n||vr(!1),n=null,h0("onDragEnd",function(){return tP(e().onDragEnd,h,t,z2.onDragEnd)})},d=function(){if(n){var h=pn({},e2(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:a,beforeStart:i,start:s,update:l,flush:c,drop:u,abort:d}},yXe=function(e,t){var r=xXe(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var s=i.payload.critical;r.beforeStart(s,i.payload.movementMode),a(i),r.start(s,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;r.flush(),a(i),r.drop(l);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},bXe=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&vr(!1),e.dispatch(JD({completed:n.completed}))}}},wXe=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Nre())}};r=requestAnimationFrame(function(){r=null,t=hc(window,[s])})}}}},_Xe=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},SXe=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},jXe=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},NXe=function(e){return function(t){return function(r){return function(n){if(jXe(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&vr(!1),e.start(a);return}r(n),e.scroll(t.getState())}}}},CXe=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(jre({reason:n.reason})))}}}},AXe=Ite,PXe=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,s=e.autoScroller;return Tte($Ye,AXe(pGe(rXe(n),_Xe(t),tXe(t),lXe,bXe,wXe,CXe,NXe(s),fXe,SXe(r),yXe(a,i))))},rP=function(){return{additions:{},removals:{},modified:{}}};function EXe(e){var t=e.registry,r=e.callbacks,n=rP(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var d=n,f=d.additions,h=d.removals,m=d.modified,g=Object.keys(f).map(function(y){return t.draggable.getById(y).getDimension(To)}).sort(function(y,b){return y.descriptor.index-b.descriptor.index}),p=Object.keys(m).map(function(y){var b=t.droppable.getById(y),w=b.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:w}}),x={additions:g,removals:Object.keys(h),modified:p};n=rP(),r.publish(x)}))},s=function(d){var f=d.descriptor.id;n.additions[f]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],i()},l=function(d){var f=d.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=rP())};return{add:s,remove:l,stop:c}}var Pre=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=El({x:r,y:t},{x:a,y:n}),s={x:Math.max(0,i.x),y:Math.max(0,i.y)};return s},Ere=function(){var e=document.documentElement;return e||vr(!1),e},kre=function(){var e=Ere(),t=Pre({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},kXe=function(){var e=Are(),t=kre(),r=e.y,n=e.x,a=Ere(),i=a.clientWidth,s=a.clientHeight,l=n+i,c=r+s,u=eu({top:r,left:n,right:l,bottom:c}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:To,displacement:To}}};return d},OXe=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=kXe(),i=a.scroll.current,s=t.droppable,l=n.droppable.getAllByType(s.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(f){return f.getDimension(i)}),u={draggables:ire(c),droppables:are(l)},d={dimensions:u,critical:t,viewport:a};return d};function $z(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var TXe=function(e,t){var r=null,n=EXe({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(m,g){e.droppable.exists(m)||vr(!1),r&&t.updateDroppableIsEnabled({id:m,isEnabled:g})},i=function(m,g){r&&(e.droppable.exists(m)||vr(!1),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:g}))},s=function(m,g){r&&(e.droppable.exists(m)||vr(!1),t.updateDroppableScroll({id:m,newScroll:g}))},l=function(m,g){r&&e.droppable.getById(m).callbacks.scroll(g)},c=function(){if(r){n.stop();var m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(function(g){return g.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(m){r||vr(!1);var g=r.critical.draggable;m.type==="ADDITION"&&$z(e,g,m.value)&&n.add(m.value),m.type==="REMOVAL"&&$z(e,g,m.value)&&n.remove(m.value)},d=function(m){r&&vr(!1);var g=e.draggable.getById(m.draggableId),p=e.droppable.getById(g.descriptor.droppableId),x={draggable:g.descriptor,droppable:p.descriptor},y=e.subscribe(u);return r={critical:x,unsubscribe:y},OXe({critical:x,registry:e,scrollOptions:m.scrollOptions})},f={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:s,startPublishing:d,stopPublishing:c};return f},Ore=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},IXe=function(e){window.scrollBy(e.x,e.y)},DXe=Oo(function(e){return PC(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),MXe=function(t,r){var n=Xh(DXe(r),function(a){return a.frame||vr(!1),pre(a.frame.pageMarginBox)(t)});return n},RXe=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=MXe(t,n);return i},xh={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},LXe=function(e,t){var r=e[t.size]*xh.startFromPercentage,n=e[t.size]*xh.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Tre=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,s=i/a;return s},eM=1,$Xe=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return xh.maxPixelScroll;if(e===t.startScrollingFrom)return eM;var r=Tre({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=xh.maxPixelScroll*xh.ease(n);return Math.ceil(a)},Fz=xh.durationDampening.accelerateAt,Bz=xh.durationDampening.stopDampeningAt,FXe=function(e,t){var r=t,n=Bz,a=Date.now(),i=a-r;if(i>=Bz)return e;if(i<Fz)return eM;var s=Tre({startOfRange:Fz,endOfRange:n,current:i}),l=e*xh.ease(s);return Math.ceil(l)},zz=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=$Xe(t,r);return i===0?0:a?Math.max(FXe(i,n),eM):i},qz=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,s=LXe(t,a),l=r[a.end]<r[a.start];return l?zz({distanceToEdge:r[a.end],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i}):-1*zz({distanceToEdge:r[a.start],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i})},BXe=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},zXe=rre(function(e){return e===0?0:e}),Ire=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,s={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},l=qz({container:r,distanceToEdges:s,dragStartTime:t,axis:WD,shouldUseTimeDampening:i}),c=qz({container:r,distanceToEdges:s,dragStartTime:t,axis:lre,shouldUseTimeDampening:i}),u=zXe({x:c,y:l});if(vh(u,To))return null;var d=BXe({container:r,subject:n,proposedScroll:u});return d?vh(d,To)?null:d:null},qXe=rre(function(e){return e===0?0:e>0?1:-1}),tM=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Vo(r,a),s={x:e(i.x,n.x),y:e(i.y,n.y)};return vh(s,To)?null:s}}(),Dre=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},s=qXe(a),l=tM({max:i,current:n,change:s});return!l||s.x!==0&&l.x===0||s.y!==0&&l.y===0},rM=function(t,r){return Dre({current:t.scroll.current,max:t.scroll.max,change:r})},UXe=function(t,r){if(!rM(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return tM({current:a,max:n,change:r})},nM=function(t,r){var n=t.frame;return n?Dre({current:n.scroll.current,max:n.scroll.max,change:r}):!1},VXe=function(t,r){var n=t.frame;return!n||!nM(t,r)?null:tM({current:n.scroll.current,max:n.scroll.max,change:r})},WXe=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=Ire({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return s&&rM(t,s)?s:null},HXe=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=t.frame;if(!s)return null;var l=Ire({dragStartTime:a,container:s.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return l&&nM(t,l)?l:null},Uz=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,s=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=WXe({dragStartTime:r,viewport:u,subject:c,center:s,shouldUseTimeDampening:n});if(d){a(d);return}}var f=RXe({center:s,destination:Rl(t.impact),droppables:t.dimensions.droppables});if(f){var h=HXe({dragStartTime:r,droppable:f,subject:c,center:s,shouldUseTimeDampening:n});h&&i(f.descriptor.id,h)}},GXe=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Ob(t),a=Ob(r),i=null,s=function(d){i||vr(!1);var f=i,h=f.shouldUseTimeDampening,m=f.dragStartTime;Uz({state:d,scrollWindow:n,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:h})},l=function(d){i&&vr(!1);var f=Date.now(),h=!1,m=function(){h=!0};Uz({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&s(d)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:l,stop:c,scroll:s}},KXe=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(u,d){var f=Vo(u.current.client.selection,d);t({client:f})},i=function(u,d){if(!nM(u,d))return d;var f=VXe(u,d);if(!f)return r(u.descriptor.id,d),null;var h=El(d,f);r(u.descriptor.id,h);var m=El(d,h);return m},s=function(u,d,f){if(!u||!rM(d,f))return f;var h=UXe(d,f);if(!h)return n(f),null;var m=El(f,h);n(m);var g=El(f,m);return g},l=function(u){var d=u.scrollJumpRequest;if(d){var f=Rl(u.impact);f||vr(!1);var h=i(u.dimensions.droppables[f],d);if(h){var m=u.viewport,g=s(u.isWindowScrollAllowed,m,h);g&&a(u,g)}}};return l},YXe=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=GXe({scrollWindow:r,scrollDroppable:t}),i=KXe({move:n,scrollWindow:r,scrollDroppable:t}),s=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){a.scroll(u);return}u.scrollJumpRequest&&i(u)}},l={scroll:s,start:a.start,stop:a.stop};return l},Zv="data-rbd",ex=function(){var e=Zv+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),jT=function(){var e=Zv+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),XXe=function(){var e=Zv+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Vz={contextId:Zv+"-scroll-container-context-id"},JXe=function(t){return function(r){return"["+r+'="'+t+'"]'}},m0=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},QXe="pointer-events: none;",ZXe=function(e){var t=JXe(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ex.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:QXe,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+oy.outOfTheWay+`;
    `;return{selector:t(jT.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:t(XXe.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},s=[n,r,a,i];return{always:m0(s,"always"),resting:m0(s,"resting"),dragging:m0(s,"dragging"),dropAnimating:m0(s,"dropAnimating"),userCancel:m0(s,"userCancel")}},Ll=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect,nP=function(){var t=document.querySelector("head");return t||vr(!1),t},Wz=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function eJe(e,t){var r=pa(function(){return ZXe(e)},[e]),n=v.useRef(null),a=v.useRef(null),i=sn(Oo(function(f){var h=a.current;h||vr(!1),h.textContent=f}),[]),s=sn(function(f){var h=n.current;h||vr(!1),h.textContent=f},[]);Ll(function(){!n.current&&!a.current||vr(!1);var f=Wz(t),h=Wz(t);return n.current=f,a.current=h,f.setAttribute(Zv+"-always",e),h.setAttribute(Zv+"-dynamic",e),nP().appendChild(f),nP().appendChild(h),s(r.always),i(r.resting),function(){var m=function(p){var x=p.current;x||vr(!1),nP().removeChild(x),p.current=null};m(n),m(a)}},[t,s,i,r.always,r.resting,e]);var l=sn(function(){return i(r.dragging)},[i,r.dragging]),c=sn(function(f){if(f==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),u=sn(function(){a.current&&i(r.resting)},[i,r.resting]),d=pa(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u]);return d}var Mre=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function TC(e){return e instanceof Mre(e).HTMLElement}function tJe(e,t){var r="["+ex.contextId+'="'+e+'"]',n=nre(document.querySelectorAll(r));if(!n.length)return null;var a=Xh(n,function(i){return i.getAttribute(ex.draggableId)===t});return!a||!TC(a)?null:a}function rJe(e){var t=v.useRef({}),r=v.useRef(null),n=v.useRef(null),a=v.useRef(!1),i=sn(function(h,m){var g={id:h,focus:m};return t.current[h]=g,function(){var x=t.current,y=x[h];y!==g&&delete x[h]}},[]),s=sn(function(h){var m=tJe(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=sn(function(h,m){r.current===h&&(r.current=m)},[]),c=sn(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&s(h)}))},[s]),u=sn(function(h){r.current=null;var m=document.activeElement;m&&m.getAttribute(ex.draggableId)===h&&(r.current=h)},[]);Ll(function(){return a.current=!0,function(){a.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var d=pa(function(){return{register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,u,c,l]);return d}function nJe(){var e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){var m=t.indexOf(f);m!==-1&&t.splice(m,1)}}function n(f){t.length&&t.forEach(function(h){return h(f)})}function a(f){return e.draggables[f]||null}function i(f){var h=a(f);return h||vr(!1),h}var s={register:function(h){e.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,m){var g=e.draggables[m.descriptor.id];g&&g.uniqueId===h.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var m=h.descriptor.id,g=a(m);g&&h.uniqueId===g.uniqueId&&(delete e.draggables[m],n({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return oj(e.draggables).filter(function(m){return m.descriptor.type===h})}};function l(f){return e.droppables[f]||null}function c(f){var h=l(f);return h||vr(!1),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var m=l(h.descriptor.id);m&&h.uniqueId===m.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return oj(e.droppables).filter(function(m){return m.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:s,droppable:u,subscribe:r,clean:d}}function aJe(){var e=pa(nJe,[]);return v.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var aM=se.createContext(null),lj=function(){var e=document.body;return e||vr(!1),e},iJe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},oJe=function(t){return"rbd-announcement-"+t};function sJe(e){var t=pa(function(){return oJe(e)},[e]),r=v.useRef(null);v.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),pn(i.style,iJe),lj().appendChild(i),function(){setTimeout(function(){var c=lj();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=sn(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var lJe=0,cJe={separator:"::"};function iM(e,t){return t===void 0&&(t=cJe),pa(function(){return""+e+t.separator+lJe++},[t.separator,e])}function uJe(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function dJe(e){var t=e.contextId,r=e.text,n=iM("hidden-text",{separator:"-"}),a=pa(function(){return uJe({contextId:t,uniqueId:n})},[n,t]);return v.useEffect(function(){var s=document.createElement("div");return s.id=a,s.textContent=r,s.style.display="none",lj().appendChild(s),function(){var c=lj();c.contains(s)&&c.removeChild(s)}},[a,r]),a}var IC=se.createContext(null);function Rre(e){var t=v.useRef(e);return v.useEffect(function(){t.current=e}),t}function fJe(){var e=null;function t(){return!!e}function r(s){return s===e}function n(s){e&&vr(!1);var l={abandon:s};return e=l,l}function a(){e||vr(!1),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var hJe=9,mJe=13,oM=27,Lre=32,pJe=33,gJe=34,vJe=35,xJe=36,yJe=37,bJe=38,wJe=39,_Je=40,t2,SJe=(t2={},t2[mJe]=!0,t2[hJe]=!0,t2),$re=function(e){SJe[e.keyCode]&&e.preventDefault()},DC=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Xh(t,function(n){return"on"+n in document});return r||e}(),Fre=0,Hz=5;function jJe(e,t){return Math.abs(t.x-e.x)>=Hz||Math.abs(t.y-e.y)>=Hz}var Gz={type:"IDLE"};function NJe(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(s){var l=s.button,c=s.clientX,u=s.clientY;if(l===Fre){var d={x:c,y:u},f=n();if(f.type==="DRAGGING"){s.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&vr(!1);var h=f.point;if(jJe(h,d)){s.preventDefault();var m=f.actions.fluidLift(d);a({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(s){var l=n();if(l.type!=="DRAGGING"){t();return}s.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(s){n().type==="DRAGGING"&&s.preventDefault(),t()}},{eventName:"keydown",fn:function(s){var l=n();if(l.type==="PENDING"){t();return}if(s.keyCode===oM){s.preventDefault(),t();return}$re(s)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(s){var l=n();if(l.type==="IDLE"&&vr(!1),l.actions.shouldRespectForcePress()){t();return}s.preventDefault()}},{eventName:DC,fn:t}]}function CJe(e){var t=v.useRef(Gz),r=v.useRef(gh),n=pa(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===Fre&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=e.findClosestDraggableId(f);if(h){var m=e.tryGetLock(h,s,{sourceEvent:f});if(m){f.preventDefault();var g={x:f.clientX,y:f.clientY};r.current(),u(m,g)}}}}}},[e]),a=pa(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var m=e.findOptionsForDraggable(h);m&&(m.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}}}},[e]),i=sn(function(){var f={passive:!1,capture:!0};r.current=hc(window,[a,n],f)},[a,n]),s=sn(function(){var d=t.current;d.type!=="IDLE"&&(t.current=Gz,r.current(),i())},[i]),l=sn(function(){var d=t.current;s(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[s]),c=sn(function(){var f={capture:!0,passive:!1},h=NJe({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});r.current=hc(window,h,f)},[l,s]),u=sn(function(f,h){t.current.type!=="IDLE"&&vr(!1),t.current={type:"PENDING",point:h,actions:f},c()},[c]);Ll(function(){return i(),function(){r.current()}},[i])}var ug;function AJe(){}var PJe=(ug={},ug[gJe]=!0,ug[pJe]=!0,ug[xJe]=!0,ug[vJe]=!0,ug);function EJe(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===oM){i.preventDefault(),r();return}if(i.keyCode===Lre){i.preventDefault(),n();return}if(i.keyCode===_Je){i.preventDefault(),e.moveDown();return}if(i.keyCode===bJe){i.preventDefault(),e.moveUp();return}if(i.keyCode===wJe){i.preventDefault(),e.moveRight();return}if(i.keyCode===yJe){i.preventDefault(),e.moveLeft();return}if(PJe[i.keyCode]){i.preventDefault();return}$re(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:DC,fn:r}]}function kJe(e){var t=v.useRef(AJe),r=pa(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Lre)return;var s=e.findClosestDraggableId(i);if(!s)return;var l=e.tryGetLock(s,d,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,u=l.snapLift();t.current();function d(){c||vr(!1),c=!1,t.current(),n()}t.current=hc(window,EJe(u,d),{capture:!0,passive:!1})}}},[e]),n=sn(function(){var i={passive:!1,capture:!0};t.current=hc(window,[r],i)},[r]);Ll(function(){return n(),function(){t.current()}},[n])}var aP={type:"IDLE"},OJe=120,TJe=.15;function IJe(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===oM&&a.preventDefault(),t()}},{eventName:DC,fn:t}]}function DJe(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var s=n();if(s.type!=="DRAGGING"){t();return}s.hasMoved=!0;var l=i.touches[0],c=l.clientX,u=l.clientY,d={x:c,y:u};i.preventDefault(),s.actions.move(d)}},{eventName:"touchend",fn:function(i){var s=n();if(s.type!=="DRAGGING"){t();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var s=n();s.type==="IDLE"&&vr(!1);var l=i.touches[0];if(l){var c=l.force>=TJe;if(c){var u=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){u&&t();return}if(u){if(s.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:DC,fn:t}]}function MJe(e){var t=v.useRef(aP),r=v.useRef(gh),n=sn(function(){return t.current},[]),a=sn(function(m){t.current=m},[]),i=pa(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var g=e.findClosestDraggableId(m);if(g){var p=e.tryGetLock(g,l,{sourceEvent:m});if(p){var x=m.touches[0],y=x.clientX,b=x.clientY,w={x:y,y:b};r.current(),f(p,w)}}}}}},[e]),s=sn(function(){var m={capture:!0,passive:!1};r.current=hc(window,[i],m)},[i]),l=sn(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(aP),r.current(),s())},[s,a]),c=sn(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=sn(function(){var m={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},p=hc(window,DJe(g),m),x=hc(window,IJe(g),m);r.current=function(){p(),x()}},[c,n,l]),d=sn(function(){var m=n();m.type!=="PENDING"&&vr(!1);var g=m.actions.fluidLift(m.point);a({type:"DRAGGING",actions:g,hasMoved:!1})},[n,a]),f=sn(function(m,g){n().type!=="IDLE"&&vr(!1);var p=setTimeout(d,OJe);a({type:"PENDING",point:g,actions:m,longPressTimerId:p}),u()},[u,n,a,d]);Ll(function(){return s(),function(){r.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),a(aP))}},[n,s,a]),Ll(function(){var m=hc(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var RJe={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Bre(e,t){if(t==null)return!1;var r=!!RJe[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Bre(e,t.parentElement)}function LJe(e,t){var r=t.target;return TC(r)?Bre(e,r):!1}var $Je=function(e){return eu(e.getBoundingClientRect()).center};function FJe(e){return e instanceof Mre(e).Element}var BJe=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Xh(t,function(n){return n in Element.prototype});return r||e}();function zre(e,t){return e==null?null:e[BJe](t)?e:zre(e.parentElement,t)}function zJe(e,t){return e.closest?e.closest(t):zre(e,t)}function qJe(e){return"["+ex.contextId+'="'+e+'"]'}function UJe(e,t){var r=t.target;if(!FJe(r))return null;var n=qJe(e),a=zJe(r,n);return!a||!TC(a)?null:a}function VJe(e,t){var r=UJe(e,t);return r?r.getAttribute(ex.draggableId):null}function WJe(e,t){var r="["+jT.contextId+'="'+e+'"]',n=nre(document.querySelectorAll(r)),a=Xh(n,function(i){return i.getAttribute(jT.id)===t});return!a||!TC(a)?null:a}function HJe(e){e.preventDefault()}function r2(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function qre(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Ore(r.getState(),a))}function GJe(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,s=e.forceSensorStop,l=e.sourceEvent,c=qre({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var u=a.draggable.getById(i),d=WJe(r,u.descriptor.id);if(!d||l&&!u.options.canDragInteractiveElements&&LJe(d,l))return null;var f=t.claim(s||gh),h="PRE_DRAG";function m(){return u.options.shouldRespectForcePress}function g(){return t.isActive(f)}function p(N,P){r2({expected:N,phase:h,isLockActive:g,shouldWarn:!0})&&n.dispatch(P())}var x=p.bind(null,"DRAGGING");function y(N){function P(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(P(),h!=="PRE_DRAG"&&vr(!1)),n.dispatch(BYe(N.liftActionArgs)),h="DRAGGING";function A(k,M){if(M===void 0&&(M={shouldBlockNextClick:!1}),N.cleanup(),M.shouldBlockNextClick){var E=hc(window,[{eventName:"click",fn:HJe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}P(),n.dispatch(jre({reason:k}))}return pn({isActive:function(){return r2({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(M){return A("DROP",M)},cancel:function(M){return A("CANCEL",M)}},N.actions)}function b(N){var P=Ob(function(k){x(function(){return Sre({client:k})})}),A=y({liftActionArgs:{id:i,clientSelection:N,movementMode:"FLUID"},cleanup:function(){return P.cancel()},actions:{move:P}});return pn({},A,{move:P})}function w(){var N={moveUp:function(){return x(YYe)},moveRight:function(){return x(JYe)},moveDown:function(){return x(XYe)},moveLeft:function(){return x(QYe)}};return y({liftActionArgs:{id:i,clientSelection:$Je(d),movementMode:"SNAP"},cleanup:gh,actions:N})}function _(){var N=r2({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});N&&t.release()}var j={isActive:function(){return r2({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:b,snapLift:w,abort:_};return j}var KJe=[CJe,kJe,MJe];function YJe(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,s=[].concat(i?KJe:[],a||[]),l=v.useState(function(){return fJe()})[0],c=sn(function(b,w){b.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);Ll(function(){var b=r.getState(),w=r.subscribe(function(){var _=r.getState();c(b,_),b=_});return w},[l,r,c]),Ll(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=sn(function(y){return qre({lockAPI:l,registry:n,store:r,draggableId:y})},[l,n,r]),d=sn(function(y,b,w){return GJe({lockAPI:l,registry:n,contextId:t,store:r,draggableId:y,forceSensorStop:b,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[t,l,n,r]),f=sn(function(y){return VJe(t,y)},[t]),h=sn(function(y){var b=n.draggable.findById(y);return b?b.options:null},[n.draggable]),m=sn(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(XD()))},[l,r]),g=sn(l.isClaimed,[l]),p=pa(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:g}},[u,d,f,h,m,g]),x=0;x<s.length;x++)s[x](p)}var XJe=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function p0(e){return e.current||vr(!1),e.current}function JJe(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,s=v.useRef(null),l=Rre(e),c=sn(function(){return XJe(l.current)},[l]),u=sJe(t),d=dJe({contextId:t,text:i}),f=eJe(t,a),h=sn(function(k){p0(s).dispatch(k)},[]),m=pa(function(){return gz({publishWhileDragging:qYe,updateDroppableScroll:VYe,updateDroppableIsEnabled:WYe,updateDroppableIsCombineEnabled:HYe,collectionStarting:UYe},h)},[h]),g=aJe(),p=pa(function(){return TXe(g,m)},[g,m]),x=pa(function(){return YXe(pn({scrollWindow:IXe,scrollDroppable:p.scrollDroppable},gz({move:Sre},h)))},[p.scrollDroppable,h]),y=rJe(t),b=pa(function(){return PXe({announce:u,autoScroller:x,dimensionMarshal:p,focusMarshal:y,getResponders:c,styleMarshal:f})},[u,x,p,y,c,f]);s.current=b;var w=sn(function(){var k=p0(s),M=k.getState();M.phase!=="IDLE"&&k.dispatch(XD())},[]),_=sn(function(){var k=p0(s).getState();return k.isDragging||k.phase==="DROP_ANIMATING"},[]),j=pa(function(){return{isDragging:_,tryAbort:w}},[_,w]);r(j);var N=sn(function(k){return Ore(p0(s).getState(),k)},[]),P=sn(function(){return ym(p0(s).getState())},[]),A=pa(function(){return{marshal:p,focus:y,contextId:t,canLift:N,isMovementAllowed:P,dragHandleUsageInstructionsId:d,registry:g}},[t,p,d,y,N,P,g]);return YJe({contextId:t,store:b,registry:g,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),v.useEffect(function(){return w},[w]),se.createElement(IC.Provider,{value:A},se.createElement(bGe,{context:aM,store:b},e.children))}var QJe=0;function ZJe(){return pa(function(){return""+QJe++},[])}function eQe(e){var t=ZJe(),r=e.dragHandleUsageInstructions||z2.dragHandleUsageInstructions;return se.createElement(kKe,null,function(n){return se.createElement(JJe,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Ure=function(t){return function(r){return t===r}},tQe=Ure("scroll"),rQe=Ure("auto"),Kz=function(t,r){return r(t.overflowX)||r(t.overflowY)},nQe=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return Kz(n,tQe)||Kz(n,rQe)},aQe=function(){return!1},iQe=function e(t){return t==null?null:t===document.body?aQe()?t:null:t===document.documentElement?null:nQe(t)?t:e(t.parentElement)},NT=function(e){return{x:e.scrollLeft,y:e.scrollTop}},oQe=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},sQe=function(e){var t=iQe(e),r=oQe(e);return{closestScrollable:t,isFixedOnPage:r}},lQe=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,s=e.client,l=e.page,c=e.closest,u=function(){if(!c)return null;var m=c.scrollSize,g=c.client,p=Pre({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:m,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:p,diff:{value:To,displacement:To}}}}(),d=i==="vertical"?WD:lre,f=Qv({page:l,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:d,isEnabled:r,client:s,page:l,frame:u,subject:f};return h},cQe=function(t,r){var n=Qte(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,s=a+r.scrollHeight,l=i+r.scrollWidth,c={top:a,right:l,bottom:s,left:i},u=BD(c,n.border),d=zD({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return d},uQe=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,s=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,u=n.closestScrollable,d=cQe(t,u),f=nj(d,a),h=function(){if(!u)return null;var g=Qte(u),p={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:nj(g,a),scroll:NT(u),scrollSize:p,shouldClipSubject:c}}(),m=lQe({descriptor:r,isEnabled:!s,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:f,closest:h});return m},dQe={passive:!1},fQe={passive:!0},Yz=function(e){return e.shouldPublishImmediately?dQe:fQe};function cj(e){var t=v.useContext(e);return t||vr(!1),t}var n2=function(t){return t&&t.env.closestScrollable||null};function hQe(e){var t=v.useRef(null),r=cj(IC),n=iM("droppable"),a=r.registry,i=r.marshal,s=Rre(e),l=pa(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=v.useRef(l),u=pa(function(){return Oo(function(_,j){t.current||vr(!1);var N={x:_,y:j};i.updateDroppableScroll(l.id,N)})},[l.id,i]),d=sn(function(){var _=t.current;return!_||!_.env.closestScrollable?To:NT(_.env.closestScrollable)},[]),f=sn(function(){var _=d();u(_.x,_.y)},[d,u]),h=pa(function(){return Ob(f)},[f]),m=sn(function(){var _=t.current,j=n2(_);_&&j||vr(!1);var N=_.scrollOptions;if(N.shouldPublishImmediately){f();return}h()},[h,f]),g=sn(function(_,j){t.current&&vr(!1);var N=s.current,P=N.getDroppableRef();P||vr(!1);var A=sQe(P),k={ref:P,descriptor:l,env:A,scrollOptions:j};t.current=k;var M=uQe({ref:P,descriptor:l,env:A,windowScroll:_,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),E=A.closestScrollable;return E&&(E.setAttribute(Vz.contextId,r.contextId),E.addEventListener("scroll",m,Yz(k.scrollOptions))),M},[r.contextId,l,m,s]),p=sn(function(){var _=t.current,j=n2(_);return _&&j||vr(!1),NT(j)},[]),x=sn(function(){var _=t.current;_||vr(!1);var j=n2(_);t.current=null,j&&(h.cancel(),j.removeAttribute(Vz.contextId),j.removeEventListener("scroll",m,Yz(_.scrollOptions)))},[m,h]),y=sn(function(_){var j=t.current;j||vr(!1);var N=n2(j);N||vr(!1),N.scrollTop+=_.y,N.scrollLeft+=_.x},[]),b=pa(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:p,dragStopped:x,scroll:y}},[x,g,p,y]),w=pa(function(){return{uniqueId:n,descriptor:l,callbacks:b}},[b,l,n]);Ll(function(){return c.current=w.descriptor,a.droppable.register(w),function(){t.current&&x(),a.droppable.unregister(w)}},[b,l,x,w,i,a.droppable]),Ll(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ll(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function iP(){}var Xz={width:0,height:0,margin:RKe},mQe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?Xz:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},pQe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=mQe({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?oy.placeholder:null}};function gQe(e){var t=v.useRef(null),r=sn(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,s=e.contextId,l=v.useState(e.animate==="open"),c=l[0],u=l[1];v.useEffect(function(){return c?n!=="open"?(r(),u(!1),iP):t.current?iP:(t.current=setTimeout(function(){t.current=null,u(!1)}),r):iP},[n,c,r]);var d=sn(function(h){h.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),f=pQe({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return se.createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":s,onTransitionEnd:d,ref:e.innerRef})}var vQe=se.memo(gQe),sM=se.createContext(null),xQe=function(e){iJ(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(se.PureComponent),Jz={dragging:5e3,dropAnimating:4500},yQe=function(t,r){return r?oy.drop(r.duration):t?oy.snap:oy.fluid},bQe=function(t,r){return t?r?Mb.opacity.drop:Mb.opacity.combining:null},wQe=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function _Qe(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,s=!!a,l=wQe(e),c=!!i,u=c?_T.drop(n,s):_T.moveTo(n),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:yQe(l,i),transform:u,opacity:bQe(s,c),zIndex:c?Jz.dropAnimating:Jz.dragging,pointerEvents:"none"};return d}function SQe(e){return{transform:_T.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function jQe(e){return e.type==="DRAGGING"?_Qe(e):SQe(e)}function NQe(e,t,r){r===void 0&&(r=To);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=Jte(a,n),s=nj(i,r),l={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},u={descriptor:e,placeholder:l,displaceBy:c,client:i,page:s};return u}function CQe(e){var t=iM("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,c=pa(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:s,isEnabled:l}},[i,l,s]),u=sn(function(m){var g=a();return g||vr(!1),NQe(r,g,m)},[r,a]),d=pa(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:u}},[r,u,c,t]),f=v.useRef(d),h=v.useRef(!0);Ll(function(){return n.draggable.register(f.current),function(){return n.draggable.unregister(f.current)}},[n.draggable]),Ll(function(){if(h.current){h.current=!1;return}var m=f.current;f.current=d,n.draggable.update(d,m)},[d,n.draggable])}function AQe(e){e.preventDefault()}function PQe(e){var t=v.useRef(null),r=sn(function(k){t.current=k},[]),n=sn(function(){return t.current},[]),a=cj(IC),i=a.contextId,s=a.dragHandleUsageInstructionsId,l=a.registry,c=cj(sM),u=c.type,d=c.droppableId,f=pa(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,m=e.draggableId,g=e.isEnabled,p=e.shouldRespectForcePress,x=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,w=e.dropAnimationFinished;if(!y){var _=pa(function(){return{descriptor:f,registry:l,getDraggableRef:n,canDragInteractiveElements:x,shouldRespectForcePress:p,isEnabled:g}},[f,l,n,x,p,g]);CQe(_)}var j=pa(function(){return g?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:AQe}:null},[i,s,m,g]),N=sn(function(k){b.type==="DRAGGING"&&b.dropping&&k.propertyName==="transform"&&w()},[w,b]),P=pa(function(){var k=jQe(b),M=b.type==="DRAGGING"&&b.dropping?N:null,E={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":m,style:k,onTransitionEnd:M},dragHandleProps:j};return E},[i,j,m,b,N,r]),A=pa(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(P,b.snapshot,A)}var Vre=function(e,t){return e===t},Wre=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},EQe=function(t){return t.combine?t.combine.draggableId:null},kQe=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function OQe(){var e=Oo(function(a,i){return{x:a,y:i}}),t=Oo(function(a,i,s,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:s,combineWith:l,combineTargetFor:null}}),r=Oo(function(a,i,s,l,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:a,dimension:s,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}}),n=function(i,s){if(i.isDragging){if(i.critical.draggable.id!==s.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[s.draggableId],u=Rl(i.impact),d=kQe(i.impact),f=i.forceShouldAnimate;return r(e(l.x,l.y),i.movementMode,c,s.isClone,u,d,f)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==s.draggableId)return null;var m=s.isClone,g=i.dimensions.draggables[s.draggableId],p=h.result,x=p.mode,y=Wre(p),b=EQe(p),w=i.dropDuration,_={duration:w,curve:QD.drop,moveTo:i.newHomeClientOffset,opacity:b?Mb.opacity.drop:null,scale:b?Mb.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:g,dropping:_,draggingOver:y,combineWith:b,mode:x,forceShouldAnimate:null,snapshot:t(x,m,y,b,_)}}}return null};return n}function Hre(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var TQe={mapped:{type:"SECONDARY",offset:To,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Hre(null)}};function IQe(){var e=Oo(function(s,l){return{x:s,y:l}}),t=Oo(Hre),r=Oo(function(s,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:s,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),n=function(l){return l?r(To,l,!0):null},a=function(l,c,u,d){var f=u.displaced.visible[l],h=!!(d.inVirtualList&&d.effected[l]),m=EC(u),g=m&&m.draggableId===l?c:null;if(!f){if(!h)return n(g);if(u.displaced.invisible[l])return null;var p=kx(d.displacedBy.point),x=e(p.x,p.y);return r(x,g,!0)}if(h)return n(g);var y=u.displacedBy.point,b=e(y.x,y.y);return r(b,g,f.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===c.draggableId?null:a(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return i}var DQe=function(){var t=OQe(),r=IQe(),n=function(i,s){return t(i,s)||r(i,s)||TQe};return n},MQe={dropAnimationFinished:Nre},RQe=Yte(DQe,MQe,null,{context:aM,pure:!0,areStatePropsEqual:Vre})(PQe);function Gre(e){var t=cj(sM),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:se.createElement(RQe,e)}function LQe(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return se.createElement(Gre,pn({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function $Qe(e){var t=v.useContext(IC);t||vr(!1);var r=t.contextId,n=t.isMovementAllowed,a=v.useRef(null),i=v.useRef(null),s=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,m=e.isCombineEnabled,g=e.snapshot,p=e.useClone,x=e.updateViewportMaxScroll,y=e.getContainerForClone,b=sn(function(){return a.current},[]),w=sn(function(E){a.current=E},[]);sn(function(){return i.current},[]);var _=sn(function(E){i.current=E},[]),j=sn(function(){n()&&x({maxScroll:kre()})},[n,x]);hQe({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:b});var N=se.createElement(xQe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(E){var I=E.onClose,O=E.data,R=E.animate;return se.createElement(vQe,{placeholder:O,onClose:I,innerRef:_,animate:R,contextId:r,onTransitionEnd:j})}),P=pa(function(){return{innerRef:w,placeholder:N,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,N,w]),A=p?p.dragging.draggableId:null,k=pa(function(){return{droppableId:l,type:c,isUsingCloneFor:A}},[l,A,c]);function M(){if(!p)return null;var E=p.dragging,I=p.render,O=se.createElement(Gre,{draggableId:E.draggableId,index:E.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(R,B){return I(R,B,E)});return ZV.createPortal(O,y())}return se.createElement(sM.Provider,{value:k},s(P,g),M())}var oP=function(t,r){return t===r.droppable.type},Qz=function(t,r){return r.draggables[t.draggable.id]},FQe=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=pn({},t,{shouldAnimatePlaceholder:!1}),n=Oo(function(s){return{draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}}}),a=Oo(function(s,l,c,u,d,f){var h=d.descriptor.id,m=d.descriptor.droppableId===s;if(m){var g=f?{render:f,dragging:n(d.descriptor)}:null,p={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:p,useClone:g}}if(!l)return r;if(!u)return t;var x={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}}),i=function(l,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var m=l.critical;if(!oP(d,m))return r;var g=Qz(m,l.dimensions),p=Rl(l.impact)===u;return a(u,f,p,p,g,h)}if(l.phase==="DROP_ANIMATING"){var x=l.completed;if(!oP(d,x.critical))return r;var y=Qz(x.critical,l.dimensions);return a(u,f,Wre(x.result)===u,Rl(x.impact)===u,y,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var b=l.completed;if(!oP(d,b.critical))return r;var w=Rl(b.impact)===u,_=!!(b.impact.at&&b.impact.at.type==="COMBINE"),j=b.critical.droppable.id===u;return w?_?t:r:j?t:r}return r};return i},BQe={updateViewportMaxScroll:KYe};function zQe(){return document.body||vr(!1),document.body}var qQe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:zQe},Kre=Yte(FQe,BQe,null,{context:aM,pure:!0,areStatePropsEqual:Vre})($Qe);Kre.defaultProps=qQe;function dg({className:e,...t}){return o.jsx("div",{className:kt("animate-pulse rounded-md bg-muted/20",e),...t})}function lM(e){return{id:e.id,code:e.codigo_produto??"",name:e.nome,category:e.categoria??"",type:e.tipo_produto==="uso_interno"?"Uso Interno":"Venda",cost:Number(e.valor_custo??e.preco_custo??0),price:Number(e.valor_venda??e.preco_venda??0),stock:Number(e.estoque??e.estoque_atual??0),minStock:Number(e.estoque_minimo??0),status:e.status??(e.ativo===!1||Number(e.estoque??0)===0?"inactive":Number(e.estoque??0)>0&&Number(e.estoque??0)<=Number(e.estoque_minimo??0)?"low_stock":"active"),validade:e.validade?new Date(e.validade):null,barcode:e.codigo_barras??"",barcodeBox:e.codigo_barras_caixa??"",reference:e.referencia??"",brand:e.marca??"",group:e.grupo??"",unit:e.unidade??"UN",initialStock:Number(e.estoque_inicial??0),currentStock:Number(e.estoque_atual??e.estoque??0),weight:e.peso!=null?Number(e.peso):null,buyPrice:e.preco_compra!=null?Number(e.preco_compra):null,costsPercent:e.custos_percent!=null?Number(e.custos_percent):null,costPrice:e.preco_custo!=null?Number(e.preco_custo):null,marginPercent:e.lucro_percent!=null?Number(e.lucro_percent):null,salePrice:e.preco_venda!=null?Number(e.preco_venda):null,wholesaleQty:e.qtd_atacado!=null?Number(e.qtd_atacado):null,wholesalePrice:e.preco_atacado!=null?Number(e.preco_atacado):null,commissionPercent:e.comissao_percent!=null?Number(e.comissao_percent):null,discountPercent:e.desconto_percent!=null?Number(e.desconto_percent):null,cfopInterno:e.cfop_interno??"",cstIcmsInterno:e.cst_icms_interno??"",csosnInterno:e.csosn_interno??"",aliqIcmsInterno:e.aliquota_icms_interno!=null?Number(e.aliquota_icms_interno):null,cfopExterno:e.cfop_externo??"",cstIcmsExterno:e.cst_icms_externo??"",csosnExterno:e.csosn_externo??"",aliqIcmsExterno:e.aliquota_icms_externo!=null?Number(e.aliquota_icms_externo):null,cstPisEntrada:e.cst_pis_entrada??"",cstPisSaida:e.cst_pis_saida??"",aliqPisPercent:e.aliquota_pis_percent!=null?Number(e.aliquota_pis_percent):null,aliqCofinsPercent:e.aliquota_cofins_percent!=null?Number(e.aliquota_cofins_percent):null,cstIpi:e.cst_ipi??"",aliqIpiPercent:e.aliquota_ipi_percent!=null?Number(e.aliquota_ipi_percent):null,fcpPercent:e.fcp_percent!=null?Number(e.fcp_percent):null,mvaPercent:e.mva_percent!=null?Number(e.mva_percent):null,baseReduzidaPercent:e.base_reduzida_percent!=null?Number(e.base_reduzida_percent):null,ncm:e.ncm??"",ncmDescription:e.descricao_ncm??"",cest:e.cest??"",active:e.ativo??!0,allowSale:e.permite_venda??!0,payCommission:e.paga_comissao??!1,variablePrice:e.preco_variavel??!1,composition:e.composicao??!1,service:e.servico??!1,hasGrid:e.grade??!1,usePriceTable:e.usar_tabela_preco??!1,fuel:e.combustivel??!1,useImei:e.usa_imei??!1,stockByGrid:e.controle_estoque_por_grade??!1,showInApp:e.mostrar_no_app??!1}}async function UQe({from:e,to:t,codigoEmpresa:r,limit:n=1e3}={}){if(!e||!t)throw new Error("Perodo invlido");const a=(e instanceof Date?e:new Date(e)).toISOString(),i=(t instanceof Date?t:new Date(t)).toISOString(),{data:s,error:l}=await us(g=>{let p=Ne.from("comanda_itens").select("produto_id, quantidade, created_at").gte("created_at",a).lte("created_at",i).limit(n).abortSignal(g);return r&&(p=p.eq("codigo_empresa",r)),p},2e4,"Timeout getSoldProductsByPeriod (20s)");if(l)throw l;const c=new Map;for(const g of s||[]){const p=g.produto_id,x=Number(g.quantidade||0);c.set(p,(c.get(p)||0)+x)}const u=Array.from(c.entries()).sort((g,p)=>p[1]-g[1]);if(u.length===0)return[];const d=u.map(([g])=>g),{data:f,error:h}=await us(g=>{let p=Ne.from("produtos").select("id, nome").in("id",d).abortSignal(g);return r&&(p=p.eq("codigo_empresa",r)),p},15e3,"Timeout getSoldProductsByPeriod:produtos (15s)");if(h)throw h;const m=new Map((f||[]).map(g=>[g.id,g.nome]));return u.map(([g,p])=>({id:g,name:m.get(g)||String(g),total:p}))}async function CT({productId:e,delta:t,codigoEmpresa:r}){const n=Number(t);if(!e||!Number.isFinite(n)||n===0)throw new Error("Parmetros invlidos para ajuste de estoque");const{data:a,error:i}=await us(u=>{let d=Ne.from("produtos").select("id, estoque, estoque_atual").eq("id",e).single().abortSignal(u);return r&&(d=d.eq("codigo_empresa",r)),d},1e4,"Timeout get current stock (10s)");if(i)throw i;const l=Number(a?.estoque??a?.estoque_atual??0)+n,{error:c}=await us(u=>{let d=Ne.from("produtos").update({estoque:l,estoque_atual:l}).eq("id",e).abortSignal(u);return r&&(d=d.eq("codigo_empresa",r)),d},1e4,"Timeout update stock (10s)");if(c)throw c;return{id:e,stock:l}}async function VQe({limit:e=5,codigoEmpresa:t}={}){const r=new Date;r.setHours(0,0,0,0);const n=r.toISOString(),{data:a,error:i}=await us(h=>{let m=Ne.from("comanda_itens").select("produto_id, quantidade, created_at").gte("created_at",n).abortSignal(h);return t&&(m=m.eq("codigo_empresa",t)),m},15e3,"Timeout getMostSoldProductsToday (15s)");if(i)throw i;const s=new Map;for(const h of a||[]){const m=h.produto_id,g=Number(h.quantidade||0);s.set(m,(s.get(m)||0)+g)}const l=Array.from(s.entries()).sort((h,m)=>m[1]-h[1]).slice(0,e);if(l.length===0)return[];const c=l.map(([h])=>h),{data:u,error:d}=await us(h=>{let m=Ne.from("produtos").select("id, nome").in("id",c).abortSignal(h);return t&&(m=m.eq("codigo_empresa",t)),m},15e3,"Timeout getMostSoldProductsToday:produtos (15s)");if(d)throw d;const f=new Map((u||[]).map(h=>[h.id,h.nome]));return l.map(([h,m])=>({id:h,name:f.get(h)||String(h),total:m}))}function Yre(e){return{codigo_produto:e.code||null,nome:e.name,categoria:e.category||null,tipo_produto:e.type==="Uso Interno"?"uso_interno":"venda",valor_custo:e.cost!=null?Number(e.cost):0,valor_venda:e.price!=null?Number(e.price):0,estoque:e.stock!=null?Number(e.stock):0,estoque_minimo:e.minStock!=null?Number(e.minStock):0,status:e.status||null,validade:e.validade?new Date(e.validade).toISOString().slice(0,10):null,codigo_barras:e.barcode||null,codigo_barras_caixa:e.barcodeBox||null,referencia:e.reference||null,marca:e.brand||null,grupo:e.group||null,unidade:e.unit||null,estoque_inicial:e.initialStock!=null?Number(e.initialStock):null,estoque_atual:e.currentStock!=null?Number(e.currentStock):null,peso:e.weight!=null?Number(e.weight):null,preco_compra:e.buyPrice!=null?Number(e.buyPrice):null,custos_percent:e.costsPercent!=null?Number(e.costsPercent):null,preco_custo:e.costPrice!=null?Number(e.costPrice):null,lucro_percent:e.marginPercent!=null?Number(e.marginPercent):null,preco_venda:e.salePrice!=null?Number(e.salePrice):null,qtd_atacado:e.wholesaleQty!=null?Number(e.wholesaleQty):null,preco_atacado:e.wholesalePrice!=null?Number(e.wholesalePrice):null,comissao_percent:e.commissionPercent!=null?Number(e.commissionPercent):null,desconto_percent:e.discountPercent!=null?Number(e.discountPercent):null,cfop_interno:e.cfopInterno||null,cst_icms_interno:e.cstIcmsInterno||null,csosn_interno:e.csosnInterno||null,aliquota_icms_interno:e.aliqIcmsInterno!=null?Number(e.aliqIcmsInterno):null,cfop_externo:e.cfopExterno||null,cst_icms_externo:e.cstIcmsExterno||null,csosn_externo:e.csosnExterno||null,aliquota_icms_externo:e.aliqIcmsExterno!=null?Number(e.aliqIcmsExterno):null,cst_pis_entrada:e.cstPisEntrada||null,cst_pis_saida:e.cstPisSaida||null,aliquota_pis_percent:e.aliqPisPercent!=null?Number(e.aliqPisPercent):null,aliquota_cofins_percent:e.aliqCofinsPercent!=null?Number(e.aliqCofinsPercent):null,cst_ipi:e.cstIpi||null,aliquota_ipi_percent:e.aliqIpiPercent!=null?Number(e.aliqIpiPercent):null,fcp_percent:e.fcpPercent!=null?Number(e.fcpPercent):null,mva_percent:e.mvaPercent!=null?Number(e.mvaPercent):null,base_reduzida_percent:e.baseReduzidaPercent!=null?Number(e.baseReduzidaPercent):null,ncm:e.ncm||null,descricao_ncm:e.ncmDescription||null,cest:e.cest||null,ativo:e.active!=null?!!e.active:!0,permite_venda:e.allowSale!=null?!!e.allowSale:!0,paga_comissao:e.payCommission!=null?!!e.payCommission:!1,preco_variavel:e.variablePrice!=null?!!e.variablePrice:!1,composicao:e.composition!=null?!!e.composition:!1,servico:e.service!=null?!!e.service:!1,grade:e.hasGrid!=null?!!e.hasGrid:!1,usar_tabela_preco:e.usePriceTable!=null?!!e.usePriceTable:!1,combustivel:e.fuel!=null?!!e.fuel:!1,usa_imei:e.useImei!=null?!!e.useImei:!1,controle_estoque_por_grade:e.stockByGrid!=null?!!e.stockByGrid:!1,mostrar_no_app:e.showInApp!=null?!!e.showInApp:!1,importado_via_xml:e.importedViaXML===!0,xml_chave:e.xmlChave||null,xml_numero:e.xmlNumero||null,xml_serie:e.xmlSerie||null,xml_emissao:e.xmlEmissao?new Date(e.xmlEmissao).toISOString():null}}async function Sp(e={}){const{includeInactive:t=!1,search:r="",codigoEmpresa:n}=e;console.log("[products.api] ====== listProducts INICIO ======"),console.log("[products.api] Parametros:",{includeInactive:t,search:r,codigoEmpresa:n});const{data:a,error:i}=await us(c=>{let u=Ne.from("produtos").select("*").eq("codigo_empresa",n).order("nome",{ascending:!0}).abortSignal(c);if(t||(u=u.neq("status","inactive"),u=u.or("ativo.is.null,ativo.eq.true"),console.log("[products.api] Filtro aplicado: status != inactive AND (ativo IS NULL OR ativo = true)")),r&&r.trim().length>0){const d=r.trim();u=u.or(`nome.ilike.%${d}%,codigo_produto.ilike.%${d}%`)}return u},15e3,"Timeout listProducts (15s)");if(i)throw console.error("[products.api] listProducts:error",i),i;const s=(a||[]).map(lM);console.log("[products.api] listProducts RETORNOU:",s.length,"produtos"),console.log("[products.api] includeInactive:",t),console.log("[products.api] Produtos:",s.map(c=>({id:c.id,name:c.name,code:c.code})));const l=s.filter(c=>!c.code||c.code.trim()==="");return console.log("[products.api] Produtos SEM cdigo:",l.length),l.length>0&&l.forEach(c=>{console.log("  -",c.name,"| active:",c.active,"| status:",c.status,"| code:",c.code||"NULL")}),s}async function AT(e,t={}){const{codigoEmpresa:r}=t,n=Yre(e);r&&(n.codigo_empresa=r),console.info("[products.api] createProduct: payload",n);const a=async()=>us(u=>Ne.from("produtos").insert(n).select("*").single().abortSignal(u),15e3,"Timeout createProduct (15s)"),i=u=>{if(!u)return!1;if(u.code&&String(u.code)==="23505")return!0;const d=[u.message,u.details,u.hint].filter(Boolean).join(" ").toLowerCase();return d.includes("duplicate key")||d.includes("unique constraint")||d.includes("ux_produtos_empresa_codigo_produto")||d.includes("codigo_produto")};let s,l;if({data:s,error:l}=await a(),l&&i(l)&&n.codigo_produto){console.warn("[products.api] createProduct: duplicate code, trying to free code from inactive product");const{data:u,error:d}=await us(h=>Ne.from("produtos").select("id,status").eq("codigo_produto",n.codigo_produto).eq("status","inactive").limit(1).abortSignal(h),15e3,"Timeout find duplicate product (15s)"),f=Array.isArray(u)&&u.length>0?u[0]:null;if(!d&&f&&f.status==="inactive"){const{error:h}=await us(m=>Ne.from("produtos").update({codigo_produto:null}).eq("id",f.id).abortSignal(m),15e3,"Timeout clear duplicate code (15s)");h||({data:s,error:l}=await a())}else{const h=n.codigo_produto;n.codigo_produto=null,console.warn("[products.api] createProduct: no inactive found for duplicate code, retrying with codigo_produto = null (original:",h,")"),{data:s,error:l}=await a()}}if(l)throw console.error("[products.api] createProduct:error",l),l;const c=lM(s);return console.info("[products.api] createProduct: ok",c),c}async function cM(e,t,r={}){const n=Yre(t);console.info("[products.api] updateProduct: id",e,"payload",n);const{data:a,error:i}=await us(l=>Ne.from("produtos").update(n).eq("id",e).select("*").single().abortSignal(l),15e3,"Timeout updateProduct (15s)");if(i)throw console.error("[products.api] updateProduct:error",i),i;const s=lM(a);return console.info("[products.api] updateProduct: ok",s),s}async function us(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(new Error(r)),t);try{return await e(n.signal)}catch(i){throw i?.name==="AbortError"?new Error(r):i}finally{clearTimeout(a)}}async function Xre(e){console.info("[products.api] deleteProduct (soft): id",e);const{error:t}=await us(r=>Ne.from("produtos").update({status:"inactive",codigo_produto:null}).eq("id",e).abortSignal(r),15e3,"Timeout deleteProduct (15s)");if(t)throw console.error("[products.api] deleteProduct:error",t),t;return console.info("[products.api] deleteProduct: ok (inativado)"),!0}async function Zz(){console.info("[products.api] listCategories: start");const{data:e,error:t}=await us(n=>Ne.from("produto_categorias").select("nome").eq("ativa",!0).order("nome",{ascending:!0}).abortSignal(n),15e3,"Timeout listCategories (15s)");if(t)throw console.error("[products.api] listCategories:error",t),t;const r=(e||[]).map(n=>n.nome).filter(Boolean);return console.info("[products.api] listCategories: ok",{count:r.length}),r}async function WQe(e){const t=String(e||"").trim();if(!t)throw new Error("Nome da categoria invlido");console.info("[products.api] createCategory:",t);const{data:r,error:n}=await us(a=>Ne.from("produto_categorias").insert({nome:t}).select("nome").single().abortSignal(a),15e3,"Timeout createCategory (15s)");if(n)throw console.error("[products.api] createCategory:error",n),n;return r?.nome||t}async function HQe(e){const t=String(e||"").trim();if(!t)throw new Error("Nome da categoria invlido");console.info("[products.api] removeCategory:",t);const{count:r,error:n}=await us(l=>Ne.from("produtos").select("id",{count:"exact",head:!0}).eq("categoria",t).neq("status","inactive").abortSignal(l),15e3,"Timeout removeCategory:count (15s)");if(n)throw console.error("[products.api] removeCategory:count:error",n),n;if((r??0)>0){const l=new Error("Categoria possui produtos ativos vinculados");throw console.warn("[products.api] removeCategory: blocked by active products",{nome:t,prodCount:r}),l}const{data:a,error:i}=await us(l=>Ne.from("produto_categorias").update({ativa:!1}).eq("nome",t).select("nome").abortSignal(l),15e3,"Timeout removeCategory (15s)");if(i)throw console.error("[products.api] removeCategory:error",i),i;if((Array.isArray(a)?a.length:0)===0){const l=new Error("Categoria no encontrada para desativar");throw console.warn("[products.api] removeCategory: no rows affected",{nome:t}),l}return!0}const GQe={available:{label:"Livre",color:"border-success/50 bg-success/10 text-success",icon:Cs},"in-use":{label:"Em Uso",color:"border-warning/50 bg-warning/10 text-warning",icon:xv},"awaiting-payment":{label:"Pagamento",color:"border-info/50 bg-info/10 text-info",icon:uc}};function KQe(){const{toast:e}=Qa(),{userProfile:t,authReady:r}=Wi(),n=wc(),[a,i]=v.useState([]),[s,l]=v.useState(null),[c,u]=v.useState(!1),[d,f]=v.useState(0);v.useRef(!1);const[h,m]=v.useState(!1);v.useState([]);const[g,p]=v.useState(!1),x=v.useRef(null);v.useRef(null);const y=v.useRef([]),b=v.useRef(null),[w,_]=v.useState(0),[j,N]=v.useState("order");v.useRef(null),v.useRef(null),v.useState(!1);const[P,A]=v.useState(null),[k,M]=v.useState(null),[E,I]=v.useState(!1),[O,R]=v.useState(!1),[B,W]=v.useState(!1),[F,$]=v.useState([]),[H,ce]=v.useState(!1),[oe,L]=v.useState(!1),[U,J]=v.useState(!1),[V,Z]=v.useState(null),[K,he]=v.useState(""),[te,me]=v.useState(!1),[Ee,Se]=v.useState(!1),[We,be]=v.useState([]),[ne,Qt]=v.useState(null),[bt,Pt]=v.useState(null),[Qe,ft]=v.useState(!1),mt=v.useRef(""),[_t,ue]=v.useState(!1),[Ct,At]=v.useState(!1),[Wt,wt]=v.useState("order"),[Ae,qe]=v.useState(!1),[Ot,Y]=v.useState(""),[ve,Ve]=v.useState(()=>{try{return typeof window<"u"&&window.innerWidth<=640}catch{return!1}}),$e=v.useMemo(()=>{const ie=new Map,pe=s?.order||[];for(const Be of pe)ie.set(Be.productId,(ie.get(Be.productId)||0)+Number(Be.quantity||0));return ie},[s?.order]),Le=async ie=>{try{const Be=(s?.order||[]).find(Me=>String(Me.productId)===String(ie.id));if(!Be)return;const ze=Number(Be.quantity||0)-1;ze>0?await Mu({itemId:Be.id,quantidade:ze,codigoEmpresa:t?.codigo_empresa}):await $m({itemId:Be.id,codigoEmpresa:t?.codigo_empresa});try{await Wn(s)}catch{}}catch(pe){e({title:"Falha ao alterar quantidade",description:pe?.message||"Tente novamente",variant:"destructive"})}},it=v.useRef(null),Ye=v.useCallback(()=>{try{const ie=it.current;if(!ie)return 1;const Be=window.getComputedStyle(ie).gridTemplateColumns||"";if(Be){const Me=Be.split(" ").filter(Boolean).length;if(Me>0)return Me}const ze=ie.querySelector("[data-table-id]");if(ze){const Me=ze.getBoundingClientRect().width,lt=ie.getBoundingClientRect().width;if(Me>0)return Math.max(1,Math.floor(lt/Me))}return 1}catch{return 1}},[]),[Ge,Xe]=v.useState(!1);Ko();const ht=v.useMemo(()=>(a||[]).find(ie=>ie.status==="available")?.id||null,[a]),st=U||oe||O||g||te||Qe||h||E||Ct||!1,lr=async ie=>{try{if(!ie)return;if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}if(Ee)return;if(Se(!0),l(pe=>!pe||pe.id!==ie.id?ie:pe),ie.status==="available"||!ie.comandaId){Z(ie),L(!0);return}try{await Wn(ie)}catch{try{const ze=(await Fi({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(tt=>({id:tt.id,productId:tt.produto_id,name:tt.descricao||"Item",price:Number(tt.preco_unitario||0),quantity:Number(tt.quantidade||1)}));let Me=null;try{const tr=(await os({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(Lt=>Lt?.nome).filter(Boolean);Me=tr.length?tr.join(", "):null}catch{}const lt={...ie,order:ze,customer:Me};l(lt),i(tt=>tt.map(tr=>tr.id===lt.id?lt:tr))}catch{}}}finally{Se(!1)}};v.useEffect(()=>{const ie=()=>{try{Ve(typeof window<"u"&&window.innerWidth<=640)}catch{Ve(!1)}};return ie(),window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)},[]),v.useEffect(()=>{const ie=async pe=>{try{if(st){if((pe.key==="p"||pe.key==="P")&&h){pe.preventDefault(),setTimeout(()=>{try{b.current?.focus()}catch{}},0);return}return}const Be=String(pe.target?.tagName||"").toLowerCase();if(["input","textarea","select"].includes(Be)||pe.target?.isContentEditable||pe.repeat)return;if(pe.key==="F1"){pe.preventDefault();try{const ze=(a||[]).filter(Me=>Me.status==="available");ze.length>0?(l(ze[0]),Z?.(ze[0])):!s&&Array.isArray(a)&&a.length>0&&(l(a[0]),Z?.(a[0]))}catch{}L(!0);return}if(pe.key==="F2"){pe.preventDefault(),s?.comandaId?await ui():e({title:"Nenhuma comanda selecionada",description:"Selecione uma mesa com comanda aberta antes de fechar.",variant:"warning"});return}if(pe.key==="F10"){pe.preventDefault(),ft(!0);return}if(pe.key==="F11"){pe.preventDefault(),p(!0);return}if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(pe.key)){if(pe.preventDefault(),!Array.isArray(a)||a.length===0)return;let ze=Math.max(0,a.findIndex(Lt=>Lt.id===s?.id));ze<0&&(ze=0);let Me=Ye(),lt=ze;pe.key==="ArrowRight"&&(lt=ze+1),pe.key==="ArrowLeft"&&(lt=ze-1),pe.key==="ArrowDown"&&(lt=ze+Me),pe.key==="ArrowUp"&&(lt=ze-Me);const tt=a.length;lt=(lt%tt+tt)%tt;const tr=a[lt];tr&&tr.id!==s?.id&&(l(tr),setTimeout(()=>{try{document.querySelector(`[data-table-id="${tr.id}"]`)?.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})}catch{}},0));return}if(pe.key==="Enter"){pe.preventDefault(),s&&!Ee&&await lr(s);return}if(pe.key==="Escape"){if(pe.preventDefault(),s&&(j==="products"||Wt==="products")){N("order"),wt("order");return}if(s){l(null);return}return}if(pe.key==="p"||pe.key==="P"){if(pe.preventDefault(),h){setTimeout(()=>{try{b.current?.focus()}catch{}},0);return}if(s){try{wt?.("products")}catch{}try{N("products")}catch{}setTimeout(()=>{try{x.current&&(x.current.focus(),_(0))}catch{}},0);return}m(!0),setTimeout(()=>{try{b.current?.focus()}catch{}},50);return}}catch{}};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[st,s?.id,a,Ye]),v.useEffect(()=>{try{s?.id&&t?.codigo_empresa&&localStorage.setItem(`vendas:selected:${t.codigo_empresa}`,String(s.id))}catch{}},[s?.id,t?.codigo_empresa]),v.useEffect(()=>{try{if(!s&&t?.codigo_empresa&&Array.isArray(a)&&a.length>0){const ie=localStorage.getItem(`vendas:selected:${t.codigo_empresa}`);if(ie){const pe=a.find(Be=>String(Be.id)===String(ie));pe&&l(pe)}}}catch{}},[a,s,t?.codigo_empresa]);const rr=v.useCallback(async()=>{try{const ie=await Qf({codigoEmpresa:t?.codigo_empresa});u(!!(ie&&(ie.id||ie?.length)))}catch{u(!1)}},[t?.codigo_empresa]),Zt=async()=>{const ie=t?.codigo_empresa||null;try{if(!ie)return;const[pe,Be]=await Promise.all([kb({codigoEmpresa:ie}).catch(()=>null),Qf({codigoEmpresa:ie}).catch(()=>null)]);if(!Be?.id){A(null);return}let ze=0,Me=[];try{Me=await Ym({caixaSessaoId:Be.id,codigoEmpresa:ie}),ze=(Me||[]).filter(tt=>(tt?.tipo||"")==="sangria").reduce((tt,tr)=>tt+Number(tr?.valor||0),0)}catch{}const lt={saldo_inicial:Be.saldo_inicial||0,totalPorFinalizadora:pe?.totalPorFinalizadora||pe?.porFinalizadora||{},totalEntradas:pe?.totalEntradas||pe?.entradas||0,totalSangria:ze,totalSaidas:ze,sessaoId:Be.id,movimentacoes:Me};se.startTransition(()=>{A(lt)})}catch{se.startTransition(()=>{A(null)})}finally{}},fn=v.useRef(!1);v.useEffect(()=>{g&&!fn.current?(fn.current=!0,Zt().catch(()=>{})):g||(fn.current=!1)},[g]);const Yr=ie=>ie==="in_use"?"in-use":ie==="awaiting_payment"?"awaiting-payment":"available",Bn=v.useRef(!0);v.useEffect(()=>(Bn.current=!0,()=>{Bn.current=!1}),[]);const hr=v.useRef(0),qr=v.useRef(0),ya=v.useRef(0);v.useEffect(()=>{const ie=t?.codigo_empresa||null,pe=ie?`vendas:tables:${ie}`:null,Be=()=>{try{if(!pe)return;const Me=JSON.parse(localStorage.getItem(pe)||"[]");Array.isArray(Me)&&Me.length>0&&i(Me)}catch{}};ie&&Be();const ze=async()=>{try{if(!r||!ie)return;const Me=++ya.current,lt=setTimeout(()=>{Bn.current&&Be()},2e3),tt=setTimeout(()=>{Bn.current&&ya.current===Me&&Be()},1e4);let tr=await Vg(ie),Lt=[];try{Lt=await sc({codigoEmpresa:ie})}catch(xe){console.error("[VendasPage:load] Erro ao carregar comandas abertas:",xe)}const pr=await(async()=>{try{return await mT((Lt||[]).map(xe=>xe.id),ie)}catch{return{}}})(),kr=await(async()=>{try{const xe=await Promise.all((Lt||[]).map(async je=>{try{const De=(await os({comandaId:je.id,codigoEmpresa:ie})||[]).map(Re=>Re?.nome).filter(Boolean);return[je.id,De.length?De.join(", "):null]}catch{return[je.id,null]}}));return Object.fromEntries(xe)}catch{return{}}})(),wn=new Map;(Lt||[]).forEach(xe=>wn.set(xe.mesa_id,xe));const Mr=(tr||[]).map(xe=>{const je=wn.get(xe.id);let Ie=Yr(xe.status),De=null,Re=0,nt=null;return je&&(Ie=je.status==="awaiting-payment"||je.status==="awaiting_payment"?"awaiting-payment":"in-use",De=je.id,Re=Number(pr[je.id]||0),nt=kr[je.id]||null),{id:xe.id,number:xe.numero,name:xe.nome||null,status:Ie,order:[],customer:nt,comandaId:De,totalHint:Re}}).map(xe=>s&&xe.id===s.id?{...xe,order:s.order||[],customer:s.customer||xe.customer}:xe);if(!Bn.current||ya.current!==Me){clearTimeout(lt),clearTimeout(tt);return}if(i(Mr),(Mr||[]).length===0)try{pe&&localStorage.removeItem(pe)}catch{}else try{pe&&localStorage.setItem(pe,JSON.stringify(Mr))}catch{}qr.current=Array.isArray(Mr)?Mr.length:0,hr.current=Date.now();let _n=null;try{const xe=ie?`vendas:selected:${ie}`:null,je=xe?localStorage.getItem(xe):null;if(je){const Ie=Mr.find(De=>String(De.id)===String(je));Ie&&(_n=Ie)}}catch{}_n?te||l(_n):te||l(xe=>{const je=xe?Mr.find(De=>De.id===xe.id):null;return(je&&xe?{...je,order:xe.order||je.order,customer:xe.customer||je.customer}:je)||Mr[0]||null});try{const xe=await Sp({includeInactive:!1,codigoEmpresa:ie});$(xe||[])}catch(xe){console.warn("Falha ao carregar produtos:",xe?.message||xe)}clearTimeout(lt),clearTimeout(tt)}catch(Me){console.error("Erro ao carregar mesas:",Me)}};return Be(),r&&ie&&ze(),()=>{}},[r,t?.codigo_empresa,st]),v.useEffect(()=>{!r||!t?.codigo_empresa||rr()},[r,t?.codigo_empresa,rr]),v.useEffect(()=>{let ie=!0;return(async()=>{try{if(!t?.codigo_empresa){ie&&f(0);return}const pe=await sc({codigoEmpresa:t?.codigo_empresa});if(!ie)return;f(Array.isArray(pe)?pe.length:0)}catch{ie&&f(0)}})(),()=>{ie=!1}},[t?.codigo_empresa,a.length]),v.useEffect(()=>{const ie=t?.codigo_empresa||null,pe=ie?`vendas:selected:${ie}`:null;try{pe&&s?.id&&localStorage.setItem(pe,String(s.id))}catch{}s?.comandaId&&(!s.order||s.order.length===0)&&Wn(s)},[s?.id,s?.comandaId]),v.useEffect(()=>{const ie=()=>{!st&&!B&&s?.comandaId&&Wn(s)},pe=()=>{!st&&!B&&document.visibilityState==="visible"&&s?.comandaId&&Wn(s)};return window.addEventListener("focus",ie),document.addEventListener("visibilitychange",pe),()=>{window.removeEventListener("focus",ie),document.removeEventListener("visibilitychange",pe)}},[s?.comandaId,st,B]);const ui=async()=>{try{if(!s?.comandaId){e({title:"Selecione uma mesa com comanda aberta",variant:"warning"});return}await kd({codigoEmpresa:t?.codigo_empresa});try{const ze=(await Fi({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(lt=>({id:lt.id,productId:lt.produto_id,name:lt.descricao||"Item",price:Number(lt.preco_unitario||0),quantity:Number(lt.quantidade||1)})),Me={...s,order:ze};l(Me),i(lt=>lt.map(tt=>tt.id===Me.id?Me:tt))}catch{}const ie=await ov({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa});be(ie||[]);const pe=ie&&ie[0]&&ie[0].id?ie[0].id:null;Qt(pe),Pt(pe),me(!0)}catch(ie){e({title:"Falha ao carregar finalizadoras",description:ie?.message||"Tente novamente",variant:"destructive"})}},Va=ie=>{if(!ie.destination)return;const pe=Array.from(a),[Be]=pe.splice(ie.source.index,1);pe.splice(ie.destination.index,0,Be),i(pe),e({title:"Layout das mesas atualizado!",description:"As posies foram salvas temporariamente.",variant:"success"})},Kn=ie=>(ie||[]).reduce((pe,Be)=>pe+Be.price*Be.quantity,0),Cr=ie=>{if(!ie)return"";const pe=ie.trim().split(/\s+/);return pe.length<=2?ie:pe.slice(0,2).join(" ")},zn=ie=>{if(!ie)return"";const pe=ze=>String(ze).replace(/^\s*[\[]+\s*/g,"").replace(/\s*[\]]+\s*$/g,"").trim(),Be=ie.split(",").map(ze=>pe(ze)).filter(Boolean);return Be.length===0?"":Be.length===1?Cr(Be[0]):`${Cr(Be[0])} +${Be.length-1}`},Wn=async ie=>{try{if(!ie?.comandaId)return;const Be=(await Fi({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(lt=>({id:lt.id,productId:lt.produto_id,name:lt.descricao||"Item",price:Number(lt.preco_unitario||0),quantity:Number(lt.quantidade||1)}));let ze=ie.customer||null;try{const tt=(await os({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(tr=>tr?.nome).filter(Boolean);ze=tt.length?tt.join(", "):null}catch{}const Me={...ie,status:ie.status==="awaiting-payment"?"awaiting-payment":"in-use",order:Be,customer:ze};l(Me),i(lt=>lt.map(tt=>tt.id===Me.id?Me:tt))}catch(pe){console.warn("[VendasPage] Falha ao recarregar detalhes da mesa selecionada:",pe)}},vi=async({showToast:ie=!1}={})=>{try{const pe=t?.codigo_empresa;if(!pe)return;const Be=await Vg(pe);let ze=[];try{ze=await sc({codigoEmpresa:pe})}catch(pr){console.error("[refreshTablesLight] Erro ao carregar comandas:",pr)}const Me=new Map((ze||[]).map(pr=>[pr.mesa_id,pr])),lt={},tt={};try{const pr=(ze||[]).map(Wr=>Wr.id);(await Promise.all(pr.map(async Wr=>{try{return{id:Wr,vinculos:await os({comandaId:Wr,codigoEmpresa:pe})}}catch{return{id:Wr,vinculos:[]}}}))).forEach(({id:Wr,vinculos:Mr})=>{const _n=(Mr||[]).map(xe=>xe?.nome).filter(Boolean);lt[Wr]=_n.length?_n.join(", "):null}),(await Promise.all(pr.map(async Wr=>{try{const _n=(await Fi({comandaId:Wr,codigoEmpresa:pe})||[]).reduce((xe,je)=>{const Ie=(je.quantidade||0)*(je.preco_unitario||0)-(je.desconto||0);return xe+Ie},0);return{comandaId:Wr,total:_n}}catch(Mr){return console.error(`[refreshTablesLight] Erro ao buscar itens da comanda ${Wr}:`,Mr),{comandaId:Wr,total:0}}}))).forEach(({comandaId:Wr,total:Mr})=>{tt[Wr]=Mr})}catch(pr){console.error("[refreshTablesLight] Erro ao carregar clientes/totais:",pr)}const Lt=(Be||[]).map(pr=>{const kr=Me.get(pr.id);let wn=Yr(pr.status),Wr=null,Mr=null,_n=0;return kr&&(wn=kr.status==="awaiting-payment"||kr.status==="awaiting_payment"?"awaiting-payment":"in-use",Wr=kr.id,Mr=lt[kr.id]||null,_n=tt[kr.id]||0),{id:pr.id,number:pr.numero,name:pr.nome||null,status:wn,order:[],customer:Mr,comandaId:Wr,totalHint:_n}}).map(pr=>s&&pr.id===s.id?{...pr,order:s.order||[],customer:s.customer||pr.customer}:pr);i(Lt)}catch(pe){console.error("[refreshTablesLight] Erro fatal:",pe),ie&&e({title:"Erro ao atualizar mesas",description:"Recarregue a pgina se o problema persistir",variant:"destructive"})}},ei=({table:ie,provided:pe,isDragging:Be})=>{const ze=GQe[ie.status],Me=ze.icon,lt=Kn(ie.order);zn(ie.customer);const tt=ie.status==="available"&&ie.id===ht,tr=ie.status==="in-use"||ie.status==="awaiting-payment"?lt>0?lt:Number(ie.totalHint||0):0,Lt=ie.status==="available"?"text-success bg-success/10 border-success/30":ie.status==="in-use"?"text-warning bg-warning/10 border-warning/30":"text-info bg-info/10 border-info/30";return o.jsxs("div",{ref:pe?.innerRef,"data-table-id":ie.id,...pe?.draggableProps||{},className:kt("p-4 rounded-lg border bg-surface flex flex-col relative h-44 shadow-sm min-w-[240px]",Be&&"shadow-lg",s?.id===ie.id&&"ring-2 ring-brand/60 bg-surface-2",c?"cursor-pointer":"cursor-not-allowed opacity-60"),onClick:()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}lr(ie)},children:[o.jsx("div",{...pe?.dragHandleProps||{},className:"absolute top-2 right-2 text-text-muted opacity-60 hover:opacity-100",children:o.jsx(tue,{size:14})}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Me,{className:"w-5 h-5 text-text-secondary"}),o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsx("span",{className:"text-lg font-semibold text-text-primary truncate",children:ie.name?ie.name:`Mesa ${ie.number}`}),tt&&o.jsx("kbd",{className:"hidden md:inline px-2 py-1 text-xs font-bold font-mono text-gray-400 bg-transparent border border-gray-300/50 rounded",children:"F1"})]}),o.jsx("span",{className:kt("text-[11px] font-medium px-2 py-0.5 rounded-full border flex-shrink-0",Lt),children:ze.label})]}),o.jsx("div",{className:kt("flex-1 flex items-center justify-center"),children:ie.status==="available"?o.jsx("img",{src:"/mesalivre.png",alt:"Mesa livre",className:kt("w-16 h-16 object-contain opacity-80",s?.id===ie.id&&"opacity-100")}):ie.status==="in-use"?o.jsx("img",{src:"/mesaocupada.png",alt:"Mesa ocupada",className:kt("w-16 h-16 object-contain opacity-80",s?.id===ie.id&&"opacity-100")}):o.jsx("div",{className:kt("w-16 h-16 rounded-lg bg-info/20 border-2 border-info/40 flex items-center justify-center",s?.id===ie.id&&"bg-info/30 border-info/60"),children:o.jsx(uc,{className:"w-8 h-8 text-info"})})}),ie.status==="in-use"||ie.status==="awaiting-payment"?o.jsxs("div",{className:"w-full mt-auto",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(As,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),o.jsx("div",{className:"text-sm sm:text-base font-medium text-text-primary truncate",title:ie.customer||"",children:zn(ie.customer)||""})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Gs,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),o.jsxs("div",{className:"text-sm font-bold text-text-secondary",children:["R$ ",tr.toFixed(2)]})]})]}):o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"text-xs text-text-muted text-center",children:"Sem comanda"})})]})},ba=()=>{const ie=s?Kn(s.order):0,[pe,Be]=v.useState(!1),[ze,Me]=v.useState([]),[lt,tt]=v.useState(1),[tr,Lt]=v.useState([]),pr=v.useRef(new Map),kr=typeof window<"u"&&window.innerWidth<=640,wn=Ie=>{const De=String(Ie||"").replace(/\D/g,"");return De?Number(De)/100:0},Wr=Ie=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Math.max(0,Number(Ie)||0)),Mr=Ie=>{const De=(We||[]).find(nt=>String(nt.id)===String(Ie.methodId)),Re=De&&De.taxa_percentual!=null?Number(De.taxa_percentual):0;return Number.isFinite(Re)?Re/100:0},_n=()=>(ze||[]).reduce((Ie,De)=>Ie+wn(De.value),0),xe=(Ie,De)=>{try{if(kr)return;const Re=(ze||[]).findIndex(nt=>nt.id===De);if(Re>=0){const nt=(ze||[])[Re+1]||null;if(nt&&pr.current.get(nt.id)){const Q=pr.current.get(nt.id);setTimeout(()=>{try{Q.focus(),Q.select?.()}catch{}},0);return}}if(Ie&&Ie instanceof HTMLElement){const nt=Array.from(document.querySelectorAll('input[data-pay-value="1"]')),Q=nt.indexOf(Ie);if(Q>=0&&nt[Q+1]){const Ce=nt[Q+1];setTimeout(()=>{try{Ce.focus(),Ce.select?.()}catch{}},0);return}}Me(nt=>{const Q=tr[0]?.id||"",Ce=We&&We[0]&&We[0].id?We[0].id:null,Ke=lt,Ze=[...nt,{id:Ke,clientId:Q,methodId:Ce,value:"",chargeFee:!0}];return tt(Gt=>Gt+1),kr||setTimeout(()=>{const Gt=pr.current.get(Ke);if(Gt)try{Gt.focus(),Gt.select?.()}catch{}},0),Ze})}catch{}};v.useEffect(()=>{let Ie=!0;return(async()=>{try{if(!te||!s?.comandaId)return;let Re=[];try{const at=await os({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa});Re=(Array.isArray(at)?at:[]).map(fr=>{const er=fr?.cliente_id??fr?.clientes?.id??null,Tr=fr?.clientes?.nome??fr?.nome??fr?.nome_livre??"";return er?{id:er,nome:Tr}:null}).filter(Boolean)}catch{Re=[]}if(!Ie)return;Lt(Re);let nt=We&&We[0]&&We[0].id?We[0].id:null,Q=Re[0]?.id||null,Ce="";try{const Dt=(await Fi({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).reduce((fr,er)=>fr+Number(er.quantidade||0)*Number(er.preco_unitario||0),0);Dt>0&&(Ce=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Dt))}catch{}const Ke=wn(Ce),Ze={id:1,clientId:Q,methodId:nt,baseValue:Ke,chargeFee:!0},Gt=Mr(Ze),Kt=Ze.chargeFee?Ke*(1+Gt):Ke;Me([{...Ze,value:Wr(Kt)}]),tt(2)}catch(Re){console.error(Re)}})(),()=>{Ie=!1}},[te,s?.comandaId,We]),v.useEffect(()=>{let Ie=!0;return(async()=>{try{if(!te||Array.isArray(We)&&We.length>0)return;const Re=await ov({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa});if(!Ie)return;be(Re||[])}catch{}})(),()=>{Ie=!1}},[te]),v.useEffect(()=>{te&&(!Array.isArray(We)||We.length===0||Me(Ie=>{if(!Array.isArray(Ie)||Ie.length===0)return Ie;const De=We&&We[0]&&We[0].id?We[0].id:null;if(!De)return Ie;let Re=!1;const nt=Ie.map(Q=>{if(!Q.methodId){Re=!0;const Ce={...Q,methodId:De},Ke=Mr(Ce),Ze=Ce.chargeFee!==!1?Number(Ce.baseValue||0)*(1+Ke):Number(Ce.baseValue||0);return{...Ce,value:Wr(Ze)}}return Q});return Re?nt:Ie}))},[te,We]);const je=async()=>{try{if(!s?.comandaId)return;const Ie=t?.codigo_empresa;if(!Ie){e({title:"Empresa no definida",variant:"destructive"});return}if(!Array.isArray(ze)||ze.length===0){e({title:"Informe os pagamentos",description:"Adicione pelo menos uma forma de pagamento.",variant:"warning"});return}for(const Ze of ze){if(!Ze.methodId){e({title:"Forma de pagamento faltando",description:"Selecione a finalizadora em todas as linhas.",variant:"warning"});return}if(wn(Ze.value)<=0){e({title:"Valor invlido",description:"Informe valores maiores que zero.",variant:"warning"});return}}const De=ie>0?ie:0,Re=(ze||[]).reduce((Ze,Gt)=>Ze+wn(Gt.value),0),nt=(ze||[]).reduce((Ze,Gt)=>{const Kt=Number(Gt.baseValue||0),at=Mr(Gt);return Ze+(Gt.chargeFee!==!1&&at>0?Kt*at:0)},0),Q=De+nt,Ce=Math.abs(Re-Q);if(Ce>.009&&Ce<=.05){const Ze=Q-Re;Me(Gt=>{const Kt=Gt.length-1;return Gt.map((at,Dt)=>{if(Dt!==Kt)return at;const fr=wn(at.value),er=Math.max(0,fr+Ze),Tr=Mr(at),Ur=at.chargeFee!==!1&&Tr>0?er/(1+Tr):er;return{...at,baseValue:Ur,value:Wr(er)}})})}else if(Ce>.05){const Ze=De-Re;Ze>0?e({title:"Valor insuficiente",description:`Faltam R$ ${Ze.toFixed(2)} para fechar o total.`,variant:"warning"}):e({title:"Valor excedente",description:`Excedeu em R$ ${Math.abs(Ze).toFixed(2)}. Ajuste os valores.`,variant:"warning"});return}let Ke=ie;if(Ke<=0)try{Ke=(await Fi({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).reduce((Kt,at)=>Kt+Number(at.quantidade||0)*Number(at.preco_unitario||0),0)}catch{}Be(!0),await kd({codigoEmpresa:t?.codigo_empresa});for(const Ze of ze){const Gt=wn(Ze.value),Kt=We.find(Dt=>String(Dt.id)===String(Ze.methodId)),at=Kt?.nome||Kt?.tipo||"outros";await vT({comandaId:s.comandaId,finalizadoraId:Ze.methodId,metodo:at,valor:Gt,status:"Pago",codigoEmpresa:Ie,clienteId:Ze.clientId||null})}await Xm({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa}),i(Ze=>Ze.map(Gt=>Gt.id===s.id?{...Gt,status:"available",order:[],comandaId:null,customer:null,totalHint:0}:Gt)),l(Ze=>Ze&&{...Ze,status:"available",order:[],comandaId:null,customer:null,totalHint:0});try{t?.codigo_empresa&&localStorage.removeItem(`vendas:tables:${t.codigo_empresa}`)}catch{}try{const Ze=await Vg(t?.codigo_empresa),Gt=await sc({codigoEmpresa:t?.codigo_empresa}),Kt={};await Promise.all((Gt||[]).map(async Dt=>{try{const er=(await os({comandaId:Dt.id,codigoEmpresa:t?.codigo_empresa})||[]).map(Tr=>Tr?.nome).filter(Boolean);Kt[Dt.id]=er.length?er.join(", "):null}catch{Kt[Dt.id]=null}}));const at=(Ze||[]).map(Dt=>{const fr=(Gt||[]).find(er=>er.mesa_id===Dt.id);return{id:Dt.id,name:Dt.nome||`Mesa ${Dt.numero}`,status:fr?"in-use":"available",comandaId:fr?.id||null,customer:fr?Kt[fr.id]:null,order:[],totalHint:0}});i(at)}catch{}e({title:"Pagamento registrado",description:`Total R$ ${Ke.toFixed(2)}`,variant:"success"}),me(!1)}catch(Ie){e({title:"Falha ao registrar pagamento",description:Ie?.message||"Tente novamente",variant:"destructive"})}finally{Be(!1)}};return ze&&ze.length>0,o.jsx(cn,{open:te,onOpenChange:me,children:o.jsxs(on,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:Ie=>Ie.stopPropagation(),onKeyDownCapture:Ie=>Ie.stopPropagation(),onPointerDownOutside:Ie=>Ie.stopPropagation(),onInteractOutside:Ie=>Ie.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Fechar Conta"}),o.jsx(hn,{children:"Divida o pagamento entre clientes e vrias finalizadoras, se necessrio."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-lg font-semibold",children:"Total"}),o.jsxs("div",{className:"text-lg font-bold",children:["R$ ",ie.toFixed(2)]})]}),o.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto thin-scroll pr-1 max-h-[60vh]",children:[o.jsx(vt,{className:"block",children:"Pagamentos"}),(ze||[]).map((Ie,De)=>{const Re=Ce=>{if(!Ce)return"Cliente";const Ke=(tr||[]).find(Ze=>String(Ze.id)===String(Ce));return Ke?.nome?Ke.nome:"Cliente"},nt=(tr||[]).length>1,Q=(tr||[])[0]||null;return(tr||[]).filter(Ce=>String(Ce.id)!==String(Q?.id||"")),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 items-center",children:[o.jsx("div",{className:"sm:col-span-1 flex sm:justify-start",children:ze.length>1&&De>0&&o.jsx(ye,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8",onClick:()=>{Me(Ce=>{const Ke=Ce.filter(at=>at.id!==Ie.id);if(Ke.length===0)return[];const Ze=ie>0?ie:0,Gt=Math.floor(Ze/Ke.length*100)/100,Kt=Ze-Gt*Ke.length;return Ke.map((at,Dt)=>{const fr=Dt===Ke.length-1?Gt+Kt:Gt,er={...at},Tr=Mr(er),Ur=er.chargeFee!==!1&&Tr>0?fr/(1+Tr):fr;return{...er,baseValue:Ur,value:Wr(fr)}})})},children:""})}),De===0?o.jsx("div",{className:"sm:col-span-4",children:o.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:Re(Q?.id||Ie.clientId)})}):nt?o.jsx("div",{className:"sm:col-span-4",children:o.jsxs(Yn,{value:Ie.clientId||"",onValueChange:Ce=>Me(Ke=>Ke.map(Ze=>Ze.id===Ie.id?{...Ze,clientId:Ce}:Ze)),children:[o.jsx(Hn,{className:"w-full truncate",children:o.jsx(Xn,{placeholder:"Cliente"})}),o.jsx(Gn,{children:(tr||[]).map(Ce=>o.jsx(qt,{value:Ce.id,children:Ce.nome},Ce.id))})]})}):o.jsx("div",{className:"sm:col-span-4",children:o.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:Re(Q?.id||Ie.clientId)})}),o.jsx("div",{className:"sm:col-span-4",children:o.jsxs(Yn,{value:Ie.methodId||"",onValueChange:Ce=>{Me(Ke=>Ke.map(Ze=>{if(Ze.id!==Ie.id)return Ze;const Kt={...Ze,methodId:Ce},at=Mr(Kt),Dt=Kt.chargeFee!==!1?Number(Kt.baseValue||0)*(1+at):Number(Kt.baseValue||0);return{...Kt,value:Wr(Dt)}}))},children:[o.jsx(Hn,{className:"w-full truncate",children:o.jsx(Xn,{placeholder:"Forma de pagamento"})}),o.jsx(Gn,{children:(We||[]).map(Ce=>o.jsx(qt,{value:Ce.id,children:Ce.nome},Ce.id))})]})}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx($t,{placeholder:"0,00",inputMode:"numeric",value:Ie.value,"data-pay-value":"1",ref:Ce=>{Ce?pr.current.set(Ie.id,Ce):pr.current.delete(Ie.id)},onChange:Ce=>{const Ke=(Ce.target.value||"").replace(/\D/g,""),Ze=Ke?Number(Ke)/100:0;Me(Gt=>Gt.map(Kt=>{if(Kt.id!==Ie.id)return Kt;const at=Mr(Kt),Dt=Kt.chargeFee!==!1&&at>0?Ze/(1+at):Ze,fr=Kt.chargeFee!==!1?Dt*(1+at):Dt;return{...Kt,baseValue:Dt,value:Wr(fr)}}))},onKeyDown:Ce=>{if(Ce.stopPropagation(),Ce.key==="Enter"){Ce.preventDefault(),xe(Ce.currentTarget,Ie.id);return}["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(Ce.key)||/^[0-9]$/.test(Ce.key)||Ce.preventDefault()},onBeforeInput:Ce=>{const Ke=Ce.data??"";Ke&&/\D/.test(Ke)&&Ce.preventDefault()}})}),o.jsx("div",{className:"sm:col-span-12 -mt-1 pl-1",children:(()=>{const Ce=Mr(Ie),Ke=Ce*100,Ze=Ie.chargeFee!==!1,Gt=Ie.baseValue!=null?Number(Ie.baseValue):(()=>{const Dt=(Ie.value||"").toString().replace(/\D/g,""),fr=Dt?Number(Dt)/100:0;return Ze&&Ce>0?fr/(1+Ce):fr})();if(!Ke||Ke<=0||!Number.isFinite(Gt)||Gt<=0)return null;const Kt=Ze?Gt*Ce:0;return o.jsxs("button",{type:"button",onClick:()=>{Me(at=>at.map(Dt=>{if(Dt.id!==Ie.id)return Dt;const fr=Mr(Dt),er=Dt.chargeFee!==!1,Tr=Dt.baseValue!=null?Number(Dt.baseValue):wn(Dt.value),zr=er?Tr:Tr*(1+fr);return{...Dt,chargeFee:!er,baseValue:Tr,value:Wr(zr)}}))},className:["inline-flex items-center gap-2 px-3 py-1 rounded-sm text-xs font-medium border transition-colors",Ze?"bg-black text-amber-400 border-amber-500":"bg-surface text-text-secondary border-border hover:border-border-hover"].join(" "),title:Ze?"Desmarcar taxa":"Cobrar taxa",children:[o.jsx("span",{className:["inline-block h-3 w-3 rounded-sm border",Ze?"bg-amber-500 border-amber-400":"bg-transparent border-border"].join(" ")}),o.jsxs("span",{children:["Taxa R$ ",Kt.toFixed(2)]})]})})()})]},Ie.id)}),o.jsx("div",{children:o.jsx(ye,{type:"button",variant:"secondary",size:"sm",className:"pointer-events-auto",onPointerUp:Ie=>{Ie.preventDefault(),Ie.stopPropagation(),Me(De=>{const Re=tr[0]?.id||"",nt=We&&We[0]&&We[0].id?We[0].id:null,Q=[...De,{id:lt,clientId:Re,methodId:nt,value:"",chargeFee:!0}],Ce=ie>0?ie:0,Ke=Math.floor(Ce/Q.length*100)/100,Ze=Ce-Ke*Q.length;return Q.map((Gt,Kt)=>{const at=Kt===Q.length-1?Ke+Ze:Ke,Dt=Mr(Gt),er=Gt.chargeFee!==!1&&Dt>0?at/(1+Dt):at;return{...Gt,baseValue:er,value:Wr(at)}})}),tt(De=>De+1)},children:"Adicionar forma"})}),(()=>{const Ie=_n(),De=(ze||[]).reduce((Q,Ce)=>{const Ke=Number(Ce.baseValue||0),Ze=Mr(Ce);return Q+(Ce.chargeFee!==!1&&Ze>0?Ke*Ze:0)},0),nt=(ie>0?ie:0)+De-Ie;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[o.jsx("span",{children:"Soma"}),o.jsxs("span",{children:["R$ ",Ie.toFixed(2)]})]}),o.jsxs("div",{className:"text-sm font-semibold flex justify-between",children:[o.jsx("span",{children:"Restante"}),o.jsxs("span",{className:Math.abs(nt)<.005?"text-success":"text-warning",children:["R$ ",nt.toFixed(2)]})]})]})})()]})]}),o.jsxs($n,{children:[o.jsx(ye,{type:"button",variant:"outline",onClick:()=>me(!1),disabled:pe,children:"Cancelar"}),o.jsx(ye,{type:"button",onClick:je,disabled:!(ze&&ze.length>0&&!pe),children:pe?"Processando...":"Confirmar Pagamento"})]})]})})},wa=se.memo(({open:ie,onOpenChange:pe,cashSummary:Be})=>{const ze=De=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(De||0)),[Me,lt]=v.useState(!0);v.useEffect(()=>{lt(!!ie)},[ie]);const tt=v.useMemo(()=>{const De=Number(Be?.saldo_inicial??Be?.saldoInicial??0),Re=Be?.totalPorFinalizadora||Be?.porFinalizadora||{},nt=Number(Be?.totalEntradas??Be?.entradas??0),Q=nt>0?nt:Object.values(Re||{}).reduce((Gt,Kt)=>Gt+Number(Kt||0),0),Ce=Number(Be?.sangria??Be?.totalSangria??0),Ke=Number(Be?.totalSaidas??Be?.saidas??Ce),Ze=Math.max(0,De+Q-Ke);return{saldoInicial:De,porFinalizadora:Re,entradasInformadas:nt,entradasCalc:Q,sangriaVal:Ce,saidas:Ke,saldoAtual:Ze}},[Be]);v.useEffect(()=>{if(ie&&Be){const De=setTimeout(()=>lt(!1),50);return()=>clearTimeout(De)}},[ie,Be]);const{porFinalizadora:tr,sangriaVal:Lt}=tt,[pr,kr]=v.useState(!1),[wn,Wr]=v.useState(""),[Mr,_n]=v.useState(""),[xe,je]=v.useState(!1),Ie=async()=>{try{je(!0);const De=String(wn||"").replace(/\D/g,""),Re=De?Number(De)/100:0;if(Re<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await kd({codigoEmpresa:t?.codigo_empresa}),await pT({tipo:"sangria",valor:Re,observacao:Mr,codigoEmpresa:t?.codigo_empresa}),kr(!1),Wr(""),_n(""),await Zt(),e({title:"Sangria registrada",variant:"success"})}catch(De){e({title:"Falha ao registrar sangria",description:De?.message||"Tente novamente",variant:"destructive"})}finally{je(!1)}};return o.jsx(cn,{open:ie,onOpenChange:pe,children:o.jsxs(on,{forceMount:!0,className:"sm:max-w-lg w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onOpenAutoFocus:De=>De.preventDefault(),onKeyDown:De=>De.stopPropagation(),onKeyDownCapture:De=>De.stopPropagation(),onPointerDownOutside:De=>De.stopPropagation(),onInteractOutside:De=>De.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),o.jsx(hn,{children:"Resumo da sesso atual do caixa."})]}),Me||!Be?o.jsxs("div",{className:"px-4 space-y-3",children:[o.jsx(dg,{className:"h-16 w-full"}),o.jsx(dg,{className:"h-16 w-full"}),o.jsx(dg,{className:"h-12 w-full"})]}):o.jsxs("div",{className:"px-1",children:[Object.keys(tr).length===0?o.jsx("div",{className:"p-3 text-sm text-text-muted border rounded-md",children:"Nenhuma finalizadora registrada ainda."}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"rounded-md border border-border overflow-hidden divide-y divide-border",children:Object.entries(tr).map(([De,Re])=>o.jsxs("li",{className:"bg-surface px-3 py-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:String(De)}),o.jsx("span",{className:"text-sm font-semibold tabular-nums",children:ze(Re)})]},De))}),o.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Sangrias"}),o.jsx("span",{className:"text-sm font-semibold tabular-nums text-danger",children:ze(Lt)})]})]}),o.jsx("div",{className:"mt-3 text-xs text-text-muted leading-relaxed px-1",children:'Sadas incluem sangrias e ajustes. Use "Registrar Sangria" para lanar uma retirada.'})]}),o.jsxs($n,{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"mr-auto"}),o.jsx(ye,{variant:"destructive",onClick:()=>kr(!0),children:"Registrar Sangria"}),o.jsx(ye,{variant:"secondary",onClick:()=>pe(!1),children:"Fechar"})]}),o.jsx(cn,{open:pr,onOpenChange:kr,children:o.jsxs(on,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:De=>De.stopPropagation(),onKeyDownCapture:De=>De.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold",children:"Registrar Sangria"}),o.jsx(hn,{children:"Informe o valor a retirar do caixa e, opcionalmente, uma observao."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"sangria-valor",children:"Valor"}),o.jsx($t,{id:"sangria-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:wn,onChange:De=>{const Re=(De.target.value||"").replace(/\D/g,""),nt=Re?Number(Re)/100:0,Q=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(nt);Wr(Q)},onKeyDown:De=>{De.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(De.key)&&(/^[0-9]$/.test(De.key)||De.preventDefault())},onBeforeInput:De=>{const Re=De.data??"";Re&&/\D/.test(Re)&&De.preventDefault()}})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"sangria-obs",children:"Observao"}),o.jsx($t,{id:"sangria-obs",placeholder:"Opcional",value:Mr,onChange:De=>_n(De.target.value)})]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>kr(!1),disabled:xe,children:"Cancelar"}),o.jsx(ye,{onClick:Ie,disabled:xe,children:xe?"Registrando...":"Confirmar"})]})]})})]})})}),xi=()=>{const ie=s,pe=ie?.order||[],Be=ie?Kn(pe):0;return o.jsx(cn,{open:O,onOpenChange:R,children:o.jsxs(on,{className:"sm:max-w-xl w-[92vw] animate-none",onKeyDown:ze=>ze.stopPropagation(),onKeyDownCapture:ze=>ze.stopPropagation(),onPointerDownOutside:ze=>ze.stopPropagation(),onInteractOutside:ze=>ze.stopPropagation(),children:[o.jsxs(an,{children:[o.jsxs(en,{className:"text-2xl font-bold",children:["Comanda da Mesa ",ie?.number??""]}),o.jsx(hn,{children:ie?.customer?`Cliente: ${ie.customer}`:"Sem cliente vinculado"})]}),o.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto thin-scroll",children:pe.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Nenhum item na comanda."}):o.jsx("ul",{className:"divide-y divide-border",children:pe.map(ze=>o.jsxs("li",{className:"py-2 flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:ze.name}),o.jsxs("div",{className:"text-xs text-text-muted",children:["Qtd: ",ze.quantity,"  Unit: R$ ",Number(ze.price||0).toFixed(2)]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"font-semibold",children:["R$ ",(Number(ze.price||0)*Number(ze.quantity||0)).toFixed(2)]})})]},ze.id))})}),o.jsxs($n,{children:[o.jsxs("div",{className:"mr-auto text-sm font-semibold",children:["Total: R$ ",Be.toFixed(2)]}),o.jsx(ye,{variant:"secondary",onClick:()=>R(!1),children:"Fechar"}),o.jsxs(ye,{onClick:async()=>{R(!1),await ui()},disabled:!ie||pe.length===0,children:[o.jsx(Gs,{className:"mr-2 h-4 w-4"})," Fechar Conta",o.jsx("kbd",{className:"ml-2 hidden md:inline px-2 py-1 text-xs font-bold font-mono text-white bg-amber-600 border border-amber-700 rounded shadow-sm",children:"F2"})]})]})]})})},de=({table:ie})=>{if(!ie)return o.jsx("div",{className:"flex items-center justify-center h-full text-text-muted",children:o.jsxs("div",{className:"text-center",children:[o.jsx(HE,{className:"mx-auto mb-4 h-12 w-12 opacity-50"}),o.jsx("p",{children:"Selecione uma mesa para ver a comanda"})]})});if(Ge)return o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2",children:[o.jsx("div",{className:"h-0 w-0","aria-hidden":"true"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(ye,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap",disabled:!c,onClick:()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de abrir uma mesa.",variant:"warning"});return}Z(ie),L(!0)},children:"Abrir Mesa"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:[o.jsx(dg,{className:"h-20 w-full"}),o.jsx(dg,{className:"h-20 w-full"}),o.jsx(dg,{className:"h-20 w-full"})]}),o.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-text-secondary mb-2",children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:"R$ 0,00"})]}),o.jsx(ye,{size:"lg",className:"w-full",disabled:!c,children:"Fechar Conta"})]})]});const pe=Kn(ie.order),Be=zn(ie.customer),ze=async()=>{if(!ie?.comandaId)return;const tr=(await Fi({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(kr=>({id:kr.id,productId:kr.produto_id,name:kr.descricao||"Item",price:Number(kr.preco_unitario||0),quantity:Number(kr.quantidade||1)}));let Lt=ie.customer||null;try{const wn=(await os({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(Wr=>Wr?.nome).filter(Boolean);Lt=wn.length?wn.join(", "):null}catch{}const pr={...ie,order:tr,customer:Lt};l(pr),i(kr=>kr.map(wn=>wn.id===pr.id?pr:wn))},Me=async(tt,tr)=>{try{const pr=Number(tt.quantity||1)+tr;if(pr<=0){await $m({itemId:tt.id,codigoEmpresa:t?.codigo_empresa}),await ze(),e({title:"Item removido",description:tt.name,variant:"warning"});return}await Mu({itemId:tt.id,quantidade:pr,codigoEmpresa:t?.codigo_empresa}),await ze(),e({title:"Quantidade atualizada",description:`${tt.name}: ${pr}`,variant:"success"})}catch(Lt){e({title:"Falha ao atualizar quantidade",description:Lt?.message||"Tente novamente",variant:"destructive"})}},lt=async tt=>{try{await $m({itemId:tt.id,codigoEmpresa:t?.codigo_empresa}),await ze(),e({title:"Item removido",description:tt.name,variant:"warning"})}catch(tr){e({title:"Falha ao remover item",description:tr?.message||"Tente novamente",variant:"destructive"})}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2",children:[Be?o.jsx("div",{className:"text-sm font-medium text-text-primary leading-none truncate",title:ie.customer||"",children:Be}):o.jsx("div",{className:"h-0 w-0","aria-hidden":"true"}),o.jsx("div",{className:"flex items-center gap-2",children:ie.comandaId?o.jsxs(o.Fragment,{children:[o.jsxs(ye,{size:"sm",className:"h-8 px-3 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-black/60 text-white border border-white/10 shadow-sm hover:bg-black/80 hover:shadow transition-all flex items-center",onClick:()=>W(!0),children:[o.jsx(As,{size:12,className:"text-white/80 mr-1.5"}),"Clientes"]}),o.jsxs(ye,{size:"sm",variant:"outline",className:"h-8 px-3 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-black/60 text-white border border-white/10 shadow-sm hover:bg-black/80 hover:shadow transition-all",onClick:()=>R(!0),children:[o.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-black/40 border border-white/10 mr-1.5",children:o.jsx(uc,{size:12,className:"text-white/80"})}),"Comanda"]}),o.jsxs(Iu,{children:[o.jsx(Lm,{asChild:!0,children:o.jsx(ye,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-red-600 hover:bg-red-500 text-white border border-red-600/70 focus:outline-none focus:ring-0 focus-visible:ring-0 shadow-none",children:"Cancelar"})}),o.jsxs(Gc,{className:"sm:max-w-[420px] animate-none",onKeyDown:tt=>tt.stopPropagation(),children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Cancelar comanda?"}),o.jsx(Jc,{children:"Esta ao no pode ser desfeita. Os itens sero descartados e a mesa voltar a ficar livre."})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{children:"Voltar"}),o.jsx(Du,{onClick:async()=>{try{await ez({comandaId:ie.comandaId,codigoEmpresa:t?.codigo_empresa}),l(null),await vi({showToast:!0}),e({title:"Comanda cancelada",variant:"success"})}catch(tt){console.error("[Cancelar Comanda] Erro:",tt),e({title:"Falha ao cancelar comanda",description:tt?.message||"Tente novamente",variant:"destructive"});try{await vi({showToast:!0})}catch(tr){console.error("[Cancelar Comanda] Erro ao recarregar aps falha:",tr)}}},children:"Confirmar Cancelamento"})]})]})]})]}):o.jsx(ye,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap",disabled:!c,onClick:()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de abrir uma mesa.",variant:"warning"});return}Z(ie),L(!0)},children:"Abrir Mesa"})})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 thin-scroll",children:ie.order.length===0?o.jsx("div",{className:"text-center text-text-muted pt-16",children:o.jsx("p",{children:"Comanda vazia. Adicione produtos na aba ao lado."})}):o.jsx("ul",{className:"space-y-3",children:ie.order.map(tt=>o.jsxs("li",{className:"p-2 rounded-md border border-border/30 bg-surface",children:[o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("p",{className:"text-sm font-semibold text-text-primary truncate",title:tt.name,children:tt.name})}),o.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ye,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>Me(tt,-1),children:o.jsx(_L,{size:12})}),o.jsx("span",{className:"w-7 text-center font-semibold text-sm",children:tt.quantity}),o.jsx(ye,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>Me(tt,1),children:o.jsx(oi,{size:12})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-bold text-text-primary whitespace-nowrap",children:["R$ ",(tt.price*tt.quantity).toFixed(2)]}),o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border",children:["x",tt.quantity]}),o.jsx(ye,{variant:"ghost",size:"icon",className:"text-danger/80 hover:text-danger h-7 w-7",onClick:()=>lt(tt),children:o.jsx(S_,{size:14})})]})]})]},tt.id))})}),o.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-text-secondary mb-2",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["R$ ",pe.toFixed(2)]})]}),o.jsxs(ye,{size:"lg",className:"w-full",onClick:ui,children:[o.jsx(Gs,{className:"mr-2"})," Fechar Conta",o.jsx("kbd",{className:"ml-2 hidden md:inline px-2 py-1 text-xs font-bold font-mono text-white bg-amber-600 border border-amber-700 rounded shadow-sm",children:"F2"})]})]})]}),o.jsx(ba,{})]})},pt=()=>{const[ie,pe]=v.useState(""),[Be,ze]=v.useState(""),Me=async()=>{try{ce(!0);const lt=(ie??"").toString().trim(),tt=lt?Number(lt):void 0;if(tt!==void 0&&(Number.isNaN(tt)||tt<=0)){e({title:"Nmero invlido",description:"Informe um nmero positivo.",variant:"warning"});return}const tr=await cHe({numero:tt,nome:(Be||"").trim()||void 0,codigoEmpresa:t?.codigo_empresa}),Lt={id:tr.id,number:tr.numero,name:tr.nome,status:"available",order:[],customer:null,comandaId:null,totalHint:0};i(pr=>(pr.some(Wr=>Wr.id===Lt.id)?pr.map(Wr=>Wr.id===Lt.id?Lt:Wr):[...pr,Lt]).slice().sort((Wr,Mr)=>Number(Wr.number)-Number(Mr.number))),se.startTransition(()=>{l(Lt),J(!1)}),e({title:"Mesa criada",description:`Mesa ${tr.numero} adicionada`,variant:"success"}),pe(""),ze("")}catch(lt){e({title:"Falha ao criar mesa",description:lt?.message||"Tente novamente",variant:"destructive"})}finally{ce(!1)}};return o.jsx(cn,{open:U,onOpenChange:lt=>{J(lt),lt||(pe(""),ze(""))},children:o.jsxs(on,{className:"sm:max-w-md w-[92vw]",onOpenAutoFocus:lt=>lt.preventDefault(),onKeyDown:lt=>lt.stopPropagation(),onKeyDownCapture:lt=>lt.stopPropagation(),onPointerDownOutside:lt=>lt.stopPropagation(),onInteractOutside:lt=>lt.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Nova Mesa"}),o.jsx(hn,{children:"Informe o nome da mesa. Se deixar em branco, ser criada com numerao automtica."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(vt,{htmlFor:"nova-mesa-nome",children:"Nome da mesa"}),o.jsx($t,{id:"nova-mesa-nome",type:"text",placeholder:"Ex.: Mesa 1, Ptio 1, VIP...",value:Be,onChange:lt=>{ze(lt.target.value)},onKeyDown:lt=>{lt.stopPropagation(),lt.key==="Enter"&&lt.preventDefault()},onKeyUp:lt=>lt.stopPropagation(),onKeyPress:lt=>lt.stopPropagation()})]}),o.jsxs($n,{children:[o.jsx(ye,{type:"button",variant:"outline",onClick:()=>J(!1),disabled:H,children:"Cancelar"}),o.jsx(ye,{type:"button",onClick:Me,disabled:H,children:H?"Criando...":"Criar Mesa"})]})]})})},xt=async ie=>{try{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de adicionar produtos.",variant:"warning"});return}if(!s?.comandaId){e({title:"Selecione uma mesa",description:"Abra a comanda clicando na mesa primeiro.",variant:"destructive"});return}const pe=Number(ie.salePrice??ie.price??0);l(ze=>{const Me=Array.isArray(ze?.order)?[...ze.order]:[],lt=Me.findIndex(tr=>tr.productId===ie.id);if(lt>=0){const tr=Me[lt];Me[lt]={...tr,quantity:Number(tr.quantity||1)+1}}else Me.push({id:`tmp-${Date.now()}`,productId:ie.id,name:ie.name,price:pe,quantity:1});const tt={...ze,order:Me};return i(tr=>tr.map(Lt=>ze&&Lt.id===ze.id?tt:Lt)),tt});const Be=(s?.order||[]).find(ze=>ze.productId===ie.id);Be?await Mu({itemId:Be.id,quantidade:Number(Be.quantity||1)+1,codigoEmpresa:t?.codigo_empresa}):await gT({comandaId:s.comandaId,produtoId:ie.id,descricao:ie.name,quantidade:1,precoUnitario:pe,codigoEmpresa:t?.codigo_empresa}),setTimeout(async()=>{try{const Me=(await Fi({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(lt=>({id:lt.id,productId:lt.produto_id,name:lt.descricao||"Item",price:Number(lt.preco_unitario||0),quantity:Number(lt.quantidade||1)}));l(lt=>{if(!lt)return lt;const tt={...lt,order:Me};return i(tr=>tr.map(Lt=>Lt.id===tt.id?tt:Lt)),tt})}catch{}},0),e({title:"Produto adicionado",description:ie.name,variant:"success"})}catch(pe){e({title:"Falha ao adicionar produto",description:pe?.message||"Tente novamente",variant:"destructive"})}},yt=()=>{const[ie,pe]=v.useState("");v.useEffect(()=>{try{const Me=w||0,lt=y.current?.[Me];lt&&typeof lt.scrollIntoView=="function"&&lt.scrollIntoView({block:"nearest"})}catch{}},[w]);const ze=(F||[]).slice().sort((Me,lt)=>{const tt=Me.code||"",tr=lt.code||"";return/^\d+$/.test(tt)&&/^\d+$/.test(tr)?parseInt(tt,10)-parseInt(tr,10):tt.localeCompare(tr)}).filter(Me=>{const lt=ie.trim().toLowerCase();return lt?(Me.name||"").toLowerCase().includes(lt)||String(Me.code||"").toLowerCase().includes(lt):!0});return o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("div",{className:"p-4 border-b border-border",children:o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx("input",{className:"pl-8 pr-2 py-2 w-full rounded-md bg-surface text-text-primary border border-border focus-visible:ring-0 focus-visible:border-brand",placeholder:"Buscar produto por nome ou cdigo",value:ie,onChange:Me=>pe(Me.target.value),ref:x,onKeyDown:Me=>{if(Me.key&&Me.key.length===1&&!Me.ctrlKey&&!Me.metaKey&&!Me.altKey||Me.key==="Backspace"){Me.preventDefault(),Me.stopPropagation();let tt=String(ie||"");Me.key==="Backspace"?tt=tt.slice(0,-1):tt+=Me.key,pe(tt),setTimeout(()=>{try{x.current?.focus()}catch{}},0);return}if(["ArrowDown","ArrowUp","Home","End","ArrowLeft","ArrowRight","Enter","Escape"].includes(Me.key)){Me.preventDefault(),Me.stopPropagation();const tt=ze.length;if(tt===0&&Me.key!=="Escape")return;let tr=w||0;if(Me.key==="ArrowDown"){_((tr+1)%tt);return}if(Me.key==="ArrowUp"){_((tr-1+tt)%tt);return}if(Me.key==="Home"){_(0);return}if(Me.key==="End"){_(tt-1);return}if(Me.key==="ArrowRight"){try{const Lt=ze[tr];Lt&&xt(Lt)}catch{}return}if(Me.key==="ArrowLeft"){try{const Lt=ze[tr];Lt&&Le(Lt)}catch{}return}if(Me.key==="Enter"){try{const Lt=y.current?.[tr];Lt&&Lt.click()}catch{}return}if(Me.key==="Escape"){N("order"),wt("order");return}}}})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:o.jsx("ul",{className:"space-y-2",children:ze.length===0?o.jsxs("li",{className:"text-center text-text-muted py-8",children:[o.jsx("div",{className:"mb-3",children:"Nenhum produto encontrado."}),o.jsx(ye,{size:"sm",onClick:()=>n("/produtos"),children:"Cadastrar Produtos"})]}):ze.map((Me,lt)=>{const tt=$e.get(Me.id)||0,tr=Number(Me.stock??Me.currentStock??0),Lt=Math.max(0,tr-tt),pr=()=>{M(Me),I(!0),wt("products")};return o.jsxs("li",{className:kt("flex items-center gap-3 p-3 rounded-md border border-border bg-surface hover:bg-surface-2 transition-colors",lt===(w||0)&&"ring-2 ring-brand/60 bg-surface-2"),onClick:pr,ref:kr=>{y.current[lt]=kr},role:"option","aria-selected":lt===(w||0),tabIndex:-1,onMouseEnter:()=>_(lt),children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("p",{className:"font-semibold truncate",title:`${Me.code?`[${Me.code}] `:""}${Me.name}`,children:[Me.code&&o.jsxs("span",{className:"text-text-muted",children:["[",Me.code,"]"]})," ",Me.name]}),tt>0&&o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",tt]})]}),o.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[o.jsxs("p",{className:"text-xs sm:text-sm text-text-muted",children:["R$ ",Number(Me.salePrice??Me.price??0).toFixed(2)]}),o.jsxs("span",{className:"inline-flex items-center justify-center text-[10px] sm:text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",Lt]})]})]}),o.jsx(ye,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:kr=>{kr.preventDefault(),kr.stopPropagation(),xt(Me)},onTouchEnd:kr=>{kr.preventDefault(),kr.stopPropagation(),xt(Me)},"aria-label":`Adicionar ${Me.name}`,children:o.jsx(oi,{size:16})})]},Me.id)})})})]})},[ot,St]=v.useState(null),[Ht,Ut]=v.useState([]),[nr,ur]=v.useState(!1),[mr,Ar]=v.useState(""),[Nn,yn]=v.useState(!1),[_r,Mn]=v.useState([]),[Sa,ja]=v.useState(!1),[Mi,G]=v.useState(null),[Te,Je]=v.useState(!1),[Xt,It]=v.useState(null),jt=v.useMemo(()=>{const ie=new Map;for(const pe of Ht||[]){const Be=pe.productId,ze=Number(pe.quantity||0);ie.set(Be,(ie.get(Be)||0)+ze)}return ie},[Ht]),cr=async ie=>{if(!ie)return;const Be=(await Fi({comandaId:ie,codigoEmpresa:t?.codigo_empresa})||[]).map(ze=>({id:ze.id,productId:ze.produto_id,name:ze.descricao||"Item",price:Number(ze.preco_unitario||0),quantity:Number(ze.quantidade||1)}));Ut(Be)},wr=async ie=>{if(!ot)return;const pe=Number(ie.salePrice??ie.price??0);await gT({comandaId:ot,produtoId:ie.id,descricao:ie.name,quantidade:1,precoUnitario:pe,codigoEmpresa:t?.codigo_empresa}),await cr(ot),e({title:"Produto adicionado",description:ie.name,variant:"success"})},gr=async ie=>{if(!(!ot||!ie)){yn(!1);try{await ay({comandaId:ot,clienteIds:[ie],nomesLivres:[],codigoEmpresa:t?.codigo_empresa}),G(ie),Ar(""),Mn([]),e({title:"Cliente associado",variant:"success"})}catch(pe){e({title:"Falha ao associar cliente",description:pe?.message||"Tente novamente",variant:"destructive"}),yn(!0)}}},zt=async()=>{if(ot)try{const ie=Kn(Ht);if(ie<=0){e({title:"Sem itens",description:"Adicione itens antes de pagar.",variant:"warning"});return}ur(!0),await kd({codigoEmpresa:t?.codigo_empresa});let pe=We;if(!Array.isArray(pe)||pe.length===0)try{pe=await ov({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa}),be(pe)}catch{}const Be=pe?.[0],ze=Be?.tipo||Be?.nome||"outros";await vT({comandaId:ot,finalizadoraId:Be?.id,metodo:ze,valor:ie,codigoEmpresa:t?.codigo_empresa}),await Xm({comandaId:ot,codigoEmpresa:t?.codigo_empresa}),e({title:"Pagamento registrado (balco)",description:`R$ ${ie.toFixed(2)}`,variant:"success"}),Ut([]),St(null),m(!1)}catch(ie){e({title:"Falha no pagamento (balco)",description:ie?.message||"Tente novamente",variant:"destructive"})}finally{ur(!1)}},Er=()=>{v.useEffect(()=>{let pe=!0;return(async()=>{if(h)try{ur(!0);const ze=await getOrCreateComandaBalcao({codigoEmpresa:t?.codigo_empresa});if(!pe)return;St(ze.id),await cr(ze.id)}catch(ze){pe&&e({title:"Falha ao abrir comanda de balco",description:ze?.message||"Tente novamente",variant:"destructive"})}finally{pe&&ur(!1)}})(),()=>{pe=!1}},[h]),v.useEffect(()=>{if(!Nn)return;let pe=!0;const ze=setTimeout(async()=>{try{ja(!0);const Me=await B2({searchTerm:mr,limit:20,codigoEmpresa:t?.codigo_empresa});pe&&Mn(Me||[])}catch{pe&&Mn([])}finally{pe&&ja(!1)}},250);return()=>{pe=!1,clearTimeout(ze)}},[Nn,mr]);const ie=Kn(Ht);return o.jsx(cn,{open:h,onOpenChange:m,children:o.jsxs(on,{className:"max-w-4xl h-[90vh]",onKeyDown:pe=>pe.stopPropagation(),onKeyDownCapture:pe=>pe.stopPropagation(),onPointerDownOutside:pe=>pe.stopPropagation(),onInteractOutside:pe=>pe.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Modo Balco"}),o.jsx(hn,{children:"Venda rpida para clientes sem mesa."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full overflow-hidden pt-4",children:[o.jsxs("div",{className:"col-span-1 flex flex-col border-r border-border pr-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Catlogo de Produtos"}),o.jsx(ye,{variant:"outline",size:"sm",onClick:()=>yn(!0),children:Mi?o.jsxs(o.Fragment,{children:[o.jsx(Cs,{className:"mr-1 h-4 w-4 text-success"})," Cliente"]}):"Cliente"})]}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:mr,onChange:pe=>Ar(pe.target.value),ref:b})]}),o.jsx("div",{className:"flex-1 overflow-y-auto -mr-4 pr-4 thin-scroll",children:o.jsxs("ul",{className:"space-y-2",children:[(F||[]).filter(pe=>{const Be=mr.trim().toLowerCase();return Be?(pe.name||"").toLowerCase().includes(Be)||(pe.code||"").toLowerCase().includes(Be):!0}).sort((pe,Be)=>{const ze=pe.code||"",Me=Be.code||"";return/^\d+$/.test(ze)&&/^\d+$/.test(Me)?parseInt(ze,10)-parseInt(Me,10):ze.localeCompare(Me)}).map(pe=>{const Be=(Ht||[]).reduce((lt,tt)=>lt+(tt.productId===pe.id?Number(tt.quantity||0):0),0),ze=Number(pe.stock??pe.currentStock??0),Me=Math.max(0,ze-Be);return o.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors",onClick:()=>{It(pe),Je(!0)},children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("p",{className:"font-semibold truncate",title:`${pe.code?`[${pe.code}] `:""}${pe.name}`,children:[pe.code&&o.jsxs("span",{className:"text-text-muted",children:["[",pe.code,"]"]})," ",pe.name]}),Be>0&&o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",Be]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",Number(pe.salePrice??pe.price??0).toFixed(2)]}),o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",Me]})]})]}),o.jsx(ye,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:lt=>{lt.stopPropagation(),wr(pe)},"aria-label":`Adicionar ${pe.name}`,children:o.jsx(oi,{size:16})})]},pe.id)}),(!F||F.length===0)&&o.jsxs("li",{className:"text-center text-text-muted py-8",children:[o.jsx("div",{className:"mb-3",children:"Nenhum produto cadastrado. Cadastre produtos para vender no balco."}),o.jsx(ye,{size:"sm",onClick:()=>n("/produtos"),children:"Cadastrar Produtos"})]})]})})]}),o.jsxs("div",{className:"col-span-1 flex flex-col",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Comanda do Balco"}),o.jsx("div",{className:"flex-1 overflow-y-auto bg-surface-2 rounded-lg p-4 thin-scroll",children:Ht.length===0?o.jsx("p",{className:"text-center text-text-muted pt-16",children:"Adicione produtos  comanda."}):o.jsx("ul",{className:"divide-y divide-border",children:Ht.map(pe=>o.jsxs("li",{className:"py-2 flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:pe.name}),o.jsxs("div",{className:"text-xs text-text-muted",children:["Qtd: ",pe.quantity,"  Unit: R$ ",Number(pe.price||0).toFixed(2)]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"font-semibold mr-2",children:["R$ ",(Number(pe.price||0)*Number(pe.quantity||0)).toFixed(2)]}),o.jsx(ye,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{const Be=Number(pe.quantity||1)-1;try{Be<=0?await $m({itemId:pe.id,codigoEmpresa:t?.codigo_empresa}):await Mu({itemId:pe.id,quantidade:Be,codigoEmpresa:t?.codigo_empresa}),await cr(ot)}catch(ze){e({title:"Falha ao atualizar",description:ze?.message||"Tente novamente",variant:"destructive"})}},children:o.jsx(_L,{size:14})}),o.jsx("span",{className:"w-8 text-center font-semibold",children:pe.quantity}),o.jsx(ye,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{try{await Mu({itemId:pe.id,quantidade:Number(pe.quantity||1)+1,codigoEmpresa:t?.codigo_empresa}),await cr(ot)}catch(Be){e({title:"Falha ao atualizar",description:Be?.message||"Tente novamente",variant:"destructive"})}},children:o.jsx(oi,{size:14})})]})]},pe.id))})}),o.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[o.jsxs("div",{className:"flex justify-between items-center text-xl font-bold mb-4",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["R$ ",ie.toFixed(2)]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(Iu,{children:[o.jsx(Lm,{asChild:!0,children:o.jsx(ye,{size:"lg",className:"flex-1 bg-red-600 hover:bg-red-500 text-white border border-red-600/70",children:"Cancelar"})}),o.jsxs(Gc,{className:"sm:max-w-[420px] animate-none",onKeyDown:pe=>pe.stopPropagation(),children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Cancelar comanda do balco?"}),o.jsx(Jc,{children:"Os itens sero descartados e o balco ser limpo. Esta ao no pode ser desfeita."})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{children:"Voltar"}),o.jsx(Du,{onClick:async()=>{try{if(!ot){m(!1);return}await ez({comandaId:ot,codigoEmpresa:t?.codigo_empresa}),Ut([]),St(null),m(!1),e({title:"Comanda cancelada (balco)",variant:"success"})}catch(pe){e({title:"Falha ao cancelar",description:pe?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Cancelamento"})]})]})]}),o.jsxs(ye,{size:"lg",className:"flex-1",onClick:zt,disabled:nr||ie<=0,children:[o.jsx(Gs,{className:"mr-2"})," Finalizar Pagamento"]})]})]})]})]}),Nn&&o.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center",onClick:pe=>{pe.target===pe.currentTarget&&yn(!1)},onKeyDown:pe=>{pe.key==="Escape"&&yn(!1)},children:o.jsxs("div",{className:"bg-surface rounded-lg border border-border shadow-lg w-full max-w-md p-4",role:"dialog","aria-modal":"true",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-lg font-semibold",children:"Selecionar Cliente"}),o.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>yn(!1),children:"Fechar"})]}),o.jsxs("div",{className:"relative mb-2",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Nome, e-mail, telefone ou cdigo",className:"pl-9",value:mr,onChange:pe=>Ar(pe.target.value)})]}),o.jsx("div",{className:"max-h-64 overflow-auto thin-scroll border rounded-md",children:Sa?o.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Carregando clientes..."}):_r.length>0?o.jsx("ul",{children:_r.map(pe=>o.jsxs("li",{className:kt("p-2 flex items-center justify-between cursor-pointer hover:bg-surface-2",Mi===pe.id&&"bg-surface-2"),onClick:()=>gr(pe.id),children:[o.jsx("div",{children:o.jsxs("div",{className:"font-medium",children:[pe.codigo!=null?String(pe.codigo)+" - ":"",pe.nome]})}),Mi===pe.id&&o.jsx(Cs,{size:16,className:"text-success"})]},pe.id))}):o.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum cliente encontrado."})})]})})]})})},Bt=()=>{const ie=Xt,pe=ie&&jt.get(ie.id)||0,Be=ie?Number(ie.salePrice??ie.price??0):0,ze=Me=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(Me||0));return o.jsx(cn,{open:Te,onOpenChange:Me=>{Je(Me),Me||It(null)},children:o.jsxs(on,{overlayClassName:"z-[60]",className:"sm:max-w-[420px] w-[92vw] max-h-[85vh] flex flex-col animate-none z-[61]",onKeyDown:Me=>Me.stopPropagation(),onPointerDownOutside:Me=>Me.stopPropagation(),onInteractOutside:Me=>Me.stopPropagation(),onEscapeKeyDown:Me=>{Me.preventDefault(),Me.stopPropagation()},children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold break-words",title:ie?.name||"",children:ie?.name||"Produto"}),o.jsx(hn,{children:"Detalhes do produto (Balco)."})]}),ie?o.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),o.jsx("span",{className:"text-sm font-semibold",children:ze(Be)})]}),ie.category?o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),o.jsx("span",{className:"text-sm font-medium",children:ie.category})]}):null,o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof ie.stock<"u"&&o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),o.jsx("div",{className:"text-base font-semibold",children:ie.stock})]}),typeof ie.minStock<"u"&&o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),o.jsx("div",{className:"text-base font-semibold",children:ie.minStock})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),o.jsxs("div",{className:"text-base font-semibold",children:["x",pe]})]})]})]}):null,o.jsxs($n,{className:"flex items-center justify-between gap-2",children:[o.jsxs(ye,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{ie&&n("/produtos",{state:{productId:ie.id,productName:ie.name}})},children:[o.jsx(uc,{className:"w-4 h-4"}),o.jsx("span",{children:"Info"})]}),o.jsx(ye,{variant:"outline",onClick:()=>{Je(!1),It(null)},children:"Fechar"}),o.jsx(ye,{onClick:async()=>{ie&&(await wr(ie),Je(!1),It(null))},children:"Adicionar"})]})]})})},Xr=()=>{const[ie,pe]=v.useState(""),[Be,ze]=v.useState(!1),[Me,lt]=v.useState([]),[tt,tr]=v.useState([]),[Lt,pr]=v.useState(0),kr=v.useRef([]),wn=v.useRef(null),Wr=v.useRef(null),Mr=v.useRef(null),_n=v.useRef(null),xe=v.useRef(0),je=v.useRef(0);v.useEffect(()=>{let Re=!0;return(async()=>{try{ze(!0);const Q=await B2({searchTerm:ie,limit:20});if(!Re)return;const Ce=(Q||[]).slice(),Ke=String(ie||"").trim().toLowerCase(),Ze=Gt=>{const Kt=String(Gt?.nome||"").toLowerCase();return Ke?Kt.startsWith(Ke)?0:Kt.includes(Ke)?1:2:2};Ce.sort((Gt,Kt)=>{const at=Ze(Gt),Dt=Ze(Kt);if(at!==Dt)return at-Dt;const fr=Number(Gt?.codigo||0),er=Number(Kt?.codigo||0);return fr-er}),lt(Ce),pr(0)}catch{if(!Re)return;lt([])}finally{Re&&ze(!1)}})(),()=>{Re=!1}},[ie]);const Ie=v.useRef(!1);v.useEffect(()=>{try{oe&&!Ie.current&&(Ie.current=!0,Mr.current&&(Mr.current.scrollTop=0),wn.current&&(wn.current.scrollTop=0),Wr.current&&(Wr.current.scrollTop=0)),oe||(Ie.current=!1)}catch{}},[oe]),v.useEffect(()=>{try{oe&&Array.isArray(Me)&&Me.length>0&&(pr(0),setTimeout(()=>{try{wn.current?.focus(),Wr.current&&(Wr.current.scrollTop=0)}catch{}},0))}catch{}},[oe,Me.length]);const De=async(Re=null)=>{try{if(!V)return;const nt=await fHe({mesaId:V.id,codigoEmpresa:t?.codigo_empresa}),Q=Re?Array.from(new Set(Re)):tt,Ce=Array.from(new Set(Q||[])),Ke=[];await ay({comandaId:nt.id,clienteIds:Ce,nomesLivres:Ke,codigoEmpresa:t?.codigo_empresa});let Ze=null;try{const at=(await os({comandaId:nt.id,codigoEmpresa:t?.codigo_empresa})||[]).map(Dt=>Dt?.nome).filter(Boolean);Ze=at.length?at.join(", "):null}catch{}Ze||(Ze=Ce.length?Ce.map(Kt=>Me.find(at=>at.id===Kt)?.nome).filter(Boolean).join(", "):Ke[0]||"");const Gt={...V,comandaId:nt.id,status:"in-use",customer:Ze||null,order:[]};l(Gt),i(Kt=>Kt.map(at=>at.id===Gt.id?Gt:at)),await new Promise(Kt=>setTimeout(Kt,500));try{const Kt=await Vg(t?.codigo_empresa),at=await sc({codigoEmpresa:t?.codigo_empresa}),Dt={},fr={};await Promise.all((at||[]).map(async Tr=>{try{const Ur=(await os({comandaId:Tr.id,codigoEmpresa:t?.codigo_empresa})||[]).map(So=>So?.nome).filter(Boolean);Dt[Tr.id]=Ur.length?Ur.join(", "):null;const va=(await Fi({comandaId:Tr.id,codigoEmpresa:t?.codigo_empresa})||[]).reduce((So,Ci)=>{const fs=(Ci.quantidade||0)*(Ci.preco_unitario||0)-(Ci.desconto||0);return So+fs},0);fr[Tr.id]=va}catch{Dt[Tr.id]=null,fr[Tr.id]=0}}));const er=(Kt||[]).map(Tr=>{const zr=(at||[]).find(Ur=>Ur.mesa_id===Tr.id);return{id:Tr.id,name:Tr.nome||`Mesa ${Tr.numero}`,status:zr?"in-use":"available",comandaId:zr?.id||null,customer:zr?Dt[zr.id]:null,order:[],totalHint:zr&&fr[zr.id]||0}});i(er)}catch(Kt){console.error("[confirmOpen] Erro ao atualizar mesas:",Kt)}L(!1),Z(null),he(""),tr([]),e({title:"Mesa aberta",description:Ze?`Comanda criada para: ${Ze}`:"Comanda criada.",variant:"success"})}catch(nt){e({title:"Falha ao abrir mesa",description:nt?.message||"Tente novamente",variant:"destructive"})}};return o.jsx(cn,{open:oe,onOpenChange:Re=>{L(Re),Re||(Z(null),he(""),tr([]))},children:o.jsxs(on,{className:"w-[95vw] max-w-md h-[560px] max-h-[75vh] flex flex-col animate-none overflow-hidden",onOpenAutoFocus:Re=>Re.preventDefault(),onPointerDownOutside:Re=>{Re.preventDefault(),Re.stopPropagation()},onInteractOutside:Re=>{Re.preventDefault(),Re.stopPropagation()},onEscapeKeyDown:Re=>{Re.preventDefault(),L(!1)},onKeyDown:Re=>{Re.key==="Escape"&&(Re.preventDefault(),Re.stopPropagation(),L(!1))},ref:Mr,children:[o.jsxs(an,{className:"flex-shrink-0",children:[o.jsxs(en,{className:"text-xl font-bold",children:["Abrir Mesa ",V?`#${V.number}`:""]}),o.jsx(hn,{className:"text-sm",children:"Selecione um ou mais clientes para a mesa."})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto thin-scroll min-h-0 space-y-2 py-2",ref:Wr,children:[o.jsxs("div",{children:[o.jsx(vt,{className:"text-sm font-medium mb-1.5 block",children:"Buscar cliente"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Zi,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Nome, telefone ou cdigo",className:"pl-8 h-9 text-sm",value:ie,ref:_n,onChange:Re=>{je.current=Date.now(),pe(Re.target.value)},onKeyDown:Re=>{if(Re.key==="Enter"){Re.preventDefault();try{if(Array.isArray(Me)&&Me.length>0){const nt=Math.min(Math.max(Lt||0,0),Me.length-1),Q=Me[nt];Q?.id&&tr(Ce=>Ce.includes(Q.id)?Ce.filter(Ke=>Ke!==Q.id):[...Ce,Q.id])}}catch{}pe(""),setTimeout(()=>{try{wn.current?.focus()}catch{}},0)}else je.current=Date.now()}})]}),o.jsx(ye,{type:"button",size:"icon",title:"Cadastrar cliente",className:"h-9 w-9 flex-shrink-0 bg-brand text-black hover:bg-brand/90",onClick:()=>{window.location.href="/clientes"},children:o.jsx(oi,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-1.5 text-[12px] text-text-muted flex items-center gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 rounded border border-border/70 bg-surface-2",children:""})," seleciona"]}),o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 rounded border border-border/70 bg-surface-2",children:""})," desmarca"]}),o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 rounded border border-border/70 bg-surface-2",children:"Enter"})," confirma"]}),o.jsx("span",{className:"inline-flex items-center gap-1",children:"Digite para buscar"})]})]}),o.jsx("div",{className:"min-h-[8px]",children:tt.length>0&&o.jsxs("div",{className:"bg-success/10 border border-success/30 rounded-md p-2.5",children:[o.jsxs("div",{className:"text-xs font-medium text-success mb-1",children:[tt.length," cliente",tt.length>1?"s":""," selecionado",tt.length>1?"s":""]}),o.jsx("div",{className:"text-sm text-text-primary",children:Me.filter(Re=>tt.includes(Re.id)).map(Re=>Re.nome).join(", ")})]})}),o.jsx("div",{className:"border rounded-md focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",role:"listbox","aria-label":"Clientes","aria-activedescendant":Me&&Me.length>0&&Me[Lt]&&Me[Lt].id?`ot-option-${Me[Lt].id}`:void 0,ref:wn,tabIndex:0,onKeyDown:Re=>{try{if(Re.key&&Re.key.length===1&&!Re.ctrlKey&&!Re.metaKey&&!Re.altKey||Re.key==="Backspace"){Re.preventDefault(),Re.stopPropagation();let Q=String(ie||"");Re.key==="Backspace"?Q=Q.slice(0,-1):Q+=Re.key,pe(Q),je.current=Date.now();try{Wr.current&&(Wr.current.scrollTop=0)}catch{}setTimeout(()=>{try{if(_n.current){_n.current.focus();const Ce=Q.length;_n.current.setSelectionRange?.(Ce,Ce)}}catch{}},0);return}if(["ArrowDown","ArrowUp","Home","End","ArrowRight","ArrowLeft"," "].includes(Re.key)){let Q=Lt||0;const Ce=Me.length;Re.key==="ArrowDown"&&(Q=Math.min(Q+1,Ce-1)),Re.key==="ArrowUp"&&(Q=Math.max(Q-1,0)),Re.key==="Home"&&(Q=0),Re.key==="End"&&(Q=Ce-1),pr(Q),setTimeout(()=>{try{kr.current[Q]?.scrollIntoView({block:"nearest"})}catch{}},0);const Ke=Me[Q];Re.key==="ArrowRight"&&Ke?.id&&(he(""),tr(Ze=>Ze.includes(Ke.id)?Ze:[...Ze,Ke.id])),Re.key==="ArrowLeft"&&Ke?.id&&tr(Ze=>Ze.filter(Gt=>Gt!==Ke.id)),Re.key===" "&&Ke?.id&&(he(""),tr(Ze=>Ze.includes(Ke.id)?Ze.filter(Gt=>Gt!==Ke.id):[...Ze,Ke.id]));return}if(Re.key==="Enter"){Re.preventDefault();const Q=Math.min(Math.max(Lt||0,0),Me.length-1),Ce=Me[Q];if(Date.now()-je.current<600||document.activeElement===_n.current||ie&&ie.length>0){Ce?.id&&(he(""),tr(Gt=>Gt.includes(Ce.id)?Gt.filter(Kt=>Kt!==Ce.id):[...Gt,Ce.id])),pe(""),setTimeout(()=>{try{wn.current?.focus(),Wr.current&&(Wr.current.scrollTop=0)}catch{}},0);return}if(Ce?.id){const Gt=tt.includes(Ce.id)?tt:[...tt,Ce.id];tt.includes(Ce.id)||tr(Kt=>[...Kt,Ce.id]),setTimeout(()=>{try{De(Gt)}catch{}},0);return}setTimeout(()=>{try{De(tt)}catch{}},0);return}}catch{}},children:Be?o.jsx("div",{className:"p-3 text-center text-sm text-text-muted",children:"Carregando..."}):Me.length>0?o.jsx("ul",{className:"divide-y divide-border",children:Me.map((Re,nt)=>{const Q=tt.includes(Re.id),Ce=nt===(Lt||0);return o.jsxs("li",{id:`ot-option-${Re.id}`,ref:Ke=>{kr.current[nt]=Ke},role:"option","aria-selected":Ce,className:kt("p-2.5 flex items-center justify-between cursor-pointer transition-colors outline-none focus:outline-none focus-visible:outline-none border border-transparent border-l-4",Q?"bg-success/10 hover:bg-success/15 border-success":"",Ce?"bg-brand/10 border-brand/50":"hover:bg-surface-2"),onClick:()=>{he(""),tr(Ke=>Ke.includes(Re.id)?Ke.filter(Ze=>Ze!==Re.id):[...Ke,Re.id])},onDoubleClick:()=>{const Ke=tt.includes(Re.id)?tt:[...tt,Re.id];tr(Ke),setTimeout(()=>{try{De(Ke)}catch{}},0)},onMouseEnter:()=>{Date.now()-(xe.current||0)>300&&pr(nt)},tabIndex:-1,children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsx("span",{className:kt("w-2 h-2 rounded-full flex-shrink-0",Q?"bg-success":Ce?"bg-brand":"bg-border")}),o.jsxs("div",{className:"font-medium text-sm truncate",children:[Re.codigo!=null?`${Re.codigo} - `:"",Re.nome]}),Re.telefone&&o.jsx("div",{className:"text-xs text-text-muted mt-0.5",children:Re.telefone})]}),o.jsx("div",{className:"ml-2 flex-shrink-0",children:Q?o.jsx(Cs,{size:18,className:"text-success"}):o.jsx("div",{className:"w-[18px] h-[18px] rounded-full border-2 border-border"})})]},Re.id)})}):o.jsx("div",{className:"p-4 text-center text-sm text-text-muted",children:"Nenhum cliente encontrado"})})]}),o.jsxs($n,{className:"flex-shrink-0 pt-3",children:[o.jsx(ye,{type:"button",variant:"outline",onClick:()=>{L(!1),Z(null),he(""),tr([])},children:"Cancelar"}),o.jsx(ye,{onClick:De,disabled:!V,children:"Confirmar Abertura"})]})]})})},Vr=()=>{const[ie,pe]=v.useState("");return v.useEffect(()=>{mt.current&&pe(mt.current)},[]),o.jsxs(o.Fragment,{children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Abrir Caixa"}),o.jsx(Jc,{children:"Insira o valor inicial (suprimento) para abrir o caixa."})]}),o.jsxs("div",{className:"py-4",children:[o.jsx(vt,{htmlFor:"initial-value",children:"Valor Inicial"}),o.jsxs("div",{className:"relative mt-2",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"R$"}),o.jsx($t,{id:"initial-value",type:"text",inputMode:"numeric",pattern:"[0-9.,]*",autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,name:"cash-open-initial",placeholder:"0,00",className:"pl-9 font-semibold",value:ie,onChange:Be=>{const ze=(Be.target.value||"").replace(/\D/g,""),Me=ze?Number(ze)/100:0,lt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Me);pe(lt),mt.current=lt},onKeyDown:Be=>{Be.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(Be.key)&&(/^[0-9]$/.test(Be.key)||Be.preventDefault())},onBeforeInput:Be=>{const ze=Be.data??"";ze&&/\D/.test(ze)&&Be.preventDefault()},onMouseDown:Be=>Be.stopPropagation()})]})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{onClick:()=>ft(!1),children:"Cancelar"}),o.jsx(Du,{onClick:async()=>{if(!_t){ue(!0);try{const Be=String(ie).replace(/\./g,"").replace(",","."),ze=Number(Be)||0;try{localStorage.setItem("cash:opening",String(Date.now()))}catch{}await kd({saldoInicial:ze,codigoEmpresa:t?.codigo_empresa}),await rr(),await vi({showToast:!1}),ft(!1),e({title:"Caixa aberto com sucesso!",variant:"success"}),mt.current="",pe("")}catch(Be){e({title:"Falha ao abrir caixa",description:Be?.message||"Tente novamente",variant:"destructive"})}finally{try{localStorage.removeItem("cash:opening")}catch{}ue(!1)}}},children:"Confirmar Abertura"})]})]})},rn=()=>o.jsxs(Iu,{open:Qe,onOpenChange:ft,children:[o.jsx(Lm,{asChild:!0,children:o.jsxs(ye,{variant:"success",size:"sm",disabled:c||_t,onClick:()=>ft(!0),className:"px-3",children:[o.jsx(SW,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2 md:hidden",children:"Abrir"}),o.jsx("span",{className:"ml-2 hidden md:inline",children:"Abrir Caixa"}),!c&&o.jsx("kbd",{className:"ml-2 hidden md:inline px-2 py-1 text-xs font-bold font-mono text-white bg-emerald-700 border border-emerald-800 rounded shadow-sm",children:"F10"})]})}),o.jsx(Gc,{className:"sm:max-w-[425px] animate-none",onKeyDown:ie=>ie.stopPropagation(),onKeyDownCapture:ie=>ie.stopPropagation(),onEscapeKeyDown:ie=>ie.preventDefault(),onPointerDownOutside:ie=>{ie.preventDefault(),ie.stopPropagation()},onInteractOutside:ie=>{ie.preventDefault(),ie.stopPropagation()},children:o.jsx(Vr,{})})]}),na=()=>{const[ie,pe]=v.useState({loading:!1,saldoInicial:0,resumo:null}),[Be,ze]=v.useState(!1),[Me,lt]=v.useState(!1),[tt,tr]=v.useState(!1),[Lt,pr]=v.useState(!1),[kr,wn]=v.useState(""),Wr=async()=>{try{pe({loading:!0,saldoInicial:0,resumo:null});const je=await Qf({codigoEmpresa:t?.codigo_empresa}),Ie=await kb({codigoEmpresa:t?.codigo_empresa});pe({loading:!1,saldoInicial:Number(je?.saldo_inicial||0),resumo:Ie||{totalPorFinalizadora:{}}})}catch{pe({loading:!1,saldoInicial:0,resumo:{totalPorFinalizadora:{}}})}},Mr=ie?.resumo?.totalPorFinalizadora||{},_n=Object.values(Mr).reduce((je,Ie)=>je+Number(Ie||0),0),xe=Number(ie.saldoInicial||0)+_n;return o.jsxs(o.Fragment,{children:[o.jsxs(Iu,{open:Be,onOpenChange:je=>{ze(je),je&&Wr()},children:[o.jsx(Lm,{asChild:!0,children:o.jsxs(ye,{variant:"destructive",size:"sm",disabled:!c,onClick:()=>ze(!0),className:"px-3",children:[o.jsx(yv,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2 md:hidden",children:"Fechar"}),o.jsx("span",{className:"ml-2 hidden md:inline",children:"Fechar Caixa"})]})}),o.jsxs(Gc,{className:"sm:max-w-[425px] w-[92vw] max-h-[85vh] animate-none",onOpenAutoFocus:je=>je.preventDefault(),onKeyDown:je=>je.stopPropagation(),onKeyDownCapture:je=>je.stopPropagation(),onPointerDownOutside:je=>{je.preventDefault(),je.stopPropagation()},onInteractOutside:je=>{je.preventDefault(),je.stopPropagation()},children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Fechar Caixa"}),o.jsx(Jc,{children:"Confira os valores e confirme o fechamento do caixa. Esta ao  irreversvel."})]}),tt&&o.jsxs("div",{className:"md:hidden mb-2 text-[12px] text-warning bg-warning/10 border border-warning/30 rounded px-2 py-1 flex items-center gap-1",children:[o.jsx(au,{className:"h-3.5 w-3.5"}),"Existem comandas abertas. Finalize-as antes de fechar o caixa."]}),ie.loading?o.jsx("div",{className:"py-4 text-text-muted",children:"Carregando resumo"}):o.jsxs("div",{className:"py-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Valor Inicial:"})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",Number(ie.saldoInicial||0).toFixed(2)]})]}),Object.keys(Mr).length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos nesta sesso."}):Object.entries(Mr).map(([je,Ie])=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-text-secondary",children:[String(je),":"]})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",Number(Ie||0).toFixed(2)]})]},je)),o.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[o.jsx("span",{className:"text-text-primary",children:"Total em Caixa:"})," ",o.jsxs("span",{className:"font-mono text-success",children:["R$ ",Number(xe||0).toFixed(2)]})]})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{onClick:()=>ze(!1),disabled:Lt,children:"Cancelar"}),o.jsx(Du,{onClick:()=>{lt(!0)},disabled:Lt,children:"Continuar"})]})]})]}),o.jsx(Iu,{open:Me,onOpenChange:je=>{Lt||lt(je)},children:o.jsxs(Gc,{className:"sm:max-w-[425px] w-[92vw] max-h-[85vh] animate-none",onOpenAutoFocus:je=>je.preventDefault(),onEscapeKeyDown:je=>{Lt||je.preventDefault()},onKeyDown:je=>je.stopPropagation(),onKeyDownCapture:je=>je.stopPropagation(),onPointerDownOutside:je=>{Lt||(je.preventDefault(),je.stopPropagation())},onInteractOutside:je=>{Lt||(je.preventDefault(),je.stopPropagation())},children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Confirmar Fechamento do Caixa"}),o.jsx(Jc,{children:"Informe o saldo final para finalizar o fechamento."})]}),o.jsxs("div",{className:"py-4",children:[o.jsx(vt,{htmlFor:"valor-contado-final",className:"text-sm font-medium text-text-primary mb-2 block",children:"Saldo Final (opcional)"}),o.jsx("input",{id:"valor-contado-final",type:"text",placeholder:"R$ 0,00",value:kr,onChange:je=>{let Ie=je.target.value.replace(/\D/g,"");Ie.length>0&&(Ie=(Number(Ie)/100).toFixed(2),Ie=Ie.replace(".",","),Ie="R$ "+Ie),wn(Ie)},className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{onClick:()=>{lt(!1)},disabled:Lt,children:"Voltar"}),o.jsx(Du,{onClick:async()=>{try{if(Lt)return;pr(!0);const je=Number(ie.saldoInicial||0)+_n,Ie=kr?Number(kr.replace(/[^0-9,]/g,"").replace(",",".")):null;await ite({saldoFinal:je,valorFinalDinheiro:Ie,codigoEmpresa:t?.codigo_empresa}),u(!1),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{lt(!1),ze(!1),wn(""),e({title:"Caixa fechado!",description:`Saldo final: R$ ${je.toFixed(2)}`,duration:4e3})}):(lt(!1),ze(!1),wn(""),e({title:"Caixa fechado!",description:`Saldo final: R$ ${je.toFixed(2)}`,duration:4e3})),setTimeout(async()=>{try{await Qf({codigoEmpresa:t?.codigo_empresa})}catch{}},0)}catch(je){console.error(je);const Ie=je?.message||"Tente novamente";if(ve){Y(Ie.includes("Existem")?Ie:`Falha ao fechar caixa: ${Ie}`);try{lt(!1),ze(!1)}catch{}typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{qe(!0)}):qe(!0),setTimeout(()=>qe(!1),2600)}else e({title:"Falha ao fechar caixa",description:Ie,variant:"destructive"})}finally{pr(!1)}},children:"Confirmar Fechamento"})]})]})})]})},Jr=()=>{const[ie,pe]=v.useState(""),[Be,ze]=v.useState([]),[Me,lt]=v.useState([]),[tt,tr]=v.useState(!1),[Lt,pr]=v.useState(new Set),kr=v.useRef([]),wn=v.useRef(!1),[Wr,Mr]=v.useState(0),_n=v.useRef([]),xe=v.useRef(null),je=v.useRef(0),[Ie,De]=v.useState(null),[Re,nt]=v.useState("");v.useEffect(()=>{let at=!0;const Dt=async()=>{if(!(!B||!s?.comandaId))try{tr(!0);const fr=await os({comandaId:s.comandaId,codigoEmpresa:t?.codigo_empresa});if(!at)return;const er=(fr||[]).map(Ur=>({id:Ur.id,cliente_id:Ur.cliente_id,nome:Ur.nome||"",tipo:Ur.tipo||(Ur.cliente_id?"cadastrado":"livre")}));lt(er),kr.current=JSON.parse(JSON.stringify(er)),pr(new Set);const Tr=await B2({searchTerm:ie,limit:50});if(!at)return;const zr=(Tr||[]).slice().sort((Ur,sa)=>Number(Ur?.codigo||0)-Number(sa?.codigo||0));ze(zr),Mr(0),wn.current=!0}catch(fr){console.error("Erro ao carregar clientes:",fr)}finally{at&&tr(!1)}};if(!B)return wn.current=!1,()=>{at=!1};Dt()},[B,ie]),v.useEffect(()=>{B&&Array.isArray(Be)&&Be.length>0&&(Mr(0),setTimeout(()=>{try{xe.current?.focus(),_n.current[0]?.scrollIntoView({block:"nearest"})}catch{}},0))},[B,Be.length]);const Q=()=>{const at={id:`temp-${Date.now()}`,cliente_id:Be.find(Dt=>Dt.codigo===0)?.id||null,nome:"Consumidor",tipo:"livre"};lt(Dt=>[...Dt,at]),pr(Dt=>new Set([...Dt,at.id])),De(at.id),nt("Consumidor")},Ce=at=>{if(!s?.comandaId)return;const Dt=Me.find(fr=>fr.cliente_id===at&&fr.tipo==="cadastrado");if(Dt)lt(fr=>fr.filter(er=>er.id!==Dt.id));else{const fr=Be.find(Tr=>Tr.id===at);if(!fr)return;const er={id:`temp-${Date.now()}`,cliente_id:at,nome:fr.nome,tipo:"cadastrado"};lt(Tr=>[...Tr,er])}pr(fr=>new Set([...fr,at]))},Ke=at=>{lt(Dt=>Dt.filter(fr=>fr.id!==at)),pr(Dt=>new Set([...Dt,at]))},Ze=at=>{const Dt=Me.find(fr=>fr.id===at);Dt&&(De(at),nt(Dt.nome||"Consumidor"))},Gt=()=>{if(!Ie)return;const at=Re.trim()||"Consumidor";lt(Dt=>Dt.map(fr=>fr.id===Ie?{...fr,nome:at}:fr)),pr(Dt=>new Set([...Dt,Ie])),De(null),nt("")},Kt=async()=>{if(!s?.comandaId){W(!1);return}if(Lt.size===0){W(!1);return}try{tr(!0);const at=kr.current.map(zr=>zr.id),Dt=Me.map(zr=>zr.id),fr=kr.current.filter(zr=>!Dt.includes(zr.id));for(const zr of fr)if(!String(zr.id).startsWith("temp-")){const{error:Ur}=await Ne.from("comanda_clientes").delete().eq("id",zr.id).eq("codigo_empresa",t?.codigo_empresa);if(Ur)throw console.error("[confirmChanges] Erro ao remover:",Ur),Ur}const er=Me.filter(zr=>String(zr.id).startsWith("temp-")),Tr=Me.filter(zr=>{if(String(zr.id).startsWith("temp-"))return!1;const Ur=kr.current.find(sa=>sa.id===zr.id);return Ur&&Ur.nome!==zr.nome});if(er.length>0){const zr=er.filter(sa=>sa.tipo==="cadastrado").map(sa=>sa.cliente_id),Ur=er.filter(sa=>sa.tipo==="livre").map(sa=>sa.nome);console.log("[confirmChanges] Adicionando:",{clienteIds:zr,nomesLivres:Ur}),await ay({comandaId:s.comandaId,clienteIds:zr,nomesLivres:Ur,codigoEmpresa:t?.codigo_empresa})}for(const zr of Tr){const{error:Ur}=await Ne.from("comanda_clientes").update({nome_livre:zr.nome}).eq("id",zr.id).eq("codigo_empresa",t?.codigo_empresa);if(Ur)throw console.error("[confirmChanges] Erro ao atualizar:",Ur),Ur}console.log("[confirmChanges] Operaes concludas, atualizando mesa"),await Wn(s),await vi({showToast:!1}),e({title:"Clientes atualizados",variant:"success"}),W(!1)}catch(at){console.error("[confirmChanges] Erro:",at),e({title:"Falha ao atualizar clientes",description:at?.message||"Tente novamente",variant:"destructive"})}finally{tr(!1)}};return o.jsx(cn,{open:B,onOpenChange:W,children:o.jsxs(on,{className:"sm:max-w-[480px] w-[92vw] animate-none",onOpenAutoFocus:at=>at.preventDefault(),onPointerDownOutside:at=>{at.preventDefault(),at.stopPropagation()},onInteractOutside:at=>{at.preventDefault(),at.stopPropagation()},onEscapeKeyDown:at=>at.preventDefault(),children:[o.jsxs(an,{children:[o.jsx(en,{children:"Gerenciar Clientes da Mesa"}),o.jsx(hn,{children:"Clique nos clientes para adicionar ou remover. Pode ter mltiplos clientes."})]}),o.jsxs("div",{className:"space-y-4",children:[Me.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-sm font-medium text-text-primary",children:["Clientes vinculados (",Me.length,"):"]}),o.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto thin-scroll",children:Me.map(at=>{const Dt=at.tipo==="livre",fr=Ie===at.id;return o.jsx("div",{className:kt("flex items-center gap-2 p-2 rounded-md border",Dt?"bg-amber-500/5 border-amber-500/30":"bg-success/5 border-success/30"),children:fr?o.jsxs(o.Fragment,{children:[o.jsx($t,{value:Re,onChange:er=>nt(er.target.value),onKeyDown:er=>{er.key==="Enter"&&Gt(),er.key==="Escape"&&(De(null),nt("")),er.stopPropagation()},className:"flex-1 h-8",autoFocus:!0}),o.jsx(ye,{size:"sm",onClick:Gt,className:"h-8 px-2",children:o.jsx(Cs,{className:"h-4 w-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex-1 text-sm truncate",children:[at.nome,Dt&&o.jsx("span",{className:"ml-2 text-xs text-amber-600",children:"*"})]}),Dt&&o.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>Ze(at.id),className:"h-7 px-2",children:o.jsx(Zi,{className:"h-3 w-3"})}),o.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>Ke(at.id),className:"h-7 px-2 text-destructive hover:text-destructive",children:o.jsx(Vu,{className:"h-4 w-4"})})]})},at.id)})})]}),o.jsxs(ye,{onClick:Q,variant:"outline",className:"w-full",size:"sm",children:[o.jsx(oi,{className:"h-4 w-4 mr-2"}),"Adicionar Consumidor"]}),o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar cliente cadastrado...",className:"pl-9",value:ie,onChange:at=>pe(at.target.value),onKeyDown:at=>at.stopPropagation(),onKeyUp:at=>at.stopPropagation()})]}),o.jsx("div",{className:"border rounded-md max-h-[400px] overflow-y-auto thin-scroll focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",role:"listbox","aria-label":"Clientes disponveis",ref:xe,tabIndex:0,onKeyDown:at=>{try{if(["ArrowDown","ArrowUp","Home","End","Enter"," "].includes(at.key)){if(at.preventDefault(),at.stopPropagation(),je.current=Date.now(),!Array.isArray(Be)||Be.length===0)return;let Dt=Wr||0;const fr=Be.length;if(at.key==="ArrowDown"&&(Dt=(Dt+1)%fr),at.key==="ArrowUp"&&(Dt=(Dt-1+fr)%fr),at.key==="Home"&&(Dt=0),at.key==="End"&&(Dt=fr-1),at.key==="ArrowDown"||at.key==="ArrowUp"||at.key==="Home"||at.key==="End"){Mr(Dt),setTimeout(()=>{try{_n.current[Dt]?.scrollIntoView({block:"nearest"})}catch{}},0);return}if(at.key==="Enter"||at.key===" "){const er=Be[Dt];er?.id&&Ce(er.id);return}}}catch{}},children:tt?o.jsx("div",{className:"p-4 text-center text-text-muted",children:"Carregando..."}):Be.length===0?o.jsx("div",{className:"p-4 text-center text-text-muted",children:"Nenhum cliente encontrado"}):o.jsx("ul",{className:"divide-y divide-border",children:Be.filter(at=>at.codigo!==0).map((at,Dt)=>{const fr=Me.some(Tr=>Tr.cliente_id===at.id&&Tr.tipo==="cadastrado"),er=Dt===(Wr||0);return o.jsxs("li",{ref:Tr=>{_n.current[Dt]=Tr},role:"option","aria-selected":er,className:kt("p-3 cursor-pointer transition-colors flex items-center justify-between outline-none focus:outline-none focus-visible:outline-none border border-transparent",at?.codigo===0?"bg-warning/10 border-l-4 border-warning":"",fr?"bg-success/5 hover:bg-success/10":"hover:bg-surface-2",er?"bg-brand/10 border-brand/50":""),onClick:Tr=>{Tr.preventDefault(),Tr.stopPropagation(),Ce(at.id)},onMouseEnter:()=>{Date.now()-(je.current||0)>300&&Mr(Dt)},tabIndex:-1,style:{userSelect:"none",WebkitUserSelect:"none"},children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"font-medium truncate",children:[`${at?.codigo?`${at.codigo} - `:""}${at?.nome||""}`,at?.codigo===0&&o.jsx("span",{className:"ml-2 text-xs text-warning",children:"(Padro)"})]}),at.telefone&&o.jsx("div",{className:"text-xs text-text-muted",children:at.telefone})]}),o.jsx("div",{className:"ml-3 flex-shrink-0",children:fr?o.jsx(Cs,{className:"h-5 w-5 text-success"}):o.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-border"})})]},at.id)})})})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>W(!1),disabled:tt,children:"Cancelar"}),o.jsx(ye,{onClick:Kt,disabled:tt,children:tt?"Salvando...":`Confirmar ${Lt.size>0?`(${Lt.size} alteraes)`:""}`})]})]})})},ut=()=>{const ie=Be=>Be==="available"?"bg-success/10 border-success/30 text-success":Be==="in-use"?"bg-warning/10 border-warning/30 text-warning":Be==="awaiting-payment"?"bg-info/10 border-info/30 text-info":"bg-surface-2 border-border text-text-secondary",pe=Be=>Be==="available"?"Livre":Be==="in-use"?"Ocupada":Be==="awaiting-payment"?"Aguardando":"Desconhecido";return o.jsx("div",{className:"md:hidden space-y-2",children:a.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-text-muted mb-4",children:o.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),o.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhuma mesa encontrada"}),o.jsx("p",{className:"text-text-muted mb-4",children:"Crie sua primeira mesa para comear"})]}):a.map(Be=>{const ze=Kn(Be.order||[]),Me=Be.totalHint>0?Be.totalHint:ze;return o.jsx("div",{onClick:async()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}await lr(Be),Be.status!=="available"&&At(!0)},className:kt("p-3 rounded-lg border-2 bg-surface transition-all active:scale-[0.98]",ie(Be.status),s?.id===Be.id&&"ring-2 ring-brand/60",c?"cursor-pointer":"cursor-not-allowed opacity-60"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-base truncate",children:Be.name||`Mesa ${Be.number}`}),Be.status==="available"&&Be.id===ht&&o.jsx("kbd",{className:"hidden md:inline px-2 py-1 text-xs font-bold font-mono text-gray-400 bg-transparent border border-gray-300/50 rounded flex-shrink-0",children:"F1"})]}),o.jsx("span",{className:kt("text-xs px-2 py-0.5 rounded-full border font-medium flex-shrink-0",ie(Be.status)),children:pe(Be.status)})]}),Be.status==="in-use"||Be.status==="awaiting-payment"?o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-text-secondary",children:[o.jsx(As,{className:"w-3.5 h-3.5 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:zn(Be.customer)||"Sem cliente"})]}),o.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-text-primary",children:[o.jsx(Gs,{className:"w-3.5 h-3.5 flex-shrink-0"}),o.jsxs("span",{children:["R$ ",Me.toFixed(2)]})]})]}):o.jsx("div",{className:"text-xs text-text-muted",children:"Mesa disponvel"})]}),o.jsx($j,{className:"w-5 h-5 text-text-muted flex-shrink-0 ml-2"})]})},Be.id)})})},Br=()=>s?o.jsx(cn,{open:Ct,modal:!E,onOpenChange:ie=>{!ie&&E||At(ie)},children:o.jsxs(on,{className:"sm:max-w-2xl w-[90vw] max-h-[85vh] flex flex-col p-0 gap-0 animate-none",onKeyDown:ie=>ie.stopPropagation(),children:[o.jsxs("div",{className:"p-4 border-b border-border bg-surface-2",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsx(en,{className:"text-xl font-bold",children:s.name||`Mesa ${s.number}`})}),o.jsx(hn,{className:"sr-only",children:"Visualizao da comanda e produtos da mesa selecionada"}),(s.status==="in-use"||s.status==="awaiting-payment")&&o.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(As,{className:"w-4 h-4"}),o.jsx("span",{children:zn(s.customer)||"Sem cliente"})]}),s.order&&s.order.length>0&&o.jsxs("div",{className:"flex items-center gap-1 font-semibold text-text-primary",children:[o.jsx(Gs,{className:"w-4 h-4"}),o.jsxs("span",{children:["R$ ",(s.totalHint>0?s.totalHint:Kn(s.order||[])).toFixed(2)]})]})]})]}),o.jsxs(Vd,{value:Wt,onValueChange:wt,className:"flex flex-col flex-1 min-h-0",children:[o.jsxs(Qu,{className:"grid w-full grid-cols-2 m-2 rounded-lg",children:[o.jsx(Na,{value:"order",className:"text-sm",children:"Comanda"}),o.jsx(Na,{value:"products",className:"text-sm",children:"Produtos"})]}),o.jsx(xo,{value:"order",className:"flex-1 overflow-hidden min-h-0 m-0",children:o.jsx(de,{table:s})}),o.jsx(xo,{value:"products",className:"flex-1 overflow-hidden min-h-0 m-0",children:o.jsx(yt,{})})]})]})}):null,jr=()=>{const ie=k,pe=ie&&$e.get(ie.id)||0,Be=ie?Number(ie.salePrice??ie.price??0):0,ze=Me=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(Me||0));return o.jsx(cn,{open:E,onOpenChange:Me=>{I(Me),Me||M(null)},children:o.jsxs(on,{overlayClassName:"z-[70]",className:"sm:max-w-[420px] w-[92vw] max-h-[85vh] flex flex-col animate-none z-[71]",onOpenAutoFocus:Me=>{},onKeyDown:Me=>Me.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold break-words",title:ie?.name||"",children:ie?.name||"Produto"}),o.jsx(hn,{children:"Detalhes do produto e aes rpidas."})]}),ie?o.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),o.jsx("span",{className:"text-sm font-semibold",children:ze(Be)})]}),ie.category?o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),o.jsx("span",{className:"text-sm font-medium",children:ie.category})]}):null,o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof ie.stock<"u"&&o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),o.jsx("div",{className:"text-base font-semibold",children:ie.stock})]}),typeof ie.minStock<"u"&&o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),o.jsx("div",{className:"text-base font-semibold",children:ie.minStock})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),o.jsxs("div",{className:"text-base font-semibold",children:["x",pe]})]})]})]}):null,o.jsxs($n,{className:"flex items-center justify-between gap-2",children:[o.jsxs(ye,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{ie&&n("/produtos",{state:{productId:ie.id,productName:ie.name}})},children:[o.jsx(uc,{className:"w-4 h-4"}),o.jsx("span",{children:"Info"})]}),o.jsx(ye,{variant:"outline",onClick:()=>{I(!1),M(null)},children:"Fechar"}),o.jsx(ye,{onClick:async()=>{ie&&(await xt(ie),I(!1),M(null))},children:"Adicionar"})]})]})})};return o.jsxs(o.Fragment,{children:[o.jsx(jr,{}),o.jsx(Bt,{}),o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-6 gap-2 md:gap-4 flex-wrap",children:[o.jsx("div",{className:"w-full md:w-auto flex items-center gap-2 md:gap-3",children:o.jsx(Vd,{value:"mesas",className:"w-full md:w-auto flex-1",onValueChange:ie=>{ie==="mesas"&&n("/vendas"),ie==="balcao"&&n("/balcao"),ie==="historico"&&n("/historico")},children:o.jsxs(Qu,{className:"!grid w-full grid-cols-3",children:[o.jsx(Na,{value:"mesas",className:"text-xs sm:text-sm",title:"Pressione B para alternar",children:"Mesas"}),o.jsx(Na,{value:"balcao",className:"text-xs sm:text-sm",title:"Pressione B para alternar",children:"Balco"}),o.jsx(Na,{value:"historico",className:"text-xs sm:text-sm",title:"Pressione H para ir ao histrico",children:"Histrico"})]})})}),o.jsxs("div",{className:"w-full md:w-auto flex items-center gap-1.5 md:gap-3 md:ml-auto justify-end mt-1 md:mt-0",children:[o.jsx(rn,{}),o.jsx(na,{}),o.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"px-3",children:[o.jsx(xW,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2 md:hidden",children:"Detalhes"}),o.jsx("span",{className:"ml-2 hidden md:inline",children:"Detalhes do Caixa"}),o.jsx("kbd",{className:"ml-2 hidden md:inline px-2 py-1 text-xs font-bold font-mono text-gray-400 bg-transparent border border-gray-300/50 rounded",children:"F11"})]}),o.jsx("div",{className:"hidden md:block w-px h-6 bg-border mx-1"}),o.jsxs(ye,{onClick:()=>J(!0),className:"hidden md:flex",size:"sm",children:[o.jsx(oi,{className:"mr-2 h-4 w-4"})," Nova Mesa"]})]})]}),!c&&d>0&&o.jsxs("div",{className:"md:hidden mb-3 text-[11px] text-warning flex items-center gap-2",children:[o.jsx(au,{className:"h-3 w-3"}),"H comandas abertas, mas o caixa parece fechado.",o.jsx(ye,{size:"sm",variant:"outline",className:"h-6 px-2 text-[11px]",onClick:()=>ft(!0),children:"Reabrir sesso"})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden min-h-0",children:[o.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-lg border border-border p-4 md:p-6 overflow-y-auto thin-scroll min-h-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Mapa de Mesas"}),o.jsx(ye,{type:"button",className:"md:hidden h-9 w-9 p-0 bg-amber-400 text-black hover:bg-amber-300",size:"icon",title:"Nova Mesa",onClick:()=>J(!0),children:o.jsx(oi,{className:"h-5 w-5"})})]}),o.jsx(ut,{}),o.jsx("div",{className:"hidden md:block",children:o.jsx(eQe,{onDragEnd:Va,children:o.jsx(Kre,{droppableId:"tables",children:ie=>o.jsxs("div",{...ie.droppableProps,ref:pe=>{ie.innerRef(pe),it.current=pe},role:"grid","aria-label":"Lista de mesas",className:"grid gap-5 grid-cols-[repeat(auto-fit,minmax(240px,1fr))]",children:[a.length===0?o.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-text-muted mb-4",children:o.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),o.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhuma mesa encontrada"}),o.jsx("p",{className:"text-text-muted mb-4",children:"Crie sua primeira mesa para comear a receber pedidos"}),o.jsxs(ye,{onClick:()=>J(!0),className:"flex items-center gap-2",children:[o.jsx(oi,{size:16}),"Criar Nova Mesa"]})]}):a.map((pe,Be)=>o.jsx(LQe,{draggableId:pe.id,index:Be,children:(ze,Me)=>o.jsx(ei,{table:pe,provided:ze,isDragging:Me.isDragging})},pe.id)),ie.placeholder]})})})})]}),o.jsx("div",{className:"hidden md:flex bg-surface rounded-lg border border-border flex-col min-h-0",children:o.jsxs(Vd,{value:j,onValueChange:N,className:"flex flex-col h-full",children:[o.jsxs(Qu,{className:"grid w-full grid-cols-2 m-2",children:[o.jsx(Na,{value:"order",children:"Comanda"}),o.jsx(Na,{value:"products",children:"Produtos"})]}),o.jsx(xo,{value:"order",className:"flex-1 overflow-hidden min-h-0",children:o.jsx(de,{table:s})}),o.jsx(xo,{value:"products",className:"flex-1 overflow-hidden min-h-0",children:o.jsx(yt,{})})]})})]})]}),o.jsx(Br,{}),o.jsx(Er,{}),o.jsx(wa,{open:g,onOpenChange:p,cashSummary:P}),o.jsx(xi,{}),o.jsx(Jr,{}),o.jsx(Xr,{}),o.jsx(pt,{}),Ae&&o.jsx("div",{className:"fixed left-3 right-3 z-[9999]",role:"alert","aria-live":"assertive",style:{bottom:"calc(12px + env(safe-area-inset-bottom, 0px))"},children:o.jsxs("div",{className:"pointer-events-none flex items-start gap-2 rounded-md border border-amber-500 bg-amber-400 text-black px-3 py-2 shadow-lg",children:[o.jsx(au,{className:"h-4 w-4 mt-0.5","aria-hidden":"true"}),o.jsx("div",{className:"text-sm font-semibold leading-snug drop-shadow-[0_1px_0_rgba(255,255,255,0.25)]",children:Ot||"Ateno"})]})})]})}function YQe(){const{toast:e}=Qa(),t=wc(),{userProfile:r}=Wi(),[n,a]=v.useState(null),[i,s]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState(!0),[f,h]=v.useState(""),[m,g]=v.useState(""),[p,x]=v.useState(null),[y,b]=v.useState(null),[w,_]=v.useState(!1),j=v.useRef(!1),[N,P]=v.useState(!1),[A,k]=v.useState(!1),[M,E]=v.useState(!1),[I,O]=v.useState(!1),[R,B]=v.useState(null),[W,F]=v.useState(!1),[$,H]=v.useState([]);v.useState(null);const[ce,oe]=v.useState(!1),[L,U]=v.useState([]),[J,V]=v.useState(1),[Z,K]=v.useState([]),[he,te]=v.useState(null),[me,Ee]=v.useState(!1),[Se,We]=v.useState(null),[be,ne]=v.useState(!1),[Qt,bt]=v.useState(""),[Pt,Qe]=v.useState(!1),[ft,mt]=v.useState(""),[_t,ue]=v.useState(()=>{try{return typeof window<"u"&&window.innerWidth<=640}catch{return!1}});v.useEffect(()=>{const de=()=>{try{ue(typeof window<"u"&&window.innerWidth<=640)}catch{ue(!1)}};return de(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]),v.useState("cadastrado");const[Ct,At]=v.useState(""),[Wt,wt]=v.useState([]),[Ae,qe]=v.useState([]);v.useState(!1),v.useState(!1);const[Ot,Y]=v.useState(!1),[ve,Ve]=v.useState(!1),$e=v.useRef(0),Le=v.useRef([]);v.useEffect(()=>{Le.current=l},[l]);const it=v.useRef(!1);v.useEffect(()=>(it.current=!0,()=>{it.current=!1}),[]),v.useEffect(()=>{(l||[]).length>0&&(j.current=!0)},[l]),v.useEffect(()=>{n&&j.current&&(l||[]).length===0&&zn(n,2)},[n,l?.length]),v.useEffect(()=>{let de=!0;return(async()=>{try{const pt=await Qf({codigoEmpresa:r?.codigo_empresa});de&&P(!!pt)}catch{de&&P(!1)}})(),()=>{de=!1}},[r?.codigo_empresa]);const Ye=async()=>{const de=r?.codigo_empresa||null;try{if(!de)return;O(!0);const[pt,xt]=await Promise.all([kb({codigoEmpresa:de}).catch(()=>null),Qf({codigoEmpresa:de}).catch(()=>null)]);if(!xt?.id){B(null);return}let yt=0,ot=0,St=[];try{St=await Ym({caixaSessaoId:xt.id,codigoEmpresa:de}),yt=(St||[]).filter(Ut=>String(Ut?.tipo||"").toLowerCase()==="sangria").reduce((Ut,nr)=>Ut+Number(nr?.valor||0),0),ot=(St||[]).filter(Ut=>String(Ut?.tipo||"").toLowerCase()==="suprimento").reduce((Ut,nr)=>Ut+Number(nr?.valor||0),0)}catch{}const Ht={saldo_inicial:xt.saldo_inicial||0,totalPorFinalizadora:pt?.totalPorFinalizadora||pt?.porFinalizadora||{},totalEntradas:pt?.totalEntradas||pt?.entradas||0,totalSangria:yt,totalSuprimento:ot,totalSaidas:yt,sessaoId:xt.id,movimentacoes:St};B(Ht)}catch{B(null)}finally{O(!1)}};v.useEffect(()=>{let de=!0;return(async()=>{try{if(!W||!n)return;const xt=r?.codigo_empresa;let yt=[];try{const Ht=await os({comandaId:n,codigoEmpresa:xt});yt=(Array.isArray(Ht)?Ht:[]).map(nr=>{const ur=nr?.clientes?.id??nr?.cliente_id??nr?.id??null,mr=nr?.clientes?.nome??nr?.nome??nr?.nome_livre??"";return ur?{id:ur,nome:mr}:null}).filter(Boolean)}catch{yt=[]}if(!de)return;K(yt);const St=Array.isArray(Ae)&&Ae.length>0?Ae:yt.map(Ht=>Ht.id);if(!Array.isArray(St)||St.length===0)return;U(Ht=>{let Ut=Ht&&Ht.length?[...Ht]:[{id:1,clientId:St[0],methodId:$[0]?.id||"",value:""}];Ut[0]||(Ut[0]={id:1,clientId:St[0],methodId:$[0]?.id||"",value:""}),Ut[0].clientId=St[0];const nr=new Set([Ut[0].clientId].filter(Boolean));for(let ur=1;ur<Ut.length;ur++){if(!Ut[ur].clientId||nr.has(Ut[ur].clientId)){const mr=(St||[]).find(Ar=>!nr.has(Ar));Ut[ur].clientId=mr||St[0]}nr.add(Ut[ur].clientId)}return Ut})}catch{}})(),()=>{de=!1}},[W,Ae,n,r?.codigo_empresa]);const Ge=de=>{const pt=String(de||"").replace(/\D/g,"");return pt?Number(pt)/100:0},Xe=de=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(de),ht=de=>($||[]).find(pt=>String(pt.id)===String(de)),st=de=>Number(ht(de.methodId)?.taxa_percentual||0),lr=de=>{const pt=Ge(de.value),xt=st(de);return!de.chargeFee||!xt?pt:pt/(1+xt/100)},rr=de=>{const pt=lr(de),xt=st(de);return!de.chargeFee||!xt||pt<=0?0:pt*(xt/100)},Zt=(de,pt)=>{const xt=st(de);if(de.chargeFee&&xt>0){const yt=pt*(1+xt/100);return{...de,value:Xe(yt)}}return{...de,value:Xe(pt)}},fn=()=>(L||[]).reduce((de,pt)=>de+lr(pt),0),Yr=()=>(L||[]).reduce((de,pt)=>de+rr(pt),0),Bn=()=>fn()+Yr();v.useEffect(()=>{try{if(!W)return;let de=0;try{de=(l||[]).reduce((yt,ot)=>yt+Number(ot.quantity||0)*Number(ot.price||0),0)}catch{}const pt=fn(),xt=de-pt;Math.abs(xt)>.009&&Math.abs(xt)<=.05&&Array.isArray(L)&&L.length>0&&U(yt=>yt.map((ot,St,Ht)=>{if(St!==Ht.length-1)return ot;const Ut=lr(ot)+xt;return Zt(ot,Ut)}))}catch{}},[L,W]);const hr=async()=>{try{if(!n){e({title:"Nenhuma comanda aberta",description:"Adicione itens para abrir uma comanda.",variant:"warning"});return}const de=r?.codigo_empresa;if(!de){e({title:"Empresa no definida",variant:"destructive"});return}if(!Array.isArray(L)||L.length===0){e({title:"Informe os pagamentos",description:"Adicione pelo menos uma forma de pagamento.",variant:"warning"});return}for(const ot of L){if(!ot.methodId){e({title:"Forma de pagamento faltando",description:"Selecione a finalizadora em todas as linhas.",variant:"warning"});return}if(!String(ot.value||"").replace(/\D/g,"")){e({title:"Valor invlido",description:"Informe valores maiores que zero.",variant:"warning"});return}}let pt=0;try{pt=(await Fi({comandaId:n,codigoEmpresa:de})||[]).reduce((St,Ht)=>St+Number(Ht.quantidade||0)*Number(Ht.preco_unitario||0),0)}catch{}const xt=fn(),yt=Math.abs(xt-pt);if(yt>.009&&yt<=.05){const ot=pt-xt;U(St=>St.map((Ht,Ut,nr)=>{if(Ut!==nr.length-1)return Ht;const ur=lr(Ht)+ot;return Zt(Ht,ur)}))}else if(yt>.05){const ot=pt-xt;ot>0?e({title:"Valor insuficiente",description:`Faltam R$ ${ot.toFixed(2)} para fechar o total.`,variant:"warning"}):e({title:"Valor excedente",description:`Excedeu em R$ ${Math.abs(ot).toFixed(2)}. Ajuste os valores.`,variant:"warning"});return}oe(!0),await kd({codigoEmpresa:de});for(const ot of L){const St=Ge(ot.value),Ht=$.find(nr=>String(nr.id)===String(ot.methodId)),Ut=Ht?.nome||Ht?.tipo||"outros";await vT({comandaId:n,finalizadoraId:ot.methodId,metodo:Ut,valor:St,status:"Pago",codigoEmpresa:de,clienteId:ot.clientId||null})}await Xm({comandaId:n,codigoEmpresa:de}),a(null),c([]),qe([]),h(""),Ve(!1),U([]);try{localStorage.removeItem(Cr.comandaId),localStorage.removeItem(Cr.items),localStorage.removeItem(Cr.customerName)}catch{}e({title:"Pagamento concludo",description:`Total R$ ${pt.toFixed(2)}`,variant:"success"}),F(!1)}catch(de){e({title:"Falha ao concluir",description:de?.message||"Tente novamente",variant:"destructive"})}finally{oe(!1)}};v.useEffect(()=>{(async()=>{try{if(!A)return;await Ye()}catch{}})()},[A,r?.codigo_empresa]);const qr=()=>{const[de,pt]=v.useState(""),xt=v.useRef(null);return v.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<=640)return;const ot=setTimeout(()=>{try{xt.current?.focus()}catch{}},0);return()=>clearTimeout(ot)},[]),o.jsxs(o.Fragment,{children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Abrir Caixa"}),o.jsx(Jc,{children:"Insira o valor inicial (suprimento) para abrir o caixa."})]}),o.jsxs("div",{className:"py-4",children:[o.jsx(vt,{className:"mb-2 block",htmlFor:"open-cash-initial",children:"Saldo inicial"}),o.jsx($t,{id:"open-cash-initial",ref:xt,type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:de,onChange:yt=>{const ot=(yt.target.value||"").replace(/\D/g,""),St=ot?Number(ot)/100:0,Ht=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(St);pt(Ht)},onKeyDown:yt=>{yt.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(yt.key)&&(/^[0-9]$/.test(yt.key)||yt.preventDefault())},onBeforeInput:yt=>{const ot=yt.data??"";ot&&/\D/.test(ot)&&yt.preventDefault()}}),o.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Digite nmeros; a mscara formata em reais automaticamente."})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{onClick:()=>E(!1),children:"Cancelar"}),o.jsx(Du,{onClick:async()=>{try{const yt=String(de||"").replace(/\D/g,""),ot=yt?Number(yt)/100:0;await kd({saldoInicial:ot,codigoEmpresa:r?.codigo_empresa}),P(!0),E(!1),e({title:"Caixa aberto com sucesso!",variant:"success"})}catch(yt){e({title:"Falha ao abrir caixa",description:yt?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Abertura"})]})]})},ya=()=>o.jsxs(Iu,{open:M,onOpenChange:E,children:[o.jsx(Lm,{asChild:!0,children:o.jsxs(ye,{variant:"success",disabled:N,onClick:()=>E(!0),className:"h-9 rounded-md px-3 sm:h-10",children:[o.jsx(SW,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2 md:hidden",children:"Abrir"}),o.jsx("span",{className:"ml-2 hidden md:inline",children:"Abrir Caixa"})]})}),o.jsx(Gc,{className:"sm:max-w-[425px] w-[92vw] animate-none",onKeyDown:de=>de.stopPropagation(),onPointerDownOutside:de=>{de.preventDefault(),de.stopPropagation()},onInteractOutside:de=>{de.preventDefault(),de.stopPropagation()},children:o.jsx(qr,{})})]}),ui=()=>{const[de,pt]=v.useState({loading:!1,saldoInicial:0,resumo:null}),[xt,yt]=v.useState(!1),[ot,St]=v.useState(""),[Ht,Ut]=v.useState(!1),nr=async()=>{try{pt({loading:!0,saldoInicial:0,resumo:null});const _r=await Qf({codigoEmpresa:r?.codigo_empresa}),Mn=await kb({codigoEmpresa:r?.codigo_empresa});pt({loading:!1,saldoInicial:Number(_r?.saldo_inicial||0),resumo:Mn||{totalPorFinalizadora:{}}})}catch{pt({loading:!1,saldoInicial:0,resumo:{totalPorFinalizadora:{}}})}},ur=de?.resumo?.totalPorFinalizadora||{},mr=Object.values(ur).reduce((_r,Mn)=>_r+Number(Mn||0),0),Ar=Number(de.saldoInicial||0)+mr,Nn=Number(R?.totalSuprimento||0),yn=Number(R?.totalSangria||0);return o.jsxs(Iu,{onOpenChange:_r=>{_r&&(Ut(!1),nr())},children:[o.jsx(Lm,{asChild:!0,children:o.jsxs(ye,{variant:"destructive",disabled:!N,onClick:nr,className:"h-9 rounded-md px-3 sm:h-10",children:[o.jsx(yv,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2",children:"Fechar Caixa"})]})}),o.jsxs(Gc,{className:"sm:max-w-[425px] animate-none",onKeyDown:_r=>_r.stopPropagation(),onPointerDownOutside:_r=>{_r.preventDefault(),_r.stopPropagation()},onInteractOutside:_r=>{_r.preventDefault(),_r.stopPropagation()},children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Fechar Caixa"}),o.jsx(Jc,{children:"Confira os valores e confirme o fechamento do caixa. Esta ao  irreversvel."})]}),xt&&o.jsxs("div",{className:"md:hidden mb-2 text-[12px] text-warning bg-warning/10 border border-warning/30 rounded px-2 py-1 flex items-center gap-1",children:[o.jsx(au,{className:"h-3.5 w-3.5"}),"Existem comandas abertas. Finalize-as antes de fechar o caixa."]}),de.loading?o.jsx("div",{className:"py-4 text-text-muted",children:"Carregando resumo"}):o.jsx("div",{className:"py-4 space-y-2",children:Ht?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Valor Inicial"})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",Number(de.saldoInicial||0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Valor Final"})," ",o.jsx("span",{className:"font-mono",children:(()=>{const _r=String(ot||"").replace(/\D/g,""),Mn=_r?Number(_r)/100:0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Mn)})()})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx(vt,{className:"mb-1 block",children:"Saldo Final (opcional)"}),o.jsx($t,{type:"text",inputMode:"numeric",placeholder:"0,00",value:ot,onChange:_r=>{const Mn=(_r.target.value||"").replace(/\D/g,""),Sa=Mn?Number(Mn)/100:0,ja=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Sa);St(ja)},onKeyDown:_r=>{_r.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(_r.key)&&(/^[0-9]$/.test(_r.key)||_r.preventDefault())},onBeforeInput:_r=>{const Mn=_r.data??"";Mn&&/\D/.test(Mn)&&_r.preventDefault()}})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs font-medium text-text-muted uppercase tracking-wide mb-1",children:"Resumo"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Valor Inicial"})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",Number(de.saldoInicial||0).toFixed(2)]})]}),Object.keys(ur).length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos nesta sesso."}):o.jsx("div",{className:"space-y-1",children:Object.entries(ur).map(([_r,Mn])=>o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:String(_r)})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",Number(Mn||0).toFixed(2)]})]},_r))}),o.jsx("div",{className:"my-2 h-px bg-border"}),o.jsx("div",{className:"text-xs font-medium text-text-muted uppercase tracking-wide mb-1",children:"Conferncia"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Suprimentos"})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",Nn.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Sangrias"})," ",o.jsxs("span",{className:"font-mono",children:["R$ ",yn.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between font-medium text-base",children:[o.jsx("span",{className:"text-text-secondary",children:"Total em Caixa"})," ",o.jsxs("span",{className:"font-mono text-success",children:["R$ ",Number(Ar||0).toFixed(2)]})]})]})}),o.jsx(Yc,{children:Ht?o.jsxs(o.Fragment,{children:[o.jsx(ye,{variant:"outline",onClick:()=>Ut(!1),children:"Voltar"}),o.jsx(ye,{onClick:async()=>{try{try{const Sa=await sc({codigoEmpresa:r?.codigo_empresa});if(Array.isArray(Sa)&&Sa.length>0){_t?(yt(!0),e({title:"Fechamento bloqueado",description:`Existem ${Sa.length} comandas abertas. Feche todas antes de encerrar o caixa.`,variant:"warning"})):e({title:"Fechamento bloqueado",description:`Existem ${Sa.length} comandas abertas. Feche todas antes de encerrar o caixa.`,variant:"warning",duration:2500});return}}catch{}const _r=String(ot||"").replace(/\D/g,""),Mn=_r?Number(_r)/100:0;await ite({codigoEmpresa:r?.codigo_empresa,valorFinalDinheiro:Mn}),P(!1),e({title:"Caixa fechado!",description:"Fechamento registrado com sucesso.",variant:"success"})}catch(_r){e({title:"Falha ao fechar caixa",description:_r?.message||"Tente novamente",variant:"destructive"})}},children:"Fechar Caixa"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Qc,{children:"Cancelar"}),o.jsx(ye,{onClick:()=>Ut(!0),children:"Confirmar Fechamento"})]})})]})]})},Va=()=>{const de=G=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(G||0)),[pt,xt]=v.useState(!1),[yt,ot]=v.useState(!1),[St,Ht]=v.useState(""),[Ut,nr]=v.useState(""),[ur,mr]=v.useState(!1),Ar=async()=>{try{mr(!0);const G=String(St||"").replace(/\D/g,""),Te=G?Number(G)/100:0;if(Te<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await kd({codigoEmpresa:r?.codigo_empresa}),await pT({tipo:"sangria",valor:Te,observacao:Ut,codigoEmpresa:r?.codigo_empresa}),xt(!1),Ht(""),nr(""),await Ye(),e({title:"Sangria registrada",variant:"success"})}catch(G){e({title:"Falha ao registrar sangria",description:G?.message||"Tente novamente",variant:"destructive"})}finally{mr(!1)}},[Nn,yn]=v.useState(""),[_r,Mn]=v.useState(""),[Sa,ja]=v.useState(!1),Mi=async()=>{try{ja(!0);const G=String(Nn||"").replace(/\D/g,""),Te=G?Number(G)/100:0;if(Te<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await kd({codigoEmpresa:r?.codigo_empresa}),await pT({tipo:"suprimento",valor:Te,observacao:_r,codigoEmpresa:r?.codigo_empresa}),ot(!1),yn(""),Mn(""),await Ye(),e({title:"Suprimento registrado",variant:"success"})}catch(G){e({title:"Falha ao registrar suprimento",description:G?.message||"Tente novamente",variant:"destructive"})}finally{ja(!1)}};return o.jsx(cn,{open:A,onOpenChange:k,children:o.jsxs(on,{className:"sm:max-w-lg w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:G=>G.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),o.jsx(hn,{children:I?"Carregando resumo...":R?"Resumo da sesso atual do caixa.":"Nenhuma sesso de caixa aberta."})]}),R?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[o.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Saldo Inicial"}),o.jsx("div",{className:"text-base md:text-lg font-bold tabular-nums leading-tight",children:de(R.saldo_inicial)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[o.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Entradas"}),o.jsx("div",{className:"text-base md:text-lg font-bold text-success tabular-nums leading-tight",children:de(R.totalEntradas)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[o.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Sadas"}),o.jsx("div",{className:"text-base md:text-lg font-bold text-danger tabular-nums leading-tight",children:de(R.totalSangria)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[o.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Saldo Atual"}),o.jsx("div",{className:"text-base md:text-lg font-bold tabular-nums leading-tight",children:de((R.saldo_inicial||0)+(R.totalEntradas||0)-(R.totalSangria||0))})]})]}),o.jsxs("div",{className:"mt-5",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h4",{className:"text-sm font-semibold text-text-secondary",children:"Totais por Finalizadora"})}),Object.keys(R.totalPorFinalizadora||{}).length===0?o.jsx("div",{className:"p-3 text-sm text-text-muted border rounded-md",children:"Nenhuma finalizadora registrada ainda."}):o.jsx("ul",{className:"rounded-md border border-border overflow-hidden divide-y divide-border",children:Object.entries(R.totalPorFinalizadora||{}).map(([G,Te])=>o.jsxs("li",{className:"bg-surface px-3 py-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:String(G)}),o.jsx("span",{className:"text-sm font-semibold tabular-nums",children:de(Te)})]},G))}),o.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Suprimentos"}),o.jsx("span",{className:"text-sm font-semibold tabular-nums text-success",children:de(R.totalSuprimento||0)})]}),o.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Sangrias"}),o.jsx("span",{className:"text-sm font-semibold tabular-nums text-danger",children:de(R.totalSangria||0)})]})]})]}),o.jsxs($n,{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"mr-auto"}),o.jsx(ye,{variant:"outline",onClick:()=>ot(!0),children:"Registrar Suprimento"}),o.jsx(ye,{variant:"destructive",onClick:()=>xt(!0),children:"Registrar Sangria"}),o.jsx(ye,{variant:"secondary",onClick:()=>k(!1),children:"Fechar"})]}),o.jsx(cn,{open:yt,onOpenChange:ot,children:o.jsxs(on,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:G=>G.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold",children:"Registrar Suprimento"}),o.jsx(hn,{children:"Informe o valor de entrada no caixa e, opcionalmente, uma observao."})]}),o.jsxs("div",{className:"flex-1 flex flex-col space-y-3",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"r-valor",children:"Valor"}),o.jsx($t,{id:"r-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:Nn,onChange:G=>{const Te=(G.target.value||"").replace(/\D/g,""),Je=Te?Number(Te)/100:0,Xt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Je);yn(Xt)},onKeyDown:G=>{G.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(G.key)&&(/^[0-9]$/.test(G.key)||G.preventDefault())},onBeforeInput:G=>{const Te=G.data??"";Te&&/\D/.test(Te)&&G.preventDefault()}})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"r-obs",children:"Observao"}),o.jsx($t,{id:"r-obs",placeholder:"Opcional",value:_r,onChange:G=>Mn(G.target.value)})]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>ot(!1),disabled:Sa,children:"Cancelar"}),o.jsx(ye,{onClick:Mi,disabled:Sa,children:Sa?"Registrando...":"Confirmar"})]})]})}),o.jsx(cn,{open:pt,onOpenChange:xt,children:o.jsxs(on,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:G=>G.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold",children:"Registrar Sangria"}),o.jsx(hn,{children:"Informe o valor a retirar do caixa e, opcionalmente, uma observao."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"s-valor",children:"Valor"}),o.jsx($t,{id:"s-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:St,onChange:G=>{const Te=(G.target.value||"").replace(/\D/g,""),Je=Te?Number(Te)/100:0,Xt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Je);Ht(Xt)},onKeyDown:G=>{G.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(G.key)&&(/^[0-9]$/.test(G.key)||G.preventDefault())},onBeforeInput:G=>{const Te=G.data??"";Te&&/\D/.test(Te)&&G.preventDefault()}})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"s-obs",children:"Observao"}),o.jsx($t,{id:"s-obs",placeholder:"Opcional",value:Ut,onChange:G=>nr(G.target.value)})]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>xt(!1),disabled:ur,children:"Cancelar"}),o.jsx(ye,{onClick:Ar,disabled:ur,children:ur?"Registrando...":"Confirmar"})]})]})})]}):o.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma sesso de caixa aberta."})]})})},Kn=r?.codigo_empresa||"anon",Cr={comandaId:`balcao:comandaId:${Kn}`,items:`balcao:items:${Kn}`,customerName:`balcao:customer:${Kn}`,clientChosen:`balcao:clientChosen:${Kn}`,pendingClientIds:`balcao:pendingClientIds:${Kn}`,missCount:`balcao:missCount:${Kn}`,lastMissTs:`balcao:lastMissTs:${Kn}`},zn=async(de,pt=3)=>{if(!de)return;const xt=r?.codigo_empresa,yt=++$e.current;for(let ot=0;ot<pt;ot++)try{const St=await Fi({comandaId:de,codigoEmpresa:xt});if(yt!==$e.current)return;const Ht=(St||[]).map(Ut=>({id:Ut.id,productId:Ut.produto_id,name:Ut.descricao||"Item",price:Number(Ut.preco_unitario||0),quantity:Number(Ut.quantidade||1)}));Ht.length===0&&(Le.current||[]).length>0||c(Ht);try{const Ut=await os({comandaId:de,codigoEmpresa:xt});if(yt!==$e.current)return;const nr=(Ut||[]).map(mr=>mr?.nome).filter(Boolean),ur=nr.length?nr.join(", "):"";h(ur),Ve(!!ur)}catch{h(""),Ve(!1)}break}catch(St){if(ot===pt-1)e({title:"Falha ao atualizar itens",description:St?.message||"Tente novamente",variant:"destructive"});else{const Ht=350*(ot+1),Ut=Math.floor(Math.random()*120);await new Promise(nr=>setTimeout(nr,Ht+Ut))}}},Wn=async()=>{try{d(!0);let de=setTimeout(()=>{it.current&&d(!1)},1e4);const pt=r?.codigo_empresa;if(!pt){it.current&&d(!1);return}try{const St=localStorage.getItem(Cr.comandaId),Ht=JSON.parse(localStorage.getItem(Cr.items)||"[]"),Ut=localStorage.getItem(Cr.customerName)||"",nr=localStorage.getItem(Cr.clientChosen),ur=JSON.parse(localStorage.getItem(Cr.pendingClientIds)||"[]");St&&a(Number.isNaN(+St)?St:Number(St)),Array.isArray(Ht)&&Ht.length>0&&c(Ht),Ut&&h(Ut),nr==="true"&&Ve(!0),Array.isArray(ur)&&ur.length>0&&qe(ur)}catch{}const xt=localStorage.getItem(Cr.comandaId),yt=xt?Number.isNaN(+xt)?xt:Number(xt):null,ot=await ate({codigoEmpresa:pt}).catch(()=>null);if(ot?.id)a(ot.id),await zn(ot.id);else if(yt)a(yt),await zn(yt,3);else{let St=0,Ht=0;try{St=Number(localStorage.getItem(Cr.missCount)||"0"),Ht=Number(localStorage.getItem(Cr.lastMissTs)||"0")}catch{}const Ut=Date.now(),ur=Ut-Ht<9e4?St+1:1;try{localStorage.setItem(Cr.missCount,String(ur)),localStorage.setItem(Cr.lastMissTs,String(Ut))}catch{}try{const mr=localStorage.getItem(Cr.customerName)||"",Ar=localStorage.getItem(Cr.clientChosen)==="true",Nn=JSON.parse(localStorage.getItem(Cr.pendingClientIds)||"[]");h(mr||""),Ve(!!Ar),qe(Array.isArray(Nn)?Nn:[])}catch{}if(a(null),ur>=2){c([]);try{localStorage.removeItem(Cr.comandaId),localStorage.removeItem(Cr.items)}catch{}}else try{const mr=JSON.parse(localStorage.getItem(Cr.items)||"[]");Array.isArray(mr)&&mr.length>0&&c(mr)}catch{}}try{const St=await Sp({includeInactive:!1,search:m?.trim()||void 0,codigoEmpresa:pt});it.current&&s(St||[])}catch{s([])}clearTimeout(de)}catch(de){e({title:"Falha ao carregar Modo Balco",description:de?.message||"Tente novamente",variant:"destructive"})}finally{it.current&&d(!1)}},vi=async()=>{try{_(!0);const de=r?.codigo_empresa;if(n&&de)try{try{await Ne.from("comanda_itens").delete().eq("comanda_id",n).eq("codigo_empresa",de)}catch{}try{await Ne.from("comanda_clientes").delete().eq("comanda_id",n).eq("codigo_empresa",de)}catch{}await Ne.from("comandas").update({status:"canceled"}).eq("id",n).eq("codigo_empresa",de)}catch{}}finally{a(null),c([]),qe([]),h(""),Ve(!1),b(null);try{localStorage.removeItem(Cr.comandaId),localStorage.removeItem(Cr.items),localStorage.removeItem(Cr.customerName)}catch{}_(!1),e({title:"Venda cancelada",variant:"success"})}};v.useEffect(()=>{let de=!1;(async()=>{await Wn(),!de&&it.current&&!n&&(Le.current||[]).length===0&&(de=!0,setTimeout(()=>{it.current&&Wn()},700))})()},[r?.codigo_empresa]),v.useEffect(()=>{try{n&&localStorage.setItem(Cr.comandaId,String(n)),localStorage.setItem(Cr.items,JSON.stringify(l||[])),localStorage.setItem(Cr.customerName,f||""),localStorage.setItem(Cr.clientChosen,ve?"true":"false"),n?localStorage.removeItem(Cr.pendingClientIds):localStorage.setItem(Cr.pendingClientIds,JSON.stringify(Ae||[]))}catch{}},[n,l,f,ve,Ae]),v.useEffect(()=>{const de=()=>{n&&zn(n,2)},pt=()=>{document.visibilityState==="visible"&&n&&zn(n,2)};return window.addEventListener("focus",de),document.addEventListener("visibilitychange",pt),()=>{window.removeEventListener("focus",de),document.removeEventListener("visibilitychange",pt)}},[n]),v.useEffect(()=>{let de=!0;const pt=setTimeout(async()=>{try{const xt=await Sp({includeInactive:!1,search:m?.trim()||void 0,codigoEmpresa:r?.codigo_empresa});if(!de)return;let yt=xt||[];if(m?.trim()){const ot=m.trim().toLowerCase();yt=yt.filter(St=>(St.name||"").toLowerCase().includes(ot)||(St.code||"").toLowerCase().includes(ot))}yt.sort((ot,St)=>{const Ht=ot.code||"",Ut=St.code||"";return/^\d+$/.test(Ht)&&/^\d+$/.test(Ut)?parseInt(Ht,10)-parseInt(Ut,10):Ht.localeCompare(Ut)}),s(yt)}catch{de&&s([])}},300);return()=>{de=!1,clearTimeout(pt)}},[m]),v.useEffect(()=>{let de=!0;const pt=setTimeout(async()=>{try{const xt=await B2({searchTerm:Ct,limit:20,codigoEmpresa:r?.codigo_empresa});if(!de)return;const yt=(xt||[]).slice().sort((ot,St)=>Number(ot?.codigo||0)-Number(St?.codigo||0));if(wt(yt),Ot&&(!Ae||Ae.length===0)){const ot=yt?.find(St=>St?.codigo===0);if(ot){qe([ot.id]);try{localStorage.setItem(Cr.pendingClientIds,JSON.stringify([ot.id]))}catch{}}}}catch{de&&wt([])}},250);return()=>{de=!1,clearTimeout(pt)}},[Ct,Ot]);const ei=v.useMemo(()=>l.reduce((de,pt)=>de+Number(pt.price||0)*Number(pt.quantity||0),0),[l]),ba=v.useMemo(()=>{const de=new Map;for(const pt of l||[]){const xt=pt.productId;if(!xt)continue;const yt=Number(pt.quantity||0);de.set(xt,(de.get(xt)||0)+yt)}return de},[l]),wa=async(de,pt={})=>{try{if(!N){e({title:"Caixa Fechado",description:"Abra o caixa antes de iniciar uma venda.",variant:"warning"});return}if(!ve&&!pt.skipClientCheck){b(de),Y(!0),e({title:"Selecione o cliente",description:"Escolha um cliente cadastrado antes de vender.",variant:"warning"});return}const xt=r?.codigo_empresa;if(!xt){e({title:"Empresa no definida",description:"Faa login novamente.",variant:"destructive"});return}if(p)return;const yt=Number(de.stock??de.currentStock??0),ot=Number(de.minStock??0);if(yt<=0){e({title:"Sem estoque",description:`Produto "${de.name}" est com estoque zerado.`,variant:"destructive"});return}x(de.id);let St=n;const Ht=!St;if(!St)try{const ur=await Q7({codigoEmpresa:xt});St=ur.id,a(ur.id)}catch(ur){if(ur?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para vender",description:"Voc precisa abrir o caixa antes de iniciar uma comanda no Balco.",variant:"warning"});return}throw ur}const Ut=Number(de.salePrice??de.price??0),nr=(Le.current||[]).find(ur=>ur.productId===de.id);if(nr?await Mu({itemId:nr.id,quantidade:Number(nr.quantity||0)+1,codigoEmpresa:xt}):await gT({comandaId:St,produtoId:de.id,descricao:de.name,quantidade:1,precoUnitario:Ut,codigoEmpresa:xt}),await zn(St),Ht)try{const ur=Array.from(new Set(Ae||[]));if(ur.length>0){await ay({comandaId:St,clienteIds:ur,nomesLivres:[],codigoEmpresa:xt}),await zn(St);const Ar=(await os({comandaId:St,codigoEmpresa:xt})||[]).map(Nn=>Nn?.nome).filter(Boolean);h(Ar.length?Ar.join(", "):""),Ve(!0);try{localStorage.removeItem(Cr.pendingClientIds),localStorage.setItem(Cr.customerName,Ar.length?Ar.join(", "):""),localStorage.setItem(Cr.clientChosen,"true")}catch(Nn){console.error("Erro ao atualizar cache local:",Nn)}}}catch(ur){console.error("Erro ao associar clientes:",ur)}yt-1<=0?e({title:"ltima unidade vendida",description:`"${de.name}" esgotou aps esta venda.`,variant:"warning"}):yt-1<=ot?e({title:"Estoque baixo",description:`"${de.name}" atingiu nvel de estoque baixo.`,variant:"warning"}):e({title:"Produto adicionado",description:de.name,variant:"success"})}catch(xt){const yt=String(xt?.message||"").toLowerCase();xt?.code==="OUT_OF_STOCK"||yt.includes("sem estoque")?e({title:"Sem estoque",description:"Este produto est sem estoque.",variant:"destructive"}):xt?.code==="INSUFFICIENT_STOCK"||yt.includes("insuficiente")?e({title:"Estoque insuficiente",description:xt?.message||"Quantidade maior que o disponvel.",variant:"destructive"}):e({title:"Falha ao adicionar",description:xt?.message||"Tente novamente",variant:"destructive"})}finally{x(null)}},xi=async()=>{try{if(oe(!0),!ve){Y(!0),e({title:"Selecione o cliente",description:"Escolha um cliente cadastrado antes de pagar.",variant:"warning"}),oe(!1);return}const de=r?.codigo_empresa;if(!de){e({title:"Empresa no definida",variant:"destructive"});return}if(!n)try{const Ar=await Q7({codigoEmpresa:de});if(!Ar?.id){e({title:"Comanda no encontrada",description:"Abra uma comanda antes de pagar.",variant:"destructive"}),oe(!1);return}a(Ar.id)}catch(Ar){if(Ar?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para pagar",description:" necessrio abrir o caixa antes de iniciar/confirmar uma venda.",variant:"warning"}),oe(!1);return}throw Ar}try{await sHe({comandaId:n,codigoEmpresa:de})}catch(Ar){const Nn=Array.isArray(Ar?.items)&&Ar.items.length?Ar.items.map(yn=>`${yn.name} (solicitado ${yn.solicitado}, estoque ${yn.estoque})`).join("; "):Ar?.message||"Estoque insuficiente na comanda";e({title:"Estoque insuficiente",description:Nn,variant:"destructive",duration:7e3}),oe(!1);return}const pt=await ov({somenteAtivas:!0,codigoEmpresa:de});H(pt||[]);let xt=[];try{const Ar=await os({comandaId:n,codigoEmpresa:de});xt=(Array.isArray(Ar)?Ar:[]).map(yn=>{const _r=yn?.cliente_id??yn?.clientes?.id??null,Mn=yn?.clientes?.nome??yn?.nome??yn?.nome_livre??"";return _r?{id:_r,nome:Mn}:null}).filter(Boolean)}catch{xt=[]}K(xt);const yt=pt&&pt[0]&&pt[0].id?pt[0].id:null,ot=Ae&&Ae.length>0?Ae[0]:xt[0]?.id||null;let St=0;try{St=(await Fi({comandaId:n,codigoEmpresa:de})||[]).reduce((Nn,yn)=>Nn+Number(yn.quantidade||0)*Number(yn.preco_unitario||0),0)}catch{}const Ht=(pt||[]).find(Ar=>String(Ar.id)===String(yt)),Ut=Number(Ht?.taxa_percentual||0),nr=Ut>0,ur=nr?St*(1+Ut/100):St,mr=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ur);U([{id:1,clientId:ot,methodId:yt,value:mr,chargeFee:nr}]),V(2),F(!0),oe(!1);return}catch(de){if(de?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para pagar",description:" necessrio abrir o caixa antes de iniciar/confirmar uma venda.",variant:"warning"}),oe(!1);return}e({title:"Falha ao iniciar pagamento",description:de?.message||"Tente novamente",variant:"destructive"})}finally{}};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"mb-3 space-y-2",children:[o.jsx("div",{className:"w-full",children:o.jsx(Vd,{value:"balcao",onValueChange:de=>{de==="mesas"&&t("/vendas"),de==="balcao"&&t("/balcao"),de==="historico"&&t("/historico")},children:o.jsxs(Qu,{className:"w-full grid grid-cols-3 sm:w-auto sm:inline-flex",children:[o.jsx(Na,{value:"mesas",children:"Mesas"}),o.jsx(Na,{value:"balcao",children:"Balco"}),o.jsx(Na,{value:"historico",children:"Histrico"})]})})}),o.jsxs("div",{className:"w-full flex items-center gap-2 justify-end",children:[o.jsx(ya,{}),o.jsx(ui,{}),o.jsxs(ye,{variant:"outline",onClick:()=>k(!0),className:"h-9 rounded-md px-3 sm:h-10",children:[o.jsx(xW,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2 md:hidden",children:"Detalhes"}),o.jsx("span",{className:"ml-2 hidden md:inline",children:"Detalhes do Caixa"})]})]})]}),o.jsx(Va,{}),o.jsx(cn,{open:me,onOpenChange:de=>{Ee(de),de||te(null)},children:o.jsxs(on,{className:"sm:max-w-[420px] w-full max-h-[85vh] flex flex-col animate-none",onKeyDown:de=>de.stopPropagation(),onPointerDownOutside:de=>de.stopPropagation(),onInteractOutside:de=>de.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold break-words",title:he?.name||"",children:he?.name||"Produto"}),o.jsx(hn,{children:"Detalhes do produto e aes rpidas."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),o.jsx("span",{className:"text-sm font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(he?.price??he?.salePrice??0))})]}),he?.category?o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),o.jsx("span",{className:"text-sm font-medium",children:he.category})]}):null,o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof he?.stock<"u"&&o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),o.jsx("div",{className:"text-base font-semibold",children:he.stock})]}),typeof he?.minStock<"u"&&o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),o.jsx("div",{className:"text-base font-semibold",children:he.minStock})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),o.jsxs("div",{className:"text-base font-semibold",children:["x",ba.get(he?.id)||0]})]})]})]}),o.jsxs($n,{className:"flex items-center justify-between gap-2",children:[o.jsxs(ye,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{he&&t("/produtos",{state:{productId:he.id,productName:he.name}})},children:[o.jsx(uc,{className:"w-4 h-4"}),o.jsx("span",{children:"Info"})]}),o.jsx(ye,{variant:"outline",onClick:()=>{Ee(!1),te(null)},children:"Fechar"}),o.jsx(ye,{onClick:async()=>{he&&(await wa(he,{skipClientCheck:!1}),Ee(!1),te(null))},children:"Adicionar"})]})]})}),o.jsx(cn,{open:be,onOpenChange:ne,children:o.jsxs(on,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] flex flex-col overflow-hidden animate-none",onOpenAutoFocus:de=>de.preventDefault(),onKeyDown:de=>de.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold",children:"Adicionar Produtos"}),o.jsx(hn,{children:"Busque e adicione produtos  comanda do balco."})]}),o.jsx("div",{className:"p-4 pt-0",children:o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:Qt,onChange:de=>bt(de.target.value)})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 thin-scroll",children:[o.jsx("ul",{className:"space-y-2",children:(i||[]).filter(de=>{const pt=(Qt||"").toLowerCase();if(!pt)return!0;const xt=String(de.name||de.descricao||"").toLowerCase(),yt=String(de.code||de.codigo||"").toLowerCase();return xt.includes(pt)||yt.includes(pt)}).sort((de,pt)=>{const xt=de.code?parseInt(de.code,10):999999,yt=pt.code?parseInt(pt.code,10):999999;return xt-yt}).map(de=>{const pt=ba.get(de.id)||0,xt=Number(de.stock??de.currentStock??0),yt=Math.max(0,xt-pt),ot=Number(de.salePrice??de.price??0);return o.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors border border-border/40",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("p",{className:"font-semibold truncate max-w-[200px]",title:`${de.code?`[${de.code}] `:""}${de.name}`,children:[de.code&&o.jsxs("span",{className:"text-text-muted",children:["[",de.code,"]"]})," ",de.name]}),pt>0&&o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",pt]}),o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",yt]})]}),o.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",ot.toFixed(2)]})]}),o.jsx(ye,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:async()=>{await wa(de)},"aria-label":`Adicionar ${de.name}`,children:o.jsx(oi,{className:"h-4 w-4"})})]},de.id)})}),Array.isArray(i)&&i.length===0&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(HE,{className:"w-16 h-16 text-text-muted mb-4"}),o.jsx("p",{className:"text-sm text-text-muted",children:"Nenhum produto encontrado."})]})]}),o.jsx($n,{children:o.jsx(ye,{variant:"outline",onClick:()=>ne(!1),children:"Fechar"})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full overflow-hidden",children:[o.jsxs("div",{className:"hidden md:flex flex-col border rounded-lg border-border overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-border",children:o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar produto...",className:"pl-9",value:m,onChange:de=>g(de.target.value)})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:(i||[]).length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12",children:[o.jsx(HE,{className:"w-16 h-16 text-text-muted mb-4"}),o.jsx("p",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhum produto cadastrado"}),o.jsx("p",{className:"text-sm text-text-muted mb-6 text-center",children:"Cadastre produtos para comear a vender"}),o.jsxs(ye,{onClick:()=>t("/produtos"),children:[o.jsx(oi,{className:"mr-2 h-4 w-4"}),"Cadastrar Produto"]})]}):o.jsx("ul",{className:"space-y-2",children:i.sort((de,pt)=>{const xt=de.code?parseInt(de.code,10):999999,yt=pt.code?parseInt(pt.code,10):999999;return xt-yt}).map(de=>{const pt=ba.get(de.id)||0,xt=Number(de.stock??de.currentStock??0),yt=Math.max(0,xt-pt),ot=Number(de.salePrice??de.price??0);return o.jsx(se.Fragment,{children:o.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors",children:[o.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{te({...de,qty:pt,remaining:yt,price:ot}),Ee(!0)},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("p",{className:"font-semibold truncate max-w-[180px]",title:`${de.code?`[${de.code}] `:""}${de.name}`,children:[de.code&&o.jsxs("span",{className:"text-text-muted",children:["[",de.code,"]"]})," ",de.name.length>20?`${de.name.substring(0,20)}...`:de.name]}),pt>0&&o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",pt]}),o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border flex-shrink-0",children:["Qtd ",yt]})]}),o.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",ot.toFixed(2)]})]}),o.jsx(ye,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:St=>{St.stopPropagation(),wa(de)},"aria-label":`Adicionar ${de.name}`,children:o.jsx(oi,{className:"h-4 w-4"})})]})},de.id)})})})]}),o.jsxs("div",{className:"flex flex-col border rounded-lg border-border overflow-hidden",children:[o.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2 flex-wrap",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:"Comanda"}),o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx("span",{className:"text-base font-bold",children:"Balco"}),f?o.jsx("span",{className:"max-w-[140px] truncate text-[11px] px-2 py-0.5 rounded-full border border-border bg-surface-2 text-text-secondary",children:f}):null]})]}),o.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[o.jsxs(ye,{size:"sm",className:"h-8 px-2 text-xs whitespace-nowrap bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",disabled:!N,onClick:()=>{if(!N){e({title:"Caixa Fechado",description:"Abra o caixa antes de adicionar produtos.",variant:"warning"});return}ne(!0)},title:"Adicionar produto",children:[o.jsx(oi,{className:"h-4 w-4 mr-1"}),"Produto"]}),ve&&o.jsx(ye,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs whitespace-nowrap",disabled:!N,onClick:()=>{if(!N){e({title:"Caixa Fechado",description:"Abra o caixa antes de adicionar clientes.",variant:"warning"});return}Y(!0)},children:"+ Cliente"}),ve?o.jsxs(Iu,{children:[o.jsx(Lm,{asChild:!0,children:o.jsx(ye,{size:"sm",className:"h-8 px-2 text-xs whitespace-nowrap bg-red-600 hover:bg-red-500 text-white border border-red-600/70 focus:outline-none focus:ring-0 focus-visible:ring-0 shadow-none",disabled:w,children:w?"Cancelando...":"Cancelar"})}),o.jsxs(Gc,{className:"sm:max-w-[420px] animate-none",onKeyDown:de=>de.stopPropagation(),children:[o.jsxs(Kc,{children:[o.jsx(Xc,{children:"Cancelar venda do balco?"}),o.jsx(Jc,{children:"Os itens sero descartados e a venda ser limpa. Esta ao no pode ser desfeita."})]}),o.jsxs(Yc,{children:[o.jsx(Qc,{children:"Voltar"}),o.jsx(Du,{onClick:vi,children:"Confirmar Cancelamento"})]})]})]}):o.jsx(ye,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs opacity-60 cursor-not-allowed whitespace-nowrap",disabled:!0,children:"Cancelar"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:ve?l.length===0?o.jsx("div",{className:"text-center text-text-muted pt-16",children:'Comanda vazia. Use o boto "+" para adicionar produtos.'}):o.jsx("ul",{className:"space-y-3 pr-1",children:l.map(de=>o.jsxs("li",{className:"p-2 rounded-md border border-border/30 bg-surface hover:bg-surface-2 transition-colors",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:"font-medium truncate",title:de.name,children:de.name.length>25?`${de.name.substring(0,25)}...`:de.name})}),o.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ye,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:async pt=>{pt.stopPropagation();const xt=r?.codigo_empresa;if(!xt){e({title:"Empresa no definida",variant:"destructive"});return}const yt=Number(de.quantity||1)-1;c(ot=>ot.map(Ht=>Ht.id===de.id?{...Ht,quantity:Math.max(yt,0)}:Ht).filter(Ht=>Ht.quantity>0));try{yt<=0?await $m({itemId:de.id,codigoEmpresa:xt}):await Mu({itemId:de.id,quantidade:yt,codigoEmpresa:xt})}catch(ot){try{const Ht=await Fi({comandaId:n,codigoEmpresa:xt});c((Ht||[]).map(Ut=>({id:Ut.id,productId:Ut.produto_id,name:Ut.descricao||"Item",price:Number(Ut.preco_unitario||0),quantity:Number(Ut.quantidade||1)})))}catch{}const St=String(ot?.message||"").toLowerCase();ot?.code==="INSUFFICIENT_STOCK"||St.includes("insuficiente")?e({title:"Estoque insuficiente",description:ot?.message||"Quantidade maior que o disponvel.",variant:"warning"}):e({title:"Falha ao atualizar item",description:ot?.message||"Tente novamente",variant:"destructive"})}},children:"-"}),o.jsx("span",{className:"w-7 text-center font-semibold",children:de.quantity}),o.jsx(ye,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:async pt=>{pt.stopPropagation();const xt=r?.codigo_empresa;if(!xt){e({title:"Empresa no definida",variant:"destructive"});return}const yt=Number(de.quantity||1)+1;c(ot=>ot.map(St=>St.id===de.id?{...St,quantity:yt}:St));try{await Mu({itemId:de.id,quantidade:yt,codigoEmpresa:xt})}catch(ot){try{const Ht=await Fi({comandaId:n,codigoEmpresa:xt});c((Ht||[]).map(Ut=>({id:Ut.id,productId:Ut.produto_id,name:Ut.descricao||"Item",price:Number(Ut.preco_unitario||0),quantity:Number(Ut.quantidade||1)})))}catch{}const St=String(ot?.message||"").toLowerCase();ot?.code==="INSUFFICIENT_STOCK"||St.includes("insuficiente")?e({title:"Estoque insuficiente",description:ot?.message||"Quantidade maior que o disponvel.",variant:"warning"}):e({title:"Falha ao atualizar item",description:ot?.message||"Tente novamente",variant:"destructive"})}},children:"+"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-semibold whitespace-nowrap",children:["R$ ",(Number(de.quantity)*Number(de.price)).toFixed(2)]}),o.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border",children:["x",de.quantity]})]})]})]},de.id))}):o.jsxs("div",{className:"text-center pt-12",children:[o.jsx("div",{className:"text-sm text-text-secondary mb-3",children:"Para comear, inicie uma nova venda e selecione o cliente."}),o.jsx(ye,{disabled:!N,onClick:()=>{if(!N){e({title:"Caixa Fechado",description:"Abra o caixa antes de iniciar uma venda.",variant:"warning"});return}Y(!0)},children:"Iniciar nova venda"})]})}),o.jsxs("div",{className:"p-4 border-t border-border",children:[o.jsxs("div",{className:"flex justify-between items-center text-lg font-bold mb-3",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["R$ ",ei.toFixed(2)]})]}),o.jsx(ye,{size:"lg",className:"w-full",onClick:xi,disabled:ei<=0,children:"Finalizar Pagamento"})]})]})]}),o.jsx(cn,{open:W,onOpenChange:F,children:o.jsxs(on,{className:"sm:max-w-xl w-[92vw] max-h-[90vh] flex flex-col overflow-hidden animate-none",onKeyDown:de=>de.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Fechar Conta"}),o.jsx(hn,{children:"Divida o pagamento entre clientes e vrias finalizadoras, se necessrio."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["R$ ",ei.toFixed(2)]})]}),o.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto thin-scroll pr-1",children:[o.jsx(vt,{className:"block",children:"Pagamentos"}),(()=>null)(),(()=>null)(),(L||[]).map((de,pt)=>{const xt=St=>{if(!St)return f||"Cliente";const Ht=String(St),Ut=(Z||[]).find(ur=>String(ur.id)===Ht);if(Ut?.nome)return Ut.nome;const nr=(Wt||[]).find(ur=>String(ur.id)===Ht);return nr?.nome?nr.nome:f||"Cliente"},yt=(Z||[]).length>1,ot=(Z||[])[0]||null;return(Z||[]).filter(St=>String(St.id)!==String(ot?.id||"")),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 items-start",children:[o.jsx("div",{className:"sm:col-span-1 flex sm:justify-start",children:L.length>1&&pt>0&&o.jsx(ye,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{U(St=>{const Ht=St.filter(mr=>mr.id!==de.id);if(Ht.length===0)return[];const Ut=(l||[]).reduce((mr,Ar)=>mr+Number(Ar.quantity||0)*Number(Ar.price||0),0),nr=Math.floor(Ut/Ht.length*100)/100,ur=Ut-nr*Ht.length;return Ht.map((mr,Ar)=>{const Nn=Ar===Ht.length-1?nr+ur:nr;return Zt(mr,Nn)})})},children:o.jsx(Vu,{className:"h-4 w-4"})})}),pt===0?o.jsx("div",{className:"sm:col-span-4",children:o.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:xt(ot?.id||de.clientId)})}):yt?o.jsx("div",{className:"sm:col-span-4",children:o.jsxs(Yn,{value:de.clientId||"",onValueChange:St=>U(Ht=>Ht.map(Ut=>Ut.id===de.id?{...Ut,clientId:St}:Ut)),children:[o.jsx(Hn,{className:"w-full truncate",children:o.jsx(Xn,{placeholder:"Cliente"})}),o.jsx(Gn,{children:(Z||[]).map(St=>o.jsx(qt,{value:St.id,children:St.nome},St.id))})]})}):o.jsx("div",{className:"sm:col-span-4",children:o.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:xt(ot?.id||de.clientId)})}),o.jsxs("div",{className:"sm:col-span-4",children:[o.jsxs(Yn,{value:de.methodId||"",onValueChange:St=>U(Ht=>Ht.map(Ut=>{if(Ut.id!==de.id)return Ut;const nr=ht(St),ur=Number(nr?.taxa_percentual||0);if(ur>0){const Ar=lr(Ut)*(1+ur/100);return{...Ut,methodId:St,chargeFee:!0,value:Xe(Ar)}}else{const mr=lr(Ut);return{...Ut,methodId:St,chargeFee:!1,value:Xe(mr)}}})),children:[o.jsx(Hn,{className:"w-full h-9 truncate",children:o.jsx(Xn,{placeholder:"Forma de pagamento"})}),o.jsx(Gn,{children:($||[]).map(St=>o.jsx(qt,{value:St.id,children:St.nome},St.id))})]}),(()=>{const St=st(de);if(!St)return null;const Ht=rr(de),Ut=!!de.chargeFee;return o.jsx("div",{className:"mt-1",children:o.jsxs("button",{type:"button",onClick:()=>U(nr=>nr.map(ur=>{if(ur.id!==de.id)return ur;const mr=lr(ur);if(!Ut){const Ar=mr*(1+St/100);return{...ur,chargeFee:!0,value:Xe(Ar)}}return{...ur,chargeFee:!1,value:Xe(mr)}})),className:["inline-flex items-center gap-2 px-3 py-1 rounded-sm text-xs font-medium border transition-colors",Ut?"bg-black text-amber-400 border-amber-500":"bg-surface text-text-secondary border-border hover:border-border-hover"].join(" "),title:Ut?"Desmarcar taxa":"Cobrar taxa",children:[o.jsx("span",{className:["inline-block h-3 w-3 rounded-sm border",Ut?"bg-amber-500 border-amber-400":"bg-transparent border-border"].join(" ")}),o.jsxs("span",{children:["Taxa R$ ",Ht.toFixed(2)]})]})})})()]}),o.jsx("div",{className:"sm:col-span-3",children:o.jsx($t,{placeholder:"0,00",inputMode:"numeric",value:de.value,className:"h-9",onChange:St=>{const Ht=(St.target.value||"").replace(/\D/g,""),Ut=Ht?Number(Ht)/100:0,nr=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Ut);U(ur=>ur.map(mr=>mr.id===de.id?{...mr,value:nr}:mr))},onKeyDown:St=>{St.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(St.key)&&(/^[0-9]$/.test(St.key)||St.preventDefault())},onBeforeInput:St=>{const Ht=St.data??"";Ht&&/\D/.test(Ht)&&St.preventDefault()}})})]},de.id)}),o.jsx("div",{children:o.jsx(ye,{type:"button",variant:"secondary",size:"sm",onClick:()=>{U(de=>{const xt=Array.isArray(Ae)&&Ae.length>0?Ae:(Z||[]).map(yn=>yn.id),yt=new Set(de.map(yn=>yn.clientId).filter(Boolean)),St=(xt||[]).filter(yn=>!yt.has(yn))[0]||xt[0]||"",Ht=$[0]?.id||"",Ut=ht(Ht),nr=Number(Ut?.taxa_percentual||0)>0,ur=[...de,{id:J,clientId:St,methodId:Ht,value:"",chargeFee:nr}],mr=(l||[]).reduce((yn,_r)=>yn+Number(_r.quantity||0)*Number(_r.price||0),0),Ar=Math.floor(mr/ur.length*100)/100,Nn=mr-Ar*ur.length;return ur.map((yn,_r)=>{const Mn=_r===ur.length-1?Ar+Nn:Ar;return Zt(yn,Mn)})}),V(de=>de+1)},children:"Adicionar forma"})}),(()=>{const de=Bn(),pt=Yr(),ot=(l||[]).reduce((St,Ht)=>St+Number(Ht.quantity||0)*Number(Ht.price||0),0)+pt-de;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[o.jsx("span",{children:"Soma"}),o.jsxs("span",{children:["R$ ",de.toFixed(2)]})]}),o.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[o.jsx("span",{children:"Taxas"}),o.jsxs("span",{children:["R$ ",pt.toFixed(2)]})]}),o.jsxs("div",{className:"text-sm font-semibold flex justify-between",children:[o.jsx("span",{children:"Restante"}),o.jsxs("span",{className:Math.abs(ot)<.005?"text-success":"text-warning",children:["R$ ",ot.toFixed(2)]})]})]})})()]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>F(!1),disabled:ce,children:"Cancelar"}),o.jsx(ye,{onClick:hr,disabled:ce,children:ce?"Processando...":"Confirmar Pagamento"})]})]})}),o.jsx(cn,{open:Ot,onOpenChange:de=>Y(de),children:o.jsxs(on,{className:"max-w-lg",onOpenAutoFocus:de=>de.preventDefault(),onKeyDown:de=>de.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Identificar Cliente"}),o.jsx(hn,{children:"Selecione um cliente cadastrado para esta venda."})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"w-full",children:[o.jsx(vt,{className:"mb-1 block",children:"Buscar cliente"}),o.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Nome, e-mail, telefone ou cdigo",className:"pl-9",value:Ct,onChange:de=>At(de.target.value),onKeyDown:de=>de.stopPropagation()})]}),o.jsx(ye,{type:"button",size:"icon",title:"Cadastrar cliente",className:"ml-2 bg-brand text-black hover:bg-brand/90 border border-brand",onClick:()=>{window.location.href="/clientes"},children:o.jsx(oi,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"mt-2 max-h-48 overflow-auto border rounded-md thin-scroll",children:o.jsxs("ul",{children:[(Wt||[]).map(de=>{const pt=(Ae||[]).includes(de.id);return o.jsxs("li",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-surface-2 ${de?.codigo===0?"bg-warning/10 border-l-4 border-warning":""} ${pt?"bg-surface-2":""}`,onClick:()=>{qe(xt=>{const yt=new Set(xt||[]);yt.has(de.id)?yt.delete(de.id):yt.add(de.id);const ot=Array.from(yt);try{localStorage.setItem(Cr.pendingClientIds,JSON.stringify(ot))}catch{}return ot})},children:[o.jsx("div",{children:o.jsxs("div",{className:"font-medium",children:[de.codigo!=null?String(de.codigo)+" - ":"",de.nome,de?.codigo===0&&o.jsx("span",{className:"ml-2 text-xs text-warning",children:"(Padro)"})]})}),o.jsx(Cs,{size:16,className:pt?"text-success":"text-text-muted opacity-40"})]},de.id)}),(!Wt||Wt.length===0)&&o.jsx("li",{className:"p-2 text-sm text-text-muted",children:"Nenhum cliente encontrado."})]})})]})}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>Y(!1),children:"Fechar"}),o.jsx(ye,{onClick:async()=>{try{const de=Array.from(new Set(Ae||[]));if(de.length===0){e({title:"Selecione pelo menos um cliente",variant:"warning"});return}const pt=r?.codigo_empresa;if(n){try{await ay({comandaId:n,clienteIds:de,nomesLivres:[],codigoEmpresa:pt})}catch(ot){if(!ot?.message?.includes("duplicate")&&!ot?.message?.includes("violates foreign key"))throw ot;console.log("Alguns clientes j estavam vinculados, continuando...")}const yt=(await os({comandaId:n,codigoEmpresa:pt})||[]).map(ot=>ot?.nome).filter(Boolean);h(yt.length?yt.join(", "):""),Ve(!0),Y(!1)}else{const xt=(Wt||[]).filter(ot=>de.includes(ot.id)).map(ot=>ot?.nome).filter(Boolean),yt=xt.length?xt.join(", "):"";h(yt),Ve(!0);try{localStorage.setItem(Cr.customerName,yt||""),localStorage.setItem(Cr.clientChosen,"true")}catch{}Y(!1)}if(y){const xt=y;b(null),await wa(xt,{skipClientCheck:!0})}}catch(de){e({title:"Falha ao iniciar venda",description:de?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar"})]})]})}),o.jsx(cn,{open:!!Se,onOpenChange:de=>!de&&We(null),children:o.jsx(on,{className:"sm:max-w-[425px]",children:Se&&o.jsxs(o.Fragment,{children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-lg",children:Se.name}),o.jsx(hn,{className:"text-sm",children:"Detalhes do item"})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Preo Unitrio"}),o.jsxs("p",{className:"text-lg font-bold",children:["R$ ",Number(Se.price).toFixed(2)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Quantidade"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ye,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:async de=>{de.stopPropagation();const pt=r?.codigo_empresa;if(!pt){e({title:"Empresa no definida",variant:"destructive"});return}const xt=Math.max(0,Se.quantity-1);try{xt<=0?(await $m({itemId:Se.id,codigoEmpresa:pt}),We(null)):(await Mu({itemId:Se.id,quantidade:xt,codigoEmpresa:pt}),We({...Se,quantity:xt}));const yt=await Fi({comandaId:n,codigoEmpresa:pt});c((yt||[]).map(ot=>({id:ot.id,productId:ot.produto_id,name:ot.descricao||"Item",price:Number(ot.preco_unitario||0),quantity:Number(ot.quantidade||1)})))}catch(yt){e({title:"Erro ao atualizar quantidade",description:yt?.message||"Tente novamente",variant:"destructive"})}},children:"-"}),o.jsx("span",{className:"w-8 text-center font-semibold",children:Se.quantity}),o.jsx(ye,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:async de=>{de.stopPropagation();const pt=r?.codigo_empresa;if(!pt){e({title:"Empresa no definida",variant:"destructive"});return}const xt=Se.quantity+1;try{await Mu({itemId:Se.id,quantidade:xt,codigoEmpresa:pt}),We({...Se,quantity:xt});const yt=await Fi({comandaId:n,codigoEmpresa:pt});c((yt||[]).map(ot=>({id:ot.id,productId:ot.produto_id,name:ot.descricao||"Item",price:Number(ot.preco_unitario||0),quantity:Number(ot.quantidade||1)})))}catch(yt){e({title:"Erro ao atualizar quantidade",description:yt?.message||"Tente novamente",variant:"destructive"})}},children:"+"})]})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Subtotal"}),o.jsxs("p",{className:"text-lg font-bold",children:["R$ ",(Se.quantity*Se.price).toFixed(2)]})]})]}),o.jsx($n,{children:o.jsx(ye,{variant:"destructive",onClick:async()=>{try{const de=r?.codigo_empresa;if(!de){e({title:"Empresa no definida",variant:"destructive"});return}await $m({itemId:Se.id,codigoEmpresa:de});const pt=await Fi({comandaId:n,codigoEmpresa:de});c((pt||[]).map(xt=>({id:xt.id,productId:xt.produto_id,name:xt.descricao||"Item",price:Number(xt.preco_unitario||0),quantity:Number(xt.quantidade||1)}))),We(null),e({title:"Item removido",variant:"success"})}catch(de){e({title:"Falha ao remover item",description:de?.message||"Tente novamente",variant:"destructive"})}},children:"Remover Item"})})]})})}),Pt&&o.jsx("div",{className:"fixed left-3 right-3 z-[9999] md:hidden",role:"alert","aria-live":"assertive",style:{bottom:"calc(12px + env(safe-area-inset-bottom, 0px))"},children:o.jsxs("div",{className:"pointer-events-none flex items-start gap-2 rounded-md border border-amber-500 bg-amber-400 text-black px-3 py-2 shadow-lg",children:[o.jsx(au,{className:"h-4 w-4 mt-0.5","aria-hidden":"true"}),o.jsx("div",{className:"text-sm font-semibold leading-snug drop-shadow-[0_1px_0_rgba(255,255,255,0.25)]",children:ft||"Ateno"})]})})]})}function Jre(e){try{const r=new DOMParser().parseFromString(e,"text/xml"),n=r.querySelector("parsererror");if(n)throw new Error("XML invlido: "+n.textContent);const a=XQe(r),i=JQe(r),s=QQe(r),l=ZQe(r),c=s.reduce((u,d)=>u+(d.valorTotal||0),0);return{produtos:s,fornecedor:i,pagamentos:l,nfe:{...a,totalNota:c},success:!0}}catch(t){return console.error("[XMLParser] Erro ao fazer parse do XML:",t),{produtos:[],fornecedor:null,nfe:null,success:!1,error:t.message}}}function XQe(e){const t=e.querySelector("ide");if(!t)return null;let r="";const n=e.querySelector("chNFe");if(n&&(r=n.textContent.trim()),!r){const a=e.querySelector("infNFe");if(a){const i=a.getAttribute("Id");i&&(r=i.replace("NFe",""))}}return{numero:Vn(t,"nNF"),serie:Vn(t,"serie"),dataEmissao:Vn(t,"dhEmi"),chaveAcesso:r,tipo:Vn(t,"tpNF")==="0"?"Entrada":"Sada",naturezaOperacao:Vn(t,"natOp")}}function JQe(e){const t=e.querySelector("emit");return t?{cnpj:Vn(t,"CNPJ"),razaoSocial:Vn(t,"xNome"),nomeFantasia:Vn(t,"xFant"),endereco:{logradouro:Vn(t,"xLgr"),numero:Vn(t,"nro"),bairro:Vn(t,"xBairro"),cidade:Vn(t,"xMun"),uf:Vn(t,"UF"),cep:Vn(t,"CEP")}}:null}function QQe(e){const t=e.querySelectorAll("det"),r=new Map;return t.forEach((n,a)=>{const i=n.querySelector("prod"),s=n.querySelector("imposto");if(!i)return;const l=Vn(i,"cProd"),c=Vn(i,"cEAN"),u=Vn(i,"xProd"),d=parseFloat(Vn(i,"qCom")||"0"),f=c&&c!=="SEM GTIN"?`ean:${c}`:l?`cod:${l}`:`nome:${u.toLowerCase().trim()}`;if(r.has(f)){const h=r.get(f);h.quantidade+=d,h.valorTotal+=parseFloat(Vn(i,"vProd")||"0")}else{const h={codigo:l,ean:c,nome:u,ncm:Vn(i,"NCM"),cest:Vn(i,"CEST"),cfop:Vn(i,"CFOP"),unidade:Vn(i,"uCom"),quantidade:d,valorUnitario:parseFloat(Vn(i,"vUnCom")||"0"),valorTotal:parseFloat(Vn(i,"vProd")||"0"),desconto:parseFloat(Vn(i,"vDesc")||"0"),impostos:tZe(s),descricao:u,origem:a+1};r.set(f,h)}}),Array.from(r.values())}function ZQe(e){const t=e.querySelectorAll("pag"),r=[];return t.forEach(n=>{const a=Vn(n,"tPag"),i=parseFloat(Vn(n,"vPag")||"0");a&&i>0&&r.push({codigoSefaz:a,valor:i,descricao:eZe(a)})}),r}function eZe(e){return{"01":"Dinheiro","02":"Cheque","03":"Carto de Crdito","04":"Carto de Dbito","05":"Carto da Loja",10:"Vale Alimentao",11:"Vale Refeio",12:"Vale Presente",13:"Vale Combustvel",14:"Duplicata Mercantil",15:"Boleto Bancrio",16:"Depsito Bancrio",17:"PIX Dinmico",18:"Transferncia Bancria",19:"Programa de Fidelidade",20:"PIX Esttico",21:"Crdito em Loja",22:"Pagamento Eletrnico",90:"Sem Pagamento",99:"Outros"}[e]||"Outros"}function tZe(e){if(!e)return{};const t={},r=e.querySelector("ICMS");if(r){const s=r.children[0];s&&(t.icms={cst:Vn(s,"CST"),csosn:Vn(s,"CSOSN"),aliquota:parseFloat(Vn(s,"pICMS")||"0"),valor:parseFloat(Vn(s,"vICMS")||"0")})}const n=e.querySelector("PIS");if(n){const s=n.children[0];s&&(t.pis={cst:Vn(s,"CST"),aliquota:parseFloat(Vn(s,"pPIS")||"0"),valor:parseFloat(Vn(s,"vPIS")||"0")})}const a=e.querySelector("COFINS");if(a){const s=a.children[0];s&&(t.cofins={cst:Vn(s,"CST"),aliquota:parseFloat(Vn(s,"pCOFINS")||"0"),valor:parseFloat(Vn(s,"vCOFINS")||"0")})}const i=e.querySelector("IPI");if(i){const s=i.querySelector("IPITrib");s&&(t.ipi={cst:Vn(s,"CST"),aliquota:parseFloat(Vn(s,"pIPI")||"0"),valor:parseFloat(Vn(s,"vIPI")||"0")})}return t}function Vn(e,t){if(!e)return"";const r=e.querySelector(t);return r?r.textContent.trim():""}function Qre(e,t){const r=e.unidade?.toUpperCase().trim()||"";if(e.ean&&e.ean!=="SEM GTIN"){const a=t.find(s=>{const l=s.unit?.toUpperCase().trim()||"";return s.barcode===e.ean&&l===r});if(a)return a;const i=t.find(s=>s.barcode===e.ean);i&&console.log("[xmlParser] EAN igual mas unidade diferente (no considerar o mesmo produto):",{ean:e.ean,unidadeXML:r,unidadeSistema:(i.unit||"").toUpperCase()})}if(e.codigo){const a=t.find(s=>{const l=s.unit?.toUpperCase().trim()||"";return s.code===e.codigo&&l===r});if(a)return a;const i=t.find(s=>s.code===e.codigo);i&&console.log("[xmlParser] Cdigo igual mas unidade diferente (no considerar o mesmo produto):",{codigo:e.codigo,unidadeXML:r,unidadeSistema:(i.unit||"").toUpperCase()})}const n=e.nome?.toLowerCase().trim()||"";if(n){const a=t.find(i=>{const s=i.name?.toLowerCase().trim()||"",l=i.unit?.toUpperCase().trim()||"",c=s===n,u=l===r,d=c&&u;return c&&!u&&(console.log("[xmlParser] Nome igual mas UNIDADE diferente - NO  o mesmo produto:"),console.log("  Nome XML:",n,"| Unidade XML:",r),console.log("  Nome Sistema:",s,"| Unidade Sistema:",l)),d&&(console.log("[xmlParser] MATCH ENCONTRADO (nome + unidade):"),console.log("  XML:",n,"| Unidade:",r),console.log("  Sistema:",s,"| Unidade:",l),console.log("  Produto:",i)),d});if(a)return console.log("[xmlParser] Produto existente encontrado por nome + unidade:",a.name,a.unit),a}return console.log("[xmlParser] Nenhum produto encontrado para:",n,"| Unidade:",r),null}function eq(e,t){return{code:e.codigo||"",name:e.nome||"",barcode:e.ean&&e.ean!=="SEM GTIN"?e.ean:"",ncm:e.ncm||"",cest:e.cest||"",unit:e.unidade||"UN",costPrice:e.valorUnitario||0,salePrice:e.valorUnitario*1.3||0,stock:0,minStock:0,status:"active",active:!0,type:"Venda",category:"Importados",cfopInterno:e.cfop||"",cstIcmsInterno:e.impostos?.icms?.cst||"",csosnInterno:e.impostos?.icms?.csosn||"",aliqIcmsInterno:e.impostos?.icms?.aliquota||0,cstPisEntrada:e.impostos?.pis?.cst||"",aliqPisPercent:e.impostos?.pis?.aliquota||0,aliqCofinsPercent:e.impostos?.cofins?.aliquota||0,cstIpi:e.impostos?.ipi?.cst||"",aliqIpiPercent:e.impostos?.ipi?.aliquota||0,codigo_empresa:t,importedViaXML:!0,xmlChave:e?.xmlChave||null,xmlNumero:e?.xmlNumero||null,xmlSerie:e?.xmlSerie||null,xmlEmissao:e?.xmlEmissao||null}}function rZe({open:e,onOpenChange:t,products:r,codigoEmpresa:n,onSuccess:a}){const{toast:i}=Qa(),[s,l]=v.useState("upload"),[c,u]=v.useState(null),[d,f]=v.useState(null),[h,m]=v.useState([]),[g,p]=v.useState(!1),[x,y]=v.useState({created:0,updated:0,errors:0,details:[]}),b=async N=>{const P=N.target.files?.[0];if(P){if(!P.name.endsWith(".xml")){i({title:"Arquivo invlido",description:"Selecione um arquivo XML vlido.",variant:"destructive"});return}u(P);try{const A=await P.text(),k=Jre(A);if(!k.success){i({title:"Erro ao ler XML",description:k.error||"XML invlido",variant:"destructive"});return}if(!k.produtos||k.produtos.length===0){i({title:"Nenhum produto encontrado",description:"O XML no contm produtos.",variant:"warning"});return}f(k);let M=r;try{M=await Sp({search:"",codigoEmpresa:n,includeInactive:!0})||r,console.log("[XMLImport] Produtos carregados para validao:",M.length),console.log("[XMLImport] Nomes dos produtos:",M.map(O=>O.name))}catch(I){console.warn("[XMLImport] No foi possvel carregar lista completa, usando cache:",I)}const E=k.produtos.map(I=>{const O=Qre(I,M);return{xml:I,existing:O,isNew:!O,willCreate:!O,willUpdate:!!O}});m(E),l("preview")}catch(A){console.error("[XMLImport] Erro ao processar arquivo:",A),i({title:"Erro ao processar XML",description:A.message,variant:"destructive"})}}},w=async()=>{l("processing"),p(!0);const N={created:0,updated:0,errors:0,skipped:0,details:[]};for(const P of h)try{if(P.isNew){const A=eq(P.xml,n);A.salePrice!=null&&A.price==null&&(A.price=A.salePrice);const k=Number(P.xml.quantidade)||0;A.stock=k,A.initialStock=k,A.currentStock=k,A.importedViaXML=!0,A.category="Importados",d?.nfe&&(A.xmlChave=d.nfe.chaveAcesso||null,A.xmlNumero=d.nfe.numero||null,A.xmlSerie=d.nfe.serie||null,A.xmlEmissao=d.nfe.dataEmissao||null);try{await AT(A,{codigoEmpresa:n}),N.created++,N.details.push({produto:P.xml.nome,acao:"Criado",status:"success"})}catch(M){if(M.message?.includes("duplicate")||M.message?.includes("unique constraint")){console.warn("[XMLImport] Produto j existe, tentando atualizar estoque:",P.xml.nome);const I=(await Sp({search:P.xml.nome,codigoEmpresa:n,includeInactive:!0})).find(O=>{const R=(O.name||"").toLowerCase().trim()===(P.xml.nome||"").toLowerCase().trim(),B=(O.unit||"").toUpperCase().trim()===(P.xml.unidade||"").toUpperCase().trim(),W=(O.barcode||"")===(P.xml.ean||""),F=(O.code||"")===(P.xml.codigo||""),$=R&&B||W&&B||F&&B;return!$&&(W||F)&&!B&&console.log("[XMLImport] Encontrado mesmo EAN/Cdigo porm unidade diferente. NO unir:",{nomeSistema:O.name,unidadeSistema:O.unit,nomeXML:P.xml.nome,unidadeXML:P.xml.unidade,ean:P.xml.ean,codigo:P.xml.codigo}),$});if(I&&Number(P.xml.quantidade)>0)await CT({productId:I.id,delta:Number(P.xml.quantidade)||0,codigoEmpresa:n}),N.updated++,N.details.push({produto:P.xml.nome,acao:"J existe - Estoque atualizado",status:"success"});else if(I)N.skipped++,N.details.push({produto:P.xml.nome,acao:"Sem quantidade para ajustar",status:"warning"});else try{console.log("[XMLImport] Duplicate report mas no encontrou por nome+unidade/EAN+unidade/cdigo+unidade. Tentando criar novo produto.");const O=eq(P.xml,n);O.salePrice!=null&&O.price==null&&(O.price=O.salePrice);const R=Number(P.xml.quantidade)||0;O.stock=R,O.initialStock=R,O.currentStock=R,await AT(O,{codigoEmpresa:n}),N.created++,N.details.push({produto:P.xml.nome,acao:"Criado aps checagem",status:"success"})}catch(O){console.warn("[XMLImport] Falhou ao criar aps duplicate:",O),N.skipped++,N.details.push({produto:P.xml.nome,acao:"Falha ao criar aps duplicate",status:"warning"})}}else throw M}}else{const A=Number(P.xml.quantidade)||0;A>0&&await CT({productId:P.existing.id,delta:A,codigoEmpresa:n});const k=Number(P.xml.valorUnitario)||0,M=Number(P.existing.price??P.existing.salePrice??0);if(k>0&&M===0)try{await cM(P.existing.id,{salePrice:k,price:k})}catch(E){console.warn("[XMLImport] Falha ao ajustar preo do produto existente",E)}N.updated++,N.details.push({produto:P.xml.nome,acao:A>0?"Estoque atualizado":"Verificado",status:"success"})}}catch(A){console.error("[XMLImport] Erro ao processar produto:",P.xml.nome,A),N.errors++,N.details.push({produto:P.xml.nome,acao:"Erro",status:"error",error:A.message})}y(N),p(!1),l("done"),N.errors===0?i({title:"Importao concluda!",description:`${N.created} produto(s) criado(s), ${N.updated} atualizado(s).`,variant:"success"}):i({title:"Importao concluda com erros",description:`${N.created} criado(s), ${N.updated} atualizado(s), ${N.errors} erro(s).`,variant:"warning"}),a&&a()},_=()=>{l("upload"),u(null),f(null),m([]),y({created:0,updated:0,errors:0,details:[]}),t(!1)},j=()=>{l("upload"),u(null),f(null),m([])};return o.jsx(cn,{open:e,onOpenChange:_,children:o.jsxs(on,{className:"max-w-4xl max-h-[85vh] flex flex-col overflow-hidden",children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Importar XML de Compra (NF-e)"}),o.jsxs(hn,{children:[s==="upload"&&"Selecione o arquivo XML da nota fiscal de entrada",s==="preview"&&"Revise os produtos que sero importados",s==="processing"&&"Processando produtos...",s==="done"&&"Importao finalizada"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s==="upload"&&o.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("label",{htmlFor:"xml-upload",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer bg-surface hover:bg-surface-2 transition-colors",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[o.jsx(jW,{className:"w-12 h-12 mb-4 text-text-muted"}),o.jsx("p",{className:"mb-2 text-sm text-text-primary font-semibold",children:"Clique para selecionar ou arraste o arquivo"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Arquivo XML de NF-e (Nota Fiscal Eletrnica)"})]}),o.jsx("input",{id:"xml-upload",type:"file",accept:".xml",className:"hidden",onChange:b})]}),c&&o.jsxs("div",{className:"mt-4 p-3 bg-surface-2 rounded-lg flex items-center gap-2",children:[o.jsx(uc,{className:"w-5 h-5 text-success"}),o.jsx("span",{className:"text-sm text-text-primary",children:c.name})]})]})}),s==="preview"&&o.jsxs("div",{className:"space-y-4",children:[d?.nfe&&o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Informaes da NF-e"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Nmero:"})," ",o.jsx("span",{className:"font-mono",children:d.nfe.numero})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Srie:"})," ",o.jsx("span",{className:"font-mono",children:d.nfe.serie})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Tipo:"})," ",o.jsx("span",{children:d.nfe.tipo})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Fornecedor:"})," ",o.jsx("span",{children:d.fornecedor?.razaoSocial})]})]}),d.nfe.chaveAcesso&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[o.jsx("span",{className:"text-text-muted text-xs",children:"Chave de Acesso:"}),o.jsx("p",{className:"font-mono text-xs break-all",children:d.nfe.chaveAcesso})]})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border flex flex-col max-h-[500px]",children:[o.jsxs("h3",{className:"font-semibold mb-3",children:["Produtos Encontrados (",h.length,")"]}),o.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:h.map((N,P)=>o.jsxs("div",{className:kt("p-3 rounded-lg border flex items-start gap-3",N.isNew?"bg-success/10 border-success/30":"bg-info/10 border-info/30"),children:[N.isNew?o.jsx(oi,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}):o.jsx(due,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-semibold text-sm truncate",children:N.xml.nome}),o.jsxs("p",{className:"text-xs text-text-muted",children:[N.xml.codigo&&`Cdigo: ${N.xml.codigo}  `,N.xml.ean&&N.xml.ean!=="SEM GTIN"&&`EAN: ${N.xml.ean}  `,"Qtd: ",N.xml.quantidade," ",N.xml.unidade]})]}),o.jsxs("div",{className:"text-right flex-shrink-0",children:[o.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",N.xml.valorUnitario.toFixed(2)]}),o.jsx("p",{className:"text-xs text-text-muted",children:N.isNew?"Novo produto":"Atualizar estoque"})]})]})})]},P))})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),o.jsxs("span",{children:[h.filter(N=>N.isNew).length," produto(s) novo(s)"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-info"}),o.jsxs("span",{children:[h.filter(N=>!N.isNew).length," produto(s) existente(s)"]})]})]})]}),s==="processing"&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(Em,{className:"w-12 h-12 animate-spin text-warning mb-4"}),o.jsx("p",{className:"text-lg font-semibold",children:"Processando produtos..."}),o.jsx("p",{className:"text-sm text-text-muted",children:"Aguarde enquanto importamos os produtos"})]}),s==="done"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-6 border border-border text-center",children:[o.jsx(Cs,{className:"w-16 h-16 text-success mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Importao Concluda!"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-success",children:x.created}),o.jsx("p",{className:"text-sm text-text-muted",children:"Criados"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-info",children:x.updated}),o.jsx("p",{className:"text-sm text-text-muted",children:"Atualizados"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-danger",children:x.errors}),o.jsx("p",{className:"text-sm text-text-muted",children:"Erros"})]})]})]}),x.details.length>0&&o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Detalhes"}),o.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:x.details.map((N,P)=>o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[N.status==="success"?o.jsx(Cs,{className:"w-4 h-4 text-success flex-shrink-0"}):o.jsx(au,{className:"w-4 h-4 text-danger flex-shrink-0"}),o.jsx("span",{className:"flex-1 truncate",children:N.produto}),o.jsx("span",{className:kt("text-xs px-2 py-1 rounded",N.status==="success"?"bg-success/20 text-success":"bg-danger/20 text-danger"),children:N.acao})]},P))})]})]})]}),o.jsxs($n,{children:[s==="upload"&&o.jsx(ye,{variant:"outline",onClick:_,children:"Cancelar"}),s==="preview"&&o.jsxs(o.Fragment,{children:[o.jsx(ye,{variant:"outline",onClick:j,children:"Voltar"}),o.jsxs(ye,{onClick:w,children:["Confirmar Importao (",h.length," produtos)"]})]}),s==="done"&&o.jsx(ye,{onClick:_,children:"Fechar"})]})]})})}const nZe=[],aZe=[],iZe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},PT={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function oZe(e){const t=["Cdigo","Produto","Categoria","Tipo","Unidade","Preo Custo","Preo Venda","% Lucro","Estoque","Estoque Mn.","Validade","Status","Ativo","EAN-13","EAN-13 Caixa","Referncia","Marca","Grupo","NCM","Descrio NCM","CEST","Usar CSOSN","CFOP Interno","CST ICMS Interno","CSOSN Interno","Aliq ICMS Interno (%)","CFOP Externo","CST ICMS Externo","CSOSN Externo","Aliq ICMS Externo (%)","CST PIS Entrada","CST PIS Sada","Aliq PIS (%)","Aliq COFINS (%)","CST IPI","Aliq IPI (%)","FCP (%)","MVA (%)","Base Reduzida (%)"],r=";",n=p=>{const x=Number(p??0);return Number.isFinite(x)?x.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"0,00"},a=p=>`R$ ${n(p)}`,i=p=>{const x=Number(p??0);return Number.isFinite(x)?x.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},s=p=>{if(!p)return"";try{if(typeof p=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(p)){const[y,b,w]=p.split("-");return`${w}/${b}/${y}`}const x=new Date(p);if(!isNaN(x)){const y=String(x.getDate()).padStart(2,"0"),b=String(x.getMonth()+1).padStart(2,"0"),w=x.getFullYear();return`${y}/${b}/${w}`}}catch{}return String(p)},l=p=>p==="active"?"Ativo":p==="low_stock"?"Estoque Baixo":p==="inactive"?"Inativo":"",c=p=>p?"Sim":"No",u=p=>p??"",d=p=>{const x=p==null?"":String(p);return/[";\n]/.test(x)?`"${x.replace(/"/g,'""')}"`:x},f=[];f.push("\uFEFF"+t.join(r));for(const p of e){const x=[u(p.code),u(p.name),u(p.category),u(p.type),u(p.unit),a(p.costPrice),a(p.price??p.salePrice),i(p.marginPercent),Number(p.stock??0),Number(p.minStock??0),s(p.validade),l(p.status),c(p.active!==!1),u(p.barcode),u(p.barcodeBox),u(p.reference),u(p.brand),u(p.group),u(p.ncm),u(p.ncmDescription),u(p.cest),p.useCsosn?"Sim":"",u(p.cfopInterno),u(p.cstIcmsInterno),u(p.csosnInterno),i(p.aliqIcmsInterno),u(p.cfopExterno),u(p.cstIcmsExterno),u(p.csosnExterno),i(p.aliqIcmsExterno),u(p.cstPisEntrada),u(p.cstPisSaida),i(p.aliqPisPercent),i(p.aliqCofinsPercent),u(p.cstIpi),i(p.aliqIpiPercent),i(p.fcpPercent),i(p.mvaPercent),i(p.baseReduzidaPercent)].map(d).join(r);f.push(x)}const h=new Blob([f.join(`
`)],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(h),g=document.createElement("a");g.href=m,g.download="produtos.csv",document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(m)}function Vc(e,{action:t}={}){const r=String(e?.message||e||"").toLowerCase();if(r.includes("categoria possui produtos ativos vinculados"))return{title:"No  possvel remover",description:"Existem produtos ativos vinculados a esta categoria. Inative ou recategoriz-os antes."};if(r.includes("categoria no encontrada"))return{title:"Categoria no encontrada",description:"No foi possvel localizar a categoria para desativao."};if(r.includes("duplicate key")&&r.includes("ux_produtos_empresa_codigo_produto"))return{title:"Cdigo j cadastrado",description:"J existe um produto com este cdigo na sua empresa. Informe outro cdigo."};if(r.includes("duplicate key")&&r.includes("unique constraint"))return{title:"Registro j existe",description:"J existe um registro com estes dados."};if(r.includes("permission denied")||r.includes("violates row-level security")||r.includes("rls"))return{title:"Sem permisso",description:"Voc no tem permisso para executar esta ao."};const n=r.match(/null value in column "([^"]+)" violates not-null constraint/);return n?{title:"Campo obrigatrio",description:`Preencha o campo "${n[1].replace(/_/g," ")}".`}:r.includes("invalid input syntax")||r.includes("invalid input value")?{title:"Valor invlido",description:"Revise os valores informados (formato invlido)."}:r.includes("violates check constraint")?{title:"Valor invlido",description:"Os dados informados no atendem s regras do sistema."}:r.includes("violates foreign key constraint")?r.includes("update or delete on table")?{title:"No  possvel excluir",description:"Existem registros vinculados que impedem a excluso."}:{title:"Relao invlida",description:"O registro relacionado no foi encontrado ou  invlido."}:r.includes("failed to fetch")||r.includes("networkerror")||r.includes("network error")?{title:"Falha de conexo",description:"Verifique sua internet e tente novamente."}:r.includes("timeout")?{title:"Tempo esgotado",description:"A operao demorou demais. Tente novamente."}:r.includes("rate limit")||r.includes("too many requests")||r.includes("status code 429")?{title:"Muitas solicitaes",description:"Aguarde alguns segundos e tente novamente."}:t==="save"?{title:"Falha ao salvar",description:"No foi possvel salvar o produto. Tente novamente."}:t==="delete"?{title:"Falha ao inativar",description:"No foi possvel inativar o produto."}:t==="fetch"?{title:"Erro ao carregar",description:"No foi possvel atualizar a lista de produtos."}:t==="export"?{title:"Falha ao exportar",description:"No foi possvel gerar o arquivo."}:{title:"Erro",description:e?.message||"Ocorreu um erro."}}const sP=({icon:e,title:t,value:r,subtitle:n,color:a,onClick:i,isActive:s})=>{const l=e;return o.jsxs(Pr.div,{variants:PT,className:kt("bg-surface rounded-lg border-2 p-4 flex flex-col justify-between gap-2 cursor-pointer transition-all duration-300",s?`${a}/30 border-${a}`:"border-border hover:border-border-hover"),onClick:i,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-text-secondary text-sm font-semibold",children:t}),o.jsx(l,{className:`w-5 h-5 ${a}`})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r}),o.jsx("p",{className:"text-xs text-text-muted",children:n})]})]})};function sZe({open:e,onOpenChange:t,product:r,onSave:n,categories:a,onCreateCategory:i,suggestedCode:s,onRefreshProducts:l,products:c}){const{toast:u}=Qa(),{userProfile:d}=Wi(),[f,h]=v.useState("dados"),[m,g]=v.useState(r?.code||""),[p,x]=v.useState(r?.name||""),[y,b]=v.useState(r?.category||""),[w,_]=v.useState(r?.type||"Venda"),[j,N]=v.useState(r?.unit||"UN"),[P,A]=v.useState(r?.active??!0),[k,M]=v.useState(r?.barcode||""),[E,I]=v.useState(r?.barcodeBox||""),[O,R]=v.useState(r?.reference||""),[B,W]=v.useState(r?.brand||""),[F,$]=v.useState(r?.group||""),[H,ce]=v.useState(!!r?.allowSale),[oe,L]=v.useState(!!r?.payCommission),[U,J]=v.useState(!!r?.variablePrice),[V,Z]=v.useState(!!r?.composition),[K,he]=v.useState(!!r?.service),[te,me]=v.useState(!!r?.hasGrid),[Ee,Se]=v.useState(!!r?.usePriceTable),[We,be]=v.useState(!!r?.fuel),[ne,Qt]=v.useState(!!r?.useImei),[bt,Pt]=v.useState(!!r?.stockByGrid),[Qe,ft]=v.useState(!!r?.showInApp),[mt,_t]=v.useState(r?.costPrice!=null?Number(r.costPrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.cost!=null?Number(r.cost).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[ue,Ct]=v.useState(r?.salePrice!=null?Number(r.salePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.price!=null?Number(r.price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[At,Wt]=v.useState(r?.marginPercent!=null?String(Number(r.marginPercent).toFixed(2)).replace(".",","):""),[wt,Ae]=v.useState(r?.stock?String(r.stock):""),[qe,Ot]=v.useState(r?.minStock?String(r.minStock):""),[Y,ve]=v.useState(r?.status||"active"),[Ve,$e]=v.useState(r?.validade||null),[Le,it]=v.useState(!1),[Ye,Ge]=v.useState(!1),[Xe,ht]=v.useState(""),[st,lr]=v.useState(!0),[rr,Zt]=v.useState(!!(r?.csosnInterno||r?.csosnExterno)),[fn,Yr]=v.useState(r?.cfopInterno||""),[Bn,hr]=v.useState(r?.cstIcmsInterno||""),[qr,ya]=v.useState(r?.csosnInterno||""),[ui,Va]=v.useState(r?.aliqIcmsInterno!=null?String(r.aliqIcmsInterno).replace(".",","):""),[Kn,Cr]=v.useState(r?.cfopExterno||""),[zn,Wn]=v.useState(r?.cstIcmsExterno||""),[vi,ei]=v.useState(r?.csosnExterno||""),[ba,wa]=v.useState(r?.aliqIcmsExterno!=null?String(r.aliqIcmsExterno).replace(".",","):""),[xi,de]=v.useState(r?.cstPisEntrada||""),[pt,xt]=v.useState(r?.cstPisSaida||""),[yt,ot]=v.useState(r?.aliqPisPercent!=null?String(r.aliqPisPercent).replace(".",","):""),[St,Ht]=v.useState(r?.aliqCofinsPercent!=null?String(r.aliqCofinsPercent).replace(".",","):""),[Ut,nr]=v.useState(r?.cstIpi||""),[ur,mr]=v.useState(r?.aliqIpiPercent!=null?String(r.aliqIpiPercent).replace(".",","):""),[Ar,Nn]=v.useState(r?.fcpPercent!=null?String(r.fcpPercent).replace(".",","):""),[yn,_r]=v.useState(r?.mvaPercent!=null?String(r.mvaPercent).replace(".",","):""),[Mn,Sa]=v.useState(r?.baseReduzidaPercent!=null?String(r.baseReduzidaPercent).replace(".",","):""),[ja,Mi]=v.useState(r?.ncm||""),[G,Te]=v.useState(r?.ncmDescription||""),[Je,Xt]=v.useState(r?.cest||""),[It,jt]=v.useState(!1),[cr,wr]=v.useState(!1),gr=ut=>{const Br=String(ut||"").replace(/\D/g,"");return(Br?Number(Br)/100:0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},zt=ut=>{if(!ut)return 0;const Br=String(ut).replace(/\./g,"").replace(",","."),jr=Number(Br);return Number.isFinite(jr)?jr:0},Er=ut=>{const Br=String(ut||"").replace(/[^\d,\.]/g,"").replace(/\./g,"").replace(",","."),jr=Number(Br);return(Number.isFinite(jr)?jr:0).toFixed(2).replace(".",",")},Bt=ut=>{if(ut==null||ut==="")return 0;const Br=String(ut).replace(/\./g,"").replace(",","."),jr=Number(Br);return Number.isFinite(jr)?jr:0},Xr=ut=>String(ut||"").replace(/\D/g,"").slice(0,13),Vr=ut=>String(ut||"").replace(/\D/g,"").slice(0,4),rn=ut=>String(ut||"").replace(/\D/g,"").slice(0,8),na=ut=>String(ut||"").replace(/\D/g,"").slice(0,7);v.useEffect(()=>{g(r?.code||""),x(r?.name||""),b(r?.category||""),_(r?.type||"Venda"),N(r?.unit||"UN"),A(r?.active??!0),M(r?.barcode||""),I(r?.barcodeBox||""),R(r?.reference||""),W(r?.brand||""),$(r?.group||""),ce(!!r?.allowSale),L(!!r?.payCommission),J(!!r?.variablePrice),Z(!!r?.composition),he(!!r?.service),me(!!r?.hasGrid),Se(!!r?.usePriceTable),be(!!r?.fuel),Qt(!!r?.useImei),Pt(!!r?.stockByGrid),ft(!!r?.showInApp),_t(r?.costPrice!=null?Number(r.costPrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.cost!=null?Number(r.cost).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),Ct(r?.salePrice!=null?Number(r.salePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.price!=null?Number(r.price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),Wt(r?.marginPercent!=null?String(Number(r.marginPercent).toFixed(2)).replace(".",","):""),Ae(r?.stock?String(r.stock):""),Ot(r?.minStock?String(r.minStock):""),ve(r?.status||"active"),$e(r?.validade||null),Zt(!!(r?.csosnInterno||r?.csosnExterno)),Yr(r?.cfopInterno||""),hr(r?.cstIcmsInterno||""),ya(r?.csosnInterno||""),Va(r?.aliqIcmsInterno!=null?String(r.aliqIcmsInterno).replace(".",","):""),Cr(r?.cfopExterno||""),Wn(r?.cstIcmsExterno||""),ei(r?.csosnExterno||""),wa(r?.aliqIcmsExterno!=null?String(r.aliqIcmsExterno).replace(".",","):""),de(r?.cstPisEntrada||""),xt(r?.cstPisSaida||""),ot(r?.aliqPisPercent!=null?String(r.aliqPisPercent).replace(".",","):""),Ht(r?.aliqCofinsPercent!=null?String(r.aliqCofinsPercent).replace(".",","):""),nr(r?.cstIpi||""),mr(r?.aliqIpiPercent!=null?String(r.aliqIpiPercent).replace(".",","):""),Nn(r?.fcpPercent!=null?String(r.fcpPercent).replace(".",","):""),_r(r?.mvaPercent!=null?String(r.mvaPercent).replace(".",","):""),Sa(r?.baseReduzidaPercent!=null?String(r.baseReduzidaPercent).replace(".",","):""),Mi(r?.ncm||""),Te(r?.ncmDescription||""),Xt(r?.cest||""),lr(!0),!r&&s&&!m&&g(s),jt(!1),wr(!1)},[r,e]),v.useEffect(()=>{const ut=zt(mt),Br=zt(ue);if(Br>0){const jr=(Br-ut)/Br*100;Wt(jr.toFixed(2).replace(".",","))}else Wt("")},[mt,ue]);const Jr=async ut=>{if(ut.preventDefault(),Le)return;const Br=[];if(p?.trim()||Br.push("Descrio"),j?.trim()||Br.push("Unidade"),w||Br.push("Tipo de Produto"),zt(ue)<=0&&Br.push("Preo de Venda"),Br.length){u({title:"Preencha os campos obrigatrios",description:Br.join(", "),variant:"destructive"});return}console.log("[ProdutosPage] handleSave - Estado active antes de salvar:",P);let jr=Y;P?Y==="inactive"&&P&&(jr="active"):jr="inactive",console.log("[ProdutosPage] handleSave - Status ajustado:",jr);const ie={id:r?.id,code:m?.trim()||"",name:p,category:y,type:w,stock:Number(wt||0),minStock:Number(qe||0),status:jr,validade:Ve,unit:j,active:P,barcode:Xr(k),barcodeBox:Xr(E),reference:O?.trim()||null,brand:B?.trim()||null,group:F?.trim()||null,cost:zt(mt),price:zt(ue),buyPrice:null,costsPercent:null,costPrice:zt(mt),salePrice:zt(ue),marginPercent:Bt(At),allowSale:H,payCommission:oe,variablePrice:U,composition:V,service:K,hasGrid:te,usePriceTable:Ee,fuel:We,useImei:ne,stockByGrid:bt,showInApp:Qe,cfopInterno:Vr(fn)||null,cstIcmsInterno:rr?null:Bn||null,csosnInterno:rr&&qr||null,aliqIcmsInterno:Bt(ui),cfopExterno:Vr(Kn)||null,cstIcmsExterno:rr?null:zn||null,csosnExterno:rr&&vi||null,aliqIcmsExterno:Bt(ba),cstPisEntrada:xi||null,cstPisSaida:pt||null,aliqPisPercent:Bt(yt),aliqCofinsPercent:Bt(St),cstIpi:Ut||null,aliqIpiPercent:Bt(ur),fcpPercent:Bt(Ar),mvaPercent:Bt(yn),baseReduzidaPercent:Bt(Mn),ncm:rn(ja)||null,ncmDescription:G||null,cest:na(Je)||null};try{it(!0),console.log("[Produtos] Salvando produto",ie);const pe=2e4,Be=new Promise((ze,Me)=>setTimeout(()=>Me(new Error("Timeout ao salvar produto (20s)")),pe));await Promise.race([n(ie),Be]),u({title:"Produto salvo",description:"O produto foi salvo com sucesso.",variant:"success",duration:4e3,className:"bg-amber-500 text-black shadow-xl"}),t(!1)}catch(pe){console.error("[Produtos] Erro ao salvar",pe);const Be=Vc(pe,{action:"save"});u({title:Be.title,description:Be.description,variant:"destructive",duration:6e3})}finally{it(!1)}};return v.useEffect(()=>{e||it(!1)},[e]),o.jsxs(cn,{open:e,onOpenChange:t,children:[o.jsxs(on,{className:"w-[95vw] sm:max-w-[780px] max-h-[90vh] sm:max-h-[85vh] flex flex-col",onKeyDown:ut=>{ut.key==="F5"&&(ut.preventDefault(),Jr(ut)),ut.key==="Escape"&&(ut.preventDefault(),t(!1))},children:[o.jsx(an,{children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx(en,{className:"text-lg sm:text-xl",children:r?"Detalhes do Produto":"Novo Produto"}),o.jsx(hn,{className:"text-xs sm:text-sm",children:"Preencha as informaes e use as abas para navegar."})]})})}),o.jsx("form",{onSubmit:Jr,className:"grid gap-4 py-2 flex-1 overflow-y-auto pr-1 fx-scroll",children:o.jsxs(Vd,{value:f,onValueChange:h,className:"w-full",children:[o.jsx("div",{className:"sm:hidden mb-4",children:o.jsxs(Yn,{value:f,onValueChange:h,children:[o.jsx(Hn,{className:"w-full",children:o.jsx(Xn,{})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"dados",children:"Dados"}),o.jsx(qt,{value:"estoque",children:"Estoque"}),o.jsx(qt,{value:"preco",children:"Preo e Lucro"}),o.jsx(qt,{value:"impostos",children:"Impostos"}),o.jsx(qt,{value:"outras",children:"Outras Info"})]})]})}),o.jsxs(Qu,{className:"hidden sm:grid grid-cols-5 gap-1",children:[o.jsx(Na,{value:"dados",children:"Dados"}),o.jsx(Na,{value:"estoque",children:"Estoque"}),o.jsx(Na,{value:"preco",children:"Preo e Lucro"}),o.jsx(Na,{value:"impostos",children:"Impostos"}),o.jsx(Na,{value:"outras",children:"Outras Info"})]}),o.jsx("div",{className:"mt-2 text-[10px] sm:text-[11px] text-text-muted",children:"* Campo obrigatrio"}),o.jsxs(xo,{value:"dados",className:"space-y-3 mt-2",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsxs(vt,{htmlFor:"code",className:"text-left sm:text-right text-xs sm:text-sm",children:["Cdigo ",o.jsx("span",{className:"text-text-muted text-[10px] sm:text-xs",children:"(auto)"})]}),o.jsx($t,{id:"code",value:m,onChange:ut=>g(ut.target.value.replace(/\D/g,"")),className:"col-span-1 sm:col-span-3 text-sm",placeholder:s||"Ex.: 0001",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsxs(vt,{htmlFor:"name",className:"text-left sm:text-right text-xs sm:text-sm",children:["Descrio ",!p?.trim()&&o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsx($t,{id:"name",value:p,onChange:ut=>x(ut.target.value),className:"col-span-1 sm:col-span-3 text-sm",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsx(vt,{htmlFor:"category",className:"text-left sm:text-right text-xs sm:text-sm",children:"Categoria"}),o.jsxs("div",{className:"col-span-3 flex gap-2 items-center",children:[o.jsxs(Yn,{value:y,onValueChange:ut=>st&&b(ut),children:[o.jsx(Hn,{className:"w-full",disabled:!st,children:o.jsx(Xn,{placeholder:"Selecione..."})}),o.jsx(Gn,{children:a.map(ut=>o.jsx(qt,{value:ut,children:ut},ut))})]}),o.jsxs(ye,{type:"button",onClick:()=>Ge(ut=>!ut),className:"bg-amber-500 hover:bg-amber-400 text-black inline-flex items-center gap-2 whitespace-nowrap px-3",title:Ye?"Fechar":"Adicionar nova categoria",disabled:!st,children:[o.jsx("span",{className:"font-bold",children:"+"}),o.jsx("span",{children:"Novo"})]})]})]}),Ye&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx("div",{className:"col-span-1"}),o.jsxs("div",{className:"col-span-3 flex gap-2",children:[o.jsx($t,{value:Xe,onChange:ut=>ht(ut.target.value),placeholder:"Nome da nova categoria"}),o.jsx(ye,{type:"button",onClick:async()=>{const ut=Xe.trim();if(ut)try{if(a.includes(ut)){u({title:"Categoria j existe",description:"Escolha outro nome.",variant:"destructive"});return}await i?.(ut),b(ut),ht(""),Ge(!1),u({title:"Categoria adicionada",description:"Ela j est selecionada no formulrio.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(Br){console.error("[Produto] add category inline:error",Br);const jr=Vc(Br,{action:"save"});u({title:jr.title,description:jr.description,variant:"destructive"})}},children:"Adicionar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsxs(vt,{htmlFor:"unit",className:"text-left sm:text-right text-xs sm:text-sm",children:["Unidade ",!j?.trim()&&o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsxs(Yn,{value:j,onValueChange:ut=>st&&N(ut),children:[o.jsx(Hn,{className:"col-span-1 sm:col-span-3 text-sm",disabled:!st,children:o.jsx(Xn,{placeholder:"Selecione a unidade"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"UN",children:"UN - Unidade"}),o.jsx(qt,{value:"CX",children:"CX - Caixa"}),o.jsx(qt,{value:"PC",children:"PC - Pea"}),o.jsx(qt,{value:"KG",children:"KG - Quilograma"}),o.jsx(qt,{value:"G",children:"G - Grama"}),o.jsx(qt,{value:"L",children:"L - Litro"}),o.jsx(qt,{value:"ML",children:"ML - Mililitro"}),o.jsx(qt,{value:"M",children:"M - Metro"}),o.jsx(qt,{value:"M2",children:"M - Metro Quadrado"}),o.jsx(qt,{value:"M3",children:"M - Metro Cbico"}),o.jsx(qt,{value:"PAR",children:"PAR - Par"}),o.jsx(qt,{value:"DZ",children:"DZ - Dzia"}),o.jsx(qt,{value:"FD",children:"FD - Fardo"}),o.jsx(qt,{value:"SC",children:"SC - Saco"}),o.jsx(qt,{value:"PT",children:"PT - Pacote"}),o.jsx(qt,{value:"SERV",children:"SERV - Servio"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsxs(vt,{className:"text-left sm:text-right text-xs sm:text-sm",children:["Tipo ",!w&&o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsxs(Yn,{value:w,onValueChange:ut=>st&&_(ut),children:[o.jsx(Hn,{className:"col-span-1 sm:col-span-3 text-sm",disabled:!st,children:o.jsx(Xn,{placeholder:"Selecione o tipo"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"Venda",children:"Produto para Venda"}),o.jsx(qt,{value:"Uso Interno",children:"Produto de Uso Interno"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsx(vt,{className:"text-left sm:text-right text-xs sm:text-sm",children:"Ativo"}),o.jsx("div",{className:"col-span-1 sm:col-span-3",children:r?o.jsxs(o.Fragment,{children:[o.jsx(Sl,{checked:P,onCheckedChange:ut=>{console.log("[ProdutosPage] Checkbox active mudou para:",ut),A(!!ut)},disabled:!st}),o.jsx("span",{className:"ml-2 text-xs sm:text-sm",children:"Ativo"})]}):o.jsxs(Yn,{value:P?"ativo":"inativo",onValueChange:ut=>{console.log("[ProdutosPage] Select active mudou para:",ut),A(ut==="ativo")},children:[o.jsx(Hn,{className:"w-full sm:w-48 text-sm",disabled:!st,children:o.jsx(Xn,{placeholder:"Selecione"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"ativo",children:"Ativo"}),o.jsx(qt,{value:"inativo",children:"Inativo"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsx(vt,{htmlFor:"barcode",className:"text-left sm:text-right text-xs sm:text-sm",children:"EAN-13"}),o.jsx($t,{id:"barcode",value:k,onChange:ut=>M(Xr(ut.target.value)),className:"col-span-1 sm:col-span-3 text-sm",placeholder:"789...",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[o.jsxs(vt,{htmlFor:"validade",className:"text-left sm:text-right text-xs sm:text-sm",children:["Validade ",o.jsx("span",{className:"text-text-muted text-[10px] sm:text-xs",children:"(Opcional)"})]}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:kt("col-span-1 sm:col-span-3 justify-start text-left font-normal text-xs sm:text-sm",!Ve&&"text-muted-foreground"),disabled:!st,children:[o.jsx(k2,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),Ve?ln(Ve,"dd/MM/yyyy"):o.jsx("span",{children:"Selecione a data"})]})}),o.jsx(ad,{className:"p-0 w-[280px] sm:w-[300px]",children:o.jsx("div",{className:"w-[280px] sm:w-[300px] min-h-[300px] sm:min-h-[332px]",children:o.jsx(Ju,{mode:"single",selected:Ve,onSelect:$e,initialFocus:!0,fixedWeeks:!0})})})]})]})]}),o.jsx(xo,{value:"estoque",className:"space-y-3 mt-2",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"grid grid-cols-2 items-center gap-2",children:[o.jsx(vt,{htmlFor:"stock",className:"text-right",children:"Estoque"}),o.jsx($t,{id:"stock",value:wt,onChange:ut=>Ae(ut.target.value.replace(/[^0-9]/g,"")),disabled:!st,className:"col-span-1",inputMode:"numeric"})]}),o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[o.jsx(vt,{htmlFor:"minStock",className:"text-right",children:"Estoque Mn."}),o.jsx($t,{id:"minStock",value:qe,onChange:ut=>Ot(ut.target.value.replace(/[^0-9]/g,"")),disabled:!st,inputMode:"numeric"})]})]})}),o.jsxs(xo,{value:"preco",className:"space-y-3 mt-2",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"costPrice",className:"text-right",children:"Preo de Custo (R$)"}),o.jsx($t,{id:"costPrice",inputMode:"numeric",placeholder:"Ex.: 10,00",value:`R$ ${mt||"0,00"}`,onChange:ut=>_t(gr(ut.target.value)),disabled:!st,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsxs(vt,{htmlFor:"salePrice",className:"text-right",children:["Preo de Venda (R$) ",(!ue||zt(ue)<=0)&&o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsx($t,{id:"salePrice",inputMode:"numeric",placeholder:"Ex.: 15,00",value:`R$ ${ue||"0,00"}`,onChange:ut=>Ct(gr(ut.target.value)),disabled:!st,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"marginPercent",className:"text-right",children:"% de Lucro"}),o.jsx($t,{id:"marginPercent",inputMode:"decimal",placeholder:"Calculado",value:`${At||"0,00"} %`,onChange:ut=>Wt(Er(ut.target.value)),disabled:!st,className:"col-span-3"})]})]}),o.jsxs(xo,{value:"impostos",className:"space-y-4 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Sl,{id:"useCsosn",checked:rr,onCheckedChange:ut=>Zt(!!ut),disabled:!st}),o.jsx(vt,{htmlFor:"useCsosn",className:"cursor-pointer",children:"Usar CSOSN (Simples Nacional)"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-semibold",children:"ICMS - Operao Interna"}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CFOP"}),o.jsx($t,{value:fn,onChange:ut=>Yr(Vr(ut.target.value)),className:"col-span-3",placeholder:"5102",disabled:!st})]}),!rr&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CST"}),o.jsx($t,{value:Bn,onChange:ut=>hr(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"00, 20, 40...",disabled:!st})]}),rr&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CSOSN"}),o.jsx($t,{value:qr,onChange:ut=>ya(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"101, 102...",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"Alquota ICMS (%)"}),o.jsx($t,{value:`${ui||""}`,onChange:ut=>Va(Er(ut.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!st})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-semibold",children:"ICMS - Operao Externa"}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CFOP"}),o.jsx($t,{value:Kn,onChange:ut=>Cr(Vr(ut.target.value)),className:"col-span-3",placeholder:"6102",disabled:!st})]}),!rr&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CST"}),o.jsx($t,{value:zn,onChange:ut=>Wn(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"00, 20, 40...",disabled:!st})]}),rr&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CSOSN"}),o.jsx($t,{value:vi,onChange:ut=>ei(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"101, 102...",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"Alquota ICMS (%)"}),o.jsx($t,{value:`${ba||""}`,onChange:ut=>wa(Er(ut.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!st})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-semibold",children:"PIS/COFINS"}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CST PIS Entrada"}),o.jsx($t,{value:xi,onChange:ut=>de(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"50, 70...",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CST PIS Sada"}),o.jsx($t,{value:pt,onChange:ut=>xt(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"01, 04...",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"Alquota PIS (%)"}),o.jsx($t,{value:`${yt||""}`,onChange:ut=>ot(Er(ut.target.value)),className:"col-span-3",placeholder:"0,65",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"Alquota COFINS (%)"}),o.jsx($t,{value:`${St||""}`,onChange:ut=>Ht(Er(ut.target.value)),className:"col-span-3",placeholder:"3,00",disabled:!st})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-semibold",children:"IPI"}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CST IPI"}),o.jsx($t,{value:Ut,onChange:ut=>nr(ut.target.value.toUpperCase()),className:"col-span-3",placeholder:"50, 99...",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"Alquota IPI (%)"}),o.jsx($t,{value:`${ur||""}`,onChange:ut=>mr(Er(ut.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!st})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"FCP (%)"}),o.jsx($t,{value:`${Ar||""}`,onChange:ut=>Nn(Er(ut.target.value)),placeholder:"2,00",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"MVA (%)"}),o.jsx($t,{value:`${yn||""}`,onChange:ut=>_r(Er(ut.target.value)),placeholder:"40,00",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"Base Reduzida (%)"}),o.jsx($t,{value:`${Mn||""}`,onChange:ut=>Sa(Er(ut.target.value)),placeholder:"0,00",disabled:!st})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"NCM"}),o.jsx($t,{value:ja,onChange:ut=>Mi(rn(ut.target.value)),placeholder:"00000000",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[o.jsx(vt,{className:"text-right",children:"CEST"}),o.jsx($t,{value:Je,onChange:ut=>Xt(na(ut.target.value)),placeholder:"0000000",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 col-span-3 sm:col-span-1",children:[o.jsx(vt,{className:"text-right",children:"Descrio NCM"}),o.jsx($t,{value:G,onChange:ut=>Te(ut.target.value),placeholder:"Descrio do NCM",disabled:!st})]})]})]}),o.jsxs(xo,{value:"outras",className:"space-y-3 mt-2",children:[r&&o.jsxs("div",{className:"pb-4 mb-4 border-b border-border",children:[o.jsx(ye,{type:"button",onClick:()=>jt(!0),disabled:!st,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:"Desmembrar e Unir Produto"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Divida o preo por quantidade e opcionalmente una com outro produto"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"barcode2",className:"text-right",children:"Cdigo de Barras"}),o.jsx($t,{id:"barcode2",value:k,onChange:ut=>M(Xr(ut.target.value)),className:"col-span-3",placeholder:"EAN-13",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"barcodeBox",className:"text-right",children:"Cdigo Barras (Caixa)"}),o.jsx($t,{id:"barcodeBox",value:E,onChange:ut=>I(Xr(ut.target.value)),className:"col-span-3",placeholder:"EAN-13 da caixa",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"reference",className:"text-right",children:"Referncia"}),o.jsx($t,{id:"reference",value:O,onChange:ut=>R(ut.target.value),className:"col-span-3",placeholder:"Ex.: REF-123",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"brand",className:"text-right",children:"Marca"}),o.jsx($t,{id:"brand",value:B,onChange:ut=>W(ut.target.value),className:"col-span-3",placeholder:"Ex.: Nike",disabled:!st})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(vt,{htmlFor:"group",className:"text-right",children:"Grupo"}),o.jsx($t,{id:"group",value:F,onChange:ut=>$(ut.target.value),className:"col-span-3",placeholder:"Ex.: Calados",disabled:!st})]})]}),!1]})}),o.jsxs($n,{children:[o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",children:"Cancelar"})}),o.jsx(ye,{type:"button",onClick:Jr,disabled:Le||!st,title:"F5 para salvar",children:Le?"Salvando...":"Salvar Produto"})]})]}),o.jsx(lZe,{open:It,onOpenChange:jt,product:r,currentPrice:ue,allProducts:c,userProfile:d,onApply:async(ut,Br,jr,ie)=>{if(!jr)Ct(ut),Ae(Br),jt(!1),u({title:"Preo desmembrado!",description:`Preo unitrio: R$ ${zt(ut).toFixed(2)} | Estoque: ${Br}`,variant:"success"});else try{const pe=Number(Br),Be=await CT({productId:jr.id,delta:pe,codigoEmpresa:d?.codigo_empresa}),ze=Number(Be?.stock??Number(jr.stock||0)+pe);if(ie){const Me={...jr,stock:ze,salePrice:zt(ut),price:zt(ut)};await cM(jr.id,Me)}await Xre(r.id),u({title:"Produto desmembrado e unido!",description:`${jr.name}: novo estoque = ${ze} | preo unitrio = R$ ${zt(ut).toFixed(2)}`,variant:"success"}),jt(!1),t(!1);try{typeof l=="function"&&l()}catch{}}catch(pe){console.error("[Desmembrar e Unir] Erro:",pe),u({title:"Erro ao processar",description:pe?.message||"Tente novamente",variant:"destructive"})}}})]})}function lZe({open:e,onOpenChange:t,product:r,currentPrice:n,allProducts:a,userProfile:i,onApply:s}){const[l,c]=v.useState(""),[u,d]=v.useState(""),[f,h]=v.useState(!1),[m,g]=v.useState(""),[p,x]=v.useState(null),[y,b]=v.useState(!1),w=A=>{const k=String(A||"").replace(/\D/g,"");return(k?Number(k)/100:0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},_=A=>{if(!A)return 0;const k=String(A).replace(/\./g,"").replace(",","."),M=Number(k);return Number.isFinite(M)?M:0};v.useEffect(()=>{e&&n&&(c(n),d(""),h(!1),g(""),x(null),b(!1))},[e,n]);const j=l&&u&&Number(u)>0?_(l)/Number(u):0,N=(a||[]).filter(A=>{if(!r||A.id===r.id)return!1;if(!m.trim())return!0;const k=m.toLowerCase();return(A.name||"").toLowerCase().includes(k)||(A.code||"").toLowerCase().includes(k)}).slice(0,10),P=p?Number(u||0)+Number(p.stock||0):0;return o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{className:"sm:max-w-[650px] max-h-[90vh] overflow-y-auto",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Desmembrar e Unir Produto"}),o.jsx(hn,{children:"Divida o preo por quantidade e opcionalmente una com outro produto"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold",children:"1. Desmembrar Preo"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{children:"Valor Total (R$)"}),o.jsx($t,{inputMode:"numeric",placeholder:"0,00",value:`R$ ${l||"0,00"}`,onChange:A=>c(w(A.target.value))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{children:"Quantidade de Unidades"}),o.jsx($t,{type:"text",inputMode:"numeric",placeholder:"0",value:u,onChange:A=>d(A.target.value.replace(/[^0-9]/g,""))})]}),j>0&&o.jsx("div",{className:"bg-muted/50 border border-border p-3 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Preo Unitrio:"}),o.jsxs("span",{className:"text-lg font-bold",children:["R$ ",j.toFixed(2)]})]})})]}),j>0&&o.jsxs("div",{className:"space-y-3 border-t pt-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sl,{id:"wantToMerge",checked:f,onCheckedChange:A=>{h(!!A),A||(x(null),g(""),b(!1))}}),o.jsx(vt,{htmlFor:"wantToMerge",className:"cursor-pointer text-sm font-semibold",children:"2. Unir com outro produto (opcional)"})]}),f&&o.jsxs("div",{className:"space-y-3 ml-6",children:[o.jsx("div",{className:"bg-muted/30 border border-border p-3 rounded-lg",children:o.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.jsx("strong",{children:"Produto atual:"})," ",r?.name," (ser inativado aps unio)"]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{children:"Buscar Produto Destino"}),o.jsx($t,{placeholder:"Digite o nome ou cdigo...",value:m,onChange:A=>g(A.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(vt,{className:"text-xs",children:["Produtos Disponveis (",N.length,")"]}),o.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:N.length===0?o.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:"Nenhum produto encontrado"}):N.map(A=>o.jsx("div",{onClick:()=>x(A),className:kt("p-2 rounded-md cursor-pointer border transition-colors",p?.id===A.id?"bg-primary/10 border-primary":"bg-background hover:bg-muted/50 border-transparent"),children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:A.name}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.code&&`Cdigo: ${A.code}  `,"Estoque: ",A.stock||0,"  R$ ",Number(A.price||A.salePrice||0).toFixed(2)]})]}),p?.id===A.id&&o.jsx(Cs,{className:"w-4 h-4 text-primary flex-shrink-0"})]})},A.id))})]}),p&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"bg-primary/5 border border-primary/20 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs font-medium mb-1",children:"Resumo da Unio:"}),o.jsxs("div",{className:"text-xs space-y-0.5 text-muted-foreground",children:[o.jsxs("p",{children:[" Destino: ",o.jsx("strong",{children:p.name})]}),o.jsxs("p",{children:[" Estoque atual: ",p.stock||0]}),o.jsxs("p",{children:[" Estoque a somar: +",u]}),o.jsxs("p",{className:"text-primary font-bold",children:[" Novo estoque: ",P]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sl,{id:"updatePrice",checked:y,onCheckedChange:A=>b(!!A)}),o.jsxs(vt,{htmlFor:"updatePrice",className:"cursor-pointer text-xs",children:["Atualizar preo do destino para R$ ",j.toFixed(2)]})]})]})]})]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),o.jsx(ye,{onClick:()=>{if(j>0){const A=j.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2});s(A,u,f?p:null,y)}},disabled:j<=0||f&&!p,children:f&&p?"Desmembrar e Unir":"Aplicar Desmembramento"})]})]})})}function cZe({open:e,onOpenChange:t,categories:r,onAddCategory:n,onRemoveCategory:a}){const{toast:i}=Qa(),[s,l]=v.useState(""),[c,u]=v.useState(!1),d=async()=>{const h=s.trim();if(h){if(r.includes(h)){i({title:"Categoria j existe",description:"Escolha outro nome.",variant:"destructive"});return}try{u(!0),await n(h),l(""),i({title:"Categoria adicionada",description:"Ela j aparece na lista.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(m){console.error("[Categorias] add:error",m);const g=Vc(m,{action:"save"});i({title:g.title,description:g.description,variant:"destructive"})}finally{u(!1)}}},f=async h=>{try{u(!0),await a(h),i({title:"Categoria desativada",description:"A categoria foi marcada como inativa.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(m){console.error("[Categorias] remove:error",m);const g=Vc(m,{action:"save"});i({title:g.title,description:g.description,variant:"destructive"})}finally{u(!1)}};return o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{children:[o.jsxs(an,{children:[o.jsx(en,{children:"Gerenciar Categorias"}),o.jsx(hn,{children:"Adicione ou remova categorias de produtos."})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx($t,{value:s,onChange:h=>l(h.target.value),placeholder:"Nome da nova categoria"}),o.jsx(ye,{onClick:d,disabled:c,children:c?"Processando...":"Adicionar"})]}),o.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.map(h=>o.jsxs("div",{className:"flex items-center justify-between bg-surface-2 p-2 rounded-md",children:[o.jsx("span",{className:"font-semibold",children:h}),o.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 text-danger/80 hover:text-danger",onClick:()=>f(h),disabled:c,children:o.jsx(S_,{size:14})})]},h))})]})]})})}function uZe(){const{toast:e}=Qa(),{userProfile:t,authReady:r}=Wi();Ko();const[n,a]=v.useState(nZe),[i,s]=v.useState(aZe);v.useState("list");const[l,c]=v.useState(!0),[u,d]=v.useState(null),[f,h]=v.useState(!1),[m,g]=v.useState(!1),[p,x]=v.useState("all"),[y,b]=v.useState(""),[w,_]=v.useState({type:"all",category:"all",status:"active"}),[j,N]=v.useState(!1),[P,A]=v.useState(!1),[k,M]=v.useState(!1),[E,I]=v.useState(null),[O,R]=v.useState({by:"code",dir:"asc"}),B=v.useRef(!0),W=v.useRef(0),F=v.useRef(0);v.useRef(!1),v.useEffect(()=>(B.current=!0,()=>{B.current=!1}),[]);const $=async()=>{const Y=t?.codigo_empresa||null;if(!r||!Y)return;const ve=`produtos:list:${Y}`;N(!0);const Ve=setTimeout(()=>{if(B.current)try{const $e=JSON.parse(localStorage.getItem(ve)||"[]");Array.isArray($e)&&$e.length>0&&(console.warn("[Produtos] slow fallback: using cached snapshot"),a($e))}catch{}},2e3);try{const $e=w.status==="all"||w.status==="inactive";console.log("[Produtos] refetchProducts - Filtro status:",w.status,"includeInactive:",$e);const Le=await Sp({includeInactive:$e,search:y,codigoEmpresa:Y});if(!B.current)return;console.log("[Produtos] refetchProducts - Produtos carregados:",Le.length),a(Le);try{localStorage.setItem(ve,JSON.stringify(Le))}catch{}F.current=Le.length,W.current=Date.now()}catch($e){console.error("[Produtos] refetchProducts:error",$e);const Le=Vc($e,{action:"fetch"});e({title:Le.title,description:Le.description,variant:"destructive"})}finally{clearTimeout(Ve),N(!1)}};v.useEffect(()=>{const Y=(()=>{try{const it=localStorage.getItem("auth:userProfile");return it&&JSON.parse(it)?.codigo_empresa||null}catch{return null}})(),ve=t?.codigo_empresa||Y;if(!ve)return;const Ve=`produtos:list:${ve}`,$e=(()=>{try{return JSON.parse(localStorage.getItem(Ve)||"[]")}catch{return[]}})();Array.isArray($e)&&$e.length>0&&(a($e),F.current=$e.length);const Le=async(it=3)=>{for(let Ye=0;Ye<it;Ye++)try{if(B.current){await $();break}}catch(Ge){console.warn(`[ProdutosPage] Tentativa ${Ye+1} falhou:`,Ge),Ye===it-1?console.error("[ProdutosPage] Todas as tentativas falharam"):await new Promise(Xe=>setTimeout(Xe,1e3*(Ye+1)))}};try{const it=JSON.parse(localStorage.getItem(`produtos:cats:${ve}`)||"[]");Array.isArray(it)&&it.length>0&&s(it)}catch{}if(r&&t?.codigo_empresa){const it=setTimeout(()=>Le(),100);return(async()=>{try{const Ye=await Zz({codigoEmpresa:t.codigo_empresa});if(!B.current)return;s(Ye);try{localStorage.setItem(`produtos:cats:${t.codigo_empresa}`,JSON.stringify(Ye))}catch{}}catch(Ye){console.error("[Categorias] load on mount:error",Ye)}})(),()=>clearTimeout(it)}},[r,t?.codigo_empresa]),v.useEffect(()=>{const Y=()=>{(Date.now()-(W.current||0)>3e4||F.current===0)&&$()},ve=()=>{document.visibilityState==="visible"&&(Date.now()-(W.current||0)>3e4||F.current===0)&&$()};return window.addEventListener("focus",Y),document.addEventListener("visibilitychange",ve),()=>{window.removeEventListener("focus",Y),document.removeEventListener("visibilitychange",ve)}},[r,t?.codigo_empresa]),v.useEffect(()=>{r&&$()},[w.status,r]),v.useEffect(()=>{const Y=setTimeout(()=>{r&&$()},300);return()=>clearTimeout(Y)},[y,r]);const[H,ce]=v.useState("N/A");v.useEffect(()=>{let Y=!0;return(async()=>{try{const ve=await VQe({limit:1,codigoEmpresa:t?.codigo_empresa});if(!Y)return;if(Array.isArray(ve)&&ve.length>0){const Ve=ve[0];ce(`${Ve.name} (${Ve.total})`)}else ce("")}catch{Y&&ce("N/A")}})(),()=>{Y=!1}},[t?.codigo_empresa]);const[oe,L]=v.useState(!1),[U,J]=v.useState(()=>{const Y=new Date;return Y.setHours(0,0,0,0),Y}),[V,Z]=v.useState(!1),[K,he]=v.useState(()=>new Date),[te,me]=v.useState(!1),[Ee,Se]=v.useState([]),We=async()=>{try{me(!0);const Y=await UQe({from:U,to:K,codigoEmpresa:t?.codigo_empresa});Se(Y||[])}catch(Y){e({title:"Falha ao carregar vendas do perodo",description:Y?.message||"Tente novamente",variant:"destructive"})}finally{me(!1)}},be=v.useMemo(()=>{const Y=new Date;return{mostSold:H,lowStock:n.filter(ve=>ve.status==="low_stock"||ve.stock>0&&ve.stock<=ve.minStock).length,expired:n.filter(ve=>ve.validade&&ve.validade<Y).length}},[n,H]),ne=v.useMemo(()=>{const Y=new Date;return n.filter(ve=>{const Ve=p==="all"?!0:p==="low_stock"?ve.status==="low_stock"||ve.stock>0&&ve.stock<=ve.minStock:p==="expired"?ve.validade&&ve.validade<Y:!1,$e=w.status==="all"?!0:ve.status===w.status,Le=w.type==="all"||ve.type===w.type,it=w.category==="all"||ve.category===w.category;return Ve&&$e&&Le&&it})},[n,p,w]),Qt=v.useMemo(()=>{const Y=[...ne],ve=O.dir==="asc"?1:-1,Ve=(Le,it)=>Number.isFinite(Le)?Le:it,$e=Le=>{if(!Le)return NaN;if(Le instanceof Date)return Le.getTime();const it=new Date(Le);return Number.isNaN(it.getTime())?NaN:it.getTime()};return Y.sort((Le,it)=>{if(O.by==="code"){const Ye=Ve(parseInt((Le.code||"").trim(),10),1/0),Ge=Ve(parseInt((it.code||"").trim(),10),1/0);return Ye===Ge?0:Ye>Ge?ve:-ve}if(O.by==="name"){const Ye=(Le.name||"").toString(),Ge=(it.name||"").toString();return Ye.localeCompare(Ge,"pt-BR",{sensitivity:"base"})*ve}if(O.by==="validade"){const Ye=Ve($e(Le.validade),1/0),Ge=Ve($e(it.validade),1/0);return Ye===Ge?0:Ye>Ge?ve:-ve}return 0}),Y},[ne,O]),bt=Y=>{R(ve=>ve.by===Y?{by:Y,dir:ve.dir==="asc"?"desc":"asc"}:{by:Y,dir:"asc"})},Pt=Y=>{x(ve=>ve===Y?"all":Y)},Qe=()=>{J(()=>{const Y=new Date;return Y.setHours(0,0,0,0),Y}),he(new Date),L(!0),setTimeout(We,0)},ft=(Y,ve)=>{_(Ve=>({...Ve,[Y]:ve}))},mt=()=>{d(null),h(!0)},_t=Y=>{d(Y),h(!0)},ue=()=>{try{oZe(Qt),e({title:"Exportao concluda",description:`${Qt.length} produto(s) exportado(s).`,variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(Y){console.error("[Produtos] export:error",Y);const ve=Vc(Y,{action:"export"});e({title:ve.title,description:ve.description,variant:"destructive"})}},Ct=async()=>{const Y=t?.codigo_empresa||null;if(!(!r||!Y))try{const ve=await Zz({codigoEmpresa:Y});if(!B.current)return;s(ve);try{localStorage.setItem(`produtos:cats:${Y}`,JSON.stringify(ve))}catch{}}catch(ve){console.error("[Categorias] load on mount:error",ve)}},At=async Y=>{s(ve=>{if(ve.includes(Y))return ve;const Ve=[...ve,Y];return Ve.sort(($e,Le)=>$e.localeCompare(Le,"pt-BR")),Ve});try{await WQe(Y),await Ct()}catch(ve){s($e=>$e.filter(Le=>Le!==Y)),console.error("[Categorias] add:error",ve);const Ve=Vc(ve,{action:"save"});e({title:Ve.title,description:Ve.description,variant:"destructive"})}},Wt=async Y=>{if(n.some($e=>$e.category===Y&&$e.status!=="inactive"))throw new Error("Categoria possui produtos ativos vinculados");const Ve=i;s($e=>$e.filter(Le=>Le!==Y));try{await HQe(Y),await Ct()}catch($e){s(Ve),console.error("[Categorias] remove:error",$e);const Le=Vc($e,{action:"save"});e({title:Le.title,description:Le.description,variant:"destructive"})}},wt=async Y=>{try{if(console.log("[Produtos] handleSaveProduct",Y),!Y||typeof Y!="object"){console.warn("[Produtos] handleSaveProduct chamado sem payload vlido. Ignorando.");return}if(!Y.code){const $e=n.map(it=>(it.code||"").trim()).filter(it=>/^\d+$/.test(it)).map(it=>parseInt(it,10)),Le=$e.length?Math.max(...$e)+1:1;Y.code=String(Le).padStart(4,"0")}const ve=t?.codigo_empresa||null,Ve=async $e=>{const it=new Promise((Ye,Ge)=>setTimeout(()=>Ge(new Error("Timeout update/create (12s)")),12e3));return Promise.race([$e,it])};if(Y.id){const $e=await Ve(cM(Y.id,Y,{codigoEmpresa:ve}));console.log("[Produtos] Produto atualizado - active:",$e.active,"status:",$e.status),a(Le=>Le.map(it=>it.id===$e.id?$e:it)),await $(),console.log("[Produtos] Refetch concludo aps update")}else{const $e=await Ve(AT(Y,{codigoEmpresa:ve}));console.log("[Produtos] Produto criado",$e),a(Le=>[$e,...Le]),setTimeout(()=>{$().catch(Le=>console.error("[Produtos] refetch ps-create falhou",Le))},0)}}catch(ve){console.error("[Produtos] Erro no handleSaveProduct",ve);const Ve=Vc(ve,{action:"save"});throw e({title:Ve.title,description:Ve.description,variant:"destructive"}),ve}},Ae=Y=>{I(Y),A(!0)},qe=async()=>{if(E?.id)try{M(!0),await Xre(E.id),a(ve=>ve.filter(Ve=>Ve.id!==E.id)),await $();const Y=Vc(null,{action:"delete"});e({variant:"success",title:Y.title,description:`Produto "${E.name}" foi inativado com sucesso.`})}catch(Y){const ve=Vc(Y,{action:"delete"});e({variant:"destructive",...ve})}finally{M(!1),A(!1),I(null)}},Ot=v.useMemo(()=>{const Y=n.map(Ve=>(Ve.code||"").trim()).filter(Ve=>/^\d+$/.test(Ve)).map(Ve=>parseInt(Ve,10)),ve=Y.length?Math.max(...Y)+1:1;return String(ve).padStart(4,"0")},[n]);return o.jsxs(o.Fragment,{children:[o.jsxs(Pr.div,{variants:iZe,initial:"hidden",animate:"visible",className:"flex flex-col",children:[o.jsxs(Pr.div,{variants:PT,className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black text-text-primary tracking-tighter",children:"Controle de Produtos"}),o.jsx("p",{className:"text-text-secondary",children:"Controle total sobre seu inventrio e estoque."})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(ye,{variant:"outline",size:"icon",onClick:()=>c(Y=>!Y),title:l?"Ocultar resumo":"Mostrar resumo","aria-label":l?"Ocultar resumo":"Mostrar resumo",children:l?o.jsx(Jb,{className:"h-4 w-4"}):o.jsx(Qb,{className:"h-4 w-4"})}),o.jsxs(ye,{variant:"outline",onClick:ue,className:"hidden sm:flex",children:[o.jsx(po,{className:"mr-2 h-4 w-4"})," Exportar"]}),o.jsxs(ye,{variant:"outline",onClick:ue,className:"sm:hidden",children:[o.jsx(po,{className:"h-4 w-4 mr-1"})," CSV"]}),o.jsxs(ye,{variant:"secondary",onClick:()=>Z(!0),className:"hidden sm:flex",children:[o.jsx(uc,{className:"mr-2 h-4 w-4"})," Importar XML"]}),o.jsxs(ye,{variant:"secondary",onClick:()=>Z(!0),className:"sm:hidden",children:[o.jsx(uc,{className:"h-4 w-4 mr-1"})," XML"]}),o.jsxs(ye,{onClick:mt,className:"hidden sm:flex",children:[o.jsx(oi,{className:"mr-2 h-4 w-4"})," Novo Produto"]}),o.jsxs(ye,{onClick:mt,className:"sm:hidden",children:[o.jsx(oi,{className:"h-4 w-4 mr-1"})," Produto"]})]})]}),l&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsx(sP,{icon:t1,title:"Mais Vendido (Dia)",value:be.mostSold,subtitle:"Produto com mais sadas hoje",color:"text-brand",onClick:Qe}),o.jsx(sP,{icon:sp,title:"Estoque Baixo",value:be.lowStock,subtitle:"Produtos precisando de reposio",color:"text-warning",onClick:()=>Pt("low_stock"),isActive:p==="low_stock"}),o.jsx(sP,{icon:k2,title:"Vencidos",value:be.expired,subtitle:"Produtos fora da data de validade",color:"text-danger",onClick:()=>Pt("expired"),isActive:p==="expired"})]}),o.jsx(cn,{open:oe,onOpenChange:L,children:o.jsxs(on,{className:"max-w-2xl",onKeyDown:Y=>Y.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold",children:"Vendas por Perodo"}),o.jsx(hn,{children:"Selecione o intervalo de datas e visualize os produtos vendidos."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Incio"}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:"w-full justify-start",children:[o.jsx(k2,{className:"mr-2 h-4 w-4"}),U?ln(U,"dd/MM/yyyy"):"Incio"]})}),o.jsx(ad,{className:"p-0 w-[300px]",children:o.jsx("div",{className:"w-[300px] min-h-[332px]",children:o.jsx(Ju,{mode:"single",selected:U,onSelect:Y=>Y&&J(Y),initialFocus:!0,fixedWeeks:!0})})})]})]}),o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Fim"}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:"w-full justify-start",children:[o.jsx(k2,{className:"mr-2 h-4 w-4"}),K?ln(K,"dd/MM/yyyy"):"Fim"]})}),o.jsx(ad,{className:"p-0 w-[300px]",children:o.jsx("div",{className:"w-[300px] min-h-[332px]",children:o.jsx(Ju,{mode:"single",selected:K,onSelect:Y=>Y&&he(Y),initialFocus:!0,fixedWeeks:!0})})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ye,{type:"button",onClick:We,disabled:te,className:"w-full",children:te?"Carregando...":"Aplicar"}),o.jsx(ye,{type:"button",variant:"secondary",onClick:()=>{try{const Y=Ee||[],ve=";",Ve=()=>{const Ye=["Produto;Quantidade"];for(const Ge of Y)Ye.push(`${(Ge.name||"").replace(/;/g,",")}${ve}${Number(Ge.total||0)}`);return Ye.join(`
`)},$e=new Blob(["\uFEFF"+Ve()],{type:"text/csv;charset=utf-8;"}),Le=URL.createObjectURL($e),it=document.createElement("a");it.href=Le,it.download="vendas-periodo.csv",document.body.appendChild(it),it.click(),document.body.removeChild(it),URL.revokeObjectURL(Le),e({title:"Exportao concluda",description:`${Y.length} linha(s)`,variant:"success"})}catch(Y){e({title:"Falha ao exportar",description:Y?.message||"Tente novamente",variant:"destructive"})}},children:"Exportar CSV"})]})]}),o.jsx("div",{className:"mt-3 border rounded-md max-h-[50vh] overflow-auto thin-scroll",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-surface-2",children:[o.jsx("th",{className:"text-left p-2",children:"Produto"}),o.jsx("th",{className:"text-right p-2",children:"Quantidade"})]})}),o.jsxs("tbody",{children:[(Ee||[]).length===0&&!te&&o.jsx("tr",{children:o.jsx("td",{colSpan:2,className:"p-3 text-text-muted",children:"Nenhum item no perodo."})}),(Ee||[]).map(Y=>o.jsxs("tr",{className:"border-t border-border",children:[o.jsx("td",{className:"p-2",children:Y.name}),o.jsx("td",{className:"p-2 text-right font-mono",children:Number(Y.total||0)})]},Y.id))]})]})}),o.jsx($n,{children:o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",children:"Fechar"})})})]})}),o.jsxs(Pr.div,{variants:PT,className:"bg-surface rounded-lg border border-border flex flex-col",children:[o.jsxs("div",{className:"p-3 pb-4 sm:p-4 border-b border-border space-y-3 flex-shrink-0",children:[o.jsxs("div",{className:"relative w-full",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar por nome ou cdigo...",className:"pl-9 text-sm",value:y,onChange:Y=>b(Y.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:items-center gap-2",children:[o.jsxs(Yn,{value:w.type,onValueChange:Y=>ft("type",Y),children:[o.jsx(Hn,{className:"text-xs sm:text-sm",children:o.jsx(Xn,{})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"all",children:"Todos Tipos"}),o.jsx(qt,{value:"Venda",children:"Venda"}),o.jsx(qt,{value:"Uso Interno",children:"Uso Interno"})]})]}),o.jsxs(Yn,{value:w.category,onValueChange:Y=>ft("category",Y),children:[o.jsx(Hn,{className:"text-xs sm:text-sm",children:o.jsx(Xn,{})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"all",children:"Categorias"}),i.map(Y=>o.jsx(qt,{value:Y,children:Y},Y))]})]}),o.jsxs(Yn,{value:w.status,onValueChange:Y=>ft("status",Y),children:[o.jsx(Hn,{className:"text-xs sm:text-sm",children:o.jsx(Xn,{})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"all",children:"Todos Status"}),o.jsx(qt,{value:"active",children:"Ativo"}),o.jsx(qt,{value:"low_stock",children:"Estoque Baixo"}),o.jsx(qt,{value:"inactive",children:"Inativo"})]})]}),o.jsxs(ye,{variant:"outline",onClick:()=>g(!0),className:"text-xs sm:text-sm",size:"sm",children:[o.jsx(pue,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"})," Categorias"]})]})]}),o.jsx("div",{children:Qt.length===0?o.jsxs("div",{className:"p-10 text-center text-text-secondary",children:[o.jsx("p",{className:"text-lg mb-3",children:"Nenhum produto cadastrado."}),o.jsxs(ye,{onClick:mt,children:[o.jsx(oi,{className:"mr-2 h-4 w-4"}),"Cadastrar primeiro produto"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden p-4 space-y-3",children:Qt.map(Y=>o.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base text-text-primary truncate",title:Y.name,children:Y.name}),o.jsx("p",{className:"text-xs text-text-muted mt-0.5",children:Y.category||"Sem categoria"})]}),o.jsx("span",{className:kt("inline-flex px-2 py-0.5 rounded-full text-xs border flex-shrink-0",Y.status==="active"&&"bg-emerald-50/5 border-emerald-500/30 text-emerald-400",Y.status==="low_stock"&&"bg-amber-50/5 border-amber-500/30 text-amber-400",Y.status==="inactive"&&"bg-surface-2 border-border text-text-muted"),children:Y.status==="active"?"Ativo":Y.status==="low_stock"?"Estoque Baixo":"Inativo"})]}),Y.code&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Cdigo: "}),o.jsx("span",{className:"text-sm font-mono",children:Y.code})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Preo"}),o.jsxs("span",{className:"text-sm font-bold text-text-primary",children:["R$ ",Y.price.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Estoque"}),o.jsx("span",{className:"text-sm font-medium",children:Y.stock})]}),Y.validade&&o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Validade"}),o.jsx("span",{className:"text-sm font-medium",children:(()=>{const ve=Y.validade instanceof Date?Y.validade:v$(String(Y.validade));return isNaN(ve)?"-":ln(ve,"dd/MM/yyyy")})()})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>_t(Y),className:"flex-1",children:[o.jsx(Zc,{className:"h-3 w-3 mr-1"})," Editar"]}),o.jsx(ye,{variant:"outline",size:"sm",onClick:ve=>{ve.stopPropagation(),Ae(Y)},className:"text-danger hover:text-danger",children:o.jsx(S_,{className:"h-3 w-3"})})]})]},Y.id))}),o.jsx("div",{className:"hidden md:block rounded-lg border border-border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm bg-surface table-fixed",children:[o.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:o.jsxs("tr",{className:"border-b border-border",children:[o.jsxs("th",{className:"p-3 text-left font-semibold select-none cursor-pointer whitespace-nowrap w-[110px]",onClick:()=>bt("code"),children:["Cdigo ",O.by==="code"?O.dir==="asc"?"":"":""]}),o.jsxs("th",{className:"p-3 text-left font-semibold select-none cursor-pointer whitespace-nowrap w-[40%]",onClick:()=>bt("name"),children:["Produto ",O.by==="name"?O.dir==="asc"?"":"":""]}),o.jsx("th",{className:"p-3 text-left font-semibold whitespace-nowrap w-[18%]",children:"Categoria"}),o.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[120px]",children:"Preo"}),o.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[110px]",children:"Estoque"}),o.jsxs("th",{className:"p-3 text-center font-semibold select-none cursor-pointer whitespace-nowrap w-[120px]",onClick:()=>bt("validade"),children:["Validade ",O.by==="validade"?O.dir==="asc"?"":"":""]}),o.jsx("th",{className:"p-3 text-center font-semibold whitespace-nowrap w-[140px]",children:"Status"}),o.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[90px]",children:"Aes"})]})}),o.jsx("tbody",{className:"text-text-primary divide-y divide-border",children:Qt.map(Y=>o.jsxs("tr",{className:"hover:bg-surface-2 transition-colors group cursor-pointer align-middle",children:[o.jsx("td",{className:"p-3 font-mono text-sm text-text-secondary align-middle whitespace-nowrap",onClick:()=>_t(Y),children:Y.code||"-"}),o.jsx("td",{className:"p-3 font-semibold align-middle text-text-primary whitespace-nowrap overflow-hidden text-ellipsis",onClick:()=>_t(Y),title:Y.name,children:Y.name}),o.jsx("td",{className:"p-3 text-text-secondary align-middle whitespace-nowrap",onClick:()=>_t(Y),children:Y.category}),o.jsxs("td",{className:"p-3 text-right font-mono tabular-nums align-middle whitespace-nowrap",onClick:()=>_t(Y),children:["R$ ",Y.price.toFixed(2)]}),o.jsx("td",{className:"p-3 text-right font-mono tabular-nums align-middle whitespace-nowrap",onClick:()=>_t(Y),children:Y.stock}),o.jsx("td",{className:"p-3 text-center font-mono tabular-nums whitespace-nowrap",onClick:()=>_t(Y),children:(()=>{if(!Y.validade)return"-";const ve=Y.validade instanceof Date?Y.validade:v$(String(Y.validade));return isNaN(ve)?"-":ln(ve,"dd/MM/yy")})()}),o.jsx("td",{className:"p-3 text-center whitespace-nowrap",onClick:()=>_t(Y),children:o.jsx("span",{className:kt("px-2 py-1 text-xs font-bold rounded-full",Y.status==="active"&&"bg-success/10 text-success",Y.status==="low_stock"&&"bg-warning/10 text-warning",Y.status==="inactive"&&"bg-danger/10 text-danger"),children:Y.status==="active"?"Ativo":Y.status==="low_stock"?"Estoque Baixo":"Inativo"})}),o.jsx("td",{className:"p-3 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ye,{variant:"ghost",size:"icon",className:"h-8 w-8 text-text-muted hover:text-danger",onClick:ve=>{ve.stopPropagation(),Ae(Y)},children:o.jsx(S_,{size:14})})})})]},Y.id))})]})})]})})]})]}),o.jsx(sZe,{open:f,onOpenChange:h,product:u,categories:i,onSave:wt,onCreateCategory:At,suggestedCode:u?void 0:Ot,onRefreshProducts:$,products:n}),o.jsx(cn,{open:P,onOpenChange:A,children:o.jsxs(on,{className:"sm:max-w-[480px]",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Excluir produto"}),o.jsxs(hn,{children:["Tem certeza que deseja excluir o produto",E?` "${E.name}"`:"","? Esta ao no pode ser desfeita."]})]}),o.jsxs($n,{children:[o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",disabled:k,children:"Cancelar"})}),o.jsx(ye,{type:"button",variant:"destructive",onClick:qe,disabled:k,children:k?"Excluindo...":"Excluir"})]})]})}),o.jsx(rZe,{open:V,onOpenChange:Z,products:n,codigoEmpresa:t?.codigo_empresa,onSuccess:()=>{$(),Z(!1)}}),o.jsx(cZe,{open:m,onOpenChange:g,categories:i,onAddCategory:At,onRemoveCategory:Wt})]})}const bs=se.forwardRef(({className:e,...t},r)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:r,className:kt("w-full caption-bottom text-sm",e),...t})}));bs.displayName="Table";const ws=se.forwardRef(({className:e,...t},r)=>o.jsx("thead",{ref:r,className:kt("[&_tr]:border-b",e),...t}));ws.displayName="TableHeader";const _s=se.forwardRef(({className:e,...t},r)=>o.jsx("tbody",{ref:r,className:kt("[&_tr:last-child]:border-0",e),...t}));_s.displayName="TableBody";const dZe=se.forwardRef(({className:e,...t},r)=>o.jsx("tfoot",{ref:r,className:kt("bg-primary font-medium text-primary-foreground",e),...t}));dZe.displayName="TableFooter";const ma=se.forwardRef(({className:e,...t},r)=>o.jsx("tr",{ref:r,className:kt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ma.displayName="TableRow";const Kr=se.forwardRef(({className:e,...t},r)=>o.jsx("th",{ref:r,className:kt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Kr.displayName="TableHead";const Dr=se.forwardRef(({className:e,...t},r)=>o.jsx("td",{ref:r,className:kt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Dr.displayName="TableCell";const fZe=se.forwardRef(({className:e,...t},r)=>o.jsx("caption",{ref:r,className:kt("mt-4 text-sm text-muted-foreground",e),...t}));fZe.displayName="TableCaption";const hZe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Zre={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},a2=({icon:e,title:t,value:r,color:n,onClick:a,isActive:i})=>{const s=e;return o.jsxs(Pr.div,{variants:Zre,className:kt("bg-surface rounded-lg border p-4 flex items-center gap-4 cursor-pointer transition-all duration-200",i?"border-brand ring-2 ring-brand/50":"border-border hover:border-brand/50"),onClick:a,children:[o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n}/20`,children:o.jsx(s,{className:`w-6 h-6 ${n}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-text-secondary text-sm font-medium",children:t}),o.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r})]})]})};function mZe({open:e,onOpenChange:t,client:r,onEdit:n,onInactivate:a,codigoEmpresa:i}){const{toast:s}=Qa(),l={scheduled:{bg:"bg-[#3B82F6]/10",text:"text-[#3B82F6]",border:"border-[#3B82F6]/30"},confirmed:{bg:"bg-[#22C55E]/10",text:"text-[#22C55E]",border:"border-[#22C55E]/30"},in_progress:{bg:"bg-[#FACC15]/10",text:"text-[#FACC15]",border:"border-[#FACC15]/30"},finished:{bg:"bg-[#6B7280]/10",text:"text-[#6B7280]",border:"border-[#6B7280]/30"},canceled:{bg:"bg-[#EF4444]/10",text:"text-[#EF4444]",border:"border-[#EF4444]/30"},absent:{bg:"bg-[#F97316]/10",text:"text-[#F97316]",border:"border-[#F97316]/30"}},c=({label:O,value:R})=>o.jsxs("div",{className:"grid grid-cols-12 items-start gap-3 py-2 border-b border-border/50",children:[o.jsx("div",{className:"col-span-5 sm:col-span-4",children:o.jsx("span",{className:"block text-[11px] uppercase tracking-wide text-text-muted font-semibold",children:O})}),o.jsx("div",{className:"col-span-7 sm:col-span-8",children:o.jsx("span",{className:"block text-sm font-medium text-text-primary break-words",children:R})})]}),[u,d]=v.useState(!1),[f,h]=v.useState([]),[m,g]=v.useState(!1),[p,x]=v.useState([]),y=v.useRef(!1),b=v.useRef(!1),[w,_]=v.useState(!1),[j,N]=v.useState(null),[P,A]=v.useState(!1),[k,M]=v.useState(null),E=v.useMemo(()=>{try{const O=(f||[]).map(B=>({kind:"comanda",ts:new Date(B.aberto_em||B.created_at||0).getTime(),data:B})),R=(p||[]).map(B=>({kind:"agendamento",ts:new Date(B.inicio||0).getTime(),data:B}));return[...O,...R].sort((B,W)=>W.ts-B.ts).slice(0,10)}catch{return[]}},[f,p]),I=async O=>{try{if(_(!0),N(O?.kind||null),A(!0),M(null),O?.kind==="comanda"){const R=O?.data?.comanda_id;if(!R){A(!1);return}let B=Ne.from("comanda_itens").select("id, quantidade, preco_unitario, desconto, produto:produtos!comanda_itens_produto_id_fkey ( nome )").eq("comanda_id",R);i&&(B=B.eq("codigo_empresa",i));const{data:W}=await B,F=(W||[]).map(K=>({id:K.id,quantidade:K.quantidade,preco_unitario:K.preco_unitario,desconto:K.desconto,produto_nome:K.produto?.[0]?.nome||K.produto?.nome||"Item"}));let $=Ne.from("pagamentos").select("id, valor, status, recebido_em, metodo").eq("comanda_id",R);i&&($=$.eq("codigo_empresa",i));const{data:H}=await $,ce=H||[];let oe=Ne.from("comanda_clientes").select("cliente:clientes!comanda_clientes_cliente_id_fkey ( id, nome, email, telefone )").eq("comanda_id",R);i&&(oe=oe.eq("codigo_empresa",i));const{data:L}=await oe,U=(L||[]).map(K=>K.cliente?.[0]||K.cliente).filter(Boolean),J=(F||[]).reduce((K,he)=>K+(Number(he.quantidade||0)*Number(he.preco_unitario||0)-Number(he.desconto||0)),0),V=(ce||[]).filter(K=>(K.status||"Pago")!=="Cancelado"&&(K.status||"Pago")!=="Estornado").reduce((K,he)=>K+Number(he.valor||0),0),Z=Math.max(0,J-V);M({comandaId:R,mesa_title:O?.data?.mesa_title||"Balco",status:O?.data?.status||"open",itens:F||[],pagamentos:ce||[],clientes:U,totalItens:J,totalPagos:V,saldo:Z,aberto_em:O?.data?.aberto_em||O?.data?.created_at||null,fechado_em:O?.data?.fechado_em||null})}else if(O?.kind==="agendamento"){const R=O?.data?.id;if(!R){A(!1);return}let B=[];try{const{data:$}=await Ne.from("agendamento_participantes").select("cliente_id, nome, valor_cota, status_pagamento").eq("agendamento_id",R).limit(200);B=$||[]}catch{B=[]}const W=Array.from(new Set((B||[]).map($=>$.cliente_id).filter(Boolean)));let F=[];if(F=(B||[]).map($=>({id:$.cliente_id,nome:$.nome||null,email:null,telefone:null,codigo:null,valor_cota:$.valor_cota??null,status_pagamento:$.status_pagamento||null})),W.length>0)try{const{data:$}=await Ne.from("clientes").select("id,nome,email,telefone,codigo").in("id",W),H=new Map(($||[]).map(ce=>[String(ce.id),ce]));F=F.map(ce=>{const oe=H.get(String(ce.id));return oe?{...ce,nome:ce.nome||oe.nome,email:oe.email,telefone:oe.telefone,codigo:oe.codigo}:ce})}catch{}M({id:R,inicio:O?.data?.inicio||null,fim:O?.data?.fim||null,status:O?.data?.status||null,modalidade:O?.data?.modalidade||null,quadra_nome:O?.data?.quadra_nome||null,participantes:F})}}catch{}finally{A(!1)}};return v.useEffect(()=>{let O=!1;if(e&&(y.current=!1,b.current=!1),e&&r?.id&&!i)return d(!1),g(!1),()=>{O=!0};const R=async()=>{if(!e||!r?.id)return;d(!0);let W;try{W=setTimeout(()=>d(!1),1e4)}catch{}try{console.debug("[ClientDetailsModal] loadHistory: start",{clientId:r.id,codigoEmpresa:i});let F=Ne.from("comanda_clientes").select("comanda_id, created_at").eq("cliente_id",r.id).order("created_at",{ascending:!1}).limit(10);i&&(F=F.eq("codigo_empresa",i));const{data:$,error:H}=await F;if($&&$.length,H)throw H;const ce=Array.from(new Set(($||[]).map(_t=>_t.comanda_id).filter(Boolean)));let oe=Ne.from("comandas").select("id, status, aberto_em, fechado_em").eq("cliente_id",r.id).order("aberto_em",{ascending:!1}).limit(10);i&&(oe=oe.eq("codigo_empresa",i));const{data:L,error:U}=await oe;if(U)throw U;const J=Array.from(new Set((L||[]).map(_t=>_t.id))),V=Array.from(new Set([...ce,...J]));if(V.length===0){h([]),d(!1);return}let Z=Ne.from("comandas").select("id,status,aberto_em,fechado_em, mesa:mesas!comandas_mesa_id_fkey ( nome, numero )").in("id",V);i&&(Z=Z.eq("codigo_empresa",i));const{data:K,error:he}=await Z;if(he)throw he;const te=new Map((K||[]).map(_t=>[_t.id,_t]));let me=Ne.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",V);i&&(me=me.eq("codigo_empresa",i));const{data:Ee,error:Se}=await me;if(Se)throw Se;const We={};for(const _t of Ee||[]){const ue=Number(_t.quantidade||0)*Number(_t.preco_unitario||0),Ct=Number(_t.desconto||0);We[_t.comanda_id]=(We[_t.comanda_id]||0)+Math.max(0,ue-Ct)}let be=Ne.from("pagamentos").select("comanda_id, valor, status, recebido_em, metodo").in("comanda_id",V);i&&(be=be.eq("codigo_empresa",i));const{data:ne,error:Qt}=await be;if(Qt)throw Qt;const bt={};for(const _t of ne||[])(_t.status||"Pago")!=="Cancelado"&&(_t.status||"Pago")!=="Estornado"&&(bt[_t.comanda_id]=(bt[_t.comanda_id]||0)+Number(_t.valor||0));const Pt=(_t,ue=null)=>{const Ct=te.get(_t)||{},At=Number(We[_t]||0),Wt=Number(bt[_t]||0),wt=Math.max(0,At-Wt),Ae=Ct.mesa?.[0]?.nome||Ct.mesa?.nome||null,qe=Ct.mesa?.[0]?.numero||Ct.mesa?.numero||null,Ot=Ae||(qe!=null?`Mesa ${qe}`:"Balco");return{comanda_id:_t,created_at:ue,aberto_em:Ct.aberto_em||null,fechado_em:Ct.fechado_em||null,status:Ct.status||"open",total:At,pago:Wt,saldo:wt,mesa_title:Ot}},Qe=($||[]).map(_t=>Pt(_t.comanda_id,_t.created_at)),ft=(L||[]).filter(_t=>!(ce||[]).includes(_t.id)).map(_t=>Pt(_t.id,_t.aberto_em)),mt=[...Qe,...ft].sort((_t,ue)=>{const Ct=new Date(_t.aberto_em||_t.created_at||0).getTime();return new Date(ue.aberto_em||ue.created_at||0).getTime()-Ct}).slice(0,10);if(!O&&mt.length===0&&!y.current){y.current=!0,console.debug("[ClientDetailsModal] loadHistory: empty result, retrying once..."),setTimeout(()=>{e&&r?.id&&R()},700);return}O||h(mt)}catch(F){s({title:"Falha ao carregar histrico do cliente",description:F?.message||"Tente novamente",variant:"destructive"})}finally{try{clearTimeout(W)}catch{}O||d(!1)}},B=async()=>{if(!e||!r?.id)return;g(!0);let W;try{W=setTimeout(()=>g(!1),1e4)}catch{}try{console.debug("[ClientDetailsModal] loadBookings: start",{clientId:r.id,codigoEmpresa:i});let F=Ne.from("agendamentos").select(`
            id, inicio, fim, status, modalidade,
            quadra:quadra_id ( nome )
          `).eq("cliente_id",r.id).order("inicio",{ascending:!1}).limit(10);i&&(F=F.eq("codigo_empresa",i));const{data:$,error:H}=await F;if(H)throw H;const ce=($||[]).map(te=>({id:te.id,inicio:te.inicio,fim:te.fim,status:te.status,modalidade:te.modalidade,quadra_nome:te.quadra?.[0]?.nome||te.quadra?.nome||null}));let oe=Ne.from("v_agendamento_participantes").select("agendamento_id").eq("cliente_id",r.id).limit(30);const{data:L,error:U}=await oe;if(U)throw U;const J=Array.from(new Set((L||[]).map(te=>te.agendamento_id).filter(Boolean))),V=new Set((ce||[]).map(te=>te.id)),Z=J.filter(te=>!V.has(te));let K=[];if(Z.length>0){let te=Ne.from("agendamentos").select(`
              id, inicio, fim, status, modalidade,
              quadra:quadra_id ( nome )
            `).in("id",Z);i&&(te=te.eq("codigo_empresa",i));const{data:me,error:Ee}=await te;if(Ee)throw Ee;K=(me||[]).map(Se=>({id:Se.id,inicio:Se.inicio,fim:Se.fim,status:Se.status,modalidade:Se.modalidade,quadra_nome:Se.quadra?.[0]?.nome||Se.quadra?.nome||null}))}const he=[...ce,...K].sort((te,me)=>new Date(me.inicio)-new Date(te.inicio)).slice(0,10);if(!O&&he.length===0&&!b.current){b.current=!0,console.debug("[ClientDetailsModal] loadBookings: empty result, retrying once..."),setTimeout(()=>{e&&r?.id&&B()},700);return}O||x(he)}catch(F){console.warn("[ClientDetailsModal] Falha ao carregar agendamentos do cliente:",F)}finally{try{clearTimeout(W)}catch{}O||g(!1)}};return R(),B(),()=>{O=!0,e||(d(!1),g(!1))}},[e,r?.id,i]),r?o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto w-full",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Detalhes do Cliente"}),o.jsx(hn,{children:"Informaes cadastrais e histrico recente deste cliente."})]}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-6 sm:space-y-8",children:[o.jsx("div",{className:"overflow-hidden",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"min-w-0",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-extrabold tracking-tight text-text-primary truncate",children:r.nome}),o.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-surface-2 border border-border text-text-secondary",children:["Cdigo: ",o.jsx("span",{className:"text-text-primary font-mono",children:r.codigo})]}),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold border ${r.status==="active"?"bg-emerald-500/10 text-emerald-400 border-emerald-400/30":"bg-rose-500/10 text-rose-400 border-rose-400/30"}`,children:r.status==="active"?"Ativo":"Inativo"}),r.flag_cliente&&o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),r.flag_fornecedor&&o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]}),o.jsx("span",{className:"mt-2 block text-sm text-text-secondary truncate",children:r.email||""})]})})}),o.jsx("div",{className:"grid grid-cols-1 gap-8",children:o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-text-secondary mb-2",children:"Informaes Cadastrais"}),o.jsxs("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg space-y-1",children:[o.jsx(c,{label:"Cdigo",value:r.codigo}),o.jsx(c,{label:"CPF/CNPJ",value:r.cpf||r.cnpj||""}),o.jsx(c,{label:"Telefone",value:r.telefone||""}),o.jsx(c,{label:"Aniversrio",value:r.aniversario?new Date(r.aniversario).toLocaleDateString("pt-BR"):""}),o.jsx(c,{label:"Email",value:r.email||""}),o.jsx(c,{label:"Status",value:r.status==="active"?"Ativo":"Inativo"})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[o.jsx(rue,{className:"w-5 h-5 text-text-secondary"}),o.jsx("h4",{className:"font-semibold",children:"Histrico Recente"})]}),o.jsx("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg",children:u&&m?o.jsx("div",{className:"text-center py-8 text-sm text-text-muted",children:"Carregando histrico..."}):E&&E.length>0?o.jsx("div",{className:"max-h-64 overflow-y-auto thin-scroll pr-1",children:o.jsx("div",{className:"space-y-3",children:E.map((O,R)=>o.jsxs("div",{className:"group flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3 p-3 rounded-md border border-border/60 bg-background cursor-pointer transition-colors transition-shadow hover:bg-surface-2/60 hover:shadow-md hover:border-brand/30",title:"Clique para ver detalhes",onClick:()=>I(O),children:[o.jsx("div",{className:"min-w-0",children:O.kind==="comanda"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:O.data.mesa_title||"Balco"}),o.jsx("div",{className:"text-xs text-text-secondary truncate",children:(()=>{const B=O.data;return B.aberto_em?new Date(B.aberto_em).toLocaleString("pt-BR"):new Date(B.created_at).toLocaleString("pt-BR")})()})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:O.data.modalidade||"Agendamento"}),o.jsxs("div",{className:"text-xs text-text-secondary truncate",children:[new Date(O.data.inicio).toLocaleString("pt-BR"),"  ",O.data.quadra_nome||"Quadra"]})]})}),o.jsx("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto justify-between sm:justify-end",children:O.kind==="comanda"?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:kt("px-2 py-1 text-[11px] font-semibold rounded-full border",O.data.status==="closed"||O.data.fechado_em?"bg-success/10 text-success border-success/30":O.data.status==="awaiting-payment"?"bg-info/10 text-info border-info/30":"bg-warning/10 text-warning border-warning/30"),children:O.data.status==="closed"||O.data.fechado_em?"Fechada":O.data.status==="awaiting-payment"?"Pagamento":"Em uso"}),o.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[11px] text-text-secondary whitespace-nowrap",children:"Clique para detalhes"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:kt("px-2 py-1 text-[11px] font-semibold rounded-full border",(()=>{const B=String(O.data.status||"").toLowerCase(),W=l[B]||l.scheduled;return`${W.bg} ${W.text} ${W.border}`})()),children:(()=>{switch(O.data.status){case"finished":return"Finalizado";case"canceled":return"Cancelado";case"in_progress":return"Em andamento";case"confirmed":return"Confirmado";case"absent":return"Ausente";case"scheduled":default:return"Agendado"}})()}),o.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[11px] text-text-secondary whitespace-nowrap",children:"Clique para detalhes"})]})})]},`${O.kind}-${R}`))})}):o.jsx("div",{className:"text-center py-8 text-sm text-text-muted",children:"Sem registros recentes para este cliente."})})]}),o.jsx(cn,{open:w,onOpenChange:_,children:o.jsxs(on,{className:"sm:max-w-[700px] w-full max-h-[85vh] overflow-y-auto",children:[o.jsxs(an,{children:[o.jsx(en,{children:j==="comanda"?k?.mesa_title||"Detalhes da Comanda":"Detalhes do Agendamento"}),o.jsx(hn,{children:j==="comanda"?"Itens e pagamentos desta comanda.":"Informaes do agendamento e participantes."}),o.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"text-xs text-text-secondary",children:"Cliente:"}),o.jsx("span",{className:"text-sm font-medium text-text-primary",children:r?.nome||""}),o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-surface-2 border border-border text-text-secondary",children:["Cdigo: ",o.jsx("span",{className:"text-text-primary font-mono",children:r?.codigo??""})]})]})]}),o.jsx("div",{className:"space-y-4",children:P?o.jsx("div",{className:"text-sm text-text-muted",children:"Carregando detalhes..."}):j==="comanda"&&k?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Status"}),o.jsx("p",{className:"font-semibold",children:(()=>{const O=String(k.status||"").toLowerCase();return O==="closed"||k.fechado_em?"Fechada":O==="awaiting-payment"?"Aguardando pagamento":"Aberta"})()})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Abertura"}),o.jsx("p",{className:"font-semibold",children:k.aberto_em?new Date(k.aberto_em).toLocaleString("pt-BR"):""})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Fechamento"}),o.jsx("p",{className:"font-semibold",children:k.fechado_em?new Date(k.fechado_em).toLocaleString("pt-BR"):""})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Itens"}),o.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(k.itens||[]).map(O=>o.jsxs("div",{className:"p-2 flex flex-col sm:grid sm:grid-cols-12 gap-1 sm:gap-2 text-sm",children:[o.jsx("div",{className:"sm:col-span-6 font-medium",children:O.produto_nome||"Item"}),o.jsxs("div",{className:"sm:col-span-2 sm:text-right text-text-muted",children:["Qtd: ",Number(O.quantidade||0)]}),o.jsxs("div",{className:"sm:col-span-2 sm:text-right",children:["R$ ",Number(O.preco_unitario||0).toFixed(2)]}),o.jsx("div",{className:"sm:col-span-2 sm:text-right text-text-secondary",children:Number(O.desconto||0)?`- R$ ${Number(O.desconto||0).toFixed(2)}`:""})]},O.id)),(!k.itens||k.itens.length===0)&&o.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum item."})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Pagamentos"}),o.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(k.pagamentos||[]).map(O=>o.jsxs("div",{className:"p-2 flex items-center justify-between text-sm",children:[o.jsxs("span",{className:"truncate",children:[O.metodo||""," ",O.status?`(${O.status})`:""]}),o.jsxs("span",{className:"font-semibold",children:["R$ ",Number(O.valor||0).toFixed(2)]})]},O.id)),(!k.pagamentos||k.pagamentos.length===0)&&o.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum pagamento registrado."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Total de Itens"}),o.jsxs("p",{className:"font-bold",children:["R$ ",Number(k.totalItens||0).toFixed(2)]})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Total Pago"}),o.jsxs("p",{className:"font-bold text-success",children:["R$ ",Number(k.totalPagos||0).toFixed(2)]})]})]})]}):j==="agendamento"&&k?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Modalidade"}),o.jsx("p",{className:"font-semibold",children:k.modalidade||""})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Quadra"}),o.jsx("p",{className:"font-semibold",children:k.quadra_nome||""})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Incio"}),o.jsx("p",{className:"font-semibold",children:k.inicio?new Date(k.inicio).toLocaleString("pt-BR"):""})]}),o.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Fim"}),o.jsx("p",{className:"font-semibold",children:k.fim?new Date(k.fim).toLocaleString("pt-BR"):""})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Participantes"}),o.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(k.participantes||[]).map((O,R)=>o.jsxs("div",{className:"p-2 text-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3",children:[o.jsx("div",{className:"min-w-0",children:o.jsxs("div",{className:"flex items-center gap-2",children:[O.codigo!==null&&O.codigo!==void 0&&o.jsxs("span",{className:`text-xs font-bold rounded px-1.5 py-0.5 shrink-0 ${String(O.status_pagamento||"").toLowerCase()==="pago"?"text-emerald-400 bg-emerald-600/20 border border-emerald-700/40":"text-amber-400 bg-amber-600/20 border border-amber-700/40"}`,children:["#",O.codigo]}),o.jsx("span",{className:"font-medium truncate",children:O.nome||"Participante"})]})}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto justify-between sm:justify-end",children:[O.valor_cota!=null&&o.jsxs("span",{className:"text-xs font-semibold text-text-secondary",children:["R$ ",Number(O.valor_cota||0).toFixed(2)]}),o.jsx("span",{className:`text-[11px] font-semibold rounded-full px-2 py-0.5 border ${String(O.status_pagamento||"").toLowerCase()==="pago"?"bg-success/10 text-success border-success/30":"bg-warning/10 text-warning border-warning/30"}`,children:String(O.status_pagamento||O.status_pagamento_text||"Pendente")})]})]},`${O.id}-${R}`)),(!k.participantes||k.participantes.length===0)&&o.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum participante encontrado."})]})]})]}):o.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma informao para exibir."})}),o.jsx($n,{children:o.jsx(ye,{variant:"outline",onClick:()=>_(!1),children:"Fechar"})})]})})]}),o.jsxs($n,{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-0 sm:justify-between",children:[!r?.is_consumidor_final&&o.jsx("div",{className:"w-full sm:flex-1",children:o.jsxs(ye,{type:"button",variant:"destructive",className:"bg-red-600 hover:bg-red-500 text-white w-full sm:w-auto",onClick:()=>a?.(r),children:[o.jsx(NW,{className:"mr-2 h-4 w-4"})," Inativar Cliente"]})}),o.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",className:"flex-1 sm:flex-none",children:"Fechar"})}),!r?.is_consumidor_final&&o.jsxs(ye,{onClick:()=>n(r),className:"flex-1 sm:flex-none",children:[o.jsx(Zc,{className:"mr-2 h-4 w-4"})," Editar Cliente"]})]})]})]})}):null}function pZe(){const{toast:e}=Qa(),{userProfile:t,authReady:r}=Wi(),n=Ko(),[a,i]=v.useState(()=>{try{const U=localStorage.getItem("auth:userProfile"),J=U&&JSON.parse(U)?.codigo_empresa||null,V=J?`clientes:list:${J}`:"clientes:list",Z=JSON.parse(localStorage.getItem(V)||"[]");return Array.isArray(Z)?Z:[]}catch{return[]}}),[s,l]=v.useState(!1),[c,u]=v.useState(!0),[d,f]=v.useState(!1),[h,m]=v.useState(!1),[g,p]=v.useState(null),[x,y]=v.useState(null),[b,w]=v.useState({searchTerm:"",status:"all",tipo:"todos"}),_=v.useRef(!1),j=v.useRef(0),N=v.useRef(0),P=v.useRef(!1);v.useEffect(()=>{n.state?.openModal&&!d&&!P.current&&(P.current=!0,f(!0),window.history.replaceState({},document.title))},[n.state?.openModal,d]);const A=async()=>{try{const U=a&&a.length>0;if(U||l(!0),!t?.codigo_empresa)return;const J=`clientes:list:${t.codigo_empresa}`;let V=Ne.from("clientes").select("*, is_consumidor_final").eq("codigo_empresa",t.codigo_empresa).order("codigo",{ascending:!0});if(b.searchTerm.trim()!==""){const me=b.searchTerm.trim();/^\d+$/.test(me)?V=V.or(`codigo.eq.${me},nome.ilike.%${me}%,email.ilike.%${me}%,telefone.ilike.%${me}%`):V=V.or(`nome.ilike.%${me}%,email.ilike.%${me}%,telefone.ilike.%${me}%`)}b.status!=="all"&&(V=V.eq("status",b.status));const Z=setTimeout(()=>{try{if(!U){const me=JSON.parse(localStorage.getItem(J)||"[]");Array.isArray(me)&&me.length>0&&(console.warn("[Clientes] slow fallback: using cached snapshot"),i(me),N.current=me.length)}}catch{}},2e3),{data:K,error:he}=await V;if(he){if(!_.current){_.current=!0,setTimeout(A,900);return}throw he}const te=K||[];if(te.length===0&&U&&!_.current){_.current=!0,setTimeout(A,700);return}_.current=!1,i(te);try{localStorage.setItem(J,JSON.stringify(te))}catch{}N.current=te.length,j.current=Date.now()}catch(U){e({title:"Erro ao carregar clientes",description:U.message,variant:"destructive"})}finally{l(!1);try{clearTimeout(slowFallback)}catch{}}};v.useEffect(()=>{try{const U=localStorage.getItem("auth:userProfile"),J=t?.codigo_empresa||U&&JSON.parse(U)?.codigo_empresa||null;if(J){const V=`clientes:list:${J}`,Z=JSON.parse(localStorage.getItem(V)||"[]");Array.isArray(Z)&&Z.length&&a.length===0&&(i(Z),N.current=Z.length)}}catch{}if(r&&t?.codigo_empresa){const U=setTimeout(A,50);return()=>clearTimeout(U)}return()=>{}},[r,t?.codigo_empresa]),v.useEffect(()=>{if(r&&t?.codigo_empresa){const U=setTimeout(A,200);return()=>clearTimeout(U)}return()=>{}},[b.searchTerm,b.status,r,t?.codigo_empresa]),v.useEffect(()=>{const U=()=>{(Date.now()-(j.current||0)>3e4||N.current===0)&&r&&t?.codigo_empresa&&A()},J=()=>{document.visibilityState==="visible"&&(Date.now()-(j.current||0)>3e4||N.current===0)&&r&&t?.codigo_empresa&&A()};return window.addEventListener("focus",U),document.addEventListener("visibilitychange",J),()=>{window.removeEventListener("focus",U),document.removeEventListener("visibilitychange",J)}},[r,t?.codigo_empresa]);const k=v.useMemo(()=>{const J=new Date().getMonth();return{total:a.length,birthdays:a.filter(V=>V.aniversario&&new Date(V.aniversario).getMonth()===J).length,active:a.filter(V=>V.status==="active").length}},[a]);function M(U){const J=["Cdigo","Tipo Pessoa","Nome/Razo Social","Apelido/Nome Fantasia","CPF","CNPJ","RG","IE","Email","Telefone","Fone 2","Celular 1","Celular 2","WhatsApp","CEP","Endereo","Nmero","Complemento","Bairro","Cidade","UF","Cidade IBGE","Limite Crdito","Tipo Recebimento","Regime Tributrio","Tipo Contribuinte","Aniversrio","Sexo","Estado Civil","Nome da Me","Nome do Pai","Observaes"," Cliente"," Fornecedor"," Funcionrio"," Administradora"," Parceiro","CCF/SPC","Status"],V=";",Z=be=>{if(!be)return"";try{const ne=new Date(be);if(!isNaN(ne)){const Qt=String(ne.getDate()).padStart(2,"0"),bt=String(ne.getMonth()+1).padStart(2,"0"),Pt=ne.getFullYear();return`${Qt}/${bt}/${Pt}`}}catch{}return String(be)},K=be=>{const ne=Number(be??0);return Number.isFinite(ne)?ne.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},he=be=>be?"Sim":"No",te=be=>{const ne=be==null?"":String(be);return/[";\n]/.test(ne)?`"${ne.replace(/"/g,'""')}"`:ne},me=[];me.push("\uFEFF"+J.join(V));for(const be of U){const ne=[be.codigo??"",be.tipo_pessoa||"",be.nome||"",be.apelido||"",be.cpf||"",be.cnpj||"",be.rg||"",be.ie||"",be.email||"",be.telefone||"",be.fone2||"",be.celular1||"",be.celular2||"",be.whatsapp||"",be.cep||"",be.endereco||"",be.numero||"",be.complemento||"",be.bairro||"",be.cidade||"",be.uf||"",be.cidade_ibge||"",K(be.limite_credito),be.tipo_recebimento||"",be.regime_tributario||"",be.tipo_contribuinte||"",Z(be.aniversario),be.sexo||"",be.estado_civil||"",be.nome_mae||"",be.nome_pai||"",be.observacoes||"",he(!!be.flag_cliente),he(!!be.flag_fornecedor),he(!!be.flag_funcionario),he(!!be.flag_administradora),he(!!be.flag_parceiro),he(!!be.flag_ccf_spc),be.status==="active"?"Ativo":"Inativo"].map(te).join(V);me.push(ne)}const Ee=new Blob([me.join(`
`)],{type:"text/csv;charset=utf-8;"}),Se=URL.createObjectURL(Ee),We=document.createElement("a");We.href=Se,We.download="clientes.csv",document.body.appendChild(We),We.click(),document.body.removeChild(We),URL.revokeObjectURL(Se)}const E=()=>{try{M(I),e({title:"Exportao concluda",description:`${I.length} cliente(s) exportado(s).`,variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(U){e({title:"Falha ao exportar",description:U?.message||"No foi possvel gerar o arquivo.",variant:"destructive"})}},I=v.useMemo(()=>(new Date().getMonth(),a.filter(J=>{const V=b.searchTerm.toLowerCase()===""||(J.nome||"").toLowerCase().includes(b.searchTerm.toLowerCase())||(J.cpf||"").includes(b.searchTerm)||(J.telefone||"").includes(b.searchTerm),Z=b.status==="all"||J.status===b.status;let K=!0;return b.tipo==="clientes"?K=J.flag_cliente===!0:b.tipo==="fornecedores"?K=J.flag_fornecedor===!0:b.tipo==="ambos"&&(K=J.flag_cliente===!0&&J.flag_fornecedor===!0),V&&Z&&K})),[a,b]),[O,R]=v.useState({by:"codigo",dir:"asc"}),B=U=>{R(J=>J.by===U&&J.dir==="asc"?{by:U,dir:"desc"}:{by:U,dir:"asc"})},W=v.useMemo(()=>{const U=I.find(he=>he?.is_consumidor_final===!0),V=[...I.filter(he=>he?.is_consumidor_final!==!0)],Z=O.dir==="asc"?1:-1,K=(he,te)=>Number.isFinite(he)?he:te;return V.sort((he,te)=>{if(O.by==="codigo"){const me=K(parseInt(String(he.codigo||"").trim(),10),1/0),Ee=K(parseInt(String(te.codigo||"").trim(),10),1/0);return me===Ee?0:me>Ee?Z:-Z}if(O.by==="nome"){const me=(he.nome||"").toString(),Ee=(te.nome||"").toString();return me.localeCompare(Ee,"pt-BR",{sensitivity:"base"})*Z}return 0}),U?[U,...V]:V},[I,O]),F=U=>{p(U),m(!0)},$=()=>{y(null),f(!0)},H=U=>{m(!1),y(U),f(!0)},ce=async U=>{try{const{error:J}=await Ne.from("clientes").update({status:"inactive"}).eq("id",U.id);if(J)throw J;m(!1),e({title:"Cliente inativado",description:`${U.nome} foi marcado como inativo.`}),A()}catch(J){e({title:"Erro ao inativar cliente",description:J.message,variant:"destructive"})}},oe=()=>{w({searchTerm:"",status:"all",tipo:"todos"})},L=b.searchTerm!==""||b.status!=="all"||b.tipo!=="todos";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-full flex flex-col",children:o.jsxs(Pr.div,{variants:hZe,initial:"hidden",animate:"visible",children:[o.jsxs(Pr.div,{variants:Zre,className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary tracking-tighter",children:"Clientes & Fornecedores"}),o.jsx("p",{className:"text-sm text-text-secondary",children:"Gesto completa de clientes e fornecedores"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsx(ye,{variant:"outline",size:"icon",onClick:()=>u(U=>!U),title:c?"Ocultar resumo":"Mostrar resumo","aria-label":c?"Ocultar resumo":"Mostrar resumo",className:"flex-shrink-0",children:c?o.jsx(Jb,{className:"h-4 w-4"}):o.jsx(Qb,{className:"h-4 w-4"})}),o.jsxs(ye,{variant:"outline",onClick:E,className:"text-sm",children:[o.jsx(po,{className:"mr-2 h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),o.jsx("span",{className:"sm:hidden",children:"CSV"})]}),o.jsxs(ye,{onClick:$,className:"text-sm",children:[o.jsx(oi,{className:"mr-2 h-4 w-4"})," ",o.jsx("span",{className:"hidden xs:inline",children:"Novo"}),o.jsx("span",{className:"xs:hidden",children:"Novo"})]})]})]}),c&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(a2,{icon:As,title:"Total de Clientes",value:a.filter(U=>U.flag_cliente).length,color:"text-brand",onClick:()=>w(U=>({...U,tipo:"clientes"})),isActive:b.tipo==="clientes"}),o.jsx(a2,{icon:As,title:"Total de Fornecedores",value:a.filter(U=>U.flag_fornecedor).length,color:"text-purple-500",onClick:()=>w(U=>({...U,tipo:"fornecedores"})),isActive:b.tipo==="fornecedores"}),o.jsx(a2,{icon:eue,title:"Aniversariantes do Ms",value:k.birthdays,color:"text-info",onClick:()=>w(U=>({...U,tipo:"todos"})),isActive:b.tipo==="todos"}),o.jsx(a2,{icon:e1,title:"Ativos",value:k.active,color:"text-success",onClick:()=>w(U=>({...U,status:"active"})),isActive:b.status==="active"})]}),o.jsx(Pr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:o.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[o.jsxs("div",{className:"p-4 border-b border-border flex flex-col gap-4",children:[o.jsxs("div",{className:"relative w-full",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar por nome, CPF ou telefone...",className:"pl-9",value:b.searchTerm,onChange:U=>w(J=>({...J,searchTerm:U.target.value}))})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs(Yn,{value:b.tipo,onValueChange:U=>w(J=>({...J,tipo:U})),children:[o.jsx(Hn,{className:"w-full sm:w-[200px]",children:o.jsx(Xn,{placeholder:"Tipo"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"todos",children:"Todos"}),o.jsx(qt,{value:"clientes",children:"Apenas Clientes"}),o.jsx(qt,{value:"fornecedores",children:"Apenas Fornecedores"}),o.jsx(qt,{value:"ambos",children:"Clientes e Fornecedores"})]})]}),o.jsxs(Yn,{value:b.status,onValueChange:U=>w(J=>({...J,status:U})),children:[o.jsx(Hn,{className:"w-full sm:w-[180px]",children:o.jsx(Xn,{placeholder:"Status"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"all",children:"Todos os Status"}),o.jsx(qt,{value:"active",children:"Ativos"}),o.jsx(qt,{value:"inactive",children:"Inativos"})]})]}),L&&o.jsxs(ye,{variant:"ghost",onClick:oe,className:"w-full sm:w-auto",children:[o.jsx(j_,{className:"mr-2 h-4 w-4"}),"Limpar Filtros"]})]})]}),o.jsx("div",{className:"md:hidden space-y-3 p-4",children:s?o.jsx("div",{className:"text-center py-8 text-text-muted",children:"Carregando..."}):W.length>0?W.map(U=>{const J=U?.is_consumidor_final===!0;return o.jsxs("div",{className:kt("rounded-lg border bg-surface p-4 space-y-3 cursor-pointer transition-all",J?"bg-gradient-to-r from-amber-500/5 to-transparent hover:from-amber-500/10 border-l-4 border-l-amber-500/40 border-t-border border-r-border border-b-border":"border-border hover:border-brand/50"),onClick:()=>F(U),children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("span",{className:kt("font-mono text-sm font-semibold",J?"text-amber-300/90":"text-text-primary"),children:U.codigo}),o.jsx("span",{className:kt("px-2 py-0.5 text-xs font-semibold rounded-full flex-shrink-0",U.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:U.status==="active"?"Ativo":"Inativo"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:kt("font-semibold text-base mb-1",J?"text-amber-100/90":"text-text-primary"),children:U.nome||""}),J&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-amber-400/70 font-medium mb-1",children:[o.jsx("svg",{className:"w-3 h-3 opacity-60",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Cliente Padro"]}),o.jsx("p",{className:"text-sm text-text-muted",children:U.cpf&&`CPF: ${U.cpf}`||U.cnpj&&`CNPJ: ${U.cnpj}`||(U.apelido?`Apelido: ${U.apelido}`:" ")})]}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[U.flag_cliente&&o.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),U.flag_fornecedor&&o.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]}),(U.telefone||U.email)&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Contato"}),o.jsx("span",{className:"text-sm font-medium",children:U.telefone||U.email})]}),o.jsx("div",{className:"text-xs text-text-muted text-center pt-2 border-t border-border/50",children:"Toque para ver detalhes"})]},U.id)}):o.jsx("div",{className:"text-center py-8 text-text-muted",children:"Nenhum cliente encontrado com os filtros aplicados."})}),o.jsx("div",{className:"hidden md:block",children:o.jsxs(bs,{children:[o.jsx(ws,{className:"sticky top-0 bg-surface-2 z-10",children:o.jsxs(ma,{className:"border-b border-border",children:[o.jsxs(Kr,{className:"select-none cursor-pointer text-text-secondary",onClick:()=>B("codigo"),title:"Ordenar por cdigo",children:["Cdigo ",O.by==="codigo"?O.dir==="asc"?"":"":""]}),o.jsxs(Kr,{className:"text-text-secondary select-none cursor-pointer",onClick:()=>B("nome"),title:"Ordenar por nome",children:["Cliente ",O.by==="nome"?O.dir==="asc"?"":"":""]}),o.jsx(Kr,{className:"text-text-secondary",children:"Contato"}),o.jsx(Kr,{className:"text-text-secondary",children:"Tipo"}),o.jsx(Kr,{className:"text-text-secondary",children:"Status"})]})}),o.jsx(_s,{children:s?o.jsx(ma,{children:o.jsx(Dr,{colSpan:5,className:"h-24 text-center",children:"Carregando..."})}):W.length>0?W.map(U=>{const J=U?.is_consumidor_final===!0;return o.jsxs(ma,{className:kt("cursor-pointer transition-all",J?"bg-gradient-to-r from-amber-500/5 to-transparent hover:from-amber-500/10 border-l-2 border-l-amber-500/40":"hover:bg-surface-2"),onClick:()=>F(U),children:[o.jsx(Dr,{className:kt("font-mono text-base font-semibold",J?"text-amber-300/90":"text-text-primary"),children:U.codigo}),o.jsx(Dr,{children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:kt("text-base font-semibold truncate",J?"text-amber-100/90":"text-text-primary"),children:U.nome||""}),J&&o.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-amber-400/70 font-medium",children:[o.jsx("svg",{className:"w-3 h-3 opacity-60",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Cliente Padro"]}),o.jsx("span",{className:"text-xs text-text-muted truncate",children:U.cpf&&`CPF: ${U.cpf}`||U.cnpj&&`CNPJ: ${U.cnpj}`||(U.apelido?`Apelido: ${U.apelido}`:" ")})]})}),o.jsx(Dr,{children:o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{className:"text-sm truncate",children:U.telefone||U.email||""})})}),o.jsx(Dr,{children:o.jsxs("div",{className:"flex flex-wrap gap-1",children:[U.flag_cliente&&o.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),U.flag_fornecedor&&o.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]})}),o.jsx(Dr,{children:o.jsx("span",{className:kt("px-2 py-1 text-xs font-semibold rounded-full",U.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:U.status==="active"?"Ativo":"Inativo"})})]},U.id)}):o.jsx(ma,{children:o.jsx(Dr,{colSpan:5,className:"h-24 text-center",children:"Nenhum cliente encontrado com os filtros aplicados."})})})]})})]})})]})}),o.jsx(bte,{open:d,onOpenChange:f,client:x,onSaved:A}),o.jsx(mZe,{open:h,onOpenChange:m,client:g,onEdit:H,onInactivate:ce,codigoEmpresa:t?.codigo_empresa})]})}const gZe=[],vZe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ene={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},lP=({icon:e,title:t,value:r,color:n})=>{const a=e;return o.jsxs(Pr.div,{variants:ene,className:"bg-surface rounded-lg border border-border p-4 flex items-center gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n}/20`,children:o.jsx(a,{className:`w-6 h-6 ${n}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-text-secondary text-sm font-medium",children:t}),o.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r})]})]})};function xZe({open:e,onOpenChange:t,member:r,onEdit:n}){return r?o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{className:"sm:max-w-[500px] w-full",children:[o.jsx(an,{children:o.jsx(en,{children:"Detalhes do Funcionrio"})}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-bold",children:r.name}),o.jsx("p",{className:"text-brand font-semibold",children:r.role})]}),o.jsxs("div",{className:"bg-surface-2 p-8 rounded-lg text-center border border-border",children:[o.jsx("p",{className:"text-lg font-semibold text-text-secondary",children:" Em desenvolvimento"}),o.jsx("p",{className:"text-sm text-text-muted mt-2",children:"Detalhes completos do funcionrio estaro disponveis em breve."})]})]}),o.jsxs($n,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Fechar"})}),o.jsxs(ye,{onClick:()=>n(r),className:"w-full sm:w-auto",children:[o.jsx(Zc,{className:"mr-2 h-4 w-4"})," Editar"]})]})]})}):null}function yZe({open:e,onOpenChange:t,member:r,onSave:n,loading:a}){const{toast:i}=Qa(),[s,l]=v.useState(r?.name||""),[c,u]=v.useState(r?.role||"");v.useEffect(()=>{e&&(l(r?.name||""),u(r?.role||""))},[r,e]);const d=async f=>{if(f.preventDefault(),!s.trim()){i({title:"Nome  obrigatrio",variant:"destructive"});return}await n({name:s.trim(),role:c.trim()})};return o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{className:"sm:max-w-[700px] w-full",children:[o.jsxs(an,{children:[o.jsx(en,{children:r?"Editar Funcionrio":"Novo Funcionrio"}),o.jsx(hn,{children:"Informe apenas nome e cargo. O cargo  livre (texto)."})]}),o.jsx("form",{onSubmit:d,className:"py-2",children:o.jsx("div",{className:"bg-surface-2 border border-border rounded-lg p-4 space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{htmlFor:"name",children:"Nome"}),o.jsxs("div",{className:"relative",children:[o.jsx(GE,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{id:"name",value:s,onChange:f=>l(f.target.value),className:"pl-9",placeholder:"Ex.: Maria Silva"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{htmlFor:"role",children:"Cargo"}),o.jsxs("div",{className:"relative",children:[o.jsx(aue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{id:"role",value:c,onChange:f=>u(f.target.value),className:"pl-9",placeholder:"Ex.: Gerente, Caixa, ..."})]})]})]})})}),o.jsxs($n,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[o.jsx(cp,{asChild:!0,children:o.jsx(ye,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Cancelar"})}),o.jsx(ye,{type:"submit",onClick:d,disabled:!!a,className:"w-full sm:w-auto",children:a?"Salvando...":"Salvar"})]})]})})}function bZe(){const{company:e,authReady:t,userProfile:r}=Wi(),{toast:n}=Qa(),[a,i]=v.useState(gZe),[s,l]=v.useState(!1),[c,u]=v.useState(!1),[d,f]=v.useState(null),[h,m]=v.useState(null),[g,p]=v.useState(""),[x,y]=v.useState(!1),b=v.useRef(!1),w=v.useRef(!0);v.useEffect(()=>(w.current=!0,()=>{w.current=!1}),[]);const _=async()=>{try{const O=e?.codigo_empresa||null;if(!O&&!e?.id)return;const R=O?`team:list:${O}`:"team:list",B=setTimeout(()=>{if(w.current)try{const L=localStorage.getItem(R),U=L?JSON.parse(L):[];Array.isArray(U)&&U.length>0&&(console.warn("[Equipe] slow fallback: using cached snapshot"),i(U))}catch{}},5e3);let W=Ne.from("colaboradores").select("*").order("nome",{ascending:!0});O&&(W=W.eq("codigo_empresa",O));const{data:F,error:$}=await W;if($){if(!b.current){b.current=!0,setTimeout(_,800);return}throw $}let ce=(F||[]).map(L=>({id:L.id,name:L.nome||"",role:L.cargo||"user",status:L.ativo===!1?"inactive":"active",online:!1,permissions:{}}));const oe=r?.codigo_empresa&&e?.codigo_empresa&&r.codigo_empresa===e.codigo_empresa;if(r?.id&&oe&&(ce.some(U=>U.id===r.id)||(ce=[{id:r.id,name:r.nome||"Voc",role:r.cargo||"user",status:"active",online:!1,permissions:{}},...ce])),!w.current)return;i(ce);try{localStorage.setItem(R,JSON.stringify(ce))}catch{}}catch(O){console.error("Falha ao carregar equipe:",O);const R=e?.codigo_empresa||null,B=R?`team:list:${R}`:"team:list";try{const W=localStorage.getItem(B);W&&w.current&&i(JSON.parse(W))}catch{}}finally{b.current=!1}};v.useEffect(()=>{const O=e?.codigo_empresa||null;if(!(!t||!O)){try{const R=localStorage.getItem(`team:list:${O}`),B=R?JSON.parse(R):[];Array.isArray(B)&&B.length>0&&i(B)}catch{}_()}},[t,e?.codigo_empresa]),v.useEffect(()=>{const O=()=>{document.visibilityState==="visible"&&t&&(e?.codigo_empresa||e?.id)&&_()},R=()=>{t&&(e?.codigo_empresa||e?.id)&&_()};return document.addEventListener("visibilitychange",O),window.addEventListener("focus",R),()=>{document.removeEventListener("visibilitychange",O),window.removeEventListener("focus",R)}},[t,e?.codigo_empresa,e?.id]);const j=v.useMemo(()=>({total:a.length,active:a.filter(O=>O.status==="active").length,inactive:a.filter(O=>O.status==="inactive").length}),[a]),N=v.useMemo(()=>a.filter(O=>O.name.toLowerCase().includes(g.toLowerCase())||O.role.toLowerCase().includes(g.toLowerCase())),[a,g]),P=O=>{f(O),u(!0)},A=()=>{m(null),l(!0)},k=O=>{u(!1),m(O),l(!0)},M=O=>{m(O),l(!0)},E=async({name:O,role:R})=>{try{if(y(!0),!e?.codigo_empresa&&!e?.id)throw new Error("Empresa no encontrada para o usurio atual.");let B=e?.codigo_empresa||null;if(!B&&e?.id){const{data:W}=await Ne.from("empresas").select("codigo_empresa").eq("id",e.id).single();B=W?.codigo_empresa||null}if(!B)throw new Error("Empresa sem cdigo. Defina o cdigo da empresa antes de adicionar colaboradores.");if(h){const{error:W}=await Ne.from("colaboradores").update({nome:O,cargo:R}).eq("id",h.id);if(W)throw W;n({title:"Funcionrio atualizado",description:h.name,variant:"default"})}else{const{error:W}=await Ne.from("colaboradores").insert({codigo_empresa:B,nome:O,cargo:R,ativo:!0});if(W)throw W;n({title:"Funcionrio criado com sucesso",description:O,variant:"success"})}await _(),l(!1),m(null)}catch(B){n({title:"Erro ao salvar funcionrio",description:B.message||String(B),variant:"destructive"})}finally{y(!1)}},I=async O=>{try{if(!(e?.id||e?.codigo_empresa))return;const R=a[0]?.id;if(O.id===R){n({title:"Ao no permitida",description:"No  possvel desativar o primeiro funcionrio.",variant:"destructive"});return}if(r?.id&&O.id===r.id){n({title:"Ao no permitida",description:"Voc no pode desativar o seu prprio usurio.",variant:"destructive"});return}if(a.filter(W=>W.status==="active").length<=1){n({title:"Ao no permitida",description:"Deve haver pelo menos um funcionrio ativo.",variant:"destructive"});return}const{error:B}=await Ne.from("colaboradores").update({ativo:!1}).eq("id",O.id);if(B)throw B;n({title:"Funcionrio desativado",description:O.name}),await _()}catch(R){n({title:"Erro ao desativar",description:R.message||String(R),variant:"destructive"})}};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-full flex flex-col",children:o.jsxs(Pr.div,{variants:vZe,initial:"hidden",animate:"visible",children:[o.jsxs(Pr.div,{variants:ene,className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary tracking-tighter",children:"Gesto de Equipe"}),o.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Controle de funcionrios, permisses e logs."})]}),o.jsxs(ye,{onClick:A,disabled:!t||!e?.codigo_empresa,title:t?e?.codigo_empresa?"":"Empresa sem cdigo. Defina o cdigo da empresa antes.":"Aguardando autenticao...",children:[o.jsx(oi,{className:"mr-2 h-4 w-4"})," Novo Funcionrio"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsx(lP,{icon:As,title:"Total",value:j.total,color:"text-brand"}),o.jsx(lP,{icon:gue,title:"Ativos",value:j.active,color:"text-success"}),o.jsx(lP,{icon:fue,title:"Desativados",value:j.inactive,color:"text-danger"})]}),o.jsx(Pr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:o.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[o.jsx("div",{className:"p-4 border-b border-border",children:o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar por nome ou cargo...",className:"pl-9",value:g,onChange:O=>p(O.target.value)})]})}),o.jsx("div",{className:"md:hidden p-4 space-y-3",children:N.length===0?o.jsx("div",{className:"text-center py-10 text-text-muted",children:"Nenhum funcionrio cadastrado."}):N.map((O,R)=>o.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",onClick:()=>P(O),children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base text-text-primary truncate",children:O.name}),o.jsx("p",{className:"text-sm text-text-muted mt-0.5",children:O.role})]}),o.jsx("span",{className:kt("inline-flex px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",O.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:O.status==="active"?"Ativo":"Inativo"})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx(ye,{variant:"outline",size:"sm",onClick:B=>{B.stopPropagation(),P(O)},className:"flex-1",children:"Ver Detalhes"}),o.jsx(ye,{variant:"outline",size:"sm",onClick:B=>{B.stopPropagation(),M(O)},children:o.jsx(Zc,{className:"h-3 w-3"})}),o.jsxs(ry,{children:[o.jsx(ny,{asChild:!0,children:o.jsx(ye,{variant:"outline",size:"sm",onClick:B=>B.stopPropagation(),children:o.jsx(SL,{className:"h-3 w-3"})})}),o.jsx(iv,{align:"end",children:o.jsx(nc,{className:"text-danger",disabled:R===0||a.filter(B=>B.status==="active").length<=1||r?.id&&O.id===r.id,onClick:B=>{B.stopPropagation(),I(O)},children:"Desativar"})})]})]})]},O.id))}),o.jsx("div",{className:"hidden md:block",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Funcionrio"}),o.jsx(Kr,{children:"Cargo"}),o.jsx(Kr,{children:"Status"}),o.jsx(Kr,{className:"w-[80px] text-center",children:"Aes"})]})}),o.jsxs(_s,{children:[N.length===0&&o.jsx(ma,{children:o.jsx(Dr,{colSpan:4,className:"text-center py-10 text-text-muted",children:"Nenhum funcionrio cadastrado."})}),N.map((O,R)=>o.jsxs(ma,{className:"cursor-pointer",onClick:()=>P(O),children:[o.jsx(Dr,{className:"font-medium",children:o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("span",{children:O.name})})}),o.jsx(Dr,{children:O.role}),o.jsx(Dr,{children:o.jsx("span",{className:kt("px-2 py-1 text-xs font-semibold rounded-full",O.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:O.status==="active"?"Ativo":"Inativo"})}),o.jsx(Dr,{className:"text-center",children:o.jsxs(ry,{children:[o.jsx(ny,{asChild:!0,children:o.jsx(ye,{variant:"ghost",className:"h-8 w-8 p-0 mx-auto",onClick:B=>B.stopPropagation(),children:o.jsx(SL,{className:"h-4 w-4"})})}),o.jsxs(iv,{align:"end",children:[o.jsx(nc,{onClick:B=>{B.stopPropagation(),P(O)},children:"Ver Detalhes"}),o.jsx(nc,{onClick:B=>{B.stopPropagation(),M(O)},children:"Editar"}),o.jsx(nc,{className:"text-danger",disabled:R===0||a.filter(B=>B.status==="active").length<=1||r?.id&&O.id===r.id,onClick:B=>{B.stopPropagation(),I(O)},children:"Desativar"})]})]})})]},O.id))]})]})})]})})]})}),o.jsx(yZe,{open:s,onOpenChange:l,member:h,onSave:E,loading:x}),o.jsx(xZe,{open:c,onOpenChange:u,member:d,onEdit:k})]})}const wZe="v1.0.0";function Af({title:e,icon:t,children:r,className:n="",collapsible:a=!1,defaultOpen:i=!0}){return a?o.jsx("div",{className:`bg-surface rounded-lg border border-border shadow-sm ${n}`,children:o.jsxs("details",{className:"group",open:i,children:[o.jsxs("summary",{className:"list-none cursor-pointer select-none p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t&&o.jsx(t,{className:"w-5 h-5 text-brand"}),o.jsx("h3",{className:"text-base font-semibold",children:e})]}),o.jsx("span",{className:"text-xs text-text-secondary group-open:rotate-180 transition-transform",children:""})]}),o.jsx("div",{className:"px-4 pb-4",children:r})]})}):o.jsxs("div",{className:`bg-surface rounded-lg border border-border shadow-sm p-4 ${n}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t&&o.jsx(t,{className:"w-5 h-5 text-brand"}),o.jsx("h3",{className:"text-base font-semibold",children:e})]}),r]})}function Pf({label:e,value:t}){return o.jsxs("div",{className:"flex items-center justify-between gap-3 py-1 text-sm",children:[o.jsx("span",{className:"text-text-secondary",children:e}),o.jsx("span",{className:"font-medium truncate",children:t||""})]})}function _Ze(){const{userProfile:e,company:t,authReady:r,loading:n}=Wi();Ko();const[a,i]=v.useState("Agenda"),[s,l]=v.useState("Mdia"),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,m]=v.useState(!0),[g,p]=v.useState(()=>window.__installPrompt||null),[x,y]=v.useState(!1),[b,w]=v.useState(!1),[_,j]=v.useState(!1),[N,P]=v.useState("unknown"),A="Fluxo7 Arena",k="fluxo7team@gmail.com",M="https://wa.me/5534998936088",E="tel:+5534998936088",I="+55 (34) 99893-6088";v.useEffect(()=>{try{const H=window.matchMedia("(pointer:fine)"),ce=()=>m(H.matches);return ce(),H.addEventListener?.("change",ce),()=>H.removeEventListener?.("change",ce)}catch{m(!0)}},[]),v.useEffect(()=>{const H=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;w(H);const ce=navigator.userAgent;ce.includes("Chrome")&&!ce.includes("Edg")?P("chrome"):ce.includes("Edg")?P("edge"):ce.includes("Firefox")?P("firefox"):ce.includes("Safari")&&!ce.includes("Chrome")?P("safari"):P("other"),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&y(!0),window.__installPrompt&&!g&&p(window.__installPrompt);const oe=()=>{y(!0),p(null),j(!1)};return window.addEventListener("appinstalled",oe),()=>{window.removeEventListener("appinstalled",oe)}},[g]);const O=async()=>{if(g)try{await g.prompt();const{outcome:H}=await g.userChoice;H==="accepted"?(y(!0),j(!1)):j(!0),p(null),window.__installPrompt=null}catch(H){console.error("Erro ao mostrar prompt de instalao:",H),j(!0)}else j(!0)},R=()=>{navigator.share?navigator.share({title:"F7 Arena",text:"Adicione F7 Arena  sua tela inicial",url:window.location.href}).catch(()=>{alert(`Para adicionar  tela inicial:

1. Toque no boto de Compartilhar (cone de quadrado com seta)
2. Role para baixo
3. Toque em "Adicionar  Tela de Incio"`)}):alert(`Para adicionar  tela inicial:

1. Toque no boto de Compartilhar (cone de quadrado com seta)
2. Role para baixo
3. Toque em "Adicionar  Tela de Incio"`)},B=v.useMemo(()=>{try{return{empresa:t?.nome||t?.fantasia||t?.razao_social||t?.razaoSocial||t?.displayName||t?.codigo_empresa||"",usuario:e?.nome||e?.name||e?.email||"",dataHora:new Date().toLocaleString("pt-BR")}}catch{return{empresa:"",usuario:"",dataHora:new Date().toLocaleString("pt-BR")}}},[t?.nome,t?.fantasia,t?.razao_social,t?.razaoSocial,t?.displayName,t?.codigo_empresa,e?.nome,e?.name,e?.email]),W=v.useMemo(()=>[`[${A} - Suporte]`,`Assunto: ${c||"(sem assunto)"} `,`Categoria: ${a} `,`Severidade: ${s}`,"","Descrio:",(d||"(adicione uma descrio detalhada, passos para reproduzir, prints se possvel)")+`
`," Dados ",`Empresa: ${B.empresa}`,`Usurio: ${B.usuario}`,`Data e Hora: ${B.dataHora}`].join(`
`),[c,a,s,d,B]),F=`${M}?text=${encodeURIComponent(W)}`,$=`mailto:${k}?subject=${encodeURIComponent(`[Suporte] ${c||"Assunto"}`)}&body=${encodeURIComponent(W)}`;return o.jsxs("div",{className:"px-4 md:px-6 lg:px-8 py-4 md:py-6",children:[o.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 md:p-6 mb-6",children:[o.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4 flex-col md:flex-row",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand/10 border border-brand/30 flex items-center justify-center",children:o.jsx(wW,{className:"w-5 h-5 text-brand"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Suporte"}),o.jsx("p",{className:"text-sm text-text-secondary",children:"Precisa de ajuda? Fale com a gente ou consulte as respostas rpidas abaixo."})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"w-10 h-10 bg-brand rounded-xl flex items-center justify-center",children:o.jsx(t1,{className:"w-6 h-6 text-primary-foreground"})}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"font-extrabold text-base md:text-xl",style:{color:"#FF6600"},children:"Fluxo"}),o.jsx("span",{className:"font-extrabold text-base md:text-xl",style:{color:"#FFAA33"},children:"7"}),o.jsx("span",{className:"font-medium text-base md:text-xl",style:{color:"#B0B0B0"},children:" Arena"})]})]}),o.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:["Verso ",wZe]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[o.jsx(Af,{title:"Status",icon:jw,children:o.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[o.jsx(Pf,{label:"Empresa",value:B.empresa}),o.jsx(Pf,{label:"Usurio",value:`${B.usuario}`})]})}),o.jsx(Af,{title:"Fale com a gente",icon:O5,children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("a",{href:M,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-brand text-black hover:opacity-90 transition",children:[o.jsx(O5,{className:"w-4 h-4"})," WhatsApp"]}),o.jsxs("a",{href:`mailto:${k}`,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[o.jsx(VE,{className:"w-4 h-4"})," E-mail"]}),o.jsxs("a",{href:E,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[o.jsx(jL,{className:"w-4 h-4"})," ",h?I:"Telefone"]})]})}),!x&&b&&o.jsx(Af,{title:"Adicionar  Tela Inicial",icon:T5,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-text-secondary",children:"Crie um atalho do F7 Arena na sua tela inicial para acesso rpido."}),o.jsxs("button",{onClick:R,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-md bg-brand text-black font-medium hover:opacity-90 transition",children:[o.jsx(NL,{className:"w-4 h-4"})," Criar Atalho"]}),o.jsxs("details",{className:"text-xs text-text-muted",children:[o.jsx("summary",{className:"cursor-pointer hover:text-text-secondary",children:"Como fazer manualmente?"}),o.jsxs("div",{className:"mt-2 space-y-1 pl-2",children:[o.jsxs("p",{children:["1. Toque no boto ",o.jsx(NL,{className:"inline w-3 h-3"})," (Compartilhar)"]}),o.jsx("p",{children:'2. Role para baixo e toque em "Adicionar  Tela de Incio"'}),o.jsx("p",{children:'3. Toque em "Adicionar"'})]})]})]})}),!x&&!b&&o.jsx(Af,{title:"Instalar Aplicativo",icon:T5,children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-text-secondary",children:"Instale o F7 Arena no seu dispositivo para acesso rpido e experincia completa de aplicativo."}),o.jsxs("button",{onClick:O,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-md bg-brand text-black font-medium hover:opacity-90 transition",children:[o.jsx(po,{className:"w-4 h-4"})," Instalar App"]}),o.jsx("p",{className:"text-xs text-text-muted text-center",children:"Pode demorar alguns segundos. Se no aparecer nada, veja as instrues no tutorial."})]})}),x&&o.jsx(Af,{title:"Aplicativo Instalado",icon:jw,children:o.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[o.jsx(jw,{className:"w-4 h-4"}),o.jsx("span",{children:"F7 Arena est instalado no seu dispositivo!"})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2 space-y-3",children:o.jsx(Af,{title:"Perguntas Frequentes (FAQ)",children:o.jsxs("div",{className:"divide-y divide-border/60",children:[o.jsxs("details",{className:"py-3",children:[o.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como abrir comanda de balco?"}),o.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Abra o caixa antes. A tela de balco utiliza uma comanda sem mesa (mesa_id nulo). Se no existir, o sistema cria ao abrir o balco; caso o caixa esteja fechado, a abertura da comanda  bloqueada."})]}),o.jsxs("details",{className:"py-3",children:[o.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Por que no consigo fechar o caixa?"}),o.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"O fechamento  bloqueado se houver comandas com itens em aberto (inclui balco e mesas). Finalize ou feche as comandas pendentes antes de encerrar o caixa."})]}),o.jsxs("details",{className:"py-3",children:[o.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como adicionar participantes no agendamento?"}),o.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"No modal de agendamento, selecione um ou mais clientes. Aps salvar, o chip de pagamentos  atualizado imediatamente. Se no visualizar, recarregue os dados da agenda."})]}),o.jsxs("details",{className:"py-3",children:[o.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como ver o histrico completo do cliente?"}),o.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Abra o cliente e utilize o Histrico Recente, que combina comandas e agendamentos em uma nica timeline com totais e status."})]}),o.jsxs("details",{className:"py-3",children:[o.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como ajustar estoque mnimo e ver mais vendidos?"}),o.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Na aba de Produtos voc pode gerenciar estoque, preos e relatrios. Utilize filtros e exportaes para anlise."})]})]})})}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"space-y-3 lg:sticky lg:top-6",children:[o.jsx(Af,{title:"Reportar um problema",icon:Hce,collapsible:!0,defaultOpen:!1,children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-text-secondary",children:"Categoria"}),o.jsxs("select",{value:a,onChange:H=>i(H.target.value),className:"w-full mt-1 px-2 py-2 rounded-md bg-background border border-border",children:[o.jsx("option",{children:"Agenda"}),o.jsx("option",{children:"Vendas"}),o.jsx("option",{children:"Clientes"}),o.jsx("option",{children:"Produtos"}),o.jsx("option",{children:"Financeiro"}),o.jsx("option",{children:"Outros"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-text-secondary",children:"Severidade"}),o.jsxs("select",{value:s,onChange:H=>l(H.target.value),className:"w-full mt-1 px-2 py-2 rounded-md bg-background border border-border",children:[o.jsx("option",{children:"Baixa"}),o.jsx("option",{children:"Mdia"}),o.jsx("option",{children:"Alta"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-text-secondary",children:"Assunto"}),o.jsx("input",{value:c,onChange:H=>u(H.target.value),placeholder:"Ex.: Erro ao salvar agendamento",className:"w-full mt-1 px-3 py-2 rounded-md bg-background border border-border"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-text-secondary",children:"Descrio"}),o.jsx("textarea",{value:d,onChange:H=>f(H.target.value),rows:4,placeholder:"Descreva o que aconteceu, passos para reproduzir, expectativa.",className:"w-full mt-1 px-3 py-2 rounded-md bg-background border border-border resize-y"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[o.jsxs("a",{href:F,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-brand text-black hover:opacity-90 transition",children:[o.jsx(O5,{className:"w-4 h-4"})," Enviar no WhatsApp"]}),o.jsxs("a",{href:$,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[o.jsx(VE,{className:"w-4 h-4"})," Enviar por E-mail"]}),o.jsxs("a",{href:E,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[o.jsx(jL,{className:"w-4 h-4"})," ",h?I:"Ligar agora"]})]})]})}),o.jsx(Af,{title:"Diagnstico",icon:Jce,children:o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsx(Pf,{label:"Empresa",value:B.empresa}),o.jsx(Pf,{label:"Usurio",value:`${B.usuario}`}),o.jsx(Pf,{label:"Data/Hora",value:B.dataHora}),o.jsx(Pf,{label:"Canal - WhatsApp",value:"(34) 99893-6088"}),o.jsx(Pf,{label:"Canal - E-mail",value:"fluxo7team@gmail.com"}),o.jsx(Pf,{label:"Canal - Telefone",value:"(34) 99893-6088"})]})})]})})]}),o.jsx(cn,{open:_,onOpenChange:j,children:o.jsxs(on,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[o.jsx(an,{children:o.jsxs(en,{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand/10 border border-brand/30 flex items-center justify-center",children:o.jsx(po,{className:"w-6 h-6 text-brand"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Como Instalar o F7 Arena"}),o.jsx("p",{className:"text-sm text-text-secondary font-normal",children:"Siga as instrues para o seu navegador"})]})]})}),o.jsxs("div",{className:"mt-6 space-y-6",children:[(N==="chrome"||N==="edge")&&o.jsxs("div",{className:"bg-gradient-to-br from-brand/10 to-brand/5 rounded-xl p-6 border-2 border-brand/30",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand flex items-center justify-center",children:o.jsx(Yce,{className:"w-6 h-6 text-black"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Chrome (Celular)"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Siga os passos abaixo"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-surface rounded-lg p-4 border border-border",children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand text-black flex items-center justify-center font-bold",children:"1"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"font-semibold mb-2",children:["Toque nos 3 pontinhos ",o.jsx("span",{className:"text-2xl",children:""})]}),o.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"No canto superior direito da tela"}),o.jsx("div",{className:"bg-background/50 rounded-md p-3 border border-border/50",children:o.jsx("p",{className:"text-xs text-text-muted",children:" Os 3 pontinhos ficam ao lado da barra de endereo"})})]})]})}),o.jsx("div",{className:"bg-surface rounded-lg p-4 border border-border",children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand text-black flex items-center justify-center font-bold",children:"2"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold mb-3",children:"Procure uma destas opes:"}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsx("div",{className:"bg-brand/20 rounded-md p-3 border-2 border-brand/40",children:o.jsx("p",{className:"font-bold text-center text-base",children:' "Instalar aplicativo"'})}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-text-muted text-sm font-medium",children:[o.jsx("div",{className:"h-px bg-border flex-1"}),o.jsx("span",{children:"OU"}),o.jsx("div",{className:"h-px bg-border flex-1"})]}),o.jsx("div",{className:"bg-brand/20 rounded-md p-3 border-2 border-brand/40",children:o.jsx("p",{className:"font-bold text-center text-base",children:' "Adicionar  tela inicial"'})})]}),o.jsx("p",{className:"text-sm text-text-secondary",children:"Toque em qualquer uma dessas opes no menu"})]})]})}),o.jsx("div",{className:"bg-surface rounded-lg p-4 border border-border",children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand text-black flex items-center justify-center font-bold",children:"3"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold mb-2",children:"Confirme a instalao"}),o.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"Aparecer uma janela perguntando se deseja instalar"}),o.jsx("div",{className:"bg-success/10 rounded-md p-3 border border-success/30",children:o.jsx("p",{className:"text-sm font-medium text-center",children:' Toque em "Instalar"'})})]})]})}),o.jsxs("div",{className:"bg-success/5 rounded-lg p-4 border border-success/20",children:[o.jsx("p",{className:"text-sm font-medium text-success mb-1",children:" Pronto!"}),o.jsx("p",{className:"text-xs text-text-secondary",children:"O app aparecer na sua tela inicial e voc poder abri-lo como qualquer outro aplicativo!"})]})]})]}),N==="firefox"&&o.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-500/5 rounded-xl p-6 border-2 border-orange-500/30",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500 flex items-center justify-center",children:o.jsx(uue,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Firefox (Celular)"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Siga os passos abaixo"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-surface rounded-lg p-4 border border-border",children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-orange-500 text-white flex items-center justify-center font-bold",children:"1"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"font-semibold mb-2",children:["Toque nos 3 pontinhos ",o.jsx("span",{className:"text-2xl",children:""})]}),o.jsx("p",{className:"text-sm text-text-secondary",children:"No canto inferior direito da tela"})]})]})}),o.jsx("div",{className:"bg-surface rounded-lg p-4 border border-border",children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-orange-500 text-white flex items-center justify-center font-bold",children:"2"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold mb-3",children:"Procure uma destas opes:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"bg-orange-500/20 rounded-md p-3 border-2 border-orange-500/40",children:o.jsx("p",{className:"font-bold text-center text-base",children:' "Instalar"'})}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-text-muted text-sm font-medium",children:[o.jsx("div",{className:"h-px bg-border flex-1"}),o.jsx("span",{children:"OU"}),o.jsx("div",{className:"h-px bg-border flex-1"})]}),o.jsx("div",{className:"bg-orange-500/20 rounded-md p-3 border-2 border-orange-500/40",children:o.jsx("p",{className:"font-bold text-center text-base",children:' "Adicionar  tela inicial"'})})]})]})]})}),o.jsxs("div",{className:"bg-success/5 rounded-lg p-4 border border-success/20",children:[o.jsx("p",{className:"text-sm font-medium text-success mb-1",children:" Pronto!"}),o.jsx("p",{className:"text-xs text-text-secondary",children:"O app ser adicionado  sua tela inicial!"})]})]})]}),(N==="safari"||N==="other")&&o.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-500/5 rounded-xl p-6 border-2 border-purple-500/30",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500 flex items-center justify-center",children:o.jsx(T5,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Outros Navegadores"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Instrues gerais"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-surface rounded-lg p-4 border border-border",children:[o.jsx("p",{className:"font-semibold mb-3",children:"Procure no menu do navegador:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"bg-purple-500/10 rounded-md p-3 border border-purple-500/30",children:o.jsx("p",{className:"font-medium",children:' "Instalar aplicativo"'})}),o.jsx("div",{className:"bg-purple-500/10 rounded-md p-3 border border-purple-500/30",children:o.jsx("p",{className:"font-medium",children:' "Adicionar  tela inicial"'})}),o.jsx("div",{className:"bg-purple-500/10 rounded-md p-3 border border-purple-500/30",children:o.jsx("p",{className:"font-medium",children:' "Criar atalho"'})})]})]}),o.jsx("div",{className:"bg-background/50 rounded-lg p-4 border border-border/50",children:o.jsx("p",{className:"text-sm text-text-muted",children:" Geralmente a opo est no menu de 3 pontos ou 3 linhas do navegador"})})]})]}),o.jsxs("div",{className:"bg-brand/5 rounded-lg p-4 border border-brand/20",children:[o.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[o.jsx(jw,{className:"w-5 h-5 text-brand"}),"Benefcios do App Instalado"]}),o.jsxs("ul",{className:"space-y-1.5 text-sm text-text-secondary",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand"}),"Acesso rpido direto da rea de trabalho ou menu iniciar"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand"}),"Funciona em tela cheia, sem barras do navegador"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand"}),"Notificaes e atualizaes automticas"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand"}),"Melhor desempenho e experincia de uso"]})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:()=>j(!1),className:"px-6 py-2.5 rounded-md bg-surface-2 hover:bg-surface text-text-primary font-medium transition",children:"Entendi"})})]})]})})]})}var mu=Uint8Array,kl=Uint16Array,uM=Int32Array,dM=new mu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fM=new mu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tq=new mu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tne=function(e,t){for(var r=new kl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new uM(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},rne=tne(dM,2),SZe=rne.b,ET=rne.r;SZe[28]=258,ET[258]=28;var jZe=tne(fM,0),rq=jZe.r,kT=new kl(32768);for(var li=0;li<32768;++li){var Ef=(li&43690)>>1|(li&21845)<<1;Ef=(Ef&52428)>>2|(Ef&13107)<<2,Ef=(Ef&61680)>>4|(Ef&3855)<<4,kT[li]=((Ef&65280)>>8|(Ef&255)<<8)>>1}var sy=function(e,t,r){for(var n=e.length,a=0,i=new kl(t);a<n;++a)e[a]&&++i[e[a]-1];var s=new kl(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var l;if(r){l=new kl(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=s[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[kT[f]>>c]=u}else for(l=new kl(n),a=0;a<n;++a)e[a]&&(l[a]=kT[s[e[a]-1]++]>>15-e[a]);return l},jp=new mu(288);for(var li=0;li<144;++li)jp[li]=8;for(var li=144;li<256;++li)jp[li]=9;for(var li=256;li<280;++li)jp[li]=7;for(var li=280;li<288;++li)jp[li]=8;var uj=new mu(32);for(var li=0;li<32;++li)uj[li]=5;var NZe=sy(jp,9,0),CZe=sy(uj,5,0),nne=function(e){return(e+7)/8|0},AZe=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new mu(e.subarray(t,r))},wd=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},g0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},cP=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:ine,l:0};if(a==1){var s=new mu(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(j,N){return j.f-N.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var m=new kl(h+1),g=OT(r[d-1],m,0);if(g>t){var n=0,p=0,x=g-t,y=1<<x;for(i.sort(function(N,P){return m[P.s]-m[N.s]||N.f-P.f});n<a;++n){var b=i[n].s;if(m[b]>t)p+=y-(1<<g-m[b]),m[b]=t;else break}for(p>>=x;p>0;){var w=i[n].s;m[w]<t?p-=1<<t-m[w]++-1:++n}for(;n>=0&&p;--n){var _=i[n].s;m[_]==t&&(--m[_],++p)}g=t}return{t:new mu(m),l:g}},OT=function(e,t,r){return e.s==-1?Math.max(OT(e.l,t,r+1),OT(e.r,t,r+1)):t[e.s]=r},nq=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new kl(++t),n=0,a=e[0],i=1,s=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},v0=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},ane=function(e,t,r){var n=r.length,a=nne(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},aq=function(e,t,r,n,a,i,s,l,c,u,d){wd(t,d++,r),++a[256];for(var f=cP(a,15),h=f.t,m=f.l,g=cP(i,15),p=g.t,x=g.l,y=nq(h),b=y.c,w=y.n,_=nq(p),j=_.c,N=_.n,P=new kl(19),A=0;A<b.length;++A)++P[b[A]&31];for(var A=0;A<j.length;++A)++P[j[A]&31];for(var k=cP(P,7),M=k.t,E=k.l,I=19;I>4&&!M[tq[I-1]];--I);var O=u+5<<3,R=v0(a,jp)+v0(i,uj)+s,B=v0(a,h)+v0(i,p)+s+14+3*I+v0(P,M)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&O<=R&&O<=B)return ane(t,d,e.subarray(c,c+u));var W,F,$,H;if(wd(t,d,1+(B<R)),d+=2,B<R){W=sy(h,m,0),F=h,$=sy(p,x,0),H=p;var ce=sy(M,E,0);wd(t,d,w-257),wd(t,d+5,N-1),wd(t,d+10,I-4),d+=14;for(var A=0;A<I;++A)wd(t,d+3*A,M[tq[A]]);d+=3*I;for(var oe=[b,j],L=0;L<2;++L)for(var U=oe[L],A=0;A<U.length;++A){var J=U[A]&31;wd(t,d,ce[J]),d+=M[J],J>15&&(wd(t,d,U[A]>>5&127),d+=U[A]>>12)}}else W=NZe,F=jp,$=CZe,H=uj;for(var A=0;A<l;++A){var V=n[A];if(V>255){var J=V>>18&31;g0(t,d,W[J+257]),d+=F[J+257],J>7&&(wd(t,d,V>>23&31),d+=dM[J]);var Z=V&31;g0(t,d,$[Z]),d+=H[Z],Z>3&&(g0(t,d,V>>5&8191),d+=fM[Z])}else g0(t,d,W[V]),d+=F[V]}return g0(t,d,W[256]),d+F[256]},PZe=new uM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ine=new mu(0),EZe=function(e,t,r,n,a,i){var s=i.z||e.length,l=new mu(n+s+5*(1+Math.ceil(s/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=PZe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,p=i.p||new kl(32768),x=i.h||new kl(g+1),y=Math.ceil(r/3),b=2*y,w=function(be){return(e[be]^e[be+1]<<y^e[be+2]<<b)&g},_=new uM(25e3),j=new kl(288),N=new kl(32),P=0,A=0,k=i.i||0,M=0,E=i.w||0,I=0;k+2<s;++k){var O=w(k),R=k&32767,B=x[O];if(p[R]=B,x[O]=R,E<=k){var W=s-k;if((P>7e3||M>24576)&&(W>423||!u)){d=aq(e,c,0,_,j,N,A,M,I,k-I,d),M=P=A=0,I=k;for(var F=0;F<286;++F)j[F]=0;for(var F=0;F<30;++F)N[F]=0}var $=2,H=0,ce=m,oe=R-B&32767;if(W>2&&O==w(k-oe))for(var L=Math.min(h,W)-1,U=Math.min(32767,k),J=Math.min(258,W);oe<=U&&--ce&&R!=B;){if(e[k+$]==e[k+$-oe]){for(var V=0;V<J&&e[k+V]==e[k+V-oe];++V);if(V>$){if($=V,H=oe,V>L)break;for(var Z=Math.min(oe,V-2),K=0,F=0;F<Z;++F){var he=k-oe+F&32767,te=p[he],me=he-te&32767;me>K&&(K=me,B=he)}}}R=B,B=p[R],oe+=R-B&32767}if(H){_[M++]=268435456|ET[$]<<18|rq[H];var Ee=ET[$]&31,Se=rq[H]&31;A+=dM[Ee]+fM[Se],++j[257+Ee],++N[Se],E=k+$,++P}else _[M++]=e[k],++j[e[k]]}}for(k=Math.max(k,E);k<s;++k)_[M++]=e[k],++j[e[k]];d=aq(e,c,u,_,j,N,A,M,I,k-I,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=x,i.p=p,i.i=k,i.w=E)}else{for(var k=i.w||0;k<s+u;k+=65535){var We=k+65535;We>=s&&(c[d/8|0]=u,We=s),d=ane(c,d+1,e.subarray(k,We))}i.i=s}return AZe(l,0,n+nne(d)+a)},one=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,s=0;s!=i;){for(var l=Math.min(s+2655,i);s<l;++s)a+=n+=r[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},kZe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new mu(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return EZe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},sne=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},OZe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=one();a.p(t.dictionary),sne(e,2,a.d())}};function TT(e,t){t||(t={});var r=one();r.p(e);var n=kZe(e,t,t.dictionary?6:2,4);return OZe(n,t),sne(n,n.length-4,r.d()),n}var TZe=typeof TextDecoder<"u"&&new TextDecoder,IZe=0;try{TZe.decode(ine,{stream:!0}),IZe=1}catch{}function DZe(e){if(Array.isArray(e))return e}function MZe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function RZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iq(e,t){return DZe(e)||MZe(e,t)||Dye(e,t)||RZe()}function oq(e,t="utf8"){return new TextDecoder(t).decode(e)}const LZe=new TextEncoder;function $Ze(e){return LZe.encode(e)}const FZe=1024*8,BZe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),uP={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class hM{constructor(t=FZe,r={}){Pa(this,"buffer");Pa(this,"byteLength");Pa(this,"byteOffset");Pa(this,"length");Pa(this,"offset");Pa(this,"lastWrittenByte");Pa(this,"littleEndian");Pa(this,"_data");Pa(this,"_mark");Pa(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let s=a;(ArrayBuffer.isView(t)||t instanceof hM)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=uP[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===BZe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new uP[r](l.buffer);return this.offset+=n,c.reverse(),c}const s=new uP[r](i);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return oq(this.readBytes(t))}decodeText(t=1,r="utf8"){return oq(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes($Ze(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const zZe=4,sq=0,lq=1,qZe=2;function Ix(e){let t=e.length;for(;--t>=0;)e[t]=0}const UZe=0,lne=1,VZe=2,WZe=3,HZe=258,mM=29,L1=256,Rb=L1+1+mM,sv=30,pM=19,cne=2*Rb+1,Fm=15,dP=16,GZe=7,gM=256,une=16,dne=17,fne=18,IT=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),q2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),KZe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),hne=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YZe=512,Pd=new Array((Rb+2)*2);Ix(Pd);const ly=new Array(sv*2);Ix(ly);const Lb=new Array(YZe);Ix(Lb);const $b=new Array(HZe-WZe+1);Ix($b);const vM=new Array(mM);Ix(vM);const dj=new Array(sv);Ix(dj);function fP(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let mne,pne,gne;function hP(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const vne=e=>e<256?Lb[e]:Lb[256+(e>>>7)],Fb=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Js=(e,t,r)=>{e.bi_valid>dP-r?(e.bi_buf|=t<<e.bi_valid&65535,Fb(e,e.bi_buf),e.bi_buf=t>>dP-e.bi_valid,e.bi_valid+=r-dP):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Ru=(e,t,r)=>{Js(e,r[t*2],r[t*2+1])},xne=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},XZe=e=>{e.bi_valid===16?(Fb(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},JZe=(e,t)=>{const r=t.dyn_tree,n=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,d,f,h,m,g,p=0;for(h=0;h<=Fm;h++)e.bl_count[h]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<cne;u++)d=e.heap[u],h=r[r[d*2+1]*2+1]+1,h>c&&(h=c,p++),r[d*2+1]=h,!(d>n)&&(e.bl_count[h]++,m=0,d>=l&&(m=s[d-l]),g=r[d*2],e.opt_len+=g*(h+m),i&&(e.static_len+=g*(a[d*2+1]+m)));if(p!==0){do{for(h=c-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(h=c;h!==0;h--)for(d=e.bl_count[h];d!==0;)f=e.heap[--u],!(f>n)&&(r[f*2+1]!==h&&(e.opt_len+=(h-r[f*2+1])*r[f*2],r[f*2+1]=h),d--)}},yne=(e,t,r)=>{const n=new Array(Fm+1);let a=0,i,s;for(i=1;i<=Fm;i++)a=a+r[i-1]<<1,n[i]=a;for(s=0;s<=t;s++){let l=e[s*2+1];l!==0&&(e[s*2]=xne(n[l]++,l))}},QZe=()=>{let e,t,r,n,a;const i=new Array(Fm+1);for(r=0,n=0;n<mM-1;n++)for(vM[n]=r,e=0;e<1<<IT[n];e++)$b[r++]=n;for($b[r-1]=n,a=0,n=0;n<16;n++)for(dj[n]=a,e=0;e<1<<q2[n];e++)Lb[a++]=n;for(a>>=7;n<sv;n++)for(dj[n]=a<<7,e=0;e<1<<q2[n]-7;e++)Lb[256+a++]=n;for(t=0;t<=Fm;t++)i[t]=0;for(e=0;e<=143;)Pd[e*2+1]=8,e++,i[8]++;for(;e<=255;)Pd[e*2+1]=9,e++,i[9]++;for(;e<=279;)Pd[e*2+1]=7,e++,i[7]++;for(;e<=287;)Pd[e*2+1]=8,e++,i[8]++;for(yne(Pd,Rb+1,i),e=0;e<sv;e++)ly[e*2+1]=5,ly[e*2]=xne(e,5);mne=new fP(Pd,IT,L1+1,Rb,Fm),pne=new fP(ly,q2,0,sv,Fm),gne=new fP(new Array(0),KZe,0,pM,GZe)},bne=e=>{let t;for(t=0;t<Rb;t++)e.dyn_ltree[t*2]=0;for(t=0;t<sv;t++)e.dyn_dtree[t*2]=0;for(t=0;t<pM;t++)e.bl_tree[t*2]=0;e.dyn_ltree[gM*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},wne=e=>{e.bi_valid>8?Fb(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},cq=(e,t,r,n)=>{const a=t*2,i=r*2;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},mP=(e,t,r)=>{const n=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&cq(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!cq(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},uq=(e,t,r)=>{let n,a,i=0,s,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+i++]&255,n+=(e.pending_buf[e.sym_buf+i++]&255)<<8,a=e.pending_buf[e.sym_buf+i++],n===0?Ru(e,a,t):(s=$b[a],Ru(e,s+L1+1,t),l=IT[s],l!==0&&(a-=vM[s],Js(e,a,l)),n--,s=vne(n),Ru(e,s,r),l=q2[s],l!==0&&(n-=dj[s],Js(e,n,l)));while(i<e.sym_next);Ru(e,gM,t)},DT=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,l,c=-1,u;for(e.heap_len=0,e.heap_max=cne,s=0;s<i;s++)r[s*2]!==0?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,a&&(e.static_len-=n[u*2+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)mP(e,r,s);u=i;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],mP(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=l,r[u*2]=r[s*2]+r[l*2],e.depth[u]=(e.depth[s]>=e.depth[l]?e.depth[s]:e.depth[l])+1,r[s*2+1]=r[l*2+1]=u,e.heap[1]=u++,mP(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],JZe(e,t),yne(r,c,e.bl_count)},dq=(e,t,r)=>{let n,a=-1,i,s=t[0*2+1],l=0,c=7,u=4;for(s===0&&(c=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=s,s=t[(n+1)*2+1],!(++l<c&&i===s)&&(l<u?e.bl_tree[i*2]+=l:i!==0?(i!==a&&e.bl_tree[i*2]++,e.bl_tree[une*2]++):l<=10?e.bl_tree[dne*2]++:e.bl_tree[fne*2]++,l=0,a=i,s===0?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))},fq=(e,t,r)=>{let n,a=-1,i,s=t[0*2+1],l=0,c=7,u=4;for(s===0&&(c=138,u=3),n=0;n<=r;n++)if(i=s,s=t[(n+1)*2+1],!(++l<c&&i===s)){if(l<u)do Ru(e,i,e.bl_tree);while(--l!==0);else i!==0?(i!==a&&(Ru(e,i,e.bl_tree),l--),Ru(e,une,e.bl_tree),Js(e,l-3,2)):l<=10?(Ru(e,dne,e.bl_tree),Js(e,l-3,3)):(Ru(e,fne,e.bl_tree),Js(e,l-11,7));l=0,a=i,s===0?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4)}},ZZe=e=>{let t;for(dq(e,e.dyn_ltree,e.l_desc.max_code),dq(e,e.dyn_dtree,e.d_desc.max_code),DT(e,e.bl_desc),t=pM-1;t>=3&&e.bl_tree[hne[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},eet=(e,t,r,n)=>{let a;for(Js(e,t-257,5),Js(e,r-1,5),Js(e,n-4,4),a=0;a<n;a++)Js(e,e.bl_tree[hne[a]*2+1],3);fq(e,e.dyn_ltree,t-1),fq(e,e.dyn_dtree,r-1)},tet=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return sq;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return lq;for(r=32;r<L1;r++)if(e.dyn_ltree[r*2]!==0)return lq;return sq};let hq=!1;const ret=e=>{hq||(QZe(),hq=!0),e.l_desc=new hP(e.dyn_ltree,mne),e.d_desc=new hP(e.dyn_dtree,pne),e.bl_desc=new hP(e.bl_tree,gne),e.bi_buf=0,e.bi_valid=0,bne(e)},_ne=(e,t,r,n)=>{Js(e,(UZe<<1)+(n?1:0),3),wne(e),Fb(e,r),Fb(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},net=e=>{Js(e,lne<<1,3),Ru(e,gM,Pd),XZe(e)},aet=(e,t,r,n)=>{let a,i,s=0;e.level>0?(e.strm.data_type===qZe&&(e.strm.data_type=tet(e)),DT(e,e.l_desc),DT(e,e.d_desc),s=ZZe(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=r+5,r+4<=a&&t!==-1?_ne(e,t,r,n):e.strategy===zZe||i===a?(Js(e,(lne<<1)+(n?1:0),3),uq(e,Pd,ly)):(Js(e,(VZe<<1)+(n?1:0),3),eet(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),uq(e,e.dyn_ltree,e.dyn_dtree)),bne(e),n&&wne(e)},iet=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[($b[r]+L1+1)*2]++,e.dyn_dtree[vne(t)*2]++),e.sym_next===e.sym_end);var oet=ret,set=_ne,cet=aet,uet=iet,det=net,fet={_tr_init:oet,_tr_stored_block:set,_tr_flush_block:cet,_tr_tally:uet,_tr_align:det};const het=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do a=a+t[n++]|0,i=i+a|0;while(--s);a%=65521,i%=65521}return a|i<<16|0};var Bb=het;const met=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},pet=new Uint32Array(met()),get=(e,t,r,n)=>{const a=pet,i=n+r;e^=-1;for(let s=n;s<i;s++)e=e>>>8^a[(e^t[s])&255];return e^-1};var Co=get,tx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:vet,_tr_stored_block:MT,_tr_flush_block:xet,_tr_tally:yh,_tr_align:yet}=fet,{Z_NO_FLUSH:bh,Z_PARTIAL_FLUSH:bet,Z_FULL_FLUSH:wet,Z_FINISH:lc,Z_BLOCK:mq,Z_OK:Uo,Z_STREAM_END:pq,Z_STREAM_ERROR:Zu,Z_DATA_ERROR:_et,Z_BUF_ERROR:pP,Z_DEFAULT_COMPRESSION:jet,Z_FILTERED:Net,Z_HUFFMAN_ONLY:i2,Z_RLE:Cet,Z_FIXED:Aet,Z_DEFAULT_STRATEGY:Pet,Z_UNKNOWN:Eet,Z_DEFLATED:MC}=$1,ket=9,Oet=15,Tet=8,Iet=29,Det=256,RT=Det+1+Iet,Met=30,Ret=19,Let=2*RT+1,$et=15,ia=3,Zf=258,ed=Zf+ia+1,Fet=32,rx=42,xM=57,LT=69,$T=73,FT=91,BT=103,Bm=113,O0=666,Ts=1,Dx=2,Np=3,Mx=4,Bet=3,zm=(e,t)=>(e.msg=tx[t],t),gq=e=>e*2-(e>4?9:0),Wf=e=>{let t=e.length;for(;--t>=0;)e[t]=0},zet=e=>{let t,r,n,a=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t);t=a,n=t;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)};let qet=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,wh=qet;const bl=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Ol=(e,t)=>{xet(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,bl(e.strm)},_a=(e,t)=>{e.pending_buf[e.pending++]=t},x0=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},zT=(e,t,r,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),e.state.wrap===1?e.adler=Bb(e.adler,t,a,r):e.state.wrap===2&&(e.adler=Co(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},Sne=(e,t)=>{let r=e.max_chain_length,n=e.strstart,a,i,s=e.prev_length,l=e.nice_match;const c=e.strstart>e.w_size-ed?e.strstart-(e.w_size-ed):0,u=e.window,d=e.w_mask,f=e.prev,h=e.strstart+Zf;let m=u[n+s-1],g=u[n+s];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(a=t,!(u[a+s]!==g||u[a+s-1]!==m||u[a]!==u[n]||u[++a]!==u[n+1])){n+=2,a++;do;while(u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&n<h);if(i=Zf-(h-n),n=h-Zf,i>s){if(e.match_start=t,s=i,i>=l)break;m=u[n+s-1],g=u[n+s]}}while((t=f[t&d])>c&&--r!==0);return s<=e.lookahead?s:e.lookahead},nx=e=>{const t=e.w_size;let r,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ed)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),zet(e),n+=t),e.strm.avail_in===0)break;if(r=zT(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=ia)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=wh(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=wh(e,e.ins_h,e.window[a+ia-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<ia)););}while(e.lookahead<ed&&e.strm.avail_in!==0)},jne=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,i,s=0,l=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&t!==lc||t===bh||n!==a+e.strm.avail_in)))break;s=t===lc&&n===a+e.strm.avail_in?1:0,MT(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,bl(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(zT(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(s===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?Mx:t!==bh&&t!==lc&&e.strm.avail_in===0&&e.strstart===e.block_start?Dx:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(zT(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,r=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=r||(a||t===lc)&&t!==bh&&e.strm.avail_in===0&&a<=i)&&(n=a>i?i:a,s=t===lc&&e.strm.avail_in===0&&n===a?1:0,MT(e,e.block_start,n,s),e.block_start+=n,bl(e.strm)),s?Np:Ts)},gP=(e,t)=>{let r,n;for(;;){if(e.lookahead<ed){if(nx(e),e.lookahead<ed&&t===bh)return Ts;if(e.lookahead===0)break}if(r=0,e.lookahead>=ia&&(e.ins_h=wh(e,e.ins_h,e.window[e.strstart+ia-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-ed&&(e.match_length=Sne(e,r)),e.match_length>=ia)if(n=yh(e,e.strstart-e.match_start,e.match_length-ia),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ia){e.match_length--;do e.strstart++,e.ins_h=wh(e,e.ins_h,e.window[e.strstart+ia-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=wh(e,e.ins_h,e.window[e.strstart+1]);else n=yh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ol(e,!1),e.strm.avail_out===0))return Ts}return e.insert=e.strstart<ia-1?e.strstart:ia-1,t===lc?(Ol(e,!0),e.strm.avail_out===0?Np:Mx):e.sym_next&&(Ol(e,!1),e.strm.avail_out===0)?Ts:Dx},fg=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<ed){if(nx(e),e.lookahead<ed&&t===bh)return Ts;if(e.lookahead===0)break}if(r=0,e.lookahead>=ia&&(e.ins_h=wh(e,e.ins_h,e.window[e.strstart+ia-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ia-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ed&&(e.match_length=Sne(e,r),e.match_length<=5&&(e.strategy===Net||e.match_length===ia&&e.strstart-e.match_start>4096)&&(e.match_length=ia-1)),e.prev_length>=ia&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-ia,n=yh(e,e.strstart-1-e.prev_match,e.prev_length-ia),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=wh(e,e.ins_h,e.window[e.strstart+ia-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=ia-1,e.strstart++,n&&(Ol(e,!1),e.strm.avail_out===0))return Ts}else if(e.match_available){if(n=yh(e,0,e.window[e.strstart-1]),n&&Ol(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ts}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=yh(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ia-1?e.strstart:ia-1,t===lc?(Ol(e,!0),e.strm.avail_out===0?Np:Mx):e.sym_next&&(Ol(e,!1),e.strm.avail_out===0)?Ts:Dx},Uet=(e,t)=>{let r,n,a,i;const s=e.window;for(;;){if(e.lookahead<=Zf){if(nx(e),e.lookahead<=Zf&&t===bh)return Ts;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ia&&e.strstart>0&&(a=e.strstart-1,n=s[a],n===s[++a]&&n===s[++a]&&n===s[++a])){i=e.strstart+Zf;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<i);e.match_length=Zf-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ia?(r=yh(e,1,e.match_length-ia),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=yh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ol(e,!1),e.strm.avail_out===0))return Ts}return e.insert=0,t===lc?(Ol(e,!0),e.strm.avail_out===0?Np:Mx):e.sym_next&&(Ol(e,!1),e.strm.avail_out===0)?Ts:Dx},Vet=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(nx(e),e.lookahead===0)){if(t===bh)return Ts;break}if(e.match_length=0,r=yh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ol(e,!1),e.strm.avail_out===0))return Ts}return e.insert=0,t===lc?(Ol(e,!0),e.strm.avail_out===0?Np:Mx):e.sym_next&&(Ol(e,!1),e.strm.avail_out===0)?Ts:Dx};function ju(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}const T0=[new ju(0,0,0,0,jne),new ju(4,4,8,4,gP),new ju(4,5,16,8,gP),new ju(4,6,32,32,gP),new ju(4,4,16,16,fg),new ju(8,16,32,32,fg),new ju(8,16,128,128,fg),new ju(8,32,128,256,fg),new ju(32,128,258,1024,fg),new ju(32,258,258,4096,fg)],Wet=e=>{e.window_size=2*e.w_size,Wf(e.head),e.max_lazy_match=T0[e.level].max_lazy,e.good_match=T0[e.level].good_length,e.nice_match=T0[e.level].nice_length,e.max_chain_length=T0[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ia-1,e.match_available=0,e.ins_h=0};function Het(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=MC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Let*2),this.dyn_dtree=new Uint16Array((2*Met+1)*2),this.bl_tree=new Uint16Array((2*Ret+1)*2),Wf(this.dyn_ltree),Wf(this.dyn_dtree),Wf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array($et+1),this.heap=new Uint16Array(2*RT+1),Wf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*RT+1),Wf(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const F1=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==rx&&t.status!==xM&&t.status!==LT&&t.status!==$T&&t.status!==FT&&t.status!==BT&&t.status!==Bm&&t.status!==O0?1:0},Nne=e=>{if(F1(e))return zm(e,Zu);e.total_in=e.total_out=0,e.data_type=Eet;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?xM:t.wrap?rx:Bm,e.adler=t.wrap===2?0:1,t.last_flush=-2,vet(t),Uo},Cne=e=>{const t=Nne(e);return t===Uo&&Wet(e.state),t},Get=(e,t)=>F1(e)||e.state.wrap!==2?Zu:(e.state.gzhead=t,Uo),Ane=(e,t,r,n,a,i)=>{if(!e)return Zu;let s=1;if(t===jet&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>ket||r!==MC||n<8||n>15||t<0||t>9||i<0||i>Aet||n===8&&s!==1)return zm(e,Zu);n===8&&(n=9);const l=new Het;return e.state=l,l.strm=e,l.status=rx,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ia-1)/ia),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=i,l.method=r,Cne(e)},Ket=(e,t)=>Ane(e,t,MC,Oet,Tet,Pet),Yet=(e,t)=>{if(F1(e)||t>mq||t<0)return e?zm(e,Zu):Zu;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===O0&&t!==lc)return zm(e,e.avail_out===0?pP:Zu);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(bl(e),e.avail_out===0)return r.last_flush=-1,Uo}else if(e.avail_in===0&&gq(t)<=gq(n)&&t!==lc)return zm(e,pP);if(r.status===O0&&e.avail_in!==0)return zm(e,pP);if(r.status===rx&&r.wrap===0&&(r.status=Bm),r.status===rx){let a=MC+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=i2||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,a|=i<<6,r.strstart!==0&&(a|=Fet),a+=31-a%31,x0(r,a),r.strstart!==0&&(x0(r,e.adler>>>16),x0(r,e.adler&65535)),e.adler=1,r.status=Bm,bl(e),r.pending!==0)return r.last_flush=-1,Uo}if(r.status===xM){if(e.adler=0,_a(r,31),_a(r,139),_a(r,8),r.gzhead)_a(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),_a(r,r.gzhead.time&255),_a(r,r.gzhead.time>>8&255),_a(r,r.gzhead.time>>16&255),_a(r,r.gzhead.time>>24&255),_a(r,r.level===9?2:r.strategy>=i2||r.level<2?4:0),_a(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(_a(r,r.gzhead.extra.length&255),_a(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Co(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=LT;else if(_a(r,0),_a(r,0),_a(r,0),_a(r,0),_a(r,0),_a(r,r.level===9?2:r.strategy>=i2||r.level<2?4:0),_a(r,Bet),r.status=Bm,bl(e),r.pending!==0)return r.last_flush=-1,Uo}if(r.status===LT){if(r.gzhead.extra){let a=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=Co(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=l,bl(e),r.pending!==0)return r.last_flush=-1,Uo;a=0,i-=l}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>a&&(e.adler=Co(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=$T}if(r.status===$T){if(r.gzhead.name){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Co(e.adler,r.pending_buf,r.pending-a,a)),bl(e),r.pending!==0)return r.last_flush=-1,Uo;a=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,_a(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Co(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=FT}if(r.status===FT){if(r.gzhead.comment){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Co(e.adler,r.pending_buf,r.pending-a,a)),bl(e),r.pending!==0)return r.last_flush=-1,Uo;a=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,_a(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Co(e.adler,r.pending_buf,r.pending-a,a))}r.status=BT}if(r.status===BT){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(bl(e),r.pending!==0))return r.last_flush=-1,Uo;_a(r,e.adler&255),_a(r,e.adler>>8&255),e.adler=0}if(r.status=Bm,bl(e),r.pending!==0)return r.last_flush=-1,Uo}if(e.avail_in!==0||r.lookahead!==0||t!==bh&&r.status!==O0){let a=r.level===0?jne(r,t):r.strategy===i2?Vet(r,t):r.strategy===Cet?Uet(r,t):T0[r.level].func(r,t);if((a===Np||a===Mx)&&(r.status=O0),a===Ts||a===Np)return e.avail_out===0&&(r.last_flush=-1),Uo;if(a===Dx&&(t===bet?yet(r):t!==mq&&(MT(r,0,0,!1),t===wet&&(Wf(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),bl(e),e.avail_out===0))return r.last_flush=-1,Uo}return t!==lc?Uo:r.wrap<=0?pq:(r.wrap===2?(_a(r,e.adler&255),_a(r,e.adler>>8&255),_a(r,e.adler>>16&255),_a(r,e.adler>>24&255),_a(r,e.total_in&255),_a(r,e.total_in>>8&255),_a(r,e.total_in>>16&255),_a(r,e.total_in>>24&255)):(x0(r,e.adler>>>16),x0(r,e.adler&65535)),bl(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Uo:pq)},Xet=e=>{if(F1(e))return Zu;const t=e.state.status;return e.state=null,t===Bm?zm(e,_et):Uo},Jet=(e,t)=>{let r=t.length;if(F1(e))return Zu;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==rx||n.lookahead)return Zu;if(a===1&&(e.adler=Bb(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){a===0&&(Wf(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}const i=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,nx(n);n.lookahead>=ia;){let c=n.strstart,u=n.lookahead-(ia-1);do n.ins_h=wh(n,n.ins_h,n.window[c+ia-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=ia-1,nx(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ia-1,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=i,n.wrap=a,Uo};var Qet=Ket,Zet=Ane,ett=Cne,ttt=Nne,rtt=Get,ntt=Yet,att=Xet,itt=Jet,ott="pako deflate (from Nodeca project)",cy={deflateInit:Qet,deflateInit2:Zet,deflateReset:ett,deflateResetKeep:ttt,deflateSetHeader:rtt,deflate:ntt,deflateEnd:att,deflateSetDictionary:itt,deflateInfo:ott};const stt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ltt=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)stt(r,n)&&(e[n]=r[n])}}return e},ctt=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let s=e[n];r.set(s,a),a+=s.length}return r},RC={assign:ltt,flattenChunks:ctt};let Pne=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pne=!1}const zb=new Uint8Array(256);for(let e=0;e<256;e++)zb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;zb[254]=zb[254]=1;var utt=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,l=0;for(a=0;a<s;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<s&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const dtt=(e,t)=>{if(t<65534&&e.subarray&&Pne)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var ftt=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let s=e[n++];if(s<128){i[a++]=s;continue}let l=zb[s];if(l>4){i[a++]=65533,n+=l-1;continue}for(s&=l===2?31:l===3?15:7;l>1&&n<r;)s=s<<6|e[n++]&63,l--;if(l>1){i[a++]=65533;continue}s<65536?i[a++]=s:(s-=65536,i[a++]=55296|s>>10&1023,i[a++]=56320|s&1023)}return dtt(i,a)},htt=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+zb[e[r]]>t?r:t},qb={string2buf:utt,buf2string:ftt,utf8border:htt};function mtt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ene=mtt;const kne=Object.prototype.toString,{Z_NO_FLUSH:ptt,Z_SYNC_FLUSH:gtt,Z_FULL_FLUSH:vtt,Z_FINISH:xtt,Z_OK:fj,Z_STREAM_END:ytt,Z_DEFAULT_COMPRESSION:btt,Z_DEFAULT_STRATEGY:wtt,Z_DEFLATED:_tt}=$1;function yM(e){this.options=RC.assign({level:btt,method:_tt,chunkSize:16384,windowBits:15,memLevel:8,strategy:wtt},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ene,this.strm.avail_out=0;let r=cy.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==fj)throw new Error(tx[r]);if(t.header&&cy.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=qb.string2buf(t.dictionary):kne.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=cy.deflateSetDictionary(this.strm,n),r!==fj)throw new Error(tx[r]);this._dict_set=!0}}yM.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let a,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?xtt:ptt,typeof e=="string"?r.input=qb.string2buf(e):kne.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===gtt||i===vtt)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=cy.deflate(r,i),a===ytt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=cy.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===fj;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};yM.prototype.onData=function(e){this.chunks.push(e)};yM.prototype.onEnd=function(e){e===fj&&(this.result=RC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const o2=16209,Stt=16191;var jtt=function(t,r){let n,a,i,s,l,c,u,d,f,h,m,g,p,x,y,b,w,_,j,N,P,A,k,M;const E=t.state;n=t.next_in,k=t.input,a=n+(t.avail_in-5),i=t.next_out,M=t.output,s=i-(r-t.avail_out),l=i+(t.avail_out-257),c=E.dmax,u=E.wsize,d=E.whave,f=E.wnext,h=E.window,m=E.hold,g=E.bits,p=E.lencode,x=E.distcode,y=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;e:do{g<15&&(m+=k[n++]<<g,g+=8,m+=k[n++]<<g,g+=8),w=p[m&y];t:for(;;){if(_=w>>>24,m>>>=_,g-=_,_=w>>>16&255,_===0)M[i++]=w&65535;else if(_&16){j=w&65535,_&=15,_&&(g<_&&(m+=k[n++]<<g,g+=8),j+=m&(1<<_)-1,m>>>=_,g-=_),g<15&&(m+=k[n++]<<g,g+=8,m+=k[n++]<<g,g+=8),w=x[m&b];r:for(;;){if(_=w>>>24,m>>>=_,g-=_,_=w>>>16&255,_&16){if(N=w&65535,_&=15,g<_&&(m+=k[n++]<<g,g+=8,g<_&&(m+=k[n++]<<g,g+=8)),N+=m&(1<<_)-1,N>c){t.msg="invalid distance too far back",E.mode=o2;break e}if(m>>>=_,g-=_,_=i-s,N>_){if(_=N-_,_>d&&E.sane){t.msg="invalid distance too far back",E.mode=o2;break e}if(P=0,A=h,f===0){if(P+=u-_,_<j){j-=_;do M[i++]=h[P++];while(--_);P=i-N,A=M}}else if(f<_){if(P+=u+f-_,_-=f,_<j){j-=_;do M[i++]=h[P++];while(--_);if(P=0,f<j){_=f,j-=_;do M[i++]=h[P++];while(--_);P=i-N,A=M}}}else if(P+=f-_,_<j){j-=_;do M[i++]=h[P++];while(--_);P=i-N,A=M}for(;j>2;)M[i++]=A[P++],M[i++]=A[P++],M[i++]=A[P++],j-=3;j&&(M[i++]=A[P++],j>1&&(M[i++]=A[P++]))}else{P=i-N;do M[i++]=M[P++],M[i++]=M[P++],M[i++]=M[P++],j-=3;while(j>2);j&&(M[i++]=M[P++],j>1&&(M[i++]=M[P++]))}}else if(_&64){t.msg="invalid distance code",E.mode=o2;break e}else{w=x[(w&65535)+(m&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){E.mode=Stt;break e}else{t.msg="invalid literal/length code",E.mode=o2;break e}else{w=p[(w&65535)+(m&(1<<_)-1)];continue t}break}}while(n<a&&i<l);j=g>>3,n-=j,g-=j<<3,m&=(1<<g)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<l?257+(l-i):257-(i-l),E.hold=m,E.bits=g};const hg=15,vq=852,xq=592,yq=0,vP=1,bq=2,Ntt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ctt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Att=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ptt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ett=(e,t,r,n,a,i,s,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,m=0,g=0,p=0,x=0,y=0,b=0,w,_,j,N,P,A=null,k;const M=new Uint16Array(hg+1),E=new Uint16Array(hg+1);let I=null,O,R,B;for(u=0;u<=hg;u++)M[u]=0;for(d=0;d<n;d++)M[t[r+d]]++;for(m=c,h=hg;h>=1&&M[h]===0;h--);if(m>h&&(m=h),h===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&M[f]===0;f++);for(m<f&&(m=f),x=1,u=1;u<=hg;u++)if(x<<=1,x-=M[u],x<0)return-1;if(x>0&&(e===yq||h!==1))return-1;for(E[1]=0,u=1;u<hg;u++)E[u+1]=E[u]+M[u];for(d=0;d<n;d++)t[r+d]!==0&&(s[E[t[r+d]]++]=d);if(e===yq?(A=I=s,k=20):e===vP?(A=Ntt,I=Ctt,k=257):(A=Att,I=Ptt,k=0),b=0,d=0,u=f,P=i,g=m,p=0,j=-1,y=1<<m,N=y-1,e===vP&&y>vq||e===bq&&y>xq)return 1;for(;;){O=u-p,s[d]+1<k?(R=0,B=s[d]):s[d]>=k?(R=I[s[d]-k],B=A[s[d]-k]):(R=32+64,B=0),w=1<<u-p,_=1<<g,f=_;do _-=w,a[P+(b>>p)+_]=O<<24|R<<16|B|0;while(_!==0);for(w=1<<u-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,d++,--M[u]===0){if(u===h)break;u=t[r+s[d]]}if(u>m&&(b&N)!==j){for(p===0&&(p=m),P+=f,g=u-p,x=1<<g;g+p<h&&(x-=M[g+p],!(x<=0));)g++,x<<=1;if(y+=1<<g,e===vP&&y>vq||e===bq&&y>xq)return 1;j=b&N,a[j]=m<<24|g<<16|P-i|0}}return b!==0&&(a[P+b]=u-p<<24|64<<16|0),l.bits=m,0};var uy=Ett;const ktt=0,One=1,Tne=2,{Z_FINISH:wq,Z_BLOCK:Ott,Z_TREES:s2,Z_OK:Cp,Z_STREAM_END:Ttt,Z_NEED_DICT:Itt,Z_STREAM_ERROR:bc,Z_DATA_ERROR:Ine,Z_MEM_ERROR:Dne,Z_BUF_ERROR:Dtt,Z_DEFLATED:_q}=$1,LC=16180,Sq=16181,jq=16182,Nq=16183,Cq=16184,Aq=16185,Pq=16186,Eq=16187,kq=16188,Oq=16189,hj=16190,_d=16191,xP=16192,Tq=16193,yP=16194,Iq=16195,Dq=16196,Mq=16197,Rq=16198,l2=16199,c2=16200,Lq=16201,$q=16202,Fq=16203,Bq=16204,zq=16205,bP=16206,qq=16207,Uq=16208,hi=16209,Mne=16210,Rne=16211,Mtt=852,Rtt=592,Ltt=15,$tt=Ltt,Vq=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Ftt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<LC||t.mode>Rne?1:0},Lne=e=>{if(zp(e))return bc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=LC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Mtt),t.distcode=t.distdyn=new Int32Array(Rtt),t.sane=1,t.back=-1,Cp},$ne=e=>{if(zp(e))return bc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Lne(e)},Fne=(e,t)=>{let r;if(zp(e))return bc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?bc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,$ne(e))},Bne=(e,t)=>{if(!e)return bc;const r=new Ftt;e.state=r,r.strm=e,r.window=null,r.mode=LC;const n=Fne(e,t);return n!==Cp&&(e.state=null),n},Btt=e=>Bne(e,$tt);let Wq=!0,wP,_P;const ztt=e=>{if(Wq){wP=new Int32Array(512),_P=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(uy(One,e.lens,0,288,wP,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;uy(Tne,e.lens,0,32,_P,0,e.work,{bits:5}),Wq=!1}e.lencode=wP,e.lenbits=9,e.distcode=_P,e.distbits=5},zne=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},qtt=(e,t)=>{let r,n,a,i,s,l,c,u,d,f,h,m,g,p,x=0,y,b,w,_,j,N,P,A;const k=new Uint8Array(4);let M,E;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zp(e)||!e.output||!e.input&&e.avail_in!==0)return bc;r=e.state,r.mode===_d&&(r.mode=xP),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,f=l,h=c,A=Cp;e:for(;;)switch(r.mode){case LC:if(r.wrap===0){r.mode=xP;break}for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,k[0]=u&255,k[1]=u>>>8&255,r.check=Co(r.check,k,2,0),u=0,d=0,r.mode=Sq;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=hi;break}if((u&15)!==_q){e.msg="unknown compression method",r.mode=hi;break}if(u>>>=4,d-=4,P=(u&15)+8,r.wbits===0&&(r.wbits=P),P>15||P>r.wbits){e.msg="invalid window size",r.mode=hi;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?Oq:_d,u=0,d=0;break;case Sq:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==_q){e.msg="unknown compression method",r.mode=hi;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=hi;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=Co(r.check,k,2,0)),u=0,d=0,r.mode=jq;case jq:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,r.check=Co(r.check,k,4,0)),u=0,d=0,r.mode=Nq;case Nq:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=Co(r.check,k,2,0)),u=0,d=0,r.mode=Cq;case Cq:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=Co(r.check,k,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=Aq;case Aq:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+m),P)),r.flags&512&&r.wrap&4&&(r.check=Co(r.check,n,m,i)),l-=m,i+=m,r.length-=m),r.length))break e;r.length=0,r.mode=Pq;case Pq:if(r.flags&2048){if(l===0)break e;m=0;do P=n[i+m++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P));while(P&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=Co(r.check,n,m,i)),l-=m,i+=m,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Eq;case Eq:if(r.flags&4096){if(l===0)break e;m=0;do P=n[i+m++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P));while(P&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=Co(r.check,n,m,i)),l-=m,i+=m,P)break e}else r.head&&(r.head.comment=null);r.mode=kq;case kq:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=hi;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=_d;break;case Oq:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}e.adler=r.check=Vq(u),u=0,d=0,r.mode=hj;case hj:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,Itt;e.adler=r.check=1,r.mode=_d;case _d:if(t===Ott||t===s2)break e;case xP:if(r.last){u>>>=d&7,d-=d&7,r.mode=bP;break}for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=Tq;break;case 1:if(ztt(r),r.mode=l2,t===s2){u>>>=2,d-=2;break e}break;case 2:r.mode=Dq;break;case 3:e.msg="invalid block type",r.mode=hi}u>>>=2,d-=2;break;case Tq:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=hi;break}if(r.length=u&65535,u=0,d=0,r.mode=yP,t===s2)break e;case yP:r.mode=Iq;case Iq:if(m=r.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;a.set(n.subarray(i,i+m),s),l-=m,i+=m,c-=m,s+=m,r.length-=m;break}r.mode=_d;break;case Dq:for(;d<14;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=hi;break}r.have=0,r.mode=Mq;case Mq:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.lens[I[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},A=uy(ktt,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,A){e.msg="invalid code lengths set",r.mode=hi;break}r.have=0,r.mode=Rq;case Rq:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,b=x>>>16&255,w=x&65535,!(y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(w<16)u>>>=y,d-=y,r.lens[r.have++]=w;else{if(w===16){for(E=y+2;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(u>>>=y,d-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=hi;break}P=r.lens[r.have-1],m=3+(u&3),u>>>=2,d-=2}else if(w===17){for(E=y+3;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,P=0,m=3+(u&7),u>>>=3,d-=3}else{for(E=y+7;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=y,d-=y,P=0,m=11+(u&127),u>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=hi;break}for(;m--;)r.lens[r.have++]=P}}if(r.mode===hi)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=hi;break}if(r.lenbits=9,M={bits:r.lenbits},A=uy(One,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,A){e.msg="invalid literal/lengths set",r.mode=hi;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},A=uy(Tne,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,A){e.msg="invalid distances set",r.mode=hi;break}if(r.mode=l2,t===s2)break e;case l2:r.mode=c2;case c2:if(l>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,jtt(e,h),s=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,r.mode===_d&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],y=x>>>24,b=x>>>16&255,w=x&65535,!(y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(b&&!(b&240)){for(_=y,j=b,N=w;x=r.lencode[N+((u&(1<<_+j)-1)>>_)],y=x>>>24,b=x>>>16&255,w=x&65535,!(_+y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=_,d-=_,r.back+=_}if(u>>>=y,d-=y,r.back+=y,r.length=w,b===0){r.mode=zq;break}if(b&32){r.back=-1,r.mode=_d;break}if(b&64){e.msg="invalid literal/length code",r.mode=hi;break}r.extra=b&15,r.mode=Lq;case Lq:if(r.extra){for(E=r.extra;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=$q;case $q:for(;x=r.distcode[u&(1<<r.distbits)-1],y=x>>>24,b=x>>>16&255,w=x&65535,!(y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(!(b&240)){for(_=y,j=b,N=w;x=r.distcode[N+((u&(1<<_+j)-1)>>_)],y=x>>>24,b=x>>>16&255,w=x&65535,!(_+y<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=_,d-=_,r.back+=_}if(u>>>=y,d-=y,r.back+=y,b&64){e.msg="invalid distance code",r.mode=hi;break}r.offset=w,r.extra=b&15,r.mode=Fq;case Fq:if(r.extra){for(E=r.extra;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=hi;break}r.mode=Bq;case Bq:if(c===0)break e;if(m=h-c,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=hi;break}m>r.wnext?(m-=r.wnext,g=r.wsize-m):g=r.wnext-m,m>r.length&&(m=r.length),p=r.window}else p=a,g=s-r.offset,m=r.length;m>c&&(m=c),c-=m,r.length-=m;do a[s++]=p[g++];while(--m);r.length===0&&(r.mode=c2);break;case zq:if(c===0)break e;a[s++]=r.length,c--,r.mode=c2;break;case bP:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[i++]<<d,d+=8}if(h-=c,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?Co(r.check,a,h,s-h):Bb(r.check,a,h,s-h)),h=c,r.wrap&4&&(r.flags?u:Vq(u))!==r.check){e.msg="incorrect data check",r.mode=hi;break}u=0,d=0}r.mode=qq;case qq:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=hi;break}u=0,d=0}r.mode=Uq;case Uq:A=Ttt;break e;case hi:A=Ine;break e;case Mne:return Dne;case Rne:default:return bc}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==e.avail_out&&r.mode<hi&&(r.mode<bP||t!==wq))&&zne(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?Co(r.check,a,h,e.next_out-h):Bb(r.check,a,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===_d?128:0)+(r.mode===l2||r.mode===yP?256:0),(f===0&&h===0||t===wq)&&A===Cp&&(A=Dtt),A},Utt=e=>{if(zp(e))return bc;let t=e.state;return t.window&&(t.window=null),e.state=null,Cp},Vtt=(e,t)=>{if(zp(e))return bc;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Cp):bc},Wtt=(e,t)=>{const r=t.length;let n,a,i;return zp(e)||(n=e.state,n.wrap!==0&&n.mode!==hj)?bc:n.mode===hj&&(a=1,a=Bb(a,t,r,0),a!==n.check)?Ine:(i=zne(e,t,r,r),i?(n.mode=Mne,Dne):(n.havedict=1,Cp))};var Htt=$ne,Gtt=Fne,Ktt=Lne,Ytt=Btt,Xtt=Bne,Jtt=qtt,Qtt=Utt,Ztt=Vtt,ert=Wtt,trt="pako inflate (from Nodeca project)",Ed={inflateReset:Htt,inflateReset2:Gtt,inflateResetKeep:Ktt,inflateInit:Ytt,inflateInit2:Xtt,inflate:Jtt,inflateEnd:Qtt,inflateGetHeader:Ztt,inflateSetDictionary:ert,inflateInfo:trt};function rrt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var nrt=rrt;const qne=Object.prototype.toString,{Z_NO_FLUSH:art,Z_FINISH:irt,Z_OK:Ub,Z_STREAM_END:SP,Z_NEED_DICT:jP,Z_STREAM_ERROR:ort,Z_DATA_ERROR:Hq,Z_MEM_ERROR:srt}=$1;function B1(e){this.options=RC.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ene,this.strm.avail_out=0;let r=Ed.inflateInit2(this.strm,t.windowBits);if(r!==Ub)throw new Error(tx[r]);if(this.header=new nrt,Ed.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=qb.string2buf(t.dictionary):qne.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Ed.inflateSetDictionary(this.strm,t.dictionary),r!==Ub)))throw new Error(tx[r])}B1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,s,l;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?irt:art,qne.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Ed.inflate(r,s),i===jP&&a&&(i=Ed.inflateSetDictionary(r,a),i===Ub?i=Ed.inflate(r,s):i===Hq&&(i=jP));r.avail_in>0&&i===SP&&r.state.wrap>0&&e[r.next_in]!==0;)Ed.inflateReset(r),i=Ed.inflate(r,s);switch(i){case ort:case Hq:case jP:case srt:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===SP))if(this.options.to==="string"){let c=qb.utf8border(r.output,r.next_out),u=r.next_out-c,d=qb.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Ub&&l===0)){if(i===SP)return i=Ed.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};B1.prototype.onData=function(e){this.chunks.push(e)};B1.prototype.onEnd=function(e){e===Ub&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=RC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function bM(e,t){const r=new B1(t);if(r.push(e),r.err)throw r.msg||tx[r.err];return r.result}function lrt(e,t){return t=t||{},t.raw=!0,bM(e,t)}var crt=B1,urt=bM,drt=lrt,frt=bM,hrt=$1,mrt={Inflate:crt,inflate:urt,inflateRaw:drt,ungzip:frt,constants:hrt};const{Inflate:prt,inflate:grt,inflateRaw:fot,ungzip:hot}=mrt;var Gq=prt,vrt=grt;const Une=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Une[e]=t}const Kq=4294967295;function xrt(e,t,r){let n=e;for(let a=0;a<r;a++)n=Une[(n^t[a])&255]^n>>>8;return n}function yrt(e,t){return(xrt(Kq,e,t)^Kq)>>>0}function Yq(e,t,r){const n=e.readUint32(),a=yrt(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function Vne(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function Wne(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function Hne(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function Gne(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function Kne(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+brt(t[i-a],r[i],r[i-a])&255}}function brt(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),s=Math.abs(n-r);return a<=i&&a<=s?e:i<=s?t:r}function wrt(e,t,r,n,a,i){switch(e){case 0:Vne(t,r,a);break;case 1:Wne(t,r,a,i);break;case 2:Hne(t,r,n,a);break;case 3:Gne(t,r,n,a,i);break;case 4:Kne(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const _rt=new Uint16Array([255]),Srt=new Uint8Array(_rt.buffer),jrt=Srt[0]===255;function Nrt(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=s[d],h=Math.ceil((r-f.x)/f.xStep),m=Math.ceil((n-f.y)/f.yStep);if(h<=0||m<=0)continue;const g=h*l,p=new Uint8Array(g);for(let x=0;x<m;x++){const y=t[u++],b=t.subarray(u,u+g);u+=g;const w=new Uint8Array(g);wrt(y,b,w,p,g,l),p.set(w);for(let _=0;_<h;_++){const j=f.x+_*f.xStep,N=f.y+x*f.yStep;if(!(j>=r||N>=n))for(let P=0;P<l;P++)c[(N*r+j)*l+P]=w[_*l+P]}}}if(i===16){const d=new Uint16Array(c.buffer);if(jrt)for(let f=0;f<d.length;f++)d[f]=Crt(d[f]);return d}else return c}function Crt(e){return(e&255)<<8|e>>8&255}const Art=new Uint16Array([255]),Prt=new Uint8Array(Art.buffer),Ert=Prt[0]===255,krt=new Uint8Array(0);function Xq(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,s=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(n*l);let u=krt,d=0,f,h;for(let m=0;m<n;m++){switch(f=t.subarray(d+1,d+1+l),h=c.subarray(m*l,(m+1)*l),t[d]){case 0:Vne(f,h,l);break;case 1:Wne(f,h,l,s);break;case 2:Hne(f,h,u,l);break;case 3:Gne(f,h,u,l,s);break;case 4:Kne(f,h,u,l,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=h,d+=l+1}if(i===16){const m=new Uint16Array(c.buffer);if(Ert)for(let g=0;g<m.length;g++)m[g]=Ort(m[g]);return m}else return c}function Ort(e){return(e&255)<<8|e>>8&255}const U2=Uint8Array.of(137,80,78,71,13,10,26,10);function Jq(e){if(!Trt(e.readBytes(U2.length)))throw new Error("wrong PNG signature")}function Trt(e){if(e.length<U2.length)return!1;for(let t=0;t<U2.length;t++)if(e[t]!==U2[t])return!1;return!0}const Irt="tEXt",Drt=0,Yne=new TextDecoder("latin1");function Mrt(e){if(Lrt(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Rrt=/^[\u0000-\u00FF]*$/;function Lrt(e){if(!Rrt.test(e))throw new Error("invalid latin1 text")}function $rt(e,t,r){const n=Xne(t);e[n]=Frt(t,r-n.length-1)}function Xne(e){for(e.mark();e.readByte()!==Drt;);const t=e.offset;e.reset();const r=Yne.decode(e.readBytes(t-e.offset-1));return e.skip(1),Mrt(r),r}function Frt(e,t){return Yne.decode(e.readBytes(t))}const gl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},NP={UNKNOWN:-1,DEFLATE:0},Qq={UNKNOWN:-1,ADAPTIVE:0},CP={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},u2={NONE:0,BACKGROUND:1,PREVIOUS:2},AP={SOURCE:0,OVER:1};class Brt extends hM{constructor(r,n={}){super(r);Pa(this,"_checkCrc");Pa(this,"_inflator");Pa(this,"_png");Pa(this,"_apng");Pa(this,"_end");Pa(this,"_hasPalette");Pa(this,"_palette");Pa(this,"_hasTransparency");Pa(this,"_transparency");Pa(this,"_compressionMethod");Pa(this,"_filterMethod");Pa(this,"_interlaceMethod");Pa(this,"_colorType");Pa(this,"_isAnimated");Pa(this,"_numberOfFrames");Pa(this,"_numberOfPlays");Pa(this,"_frames");Pa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new Gq,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=NP.UNKNOWN,this._filterMethod=Qq.UNKNOWN,this._interlaceMethod=CP.UNKNOWN,this._colorType=gl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Jq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(Jq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Irt:$rt(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Yq(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Yq(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=zrt(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case gl.GREYSCALE:a=1;break;case gl.TRUECOLOUR:a=3;break;case gl.INDEXED_COLOUR:a=1;break;case gl.GREYSCALE_ALPHA:a=2;break;case gl.TRUECOLOUR_ALPHA:a=4;break;case gl.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==NP.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case gl.GREYSCALE:case gl.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case gl.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case gl.UNKNOWN:case gl.GREYSCALE_ALPHA:case gl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Xne(this),a=this.readUint8();if(a!==NP.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:vrt(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=Xq({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case u2.NONE:break;case u2.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const l=(i*r.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case u2.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(s,l)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(s*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case AP.SOURCE:for(let s=0;s<n.height;s++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(s,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case AP.OVER:for(let s=0;s<n.height;s++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(s,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],m=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Qq.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===CP.NO_INTERLACE)this._png.data=Xq({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===CP.ADAM7)this._png.data=Nrt({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:u2.NONE,blendOp:AP.SOURCE,data:r}),this._inflator=new Gq,this._writingDataChunks=!1}}function zrt(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var Zq;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(Zq||(Zq={}));function qrt(e,t){return new Brt(e,t).decode()}var jn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function PP(){jn.console&&typeof jn.console.log=="function"&&jn.console.log.apply(jn.console,arguments)}var za={log:PP,warn:function(e){jn.console&&(typeof jn.console.warn=="function"?jn.console.warn.apply(jn.console,arguments):PP.call(null,arguments))},error:function(e){jn.console&&(typeof jn.console.error=="function"?jn.console.error.apply(jn.console,arguments):PP(e))}};function EP(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){bm(n.response,t,r)},n.onerror=function(){za.error("could not download file")},n.send()}function e9(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function d2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var bm=jn.saveAs||((typeof window>"u"?"undefined":ra(window))!=="object"||window!==jn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=jn.URL||jn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?e9(a.href)?EP(e,t,r):d2(a,a.target="_blank"):d2(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){d2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(e9(e))EP(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){d2(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:ra(i)!=="object"&&(za.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return EP(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(jn.HTMLElement)||jn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":ra(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=jn.URL||jn.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Jne(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var V2=jn.atob.bind(jn),t9=jn.btoa.bind(jn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function kP(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=es(r,n,a,i,t[0],7,-680876936),i=es(i,r,n,a,t[1],12,-389564586),a=es(a,i,r,n,t[2],17,606105819),n=es(n,a,i,r,t[3],22,-1044525330),r=es(r,n,a,i,t[4],7,-176418897),i=es(i,r,n,a,t[5],12,1200080426),a=es(a,i,r,n,t[6],17,-1473231341),n=es(n,a,i,r,t[7],22,-45705983),r=es(r,n,a,i,t[8],7,1770035416),i=es(i,r,n,a,t[9],12,-1958414417),a=es(a,i,r,n,t[10],17,-42063),n=es(n,a,i,r,t[11],22,-1990404162),r=es(r,n,a,i,t[12],7,1804603682),i=es(i,r,n,a,t[13],12,-40341101),a=es(a,i,r,n,t[14],17,-1502002290),r=ts(r,n=es(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=ts(i,r,n,a,t[6],9,-1069501632),a=ts(a,i,r,n,t[11],14,643717713),n=ts(n,a,i,r,t[0],20,-373897302),r=ts(r,n,a,i,t[5],5,-701558691),i=ts(i,r,n,a,t[10],9,38016083),a=ts(a,i,r,n,t[15],14,-660478335),n=ts(n,a,i,r,t[4],20,-405537848),r=ts(r,n,a,i,t[9],5,568446438),i=ts(i,r,n,a,t[14],9,-1019803690),a=ts(a,i,r,n,t[3],14,-187363961),n=ts(n,a,i,r,t[8],20,1163531501),r=ts(r,n,a,i,t[13],5,-1444681467),i=ts(i,r,n,a,t[2],9,-51403784),a=ts(a,i,r,n,t[7],14,1735328473),r=rs(r,n=ts(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=rs(i,r,n,a,t[8],11,-2022574463),a=rs(a,i,r,n,t[11],16,1839030562),n=rs(n,a,i,r,t[14],23,-35309556),r=rs(r,n,a,i,t[1],4,-1530992060),i=rs(i,r,n,a,t[4],11,1272893353),a=rs(a,i,r,n,t[7],16,-155497632),n=rs(n,a,i,r,t[10],23,-1094730640),r=rs(r,n,a,i,t[13],4,681279174),i=rs(i,r,n,a,t[0],11,-358537222),a=rs(a,i,r,n,t[3],16,-722521979),n=rs(n,a,i,r,t[6],23,76029189),r=rs(r,n,a,i,t[9],4,-640364487),i=rs(i,r,n,a,t[12],11,-421815835),a=rs(a,i,r,n,t[15],16,530742520),r=ns(r,n=rs(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=ns(i,r,n,a,t[7],10,1126891415),a=ns(a,i,r,n,t[14],15,-1416354905),n=ns(n,a,i,r,t[5],21,-57434055),r=ns(r,n,a,i,t[12],6,1700485571),i=ns(i,r,n,a,t[3],10,-1894986606),a=ns(a,i,r,n,t[10],15,-1051523),n=ns(n,a,i,r,t[1],21,-2054922799),r=ns(r,n,a,i,t[8],6,1873313359),i=ns(i,r,n,a,t[15],10,-30611744),a=ns(a,i,r,n,t[6],15,-1560198380),n=ns(n,a,i,r,t[13],21,1309151649),r=ns(r,n,a,i,t[4],6,-145523070),i=ns(i,r,n,a,t[11],10,-1120210379),a=ns(a,i,r,n,t[2],15,718787259),n=ns(n,a,i,r,t[9],21,-343485551),e[0]=eh(r,e[0]),e[1]=eh(n,e[1]),e[2]=eh(a,e[2]),e[3]=eh(i,e[3])}function $C(e,t,r,n,a,i){return t=eh(eh(t,e),eh(n,i)),eh(t<<a|t>>>32-a,r)}function es(e,t,r,n,a,i,s){return $C(t&r|~t&n,e,t,a,i,s)}function ts(e,t,r,n,a,i,s){return $C(t&n|r&~n,e,t,a,i,s)}function rs(e,t,r,n,a,i,s){return $C(t^r^n,e,t,a,i,s)}function ns(e,t,r,n,a,i,s){return $C(r^(t|~n),e,t,a,i,s)}function Qne(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)kP(n,Urt(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(kP(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,kP(n,a),n}function Urt(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var r9="0123456789abcdef".split("");function Vrt(e){for(var t="",r=0;r<4;r++)t+=r9[e>>8*r+4&15]+r9[e>>8*r&15];return t}function Wrt(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function qT(e){return Qne(e).map(Wrt).join("")}var Hrt=function(e){for(var t=0;t<e.length;t++)e[t]=Vrt(e[t]);return e.join("")}(Qne("hello"))!="5d41402abc4b2a76b9719d911017c592";function eh(e,t){if(Hrt){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function UT(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+s.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,s=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^s);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var n9={print:4,modify:8,copy:16,"annot-forms":32};function wg(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(n9.perm!==void 0)throw new Error("Invalid permission: "+l);a+=n9[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=qT(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=UT(this.encryptionKey,this.padding)}function _g(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function a9(e){if(ra(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(l){jn.console&&za.error("jsPDF PubSub Error",l.message,l)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Vb(e){if(!(this instanceof Vb))return new Vb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Zne(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Hf(e,t,r,n,a){if(!(this instanceof Hf))return new Hf(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Zne.call(this,n,a)}function qm(e,t,r,n,a){if(!(this instanceof qm))return new qm(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Zne.call(this,n,a)}function Qr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],l=1,c=16,u="S",d=null;ra(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=a9;var g="1.3",p=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(T){g=T};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return x};var y=m.__private__.getPageFormat=function(T){return x[T]};a=a||"a4";var b="compat",w="advanced",_=b;function j(){this.saveGraphicsState(),ne(new qr(Ot,0,0,-Ot,0,Ci()*Ot).toString()+" cm"),this.setFontSize(this.getFontSize()/Ot),u="n",_=w}function N(){this.restoreGraphicsState(),u="S",_=b}var P=m.__private__.combineFontStyleAndFontWeight=function(T,q){if(T=="bold"&&q=="normal"||T=="bold"&&q==400||T=="normal"&&q=="italic"||T=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(T=q==400||q==="normal"?T==="italic"?"italic":"normal":q!=700&&q!=="bold"||T!=="normal"?(q==700?"bold":q)+""+T:"bold"),T};m.advancedAPI=function(T){var q=_===b;return q&&j.call(this),typeof T!="function"||(T(this),q&&N.call(this)),this},m.compatAPI=function(T){var q=_===w;return q&&N.call(this),typeof T!="function"||(T(this),q&&j.call(this)),this},m.isAdvancedAPI=function(){return _===w};var A,k=function(T){if(_!==w)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=m.roundToPrecision=m.__private__.roundToPrecision=function(T,q){var ge=t||q;if(isNaN(T)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(ge).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof c=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return M(T,c)}:c==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return M(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return M(T,16)};var E=m.f2=m.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return M(T,2)},I=m.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return M(T,3)},O=m.scale=m.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return _===b?T*Ot:_===w?T:void 0},R=function(T){return O(function(q){return _===b?Ci()-q:_===w?q:void 0}(T))};m.__private__.setPrecision=m.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(t=parseInt(T,10))};var B,W="00000000000000000000000000000000",F=m.__private__.getFileId=function(){return W},$=m.__private__.setFileId=function(T){return W=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(zt=new wg(d.userPermissions,d.userPassword,d.ownerPassword,W)),W};m.setFileId=function(T){return $(T),this},m.getFileId=function(){return F()};var H=m.__private__.convertDateToPDFDate=function(T){var q=T.getTimezoneOffset(),ge=q<0?"+":"-",Pe=Math.floor(Math.abs(q/60)),Ue=Math.abs(q%60),Et=[ge,J(Pe),"'",J(Ue),"'"].join("");return["D:",T.getFullYear(),J(T.getMonth()+1),J(T.getDate()),J(T.getHours()),J(T.getMinutes()),J(T.getSeconds()),Et].join("")},ce=m.__private__.convertPDFDateToDate=function(T){var q=parseInt(T.substr(2,4),10),ge=parseInt(T.substr(6,2),10)-1,Pe=parseInt(T.substr(8,2),10),Ue=parseInt(T.substr(10,2),10),Et=parseInt(T.substr(12,2),10),gt=parseInt(T.substr(14,2),10);return new Date(q,ge,Pe,Ue,Et,gt,0)},oe=m.__private__.setCreationDate=function(T){var q;if(T===void 0&&(T=new Date),T instanceof Date)q=H(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=T}return B=q},L=m.__private__.getCreationDate=function(T){var q=B;return T==="jsDate"&&(q=ce(B)),q};m.setCreationDate=function(T){return oe(T),this},m.getCreationDate=function(T){return L(T)};var U,J=m.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},V=m.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},Z=0,K=[],he=[],te=0,me=[],Ee=[],Se=!1,We=he;m.__private__.setCustomOutputDestination=function(T){Se=!0,We=T};var be=function(T){Se||(We=T)};m.__private__.resetCustomOutputDestination=function(){Se=!1,We=he};var ne=m.__private__.out=function(T){return T=T.toString(),te+=T.length+1,We.push(T),We},Qt=m.__private__.write=function(T){return ne(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},bt=m.__private__.getArrayBuffer=function(T){for(var q=T.length,ge=new ArrayBuffer(q),Pe=new Uint8Array(ge);q--;)Pe[q]=T.charCodeAt(q);return ge},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Pt};var Qe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(T){return Qe=_===w?T/Ot:T,this};var ft,mt=m.__private__.getFontSize=m.getFontSize=function(){return _===b?Qe:Qe*Ot},_t=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(T){return _t=T,this},m.__private__.getR2L=m.getR2L=function(){return _t};var ue,Ct=m.__private__.setZoomMode=function(T){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))ft=T;else if(isNaN(T)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');ft=T}else ft=parseInt(T,10)};m.__private__.getZoomMode=function(){return ft};var At,Wt=m.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');ue=T};m.__private__.getPageMode=function(){return ue};var wt=m.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');At=T};m.__private__.getLayoutMode=function(){return At},m.__private__.setDisplayMode=m.setDisplayMode=function(T,q,ge){return Ct(T),wt(q),Wt(ge),this};var Ae={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(T){if(Object.keys(Ae).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ae[T]},m.__private__.getDocumentProperties=function(){return Ae},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(T){for(var q in Ae)Ae.hasOwnProperty(q)&&T[q]&&(Ae[q]=T[q]);return this},m.__private__.setDocumentProperty=function(T,q){if(Object.keys(Ae).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ae[T]=q};var qe,Ot,Y,ve,Ve,$e={},Le={},it=[],Ye={},Ge={},Xe={},ht={},st=null,lr=0,rr=[],Zt=new a9(m),fn=e.hotfixes||[],Yr={},Bn={},hr=[],qr=function T(q,ge,Pe,Ue,Et,gt){if(!(this instanceof T))return new T(q,ge,Pe,Ue,Et,gt);isNaN(q)&&(q=1),isNaN(ge)&&(ge=0),isNaN(Pe)&&(Pe=0),isNaN(Ue)&&(Ue=1),isNaN(Et)&&(Et=0),isNaN(gt)&&(gt=0),this._matrix=[q,ge,Pe,Ue,Et,gt]};Object.defineProperty(qr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(qr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(qr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(qr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(qr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(qr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(qr.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(qr.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(qr.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(qr.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(qr.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(qr.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(qr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qr.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(T)},qr.prototype.multiply=function(T){var q=T.sx*this.sx+T.shy*this.shx,ge=T.sx*this.shy+T.shy*this.sy,Pe=T.shx*this.sx+T.sy*this.shx,Ue=T.shx*this.shy+T.sy*this.sy,Et=T.tx*this.sx+T.ty*this.shx+this.tx,gt=T.tx*this.shy+T.ty*this.sy+this.ty;return new qr(q,ge,Pe,Ue,Et,gt)},qr.prototype.decompose=function(){var T=this.sx,q=this.shy,ge=this.shx,Pe=this.sy,Ue=this.tx,Et=this.ty,gt=Math.sqrt(T*T+q*q),sr=(T/=gt)*ge+(q/=gt)*Pe;ge-=T*sr,Pe-=q*sr;var yr=Math.sqrt(ge*ge+Pe*Pe);return sr/=yr,T*(Pe/=yr)<q*(ge/=yr)&&(T=-T,q=-q,sr=-sr,gt=-gt),{scale:new qr(gt,0,0,yr,0,0),translate:new qr(1,0,0,1,Ue,Et),rotate:new qr(T,q,-q,T,0,0),skew:new qr(1,0,sr,1,0,0)}},qr.prototype.toString=function(T){return this.join(" ")},qr.prototype.inversed=function(){var T=this.sx,q=this.shy,ge=this.shx,Pe=this.sy,Ue=this.tx,Et=this.ty,gt=1/(T*Pe-q*ge),sr=Pe*gt,yr=-q*gt,Ir=-ge*gt,nn=T*gt;return new qr(sr,yr,Ir,nn,-sr*Ue-Ir*Et,-yr*Ue-nn*Et)},qr.prototype.applyToPoint=function(T){var q=T.x*this.sx+T.y*this.shx+this.tx,ge=T.x*this.shy+T.y*this.sy+this.ty;return new Kt(q,ge)},qr.prototype.applyToRectangle=function(T){var q=this.applyToPoint(T),ge=this.applyToPoint(new Kt(T.x+T.w,T.y+T.h));return new at(q.x,q.y,ge.x-q.x,ge.y-q.y)},qr.prototype.clone=function(){var T=this.sx,q=this.shy,ge=this.shx,Pe=this.sy,Ue=this.tx,Et=this.ty;return new qr(T,q,ge,Pe,Ue,Et)},m.Matrix=qr;var ya=m.matrixMult=function(T,q){return q.multiply(T)},ui=new qr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ui;var Va=function(T,q){if(!Ge[T]){var ge=(q instanceof Hf?"Sh":"P")+(Object.keys(Ye).length+1).toString(10);q.id=ge,Ge[T]=ge,Ye[ge]=q,Zt.publish("addPattern",q)}};m.ShadingPattern=Hf,m.TilingPattern=qm,m.addShadingPattern=function(T,q){return k("addShadingPattern()"),Va(T,q),this},m.beginTilingPattern=function(T){k("beginTilingPattern()"),fr(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},m.endTilingPattern=function(T,q){k("endTilingPattern()"),q.stream=Ee[U].join(`
`),Va(T,q),Zt.publish("endTilingPattern",q),hr.pop().restore()};var Kn,Cr=m.__private__.newObject=function(){var T=zn();return Wn(T,!0),T},zn=m.__private__.newObjectDeferred=function(){return Z++,K[Z]=function(){return te},Z},Wn=function(T,q){return q=typeof q=="boolean"&&q,K[T]=te,q&&ne(T+" 0 obj"),T},vi=m.__private__.newAdditionalObject=function(){var T={objId:zn(),content:""};return me.push(T),T},ei=zn(),ba=zn(),wa=m.__private__.decodeColorString=function(T){var q=T.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var ge=parseFloat(q[0]);q=[ge,ge,ge,"r"]}for(var Pe="#",Ue=0;Ue<3;Ue++)Pe+=("0"+Math.floor(255*parseFloat(q[Ue])).toString(16)).slice(-2);return Pe},xi=m.__private__.encodeColorString=function(T){var q;typeof T=="string"&&(T={ch1:T});var ge=T.ch1,Pe=T.ch2,Ue=T.ch3,Et=T.ch4,gt=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var sr=new Jne(ge);if(sr.ok)ge=sr.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var yr=parseInt(ge.substr(1),16);ge=yr>>16&255,Pe=yr>>8&255,Ue=255&yr}if(Pe===void 0||Et===void 0&&ge===Pe&&Pe===Ue)q=typeof ge=="string"?ge+" "+gt[0]:T.precision===2?E(ge/255)+" "+gt[0]:I(ge/255)+" "+gt[0];else if(Et===void 0||ra(Et)==="object"){if(Et&&!isNaN(Et.a)&&Et.a===0)return["1.","1.","1.",gt[1]].join(" ");q=typeof ge=="string"?[ge,Pe,Ue,gt[1]].join(" "):T.precision===2?[E(ge/255),E(Pe/255),E(Ue/255),gt[1]].join(" "):[I(ge/255),I(Pe/255),I(Ue/255),gt[1]].join(" ")}else q=typeof ge=="string"?[ge,Pe,Ue,Et,gt[2]].join(" "):T.precision===2?[E(ge),E(Pe),E(Ue),E(Et),gt[2]].join(" "):[I(ge),I(Pe),I(Ue),I(Et),gt[2]].join(" ");return q},de=m.__private__.getFilters=function(){return s},pt=m.__private__.putStream=function(T){var q=(T=T||{}).data||"",ge=T.filters||de(),Pe=T.alreadyAppliedFilters||[],Ue=T.addLength1||!1,Et=q.length,gt=T.objectId,sr=function(Ra){return Ra};if(d!==null&&gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(sr=zt.encryptor(gt,0));var yr={};ge===!0&&(ge=["FlateEncode"]);var Ir=T.additionalKeyValues||[],nn=(yr=Qr.API.processDataByFilters!==void 0?Qr.API.processDataByFilters(q,ge):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(Pe)?Pe.join(" "):Pe.toString());if(yr.data.length!==0&&(Ir.push({key:"Length",value:yr.data.length}),Ue===!0&&Ir.push({key:"Length1",value:Et})),nn.length!=0)if(nn.split("/").length-1==1)Ir.push({key:"Filter",value:nn});else{Ir.push({key:"Filter",value:"["+nn+"]"});for(var Rn=0;Rn<Ir.length;Rn+=1)if(Ir[Rn].key==="DecodeParms"){for(var On=[],Ln=0;Ln<yr.reverseChain.split("/").length-1;Ln+=1)On.push("null");On.push(Ir[Rn].value),Ir[Rn].value="["+On.join(" ")+"]"}}ne("<<");for(var la=0;la<Ir.length;la++)ne("/"+Ir[la].key+" "+Ir[la].value);ne(">>"),yr.data.length!==0&&(ne("stream"),ne(sr(yr.data)),ne("endstream"))},xt=m.__private__.putPage=function(T){var q=T.number,ge=T.data,Pe=T.objId,Ue=T.contentsObjId;Wn(Pe,!0),ne("<</Type /Page"),ne("/Parent "+T.rootDictionaryObjId+" 0 R"),ne("/Resources "+T.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(A(T.mediaBox.bottomLeftX))+" "+parseFloat(A(T.mediaBox.bottomLeftY))+" "+A(T.mediaBox.topRightX)+" "+A(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&ne("/CropBox ["+A(T.cropBox.bottomLeftX)+" "+A(T.cropBox.bottomLeftY)+" "+A(T.cropBox.topRightX)+" "+A(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&ne("/BleedBox ["+A(T.bleedBox.bottomLeftX)+" "+A(T.bleedBox.bottomLeftY)+" "+A(T.bleedBox.topRightX)+" "+A(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&ne("/TrimBox ["+A(T.trimBox.bottomLeftX)+" "+A(T.trimBox.bottomLeftY)+" "+A(T.trimBox.topRightX)+" "+A(T.trimBox.topRightY)+"]"),T.artBox!==null&&ne("/ArtBox ["+A(T.artBox.bottomLeftX)+" "+A(T.artBox.bottomLeftY)+" "+A(T.artBox.topRightX)+" "+A(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&ne("/UserUnit "+T.userUnit),Zt.publish("putPage",{objId:Pe,pageContext:rr[q],pageNumber:q,page:ge}),ne("/Contents "+Ue+" 0 R"),ne(">>"),ne("endobj");var Et=ge.join(`
`);return _===w&&(Et+=`
Q`),Wn(Ue,!0),pt({data:Et,filters:de(),objectId:Ue}),ne("endobj"),Pe},yt=m.__private__.putPages=function(){var T,q,ge=[];for(T=1;T<=lr;T++)rr[T].objId=zn(),rr[T].contentsObjId=zn();for(T=1;T<=lr;T++)ge.push(xt({number:T,data:Ee[T],objId:rr[T].objId,contentsObjId:rr[T].contentsObjId,mediaBox:rr[T].mediaBox,cropBox:rr[T].cropBox,bleedBox:rr[T].bleedBox,trimBox:rr[T].trimBox,artBox:rr[T].artBox,userUnit:rr[T].userUnit,rootDictionaryObjId:ei,resourceDictionaryObjId:ba}));Wn(ei,!0),ne("<</Type /Pages");var Pe="/Kids [";for(q=0;q<lr;q++)Pe+=ge[q]+" 0 R ";ne(Pe+"]"),ne("/Count "+lr),ne(">>"),ne("endobj"),Zt.publish("postPutPages")},ot=function(T){Zt.publish("putFont",{font:T,out:ne,newObject:Cr,putStream:pt}),T.isAlreadyPutted!==!0&&(T.objectNumber=Cr(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+_g(T.postScriptName)),ne("/Subtype /Type1"),typeof T.encoding=="string"&&ne("/Encoding /"+T.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},St=function(T){T.objectNumber=Cr();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[A(T.x),A(T.y),A(T.x+T.width),A(T.y+T.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var ge=T.pages[1].join(`
`);pt({data:ge,additionalKeyValues:q,objectId:T.objectNumber}),ne("endobj")},Ht=function(T,q){q||(q=21);var ge=Cr(),Pe=function(gt,sr){var yr,Ir=[],nn=1/(sr-1);for(yr=0;yr<1;yr+=nn)Ir.push(yr);if(Ir.push(1),gt[0].offset!=0){var Rn={offset:0,color:gt[0].color};gt.unshift(Rn)}if(gt[gt.length-1].offset!=1){var On={offset:1,color:gt[gt.length-1].color};gt.push(On)}for(var Ln="",la=0,Ra=0;Ra<Ir.length;Ra++){for(yr=Ir[Ra];yr>gt[la+1].offset;)la++;var La=gt[la].offset,di=(yr-La)/(gt[la+1].offset-La),Ai=gt[la].color,Jn=gt[la+1].color;Ln+=V(Math.round((1-di)*Ai[0]+di*Jn[0]).toString(16))+V(Math.round((1-di)*Ai[1]+di*Jn[1]).toString(16))+V(Math.round((1-di)*Ai[2]+di*Jn[2]).toString(16))}return Ln.trim()}(T.colors,q),Ue=[];Ue.push({key:"FunctionType",value:"0"}),Ue.push({key:"Domain",value:"[0.0 1.0]"}),Ue.push({key:"Size",value:"["+q+"]"}),Ue.push({key:"BitsPerSample",value:"8"}),Ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pt({data:Pe,additionalKeyValues:Ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),ne("endobj"),T.objectNumber=Cr(),ne("<< /ShadingType "+T.type),ne("/ColorSpace /DeviceRGB");var Et="/Coords ["+A(parseFloat(T.coords[0]))+" "+A(parseFloat(T.coords[1]))+" ";T.type===2?Et+=A(parseFloat(T.coords[2]))+" "+A(parseFloat(T.coords[3])):Et+=A(parseFloat(T.coords[2]))+" "+A(parseFloat(T.coords[3]))+" "+A(parseFloat(T.coords[4]))+" "+A(parseFloat(T.coords[5])),ne(Et+="]"),T.matrix&&ne("/Matrix ["+T.matrix.toString()+"]"),ne("/Function "+ge+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Ut=function(T,q){var ge=zn(),Pe=Cr();q.push({resourcesOid:ge,objectOid:Pe}),T.objectNumber=Pe;var Ue=[];Ue.push({key:"Type",value:"/Pattern"}),Ue.push({key:"PatternType",value:"1"}),Ue.push({key:"PaintType",value:"1"}),Ue.push({key:"TilingType",value:"1"}),Ue.push({key:"BBox",value:"["+T.boundingBox.map(A).join(" ")+"]"}),Ue.push({key:"XStep",value:A(T.xStep)}),Ue.push({key:"YStep",value:A(T.yStep)}),Ue.push({key:"Resources",value:ge+" 0 R"}),T.matrix&&Ue.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),pt({data:T.stream,additionalKeyValues:Ue,objectId:T.objectNumber}),ne("endobj")},nr=function(T){for(var q in T.objectNumber=Cr(),ne("<<"),T)switch(q){case"opacity":ne("/ca "+E(T[q]));break;case"stroke-opacity":ne("/CA "+E(T[q]))}ne(">>"),ne("endobj")},ur=function(T){Wn(T.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var q in ne("/Font <<"),$e)$e.hasOwnProperty(q)&&(f===!1||f===!0&&h.hasOwnProperty(q))&&ne("/"+q+" "+$e[q].objectNumber+" 0 R");ne(">>")}(),function(){if(Object.keys(Ye).length>0){for(var q in ne("/Shading <<"),Ye)Ye.hasOwnProperty(q)&&Ye[q]instanceof Hf&&Ye[q].objectNumber>=0&&ne("/"+q+" "+Ye[q].objectNumber+" 0 R");Zt.publish("putShadingPatternDict"),ne(">>")}}(),function(q){if(Object.keys(Ye).length>0){for(var ge in ne("/Pattern <<"),Ye)Ye.hasOwnProperty(ge)&&Ye[ge]instanceof m.TilingPattern&&Ye[ge].objectNumber>=0&&Ye[ge].objectNumber<q&&ne("/"+ge+" "+Ye[ge].objectNumber+" 0 R");Zt.publish("putTilingPatternDict"),ne(">>")}}(T.objectOid),function(){if(Object.keys(Xe).length>0){var q;for(q in ne("/ExtGState <<"),Xe)Xe.hasOwnProperty(q)&&Xe[q].objectNumber>=0&&ne("/"+q+" "+Xe[q].objectNumber+" 0 R");Zt.publish("putGStateDict"),ne(">>")}}(),function(){for(var q in ne("/XObject <<"),Yr)Yr.hasOwnProperty(q)&&Yr[q].objectNumber>=0&&ne("/"+q+" "+Yr[q].objectNumber+" 0 R");Zt.publish("putXobjectDict"),ne(">>")}(),ne(">>"),ne("endobj")},mr=function(T){Le[T.fontName]=Le[T.fontName]||{},Le[T.fontName][T.fontStyle]=T.id},Ar=function(T,q,ge,Pe,Ue){var Et={id:"F"+(Object.keys($e).length+1).toString(10),postScriptName:T,fontName:q,fontStyle:ge,encoding:Pe,isStandardFont:Ue||!1,metadata:{}};return Zt.publish("addFont",{font:Et,instance:this}),$e[Et.id]=Et,mr(Et),Et.id},Nn=m.__private__.pdfEscape=m.pdfEscape=function(T,q){return function(ge,Pe){var Ue,Et,gt,sr,yr,Ir,nn,Rn,On;if(gt=(Pe=Pe||{}).sourceEncoding||"Unicode",yr=Pe.outputEncoding,(Pe.autoencode||yr)&&$e[qe].metadata&&$e[qe].metadata[gt]&&$e[qe].metadata[gt].encoding&&(sr=$e[qe].metadata[gt].encoding,!yr&&$e[qe].encoding&&(yr=$e[qe].encoding),!yr&&sr.codePages&&(yr=sr.codePages[0]),typeof yr=="string"&&(yr=sr[yr]),yr)){for(nn=!1,Ir=[],Ue=0,Et=ge.length;Ue<Et;Ue++)(Rn=yr[ge.charCodeAt(Ue)])?Ir.push(String.fromCharCode(Rn)):Ir.push(ge[Ue]),Ir[Ue].charCodeAt(0)>>8&&(nn=!0);ge=Ir.join("")}for(Ue=ge.length;nn===void 0&&Ue!==0;)ge.charCodeAt(Ue-1)>>8&&(nn=!0),Ue--;if(!nn)return ge;for(Ir=Pe.noBOM?[]:[254,255],Ue=0,Et=ge.length;Ue<Et;Ue++){if((On=(Rn=ge.charCodeAt(Ue))>>8)>>8)throw new Error("Character at position "+Ue+" of string '"+ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ir.push(On),Ir.push(Rn-(On<<8))}return String.fromCharCode.apply(void 0,Ir)}(T,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yn=m.__private__.beginPage=function(T){Ee[++lr]=[],rr[lr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},Sa(lr),be(Ee[U])},_r=function(T,q){var ge,Pe,Ue;switch(r=q||r,typeof T=="string"&&(ge=y(T.toLowerCase()),Array.isArray(ge)&&(Pe=ge[0],Ue=ge[1])),Array.isArray(T)&&(Pe=T[0]*Ot,Ue=T[1]*Ot),isNaN(Pe)&&(Pe=a[0],Ue=a[1]),(Pe>14400||Ue>14400)&&(za.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Pe=Math.min(14400,Pe),Ue=Math.min(14400,Ue)),a=[Pe,Ue],r.substr(0,1)){case"l":Ue>Pe&&(a=[Ue,Pe]);break;case"p":Pe>Ue&&(a=[Ue,Pe])}yn(a),pr(tr),ne(Ie),Ke!==0&&ne(Ke+" J"),Ze!==0&&ne(Ze+" j"),Zt.publish("addPage",{pageNumber:lr})},Mn=function(T){T>0&&T<=lr&&(Ee.splice(T,1),rr.splice(T,1),lr--,U>lr&&(U=lr),this.setPage(U))},Sa=function(T){T>0&&T<=lr&&(U=T)},ja=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ee.length-1},Mi=function(T,q,ge){var Pe,Ue=void 0;return ge=ge||{},T=T!==void 0?T:$e[qe].fontName,q=q!==void 0?q:$e[qe].fontStyle,Pe=T.toLowerCase(),Le[Pe]!==void 0&&Le[Pe][q]!==void 0?Ue=Le[Pe][q]:Le[T]!==void 0&&Le[T][q]!==void 0?Ue=Le[T][q]:ge.disableWarning===!1&&za.warn("Unable to look up font label for font '"+T+"', '"+q+"'. Refer to getFontList() for available fonts."),Ue||ge.noFallback||(Ue=Le.times[q])==null&&(Ue=Le.times.normal),Ue},G=m.__private__.putInfo=function(){var T=Cr(),q=function(Pe){return Pe};for(var ge in d!==null&&(q=zt.encryptor(T,0)),ne("<<"),ne("/Producer ("+Nn(q("jsPDF "+Qr.version))+")"),Ae)Ae.hasOwnProperty(ge)&&Ae[ge]&&ne("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+Nn(q(Ae[ge]))+")");ne("/CreationDate ("+Nn(q(B))+")"),ne(">>"),ne("endobj")},Te=m.__private__.putCatalog=function(T){var q=(T=T||{}).rootDictionaryObjId||ei;switch(Cr(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+q+" 0 R"),ft||(ft="fullwidth"),ft){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+ft;ge.substr(ge.length-1)==="%"&&(ft=parseInt(ft)/100),typeof ft=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+E(ft)+"]")}switch(At||(At="continuous"),At){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}ue&&ne("/PageMode /"+ue),Zt.publish("putCatalog"),ne(">>"),ne("endobj")},Je=m.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(Z+1)),ne("/Root "+Z+" 0 R"),ne("/Info "+(Z-1)+" 0 R"),d!==null&&ne("/Encrypt "+zt.oid+" 0 R"),ne("/ID [ <"+W+"> <"+W+"> ]"),ne(">>")},Xt=m.__private__.putHeader=function(){ne("%PDF-"+g),ne("%")},It=m.__private__.putXRef=function(){var T="0000000000";ne("xref"),ne("0 "+(Z+1)),ne("0000000000 65535 f ");for(var q=1;q<=Z;q++)typeof K[q]=="function"?ne((T+K[q]()).slice(-10)+" 00000 n "):K[q]!==void 0?ne((T+K[q]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},jt=m.__private__.buildDocument=function(){var T;Z=0,te=0,he=[],K=[],me=[],ei=zn(),ba=zn(),be(he),Zt.publish("buildDocument"),Xt(),yt(),function(){Zt.publish("putAdditionalObjects");for(var ge=0;ge<me.length;ge++){var Pe=me[ge];Wn(Pe.objId,!0),ne(Pe.content),ne("endobj")}Zt.publish("postPutAdditionalObjects")}(),T=[],function(){for(var ge in $e)$e.hasOwnProperty(ge)&&(f===!1||f===!0&&h.hasOwnProperty(ge))&&ot($e[ge])}(),function(){var ge;for(ge in Xe)Xe.hasOwnProperty(ge)&&nr(Xe[ge])}(),function(){for(var ge in Yr)Yr.hasOwnProperty(ge)&&St(Yr[ge])}(),function(ge){var Pe;for(Pe in Ye)Ye.hasOwnProperty(Pe)&&(Ye[Pe]instanceof Hf?Ht(Ye[Pe]):Ye[Pe]instanceof qm&&Ut(Ye[Pe],ge))}(T),Zt.publish("putResources"),T.forEach(ur),ur({resourcesOid:ba,objectOid:Number.MAX_SAFE_INTEGER}),Zt.publish("postPutResources"),d!==null&&(zt.oid=Cr(),ne("<<"),ne("/Filter /Standard"),ne("/V "+zt.v),ne("/R "+zt.r),ne("/U <"+zt.toHexString(zt.U)+">"),ne("/O <"+zt.toHexString(zt.O)+">"),ne("/P "+zt.P),ne(">>"),ne("endobj")),G(),Te();var q=te;return It(),Je(),ne("startxref"),ne(""+q),ne("%%EOF"),be(Ee[U]),he.join(`
`)},cr=m.__private__.getBlob=function(T){return new Blob([bt(T)],{type:"application/pdf"})},wr=m.output=m.__private__.output=(Kn=function(T,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",T){case void 0:return jt();case"save":m.save(q.filename);break;case"arraybuffer":return bt(jt());case"blob":return cr(jt());case"bloburi":case"bloburl":if(jn.URL!==void 0&&typeof jn.URL.createObjectURL=="function")return jn.URL&&jn.URL.createObjectURL(cr(jt()))||void 0;za.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",Pe=jt();try{ge=t9(Pe)}catch{ge=t9(unescape(encodeURIComponent(Pe)))}return"data:application/pdf;filename="+q.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jn)==="[object Window]"){var Ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Et=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ue=q.pdfObjectUrl,Et="");var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ue+'"'+Et+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",sr=jn.open();return sr!==null&&sr.document.write(gt),sr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jn)==="[object Window]"){var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Ir=jn.open();if(Ir!==null){Ir.document.write(yr);var nn=this;Ir.document.documentElement.querySelector("#pdfViewer").onload=function(){Ir.document.title=q.filename,Ir.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(nn.output("bloburl"))}}return Ir}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',On=jn.open();if(On!==null&&(On.document.write(Rn),On.document.title=q.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return jn.document.location.href=this.output("datauristring",q);default:return null}},Kn.foo=function(){try{return Kn.apply(this,arguments)}catch(ge){var T=ge.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var q="Error in function "+T.split(`
`)[0].split("<")[0]+": "+ge.message;if(!jn.console)throw new Error(q);jn.console.error(q,ge),jn.alert&&alert(q)}},Kn.foo.bar=Kn,Kn.foo),gr=function(T){return Array.isArray(fn)===!0&&fn.indexOf(T)>-1};switch(n){case"pt":Ot=1;break;case"mm":Ot=72/25.4;break;case"cm":Ot=72/2.54;break;case"in":Ot=72;break;case"px":Ot=gr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ot=12;break;case"ex":Ot=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ot=n}var zt=null;oe(),$();var Er=m.__private__.getPageInfo=m.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rr[T].objId,pageNumber:T,pageContext:rr[T]}},Bt=m.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in rr)if(rr[q].objId===T)break;return Er(q)},Xr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:rr[U].objId,pageNumber:U,pageContext:rr[U]}};m.addPage=function(){return _r.apply(this,arguments),this},m.setPage=function(){return Sa.apply(this,arguments),be.call(this,Ee[U]),this},m.insertPage=function(T){return this.addPage(),this.movePage(U,T),this},m.movePage=function(T,q){var ge,Pe;if(T>q){ge=Ee[T],Pe=rr[T];for(var Ue=T;Ue>q;Ue--)Ee[Ue]=Ee[Ue-1],rr[Ue]=rr[Ue-1];Ee[q]=ge,rr[q]=Pe,this.setPage(q)}else if(T<q){ge=Ee[T],Pe=rr[T];for(var Et=T;Et<q;Et++)Ee[Et]=Ee[Et+1],rr[Et]=rr[Et+1];Ee[q]=ge,rr[q]=Pe,this.setPage(q)}return this},m.deletePage=function(){return Mn.apply(this,arguments),this},m.__private__.text=m.text=function(T,q,ge,Pe,Ue){var Et,gt,sr,yr,Ir,nn,Rn,On,Ln,la=(Pe=Pe||{}).scope||this;if(typeof T=="number"&&typeof q=="number"&&(typeof ge=="string"||Array.isArray(ge))){var Ra=ge;ge=q,q=T,T=Ra}if(arguments[3]instanceof qr==0?(sr=arguments[4],yr=arguments[5],ra(Rn=arguments[3])==="object"&&Rn!==null||(typeof sr=="string"&&(yr=sr,sr=null),typeof Rn=="string"&&(yr=Rn,Rn=null),typeof Rn=="number"&&(sr=Rn,Rn=null),Pe={flags:Rn,angle:sr,align:yr})):(k("The transform parameter of text() with a Matrix value"),Ln=Ue),isNaN(q)||isNaN(ge)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return la;var La,di="",Ai=typeof Pe.lineHeightFactor=="number"?Pe.lineHeightFactor:tt,Jn=la.internal.scaleFactor;function Vl(Vt){return Vt=Vt.split("	").join(Array(Pe.TabLen||9).join(" ")),Nn(Vt,Rn)}function hs(Vt){for(var Or,Nr=Vt.concat(),Pn=[],$a=Nr.length;$a--;)typeof(Or=Nr.shift())=="string"?Pn.push(Or):Array.isArray(Vt)&&(Or.length===1||Or[1]===void 0&&Or[2]===void 0)?Pn.push(Or[0]):Pn.push([Or[0],Or[1],Or[2]]);return Pn}function ro(Vt,Or){var Nr;if(typeof Vt=="string")Nr=Or(Vt)[0];else if(Array.isArray(Vt)){for(var Pn,$a,ti=Vt.concat(),ca=[],Fa=ti.length;Fa--;)typeof(Pn=ti.shift())=="string"?ca.push(Or(Pn)[0]):Array.isArray(Pn)&&typeof Pn[0]=="string"&&($a=Or(Pn[0],Pn[1],Pn[2]),ca.push([$a[0],$a[1],$a[2]]));Nr=ca}return Nr}var yi=!1,bu=!0;if(typeof T=="string")yi=!0;else if(Array.isArray(T)){var ff=T.concat();gt=[];for(var cd,Ia=ff.length;Ia--;)(typeof(cd=ff.shift())!="string"||Array.isArray(cd)&&typeof cd[0]!="string")&&(bu=!1);yi=bu}if(yi===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var Hi=Qe/la.internal.scaleFactor,ud=Hi*(Ai-1);switch(Pe.baseline){case"bottom":ge-=ud;break;case"top":ge+=Hi-ud;break;case"hanging":ge+=Hi-2*ud;break;case"middle":ge+=Hi/2-ud}if((nn=Pe.maxWidth||0)>0&&(typeof T=="string"?T=la.splitTextToSize(T,nn):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(Vt,Or){return Vt.concat(la.splitTextToSize(Or,nn))},[]))),Et={text:T,x:q,y:ge,options:Pe,mutex:{pdfEscape:Nn,activeFontKey:qe,fonts:$e,activeFontSize:Qe}},Zt.publish("preProcessText",Et),T=Et.text,sr=(Pe=Et.options).angle,Ln instanceof qr==0&&sr&&typeof sr=="number"){sr*=Math.PI/180,Pe.rotationDirection===0&&(sr=-sr),_===w&&(sr=-sr);var Wl=Math.cos(sr),wu=Math.sin(sr);Ln=new qr(Wl,wu,-wu,Wl,0,0)}else sr&&sr instanceof qr&&(Ln=sr);_!==w||Ln||(Ln=ui),(Ir=Pe.charSpace||Q)!==void 0&&(di+=A(O(Ir))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=Pe.horizontalScale)!==void 0&&(di+=A(100*On)+` Tz
`),Pe.lang;var Da=-1,jo=Pe.renderingMode!==void 0?Pe.renderingMode:Pe.stroke,Gi=la.internal.getCurrentPageInfo().pageContext;switch(jo){case 0:case!1:case"fill":Da=0;break;case 1:case!0:case"stroke":Da=1;break;case 2:case"fillThenStroke":Da=2;break;case 3:case"invisible":Da=3;break;case 4:case"fillAndAddForClipping":Da=4;break;case 5:case"strokeAndAddPathForClipping":Da=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Da=6;break;case 7:case"addToPathForClipping":Da=7}var _u=Gi.usedRenderingMode!==void 0?Gi.usedRenderingMode:-1;Da!==-1?di+=Da+` Tr
`:_u!==-1&&(di+=`0 Tr
`),Da!==-1&&(Gi.usedRenderingMode=Da),yr=Pe.align||"left";var Yo,Ls=Qe*Ai,Jh=la.internal.pageSize.getWidth(),hf=$e[qe];Ir=Pe.charSpace||Q,nn=Pe.maxWidth||0,Rn=Object.assign({autoencode:!0,noBOM:!0},Pe.flags);var Hl=[],Nc=function(Vt){return la.getStringUnitWidth(Vt,{font:hf,charSpace:Ir,fontSize:Qe,doKerning:!1})*Qe/Jn};if(Object.prototype.toString.call(T)==="[object Array]"){var Mo;gt=hs(T),yr!=="left"&&(Yo=gt.map(Nc));var Ri,No=0;if(yr==="right"){q-=Yo[0],T=[],Ia=gt.length;for(var Pi=0;Pi<Ia;Pi++)Pi===0?(Ri=Mr(q),Mo=_n(ge)):(Ri=O(No-Yo[Pi]),Mo=-Ls),T.push([gt[Pi],Ri,Mo]),No=Yo[Pi]}else if(yr==="center"){q-=Yo[0]/2,T=[],Ia=gt.length;for(var sl=0;sl<Ia;sl++)sl===0?(Ri=Mr(q),Mo=_n(ge)):(Ri=O((No-Yo[sl])/2),Mo=-Ls),T.push([gt[sl],Ri,Mo]),No=Yo[sl]}else if(yr==="left"){T=[],Ia=gt.length;for(var Qh=0;Qh<Ia;Qh++)T.push(gt[Qh])}else if(yr==="justify"&&hf.encoding==="Identity-H"){T=[],Ia=gt.length,nn=nn!==0?nn:Jh;for(var Ro=0,fi=0;fi<Ia;fi++)if(Mo=fi===0?_n(ge):-Ls,Ri=fi===0?Mr(q):Ro,fi<Ia-1){var Up=O((nn-Yo[fi])/(gt[fi].split(" ").length-1)),Gl=gt[fi].split(" ");T.push([Gl[0]+" ",Ri,Mo]),Ro=0;for(var Kl=1;Kl<Gl.length;Kl++){var Zh=(Nc(Gl[Kl-1]+" "+Gl[Kl])-Nc(Gl[Kl]))*Jn+Up;Kl==Gl.length-1?T.push([Gl[Kl],Zh,0]):T.push([Gl[Kl]+" ",Zh,0]),Ro-=Zh}}else T.push([gt[fi],Ri,Mo]);T.push(["",Ro,0])}else{if(yr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(T=[],Ia=gt.length,nn=nn!==0?nn:Jh,fi=0;fi<Ia;fi++){Mo=fi===0?_n(ge):-Ls,Ri=fi===0?Mr(q):0;var mf=gt[fi].split(" ").length-1,pf=mf>0?(nn-Yo[fi])/mf:0;fi<Ia-1?Hl.push(A(O(pf))):Hl.push(0),T.push([gt[fi],Ri,Mo])}}}(typeof Pe.R2L=="boolean"?Pe.R2L:_t)===!0&&(T=ro(T,function(Vt,Or,Nr){return[Vt.split("").reverse().join(""),Or,Nr]})),Et={text:T,x:q,y:ge,options:Pe,mutex:{pdfEscape:Nn,activeFontKey:qe,fonts:$e,activeFontSize:Qe}},Zt.publish("postProcessText",Et),T=Et.text,La=Et.mutex.isHex||!1;var dd=$e[qe].encoding;dd!=="WinAnsiEncoding"&&dd!=="StandardEncoding"||(T=ro(T,function(Vt,Or,Nr){return[Vl(Vt),Or,Nr]})),gt=hs(T),T=[];for(var $s,ae,ke,Oe=Array.isArray(gt[0])?1:0,rt="",Nt=function(Vt,Or,Nr){var Pn="";return Nr instanceof qr?(Nr=typeof Pe.angle=="number"?ya(Nr,new qr(1,0,0,1,Vt,Or)):ya(new qr(1,0,0,1,Vt,Or),Nr),_===w&&(Nr=ya(new qr(1,0,0,-1,0,0),Nr)),Pn=Nr.join(" ")+` Tm
`):Pn=A(Vt)+" "+A(Or)+` Td
`,Pn},dr=0;dr<gt.length;dr++){switch(rt="",Oe){case 1:ke=(La?"<":"(")+gt[dr][0]+(La?">":")"),$s=parseFloat(gt[dr][1]),ae=parseFloat(gt[dr][2]);break;case 0:ke=(La?"<":"(")+gt[dr]+(La?">":")"),$s=Mr(q),ae=_n(ge)}Hl!==void 0&&Hl[dr]!==void 0&&(rt=Hl[dr]+` Tw
`),dr===0?T.push(rt+Nt($s,ae,Ln)+ke):Oe===0?T.push(rt+ke):Oe===1&&T.push(rt+Nt($s,ae,Ln)+ke)}T=Oe===0?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var Yt=`BT
/`;return Yt+=qe+" "+Qe+` Tf
`,Yt+=A(Qe*Ai)+` TL
`,Yt+=Re+`
`,Yt+=di,Yt+=T,ne(Yt+="ET"),h[qe]=!0,la};var Vr=m.__private__.clip=m.clip=function(T){return ne(T==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Vr("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ne("n"),this};var rn=m.__private__.isValidStyle=function(T){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(q=!0),q};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(T){return rn(T)&&(u=T),this};var na=m.__private__.getStyle=m.getStyle=function(T){var q=u;switch(T){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=T}return q},Jr=m.close=function(){return ne("h"),this};m.stroke=function(){return ne("S"),this},m.fill=function(T){return ut("f",T),this},m.fillEvenOdd=function(T){return ut("f*",T),this},m.fillStroke=function(T){return ut("B",T),this},m.fillStrokeEvenOdd=function(T){return ut("B*",T),this};var ut=function(T,q){ra(q)==="object"?ie(q,T):ne(T)},Br=function(T){T===null||_===w&&T===void 0||(T=na(T),ne(T))};function jr(T,q,ge,Pe,Ue){var Et=new qm(q||this.boundingBox,ge||this.xStep,Pe||this.yStep,this.gState,Ue||this.matrix);Et.stream=this.stream;var gt=T+"$$"+this.cloneIndex+++"$$";return Va(gt,Et),Et}var ie=function(T,q){var ge=Ge[T.key],Pe=Ye[ge];if(Pe instanceof Hf)ne("q"),ne(pe(q)),Pe.gState&&m.setGState(Pe.gState),ne(T.matrix.toString()+" cm"),ne("/"+ge+" sh"),ne("Q");else if(Pe instanceof qm){var Ue=new qr(1,0,0,-1,0,Ci());T.matrix&&(Ue=Ue.multiply(T.matrix||ui),ge=jr.call(Pe,T.key,T.boundingBox,T.xStep,T.yStep,Ue).id),ne("q"),ne("/Pattern cs"),ne("/"+ge+" scn"),Pe.gState&&m.setGState(Pe.gState),ne(q),ne("Q")}},pe=function(T){switch(T){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Be=m.moveTo=function(T,q){return ne(A(O(T))+" "+A(R(q))+" m"),this},ze=m.lineTo=function(T,q){return ne(A(O(T))+" "+A(R(q))+" l"),this},Me=m.curveTo=function(T,q,ge,Pe,Ue,Et){return ne([A(O(T)),A(R(q)),A(O(ge)),A(R(Pe)),A(O(Ue)),A(R(Et)),"c"].join(" ")),this};m.__private__.line=m.line=function(T,q,ge,Pe,Ue){if(isNaN(T)||isNaN(q)||isNaN(ge)||isNaN(Pe)||!rn(Ue))throw new Error("Invalid arguments passed to jsPDF.line");return _===b?this.lines([[ge-T,Pe-q]],T,q,[1,1],Ue||"S"):this.lines([[ge-T,Pe-q]],T,q,[1,1]).stroke()},m.__private__.lines=m.lines=function(T,q,ge,Pe,Ue,Et){var gt,sr,yr,Ir,nn,Rn,On,Ln,la,Ra,La,di;if(typeof T=="number"&&(di=ge,ge=q,q=T,T=di),Pe=Pe||[1,1],Et=Et||!1,isNaN(q)||isNaN(ge)||!Array.isArray(T)||!Array.isArray(Pe)||!rn(Ue)||typeof Et!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Be(q,ge),gt=Pe[0],sr=Pe[1],Ir=T.length,Ra=q,La=ge,yr=0;yr<Ir;yr++)(nn=T[yr]).length===2?(Ra=nn[0]*gt+Ra,La=nn[1]*sr+La,ze(Ra,La)):(Rn=nn[0]*gt+Ra,On=nn[1]*sr+La,Ln=nn[2]*gt+Ra,la=nn[3]*sr+La,Ra=nn[4]*gt+Ra,La=nn[5]*sr+La,Me(Rn,On,Ln,la,Ra,La));return Et&&Jr(),Br(Ue),this},m.path=function(T){for(var q=0;q<T.length;q++){var ge=T[q],Pe=ge.c;switch(ge.op){case"m":Be(Pe[0],Pe[1]);break;case"l":ze(Pe[0],Pe[1]);break;case"c":Me.apply(this,Pe);break;case"h":Jr()}}return this},m.__private__.rect=m.rect=function(T,q,ge,Pe,Ue){if(isNaN(T)||isNaN(q)||isNaN(ge)||isNaN(Pe)||!rn(Ue))throw new Error("Invalid arguments passed to jsPDF.rect");return _===b&&(Pe=-Pe),ne([A(O(T)),A(R(q)),A(O(ge)),A(O(Pe)),"re"].join(" ")),Br(Ue),this},m.__private__.triangle=m.triangle=function(T,q,ge,Pe,Ue,Et,gt){if(isNaN(T)||isNaN(q)||isNaN(ge)||isNaN(Pe)||isNaN(Ue)||isNaN(Et)||!rn(gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-T,Pe-q],[Ue-ge,Et-Pe],[T-Ue,q-Et]],T,q,[1,1],gt,!0),this},m.__private__.roundedRect=m.roundedRect=function(T,q,ge,Pe,Ue,Et,gt){if(isNaN(T)||isNaN(q)||isNaN(ge)||isNaN(Pe)||isNaN(Ue)||isNaN(Et)||!rn(gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var sr=4/3*(Math.SQRT2-1);return Ue=Math.min(Ue,.5*ge),Et=Math.min(Et,.5*Pe),this.lines([[ge-2*Ue,0],[Ue*sr,0,Ue,Et-Et*sr,Ue,Et],[0,Pe-2*Et],[0,Et*sr,-Ue*sr,Et,-Ue,Et],[2*Ue-ge,0],[-Ue*sr,0,-Ue,-Et*sr,-Ue,-Et],[0,2*Et-Pe],[0,-Et*sr,Ue*sr,-Et,Ue,-Et]],T+Ue,q,[1,1],gt,!0),this},m.__private__.ellipse=m.ellipse=function(T,q,ge,Pe,Ue){if(isNaN(T)||isNaN(q)||isNaN(ge)||isNaN(Pe)||!rn(Ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Et=4/3*(Math.SQRT2-1)*ge,gt=4/3*(Math.SQRT2-1)*Pe;return Be(T+ge,q),Me(T+ge,q-gt,T+Et,q-Pe,T,q-Pe),Me(T-Et,q-Pe,T-ge,q-gt,T-ge,q),Me(T-ge,q+gt,T-Et,q+Pe,T,q+Pe),Me(T+Et,q+Pe,T+ge,q+gt,T+ge,q),Br(Ue),this},m.__private__.circle=m.circle=function(T,q,ge,Pe){if(isNaN(T)||isNaN(q)||isNaN(ge)||!rn(Pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,q,ge,ge,Pe)},m.setFont=function(T,q,ge){return ge&&(q=P(q,ge)),qe=Mi(T,q,{disableWarning:!1}),this};var lt=m.__private__.getFont=m.getFont=function(){return $e[Mi.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var T,q,ge={};for(T in Le)if(Le.hasOwnProperty(T))for(q in ge[T]=[],Le[T])Le[T].hasOwnProperty(q)&&ge[T].push(q);return ge},m.addFont=function(T,q,ge,Pe,Ue){var Et=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Et.indexOf(arguments[3])!==-1?Ue=arguments[3]:arguments[3]&&Et.indexOf(arguments[3])==-1&&(ge=P(ge,Pe)),Ar.call(this,T,q,ge,Ue=Ue||"Identity-H")};var tt,tr=e.lineWidth||.200025,Lt=m.__private__.getLineWidth=m.getLineWidth=function(){return tr},pr=m.__private__.setLineWidth=m.setLineWidth=function(T){return tr=T,ne(A(O(T))+" w"),this};m.__private__.setLineDash=Qr.API.setLineDash=Qr.API.setLineDashPattern=function(T,q){if(T=T||[],q=q||0,isNaN(q)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(ge){return A(O(ge))}).join(" "),q=A(O(q)),ne("["+T+"] "+q+" d"),this};var kr=m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*tt};m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*tt};var wn=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(tt=T),this},Wr=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return tt};wn(e.lineHeight);var Mr=m.__private__.getHorizontalCoordinate=function(T){return O(T)},_n=m.__private__.getVerticalCoordinate=function(T){return _===w?T:rr[U].mediaBox.topRightY-rr[U].mediaBox.bottomLeftY-O(T)},xe=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(T){return A(Mr(T))},je=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(T){return A(_n(T))},Ie=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return wa(Ie)},m.__private__.setStrokeColor=m.setDrawColor=function(T,q,ge,Pe){return Ie=xi({ch1:T,ch2:q,ch3:ge,ch4:Pe,pdfColorType:"draw",precision:2}),ne(Ie),this};var De=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return wa(De)},m.__private__.setFillColor=m.setFillColor=function(T,q,ge,Pe){return De=xi({ch1:T,ch2:q,ch3:ge,ch4:Pe,pdfColorType:"fill",precision:2}),ne(De),this};var Re=e.textColor||"0 g",nt=m.__private__.getTextColor=m.getTextColor=function(){return wa(Re)};m.__private__.setTextColor=m.setTextColor=function(T,q,ge,Pe){return Re=xi({ch1:T,ch2:q,ch3:ge,ch4:Pe,pdfColorType:"text",precision:3}),this};var Q=e.charSpace,Ce=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Q||0)};m.__private__.setCharSpace=m.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Q=T,this};var Ke=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(T){var q=m.CapJoinStyles[T];if(q===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ke=q,ne(q+" J"),this};var Ze=0;m.__private__.setLineJoin=m.setLineJoin=function(T){var q=m.CapJoinStyles[T];if(q===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ze=q,ne(q+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(A(O(T))+" M"),this},m.GState=Vb,m.setGState=function(T){(T=typeof T=="string"?Xe[ht[T]]:Gt(null,T)).equals(st)||(ne("/"+T.id+" gs"),st=T)};var Gt=function(T,q){if(!T||!ht[T]){var ge=!1;for(var Pe in Xe)if(Xe.hasOwnProperty(Pe)&&Xe[Pe].equals(q)){ge=!0;break}if(ge)q=Xe[Pe];else{var Ue="GS"+(Object.keys(Xe).length+1).toString(10);Xe[Ue]=q,q.id=Ue}return T&&(ht[T]=q.id),Zt.publish("addGState",q),q}};m.addGState=function(T,q){return Gt(T,q),this},m.saveGraphicsState=function(){return ne("q"),it.push({key:qe,size:Qe,color:Re}),this},m.restoreGraphicsState=function(){ne("Q");var T=it.pop();return qe=T.key,Qe=T.size,Re=T.color,st=null,this},m.setCurrentTransformationMatrix=function(T){return ne(T.toString()+" cm"),this},m.comment=function(T){return ne("#"+T),this};var Kt=function(T,q){var ge=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(Et){isNaN(Et)||(ge=parseFloat(Et))}});var Pe=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Pe},set:function(Et){isNaN(Et)||(Pe=parseFloat(Et))}});var Ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ue},set:function(Et){Ue=Et.toString()}}),this},at=function(T,q,ge,Pe){Kt.call(this,T,q),this.type="rect";var Ue=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ue},set:function(gt){isNaN(gt)||(Ue=parseFloat(gt))}});var Et=Pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Et},set:function(gt){isNaN(gt)||(Et=parseFloat(gt))}}),this},Dt=function(){this.page=lr,this.currentPage=U,this.pages=Ee.slice(0),this.pagesContext=rr.slice(0),this.x=Y,this.y=ve,this.matrix=Ve,this.width=Tr(U),this.height=Ur(U),this.outputDestination=We,this.id="",this.objectNumber=-1};Dt.prototype.restore=function(){lr=this.page,U=this.currentPage,rr=this.pagesContext,Ee=this.pages,Y=this.x,ve=this.y,Ve=this.matrix,zr(U,this.width),sa(U,this.height),We=this.outputDestination};var fr=function(T,q,ge,Pe,Ue){hr.push(new Dt),lr=U=0,Ee=[],Y=T,ve=q,Ve=Ue,yn([ge,Pe])};for(var er in m.beginFormObject=function(T,q,ge,Pe,Ue){return fr(T,q,ge,Pe,Ue),this},m.endFormObject=function(T){return function(q){if(Bn[q])hr.pop().restore();else{var ge=new Dt,Pe="Xo"+(Object.keys(Yr).length+1).toString(10);ge.id=Pe,Bn[q]=Pe,Yr[Pe]=ge,Zt.publish("addFormObject",ge),hr.pop().restore()}}(T),this},m.doFormObject=function(T,q){var ge=Yr[Bn[T]];return ne("q"),ne(q.toString()+" cm"),ne("/"+ge.id+" Do"),ne("Q"),this},m.getFormObject=function(T){var q=Yr[Bn[T]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},m.save=function(T,q){return T=T||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(bm(cr(jt()),T),typeof bm.unload=="function"&&jn.setTimeout&&setTimeout(bm.unload,911),this):new Promise(function(ge,Pe){try{var Ue=bm(cr(jt()),T);typeof bm.unload=="function"&&jn.setTimeout&&setTimeout(bm.unload,911),ge(Ue)}catch(Et){Pe(Et.message)}})},Qr.API)Qr.API.hasOwnProperty(er)&&(er==="events"&&Qr.API.events.length?function(T,q){var ge,Pe,Ue;for(Ue=q.length-1;Ue!==-1;Ue--)ge=q[Ue][0],Pe=q[Ue][1],T.subscribe.apply(T,[ge].concat(typeof Pe=="function"?[Pe]:Pe))}(Zt,Qr.API.events):m[er]=Qr.API[er]);function Tr(T){return rr[T].mediaBox.topRightX-rr[T].mediaBox.bottomLeftX}function zr(T,q){rr[T].mediaBox.topRightX=q+rr[T].mediaBox.bottomLeftX}function Ur(T){return rr[T].mediaBox.topRightY-rr[T].mediaBox.bottomLeftY}function sa(T,q){rr[T].mediaBox.topRightY=q+rr[T].mediaBox.bottomLeftY}var va=m.getPageWidth=function(T){return Tr(T=T||U)/Ot},So=m.setPageWidth=function(T,q){zr(T,q*Ot)},Ci=m.getPageHeight=function(T){return Ur(T=T||U)/Ot},fs=m.setPageHeight=function(T,q){sa(T,q*Ot)};return m.internal={pdfEscape:Nn,getStyle:na,getFont:lt,getFontSize:mt,getCharSpace:Ce,getTextColor:nt,getLineHeight:kr,getLineHeightFactor:Wr,getLineWidth:Lt,write:Qt,getHorizontalCoordinate:Mr,getVerticalCoordinate:_n,getCoordinateString:xe,getVerticalCoordinateString:je,collections:{},newObject:Cr,newAdditionalObject:vi,newObjectDeferred:zn,newObjectDeferredBegin:Wn,getFilters:de,putStream:pt,events:Zt,scaleFactor:Ot,pageSize:{getWidth:function(){return va(U)},setWidth:function(T){So(U,T)},getHeight:function(){return Ci(U)},setHeight:function(T){fs(U,T)}},encryptionOptions:d,encryption:zt,getEncryptor:function(T){return d!==null?zt.encryptor(T,0):function(q){return q}},output:wr,getNumberOfPages:ja,pages:Ee,out:ne,f2:E,f3:I,getPageInfo:Er,getPageInfoByObjId:Bt,getCurrentPageInfo:Xr,getPDFVersion:p,Point:Kt,Rectangle:at,Matrix:qr,hasHotfix:gr},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return va(U)},set:function(T){So(U,T)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ci(U)},set:function(T){fs(U,T)},enumerable:!0,configurable:!0}),function(T){for(var q=0,ge=Pt.length;q<ge;q++){var Pe=Ar.call(this,T[q][0],T[q][1],T[q][2],Pt[q][3],!0);f===!1&&(h[Pe]=!0);var Ue=T[q][0].split("-");mr({id:Pe,fontName:Ue[0],fontStyle:Ue[1]||""})}Zt.publish("addFonts",{fonts:$e,dictionary:Le})}.call(m,Pt),qe="F1",_r(a,r),Zt.publish("initialized"),m}wg.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},wg.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},wg.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},wg.prototype.processOwnerPassword=function(e,t){return UT(qT(t).substr(0,5),e)},wg.prototype.encryptor=function(e,t){var r=qT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return UT(r,n)}},Vb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ra(e)!==ra(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Qr.API={events:[]},Qr.version="3.0.3";var Oi=Qr.API,wM=1,qp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mg=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},En=function(e){return e.toFixed(2)},kf=function(e){return e.toFixed(5)};Oi.__acroform__={};var ol=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},i9=function(e){return e*wM},Nu=function(e){var t=new tae,r=Fr.internal.getHeight(e)||0,n=Fr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(En(n)),Number(En(r))],t},Grt=Oi.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Krt=Oi.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Yrt=Oi.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},zi=Oi.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Yrt(e,t-1)},qi=Oi.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Grt(e,t-1)},Ui=Oi.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Krt(e,t-1)},Xrt=Oi.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+s)||0,c.upperRight_Y=n(i)||0,[Number(En(c.lowerLeft_X)),Number(En(c.lowerLeft_Y)),Number(En(c.upperRight_X)),Number(En(c.upperRight_Y))]},Jrt=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=VT(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+En(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Nu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},VT=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var i=r,s=Fr.internal.getHeight(e)||0;s=s<0?-s:s;var l=Fr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(E,I,O){if(E+1<a.length){var R=I+" "+a[E+1][0];return f2(R,e,O).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=f2("3",e,i).height,h=e.multiline?s-i:(s-f)/2,m=h+=2,g=0,p=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+f2(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",b=0,w=0;w<a.length;w++)if(a.hasOwnProperty(w)){var _=!1;if(a[w].length!==1&&x!==a[w].length-1){if((f+2)*(b+2)+2>s)continue e;y+=a[w][x],_=!0,p=w,w--}else{y=(y+=a[w][x]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var j=parseInt(w),N=c(j,y,i),P=w>=a.length-1;if(N&&!P){y+=" ",x=0;continue}if(N||P){if(P)p=j;else if(e.multiline&&(f+2)*(b+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(b+2)+2>s)continue e;p=j}}for(var A="",k=g;k<=p;k++){var M=a[k];if(e.multiline){if(k===p){A+=M[x]+" ",x=(x+1)%M.length;continue}if(k===g){A+=M[M.length-1]+" ";continue}}A+=M[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,d=f2(A,e,i).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}t+=En(u)+" "+En(m)+` Td
`,t+="("+qp(A)+`) Tj
`,t+=-En(u)+` 0 Td
`,m=-(i+2),d=0,g=_?p:p+1,b++,y=""}break}return n.text=t,n.fontSize=i,n},f2=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Qrt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Zrt=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},ent=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(xu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Qrt)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");wM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new rae,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&Zrt(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var l=n[s],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Xrt(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Fr.createDefaultAppearanceStream(l),ra(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Jrt(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var s in m)if(m.hasOwnProperty(s)){var g=m[s];typeof g=="function"&&(g=g.call(a,l)),f+="/"+s+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+s+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&function(p,x){for(var y in p)if(p.hasOwnProperty(y)){var b=y,w=p[y];x.internal.newObjectDeferredBegin(w.objId,!0),ra(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete p[b]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},eae=Oi.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),ra(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+qp(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},OP=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+qp(n(e))+")"},Bu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bu.prototype.toString=function(){return this.objId+" 0 R"},Bu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Bu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:eae(a,this.objId,this.scope)}):a instanceof Bu?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var tae=function(){Bu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ol(tae,Bu);var rae=function(){Bu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+qp(r(e))+")"}},set:function(r){e=r}})};ol(rae,Bu);var xu=function e(){Bu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zi(t,3)},set:function(y){y?this.F=qi(t,3):this.F=Ui(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof mj)return;i="FieldObject"+e.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+qp(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/wM:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof mj||this instanceof _h))return OP(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof go==0?OP(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof go==0?y.substr(0,1)==="("?mg(y.substr(1,y.length-2)):mg(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof go==1?mg(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof go==1?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof go==0?OP(m,this.objId,this.scope):m},set:function(y){y=y.toString(),m=this instanceof go==0?y.substr(0,1)==="("?mg(y.substr(1,y.length-2)):mg(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof go==1?mg(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof go==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(y){y=!!y,p=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,1)},set:function(y){y?this.Ff=qi(this.Ff,1):this.Ff=Ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,2)},set:function(y){y?this.Ff=qi(this.Ff,2):this.Ff=Ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,3)},set:function(y){y?this.Ff=qi(this.Ff,3):this.Ff=Ui(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');x=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(x){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};ol(xu,Bu);var Jm=function(){xu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return eae(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,s,l){l||(l=1);for(var c,u=[];c=s.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,18)},set:function(r){r?this.Ff=qi(this.Ff,18):this.Ff=Ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=qi(this.Ff,19):this.Ff=Ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,20)},set:function(r){r?(this.Ff=qi(this.Ff,20),t.sort()):this.Ff=Ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,22)},set:function(r){r?this.Ff=qi(this.Ff,22):this.Ff=Ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,23)},set:function(r){r?this.Ff=qi(this.Ff,23):this.Ff=Ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,27)},set:function(r){r?this.Ff=qi(this.Ff,27):this.Ff=Ui(this.Ff,27)}}),this.hasAppearanceStream=!1};ol(Jm,xu);var Qm=function(){Jm.call(this),this.fontName="helvetica",this.combo=!1};ol(Qm,Jm);var Zm=function(){Qm.call(this),this.combo=!0};ol(Zm,Qm);var dy=function(){Zm.call(this),this.edit=!0};ol(dy,Zm);var go=function(){xu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,15)},set:function(r){r?this.Ff=qi(this.Ff,15):this.Ff=Ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,16)},set:function(r){r?this.Ff=qi(this.Ff,16):this.Ff=Ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,17)},set:function(r){r?this.Ff=qi(this.Ff,17):this.Ff=Ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,26)},set:function(r){r?this.Ff=qi(this.Ff,26):this.Ff=Ui(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+qp(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ra(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ol(go,xu);var fy=function(){go.call(this),this.pushButton=!0};ol(fy,go);var ep=function(){go.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ol(ep,go);var mj=function(){var e,t;xu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+qp(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){ra(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Fr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ol(mj,xu),ep.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ep.prototype.createOption=function(e){var t=new mj;return t.Parent=this,t.optionName=e,this.Kids.push(t),tnt.call(this.scope,t),t};var hy=function(){go.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Fr.CheckBox.createAppearanceStream()};ol(hy,go);var _h=function(){xu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,13)},set:function(t){t?this.Ff=qi(this.Ff,13):this.Ff=Ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,21)},set:function(t){t?this.Ff=qi(this.Ff,21):this.Ff=Ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,23)},set:function(t){t?this.Ff=qi(this.Ff,23):this.Ff=Ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,24)},set:function(t){t?this.Ff=qi(this.Ff,24):this.Ff=Ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,25)},set:function(t){t?this.Ff=qi(this.Ff,25):this.Ff=Ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,26)},set:function(t){t?this.Ff=qi(this.Ff,26):this.Ff=Ui(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ol(_h,xu);var my=function(){_h.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,14)},set:function(e){e?this.Ff=qi(this.Ff,14):this.Ff=Ui(this.Ff,14)}}),this.password=!0};ol(my,_h);var Fr={CheckBox:{createAppearanceStream:function(){return{N:{On:Fr.CheckBox.YesNormal},D:{On:Fr.CheckBox.YesPushDown,Off:Fr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=VT(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+En(Fr.internal.getWidth(e))+" "+En(Fr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+En(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Nu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Fr.internal.getHeight(e),s=Fr.internal.getWidth(e),l=VT(e,e.caption);return a.push("1 g"),a.push("0 0 "+En(s)+" "+En(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+En(s-1)+" "+En(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+En(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+En(Fr.internal.getWidth(e))+" "+En(Fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Fr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Fr.RadioButton.Circle.YesNormal,t.D[e]=Fr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Nu(e);t.scope=e.scope;var r=[],n=Fr.internal.getWidth(e)<=Fr.internal.getHeight(e)?Fr.internal.getWidth(e)/4:Fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Fr.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+kf(Fr.internal.getWidth(e)/2)+" "+kf(Fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[],n=Fr.internal.getWidth(e)<=Fr.internal.getHeight(e)?Fr.internal.getWidth(e)/4:Fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Fr.internal.Bezier_C).toFixed(5)),s=Number((n*Fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+kf(Fr.internal.getWidth(e)/2)+" "+kf(Fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+kf(Fr.internal.getWidth(e)/2)+" "+kf(Fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[],n=Fr.internal.getWidth(e)<=Fr.internal.getHeight(e)?Fr.internal.getWidth(e)/4:Fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+kf(Fr.internal.getWidth(e)/2)+" "+kf(Fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Fr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Fr.RadioButton.Cross.YesNormal,t.D[e]=Fr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Nu(e);t.scope=e.scope;var r=[],n=Fr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+En(Fr.internal.getWidth(e)-2)+" "+En(Fr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(En(n.x1.x)+" "+En(n.x1.y)+" m"),r.push(En(n.x2.x)+" "+En(n.x2.y)+" l"),r.push(En(n.x4.x)+" "+En(n.x4.y)+" m"),r.push(En(n.x3.x)+" "+En(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=Fr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+En(Fr.internal.getWidth(e))+" "+En(Fr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+En(Fr.internal.getWidth(e)-2)+" "+En(Fr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(En(r.x1.x)+" "+En(r.x1.y)+" m"),n.push(En(r.x2.x)+" "+En(r.x2.y)+" l"),n.push(En(r.x4.x)+" "+En(r.x4.y)+" m"),n.push(En(r.x3.x)+" "+En(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Nu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+En(Fr.internal.getWidth(e))+" "+En(Fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Fr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Fr.internal.getWidth(e),r=Fr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Fr.internal.getWidth=function(e){var t=0;return ra(e)==="object"&&(t=i9(e.Rect[2])),t},Fr.internal.getHeight=function(e){var t=0;return ra(e)==="object"&&(t=i9(e.Rect[3])),t};var tnt=Oi.addField=function(e){if(ent(this,e),!(e instanceof xu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Oi.AcroFormChoiceField=Jm,Oi.AcroFormListBox=Qm,Oi.AcroFormComboBox=Zm,Oi.AcroFormEditBox=dy,Oi.AcroFormButton=go,Oi.AcroFormPushButton=fy,Oi.AcroFormRadioButton=ep,Oi.AcroFormCheckBox=hy,Oi.AcroFormTextField=_h,Oi.AcroFormPasswordField=my,Oi.AcroFormAppearance=Fr,Oi.AcroForm={ChoiceField:Jm,ListBox:Qm,ComboBox:Zm,EditBox:dy,Button:go,PushButton:fy,RadioButton:ep,CheckBox:hy,TextField:_h,PasswordField:my,Appearance:Fr},Qr.AcroForm={ChoiceField:Jm,ListBox:Qm,ComboBox:Zm,EditBox:dy,Button:go,PushButton:fy,RadioButton:ep,CheckBox:hy,TextField:_h,PasswordField:my,Appearance:Fr};var rnt=Qr.AcroForm;function nae(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(E,I){var O,R,B,W,F,$=r;if((I=I||r)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(N(E))for(F in n)for(B=n[F],O=0;O<B.length;O+=1){for(W=!0,R=0;R<B[O].length;R+=1)if(B[O][R]!==void 0&&B[O][R]!==E[R]){W=!1;break}if(W===!0){$=F;break}}else for(F in n)for(B=n[F],O=0;O<B.length;O+=1){for(W=!0,R=0;R<B[O].length;R+=1)if(B[O][R]!==void 0&&B[O][R]!==E.charCodeAt(R)){W=!1;break}if(W===!0){$=F;break}}return $===r&&I!==r&&($=I),$},i=function E(I){for(var O=this.internal.write,R=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:I.width}),W.push({key:"Height",value:I.height}),I.colorSpace===y.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===y.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var F="",$=0,H=I.transparency.length;$<H;$++)F+=I.transparency[$]+" "+I.transparency[$]+" ";W.push({key:"Mask",value:"["+F+"]"})}I.sMask!==void 0&&W.push({key:"SMask",value:I.objectId+1+" 0 R"});var ce=I.filter!==void 0?["/"+I.filter]:void 0;if(R({data:I.data,additionalKeyValues:W,alreadyAppliedFilters:ce,objectId:I.objectId}),O("endobj"),"sMask"in I&&I.sMask!==void 0){var oe,L=(oe=I.sMaskBitsPerComponent)!==null&&oe!==void 0?oe:I.bitsPerComponent,U={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:I.sMask};"filter"in I&&(U.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(I.width),U.filter=I.filter),E.call(this,U)}if(I.colorSpace===y.INDEXED){var J=this.internal.newObject();R({data:A(new Uint8Array(I.palette)),objectId:J}),O("endobj")}},s=function(){var E=this.internal.collections[t+"images"];for(var I in E)i.call(this,E[I])},l=function(){var E,I=this.internal.collections[t+"images"],O=this.internal.write;for(var R in I)O("/I"+(E=I[R]).index,E.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var E=this.internal.collections[t+"images"];return c.call(this),E},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(E){return typeof e["process"+E.toUpperCase()]=="function"},h=function(E){return ra(E)==="object"&&E.nodeType===1},m=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var O=""+E.getAttribute("src");if(O.indexOf("data:image/")===0)return V2(unescape(O).split("base64,").pop());var R=e.loadFile(O,!0);if(R!==void 0)return R}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var B;switch(I){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;default:B="image/jpeg"}return V2(E.toDataURL(B,1).split("base64,").pop())}},g=function(E){var I=this.internal.collections[t+"images"];if(I){for(var O in I)if(E===I[O].alias)return I[O]}},p=function(E,I,O){return E||I||(E=-96,I=-96),E<0&&(E=-1*O.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*O.height*72/I/this.internal.scaleFactor),E===0&&(E=I*O.width/O.height),I===0&&(I=E*O.height/O.width),[E,I]},x=function(E,I,O,R,B,W){var F=p.call(this,O,R,B),$=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,ce=u.call(this);if(O=F[0],R=F[1],ce[B.index]=B,W){W*=Math.PI/180;var oe=Math.cos(W),L=Math.sin(W),U=function(V){return V.toFixed(4)},J=[U(oe),U(L),U(-1*L),U(oe),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,$(E),H(I+R),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([$(O),"0","0",$(R),"0","0","cm"].join(" "))):this.internal.write([$(O),"0","0",$(R),$(E),H(I+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(E){var I,O,R=0;if(typeof E=="string")for(O=E.length,I=0;I<O;I++)R=(R<<5)-R+E.charCodeAt(I),R|=0;else if(N(E))for(O=E.byteLength/2,I=0;I<O;I++)R=(R<<5)-R+E[I],R|=0;return R},_=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},j=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var I=E.indexOf(",");return I<0?null:E.substring(0,I).trim().endsWith("base64")?E.substring(I+1):null};e.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},P=e.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,O=new Uint8Array(I),R=0;R<I;R++)O[R]=E.charCodeAt(R);return O},A=e.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",O=N(E)?E:new Uint8Array(E),R=0;R<O.length;R+=8192)I+=String.fromCharCode.apply(null,O.subarray(R,R+8192));return I};e.addImage=function(){var E,I,O,R,B,W,F,$,H;if(typeof arguments[1]=="number"?(I=r,O=arguments[1],R=arguments[2],B=arguments[3],W=arguments[4],F=arguments[5],$=arguments[6],H=arguments[7]):(I=arguments[1],O=arguments[2],R=arguments[3],B=arguments[4],W=arguments[5],F=arguments[6],$=arguments[7],H=arguments[8]),ra(E=arguments[0])==="object"&&!h(E)&&"imageData"in E){var ce=E;E=ce.imageData,I=ce.format||I||r,O=ce.x||O||0,R=ce.y||R||0,B=ce.w||ce.width||B,W=ce.h||ce.height||W,F=ce.alias||F,$=ce.compression||$,H=ce.rotation||ce.angle||H}var oe=this.internal.getFilters();if($===void 0&&oe.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(O)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=k.call(this,E,I,F,$);return x.call(this,O,R,B,W,L,H),this};var k=function(E,I,O,R){var B,W,F;if(typeof E=="string"&&a(E)===r){E=unescape(E);var $=M(E,!1);($!==""||($=e.loadFile(E,!0))!==void 0)&&(E=$)}if(h(E)&&(E=m(E,I)),I=a(E,I),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((F=O)==null||F.length===0)&&(O=function(H){return typeof H=="string"||N(H)?w(H):N(H.data)?w(H.data):null}(E)),(B=g.call(this,O))||(E instanceof Uint8Array||I==="RGBA"||(W=E,E=P(E)),B=this["process"+I.toUpperCase()](E,d.call(this),O,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in e.image_compression?H:b.NONE}(R),W)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},M=e.__addimage__.convertBase64ToBinaryString=function(E,I){I=typeof I!="boolean"||I;var O,R="";if(typeof E=="string"){var B;O=(B=j(E))!==null&&B!==void 0?B:E;try{R=V2(O)}catch(W){if(I)throw _(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return R};e.getImageProperties=function(E){var I,O,R="";if(h(E)&&(E=m(E)),typeof E=="string"&&a(E)===r&&((R=M(E,!1))===""&&(R=e.loadFile(E)||""),E=R),O=a(E),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(E instanceof Uint8Array||(E=P(E)),!(I=this["process"+O.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=O,I}})(Qr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Qr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(p.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(y(b))+") >>",p.content=i;var w=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(p.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+l(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var N=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+N+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,s){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:s,type:"link"})},e.textWithLink=function(r,n,a,i){var s,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;s=Math.ceil(u*d)}else l=c,s=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,s,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Qr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=e.__arabicParser__.isArabicEndLetter=function(p){return s(p)&&i(p)&&t[p.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(p){return s(p)&&a.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return s(p)&&i(p)&&t[p.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return s(p)&&i(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return s(p)&&i(p)&&t[p.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return s(p)&&i(p)&&t[p.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(p){var x=0,y=r,b="",w=0;for(x=0;x<p.length;x+=1)y[p.charCodeAt(x)]!==void 0?(w++,typeof(y=y[p.charCodeAt(x)])=="number"&&(b+=String.fromCharCode(y),y=r,w=0),x===p.length-1&&(y=r,b+=p.charAt(x-(w-1)),x-=w-1,w=0)):(y=r,b+=p.charAt(x-w),x-=w,w=0);return b};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(p,x,y){return s(p)?i(p)===!1?-1:!u(p)||!s(x)&&!s(y)||!s(y)&&l(x)||l(p)&&!s(x)||l(p)&&c(x)||l(p)&&l(x)?0:d(p)&&s(x)&&!l(x)&&s(y)&&u(y)?3:l(p)||!s(y)?1:2:-1},m=function(p){var x=0,y=0,b=0,w="",_="",j="",N=(p=p||"").split("\\s+"),P=[];for(x=0;x<N.length;x+=1){for(P.push(""),y=0;y<N[x].length;y+=1)w=N[x][y],_=N[x][y-1],j=N[x][y+1],s(w)?(b=h(w,_,j),P[x]+=b!==-1?String.fromCharCode(t[w.charCodeAt(0)][b]):w):P[x]+=w;P[x]=f(P[x])}return P.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var p,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(x)){var b=0;for(y=[],b=0;b<x.length;b+=1)Array.isArray(x[b])?y.push([m(x[b][0]),x[b][1],x[b][2]]):y.push([m(x[b])]);p=y}else p=m(x);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",g])}(Qr.API),Qr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Qr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(p){m=p}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(p){g=p}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,p=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,_){return w.concat(x.splitTextToSize(_,y))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)m<(p=this.getStringUnitWidth(c[b],{font:f})*d)&&(m=p);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,p,x,y=[],b=[],w=[],_={},j={},N=[],P=[],A=(h=h||{}).autoSize||!1,k=h.printHeaders!==!1,M=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,E=h.margins||Object.assign({width:this.getPageWidth()},t),I=typeof h.padding=="number"?h.padding:3,O=h.headerBackgroundColor||"#c8c8c8",R=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=R,this.setFontSize(M),f==null)b=y=Object.keys(d[0]),w=y.map(function(){return"left"});else if(Array.isArray(f)&&ra(f[0])==="object")for(y=f.map(function(ce){return ce.name}),b=f.map(function(ce){return ce.prompt||ce.name||""}),w=f.map(function(ce){return ce.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=.7499990551181103*f[m].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=y=f,w=y.map(function(){return"left"}));if(A||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(_[x=y[m]]=d.map(function(ce){return ce[x]}),this.setFont(void 0,"bold"),N.push(this.getTextDimensions(b[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=_[x],this.setFont(void 0,"normal"),p=0;p<g.length;p+=1)N.push(this.getTextDimensions(g[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[x]=Math.max.apply(null,N)+I+I,N=[]}if(k){var B={};for(m=0;m<y.length;m+=1)B[y[m]]={},B[y[m]].text=b[m],B[y[m]].align=w[m];var W=l.call(this,B,j);P=y.map(function(ce){return new i(c,u,j[ce],W,B[ce].text,void 0,B[ce].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var F=f.reduce(function(ce,oe){return ce[oe.name]=oe.align,ce},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var $=l.call(this,d[m],j);for(p=0;p<y.length;p+=1){var H=d[m][y[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:p,data:H},this),s.call(this,new i(c,u,j[y[p]],$,H,m+2,F[y[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Qr.API);var aae={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iae=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],WT=nae(iae),oae=[100,200,300,400,500,600,700,800,900],nnt=nae(oae);function TP(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return aae[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof WT[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function o9(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var ant={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},s9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function l9(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function c9(e){return e.trimLeft()}function int(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function ont(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var h2,u9,d9,pg,m2,f9,h9,m9,IP=["times"];function p9(e,t,r,n,a){var i=4,s=v9;switch(a){case Qr.API.image_compression.FAST:i=1,s=g9;break;case Qr.API.image_compression.MEDIUM:i=6,s=x9;break;case Qr.API.image_compression.SLOW:i=9,s=y9}e=function(c,u,d,f){for(var h,m=c.length/u,g=new Uint8Array(c.length+m),p=[snt,g9,v9,x9,y9],x=0;x<m;x+=1){var y=x*u,b=c.subarray(y,y+u);if(f)g.set(f(b,d,h),y+x);else{for(var w=p.length,_=[],j=0;j<w;j+=1)_[j]=p[j](b,d,h);var N=cnt(_.concat());g.set(_[N],y+x)}h=b}return g}(e,t,Math.ceil(r*n/8),s);var l=TT(e,{level:i});return Qr.API.__addimage__.arrayBufferToBinaryString(l)}function snt(e){var t=Array.apply([],e);return t.unshift(0),t}function g9(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function v9(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var s=r&&r[i]||0;a[i+1]=e[i]-s+256&255}return a}function x9(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var s=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(s+l>>>1)&255}return a}function y9(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var s=lnt(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-s+256&255}return a}function lnt(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function cnt(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function DP(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),s=(1<<r)-1;return sae(e,a)>>i&s}function b9(e,t,r,n){var a=r*n,i=Math.floor(a/8),s=16-(a-8*i+n),l=(1<<n)-1,c=(t&l)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(e,i,sae(e,i)&~(l<<s)&65535|c)}function sae(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function unt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=s,t+=3*s);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],1&p||(h=null),m=p>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++],j=_>>6&1,N=1<<1+(7&_),P=l,A=c,k=!1;_>>7&&(k=!0,P=t,A=N,t+=3*N);var M=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}d.push({x,y,width:b,height:w,has_local_palette:k,palette_offset:P,palette_size:A,data_offset:M,data_length:t-M,transparent_index:h,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,O){var R=this.frameInfo(I),B=R.width*R.height,W=new Uint8Array(B);w9(e,R.data_offset,W,B);var F=R.palette_offset,$=R.transparent_index;$===null&&($=256);var H=R.width,ce=r-H,oe=H,L=4*(R.y*r+R.x),U=4*((R.y+R.height)*r+R.x),J=L,V=4*ce;R.interlaced===!0&&(V+=4*r*7);for(var Z=8,K=0,he=W.length;K<he;++K){var te=W[K];if(oe===0&&(oe=H,(J+=V)>=U&&(V=4*ce+4*r*(Z-1),J=L+(H+ce)*(Z<<1),Z>>=1)),te===$)J+=4;else{var me=e[F+3*te],Ee=e[F+3*te+1],Se=e[F+3*te+2];O[J++]=Se,O[J++]=Ee,O[J++]=me,O[J++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(I,O){var R=this.frameInfo(I),B=R.width*R.height,W=new Uint8Array(B);w9(e,R.data_offset,W,B);var F=R.palette_offset,$=R.transparent_index;$===null&&($=256);var H=R.width,ce=r-H,oe=H,L=4*(R.y*r+R.x),U=4*((R.y+R.height)*r+R.x),J=L,V=4*ce;R.interlaced===!0&&(V+=4*r*7);for(var Z=8,K=0,he=W.length;K<he;++K){var te=W[K];if(oe===0&&(oe=H,(J+=V)>=U&&(V=4*ce+4*r*(Z-1),J=L+(H+ce)*(Z<<1),Z>>=1)),te===$)J+=4;else{var me=e[F+3*te],Ee=e[F+3*te+1],Se=e[F+3*te+2];O[J++]=me,O[J++]=Ee,O[J++]=Se,O[J++]=255}--oe}}}function w9(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,l=s+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),p=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==i){if(x===s)break;for(var y=x<l?x:p,b=0,w=y;w>i;)w=g[w]>>8,++b;var _=w;if(h+b+(y!==x?1:0)>n)return void za.log("Warning, gif stream longer than expected.");r[h++]=_;var j=h+=b;for(y!==x&&(r[h++]=_),w=y;b--;)w=g[w],r[--j]=255&w,w>>=8;p!==null&&l<4096&&(g[l++]=p<<8|_,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=x}else l=s+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&za.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function MP(e){var t,r,n,a,i,s=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),p=[],x=0,y=7,b=new Array(64),w=new Array(64),_=new Array(64),j=new Array(256),N=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(L,U){for(var J=0,V=0,Z=new Array,K=1;K<=16;K++){for(var he=1;he<=L[K];he++)Z[U[V]]=[],Z[U[V]][0]=J,Z[U[V]][1]=K,V++,J++;J*=2}return Z}function F(L){for(var U=L[0],J=L[1]-1;J>=0;)U&1<<J&&(x|=1<<y),J--,--y<0&&(x==255?($(255),$(0)):$(x),y=7,x=0)}function $(L){p.push(L)}function H(L){$(L>>8&255),$(255&L)}function ce(L,U,J,V,Z){for(var K,he=Z[0],te=Z[240],me=function(Qe,ft){var mt,_t,ue,Ct,At,Wt,wt,Ae,qe,Ot,Y=0;for(qe=0;qe<8;++qe){mt=Qe[Y],_t=Qe[Y+1],ue=Qe[Y+2],Ct=Qe[Y+3],At=Qe[Y+4],Wt=Qe[Y+5],wt=Qe[Y+6];var ve=mt+(Ae=Qe[Y+7]),Ve=mt-Ae,$e=_t+wt,Le=_t-wt,it=ue+Wt,Ye=ue-Wt,Ge=Ct+At,Xe=Ct-At,ht=ve+Ge,st=ve-Ge,lr=$e+it,rr=$e-it;Qe[Y]=ht+lr,Qe[Y+4]=ht-lr;var Zt=.707106781*(rr+st);Qe[Y+2]=st+Zt,Qe[Y+6]=st-Zt;var fn=.382683433*((ht=Xe+Ye)-(rr=Le+Ve)),Yr=.5411961*ht+fn,Bn=1.306562965*rr+fn,hr=.707106781*(lr=Ye+Le),qr=Ve+hr,ya=Ve-hr;Qe[Y+5]=ya+Yr,Qe[Y+3]=ya-Yr,Qe[Y+1]=qr+Bn,Qe[Y+7]=qr-Bn,Y+=8}for(Y=0,qe=0;qe<8;++qe){mt=Qe[Y],_t=Qe[Y+8],ue=Qe[Y+16],Ct=Qe[Y+24],At=Qe[Y+32],Wt=Qe[Y+40],wt=Qe[Y+48];var ui=mt+(Ae=Qe[Y+56]),Va=mt-Ae,Kn=_t+wt,Cr=_t-wt,zn=ue+Wt,Wn=ue-Wt,vi=Ct+At,ei=Ct-At,ba=ui+vi,wa=ui-vi,xi=Kn+zn,de=Kn-zn;Qe[Y]=ba+xi,Qe[Y+32]=ba-xi;var pt=.707106781*(de+wa);Qe[Y+16]=wa+pt,Qe[Y+48]=wa-pt;var xt=.382683433*((ba=ei+Wn)-(de=Cr+Va)),yt=.5411961*ba+xt,ot=1.306562965*de+xt,St=.707106781*(xi=Wn+Cr),Ht=Va+St,Ut=Va-St;Qe[Y+40]=Ut+yt,Qe[Y+24]=Ut-yt,Qe[Y+8]=Ht+ot,Qe[Y+56]=Ht-ot,Y++}for(qe=0;qe<64;++qe)Ot=Qe[qe]*ft[qe],m[qe]=Ot>0?Ot+.5|0:Ot-.5|0;return m}(L,U),Ee=0;Ee<64;++Ee)g[P[Ee]]=me[Ee];var Se=g[0]-J;J=g[0],Se==0?F(V[0]):(F(V[h[K=32767+Se]]),F(f[K]));for(var We=63;We>0&&g[We]==0;)We--;if(We==0)return F(he),J;for(var be,ne=1;ne<=We;){for(var Qt=ne;g[ne]==0&&ne<=We;)++ne;var bt=ne-Qt;if(bt>=16){be=bt>>4;for(var Pt=1;Pt<=be;++Pt)F(te);bt&=15}K=32767+g[ne],F(Z[(bt<<4)+h[K]]),F(f[K]),ne++}return We!=63&&F(he),J}function oe(L){L=Math.min(Math.max(L,1),100),i!=L&&(function(U){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],V=0;V<64;V++){var Z=s((J[V]*U+50)/100);Z=Math.min(Math.max(Z,1),255),l[P[V]]=Z}for(var K=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var te=s((K[he]*U+50)/100);te=Math.min(Math.max(te,1),255),c[P[he]]=te}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ee=0,Se=0;Se<8;Se++)for(var We=0;We<8;We++)u[Ee]=1/(l[P[Ee]]*me[Se]*me[We]*8),d[Ee]=1/(c[P[Ee]]*me[Se]*me[We]*8),Ee++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,U){U&&oe(U),p=new Array,x=0,y=7,H(65496),H(65504),H(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),H(1),H(1),$(0),$(0),function(){H(65499),H(132),$(0);for(var _t=0;_t<64;_t++)$(l[_t]);$(1);for(var ue=0;ue<64;ue++)$(c[ue])}(),function(_t,ue){H(65472),H(17),$(8),H(ue),H(_t),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(L.width,L.height),function(){H(65476),H(418),$(0);for(var _t=0;_t<16;_t++)$(A[_t+1]);for(var ue=0;ue<=11;ue++)$(k[ue]);$(16);for(var Ct=0;Ct<16;Ct++)$(M[Ct+1]);for(var At=0;At<=161;At++)$(E[At]);$(1);for(var Wt=0;Wt<16;Wt++)$(I[Wt+1]);for(var wt=0;wt<=11;wt++)$(O[wt]);$(17);for(var Ae=0;Ae<16;Ae++)$(R[Ae+1]);for(var qe=0;qe<=161;qe++)$(B[qe])}(),H(65498),H(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var J=0,V=0,Z=0;x=0,y=7,this.encode.displayName="_encode_";for(var K,he,te,me,Ee,Se,We,be,ne,Qt=L.data,bt=L.width,Pt=L.height,Qe=4*bt,ft=0;ft<Pt;){for(K=0;K<Qe;){for(Ee=Qe*ft+K,We=-1,be=0,ne=0;ne<64;ne++)Se=Ee+(be=ne>>3)*Qe+(We=4*(7&ne)),ft+be>=Pt&&(Se-=Qe*(ft+1+be-Pt)),K+We>=Qe&&(Se-=K+We-Qe+4),he=Qt[Se++],te=Qt[Se++],me=Qt[Se++],b[ne]=(N[he]+N[te+256|0]+N[me+512|0]>>16)-128,w[ne]=(N[he+768|0]+N[te+1024|0]+N[me+1280|0]>>16)-128,_[ne]=(N[he+1280|0]+N[te+1536|0]+N[me+1792|0]>>16)-128;J=ce(b,u,J,t,n),V=ce(w,d,V,r,a),Z=ce(_,d,Z,r,a),K+=32}ft+=8}if(y>=0){var mt=[];mt[1]=y+1,mt[0]=(1<<y+1)-1,F(mt)}return H(65497),new Uint8Array(p)},e=e||50,function(){for(var L=String.fromCharCode,U=0;U<256;U++)j[U]=L(U)}(),t=W(A,k),r=W(I,O),n=W(M,E),a=W(R,B),function(){for(var L=1,U=2,J=1;J<=15;J++){for(var V=L;V<U;V++)h[32767+V]=J,f[32767+V]=[],f[32767+V][1]=J,f[32767+V][0]=V;for(var Z=-(U-1);Z<=-L;Z++)h[32767+Z]=J,f[32767+Z]=[],f[32767+Z][1]=J,f[32767+Z][0]=U-1+Z;L<<=1,U<<=1}}(),function(){for(var L=0;L<256;L++)N[L]=19595*L,N[L+256|0]=38470*L,N[L+512|0]=7471*L+32768,N[L+768|0]=-11059*L,N[L+1024|0]=-21709*L,N[L+1280|0]=32768*L+8421375,N[L+1536|0]=-27439*L,N[L+1792|0]=-5329*L}(),oe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Mc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _9(e){function t(k){if(!k)throw Error("assert :P")}function r(k,M,E){for(var I=0;4>I;I++)if(k[M+I]!=E.charCodeAt(I))return!0;return!1}function n(k,M,E,I,O){for(var R=0;R<O;R++)k[M+R]=E[I+R]}function a(k,M,E,I){for(var O=0;O<I;O++)k[M+O]=E}function i(k){return new Int32Array(k)}function s(k,M){for(var E=[],I=0;I<k;I++)E.push(new M);return E}function l(k,M){var E=[];return function I(O,R,B){for(var W=B[R],F=0;F<W&&(O.push(B.length>R+1?[]:new M),!(B.length<R+1));F++)I(O[F],R+1,B)}(E,0,k),E}var c=function(){var k=this;function M(S,C){for(var D=1<<C-1>>>0;S&D;)D>>>=1;return D?(S&D-1)+D:S}function E(S,C,D,z,X){t(!(z%D));do S[C+(z-=D)]=X;while(0<z)}function I(S,C,D,z,X){if(t(2328>=X),512>=X)var ee=i(512);else if((ee=i(X))==null)return 0;return function(re,le,fe,we,Fe,dt){var _e,He,et=le,Tt=1<<fe,ct=i(16),Rt=i(16);for(t(Fe!=0),t(we!=null),t(re!=null),t(0<fe),He=0;He<Fe;++He){if(15<we[He])return 0;++ct[we[He]]}if(ct[0]==Fe)return 0;for(Rt[1]=0,_e=1;15>_e;++_e){if(ct[_e]>1<<_e)return 0;Rt[_e+1]=Rt[_e]+ct[_e]}for(He=0;He<Fe;++He)_e=we[He],0<we[He]&&(dt[Rt[_e]++]=He);if(Rt[15]==1)return(we=new O).g=0,we.value=dt[0],E(re,et,1,Tt,we),Tt;var Ft,ar=-1,Jt=Tt-1,Zr=0,$r=1,qn=1,Hr=1<<fe;for(He=0,_e=1,Fe=2;_e<=fe;++_e,Fe<<=1){if($r+=qn<<=1,0>(qn-=ct[_e]))return 0;for(;0<ct[_e];--ct[_e])(we=new O).g=_e,we.value=dt[He++],E(re,et+Zr,Fe,Hr,we),Zr=M(Zr,_e)}for(_e=fe+1,Fe=2;15>=_e;++_e,Fe<<=1){if($r+=qn<<=1,0>(qn-=ct[_e]))return 0;for(;0<ct[_e];--ct[_e]){if(we=new O,(Zr&Jt)!=ar){for(et+=Hr,Ft=1<<(ar=_e)-fe;15>ar&&!(0>=(Ft-=ct[ar]));)++ar,Ft<<=1;Tt+=Hr=1<<(Ft=ar-fe),re[le+(ar=Zr&Jt)].g=Ft+fe,re[le+ar].value=et-le-ar}we.g=_e-fe,we.value=dt[He++],E(re,et+(Zr>>fe),Fe,Hr,we),Zr=M(Zr,_e)}}return $r!=2*Rt[15]-1?0:Tt}(S,C,D,z,X,ee)}function O(){this.value=this.g=0}function R(){this.value=this.g=0}function B(){this.G=s(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Nc,R)}function W(S,C,D,z){t(S!=null),t(C!=null),t(2147483648>z),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=C,S.pa=D,S.Jd=C,S.Yc=D+z,S.Zc=4<=z?D+z-4+1:D,he(S)}function F(S,C){for(var D=0;0<C--;)D|=me(S,128)<<C;return D}function $(S,C){var D=F(S,C);return te(S)?-D:D}function H(S,C,D,z){var X,ee=0;for(t(S!=null),t(C!=null),t(4294967288>z),S.Sb=z,S.Ra=0,S.u=0,S.h=0,4<z&&(z=4),X=0;X<z;++X)ee+=C[D+X]<<8*X;S.Ra=ee,S.bb=z,S.oa=C,S.pa=D}function ce(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<No-8>>>0,++S.bb,S.u-=8;V(S)&&(S.h=1,S.u=0)}function oe(S,C){if(t(0<=C),!S.h&&C<=Ri){var D=J(S)&Mo[C];return S.u+=C,ce(S),D}return S.h=1,S.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(S){return S.Ra>>>(S.u&No-1)>>>0}function V(S){return t(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>No}function Z(S,C){S.u=C,S.h=V(S)}function K(S){S.u>=Pi&&(t(S.u>=Pi),ce(S))}function he(S){t(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(t(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function te(S){return F(S,1)}function me(S,C){var D=S.Ca;0>S.b&&he(S);var z=S.b,X=D*C>>>8,ee=(S.I>>>z>X)+0;for(ee?(D-=X,S.I-=X+1<<z>>>0):D=X+1,z=D,X=0;256<=z;)X+=8,z>>=8;return z=7^X+sl[z],S.b-=z,S.Ca=(D<<z)-1,ee}function Ee(S,C,D){S[C+0]=D>>24&255,S[C+1]=D>>16&255,S[C+2]=D>>8&255,S[C+3]=255&D}function Se(S,C){return S[C+0]|S[C+1]<<8}function We(S,C){return Se(S,C)|S[C+2]<<16}function be(S,C){return Se(S,C)|Se(S,C+2)<<16}function ne(S,C){var D=1<<C;return t(S!=null),t(0<C),S.X=i(D),S.X==null?0:(S.Mb=32-C,S.Xa=C,1)}function Qt(S,C){t(S!=null),t(C!=null),t(S.Xa==C.Xa),n(C.X,0,S.X,0,1<<C.Xa)}function bt(){this.X=[],this.Xa=this.Mb=0}function Pt(S,C,D,z){t(D!=null),t(z!=null);var X=D[0],ee=z[0];return X==0&&(X=(S*ee+C/2)/C),ee==0&&(ee=(C*X+S/2)/S),0>=X||0>=ee?0:(D[0]=X,z[0]=ee,1)}function Qe(S,C){return S+(1<<C)-1>>>C}function ft(S,C){return((4278255360&S)+(4278255360&C)>>>0&4278255360)+((16711935&S)+(16711935&C)>>>0&16711935)>>>0}function mt(S,C){k[C]=function(D,z,X,ee,re,le,fe){var we;for(we=0;we<re;++we){var Fe=k[S](le[fe+we-1],X,ee+we);le[fe+we]=ft(D[z+we],Fe)}}}function _t(){this.ud=this.hd=this.jd=0}function ue(S,C){return((4278124286&(S^C))>>>1)+(S&C)>>>0}function Ct(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function At(S,C){return Ct(S+(S-C+.5>>1))}function Wt(S,C,D){return Math.abs(C-D)-Math.abs(S-D)}function wt(S,C,D,z,X,ee,re){for(z=ee[re-1],D=0;D<X;++D)ee[re+D]=z=ft(S[C+D],z)}function Ae(S,C,D,z,X){var ee;for(ee=0;ee<D;++ee){var re=S[C+ee],le=re>>8&255,fe=16711935&(fe=(fe=16711935&re)+((le<<16)+le));z[X+ee]=(4278255360&re)+fe>>>0}}function qe(S,C){C.jd=255&S,C.hd=S>>8&255,C.ud=S>>16&255}function Ot(S,C,D,z,X,ee){var re;for(re=0;re<z;++re){var le=C[D+re],fe=le>>>8,we=le,Fe=255&(Fe=(Fe=le>>>16)+((S.jd<<24>>24)*(fe<<24>>24)>>>5));we=255&(we=(we+=(S.hd<<24>>24)*(fe<<24>>24)>>>5)+((S.ud<<24>>24)*(Fe<<24>>24)>>>5)),X[ee+re]=(4278255360&le)+(Fe<<16)+we}}function Y(S,C,D,z,X){k[C]=function(ee,re,le,fe,we,Fe,dt,_e,He){for(fe=dt;fe<_e;++fe)for(dt=0;dt<He;++dt)we[Fe++]=X(le[z(ee[re++])])},k[S]=function(ee,re,le,fe,we,Fe,dt){var _e=8>>ee.b,He=ee.Ea,et=ee.K[0],Tt=ee.w;if(8>_e)for(ee=(1<<ee.b)-1,Tt=(1<<_e)-1;re<le;++re){var ct,Rt=0;for(ct=0;ct<He;++ct)ct&ee||(Rt=z(fe[we++])),Fe[dt++]=X(et[Rt&Tt]),Rt>>=_e}else k["VP8LMapColor"+D](fe,we,et,Tt,Fe,dt,re,le,He)}}function ve(S,C,D,z,X){for(D=C+D;C<D;){var ee=S[C++];z[X++]=ee>>16&255,z[X++]=ee>>8&255,z[X++]=255&ee}}function Ve(S,C,D,z,X){for(D=C+D;C<D;){var ee=S[C++];z[X++]=ee>>16&255,z[X++]=ee>>8&255,z[X++]=255&ee,z[X++]=ee>>24&255}}function $e(S,C,D,z,X){for(D=C+D;C<D;){var ee=(re=S[C++])>>16&240|re>>12&15,re=240&re|re>>28&15;z[X++]=ee,z[X++]=re}}function Le(S,C,D,z,X){for(D=C+D;C<D;){var ee=(re=S[C++])>>16&248|re>>13&7,re=re>>5&224|re>>3&31;z[X++]=ee,z[X++]=re}}function it(S,C,D,z,X){for(D=C+D;C<D;){var ee=S[C++];z[X++]=255&ee,z[X++]=ee>>8&255,z[X++]=ee>>16&255}}function Ye(S,C,D,z,X,ee){if(ee==0)for(D=C+D;C<D;)Ee(z,((ee=S[C++])[0]>>24|ee[1]>>8&65280|ee[2]<<8&16711680|ee[3]<<24)>>>0),X+=32;else n(z,X,S,C,D)}function Ge(S,C){k[C][0]=k[S+"0"],k[C][1]=k[S+"1"],k[C][2]=k[S+"2"],k[C][3]=k[S+"3"],k[C][4]=k[S+"4"],k[C][5]=k[S+"5"],k[C][6]=k[S+"6"],k[C][7]=k[S+"7"],k[C][8]=k[S+"8"],k[C][9]=k[S+"9"],k[C][10]=k[S+"10"],k[C][11]=k[S+"11"],k[C][12]=k[S+"12"],k[C][13]=k[S+"13"],k[C][14]=k[S+"0"],k[C][15]=k[S+"0"]}function Xe(S){return S==UC||S==VC||S==K1||S==WC}function ht(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function lr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ht,this.f.kb=new st,this.sd=null}function rr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fn(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Yr(S,C){var D=S.T,z=C.ba.f.RGBA,X=z.eb,ee=z.fb+S.ka*z.A,re=Xl[C.ba.S],le=S.y,fe=S.O,we=S.f,Fe=S.N,dt=S.ea,_e=S.W,He=C.cc,et=C.dc,Tt=C.Mc,ct=C.Nc,Rt=S.ka,Ft=S.ka+S.T,ar=S.U,Jt=ar+1>>1;for(Rt==0?re(le,fe,null,null,we,Fe,dt,_e,we,Fe,dt,_e,X,ee,null,null,ar):(re(C.ec,C.fc,le,fe,He,et,Tt,ct,we,Fe,dt,_e,X,ee-z.A,X,ee,ar),++D);Rt+2<Ft;Rt+=2)He=we,et=Fe,Tt=dt,ct=_e,Fe+=S.Rc,_e+=S.Rc,ee+=2*z.A,re(le,(fe+=2*S.fa)-S.fa,le,fe,He,et,Tt,ct,we,Fe,dt,_e,X,ee-z.A,X,ee,ar);return fe+=S.fa,S.j+Ft<S.o?(n(C.ec,C.fc,le,fe,ar),n(C.cc,C.dc,we,Fe,Jt),n(C.Mc,C.Nc,dt,_e,Jt),D--):1&Ft||re(le,fe,null,null,we,Fe,dt,_e,we,Fe,dt,_e,X,ee+z.A,null,null,ar),D}function Bn(S,C,D){var z=S.F,X=[S.J];if(z!=null){var ee=S.U,re=C.ba.S,le=re==G1||re==K1;C=C.ba.f.RGBA;var fe=[0],we=S.ka;fe[0]=S.T,S.Kb&&(we==0?--fe[0]:(--we,X[0]-=S.width),S.j+S.ka+S.T==S.o&&(fe[0]=S.o-S.j-we));var Fe=C.eb;we=C.fb+we*C.A,S=ua(z,X[0],S.width,ee,fe,Fe,we+(le?0:3),C.A),t(D==fe),S&&Xe(re)&&Ac(Fe,we,le,ee,fe,C.A)}return 0}function hr(S){var C=S.ma,D=C.ba.S,z=11>D,X=D==W1||D==H1||D==G1||D==qC||D==12||Xe(D);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!Jh(C.Oa,S,X?11:12))return 0;if(X&&Xe(D)&&Vl(),S.da)alert("todo:use_scaling");else{if(z){if(C.Ib=fn,S.Kb){if(D=S.U+1>>1,C.memory=i(S.U+2*D),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+S.U,C.Mc=C.cc,C.Nc=C.dc+D,C.Ib=Yr,Vl()}}else alert("todo:EmitYUV");X&&(C.Jb=Bn,z&&Ai())}if(z&&!qM){for(S=0;256>S;++S)vie[S]=89858*(S-128)+X1>>Y1,bie[S]=-22014*(S-128)+X1,yie[S]=-45773*(S-128),xie[S]=113618*(S-128)+X1>>Y1;for(S=Fx;S<KC;++S)C=76283*(S-16)+X1>>Y1,wie[S-Fx]=Da(C,255),_ie[S-Fx]=Da(C+8>>4,15);qM=1}return 1}function qr(S){var C=S.ma,D=S.U,z=S.T;return t(!(1&S.ka)),0>=D||0>=z?0:(D=C.Ib(S,C),C.Jb!=null&&C.Jb(S,C,D),C.Dc+=D,1)}function ya(S){S.ma.memory=null}function ui(S,C,D,z){return oe(S,8)!=47?0:(C[0]=oe(S,14)+1,D[0]=oe(S,14)+1,z[0]=oe(S,1),oe(S,3)!=0?0:!S.h)}function Va(S,C){if(4>S)return S+1;var D=S-2>>1;return(2+(1&S)<<D)+oe(C,D)+1}function Kn(S,C){return 120<C?C-120:1<=(D=((D=nie[C-1])>>4)*S+(8-(15&D)))?D:1;var D}function Cr(S,C,D){var z=J(D),X=S[C+=255&z].g-8;return 0<X&&(Z(D,D.u+8),z=J(D),C+=S[C].value,C+=z&(1<<X)-1),Z(D,D.u+S[C].g),S[C].value}function zn(S,C,D){return D.g+=S.g,D.value+=S.value<<C>>>0,t(8>=D.g),S.g}function Wn(S,C,D){var z=S.xc;return t((C=z==0?0:S.vc[S.md*(D>>z)+(C>>z)])<S.Wb),S.Ya[C]}function vi(S,C,D,z){var X=S.ab,ee=S.c*C,re=S.C;C=re+C;var le=D,fe=z;for(z=S.Ta,D=S.Ua;0<X--;){var we=S.gc[X],Fe=re,dt=C,_e=le,He=fe,et=(fe=z,le=D,we.Ea);switch(t(Fe<dt),t(dt<=we.nc),we.hc){case 2:fi(_e,He,(dt-Fe)*et,fe,le);break;case 0:var Tt=Fe,ct=dt,Rt=fe,Ft=le,ar=(Hr=we).Ea;Tt==0&&(Qh(_e,He,null,null,1,Rt,Ft),wt(_e,He+1,0,0,ar-1,Rt,Ft+1),He+=ar,Ft+=ar,++Tt);for(var Jt=1<<Hr.b,Zr=Jt-1,$r=Qe(ar,Hr.b),qn=Hr.K,Hr=Hr.w+(Tt>>Hr.b)*$r;Tt<ct;){var aa=qn,io=Hr,Un=1;for(Ro(_e,He,Rt,Ft-ar,1,Rt,Ft);Un<ar;){var Gr=(Un&~Zr)+Jt;Gr>ar&&(Gr=ar),(0,mf[aa[io++]>>8&15])(_e,He+ +Un,Rt,Ft+Un-ar,Gr-Un,Rt,Ft+Un),Un=Gr}He+=ar,Ft+=ar,++Tt&Zr||(Hr+=$r)}dt!=we.nc&&n(fe,le-et,fe,le+(dt-Fe-1)*et,et);break;case 1:for(et=_e,ct=He,ar=(_e=we.Ea)-(Ft=_e&~(Rt=(He=1<<we.b)-1)),Tt=Qe(_e,we.b),Jt=we.K,we=we.w+(Fe>>we.b)*Tt;Fe<dt;){for(Zr=Jt,$r=we,qn=new _t,Hr=ct+Ft,aa=ct+_e;ct<Hr;)qe(Zr[$r++],qn),pf(qn,et,ct,He,fe,le),ct+=He,le+=He;ct<aa&&(qe(Zr[$r++],qn),pf(qn,et,ct,ar,fe,le),ct+=ar,le+=ar),++Fe&Rt||(we+=Tt)}break;case 3:if(_e==fe&&He==le&&0<we.b){for(ct=fe,_e=et=le+(dt-Fe)*et-(Ft=(dt-Fe)*Qe(we.Ea,we.b)),He=fe,Rt=le,Tt=[],Ft=(ar=Ft)-1;0<=Ft;--Ft)Tt[Ft]=He[Rt+Ft];for(Ft=ar-1;0<=Ft;--Ft)ct[_e+Ft]=Tt[Ft];Up(we,Fe,dt,fe,et,fe,le)}else Up(we,Fe,dt,_e,He,fe,le)}le=z,fe=D}fe!=D&&n(z,D,le,fe,ee)}function ei(S,C){var D=S.V,z=S.Ba+S.c*S.C,X=C-S.C;if(t(C<=S.l.o),t(16>=X),0<X){var ee=S.l,re=S.Ta,le=S.Ua,fe=ee.width;if(vi(S,X,D,z),X=le=[le],t((D=S.C)<(z=C)),t(ee.v<ee.va),z>ee.o&&(z=ee.o),D<ee.j){var we=ee.j-D;D=ee.j,X[0]+=we*fe}if(D>=z?D=0:(X[0]+=4*ee.v,ee.ka=D-ee.j,ee.U=ee.va-ee.v,ee.T=z-D,D=1),D){if(le=le[0],11>(D=S.ca).S){var Fe=D.f.RGBA,dt=(z=D.S,X=ee.U,ee=ee.T,we=Fe.eb,Fe.A),_e=ee;for(Fe=Fe.fb+S.Ma*Fe.A;0<_e--;){var He=re,et=le,Tt=X,ct=we,Rt=Fe;switch(z){case V1:dd(He,et,Tt,ct,Rt);break;case W1:$s(He,et,Tt,ct,Rt);break;case UC:$s(He,et,Tt,ct,Rt),Ac(ct,Rt,0,Tt,1,0);break;case TM:Oe(He,et,Tt,ct,Rt);break;case H1:Ye(He,et,Tt,ct,Rt,1);break;case VC:Ye(He,et,Tt,ct,Rt,1),Ac(ct,Rt,0,Tt,1,0);break;case G1:Ye(He,et,Tt,ct,Rt,0);break;case K1:Ye(He,et,Tt,ct,Rt,0),Ac(ct,Rt,1,Tt,1,0);break;case qC:ae(He,et,Tt,ct,Rt);break;case WC:ae(He,et,Tt,ct,Rt),Rx(ct,Rt,Tt,1,0);break;case IM:ke(He,et,Tt,ct,Rt);break;default:t(0)}le+=fe,Fe+=dt}S.Ma+=ee}else alert("todo:EmitRescaledRowsYUVA");t(S.Ma<=D.height)}}S.C=C,t(S.C<=S.i)}function ba(S){var C;if(0<S.ua)return 0;for(C=0;C<S.Wb;++C){var D=S.Ya[C].G,z=S.Ya[C].H;if(0<D[1][z[1]+0].g||0<D[2][z[2]+0].g||0<D[3][z[3]+0].g)return 0}return 1}function wa(S,C,D,z,X,ee){if(S.Z!=0){var re=S.qd,le=S.rd;for(t(xf[S.Z]!=null);C<D;++C)xf[S.Z](re,le,z,X,z,X,ee),re=z,le=X,X+=ee;S.qd=re,S.rd=le}}function xi(S,C){var D=S.l.ma,z=D.Z==0||D.Z==1?S.l.j:S.C;if(z=S.C<z?z:S.C,t(C<=S.l.o),C>z){var X=S.l.width,ee=D.ca,re=D.tb+X*z,le=S.V,fe=S.Ba+S.c*z,we=S.gc;t(S.ab==1),t(we[0].hc==3),Kl(we[0],z,C,le,fe,ee,re),wa(D,z,C,ee,re,X)}S.C=S.Ma=C}function de(S,C,D,z,X,ee,re){var le=S.$/z,fe=S.$%z,we=S.m,Fe=S.s,dt=D+S.$,_e=dt;X=D+z*X;var He=D+z*ee,et=280+Fe.ua,Tt=S.Pb?le:16777216,ct=0<Fe.ua?Fe.Wa:null,Rt=Fe.wc,Ft=dt<He?Wn(Fe,fe,le):null;t(S.C<ee),t(He<=X);var ar=!1;e:for(;;){for(;ar||dt<He;){var Jt=0;if(le>=Tt){var Zr=dt-D;t((Tt=S).Pb),Tt.wd=Tt.m,Tt.xd=Zr,0<Tt.s.ua&&Qt(Tt.s.Wa,Tt.s.vb),Tt=le+iie}if(fe&Rt||(Ft=Wn(Fe,fe,le)),t(Ft!=null),Ft.Qb&&(C[dt]=Ft.qb,ar=!0),!ar)if(K(we),Ft.jc){Jt=we,Zr=C;var $r=dt,qn=Ft.pd[J(Jt)&Nc-1];t(Ft.jc),256>qn.g?(Z(Jt,Jt.u+qn.g),Zr[$r]=qn.value,Jt=0):(Z(Jt,Jt.u+qn.g-256),t(256<=qn.value),Jt=qn.value),Jt==0&&(ar=!0)}else Jt=Cr(Ft.G[0],Ft.H[0],we);if(we.h)break;if(ar||256>Jt){if(!ar)if(Ft.nd)C[dt]=(Ft.qb|Jt<<8)>>>0;else{if(K(we),ar=Cr(Ft.G[1],Ft.H[1],we),K(we),Zr=Cr(Ft.G[2],Ft.H[2],we),$r=Cr(Ft.G[3],Ft.H[3],we),we.h)break;C[dt]=($r<<24|ar<<16|Jt<<8|Zr)>>>0}if(ar=!1,++dt,++fe>=z&&(fe=0,++le,re!=null&&le<=ee&&!(le%16)&&re(S,le),ct!=null))for(;_e<dt;)Jt=C[_e++],ct.X[(506832829*Jt&4294967295)>>>ct.Mb]=Jt}else if(280>Jt){if(Jt=Va(Jt-256,we),Zr=Cr(Ft.G[4],Ft.H[4],we),K(we),Zr=Kn(z,Zr=Va(Zr,we)),we.h)break;if(dt-D<Zr||X-dt<Jt)break e;for($r=0;$r<Jt;++$r)C[dt+$r]=C[dt+$r-Zr];for(dt+=Jt,fe+=Jt;fe>=z;)fe-=z,++le,re!=null&&le<=ee&&!(le%16)&&re(S,le);if(t(dt<=X),fe&Rt&&(Ft=Wn(Fe,fe,le)),ct!=null)for(;_e<dt;)Jt=C[_e++],ct.X[(506832829*Jt&4294967295)>>>ct.Mb]=Jt}else{if(!(Jt<et))break e;for(ar=Jt-280,t(ct!=null);_e<dt;)Jt=C[_e++],ct.X[(506832829*Jt&4294967295)>>>ct.Mb]=Jt;Jt=dt,t(!(ar>>>(Zr=ct).Xa)),C[Jt]=Zr.X[ar],ar=!0}ar||t(we.h==V(we))}if(S.Pb&&we.h&&dt<X)t(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Qt(S.s.vb,S.s.Wa);else{if(we.h)break e;re?.(S,le>ee?ee:le),S.a=0,S.$=dt-D}return 1}return S.a=3,0}function pt(S){t(S!=null),S.vc=null,S.yc=null,S.Ya=null;var C=S.Wa;C!=null&&(C.X=null),S.vb=null,t(S!=null)}function xt(){var S=new yr;return S==null?null:(S.a=0,S.xb=RM,Ge("Predictor","VP8LPredictors"),Ge("Predictor","VP8LPredictors_C"),Ge("PredictorAdd","VP8LPredictorsAdd"),Ge("PredictorAdd","VP8LPredictorsAdd_C"),fi=Ae,pf=Ot,dd=ve,$s=Ve,ae=$e,ke=Le,Oe=it,k.VP8LMapColor32b=Gl,k.VP8LMapColor8b=Zh,S)}function yt(S,C,D,z,X){var ee=1,re=[S],le=[C],fe=z.m,we=z.s,Fe=null,dt=0;e:for(;;){if(D)for(;ee&&oe(fe,1);){var _e=re,He=le,et=z,Tt=1,ct=et.m,Rt=et.gc[et.ab],Ft=oe(ct,2);if(et.Oc&1<<Ft)ee=0;else{switch(et.Oc|=1<<Ft,Rt.hc=Ft,Rt.Ea=_e[0],Rt.nc=He[0],Rt.K=[null],++et.ab,t(4>=et.ab),Ft){case 0:case 1:Rt.b=oe(ct,3)+2,Tt=yt(Qe(Rt.Ea,Rt.b),Qe(Rt.nc,Rt.b),0,et,Rt.K),Rt.K=Rt.K[0];break;case 3:var ar,Jt=oe(ct,8)+1,Zr=16<Jt?0:4<Jt?1:2<Jt?2:3;if(_e[0]=Qe(Rt.Ea,Zr),Rt.b=Zr,ar=Tt=yt(Jt,1,0,et,Rt.K)){var $r,qn=Jt,Hr=Rt,aa=1<<(8>>Hr.b),io=i(aa);if(io==null)ar=0;else{var Un=Hr.K[0],Gr=Hr.w;for(io[0]=Hr.K[0][0],$r=1;$r<1*qn;++$r)io[$r]=ft(Un[Gr+$r],io[$r-1]);for(;$r<4*aa;++$r)io[$r]=0;Hr.K[0]=null,Hr.K[0]=io,ar=1}}Tt=ar;break;case 2:break;default:t(0)}ee=Tt}}if(re=re[0],le=le[0],ee&&oe(fe,1)&&!(ee=1<=(dt=oe(fe,4))&&11>=dt)){z.a=3;break e}var br;if(br=ee)t:{var Li,Tn,da,ri=z,Lo=re,ms=le,Ei=dt,Jo=D,ps=ri.m,oo=ri.s,ha=[null],Ca=1,ki=0,Aa=aie[Ei];r:for(;;){if(Jo&&oe(ps,1)){var $o=oe(ps,3)+2,Ec=Qe(Lo,$o),$i=Qe(ms,$o),Bs=Ec*$i;if(!yt(Ec,$i,0,ri,ha))break r;for(ha=ha[0],oo.xc=$o,Li=0;Li<Bs;++Li){var Ba=ha[Li]>>8&65535;ha[Li]=Ba,Ba>=Ca&&(Ca=Ba+1)}}if(ps.h)break r;for(Tn=0;5>Tn;++Tn){var so=DM[Tn];!Tn&&0<Ei&&(so+=1<<Ei),ki<so&&(ki=so)}var ul=s(Ca*Aa,O),gs=Ca,dl=s(gs,B);if(dl==null)var fl=null;else t(65536>=gs),fl=dl;var zs=i(ki);if(fl==null||zs==null||ul==null){ri.a=1;break r}var hl=ul;for(Li=da=0;Li<Ca;++Li){var Wa=fl[Li],ml=Wa.G,kc=Wa.H,em=0,md=1,Fo=0;for(Tn=0;5>Tn;++Tn){so=DM[Tn],ml[Tn]=hl,kc[Tn]=da,!Tn&&0<Ei&&(so+=1<<Ei);a:{var Q1,YC=so,Z1=ri,Bx=zs,Nie=hl,Cie=da,XC=0,yf=Z1.m,Aie=oe(yf,1);if(a(Bx,0,0,YC),Aie){var Pie=oe(yf,1)+1,Eie=oe(yf,1),WM=oe(yf,Eie==0?1:8);Bx[WM]=1,Pie==2&&(Bx[WM=oe(yf,8)]=1);var ew=1}else{var HM=i(19),GM=oe(yf,4)+4;if(19<GM){Z1.a=3;var tw=0;break a}for(Q1=0;Q1<GM;++Q1)HM[rie[Q1]]=oe(yf,3);var JC=void 0,zx=void 0,KM=Z1,kie=HM,rw=YC,YM=Bx,QC=0,bf=KM.m,XM=8,JM=s(128,O);n:for(;I(JM,0,7,kie,19);){if(oe(bf,1)){var Oie=2+2*oe(bf,3);if((JC=2+oe(bf,Oie))>rw)break n}else JC=rw;for(zx=0;zx<rw&&JC--;){K(bf);var QM=JM[0+(127&J(bf))];Z(bf,bf.u+QM.g);var Vp=QM.value;if(16>Vp)YM[zx++]=Vp,Vp!=0&&(XM=Vp);else{var Tie=Vp==16,ZM=Vp-16,Iie=eie[ZM],eR=oe(bf,Zae[ZM])+Iie;if(zx+eR>rw)break n;for(var Die=Tie?XM:0;0<eR--;)YM[zx++]=Die}}QC=1;break n}QC||(KM.a=3),ew=QC}(ew=ew&&!yf.h)&&(XC=I(Nie,Cie,8,Bx,YC)),ew&&XC!=0?tw=XC:(Z1.a=3,tw=0)}if(tw==0)break r;if(md&&tie[Tn]==1&&(md=hl[da].g==0),em+=hl[da].g,da+=tw,3>=Tn){var qx,ZC=zs[0];for(qx=1;qx<so;++qx)zs[qx]>ZC&&(ZC=zs[qx]);Fo+=ZC}}if(Wa.nd=md,Wa.Qb=0,md&&(Wa.qb=(ml[3][kc[3]+0].value<<24|ml[1][kc[1]+0].value<<16|ml[2][kc[2]+0].value)>>>0,em==0&&256>ml[0][kc[0]+0].value&&(Wa.Qb=1,Wa.qb+=ml[0][kc[0]+0].value<<8)),Wa.jc=!Wa.Qb&&6>Fo,Wa.jc){var nw,pd=Wa;for(nw=0;nw<Nc;++nw){var wf=nw,_f=pd.pd[wf],aw=pd.G[0][pd.H[0]+wf];256<=aw.value?(_f.g=aw.g+256,_f.value=aw.value):(_f.g=0,_f.value=0,wf>>=zn(aw,8,_f),wf>>=zn(pd.G[1][pd.H[1]+wf],16,_f),wf>>=zn(pd.G[2][pd.H[2]+wf],0,_f),zn(pd.G[3][pd.H[3]+wf],24,_f))}}}oo.vc=ha,oo.Wb=Ca,oo.Ya=fl,oo.yc=ul,br=1;break t}br=0}if(!(ee=br)){z.a=3;break e}if(0<dt){if(we.ua=1<<dt,!ne(we.Wa,dt)){z.a=1,ee=0;break e}}else we.ua=0;var e5=z,tR=re,Mie=le,t5=e5.s,r5=t5.xc;if(e5.c=tR,e5.i=Mie,t5.md=Qe(tR,r5),t5.wc=r5==0?-1:(1<<r5)-1,D){z.xb=fie;break e}if((Fe=i(re*le))==null){z.a=1,ee=0;break e}ee=(ee=de(z,Fe,0,re,le,le,null))&&!fe.h;break e}return ee?(X!=null?X[0]=Fe:(t(Fe==null),t(D)),z.$=0,D||pt(we)):pt(we),ee}function ot(S,C){var D=S.c*S.i,z=D+C+16*C;return t(S.c<=C),S.V=i(z),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+D+C,1)}function St(S,C){var D=S.C,z=C-D,X=S.V,ee=S.Ba+S.c*D;for(t(C<=S.l.o);0<z;){var re=16<z?16:z,le=S.l.ma,fe=S.l.width,we=fe*re,Fe=le.ca,dt=le.tb+fe*D,_e=S.Ta,He=S.Ua;vi(S,re,X,ee),Xo(_e,He,Fe,dt,we),wa(le,D,D+re,Fe,dt,fe),z-=re,X+=re*S.c,D+=re}t(D==C),S.C=S.Ma=C}function Ht(){this.ub=this.yd=this.td=this.Rb=0}function Ut(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ur(){this.Yb=function(){var S=[];return function C(D,z,X){for(var ee=X[z],re=0;re<ee&&(D.push(X.length>z+1?[]:0),!(X.length<z+1));re++)C(D[re],z+1,X)}(S,0,[3,11]),S}()}function mr(){this.jb=i(3),this.Wc=l([4,8],ur),this.Xc=l([4,17],ur)}function Ar(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Nn(){this.ld=this.La=this.dd=this.tc=0}function yn(){this.Na=this.la=0}function _r(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mn(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sa(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nn),this.Y=0,this.ya=Array(new Mn),this.aa=0,this.l=new G}function ja(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Mi(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Ht,this.Kc=new Ut,this.ed=new Ar,this.Qa=new nr,this.Ic=this.$c=this.Aa=0,this.D=new Sa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,L),this.ia=0,this.pb=s(4,_r),this.Pa=new mr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ja),this.Hd=0,this.rb=Array(new yn),this.sb=0,this.wa=Array(new Nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mn),this.L=this.aa=0,this.gd=l([4,2],Nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function G(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Te(){var S=new Mi;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,$x||($x=jt)),S}function Je(S,C,D){return S.a==0&&(S.a=C,S.sc=D,S.cb=0),0}function Xt(S,C,D){return 3<=D&&S[C+0]==157&&S[C+1]==1&&S[C+2]==42}function It(S,C){if(S==null)return 0;if(S.a=0,S.sc="OK",C==null)return Je(S,2,"null VP8Io passed to VP8GetHeaders()");var D=C.data,z=C.w,X=C.ha;if(4>X)return Je(S,7,"Truncated header.");var ee=D[z+0]|D[z+1]<<8|D[z+2]<<16,re=S.Od;if(re.Rb=!(1&ee),re.td=ee>>1&7,re.yd=ee>>4&1,re.ub=ee>>5,3<re.td)return Je(S,3,"Incorrect keyframe parameters.");if(!re.yd)return Je(S,4,"Frame not displayable.");z+=3,X-=3;var le=S.Kc;if(re.Rb){if(7>X)return Je(S,7,"cannot parse picture header");if(!Xt(D,z,X))return Je(S,3,"Bad code word");le.c=16383&(D[z+4]<<8|D[z+3]),le.Td=D[z+4]>>6,le.i=16383&(D[z+6]<<8|D[z+5]),le.Ud=D[z+6]>>6,z+=7,X-=7,S.za=le.c+15>>4,S.Ub=le.i+15>>4,C.width=le.c,C.height=le.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,a((ee=S.Pa).jb,0,255,ee.jb.length),t((ee=S.Qa)!=null),ee.Cb=0,ee.Bb=0,ee.Fb=1,a(ee.Zb,0,0,ee.Zb.length),a(ee.Lb,0,0,ee.Lb)}if(re.ub>X)return Je(S,7,"bad partition length");W(ee=S.m,D,z,re.ub),z+=re.ub,X-=re.ub,re.Rb&&(le.Ld=te(ee),le.Kd=te(ee)),le=S.Qa;var fe,we=S.Pa;if(t(ee!=null),t(le!=null),le.Cb=te(ee),le.Cb){if(le.Bb=te(ee),te(ee)){for(le.Fb=te(ee),fe=0;4>fe;++fe)le.Zb[fe]=te(ee)?$(ee,7):0;for(fe=0;4>fe;++fe)le.Lb[fe]=te(ee)?$(ee,6):0}if(le.Bb)for(fe=0;3>fe;++fe)we.jb[fe]=te(ee)?F(ee,8):255}else le.Bb=0;if(ee.Ka)return Je(S,3,"cannot parse segment header");if((le=S.ed).zd=te(ee),le.Tb=F(ee,6),le.wb=F(ee,3),le.Pc=te(ee),le.Pc&&te(ee)){for(we=0;4>we;++we)te(ee)&&(le.vd[we]=$(ee,6));for(we=0;4>we;++we)te(ee)&&(le.od[we]=$(ee,6))}if(S.L=le.Tb==0?0:le.zd?1:2,ee.Ka)return Je(S,3,"cannot parse filter header");var Fe=X;if(X=fe=z,z=fe+Fe,le=Fe,S.Xb=(1<<F(S.m,2))-1,Fe<3*(we=S.Xb))D=7;else{for(fe+=3*we,le-=3*we,Fe=0;Fe<we;++Fe){var dt=D[X+0]|D[X+1]<<8|D[X+2]<<16;dt>le&&(dt=le),W(S.Jc[+Fe],D,fe,dt),fe+=dt,le-=dt,X+=3}W(S.Jc[+we],D,fe,le),D=fe<z?0:5}if(D!=0)return Je(S,D,"cannot parse partitions");for(D=F(fe=S.m,7),X=te(fe)?$(fe,4):0,z=te(fe)?$(fe,4):0,le=te(fe)?$(fe,4):0,we=te(fe)?$(fe,4):0,fe=te(fe)?$(fe,4):0,Fe=S.Qa,dt=0;4>dt;++dt){if(Fe.Cb){var _e=Fe.Zb[dt];Fe.Fb||(_e+=D)}else{if(0<dt){S.pb[dt]=S.pb[0];continue}_e=D}var He=S.pb[dt];He.Sc[0]=HC[Da(_e+X,127)],He.Sc[1]=GC[Da(_e+0,127)],He.Eb[0]=2*HC[Da(_e+z,127)],He.Eb[1]=101581*GC[Da(_e+le,127)]>>16,8>He.Eb[1]&&(He.Eb[1]=8),He.Qc[0]=HC[Da(_e+we,117)],He.Qc[1]=GC[Da(_e+fe,127)],He.lc=_e+fe}if(!re.Rb)return Je(S,4,"Not a key frame.");for(te(ee),re=S.Pa,D=0;4>D;++D){for(X=0;8>X;++X)for(z=0;3>z;++z)for(le=0;11>le;++le)we=me(ee,uie[D][X][z][le])?F(ee,8):lie[D][X][z][le],re.Wc[D][X].Yb[z][le]=we;for(X=0;17>X;++X)re.Xc[D][X]=re.Wc[D][die[X]]}return S.kc=te(ee),S.kc&&(S.Bd=F(ee,8)),S.cb=1}function jt(S,C,D,z,X,ee,re){var le=C[X].Yb[D];for(D=0;16>X;++X){if(!me(S,le[D+0]))return X;for(;!me(S,le[D+1]);)if(le=C[++X].Yb[0],D=0,X==16)return 16;var fe=C[X+1].Yb;if(me(S,le[D+2])){var we=S,Fe=0;if(me(we,(_e=le)[(dt=D)+3]))if(me(we,_e[dt+6])){for(le=0,dt=2*(Fe=me(we,_e[dt+8]))+(_e=me(we,_e[dt+9+Fe])),Fe=0,_e=oie[dt];_e[le];++le)Fe+=Fe+me(we,_e[le]);Fe+=3+(8<<dt)}else me(we,_e[dt+7])?(Fe=7+2*me(we,165),Fe+=me(we,145)):Fe=5+me(we,159);else Fe=me(we,_e[dt+4])?3+me(we,_e[dt+5]):2;le=fe[2]}else Fe=1,le=fe[1];fe=re+sie[X],0>(we=S).b&&he(we);var dt,_e=we.b,He=(dt=we.Ca>>1)-(we.I>>_e)>>31;--we.b,we.Ca+=He,we.Ca|=1,we.I-=(dt+1&He)<<_e,ee[fe]=((Fe^He)-He)*z[(0<X)+0]}return 16}function cr(S){var C=S.rb[S.sb-1];C.la=0,C.Na=0,a(S.zc,0,0,S.zc.length),S.ja=0}function wr(S,C,D,z,X){X=S[C+D+32*z]+(X>>3),S[C+D+32*z]=-256&X?0>X?0:255:X}function gr(S,C,D,z,X,ee){wr(S,C,0,D,z+X),wr(S,C,1,D,z+ee),wr(S,C,2,D,z-ee),wr(S,C,3,D,z-X)}function zt(S){return(20091*S>>16)+S}function Er(S,C,D,z){var X,ee=0,re=i(16);for(X=0;4>X;++X){var le=S[C+0]+S[C+8],fe=S[C+0]-S[C+8],we=(35468*S[C+4]>>16)-zt(S[C+12]),Fe=zt(S[C+4])+(35468*S[C+12]>>16);re[ee+0]=le+Fe,re[ee+1]=fe+we,re[ee+2]=fe-we,re[ee+3]=le-Fe,ee+=4,C++}for(X=ee=0;4>X;++X)le=(S=re[ee+0]+4)+re[ee+8],fe=S-re[ee+8],we=(35468*re[ee+4]>>16)-zt(re[ee+12]),wr(D,z,0,0,le+(Fe=zt(re[ee+4])+(35468*re[ee+12]>>16))),wr(D,z,1,0,fe+we),wr(D,z,2,0,fe-we),wr(D,z,3,0,le-Fe),ee++,z+=32}function Bt(S,C,D,z){var X=S[C+0]+4,ee=35468*S[C+4]>>16,re=zt(S[C+4]),le=35468*S[C+1]>>16;gr(D,z,0,X+re,S=zt(S[C+1]),le),gr(D,z,1,X+ee,S,le),gr(D,z,2,X-ee,S,le),gr(D,z,3,X-re,S,le)}function Xr(S,C,D,z,X){Er(S,C,D,z),X&&Er(S,C+16,D,z+4)}function Vr(S,C,D,z){Nt(S,C+0,D,z,1),Nt(S,C+32,D,z+128,1)}function rn(S,C,D,z){var X;for(S=S[C+0]+4,X=0;4>X;++X)for(C=0;4>C;++C)wr(D,z,C,X,S)}function na(S,C,D,z){S[C+0]&&Vt(S,C+0,D,z),S[C+16]&&Vt(S,C+16,D,z+4),S[C+32]&&Vt(S,C+32,D,z+128),S[C+48]&&Vt(S,C+48,D,z+128+4)}function Jr(S,C,D,z){var X,ee=i(16);for(X=0;4>X;++X){var re=S[C+0+X]+S[C+12+X],le=S[C+4+X]+S[C+8+X],fe=S[C+4+X]-S[C+8+X],we=S[C+0+X]-S[C+12+X];ee[0+X]=re+le,ee[8+X]=re-le,ee[4+X]=we+fe,ee[12+X]=we-fe}for(X=0;4>X;++X)re=(S=ee[0+4*X]+3)+ee[3+4*X],le=ee[1+4*X]+ee[2+4*X],fe=ee[1+4*X]-ee[2+4*X],we=S-ee[3+4*X],D[z+0]=re+le>>3,D[z+16]=we+fe>>3,D[z+32]=re-le>>3,D[z+48]=we-fe>>3,z+=64}function ut(S,C,D){var z,X=C-32,ee=cl,re=255-S[X-1];for(z=0;z<D;++z){var le,fe=ee,we=re+S[C-1];for(le=0;le<D;++le)S[C+le]=fe[we+S[X+le]];C+=32}}function Br(S,C){ut(S,C,4)}function jr(S,C){ut(S,C,8)}function ie(S,C){ut(S,C,16)}function pe(S,C){var D;for(D=0;16>D;++D)n(S,C+32*D,S,C-32,16)}function Be(S,C){var D;for(D=16;0<D;--D)a(S,C,S[C-1],16),C+=32}function ze(S,C,D){var z;for(z=0;16>z;++z)a(C,D+32*z,S,16)}function Me(S,C){var D,z=16;for(D=0;16>D;++D)z+=S[C-1+32*D]+S[C+D-32];ze(z>>5,S,C)}function lt(S,C){var D,z=8;for(D=0;16>D;++D)z+=S[C-1+32*D];ze(z>>4,S,C)}function tt(S,C){var D,z=8;for(D=0;16>D;++D)z+=S[C+D-32];ze(z>>4,S,C)}function tr(S,C){ze(128,S,C)}function Lt(S,C,D){return S+2*C+D+2>>2}function pr(S,C){var D,z=C-32;for(z=new Uint8Array([Lt(S[z-1],S[z+0],S[z+1]),Lt(S[z+0],S[z+1],S[z+2]),Lt(S[z+1],S[z+2],S[z+3]),Lt(S[z+2],S[z+3],S[z+4])]),D=0;4>D;++D)n(S,C+32*D,z,0,z.length)}function kr(S,C){var D=S[C-1],z=S[C-1+32],X=S[C-1+64],ee=S[C-1+96];Ee(S,C+0,16843009*Lt(S[C-1-32],D,z)),Ee(S,C+32,16843009*Lt(D,z,X)),Ee(S,C+64,16843009*Lt(z,X,ee)),Ee(S,C+96,16843009*Lt(X,ee,ee))}function wn(S,C){var D,z=4;for(D=0;4>D;++D)z+=S[C+D-32]+S[C-1+32*D];for(z>>=3,D=0;4>D;++D)a(S,C+32*D,z,4)}function Wr(S,C){var D=S[C-1+0],z=S[C-1+32],X=S[C-1+64],ee=S[C-1-32],re=S[C+0-32],le=S[C+1-32],fe=S[C+2-32],we=S[C+3-32];S[C+0+96]=Lt(z,X,S[C-1+96]),S[C+1+96]=S[C+0+64]=Lt(D,z,X),S[C+2+96]=S[C+1+64]=S[C+0+32]=Lt(ee,D,z),S[C+3+96]=S[C+2+64]=S[C+1+32]=S[C+0+0]=Lt(re,ee,D),S[C+3+64]=S[C+2+32]=S[C+1+0]=Lt(le,re,ee),S[C+3+32]=S[C+2+0]=Lt(fe,le,re),S[C+3+0]=Lt(we,fe,le)}function Mr(S,C){var D=S[C+1-32],z=S[C+2-32],X=S[C+3-32],ee=S[C+4-32],re=S[C+5-32],le=S[C+6-32],fe=S[C+7-32];S[C+0+0]=Lt(S[C+0-32],D,z),S[C+1+0]=S[C+0+32]=Lt(D,z,X),S[C+2+0]=S[C+1+32]=S[C+0+64]=Lt(z,X,ee),S[C+3+0]=S[C+2+32]=S[C+1+64]=S[C+0+96]=Lt(X,ee,re),S[C+3+32]=S[C+2+64]=S[C+1+96]=Lt(ee,re,le),S[C+3+64]=S[C+2+96]=Lt(re,le,fe),S[C+3+96]=Lt(le,fe,fe)}function _n(S,C){var D=S[C-1+0],z=S[C-1+32],X=S[C-1+64],ee=S[C-1-32],re=S[C+0-32],le=S[C+1-32],fe=S[C+2-32],we=S[C+3-32];S[C+0+0]=S[C+1+64]=ee+re+1>>1,S[C+1+0]=S[C+2+64]=re+le+1>>1,S[C+2+0]=S[C+3+64]=le+fe+1>>1,S[C+3+0]=fe+we+1>>1,S[C+0+96]=Lt(X,z,D),S[C+0+64]=Lt(z,D,ee),S[C+0+32]=S[C+1+96]=Lt(D,ee,re),S[C+1+32]=S[C+2+96]=Lt(ee,re,le),S[C+2+32]=S[C+3+96]=Lt(re,le,fe),S[C+3+32]=Lt(le,fe,we)}function xe(S,C){var D=S[C+0-32],z=S[C+1-32],X=S[C+2-32],ee=S[C+3-32],re=S[C+4-32],le=S[C+5-32],fe=S[C+6-32],we=S[C+7-32];S[C+0+0]=D+z+1>>1,S[C+1+0]=S[C+0+64]=z+X+1>>1,S[C+2+0]=S[C+1+64]=X+ee+1>>1,S[C+3+0]=S[C+2+64]=ee+re+1>>1,S[C+0+32]=Lt(D,z,X),S[C+1+32]=S[C+0+96]=Lt(z,X,ee),S[C+2+32]=S[C+1+96]=Lt(X,ee,re),S[C+3+32]=S[C+2+96]=Lt(ee,re,le),S[C+3+64]=Lt(re,le,fe),S[C+3+96]=Lt(le,fe,we)}function je(S,C){var D=S[C-1+0],z=S[C-1+32],X=S[C-1+64],ee=S[C-1+96];S[C+0+0]=D+z+1>>1,S[C+2+0]=S[C+0+32]=z+X+1>>1,S[C+2+32]=S[C+0+64]=X+ee+1>>1,S[C+1+0]=Lt(D,z,X),S[C+3+0]=S[C+1+32]=Lt(z,X,ee),S[C+3+32]=S[C+1+64]=Lt(X,ee,ee),S[C+3+64]=S[C+2+64]=S[C+0+96]=S[C+1+96]=S[C+2+96]=S[C+3+96]=ee}function Ie(S,C){var D=S[C-1+0],z=S[C-1+32],X=S[C-1+64],ee=S[C-1+96],re=S[C-1-32],le=S[C+0-32],fe=S[C+1-32],we=S[C+2-32];S[C+0+0]=S[C+2+32]=D+re+1>>1,S[C+0+32]=S[C+2+64]=z+D+1>>1,S[C+0+64]=S[C+2+96]=X+z+1>>1,S[C+0+96]=ee+X+1>>1,S[C+3+0]=Lt(le,fe,we),S[C+2+0]=Lt(re,le,fe),S[C+1+0]=S[C+3+32]=Lt(D,re,le),S[C+1+32]=S[C+3+64]=Lt(z,D,re),S[C+1+64]=S[C+3+96]=Lt(X,z,D),S[C+1+96]=Lt(ee,X,z)}function De(S,C){var D;for(D=0;8>D;++D)n(S,C+32*D,S,C-32,8)}function Re(S,C){var D;for(D=0;8>D;++D)a(S,C,S[C-1],8),C+=32}function nt(S,C,D){var z;for(z=0;8>z;++z)a(C,D+32*z,S,8)}function Q(S,C){var D,z=8;for(D=0;8>D;++D)z+=S[C+D-32]+S[C-1+32*D];nt(z>>4,S,C)}function Ce(S,C){var D,z=4;for(D=0;8>D;++D)z+=S[C+D-32];nt(z>>3,S,C)}function Ke(S,C){var D,z=4;for(D=0;8>D;++D)z+=S[C-1+32*D];nt(z>>3,S,C)}function Ze(S,C){nt(128,S,C)}function Gt(S,C,D){var z=S[C-D],X=S[C+0],ee=3*(X-z)+zC[1020+S[C-2*D]-S[C+D]],re=U1[112+(ee+4>>3)];S[C-D]=cl[255+z+U1[112+(ee+3>>3)]],S[C+0]=cl[255+X-re]}function Kt(S,C,D,z){var X=S[C+0],ee=S[C+D];return Yl[255+S[C-2*D]-S[C-D]]>z||Yl[255+ee-X]>z}function at(S,C,D,z){return 4*Yl[255+S[C-D]-S[C+0]]+Yl[255+S[C-2*D]-S[C+D]]<=z}function Dt(S,C,D,z,X){var ee=S[C-3*D],re=S[C-2*D],le=S[C-D],fe=S[C+0],we=S[C+D],Fe=S[C+2*D],dt=S[C+3*D];return 4*Yl[255+le-fe]+Yl[255+re-we]>z?0:Yl[255+S[C-4*D]-ee]<=X&&Yl[255+ee-re]<=X&&Yl[255+re-le]<=X&&Yl[255+dt-Fe]<=X&&Yl[255+Fe-we]<=X&&Yl[255+we-fe]<=X}function fr(S,C,D,z){var X=2*z+1;for(z=0;16>z;++z)at(S,C+z,D,X)&&Gt(S,C+z,D)}function er(S,C,D,z){var X=2*z+1;for(z=0;16>z;++z)at(S,C+z*D,1,X)&&Gt(S,C+z*D,1)}function Tr(S,C,D,z){var X;for(X=3;0<X;--X)fr(S,C+=4*D,D,z)}function zr(S,C,D,z){var X;for(X=3;0<X;--X)er(S,C+=4,D,z)}function Ur(S,C,D,z,X,ee,re,le){for(ee=2*ee+1;0<X--;){if(Dt(S,C,D,ee,re))if(Kt(S,C,D,le))Gt(S,C,D);else{var fe=S,we=C,Fe=D,dt=fe[we-2*Fe],_e=fe[we-Fe],He=fe[we+0],et=fe[we+Fe],Tt=fe[we+2*Fe],ct=27*(Ft=zC[1020+3*(He-_e)+zC[1020+dt-et]])+63>>7,Rt=18*Ft+63>>7,Ft=9*Ft+63>>7;fe[we-3*Fe]=cl[255+fe[we-3*Fe]+Ft],fe[we-2*Fe]=cl[255+dt+Rt],fe[we-Fe]=cl[255+_e+ct],fe[we+0]=cl[255+He-ct],fe[we+Fe]=cl[255+et-Rt],fe[we+2*Fe]=cl[255+Tt-Ft]}C+=z}}function sa(S,C,D,z,X,ee,re,le){for(ee=2*ee+1;0<X--;){if(Dt(S,C,D,ee,re))if(Kt(S,C,D,le))Gt(S,C,D);else{var fe=S,we=C,Fe=D,dt=fe[we-Fe],_e=fe[we+0],He=fe[we+Fe],et=U1[112+(4+(Tt=3*(_e-dt))>>3)],Tt=U1[112+(Tt+3>>3)],ct=et+1>>1;fe[we-2*Fe]=cl[255+fe[we-2*Fe]+ct],fe[we-Fe]=cl[255+dt+Tt],fe[we+0]=cl[255+_e-et],fe[we+Fe]=cl[255+He-ct]}C+=z}}function va(S,C,D,z,X,ee){Ur(S,C,D,1,16,z,X,ee)}function So(S,C,D,z,X,ee){Ur(S,C,1,D,16,z,X,ee)}function Ci(S,C,D,z,X,ee){var re;for(re=3;0<re;--re)sa(S,C+=4*D,D,1,16,z,X,ee)}function fs(S,C,D,z,X,ee){var re;for(re=3;0<re;--re)sa(S,C+=4,1,D,16,z,X,ee)}function T(S,C,D,z,X,ee,re,le){Ur(S,C,X,1,8,ee,re,le),Ur(D,z,X,1,8,ee,re,le)}function q(S,C,D,z,X,ee,re,le){Ur(S,C,1,X,8,ee,re,le),Ur(D,z,1,X,8,ee,re,le)}function ge(S,C,D,z,X,ee,re,le){sa(S,C+4*X,X,1,8,ee,re,le),sa(D,z+4*X,X,1,8,ee,re,le)}function Pe(S,C,D,z,X,ee,re,le){sa(S,C+4,1,X,8,ee,re,le),sa(D,z+4,1,X,8,ee,re,le)}function Ue(){this.ba=new lr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Et(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sr(){this.ua=0,this.Wa=new bt,this.vb=new bt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new O}function yr(){this.xb=this.a=0,this.l=new G,this.ca=new lr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sr,this.ab=0,this.gc=s(4,gt),this.Oc=0}function Ir(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new G,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function nn(S,C,D,z,X,ee,re){for(S=S==null?0:S[C+0],C=0;C<re;++C)X[ee+C]=S+D[z+C]&255,S=X[ee+C]}function Rn(S,C,D,z,X,ee,re){var le;if(S==null)nn(null,null,D,z,X,ee,re);else for(le=0;le<re;++le)X[ee+le]=S[C+le]+D[z+le]&255}function On(S,C,D,z,X,ee,re){if(S==null)nn(null,null,D,z,X,ee,re);else{var le,fe=S[C+0],we=fe,Fe=fe;for(le=0;le<re;++le)we=Fe+(fe=S[C+le])-we,Fe=D[z+le]+(-256&we?0>we?0:255:we)&255,we=fe,X[ee+le]=Fe}}function Ln(S,C,D,z){var X=C.width,ee=C.o;if(t(S!=null&&C!=null),0>D||0>=z||D+z>ee)return null;if(!S.Cc){if(S.ga==null){var re;if(S.ga=new Ir,(re=S.ga==null)||(re=C.width*C.o,t(S.Gb.length==0),S.Gb=i(re),S.Uc=0,S.Gb==null?re=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,re=1),re=!re),!re){re=S.ga;var le=S.Fa,fe=S.P,we=S.qc,Fe=S.mb,dt=S.nb,_e=fe+1,He=we-1,et=re.l;if(t(le!=null&&Fe!=null&&C!=null),xf[0]=null,xf[1]=nn,xf[2]=Rn,xf[3]=On,re.ca=Fe,re.tb=dt,re.c=C.width,re.i=C.height,t(0<re.c&&0<re.i),1>=we)C=0;else if(re.$a=3&le[fe+0],re.Z=le[fe+0]>>2&3,re.Lc=le[fe+0]>>4&3,fe=le[fe+0]>>6&3,0>re.$a||1<re.$a||4<=re.Z||1<re.Lc||fe)C=0;else if(et.put=qr,et.ac=hr,et.bc=ya,et.ma=re,et.width=C.width,et.height=C.height,et.Da=C.Da,et.v=C.v,et.va=C.va,et.j=C.j,et.o=C.o,re.$a)e:{t(re.$a==1),C=xt();t:for(;;){if(C==null){C=0;break e}if(t(re!=null),re.mc=C,C.c=re.c,C.i=re.i,C.l=re.l,C.l.ma=re,C.l.width=re.c,C.l.height=re.i,C.a=0,H(C.m,le,_e,He),!yt(re.c,re.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&ba(C.s)?(re.ic=1,le=C.c*C.i,C.Ta=null,C.Ua=0,C.V=i(le),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(re.ic=0,C=ot(C,re.c)),!C))break t;C=1;break e}re.mc=null,C=0}else C=He>=re.c*re.i;re=!C}if(re)return null;S.ga.Lc!=1?S.Ga=0:z=ee-D}t(S.ga!=null),t(D+z<=ee);e:{if(C=(le=S.ga).c,ee=le.l.o,le.$a==0){if(_e=S.rc,He=S.Vc,et=S.Fa,fe=S.P+1+D*C,we=S.mb,Fe=S.nb+D*C,t(fe<=S.P+S.qc),le.Z!=0)for(t(xf[le.Z]!=null),re=0;re<z;++re)xf[le.Z](_e,He,et,fe,we,Fe,C),_e=we,He=Fe,Fe+=C,fe+=C;else for(re=0;re<z;++re)n(we,Fe,et,fe,C),_e=we,He=Fe,Fe+=C,fe+=C;S.rc=_e,S.Vc=He}else{if(t(le.mc!=null),C=D+z,t((re=le.mc)!=null),t(C<=re.i),re.C>=C)C=1;else if(le.ic||Ai(),le.ic){le=re.V,_e=re.Ba,He=re.c;var Tt=re.i,ct=(et=1,fe=re.$/He,we=re.$%He,Fe=re.m,dt=re.s,re.$),Rt=He*Tt,Ft=He*C,ar=dt.wc,Jt=ct<Ft?Wn(dt,we,fe):null;t(ct<=Rt),t(C<=Tt),t(ba(dt));t:for(;;){for(;!Fe.h&&ct<Ft;){if(we&ar||(Jt=Wn(dt,we,fe)),t(Jt!=null),K(Fe),256>(Tt=Cr(Jt.G[0],Jt.H[0],Fe)))le[_e+ct]=Tt,++ct,++we>=He&&(we=0,++fe<=C&&!(fe%16)&&xi(re,fe));else{if(!(280>Tt)){et=0;break t}Tt=Va(Tt-256,Fe);var Zr,$r=Cr(Jt.G[4],Jt.H[4],Fe);if(K(Fe),!(ct>=($r=Kn(He,$r=Va($r,Fe)))&&Rt-ct>=Tt)){et=0;break t}for(Zr=0;Zr<Tt;++Zr)le[_e+ct+Zr]=le[_e+ct+Zr-$r];for(ct+=Tt,we+=Tt;we>=He;)we-=He,++fe<=C&&!(fe%16)&&xi(re,fe);ct<Ft&&we&ar&&(Jt=Wn(dt,we,fe))}t(Fe.h==V(Fe))}xi(re,fe>C?C:fe);break t}!et||Fe.h&&ct<Rt?(et=0,re.a=Fe.h?5:3):re.$=ct,C=et}else C=de(re,re.V,re.Ba,re.c,re.i,C,St);if(!C){z=0;break e}}D+z>=ee&&(S.Cc=1),z=1}if(!z)return null;if(S.Cc&&((z=S.ga)!=null&&(z.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+D*X}function la(S,C,D,z,X,ee){for(;0<X--;){var re,le=S,fe=C+(D?1:0),we=S,Fe=C+(D?0:3);for(re=0;re<z;++re){var dt=we[Fe+4*re];dt!=255&&(dt*=32897,le[fe+4*re+0]=le[fe+4*re+0]*dt>>23,le[fe+4*re+1]=le[fe+4*re+1]*dt>>23,le[fe+4*re+2]=le[fe+4*re+2]*dt>>23)}C+=ee}}function Ra(S,C,D,z,X){for(;0<z--;){var ee;for(ee=0;ee<D;++ee){var re=S[C+2*ee+0],le=15&(we=S[C+2*ee+1]),fe=4369*le,we=(240&we|we>>4)*fe>>16;S[C+2*ee+0]=(240&re|re>>4)*fe>>16&240|(15&re|re<<4)*fe>>16>>4&15,S[C+2*ee+1]=240&we|le}C+=X}}function La(S,C,D,z,X,ee,re,le){var fe,we,Fe=255;for(we=0;we<X;++we){for(fe=0;fe<z;++fe){var dt=S[C+fe];ee[re+4*fe]=dt,Fe&=dt}C+=D,re+=le}return Fe!=255}function di(S,C,D,z,X){var ee;for(ee=0;ee<X;++ee)D[z+ee]=S[C+ee]>>8}function Ai(){Ac=la,Rx=Ra,ua=La,Xo=di}function Jn(S,C,D){k[S]=function(z,X,ee,re,le,fe,we,Fe,dt,_e,He,et,Tt,ct,Rt,Ft,ar){var Jt,Zr=ar-1>>1,$r=le[fe+0]|we[Fe+0]<<16,qn=dt[_e+0]|He[et+0]<<16;t(z!=null);var Hr=3*$r+qn+131074>>2;for(C(z[X+0],255&Hr,Hr>>16,Tt,ct),ee!=null&&(Hr=3*qn+$r+131074>>2,C(ee[re+0],255&Hr,Hr>>16,Rt,Ft)),Jt=1;Jt<=Zr;++Jt){var aa=le[fe+Jt]|we[Fe+Jt]<<16,io=dt[_e+Jt]|He[et+Jt]<<16,Un=$r+aa+qn+io+524296,Gr=Un+2*(aa+qn)>>3;Hr=Gr+$r>>1,$r=(Un=Un+2*($r+io)>>3)+aa>>1,C(z[X+2*Jt-1],255&Hr,Hr>>16,Tt,ct+(2*Jt-1)*D),C(z[X+2*Jt-0],255&$r,$r>>16,Tt,ct+(2*Jt-0)*D),ee!=null&&(Hr=Un+qn>>1,$r=Gr+io>>1,C(ee[re+2*Jt-1],255&Hr,Hr>>16,Rt,Ft+(2*Jt-1)*D),C(ee[re+2*Jt+0],255&$r,$r>>16,Rt,Ft+(2*Jt+0)*D)),$r=aa,qn=io}1&ar||(Hr=3*$r+qn+131074>>2,C(z[X+ar-1],255&Hr,Hr>>16,Tt,ct+(ar-1)*D),ee!=null&&(Hr=3*qn+$r+131074>>2,C(ee[re+ar-1],255&Hr,Hr>>16,Rt,Ft+(ar-1)*D)))}}function Vl(){Xl[V1]=hie,Xl[W1]=LM,Xl[TM]=mie,Xl[H1]=$M,Xl[G1]=FM,Xl[qC]=BM,Xl[IM]=pie,Xl[UC]=LM,Xl[VC]=$M,Xl[K1]=FM,Xl[WC]=BM}function hs(S){return S&~gie?0>S?0:255:S>>zM}function ro(S,C){return hs((19077*S>>8)+(26149*C>>8)-14234)}function yi(S,C,D){return hs((19077*S>>8)-(6419*C>>8)-(13320*D>>8)+8708)}function bu(S,C){return hs((19077*S>>8)+(33050*C>>8)-17685)}function ff(S,C,D,z,X){z[X+0]=ro(S,D),z[X+1]=yi(S,C,D),z[X+2]=bu(S,C)}function cd(S,C,D,z,X){z[X+0]=bu(S,C),z[X+1]=yi(S,C,D),z[X+2]=ro(S,D)}function Ia(S,C,D,z,X){var ee=yi(S,C,D);C=ee<<3&224|bu(S,C)>>3,z[X+0]=248&ro(S,D)|ee>>5,z[X+1]=C}function Hi(S,C,D,z,X){var ee=240&bu(S,C)|15;z[X+0]=240&ro(S,D)|yi(S,C,D)>>4,z[X+1]=ee}function ud(S,C,D,z,X){z[X+0]=255,ff(S,C,D,z,X+1)}function Wl(S,C,D,z,X){cd(S,C,D,z,X),z[X+3]=255}function wu(S,C,D,z,X){ff(S,C,D,z,X),z[X+3]=255}function Da(S,C){return 0>S?0:S>C?C:S}function jo(S,C,D){k[S]=function(z,X,ee,re,le,fe,we,Fe,dt){for(var _e=Fe+(-2&dt)*D;Fe!=_e;)C(z[X+0],ee[re+0],le[fe+0],we,Fe),C(z[X+1],ee[re+0],le[fe+0],we,Fe+D),X+=2,++re,++fe,Fe+=2*D;1&dt&&C(z[X+0],ee[re+0],le[fe+0],we,Fe)}}function Gi(S,C,D){return D==0?S==0?C==0?6:5:C==0?4:0:D}function _u(S,C,D,z,X){switch(S>>>30){case 3:Nt(C,D,z,X,0);break;case 2:dr(C,D,z,X);break;case 1:Vt(C,D,z,X)}}function Yo(S,C){var D,z,X=C.M,ee=C.Nb,re=S.oc,le=S.pc+40,fe=S.oc,we=S.pc+584,Fe=S.oc,dt=S.pc+600;for(D=0;16>D;++D)re[le+32*D-1]=129;for(D=0;8>D;++D)fe[we+32*D-1]=129,Fe[dt+32*D-1]=129;for(0<X?re[le-1-32]=fe[we-1-32]=Fe[dt-1-32]=129:(a(re,le-32-1,127,21),a(fe,we-32-1,127,9),a(Fe,dt-32-1,127,9)),z=0;z<S.za;++z){var _e=C.ya[C.aa+z];if(0<z){for(D=-1;16>D;++D)n(re,le+32*D-4,re,le+32*D+12,4);for(D=-1;8>D;++D)n(fe,we+32*D-4,fe,we+32*D+4,4),n(Fe,dt+32*D-4,Fe,dt+32*D+4,4)}var He=S.Gd,et=S.Hd+z,Tt=_e.ad,ct=_e.Hc;if(0<X&&(n(re,le-32,He[et].y,0,16),n(fe,we-32,He[et].f,0,8),n(Fe,dt-32,He[et].ea,0,8)),_e.Za){var Rt=re,Ft=le-32+16;for(0<X&&(z>=S.za-1?a(Rt,Ft,He[et].y[15],4):n(Rt,Ft,He[et+1].y,0,4)),D=0;4>D;D++)Rt[Ft+128+D]=Rt[Ft+256+D]=Rt[Ft+384+D]=Rt[Ft+0+D];for(D=0;16>D;++D,ct<<=2)Rt=re,Ft=le+UM[D],Pc[_e.Ob[D]](Rt,Ft),_u(ct,Tt,16*+D,Rt,Ft)}else if(Rt=Gi(z,X,_e.Ob[0]),vf[Rt](re,le),ct!=0)for(D=0;16>D;++D,ct<<=2)_u(ct,Tt,16*+D,re,le+UM[D]);for(D=_e.Gc,Rt=Gi(z,X,_e.Dd),hd[Rt](fe,we),hd[Rt](Fe,dt),ct=Tt,Rt=fe,Ft=we,255&(_e=0|D)&&(170&_e?Yt(ct,256,Rt,Ft):Or(ct,256,Rt,Ft)),_e=Fe,ct=dt,255&(D>>=8)&&(170&D?Yt(Tt,320,_e,ct):Or(Tt,320,_e,ct)),X<S.Ub-1&&(n(He[et].y,0,re,le+480,16),n(He[et].f,0,fe,we+224,8),n(He[et].ea,0,Fe,dt+224,8)),D=8*ee*S.B,He=S.sa,et=S.ta+16*z+16*ee*S.R,Tt=S.qa,_e=S.ra+8*z+D,ct=S.Ha,Rt=S.Ia+8*z+D,D=0;16>D;++D)n(He,et+D*S.R,re,le+32*D,16);for(D=0;8>D;++D)n(Tt,_e+D*S.B,fe,we+32*D,8),n(ct,Rt+D*S.B,Fe,dt+32*D,8)}}function Ls(S,C,D,z,X,ee,re,le,fe){var we=[0],Fe=[0],dt=0,_e=fe!=null?fe.kd:0,He=fe??new Et;if(S==null||12>D)return 7;He.data=S,He.w=C,He.ha=D,C=[C],D=[D],He.gb=[He.gb];e:{var et=C,Tt=D,ct=He.gb;if(t(S!=null),t(Tt!=null),t(ct!=null),ct[0]=0,12<=Tt[0]&&!r(S,et[0],"RIFF")){if(r(S,et[0]+8,"WEBP")){ct=3;break e}var Rt=be(S,et[0]+4);if(12>Rt||4294967286<Rt){ct=3;break e}if(_e&&Rt>Tt[0]-8){ct=7;break e}ct[0]=Rt,et[0]+=12,Tt[0]-=12}ct=0}if(ct!=0)return ct;for(Rt=0<He.gb[0],D=D[0];;){e:{var Ft=S;Tt=C,ct=D;var ar=we,Jt=Fe,Zr=et=[0];if((Hr=dt=[dt])[0]=0,8>ct[0])ct=7;else{if(!r(Ft,Tt[0],"VP8X")){if(be(Ft,Tt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var $r=be(Ft,Tt[0]+8),qn=1+We(Ft,Tt[0]+12);if(2147483648<=qn*(Ft=1+We(Ft,Tt[0]+15))){ct=3;break e}Zr!=null&&(Zr[0]=$r),ar!=null&&(ar[0]=qn),Jt!=null&&(Jt[0]=Ft),Tt[0]+=18,ct[0]-=18,Hr[0]=1}ct=0}}if(dt=dt[0],et=et[0],ct!=0)return ct;if(Tt=!!(2&et),!Rt&&dt)return 3;if(ee!=null&&(ee[0]=!!(16&et)),re!=null&&(re[0]=Tt),le!=null&&(le[0]=0),re=we[0],et=Fe[0],dt&&Tt&&fe==null){ct=0;break}if(4>D){ct=7;break}if(Rt&&dt||!Rt&&!dt&&!r(S,C[0],"ALPH")){D=[D],He.na=[He.na],He.P=[He.P],He.Sa=[He.Sa];e:{$r=S,ct=C,Rt=D;var Hr=He.gb;ar=He.na,Jt=He.P,Zr=He.Sa,qn=22,t($r!=null),t(Rt!=null),Ft=ct[0];var aa=Rt[0];for(t(ar!=null),t(Zr!=null),ar[0]=null,Jt[0]=null,Zr[0]=0;;){if(ct[0]=Ft,Rt[0]=aa,8>aa){ct=7;break e}var io=be($r,Ft+4);if(4294967286<io){ct=3;break e}var Un=8+io+1&-2;if(qn+=Un,0<Hr&&qn>Hr){ct=3;break e}if(!r($r,Ft,"VP8 ")||!r($r,Ft,"VP8L")){ct=0;break e}if(aa[0]<Un){ct=7;break e}r($r,Ft,"ALPH")||(ar[0]=$r,Jt[0]=Ft+8,Zr[0]=io),Ft+=Un,aa-=Un}}if(D=D[0],He.na=He.na[0],He.P=He.P[0],He.Sa=He.Sa[0],ct!=0)break}D=[D],He.Ja=[He.Ja],He.xa=[He.xa];e:if(Hr=S,ct=C,Rt=D,ar=He.gb[0],Jt=He.Ja,Zr=He.xa,$r=ct[0],Ft=!r(Hr,$r,"VP8 "),qn=!r(Hr,$r,"VP8L"),t(Hr!=null),t(Rt!=null),t(Jt!=null),t(Zr!=null),8>Rt[0])ct=7;else{if(Ft||qn){if(Hr=be(Hr,$r+4),12<=ar&&Hr>ar-12){ct=3;break e}if(_e&&Hr>Rt[0]-8){ct=7;break e}Jt[0]=Hr,ct[0]+=8,Rt[0]-=8,Zr[0]=qn}else Zr[0]=5<=Rt[0]&&Hr[$r+0]==47&&!(Hr[$r+4]>>5),Jt[0]=Rt[0];ct=0}if(D=D[0],He.Ja=He.Ja[0],He.xa=He.xa[0],C=C[0],ct!=0)break;if(4294967286<He.Ja)return 3;if(le==null||Tt||(le[0]=He.xa?2:1),re=[re],et=[et],He.xa){if(5>D){ct=7;break}le=re,_e=et,Tt=ee,S==null||5>D?S=0:5<=D&&S[C+0]==47&&!(S[C+4]>>5)?(Rt=[0],Hr=[0],ar=[0],H(Jt=new U,S,C,D),ui(Jt,Rt,Hr,ar)?(le!=null&&(le[0]=Rt[0]),_e!=null&&(_e[0]=Hr[0]),Tt!=null&&(Tt[0]=ar[0]),S=1):S=0):S=0}else{if(10>D){ct=7;break}le=et,S==null||10>D||!Xt(S,C+3,D-3)?S=0:(_e=S[C+0]|S[C+1]<<8|S[C+2]<<16,Tt=16383&(S[C+7]<<8|S[C+6]),S=16383&(S[C+9]<<8|S[C+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=He.Ja||!Tt||!S?S=0:(re&&(re[0]=Tt),le&&(le[0]=S),S=1))}if(!S||(re=re[0],et=et[0],dt&&(we[0]!=re||Fe[0]!=et)))return 3;fe!=null&&(fe[0]=He,fe.offset=C-fe.w,t(4294967286>C-fe.w),t(fe.offset==fe.ha-D));break}return ct==0||ct==7&&dt&&fe==null?(ee!=null&&(ee[0]|=He.na!=null&&0<He.na.length),z!=null&&(z[0]=re),X!=null&&(X[0]=et),0):ct}function Jh(S,C,D){var z=C.width,X=C.height,ee=0,re=0,le=z,fe=X;if(C.Da=S!=null&&0<S.Da,C.Da&&(le=S.cd,fe=S.bd,ee=S.v,re=S.j,11>D||(ee&=-2,re&=-2),0>ee||0>re||0>=le||0>=fe||ee+le>z||re+fe>X))return 0;if(C.v=ee,C.j=re,C.va=ee+le,C.o=re+fe,C.U=le,C.T=fe,C.da=S!=null&&0<S.da,C.da){if(!Pt(le,fe,D=[S.ib],ee=[S.hb]))return 0;C.ib=D[0],C.hb=ee[0]}return C.ob=S!=null&&S.ob,C.Kb=S==null||!S.Sd,C.da&&(C.ob=C.ib<3*z/4&&C.hb<3*X/4,C.Kb=0),1}function hf(S){if(S==null)return 2;if(11>S.S){var C=S.f.RGBA;C.fb+=(S.height-1)*C.A,C.A=-C.A}else C=S.f.kb,S=S.height,C.O+=(S-1)*C.fa,C.fa=-C.fa,C.N+=(S-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(S-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(S-1)*C.lb,C.lb=-C.lb);return 0}function Hl(S,C,D,z){if(z==null||0>=S||0>=C)return 2;if(D!=null){if(D.Da){var X=D.cd,ee=D.bd,re=-2&D.v,le=-2&D.j;if(0>re||0>le||0>=X||0>=ee||re+X>S||le+ee>C)return 2;S=X,C=ee}if(D.da){if(!Pt(S,C,X=[D.ib],ee=[D.hb]))return 2;S=X[0],C=ee[0]}}z.width=S,z.height=C;e:{var fe=z.width,we=z.height;if(S=z.S,0>=fe||0>=we||!(S>=V1&&13>S))S=2;else{if(0>=z.Rd&&z.sd==null){re=ee=X=C=0;var Fe=(le=fe*VM[S])*we;if(11>S||(ee=(we+1)/2*(C=(fe+1)/2),S==12&&(re=(X=fe)*we)),(we=i(Fe+2*ee+re))==null){S=1;break e}z.sd=we,11>S?((fe=z.f.RGBA).eb=we,fe.fb=0,fe.A=le,fe.size=Fe):((fe=z.f.kb).y=we,fe.O=0,fe.fa=le,fe.Fd=Fe,fe.f=we,fe.N=0+Fe,fe.Ab=C,fe.Cd=ee,fe.ea=we,fe.W=0+Fe+ee,fe.Db=C,fe.Ed=ee,S==12&&(fe.F=we,fe.J=0+Fe+2*ee),fe.Tc=re,fe.lb=X)}if(C=1,X=z.S,ee=z.width,re=z.height,X>=V1&&13>X)if(11>X)S=z.f.RGBA,C&=(le=Math.abs(S.A))*(re-1)+ee<=S.size,C&=le>=ee*VM[X],C&=S.eb!=null;else{S=z.f.kb,le=(ee+1)/2,Fe=(re+1)/2,fe=Math.abs(S.fa),we=Math.abs(S.Ab);var dt=Math.abs(S.Db),_e=Math.abs(S.lb),He=_e*(re-1)+ee;C&=fe*(re-1)+ee<=S.Fd,C&=we*(Fe-1)+le<=S.Cd,C=(C&=dt*(Fe-1)+le<=S.Ed)&fe>=ee&we>=le&dt>=le,C&=S.y!=null,C&=S.f!=null,C&=S.ea!=null,X==12&&(C&=_e>=ee,C&=He<=S.Tc,C&=S.F!=null)}else C=0;S=C?0:2}}return S!=0||D!=null&&D.fd&&(S=hf(z)),S}var Nc=64,Mo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ri=24,No=32,Pi=8,sl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(S){return S},k.Predictor2=function(S,C,D){return C[D+0]},k.Predictor3=function(S,C,D){return C[D+1]},k.Predictor4=function(S,C,D){return C[D-1]},k.Predictor5=function(S,C,D){return ue(ue(S,C[D+1]),C[D+0])},k.Predictor6=function(S,C,D){return ue(S,C[D-1])},k.Predictor7=function(S,C,D){return ue(S,C[D+0])},k.Predictor8=function(S,C,D){return ue(C[D-1],C[D+0])},k.Predictor9=function(S,C,D){return ue(C[D+0],C[D+1])},k.Predictor10=function(S,C,D){return ue(ue(S,C[D-1]),ue(C[D+0],C[D+1]))},k.Predictor11=function(S,C,D){var z=C[D+0];return 0>=Wt(z>>24&255,S>>24&255,(C=C[D-1])>>24&255)+Wt(z>>16&255,S>>16&255,C>>16&255)+Wt(z>>8&255,S>>8&255,C>>8&255)+Wt(255&z,255&S,255&C)?z:S},k.Predictor12=function(S,C,D){var z=C[D+0];return(Ct((S>>24&255)+(z>>24&255)-((C=C[D-1])>>24&255))<<24|Ct((S>>16&255)+(z>>16&255)-(C>>16&255))<<16|Ct((S>>8&255)+(z>>8&255)-(C>>8&255))<<8|Ct((255&S)+(255&z)-(255&C)))>>>0},k.Predictor13=function(S,C,D){var z=C[D-1];return(At((S=ue(S,C[D+0]))>>24&255,z>>24&255)<<24|At(S>>16&255,z>>16&255)<<16|At(S>>8&255,z>>8&255)<<8|At(255&S,255&z))>>>0};var Qh=k.PredictorAdd0;k.PredictorAdd1=wt,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var Ro=k.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var fi,Up=k.ColorIndexInverseTransform,Gl=k.MapARGB,Kl=k.VP8LColorIndexInverseTransformAlpha,Zh=k.MapAlpha,mf=k.VP8LPredictorsAdd=[];mf.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var pf,dd,$s,ae,ke,Oe,rt,Nt,dr,Yt,Vt,Or,Nr,Pn,$a,ti,ca,Fa,Cc,no,ll,Ki,ao,Fs,Ac,Rx,ua,Xo,gf=i(511),fd=i(2041),q1=i(225),Lx=i(767),OM=0,zC=fd,U1=q1,cl=Lx,Yl=gf,V1=0,W1=1,TM=2,H1=3,G1=4,qC=5,IM=6,UC=7,VC=8,K1=9,WC=10,Zae=[2,3,7],eie=[3,3,11],DM=[280,256,256,256,40],tie=[0,1,1,1,0],rie=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nie=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],aie=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],iie=8,HC=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],GC=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],$x=null,oie=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sie=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],MM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],lie=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cie=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],uie=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],die=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vf=[],Pc=[],hd=[],fie=1,RM=2,xf=[],Xl=[];Jn("UpsampleRgbLinePair",ff,3),Jn("UpsampleBgrLinePair",cd,3),Jn("UpsampleRgbaLinePair",wu,4),Jn("UpsampleBgraLinePair",Wl,4),Jn("UpsampleArgbLinePair",ud,4),Jn("UpsampleRgba4444LinePair",Hi,2),Jn("UpsampleRgb565LinePair",Ia,2);var hie=k.UpsampleRgbLinePair,mie=k.UpsampleBgrLinePair,LM=k.UpsampleRgbaLinePair,$M=k.UpsampleBgraLinePair,FM=k.UpsampleArgbLinePair,BM=k.UpsampleRgba4444LinePair,pie=k.UpsampleRgb565LinePair,Y1=16,X1=1<<Y1-1,Fx=-227,KC=482,zM=6,gie=(256<<zM)-1,qM=0,vie=i(256),xie=i(256),yie=i(256),bie=i(256),wie=i(KC-Fx),_ie=i(KC-Fx);jo("YuvToRgbRow",ff,3),jo("YuvToBgrRow",cd,3),jo("YuvToRgbaRow",wu,4),jo("YuvToBgraRow",Wl,4),jo("YuvToArgbRow",ud,4),jo("YuvToRgba4444Row",Hi,2),jo("YuvToRgb565Row",Ia,2);var UM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],J1=[0,2,8],Sie=[8,7,6,4,4,2,2,2,1,1,1,1],jie=1;this.WebPDecodeRGBA=function(S,C,D,z,X){var ee=W1,re=new Ue,le=new lr;re.ba=le,le.S=ee,le.width=[le.width],le.height=[le.height];var fe=le.width,we=le.height,Fe=new rr;if(Fe==null||S==null)var dt=2;else t(Fe!=null),dt=Ls(S,C,D,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if(dt!=0?fe=0:(fe!=null&&(fe[0]=Fe.width[0]),we!=null&&(we[0]=Fe.height[0]),fe=1),fe){le.width=le.width[0],le.height=le.height[0],z!=null&&(z[0]=le.width),X!=null&&(X[0]=le.height);e:{if(z=new G,(X=new Et).data=S,X.w=C,X.ha=D,X.kd=1,C=[0],t(X!=null),((S=Ls(X.data,X.w,X.ha,null,null,null,C,null,X))==0||S==7)&&C[0]&&(S=4),(C=S)==0){if(t(re!=null),z.data=X.data,z.w=X.w+X.offset,z.ha=X.ha-X.offset,z.put=qr,z.ac=hr,z.bc=ya,z.ma=re,X.xa){if((S=xt())==null){re=1;break e}if(function(_e,He){var et=[0],Tt=[0],ct=[0];t:for(;;){if(_e==null)return 0;if(He==null)return _e.a=2,0;if(_e.l=He,_e.a=0,H(_e.m,He.data,He.w,He.ha),!ui(_e.m,et,Tt,ct)){_e.a=3;break t}if(_e.xb=RM,He.width=et[0],He.height=Tt[0],!yt(et[0],Tt[0],1,_e,null))break t;return 1}return t(_e.a!=0),0}(S,z)){if(z=(C=Hl(z.width,z.height,re.Oa,re.ba))==0){t:{z=S;r:for(;;){if(z==null){z=0;break t}if(t(z.s.yc!=null),t(z.s.Ya!=null),t(0<z.s.Wb),t((D=z.l)!=null),t((X=D.ma)!=null),z.xb!=0){if(z.ca=X.ba,z.tb=X.tb,t(z.ca!=null),!Jh(X.Oa,D,H1)){z.a=2;break r}if(!ot(z,D.width)||D.da)break r;if((D.da||Xe(z.ca.S))&&Ai(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Ai()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!ne(z.s.vb,z.s.Wa.Xa)){z.a=1;break r}z.xb=0}if(!de(z,z.V,z.Ba,z.c,z.i,D.o,ei))break r;X.Dc=z.Ma,z=1;break t}t(z.a!=0),z=0}z=!z}z&&(C=S.a)}else C=S.a}else{if((S=new Te)==null){re=1;break e}if(S.Fa=X.na,S.P=X.P,S.qc=X.Sa,It(S,z)){if((C=Hl(z.width,z.height,re.Oa,re.ba))==0){if(S.Aa=0,D=re.Oa,t((X=S)!=null),D!=null){if(0<(fe=0>(fe=D.Md)?0:100<fe?255:255*fe/100)){for(we=Fe=0;4>we;++we)12>(dt=X.pb[we]).lc&&(dt.ia=fe*Sie[0>dt.lc?0:dt.lc]>>3),Fe|=dt.ia;Fe&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=D.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}(function(_e,He){if(_e==null)return 0;if(He==null)return Je(_e,2,"NULL VP8Io parameter in VP8Decode().");if(!_e.cb&&!It(_e,He))return 0;if(t(_e.cb),He.ac==null||He.ac(He)){He.ob&&(_e.L=0);var et=J1[_e.L];if(_e.L==2?(_e.yb=0,_e.zb=0):(_e.yb=He.v-et>>4,_e.zb=He.j-et>>4,0>_e.yb&&(_e.yb=0),0>_e.zb&&(_e.zb=0)),_e.Va=He.o+15+et>>4,_e.Hb=He.va+15+et>>4,_e.Hb>_e.za&&(_e.Hb=_e.za),_e.Va>_e.Ub&&(_e.Va=_e.Ub),0<_e.L){var Tt=_e.ed;for(et=0;4>et;++et){var ct;if(_e.Qa.Cb){var Rt=_e.Qa.Lb[et];_e.Qa.Fb||(Rt+=Tt.Tb)}else Rt=Tt.Tb;for(ct=0;1>=ct;++ct){var Ft=_e.gd[et][ct],ar=Rt;if(Tt.Pc&&(ar+=Tt.vd[0],ct&&(ar+=Tt.od[0])),0<(ar=0>ar?0:63<ar?63:ar)){var Jt=ar;0<Tt.wb&&(Jt=4<Tt.wb?Jt>>2:Jt>>1)>9-Tt.wb&&(Jt=9-Tt.wb),1>Jt&&(Jt=1),Ft.dd=Jt,Ft.tc=2*ar+Jt,Ft.ld=40<=ar?2:15<=ar?1:0}else Ft.tc=0;Ft.La=ct}}}et=0}else Je(_e,6,"Frame setup failed"),et=_e.a;if(et=et==0){if(et){_e.$c=0,0<_e.Aa||(_e.Ic=jie);t:{et=_e.Ic,Tt=4*(Jt=_e.za);var Zr=32*Jt,$r=Jt+1,qn=0<_e.L?Jt*(0<_e.Aa?2:1):0,Hr=(_e.Aa==2?2:1)*Jt;if((Ft=Tt+832+(ct=3*(16*et+J1[_e.L])/2*Zr)+(Rt=_e.Fa!=null&&0<_e.Fa.length?_e.Kc.c*_e.Kc.i:0))!=Ft)et=0;else{if(Ft>_e.Vb){if(_e.Vb=0,_e.Ec=i(Ft),_e.Fc=0,_e.Ec==null){et=Je(_e,1,"no memory during frame initialization.");break t}_e.Vb=Ft}Ft=_e.Ec,ar=_e.Fc,_e.Ac=Ft,_e.Bc=ar,ar+=Tt,_e.Gd=s(Zr,ja),_e.Hd=0,_e.rb=s($r+1,yn),_e.sb=1,_e.wa=qn?s(qn,Nn):null,_e.Y=0,_e.D.Nb=0,_e.D.wa=_e.wa,_e.D.Y=_e.Y,0<_e.Aa&&(_e.D.Y+=Jt),t(!0),_e.oc=Ft,_e.pc=ar,ar+=832,_e.ya=s(Hr,Mn),_e.aa=0,_e.D.ya=_e.ya,_e.D.aa=_e.aa,_e.Aa==2&&(_e.D.aa+=Jt),_e.R=16*Jt,_e.B=8*Jt,Jt=(Zr=J1[_e.L])*_e.R,Zr=Zr/2*_e.B,_e.sa=Ft,_e.ta=ar+Jt,_e.qa=_e.sa,_e.ra=_e.ta+16*et*_e.R+Zr,_e.Ha=_e.qa,_e.Ia=_e.ra+8*et*_e.B+Zr,_e.$c=0,ar+=ct,_e.mb=Rt?Ft:null,_e.nb=Rt?ar:null,t(ar+Rt<=_e.Fc+_e.Vb),cr(_e),a(_e.Ac,_e.Bc,0,Tt),et=1}}if(et){if(He.ka=0,He.y=_e.sa,He.O=_e.ta,He.f=_e.qa,He.N=_e.ra,He.ea=_e.Ha,He.Vd=_e.Ia,He.fa=_e.R,He.Rc=_e.B,He.F=null,He.J=0,!OM){for(et=-255;255>=et;++et)gf[255+et]=0>et?-et:et;for(et=-1020;1020>=et;++et)fd[1020+et]=-128>et?-128:127<et?127:et;for(et=-112;112>=et;++et)q1[112+et]=-16>et?-16:15<et?15:et;for(et=-255;510>=et;++et)Lx[255+et]=0>et?0:255<et?255:et;OM=1}rt=Jr,Nt=Xr,Yt=Vr,Vt=rn,Or=na,dr=Bt,Nr=va,Pn=So,$a=T,ti=q,ca=Ci,Fa=fs,Cc=ge,no=Pe,ll=fr,Ki=er,ao=Tr,Fs=zr,Pc[0]=wn,Pc[1]=Br,Pc[2]=pr,Pc[3]=kr,Pc[4]=Wr,Pc[5]=_n,Pc[6]=Mr,Pc[7]=xe,Pc[8]=Ie,Pc[9]=je,vf[0]=Me,vf[1]=ie,vf[2]=pe,vf[3]=Be,vf[4]=lt,vf[5]=tt,vf[6]=tr,hd[0]=Q,hd[1]=jr,hd[2]=De,hd[3]=Re,hd[4]=Ke,hd[5]=Ce,hd[6]=Ze,et=1}else et=0}et&&(et=function(aa,io){for(aa.M=0;aa.M<aa.Va;++aa.M){var Un,Gr=aa.Jc[aa.M&aa.Xb],br=aa.m,Li=aa;for(Un=0;Un<Li.za;++Un){var Tn=br,da=Li,ri=da.Ac,Lo=da.Bc+4*Un,ms=da.zc,Ei=da.ya[da.aa+Un];if(da.Qa.Bb?Ei.$b=me(Tn,da.Pa.jb[0])?2+me(Tn,da.Pa.jb[2]):me(Tn,da.Pa.jb[1]):Ei.$b=0,da.kc&&(Ei.Ad=me(Tn,da.Bd)),Ei.Za=!me(Tn,145)+0,Ei.Za){var Jo=Ei.Ob,ps=0;for(da=0;4>da;++da){var oo,ha=ms[0+da];for(oo=0;4>oo;++oo){ha=cie[ri[Lo+oo]][ha];for(var Ca=MM[me(Tn,ha[0])];0<Ca;)Ca=MM[2*Ca+me(Tn,ha[Ca])];ha=-Ca,ri[Lo+oo]=ha}n(Jo,ps,ri,Lo,4),ps+=4,ms[0+da]=ha}}else ha=me(Tn,156)?me(Tn,128)?1:3:me(Tn,163)?2:0,Ei.Ob[0]=ha,a(ri,Lo,ha,4),a(ms,0,ha,4);Ei.Dd=me(Tn,142)?me(Tn,114)?me(Tn,183)?1:3:2:0}if(Li.m.Ka)return Je(aa,7,"Premature end-of-partition0 encountered.");for(;aa.ja<aa.za;++aa.ja){if(Li=Gr,Tn=(br=aa).rb[br.sb-1],ri=br.rb[br.sb+br.ja],Un=br.ya[br.aa+br.ja],Lo=br.kc?Un.Ad:0)Tn.la=ri.la=0,Un.Za||(Tn.Na=ri.Na=0),Un.Hc=0,Un.Gc=0,Un.ia=0;else{var ki,Aa;if(Tn=ri,ri=Li,Lo=br.Pa.Xc,ms=br.ya[br.aa+br.ja],Ei=br.pb[ms.$b],da=ms.ad,Jo=0,ps=br.rb[br.sb-1],ha=oo=0,a(da,Jo,0,384),ms.Za)var $o=0,Ec=Lo[3];else{Ca=i(16);var $i=Tn.Na+ps.Na;if($i=$x(ri,Lo[1],$i,Ei.Eb,0,Ca,0),Tn.Na=ps.Na=(0<$i)+0,1<$i)rt(Ca,0,da,Jo);else{var Bs=Ca[0]+3>>3;for(Ca=0;256>Ca;Ca+=16)da[Jo+Ca]=Bs}$o=1,Ec=Lo[0]}var Ba=15&Tn.la,so=15&ps.la;for(Ca=0;4>Ca;++Ca){var ul=1&so;for(Bs=Aa=0;4>Bs;++Bs)Ba=Ba>>1|(ul=($i=$x(ri,Ec,$i=ul+(1&Ba),Ei.Sc,$o,da,Jo))>$o)<<7,Aa=Aa<<2|(3<$i?3:1<$i?2:da[Jo+0]!=0),Jo+=16;Ba>>=4,so=so>>1|ul<<7,oo=(oo<<8|Aa)>>>0}for(Ec=Ba,$o=so>>4,ki=0;4>ki;ki+=2){for(Aa=0,Ba=Tn.la>>4+ki,so=ps.la>>4+ki,Ca=0;2>Ca;++Ca){for(ul=1&so,Bs=0;2>Bs;++Bs)$i=ul+(1&Ba),Ba=Ba>>1|(ul=0<($i=$x(ri,Lo[2],$i,Ei.Qc,0,da,Jo)))<<3,Aa=Aa<<2|(3<$i?3:1<$i?2:da[Jo+0]!=0),Jo+=16;Ba>>=2,so=so>>1|ul<<5}ha|=Aa<<4*ki,Ec|=Ba<<4<<ki,$o|=(240&so)<<ki}Tn.la=Ec,ps.la=$o,ms.Hc=oo,ms.Gc=ha,ms.ia=43690&ha?0:Ei.ia,Lo=!(oo|ha)}if(0<br.L&&(br.wa[br.Y+br.ja]=br.gd[Un.$b][Un.Za],br.wa[br.Y+br.ja].La|=!Lo),Li.Ka)return Je(aa,7,"Premature end-of-file encountered.")}if(cr(aa),br=io,Li=1,Un=(Gr=aa).D,Tn=0<Gr.L&&Gr.M>=Gr.zb&&Gr.M<=Gr.Va,Gr.Aa==0)t:{if(Un.M=Gr.M,Un.uc=Tn,Yo(Gr,Un),Li=1,Un=(Aa=Gr.D).Nb,Tn=(ha=J1[Gr.L])*Gr.R,ri=ha/2*Gr.B,Ca=16*Un*Gr.R,Bs=8*Un*Gr.B,Lo=Gr.sa,ms=Gr.ta-Tn+Ca,Ei=Gr.qa,da=Gr.ra-ri+Bs,Jo=Gr.Ha,ps=Gr.Ia-ri+Bs,so=(Ba=Aa.M)==0,oo=Ba>=Gr.Va-1,Gr.Aa==2&&Yo(Gr,Aa),Aa.uc)for(ul=($i=Gr).D.M,t($i.D.uc),Aa=$i.yb;Aa<$i.Hb;++Aa){$o=Aa,Ec=ul;var gs=(dl=(Fo=$i).D).Nb;ki=Fo.R;var dl=dl.wa[dl.Y+$o],fl=Fo.sa,zs=Fo.ta+16*gs*ki+16*$o,hl=dl.dd,Wa=dl.tc;if(Wa!=0)if(t(3<=Wa),Fo.L==1)0<$o&&Ki(fl,zs,ki,Wa+4),dl.La&&Fs(fl,zs,ki,Wa),0<Ec&&ll(fl,zs,ki,Wa+4),dl.La&&ao(fl,zs,ki,Wa);else{var ml=Fo.B,kc=Fo.qa,em=Fo.ra+8*gs*ml+8*$o,md=Fo.Ha,Fo=Fo.Ia+8*gs*ml+8*$o;gs=dl.ld,0<$o&&(Pn(fl,zs,ki,Wa+4,hl,gs),ti(kc,em,md,Fo,ml,Wa+4,hl,gs)),dl.La&&(Fa(fl,zs,ki,Wa,hl,gs),no(kc,em,md,Fo,ml,Wa,hl,gs)),0<Ec&&(Nr(fl,zs,ki,Wa+4,hl,gs),$a(kc,em,md,Fo,ml,Wa+4,hl,gs)),dl.La&&(ca(fl,zs,ki,Wa,hl,gs),Cc(kc,em,md,Fo,ml,Wa,hl,gs))}}if(Gr.ia&&alert("todo:DitherRow"),br.put!=null){if(Aa=16*Ba,Ba=16*(Ba+1),so?(br.y=Gr.sa,br.O=Gr.ta+Ca,br.f=Gr.qa,br.N=Gr.ra+Bs,br.ea=Gr.Ha,br.W=Gr.Ia+Bs):(Aa-=ha,br.y=Lo,br.O=ms,br.f=Ei,br.N=da,br.ea=Jo,br.W=ps),oo||(Ba-=ha),Ba>br.o&&(Ba=br.o),br.F=null,br.J=null,Gr.Fa!=null&&0<Gr.Fa.length&&Aa<Ba&&(br.J=Ln(Gr,br,Aa,Ba-Aa),br.F=Gr.mb,br.F==null&&br.F.length==0)){Li=Je(Gr,3,"Could not decode alpha data.");break t}Aa<br.j&&(ha=br.j-Aa,Aa=br.j,t(!(1&ha)),br.O+=Gr.R*ha,br.N+=Gr.B*(ha>>1),br.W+=Gr.B*(ha>>1),br.F!=null&&(br.J+=br.width*ha)),Aa<Ba&&(br.O+=br.v,br.N+=br.v>>1,br.W+=br.v>>1,br.F!=null&&(br.J+=br.v),br.ka=Aa-br.j,br.U=br.va-br.v,br.T=Ba-Aa,Li=br.put(br))}Un+1!=Gr.Ic||oo||(n(Gr.sa,Gr.ta-Tn,Lo,ms+16*Gr.R,Tn),n(Gr.qa,Gr.ra-ri,Ei,da+8*Gr.B,ri),n(Gr.Ha,Gr.Ia-ri,Jo,ps+8*Gr.B,ri))}if(!Li)return Je(aa,6,"Output aborted.")}return 1}(_e,He)),He.bc!=null&&He.bc(He),et&=1}return et?(_e.cb=0,et):0})(S,z)||(C=S.a)}}else C=S.a}C==0&&re.Oa!=null&&re.Oa.fd&&(C=hf(re.ba))}re=C}ee=re!=0?null:11>ee?le.f.RGBA.eb:le.f.kb.y}else ee=null;return ee};var VM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,M){for(var E="",I=0;I<4;I++)E+=String.fromCharCode(k[M++]);return E}function d(k,M){return k[M+0]|k[M+1]<<8}function f(k,M){return(k[M+0]|k[M+1]<<8|k[M+2]<<16)>>>0}function h(k,M){return(k[M+0]|k[M+1]<<8|k[M+2]<<16|k[M+3]<<24)>>>0}new c;var m=[0],g=[0],p=[],x=new c,y=e,b=function(k,M){var E={},I=0,O=!1,R=0,B=0;if(E.frames=[],!function(L,U){for(var J=0;J<4;J++)if(L[U+J]!="RIFF".charCodeAt(J))return!0;return!1}(k,M)){for(h(k,M+=4),M+=8;M<k.length;){var W=u(k,M),F=h(k,M+=4);M+=4;var $=F+(1&F);switch(W){case"VP8 ":case"VP8L":E.frames[I]===void 0&&(E.frames[I]={}),(oe=E.frames[I]).src_off=O?B:M-8,oe.src_size=R+F+8,I++,O&&(O=!1,R=0,B=0);break;case"VP8X":(oe=E.header={}).feature_flags=k[M];var H=M+4;oe.canvas_width=1+f(k,H),H+=3,oe.canvas_height=1+f(k,H),H+=3;break;case"ALPH":O=!0,R=$+8,B=M-8;break;case"ANIM":(oe=E.header).bgcolor=h(k,M),H=M+4,oe.loop_count=d(k,H),H+=2;break;case"ANMF":var ce,oe;(oe=E.frames[I]={}).offset_x=2*f(k,M),M+=3,oe.offset_y=2*f(k,M),M+=3,oe.width=1+f(k,M),M+=3,oe.height=1+f(k,M),M+=3,oe.duration=f(k,M),M+=3,ce=k[M++],oe.dispose=1&ce,oe.blend=ce>>1&1}W!="ANMF"&&(M+=$)}return E}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var w=b.header?b.header:null,_=b.frames?b.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],g=[w.canvas_width];for(var j=0;j<_.length&&_[j].blend!=0;j++);}var N=_[0],P=x.WebPDecodeRGBA(y,N.src_off,N.src_size,g,m);N.rgba=P,N.imgwidth=g[0],N.imgheight=m[0];for(var A=0;A<g[0]*m[0]*4;A++)p[A]=P[A];return this.width=g,this.height=m,this.data=p,this}(function(e){var t,r,n,a,i,s,l,c,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new s,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new s,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=L;Object.defineProperty(this,"pdf",{get:function(){return U}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(be){J=!!be}});var V=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return V},set:function(be){V=!!be}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(be){isNaN(be)||(Z=be)}});var K=0;Object.defineProperty(this,"posY",{get:function(){return K},set:function(be){isNaN(be)||(K=be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(be){var ne;typeof be=="number"?ne=[be,be,be,be]:((ne=new Array(4))[0]=be[0],ne[1]=be.length>=2?be[1]:ne[0],ne[2]=be.length>=3?be[2]:ne[0],ne[3]=be.length>=4?be[3]:ne[1]),u.margin=ne}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(be){he=be}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(be){te=be}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(be){me=be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(be){be instanceof d&&(u=be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(be){u.path=be}});var Ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ee},set:function(be){Ee=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ne;ne=h(be),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ne=h(be);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Se=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(be){Se=null,We=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ne;if(this.ctx.font=be,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var Qt=ne[1];ne[2];var bt=ne[3],Pt=ne[4];ne[5];var Qe=ne[6],ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pt)[2];Pt=Math.floor(ft==="px"?parseFloat(Pt)*this.pdf.internal.scaleFactor:ft==="em"?parseFloat(Pt)*this.pdf.getFontSize():parseFloat(Pt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pt);var mt=function(Ot){var Y,ve,Ve=[],$e=Ot.trim();if($e==="")return IP;if($e in s9)return[s9[$e]];for(;$e!=="";){switch(ve=null,Y=($e=c9($e)).charAt(0)){case'"':case"'":ve=int($e.substring(1),Y);break;default:ve=ont($e)}if(ve===null||(Ve.push(ve[0]),($e=c9(ve[1]))!==""&&$e.charAt(0)!==","))return IP;$e=$e.replace(/^,/,"")}return Ve}(Qe);if(this.fontFaces){var _t=function(Ot,Y){if(Se===null){var ve=function(Ve){var $e=[];return Object.keys(Ve).forEach(function(Le){Ve[Le].forEach(function(it){var Ye=null;switch(it){case"bold":Ye={family:Le,weight:"bold"};break;case"italic":Ye={family:Le,style:"italic"};break;case"bolditalic":Ye={family:Le,weight:"bold",style:"italic"};break;case"":case"normal":Ye={family:Le}}Ye!==null&&(Ye.ref={name:Le,style:it},$e.push(Ye))})}),$e}(Ot.getFontList());Se=function(Ve){for(var $e={},Le=0;Le<Ve.length;++Le){var it=TP(Ve[Le]),Ye=it.family,Ge=it.stretch,Xe=it.style,ht=it.weight;$e[Ye]=$e[Ye]||{},$e[Ye][Ge]=$e[Ye][Ge]||{},$e[Ye][Ge][Xe]=$e[Ye][Ge][Xe]||{},$e[Ye][Ge][Xe][ht]=it}return $e}(ve.concat(Y))}return Se}(this.pdf,this.fontFaces),ue=mt.map(function(Ot){return{family:Ot,stretch:"normal",weight:bt,style:Qt}}),Ct=function(Ot,Y,ve){for(var Ve=(ve=ve||{}).defaultFontFamily||"times",$e=Object.assign({},ant,ve.genericFontFamilies||{}),Le=null,it=null,Ye=0;Ye<Y.length;++Ye)if($e[(Le=TP(Y[Ye])).family]&&(Le.family=$e[Le.family]),Ot.hasOwnProperty(Le.family)){it=Ot[Le.family];break}if(!(it=it||Ot[Ve]))throw new Error("Could not find a font-family for the rule '"+l9(Le)+"' and default family '"+Ve+"'.");if(it=function(Ge,Xe){if(Xe[Ge])return Xe[Ge];var ht=WT[Ge],st=ht<=WT.normal?-1:1,lr=o9(Xe,iae,ht,st);if(!lr)throw new Error("Could not find a matching font-stretch value for "+Ge);return lr}(Le.stretch,it),it=function(Ge,Xe){if(Xe[Ge])return Xe[Ge];for(var ht=aae[Ge],st=0;st<ht.length;++st)if(Xe[ht[st]])return Xe[ht[st]];throw new Error("Could not find a matching font-style for "+Ge)}(Le.style,it),!(it=function(Ge,Xe){if(Xe[Ge])return Xe[Ge];if(Ge===400&&Xe[500])return Xe[500];if(Ge===500&&Xe[400])return Xe[400];var ht=nnt[Ge],st=o9(Xe,oae,ht,Ge<400?-1:1);if(!st)throw new Error("Could not find a matching font-weight for value "+Ge);return st}(Le.weight,it)))throw new Error("Failed to resolve a font for the rule '"+l9(Le)+"'.");return it}(_t,ue);this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var At="";(bt==="bold"||parseInt(bt,10)>=700||Qt==="bold")&&(At="bold"),Qt==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Wt="",wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ae=0;Ae<mt.length;Ae++){if(this.pdf.internal.getFont(mt[Ae],At,{noFallback:!0,disableWarning:!0})!==void 0){Wt=mt[Ae];break}if(At==="bolditalic"&&this.pdf.internal.getFont(mt[Ae],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=mt[Ae],At="bold";else if(this.pdf.internal.getFont(mt[Ae],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=mt[Ae],At="normal";break}}if(Wt===""){for(var qe=0;qe<mt.length;qe++)if(wt[mt[qe]]){Wt=wt[mt[qe]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,U){if(isNaN(L)||isNaN(U))throw za.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new s(L,U));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(L,U)},f.prototype.closePath=function(){var L=new s(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&ra(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){L=new s(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(L.x,L.y)},f.prototype.lineTo=function(L,U){if(isNaN(L)||isNaN(U))throw za.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new s(L,U));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,U,J,V){if(isNaN(J)||isNaN(V)||isNaN(L)||isNaN(U))throw za.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new s(J,V)),K=this.ctx.transform.applyToPoint(new s(L,U));this.path.push({type:"qct",x1:K.x,y1:K.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(Z.x,Z.y)},f.prototype.bezierCurveTo=function(L,U,J,V,Z,K){if(isNaN(Z)||isNaN(K)||isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V))throw za.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new s(Z,K)),te=this.ctx.transform.applyToPoint(new s(L,U)),me=this.ctx.transform.applyToPoint(new s(J,V));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:me.x,y2:me.y,x:he.x,y:he.y}),this.ctx.lastPoint=new s(he.x,he.y)},f.prototype.arc=function(L,U,J,V,Z,K){if(isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V)||isNaN(Z))throw za.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(K=!!K,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new s(L,U));L=he.x,U=he.y;var te=this.ctx.transform.applyToPoint(new s(0,J)),me=this.ctx.transform.applyToPoint(new s(0,0));J=Math.sqrt(Math.pow(te.x-me.x,2)+Math.pow(te.y-me.y,2))}Math.abs(Z-V)>=2*Math.PI&&(V=0,Z=2*Math.PI),this.path.push({type:"arc",x:L,y:U,radius:J,startAngle:V,endAngle:Z,counterclockwise:K})},f.prototype.arcTo=function(L,U,J,V,Z){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,U,J,V){if(isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V))throw za.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,U),this.lineTo(L+J,U),this.lineTo(L+J,U+V),this.lineTo(L,U+V),this.lineTo(L,U),this.lineTo(L+J,U),this.lineTo(L,U)},f.prototype.fillRect=function(L,U,J,V){if(isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V))throw za.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,U,J,V),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},f.prototype.strokeRect=function(L,U,J,V){if(isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V))throw za.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,U,J,V),this.stroke())},f.prototype.clearRect=function(L,U,J,V){if(isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V))throw za.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,U,J,V))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var V=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=V}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(U),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var U,J,V,Z;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))U=0,J=0,V=0,Z=0;else{var K=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(K!==null)U=parseInt(K[1]),J=parseInt(K[2]),V=parseInt(K[3]),Z=1;else if((K=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)U=parseInt(K[1]),J=parseInt(K[2]),V=parseInt(K[3]),Z=parseFloat(K[4]);else{if(Z=1,typeof L=="string"&&L.charAt(0)!=="#"){var he=new Jne(L);L=he.ok?he.toHex():"#000000"}L.length===4?(U=L.substring(1,2),U+=U,J=L.substring(2,3),J+=J,V=L.substring(3,4),V+=V):(U=L.substring(1,3),J=L.substring(3,5),V=L.substring(5,7)),U=parseInt(U,16),J=parseInt(J,16),V=parseInt(V,16)}}return{r:U,g:J,b:V,a:Z,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,U,J,V){if(isNaN(U)||isNaN(J)||typeof L!="string")throw za.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(V=isNaN(V)?void 0:V,!m.call(this)){var Z=$(this.ctx.transform.rotation),K=this.ctx.transform.scaleX;I.call(this,{text:L,x:U,y:J,scale:K,angle:Z,align:this.textAlign,maxWidth:V})}},f.prototype.strokeText=function(L,U,J,V){if(isNaN(U)||isNaN(J)||typeof L!="string")throw za.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){V=isNaN(V)?void 0:V;var Z=$(this.ctx.transform.rotation),K=this.ctx.transform.scaleX;I.call(this,{text:L,x:U,y:J,scale:K,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:V})}},f.prototype.measureText=function(L){if(typeof L!="string")throw za.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,J=this.pdf.internal.scaleFactor,V=U.internal.getFontSize(),Z=U.getStringUnitWidth(L)*V/U.internal.scaleFactor;return new function(K){var he=(K=K||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:Z*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(L,U){if(isNaN(L)||isNaN(U))throw za.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(L,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(L){if(isNaN(L))throw za.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.translate=function(L,U){if(isNaN(L)||isNaN(U))throw za.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,L,U);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(L,U,J,V,Z,K){if(isNaN(L)||isNaN(U)||isNaN(J)||isNaN(V)||isNaN(Z)||isNaN(K))throw za.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new c(L,U,J,V,Z,K);this.ctx.transform=this.ctx.transform.multiply(he)},f.prototype.setTransform=function(L,U,J,V,Z,K){L=isNaN(L)?1:L,U=isNaN(U)?0:U,J=isNaN(J)?0:J,V=isNaN(V)?1:V,Z=isNaN(Z)?0:Z,K=isNaN(K)?0:K,this.ctx.transform=new c(L,U,J,V,Z,K)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,U,J,V,Z,K,he,te,me){var Ee=this.pdf.getImageProperties(L),Se=1,We=1,be=1,ne=1;V!==void 0&&te!==void 0&&(be=te/V,ne=me/Z,Se=Ee.width/V*te/V,We=Ee.height/Z*me/Z),K===void 0&&(K=U,he=J,U=0,J=0),V!==void 0&&te===void 0&&(te=V,me=Z),V===void 0&&te===void 0&&(te=Ee.width,me=Ee.height);for(var Qt,bt=this.ctx.transform.decompose(),Pt=$(bt.rotate.shx),Qe=new c,ft=(Qe=(Qe=(Qe=Qe.multiply(bt.translate)).multiply(bt.skew)).multiply(bt.scale)).applyToRectangle(new l(K-U*be,he-J*ne,V*Se,Z*We)),mt=x.call(this,ft),_t=[],ue=0;ue<mt.length;ue+=1)_t.indexOf(mt[ue])===-1&&_t.push(mt[ue]);if(w(_t),this.autoPaging)for(var Ct=_t[0],At=_t[_t.length-1],Wt=Ct;Wt<At+1;Wt++){this.pdf.setPage(Wt);var wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=Wt===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Y=Wt===1?0:qe+(Wt-2)*Ot;if(this.ctx.clip_path.length!==0){var ve=this.path;Qt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Qt,this.posX+this.margin[3],-Y+Ae+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=ve}var Ve=JSON.parse(JSON.stringify(ft));Ve=b([Ve],this.posX+this.margin[3],-Y+Ae+this.ctx.prevPageLastElemOffset)[0];var $e=(Wt>Ct||Wt<At)&&p.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Ot,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,Pt),$e&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,Pt)};var x=function(L,U,J){var V=[];U=U||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":V.push(Math.floor((L.y+Z)/J)+1);break;case"arc":V.push(Math.floor((L.y+Z-L.radius)/J)+1),V.push(Math.floor((L.y+Z+L.radius)/J)+1);break;case"qct":var K=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);V.push(Math.floor((K.y+Z)/J)+1),V.push(Math.floor((K.y+K.h+Z)/J)+1);break;case"bct":var he=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);V.push(Math.floor((he.y+Z)/J)+1),V.push(Math.floor((he.y+he.h+Z)/J)+1);break;case"rect":V.push(Math.floor((L.y+Z)/J)+1),V.push(Math.floor((L.y+L.h+Z)/J)+1)}for(var te=0;te<V.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<V[te];)y.call(this);return V},y=function(){var L=this.fillStyle,U=this.strokeStyle,J=this.font,V=this.lineCap,Z=this.lineWidth,K=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=U,this.font=J,this.lineCap=V,this.lineWidth=Z,this.lineJoin=K},b=function(L,U,J){for(var V=0;V<L.length;V++)switch(L[V].type){case"bct":L[V].x2+=U,L[V].y2+=J;case"qct":L[V].x1+=U,L[V].y1+=J;default:L[V].x+=U,L[V].y+=J}return L},w=function(L){return L.sort(function(U,J){return U-J})},_=function(L,U){for(var J,V,Z=this.fillStyle,K=this.strokeStyle,he=this.lineCap,te=this.lineWidth,me=Math.abs(te*this.ctx.transform.scaleX),Ee=this.lineJoin,Se=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),be=[],ne=0;ne<We.length;ne++)if(We[ne].x!==void 0)for(var Qt=x.call(this,We[ne]),bt=0;bt<Qt.length;bt+=1)be.indexOf(Qt[bt])===-1&&be.push(Qt[bt]);for(var Pt=0;Pt<be.length;Pt++)for(;this.pdf.internal.getNumberOfPages()<be[Pt];)y.call(this);if(w(be),this.autoPaging)for(var Qe=be[0],ft=be[be.length-1],mt=Qe;mt<ft+1;mt++){this.pdf.setPage(mt),this.fillStyle=Z,this.strokeStyle=K,this.lineCap=he,this.lineWidth=me,this.lineJoin=Ee;var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ue=mt===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=mt===1?0:Ct+(mt-2)*At;if(this.ctx.clip_path.length!==0){var wt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(J,this.posX+this.margin[3],-Wt+ue+this.ctx.prevPageLastElemOffset),j.call(this,L,!0),this.path=wt}if(V=JSON.parse(JSON.stringify(Se)),this.path=b(V,this.posX+this.margin[3],-Wt+ue+this.ctx.prevPageLastElemOffset),U===!1||mt===0){var Ae=(mt>Qe||mt<ft)&&p.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,At,null).clip().discardPath()),j.call(this,L,U),Ae&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=me,j.call(this,L,U),this.lineWidth=te;this.path=Se},j=function(L,U){if((L!=="stroke"||U||!g.call(this))&&(L==="stroke"||U||!m.call(this))){for(var J,V,Z=[],K=this.path,he=0;he<K.length;he++){var te=K[he];switch(te.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:te,deltas:[],abs:[]});break;case"lt":var me=Z.length;if(K[he-1]&&!isNaN(K[he-1].x)&&(J=[te.x-K[he-1].x,te.y-K[he-1].y],me>0)){for(;me>=0;me--)if(Z[me-1].close!==!0&&Z[me-1].begin!==!0){Z[me-1].deltas.push(J),Z[me-1].abs.push(te);break}}break;case"bct":J=[te.x1-K[he-1].x,te.y1-K[he-1].y,te.x2-K[he-1].x,te.y2-K[he-1].y,te.x-K[he-1].x,te.y-K[he-1].y],Z[Z.length-1].deltas.push(J);break;case"qct":var Ee=K[he-1].x+2/3*(te.x1-K[he-1].x),Se=K[he-1].y+2/3*(te.y1-K[he-1].y),We=te.x+2/3*(te.x1-te.x),be=te.y+2/3*(te.y1-te.y),ne=te.x,Qt=te.y;J=[Ee-K[he-1].x,Se-K[he-1].y,We-K[he-1].x,be-K[he-1].y,ne-K[he-1].x,Qt-K[he-1].y],Z[Z.length-1].deltas.push(J);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(te)}}V=U?null:L==="stroke"?"stroke":"fill";for(var bt=!1,Pt=0;Pt<Z.length;Pt++)if(Z[Pt].arc)for(var Qe=Z[Pt].abs,ft=0;ft<Qe.length;ft++){var mt=Qe[ft];mt.type==="arc"?A.call(this,mt.x,mt.y,mt.radius,mt.startAngle,mt.endAngle,mt.counterclockwise,void 0,U,!bt):O.call(this,mt.x,mt.y),bt=!0}else if(Z[Pt].close===!0)this.pdf.internal.out("h"),bt=!1;else if(Z[Pt].begin!==!0){var _t=Z[Pt].start.x,ue=Z[Pt].start.y;R.call(this,Z[Pt].deltas,_t,ue),bt=!0}V&&k.call(this,V),U&&M.call(this)}},N=function(L){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-J;case"top":return L+U-J;case"hanging":return L+U-2*J;case"middle":return L+U/2-J;default:return L}},P=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(U,J){this.colorStops.push([U,J])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(L,U,J,V,Z,K,he,te,me){for(var Ee=W.call(this,J,V,Z,K),Se=0;Se<Ee.length;Se++){var We=Ee[Se];Se===0&&(me?E.call(this,We.x1+L,We.y1+U):O.call(this,We.x1+L,We.y1+U)),B.call(this,L,U,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}te?M.call(this):k.call(this,he)},k=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(L,U){this.pdf.internal.out(r(L)+" "+n(U)+" m")},I=function(L){var U;switch(L.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var J=this.pdf.getTextDimensions(L.text),V=N.call(this,L.y),Z=P.call(this,V)-J.h,K=this.ctx.transform.applyToPoint(new s(L.x,V)),he=this.ctx.transform.decompose(),te=new c;te=(te=(te=te.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var me,Ee,Se,We=this.ctx.transform.applyToRectangle(new l(L.x,V,J.w,J.h)),be=te.applyToRectangle(new l(L.x,Z,J.w,J.h)),ne=x.call(this,be),Qt=[],bt=0;bt<ne.length;bt+=1)Qt.indexOf(ne[bt])===-1&&Qt.push(ne[bt]);if(w(Qt),this.autoPaging)for(var Pt=Qt[0],Qe=Qt[Qt.length-1],ft=Pt;ft<Qe+1;ft++){this.pdf.setPage(ft);var mt=ft===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ue=this.pdf.internal.pageSize.height-this.margin[2],Ct=ue-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Wt=At-this.margin[3],wt=ft===1?0:_t+(ft-2)*Ct;if(this.ctx.clip_path.length!==0){var Ae=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(me,this.posX+this.margin[3],-1*wt+mt),j.call(this,"fill",!0),this.path=Ae}var qe=b([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-wt+mt+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*L.scale),Se=this.lineWidth,this.lineWidth=Se*L.scale);var Ot=this.autoPaging!=="text";if(Ot||qe.y+qe.h<=ue){if(Ot||qe.y>=mt&&qe.x<=At){var Y=Ot?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||At-qe.x)[0],ve=b([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-wt+mt+this.ctx.prevPageLastElemOffset)[0],Ve=Ot&&(ft>Pt||ft<Qe)&&p.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Ct,null).clip().discardPath()),this.pdf.text(Y,ve.x,ve.y,{angle:L.angle,align:U,renderingMode:L.renderingMode}),Ve&&this.pdf.restoreGraphicsState()}}else qe.y<ue&&(this.ctx.prevPageLastElemOffset+=ue-qe.y);L.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=Se)}else L.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*L.scale),Se=this.lineWidth,this.lineWidth=Se*L.scale),this.pdf.text(L.text,K.x+this.posX,K.y+this.posY,{angle:L.angle,align:U,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=Se)},O=function(L,U,J,V){J=J||0,V=V||0,this.pdf.internal.out(r(L+J)+" "+n(U+V)+" l")},R=function(L,U,J){return this.pdf.lines(L,U,J,null,null)},B=function(L,U,J,V,Z,K,he,te){this.pdf.internal.out([t(a(J+L)),t(i(V+U)),t(a(Z+L)),t(i(K+U)),t(a(he+L)),t(i(te+U)),"c"].join(" "))},W=function(L,U,J,V){for(var Z=2*Math.PI,K=Math.PI/2;U>J;)U-=Z;var he=Math.abs(J-U);he<Z&&V&&(he=Z-he);for(var te=[],me=V?-1:1,Ee=U;he>1e-5;){var Se=Ee+me*Math.min(he,K);te.push(F.call(this,L,Ee,Se)),he-=Math.abs(Se-Ee),Ee=Se}return te},F=function(L,U,J){var V=(J-U)/2,Z=L*Math.cos(V),K=L*Math.sin(V),he=Z,te=-K,me=he*he+te*te,Ee=me+he*Z+te*K,Se=4/3*(Math.sqrt(2*me*Ee)-Ee)/(he*K-te*Z),We=he-Se*te,be=te+Se*he,ne=We,Qt=-be,bt=V+U,Pt=Math.cos(bt),Qe=Math.sin(bt);return{x1:L*Math.cos(U),y1:L*Math.sin(U),x2:We*Pt-be*Qe,y2:We*Qe+be*Pt,x3:ne*Pt-Qt*Qe,y3:ne*Qe+Qt*Pt,x4:L*Math.cos(J),y4:L*Math.sin(J)}},$=function(L){return 180*L/Math.PI},H=function(L,U,J,V,Z,K){var he=L+.5*(J-L),te=U+.5*(V-U),me=Z+.5*(J-Z),Ee=K+.5*(V-K),Se=Math.min(L,Z,he,me),We=Math.max(L,Z,he,me),be=Math.min(U,K,te,Ee),ne=Math.max(U,K,te,Ee);return new l(Se,be,We-Se,ne-be)},ce=function(L,U,J,V,Z,K,he,te){var me,Ee,Se,We,be,ne,Qt,bt,Pt,Qe,ft,mt,_t,ue,Ct=J-L,At=V-U,Wt=Z-J,wt=K-V,Ae=he-Z,qe=te-K;for(Ee=0;Ee<41;Ee++)Pt=(Qt=(Se=L+(me=Ee/40)*Ct)+me*((be=J+me*Wt)-Se))+me*(be+me*(Z+me*Ae-be)-Qt),Qe=(bt=(We=U+me*At)+me*((ne=V+me*wt)-We))+me*(ne+me*(K+me*qe-ne)-bt),Ee==0?(ft=Pt,mt=Qe,_t=Pt,ue=Qe):(ft=Math.min(ft,Pt),mt=Math.min(mt,Qe),_t=Math.max(_t,Pt),ue=Math.max(ue,Qe));return new l(Math.round(ft),Math.round(mt),Math.round(_t-ft),Math.round(ue-mt))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,U,J=(L=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:U}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Qr.API),function(e){var t=function(s){var l,c,u,d,f,h,m,g,p,x;for(c=[],u=0,d=(s+=l="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(x=f%85))/85)-(p=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)%85,c.push(h+33,m+33,g+33,p+33,x+33)):c.push(122);return function(y,b){for(var w=b;w>0;w--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var l,c,u,d,f,h=String,m="length",g=255,p="charCodeAt",x="slice",y="replace";for(s[x](-2),s=s[x](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(s+=l="uuuuu"[x](s[m]%5||5))[m];f>d;d+=5)c=52200625*(s[p](d)-33)+614125*(s[p](d+1)-33)+7225*(s[p](d+2)-33)+85*(s[p](d+3)-33)+(s[p](d+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(b,w){for(var _=w;_>0;_--)b.pop()}(u,l[m]),h.fromCharCode.apply(h,u)},n=function(s){return s.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(s){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),l.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},i=function(s){for(var l=new Uint8Array(s.length),c=s.length;c--;)l[c]=s.charCodeAt(c);return(l=TT(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,l){var c=0,u=s||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Qr.API),function(e){e.loadFile=function(t,r,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var p=g.length,x=[],y=String.fromCharCode;for(h=0;h<p;h+=1)x.push(y(255&g.charCodeAt(h)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,i,s)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Qr.API),function(e){function t(){return(jn.html2canvas?Promise.resolve(jn.html2canvas):Hu(()=>import("./html2canvas.esm-f16e60ff.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(jn.DOMPurify?Promise.resolve(jn.DOMPurify):Hu(()=>import("./purify.es-fd086bfc.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=ra(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},s=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(l,c){return l.__proto__=c||s.prototype,l},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},s.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var g=d[m],p=g.src.find(function(x){return x.format==="truetype"});p&&u.addFont(p.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},s.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},s.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},s.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(l,c){return this.then(function(){var u=l in s.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},s.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},s.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Qr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},s.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},s.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return s.convert(h,d.__proto__)},s.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},s.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return s.convert(c,this)},s.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},s.prototype.error=function(l){return this.then(function(){throw new Error(l)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Qr.getPageSize=function(l,c,u){if(ra(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var g,p=0,x=0;if(m.hasOwnProperty(h))p=m[h][1]/f,x=m[h][0]/f;else try{p=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",x>p&&(g=x,x=p,p=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>x&&(g=x,x=p,p=g)}return{width:x,height:p,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(TP):null;var u=new s(c);return c.worker?u:u.from(l).doCallback()}}(Qr.API),Qr.API.addJS=function(e){return d9=e,this.internal.events.subscribe("postPutResources",function(){h2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(h2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),u9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+d9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){h2!==void 0&&u9!==void 0&&this.internal.out("/Names <</JavaScript "+h2+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],l=n.exec(s);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Qr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,s,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,p={width:0,height:0,numcomponents:1},x=4;x<g;x+=2){if(x+=m,t.indexOf(f.charCodeAt(x+1))!==-1){h=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),p={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:h,numcomponents:f.charCodeAt(x+9)};break}m=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Qr.API),Qr.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=qrt(e,{checkCrc:!0}),s=i.width,l=i.height,c=i.channels,u=i.palette,d=i.depth;a=u&&c===1?function(A){for(var k=A.width,M=A.height,E=A.data,I=A.palette,O=A.depth,R=!1,B=[],W=[],F=void 0,$=!1,H=0,ce=0;ce<I.length;ce++){var oe=iq(I[ce],4),L=oe[0],U=oe[1],J=oe[2],V=oe[3];B.push(L,U,J),V!=null&&(V===0?(H++,W.length<1&&W.push(ce)):V<255&&($=!0))}if($||H>1){R=!0,W=void 0;var Z=k*M;F=new Uint8Array(Z);for(var K=new DataView(E.buffer),he=0;he<Z;he++){var te=DP(K,he,O),me=iq(I[te],4)[3];F[he]=me}}else H===0&&(W=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:R?8:void 0,colorBytes:E,alphaBytes:F,needSMask:R,palette:B,mask:W}}(i):c===2||c===4?function(A){for(var k=A.data,M=A.width,E=A.height,I=A.channels,O=A.depth,R=I===2?"DeviceGray":"DeviceRGB",B=I-1,W=M*E,F=B,$=W*F,H=1*W,ce=Math.ceil($*O/8),oe=Math.ceil(H*O/8),L=new Uint8Array(ce),U=new Uint8Array(oe),J=new DataView(k.buffer),V=new DataView(L.buffer),Z=new DataView(U.buffer),K=!1,he=0;he<W;he++){for(var te=he*I,me=0;me<F;me++)b9(V,DP(J,te+me,O),he*F+me,O);var Ee=DP(J,te+F,O);Ee<(1<<O)-1&&(K=!0),b9(Z,Ee,1*he,O)}return{colorSpace:R,colorsPerPixel:B,sMaskBitsPerComponent:K?O:void 0,colorBytes:L,alphaBytes:U,needSMask:K}}(i):function(A){var k=A.data,M=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?function(E){for(var I=E.length,O=new Uint8Array(2*I),R=new DataView(O.buffer,O.byteOffset,O.byteLength),B=0;B<I;B++)R.setUint16(2*B,E[B],!1);return O}(k):k,needSMask:!1}}(i);var f,h,m,g=a,p=g.colorSpace,x=g.colorsPerPixel,y=g.sMaskBitsPerComponent,b=g.colorBytes,w=g.alphaBytes,_=g.needSMask,j=g.palette,N=g.mask,P=null;return n!==Qr.API.image_compression.NONE&&typeof TT=="function"?(P=function(A){var k;switch(A){case Qr.API.image_compression.FAST:k=11;break;case Qr.API.image_compression.MEDIUM:k=13;break;case Qr.API.image_compression.SLOW:k=14;break;default:k=12}return k}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(P," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=p9(b,Math.ceil(s*x*d/8),x,d,n),_&&(m=p9(w,Math.ceil(s*y/8),1,y,n))):(f=void 0,h=void 0,e=b,_&&(m=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:e,index:t,filter:f,decodeParameters:h,transparency:N,palette:j,sMask:m,predictor:P,width:s,height:l,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:p}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new unt(t),s=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:l},d=new MP(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Qr.API),Mc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Mc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){za.log("bit decode error:"+r)}},Mc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[s+4*l]=c.blue,this.data[s+4*l+1]=c.green,this.data[s+4*l+2]=c.red,this.data[s+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Mc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Mc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Mc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},Mc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Mc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Mc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=s}},Mc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new Mc(t,!1),s=i.width,l=i.height,c={data:i.getData(),width:s,height:l},u=new MP(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Qr.API),_9.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new _9(t),s=i.width,l=i.height,c={data:i.getData(),width:s,height:l},u=new MP(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Qr.API),Qr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];i[l++]=d,i[l++]=f,i[l++]=h,s[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Qr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pg=Qr.API,m2=pg.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,p=l[0]||c,x=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(h=f&&ra(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,x.push((l[n]||p)/c+h)),g=n;return x},f9=pg.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return pg.processArabic&&(e=pg.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:m2.apply(this,arguments).reduce(function(i,s){return i+s},0)},h9=function(e,t,r,n){for(var a=[],i=0,s=e.length,l=0;i!==s&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==s;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},m9=function(e,t,r){r||(r={});var n,a,i,s,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,p=e.split(" "),x=m2.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),b=[];p.map(function(_){(_=_.split(/\s*\n/)).length>1?b=b.concat(_.map(function(j,N){return(N&&j.length?`
`:"")+j})):b.push(_[0])}),p=b,c=f9.apply(this,[y,r])}for(i=0,s=p.length;i<s;i++){var w=0;if(n=p[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),h+m+(g=(a=m2.apply(this,[n,r])).reduce(function(_,j){return _+j},0))>t||w){if(g>t){for(l=h9.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(_,j){return _+j},0)}else d=[n];f.push(d),h=g+c,m=x}else d.push(n),h+=m+g,m=x}return u=c?function(_,j){return(j?y:"")+_.join(" ")}:function(_){return _.join(" ")},f.map(u)},pg.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(m9.apply(this,[n[l],s,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var s=function(h){return"0x"+parseInt(h,10).toString(16)},l=e.__fontmetrics__.compress=function(h){var m,g,p,x,y=["{"];for(var b in h){if(m=h[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof m=="number")m<0?(p=s(m).slice(3),x="-"):(p=s(m).slice(2),x=""),p=x+p.slice(0,-1)+a[p.slice(-1)];else{if(ra(m)!=="object")throw new Error("Don't know what to do with value type "+ra(m)+".");p=l(m)}y.push(g+p)}return y.push("}"),y.join("")},c=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,p,x,y={},b=1,w=y,_=[],j="",N="",P=h.length-1,A=1;A<P;A+=1)(x=h[A])=="'"?m?(p=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(_.push([w,p]),w={},p=void 0):x=="}"?((g=_.pop())[0][g[1]]=w,p=void 0,w=g[0]):x=="-"?b=-1:p===void 0?n.hasOwnProperty(x)?(j+=n[x],p=parseInt(j,16)*b,b=1,j=""):j+=x:n.hasOwnProperty(x)?(N+=n[x],w[p]=parseInt(N,16)*b,b=1,p=void 0,N=""):N+=x;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,g=f.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode.encoding=p,m.encoding=p.codePages[0])}])}(Qr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(V2(l)),s.metadata=e.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(Qr),Qr.API.addSvgAsImage=function(e,t,r,n,a,i,s,l){if(isNaN(t)||isNaN(r))throw za.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw za.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(jn.canvg?Promise.resolve(jn.canvg):Hu(()=>import("./index.es-2c0ed3a2.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,s,l)})},Qr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Qr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),c=[],u=0,d=0,f=0;function h(g,p){var x,y=!1;for(x=0;x<g.length;x+=1)g[x]===p&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ra(e)==="object"){for(a in e)if(i=e[a],h(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,p=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?p.push("/"+g+" /"+r[g].value):p.push("/"+g+" "+r[g].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+s.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Qr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,s){for(var l,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=i.length;f<h;++f){if(l=s.metadata.characterToGlyph(i.charCodeAt(f)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(s.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(i){var s,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(i).sort(function(m,g){return m-g})).length;f<h;f++)s=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(u=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var l=s.font,c=s.out,u=s.newObject,d=s.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var p=u();d({data:m,addLength1:!0,objectId:p}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_g(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+_g(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+_g(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var l=s.font,c=s.out,u=s.newObject,d=s.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var x=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+_g(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+_g(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,p=m,x="",y=0,b="",w=g[p].encoding;if(g[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(b=l,p=m,Array.isArray(l)&&(b=l[0]),y=0;y<b.length;y+=1)g[p].metadata.hasOwnProperty("cmap")&&(s=g[p].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),s||b[y].charCodeAt(0)<256&&g[p].metadata.hasOwnProperty("Unicode")?x+=b[y]:x+="";var _="";return parseInt(p.slice(1))<14||w==="WinAnsiEncoding"?_=h(x,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(_=r(x,g[p])),f.isHex=!0,{text:_,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var s=i.text||"",l=[],c={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?l.push([a(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):l.push(a(Object.assign({},c,{text:s[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:s})).text}])}(Qr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Qr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,s,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var _=function(E){var I=E.charCodeAt(),O=I>>8,R=p[O];return R!==void 0?f[256*R+(255&I)]:O===252||O===253?"AL":y.test(O)?"L":O===8?"R":"N"},j=function(E){for(var I,O=0;O<E.length;O++){if((I=_(E.charAt(O)))==="L")return!1;if(I==="R")return!0}return!1},N=function(E,I,O,R){var B,W,F,$,H=I[R];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(H="AN");break;case"AL":b=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":R<1||R+1>=I.length||(B=O[R-1])!=="EN"&&B!=="AN"||(W=I[R+1])!=="EN"&&W!=="AN"?H="N":b&&(W="AN"),H=W===B?W:"N";break;case"ES":H=(B=R>0?O[R-1]:"B")==="EN"&&R+1<I.length&&I[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&O[R-1]==="EN"){H="EN";break}if(b){H="N";break}for(F=R+1,$=I.length;F<$&&I[F]==="ET";)F++;H=F<$&&I[F]==="EN"?"EN":"N";break;case"NSM":if(s&&!l){for($=I.length,F=R+1;F<$&&I[F]==="NSM";)F++;if(F<$){var ce=E[R],oe=ce>=1425&&ce<=2303||ce===64286;if(B=I[F],oe&&(B==="R"||B==="AL")){H="R";break}}}H=R<1||(B=I[R-1])==="B"?"N":O[R-1];break;case"B":b=!1,a=!0,H=w;break;case"S":i=!0,H="N"}return H},P=function(E,I,O){var R=E.split("");return O&&A(R,O,{hiLevel:w}),R.reverse(),I&&I.reverse(),R.join("")},A=function(E,I,O){var R,B,W,F,$,H=-1,ce=E.length,oe=0,L=[],U=w?m:h,J=[];for(b=!1,a=!1,i=!1,B=0;B<ce;B++)J[B]=_(E[B]);for(W=0;W<ce;W++){if($=oe,L[W]=N(E,J,L,W),R=240&(oe=U[$][g[L[W]]]),oe&=15,I[W]=F=U[oe][5],R>0)if(R===16){for(B=H;B<W;B++)I[B]=1;H=-1}else H=-1;if(U[oe][6])H===-1&&(H=W);else if(H>-1){for(B=H;B<W;B++)I[B]=F;H=-1}J[W]==="B"&&(I[W]=0),O.hiLevel|=F}i&&function(V,Z,K){for(var he=0;he<K;he++)if(V[he]==="S"){Z[he]=w;for(var te=he-1;te>=0&&V[te]==="WS";te--)Z[te]=w}}(J,I,ce)},k=function(E,I,O,R,B){if(!(B.hiLevel<E)){if(E===1&&w===1&&!a)return I.reverse(),void(O&&O.reverse());for(var W,F,$,H,ce=I.length,oe=0;oe<ce;){if(R[oe]>=E){for($=oe+1;$<ce&&R[$]>=E;)$++;for(H=oe,F=$-1;H<F;H++,F--)W=I[H],I[H]=I[F],I[F]=W,O&&(W=O[H],O[H]=O[F],O[F]=W);oe=$}oe++}}},M=function(E,I,O){var R=E.split(""),B={hiLevel:w};return O||(O=[]),A(R,O,B),function(W,F,$){if($.hiLevel!==0&&d)for(var H,ce=0;ce<W.length;ce++)F[ce]===1&&(H=x.indexOf(W[ce]))>=0&&(W[ce]=x[H+1])}(R,O,B),k(2,R,I,O,B),k(1,R,I,O,B),R.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,O){if(function(B,W){if(W)for(var F=0;F<B.length;F++)W[F]=F;l===void 0&&(l=j(B)),u===void 0&&(u=j(B))}(E,I),s||!c||u)if(s&&c&&l^u)w=l?1:0,E=P(E,I,O);else if(!s&&c&&u)w=l?1:0,E=M(E,I,O),E=P(E,I);else if(!s||l||c||u){if(s&&!c&&l^u)E=P(E,I),l?(w=0,E=M(E,I,O)):(w=1,E=M(E,I,O),E=P(E,I));else if(s&&l&&!c&&u)w=1,E=M(E,I,O),E=P(E,I);else if(!s&&!c&&l^u){var R=d;l?(w=1,E=M(E,I,O),w=0,d=!1,E=M(E,I,O),d=R):(w=0,E=M(E,I,O),E=P(E,I),w=1,d=!1,E=M(E,I,O),d=R,E=P(E,I))}}else w=0,E=M(E,I,O);else w=l?1:0,E=M(E,I,O);return E},this.__bidiEngine__.setOptions=function(E){E&&(s=E.isInputVisual,c=E.isOutputVisual,l=E.isInputRtl,u=E.isOutputRtl,d=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var s=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(s=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?s.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):s.push([r.doBidiReorder(a[l])]);n.text=s}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Qr),Qr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Ih(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Nnt(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new dnt(this.contents),this.head=new hnt(this),this.name=new xnt(this),this.cmap=new lae(this),this.toUnicode={},this.hhea=new mnt(this),this.maxp=new ynt(this),this.hmtx=new bnt(this),this.post=new gnt(this),this.os2=new pnt(this),this.loca=new jnt(this),this.glyf=new wnt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,l,c,u;for(u=[],s=0,l=(c=this.bbox).length;s<l;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,s,l;for(s=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var yu,Ih=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,s,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*s+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),dnt=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,s,l,c,u,d,f,h,m,g,p;for(p in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),s=Math.floor(f/c),d=16*m-f,(a=new Ih).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(s),a.writeShort(d),i=16*m,u=a.pos+i,l=null,g=[],r)for(h=r[p],a.writeString(p),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,s;for(r=cae.call(r);r.length%4;)r.push(0);for(i=new Ih(r),a=0,n=0,s=r.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),fnt={}.hasOwnProperty,ld=function(e,t){for(var r in t)fnt.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};yu=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var hnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ih).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),S9=function(){function e(t,r){var n,a,i,s,l,c,u,d,f,h,m,g,p,x,y,b,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),t.pos+=2,p=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),u=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),d=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var _,j;for(j=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)j.push(t.readUInt16());return j}(),c=y=0,w=i.length;y<w;c=++y)for(x=i[c],n=b=g=p[c];g<=x?b<=x:b>=x;n=g<=x?++b:--b)d[c]===0?s=n+u[c]:(s=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,a,i,s,l,c,u,d,f,h,m,g,p,x,y,b,w,_,j,N,P,A,k,M,E,I,O,R,B,W,F,$,H,ce,oe,L,U,J,V,Z,K,he,te,me,Ee,Se;switch(R=new Ih,s=Object.keys(t).sort(function(We,be){return We-be}),r){case"macroman":for(p=0,x=function(){var We=[];for(g=0;g<256;++g)We.push(0);return We}(),b={0:0},i={},B=0,H=s.length;B<H;B++)b[te=t[a=s[B]]]==null&&(b[te]=++p),i[a]={old:t[a],new:b[t[a]]},x[a]=b[t[a]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(x),{charMap:i,subtable:R.data,maxGlyphID:p+1};case"unicode":for(I=[],f=[],w=0,b={},n={},y=u=null,W=0,ce=s.length;W<ce;W++)b[j=t[a=s[W]]]==null&&(b[j]=++w),n[a]={old:j,new:b[j]},l=b[j]-a,y!=null&&l===u||(y&&f.push(y),I.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),I.push(65535),M=2*(k=I.length),A=2*Math.pow(Math.log(k)/Math.LN2,2),h=Math.log(A/2)/Math.LN2,P=2*k-A,c=[],N=[],m=[],g=F=0,oe=I.length;F<oe;g=++F){if(E=I[g],d=f[g],E===65535){c.push(0),N.push(0);break}if(E-(O=n[E].new)>=32768)for(c.push(0),N.push(2*(m.length+k-g)),a=$=E;E<=d?$<=d:$>=d;a=E<=d?++$:--$)m.push(n[a].new);else c.push(O-E),N.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*k+2*m.length),R.writeUInt16(0),R.writeUInt16(M),R.writeUInt16(A),R.writeUInt16(h),R.writeUInt16(P),K=0,L=f.length;K<L;K++)a=f[K],R.writeUInt16(a);for(R.writeUInt16(0),he=0,U=I.length;he<U;he++)a=I[he],R.writeUInt16(a);for(me=0,J=c.length;me<J;me++)l=c[me],R.writeUInt16(l);for(Ee=0,V=N.length;Ee<V;Ee++)_=N[Ee],R.writeUInt16(_);for(Se=0,Z=m.length;Se<Z;Se++)p=m[Se],R.writeUInt16(p);return{charMap:n,subtable:R.data,maxGlyphID:w+1}}},e}(),lae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new S9(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=S9.encode(t,r),(a=new Ih).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),mnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),pnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),gnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var s,l,c;for(c=[],i=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;i=0<=l?++s:--s)c.push(t.readUInt32());return c}.call(this)}},e}(),vnt=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},xnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,s,l,c,u,d,f,h;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=d=0,f=n.length;d<f;i=++d)a=n[i],t.pos=a.offset,u=t.readString(a.length),s=new vnt(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ynt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),bnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,s,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],h.push(i.advance);return h}.call(this),n=this.widths[this.widths.length-1],c=[],r=s=0;0<=a?s<a:s>a;r=0<=a?++s:--s)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),cae=[].slice,wnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,s,l,c,u,d,f;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(l=new Ih(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=s===-1?new Snt(l,u,f,c,d):new _nt(l,s,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,s,l,c;for(s=[],i=[],l=0,c=r.length;l<c;l++)a=t[r[l]],i.push(s.length),a&&(s=s.concat(a.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),_nt=function(){function e(t,r,n,a,i,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Snt=function(){function e(t,r,n,a,i){var s,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Ih(cae.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),jnt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,yu),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,s=0;s<n.length;++s)if(n[s]=a,i<r.length&&r[i]==s){++i,n[s]=a;var l=this.offsets[s],c=this.offsets[s+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),Nnt=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,s,l,c;for(a={},s=0,l=t.length;s<l;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,s,l,c,u,d,f,h,m,g,p,x,y;for(a in n=lae.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,s)g in m||(m[g]=h++);return d=function(b){var w,_;for(w in _={},b)_[b[w]]=w;return _}(m),f=Object.keys(d).sort(function(b,w){return b-w}),p=function(){var b,w,_;for(_=[],b=0,w=f.length;b<w;b++)l=f[b],_.push(d[l]);return _}(),i=this.font.glyf.encode(s,p,m),u=this.font.loca.encode(i.offsets,p),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();Qr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+r},t}();const Cnt=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:rnt,AcroFormAppearance:Fr,AcroFormButton:go,AcroFormCheckBox:hy,AcroFormChoiceField:Jm,AcroFormComboBox:Zm,AcroFormEditBox:dy,AcroFormListBox:Qm,AcroFormPasswordField:my,AcroFormPushButton:fy,AcroFormRadioButton:ep,AcroFormTextField:_h,GState:Vb,ShadingPattern:Hf,TilingPattern:qm,default:Qr,jsPDF:Qr},Symbol.toStringTag,{value:"Module"}));function uae(e,t,r,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,l=a.internal.getFontSize()/s,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-i),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var j9={},lv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:j9=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),l=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return j9||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),HT=function(e,t){return HT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},HT(e,t)};function dae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");HT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fae=function(e){dae(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function Ant(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Pnt(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function pj(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function hae(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=mae(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function mae(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function FC(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function pae(e,t){var r=FC(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Ent(e,t,r,n,a){var i={},s=1.3333333333333333,l=RP(t,function(w){return a.getComputedStyle(w).backgroundColor});l!=null&&(i.fillColor=l);var c=RP(t,function(w){return a.getComputedStyle(w).color});c!=null&&(i.textColor=c);var u=Ont(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=s*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var g=RP(t,function(w){return a.getComputedStyle(w)[d]});g!=null&&(i.lineColor=g);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(i.fontSize=x/s);var y=knt(n);y&&(i.fontStyle=y);var b=(n.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(i.font=b),i}function knt(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function RP(e,t){var r=gae(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function gae(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:gae(e.parentElement,t):r}function Ont(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),s=FC(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function vae(e,t,r,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],p=(s=(i=g?.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=Tnt(c,u,r,g,n,a);x&&(p==="thead"?d.push(x):p==="tfoot"?h.push(x):f.push(x))}return{head:d,body:f,foot:h}}function Tnt(e,t,r,n,a,i){for(var s=new fae(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=Ent(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Int(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(a||f.display!=="none"))return s}function Int(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Dnt(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function $d(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var l=arguments[s];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function _M(e,t){var r=new lv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Dnt(a,n,t);var i=$d({},a,n,t),s;typeof window<"u"&&(s=window);var l=Mnt(a,n,t),c=Rnt(a,n,t),u=Lnt(r,i),d=Fnt(r,i,s);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function Mnt(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=$d({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=$d({},m[0],m[1],m[2])}},i=0,s=Object.keys(n);i<s.length;i++){var l=s[i];a(l)}return n}function Rnt(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var l=s[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function Lnt(e,t){var r,n,a,i,s,l,c,u,d,f,h,m,g=FC(t.margin,40/e.scaleFactor()),p=(r=$nt(e,t.startY))!==null&&r!==void 0?r:g.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,w=t.theme||(b?"plain":"striped"),_=!!t.horizontalPageBreak,j=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:w,startY:p,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:x,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:_,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function $nt(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&r?.finalY!=null?r.finalY+20/n:null}function Fnt(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var l=vae(e,t.html,r,s,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Bnt(n,a,i);return{columns:c,head:n,body:a,foot:i}}function Bnt(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(s=l?.colSpan||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var gj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),xae=function(e){dae(t,e);function t(r,n,a,i,s,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=i,c.column=s,c.section=i.section,c}return t}(gj),yae=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,s){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new xae(t,this,n,a,i,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new gj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new gj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),SM=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof fae&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var l=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),jM=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=s.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=FC(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),bae=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function znt(e,t){qnt(e,t);var r=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=GT(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=GT(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Vnt(t),Wnt(t,e),Unt(t)}function qnt(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=pae(e,t);t.allRows().forEach(function(i){for(var s=0,l=t.columns;s<l.length;s++){var c=l[s],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=pj(u.text,u.styles,e)+f;var h=pj(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,l=t.columns;s<l.length;s++){var c=l[s],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function GT(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],l=s.wrappedWidth/a,c=n*l,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=GT(h,t,r))}return t}function Unt(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,l=e.columns;s<l.length;s++){var c=l[s],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:i}}}}}function Vnt(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(s-=1,s>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function Wnt(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,l=e.columns;s<l.length;s++){var c=l[s],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=N9(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=N9(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function N9(e,t,r,n,a){return e.map(function(i){return Hnt(i,t,r,n,a)})}function Hnt(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=pj(e,r,n))return e;for(;t<pj(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function NM(e,t){var r=new lv(e),n=Gnt(t,r.scaleFactor()),a=new yae(t,n);return znt(r,a),r.applyStyles(r.userStyles),a}function Gnt(e,t){var r=e.content,n=Ynt(r.columns);if(r.head.length===0){var a=C9(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=C9(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:LP("head",r.head,n,s,i,t),body:LP("body",r.body,n,s,i,t),foot:LP("foot",r.foot,n,s,i,t)}}function LP(e,t,r,n,a,i){var s={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,p=r;g<p.length;g++){var x=p[g];if(s[x.index]==null||s[x.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[x.index-h-d]:y=c[x.dataKey];var b={};typeof y=="object"&&!Array.isArray(y)&&(b=y?.styles||{});var w=Xnt(e,x,u,a,n,i,b),_=new jM(y,w,e);f[x.dataKey]=_,f[x.index]=_,m=_.colSpan-1,s[x.index]={left:_.rowSpan-1,times:m}}else m--,h++;else s[x.index].left--,m=s[x.index].times,d++}return new SM(c,u,e,f)});return l}function C9(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Knt(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Knt(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Ynt(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new bae(a,t,r)})}function Xnt(e,t,r,n,a,i,s){var l=Pnt(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=$d({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?$d({},l.alternateRow,a.alternateRowStyles):{},m=Ant(i),g=$d({},m,u,h,f);return $d(g,s)}function Jnt(e,t,r){var n;r===void 0&&(r={});var a=pae(e,t),i=new Map,s=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),s.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r?.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,s.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:s,columns:l,lastIndex:d-1}}function Qnt(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Jnt(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function CM(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new lv(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(_ae(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=$d({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Znt(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return af(d,t,h,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;vj(d,t,h,g,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return af(d,t,h,i,t.columns)})),hae(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function Znt(e,t,r,n){var a=Qnt(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?py(e,t,r,n,u.columns,!0):A9(e,t,n,u.columns),eat(e,t,r,n,u.columns),$P(e,t,n,u.columns)});else for(var s=-1,l=a[0],c=function(){var u=s;if(l){e.applyStyles(e.userStyles);var d=l.columns;s>=0?py(e,t,r,n,d,!0):A9(e,t,n,d),u=P9(e,t,s+1,n,d),$P(e,t,n,d)}var f=u-s;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),py(e,t,r,n,h.columns,!0),P9(e,t,s+1,n,h.columns,f),$P(e,t,n,h.columns)}),s=u};s<t.body.length-1;)c()}function A9(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return af(e,t,i,r,n)})}function eat(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var l=s===t.body.length-1;vj(e,t,i,l,r,n,a)})}function P9(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=wae(e,t,d,n);c.canEntireRowFit(f,a)&&(af(e,t,c,n,a),l=r+u)}),l}function $P(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return af(e,t,i,r,n)})}function tat(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function rat(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,l=r.columns;s<l.length;s++){var c=l[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new jM(u.raw,u.styles,u.section);d=$d(d,u),d.text=[];var f=tat(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var g=new SM(e.raw,-1,e.section,a,!0);g.height=i;for(var p=0,x=r.columns;p<x.length;p++){var c=x[p],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function nat(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,l=a-s;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function vj(e,t,r,n,a,i,s){var l=wae(e,t,n,i);if(r.canEntireRowFit(l,s))af(e,t,r,i,s);else if(nat(e,r,l,t)){var c=rat(r,l,t,e);af(e,t,r,i,s),py(e,t,a,i,s),vj(e,t,c,n,a,i,s)}else py(e,t,a,i,s),vj(e,t,r,n,a,i,s)}function af(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var l=s[i],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}aat(e,c,n);var d=c.getTextPos();uae(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function aat(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=mae(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),iat(e,t,r,n.lineWidth))}function iat(e,t,r,n){var a,i,s,l;n.top&&(a=r.x,i=r.y,s=r.x+t.width,l=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,s,l)),n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,l=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,s,l)),n.left&&(a=r.x,i=r.y,s=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,s,l)),n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,s,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function wae(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function py(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return af(e,t,l,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;hae(e,t,r,n),_ae(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return af(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function _ae(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Sae(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=_M(this,n),i=NM(this,a);return CM(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){uae(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return lv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){lv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new lv(this),i=vae(a,t,window,r,!1),s=i.head,l=i.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var FP;function E9(e,t){var r=_M(e,t),n=NM(e,r);CM(e,n)}function oat(e,t){var r=_M(e,t);return NM(e,r)}function sat(e,t){CM(e,t)}try{if(typeof window<"u"&&window){var k9=window,O9=k9.jsPDF||((FP=k9.jspdf)===null||FP===void 0?void 0:FP.jsPDF);O9&&Sae(O9)}}catch(e){console.error("Could not apply autoTable plugin",e)}const lat=Object.freeze(Object.defineProperty({__proto__:null,Cell:jM,CellHookData:xae,Column:bae,HookData:gj,Row:SM,Table:yae,__createTable:oat,__drawTable:sat,applyPlugin:Sae,autoTable:E9,default:E9},Symbol.toStringTag,{value:"Module"})),cat={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.08,delayChildren:.1}}},ys={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function p2({icon:e,label:t,value:r,delta:n,positive:a=!0,color:i="brand"}){return o.jsxs(Pr.div,{variants:ys,className:"fx-card border-0 ring-0 outline-none shadow-none",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[o.jsx(e,{className:`w-4 h-4 text-${i}`}),o.jsx("span",{children:t})]}),n!=null&&o.jsxs("div",{className:`text-xs font-bold ${a?"text-success":"text-danger"}`,children:[a?"+":"",n]})]}),o.jsx("div",{className:"text-3xl font-bold text-text-primary tabular-nums",children:r})]})}function uat(){const{toast:e}=Qa(),{userProfile:t}=Wi(),[r,n]=dW(),[a,i]=v.useState(r.get("tab")||"visao-geral"),[s,l]=v.useState(!1),[c,u]=v.useState(()=>{const G=new Date;return new Date(G.getFullYear(),G.getMonth(),1).toISOString().slice(0,10)}),[d,f]=v.useState(()=>new Date().toISOString().slice(0,10)),[h,m]=v.useState(null),[g,p]=v.useState(0),[x,y]=v.useState(0),[b,w]=v.useState([]),[_,j]=v.useState([]),[N,P]=v.useState([]),[A,k]=v.useState([]),[M,E]=v.useState([]),[I,O]=v.useState(0),[R,B]=v.useState(0),[W,F]=v.useState(!1),[$,H]=v.useState(!1),[ce,oe]=v.useState(null),[L,U]=v.useState([]),[J,V]=v.useState(!1),[Z,K]=v.useState(!1),[he,te]=v.useState(!1),[me,Ee]=v.useState(null),[Se,We]=v.useState([]),[be,ne]=v.useState([]);v.useState({open:!1,tipo:"suprimento",valor:"",observacao:"",loading:!1});const[Qt,bt]=v.useState(!1),[Pt,Qe]=v.useState(!1),[ft,mt]=v.useState(null),[_t,ue]=v.useState([]),[Ct,At]=v.useState(""),[Wt,wt]=v.useState("all"),[Ae,qe]=v.useState("all"),[Ot,Y]=v.useState([]),[ve,Ve]=v.useState(""),[$e,Le]=v.useState("all"),[it,Ye]=v.useState("all"),[Ge,Xe]=v.useState(!1),[ht,st]=v.useState(null),[lr,rr]=v.useState([]),[Zt,fn]=v.useState(!1),[Yr,Bn]=v.useState([]);v.useState("");const hr=G=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(G||0)),qr=G=>Number(G||0).toFixed(2),ya=async(G,Te,Je,Xt)=>{try{const{default:It}=await Hu(()=>Promise.resolve().then(()=>Cnt),void 0);await Hu(()=>Promise.resolve().then(()=>lat),void 0);const jt=new It("p","mm","a4"),cr=jt.internal.pageSize.getWidth();if(jt.setFontSize(20),jt.setTextColor(245,158,11),jt.text(G,14,20),jt.setDrawColor(245,158,11),jt.setLineWidth(.5),jt.line(14,23,cr-14,23),jt.setFontSize(10),jt.setTextColor(100,100,100),jt.text(`Perodo: ${c||"N/A"} at ${d||"N/A"}`,14,30),jt.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,14,35),typeof jt.autoTable=="function"){jt.autoTable({head:[Te],body:Je,startY:42,theme:"striped",headStyles:{fillColor:[245,158,11],textColor:[255,255,255],fontStyle:"bold",fontSize:11},bodyStyles:{fontSize:10,textColor:[50,50,50]},alternateRowStyles:{fillColor:[249,249,249]},margin:{top:42,left:14,right:14}});const wr=jt.lastAutoTable.finalY||50;jt.setFontSize(8),jt.setTextColor(150,150,150),jt.text("Relatrio gerado por Fluxo7Arena - Sistema de Gesto de Quadras Esportivas",cr/2,wr+15,{align:"center"})}else{let wr=45;jt.setFontSize(11),jt.setTextColor(0,0,0),Te.forEach((gr,zt)=>{const Er=14+zt*60;jt.text(gr,Er,wr)}),wr+=7,jt.setFontSize(10),Je.forEach(gr=>{gr.forEach((zt,Er)=>{const Bt=14+Er*60;jt.text(String(zt),Bt,wr)}),wr+=6})}jt.save(`${Xt}_${ln(new Date,"yyyy-MM-dd")}.pdf`),e({title:"PDF baixado com sucesso!",description:"O arquivo foi salvo na sua pasta de downloads"})}catch(It){console.error("Erro ao gerar PDF:",It),e({title:"Erro ao gerar PDF",description:It.message,variant:"destructive"})}},ui=async()=>{try{const G=["Abertura","Fechamento","Saldo Inicial","Saldo Final","Valor Final (Dinheiro)","Diferena","Status"],Te=(be||[]).map(Je=>[Je?.aberto_em?new Date(Je.aberto_em).toLocaleString("pt-BR"):"-",Je?.fechado_em?new Date(Je.fechado_em).toLocaleString("pt-BR"):"-",hr(Je?.saldo_inicial||0),Je?.saldo_final!=null?hr(Je.saldo_final):hr(0),Je?.valor_final_dinheiro!=null?hr(Je.valor_final_dinheiro):"",Je?.diferenca_dinheiro!=null?hr(Je.diferenca_dinheiro):"",String(Je?.status||"").toUpperCase()]);await ya("Fechamentos de Caixa",G,Te,"fechamentos_caixa")}catch(G){e({title:"Erro ao exportar PDF",description:G?.message||"Tente novamente",variant:"destructive"})}},Va=()=>{try{const G=";",Je=[["Abertura","Fechamento","Saldo Inicial","Saldo Final","Valor Final (Dinheiro)","Diferena","Status"].join(G)];(be||[]).forEach(cr=>{const wr=cr?.aberto_em?new Date(cr.aberto_em).toLocaleString("pt-BR"):"-",gr=cr?.fechado_em?new Date(cr.fechado_em).toLocaleString("pt-BR"):"-",zt=Number(cr?.saldo_inicial||0).toFixed(2).replace(".",","),Er=(cr?.saldo_final!=null?Number(cr.saldo_final):0).toFixed(2).replace(".",","),Bt=cr?.valor_final_dinheiro!=null?Number(cr.valor_final_dinheiro):null,Xr=cr?.diferenca_dinheiro!=null?Number(cr.diferenca_dinheiro):null,Vr=String(cr?.status||"").toUpperCase();Je.push([wr,gr,zt,Er,Bt!=null?Bt.toFixed(2).replace(".",","):"",Xr!=null?Xr.toFixed(2).replace(".",","):"",Vr].join(G))});const Xt=new Blob(["\uFEFF"+Je.join(`
`)],{type:"text/csv;charset=utf-8;"}),It=URL.createObjectURL(Xt),jt=document.createElement("a");jt.href=It,jt.download=`fechamentos_caixa_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(jt),jt.click(),document.body.removeChild(jt),URL.revokeObjectURL(It),e({title:"CSV baixado com sucesso!"})}catch(G){e({title:"Erro ao exportar CSV",description:G?.message||"Tente novamente",variant:"destructive"})}},Kn=({cx:G,cy:Te,midAngle:Je,outerRadius:Xt,percent:It})=>{const jt=Math.PI/180,cr=(Xt||0)+12,wr=G+cr*Math.cos(-Je*jt),gr=Te+cr*Math.sin(-Je*jt);return o.jsx("text",{x:wr,y:gr,fill:"#fff",textAnchor:wr>G?"start":"end",dominantBaseline:"central",style:{pointerEvents:"none",fontSize:15,fontWeight:700},children:`${Math.round((It||0)*100)}%`})},Cr=G=>{const Te=xt!=null&&xt!==G;return{transition:"opacity 320ms ease-in-out, filter 320ms ease-in-out",opacity:Te?.25:1,filter:Te?"grayscale(15%)":"none",cursor:"pointer"}};v.useEffect(()=>{(async()=>{if(!Ge||!ht||ht.origem!=="Comanda"||!ht.comanda_id){rr([]),Bn([]);return}try{fn(!0);const Te=t?.codigo_empresa;let Je=Ne.from("comanda_itens").select("descricao, quantidade, preco_unitario").eq("comanda_id",ht.comanda_id);Te&&(Je=Je.eq("codigo_empresa",Te));const{data:Xt}=await Je;rr(Xt||[]);let It=Ne.from("pagamentos").select("id, valor, metodo, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").eq("comanda_id",ht.comanda_id);Te&&(It=It.eq("codigo_empresa",Te));const{data:jt}=await It;Bn(jt||[])}catch(Te){console.warn("[Financeiro][RecebimentoModal] Falha ao carregar itens da comanda:",Te?.message),rr([]),Bn([])}finally{fn(!1)}})()},[Ge,ht,t?.codigo_empresa]);const zn=async()=>{try{l(!0);const G=ba(c)||void 0,Te=wa(d)||void 0,Je=t?.codigo_empresa;console.debug("[Financeiro][VisaoGeral] Carregando com perodo:",{fromISO:G,toISO:Te,codigo:Je});const Xt=await fc({from:G,to:Te}).catch(()=>null);m(Xt||{totalPorFinalizadora:{},totalEntradas:0,totalVendasBrutas:0,totalDescontos:0,totalVendasLiquidas:0}),console.debug("[Financeiro][VisaoGeral] Resumo calculado:",Xt);try{let It=Ne.from("pagamentos").select("valor, status").eq("codigo_empresa",Je);G&&(It=It.gte("recebido_em",G)),Te&&(It=It.lte("recebido_em",Te));const{data:jt}=await It,cr=(jt||[]).reduce((Er,Bt)=>{const Xr=Bt.status||"Pago";return Xr==="Cancelado"||Xr==="Estornado"?Er:Er+Number(Bt.valor||0)},0);p(cr);let wr=Ne.from("agendamentos").select("id").eq("codigo_empresa",Je);G&&(wr=wr.gte("inicio",G)),Te&&(wr=wr.lte("inicio",Te));const{data:gr}=await wr;let zt=0;if(gr&&gr.length>0){const Er=gr.map(Xr=>Xr.id),{data:Bt}=await Ne.from("agendamento_participantes").select("valor_cota, aplicar_taxa, finalizadoras!agp_finalizadora_id_fkey(taxa_percentual)").eq("codigo_empresa",Je).in("agendamento_id",Er).eq("status_pagamento","Pago");zt=(Bt||[]).reduce((Xr,Vr)=>{let rn=Number(Vr.valor_cota||0);if(Vr.aplicar_taxa===!0){const na=Number(Vr.finalizadoras?.taxa_percentual||0);na>0&&(rn=rn/(1+na/100))}return Xr+rn},0)}y(zt),console.debug("[Financeiro][VisaoGeral] Receitas por origem:",{totalComandas:cr,totalAg:zt})}catch(It){console.warn("[Financeiro][VisaoGeral] Falha ao calcular KPIs por origem:",It?.message),p(0),y(0)}try{let It=Ne.from("pagamentos").select("valor, status, origem").eq("codigo_empresa",Je).eq("origem","xml");G&&(It=It.gte("recebido_em",G)),Te&&(It=It.lte("recebido_em",Te));const{data:jt}=await It,cr=(jt||[]).reduce((gr,zt)=>["Cancelado","Estornado"].includes(zt.status)?gr:gr+Number(zt.valor||0),0);O(cr);const{count:wr}=await Ne.from("produtos").select("id",{count:"exact",head:!0}).eq("codigo_empresa",Je).or("importado_via_xml.is.true,categoria.ilike.Importados").gte("criado_em",G).lte("criado_em",Te);B(wr||0)}catch(It){console.warn("[Financeiro][VisaoGeral] Falha KPIs XML:",It?.message),O(0),B(0)}if(Je){let It=Ne.from("comandas").select("id").eq("status","closed");Je&&(It=It.eq("codigo_empresa",Je)),G&&(It=It.gte("fechado_em",G)),Te&&(It=It.lte("fechado_em",Te));const{data:jt,error:cr}=await It;if(cr)throw cr;const wr=(jt||[]).map(Bt=>Bt.id);console.debug("[Financeiro][VisaoGeral] Comandas fechadas:",wr.length);let gr=[];if(wr.length>0){let Bt=Ne.from("comanda_itens").select("produto_id, quantidade, preco_unitario, produtos!comanda_itens_produto_id_fkey(nome)").in("comanda_id",wr);Je&&(Bt=Bt.eq("codigo_empresa",Je));const{data:Xr}=await Bt;gr=Xr||[]}const zt={};(gr||[]).forEach(Bt=>{const Xr=Bt.produtos?.nome||"Produto sem nome",Vr=Number(Bt.quantidade||0),rn=Vr*Number(Bt.preco_unitario||0);zt[Xr]||(zt[Xr]={quantidade:0,valor:0}),zt[Xr].quantidade+=Vr,zt[Xr].valor+=rn});const Er=Object.entries(zt).map(([Bt,Xr])=>({nome:Bt,quantidade:Xr.quantidade,valor:Xr.valor})).sort((Bt,Xr)=>Xr.valor-Bt.valor);P(Er),w(Er.slice(0,5)),console.debug("[Financeiro][VisaoGeral] Produtos agregados:",{total:Er.length,top5:Er.slice(0,5)})}if(Je)try{let It=Ne.from("pagamentos").select("comanda_id, valor, status").eq("codigo_empresa",Je).neq("status","Cancelado").neq("status","Estornado");G&&(It=It.gte("recebido_em",G)),Te&&(It=It.lte("recebido_em",Te));const{data:jt}=await It;console.debug("[Financeiro][VisaoGeral] Pagamentos carregados:",(jt||[]).length);const cr=Array.from(new Set((jt||[]).map(Vr=>Vr.comanda_id).filter(Boolean)));let wr=[];if(cr.length>0){let Vr=Ne.from("comanda_clientes").select("comanda_id, cliente_id, nome_livre").in("comanda_id",cr).eq("codigo_empresa",Je);const{data:rn}=await Vr;wr=rn||[]}console.debug("[Financeiro][VisaoGeral] Vinculos comanda_clientes:",wr.length);const gr=Array.from(new Set(wr.map(Vr=>Vr.cliente_id).filter(Boolean))),zt={};if(gr.length>0){const{data:Vr}=await Ne.from("clientes").select("id, nome").in("id",gr).eq("codigo_empresa",Je);(Vr||[]).forEach(rn=>{zt[rn.id]=rn.nome})}const Er={};wr.forEach(Vr=>{const rn=Vr.nome_livre||zt[Vr.cliente_id]||`Cliente ${Vr.cliente_id||""}`;Er[Vr.comanda_id]||(Er[Vr.comanda_id]=new Set),rn&&Er[Vr.comanda_id].add(rn)});const Bt={};(jt||[]).forEach(Vr=>{const rn=Array.from(Er[Vr.comanda_id]||[]),na=Number(Vr.valor||0);if(rn.length===0){const Jr="Sem cliente";Bt[Jr]||(Bt[Jr]={id:null,nome:Jr,valor:0}),Bt[Jr].valor+=na}else rn.forEach(Jr=>{Bt[Jr]||(Bt[Jr]={id:null,nome:Jr,valor:0}),Bt[Jr].valor+=na})});try{const Vr=new Map(Object.values(zt).map((pe,Be)=>[Object.keys(zt)[Be],pe]));let rn=Ne.from("v_agendamento_participantes").select("agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text");Je&&(rn=rn.eq("codigo_empresa",Je));let{data:na}=await rn;na=na||[];const Jr=Array.from(new Set(na.map(pe=>pe.agendamento_id).filter(Boolean)));let ut=new Set;if(Jr.length>0){let pe=Ne.from("agendamentos").select("id, inicio").in("id",Jr);Je&&(pe=pe.eq("codigo_empresa",Je));const{data:Be}=await pe,ze=G?new Date(G).getTime():null,Me=Te?new Date(Te).getTime():null;(Be||[]).forEach(lt=>{const tt=lt?.inicio?new Date(lt.inicio).getTime():null;tt!=null&&(ze==null||tt>=ze)&&(Me==null||tt<=Me)&&ut.add(lt.id)})}const Br=na.filter(pe=>ut.has(pe.agendamento_id));console.debug("[Financeiro][Agendamentos] participantes no perodo (by agendamento.inicio):",Br.length);const ie=Array.from(new Set((Br||[]).map(pe=>pe.cliente_id).filter(Boolean).map(String))).filter(pe=>!Vr.has(pe));if(ie.length>0){const{data:pe}=await Ne.from("clientes").select("id,nome").in("id",ie);(pe||[]).forEach(Be=>Vr.set(String(Be.id),Be.nome))}(Br||[]).forEach(pe=>{const Be=String(pe.status_pagamento||pe.status_pagamento_text||"pago").toLowerCase();if(["cancelado","estornado"].includes(Be))return;const ze=pe.cliente_id,Me=ze?Vr.get(String(ze))||`Cliente ${ze}`:null;if(!Me)return;const lt=Number(pe.valor_cota||0);Bt[Me]||(Bt[Me]={id:ze||null,nome:Me,valor:0}),Bt[Me].valor+=lt})}catch{}const Xr=Object.values(Bt).sort((Vr,rn)=>rn.valor-Vr.valor);k(Xr),j(Xr.slice(0,5)),console.debug("[Financeiro][VisaoGeral] Clientes agregados:",{total:Xr.length,top5:Xr.slice(0,5)})}catch(It){console.error("Erro ao carregar top clientes:",It),j([]),k([])}if(Je&&G&&Te)try{let It=Ne.from("pagamentos").select("recebido_em, valor, status").eq("codigo_empresa",Je).gte("recebido_em",G).lte("recebido_em",Te).order("recebido_em",{ascending:!0});const{data:jt}=await It;let cr=Ne.from("v_agendamentos_detalhado").select("inicio, valor_pago, status_pagamento").eq("codigo_empresa",Je).eq("status_pagamento","Pago").gte("inicio",G).lte("inicio",Te).order("inicio",{ascending:!0});const{data:wr}=await cr,gr={};(jt||[]).forEach(Er=>{if(["Cancelado","Estornado"].includes(Er.status))return;const Bt=new Date(Er.recebido_em).toLocaleDateString("pt-BR");gr[Bt]=(gr[Bt]||0)+Number(Er.valor||0)}),(wr||[]).forEach(Er=>{const Bt=new Date(Er.inicio).toLocaleDateString("pt-BR");gr[Bt]=(gr[Bt]||0)+Number(Er.valor_pago||0)});const zt=Object.entries(gr).map(([Er,Bt])=>({data:Er,valor:Bt})).sort((Er,Bt)=>{const[Xr,Vr,rn]=Er.data.split("/").map(Number),[na,Jr,ut]=Bt.data.split("/").map(Number);return new Date(rn,Vr-1,Xr).getTime()-new Date(ut,Jr-1,na).getTime()});E(zt),console.debug("[Financeiro][VisaoGeral] Evoluo diria:",zt.length,"dias")}catch(It){console.warn("[Financeiro][VisaoGeral] Falha ao calcular evoluo diria:",It?.message),E([])}else E([])}catch(G){e({title:"Falha ao carregar viso geral",description:G?.message||"Tente novamente",variant:"destructive"})}finally{l(!1)}},Wn=async()=>{try{const G=t?.codigo_empresa,Te=await Qf({codigoEmpresa:G});if(te(!!Te),Te){const[Xt,It]=await Promise.all([kb({codigoEmpresa:G}),Ym({caixaSessaoId:Te.id,codigoEmpresa:G})]);Ee(Xt||null),We(It||[])}else Ee(null),We([]);const Je=await ote({limit:50,codigoEmpresa:G});if(console.log("[FinanceiroPage][loadCaixa] Histrico recebido de listarFechamentosCaixa:",Je?.length,"sesses"),Je&&Je.length>0){console.log("[FinanceiroPage][loadCaixa] Primeira sesso do histrico:",Je[0]);const Xt=Je.filter(It=>It.valor_final_dinheiro!=null);console.log("[FinanceiroPage][loadCaixa] Sesses com valor_final_dinheiro:",Xt.length,"/",Je.length)}ne(Je||[])}catch(G){e({title:"Falha ao carregar caixa",description:G?.message,variant:"destructive"})}},vi=async()=>{try{l(!0);const G=t?.codigo_empresa,Te=ba(c)||void 0,Je=wa(d)||void 0;let Xt=Ne.from("pagamentos").select("id, comanda_id, valor, status, metodo, recebido_em, origem, xml_chave, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").eq("codigo_empresa",G).order("recebido_em",{ascending:!1});Te&&(Xt=Xt.gte("recebido_em",Te)),Je&&(Xt=Xt.lte("recebido_em",Je));const{data:It}=await Xt;let jt=new Map,cr=new Map;try{const Bt=Array.from(new Set((It||[]).map(Xr=>Xr.comanda_id).filter(Boolean)));if(Bt.length>0){const{data:Xr}=await Ne.from("comandas").select("id, cliente_id, tipo").in("id",Bt).eq("codigo_empresa",G),Vr=Array.from(new Set((Xr||[]).map(Jr=>Jr.cliente_id).filter(Boolean)));let rn=new Map;if(Vr.length>0){const{data:Jr}=await Ne.from("clientes").select("id, nome").in("id",Vr).eq("codigo_empresa",G);rn=new Map((Jr||[]).map(ut=>[ut.id,ut.nome]))}for(const Jr of Xr||[]){if(!Jr)continue;const ut=rn.get(Jr.cliente_id)||null;jt.set(Jr.id,ut),cr.set(Jr.id,Jr.tipo||null)}const na=(Xr||[]).filter(Jr=>!Jr?.cliente_id).map(Jr=>Jr.id);if(na.length>0)try{const{data:Jr}=await Ne.from("comanda_clientes").select("comanda_id, cliente_id").in("comanda_id",na).eq("codigo_empresa",G),ut=Array.from(new Set((Jr||[]).map(Br=>Br.cliente_id).filter(Boolean)));if(ut.length>0){const{data:Br}=await Ne.from("clientes").select("id, nome").in("id",ut).eq("codigo_empresa",G),jr=new Map((Br||[]).map(ie=>[ie.id,ie.nome]));for(const ie of Jr||[]){const pe=jr.get(ie.cliente_id)||null;pe&&!jt.get(ie.comanda_id)&&jt.set(ie.comanda_id,pe)}}}catch{console.debug("[Financeiro][Recebimentos] comanda_clientes indisponvel (ok)")}}}catch(Bt){console.warn("[Financeiro][Recebimentos] Falha ao buscar clientes de comandas:",Bt?.message)}let wr=Ne.from("v_agendamentos_detalhado").select("agendamento_id, agendamento_codigo, inicio, quadra_nome, participante_nome, valor_cota, status_pagamento, finalizadora_nome").eq("codigo_empresa",G).eq("status_pagamento","Pago").order("inicio",{ascending:!1});Te&&(wr=wr.gte("inicio",Te)),Je&&(wr=wr.lte("inicio",Je));const{data:gr}=await wr,zt=(It||[]).map(Bt=>({id:Bt.id,origem:cr.get(Bt.comanda_id||"")==="balcao"?"Balco":"Comanda",comanda_id:Bt.comanda_id||null,recebido_em:Bt.recebido_em,finalizadoras:Bt.finalizadoras,metodo:Bt.metodo,valor:Bt.valor,status:Bt.status,descricao:jt.get(Bt.comanda_id||"")||null,fonte:Bt.origem||"manual",xml_chave:Bt.xml_chave||null})),Er=(gr||[]).map((Bt,Xr)=>({id:`ag-${Bt.agendamento_id}-${Xr}`,origem:"Agendamento",recebido_em:Bt.inicio,finalizadoras:Bt.finalizadora_nome?{nome:Bt.finalizadora_nome}:null,metodo:Bt.finalizadora_nome||null,valor:Bt.valor_cota,status:Bt.status_pagamento,descricao:`#${Bt.agendamento_codigo} - ${Bt.participante_nome} (${Bt.quadra_nome||""})`,agendamento_codigo:Bt.agendamento_codigo,quadra_nome:Bt.quadra_nome,participante_nome:Bt.participante_nome,fonte:null}));ue([...zt,...Er])}catch(G){e({title:"Falha ao carregar recebimentos",description:G?.message,variant:"destructive"})}finally{l(!1)}},ei=async()=>{try{l(!0);const G=t?.codigo_empresa,Te=ba(c)||void 0,Je=wa(d)||void 0;let Xt=Ne.from("v_agendamentos_detalhado").select("agendamento_codigo, inicio, quadra_nome, participante_nome, valor_cota, finalizadora_nome, status_pagamento").eq("codigo_empresa",G).order("inicio",{ascending:!1});Te&&(Xt=Xt.gte("inicio",Te)),Je&&(Xt=Xt.lte("inicio",Je));const{data:It}=await Xt;Y(It||[])}catch(G){e({title:"Falha ao carregar agendamentos",description:G?.message,variant:"destructive"})}finally{l(!1)}};v.useEffect(()=>{n({tab:a})},[a]);const ba=G=>{if(!G)return null;if(typeof G=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(G)){const[Te,Je,Xt]=G.split("-").map(Number);return new Date(Te,Je-1,Xt,0,0,0,0).toISOString()}return new Date(G).toISOString()},wa=G=>{if(!G)return null;if(typeof G=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(G)){const[Te,Je,Xt]=G.split("-").map(Number);return new Date(Te,Je-1,Xt,23,59,59,999).toISOString()}return new Date(G).toISOString()};v.useEffect(()=>{t?.codigo_empresa&&(a==="visao-geral"||a==="relatorios"?zn():a==="caixa"?Wn():a==="recebimentos"?vi():a==="agendamentos"&&ei())},[a,c,d,t?.codigo_empresa]);const xi=v.useMemo(()=>{const G=h?.totalPorFinalizadora||{},Te=Object.entries(G).map(([Je,Xt])=>({name:Je,valor:Number(Xt||0)}));return Te.sort((Je,Xt)=>Xt.valor-Je.valor),Te},[h]),[de,pt]=v.useState(null),[xt,yt]=v.useState(null),ot={start:90,end:-270},St=(G,Te,Je)=>G+(Te-G)*Je,Ht=G=>G<.5?4*G*G*G:1-Math.pow(-2*G+2,3)/2,Ut=G=>{const Te=Number(g||0),Je=Number(x||0),Xt=Math.max(1e-4,Te+Je),It=360*(Te/Xt);return G===0?{a:ot.start,b:ot.start-It}:{a:ot.start-It,b:ot.end}},[nr,ur]=v.useState({from:null,to:null,t:1}),mr=xt??de;v.useEffect(()=>{if(mr==null)return;const G=Ut(mr);ur(jt=>({from:jt.to||G,to:G,t:0}));let Te;const Je=performance.now(),Xt=380,It=jt=>{const cr=Math.min(1,(jt-Je)/Xt),wr=Ht(cr);ur(gr=>({...gr,t:wr})),cr<1&&(Te=requestAnimationFrame(It))};return Te=requestAnimationFrame(It),()=>Te&&cancelAnimationFrame(Te)},[mr,g,x]);const Ar=86,Nn=94,yn=80,[_r,Mn]=v.useState({from:[Ar,Ar],to:[Ar,Ar],t:1});v.useEffect(()=>{const G=mr===0?[Nn,yn]:mr===1?[yn,Nn]:[Ar,Ar];Mn(jt=>({from:jt.to||G,to:G,t:0}));let Te;const Je=performance.now(),Xt=380,It=jt=>{const cr=Math.min(1,(jt-Je)/Xt),wr=Ht(cr);Mn(gr=>({...gr,t:wr})),cr<1&&(Te=requestAnimationFrame(It))};return Te=requestAnimationFrame(It),()=>Te&&cancelAnimationFrame(Te)},[mr]);const Sa=({cx:G,cy:Te,outerRadius:Je})=>{if(!nr.from||!nr.to)return null;const Xt=St(nr.from.a,nr.to.a,nr.t),It=St(nr.from.b,nr.to.b,nr.t),jt=mr===0?"#22C55E":"#F59E0B";return o.jsx(BI,{cx:G,cy:Te,innerRadius:0,outerRadius:(Je||0)+4,startAngle:Xt,endAngle:It,fill:jt,fillOpacity:.18,stroke:"transparent"})},ja=v.useMemo(()=>{let G=_t;if(Ct){const Te=Ct.toLowerCase();G=G.filter(Je=>(Je.descricao||"").toLowerCase().includes(Te)||(Je.finalizadoras?.nome||"").toLowerCase().includes(Te)||String(Je.valor||"").includes(Te)||(Je.origem||"").toLowerCase().includes(Te))}return Wt!=="all"&&(G=G.filter(Te=>(Te.finalizadoras?.nome||Te.metodo)===Wt)),Ae!=="all"&&(G=G.filter(Te=>(Te.fonte||"manual")===Ae)),G},[_t,Ct,Wt,Ae]),Mi=v.useMemo(()=>{let G=Ot||[];if($e!=="all"&&(G=G.filter(Te=>(Te.status_pagamento||"").toLowerCase()===$e.toLowerCase())),it!=="all"&&(G=G.filter(Te=>(Te.finalizadora_nome||"")===it)),ve){const Te=ve.toLowerCase();G=G.filter(Je=>String(Je.agendamento_codigo||"").toLowerCase().includes(Te)||(Je.participante_nome||"").toLowerCase().includes(Te)||(Je.quadra_nome||"").toLowerCase().includes(Te))}return G},[Ot,$e,it,ve]);return o.jsx(o.Fragment,{children:o.jsxs(Pr.div,{variants:cat,initial:"hidden",animate:"visible",className:"space-y-6",children:[o.jsx(Pr.div,{variants:ys,className:"fx-card p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Financeiro"}),o.jsx("p",{className:"text-sm text-text-secondary",children:"Gesto completa das finanas da empresa"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[o.jsxs("div",{className:"flex flex-col justify-center flex-1 sm:flex-initial",children:[o.jsx("label",{className:"text-xs text-text-secondary mb-1",children:"Incio"}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:"h-9 w-full sm:w-[160px] pl-3 pr-3 flex items-center gap-2 justify-start text-left font-medium bg-black border-warning/40 text-white hover:bg-black/80 hover:border-warning",children:[o.jsx(Uu,{className:"h-5 w-5 text-warning flex-shrink-0"}),o.jsx("span",{className:"font-mono tracking-wide text-sm leading-none",children:c?ln(new Date(c+"T00:00:00"),"dd/MM/yyyy",{locale:Fc}):"Selecione"})]})}),o.jsx(ad,{className:"w-auto p-0 bg-black border-warning/40",align:"start",children:o.jsx(Ju,{mode:"single",selected:c?new Date(c+"T00:00:00"):void 0,onSelect:G=>G&&u(ln(G,"yyyy-MM-dd")),initialFocus:!0,classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md border-warning/40"}})})]})]}),o.jsxs("div",{className:"flex flex-col justify-center flex-1 sm:flex-initial",children:[o.jsx("label",{className:"text-xs text-text-secondary mb-1",children:"Fim"}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:"h-9 w-full sm:w-[160px] pl-3 pr-3 flex items-center gap-2 justify-start text-left font-medium bg-black border-warning/40 text-white hover:bg-black/80 hover:border-warning",children:[o.jsx(Uu,{className:"h-5 w-5 text-warning flex-shrink-0"}),o.jsx("span",{className:"font-mono tracking-wide text-sm leading-none",children:d?ln(new Date(d+"T00:00:00"),"dd/MM/yyyy",{locale:Fc}):"Selecione"})]})}),o.jsx(ad,{className:"w-auto p-0 bg-black border-warning/40",align:"start",children:o.jsx(Ju,{mode:"single",selected:d?new Date(d+"T00:00:00"):void 0,onSelect:G=>G&&f(ln(G,"yyyy-MM-dd")),initialFocus:!0,classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md border-warning/40"}})})]})]})]})]})}),o.jsxs(Vd,{value:a,onValueChange:i,children:[o.jsx("div",{className:"md:hidden mb-4",children:o.jsxs(Yn,{value:a,onValueChange:i,children:[o.jsx(Hn,{className:"w-full h-11 bg-black border-warning/40 text-white",children:o.jsx(Xn,{placeholder:"Selecione uma aba"})}),o.jsxs(Gn,{className:"bg-black text-white border-warning/40",children:[o.jsx(qt,{value:"visao-geral",children:"Viso Geral"}),o.jsx(qt,{value:"caixa",children:"Caixa"}),o.jsx(qt,{value:"recebimentos",children:"Recebimentos"}),o.jsx(qt,{value:"agendamentos",children:"Agendamentos"}),o.jsx(qt,{value:"relatorios",children:"Relatrios"})]})]})}),o.jsxs(Qu,{className:"hidden md:grid w-full grid-cols-5",children:[o.jsx(Na,{value:"visao-geral",children:"Viso Geral"}),o.jsx(Na,{value:"caixa",children:"Caixa"}),o.jsx(Na,{value:"recebimentos",children:"Recebimentos"}),o.jsx(Na,{value:"agendamentos",children:"Agendamentos"}),o.jsx(Na,{value:"relatorios",children:"Relatrios"})]}),o.jsxs(xo,{value:"visao-geral",className:"space-y-6 mt-6",children:[o.jsxs(Pr.div,{variants:ys,className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[o.jsx(p2,{icon:CW,label:"Total Geral",value:hr(Number(g||0)+Number(x||0)),color:"brand"}),o.jsx(p2,{icon:Zb,label:"Comandas",value:hr(g),color:"success"}),o.jsx(p2,{icon:Uu,label:"Agendamentos",value:hr(x),color:"success"}),o.jsx(p2,{icon:Pm,label:"XML (Recebimentos)",value:hr(I),color:"success"})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[o.jsx(Pm,{className:"w-4 h-4 text-brand"}),o.jsx("span",{children:"Proporo de Receita"})]})}),Number(g||0)+Number(x||0)===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem receitas no perodo."}):o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[o.jsx("div",{className:"w-full md:flex-1 h-[280px]",children:o.jsx(R2,{width:"100%",height:"100%",children:o.jsxs(q7e,{children:[o.jsxs(rd,{data:function(){const G=St(_r.from?.[0]??Ar,_r.to?.[0]??Ar,_r.t),Te=St(_r.from?.[1]??Ar,_r.to?.[1]??Ar,_r.t);return[{name:"Comandas",value:Number(g||0),fill:"#22C55E",outerRadius:G},{name:"Agendamentos",value:Number(x||0),fill:"#F59E0B",outerRadius:Te}]}(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:0,stroke:"transparent",label:!1,labelLine:!1,isAnimationActive:!0,animationBegin:50,animationDuration:500,startAngle:ot.start,endAngle:ot.end,activeIndex:mr,activeShape:void 0,onMouseEnter:(G,Te)=>pt(Te),onMouseLeave:()=>pt(null),onClick:(G,Te)=>{yt(Je=>Je===Te?null:Te),pt(Te)},children:[o.jsx(Yy,{fill:"#22C55E",style:Cr(0)},"c"),o.jsx(Yy,{fill:"#F59E0B",style:Cr(1)},"a")]}),Sa({cx:"50%",cy:"50%",outerRadius:92}),o.jsx(rd,{data:function(){const G=St(_r.from?.[0]??Ar,_r.to?.[0]??Ar,_r.t),Te=St(_r.from?.[1]??Ar,_r.to?.[1]??Ar,_r.t);return[{name:"Comandas",value:Number(g||0),fill:"transparent",outerRadius:G},{name:"Agendamentos",value:Number(x||0),fill:"transparent",outerRadius:Te}]}(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:0,stroke:"transparent",label:Kn,labelLine:!1,isAnimationActive:!1,startAngle:ot.start,endAngle:ot.end}),o.jsx(jl,{formatter:G=>hr(G),contentStyle:{background:"rgba(10, 10, 10, 0.95)",border:"1px solid #fbbf24",borderRadius:"8px",padding:"8px 10px",color:"#fff"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"},cursor:{fill:"rgba(251, 191, 36, 0.06)"}})]})})}),o.jsx("div",{className:"w-full md:w-64 space-y-3 md:pr-2",children:[{name:"Comandas",value:Number(g||0),color:"#22C55E"},{name:"Agendamentos",value:Number(x||0),color:"#F59E0B"}].map((G,Te)=>o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-md transition-all duration-200 ${de===Te?"bg-white/5":"hover:bg-white/5"} cursor-pointer ${xt!=null&&xt!==Te?"opacity-60":""}`,onMouseEnter:()=>pt(Te),onMouseLeave:()=>pt(null),onClick:()=>yt(Je=>Je===Te?null:Te),role:"button",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-sm",style:{backgroundColor:G.color}}),o.jsx("span",{className:"text-sm text-text-secondary",children:G.name})]}),o.jsx("div",{className:`text-sm font-semibold ${xt!=null&&xt!==Te?"opacity-70":""}`,children:hr(G.value)})]},G.name))})]})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[o.jsx(Pm,{className:"w-4 h-4 text-brand"}),o.jsx("span",{children:"Entradas por Finalizadora"})]})}),xi.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos no perodo."}):o.jsx("div",{className:"h-[280px]",children:o.jsx(R2,{width:"100%",height:"100%",children:o.jsxs(z7e,{data:xi,margin:{top:8,right:8,left:8,bottom:8},children:[o.jsx(UO,{strokeDasharray:"3 3",stroke:"#333"}),o.jsx(vp,{dataKey:"name",stroke:"#aaa"}),o.jsx(xp,{stroke:"#aaa",tickFormatter:G=>hr(G),width:80}),o.jsx(jl,{formatter:G=>hr(G),labelFormatter:G=>`Finalizadora: ${G}`,contentStyle:{background:"rgba(10, 10, 10, 0.95)",border:"1px solid #fbbf24",borderRadius:"8px",padding:"8px 12px",color:"#fff"},cursor:{fill:"rgba(251, 191, 36, 0.1)"}}),o.jsx(Wm,{}),o.jsx($p,{dataKey:"valor",name:"Valor",fill:"#fbbf24"})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4 border-0 ring-0 outline-none focus-visible:outline-none shadow-none cursor-pointer",onClick:()=>F(!0),children:[o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider mb-3",children:[o.jsx(bv,{className:"w-4 h-4 text-brand"}),o.jsx("span",{children:"Produtos mais vendidos"}),N.length>5&&o.jsx(ye,{variant:"outline",size:"xs",className:"ml-auto h-7 px-2",onClick:()=>F(!0),children:"Ver todos"})]}),b.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados no perodo."}):o.jsx("div",{className:"space-y-2",children:b.map((G,Te)=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[o.jsxs("span",{className:"text-sm text-text-primary",children:[Te+1,". ",G.nome]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-text-secondary",children:hr(G.valor)}),o.jsxs("span",{className:"text-sm font-bold text-brand",children:["x",G.quantidade]})]})]},Te))})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4 border-0 ring-0 outline-none focus-visible:outline-none shadow-none cursor-pointer",onClick:()=>H(!0),children:[o.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider mb-3",children:[o.jsx(As,{className:"w-4 h-4 text-brand"}),o.jsx("span",{children:"Clientes (por valor pago)"}),A.length>5&&o.jsx(ye,{variant:"outline",size:"xs",className:"ml-auto h-7 px-2",onClick:()=>H(!0),children:"Ver todos"})]}),_.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados no perodo."}):o.jsx("div",{className:"space-y-2",children:_.map((G,Te)=>o.jsxs("button",{className:"w-full flex items-center justify-between py-2 border-b border-border last:border-0 hover:bg-surface-2 rounded-sm px-2 text-left",onClick:()=>{oe(G),H(!0)},children:[o.jsxs("span",{className:"text-sm text-text-primary",children:[Te+1,". ",G.nome]}),o.jsx("span",{className:"text-sm font-bold text-success",children:hr(G.valor)})]},Te))})]})]})]}),o.jsx(xo,{value:"agendamentos",className:"space-y-6 mt-6",children:o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"Agendamentos (Pagamentos por Participante)"}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar (#cdigo, participante, quadra)",value:ve,onChange:G=>Ve(G.target.value),className:"pl-10 w-full md:w-[260px] bg-black border-warning/40 text-white placeholder:text-white/60"})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[o.jsxs(Yn,{value:$e,onValueChange:Le,children:[o.jsx(Hn,{className:"w-full md:w-[170px] h-9 bg-black border-warning/40 text-white",children:o.jsx(Xn,{placeholder:"Todos os Status"})}),o.jsxs(Gn,{className:"bg-black text-white border-warning/40",children:[o.jsx(qt,{value:"all",children:"Todos os Status"}),o.jsx(qt,{value:"Pago",children:"Pago"}),o.jsx(qt,{value:"Pendente",children:"Pendente"}),o.jsx(qt,{value:"Cancelado",children:"Cancelado"})]})]}),o.jsxs(Yn,{value:it,onValueChange:Ye,children:[o.jsx(Hn,{className:"w-full md:w-[220px] h-9 bg-black border-warning/40 text-white",children:o.jsx(Xn,{placeholder:"Todas as Finalizadoras"})}),o.jsxs(Gn,{className:"bg-black text-white border-warning/40",children:[o.jsx(qt,{value:"all",children:"Todas as Finalizadoras"}),[...new Set((Ot||[]).map(G=>G.finalizadora_nome).filter(Boolean))].map(G=>o.jsx(qt,{value:G,children:G},G))]})]})]}),o.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>{try{const G=Mi||[],Je=[["Data/Hora","Cdigo","Quadra","Participante","Finalizadora","Valor","Status"].join(";")];for(const zt of G){const Er=[zt.inicio?new Date(zt.inicio).toLocaleString("pt-BR"):"",zt.agendamento_codigo??"",(zt.quadra_nome??"").replaceAll('"','""'),(zt.participante_nome??"").replaceAll('"','""'),(zt.finalizadora_nome??"").replaceAll('"','""'),String(qr(zt.valor_cota)).replace(".",","),zt.status_pagamento??""].map(Bt=>`"${String(Bt)}"`).join(";");Je.push(Er)}const Xt="\uFEFF"+Je.join(`
`),It=new Blob([Xt],{type:"text/csv;charset=utf-8;"}),jt=URL.createObjectURL(It),cr=document.createElement("a");cr.href=jt;const wr=c?new Date(c+"T00:00:00").toLocaleDateString("pt-BR"):"",gr=d?new Date(d+"T00:00:00").toLocaleDateString("pt-BR"):"";cr.download=`agendamentos_${wr}_a_${gr}.csv`,document.body.appendChild(cr),cr.click(),document.body.removeChild(cr),URL.revokeObjectURL(jt)}catch(G){e({title:"Falha ao exportar CSV",description:G?.message,variant:"destructive"})}},children:[o.jsx(po,{className:"h-4 w-4 mr-2"})," Exportar CSV"]})]})]}),s?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),o.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):Mi.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros no perodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Data/Hora"}),o.jsx(Kr,{children:"Cdigo"}),o.jsx(Kr,{children:"Quadra"}),o.jsx(Kr,{children:"Participante"}),o.jsx(Kr,{children:"Finalizadora"}),o.jsx(Kr,{className:"text-right",children:"Valor"}),o.jsx(Kr,{children:"Status"})]})}),o.jsx(_s,{children:Mi.map((G,Te)=>o.jsxs(ma,{children:[o.jsx(Dr,{children:G.inicio?new Date(G.inicio).toLocaleString("pt-BR"):""}),o.jsxs(Dr,{children:["#",G.agendamento_codigo||""]}),o.jsx(Dr,{children:G.quadra_nome||""}),o.jsx(Dr,{children:G.participante_nome||""}),o.jsx(Dr,{children:G.finalizadora_nome||""}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor_cota)}),o.jsx(Dr,{children:G.status_pagamento||""})]},`${G.agendamento_codigo}-${Te}`))})]})}),o.jsx("div",{className:"md:hidden space-y-3",children:Mi.map((G,Te)=>o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"text-sm font-semibold text-text-primary",children:["#",G.agendamento_codigo||""]}),o.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${G.status_pagamento==="Pago"?"bg-success/20 text-success":G.status_pagamento==="Cancelado"?"bg-danger/20 text-danger":"bg-warning/20 text-warning"}`,children:G.status_pagamento||"Pendente"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Data/Hora:"}),o.jsx("span",{className:"text-text-primary",children:G.inicio?new Date(G.inicio).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Quadra:"}),o.jsx("span",{className:"text-text-primary font-medium",children:G.quadra_nome||""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Participante:"}),o.jsx("span",{className:"text-text-primary",children:G.participante_nome||""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Finalizadora:"}),o.jsx("span",{className:"text-text-primary",children:G.finalizadora_nome||""})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50",children:[o.jsx("span",{className:"text-text-secondary",children:"Valor da Cota:"}),o.jsx("span",{className:"font-bold text-lg text-success",children:hr(G.valor_cota)})]})]})]},`${G.agendamento_codigo}-${Te}`))})]})]})}),o.jsx(xo,{value:"caixa",className:"space-y-6 mt-6",children:o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[o.jsx("h3",{className:"text-base font-bold",children:"Fechamentos Anteriores"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",onClick:Va,children:[o.jsx(po,{className:"h-4 w-4 mr-2"})," CSV"]}),o.jsxs(ye,{variant:"outline",size:"sm",onClick:ui,children:[o.jsx(Hp,{className:"h-4 w-4 mr-2"})," PDF"]})]})]}),be.length===0?o.jsx("div",{className:"text-sm text-text-secondary",children:"Nenhum fechamento encontrado."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Aberto em"}),o.jsx(Kr,{children:"Fechado em"}),o.jsx(Kr,{className:"text-right",children:"Saldo Inicial"}),o.jsx(Kr,{className:"text-right",children:"Saldo Final (contado)"}),o.jsx(Kr,{children:"Status"})]})}),o.jsxs(_s,{children:[(()=>{console.log("[FinanceiroPage][Render] Renderizando histrico, total de sesses:",be.length);const G=be.filter(Te=>Te.valor_final_dinheiro!=null);return console.log("[FinanceiroPage][Render] Sesses com valor_final_dinheiro no render:",G.length),be.length>0&&console.log("[FinanceiroPage][Render] Primeira sesso no array history:",be[0]),null})(),be.map(G=>o.jsxs(ma,{className:"cursor-pointer hover:bg-surface-2",onClick:async()=>{bt(!0),Qe(!0),mt(null);try{const Te=t?.codigo_empresa,Je=typeof performance<"u"&&performance.now?performance.now():Date.now();console.log("[Caixa][Fechamento][Open]",{sessaoId:G.id,from:G.aberto_em,to:G.fechado_em,codigo:Te});let Xt=await ZS({caixaSessaoId:G.id,codigoEmpresa:Te}),jt=(Br=>{if(!Br)return null;if(Br.total_bruto!=null||Br.por_finalizadora!=null){let jr=Br.por_finalizadora;if(jr&&typeof jr=="string")try{jr=JSON.parse(jr)}catch{jr={}}return{from:Br.periodo_de||null,to:Br.periodo_ate||null,totalPorFinalizadora:jr||{},totalEntradas:Number(Br.total_entradas||0),totalVendasBrutas:Number(Br.total_bruto||0),totalDescontos:Number(Br.total_descontos||0),totalVendasLiquidas:Number(Br.total_liquido||0)}}return Br})(Xt);jt||(console.log("[Caixa][Fechamento] Snapshot ausente, calculando resumo por perodo..."),jt=await fc({from:G.aberto_em,to:G.fechado_em||new Date().toISOString(),codigoEmpresa:Te}));const cr={...G,saldo_inicial:Xt&&typeof Xt.saldo_inicial<"u"?Number(Xt.saldo_inicial):G.saldo_inicial,saldo_final:Xt&&typeof Xt.saldo_final<"u"?Number(Xt.saldo_final):G.saldo_final};if(!jt||!jt.totalPorFinalizadora||Object.keys(jt.totalPorFinalizadora).length===0)try{const Br=G.aberto_em,jr=G.fechado_em||new Date().toISOString();let ie=Ne.from("pagamentos").select("metodo, valor, status, recebido_em, finalizadoras:finalizadoras!pagamentos_finalizadora_id_fkey(nome)").gte("recebido_em",Br).lte("recebido_em",jr);Te&&(ie=ie.eq("codigo_empresa",Te));const{data:pe}=await ie,Be={};let ze=0;for(const Me of pe||[]){if(!((Me.status||"Pago")!=="Cancelado"&&(Me.status||"Pago")!=="Estornado"))continue;const tt=Me.finalizadoras?.nome||Me.metodo||"Outros",tr=Number(Me.valor||0);Be[tt]=(Be[tt]||0)+tr,ze+=tr}jt={...jt||{},totalPorFinalizadora:Be,totalEntradas:Number(jt?.totalEntradas||0)||ze},console.log("[Caixa][Fechamento][FallbackPF]",{methods:Object.keys(Be).length})}catch{}const gr=await Ym({caixaSessaoId:G.id,codigoEmpresa:Te}),zt=Xt&&Xt.movimentos?Xt.movimentos:null,Er=G.aberto_em,Bt=G.fechado_em||new Date().toISOString();let Xr=Ne.from("pagamentos").select("id, valor, status, metodo, recebido_em, finalizadoras:finalizadoras!pagamentos_finalizadora_id_fkey(nome)").gte("recebido_em",Er).lte("recebido_em",Bt).order("recebido_em",{ascending:!1});Te&&(Xr=Xr.eq("codigo_empresa",Te));const{data:Vr}=await Xr;console.log("[Caixa][Fechamento][Pays]",{count:(Vr||[]).length});const rn=Xt&&typeof Xt.valor_final_dinheiro<"u"?Number(Xt.valor_final_dinheiro):null;mt({resumo:jt,movimentacoes:gr,movimentosAgg:zt,pagamentos:Vr||[],sessao:cr,valorFinalContado:rn});const na=typeof performance<"u"&&performance.now?performance.now():Date.now(),Jr=Array.isArray(gr)?gr.length:0,ut=jt&&jt.totalPorFinalizadora?Object.keys(jt.totalPorFinalizadora).length:0;console.log("[Caixa][Fechamento][Loaded]",{sessaoId:G.id,finCount:ut,movCount:Jr,ms:Math.round(na-Je)})}catch(Te){console.error("[Caixa][Fechamento][Error]",{sessaoId:G.id,message:Te?.message,code:Te?.code}),e({title:"Falha ao carregar fechamento",description:Te?.message||"Tente novamente",variant:"destructive"})}finally{Qe(!1)}},children:[o.jsx(Dr,{children:G.aberto_em?new Date(G.aberto_em).toLocaleString("pt-BR"):""}),o.jsx(Dr,{children:G.fechado_em?new Date(G.fechado_em).toLocaleString("pt-BR"):""}),o.jsx(Dr,{className:"text-right",children:hr(G.saldo_inicial)}),o.jsx(Dr,{className:"text-right",children:G.valor_final_dinheiro!=null?hr(G.valor_final_dinheiro):""}),o.jsx(Dr,{children:String(G.status||"").toLowerCase()==="open"?"Aberto":"Fechado"})]},G.id))]})]})}),o.jsx("div",{className:"md:hidden space-y-3",children:be.map(G=>o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 cursor-pointer hover:bg-surface-2/80 transition-colors",onClick:async()=>{bt(!0),Qe(!0),mt(null);try{const Te=t?.codigo_empresa;let Je=await ZS({caixaSessaoId:G.id,codigoEmpresa:Te}),It=(zt=>{if(!zt)return null;if(zt.total_bruto!=null||zt.por_finalizadora!=null){let Er=zt.por_finalizadora;if(Er&&typeof Er=="string")try{Er=JSON.parse(Er)}catch{Er={}}return{from:zt.periodo_de||null,to:zt.periodo_ate||null,totalPorFinalizadora:Er||{},totalEntradas:Number(zt.total_entradas||0),totalVendasBrutas:Number(zt.total_bruto||0),totalDescontos:Number(zt.total_descontos||0),totalVendasLiquidas:Number(zt.total_liquido||0)}}return zt})(Je);It||(It=await fc({from:G.aberto_em,to:G.fechado_em||new Date().toISOString(),codigoEmpresa:Te}));const jt={...G,saldo_inicial:Je&&typeof Je.saldo_inicial<"u"?Number(Je.saldo_inicial):G.saldo_inicial,saldo_final:Je&&typeof Je.saldo_final<"u"?Number(Je.saldo_final):G.saldo_final},cr=await Ym({caixaSessaoId:G.id,codigoEmpresa:Te}),wr=Je&&Je.movimentos?Je.movimentos:null,gr=Je&&typeof Je.valor_final_dinheiro<"u"?Number(Je.valor_final_dinheiro):null;mt({resumo:It,movimentacoes:cr,movimentosAgg:wr,sessao:jt,pagamentos:[],valorFinalContado:gr})}catch(Te){console.error("[Caixa][Fechamento][Error]",Te),e({title:"Erro ao carregar detalhes",description:Te?.message,variant:"destructive"})}finally{Qe(!1)}},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"text-sm font-semibold text-text-primary",children:["Sesso #",G.id]}),o.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${G.status==="fechado"?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:String(G.status||"").toLowerCase()==="open"?"Aberto":"Fechado"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Aberto em:"}),o.jsx("span",{className:"text-text-primary",children:G.aberto_em?new Date(G.aberto_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Fechado em:"}),o.jsx("span",{className:"text-text-primary",children:G.fechado_em?new Date(G.fechado_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Saldo Inicial:"}),o.jsx("span",{className:"font-semibold text-info",children:hr(G.saldo_inicial)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Saldo Final (contado):"}),o.jsx("span",{className:"font-semibold text-success",children:G.valor_final_dinheiro!=null?hr(G.valor_final_dinheiro):""})]})]}),o.jsx("div",{className:"mt-3 text-xs text-text-muted text-center",children:"Toque para ver detalhes"})]},G.id))})]})]})}),o.jsx(xo,{value:"recebimentos",className:"space-y-6 mt-6",children:o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"Todos os Recebimentos"}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar...",value:Ct,onChange:G=>At(G.target.value),className:"pl-10 w-full md:w-[200px]"})]}),o.jsxs(Yn,{value:Ae,onValueChange:qe,children:[o.jsx(Hn,{className:"w-full md:w-[160px] h-9 bg-black border-warning/40 text-white",children:o.jsx(Xn,{placeholder:"Todas as Fontes"})}),o.jsxs(Gn,{className:"bg-black text-white border-warning/40",children:[o.jsx(qt,{value:"all",children:"Todas as Fontes"}),o.jsx(qt,{value:"manual",children:"Manual"}),o.jsx(qt,{value:"xml",children:"XML"})]})]}),o.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>{try{const G=ja||[],Je=[["Data/Hora","Origem","Fonte","Descrio","Finalizadora","Valor","Status"].join(";")];for(const zt of G){const Er=[zt.recebido_em?new Date(zt.recebido_em).toLocaleString("pt-BR"):"",zt.origem??"",zt.fonte??"",(zt.descricao??"").replaceAll('"','""'),(zt.finalizadoras?.nome||zt.metodo||"").replaceAll('"','""'),String(qr(zt.valor)).replace(".",","),zt.status??""].map(Bt=>`"${String(Bt)}"`).join(";");Je.push(Er)}const Xt="\uFEFF"+Je.join(`
`),It=new Blob([Xt],{type:"text/csv;charset=utf-8;"}),jt=URL.createObjectURL(It),cr=c?new Date(c+"T00:00:00").toLocaleDateString("pt-BR"):"",wr=d?new Date(d+"T00:00:00").toLocaleDateString("pt-BR"):"",gr=document.createElement("a");gr.href=jt,gr.download=`recebimentos_${cr}_a_${wr}.csv`,document.body.appendChild(gr),gr.click(),document.body.removeChild(gr),URL.revokeObjectURL(jt)}catch(G){e({title:"Falha ao exportar CSV",description:G?.message,variant:"destructive"})}},children:[o.jsx(po,{className:"h-4 w-4 mr-2"})," Exportar CSV"]})]})]}),s?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),o.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):ja.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros no perodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Data/Hora"}),o.jsx(Kr,{children:"Origem"}),o.jsx(Kr,{children:"Fonte"}),o.jsx(Kr,{children:"Descrio"}),o.jsx(Kr,{children:"Finalizadora"}),o.jsx(Kr,{className:"text-right",children:"Valor"}),o.jsx(Kr,{children:"Status"})]})}),o.jsx(_s,{children:ja.map(G=>o.jsxs(ma,{className:"cursor-pointer hover:bg-surface-2",onClick:()=>{st(G),Xe(!0)},children:[o.jsx(Dr,{children:G.recebido_em?new Date(G.recebido_em).toLocaleString("pt-BR"):""}),o.jsx(Dr,{children:G.origem||""}),o.jsx(Dr,{children:G.fonte?G.fonte.toUpperCase():""}),o.jsx(Dr,{className:"truncate max-w-[260px]",title:G.descricao||"",children:G.descricao||""}),o.jsx(Dr,{children:G.finalizadoras?.nome||G.metodo||""}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)}),o.jsx(Dr,{children:G.status||""})]},G.id))})]})}),o.jsx("div",{className:"md:hidden space-y-3",children:ja.map(G=>o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 cursor-pointer hover:bg-surface-2/80 transition-colors",onClick:()=>{st(G),Xe(!0)},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"text-sm font-semibold text-text-primary",children:G.origem||"Recebimento"}),o.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${G.status==="Pago"?"bg-success/20 text-success":G.status==="Cancelado"?"bg-danger/20 text-danger":"bg-warning/20 text-warning"}`,children:G.status||"Pendente"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Data/Hora:"}),o.jsx("span",{className:"text-text-primary",children:G.recebido_em?new Date(G.recebido_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Fonte:"}),o.jsx("span",{className:"text-text-primary font-medium",children:G.fonte?G.fonte.toUpperCase():""})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-secondary",children:"Finalizadora:"}),o.jsx("span",{className:"text-text-primary",children:G.finalizadoras?.nome||G.metodo||""})]}),G.descricao&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-text-secondary",children:"Descrio:"}),o.jsx("span",{className:"text-text-primary text-xs bg-surface/50 p-2 rounded",children:G.descricao})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50",children:[o.jsx("span",{className:"text-text-secondary",children:"Valor:"}),o.jsx("span",{className:"font-bold text-lg text-success",children:hr(G.valor)})]})]}),o.jsx("div",{className:"mt-3 text-xs text-text-muted text-center",children:"Toque para ver detalhes"})]},G.id))})]})]})}),o.jsxs(xo,{value:"relatorios",className:"space-y-6 mt-6",children:[o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[o.jsx(Gs,{className:"w-5 h-5 text-success"}),"Faturamento Consolidado"]}),o.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Resumo geral das receitas no perodo"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const Te=[["Mtrica","Valor"],["Receita de Comandas",hr(g)],["Receita de Agendamentos",hr(x)],["Receita Total",hr(Number(g||0)+Number(x||0))],["Perodo",`${c||"N/A"} at ${d||"N/A"}`]].map(jt=>jt.map(cr=>`"${cr}"`).join(";")).join(`
`),Je=new Blob(["\uFEFF"+Te],{type:"text/csv;charset=utf-8;"}),Xt=URL.createObjectURL(Je),It=document.createElement("a");It.href=Xt,It.download=`faturamento_consolidado_${ln(new Date,"yyyy-MM-dd")}.csv`,It.click(),URL.revokeObjectURL(Xt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[o.jsx(po,{className:"w-4 h-4 mr-2"}),"CSV"]}),o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const G=[["Receita de Comandas",hr(g)],["Receita de Agendamentos",hr(x)],["Receita Total",hr(Number(g||0)+Number(x||0))]];ya("Faturamento Consolidado",["Mtrica","Valor"],G,"faturamento_consolidado")},children:[o.jsx(Hp,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"p-4 bg-success/5 border border-success/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Comandas"}),o.jsx("div",{className:"text-2xl font-bold text-success",children:hr(g)}),o.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Vendas no perodo"})]}),o.jsxs("div",{className:"p-4 bg-purple-500/5 border border-purple-500/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Agendamentos"}),o.jsx("div",{className:"text-2xl font-bold text-purple-400",children:hr(x)}),o.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Reservas pagas"})]}),o.jsxs("div",{className:"p-4 bg-brand/5 border border-brand/20 rounded-lg",children:[o.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Total"}),o.jsx("div",{className:"text-2xl font-bold text-brand",children:hr(Number(g||0)+Number(x||0))}),o.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Perodo selecionado"})]})]})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[o.jsx(Pm,{className:"w-5 h-5 text-info"}),"Pagamentos por Mtodo"]}),o.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Distribuio por finalizadora"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-info/10 border-info/40 text-info hover:bg-info/20",onClick:()=>{const G=h?.totalPorFinalizadora||{},Te=Object.entries(G).map(([gr,zt])=>[gr,hr(zt)]).sort((gr,zt)=>{const Er=Number(String(gr[1]).replace(/[^\d,]/g,"").replace(",","."));return Number(String(zt[1]).replace(/[^\d,]/g,"").replace(",","."))-Er}),Je=Object.values(G).reduce((gr,zt)=>gr+zt,0),It=[["Mtodo de Pagamento","Valor","% do Total"],...Te.map(([gr,zt])=>{const Bt=((Object.entries(G).find(([Xr])=>Xr===gr)?.[1]||0)/Je*100).toFixed(1)+"%";return[gr,zt,Bt]}),["TOTAL",hr(Je),"100%"]].map(gr=>gr.map(zt=>`"${zt}"`).join(";")).join(`
`),jt=new Blob(["\uFEFF"+It],{type:"text/csv;charset=utf-8;"}),cr=URL.createObjectURL(jt),wr=document.createElement("a");wr.href=cr,wr.download=`pagamentos_por_metodo_${ln(new Date,"yyyy-MM-dd")}.csv`,wr.click(),URL.revokeObjectURL(cr),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[o.jsx(po,{className:"w-4 h-4 mr-2"}),"CSV"]}),o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-info/10 border-info/40 text-info hover:bg-info/20",onClick:()=>{const G=h?.totalPorFinalizadora||{},Te=Object.values(G).reduce((Xt,It)=>Xt+It,0),Je=Object.entries(G).sort(([,Xt],[,It])=>It-Xt).map(([Xt,It])=>[Xt,hr(It),(It/Te*100).toFixed(1)+"%"]);Je.push(["TOTAL",hr(Te),"100%"]),ya("Pagamentos por Mtodo",["Mtodo","Valor","% do Total"],Je,"pagamentos_por_metodo")},children:[o.jsx(Hp,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),Object.keys(h?.totalPorFinalizadora||{}).length===0?o.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem pagamentos no perodo."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Mtodo de Pagamento"}),o.jsx(Kr,{className:"text-right",children:"Valor"}),o.jsx(Kr,{className:"text-right",children:"% do Total"})]})}),o.jsxs(_s,{children:[Object.entries(h?.totalPorFinalizadora||{}).sort(([,G],[,Te])=>Te-G).map(([G,Te])=>{const Je=Object.values(h?.totalPorFinalizadora||{}).reduce((It,jt)=>It+jt,0),Xt=(Te/Je*100).toFixed(1);return o.jsxs(ma,{children:[o.jsx(Dr,{className:"font-medium",children:G}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(Te)}),o.jsxs(Dr,{className:"text-right text-text-secondary",children:[Xt,"%"]})]},G)}),o.jsxs(ma,{className:"bg-surface-2 font-bold",children:[o.jsx(Dr,{children:"TOTAL"}),o.jsx(Dr,{className:"text-right",children:hr(Object.values(h?.totalPorFinalizadora||{}).reduce((G,Te)=>G+Te,0))}),o.jsx(Dr,{className:"text-right",children:"100%"})]})]})]})})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[o.jsx(bv,{className:"w-5 h-5 text-purple-400"}),"Produtos Mais Vendidos"]}),o.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Top produtos por faturamento"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-purple-500/10 border-purple-500/40 text-purple-400 hover:bg-purple-500/20",onClick:()=>{const Te=[["Posio","Produto","Faturamento"],...N.slice(0,50).map((jt,cr)=>[cr+1,jt.nome,hr(jt.valor)])].map(jt=>jt.map(cr=>`"${cr}"`).join(";")).join(`
`),Je=new Blob(["\uFEFF"+Te],{type:"text/csv;charset=utf-8;"}),Xt=URL.createObjectURL(Je),It=document.createElement("a");It.href=Xt,It.download=`produtos_vendidos_${ln(new Date,"yyyy-MM-dd")}.csv`,It.click(),URL.revokeObjectURL(Xt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[o.jsx(po,{className:"w-4 h-4 mr-2"}),"CSV"]}),o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-purple-500/10 border-purple-500/40 text-purple-400 hover:bg-purple-500/20",onClick:()=>{const G=N.slice(0,50).map((Te,Je)=>[Je+1,Te.nome,hr(Te.valor)]);ya("Produtos Mais Vendidos",["#","Produto","Faturamento"],G,"produtos_vendidos")},children:[o.jsx(Hp,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),N.length===0?o.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem produtos vendidos no perodo."}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{className:"w-16",children:"#"}),o.jsx(Kr,{children:"Produto"}),o.jsx(Kr,{className:"text-right",children:"Faturamento"})]})}),o.jsx(_s,{children:N.slice(0,20).map((G,Te)=>o.jsxs(ma,{children:[o.jsx(Dr,{className:"text-text-secondary font-mono",children:Te+1}),o.jsx(Dr,{className:"font-medium",children:G.nome}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)})]},`${G.nome}-${Te}`))})]}),N.length>20&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs(ye,{variant:"ghost",size:"sm",className:"text-brand hover:text-brand/80",onClick:()=>F(!0),children:["Ver todos os ",N.length," produtos"]})})]})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[o.jsx(As,{className:"w-5 h-5 text-warning"}),"Clientes que Mais Consomem"]}),o.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Ranking por faturamento total"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-warning/10 border-warning/40 text-warning hover:bg-warning/20",onClick:()=>{const Te=[["Posio","Cliente","Faturamento"],...A.slice(0,50).map((jt,cr)=>[cr+1,jt.nome,hr(jt.valor)])].map(jt=>jt.map(cr=>`"${cr}"`).join(";")).join(`
`),Je=new Blob(["\uFEFF"+Te],{type:"text/csv;charset=utf-8;"}),Xt=URL.createObjectURL(Je),It=document.createElement("a");It.href=Xt,It.download=`clientes_top_${ln(new Date,"yyyy-MM-dd")}.csv`,It.click(),URL.revokeObjectURL(Xt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[o.jsx(po,{className:"w-4 h-4 mr-2"}),"CSV"]}),o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-warning/10 border-warning/40 text-warning hover:bg-warning/20",onClick:()=>{const G=A.slice(0,50).map((Te,Je)=>[Je+1,Te.nome,hr(Te.valor)]);ya("Clientes que Mais Consomem",["#","Cliente","Total Gasto"],G,"clientes_top")},children:[o.jsx(Hp,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),A.length===0?o.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem dados de clientes no perodo."}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{className:"w-16",children:"#"}),o.jsx(Kr,{children:"Cliente"}),o.jsx(Kr,{className:"text-right",children:"Total Gasto"})]})}),o.jsx(_s,{children:A.slice(0,20).map((G,Te)=>o.jsxs(ma,{children:[o.jsx(Dr,{className:"text-text-secondary font-mono",children:Te+1}),o.jsx(Dr,{className:"font-medium",children:G.nome}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)})]},`${G.nome}-${Te}`))})]}),A.length>20&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs(ye,{variant:"ghost",size:"sm",className:"text-brand hover:text-brand/80",onClick:()=>H(!0),children:["Ver todos os ",A.length," clientes"]})})]})]}),o.jsxs(Pr.div,{variants:ys,className:"fx-card p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[o.jsx(e1,{className:"w-5 h-5 text-success"}),"Evoluo Diria de Receitas"]}),o.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Faturamento dia a dia no perodo"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const Te=[["Data","Receita"],...M.map(jt=>[jt.data,hr(jt.valor)])].map(jt=>jt.map(cr=>`"${cr}"`).join(";")).join(`
`),Je=new Blob(["\uFEFF"+Te],{type:"text/csv;charset=utf-8;"}),Xt=URL.createObjectURL(Je),It=document.createElement("a");It.href=Xt,It.download=`evolucao_diaria_${ln(new Date,"yyyy-MM-dd")}.csv`,It.click(),URL.revokeObjectURL(Xt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[o.jsx(po,{className:"w-4 h-4 mr-2"}),"CSV"]}),o.jsxs(ye,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const G=M.map(Te=>[Te.data,hr(Te.valor)]);ya("Evoluo Diria de Receitas",["Data","Receita"],G,"evolucao_diaria")},children:[o.jsx(Hp,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),M.length===0?o.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem dados de evoluo no perodo."}):o.jsx("div",{className:"h-80",children:o.jsx(R2,{width:"100%",height:"100%",children:o.jsxs(B7e,{data:M,margin:{top:5,right:20,bottom:5,left:0},children:[o.jsx(UO,{strokeDasharray:"3 3",stroke:"#2a2a2a"}),o.jsx(vp,{dataKey:"data",stroke:"#888",tick:{fill:"#888",fontSize:11},tickFormatter:G=>{const Te=G.split("/");return`${Te[0]}/${Te[1]}`}}),o.jsx(xp,{stroke:"#888",tick:{fill:"#888",fontSize:11},tickFormatter:G=>`R$ ${(G/1e3).toFixed(0)}k`}),o.jsx(jl,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"},labelStyle:{color:"#fff"},itemStyle:{color:"#22C55E"},formatter:G=>[hr(G),"Receita"]}),o.jsx(v1,{type:"monotone",dataKey:"valor",stroke:"#22C55E",strokeWidth:2,dot:{fill:"#22C55E",r:4},activeDot:{r:6}})]})})})]})]})]}),o.jsx(cn,{open:Ge,onOpenChange:Xe,children:o.jsxs(on,{className:"max-w-lg",children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-xl font-bold",children:"Detalhes do Recebimento"}),o.jsx(hn,{children:ht?.origem==="Comanda"?"Operao de comanda":ht?.origem==="Agendamento"?"Operao de agendamento":"Operao"})]}),ht&&o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Data/Hora"}),o.jsx("div",{className:"font-medium",children:ht.recebido_em?new Date(ht.recebido_em).toLocaleString("pt-BR"):""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Valor"}),o.jsx("div",{className:"font-semibold",children:hr(ht.valor)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Origem"}),o.jsx("div",{children:ht.origem||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Fonte"}),o.jsx("div",{children:ht.fonte?ht.fonte.toUpperCase():""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Finalizadora"}),o.jsx("div",{children:ht.finalizadoras?.nome||ht.metodo||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Status"}),o.jsx("div",{children:ht.status||""})]})]}),ht.origem==="Comanda"&&o.jsxs("div",{className:"mt-2 p-3 rounded border border-border",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Comanda"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Cliente"}),o.jsx("div",{children:ht.descricao||""})]})}),o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"text-text-muted mb-1",children:"Produtos"}),Zt?o.jsx("div",{className:"text-xs text-text-muted",children:"Carregando itens..."}):lr.length===0?o.jsx("div",{className:"text-xs text-text-muted",children:"Sem itens encontrados."}):o.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:lr.map((G,Te)=>o.jsxs("div",{className:"text-xs flex justify-between gap-3",children:[o.jsxs("div",{className:"truncate",children:[o.jsx("span",{className:"font-mono",children:qr(G.quantidade)}),o.jsx("span",{children:" x "}),o.jsx("span",{className:"font-medium",children:G.descricao})]}),o.jsx("div",{className:"whitespace-nowrap",children:hr(Number(G.preco_unitario||0)*Number(G.quantidade||0))})]},Te))})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"text-text-muted mb-1",children:"Pagamentos"}),Yr.length===0?o.jsx("div",{className:"text-xs text-text-muted",children:"Sem pagamentos adicionais."}):o.jsxs("div",{className:"space-y-1",children:[Yr.map((G,Te)=>o.jsxs("div",{className:"text-xs flex justify-between gap-3",children:[o.jsx("div",{className:"truncate",children:o.jsx("span",{className:"font-medium",children:G.finalizadoras?.nome||G.metodo||""})}),o.jsx("div",{className:"whitespace-nowrap",children:hr(G.valor)})]},G.id||Te)),o.jsxs("div",{className:"text-xs flex justify-between gap-3 pt-2 border-t border-border",children:[o.jsx("div",{className:"font-semibold",children:"Total"}),o.jsx("div",{className:"font-semibold",children:hr(Yr.reduce((G,Te)=>G+Number(Te.valor||0),0))})]})]})]})]}),ht.origem==="Agendamento"&&o.jsxs("div",{className:"mt-2 p-3 rounded border border-border",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Agendamento"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Cdigo"}),o.jsxs("div",{className:"font-mono",children:["#",ht.agendamento_codigo]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-text-muted",children:"Participante"}),o.jsx("div",{children:ht.participante_nome})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-text-muted",children:"Quadra"}),o.jsx("div",{children:ht.quadra_nome||""})]})]})]})]})]})}),o.jsx(cn,{open:W,onOpenChange:F,children:o.jsxs(on,{className:"max-w-2xl bg-surface text-text-primary border-0",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Todos os Produtos"}),o.jsx(hn,{children:"Ordenados por valor de vendas"})]}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Produto"}),o.jsx(Kr,{className:"text-center",children:"Quantidade"}),o.jsx(Kr,{className:"text-right",children:"Valor Total"})]})}),o.jsx(_s,{children:N.map((G,Te)=>o.jsxs(ma,{children:[o.jsxs(Dr,{children:[Te+1,". ",G.nome]}),o.jsxs(Dr,{className:"text-center",children:["x",G.quantidade]}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)})]},`${G.nome}-${Te}`))})]})})]})}),o.jsx(cn,{open:Qt,onOpenChange:bt,children:o.jsxs(on,{className:"sm:max-w-[900px] w-full max-h-[85vh] overflow-y-auto bg-surface text-text-primary border-0",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Fechamento do Caixa"}),o.jsxs(hn,{children:[ft?.sessao?.aberto_em?`${new Date(ft.sessao.aberto_em).toLocaleString("pt-BR")}`:"",ft?.sessao?.fechado_em?`  ${new Date(ft.sessao.fechado_em).toLocaleString("pt-BR")}`:""]})]}),Pt?o.jsx("div",{className:"text-sm text-text-muted",children:"Carregando..."}):ft?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Inicial"}),o.jsx("p",{className:"text-2xl font-bold tabular-nums",children:hr(ft.sessao?.saldo_inicial)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Total do Dia"}),o.jsx("p",{className:"text-2xl font-bold text-success tabular-nums",children:(()=>{const G=Number(ft.resumo?.totalEntradas||0),Te=Array.isArray(ft.movimentacoes)?ft.movimentacoes:[];let Je=0,Xt=0,It=0,jt=0;for(const wr of Te){const gr=String(wr?.tipo||"").toLowerCase(),zt=Number(wr?.valor||0);gr==="suprimento"?Je+=zt:gr==="sangria"?Xt+=zt:gr==="troco"?It+=zt:gr==="ajuste"&&(jt+=zt)}const cr=G+Je+jt-Xt-It;return hr(cr)})()})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Final (contado)"}),o.jsx("p",{className:"text-2xl font-bold tabular-nums",children:(()=>{const G=ft&&typeof ft.valorFinalContado=="number"?ft.valorFinalContado:null;return G!=null?hr(G):""})()})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Descontos"}),o.jsx("p",{className:"text-2xl font-bold text-warning tabular-nums",children:hr(ft.resumo?.totalDescontos)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Lquido"}),o.jsx("p",{className:"text-2xl font-bold tabular-nums",children:hr(ft.resumo?.totalVendasLiquidas)})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Entradas por Finalizadora"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:ft.resumo?.totalPorFinalizadora&&Object.keys(ft.resumo.totalPorFinalizadora).length>0?Object.entries(ft.resumo.totalPorFinalizadora).map(([G,Te])=>o.jsxs("div",{className:"bg-surface-2 rounded-md p-2 border border-border flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-text-secondary truncate",children:String(G)}),o.jsx("span",{className:"text-sm font-semibold",children:hr(Te)})]},G)):o.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos."})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Movimentaes"}),!ft.movimentacoes||ft.movimentacoes.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem movimentaes nesta sesso."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Data"}),o.jsx(Kr,{children:"Tipo"}),o.jsx(Kr,{children:"Obs"}),o.jsx(Kr,{className:"text-right",children:"Valor"})]})}),o.jsx(_s,{children:ft.movimentacoes.map(G=>o.jsxs(ma,{children:[o.jsx(Dr,{children:G.created_at?new Date(G.created_at).toLocaleString("pt-BR"):""}),o.jsx(Dr,{className:"capitalize",children:G.tipo||""}),o.jsx(Dr,{className:"truncate max-w-[280px]",title:G.observacao||"",children:G.observacao||""}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)})]},G.id))})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Recebimentos"}),!ft.pagamentos||ft.pagamentos.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem recebimentos no perodo deste caixa."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Data/Hora"}),o.jsx(Kr,{children:"Finalizadora"}),o.jsx(Kr,{className:"text-right",children:"Valor"}),o.jsx(Kr,{children:"Status"})]})}),o.jsx(_s,{children:ft.pagamentos.map(G=>o.jsxs(ma,{children:[o.jsx(Dr,{children:G.recebido_em?new Date(G.recebido_em).toLocaleString("pt-BR"):""}),o.jsx(Dr,{children:G.finalizadoras?.nome||G.metodo||""}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)}),o.jsx(Dr,{children:G.status||""})]},G.id))})]})})]})]}):o.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados."})]})}),o.jsx(cn,{open:$,onOpenChange:G=>{H(G),G||(oe(null),U([]))},children:o.jsxs(on,{className:"max-w-2xl bg-surface text-text-primary border-0",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Clientes"}),o.jsx(hn,{children:"Ordenados por valor pago no perodo selecionado"})]}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto border border-border rounded-md",children:o.jsxs(bs,{children:[o.jsx(ws,{children:o.jsxs(ma,{children:[o.jsx(Kr,{children:"Cliente"}),o.jsx(Kr,{className:"text-right",children:"Pago"})]})}),o.jsx(_s,{children:A.map((G,Te)=>o.jsxs(ma,{className:"cursor-pointer hover:bg-brand/10",onClick:async()=>{K(!0),oe(G),V(!0);try{const Je=ba(c),Xt=wa(d),It=(G.nome||"").trim(),jt=t?.codigo_empresa;let cr=Ne.from("clientes").select("id, nome").eq("codigo_empresa",jt).ilike("nome",`%${It}%`);const{data:wr}=await cr,gr=new Set((wr||[]).map(jr=>jr.id));let zt=Ne.from("comanda_clientes").select("comanda_id").eq("codigo_empresa",jt).ilike("nome_livre",`%${It}%`);const{data:Er}=await zt;let Bt=new Set((Er||[]).map(jr=>jr.comanda_id));if(gr.size>0){let jr=Ne.from("comanda_clientes").select("comanda_id, cliente_id").eq("codigo_empresa",jt).in("cliente_id",Array.from(gr));const{data:ie}=await jr;(ie||[]).forEach(pe=>Bt.add(pe.comanda_id))}const Xr=Array.from(Bt);let Vr=Ne.from("pagamentos").select("id, valor, recebido_em, metodo, finalizadoras!pagamentos_finalizadora_id_fkey(nome), comanda_id, status").in("comanda_id",Xr).neq("status","Cancelado").neq("status","Estornado").order("recebido_em",{ascending:!1}).limit(50);Je&&(Vr=Vr.gte("recebido_em",Je)),Xt&&(Vr=Vr.lte("recebido_em",Xt));const{data:rn}=await Vr,na=rn||[],Jr=Array.from(new Set(na.map(jr=>jr.comanda_id).filter(Boolean))),ut={};if(Jr.length>0){let jr=Ne.from("comandas").select("id, tipo, mesa_id").in("id",Jr);const{data:ie}=await jr,pe=Array.from(new Set((ie||[]).map(ze=>ze.mesa_id).filter(Boolean))),Be={};if(pe.length>0){let ze=Ne.from("mesas").select("id, numero, nome").in("id",pe);const{data:Me}=await ze;(Me||[]).forEach(lt=>{Be[lt.id]=(lt.nome||`Mesa ${lt.numero||""}`).trim()})}(ie||[]).forEach(ze=>{let Me="";const lt=String(ze?.tipo||"").toLowerCase();lt==="balcao"||lt==="balco"?Me="Balco":lt==="mesa"||ze.mesa_id?Me=Be[ze.mesa_id]||"Mesa":lt==="agendamento"&&(Me="Agendamento"),ut[ze.id]=Me})}let Br=na.map(jr=>({...jr,origem:jr.comanda_id&&ut[jr.comanda_id]||""}));try{const jr=t?.codigo_empresa;let ie=[];if(gr&&gr.size>0){let tt=Ne.from("v_agendamento_participantes").select("id, agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text").in("cliente_id",Array.from(gr));jr&&(tt=tt.eq("codigo_empresa",jr));const{data:tr}=await tt;if(ie=tr||[],ie.length===0&&jr){let Lt=Ne.from("v_agendamento_participantes").select("id, agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text").in("cliente_id",Array.from(gr));const{data:pr}=await Lt;ie=pr||[]}}let pe=[...ie];const Be=Array.from(new Set(pe.map(tt=>tt.agendamento_id).filter(Boolean)));let ze=new Set;const Me={};if(Be.length>0){let tt=Ne.from("agendamentos").select("id, inicio").in("id",Be);jr&&(tt=tt.eq("codigo_empresa",jr));const{data:tr}=await tt,Lt=Je?new Date(Je).getTime():null,pr=Xt?new Date(Xt).getTime():null;(tr||[]).forEach(kr=>{const wn=kr?.inicio?new Date(kr.inicio).getTime():null;wn!=null&&(Lt==null||wn>=Lt)&&(pr==null||wn<=pr)&&ze.add(kr.id),kr?.id&&(Me[kr.id]=kr.inicio||null)})}pe=pe.filter(tt=>ze.has(tt.agendamento_id));const lt=new Set;console.debug("[Financeiro][Agendamentos][Detalhe] encontrados:",pe.length),pe.forEach(tt=>{const tr=`${tt.id}`;if(lt.has(tr))return;lt.add(tr);const Lt=String(tt.status_pagamento||tt.status_pagamento_text||"pago").toLowerCase();if(["cancelado","estornado"].includes(Lt))return;const pr=tt.finalizadora_nome||tt.metodo||tt.metodo_pagamento||tt.forma_pagamento||"Agendamento";Br.push({id:`ag-${tt.id}`,recebido_em:Me[tt.agendamento_id]||null,finalizadoras:pr?{nome:pr}:null,metodo:pr,origem:"Agendamento",valor:tt.valor_cota})})}catch{}U(Br)}finally{V(!1)}},children:[o.jsx(Dr,{children:G.nome}),o.jsx(Dr,{className:"text-right font-semibold",children:hr(G.valor)})]},`${G.nome}-${Te}`))})]})})]})}),o.jsx(cn,{open:Z,onOpenChange:K,children:o.jsxs(on,{className:"max-w-5xl w-[95vw] md:w-[90vw] max-h-[85vh] bg-surface text-text-primary border-0 overflow-hidden flex flex-col",children:[o.jsxs(an,{className:"flex-shrink-0",children:[o.jsx(en,{className:"text-lg md:text-xl",children:"Detalhes do Cliente"}),o.jsx(hn,{className:"text-sm md:text-base",children:ce?.nome})]}),ce?o.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 md:p-4 bg-surface-2 rounded-lg flex-shrink-0",children:[o.jsx("span",{className:"text-sm md:text-base text-text-secondary",children:"Total Pago no Perodo"}),o.jsx("span",{className:"text-lg md:text-2xl font-bold text-success",children:hr(ce.valor)})]}),J?o.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Carregando detalhes..."}):L.length===0?o.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem pagamentos no perodo selecionado."}):o.jsx("div",{className:"flex-1 overflow-auto border border-border rounded-md",children:o.jsxs(bs,{children:[o.jsx(ws,{className:"sticky top-0 bg-surface z-10",children:o.jsxs(ma,{children:[o.jsx(Kr,{className:"text-xs md:text-sm w-[70px] md:w-auto",children:"Data"}),o.jsx(Kr,{className:"text-xs md:text-sm w-[80px] md:w-auto",children:"Finaliz."}),o.jsx(Kr,{className:"text-xs md:text-sm w-[60px] md:w-auto",children:"Origem"}),o.jsx(Kr,{className:"text-right text-xs md:text-sm w-[70px] md:w-auto",children:"Valor"})]})}),o.jsx(_s,{children:L.map(G=>o.jsxs(ma,{children:[o.jsx(Dr,{className:"text-xs md:text-sm w-[70px] md:w-auto",children:o.jsx("div",{className:"text-[10px] md:text-xs leading-tight",children:G.recebido_em?new Date(G.recebido_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):""})}),o.jsx(Dr,{className:"text-xs md:text-sm w-[80px] md:w-auto",children:o.jsx("div",{className:"truncate max-w-[80px] md:max-w-[200px] text-[10px] md:text-xs",title:G.finalizadoras?.nome||G.metodo||"",children:G.finalizadoras?.nome||G.metodo||""})}),o.jsx(Dr,{className:"text-xs md:text-sm w-[60px] md:w-auto",children:o.jsx("div",{className:"truncate max-w-[60px] md:max-w-[150px] text-[10px] md:text-xs",title:G.origem||"",children:G.origem||""})}),o.jsx(Dr,{className:"text-right font-semibold text-xs md:text-sm w-[70px] md:w-auto",children:o.jsx("div",{className:"text-[10px] md:text-xs whitespace-nowrap",children:hr(G.valor)})})]},G.id))})]})})]}):o.jsx("div",{className:"text-sm text-text-muted py-8 text-center",children:"Nenhum cliente selecionado"})]})})]})})}const dat={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.06,delayChildren:.05}}},AM={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35}}};function fat({children:e,className:t=""}){return o.jsx(Pr.div,{variants:AM,className:`fx-card ${t}`,children:e})}const BP=({icon:e,title:t,value:r,subtitle:n,color:a})=>{const i=e;return o.jsxs(Pr.div,{variants:AM,className:"bg-surface rounded-lg border-2 border-border hover:border-border-hover p-4 flex flex-col justify-between gap-2 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-text-secondary text-sm font-semibold",children:t}),o.jsx(i,{className:`w-5 h-5 ${a}`})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r}),o.jsx("p",{className:"text-xs text-text-muted",children:n})]})]})};function T9({label:e,...t}){return o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:e}),o.jsx("input",{...t,className:`bg-surface-2 border border-border rounded-md px-3 py-2 text-sm ${t.className||""}`})]})}function hat(){const{toast:e}=Qa(),{userProfile:t,authReady:r}=Wi(),n=v.useRef(!1),[a,i]=v.useState(()=>{try{const V=JSON.parse(localStorage.getItem("quadras:list")||"[]");return Array.isArray(V)?V:[]}catch{return[]}}),[s,l]=v.useState(()=>{try{const V=JSON.parse(localStorage.getItem("quadras:list")||"[]");return!(Array.isArray(V)&&V.length>0)}catch{return!0}}),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[h,m]=v.useState({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),[g,p]=v.useState(""),[x,y]=v.useState(!1),[b,w]=v.useState(null),[_,j]=v.useState({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),[N,P]=v.useState(""),[A,k]=v.useState(!0),[M,E]=v.useState({mostUsed:"-",topClient:"-",totalBookings:"-"});v.useEffect(()=>{if(!c)return;const V=setTimeout(()=>{console.error("[Quadras] add/update stuck >15s",{route:"/quadras",codigo_empresa:t?.codigo_empresa,editingId:b,formQuadra:h,editForm:_})},15e3);return()=>clearTimeout(V)},[c,t?.codigo_empresa,b,h,_]);const I=V=>{if(!V)return null;const[Z,K]=String(V).split(":");return`${Z.padStart(2,"0")}:${K.padStart(2,"0")}:00`},O=V=>{const Z=String(V??"").replace(/\D/g,"");if(!Z)return"";const K=(Number(Z)/100).toFixed(2),[he,te]=K.split(".");return`${he.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${te}`},R=V=>{if(V==null||V==="")return NaN;const Z=String(V).replace(/\./g,"").replace(",","."),K=parseFloat(Z);return Number.isFinite(K)?K:NaN},B=(V,Z=!1)=>{if(V==null||!Number.isFinite(Number(V)))return"-";const he=Number(V).toFixed(2).split("."),te=he[0],me=he[1],Se=`${te.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${me}`;return Z?`R$ ${Se}`:Se},W=V=>{if(!V)return"";const[Z,K]=String(V).split(":");return`${String(Z).padStart(2,"0")}:${String(K).padStart(2,"0")}`},F=V=>{if(!V)return 0;const[Z,K]=String(V).split(":").map(Number);return(Z||0)*60+(K||0)},$=V=>{if(!V)return!1;const Z=String(V).split(":");if(Z.length<2)return!1;const K=Number(Z[1]);return K===0||K===30},H=V=>{if(!V)return"";const[Z,K]=String(V).split(":");let he=Math.max(0,Math.min(23,parseInt(Z||"0",10))),te=Math.max(0,Math.min(59,parseInt(K||"0",10)));const me=Math.round(te/30);if(me>=2?(he+=1,te=0):te=me*30,he>=24)return"23:59";const Ee=String(he).padStart(2,"0"),Se=String(te).padStart(2,"0");return`${Ee}:${Se}`},ce=async()=>{if(!t?.codigo_empresa)return;const V=a&&a.length>0;V||l(!0);const{data:Z,error:K}=await Ne.from("quadras").select("*").eq("codigo_empresa",t.codigo_empresa).order("nome",{ascending:!0});if(K){if(!n.current){n.current=!0,setTimeout(ce,800),V||l(!1);return}e({title:"Erro ao carregar quadras",description:K.message}),V||l(!1);return}const he=Z||[];if(he.length===0&&V&&!n.current){n.current=!0,setTimeout(ce,600),V||l(!1);return}n.current=!1,i(he);try{localStorage.setItem("quadras:list",JSON.stringify(he))}catch{}V||l(!1)},oe=V=>{w(V.id),j({nome:V.nome||"",modalidades:Array.isArray(V.modalidades)?V.modalidades:V.modalidades?[V.modalidades]:[],tipo:V.tipo||"Descoberta",status:V.status||"Ativa",hora_inicio:W(V.hora_inicio||"06:00:00"),hora_fim:W(V.hora_fim||"24:00:00")||"23:59",valor_hora:V.valor!=null&&V.valor!==""?O(String((Number(V.valor)*2).toFixed(2))):""}),P(""),y(!0)},L=async()=>{if(!_.nome?.trim()){e({title:"Nome obrigatrio",description:"Informe um nome para a quadra."});return}if(!_.hora_inicio||!_.hora_fim){e({title:"Horrio obrigatrio",description:"Informe horrio de abertura e fechamento."});return}if(!$(_.hora_inicio)||!$(_.hora_fim)){e({title:"Intervalo invlido",description:"Use apenas horrios em horas cheias ou :30."});return}if(F(_.hora_fim)<=F(_.hora_inicio)){e({title:"Horrio invlido",description:"Fechamento deve ser depois da abertura."});return}if(!_.modalidades?.length){e({title:"Adicione ao menos uma modalidade",description:"Informe e adicione uma modalidade usando o boto +."});return}if(!t?.codigo_empresa||!b){e({title:"Atualizao indisponvel",description:"Dados insuficientes para atualizar."});return}u(!0);const V={nome:_.nome.trim(),modalidades:_.modalidades,tipo:_.tipo,status:_.status,hora_inicio:I(_.hora_inicio),hora_fim:I(_.hora_fim==="24:00"?"23:59":_.hora_fim)};if(_.valor_hora!=null&&String(_.valor_hora).trim()!==""){const te=R(_.valor_hora);!Number.isNaN(te)&&Number.isFinite(te)&&(V.valor=Math.round(te/2*100)/100)}else V.valor=null;const Z=(te,me)=>Promise.race([te,new Promise((Ee,Se)=>setTimeout(()=>Se(new Error("Timeout ao atualizar quadra (>12s)")),me))]);let K,he;try{({data:K,error:he}=await Z(Ne.from("quadras").update(V).eq("codigo_empresa",t.codigo_empresa).eq("id",b).select("id,nome,modalidades,tipo,status,hora_inicio,hora_fim,valor").single(),12e3))}catch(te){console.error("update timeout/error",te),e({title:"Tempo excedido",description:"Sem resposta do servidor ao atualizar. Verifique conexo e tente novamente."}),u(!1);return}if(u(!1),he){e({title:"Erro ao atualizar quadra",description:he.message});return}if(!K){await ce(),e({title:"Quadra atualizada",description:`${V.nome} foi atualizada.`}),y(!1),w(null),P("");return}e({title:"Quadra atualizada",description:`${K.nome} foi atualizada.`}),y(!1),w(null),P(""),i(te=>te.map(me=>me.id===K.id?K:me).sort((me,Ee)=>me.nome.localeCompare(Ee.nome)))};v.useEffect(()=>{try{const V=JSON.parse(localStorage.getItem("quadras:list")||"[]");Array.isArray(V)&&V.length&&a.length===0&&(i(V),l(!1))}catch{}},[]),v.useEffect(()=>{r&&t?.codigo_empresa&&(ce(),U())},[r,t?.codigo_empresa]);const U=async()=>{if(t?.codigo_empresa)try{const V=new Date;V.setDate(V.getDate()-30);const{data:Z}=await Ne.from("agendamentos").select("quadra_id, cliente_id, quadras!inner(nome), clientes(nome, codigo)").eq("codigo_empresa",t.codigo_empresa).gte("inicio",V.toISOString()).neq("status","canceled");if(!Z||Z.length===0){E({mostUsed:"Sem dados",topClient:"Sem dados",totalBookings:"0"});return}const K={};Z.forEach(Ee=>{const Se=Ee.quadras?.nome||"Sem nome";K[Se]=(K[Se]||0)+1});const he=Object.entries(K).sort((Ee,Se)=>Se[1]-Ee[1])[0],te={};Z.forEach(Ee=>{if(Ee.cliente_id&&Ee.clientes?.nome){const Se=Ee.clientes?.codigo;if(Se===0||Se==="0")return;const We=Ee.clientes.nome;te[We]=(te[We]||0)+1}});const me=Object.entries(te).sort((Ee,Se)=>Se[1]-Ee[1])[0];E({mostUsed:he?`${he[0]} (${he[1]})`:"Sem dados",topClient:me?`${me[0]} (${me[1]})`:"Sem dados",totalBookings:Z.length.toString()})}catch(V){console.error("Erro ao carregar stats:",V),E({mostUsed:"Erro",topClient:"Erro",totalBookings:"0"})}},J=async()=>{if(console.groupCollapsed("[Quadras] addQuadra: CLICK"),console.time("[Quadras] addQuadra duration"),console.log("pre-validate",{codigo_empresa:t?.codigo_empresa,formQuadra:h}),!h.nome?.trim()){e({title:"Nome obrigatrio",description:"Informe um nome para a quadra."}),console.warn("validation: missing nome"),console.groupEnd();return}if(!h.modalidades?.length){e({title:"Adicione ao menos uma modalidade",description:"Informe e adicione uma modalidade usando o boto +."});return}if(!h.hora_inicio||!h.hora_fim){e({title:"Horrio obrigatrio",description:"Informe horrio de abertura e fechamento."});return}if(!$(h.hora_inicio)||!$(h.hora_fim)){e({title:"Intervalo invlido",description:"Use apenas horrios em horas cheias ou :30."});return}if(F(h.hora_fim)<=F(h.hora_inicio)){e({title:"Horrio invlido",description:"Fechamento deve ser depois da abertura."});return}if(!t?.codigo_empresa){e({title:"Empresa no localizada",description:"Associe o usurio a uma empresa para cadastrar quadras."});return}u(!0),console.log("validated, building payload");const V={codigo_empresa:t.codigo_empresa,nome:h.nome.trim(),modalidades:h.modalidades,tipo:h.tipo,status:h.status,hora_inicio:I(h.hora_inicio),hora_fim:I(h.hora_fim==="24:00"?"23:59":h.hora_fim)};if(h.valor_hora!=null&&String(h.valor_hora).trim()!==""){const te=R(h.valor_hora);!Number.isNaN(te)&&Number.isFinite(te)&&(V.valor=Math.round(te/2*100)/100)}console.log("payload",V);const Z=(te,me)=>Promise.race([te,new Promise((Ee,Se)=>setTimeout(()=>Se(new Error("Timeout ao inserir quadra (>12s)")),me))]);let K,he;try{({data:K,error:he}=await Z(Ne.from("quadras").insert(V).select("id,nome,modalidades,tipo,status,hora_inicio,hora_fim,valor").single(),12e3))}catch(te){u(!1),console.error("insert timeout/error",te),e({title:"Tempo excedido",description:"Sem resposta do servidor ao cadastrar. Verifique conexo e tente novamente."}),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}if(u(!1),he){e({title:"Erro ao cadastrar quadra",description:he.message}),console.error("insert error",{code:he.code,message:he.message,details:he.details}),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}if(!K){console.warn("insert success sem representao; recarregando lista"),await ce(),e({title:"Quadra adicionada",description:`${V.nome} foi cadastrada.`}),m({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),f(!1),p(""),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}console.log("insert success",{id:K?.id,nome:K?.nome}),e({title:"Quadra adicionada",description:`${K.nome} foi cadastrada.`}),m({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),f(!1),p(""),i(te=>[K,...te].sort((me,Ee)=>me.nome.localeCompare(Ee.nome))),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd()};return o.jsx(o.Fragment,{children:o.jsxs(Pr.div,{variants:dat,initial:"hidden",animate:"visible",className:"space-y-6",children:[o.jsxs(Pr.div,{variants:AM,className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black text-text-primary tracking-tighter",children:"Controle de Quadras"}),o.jsx("p",{className:"text-text-secondary",children:"Gerencie as quadras e horrios disponveis."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ye,{variant:"outline",size:"icon",onClick:()=>k(V=>!V),title:A?"Ocultar resumo":"Mostrar resumo","aria-label":A?"Ocultar resumo":"Mostrar resumo",children:A?o.jsx(Jb,{className:"h-4 w-4"}):o.jsx(Qb,{className:"h-4 w-4"})}),o.jsx(ye,{onClick:()=>f(!0),className:"shadow-sm",children:"Adicionar Quadra"})]})]}),A&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsx(BP,{icon:t1,title:"Quadra Mais Usada",value:M.mostUsed,subtitle:"ltimos 30 dias",color:"text-brand"}),o.jsx(BP,{icon:As,title:"Cliente Top",value:M.topClient,subtitle:"Mais agendamentos no ms",color:"text-purple"}),o.jsx(BP,{icon:e1,title:"Total de Agendamentos",value:M.totalBookings,subtitle:"ltimos 30 dias",color:"text-success"})]}),o.jsxs(fat,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Quadras"}),o.jsx("div",{className:"text-xs text-text-muted",children:s?"Carregando...":`${a.length} registro(s)`})]}),!s&&a.length===0?o.jsxs("div",{className:"text-sm text-text-muted py-8 text-center",children:[o.jsx("div",{className:"font-medium mb-1",children:"Nenhuma quadra cadastrada"}),o.jsx("div",{className:"mb-4",children:'Clique em "Adicionar Quadra" para cadastrar a primeira.'}),o.jsx(ye,{onClick:()=>f(!0),children:"Adicionar Quadra"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-3",children:a.map(V=>o.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:$f(V.nome),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"},"aria-hidden":"true"}),o.jsx("span",{className:"font-semibold text-base text-text-primary truncate",children:V.nome})]}),o.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs border flex-shrink-0 ${V.status==="Ativa"?"bg-emerald-50/5 border-emerald-500/30 text-emerald-400":V.status==="Manuteno"?"bg-amber-50/5 border-amber-500/30 text-amber-400":"bg-surface-2 border-border text-text-muted"}`,children:V.status})]}),Array.isArray(V.modalidades)&&V.modalidades.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted mb-1 block",children:"Modalidades"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:V.modalidades.map(Z=>o.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-xs",children:Z},Z))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Valor/hora"}),o.jsx("span",{className:"text-sm font-medium",children:V.valor==null||V.valor===""?"-":B(Number(V.valor)*2,!0)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Funcionamento"}),o.jsxs("span",{className:"text-sm font-medium",children:[W(V.hora_inicio)," - ",W(V.hora_fim==="24:00:00"?"23:59:00":V.hora_fim)]})]})]}),o.jsx(ye,{variant:"outline",size:"sm",onClick:()=>oe(V),className:"w-full",children:"Editar Quadra"})]},V.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-border bg-surface-0",children:o.jsxs(bs,{children:[o.jsx(ws,{className:"bg-surface-2/60 backdrop-blur supports-[backdrop-filter]:bg-surface-2/70",children:o.jsxs(ma,{children:[o.jsx(Kr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Nome"}),o.jsx(Kr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Modalidades"}),o.jsx(Kr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Valor por hora"}),o.jsx(Kr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Funcionamento"}),o.jsx(Kr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Status"}),o.jsx(Kr,{className:"text-right text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Aes"})]})}),o.jsx(_s,{children:a.map(V=>o.jsxs(ma,{className:"hover:bg-surface-2/40 transition-colors",children:[o.jsx(Dr,{className:"font-medium text-sm md:text-base text-text-primary",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:$f(V.nome),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"},"aria-hidden":"true"}),o.jsx("span",{children:V.nome})]})}),o.jsx(Dr,{className:"text-sm md:text-base",children:Array.isArray(V.modalidades)&&V.modalidades.length>0?o.jsx("div",{className:"flex flex-wrap gap-1",children:V.modalidades.map(Z=>o.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-[11px] md:text-xs",children:Z},Z))}):V.modalidades||""}),o.jsx(Dr,{className:"text-sm md:text-base",children:V.valor==null||V.valor===""?"-":o.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-[11px] md:text-xs",children:B(Number(V.valor)*2,!0)})}),o.jsxs(Dr,{className:"text-sm md:text-base",children:[W(V.hora_inicio)," - ",W(V.hora_fim==="24:00:00"?"23:59:00":V.hora_fim)]}),o.jsx(Dr,{className:"text-sm md:text-base",children:o.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-[11px] md:text-xs border ${V.status==="Ativa"?"bg-emerald-50/5 border-emerald-500/30 text-emerald-400":V.status==="Manuteno"?"bg-amber-50/5 border-amber-500/30 text-amber-400":"bg-surface-2 border-border text-text-muted"}`,children:V.status})}),o.jsx(Dr,{className:"text-right",children:o.jsx(ye,{variant:"outline",size:"sm",onClick:()=>oe(V),className:"text-sm",children:"Editar"})})]},V.id))})]})})]})]}),o.jsx(cn,{open:d,onOpenChange:f,children:o.jsxs(on,{className:"sm:max-w-[520px]",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Adicionar Quadra"}),o.jsx(hn,{children:"Cadastre uma nova quadra da sua empresa."})]}),o.jsxs("div",{className:"grid gap-4 py-2",children:[o.jsx(T9,{label:"Nome",value:h.nome,onChange:V=>m({...h,nome:V.target.value}),placeholder:"Ex.: Quadra Society 2"}),o.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Modalidades"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:g,onChange:V=>p(V.target.value),onKeyDown:V=>{if(V.key==="Enter"){V.preventDefault();const Z=g.trim();if(!Z)return;m(K=>K.modalidades.some(te=>te.toLowerCase()===Z.toLowerCase())?K:{...K,modalidades:[...K.modalidades,Z]}),p("")}},placeholder:"Ex.: Society",className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-60 sm:w-72 focus:outline-none focus:ring-2 focus:ring-primary/30"}),o.jsx(ye,{type:"button",variant:"secondary",className:"bg-amber-500 hover:bg-amber-400 text-black disabled:opacity-50 disabled:cursor-not-allowed",disabled:!g.trim(),onClick:()=>{const V=g.trim();V&&(m(Z=>Z.modalidades.some(he=>he.toLowerCase()===V.toLowerCase())?Z:{...Z,modalidades:[...Z.modalidades,V]}),p(""))},"aria-label":"Adicionar modalidade",title:"Adicionar modalidade",children:"+"})]}),h.modalidades.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:h.modalidades.map(V=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border bg-surface-2 text-xs",children:[o.jsx("span",{className:"px-0.5",children:V}),o.jsx("button",{type:"button",className:"text-text-muted hover:text-destructive/80",onClick:()=>m(Z=>({...Z,modalidades:Z.modalidades.filter(K=>K!==V)})),"aria-label":`Remover ${V}`,title:`Remover ${V}`,children:""})]},V))})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Tipo"}),o.jsxs("select",{value:h.tipo,onChange:V=>m({...h,tipo:V.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[o.jsx("option",{children:"Descoberta"}),o.jsx("option",{children:"Coberta"})]})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Valor por hora (R$)"}),o.jsx("input",{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:h.valor_hora,onChange:V=>m({...h,valor_hora:O(V.target.value)}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-40"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Abertura"}),o.jsx("input",{type:"time",step:"1800",value:h.hora_inicio,onChange:V=>m({...h,hora_inicio:V.target.value}),onBlur:V=>m(Z=>({...Z,hora_inicio:H(V.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Fechamento"}),o.jsx("input",{type:"time",step:"1800",value:h.hora_fim,onChange:V=>m({...h,hora_fim:V.target.value}),onBlur:V=>m(Z=>({...Z,hora_fim:H(V.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Status"}),o.jsxs("select",{value:h.status,onChange:V=>m({...h,status:V.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[o.jsx("option",{children:"Ativa"}),o.jsx("option",{children:"Inativa"}),o.jsx("option",{children:"Manuteno"})]})]})]}),o.jsx($n,{children:o.jsx(ye,{onClick:J,disabled:c||h.modalidades.length===0,children:c?"Adicionando...":"Salvar"})})]})}),o.jsx(cn,{open:x,onOpenChange:y,children:o.jsxs(on,{className:"sm:max-w-[520px]",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Editar Quadra"}),o.jsx(hn,{children:"Atualize os dados da quadra selecionada."})]}),o.jsxs("div",{className:"grid gap-4 py-2",children:[o.jsx(T9,{label:"Nome",value:_.nome,onChange:V=>j({..._,nome:V.target.value}),placeholder:"Ex.: Quadra Society 2"}),o.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Modalidades"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:N,onChange:V=>P(V.target.value),onKeyDown:V=>{if(V.key==="Enter"){V.preventDefault();const Z=N.trim();if(!Z)return;j(K=>K.modalidades.some(te=>te.toLowerCase()===Z.toLowerCase())?K:{...K,modalidades:[...K.modalidades,Z]}),P("")}},placeholder:"Ex.: Society",className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-60 sm:w-72 focus:outline-none focus:ring-2 focus:ring-primary/30"}),o.jsx(ye,{type:"button",variant:"secondary",onClick:()=>{const V=N.trim();V&&(j(Z=>Z.modalidades.some(he=>he.toLowerCase()===V.toLowerCase())?Z:{...Z,modalidades:[...Z.modalidades,V]}),P(""))},children:"+"})]}),_.modalidades.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:_.modalidades.map(V=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border bg-surface-2 text-xs",children:[o.jsx("span",{className:"px-0.5",children:V}),o.jsx("button",{type:"button",className:"text-text-muted hover:text-destructive/80",onClick:()=>j(Z=>({...Z,modalidades:Z.modalidades.filter(K=>K!==V)})),"aria-label":`Remover ${V}`,title:`Remover ${V}`,children:""})]},V))})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Tipo"}),o.jsxs("select",{value:_.tipo,onChange:V=>j({..._,tipo:V.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[o.jsx("option",{children:"Descoberta"}),o.jsx("option",{children:"Coberta"})]})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Valor por hora (R$)"}),o.jsx("input",{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:_.valor_hora,onChange:V=>j({..._,valor_hora:O(V.target.value)}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-40"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Abertura"}),o.jsx("input",{type:"time",step:"1800",value:_.hora_inicio,onChange:V=>j({..._,hora_inicio:V.target.value}),onBlur:V=>j(Z=>({...Z,hora_inicio:H(V.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Fechamento"}),o.jsx("input",{type:"time",step:"1800",value:_.hora_fim,onChange:V=>j({..._,hora_fim:V.target.value}),onBlur:V=>j(Z=>({...Z,hora_fim:H(V.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Status"}),o.jsxs("select",{value:_.status,onChange:V=>j({..._,status:V.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[o.jsx("option",{children:"Ativa"}),o.jsx("option",{children:"Inativa"}),o.jsx("option",{children:"Manuteno"})]})]})]}),o.jsx($n,{children:o.jsx(ye,{onClick:L,disabled:c||_.modalidades.length===0,children:c?"Salvando...":"Salvar alteraes"})})]})})]})})}const mat={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.06,delayChildren:.05}}},pat={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35}}};function I9({children:e,className:t=""}){return o.jsx(Pr.div,{variants:pat,className:`fx-card ${t}`,children:e})}function gg({label:e,...t}){return o.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:e}),o.jsx("input",{...t,className:`bg-surface-2 border border-border rounded-md px-3 py-2 text-sm ${t.className||""}`})]})}function gat(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,18)}function vat(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,15)}function xat(){const{toast:e}=Qa(),{company:t,userProfile:r,reloadCompany:n}=Wi(),[a,i]=v.useState(!1),[s,l]=v.useState({razao_social:"",nome_fantasia:"",cnpj:"",email:"",telefone:"",endereco:"",logo_url:""}),c=v.useRef(null),[u,d]=v.useState(""),f=v.useRef(!0);v.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]),v.useEffect(()=>{(async()=>{try{const p=r?.codigo_empresa||null;if(!p)return;const x=`empresa:form:${p}`;try{const j=localStorage.getItem(x);if(j){const N=JSON.parse(j);N&&typeof N=="object"&&(l(P=>({...P,...N})),N.logo_url&&d(`${N.logo_url.split("?")[0]}?v=${Date.now()}`))}}catch{}const y=setTimeout(()=>{if(f.current)try{const j=localStorage.getItem(x);if(j){const N=JSON.parse(j);N&&typeof N=="object"&&(console.warn("[Empresas] slow fallback: using cached form"),l(P=>({...P,...N})),N.logo_url&&d(`${N.logo_url.split("?")[0]}?v=${Date.now()}`))}}catch{}},5e3),{data:b,error:w}=await Ne.from("empresas").select("*").eq("codigo_empresa",p).single();if(clearTimeout(y),w)throw w;if(!f.current)return;const _={razao_social:b?.razao_social||"",nome_fantasia:b?.nome_fantasia||b?.nome||"",cnpj:b?.cnpj||"",email:b?.email||"",telefone:b?.telefone||"",endereco:b?.endereco||"",logo_url:b?.logo_url||""};l(_),d(_.logo_url?`${_.logo_url.split("?")[0]}?v=${Date.now()}`:"");try{localStorage.setItem(x,JSON.stringify(_))}catch{}}catch(p){console.warn("Falha ao carregar empresa:",p)}})()},[r?.codigo_empresa]),v.useEffect(()=>{if(!s.logo_url){d("");return}const g=s.logo_url.split("?")[0];d(`${g}?v=${Date.now()}`)},[s.logo_url]);const h=async g=>{if(g.preventDefault(),!a){if(!s.razao_social?.trim()||!s.cnpj?.trim()){e({title:"Campos obrigatrios",description:"Preencha Razo Social e CNPJ."});return}if(!r?.codigo_empresa){e({title:"Empresa no vinculada",description:"No foi possvel identificar a empresa do usurio para salvar."});return}try{i(!0);const p={razao_social:s.razao_social||null,nome_fantasia:s.nome_fantasia||null,cnpj:s.cnpj?.replace(/\D/g,"")||null,email:s.email||null,telefone:s.telefone||null,endereco:s.endereco||null,logo_url:s.logo_url||null},{error:x}=await Ne.from("empresas").update(p).eq("codigo_empresa",r.codigo_empresa).select("id").single();if(x)throw x;await n?.(),e({title:"Dados salvos",description:"As informaes da empresa foram atualizadas."})}catch(p){console.error(p);const x=(p?.message||p?.hint||"").toString()||"No foi possvel salvar os dados. Verifique as permisses e tente novamente.";e({title:"Erro ao salvar",description:x})}finally{i(!1)}}},m=async g=>{try{const p=g.target.files?.[0];if(!p)return;if(!r?.codigo_empresa){e({title:"Empresa no vinculada",description:"Seu usurio no est associado a uma empresa."});return}const x=p.name.split(".").pop()?.toLowerCase()||"png",y=`${r.codigo_empresa}/logo.${x}`,{error:b}=await Ne.storage.from("logos").upload(y,p,{upsert:!0,contentType:p.type||void 0});if(b)throw b;const{data:w}=Ne.storage.from("logos").getPublicUrl(y),_=w?.publicUrl||"";l(j=>({...j,logo_url:_})),d(_?`${_}?v=${Date.now()}`:""),e({title:"Logo enviada",description:"A imagem foi carregada com sucesso. Lembre-se de salvar."})}catch(p){console.error("Falha no upload da logo:",p),e({title:"Erro no upload",description:"No foi possvel enviar a logo. Tente outro arquivo."})}finally{c.current&&(c.current.value="")}};return o.jsx(o.Fragment,{children:o.jsxs(Pr.div,{variants:mat,initial:"hidden",animate:"visible",className:"space-y-6",children:[o.jsx(I9,{children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Cadastros  Empresa"})})}),o.jsxs(I9,{children:[o.jsx("h2",{className:"text-lg font-bold text-text-primary mb-4",children:"Dados da Empresa"}),o.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsx(gg,{label:"Razo Social",value:s.razao_social,onChange:g=>l({...s,razao_social:g.target.value}),placeholder:"Ex.: Fluxo7 Arena LTDA"}),o.jsx(gg,{label:"Nome Fantasia",value:s.nome_fantasia,onChange:g=>l({...s,nome_fantasia:g.target.value}),placeholder:"Ex.: Fluxo7 Arena"}),o.jsx(gg,{label:"CNPJ",type:"text",inputMode:"numeric",value:s.cnpj,onChange:g=>l({...s,cnpj:gat(g.target.value)}),placeholder:"00.000.000/0000-00"}),o.jsx(gg,{label:"Email",type:"email",value:s.email,onChange:g=>l({...s,email:g.target.value}),placeholder:"contato@empresa.com"}),o.jsx(gg,{label:"Telefone",type:"tel",inputMode:"tel",value:s.telefone,onChange:g=>l({...s,telefone:vat(g.target.value)}),placeholder:"(11) 99999-9999"}),o.jsx(gg,{label:"Endereo",value:s.endereco,onChange:g=>l({...s,endereco:g.target.value}),placeholder:"Rua, nmero, bairro, cidade",className:"md:col-span-2 lg:col-span-2"}),o.jsx("div",{className:"md:col-span-2 lg:col-span-2 grid grid-cols-1 gap-3",children:o.jsxs("div",{className:"flex items-center gap-4",children:[u||s.logo_url?o.jsx("img",{src:u||s.logo_url,alt:"Logo da empresa",className:"w-16 h-16 rounded-md object-cover border border-border"}):o.jsx("div",{className:"w-16 h-16 rounded-md border border-dashed border-border/60 bg-surface-2/40 flex items-center justify-center text-xs text-text-muted",children:"Sem logo"}),o.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[o.jsx("span",{className:"text-xs text-text-muted",children:"Upload da Logo"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ye,{type:"button",variant:"outline",onClick:()=>c.current?.click(),className:"px-3",children:"Escolher imagem"}),o.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:m,className:"hidden"}),(u||s.logo_url)&&o.jsx("span",{className:"text-xs text-text-muted truncate max-w-[260px]",title:s.logo_url||u,children:"Logo selecionada"})]}),o.jsx("span",{className:"text-[11px] text-text-muted",children:"Formatos: PNG/JPG. Tamanho recomendado: 256x256."})]})]})}),o.jsx("div",{className:"flex items-end",children:o.jsx(ye,{type:"submit",className:"w-full md:w-auto",disabled:a,children:a?"Salvando...":"Salvar"})})]})]})]})})}const yat={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},W2={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},D9=[{codigo:"01",nome:"Dinheiro"},{codigo:"02",nome:"Cheque"},{codigo:"03",nome:"Carto de Crdito"},{codigo:"04",nome:"Carto de Dbito"},{codigo:"05",nome:"Carto da Loja (Private Label)"},{codigo:"10",nome:"Vale Alimentao"},{codigo:"11",nome:"Vale Refeio"},{codigo:"12",nome:"Vale Presente"},{codigo:"13",nome:"Vale Combustvel"},{codigo:"14",nome:"Duplicata Mercantil"},{codigo:"15",nome:"Boleto Bancrio"},{codigo:"16",nome:"Depsito Bancrio"},{codigo:"17",nome:"PIX Dinmico (QR-Code)"},{codigo:"18",nome:"Transferncia Bancria / Carteira Digital"},{codigo:"19",nome:"Programa de Fidelidade / Cashback"},{codigo:"20",nome:"PIX Esttico"},{codigo:"21",nome:"Crdito em Loja"},{codigo:"22",nome:"Pagamento Eletrnico no Informado"},{codigo:"90",nome:"Sem Pagamento"},{codigo:"99",nome:"Outros"}],zP=({icon:e,title:t,value:r,subtitle:n,color:a,onClick:i,isActive:s})=>o.jsx(Pr.div,{variants:W2,onClick:i,className:kt("bg-surface rounded-lg border md:border-2 p-3 md:p-4 transition-all text-center h-[90px] md:h-auto",i?"cursor-pointer hover:shadow-md":"",s?`border-${a} bg-${a}/5`:"border-border",i&&!s?"hover:border-border-hover":""),children:o.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 md:flex-row md:items-center md:gap-3 h-full",children:[o.jsx("div",{className:kt("p-1.5 md:p-2 rounded-lg",`bg-${a}/10`),children:o.jsx(e,{className:kt("w-4 h-4 md:w-5 md:h-5",`text-${a}`)})}),o.jsxs("div",{className:"flex-1 md:text-left",children:[o.jsx("p",{className:"text-base md:text-2xl font-bold text-text-primary leading-none",children:r}),o.jsx("p",{className:"text-[10px] md:text-xs font-semibold text-text-secondary md:mt-0.5",children:t}),o.jsx("p",{className:"hidden md:block text-xs text-text-muted",children:n})]})]})});function bat(){const{toast:e}=Qa(),{userProfile:t,authReady:r}=Wi(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(""),[f,h]=v.useState("all"),[m,g]=v.useState("all"),[p,x]=v.useState(!0),[y,b]=v.useState(null),[w,_]=v.useState(!1),[j,N]=v.useState(null),[P,A]=v.useState({codigo_interno:"",codigo_sefaz:"",nome:"",taxa_percentual:"",ativo:!0}),[k,M]=v.useState(!1),[E,I]=v.useState(""),[O,R]=v.useState(!1),[B,W]=v.useState(null),[F,$]=v.useState(null),[H,ce]=v.useState(!1),[oe,L]=v.useState("mes"),[U,J]=v.useState(!1),[V,Z]=v.useState([]),[K,he]=v.useState("customizado"),[te,me]=v.useState(""),[Ee,Se]=v.useState(""),[We,be]=v.useState(!1),[ne,Qt]=v.useState(!1);v.useEffect(()=>{const Ae=()=>{try{Qt(typeof window<"u"&&window.innerWidth<=640)}catch{}};return Ae(),window.addEventListener("resize",Ae),()=>window.removeEventListener("resize",Ae)},[]);const bt=async()=>{try{s(!0);const Ae=t?.codigo_empresa;if(!Ae)return;const qe=await ov({somenteAtivas:!1,codigoEmpresa:Ae});console.log(" Finalizadoras carregadas:",qe),console.log(" Primeira finalizadora:",qe?.[0]),a(Array.isArray(qe)?qe:[])}catch(Ae){e({title:"Erro ao carregar",description:Ae?.message,variant:"destructive"})}finally{s(!1)}},Pt=v.useMemo(()=>{const Ae=n.length,qe=n.filter(Ve=>Ve.ativo).length,Ot=n.length>0?n.reduce((Ve,$e)=>{const Le=$e.nome||"Sem nome";return Ve[Le]=(Ve[Le]||0)+1,Ve},{}):{},Y=Object.entries(Ot).sort((Ve,$e)=>$e[1]-Ve[1])[0],ve=Y?Y[0]:"-";return{total:Ae,ativas:qe,maisUsada:ve}},[n]),Qe=v.useMemo(()=>{let Ae=[...n];if(u){const qe=u.toLowerCase();Ae=Ae.filter(Ot=>{const Y=String(Ot.tipo||"").toLowerCase(),ve=String(Ot.nome||"").toLowerCase(),Ve=String(Ot.codigo_interno||"").toLowerCase(),$e=qe.replace(/\D/g,""),Le=String(Ot.codigo_interno||"").replace(/\D/g,"");return Y.includes(qe)||ve.includes(qe)||Ve.includes(qe)||!!$e&&Le===$e})}return f!=="all"&&(Ae=Ae.filter(qe=>qe.tipo===f)),m!=="all"&&(Ae=Ae.filter(qe=>m==="active"?qe.ativo:!qe.ativo)),y==="ativas"&&(Ae=Ae.filter(qe=>qe.ativo)),Ae.sort((qe,Ot)=>{const Y=parseInt(qe.codigo_interno)||0,ve=parseInt(Ot.codigo_interno)||0;return Y-ve}),Ae},[n,u,f,m,y]),ft=()=>{N(null);const Ae=n.reduce((Ot,Y)=>{const ve=parseInt(Y.codigo_interno)||0;return ve>Ot?ve:Ot},0),qe=String(Ae+1).padStart(2,"0");A({codigo_interno:qe,codigo_sefaz:"",nome:"",taxa_percentual:"",ativo:!0}),_(!0)},mt=Ae=>{N(Ae),A({codigo_interno:Ae.codigo_interno||"",codigo_sefaz:Ae.codigo_sefaz||"",nome:Ae.nome||"",taxa_percentual:Ae.taxa_percentual!=null?String(Ae.taxa_percentual):"",ativo:Ae.ativo!==!1}),_(!0)},_t=async(Ae,qe="mes")=>{try{ce(!0);const Ot=t?.codigo_empresa;if(!Ot)return;const Y=new Date;let ve,Ve=Y.toISOString();switch(qe){case"hoje":ve=new Date(Y.setHours(0,0,0,0)).toISOString();break;case"semana":ve=new Date(Y.setDate(Y.getDate()-7)).toISOString();break;case"mes":ve=new Date(Y.setMonth(Y.getMonth()-1)).toISOString();break;default:ve=new Date(Y.setMonth(Y.getMonth()-1)).toISOString()}const{data:$e,error:Le}=await Ne.from("pagamentos").select("valor, recebido_em, status").eq("finalizadora_id",Ae).eq("codigo_empresa",Ot).gte("recebido_em",ve).lte("recebido_em",Ve).neq("status","Cancelado").neq("status","Estornado");if(Le)throw Le;const it=$e?.length||0,Ye=$e?.reduce((ht,st)=>ht+(Number(st.valor)||0),0)||0,Ge=it>0?Ye/it:0,Xe=$e?.[$e.length-1]?.recebido_em||null;$({transacoes:it,faturamento:Ye,ticketMedio:Ge,ultimaUtilizacao:Xe})}catch(Ot){console.error("Erro ao carregar estatsticas:",Ot),e({title:"Erro ao carregar estatsticas",description:Ot?.message,variant:"destructive"})}finally{ce(!1)}},ue=async(Ae="customizado",qe=null,Ot=null)=>{try{be(!0);const Y=t?.codigo_empresa;if(!Y)return;let ve,Ve;if(Ae==="customizado"&&qe&&Ot)ve=new Date(qe).toISOString(),Ve=new Date(Ot+"T23:59:59").toISOString();else{const Ge=new Date;switch(Ve=Ge.toISOString(),Ae){case"hoje":ve=new Date(Ge.setHours(0,0,0,0)).toISOString();break;case"semana":ve=new Date(Ge.setDate(Ge.getDate()-7)).toISOString();break;case"mes":ve=new Date(Ge.setMonth(Ge.getMonth()-1)).toISOString();break;default:ve=new Date(Ge.setMonth(Ge.getMonth()-1)).toISOString()}}const{data:$e,error:Le}=await Ne.from("pagamentos").select("finalizadora_id, valor, finalizadoras!pagamentos_finalizadora_id_fkey(id, codigo_interno, nome)").eq("codigo_empresa",Y).gte("recebido_em",ve).lte("recebido_em",Ve).neq("status","Cancelado").neq("status","Estornado");if(Le)throw Le;const it={};$e?.forEach(Ge=>{const Xe=Ge.finalizadora_id;Xe&&(it[Xe]||(it[Xe]={id:Xe,codigo:Ge.finalizadoras?.codigo_interno||"-",nome:Ge.finalizadoras?.nome||"Sem nome",total:0,transacoes:0}),it[Xe].total+=Number(Ge.valor)||0,it[Xe].transacoes+=1)});const Ye=Object.values(it).sort((Ge,Xe)=>Xe.total-Ge.total);Z(Ye)}catch(Y){console.error("Erro ao carregar ranking:",Y),e({title:"Erro ao carregar ranking",description:Y?.message,variant:"destructive"})}finally{be(!1)}},Ct=()=>{J(!0),he("customizado");const Ae=new Date,qe=new Date;qe.setMonth(qe.getMonth()-1),me(qe.toISOString().split("T")[0]),Se(Ae.toISOString().split("T")[0]),ue("customizado",qe.toISOString().split("T")[0],Ae.toISOString().split("T")[0])},At=Ae=>{W(Ae),R(!0),L("mes"),_t(Ae.id,"mes")},Wt=async()=>{try{if(!P.nome?.trim()){e({title:"Nome  obrigatrio",variant:"warning"});return}if(!P.codigo_sefaz){e({title:"Cdigo SEFAZ  obrigatrio",variant:"warning"});return}if(P.codigo_interno?.trim()&&n.some(Y=>Y.codigo_interno===P.codigo_interno.trim()&&(!j||Y.id!==j.id))){e({title:"Cdigo j existe",description:"Este cdigo interno j est em uso por outra finalizadora",variant:"warning"});return}c(!0);const Ae=t?.codigo_empresa,qe={codigo_interno:P.codigo_interno?.trim()||null,codigo_sefaz:P.codigo_sefaz,nome:P.nome.trim(),tipo:"outros",taxa_percentual:P.taxa_percentual===""?null:Number(P.taxa_percentual),ativo:P.ativo};j?(await iHe(j.id,qe,Ae),e({title:"Finalizadora atualizada!",variant:"success"})):(await aHe(qe,Ae),e({title:"Finalizadora criada!",variant:"success"})),_(!1),await bt()}catch(Ae){e({title:"Erro ao salvar",description:Ae?.message,variant:"destructive"})}finally{c(!1)}},wt=async Ae=>{try{await oHe(Ae.id,!Ae.ativo,t?.codigo_empresa),e({title:Ae.ativo?"Desativada":"Ativada",variant:"success"}),await bt()}catch(qe){e({title:"Erro ao alterar status",description:qe?.message,variant:"destructive"})}};return v.useEffect(()=>{r&&t?.codigo_empresa&&bt()},[r,t?.codigo_empresa]),o.jsxs(o.Fragment,{children:[o.jsxs(Pr.div,{variants:yat,initial:"hidden",animate:"visible",className:"flex-1 space-y-6 p-4 md:p-6",children:[o.jsxs(Pr.div,{variants:W2,className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"min-w-0",children:o.jsx("h1",{className:"text-2xl md:text-3xl font-black text-text-primary tracking-tight leading-tight",children:"Finalizadoras"})}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsx(ye,{variant:"ghost",size:"icon",onClick:()=>x(!p),className:"h-9 w-9",children:p?o.jsx(Jb,{className:"h-5 w-5"}):o.jsx(Qb,{className:"h-5 w-5"})}),o.jsxs(ye,{onClick:ft,className:"gap-2 h-9 px-3 whitespace-nowrap",children:[o.jsx(oi,{className:"h-4 w-4"}),o.jsx("span",{className:"md:hidden",children:"Nova"}),o.jsx("span",{className:"hidden md:inline",children:"Nova Finalizadora"})]})]})]}),p&&o.jsxs("div",{className:"grid grid-cols-3 gap-3 md:grid-cols-3 md:gap-6",children:[o.jsx(zP,{icon:Pm,title:"Total",value:Pt.total,subtitle:"Finalizadoras cadastradas",color:"brand"}),o.jsx(zP,{icon:Gs,title:"Ativas",value:Pt.ativas,subtitle:"Disponveis para uso",color:"success",onClick:()=>b(y==="ativas"?null:"ativas"),isActive:y==="ativas"}),o.jsx(zP,{icon:e1,title:"Mais Usada",value:Pt.maisUsada,subtitle:"Mtodo mais popular",color:"warning",onClick:Ct})]}),o.jsx(Pr.div,{variants:W2,className:"bg-surface rounded-lg border border-border p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative min-w-0 basis-0 flex-grow",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar finalizadora...",value:u,onChange:Ae=>d(Ae.target.value),className:"pl-10 h-11"})]}),o.jsxs(Yn,{value:m,onValueChange:g,children:[o.jsx(Hn,{className:"w-[110px] md:w-[180px]",children:o.jsx(Xn,{placeholder:"Filtrar por status"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"all",children:"Todos"}),o.jsx(qt,{value:"active",children:"Ativas"}),o.jsx(qt,{value:"inactive",children:"Inativas"})]})]})]})}),o.jsx(Pr.div,{variants:W2,className:"bg-surface rounded-lg border border-border overflow-hidden",children:i?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),o.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):Qe.length===0?o.jsxs("div",{className:"p-12 text-center text-text-muted",children:[o.jsx(Pm,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Nenhuma finalizadora encontrada"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden divide-y divide-border",children:Qe.map(Ae=>o.jsxs("div",{className:"p-3 flex flex-col gap-2 hover:bg-surface-2/50 cursor-pointer",onClick:()=>At(Ae),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx("span",{className:"px-2 py-0.5 rounded-md bg-surface-2 border border-border font-mono text-xs text-text-secondary",children:Ae.codigo_interno||"-"}),o.jsx("span",{className:"font-semibold text-sm text-text-primary truncate",title:Ae.nome,children:Ae.nome})]}),o.jsxs("span",{className:kt("inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[11px] font-medium",Ae.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[o.jsx("span",{className:kt("w-1.5 h-1.5 rounded-full",Ae.ativo?"bg-success":"bg-muted")}),Ae.ativo?"Ativa":"Inativa"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("span",{children:["Taxa: ",Ae.taxa_percentual?`${Ae.taxa_percentual}%`:"-"]})}),o.jsxs("div",{className:"flex items-center gap-2",onClick:qe=>qe.stopPropagation(),children:[o.jsx(ye,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>mt(Ae),children:o.jsx(Zc,{className:"h-4 w-4"})}),o.jsx(ye,{variant:Ae.ativo?"ghost":"default",size:"sm",className:"h-7 px-2",onClick:()=>wt(Ae),children:Ae.ativo?"Desativar":"Ativar"})]})]})]},Ae.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-surface-2 border-b border-border",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Cdigo"}),o.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Descrio"}),o.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Taxa (%)"}),o.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-text-secondary",children:"Status"}),o.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-text-secondary",children:"Aes"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:Qe.map(Ae=>o.jsxs("tr",{className:"hover:bg-surface-2/50 transition-colors cursor-pointer",onClick:()=>At(Ae),children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"font-mono text-sm text-text-primary",children:Ae.codigo_interno||"-"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"font-semibold text-text-primary",children:Ae.nome})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"text-text-secondary",children:Ae.taxa_percentual?`${Ae.taxa_percentual}%`:"-"})}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsxs("span",{className:kt("inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium",Ae.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[o.jsx("span",{className:kt("w-2 h-2 rounded-full",Ae.ativo?"bg-success":"bg-muted")}),Ae.ativo?"Ativa":"Inativa"]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex justify-end gap-2",onClick:qe=>qe.stopPropagation(),children:[o.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>mt(Ae),children:o.jsx(Zc,{className:"h-4 w-4"})}),o.jsx(ye,{variant:Ae.ativo?"ghost":"default",size:"sm",onClick:()=>wt(Ae),children:Ae.ativo?"Desativar":"Ativar"})]})})]},Ae.id))})]})})]})})]}),o.jsx(cn,{open:w,onOpenChange:_,children:o.jsxs(on,{className:"sm:max-w-[500px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[o.jsxs(an,{children:[o.jsx(en,{children:j?"Editar Finalizadora":"Nova Finalizadora"}),o.jsx(hn,{children:j?"Atualize as informaes da finalizadora":"Adicione um novo mtodo de pagamento"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{htmlFor:"codigo_interno",children:"Cdigo Finalizadora"}),o.jsx($t,{id:"codigo_interno",type:"text",placeholder:"Ex: 01, 02, 03...",value:P.codigo_interno,onChange:Ae=>A({...P,codigo_interno:Ae.target.value})}),o.jsx("p",{className:"text-xs text-text-muted",children:"Gerado automaticamente, mas pode ser editado"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{htmlFor:"nome",children:"Descrio *"}),o.jsx($t,{id:"nome",placeholder:"Ex: PIX, Dinheiro, Carto de Crdito...",value:P.nome,onChange:Ae=>A({...P,nome:Ae.target.value})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{htmlFor:"codigo_sefaz",children:"Forma de Pagamento NF-e/NFC-e *"}),o.jsx(ye,{type:"button",variant:"outline",className:"justify-between w-full",onClick:()=>M(!0),children:P.codigo_sefaz?`${P.codigo_sefaz} - ${D9.find(Ae=>Ae.codigo===P.codigo_sefaz)?.nome||""}`:"Selecione a forma de pagamento"}),o.jsx("p",{className:"text-xs text-text-muted",children:"A lista abrir em um modal com rolagem."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(vt,{htmlFor:"taxa",children:"Taxa"}),o.jsxs("div",{className:"relative",children:[o.jsx($t,{id:"taxa",inputMode:"decimal",placeholder:"0,00",className:"pr-10",value:P.taxa_percentual,onChange:Ae=>{const qe=String(Ae.target.value).replace(/[^0-9.,]/g,"").replace(/,/g,".");if(qe===""){A({...P,taxa_percentual:""});return}const Ot=Number(qe);if(Number.isFinite(Ot)){const Y=Math.max(0,Math.min(100,Ot));A({...P,taxa_percentual:String(Y)})}},onBlur:()=>{const Ae=String(P.taxa_percentual||"").replace(/,/g,".");if(Ae==="")return;const qe=Number(Ae);if(Number.isFinite(qe)){const Ot=Math.max(0,Math.min(100,qe));A(Y=>({...Y,taxa_percentual:Ot.toFixed(2)}))}}}),o.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-text-muted text-sm",children:"%"})]}),o.jsx("p",{className:"text-xs text-text-muted",children:"Deixe vazio se no houver taxa"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"ativo",checked:P.ativo,onChange:Ae=>A({...P,ativo:Ae.target.checked}),className:"h-4 w-4 rounded border-border"}),o.jsx(vt,{htmlFor:"ativo",className:"text-sm font-normal cursor-pointer",children:"Finalizadora ativa"})]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>_(!1),disabled:l,children:"Cancelar"}),o.jsx(ye,{onClick:Wt,disabled:l,children:l?"Salvando...":"Salvar"})]})]})}),o.jsx(cn,{open:k,onOpenChange:M,children:o.jsxs(on,{className:"sm:max-w-[520px] w-[92vw]",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Selecionar Forma de Pagamento (SEFAZ)"}),o.jsx(hn,{children:"Busque por cdigo ou nome"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx($t,{placeholder:"Ex.: 03, crdito, pix...",value:E,onChange:Ae=>I(Ae.target.value)}),o.jsx("div",{className:"max-h-[420px] overflow-auto fx-scroll rounded-md border border-border",children:o.jsx("ul",{className:"divide-y divide-border",children:D9.filter(Ae=>{const qe=(E||"").toLowerCase();return qe?Ae.codigo.includes(qe)||String(Ae.nome).toLowerCase().includes(qe):!0}).map(Ae=>o.jsx("li",{children:o.jsxs("button",{type:"button",className:`w-full text-left px-3 py-2 hover:bg-surface-2 ${P.codigo_sefaz===Ae.codigo?"bg-surface-2":""}`,onClick:()=>{A(qe=>({...qe,codigo_sefaz:Ae.codigo})),M(!1)},children:[o.jsx("span",{className:"font-mono mr-2 text-text-secondary",children:Ae.codigo}),o.jsx("span",{children:Ae.nome})]})},Ae.codigo))})})]})]})}),o.jsx(cn,{open:O,onOpenChange:R,children:o.jsxs(on,{className:"sm:max-w-[700px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Detalhes da Finalizadora"}),o.jsx(hn,{children:"Estatsticas e informaes completas"})]}),B&&o.jsxs("div",{className:"space-y-6 py-4",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Informaes"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Cdigo Finalizadora"}),o.jsx("p",{className:"font-mono text-sm text-text-primary",children:B.codigo_interno||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Forma de Pagamento NF-e/NFC-e"}),o.jsx("p",{className:"font-mono text-sm text-text-primary",children:B.codigo_sefaz||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Descrio"}),o.jsx("p",{className:"font-medium text-text-primary",children:B.nome})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Taxa"}),o.jsx("p",{className:"font-medium text-text-primary",children:B.taxa_percentual?`${B.taxa_percentual}%`:"Sem taxa"})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Status"}),o.jsxs("span",{className:kt("inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs font-medium",B.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[o.jsx("span",{className:kt("w-2 h-2 rounded-full",B.ativo?"bg-success":"bg-muted")}),B.ativo?"Ativa":"Inativa"]})]})]})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Perodo de Anlise"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ye,{variant:oe==="hoje"?"default":"outline",size:"sm",onClick:()=>{L("hoje"),_t(B.id,"hoje")},children:"Hoje"}),o.jsx(ye,{variant:oe==="semana"?"default":"outline",size:"sm",onClick:()=>{L("semana"),_t(B.id,"semana")},children:"7 Dias"}),o.jsx(ye,{variant:oe==="mes"?"default":"outline",size:"sm",onClick:()=>{L("mes"),_t(B.id,"mes")},children:"30 Dias"})]})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Estatsticas de Uso"}),H?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-brand border-t-transparent"})}):F?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Total de Transaes"}),o.jsx("span",{className:"font-semibold text-text-primary",children:F.transacoes})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Faturamento Total"}),o.jsxs("span",{className:"font-semibold text-success",children:["R$ ",F.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"Ticket Mdio"}),o.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",F.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:"ltima Utilizao"}),o.jsx("span",{className:"font-medium text-text-muted",children:F.ultimaUtilizacao?new Date(F.ultimaUtilizacao).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca utilizada"})]})]}):o.jsx("div",{className:"text-center py-8 text-text-muted",children:o.jsx("p",{className:"text-sm",children:"Nenhum dado disponvel"})})]})]}),o.jsxs($n,{children:[o.jsx(ye,{variant:"outline",onClick:()=>R(!1),children:"Fechar"}),o.jsxs(ye,{onClick:()=>{R(!1),mt(B)},children:[o.jsx(Zc,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]})}),o.jsx(cn,{open:U,onOpenChange:J,children:o.jsxs(on,{className:"sm:max-w-[700px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[o.jsxs(an,{children:[o.jsx(en,{children:"Ranking de Finalizadoras"}),o.jsx(hn,{children:"Faturamento por forma de pagamento"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(ye,{variant:K==="hoje"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{he("hoje"),ue("hoje")},children:"Hoje"}),o.jsx(ye,{variant:K==="semana"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{he("semana"),ue("semana")},children:"7 Dias"}),o.jsx(ye,{variant:K==="mes"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{he("mes"),ue("mes")},children:"30 Dias"}),o.jsx(ye,{variant:K==="customizado"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>he("customizado"),children:"Perodo"})]}),K==="customizado"&&(ne?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx(vt,{className:"text-xs",children:"Data Inicial"}),o.jsx("input",{type:"date",className:"mt-1 h-9 w-full rounded-md border border-border bg-surface px-2 text-sm text-text-primary",value:te,onChange:Ae=>me(Ae.target.value)})]}),o.jsxs("div",{children:[o.jsx(vt,{className:"text-xs",children:"Data Final"}),o.jsx("input",{type:"date",className:"mt-1 h-9 w-full rounded-md border border-border bg-surface px-2 text-sm text-text-primary",value:Ee,onChange:Ae=>Se(Ae.target.value)})]})]}),o.jsx(ye,{className:"w-full",onClick:()=>ue("customizado",te,Ee),disabled:!te||!Ee||We,children:We?"Buscando...":"Buscar"})]}):o.jsxs("div",{className:"flex gap-3 items-end",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(vt,{children:"Data Inicial"}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:kt("w-full justify-start text-left font-normal",!te&&"text-text-muted"),children:[o.jsx(Uu,{className:"mr-2 h-4 w-4"}),te?new Date(te+"T12:00:00").toLocaleDateString("pt-BR"):"Selecione"]})}),o.jsx(ad,{className:"w-auto p-0 bg-surface border border-border",align:"start",children:o.jsx(iT,{mode:"single",selected:te?new Date(te+"T12:00:00"):void 0,onSelect:Ae=>{if(Ae){const qe=Ae.getFullYear(),Ot=String(Ae.getMonth()+1).padStart(2,"0"),Y=String(Ae.getDate()).padStart(2,"0");me(`${qe}-${Ot}-${Y}`)}},className:"p-3"})})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(vt,{children:"Data Final"}),o.jsxs(rf,{children:[o.jsx(nf,{asChild:!0,children:o.jsxs(ye,{variant:"outline",className:kt("w-full justify-start text-left font-normal",!Ee&&"text-text-muted"),children:[o.jsx(Uu,{className:"mr-2 h-4 w-4"}),Ee?new Date(Ee+"T12:00:00").toLocaleDateString("pt-BR"):"Selecione"]})}),o.jsx(ad,{className:"w-auto p-0 bg-surface border border-border",align:"start",children:o.jsx(iT,{mode:"single",selected:Ee?new Date(Ee+"T12:00:00"):void 0,onSelect:Ae=>{if(Ae){const qe=Ae.getFullYear(),Ot=String(Ae.getMonth()+1).padStart(2,"0"),Y=String(Ae.getDate()).padStart(2,"0");Se(`${qe}-${Ot}-${Y}`)}},className:"p-3"})})]})]}),o.jsx(ye,{onClick:()=>ue("customizado",te,Ee),disabled:!te||!Ee||We,children:"Buscar"})]}))]}),We?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand border-t-transparent"})}):V.length===0?o.jsx("div",{className:"text-center py-12 text-text-muted",children:o.jsx("p",{children:"Nenhuma transao no perodo selecionado"})}):o.jsx("div",{className:"space-y-3",children:V.map((Ae,qe)=>o.jsx("div",{className:"bg-surface-2 rounded-lg p-3 md:p-4 border border-border",children:o.jsxs("div",{className:"flex items-start md:items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-start md:items-center gap-2 md:gap-3 flex-1 min-w-0",children:[o.jsxs("div",{className:kt("flex items-center justify-center w-7 h-7 md:w-8 md:h-8 rounded-full font-bold text-xs md:text-sm flex-shrink-0",qe===0?"bg-warning/20 text-warning":qe===1?"bg-info/20 text-info":qe===2?"bg-success/20 text-success":"bg-muted/20 text-muted"),children:[qe+1,""]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[o.jsx("span",{className:"font-mono text-[10px] md:text-xs text-text-muted",children:Ae.codigo}),o.jsx("span",{className:"font-semibold text-sm md:text-base text-text-primary truncate",children:Ae.nome})]}),o.jsxs("p",{className:"text-[10px] md:text-xs text-text-muted",children:[Ae.transacoes," transaes"]})]})]}),o.jsxs("div",{className:"text-right flex-shrink-0",children:[o.jsxs("p",{className:"text-base md:text-lg font-bold text-success whitespace-nowrap",children:["R$ ",Ae.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),o.jsxs("p",{className:"text-[10px] md:text-xs text-text-muted whitespace-nowrap",children:["Mdia: R$ ",(Ae.total/Ae.transacoes).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})},Ae.id))})]}),o.jsx($n,{children:o.jsx(ye,{variant:"outline",onClick:()=>J(!1),children:"Fechar"})})]})})]})}function wat(){return o.jsxs("div",{className:"p-8",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Pgina de Teste"}),o.jsx("p",{children:"Esta  uma pgina de teste para verificar se o roteamento est funcionando corretamente."})]})}function _at(e){const t=new URLSearchParams(e.startsWith("#")?e.slice(1):e),r=t.get("access_token"),n=t.get("refresh_token");return{access_token:r,refresh_token:n}}const Sat=()=>{const{toast:e}=Qa(),t=wc(),[r,n]=v.useState(""),[a,i]=v.useState(""),[s,l]=v.useState(!1),[c,u]=v.useState(!1),d=v.useMemo(()=>_at(window.location.hash),[]);v.useEffect(()=>{(async()=>{const{data:{session:m}}=await Ne.auth.getSession();if(m){u(!0);return}if(d.access_token&&d.refresh_token){const{data:g,error:p}=await Ne.auth.setSession({access_token:d.access_token,refresh_token:d.refresh_token});p&&e({title:"Link invlido ou expirado",description:"Abra o link do email novamente.",variant:"destructive"}),u(!!g?.session)}else e({title:"Link invlido",description:"Abra o link de redefinio enviado por email.",variant:"destructive"})})()},[]);const f=async h=>{if(h.preventDefault(),r.length<6){e({title:"Senha muito curta",description:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"});return}if(r!==a){e({title:"Senhas no conferem",description:"As senhas digitadas so diferentes.",variant:"destructive"});return}l(!0);const{data:m,error:g}=await Ne.auth.updateUser({password:r});if(l(!1),g){e({title:"Erro ao redefinir senha",description:g.message||"Tente novamente.",variant:"destructive"});return}e({title:"Senha redefinida",description:"Voc j pode acessar o sistema.",variant:"default"}),t("/")};return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:o.jsxs("div",{className:"w-full max-w-md bg-surface rounded-xl border border-border p-6 shadow",children:[o.jsx("h1",{className:"text-2xl font-semibold mb-2 text-text-primary",children:"Redefinir senha"}),o.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Defina uma nova senha para sua conta."}),o.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1 text-text-secondary",children:"Nova senha"}),o.jsx($t,{type:"password",value:r,onChange:h=>n(h.target.value),placeholder:"",disabled:!c||s})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1 text-text-secondary",children:"Confirmar nova senha"}),o.jsx($t,{type:"password",value:a,onChange:h=>i(h.target.value),placeholder:"",disabled:!c||s})]}),o.jsx(ye,{type:"submit",className:"w-full",disabled:!c||s,children:s?"Salvando...":"Salvar nova senha"})]})]})})};function jat({open:e,onOpenChange:t,codigoEmpresa:r,onSuccess:n}){const{toast:a}=Qa(),[i,s]=v.useState("upload"),[l,c]=v.useState(null),[u,d]=v.useState(null),[f,h]=v.useState(!1),[m,g]=v.useState({success:!1,comandaId:null,error:null}),p=async _=>{const j=_.target.files?.[0];if(j){if(!j.name.endsWith(".xml")){a({title:"Arquivo invlido",description:"Selecione um arquivo XML vlido.",variant:"destructive"});return}c(j);try{const N=await j.text(),P=Jre(N);if(!P.success){a({title:"Erro ao ler XML",description:P.error||"XML invlido",variant:"destructive"});return}if(!P.produtos||P.produtos.length===0){a({title:"Nenhum produto encontrado",description:"O XML no contm produtos.",variant:"warning"});return}if(P.nfe?.tipo!=="Sada"){a({title:"Tipo de nota incorreto",description:"Este XML  de entrada. Use a importao em Produtos para notas de entrada.",variant:"warning"});return}d(P),s("preview")}catch(N){console.error("[XMLSalesImport] Erro ao processar arquivo:",N),a({title:"Erro ao processar XML",description:N.message,variant:"destructive"})}}},x=async()=>{s("processing"),h(!0);try{const _=await Sp({searchTerm:"",limit:1e4,codigoEmpresa:r}),j=u.nfe?.dataEmissao?new Date(u.nfe.dataEmissao):new Date,N=u.nfe?.chaveAcesso||"",{data:P,error:A}=await Ne.from("comandas").insert({codigo_empresa:r,mesa_id:null,status:"closed",aberto_em:j.toISOString(),fechado_em:j.toISOString(),observacao:`Importado de XML - NF-e ${u.nfe?.numero||""}${N?`
Chave: ${N}`:""}`,origem:"xml",xml_chave:N||null}).select().single();if(A)throw A;const k=[],M=[];for(const I of u.produtos){const O=Qre(I,_);if(O){k.push({comanda_id:P.id,produto_id:O.id,descricao:I.nome,quantidade:I.quantidade,preco_unitario:I.valorUnitario,desconto:I.desconto||0,codigo_empresa:r});const R=Math.max(0,(O.stock||O.estoque||0)-I.quantidade);await Ne.from("produtos").update({estoque:R}).eq("id",O.id).eq("codigo_empresa",r)}else M.push(I.nome)}if(k.length>0){const{error:I}=await Ne.from("comanda_itens").insert(k);if(I)throw I}const E=u.pagamentos||[];if(E.length>0){const{data:I}=await Ne.from("finalizadoras").select("id, codigo_sefaz, nome").eq("codigo_empresa",r).eq("ativo",!0),O=new Map((I||[]).map(W=>[W.codigo_sefaz,W])),R=E.map(W=>{const F=O.get(W.codigoSefaz);return{comanda_id:P.id,finalizadora_id:F?.id||null,metodo:W.descricao.toLowerCase(),valor:W.valor,status:"Pago",recebido_em:j.toISOString(),codigo_empresa:r,origem:"xml",xml_chave:N||null}}),{error:B}=await Ne.from("pagamentos").insert(R);if(B)throw B}else{const I=u.produtos.reduce((R,B)=>R+(B.valorTotal||0),0),{error:O}=await Ne.from("pagamentos").insert({comanda_id:P.id,finalizadora_id:null,metodo:"outros",valor:I,status:"Pago",recebido_em:j.toISOString(),codigo_empresa:r,origem:"xml",xml_chave:N||null});if(O)throw O}console.log("[XMLSalesImport] Venda importada com sucesso. Comanda ID:",P.id),M.length>0?a({title:"Venda importada com avisos",description:`${k.length} produto(s) registrado(s), ${M.length} no encontrado(s).`,variant:"warning",duration:5e3}):a({title:"Venda importada com sucesso!",description:`${k.length} produto(s) registrado(s). Total: R$ ${w.toFixed(2)}`,variant:"success"}),g({success:!0,comandaId:P.id,error:null,produtosNaoEncontrados:M,totalItens:k.length,totalVenda:w,dataEmissao:j.toISOString().slice(0,10)}),s("done"),n&&n(j.toISOString().slice(0,10))}catch(_){console.error("[XMLSalesImport] Erro ao importar:",_),g({success:!1,comandaId:null,error:_.message}),s("done"),a({title:"Erro ao importar XML",description:_.message,variant:"destructive"})}finally{h(!1)}},y=()=>{s("upload"),c(null),d(null),g({success:!1,comandaId:null,error:null}),t(!1)},b=()=>{s("upload"),c(null),d(null)},w=u?.produtos?.reduce((_,j)=>_+(j.valorTotal||0),0)||0;return o.jsx(cn,{open:e,onOpenChange:t,children:o.jsxs(on,{className:"max-w-3xl max-h-[90vh] flex flex-col overflow-hidden",children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-2xl font-bold",children:"Importar XML de Venda (NF-e)"}),o.jsxs(hn,{children:[i==="upload"&&"Selecione o arquivo XML da nota fiscal de sada",i==="preview"&&"Revise os dados da venda que ser importada",i==="processing"&&"Processando venda...",i==="done"&&"Importao finalizada"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-1",children:[i==="upload"&&o.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("label",{htmlFor:"xml-sales-upload",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer bg-surface hover:bg-surface-2 transition-colors",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[o.jsx(jW,{className:"w-12 h-12 mb-4 text-text-muted"}),o.jsx("p",{className:"mb-2 text-sm text-text-primary font-semibold",children:"Clique para selecionar ou arraste o arquivo"}),o.jsx("p",{className:"text-xs text-text-muted",children:"XML de NF-e de Sada (Venda)"})]}),o.jsx("input",{id:"xml-sales-upload",type:"file",accept:".xml",className:"hidden",onChange:p})]}),l&&o.jsxs("div",{className:"mt-4 p-3 bg-surface-2 rounded-lg flex items-center gap-2",children:[o.jsx(uc,{className:"w-5 h-5 text-success"}),o.jsx("span",{className:"text-sm text-text-primary",children:l.name})]})]})}),i==="preview"&&o.jsxs("div",{className:"space-y-4",children:[u?.nfe&&o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Informaes da NF-e"}),u.fornecedor&&o.jsxs("div",{className:"mb-3 pb-3 border-b border-border",children:[o.jsx("div",{className:"text-sm font-semibold text-text-primary mb-1",children:u.fornecedor.razaoSocial||u.fornecedor.nomeFantasia||"Fornecedor"}),o.jsxs("div",{className:"text-xs text-text-muted",children:[u.fornecedor.cnpj&&`CNPJ: ${u.fornecedor.cnpj}`,u.fornecedor.endereco?.cidade&&u.fornecedor.endereco?.uf&&`  ${u.fornecedor.endereco.cidade}/${u.fornecedor.endereco.uf}`]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Nmero:"})," ",o.jsx("span",{className:"font-mono",children:u.nfe.numero})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Srie:"})," ",o.jsx("span",{className:"font-mono",children:u.nfe.serie})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Tipo:"})," ",o.jsx("span",{className:"text-warning font-semibold",children:u.nfe.tipo})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-text-muted",children:"Data:"})," ",o.jsx("span",{children:new Date(u.nfe.dataEmissao).toLocaleDateString("pt-BR")})]})]}),u.nfe.naturezaOperacao&&o.jsxs("div",{className:"mb-2 text-sm",children:[o.jsx("span",{className:"text-text-muted",children:"Natureza:"})," ",o.jsx("span",{className:"font-medium",children:u.nfe.naturezaOperacao})]}),u.nfe.totalNota!==void 0&&o.jsxs("div",{className:"mb-3 text-sm",children:[o.jsx("span",{className:"text-text-muted",children:"Total da Nota:"})," ",o.jsxs("span",{className:"font-mono font-semibold text-lg text-success",children:["R$ ",u.nfe.totalNota.toFixed(2)]})]}),u.nfe.chaveAcesso&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[o.jsx("span",{className:"text-text-muted text-xs",children:"Chave de Acesso:"}),o.jsx("p",{className:"font-mono text-xs break-all",children:u.nfe.chaveAcesso})]})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsxs("h3",{className:"font-semibold mb-3",children:["Produtos da Venda (",u.produtos.length,")"]}),o.jsx("div",{className:"space-y-2",children:u.produtos.map((_,j)=>o.jsxs("div",{className:"p-3 rounded-lg border border-border bg-surface flex items-start gap-3",children:[o.jsx(Zb,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-semibold text-sm truncate",children:_.nome}),o.jsxs("p",{className:"text-xs text-text-muted",children:[_.codigo&&`Cdigo: ${_.codigo}  `,"Qtd: ",_.quantidade," ",_.unidade]})]}),o.jsxs("div",{className:"text-right flex-shrink-0",children:[o.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",_.valorTotal.toFixed(2)]}),o.jsxs("p",{className:"text-xs text-text-muted",children:["Unit: R$ ",_.valorUnitario.toFixed(2)]})]})]})})]},j))})]}),u.pagamentos&&u.pagamentos.length>0&&o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsxs("h3",{className:"font-semibold mb-3",children:["Formas de Pagamento (",u.pagamentos.length,")"]}),o.jsx("div",{className:"space-y-2",children:u.pagamentos.map((_,j)=>o.jsxs("div",{className:"p-3 rounded-lg border border-border bg-surface flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:_.descricao}),o.jsxs("p",{className:"text-xs text-text-muted",children:["Cdigo SEFAZ: ",_.codigoSefaz]})]}),o.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",_.valor.toFixed(2)]})]},j))})]}),o.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(au,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold text-sm mb-1",children:"Ateno: Venda Externa"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Esta venda ser registrada no histrico como uma venda externa (importada de XML). O estoque dos produtos ser subtrado automaticamente."})]})]})}),o.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[o.jsx("span",{children:"Total da Venda:"}),o.jsxs("span",{className:"text-success",children:["R$ ",w.toFixed(2)]})]})]}),i==="processing"&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(Em,{className:"w-12 h-12 animate-spin text-warning mb-4"}),o.jsx("p",{className:"text-lg font-semibold",children:"Processando venda..."}),o.jsx("p",{className:"text-sm text-text-muted",children:"Criando comanda e atualizando estoque"})]}),i==="done"&&o.jsx("div",{className:"space-y-4",children:o.jsx("div",{className:"bg-surface-2 rounded-lg p-6 border border-border text-center",children:m.success?o.jsxs(o.Fragment,{children:[o.jsx(Cs,{className:"w-16 h-16 text-success mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Venda Importada com Sucesso!"}),o.jsx("p",{className:"text-sm text-text-muted mb-4",children:"A venda foi registrada no histrico"}),m.produtosNaoEncontrados&&m.produtosNaoEncontrados.length>0&&o.jsxs("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-3 text-left",children:[o.jsx("p",{className:"text-sm font-semibold mb-2",children:" Produtos no encontrados:"}),o.jsx("ul",{className:"text-xs text-text-muted space-y-1",children:m.produtosNaoEncontrados.map((_,j)=>o.jsxs("li",{children:[" ",_]},j))})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(au,{className:"w-16 h-16 text-danger mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Erro na Importao"}),o.jsx("p",{className:"text-sm text-text-muted",children:m.error||"Ocorreu um erro ao importar a venda"})]})})})]}),o.jsxs($n,{children:[i==="upload"&&o.jsx(ye,{variant:"outline",onClick:y,children:"Cancelar"}),i==="preview"&&o.jsxs(o.Fragment,{children:[o.jsx(ye,{variant:"outline",onClick:b,children:"Voltar"}),o.jsx(ye,{onClick:x,children:"Confirmar Importao"})]}),i==="done"&&o.jsx(ye,{onClick:y,children:"Fechar"})]})]})})}const Nat={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},y0={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function Cat(e,t=300){const[r,n]=v.useState(e);return v.useEffect(()=>{const a=setTimeout(()=>n(e),t);return()=>clearTimeout(a)},[e,t]),r}function g2({value:e,onChange:t}){const[r,n]=v.useState(!1),a=v.useRef(null),i=v.useRef(null),s=v.useRef(null),[l,c]=v.useState({top:0,left:0,width:0,center:!1,mode:"fixed"});v.useEffect(()=>{function p(b){const w=b.target,_=a.current&&a.current.contains(w),j=s.current&&s.current.contains(w);!_&&!j&&n(!1)}function x(b){b.key==="Escape"&&n(!1)}function y(){r&&u()}return window.addEventListener("mousedown",p),window.addEventListener("keydown",x),window.addEventListener("scroll",y,!0),window.addEventListener("resize",y),()=>{window.removeEventListener("mousedown",p),window.removeEventListener("keydown",x),window.removeEventListener("scroll",y,!0),window.removeEventListener("resize",y)}},[r]),v.useEffect(()=>{if(r){const p=requestAnimationFrame(()=>{u();const x=requestAnimationFrame(()=>u());return()=>cancelAnimationFrame(x)});return()=>cancelAnimationFrame(p)}},[r]),v.useEffect(()=>{if(r&&l.mode==="overlay"){const p=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=p}}},[r,l.mode]);const u=()=>{try{const p=i.current;if(!p)return;const x=p.getBoundingClientRect(),y=window.innerWidth,b=window.innerHeight,w=8,_=Math.max(x.width,280),j=Math.min(y-w*2,360),N=Math.min(_,j);let P=320;if(s.current)try{P=s.current.getBoundingClientRect().height||P}catch{}if(y<=640){c({top:0,left:0,width:Math.min(y-w*2,360),center:!0,mode:"overlay"});return}const A=a.current,k=A?A.getBoundingClientRect():x,M=x.bottom-k.top+6,E=Math.max(x.width,280);c({top:M,left:0,width:E,center:!1,mode:"anchor"})}catch{}},d=p=>{try{const[x,y,b]=String(p||"").split("-").map(Number);return!x||!y||!b?null:new Date(x,y-1,b)}catch{return null}},f=p=>{const x=y=>String(y).padStart(2,"0");return`${p.getFullYear()}-${x(p.getMonth()+1)}-${x(p.getDate())}`},h=p=>{const x=y=>String(y).padStart(2,"0");return`${x(p.getDate())}/${x(p.getMonth()+1)}/${p.getFullYear()}`},m=d(e),g=m?h(m):"";return o.jsxs("div",{className:"relative",ref:a,children:[o.jsx("button",{type:"button",className:"absolute left-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-warning/10 focus:outline-none",onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(p=>!p),setTimeout(u,0)},"aria-label":"Abrir calendrio",children:o.jsx(Kce,{className:"h-4 w-4 text-warning"})}),typeof window<"u"&&window.innerWidth<=640?o.jsx("button",{type:"button",ref:i,onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(!0),setTimeout(u,0)},className:"pl-9 pr-3 h-10 w-full text-left bg-surface text-text-primary border border-warning/40 rounded-md",children:g||"Selecionar data"}):o.jsx($t,{type:"text",readOnly:!0,ref:i,inputMode:"none",onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(p=>!p),setTimeout(u,0)},className:"pl-9 pr-3 w-full bg-surface text-text-primary border border-warning/40 focus-visible:ring-warning focus-visible:border-warning",value:g}),r&&(l.mode==="overlay"?o.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:p=>{p.target===p.currentTarget&&n(!1)},children:o.jsx("div",{ref:s,className:"bg-black text-white border border-warning/40 rounded-md shadow-xl p-2 w-[92vw] max-w-[360px]",children:o.jsx(Ju,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})})}):l.mode==="anchor"?o.jsx("div",{ref:s,className:"absolute z-[999] bg-black text-white border border-warning/40 rounded-md shadow-xl p-2 left-0",style:{top:`${l.top}px`,minWidth:`${l.width}px`,maxWidth:"92vw"},children:o.jsx(Ju,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})}):o.jsx("div",{ref:s,className:"fixed z-[999] bg-black text-white border border-warning/40 rounded-md shadow-xl p-2",style:{top:`${l.top}px`,left:`${l.left}px`,width:`${l.width}px`,maxWidth:"92vw"},children:o.jsx(Ju,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})}))]})}function Aat(){const{toast:e}=Qa(),t=wc(),{userProfile:r}=Wi(),[n,a]=v.useState(!1),[i,s]=v.useState([]),[l,c]=v.useState(()=>new Date().toISOString().slice(0,10)),[u,d]=v.useState(()=>new Date().toISOString().slice(0,10)),[f,h]=v.useState("closed"),[m,g]=v.useState(""),p=Cat(m,350),[x,y]=v.useState("all"),[b,w]=v.useState("comandas"),[_,j]=v.useState(!1),[N,P]=v.useState(null),[A,k]=v.useState({loading:!1,itens:[],pagamentos:[]}),[M,E]=v.useState(null),[I,O]=v.useState({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null},movs:[]}),[R,B]=v.useState(!1),[W,F]=v.useState(!1),[$,H]=v.useState(!1),ce=async()=>{try{e({title:"Gerando CSV...",description:"Aguarde enquanto preparamos o arquivo",variant:"default"});const ue=await Z7({status:f,from:l||void 0,to:u||void 0,search:p||"",limit:1e4,offset:0});if(!ue||ue.length===0){e({title:"Nenhum dado para exportar",variant:"warning"});return}const Ct=ue.map(it=>it.id),At=await mT(Ct,r?.codigo_empresa),Wt=await Vg(r?.codigo_empresa),wt=new Map(Wt.map(it=>[it.id,it.numero])),Ae=await X7(Ct),qe=await J7(Ct),Ot=ue.map(it=>{const Ye=it.mesa_id?`Mesa ${wt.get(it.mesa_id)||"?"}`:"Balco",Ge=Ae[it.id]||"Sem cliente",Xe=qe[it.id],ht=Array.isArray(Xe)?Xe.join(", "):Xe||"No informado",st=it.fechado_em?"Fechada":"Aberta";return{Tipo:it.tipo==="balcao"?"Balco":"Mesa","Mesa/Local":Ye,"Cliente(s)":Ge,Status:st,Abertura:new Date(it.aberto_em).toLocaleString("pt-BR"),Fechamento:it.fechado_em?new Date(it.fechado_em).toLocaleString("pt-BR"):"-","Total (R$)":Number(At[it.id]||0).toFixed(2),"Forma(s) Pagamento":ht,Observaes:it.observacao||"-"}}),Y=Object.keys(Ot[0]),ve=[Y.join(";"),...Ot.map(it=>Y.map(Ye=>{const Ge=it[Ye]||"";return`"${String(Ge).replace(/"/g,'""')}"`}).join(";"))].join(`
`),Ve=new Blob(["\uFEFF"+ve],{type:"text/csv;charset=utf-8;"}),$e=document.createElement("a"),Le=URL.createObjectURL(Ve);$e.setAttribute("href",Le),$e.setAttribute("download",`historico_comandas_${new Date().toISOString().slice(0,10)}.csv`),$e.style.visibility="hidden",document.body.appendChild($e),$e.click(),document.body.removeChild($e),e({title:"CSV exportado!",description:`${Ot.length} comandas exportadas`,variant:"success"})}catch(ue){console.error("Erro ao exportar CSV:",ue),e({title:"Erro ao exportar",description:ue.message,variant:"destructive"})}},oe=async()=>{try{if(e({title:"Gerando CSV...",description:"Aguarde enquanto preparamos o arquivo",variant:"default"}),!i||i.length===0){e({title:"Nenhum dado para exportar",variant:"warning"});return}const ue=i.map(qe=>{const Ot=qe.status==="open"?"Aberto":qe.status==="closed"?"Fechado":qe.status;return{"Data Abertura":qe.aberto_em?new Date(qe.aberto_em).toLocaleString("pt-BR"):"-","Data Fechamento":qe.fechado_em?new Date(qe.fechado_em).toLocaleString("pt-BR"):"-",Status:Ot,"Saldo Inicial (R$)":Number(qe.saldo_inicial||0).toFixed(2),"Saldo Final (R$)":Number(qe.saldo_final||0).toFixed(2),"Valor Contado (R$)":qe.valor_final_dinheiro?Number(qe.valor_final_dinheiro).toFixed(2):"-","Diferena (R$)":qe.diferenca_dinheiro?Number(qe.diferenca_dinheiro).toFixed(2):"-"}}),Ct=Object.keys(ue[0]),At=[Ct.join(";"),...ue.map(qe=>Ct.map(Ot=>{const Y=qe[Ot]||"";return`"${String(Y).replace(/"/g,'""')}"`}).join(";"))].join(`
`),Wt=new Blob(["\uFEFF"+At],{type:"text/csv;charset=utf-8;"}),wt=document.createElement("a"),Ae=URL.createObjectURL(Wt);wt.setAttribute("href",Ae),wt.setAttribute("download",`fechamentos_caixa_${new Date().toISOString().slice(0,10)}.csv`),wt.style.visibility="hidden",document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),e({title:"CSV exportado!",description:`${ue.length} fechamentos exportados`,variant:"success"})}catch(ue){console.error("Erro ao exportar CSV:",ue),e({title:"Erro ao exportar",description:ue.message,variant:"destructive"})}},L=100,[U,J]=v.useState(0),[V,Z]=v.useState(!1),K=v.useRef(!1),he=v.useRef(0),te=v.useRef(0),me=v.useRef(!1),Ee=()=>{try{const ue=localStorage.getItem("auth:userProfile");return ue&&JSON.parse(ue)?.codigo_empresa||null}catch{return null}},Se=v.useMemo(()=>`hist:comandas:${Ee()||"na"}:${l}:${u}:${f}:${x}:${(p||"").trim()}`,[l,u,f,x,p]),We=async({append:ue=!1,skipCacheWrite:Ct=!1}={})=>{try{a(!0);const At=Ee();if(!At){a(!1);return}const Wt=setTimeout(()=>a(!1),1e4);if(b==="comandas"){const wt=!!(p&&p.trim()),Ot=await Z7({status:f,from:l,to:u,limit:wt?1e3:L,offset:wt?0:U}),Y=(Ot||[]).map(Ge=>Ge.id);let ve={};if(Y.length>0)try{ve=await mT(Y,At)}catch{ve={}}let Ve=[];try{Ve=await Vg(At)}catch{Ve=[]}const $e=new Map((Ve||[]).map(Ge=>[Ge.id,Ge.numero]));let Le={},it={};try{Le=await X7(Y)}catch{Le={}}try{it=await J7(Y)}catch{it={}}const Ye=(Ot||[]).map(Ge=>{const Xe=Le[Ge.id],ht=it[Ge.id];return{...Ge,statusDerived:Ge.status==="cancelled"?"cancelled":Ge.fechado_em?"closed":Ge.status||"open",total:Number(ve[Ge.id]||0),mesaNumero:$e.get(Ge.mesa_id),clientesStr:Array.isArray(Xe)?Xe.join(", "):Xe||"",finalizadorasStr:Array.isArray(ht)?ht.join(", "):ht||""}});if(Z(wt?!1:(Ot||[]).length===L),s(ue?Ge=>[...Ge,...Ye]:Ye),!Ct)try{localStorage.setItem(Se,JSON.stringify({ts:Date.now(),rows:Ye}))}catch{}}else{const wt=await ote({from:l,to:u,limit:100,offset:0,codigoEmpresa:At});s(wt||[])}clearTimeout(Wt)}catch(At){e({title:"Falha ao carregar histrico",description:At?.message||"Tente novamente",variant:"destructive"})}finally{a(!1),he.current=Date.now()}};v.useEffect(()=>{if(K.current=!0,b==="comandas")try{const ue=localStorage.getItem(Se);if(ue){const Ct=JSON.parse(ue);Ct&&Array.isArray(Ct.rows)&&Date.now()-Number(Ct.ts||0)<12e4&&s(Ct.rows)}}catch{}return()=>{K.current=!1}},[Se,b]),v.useEffect(()=>{b==="comandas"&&(J(0),Z(!1)),We({append:!1})},[f,p,l,u,b]),v.useEffect(()=>{if(!n&&b==="comandas"&&i.length===0){const ue=setTimeout(()=>{K.current&&We({append:!1,skipCacheWrite:!1})},1500);return()=>clearTimeout(ue)}},[i.length,n,b]),v.useEffect(()=>{const ue=()=>{document.visibilityState==="visible"&&Date.now()-(he.current||0)>3e4&&We({append:!1})},Ct=()=>{Date.now()-(he.current||0)>3e4&&We({append:!1})};return window.addEventListener("visibilitychange",ue),window.addEventListener("focus",Ct),()=>{window.removeEventListener("visibilitychange",ue),window.removeEventListener("focus",Ct)}},[Se,b]);const be=async ue=>{P(ue),k({loading:!0,itens:[],pagamentos:[]});const Ct=Ee();me.current=!0;const At=++te.current,Wt=setTimeout(()=>{te.current===At&&me.current&&k(wt=>({...wt,loading:!1}))},1e4);if(!Ct){clearTimeout(Wt),te.current===At&&me.current&&k({loading:!1,itens:[],pagamentos:[]});return}try{const wt=(i||[]).find(Ae=>Ae.id===ue)||null;if(wt){const Ae=wt.mesa_id==null?"Balco":wt.mesaNumero!=null?`Mesa ${wt.mesaNumero}`:"Comanda";E({mesaLabel:Ae,clientesStr:wt.clientesStr||"",aberto_em:wt.aberto_em||null,fechado_em:wt.fechado_em||null,tipo:wt.mesa_id==null?"balcao":"comanda"})}else E(null)}catch{E(null)}try{const wt=async()=>{const[qe,Ot]=await Promise.all([Fi({comandaId:ue,codigoEmpresa:Ct}),lHe({comandaId:ue,codigoEmpresa:Ct})]);let Y=[];try{Y=await os({comandaId:ue,codigoEmpresa:Ct})}catch{}const ve=new Map((Y||[]).map(Le=>{const it=Le?.cliente_id??Le?.clientes?.id??null,Ye=Le?.clientes?.nome??Le?.nome??Le?.nome_livre??"";return it?[String(it),Ye]:null}).filter(Boolean)),Ve=Array.from(ve.values()),$e=(Ot||[]).map((Le,it)=>{let Ye="";return Le?.cliente_id?Ye=ve.get(String(Le.cliente_id))||"":Ve.length>0&&(Ye=Ve[it%Ve.length]),{...Le,cliente_nome:Ye,finalizadora_nome:Le?.finalizadoras?.nome||Le?.metodo||""}});return{itens:qe||[],pagamentos:$e}};let Ae=await wt();Ae.itens.length===0&&Ae.pagamentos.length===0&&(await new Promise(qe=>setTimeout(qe,700)),Ae=await wt()),te.current===At&&me.current&&k({loading:!1,itens:Ae.itens,pagamentos:Ae.pagamentos})}catch(wt){te.current===At&&me.current&&k({loading:!1,itens:[],pagamentos:[]}),e({title:"Falha ao carregar detalhes",description:wt?.message||"Tente novamente",variant:"destructive"})}finally{clearTimeout(Wt),te.current===At&&me.current&&k(wt=>({...wt,loading:!1}))}},ne=v.useMemo(()=>({sum:i.reduce((Ct,At)=>Ct+Number(At.total||0),0)}),[i]),Qt=ue=>(ue||"").toString().toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,""),bt=v.useMemo(()=>{const ue=(p||"").trim(),Ct=Qt(ue),Wt=i.filter(wt=>{const Ae=wt.mesa_id==null;return!(x==="balcao"&&!Ae||x==="comanda"&&Ae)}).filter(wt=>{const Ae=wt.statusDerived||(wt.status==="cancelled"?"cancelled":wt.fechado_em?"closed":wt.status||"open");return f==="closed"?Ae==="closed":f==="open"?Ae==="open":f==="awaiting-payment"?Ae==="awaiting-payment":f==="cancelled"?Ae==="cancelled":!0});return Ct?Wt.filter(wt=>{const Ae=wt.mesaNumero!=null?String(wt.mesaNumero):"",qe=wt.mesa_id==null?"balcao":`mesa ${Ae}`;return[Ae,qe,wt.clientesStr||"",wt.finalizadorasStr||"",wt.mesa_id==null?"balcao":"comanda",wt.statusDerived||wt.status||""].map(Qt).join(" | ").includes(Ct)}):Wt},[i,p,x,f]),Pt=ue=>ue==="open"?"Aberta":ue==="awaiting-payment"?"Pagamento":ue==="closed"?"Fechada":ue==="cancelled"?"Cancelada":ue||"",Qe=ue=>{if(!ue)return"";try{return new Date(ue).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}},ft=ue=>{const Ct=String(ue||"").toLowerCase();return Ct==="open"?"Aberto":Ct==="closed"?"Fechado":""},mt=ue=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(ue||0)),_t=ue=>ue==="open"?"text-info bg-info/10 border-info/30":ue==="awaiting-payment"?"text-warning bg-warning/10 border-warning/30":ue==="closed"?"text-success bg-success/10 border-success/30":ue==="cancelled"?"text-red-400 bg-red-500/10 border-red-500/30":"text-text-secondary bg-transparent border-border/50";return o.jsxs(Pr.div,{variants:Nat,initial:"hidden",animate:"visible",className:"min-h-screen flex flex-col",children:[o.jsxs(Pr.div,{variants:y0,className:"mb-6 gap-3 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(Vd,{value:"historico",onValueChange:ue=>{ue==="mesas"&&t("/vendas"),ue==="balcao"&&t("/balcao"),ue==="historico"&&t("/historico")},children:o.jsxs(Qu,{className:"w-full grid grid-cols-3 sm:w-auto sm:inline-flex",children:[o.jsx(Na,{value:"mesas",children:"Mesas"}),o.jsx(Na,{value:"balcao",children:"Balco"}),o.jsx(Na,{value:"historico",children:"Histrico"})]})}),o.jsxs("div",{className:"w-full flex items-center gap-2 sm:gap-3",children:[o.jsxs("div",{className:"flex sm:hidden items-center gap-2 w-full",children:[o.jsxs(Yn,{value:b,onValueChange:w,children:[o.jsx(Hn,{className:"w-[160px] text-sm",children:o.jsx(Xn,{placeholder:"Selecionar"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"comandas",children:"Comandas"}),o.jsx(qt,{value:"fechamentos",children:"Fechamentos"})]})]}),o.jsxs("div",{className:"ml-auto text-xs text-text-secondary whitespace-nowrap",children:["Total: ",o.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",ne.sum.toFixed(2)]})]}),b==="comandas"&&o.jsx(ye,{type:"button",size:"icon",variant:"outline",className:"h-9 w-9 sm:hidden",onClick:()=>F(!0),title:"Aes",children:o.jsx(po,{className:"h-4 w-4"})}),b==="fechamentos"&&o.jsx(ye,{type:"button",size:"icon",variant:"outline",className:"h-9 w-9 sm:hidden",onClick:oe,title:"Exportar",children:o.jsx(po,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 ml-auto",children:o.jsx(Vd,{value:b,onValueChange:w,className:"w-full sm:w-auto",children:o.jsxs(Qu,{className:"w-full grid grid-cols-2 sm:w-auto sm:inline-flex text-sm",children:[o.jsx(Na,{value:"comandas",className:"text-sm",children:"Comandas"}),o.jsx(Na,{value:"fechamentos",className:"text-sm",children:"Fechamentos"})]})})})]}),o.jsxs("div",{className:"hidden sm:flex w-full sm:w-auto items-center gap-2 sm:gap-3",children:[b==="comandas"&&o.jsxs(o.Fragment,{children:[o.jsxs(ye,{variant:"secondary",size:"sm",className:"hidden sm:inline-flex",onClick:()=>B(!0),children:[o.jsx(uc,{className:"mr-2 h-4 w-4"}),"Importar XML"]}),o.jsxs(ye,{variant:"outline",size:"sm",className:"hidden sm:inline-flex",onClick:ce,children:[o.jsx(po,{className:"mr-1 h-3 w-3"}),"Exportar"]}),o.jsx("button",{className:"hidden sm:inline-block text-xs text-text-muted hover:text-text-primary transition-colors",onClick:()=>{if($){const ue=new Date().toISOString().slice(0,10);c(ue),d(ue),H(!1)}else c(""),d(""),H(!0);J(0)},title:$?"Voltar ao filtro de hoje":"Mostrar todas as comandas",children:$?"":""}),o.jsxs("div",{className:"text-sm text-text-secondary whitespace-nowrap ml-auto",children:["Total: ",o.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",ne.sum.toFixed(2)]})]})]}),b==="fechamentos"&&o.jsxs(ye,{variant:"outline",size:"sm",className:"hidden sm:inline-flex",onClick:oe,children:[o.jsx(po,{className:"mr-1 h-3 w-3"}),"Exportar"]})]})]}),o.jsx(cn,{open:W,onOpenChange:F,children:o.jsxs(on,{className:"sm:hidden w-[92vw] max-w-[360px] p-2",onOpenAutoFocus:ue=>ue.preventDefault(),onKeyDown:ue=>ue.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{className:"text-base",children:"Aes"}),o.jsx(hn,{children:"Escolha uma ao para Comandas"})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs(ye,{variant:"secondary",onClick:()=>{F(!1),B(!0)},children:[o.jsx(uc,{className:"mr-2 h-4 w-4"})," Importar XML"]}),o.jsxs(ye,{variant:"outline",onClick:()=>{F(!1),ce()},children:[o.jsx(po,{className:"mr-2 h-4 w-4"})," Exportar CSV"]})]})]})}),b==="comandas"&&o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsxs("div",{className:"text-xs text-text-secondary",children:["Carregadas ",i.length," ",i.length===1?"comanda":"comandas"]}),V&&o.jsx(ye,{size:"sm",variant:"outline",disabled:n,onClick:async()=>{const ue=U+L;J(ue),await We({append:!0})},children:"Carregar mais"})]}),b==="comandas"&&o.jsxs("div",{className:"sm:hidden bg-surface rounded-lg border border-border p-3 mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Buscar...",className:"pl-9 h-9 text-sm",value:m,onChange:ue=>g(ue.target.value)})]}),o.jsx(ye,{size:"sm",variant:"outline",className:"h-9",onClick:()=>j(ue=>!ue),children:_?"Ocultar":"Filtros"})]}),o.jsxs("div",{className:"mt-1 text-[11px] text-text-secondary truncate",children:[l||"","  ",u||""]})]}),b==="comandas"&&o.jsx(Pr.div,{variants:y0,className:`bg-surface rounded-lg border border-border p-4 mb-4 ${_?"":"hidden"} sm:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Perodo Inicial"}),o.jsx(g2,{value:l,onChange:c})]}),o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Perodo Final"}),o.jsx(g2,{value:u,onChange:d})]}),o.jsxs("div",{className:"md:col-span-2 hidden sm:block",children:[o.jsx(vt,{className:"mb-1 block",children:"Busca"}),o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),o.jsx($t,{placeholder:"Mesa, status (fechada/aberta) ou cliente",className:"pl-9",value:m,onChange:ue=>g(ue.target.value)})]})]}),o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Status"}),o.jsxs(Yn,{value:f,onValueChange:h,children:[o.jsx(Hn,{className:"w-full text-xs",children:o.jsx(Xn,{placeholder:"Selecionar status"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"closed",children:"Fechadas"}),o.jsx(qt,{value:"open",children:"Abertas"}),o.jsx(qt,{value:"awaiting-payment",children:"Pagamento"}),o.jsx(qt,{value:"cancelled",children:"Canceladas"})]})]})]}),o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Tipo"}),o.jsxs(Yn,{value:x,onValueChange:y,children:[o.jsx(Hn,{className:"w-full text-xs",children:o.jsx(Xn,{placeholder:"Selecionar tipo"})}),o.jsxs(Gn,{children:[o.jsx(qt,{value:"all",children:"Todos"}),o.jsx(qt,{value:"comanda",children:"Comandas"}),o.jsx(qt,{value:"balcao",children:"Balco"})]})]})]})]})}),b==="comandas"&&o.jsxs(Pr.div,{variants:y0,className:"bg-surface rounded-lg border border-border p-0 overflow-hidden",children:[o.jsx("div",{className:"hidden sm:block overflow-x-auto pr-2 sm:pr-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Mesa"}),o.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Tipo"}),o.jsx("th",{className:"text-left px-4 py-3",children:"Clientes"}),o.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3",children:"Finalizadora"}),o.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Abertura"}),o.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Fechamento"}),o.jsx("th",{className:"text-right px-4 py-3",children:"Total"})]})}),o.jsxs("tbody",{children:[bt.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-text-muted",children:"Nenhuma comanda encontrada no perodo."})}),bt.map(ue=>o.jsxs("tr",{className:"border-t border-border/70 hover:bg-warning/10 cursor-pointer transition-all duration-150 hover:translate-x-[1px]",onClick:()=>be(ue.id),children:[o.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:ue.mesa_id==null?"Balco":ue.mesaNumero!=null?`Mesa ${ue.mesaNumero}`:""}),o.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:ue.mesa_id==null?"Balco":"Comanda"}),o.jsx("td",{className:"px-4 py-2 break-words",title:ue.clientesStr||"",children:ue.clientesStr||""}),o.jsx("td",{className:"px-4 py-2",children:o.jsx("span",{className:kt("inline-flex items-center text-[11px] font-medium px-2 py-0.5 rounded-full border",_t(ue.statusDerived||ue.status)),children:Pt(ue.statusDerived||ue.status)})}),o.jsx("td",{className:"px-4 py-2 break-words",title:ue.finalizadorasStr||"",children:ue.finalizadorasStr||""}),o.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:Qe(ue.aberto_em)}),o.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:Qe(ue.fechado_em)}),o.jsx("td",{className:"px-4 py-2 text-right font-semibold whitespace-nowrap",children:mt(ue.total)})]},ue.id))]})]})}),o.jsxs("div",{className:"sm:hidden divide-y divide-border",children:[bt.length===0&&o.jsx("div",{className:"p-4 text-center text-text-muted",children:"Nenhuma comanda encontrada no perodo."}),bt.map(ue=>o.jsxs("button",{className:"w-full text-left p-3 active:bg-warning/10",onClick:()=>be(ue.id),children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-xs text-text-secondary",children:ue.mesa_id==null?"Balco":ue.mesaNumero!=null?`Mesa ${ue.mesaNumero}`:"Comanda"}),o.jsx("div",{className:"font-semibold truncate max-w-[220px]",children:ue.clientesStr||"Sem cliente"})]}),o.jsx("div",{children:o.jsx("div",{className:kt("inline-flex items-center text-[10px] font-medium px-2 py-0.5 rounded-full border",_t(ue.statusDerived||ue.status)),children:Pt(ue.statusDerived||ue.status)})})]}),o.jsx("div",{className:"mt-1 text-xs text-text-secondary truncate",children:ue.finalizadorasStr||""}),o.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0 text-[11px] text-text-muted truncate pr-2",children:[Qe(ue.aberto_em),ue.fechado_em?`  ${Qe(ue.fechado_em)}`:""]}),o.jsx("div",{className:"flex-shrink-0 font-mono font-semibold whitespace-nowrap text-right min-w-[84px]",children:mt(ue.total)})]})]},ue.id))]})]}),b==="fechamentos"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"sm:hidden bg-surface rounded-lg border border-border p-3 mb-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-sm font-medium",children:"Filtros"}),o.jsx(ye,{size:"sm",variant:"outline",onClick:()=>j(ue=>!ue),children:_?"Ocultar filtros":"Mostrar filtros"})]})}),o.jsx(Pr.div,{variants:y0,className:`bg-surface rounded-lg border border-border p-4 mb-4 ${_?"":"hidden"} sm:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Perodo Inicial"}),o.jsx(g2,{value:l,onChange:c})]}),o.jsxs("div",{children:[o.jsx(vt,{className:"mb-1 block",children:"Perodo Final"}),o.jsx(g2,{value:u,onChange:d})]})]})}),o.jsxs(Pr.div,{variants:y0,className:"bg-surface rounded-lg border border-border p-4 overflow-hidden",children:[o.jsxs("div",{className:"sm:hidden space-y-2",children:[n&&(!i||i.length===0)&&o.jsxs("div",{className:"px-2 py-3 text-center text-text-muted",children:[o.jsx(Em,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando fechamentos"]}),(!i||i.length===0)&&!n&&o.jsx("div",{className:"px-2 py-3 text-center text-text-muted",children:"Nenhum fechamento encontrado no perodo."}),(i||[]).map(ue=>o.jsxs("button",{onClick:async()=>{try{O({open:!0,loading:!0,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}});const Ct=Ee(),[At,Wt]=await Promise.all([ZS({caixaSessaoId:ue.id,codigoEmpresa:Ct}).catch(()=>null),Ym({caixaSessaoId:ue.id,codigoEmpresa:Ct}).catch(()=>[])]);let wt=At?.movimentos||null;if(!wt&&Array.isArray(Wt)){const qe={suprimentos:0,sangrias:0,ajustes:0,troco:0};for(const Ot of Wt){const Y=String(Ot?.tipo||"").toLowerCase(),ve=Number(Ot?.valor||0);Y==="suprimento"?qe.suprimentos+=ve:Y==="sangria"?qe.sangrias+=ve:Y==="ajuste"?qe.ajustes+=ve:Y==="troco"&&(qe.troco+=ve)}wt=qe}const Ae=At?{totalDescontos:Number(At.total_descontos||0),totalVendasLiquidas:Number(At.total_liquido||0),totalEntradas:Number(At.total_entradas||0),totalPorFinalizadora:At.por_finalizadora||{}}:null;O({open:!0,loading:!1,resumo:Ae,periodo:{from:At?.periodo_de||ue.aberto_em,to:At?.periodo_ate||ue.fechado_em},movs:Wt||[],movimentosAgg:wt,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}})}catch{O({open:!0,loading:!1,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}})}},className:"w-full text-left p-3 rounded-lg border border-border hover:bg-surface-2 transition",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"text-xs text-text-secondary",children:[Qe(ue.aberto_em),o.jsx("span",{className:"mx-1",children:""}),Qe(ue.fechado_em)]}),o.jsx("div",{className:"text-[11px] px-2 py-0.5 rounded-full border bg-success/10 text-success border-success/30",children:ft(ue.status)})]}),o.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{className:"bg-surface-2 rounded p-2 border border-border",children:[o.jsx("div",{className:"text-[10px] text-text-secondary",children:"Saldo Inicial"}),o.jsx("div",{className:"font-semibold",children:ue?.saldo_inicial!=null?mt(ue.saldo_inicial):""})]}),o.jsxs("div",{className:"bg-surface-2 rounded p-2 border border-border",children:[o.jsx("div",{className:"text-[10px] text-text-secondary",children:"Saldo Final (contado)"}),o.jsx("div",{className:"font-semibold",children:ue?.valor_final_dinheiro!=null?mt(ue.valor_final_dinheiro):""})]})]})]},ue.id))]}),o.jsx("div",{className:"hidden sm:block overflow-x-auto max-h-[60vh] overflow-y-auto pr-2 sm:pr-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3",children:"Abertura"}),o.jsx("th",{className:"text-left px-4 py-3",children:"Fechamento"}),o.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),o.jsx("th",{className:"text-right px-4 py-3",children:"Saldo Inicial"}),o.jsx("th",{className:"text-right px-4 py-3",children:"Saldo Final (contado)"})]})}),o.jsxs("tbody",{children:[n&&(!i||i.length===0)&&o.jsx("tr",{children:o.jsxs("td",{colSpan:5,className:"px-4 py-6 text-center text-text-muted",children:[o.jsx(Em,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando fechamentos"]})}),(!i||i.length===0)&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-text-muted",children:"Nenhum fechamento encontrado no perodo."})}),(i||[]).map(ue=>o.jsxs("tr",{className:"border-t border-border/70 hover:bg-success/10 cursor-pointer transition-all duration-150 hover:translate-x-[1px]",onClick:async()=>{try{O({open:!0,loading:!0,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}});const Ct=async()=>{const wt=Ee(),[Ae,qe]=await Promise.all([ZS({caixaSessaoId:ue.id,codigoEmpresa:wt}).catch(()=>null),Ym({caixaSessaoId:ue.id,codigoEmpresa:wt}).catch(()=>[])]);return{snap:Ae,movs:qe}};let{snap:At,movs:Wt}=await Ct();if(At||(await new Promise(wt=>setTimeout(wt,700)),{snap:At,movs:Wt}=await Ct()),At){const wt={totalDescontos:Number(At.total_descontos||0),totalVendasLiquidas:Number(At.total_liquido||0),totalEntradas:Number(At.total_entradas||0),totalPorFinalizadora:At.por_finalizadora||{}};let Ae=At.movimentos||null;if(!Ae&&Array.isArray(Wt)){const qe={suprimentos:0,sangrias:0,ajustes:0,troco:0};for(const Ot of Wt){const Y=String(Ot?.tipo||"").toLowerCase(),ve=Number(Ot?.valor||0);Y==="suprimento"?qe.suprimentos+=ve:Y==="sangria"?qe.sangrias+=ve:Y==="ajuste"?qe.ajustes+=ve:Y==="troco"&&(qe.troco+=ve)}Ae=qe}O({open:!0,loading:!1,resumo:wt,periodo:{from:At.periodo_de||ue.aberto_em,to:At.periodo_ate||ue.fechado_em},movs:Wt||[],movimentosAgg:Ae,saldos:{inicial:typeof At.saldo_inicial<"u"?Number(At.saldo_inicial):ue?.saldo_inicial??null,final:typeof At.valor_final_dinheiro<"u"?Number(At.valor_final_dinheiro):ue?.valor_final_dinheiro??null}})}else{const wt=Ee(),Ae=await fc({from:ue.aberto_em,to:ue.fechado_em||new Date().toISOString(),codigoEmpresa:wt});let qe=null;if(Array.isArray(Wt)){const Ot={suprimentos:0,sangrias:0,ajustes:0,troco:0};for(const Y of Wt){const ve=String(Y?.tipo||"").toLowerCase(),Ve=Number(Y?.valor||0);ve==="suprimento"?Ot.suprimentos+=Ve:ve==="sangria"?Ot.sangrias+=Ve:ve==="ajuste"?Ot.ajustes+=Ve:ve==="troco"&&(Ot.troco+=Ve)}qe=Ot}O({open:!0,loading:!1,resumo:Ae||null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:Wt||[],movimentosAgg:qe,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.valor_final_dinheiro??null}})}}catch{O({open:!0,loading:!1,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.valor_final_dinheiro??null}})}},children:[o.jsx("td",{className:"px-4 py-2",children:Qe(ue.aberto_em)}),o.jsx("td",{className:"px-4 py-2",children:Qe(ue.fechado_em)}),o.jsx("td",{className:"px-4 py-2",children:ft(ue.status)}),o.jsx("td",{className:"px-4 py-2 text-right",children:ue?.saldo_inicial!=null?mt(ue.saldo_inicial):""}),o.jsx("td",{className:"px-4 py-2 text-right",children:ue?.valor_final_dinheiro!=null?mt(ue.valor_final_dinheiro):""})]},ue.id))]})]})})]})]}),b==="comandas"&&o.jsx(cn,{open:!!N,onOpenChange:ue=>{ue?me.current=!0:(me.current=!1,P(null),k({loading:!1,itens:[],pagamentos:[]}),E(null))},children:o.jsxs(on,{className:"sm:max-w-4xl w-[92vw] max-h-[90vh] overflow-hidden flex flex-col animate-none",onKeyDown:ue=>ue.stopPropagation(),children:[o.jsxs(an,{children:[o.jsxs(en,{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{children:M?o.jsxs("span",{children:[M.mesaLabel,M.clientesStr?o.jsxs("span",{className:"text-text-secondary",children:["  ",M.clientesStr]}):null]}):o.jsxs(o.Fragment,{children:["Comanda #",N||""]})}),M&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:kt("text-xs px-2 py-0.5 rounded-full border",_t(M.status)),children:M.status==="closed"?"Fechada":M.status==="open"?"Aberta":"Cancelada"}),o.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full border bg-info/10 text-info border-info/30",children:M.tipo==="balcao"?"Balco":M.tipo==="comanda"?"Mesa":"Importada"})]})]}),o.jsx(hn,{className:"space-y-1",children:M?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[M.aberto_em?o.jsxs(o.Fragment,{children:["Abertura: ",Qe(M.aberto_em)]}):"",M.fechado_em&&o.jsxs(o.Fragment,{children:[" ",""," ","Fechamento: ",Qe(M.fechado_em),(()=>{const ue=new Date(M.aberto_em),At=new Date(M.fechado_em)-ue,Wt=Math.floor(At/6e4),wt=Math.floor(Wt/60),Ae=Wt%60;return Wt>0?o.jsxs("span",{className:"text-text-muted",children:[" (",wt>0?`${wt}h `:"",Ae,"min)"]}):null})()]})]}),M.observacao&&o.jsx("div",{className:"text-xs text-text-muted",children:M.observacao.includes("Importado de XML")?o.jsxs("span",{className:"text-warning",children:[" ",M.observacao.split(`
`)[0]]}):o.jsxs("span",{children:["Obs: ",M.observacao]})})]}):o.jsx(o.Fragment,{children:"Itens e pagamentos registrados."})})]}),A.loading?o.jsxs("div",{className:"p-6 text-center text-text-muted",children:[o.jsx(Em,{className:"mr-2 inline h-4 w-4 animate-spin"})," Carregando..."]}):o.jsxs("div",{className:"space-y-4 overflow-y-auto flex-1 px-1",children:[(()=>{const ue=A.itens.reduce((Ae,qe)=>Ae+Number(qe.quantidade||0)*Number(qe.preco_unitario||0),0),Ct=A.itens.reduce((Ae,qe)=>Ae+Number(qe.desconto||0),0),At=ue-Ct,Wt=A.pagamentos.reduce((Ae,qe)=>Ae+Number(qe.valor||0),0),wt=Wt-At;return o.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Resumo Financeiro"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Subtotal dos itens:"}),o.jsxs("span",{className:"font-mono",children:["R$ ",ue.toFixed(2)]})]}),Ct>0&&o.jsxs("div",{className:"flex justify-between text-warning",children:[o.jsx("span",{children:"Descontos:"}),o.jsxs("span",{className:"font-mono",children:["- R$ ",Ct.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t border-border",children:[o.jsx("span",{children:"Total da comanda:"}),o.jsxs("span",{className:"font-mono text-lg",children:["R$ ",At.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-success",children:[o.jsx("span",{children:"Total pago:"}),o.jsxs("span",{className:"font-mono",children:["R$ ",Wt.toFixed(2)]})]}),Math.abs(wt)>.01&&o.jsxs("div",{className:kt("flex justify-between",wt>0?"text-warning":"text-danger"),children:[o.jsx("span",{children:wt>0?"Troco/Excedente:":"Faltando:"}),o.jsxs("span",{className:"font-mono",children:["R$ ",Math.abs(wt).toFixed(2)]})]})]})]})})(),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"border rounded-md p-3",children:[o.jsxs("div",{className:"font-semibold mb-2",children:["Itens (",A.itens.length,")"]}),A.itens.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem itens."}):o.jsx("ul",{className:"text-sm space-y-2 max-h-64 overflow-auto thin-scroll",children:A.itens.map(ue=>{const Ct=Number(ue.quantidade||0)*Number(ue.preco_unitario||0),At=Number(ue.desconto||0),Wt=Ct-At;return o.jsx("li",{className:"border-b border-border/50 pb-2 last:border-0",children:o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("span",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:ue.descricao}),o.jsxs("div",{className:"text-xs text-text-muted",children:[ue.quantidade," x R$ ",Number(ue.preco_unitario||0).toFixed(2),At>0&&o.jsxs("span",{className:"text-warning",children:[" (desc: R$ ",At.toFixed(2),")"]})]})]}),o.jsxs("span",{className:"font-mono font-semibold whitespace-nowrap",children:["R$ ",Wt.toFixed(2)]})]})},ue.id)})})]}),o.jsxs("div",{className:"border rounded-md p-3",children:[o.jsxs("div",{className:"font-semibold mb-2",children:["Pagamentos (",A.pagamentos.length,")"]}),A.pagamentos.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros."}):o.jsx("ul",{className:"text-sm space-y-2 max-h-64 overflow-auto thin-scroll",children:A.pagamentos.map(ue=>o.jsxs("li",{className:"flex justify-between gap-2 border-b border-border/50 pb-2 last:border-0",children:[o.jsxs("span",{className:"pr-2 break-words flex-1",children:[ue.cliente_nome?o.jsx("div",{className:"font-medium",children:ue.cliente_nome}):o.jsx("div",{className:"text-text-muted",children:"Sem cliente"}),o.jsx("div",{className:"text-xs text-text-secondary",children:ue.finalizadora_nome||"Outros"})]}),o.jsxs("span",{className:"font-mono font-semibold whitespace-nowrap",children:["R$ ",Number(ue.valor||0).toFixed(2)]})]},ue.id))})]})]})]}),o.jsx($n,{children:o.jsx(ye,{size:"sm",variant:"secondary",onClick:()=>{P(null)},children:"Fechar"})})]})}),b==="fechamentos"&&o.jsx(cn,{open:I.open,onOpenChange:ue=>{ue||O({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null}})},children:o.jsxs(on,{className:"sm:max-w-2xl w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden overflow-x-hidden",onKeyDown:ue=>ue.stopPropagation(),children:[o.jsxs(an,{children:[o.jsx(en,{children:"Fechamento do Perodo"}),o.jsxs(hn,{children:[I.periodo.from?Qe(I.periodo.from):""," ","at"," ",I.periodo.to?Qe(I.periodo.to):""]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:I.loading?o.jsxs("div",{className:"p-3 sm:p-4 text-text-muted",children:[o.jsx(Em,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando resumo"]}):o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Inicial"}),o.jsx("p",{className:"text-xl font-bold",children:mt(I?.saldos?.inicial??0)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Entradas (pagamentos)"}),o.jsx("p",{className:"text-xl font-bold text-success",children:mt(I.resumo?.totalEntradas||0)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border col-span-2 sm:col-span-1",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Final (contado)"}),o.jsx("p",{className:"text-xl font-bold",children:I?.saldos?.final!=null?mt(I.saldos.final):""})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Descontos"}),o.jsx("p",{className:"text-xl font-bold text-warning",children:mt(I.resumo?.totalDescontos||0)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Lquido"}),o.jsx("p",{className:"text-xl font-bold",children:mt(I.resumo?.totalVendasLiquidas||0)})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold mb-1",children:"Por Finalizadora"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:I.resumo?.totalPorFinalizadora&&Object.keys(I.resumo.totalPorFinalizadora).length>0?Object.entries(I.resumo.totalPorFinalizadora).map(([ue,Ct])=>o.jsxs("div",{className:"flex items-center justify-between bg-surface-2 rounded-md p-2 border border-border",children:[o.jsx("span",{className:"text-sm text-text-secondary",children:String(ue)}),o.jsx("span",{className:"text-sm font-semibold",children:mt(Ct)})]},ue)):o.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados de finalizadoras"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold mb-1",children:"Resumo de Movimentaes"}),I.movimentosAgg?o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Suprimentos"}),o.jsx("p",{className:"text-lg font-bold text-success",children:mt(I.movimentosAgg?.suprimentos||0)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Sangrias"}),o.jsx("p",{className:"text-lg font-bold text-danger",children:mt(I.movimentosAgg?.sangrias||0)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Ajustes"}),o.jsx("p",{className:"text-lg font-bold",children:mt(I.movimentosAgg?.ajustes||0)})]}),o.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[o.jsx("p",{className:"text-xs text-text-secondary",children:"Troco"}),o.jsx("p",{className:"text-lg font-bold",children:mt(I.movimentosAgg?.troco||0)})]})]}):o.jsx("div",{className:"text-sm text-text-muted",children:"Sem movimentaes agregadas nesta sesso."})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold mb-1",children:"Movimentaes"}),!I.movs||I.movs.length===0?o.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma movimentao registrada"}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"sm:hidden divide-y divide-border rounded-md border border-border overflow-hidden",children:I.movs.map((ue,Ct)=>o.jsxs("li",{className:"px-3 py-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap",children:Qe(ue.criado_em)}),o.jsx("span",{className:"text-sm font-semibold whitespace-nowrap",children:mt(ue.valor||0)})]}),o.jsxs("div",{className:"mt-0.5 flex items-center gap-2 text-xs",children:[o.jsx("span",{className:"px-1.5 py-0.5 rounded bg-surface-2 border border-border text-text-secondary whitespace-nowrap",children:String(ue.tipo||"").toUpperCase()}),o.jsx("span",{className:"text-xs text-text-primary whitespace-normal break-words flex-1",children:ue.observacao||""})]})]},Ct))}),o.jsx("div",{className:"hidden sm:block rounded-md border border-border overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-surface-2",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-3 py-2",children:"Data"}),o.jsx("th",{className:"text-left px-3 py-2",children:"Tipo"}),o.jsx("th",{className:"text-left px-3 py-2",children:"Obs"}),o.jsx("th",{className:"text-right px-3 py-2",children:"Valor"})]})}),o.jsx("tbody",{children:I.movs.map((ue,Ct)=>o.jsxs("tr",{className:"border-t border-border/60",children:[o.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Qe(ue.criado_em)}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:String(ue.tipo||"").toUpperCase()}),o.jsx("td",{className:"px-3 py-2 whitespace-normal break-words",children:ue.observacao||""}),o.jsx("td",{className:"px-3 py-2 text-right font-semibold whitespace-nowrap",children:mt(ue.valor||0)})]},Ct))})]})})]})]})]})})]})}),o.jsx(jat,{open:R,onOpenChange:B,codigoEmpresa:r?.codigo_empresa,onSuccess:async ue=>{B(!1),ue&&(c(ue),d(ue)),await new Promise(Ct=>setTimeout(Ct,500)),J(0),await We({append:!1})}})]})}const Pat="18810778",vg={hidden:{opacity:0,x:20},visible:{opacity:1,x:0,transition:{duration:.3}},exit:{opacity:0,x:-20,transition:{duration:.2}}};function Eat(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,18)}function kat(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").substring(0,15)}async function Oat(){try{const{data:e,error:t}=await Ne.from("empresas").select("codigo_empresa").order("codigo_empresa",{ascending:!1}).limit(100);if(t)return console.warn("Erro ao buscar cdigos:",t),"1";let r=0;return e&&e.length>0&&e.forEach(n=>{const a=parseInt(n.codigo_empresa);!isNaN(a)&&a>r&&(r=a)}),(r+1).toString()}catch(e){return console.warn("Erro ao gerar cdigo:",e),"1"}}function Tat(){const{toast:e}=Qa(),t=wc(),[r,n]=v.useState(1),[a,i]=v.useState(!1),[s,l]=v.useState(!1),[c,u]=v.useState(""),[d,f]=v.useState({email:"",nomeUsuario:"",cargo:"",razaoSocial:"",nomeFantasia:"",cnpj:"",emailEmpresa:"",telefone:"",endereco:"",quadras:[],mesas:[],categorias:[]}),[h,m]=v.useState(null),g=F=>{F.preventDefault(),c===Pat?(l(!0),n(2),e({title:"Acesso liberado",description:"Bem-vindo ao formulrio de criao de empresa."})):(e({title:"Senha incorreta",description:"Tente novamente.",variant:"destructive"}),u(""))},p=()=>!0,x=()=>d.razaoSocial.trim()?d.nomeFantasia.trim()?!0:(e({title:"Nome Fantasia obrigatrio",variant:"destructive"}),!1):(e({title:"Razo Social obrigatria",variant:"destructive"}),!1),y=()=>{r===2&&!p()||r===3&&!x()||n(r+1)},b=()=>{n(r-1)},w=()=>{const F=d.quadras.length+1;f({...d,quadras:[...d.quadras,{nome:`Quadra ${F}`}]})},_=F=>{f({...d,quadras:d.quadras.filter(($,H)=>H!==F)})},j=()=>{const F=d.mesas.length+1;f({...d,mesas:[...d.mesas,{numero:F,nome:`Mesa ${F}`}]})},N=F=>{f({...d,mesas:d.mesas.filter(($,H)=>H!==F)})},P=()=>{const F=prompt("Digite o nome da categoria:");F&&F.trim()&&f({...d,categorias:[...d.categorias,{nome:F.trim(),descricao:""}]})},A=F=>{f({...d,categorias:d.categorias.filter(($,H)=>H!==F)})},k=async()=>{try{i(!0);try{const L={user:{email:d.email?.trim()||null,nome:d.nomeUsuario?.trim()||null,cargo:d.cargo?.trim()||"admin"},empresa:{razao_social:d.razaoSocial?.trim()||null,nome_fantasia:d.nomeFantasia?.trim()||null,cnpj:d.cnpj?d.cnpj.replace(/\D/g,""):null,email:d.emailEmpresa?.trim()||null,telefone:d.telefone?.trim()||null,endereco:d.endereco?.trim()||null},quadras:d.quadras||[],mesas:d.mesas||[],categorias:d.categorias||[]},{data:U,error:J}=await Ne.rpc("create_company_full",{payload:L});if(!J&&U&&U.codigo_empresa){m({success:!0,codigoEmpresa:U.codigo_empresa,email:d.email,nomeEmpresa:d.nomeFantasia,numQuadras:(d.quadras||[]).length,numMesas:(d.mesas||[]).length,numCategorias:(d.categorias||[]).length}),n(6),e({title:" Empresa criada com sucesso!",description:`Cdigo: ${U.codigo_empresa}`});return}else J&&console.warn("RPC create_company_full indisponvel/erro. Usando fluxo local.",J?.message||J)}catch(L){console.warn("Falha ao tentar RPC create_company_full. Usando fluxo local.",L?.message||L)}let F=null;d.email.trim()&&(console.log("Email fornecido:",d.email),console.log("Nota: O vnculo com o usurio ser criado no primeiro login"),F=null);const $=await Oat();console.log("Cdigo da empresa gerado:",$);const{data:H,error:ce}=await Ne.from("empresas").insert({codigo_empresa:$,nome:d.nomeFantasia,razao_social:d.razaoSocial,nome_fantasia:d.nomeFantasia,cnpj:d.cnpj?d.cnpj.replace(/\D/g,""):null,email:d.emailEmpresa||null,telefone:d.telefone||null,endereco:d.endereco||null}).select().single();if(ce)throw new Error("Erro ao criar empresa: "+ce.message);const{error:oe}=await Ne.from("empresa_counters").insert({empresa_id:H.id,next_cliente_codigo:1,next_agendamento_codigo:1});if(oe&&console.warn("Erro ao criar contador:",oe),d.email.trim()||d.nomeUsuario.trim())try{const L="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){const Z=Math.random()*16|0;return(V==="x"?Z:Z&3|8).toString(16)}),{error:U}=await Ne.from("usuarios").insert({id:L,email:d.email||null,nome:d.nomeUsuario||null,papel:d.cargo||"admin",codigo_empresa:$});U&&console.warn("Aviso ao criar usurio:",U.message);const{error:J}=await Ne.from("colaboradores").insert({id:L,nome:d.nomeUsuario||"Administrador",cargo:d.cargo||"admin",ativo:!0,codigo_empresa:$});J&&console.warn("Aviso ao criar colaborador:",J.message),d.email&&(console.log(" APS O PRIMEIRO LOGIN, execute este SQL no Supabase:"),console.log(`
-- Atualizar ID do colaborador com o ID real do auth.users
UPDATE public.colaboradores 
SET id = (SELECT id FROM auth.users WHERE email = '${d.email}')
WHERE codigo_empresa = '${$}' AND id = '${L}';

-- Atualizar ID do usurio
UPDATE public.usuarios 
SET id = (SELECT id FROM auth.users WHERE email = '${d.email}')
WHERE codigo_empresa = '${$}' AND id = '${L}';
            `))}catch(L){console.warn("Erro ao criar registros de usurio:",L)}try{await Ne.from("agenda_settings").insert({empresa_id:H.id,auto_confirm_enabled:!1,auto_start_enabled:!0,auto_finish_enabled:!0})}catch(L){console.warn("Aviso: no foi possvel criar agenda_settings agora (provvel RLS). Ser configurado aps o primeiro login.",L?.message||L)}if(d.quadras.length>0){const L=d.quadras.map(U=>({nome:U.nome,codigo_empresa:$}));await Ne.from("quadras").insert(L)}if(d.mesas.length>0){const L=d.mesas.map(U=>({numero:U.numero,nome:U.nome,codigo_empresa:$,status:"available"}));await Ne.from("mesas").insert(L)}if(d.categorias.length>0){const L=d.categorias.map(U=>({nome:U.nome,descricao:U.descricao||null,codigo_empresa:$,ativa:!0}));await Ne.from("produto_categorias").insert(L)}m({success:!0,codigoEmpresa:$,email:d.email,nomeEmpresa:d.nomeFantasia,numQuadras:d.quadras.length,numMesas:d.mesas.length,numCategorias:d.categorias.length}),n(6),e({title:" Empresa criada com sucesso!",description:`Cdigo: ${$}`})}catch(F){console.error("Erro ao criar empresa:",F),e({title:"Erro ao criar empresa",description:F.message,variant:"destructive"})}finally{i(!1)}},M=()=>{if(r===1||r===6)return null;const F=(r-1)/4*100;return o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"text-sm text-text-muted",children:["Etapa ",r-1," de 4"]}),o.jsxs("span",{className:"text-sm text-text-muted",children:[Math.round(F),"%"]})]}),o.jsx("div",{className:"h-2 bg-surface-2 rounded-full overflow-hidden",children:o.jsx(Pr.div,{className:"h-full bg-brand",initial:{width:0},animate:{width:`${F}%`},transition:{duration:.3}})})]})},E=()=>o.jsxs(Pr.div,{variants:vg,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-md mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:o.jsx(yv,{className:"w-8 h-8 text-brand"})}),o.jsx("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"rea Restrita"}),o.jsx("p",{className:"text-text-muted",children:"Digite a senha para acessar"})]}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"senha",children:"Senha de Acesso"}),o.jsx($t,{id:"senha",type:"password",value:c,onChange:F=>u(F.target.value),placeholder:"Digite a senha",className:"text-center text-lg tracking-widest",autoFocus:!0})]}),o.jsxs(ye,{type:"submit",className:"w-full",children:["Acessar",o.jsx(Sw,{className:"ml-2 h-4 w-4"})]})]})]},"step1"),I=()=>o.jsxs(Pr.div,{variants:vg,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:o.jsx(GE,{className:"w-8 h-8 text-brand"})}),o.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Primeiro Usurio"}),o.jsx("p",{className:"text-text-muted",children:"Informaes do administrador da empresa"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"email",children:"Email cadastrado no Supabase Auth"}),o.jsx($t,{id:"email",type:"email",value:d.email,onChange:F=>f({...d,email:F.target.value}),placeholder:"usuario@email.com"}),o.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Este email j deve estar cadastrado no Supabase Auth"})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"nomeUsuario",children:"Nome Completo"}),o.jsx($t,{id:"nomeUsuario",type:"text",value:d.nomeUsuario,onChange:F=>f({...d,nomeUsuario:F.target.value}),placeholder:"Joo Silva"})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"cargo",children:"Cargo na Empresa"}),o.jsx($t,{id:"cargo",type:"text",value:d.cargo,onChange:F=>f({...d,cargo:F.target.value}),placeholder:"Ex: Proprietrio, Gerente, Administrador, Scio, etc."}),o.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Digite o cargo que voc ocupa na empresa"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(ye,{type:"button",variant:"outline",onClick:()=>t("/"),className:"flex-1",children:"Cancelar"}),o.jsxs(ye,{type:"button",onClick:y,className:"flex-1",children:["Prximo",o.jsx(Sw,{className:"ml-2 h-4 w-4"})]})]})]})]},"step2"),O=()=>o.jsxs(Pr.div,{variants:vg,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:o.jsx(UE,{className:"w-8 h-8 text-brand"})}),o.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Dados da Empresa"}),o.jsx("p",{className:"text-text-muted",children:"Informaes cadastrais da empresa"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(vt,{htmlFor:"razaoSocial",children:"Razo Social *"}),o.jsx($t,{id:"razaoSocial",type:"text",value:d.razaoSocial,onChange:F=>f({...d,razaoSocial:F.target.value}),placeholder:"Empresa LTDA"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(vt,{htmlFor:"nomeFantasia",children:"Nome Fantasia *"}),o.jsx($t,{id:"nomeFantasia",type:"text",value:d.nomeFantasia,onChange:F=>f({...d,nomeFantasia:F.target.value}),placeholder:"Minha Empresa"}),o.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Como a empresa aparecer no sistema"})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"cnpj",children:"CNPJ"}),o.jsx($t,{id:"cnpj",type:"text",value:d.cnpj,onChange:F=>f({...d,cnpj:Eat(F.target.value)}),placeholder:"00.000.000/0000-00"})]}),o.jsxs("div",{children:[o.jsx(vt,{htmlFor:"telefone",children:"Telefone"}),o.jsx($t,{id:"telefone",type:"tel",value:d.telefone,onChange:F=>f({...d,telefone:kat(F.target.value)}),placeholder:"(11) 99999-9999"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(vt,{htmlFor:"emailEmpresa",children:"Email da Empresa"}),o.jsx($t,{id:"emailEmpresa",type:"email",value:d.emailEmpresa,onChange:F=>f({...d,emailEmpresa:F.target.value}),placeholder:"contato@empresa.com"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(vt,{htmlFor:"endereco",children:"Endereo Completo (opcional)"}),o.jsx($t,{id:"endereco",type:"text",value:d.endereco,onChange:F=>f({...d,endereco:F.target.value}),placeholder:"Rua X, 123, Bairro, Cidade - UF"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsxs(ye,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:[o.jsx(k5,{className:"mr-2 h-4 w-4"}),"Voltar"]}),o.jsxs(ye,{type:"button",onClick:y,className:"flex-1",children:["Prximo",o.jsx(Sw,{className:"ml-2 h-4 w-4"})]})]})]})]},"step3"),R=()=>o.jsxs(Pr.div,{variants:vg,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:o.jsx(WE,{className:"w-8 h-8 text-brand"})}),o.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Configurao Inicial"}),o.jsx("p",{className:"text-text-muted",children:"Adicione dados iniciais ou pule esta etapa"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(nue,{className:"w-5 h-5 text-brand"}),o.jsx("h3",{className:"font-semibold text-text-primary",children:"Quadras Esportivas"})]}),o.jsxs(ye,{type:"button",onClick:w,size:"sm",className:"gap-2",children:[o.jsx(oi,{className:"w-4 h-4"}),"Adicionar Quadra"]})]}),d.quadras.length>0?o.jsx("div",{className:"space-y-2",children:d.quadras.map((F,$)=>o.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[o.jsx("span",{className:"text-sm text-text-primary",children:F.nome}),o.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>_($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:o.jsx(Vu,{className:"w-4 h-4"})})]},$))}):o.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma quadra adicionada"})]}),o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(As,{className:"w-5 h-5 text-brand"}),o.jsx("h3",{className:"font-semibold text-text-primary",children:"Mesas da Loja"})]}),o.jsxs(ye,{type:"button",onClick:j,size:"sm",className:"gap-2",children:[o.jsx(oi,{className:"w-4 h-4"}),"Adicionar Mesa"]})]}),d.mesas.length>0?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:d.mesas.map((F,$)=>o.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[o.jsx("span",{className:"text-sm text-text-primary",children:F.nome}),o.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>N($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:o.jsx(Vu,{className:"w-4 h-4"})})]},$))}):o.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma mesa adicionada"})]}),o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(bv,{className:"w-5 h-5 text-brand"}),o.jsx("h3",{className:"font-semibold text-text-primary",children:"Categorias de Produtos"})]}),o.jsxs(ye,{type:"button",onClick:P,size:"sm",className:"gap-2",children:[o.jsx(oi,{className:"w-4 h-4"}),"Adicionar Categoria"]})]}),d.categorias.length>0?o.jsx("div",{className:"space-y-2",children:d.categorias.map((F,$)=>o.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[o.jsx("span",{className:"text-sm text-text-primary",children:F.nome}),o.jsx(ye,{type:"button",variant:"ghost",size:"sm",onClick:()=>A($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:o.jsx(Vu,{className:"w-4 h-4"})})]},$))}):o.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma categoria adicionada"})]}),o.jsx("div",{className:"bg-info/10 border border-info/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(au,{className:"w-5 h-5 text-info mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Configuraes Opcionais"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Voc pode adicionar quadras, mesas e categorias agora ou configurar depois no sistema."})]})]})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsxs(ye,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:[o.jsx(k5,{className:"mr-2 h-4 w-4"}),"Voltar"]}),o.jsxs(ye,{type:"button",onClick:y,className:"flex-1",children:["Prximo",o.jsx(Sw,{className:"ml-2 h-4 w-4"})]})]})]})]},"step4"),B=()=>o.jsxs(Pr.div,{variants:vg,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:o.jsx(Cs,{className:"w-8 h-8 text-brand"})}),o.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Reviso Final"}),o.jsx("p",{className:"text-text-muted",children:"Confira os dados antes de criar a empresa"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[o.jsx(GE,{className:"w-5 h-5"}),"Primeiro Usurio"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Email:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.email})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Nome:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.nomeUsuario})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Cargo:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.cargo})]})]})]}),o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[o.jsx(UE,{className:"w-5 h-5"}),"Empresa"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Razo Social:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.razaoSocial})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Nome Fantasia:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.nomeFantasia})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"CNPJ:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.cnpj})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Email:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.emailEmpresa})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Telefone:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.telefone})]}),d.endereco&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Endereo:"}),o.jsx("span",{className:"text-text-primary font-medium text-right",children:d.endereco})]})]})]}),o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[o.jsx(WE,{className:"w-5 h-5"}),"Configuraes Iniciais"]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Quadras:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.quadras.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Mesas:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.mesas.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Categorias de Produtos:"}),o.jsx("span",{className:"text-text-primary font-medium",children:d.categorias.length})]})]})]}),o.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(au,{className:"w-5 h-5 text-warning mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Ateno"}),o.jsx("p",{className:"text-xs text-text-muted",children:"Esta ao criar a empresa no banco de dados. Certifique-se de que todos os dados esto corretos."})]})]})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsxs(ye,{type:"button",variant:"outline",onClick:b,className:"flex-1",disabled:a,children:[o.jsx(k5,{className:"mr-2 h-4 w-4"}),"Voltar"]}),o.jsx(ye,{type:"button",onClick:k,className:"flex-1 bg-emerald-600 hover:bg-emerald-500",disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx(Em,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):o.jsx(o.Fragment,{children:" Criar Empresa"})})]})]})]},"step5"),W=()=>o.jsxs(Pr.div,{variants:vg,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-success/10 rounded-full mb-6",children:o.jsx(Cs,{className:"w-12 h-12 text-success"})}),o.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:" Empresa Criada!"}),o.jsx("p",{className:"text-text-muted",children:"Tudo pronto para comear a usar o sistema"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-brand/10 border border-brand/30 rounded-lg p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-text-muted mb-2",children:"Cdigo da Empresa"}),o.jsx("p",{className:"text-3xl font-bold text-brand font-mono",children:h?.codigoEmpresa})]})}),o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Dados de Acesso"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Email:"}),o.jsx("span",{className:"text-text-primary font-medium",children:h?.email})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-text-muted",children:"Senha:"}),o.jsx("span",{className:"text-text-primary font-medium",children:"(a que voc definiu no Supabase)"})]})]})]}),o.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[o.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Dados Criados"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),o.jsx("div",{className:"text-xs text-text-muted",children:"Empresa"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),o.jsx("div",{className:"text-xs text-text-muted",children:"Configuraes"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numQuadras}),o.jsx("div",{className:"text-xs text-text-muted",children:"Quadras"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numMesas}),o.jsx("div",{className:"text-xs text-text-muted",children:"Mesas"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numCategorias}),o.jsx("div",{className:"text-xs text-text-muted",children:"Categorias"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),o.jsx("div",{className:"text-xs text-text-muted",children:"Pronto para Uso"})]})]})]}),o.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(au,{className:"w-5 h-5 text-warning mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-text-primary mb-2",children:" IMPORTANTE: Execute o SQL Antes de Fazer Login"}),o.jsxs("div",{className:"space-y-2 text-xs text-text-muted",children:[o.jsx("p",{className:"font-semibold text-text-primary",children:"Para vincular seu usurio  empresa, siga estes passos:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[o.jsxs("li",{children:["Abra o ",o.jsx("strong",{children:"Console do Navegador"})," (pressione F12)"]}),o.jsxs("li",{children:["Procure pela mensagem ",o.jsx("strong",{children:'" APS O PRIMEIRO LOGIN, execute este SQL"'})]}),o.jsx("li",{children:"Copie o comando SQL que aparece no console"}),o.jsxs("li",{children:["Acesse o ",o.jsx("strong",{children:"Supabase  SQL Editor"})]}),o.jsx("li",{children:"Cole e execute o SQL"}),o.jsx("li",{children:"Agora sim, faa login normalmente"})]}),o.jsx("p",{className:"mt-2 text-warning font-medium",children:' Se no executar o SQL, voc ver o erro "Empresa no vinculada"'})]})]})]})}),o.jsx("div",{className:"pt-4",children:o.jsx(ye,{type:"button",onClick:()=>t("/"),className:"w-full bg-brand hover:bg-brand/90",children:"Ir para Login"})})]})]},"step6");return o.jsx(o.Fragment,{children:o.jsx("div",{className:"min-h-screen bg-background text-text-primary p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[M(),o.jsxs(Dme,{mode:"wait",children:[r===1&&E(),r===2&&I(),r===3&&O(),r===4&&R(),r===5&&B(),r===6&&W()]})]})})})}function Iat(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var jae=v,Dat=Iat(jae);function M9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mat(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Rat=!!(typeof window<"u"&&window.document&&window.document.createElement);function Lat(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(a){return a.displayName||a.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var s=[],l;function c(){l=e(s.map(function(d){return d.props})),u.canUseDOM?t(l):r&&(l=r(l))}var u=function(d){Mat(f,d);function f(){return d.apply(this,arguments)||this}f.peek=function(){return l},f.rewind=function(){if(f.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=l;return l=void 0,s=[],g};var h=f.prototype;return h.UNSAFE_componentWillMount=function(){s.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var g=s.indexOf(this);s.splice(g,1),c()},h.render=function(){return Dat.createElement(i,this.props)},f}(jae.PureComponent);return M9(u,"displayName","SideEffect("+n(i)+")"),M9(u,"canUseDOM",Rat),u}}var $at=Lat;const Fat=fa($at);var Bat=typeof Element<"u",zat=typeof Map=="function",qat=typeof Set=="function",Uat=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function H2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!H2(e[n],t[n]))return!1;return!0}var i;if(zat&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!H2(n.value[1],t.get(n.value[0])))return!1;return!0}if(qat&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(Uat&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(Bat&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!H2(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var Vat=function(t,r){try{return H2(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Wat=fa(Vat);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var R9=Object.getOwnPropertySymbols,Hat=Object.prototype.hasOwnProperty,Gat=Object.prototype.propertyIsEnumerable;function Kat(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Yat(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(i){a[i]=i}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Xat=Yat()?Object.assign:function(e,t){for(var r,n=Kat(e),a,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var s in r)Hat.call(r,s)&&(n[s]=r[s]);if(R9){a=R9(r);for(var l=0;l<a.length;l++)Gat.call(r,a[l])&&(n[a[l]]=r[a[l]])}}return n};const Jat=fa(Xat);var tp={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},In={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(In).map(function(e){return In[e]});var mi={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},xj={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Wb={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Qat=Object.keys(xj).reduce(function(e,t){return e[xj[t]]=t,e},{}),Zat=[In.NOSCRIPT,In.SCRIPT,In.STYLE],tu="data-react-helmet",eit=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tit=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},rit=function(){function e(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nit=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},L9=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},ait=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},KT=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},iit=function(t){var r=cv(t,In.TITLE),n=cv(t,Wb.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var a=cv(t,Wb.DEFAULT_TITLE);return r||a||void 0},oit=function(t){return cv(t,Wb.ON_CHANGE_CLIENT_STATE)||function(){}},qP=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,a){return Vs({},n,a)},{})},sit=function(t,r){return r.filter(function(n){return typeof n[In.BASE]<"u"}).map(function(n){return n[In.BASE]}).reverse().reduce(function(n,a){if(!n.length)for(var i=Object.keys(a),s=0;s<i.length;s++){var l=i[s],c=l.toLowerCase();if(t.indexOf(c)!==-1&&a[c])return n.concat(a)}return n},[])},b0=function(t,r,n){var a={};return n.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&dit("Helmet: "+t+' should be of type "Array". Instead found type "'+eit(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,s){var l={};s.filter(function(h){for(var m=void 0,g=Object.keys(h),p=0;p<g.length;p++){var x=g[p],y=x.toLowerCase();r.indexOf(y)!==-1&&!(m===mi.REL&&h[m].toLowerCase()==="canonical")&&!(y===mi.REL&&h[y].toLowerCase()==="stylesheet")&&(m=y),r.indexOf(x)!==-1&&(x===mi.INNER_HTML||x===mi.CSS_TEXT||x===mi.ITEM_PROP)&&(m=x)}if(!m||!h[m])return!1;var b=h[m].toLowerCase();return a[m]||(a[m]={}),l[m]||(l[m]={}),a[m][b]?!1:(l[m][b]=!0,!0)}).reverse().forEach(function(h){return i.push(h)});for(var c=Object.keys(l),u=0;u<c.length;u++){var d=c[u],f=Jat({},a[d],l[d]);a[d]=f}return i},[]).reverse()},cv=function(t,r){for(var n=t.length-1;n>=0;n--){var a=t[n];if(a.hasOwnProperty(r))return a[r]}return null},lit=function(t){return{baseTag:sit([mi.HREF,mi.TARGET],t),bodyAttributes:qP(tp.BODY,t),defer:cv(t,Wb.DEFER),encode:cv(t,Wb.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:qP(tp.HTML,t),linkTags:b0(In.LINK,[mi.REL,mi.HREF],t),metaTags:b0(In.META,[mi.NAME,mi.CHARSET,mi.HTTPEQUIV,mi.PROPERTY,mi.ITEM_PROP],t),noscriptTags:b0(In.NOSCRIPT,[mi.INNER_HTML],t),onChangeClientState:oit(t),scriptTags:b0(In.SCRIPT,[mi.SRC,mi.INNER_HTML],t),styleTags:b0(In.STYLE,[mi.CSS_TEXT],t),title:iit(t),titleAttributes:qP(tp.TITLE,t)}},YT=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){YT(t)},0)}}(),$9=function(t){return clearTimeout(t)},cit=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||YT:global.requestAnimationFrame||YT,uit=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||$9:global.cancelAnimationFrame||$9,dit=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},w0=null,fit=function(t){w0&&uit(w0),t.defer?w0=cit(function(){F9(t,function(){w0=null})}):(F9(t),w0=null)},F9=function(t,r){var n=t.baseTag,a=t.bodyAttributes,i=t.htmlAttributes,s=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.onChangeClientState,d=t.scriptTags,f=t.styleTags,h=t.title,m=t.titleAttributes;XT(In.BODY,a),XT(In.HTML,i),hit(h,m);var g={baseTag:xg(In.BASE,n),linkTags:xg(In.LINK,s),metaTags:xg(In.META,l),noscriptTags:xg(In.NOSCRIPT,c),scriptTags:xg(In.SCRIPT,d),styleTags:xg(In.STYLE,f)},p={},x={};Object.keys(g).forEach(function(y){var b=g[y],w=b.newTags,_=b.oldTags;w.length&&(p[y]=w),_.length&&(x[y]=g[y].oldTags)}),r&&r(),u(t,p,x)},Nae=function(t){return Array.isArray(t)?t.join(""):t},hit=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=Nae(t)),XT(In.TITLE,r)},XT=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var a=n.getAttribute(tu),i=a?a.split(","):[],s=[].concat(i),l=Object.keys(r),c=0;c<l.length;c++){var u=l[c],d=r[u]||"";n.getAttribute(u)!==d&&n.setAttribute(u,d),i.indexOf(u)===-1&&i.push(u);var f=s.indexOf(u);f!==-1&&s.splice(f,1)}for(var h=s.length-1;h>=0;h--)n.removeAttribute(s[h]);i.length===s.length?n.removeAttribute(tu):n.getAttribute(tu)!==l.join(",")&&n.setAttribute(tu,l.join(","))}},xg=function(t,r){var n=document.head||document.querySelector(In.HEAD),a=n.querySelectorAll(t+"["+tu+"]"),i=Array.prototype.slice.call(a),s=[],l=void 0;return r&&r.length&&r.forEach(function(c){var u=document.createElement(t);for(var d in c)if(c.hasOwnProperty(d))if(d===mi.INNER_HTML)u.innerHTML=c.innerHTML;else if(d===mi.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var f=typeof c[d]>"u"?"":c[d];u.setAttribute(d,f)}u.setAttribute(tu,"true"),i.some(function(h,m){return l=m,u.isEqualNode(h)})?i.splice(l,1):s.push(u)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),s.forEach(function(c){return n.appendChild(c)}),{oldTags:i,newTags:s}},Cae=function(t){return Object.keys(t).reduce(function(r,n){var a=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+a:a},"")},mit=function(t,r,n,a){var i=Cae(n),s=Nae(r);return i?"<"+t+" "+tu+'="true" '+i+">"+KT(s,a)+"</"+t+">":"<"+t+" "+tu+'="true">'+KT(s,a)+"</"+t+">"},pit=function(t,r,n){return r.reduce(function(a,i){var s=Object.keys(i).filter(function(u){return!(u===mi.INNER_HTML||u===mi.CSS_TEXT)}).reduce(function(u,d){var f=typeof i[d]>"u"?d:d+'="'+KT(i[d],n)+'"';return u?u+" "+f:f},""),l=i.innerHTML||i.cssText||"",c=Zat.indexOf(t)===-1;return a+"<"+t+" "+tu+'="true" '+s+(c?"/>":">"+l+"</"+t+">")},"")},Aae=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[xj[a]||a]=t[a],n},r)},git=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[Qat[a]||a]=t[a],n},r)},vit=function(t,r,n){var a,i=(a={key:r},a[tu]=!0,a),s=Aae(n,i);return[se.createElement(In.TITLE,s,r)]},xit=function(t,r){return r.map(function(n,a){var i,s=(i={key:a},i[tu]=!0,i);return Object.keys(n).forEach(function(l){var c=xj[l]||l;if(c===mi.INNER_HTML||c===mi.CSS_TEXT){var u=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:u}}else s[c]=n[l]}),se.createElement(t,s)})},Sd=function(t,r,n){switch(t){case In.TITLE:return{toComponent:function(){return vit(t,r.title,r.titleAttributes)},toString:function(){return mit(t,r.title,r.titleAttributes,n)}};case tp.BODY:case tp.HTML:return{toComponent:function(){return Aae(r)},toString:function(){return Cae(r)}};default:return{toComponent:function(){return xit(t,r)},toString:function(){return pit(t,r,n)}}}},Pae=function(t){var r=t.baseTag,n=t.bodyAttributes,a=t.encode,i=t.htmlAttributes,s=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.scriptTags,d=t.styleTags,f=t.title,h=f===void 0?"":f,m=t.titleAttributes;return{base:Sd(In.BASE,r,a),bodyAttributes:Sd(tp.BODY,n,a),htmlAttributes:Sd(tp.HTML,i,a),link:Sd(In.LINK,s,a),meta:Sd(In.META,l,a),noscript:Sd(In.NOSCRIPT,c,a),script:Sd(In.SCRIPT,u,a),style:Sd(In.STYLE,d,a),title:Sd(In.TITLE,{title:h,titleAttributes:m},a)}},yit=function(t){var r,n;return n=r=function(a){nit(i,a);function i(){return tit(this,i),ait(this,a.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!Wat(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case In.SCRIPT:case In.NOSCRIPT:return{innerHTML:c};case In.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,d=l.arrayTypeChildren,f=l.newChildProps,h=l.nestedChildren;return Vs({},d,(c={},c[u.type]=[].concat(d[u.type]||[],[Vs({},f,this.mapNestedChildrenToProps(u,h))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,u,d=l.child,f=l.newProps,h=l.newChildProps,m=l.nestedChildren;switch(d.type){case In.TITLE:return Vs({},f,(c={},c[d.type]=m,c.titleAttributes=Vs({},h),c));case In.BODY:return Vs({},f,{bodyAttributes:Vs({},h)});case In.HTML:return Vs({},f,{htmlAttributes:Vs({},h)})}return Vs({},f,(u={},u[d.type]=Vs({},h),u))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=Vs({},c);return Object.keys(l).forEach(function(d){var f;u=Vs({},u,(f={},f[d]=l[d],f))}),u},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var u=this,d={};return se.Children.forEach(l,function(f){if(!(!f||!f.props)){var h=f.props,m=h.children,g=L9(h,["children"]),p=git(g);switch(u.warnOnInvalidChildren(f,m),f.type){case In.LINK:case In.META:case In.NOSCRIPT:case In.SCRIPT:case In.STYLE:d=u.flattenArrayTypeChildren({child:f,arrayTypeChildren:d,newChildProps:p,nestedChildren:m});break;default:c=u.mapObjectTypeChildren({child:f,newProps:c,newChildProps:p,nestedChildren:m});break}}}),c=this.mapArrayTypeChildrenToProps(d,c),c},i.prototype.render=function(){var l=this.props,c=l.children,u=L9(l,["children"]),d=Vs({},u);return c&&(d=this.mapChildrenToProps(c,d)),se.createElement(t,d)},rit(i,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),i}(se.Component),r.propTypes={base:dn.object,bodyAttributes:dn.object,children:dn.oneOfType([dn.arrayOf(dn.node),dn.node]),defaultTitle:dn.string,defer:dn.bool,encodeSpecialCharacters:dn.bool,htmlAttributes:dn.object,link:dn.arrayOf(dn.object),meta:dn.arrayOf(dn.object),noscript:dn.arrayOf(dn.object),onChangeClientState:dn.func,script:dn.arrayOf(dn.object),style:dn.arrayOf(dn.object),title:dn.string,titleAttributes:dn.object,titleTemplate:dn.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var a=t.rewind();return a||(a=Pae({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),a},n},bit=function(){return null},wit=Fat(lit,fit,Pae)(bit),JT=yit(wit);JT.renderStatic=JT.rewind;function _it(){const[e,t]=v.useState(!0),[r,n]=v.useState(!1),a=()=>{t(c=>!c)},i=Ko(),s=wc(),l=i.pathname==="/agenda";return v.useEffect(()=>{const c=u=>{const d=String(u.target?.tagName||"").toLowerCase();if(!(["input","textarea","select"].includes(d)||u.target?.isContentEditable)&&!u.repeat){if(String(u.key).toLowerCase()==="b"){u.preventDefault();const f=String(i?.pathname||"").toLowerCase();console.log("[Global Hotkey B] Current path:",f),f.includes("balcao")?(console.log("[Global Hotkey B] Navigating to /vendas"),s("/vendas")):(console.log("[Global Hotkey B] Navigating to /balcao"),s("/balcao"));return}if(String(u.key).toLowerCase()==="h"){u.preventDefault(),s("/historico");return}}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[i,s]),o.jsx(lbe,{children:o.jsx(ebe,{children:o.jsx(cbe,{children:o.jsxs("div",{className:"flex h-screen bg-background text-text-primary",children:[o.jsxs(JT,{children:[o.jsx("title",{children:"F7 Arena"}),o.jsx("meta",{name:"description",content:"Software para gesto de quadras esportivas."})]}),o.jsx(qme,{isVisible:e,setIsVisible:t,sidebarPinned:r}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(tbe,{onToggleSidebar:a,sidebarVisible:e,sidebarPinned:r}),o.jsx("main",{className:kt("flex-1 overflow-x-hidden overflow-y-auto bg-background",l?"p-0 md:p-8":"p-8"),children:o.jsxs(cW,{children:[o.jsx(ho,{path:"/",element:o.jsx(K7e,{})}),o.jsx(ho,{path:"/agenda",element:o.jsx(hGe,{})}),o.jsx(ho,{path:"/vendas",element:o.jsx(KQe,{})}),o.jsx(ho,{path:"/balcao",element:o.jsx(YQe,{})}),o.jsx(ho,{path:"/produtos",element:o.jsx(uZe,{})}),o.jsx(ho,{path:"/clientes",element:o.jsx(pZe,{})}),o.jsx(ho,{path:"/equipe",element:o.jsx(bZe,{})}),o.jsx(ho,{path:"/financeiro",element:o.jsx(uat,{})}),o.jsx(ho,{path:"/caixa",element:o.jsx(Qle,{to:"/financeiro?tab=caixa",replace:!0})}),o.jsx(ho,{path:"/quadras",element:o.jsx(hat,{})}),o.jsx(ho,{path:"/empresas",element:o.jsx(xat,{})}),o.jsx(ho,{path:"/finalizadoras",element:o.jsx(bat,{})}),o.jsx(ho,{path:"/test-page",element:o.jsx(wat,{})}),o.jsx(ho,{path:"/historico",element:o.jsx(Aat,{})}),o.jsx(ho,{path:"/suporte",element:o.jsx(_Ze,{})})]})})]})]})})})})}function Sit(){return o.jsxs(cW,{children:[o.jsx(ho,{path:"/reset-password",element:o.jsx(Sat,{})}),o.jsx(ho,{path:"/40028922",element:o.jsx(Tat,{})}),o.jsx(ho,{path:"/*",element:o.jsx(obe,{children:o.jsx(_it,{})})})]})}var PM="ToastProvider",[EM,jit,Nit]=aC("Toast"),[Eae,mot]=_c("Toast",[Nit]),[Cit,BC]=Eae(PM),kae=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:s}=e,[l,c]=v.useState(null),[u,d]=v.useState(0),f=v.useRef(!1),h=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${PM}\`. Expected non-empty \`string\`.`),o.jsx(EM.Provider,{scope:t,children:o.jsx(Cit,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:v.useCallback(()=>d(m=>m+1),[]),onToastRemove:v.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:s})})};kae.displayName=PM;var Oae="ToastViewport",Ait=["F8"],QT="toast.viewportPause",ZT="toast.viewportResume",Tae=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Ait,label:a="Notifications ({hotkey})",...i}=e,s=BC(Oae,r),l=jit(r),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),f=v.useRef(null),h=oa(t,f,s.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=s.toastCount>0;v.useEffect(()=>{const x=y=>{n.length!==0&&n.every(w=>y[w]||y.code===w)&&f.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),v.useEffect(()=>{const x=c.current,y=f.current;if(g&&x&&y){const b=()=>{if(!s.isClosePausedRef.current){const N=new CustomEvent(QT);y.dispatchEvent(N),s.isClosePausedRef.current=!0}},w=()=>{if(s.isClosePausedRef.current){const N=new CustomEvent(ZT);y.dispatchEvent(N),s.isClosePausedRef.current=!1}},_=N=>{!x.contains(N.relatedTarget)&&w()},j=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",_),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",_),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,s.isClosePausedRef]);const p=v.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const _=w.ref.current,j=[_,...Bit(_)];return x==="forwards"?j:j.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return v.useEffect(()=>{const x=f.current;if(x){const y=b=>{const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const j=document.activeElement,N=b.shiftKey;if(b.target===x&&N){u.current?.focus();return}const k=p({tabbingDirection:N?"backwards":"forwards"}),M=k.findIndex(E=>E===j);UP(k.slice(M+1))?b.preventDefault():N?u.current?.focus():d.current?.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,p]),o.jsxs(ipe,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&o.jsx(e3,{ref:u,onFocusFromOutsideViewport:()=>{const x=p({tabbingDirection:"forwards"});UP(x)}}),o.jsx(EM.Slot,{scope:r,children:o.jsx(xn.ol,{tabIndex:-1,...i,ref:h})}),g&&o.jsx(e3,{ref:d,onFocusFromOutsideViewport:()=>{const x=p({tabbingDirection:"backwards"});UP(x)}})]})});Tae.displayName=Oae;var Iae="ToastFocusProxy",e3=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=BC(Iae,r);return o.jsx(xD,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:s=>{const l=s.relatedTarget;!i.viewport?.contains(l)&&n()}})});e3.displayName=Iae;var z1="Toast",Pit="toast.swipeStart",Eit="toast.swipeMove",kit="toast.swipeCancel",Oit="toast.swipeEnd",Dae=v.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...s}=e,[l,c]=Xd({prop:n,defaultProp:a??!0,onChange:i,caller:z1});return o.jsx(ql,{present:r||l,children:o.jsx(Dit,{open:l,...s,ref:t,onClose:()=>c(!1),onPause:al(e.onPause),onResume:al(e.onResume),onSwipeStart:Sr(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Sr(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Sr(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Sr(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Dae.displayName=z1;var[Tit,Iit]=Eae(z1,{onClose(){}}),Dit=v.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:s,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=BC(z1,r),[x,y]=v.useState(null),b=oa(t,R=>y(R)),w=v.useRef(null),_=v.useRef(null),j=a||p.duration,N=v.useRef(0),P=v.useRef(j),A=v.useRef(0),{onToastAdd:k,onToastRemove:M}=p,E=al(()=>{x?.contains(document.activeElement)&&p.viewport?.focus(),s()}),I=v.useCallback(R=>{!R||R===1/0||(window.clearTimeout(A.current),N.current=new Date().getTime(),A.current=window.setTimeout(E,R))},[E]);v.useEffect(()=>{const R=p.viewport;if(R){const B=()=>{I(P.current),u?.()},W=()=>{const F=new Date().getTime()-N.current;P.current=P.current-F,window.clearTimeout(A.current),c?.()};return R.addEventListener(QT,W),R.addEventListener(ZT,B),()=>{R.removeEventListener(QT,W),R.removeEventListener(ZT,B)}}},[p.viewport,j,c,u,I]),v.useEffect(()=>{i&&!p.isClosePausedRef.current&&I(j)},[i,j,p.isClosePausedRef,I]),v.useEffect(()=>(k(),()=>M()),[k,M]);const O=v.useMemo(()=>x?zae(x):null,[x]);return p.viewport?o.jsxs(o.Fragment,{children:[O&&o.jsx(Mit,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:O}),o.jsx(Tit,{scope:r,onClose:E,children:Lh.createPortal(o.jsx(EM.ItemSlot,{scope:r,children:o.jsx(ape,{asChild:!0,onEscapeKeyDown:Sr(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||E(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(xn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Sr(e.onKeyDown,R=>{R.key==="Escape"&&(l?.(R.nativeEvent),R.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:Sr(e.onPointerDown,R=>{R.button===0&&(w.current={x:R.clientX,y:R.clientY})}),onPointerMove:Sr(e.onPointerMove,R=>{if(!w.current)return;const B=R.clientX-w.current.x,W=R.clientY-w.current.y,F=!!_.current,$=["left","right"].includes(p.swipeDirection),H=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,ce=$?H(0,B):0,oe=$?0:H(0,W),L=R.pointerType==="touch"?10:2,U={x:ce,y:oe},J={originalEvent:R,delta:U};F?(_.current=U,v2(Eit,f,J,{discrete:!1})):B9(U,p.swipeDirection,L)?(_.current=U,v2(Pit,d,J,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(B)>L||Math.abs(W)>L)&&(w.current=null)}),onPointerUp:Sr(e.onPointerUp,R=>{const B=_.current,W=R.target;if(W.hasPointerCapture(R.pointerId)&&W.releasePointerCapture(R.pointerId),_.current=null,w.current=null,B){const F=R.currentTarget,$={originalEvent:R,delta:B};B9(B,p.swipeDirection,p.swipeThreshold)?v2(Oit,m,$,{discrete:!0}):v2(kit,h,$,{discrete:!0}),F.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Mit=e=>{const{__scopeToast:t,children:r,...n}=e,a=BC(z1,t),[i,s]=v.useState(!1),[l,c]=v.useState(!1);return $it(()=>s(!0)),v.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(ux,{asChild:!0,children:o.jsx(xD,{...n,children:i&&o.jsxs(o.Fragment,{children:[a.label," ",r]})})})},Rit="ToastTitle",Mae=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(xn.div,{...n,ref:t})});Mae.displayName=Rit;var Lit="ToastDescription",Rae=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(xn.div,{...n,ref:t})});Rae.displayName=Lit;var Lae="ToastAction",$ae=v.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?o.jsx(Bae,{altText:r,asChild:!0,children:o.jsx(kM,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Lae}\`. Expected non-empty \`string\`.`),null)});$ae.displayName=Lae;var Fae="ToastClose",kM=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=Iit(Fae,r);return o.jsx(Bae,{asChild:!0,children:o.jsx(xn.button,{type:"button",...n,ref:t,onClick:Sr(e.onClick,a.onClose)})})});kM.displayName=Fae;var Bae=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return o.jsx(xn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function zae(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Fit(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const s=n.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...zae(n))}}),t}function v2(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?A4(a,i):a.dispatchEvent(i)}var B9=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function $it(e=()=>{}){const t=al(e);Go(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Fit(e){return e.nodeType===e.ELEMENT_NODE}function Bit(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function UP(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var zit=kae,qae=Tae,Uae=Dae,Vae=Mae,Wae=Rae,Hae=$ae,Gae=kM;const qit=zit,Kae=se.forwardRef(({className:e,...t},r)=>o.jsx(qae,{ref:r,className:kt("fixed z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Kae.displayName=qae.displayName;const Uit=C4("group relative pointer-events-auto flex w-full items-start justify-between gap-4 overflow-hidden rounded-lg border p-4 pr-8 shadow-xl transition-all data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-warning text-black border-warning",destructive:"bg-danger text-white border-danger",success:"bg-success text-white border-success",info:"bg-info text-black border-info",warning:"bg-warning text-black border-warning"}},defaultVariants:{variant:"default"}}),Yae=se.forwardRef(({className:e,variant:t,...r},n)=>o.jsx(Uae,{ref:n,className:kt(Uit({variant:t}),e),...r}));Yae.displayName=Uae.displayName;const Vit=se.forwardRef(({className:e,...t},r)=>o.jsx(Hae,{ref:r,className:kt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Vit.displayName=Hae.displayName;const Xae=se.forwardRef(({className:e,...t},r)=>o.jsx(Gae,{ref:r,className:kt("absolute right-2 top-2 rounded-md p-1 text-white/80 transition-opacity hover:text-white focus:outline-none focus:ring-2 focus:ring-white/50 group-[.default]:text-black/70 group-[.default]:hover:text-black",e),...t,children:o.jsx(Vu,{className:"h-4 w-4"})}));Xae.displayName=Gae.displayName;const Jae=se.forwardRef(({className:e,...t},r)=>o.jsx(Vae,{ref:r,className:kt("text-sm font-semibold",e),...t}));Jae.displayName=Vae.displayName;const Qae=se.forwardRef(({className:e,...t},r)=>o.jsx(Wae,{ref:r,className:kt("text-sm",e),...t}));Qae.displayName=Wae.displayName;function Wit(){const{toasts:e}=Qa();return o.jsxs(qit,{children:[e.map(({id:t,title:r,description:n,action:a,dismiss:i,...s})=>o.jsxs(Yae,{...s,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(Jae,{children:r}),n&&o.jsx(Qae,{children:n})]}),a,o.jsx(Xae,{onClick:i})]},t)),o.jsx(Kae,{})]})}function Hit(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(e=>{setInterval(()=>{e.update()},6e4),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&window.confirm("Nova verso disponvel! Deseja atualizar agora?")&&(t.postMessage({type:"SKIP_WAITING"}),window.location.reload())})})}).catch(e=>{console.error("[SW] Erro ao registrar Service Worker:",e)}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})})}Hit();window.screen?.orientation?.lock&&window.screen.orientation.lock("portrait").catch(e=>{console.log("[Orientation] Lock no suportado ou j bloqueado:",e.message)});window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),window.__installPrompt=e},{passive:!1});window.addEventListener("appinstalled",()=>{window.__installPrompt=null});VP.createRoot(document.getElementById("root")).render(o.jsx(lce,{children:o.jsxs(r0e,{children:[o.jsx(Sit,{}),o.jsx(Wit,{})]})}));export{Lye as _,cs as c,fa as g};
