var zae=Object.defineProperty;var qae=(e,t,r)=>t in e?zae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ga=(e,t,r)=>(qae(e,typeof t!="symbol"?t+"":t,r),r);function Uae(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wae(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var t9={exports:{}},F_={},r9={exports:{}},Ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=Symbol.for("react.element"),Vae=Symbol.for("react.portal"),Hae=Symbol.for("react.fragment"),Gae=Symbol.for("react.strict_mode"),Kae=Symbol.for("react.profiler"),Yae=Symbol.for("react.provider"),Xae=Symbol.for("react.context"),Jae=Symbol.for("react.forward_ref"),Qae=Symbol.for("react.suspense"),Zae=Symbol.for("react.memo"),eie=Symbol.for("react.lazy"),jM=Symbol.iterator;function tie(e){return e===null||typeof e!="object"?null:(e=jM&&e[jM]||e["@@iterator"],typeof e=="function"?e:null)}var n9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a9=Object.assign,i9={};function kv(e,t,r){this.props=e,this.context=t,this.refs=i9,this.updater=r||n9}kv.prototype.isReactComponent={};kv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function o9(){}o9.prototype=kv.prototype;function fT(e,t,r){this.props=e,this.context=t,this.refs=i9,this.updater=r||n9}var hT=fT.prototype=new o9;hT.constructor=fT;a9(hT,kv.prototype);hT.isPureReactComponent=!0;var NM=Array.isArray,s9=Object.prototype.hasOwnProperty,mT={current:null},l9={key:!0,ref:!0,__self:!0,__source:!0};function c9(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)s9.call(t,n)&&!l9.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:vb,type:e,key:i,ref:o,props:a,_owner:mT.current}}function rie(e,t){return{$$typeof:vb,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pT(e){return typeof e=="object"&&e!==null&&e.$$typeof===vb}function nie(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var CM=/\/+/g;function wC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nie(""+e.key):t.toString(36)}function qw(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vb:case Vae:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+wC(o,0):n,NM(a)?(r="",e!=null&&(r=e.replace(CM,"$&/")+"/"),qw(a,t,r,"",function(u){return u})):a!=null&&(pT(a)&&(a=rie(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(CM,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",NM(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+wC(i,l);o+=qw(i,t,r,c,a)}else if(c=tie(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+wC(i,l++),o+=qw(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function k1(e,t,r){if(e==null)return e;var n=[],a=0;return qw(e,n,"","",function(i){return t.call(r,i,a++)}),n}function aie(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ss={current:null},Uw={transition:null},iie={ReactCurrentDispatcher:Ss,ReactCurrentBatchConfig:Uw,ReactCurrentOwner:mT};function u9(){throw Error("act(...) is not supported in production builds of React.")}Ln.Children={map:k1,forEach:function(e,t,r){k1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return k1(e,function(){t++}),t},toArray:function(e){return k1(e,function(t){return t})||[]},only:function(e){if(!pT(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ln.Component=kv;Ln.Fragment=Hae;Ln.Profiler=Kae;Ln.PureComponent=fT;Ln.StrictMode=Gae;Ln.Suspense=Qae;Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iie;Ln.act=u9;Ln.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=a9({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=mT.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)s9.call(t,c)&&!l9.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:vb,type:e.type,key:a,ref:i,props:n,_owner:o}};Ln.createContext=function(e){return e={$$typeof:Xae,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Yae,_context:e},e.Consumer=e};Ln.createElement=c9;Ln.createFactory=function(e){var t=c9.bind(null,e);return t.type=e,t};Ln.createRef=function(){return{current:null}};Ln.forwardRef=function(e){return{$$typeof:Jae,render:e}};Ln.isValidElement=pT;Ln.lazy=function(e){return{$$typeof:eie,_payload:{_status:-1,_result:e},_init:aie}};Ln.memo=function(e,t){return{$$typeof:Zae,type:e,compare:t===void 0?null:t}};Ln.startTransition=function(e){var t=Uw.transition;Uw.transition={};try{e()}finally{Uw.transition=t}};Ln.unstable_act=u9;Ln.useCallback=function(e,t){return Ss.current.useCallback(e,t)};Ln.useContext=function(e){return Ss.current.useContext(e)};Ln.useDebugValue=function(){};Ln.useDeferredValue=function(e){return Ss.current.useDeferredValue(e)};Ln.useEffect=function(e,t){return Ss.current.useEffect(e,t)};Ln.useId=function(){return Ss.current.useId()};Ln.useImperativeHandle=function(e,t,r){return Ss.current.useImperativeHandle(e,t,r)};Ln.useInsertionEffect=function(e,t){return Ss.current.useInsertionEffect(e,t)};Ln.useLayoutEffect=function(e,t){return Ss.current.useLayoutEffect(e,t)};Ln.useMemo=function(e,t){return Ss.current.useMemo(e,t)};Ln.useReducer=function(e,t,r){return Ss.current.useReducer(e,t,r)};Ln.useRef=function(e){return Ss.current.useRef(e)};Ln.useState=function(e){return Ss.current.useState(e)};Ln.useSyncExternalStore=function(e,t,r){return Ss.current.useSyncExternalStore(e,t,r)};Ln.useTransition=function(){return Ss.current.useTransition()};Ln.version="18.3.1";r9.exports=Ln;var y=r9.exports;const se=Gn(y),gT=Uae({__proto__:null,default:se},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oie=y,sie=Symbol.for("react.element"),lie=Symbol.for("react.fragment"),cie=Object.prototype.hasOwnProperty,uie=oie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,die={key:!0,ref:!0,__self:!0,__source:!0};function d9(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)cie.call(t,n)&&!die.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:sie,type:e,key:i,ref:o,props:a,_owner:uie.current}}F_.Fragment=lie;F_.jsx=d9;F_.jsxs=d9;t9.exports=F_;var s=t9.exports,oP={},f9={exports:{}},Al={},h9={exports:{}},m9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,G){var me=$.length;$.push(G);e:for(;0<me;){var de=me-1>>>1,L=$[de];if(0<a(L,G))$[de]=G,$[me]=L,me=de;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var G=$[0],me=$.pop();if(me!==G){$[0]=me;e:for(var de=0,L=$.length,B=L>>>1;de<B;){var J=2*(de+1)-1,q=$[J],X=J+1,Z=$[X];if(0>a(q,me))X<L&&0>a(Z,q)?($[de]=Z,$[X]=me,de=X):($[de]=q,$[J]=me,de=J);else if(X<L&&0>a(Z,me))$[de]=Z,$[X]=me,de=X;else break e}}return G}function a($,G){var me=$.sortIndex-G.sortIndex;return me!==0?me:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var G=r(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=$)n(u),G.sortIndex=G.expirationTime,t(c,G);else break;G=r(u)}}function _($){if(p=!1,w($),!g)if(r(c)!==null)g=!0,V(j);else{var G=r(u);G!==null&&W(_,G.startTime-$)}}function j($,G){g=!1,p&&(p=!1,x(C),C=-1),m=!0;var me=h;try{for(w(G),f=r(c);f!==null&&(!(f.expirationTime>G)||$&&!E());){var de=f.callback;if(typeof de=="function"){f.callback=null,h=f.priorityLevel;var L=de(f.expirationTime<=G);G=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(c)&&n(c),w(G)}else n(c);f=r(c)}if(f!==null)var B=!0;else{var J=r(u);J!==null&&W(_,J.startTime-G),B=!1}return B}finally{f=null,h=me,m=!1}}var A=!1,P=null,C=-1,k=5,R=-1;function E(){return!(e.unstable_now()-R<k)}function I(){if(P!==null){var $=e.unstable_now();R=$;var G=!0;try{G=P(!0,$)}finally{G?T():(A=!1,P=null)}}else A=!1}var T;if(typeof b=="function")T=function(){b(I)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=I,T=function(){z.postMessage(null)}}else T=function(){v(I,0)};function V($){P=$,A||(A=!0,T())}function W($,G){C=v(function(){$(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,V(j))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var me=h;h=G;try{return $()}finally{h=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=h;h=$;try{return G()}finally{h=me}},e.unstable_scheduleCallback=function($,G,me){var de=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?de+me:de):me=de,$){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=me+L,$={id:d++,callback:G,priorityLevel:$,startTime:me,expirationTime:L,sortIndex:-1},me>de?($.sortIndex=me,t(u,$),r(c)===null&&$===r(u)&&(p?(x(C),C=-1):p=!0,W(_,me-de))):($.sortIndex=L,t(c,$),g||m||(g=!0,V(j))),$},e.unstable_shouldYield=E,e.unstable_wrapCallback=function($){var G=h;return function(){var me=h;h=G;try{return $.apply(this,arguments)}finally{h=me}}}})(m9);h9.exports=m9;var fie=h9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hie=y,Nl=fie;function Jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p9=new Set,Ux={};function rp(e,t){Mg(e,t),Mg(e+"Capture",t)}function Mg(e,t){for(Ux[e]=t,e=0;e<t.length;e++)p9.add(t[e])}var Pd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sP=Object.prototype.hasOwnProperty,mie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AM={},PM={};function pie(e){return sP.call(PM,e)?!0:sP.call(AM,e)?!1:mie.test(e)?PM[e]=!0:(AM[e]=!0,!1)}function gie(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vie(e,t,r,n){if(t===null||typeof t>"u"||gie(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _s(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Oo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oo[e]=new _s(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oo[t]=new _s(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oo[e]=new _s(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oo[e]=new _s(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oo[e]=new _s(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oo[e]=new _s(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oo[e]=new _s(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oo[e]=new _s(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oo[e]=new _s(e,5,!1,e.toLowerCase(),null,!1,!1)});var vT=/[\-:]([a-z])/g;function yT(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vT,yT);Oo[t]=new _s(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vT,yT);Oo[t]=new _s(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vT,yT);Oo[t]=new _s(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oo[e]=new _s(e,1,!1,e.toLowerCase(),null,!1,!1)});Oo.xlinkHref=new _s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oo[e]=new _s(e,1,!1,e.toLowerCase(),null,!0,!0)});function xT(e,t,r,n){var a=Oo.hasOwnProperty(t)?Oo[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vie(t,r,a,n)&&(r=null),n||a===null?pie(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var qd=hie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O1=Symbol.for("react.element"),Kp=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),lP=Symbol.for("react.profiler"),g9=Symbol.for("react.provider"),v9=Symbol.for("react.context"),wT=Symbol.for("react.forward_ref"),cP=Symbol.for("react.suspense"),uP=Symbol.for("react.suspense_list"),ST=Symbol.for("react.memo"),gf=Symbol.for("react.lazy"),y9=Symbol.for("react.offscreen"),EM=Symbol.iterator;function py(e){return e===null||typeof e!="object"?null:(e=EM&&e[EM]||e["@@iterator"],typeof e=="function"?e:null)}var hi=Object.assign,SC;function Yy(e){if(SC===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);SC=t&&t[1]||""}return`
`+SC+e}var _C=!1;function jC(e,t){if(!e||_C)return"";_C=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{_C=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Yy(e):""}function yie(e){switch(e.tag){case 5:return Yy(e.type);case 16:return Yy("Lazy");case 13:return Yy("Suspense");case 19:return Yy("SuspenseList");case 0:case 2:case 15:return e=jC(e.type,!1),e;case 11:return e=jC(e.type.render,!1),e;case 1:return e=jC(e.type,!0),e;default:return""}}function dP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yp:return"Fragment";case Kp:return"Portal";case lP:return"Profiler";case bT:return"StrictMode";case cP:return"Suspense";case uP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case v9:return(e.displayName||"Context")+".Consumer";case g9:return(e._context.displayName||"Context")+".Provider";case wT:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ST:return t=e.displayName||null,t!==null?t:dP(e.type)||"Memo";case gf:t=e._payload,e=e._init;try{return dP(e(t))}catch{}}return null}function xie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dP(t);case 8:return t===bT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ah(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function x9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bie(e){var t=x9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function T1(e){e._valueTracker||(e._valueTracker=bie(e))}function b9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=x9(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function v2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fP(e,t){var r=t.checked;return hi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kM(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ah(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function w9(e,t){t=t.checked,t!=null&&xT(e,"checked",t,!1)}function hP(e,t){w9(e,t);var r=ah(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mP(e,t.type,r):t.hasOwnProperty("defaultValue")&&mP(e,t.type,ah(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OM(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mP(e,t,r){(t!=="number"||v2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xy=Array.isArray;function gg(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ah(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function pP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Jt(91));return hi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function TM(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Jt(92));if(Xy(r)){if(1<r.length)throw Error(Jt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ah(r)}}function S9(e,t){var r=ah(t.value),n=ah(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function IM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gP(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var I1,j9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(I1=I1||document.createElement("div"),I1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=I1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ox={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wie=["Webkit","ms","Moz","O"];Object.keys(ox).forEach(function(e){wie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ox[t]=ox[e]})});function N9(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ox.hasOwnProperty(e)&&ox[e]?(""+t).trim():t+"px"}function C9(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=N9(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Sie=hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vP(e,t){if(t){if(Sie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Jt(62))}}function yP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xP=null;function _T(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bP=null,vg=null,yg=null;function DM(e){if(e=bb(e)){if(typeof bP!="function")throw Error(Jt(280));var t=e.stateNode;t&&(t=W_(t),bP(e.stateNode,e.type,t))}}function A9(e){vg?yg?yg.push(e):yg=[e]:vg=e}function P9(){if(vg){var e=vg,t=yg;if(yg=vg=null,DM(e),t)for(e=0;e<t.length;e++)DM(t[e])}}function E9(e,t){return e(t)}function k9(){}var NC=!1;function O9(e,t,r){if(NC)return e(t,r);NC=!0;try{return E9(e,t,r)}finally{NC=!1,(vg!==null||yg!==null)&&(k9(),P9())}}function Vx(e,t){var r=e.stateNode;if(r===null)return null;var n=W_(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Jt(231,t,typeof r));return r}var wP=!1;if(Pd)try{var gy={};Object.defineProperty(gy,"passive",{get:function(){wP=!0}}),window.addEventListener("test",gy,gy),window.removeEventListener("test",gy,gy)}catch{wP=!1}function _ie(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var sx=!1,y2=null,x2=!1,SP=null,jie={onError:function(e){sx=!0,y2=e}};function Nie(e,t,r,n,a,i,o,l,c){sx=!1,y2=null,_ie.apply(jie,arguments)}function Cie(e,t,r,n,a,i,o,l,c){if(Nie.apply(this,arguments),sx){if(sx){var u=y2;sx=!1,y2=null}else throw Error(Jt(198));x2||(x2=!0,SP=u)}}function np(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function T9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function MM(e){if(np(e)!==e)throw Error(Jt(188))}function Aie(e){var t=e.alternate;if(!t){if(t=np(e),t===null)throw Error(Jt(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return MM(a),e;if(i===n)return MM(a),t;i=i.sibling}throw Error(Jt(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Jt(189))}}if(r.alternate!==n)throw Error(Jt(190))}if(r.tag!==3)throw Error(Jt(188));return r.stateNode.current===r?e:t}function I9(e){return e=Aie(e),e!==null?D9(e):null}function D9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=D9(e);if(t!==null)return t;e=e.sibling}return null}var M9=Nl.unstable_scheduleCallback,RM=Nl.unstable_cancelCallback,Pie=Nl.unstable_shouldYield,Eie=Nl.unstable_requestPaint,Pi=Nl.unstable_now,kie=Nl.unstable_getCurrentPriorityLevel,jT=Nl.unstable_ImmediatePriority,R9=Nl.unstable_UserBlockingPriority,b2=Nl.unstable_NormalPriority,Oie=Nl.unstable_LowPriority,L9=Nl.unstable_IdlePriority,B_=null,mu=null;function Tie(e){if(mu&&typeof mu.onCommitFiberRoot=="function")try{mu.onCommitFiberRoot(B_,e,void 0,(e.current.flags&128)===128)}catch{}}var Tc=Math.clz32?Math.clz32:Mie,Iie=Math.log,Die=Math.LN2;function Mie(e){return e>>>=0,e===0?32:31-(Iie(e)/Die|0)|0}var D1=64,M1=4194304;function Jy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Jy(l):(i&=o,i!==0&&(n=Jy(i)))}else o=r&~a,o!==0?n=Jy(o):i!==0&&(n=Jy(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Tc(t),a=1<<r,n|=e[r],t&=~a;return n}function Rie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lie(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Tc(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Rie(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function _P(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $9(){var e=D1;return D1<<=1,!(D1&4194240)&&(D1=64),e}function CC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yb(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tc(t),e[t]=r}function $ie(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Tc(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function NT(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Tc(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ya=0;function F9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var B9,CT,z9,q9,U9,jP=!1,R1=[],Rf=null,Lf=null,$f=null,Hx=new Map,Gx=new Map,wf=[],Fie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LM(e,t){switch(e){case"focusin":case"focusout":Rf=null;break;case"dragenter":case"dragleave":Lf=null;break;case"mouseover":case"mouseout":$f=null;break;case"pointerover":case"pointerout":Hx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gx.delete(t.pointerId)}}function vy(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=bb(t),t!==null&&CT(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Bie(e,t,r,n,a){switch(t){case"focusin":return Rf=vy(Rf,e,t,r,n,a),!0;case"dragenter":return Lf=vy(Lf,e,t,r,n,a),!0;case"mouseover":return $f=vy($f,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Hx.set(i,vy(Hx.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Gx.set(i,vy(Gx.get(i)||null,e,t,r,n,a)),!0}return!1}function W9(e){var t=nm(e.target);if(t!==null){var r=np(t);if(r!==null){if(t=r.tag,t===13){if(t=T9(r),t!==null){e.blockedOn=t,U9(e.priority,function(){z9(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ww(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=NP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);xP=n,r.target.dispatchEvent(n),xP=null}else return t=bb(r),t!==null&&CT(t),e.blockedOn=r,!1;t.shift()}return!0}function $M(e,t,r){Ww(e)&&r.delete(t)}function zie(){jP=!1,Rf!==null&&Ww(Rf)&&(Rf=null),Lf!==null&&Ww(Lf)&&(Lf=null),$f!==null&&Ww($f)&&($f=null),Hx.forEach($M),Gx.forEach($M)}function yy(e,t){e.blockedOn===t&&(e.blockedOn=null,jP||(jP=!0,Nl.unstable_scheduleCallback(Nl.unstable_NormalPriority,zie)))}function Kx(e){function t(a){return yy(a,e)}if(0<R1.length){yy(R1[0],e);for(var r=1;r<R1.length;r++){var n=R1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Rf!==null&&yy(Rf,e),Lf!==null&&yy(Lf,e),$f!==null&&yy($f,e),Hx.forEach(t),Gx.forEach(t),r=0;r<wf.length;r++)n=wf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<wf.length&&(r=wf[0],r.blockedOn===null);)W9(r),r.blockedOn===null&&wf.shift()}var xg=qd.ReactCurrentBatchConfig,S2=!0;function qie(e,t,r,n){var a=ya,i=xg.transition;xg.transition=null;try{ya=1,AT(e,t,r,n)}finally{ya=a,xg.transition=i}}function Uie(e,t,r,n){var a=ya,i=xg.transition;xg.transition=null;try{ya=4,AT(e,t,r,n)}finally{ya=a,xg.transition=i}}function AT(e,t,r,n){if(S2){var a=NP(e,t,r,n);if(a===null)RC(e,t,n,_2,r),LM(e,n);else if(Bie(a,e,t,r,n))n.stopPropagation();else if(LM(e,n),t&4&&-1<Fie.indexOf(e)){for(;a!==null;){var i=bb(a);if(i!==null&&B9(i),i=NP(e,t,r,n),i===null&&RC(e,t,n,_2,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else RC(e,t,n,null,r)}}var _2=null;function NP(e,t,r,n){if(_2=null,e=_T(n),e=nm(e),e!==null)if(t=np(e),t===null)e=null;else if(r=t.tag,r===13){if(e=T9(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _2=e,null}function V9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kie()){case jT:return 1;case R9:return 4;case b2:case Oie:return 16;case L9:return 536870912;default:return 16}default:return 16}}var Af=null,PT=null,Vw=null;function H9(){if(Vw)return Vw;var e,t=PT,r=t.length,n,a="value"in Af?Af.value:Af.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Vw=a.slice(e,1<n?1-n:void 0)}function Hw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function L1(){return!0}function FM(){return!1}function Pl(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?L1:FM,this.isPropagationStopped=FM,this}return hi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=L1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=L1)},persist:function(){},isPersistent:L1}),t}var Ov={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ET=Pl(Ov),xb=hi({},Ov,{view:0,detail:0}),Wie=Pl(xb),AC,PC,xy,z_=hi({},xb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xy&&(xy&&e.type==="mousemove"?(AC=e.screenX-xy.screenX,PC=e.screenY-xy.screenY):PC=AC=0,xy=e),AC)},movementY:function(e){return"movementY"in e?e.movementY:PC}}),BM=Pl(z_),Vie=hi({},z_,{dataTransfer:0}),Hie=Pl(Vie),Gie=hi({},xb,{relatedTarget:0}),EC=Pl(Gie),Kie=hi({},Ov,{animationName:0,elapsedTime:0,pseudoElement:0}),Yie=Pl(Kie),Xie=hi({},Ov,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jie=Pl(Xie),Qie=hi({},Ov,{data:0}),zM=Pl(Qie),Zie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eoe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},toe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function roe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=toe[e])?!!t[e]:!1}function kT(){return roe}var noe=hi({},xb,{key:function(e){if(e.key){var t=Zie[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eoe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kT,charCode:function(e){return e.type==="keypress"?Hw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aoe=Pl(noe),ioe=hi({},z_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qM=Pl(ioe),ooe=hi({},xb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kT}),soe=Pl(ooe),loe=hi({},Ov,{propertyName:0,elapsedTime:0,pseudoElement:0}),coe=Pl(loe),uoe=hi({},z_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),doe=Pl(uoe),foe=[9,13,27,32],OT=Pd&&"CompositionEvent"in window,lx=null;Pd&&"documentMode"in document&&(lx=document.documentMode);var hoe=Pd&&"TextEvent"in window&&!lx,G9=Pd&&(!OT||lx&&8<lx&&11>=lx),UM=String.fromCharCode(32),WM=!1;function K9(e,t){switch(e){case"keyup":return foe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xp=!1;function moe(e,t){switch(e){case"compositionend":return Y9(t);case"keypress":return t.which!==32?null:(WM=!0,UM);case"textInput":return e=t.data,e===UM&&WM?null:e;default:return null}}function poe(e,t){if(Xp)return e==="compositionend"||!OT&&K9(e,t)?(e=H9(),Vw=PT=Af=null,Xp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return G9&&t.locale!=="ko"?null:t.data;default:return null}}var goe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!goe[e.type]:t==="textarea"}function X9(e,t,r,n){A9(n),t=j2(t,"onChange"),0<t.length&&(r=new ET("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var cx=null,Yx=null;function voe(e){sU(e,0)}function q_(e){var t=Zp(e);if(b9(t))return e}function yoe(e,t){if(e==="change")return t}var J9=!1;if(Pd){var kC;if(Pd){var OC="oninput"in document;if(!OC){var HM=document.createElement("div");HM.setAttribute("oninput","return;"),OC=typeof HM.oninput=="function"}kC=OC}else kC=!1;J9=kC&&(!document.documentMode||9<document.documentMode)}function GM(){cx&&(cx.detachEvent("onpropertychange",Q9),Yx=cx=null)}function Q9(e){if(e.propertyName==="value"&&q_(Yx)){var t=[];X9(t,Yx,e,_T(e)),O9(voe,t)}}function xoe(e,t,r){e==="focusin"?(GM(),cx=t,Yx=r,cx.attachEvent("onpropertychange",Q9)):e==="focusout"&&GM()}function boe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return q_(Yx)}function woe(e,t){if(e==="click")return q_(t)}function Soe(e,t){if(e==="input"||e==="change")return q_(t)}function _oe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $c=typeof Object.is=="function"?Object.is:_oe;function Xx(e,t){if($c(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!sP.call(t,a)||!$c(e[a],t[a]))return!1}return!0}function KM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function YM(e,t){var r=KM(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=KM(r)}}function Z9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Z9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eU(){for(var e=window,t=v2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=v2(e.document)}return t}function TT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function joe(e){var t=eU(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Z9(r.ownerDocument.documentElement,r)){if(n!==null&&TT(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=YM(r,i);var o=YM(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Noe=Pd&&"documentMode"in document&&11>=document.documentMode,Jp=null,CP=null,ux=null,AP=!1;function XM(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;AP||Jp==null||Jp!==v2(n)||(n=Jp,"selectionStart"in n&&TT(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ux&&Xx(ux,n)||(ux=n,n=j2(CP,"onSelect"),0<n.length&&(t=new ET("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Jp)))}function $1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qp={animationend:$1("Animation","AnimationEnd"),animationiteration:$1("Animation","AnimationIteration"),animationstart:$1("Animation","AnimationStart"),transitionend:$1("Transition","TransitionEnd")},TC={},tU={};Pd&&(tU=document.createElement("div").style,"AnimationEvent"in window||(delete Qp.animationend.animation,delete Qp.animationiteration.animation,delete Qp.animationstart.animation),"TransitionEvent"in window||delete Qp.transitionend.transition);function U_(e){if(TC[e])return TC[e];if(!Qp[e])return e;var t=Qp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tU)return TC[e]=t[r];return e}var rU=U_("animationend"),nU=U_("animationiteration"),aU=U_("animationstart"),iU=U_("transitionend"),oU=new Map,JM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gh(e,t){oU.set(e,t),rp(t,[e])}for(var IC=0;IC<JM.length;IC++){var DC=JM[IC],Coe=DC.toLowerCase(),Aoe=DC[0].toUpperCase()+DC.slice(1);gh(Coe,"on"+Aoe)}gh(rU,"onAnimationEnd");gh(nU,"onAnimationIteration");gh(aU,"onAnimationStart");gh("dblclick","onDoubleClick");gh("focusin","onFocus");gh("focusout","onBlur");gh(iU,"onTransitionEnd");Mg("onMouseEnter",["mouseout","mouseover"]);Mg("onMouseLeave",["mouseout","mouseover"]);Mg("onPointerEnter",["pointerout","pointerover"]);Mg("onPointerLeave",["pointerout","pointerover"]);rp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rp("onBeforeInput",["compositionend","keypress","textInput","paste"]);rp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Poe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qy));function QM(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Cie(n,t,void 0,e),e.currentTarget=null}function sU(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;QM(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;QM(a,l,u),i=c}}}if(x2)throw e=SP,x2=!1,SP=null,e}function Ha(e,t){var r=t[TP];r===void 0&&(r=t[TP]=new Set);var n=e+"__bubble";r.has(n)||(lU(t,e,2,!1),r.add(n))}function MC(e,t,r){var n=0;t&&(n|=4),lU(r,e,n,t)}var F1="_reactListening"+Math.random().toString(36).slice(2);function Jx(e){if(!e[F1]){e[F1]=!0,p9.forEach(function(r){r!=="selectionchange"&&(Poe.has(r)||MC(r,!1,e),MC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[F1]||(t[F1]=!0,MC("selectionchange",!1,t))}}function lU(e,t,r,n){switch(V9(t)){case 1:var a=qie;break;case 4:a=Uie;break;default:a=AT}r=a.bind(null,t,r,e),a=void 0,!wP||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function RC(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=nm(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}O9(function(){var u=i,d=_T(r),f=[];e:{var h=oU.get(e);if(h!==void 0){var m=ET,g=e;switch(e){case"keypress":if(Hw(r)===0)break e;case"keydown":case"keyup":m=aoe;break;case"focusin":g="focus",m=EC;break;case"focusout":g="blur",m=EC;break;case"beforeblur":case"afterblur":m=EC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=BM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Hie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=soe;break;case rU:case nU:case aU:m=Yie;break;case iU:m=coe;break;case"scroll":m=Wie;break;case"wheel":m=doe;break;case"copy":case"cut":case"paste":m=Jie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qM}var p=(t&4)!==0,v=!p&&e==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,x!==null&&(_=Vx(b,x),_!=null&&p.push(Qx(b,_,w)))),v)break;b=b.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==xP&&(g=r.relatedTarget||r.fromElement)&&(nm(g)||g[Ed]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?nm(g):null,g!==null&&(v=np(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=BM,_="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=qM,_="onPointerLeave",x="onPointerEnter",b="pointer"),v=m==null?h:Zp(m),w=g==null?h:Zp(g),h=new p(_,b+"leave",m,r,d),h.target=v,h.relatedTarget=w,_=null,nm(d)===u&&(p=new p(x,b+"enter",g,r,d),p.target=w,p.relatedTarget=v,_=p),v=_,m&&g)t:{for(p=m,x=g,b=0,w=p;w;w=Sp(w))b++;for(w=0,_=x;_;_=Sp(_))w++;for(;0<b-w;)p=Sp(p),b--;for(;0<w-b;)x=Sp(x),w--;for(;b--;){if(p===x||x!==null&&p===x.alternate)break t;p=Sp(p),x=Sp(x)}p=null}else p=null;m!==null&&ZM(f,h,m,p,!1),g!==null&&v!==null&&ZM(f,v,g,p,!0)}}e:{if(h=u?Zp(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=yoe;else if(VM(h))if(J9)j=Soe;else{j=boe;var A=xoe}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=woe);if(j&&(j=j(e,u))){X9(f,j,r,d);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&mP(h,"number",h.value)}switch(A=u?Zp(u):window,e){case"focusin":(VM(A)||A.contentEditable==="true")&&(Jp=A,CP=u,ux=null);break;case"focusout":ux=CP=Jp=null;break;case"mousedown":AP=!0;break;case"contextmenu":case"mouseup":case"dragend":AP=!1,XM(f,r,d);break;case"selectionchange":if(Noe)break;case"keydown":case"keyup":XM(f,r,d)}var P;if(OT)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Xp?K9(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(G9&&r.locale!=="ko"&&(Xp||C!=="onCompositionStart"?C==="onCompositionEnd"&&Xp&&(P=H9()):(Af=d,PT="value"in Af?Af.value:Af.textContent,Xp=!0)),A=j2(u,C),0<A.length&&(C=new zM(C,e,null,r,d),f.push({event:C,listeners:A}),P?C.data=P:(P=Y9(r),P!==null&&(C.data=P)))),(P=hoe?moe(e,r):poe(e,r))&&(u=j2(u,"onBeforeInput"),0<u.length&&(d=new zM("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=P))}sU(f,t)})}function Qx(e,t,r){return{instance:e,listener:t,currentTarget:r}}function j2(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Vx(e,r),i!=null&&n.unshift(Qx(e,i,a)),i=Vx(e,t),i!=null&&n.push(Qx(e,i,a))),e=e.return}return n}function Sp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ZM(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Vx(r,i),c!=null&&o.unshift(Qx(r,c,l))):a||(c=Vx(r,i),c!=null&&o.push(Qx(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Eoe=/\r\n?/g,koe=/\u0000|\uFFFD/g;function eR(e){return(typeof e=="string"?e:""+e).replace(Eoe,`
`).replace(koe,"")}function B1(e,t,r){if(t=eR(t),eR(e)!==t&&r)throw Error(Jt(425))}function N2(){}var PP=null,EP=null;function kP(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var OP=typeof setTimeout=="function"?setTimeout:void 0,Ooe=typeof clearTimeout=="function"?clearTimeout:void 0,tR=typeof Promise=="function"?Promise:void 0,Toe=typeof queueMicrotask=="function"?queueMicrotask:typeof tR<"u"?function(e){return tR.resolve(null).then(e).catch(Ioe)}:OP;function Ioe(e){setTimeout(function(){throw e})}function LC(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Kx(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Kx(t)}function Ff(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Tv=Math.random().toString(36).slice(2),iu="__reactFiber$"+Tv,Zx="__reactProps$"+Tv,Ed="__reactContainer$"+Tv,TP="__reactEvents$"+Tv,Doe="__reactListeners$"+Tv,Moe="__reactHandles$"+Tv;function nm(e){var t=e[iu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ed]||r[iu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=rR(e);e!==null;){if(r=e[iu])return r;e=rR(e)}return t}e=r,r=e.parentNode}return null}function bb(e){return e=e[iu]||e[Ed],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Jt(33))}function W_(e){return e[Zx]||null}var IP=[],eg=-1;function vh(e){return{current:e}}function Xa(e){0>eg||(e.current=IP[eg],IP[eg]=null,eg--)}function $a(e,t){eg++,IP[eg]=e.current,e.current=t}var ih={},Xo=vh(ih),Us=vh(!1),Im=ih;function Rg(e,t){var r=e.type.contextTypes;if(!r)return ih;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ws(e){return e=e.childContextTypes,e!=null}function C2(){Xa(Us),Xa(Xo)}function nR(e,t,r){if(Xo.current!==ih)throw Error(Jt(168));$a(Xo,t),$a(Us,r)}function cU(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Jt(108,xie(e)||"Unknown",a));return hi({},r,n)}function A2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ih,Im=Xo.current,$a(Xo,e),$a(Us,Us.current),!0}function aR(e,t,r){var n=e.stateNode;if(!n)throw Error(Jt(169));r?(e=cU(e,t,Im),n.__reactInternalMemoizedMergedChildContext=e,Xa(Us),Xa(Xo),$a(Xo,e)):Xa(Us),$a(Us,r)}var td=null,V_=!1,$C=!1;function uU(e){td===null?td=[e]:td.push(e)}function Roe(e){V_=!0,uU(e)}function yh(){if(!$C&&td!==null){$C=!0;var e=0,t=ya;try{var r=td;for(ya=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}td=null,V_=!1}catch(a){throw td!==null&&(td=td.slice(e+1)),M9(jT,yh),a}finally{ya=t,$C=!1}}return null}var tg=[],rg=0,P2=null,E2=0,ql=[],Ul=0,Dm=null,sd=1,ld="";function qh(e,t){tg[rg++]=E2,tg[rg++]=P2,P2=e,E2=t}function dU(e,t,r){ql[Ul++]=sd,ql[Ul++]=ld,ql[Ul++]=Dm,Dm=e;var n=sd;e=ld;var a=32-Tc(n)-1;n&=~(1<<a),r+=1;var i=32-Tc(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,sd=1<<32-Tc(t)+a|r<<a|n,ld=i+e}else sd=1<<i|r<<a|n,ld=e}function IT(e){e.return!==null&&(qh(e,1),dU(e,1,0))}function DT(e){for(;e===P2;)P2=tg[--rg],tg[rg]=null,E2=tg[--rg],tg[rg]=null;for(;e===Dm;)Dm=ql[--Ul],ql[Ul]=null,ld=ql[--Ul],ql[Ul]=null,sd=ql[--Ul],ql[Ul]=null}var xl=null,ml=null,ni=!1,Pc=null;function fU(e,t){var r=Hl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function iR(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xl=e,ml=Ff(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xl=e,ml=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Dm!==null?{id:sd,overflow:ld}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Hl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xl=e,ml=null,!0):!1;default:return!1}}function DP(e){return(e.mode&1)!==0&&(e.flags&128)===0}function MP(e){if(ni){var t=ml;if(t){var r=t;if(!iR(e,t)){if(DP(e))throw Error(Jt(418));t=Ff(r.nextSibling);var n=xl;t&&iR(e,t)?fU(n,r):(e.flags=e.flags&-4097|2,ni=!1,xl=e)}}else{if(DP(e))throw Error(Jt(418));e.flags=e.flags&-4097|2,ni=!1,xl=e}}}function oR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xl=e}function z1(e){if(e!==xl)return!1;if(!ni)return oR(e),ni=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kP(e.type,e.memoizedProps)),t&&(t=ml)){if(DP(e))throw hU(),Error(Jt(418));for(;t;)fU(e,t),t=Ff(t.nextSibling)}if(oR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ml=Ff(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ml=null}}else ml=xl?Ff(e.stateNode.nextSibling):null;return!0}function hU(){for(var e=ml;e;)e=Ff(e.nextSibling)}function Lg(){ml=xl=null,ni=!1}function MT(e){Pc===null?Pc=[e]:Pc.push(e)}var Loe=qd.ReactCurrentBatchConfig;function by(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Jt(309));var n=r.stateNode}if(!n)throw Error(Jt(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Jt(284));if(!r._owner)throw Error(Jt(290,e))}return e}function q1(e,t){throw e=Object.prototype.toString.call(t),Error(Jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sR(e){var t=e._init;return t(e._payload)}function mU(e){function t(x,b){if(e){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function r(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function a(x,b){return x=Uf(x,b),x.index=0,x.sibling=null,x}function i(x,b,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,w,_){return b===null||b.tag!==6?(b=VC(w,x.mode,_),b.return=x,b):(b=a(b,w),b.return=x,b)}function c(x,b,w,_){var j=w.type;return j===Yp?d(x,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gf&&sR(j)===b.type)?(_=a(b,w.props),_.ref=by(x,b,w),_.return=x,_):(_=Zw(w.type,w.key,w.props,null,x.mode,_),_.ref=by(x,b,w),_.return=x,_)}function u(x,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=HC(w,x.mode,_),b.return=x,b):(b=a(b,w.children||[]),b.return=x,b)}function d(x,b,w,_,j){return b===null||b.tag!==7?(b=wm(w,x.mode,_,j),b.return=x,b):(b=a(b,w),b.return=x,b)}function f(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=VC(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case O1:return w=Zw(b.type,b.key,b.props,null,x.mode,w),w.ref=by(x,null,b),w.return=x,w;case Kp:return b=HC(b,x.mode,w),b.return=x,b;case gf:var _=b._init;return f(x,_(b._payload),w)}if(Xy(b)||py(b))return b=wm(b,x.mode,w,null),b.return=x,b;q1(x,b)}return null}function h(x,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(x,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case O1:return w.key===j?c(x,b,w,_):null;case Kp:return w.key===j?u(x,b,w,_):null;case gf:return j=w._init,h(x,b,j(w._payload),_)}if(Xy(w)||py(w))return j!==null?null:d(x,b,w,_,null);q1(x,w)}return null}function m(x,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(w)||null,l(b,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case O1:return x=x.get(_.key===null?w:_.key)||null,c(b,x,_,j);case Kp:return x=x.get(_.key===null?w:_.key)||null,u(b,x,_,j);case gf:var A=_._init;return m(x,b,w,A(_._payload),j)}if(Xy(_)||py(_))return x=x.get(w)||null,d(b,x,_,j,null);q1(b,_)}return null}function g(x,b,w,_){for(var j=null,A=null,P=b,C=b=0,k=null;P!==null&&C<w.length;C++){P.index>C?(k=P,P=null):k=P.sibling;var R=h(x,P,w[C],_);if(R===null){P===null&&(P=k);break}e&&P&&R.alternate===null&&t(x,P),b=i(R,b,C),A===null?j=R:A.sibling=R,A=R,P=k}if(C===w.length)return r(x,P),ni&&qh(x,C),j;if(P===null){for(;C<w.length;C++)P=f(x,w[C],_),P!==null&&(b=i(P,b,C),A===null?j=P:A.sibling=P,A=P);return ni&&qh(x,C),j}for(P=n(x,P);C<w.length;C++)k=m(P,x,C,w[C],_),k!==null&&(e&&k.alternate!==null&&P.delete(k.key===null?C:k.key),b=i(k,b,C),A===null?j=k:A.sibling=k,A=k);return e&&P.forEach(function(E){return t(x,E)}),ni&&qh(x,C),j}function p(x,b,w,_){var j=py(w);if(typeof j!="function")throw Error(Jt(150));if(w=j.call(w),w==null)throw Error(Jt(151));for(var A=j=null,P=b,C=b=0,k=null,R=w.next();P!==null&&!R.done;C++,R=w.next()){P.index>C?(k=P,P=null):k=P.sibling;var E=h(x,P,R.value,_);if(E===null){P===null&&(P=k);break}e&&P&&E.alternate===null&&t(x,P),b=i(E,b,C),A===null?j=E:A.sibling=E,A=E,P=k}if(R.done)return r(x,P),ni&&qh(x,C),j;if(P===null){for(;!R.done;C++,R=w.next())R=f(x,R.value,_),R!==null&&(b=i(R,b,C),A===null?j=R:A.sibling=R,A=R);return ni&&qh(x,C),j}for(P=n(x,P);!R.done;C++,R=w.next())R=m(P,x,C,R.value,_),R!==null&&(e&&R.alternate!==null&&P.delete(R.key===null?C:R.key),b=i(R,b,C),A===null?j=R:A.sibling=R,A=R);return e&&P.forEach(function(I){return t(x,I)}),ni&&qh(x,C),j}function v(x,b,w,_){if(typeof w=="object"&&w!==null&&w.type===Yp&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case O1:e:{for(var j=w.key,A=b;A!==null;){if(A.key===j){if(j=w.type,j===Yp){if(A.tag===7){r(x,A.sibling),b=a(A,w.props.children),b.return=x,x=b;break e}}else if(A.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gf&&sR(j)===A.type){r(x,A.sibling),b=a(A,w.props),b.ref=by(x,A,w),b.return=x,x=b;break e}r(x,A);break}else t(x,A);A=A.sibling}w.type===Yp?(b=wm(w.props.children,x.mode,_,w.key),b.return=x,x=b):(_=Zw(w.type,w.key,w.props,null,x.mode,_),_.ref=by(x,b,w),_.return=x,x=_)}return o(x);case Kp:e:{for(A=w.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(x,b.sibling),b=a(b,w.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else t(x,b);b=b.sibling}b=HC(w,x.mode,_),b.return=x,x=b}return o(x);case gf:return A=w._init,v(x,b,A(w._payload),_)}if(Xy(w))return g(x,b,w,_);if(py(w))return p(x,b,w,_);q1(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(x,b.sibling),b=a(b,w),b.return=x,x=b):(r(x,b),b=VC(w,x.mode,_),b.return=x,x=b),o(x)):r(x,b)}return v}var $g=mU(!0),pU=mU(!1),k2=vh(null),O2=null,ng=null,RT=null;function LT(){RT=ng=O2=null}function $T(e){var t=k2.current;Xa(k2),e._currentValue=t}function RP(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function bg(e,t){O2=e,RT=ng=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fs=!0),e.firstContext=null)}function ec(e){var t=e._currentValue;if(RT!==e)if(e={context:e,memoizedValue:t,next:null},ng===null){if(O2===null)throw Error(Jt(308));ng=e,O2.dependencies={lanes:0,firstContext:e}}else ng=ng.next=e;return t}var am=null;function FT(e){am===null?am=[e]:am.push(e)}function gU(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,FT(t)):(r.next=a.next,a.next=r),t.interleaved=r,kd(e,n)}function kd(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vf=!1;function BT(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vU(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bf(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ea&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,kd(e,r)}return a=n.interleaved,a===null?(t.next=t,FT(n)):(t.next=a.next,a.next=t),n.interleaved=t,kd(e,r)}function Gw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,NT(e,r)}}function lR(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function T2(e,t,r,n){var a=e.updateQueue;vf=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=hi({},f,h);break e;case 2:vf=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Rm|=o,e.lanes=o,e.memoizedState=f}}function cR(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Jt(191,a));a.call(n)}}}var wb={},pu=vh(wb),e0=vh(wb),t0=vh(wb);function im(e){if(e===wb)throw Error(Jt(174));return e}function zT(e,t){switch($a(t0,t),$a(e0,e),$a(pu,wb),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gP(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gP(t,e)}Xa(pu),$a(pu,t)}function Fg(){Xa(pu),Xa(e0),Xa(t0)}function yU(e){im(t0.current);var t=im(pu.current),r=gP(t,e.type);t!==r&&($a(e0,e),$a(pu,r))}function qT(e){e0.current===e&&(Xa(pu),Xa(e0))}var ci=vh(0);function I2(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var FC=[];function UT(){for(var e=0;e<FC.length;e++)FC[e]._workInProgressVersionPrimary=null;FC.length=0}var Kw=qd.ReactCurrentDispatcher,BC=qd.ReactCurrentBatchConfig,Mm=0,di=null,Qi=null,ho=null,D2=!1,dx=!1,r0=0,$oe=0;function Lo(){throw Error(Jt(321))}function WT(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$c(e[r],t[r]))return!1;return!0}function VT(e,t,r,n,a,i){if(Mm=i,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kw.current=e===null||e.memoizedState===null?qoe:Uoe,e=r(n,a),dx){i=0;do{if(dx=!1,r0=0,25<=i)throw Error(Jt(301));i+=1,ho=Qi=null,t.updateQueue=null,Kw.current=Woe,e=r(n,a)}while(dx)}if(Kw.current=M2,t=Qi!==null&&Qi.next!==null,Mm=0,ho=Qi=di=null,D2=!1,t)throw Error(Jt(300));return e}function HT(){var e=r0!==0;return r0=0,e}function tu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ho===null?di.memoizedState=ho=e:ho=ho.next=e,ho}function tc(){if(Qi===null){var e=di.alternate;e=e!==null?e.memoizedState:null}else e=Qi.next;var t=ho===null?di.memoizedState:ho.next;if(t!==null)ho=t,Qi=e;else{if(e===null)throw Error(Jt(310));Qi=e,e={memoizedState:Qi.memoizedState,baseState:Qi.baseState,baseQueue:Qi.baseQueue,queue:Qi.queue,next:null},ho===null?di.memoizedState=ho=e:ho=ho.next=e}return ho}function n0(e,t){return typeof t=="function"?t(e):t}function zC(e){var t=tc(),r=t.queue;if(r===null)throw Error(Jt(311));r.lastRenderedReducer=e;var n=Qi,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Mm&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,di.lanes|=d,Rm|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,$c(n,t.memoizedState)||(Fs=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,di.lanes|=i,Rm|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function qC(e){var t=tc(),r=t.queue;if(r===null)throw Error(Jt(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);$c(i,t.memoizedState)||(Fs=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function xU(){}function bU(e,t){var r=di,n=tc(),a=t(),i=!$c(n.memoizedState,a);if(i&&(n.memoizedState=a,Fs=!0),n=n.queue,GT(_U.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ho!==null&&ho.memoizedState.tag&1){if(r.flags|=2048,a0(9,SU.bind(null,r,n,a,t),void 0,null),po===null)throw Error(Jt(349));Mm&30||wU(r,t,a)}return a}function wU(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function SU(e,t,r,n){t.value=r,t.getSnapshot=n,jU(t)&&NU(e)}function _U(e,t,r){return r(function(){jU(t)&&NU(e)})}function jU(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$c(e,r)}catch{return!0}}function NU(e){var t=kd(e,1);t!==null&&Ic(t,e,1,-1)}function uR(e){var t=tu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n0,lastRenderedState:e},t.queue=e,e=e.dispatch=zoe.bind(null,di,e),[t.memoizedState,e]}function a0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function CU(){return tc().memoizedState}function Yw(e,t,r,n){var a=tu();di.flags|=e,a.memoizedState=a0(1|t,r,void 0,n===void 0?null:n)}function H_(e,t,r,n){var a=tc();n=n===void 0?null:n;var i=void 0;if(Qi!==null){var o=Qi.memoizedState;if(i=o.destroy,n!==null&&WT(n,o.deps)){a.memoizedState=a0(t,r,i,n);return}}di.flags|=e,a.memoizedState=a0(1|t,r,i,n)}function dR(e,t){return Yw(8390656,8,e,t)}function GT(e,t){return H_(2048,8,e,t)}function AU(e,t){return H_(4,2,e,t)}function PU(e,t){return H_(4,4,e,t)}function EU(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kU(e,t,r){return r=r!=null?r.concat([e]):null,H_(4,4,EU.bind(null,t,e),r)}function KT(){}function OU(e,t){var r=tc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&WT(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function TU(e,t){var r=tc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&WT(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function IU(e,t,r){return Mm&21?($c(r,t)||(r=$9(),di.lanes|=r,Rm|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fs=!0),e.memoizedState=r)}function Foe(e,t){var r=ya;ya=r!==0&&4>r?r:4,e(!0);var n=BC.transition;BC.transition={};try{e(!1),t()}finally{ya=r,BC.transition=n}}function DU(){return tc().memoizedState}function Boe(e,t,r){var n=qf(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},MU(e))RU(t,r);else if(r=gU(e,t,r,n),r!==null){var a=ws();Ic(r,e,n,a),LU(r,t,n)}}function zoe(e,t,r){var n=qf(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(MU(e))RU(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,$c(l,o)){var c=t.interleaved;c===null?(a.next=a,FT(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=gU(e,t,a,n),r!==null&&(a=ws(),Ic(r,e,n,a),LU(r,t,n))}}function MU(e){var t=e.alternate;return e===di||t!==null&&t===di}function RU(e,t){dx=D2=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function LU(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,NT(e,r)}}var M2={readContext:ec,useCallback:Lo,useContext:Lo,useEffect:Lo,useImperativeHandle:Lo,useInsertionEffect:Lo,useLayoutEffect:Lo,useMemo:Lo,useReducer:Lo,useRef:Lo,useState:Lo,useDebugValue:Lo,useDeferredValue:Lo,useTransition:Lo,useMutableSource:Lo,useSyncExternalStore:Lo,useId:Lo,unstable_isNewReconciler:!1},qoe={readContext:ec,useCallback:function(e,t){return tu().memoizedState=[e,t===void 0?null:t],e},useContext:ec,useEffect:dR,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Yw(4194308,4,EU.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Yw(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yw(4,2,e,t)},useMemo:function(e,t){var r=tu();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=tu();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Boe.bind(null,di,e),[n.memoizedState,e]},useRef:function(e){var t=tu();return e={current:e},t.memoizedState=e},useState:uR,useDebugValue:KT,useDeferredValue:function(e){return tu().memoizedState=e},useTransition:function(){var e=uR(!1),t=e[0];return e=Foe.bind(null,e[1]),tu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=di,a=tu();if(ni){if(r===void 0)throw Error(Jt(407));r=r()}else{if(r=t(),po===null)throw Error(Jt(349));Mm&30||wU(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,dR(_U.bind(null,n,i,e),[e]),n.flags|=2048,a0(9,SU.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=tu(),t=po.identifierPrefix;if(ni){var r=ld,n=sd;r=(n&~(1<<32-Tc(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=r0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$oe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Uoe={readContext:ec,useCallback:OU,useContext:ec,useEffect:GT,useImperativeHandle:kU,useInsertionEffect:AU,useLayoutEffect:PU,useMemo:TU,useReducer:zC,useRef:CU,useState:function(){return zC(n0)},useDebugValue:KT,useDeferredValue:function(e){var t=tc();return IU(t,Qi.memoizedState,e)},useTransition:function(){var e=zC(n0)[0],t=tc().memoizedState;return[e,t]},useMutableSource:xU,useSyncExternalStore:bU,useId:DU,unstable_isNewReconciler:!1},Woe={readContext:ec,useCallback:OU,useContext:ec,useEffect:GT,useImperativeHandle:kU,useInsertionEffect:AU,useLayoutEffect:PU,useMemo:TU,useReducer:qC,useRef:CU,useState:function(){return qC(n0)},useDebugValue:KT,useDeferredValue:function(e){var t=tc();return Qi===null?t.memoizedState=e:IU(t,Qi.memoizedState,e)},useTransition:function(){var e=qC(n0)[0],t=tc().memoizedState;return[e,t]},useMutableSource:xU,useSyncExternalStore:bU,useId:DU,unstable_isNewReconciler:!1};function wc(e,t){if(e&&e.defaultProps){t=hi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function LP(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:hi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var G_={isMounted:function(e){return(e=e._reactInternals)?np(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ws(),a=qf(e),i=Sd(n,a);i.payload=t,r!=null&&(i.callback=r),t=Bf(e,i,a),t!==null&&(Ic(t,e,a,n),Gw(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ws(),a=qf(e),i=Sd(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Bf(e,i,a),t!==null&&(Ic(t,e,a,n),Gw(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ws(),n=qf(e),a=Sd(r,n);a.tag=2,t!=null&&(a.callback=t),t=Bf(e,a,n),t!==null&&(Ic(t,e,n,r),Gw(t,e,n))}};function fR(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xx(r,n)||!Xx(a,i):!0}function $U(e,t,r){var n=!1,a=ih,i=t.contextType;return typeof i=="object"&&i!==null?i=ec(i):(a=Ws(t)?Im:Xo.current,n=t.contextTypes,i=(n=n!=null)?Rg(e,a):ih),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=G_,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function hR(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&G_.enqueueReplaceState(t,t.state,null)}function $P(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},BT(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ec(i):(i=Ws(t)?Im:Xo.current,a.context=Rg(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(LP(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&G_.enqueueReplaceState(a,a.state,null),T2(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Bg(e,t){try{var r="",n=t;do r+=yie(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function UC(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function FP(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Voe=typeof WeakMap=="function"?WeakMap:Map;function FU(e,t,r){r=Sd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){L2||(L2=!0,YP=n),FP(e,t)},r}function BU(e,t,r){r=Sd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){FP(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){FP(e,t),typeof n!="function"&&(zf===null?zf=new Set([this]):zf.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function mR(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Voe;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=ise.bind(null,e,t,r),t.then(e,e))}function pR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gR(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Sd(-1,1),t.tag=2,Bf(r,t,1))),r.lanes|=1),e)}var Hoe=qd.ReactCurrentOwner,Fs=!1;function ms(e,t,r,n){t.child=e===null?pU(t,null,r,n):$g(t,e.child,r,n)}function vR(e,t,r,n,a){r=r.render;var i=t.ref;return bg(t,a),n=VT(e,t,r,n,i,a),r=HT(),e!==null&&!Fs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Od(e,t,a)):(ni&&r&&IT(t),t.flags|=1,ms(e,t,n,a),t.child)}function yR(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!rI(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,zU(e,t,i,n,a)):(e=Zw(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xx,r(o,n)&&e.ref===t.ref)return Od(e,t,a)}return t.flags|=1,e=Uf(i,n),e.ref=t.ref,e.return=t,t.child=e}function zU(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Xx(i,n)&&e.ref===t.ref)if(Fs=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Fs=!0);else return t.lanes=e.lanes,Od(e,t,a)}return BP(e,t,r,n,a)}function qU(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$a(ig,cl),cl|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$a(ig,cl),cl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$a(ig,cl),cl|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,$a(ig,cl),cl|=n;return ms(e,t,a,r),t.child}function UU(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function BP(e,t,r,n,a){var i=Ws(r)?Im:Xo.current;return i=Rg(t,i),bg(t,a),r=VT(e,t,r,n,i,a),n=HT(),e!==null&&!Fs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Od(e,t,a)):(ni&&n&&IT(t),t.flags|=1,ms(e,t,r,a),t.child)}function xR(e,t,r,n,a){if(Ws(r)){var i=!0;A2(t)}else i=!1;if(bg(t,a),t.stateNode===null)Xw(e,t),$U(t,r,n),$P(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ec(u):(u=Ws(r)?Im:Xo.current,u=Rg(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&hR(t,o,n,u),vf=!1;var h=t.memoizedState;o.state=h,T2(t,n,o,a),c=t.memoizedState,l!==n||h!==c||Us.current||vf?(typeof d=="function"&&(LP(t,r,d,n),c=t.memoizedState),(l=vf||fR(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,vU(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:wc(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ec(c):(c=Ws(r)?Im:Xo.current,c=Rg(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&hR(t,o,n,c),vf=!1,h=t.memoizedState,o.state=h,T2(t,n,o,a);var g=t.memoizedState;l!==f||h!==g||Us.current||vf?(typeof m=="function"&&(LP(t,r,m,n),g=t.memoizedState),(u=vf||fR(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return zP(e,t,r,n,i,a)}function zP(e,t,r,n,a,i){UU(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&aR(t,r,!1),Od(e,t,i);n=t.stateNode,Hoe.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=$g(t,e.child,null,i),t.child=$g(t,null,l,i)):ms(e,t,l,i),t.memoizedState=n.state,a&&aR(t,r,!0),t.child}function WU(e){var t=e.stateNode;t.pendingContext?nR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nR(e,t.context,!1),zT(e,t.containerInfo)}function bR(e,t,r,n,a){return Lg(),MT(a),t.flags|=256,ms(e,t,r,n),t.child}var qP={dehydrated:null,treeContext:null,retryLane:0};function UP(e){return{baseLanes:e,cachePool:null,transitions:null}}function VU(e,t,r){var n=t.pendingProps,a=ci.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),$a(ci,a&1),e===null)return MP(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=X_(o,n,0,null),e=wm(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=UP(r),t.memoizedState=qP,e):YT(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Goe(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Uf(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Uf(l,i):(i=wm(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?UP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=qP,n}return i=e.child,e=i.sibling,n=Uf(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function YT(e,t){return t=X_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function U1(e,t,r,n){return n!==null&&MT(n),$g(t,e.child,null,r),e=YT(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Goe(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=UC(Error(Jt(422))),U1(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=X_({mode:"visible",children:n.children},a,0,null),i=wm(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&$g(t,e.child,null,o),t.child.memoizedState=UP(o),t.memoizedState=qP,i);if(!(t.mode&1))return U1(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Jt(419)),n=UC(i,n,void 0),U1(e,t,o,n)}if(l=(o&e.childLanes)!==0,Fs||l){if(n=po,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,kd(e,a),Ic(n,e,a,-1))}return tI(),n=UC(Error(Jt(421))),U1(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ose.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ml=Ff(a.nextSibling),xl=t,ni=!0,Pc=null,e!==null&&(ql[Ul++]=sd,ql[Ul++]=ld,ql[Ul++]=Dm,sd=e.id,ld=e.overflow,Dm=t),t=YT(t,n.children),t.flags|=4096,t)}function wR(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),RP(e.return,t,r)}function WC(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function HU(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ms(e,t,n.children,r),n=ci.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wR(e,r,t);else if(e.tag===19)wR(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($a(ci,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&I2(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),WC(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&I2(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}WC(t,!0,r,null,i);break;case"together":WC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Od(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Rm|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Jt(153));if(t.child!==null){for(e=t.child,r=Uf(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Uf(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Koe(e,t,r){switch(t.tag){case 3:WU(t),Lg();break;case 5:yU(t);break;case 1:Ws(t.type)&&A2(t);break;case 4:zT(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;$a(k2,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($a(ci,ci.current&1),t.flags|=128,null):r&t.child.childLanes?VU(e,t,r):($a(ci,ci.current&1),e=Od(e,t,r),e!==null?e.sibling:null);$a(ci,ci.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return HU(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$a(ci,ci.current),n)break;return null;case 22:case 23:return t.lanes=0,qU(e,t,r)}return Od(e,t,r)}var GU,WP,KU,YU;GU=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};WP=function(){};KU=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,im(pu.current);var i=null;switch(r){case"input":a=fP(e,a),n=fP(e,n),i=[];break;case"select":a=hi({},a,{value:void 0}),n=hi({},n,{value:void 0}),i=[];break;case"textarea":a=pP(e,a),n=pP(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=N2)}vP(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ux.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a?.[u],n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ux.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ha("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};YU=function(e,t,r,n){r!==n&&(t.flags|=4)};function wy(e,t){if(!ni)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $o(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Yoe(e,t,r){var n=t.pendingProps;switch(DT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(t),null;case 1:return Ws(t.type)&&C2(),$o(t),null;case 3:return n=t.stateNode,Fg(),Xa(Us),Xa(Xo),UT(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(z1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pc!==null&&(QP(Pc),Pc=null))),WP(e,t),$o(t),null;case 5:qT(t);var a=im(t0.current);if(r=t.type,e!==null&&t.stateNode!=null)KU(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Jt(166));return $o(t),null}if(e=im(pu.current),z1(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[iu]=t,n[Zx]=i,e=(t.mode&1)!==0,r){case"dialog":Ha("cancel",n),Ha("close",n);break;case"iframe":case"object":case"embed":Ha("load",n);break;case"video":case"audio":for(a=0;a<Qy.length;a++)Ha(Qy[a],n);break;case"source":Ha("error",n);break;case"img":case"image":case"link":Ha("error",n),Ha("load",n);break;case"details":Ha("toggle",n);break;case"input":kM(n,i),Ha("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ha("invalid",n);break;case"textarea":TM(n,i),Ha("invalid",n)}vP(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&B1(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&B1(n.textContent,l,e),a=["children",""+l]):Ux.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ha("scroll",n)}switch(r){case"input":T1(n),OM(n,i,!0);break;case"textarea":T1(n),IM(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=N2)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[iu]=t,e[Zx]=n,GU(e,t,!1,!1),t.stateNode=e;e:{switch(o=yP(r,n),r){case"dialog":Ha("cancel",e),Ha("close",e),a=n;break;case"iframe":case"object":case"embed":Ha("load",e),a=n;break;case"video":case"audio":for(a=0;a<Qy.length;a++)Ha(Qy[a],e);a=n;break;case"source":Ha("error",e),a=n;break;case"img":case"image":case"link":Ha("error",e),Ha("load",e),a=n;break;case"details":Ha("toggle",e),a=n;break;case"input":kM(e,n),a=fP(e,n),Ha("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=hi({},n,{value:void 0}),Ha("invalid",e);break;case"textarea":TM(e,n),a=pP(e,n),Ha("invalid",e);break;default:a=n}vP(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?C9(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&j9(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wx(e,c):typeof c=="number"&&Wx(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ux.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ha("scroll",e):c!=null&&xT(e,i,c,o))}switch(r){case"input":T1(e),OM(e,n,!1);break;case"textarea":T1(e),IM(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ah(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?gg(e,!!n.multiple,i,!1):n.defaultValue!=null&&gg(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=N2)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $o(t),null;case 6:if(e&&t.stateNode!=null)YU(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Jt(166));if(r=im(t0.current),im(pu.current),z1(t)){if(n=t.stateNode,r=t.memoizedProps,n[iu]=t,(i=n.nodeValue!==r)&&(e=xl,e!==null))switch(e.tag){case 3:B1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&B1(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[iu]=t,t.stateNode=n}return $o(t),null;case 13:if(Xa(ci),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ni&&ml!==null&&t.mode&1&&!(t.flags&128))hU(),Lg(),t.flags|=98560,i=!1;else if(i=z1(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Jt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Jt(317));i[iu]=t}else Lg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$o(t),i=!1}else Pc!==null&&(QP(Pc),Pc=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ci.current&1?ro===0&&(ro=3):tI())),t.updateQueue!==null&&(t.flags|=4),$o(t),null);case 4:return Fg(),WP(e,t),e===null&&Jx(t.stateNode.containerInfo),$o(t),null;case 10:return $T(t.type._context),$o(t),null;case 17:return Ws(t.type)&&C2(),$o(t),null;case 19:if(Xa(ci),i=t.memoizedState,i===null)return $o(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)wy(i,!1);else{if(ro!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=I2(e),o!==null){for(t.flags|=128,wy(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $a(ci,ci.current&1|2),t.child}e=e.sibling}i.tail!==null&&Pi()>zg&&(t.flags|=128,n=!0,wy(i,!1),t.lanes=4194304)}else{if(!n)if(e=I2(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),wy(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ni)return $o(t),null}else 2*Pi()-i.renderingStartTime>zg&&r!==1073741824&&(t.flags|=128,n=!0,wy(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Pi(),t.sibling=null,r=ci.current,$a(ci,n?r&1|2:r&1),t):($o(t),null);case 22:case 23:return eI(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?cl&1073741824&&($o(t),t.subtreeFlags&6&&(t.flags|=8192)):$o(t),null;case 24:return null;case 25:return null}throw Error(Jt(156,t.tag))}function Xoe(e,t){switch(DT(t),t.tag){case 1:return Ws(t.type)&&C2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fg(),Xa(Us),Xa(Xo),UT(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qT(t),null;case 13:if(Xa(ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Jt(340));Lg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xa(ci),null;case 4:return Fg(),null;case 10:return $T(t.type._context),null;case 22:case 23:return eI(),null;case 24:return null;default:return null}}var W1=!1,Ho=!1,Joe=typeof WeakSet=="function"?WeakSet:Set,_r=null;function ag(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xi(e,t,n)}else r.current=null}function VP(e,t,r){try{r()}catch(n){xi(e,t,n)}}var SR=!1;function Qoe(e,t){if(PP=S2,e=eU(),TT(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(EP={focusedElem:e,selectionRange:r},S2=!1,_r=t;_r!==null;)if(t=_r,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_r=e;else for(;_r!==null;){t=_r;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:wc(t.type,p),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Jt(163))}}catch(_){xi(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,_r=e;break}_r=t.return}return g=SR,SR=!1,g}function fx(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&VP(t,r,i)}a=a.next}while(a!==n)}}function K_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function HP(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function XU(e){var t=e.alternate;t!==null&&(e.alternate=null,XU(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[iu],delete t[Zx],delete t[TP],delete t[Doe],delete t[Moe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JU(e){return e.tag===5||e.tag===3||e.tag===4}function _R(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JU(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function GP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=N2));else if(n!==4&&(e=e.child,e!==null))for(GP(e,t,r),e=e.sibling;e!==null;)GP(e,t,r),e=e.sibling}function KP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(KP(e,t,r),e=e.sibling;e!==null;)KP(e,t,r),e=e.sibling}var Co=null,_c=!1;function nf(e,t,r){for(r=r.child;r!==null;)QU(e,t,r),r=r.sibling}function QU(e,t,r){if(mu&&typeof mu.onCommitFiberUnmount=="function")try{mu.onCommitFiberUnmount(B_,r)}catch{}switch(r.tag){case 5:Ho||ag(r,t);case 6:var n=Co,a=_c;Co=null,nf(e,t,r),Co=n,_c=a,Co!==null&&(_c?(e=Co,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Co.removeChild(r.stateNode));break;case 18:Co!==null&&(_c?(e=Co,r=r.stateNode,e.nodeType===8?LC(e.parentNode,r):e.nodeType===1&&LC(e,r),Kx(e)):LC(Co,r.stateNode));break;case 4:n=Co,a=_c,Co=r.stateNode.containerInfo,_c=!0,nf(e,t,r),Co=n,_c=a;break;case 0:case 11:case 14:case 15:if(!Ho&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&VP(r,t,o),a=a.next}while(a!==n)}nf(e,t,r);break;case 1:if(!Ho&&(ag(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){xi(r,t,l)}nf(e,t,r);break;case 21:nf(e,t,r);break;case 22:r.mode&1?(Ho=(n=Ho)||r.memoizedState!==null,nf(e,t,r),Ho=n):nf(e,t,r);break;default:nf(e,t,r)}}function jR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Joe),t.forEach(function(n){var a=sse.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function mc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Co=l.stateNode,_c=!1;break e;case 3:Co=l.stateNode.containerInfo,_c=!0;break e;case 4:Co=l.stateNode.containerInfo,_c=!0;break e}l=l.return}if(Co===null)throw Error(Jt(160));QU(i,o,a),Co=null,_c=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){xi(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ZU(t,e),t=t.sibling}function ZU(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),Qc(e),n&4){try{fx(3,e,e.return),K_(3,e)}catch(p){xi(e,e.return,p)}try{fx(5,e,e.return)}catch(p){xi(e,e.return,p)}}break;case 1:mc(t,e),Qc(e),n&512&&r!==null&&ag(r,r.return);break;case 5:if(mc(t,e),Qc(e),n&512&&r!==null&&ag(r,r.return),e.flags&32){var a=e.stateNode;try{Wx(a,"")}catch(p){xi(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&w9(a,i),yP(l,o);var u=yP(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?C9(a,f):d==="dangerouslySetInnerHTML"?j9(a,f):d==="children"?Wx(a,f):xT(a,d,f,u)}switch(l){case"input":hP(a,i);break;case"textarea":S9(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?gg(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?gg(a,!!i.multiple,i.defaultValue,!0):gg(a,!!i.multiple,i.multiple?[]:"",!1))}a[Zx]=i}catch(p){xi(e,e.return,p)}}break;case 6:if(mc(t,e),Qc(e),n&4){if(e.stateNode===null)throw Error(Jt(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){xi(e,e.return,p)}}break;case 3:if(mc(t,e),Qc(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kx(t.containerInfo)}catch(p){xi(e,e.return,p)}break;case 4:mc(t,e),Qc(e);break;case 13:mc(t,e),Qc(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(QT=Pi())),n&4&&jR(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ho=(u=Ho)||d,mc(t,e),Ho=u):mc(t,e),Qc(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(_r=e,d=e.child;d!==null;){for(f=_r=d;_r!==null;){switch(h=_r,m=h.child,h.tag){case 0:case 11:case 14:case 15:fx(4,h,h.return);break;case 1:ag(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){xi(n,r,p)}}break;case 5:ag(h,h.return);break;case 22:if(h.memoizedState!==null){CR(f);continue}}m!==null?(m.return=h,_r=m):CR(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=N9("display",o))}catch(p){xi(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){xi(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mc(t,e),Qc(e),n&4&&jR(e);break;case 21:break;default:mc(t,e),Qc(e)}}function Qc(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(JU(r)){var n=r;break e}r=r.return}throw Error(Jt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Wx(a,""),n.flags&=-33);var i=_R(e);KP(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=_R(e);GP(e,l,o);break;default:throw Error(Jt(161))}}catch(c){xi(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zoe(e,t,r){_r=e,eW(e)}function eW(e,t,r){for(var n=(e.mode&1)!==0;_r!==null;){var a=_r,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||W1;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ho;l=W1;var u=Ho;if(W1=o,(Ho=c)&&!u)for(_r=a;_r!==null;)o=_r,c=o.child,o.tag===22&&o.memoizedState!==null?AR(a):c!==null?(c.return=o,_r=c):AR(a);for(;i!==null;)_r=i,eW(i),i=i.sibling;_r=a,W1=l,Ho=u}NR(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,_r=i):NR(e)}}function NR(e){for(;_r!==null;){var t=_r;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ho||K_(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ho)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:wc(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cR(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cR(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Kx(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Jt(163))}Ho||t.flags&512&&HP(t)}catch(h){xi(t,t.return,h)}}if(t===e){_r=null;break}if(r=t.sibling,r!==null){r.return=t.return,_r=r;break}_r=t.return}}function CR(e){for(;_r!==null;){var t=_r;if(t===e){_r=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_r=r;break}_r=t.return}}function AR(e){for(;_r!==null;){var t=_r;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{K_(4,t)}catch(c){xi(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){xi(t,a,c)}}var i=t.return;try{HP(t)}catch(c){xi(t,i,c)}break;case 5:var o=t.return;try{HP(t)}catch(c){xi(t,o,c)}}}catch(c){xi(t,t.return,c)}if(t===e){_r=null;break}var l=t.sibling;if(l!==null){l.return=t.return,_r=l;break}_r=t.return}}var ese=Math.ceil,R2=qd.ReactCurrentDispatcher,XT=qd.ReactCurrentOwner,Jl=qd.ReactCurrentBatchConfig,ea=0,po=null,Li=null,ko=0,cl=0,ig=vh(0),ro=0,i0=null,Rm=0,Y_=0,JT=0,hx=null,Rs=null,QT=0,zg=1/0,Qu=null,L2=!1,YP=null,zf=null,V1=!1,Pf=null,$2=0,mx=0,XP=null,Jw=-1,Qw=0;function ws(){return ea&6?Pi():Jw!==-1?Jw:Jw=Pi()}function qf(e){return e.mode&1?ea&2&&ko!==0?ko&-ko:Loe.transition!==null?(Qw===0&&(Qw=$9()),Qw):(e=ya,e!==0||(e=window.event,e=e===void 0?16:V9(e.type)),e):1}function Ic(e,t,r,n){if(50<mx)throw mx=0,XP=null,Error(Jt(185));yb(e,r,n),(!(ea&2)||e!==po)&&(e===po&&(!(ea&2)&&(Y_|=r),ro===4&&Sf(e,ko)),Vs(e,n),r===1&&ea===0&&!(t.mode&1)&&(zg=Pi()+500,V_&&yh()))}function Vs(e,t){var r=e.callbackNode;Lie(e,t);var n=w2(e,e===po?ko:0);if(n===0)r!==null&&RM(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&RM(r),t===1)e.tag===0?Roe(PR.bind(null,e)):uU(PR.bind(null,e)),Toe(function(){!(ea&6)&&yh()}),r=null;else{switch(F9(n)){case 1:r=jT;break;case 4:r=R9;break;case 16:r=b2;break;case 536870912:r=L9;break;default:r=b2}r=lW(r,tW.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tW(e,t){if(Jw=-1,Qw=0,ea&6)throw Error(Jt(327));var r=e.callbackNode;if(wg()&&e.callbackNode!==r)return null;var n=w2(e,e===po?ko:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=F2(e,n);else{t=n;var a=ea;ea|=2;var i=nW();(po!==e||ko!==t)&&(Qu=null,zg=Pi()+500,bm(e,t));do try{nse();break}catch(l){rW(e,l)}while(1);LT(),R2.current=i,ea=a,Li!==null?t=0:(po=null,ko=0,t=ro)}if(t!==0){if(t===2&&(a=_P(e),a!==0&&(n=a,t=JP(e,a))),t===1)throw r=i0,bm(e,0),Sf(e,n),Vs(e,Pi()),r;if(t===6)Sf(e,n);else{if(a=e.current.alternate,!(n&30)&&!tse(a)&&(t=F2(e,n),t===2&&(i=_P(e),i!==0&&(n=i,t=JP(e,i))),t===1))throw r=i0,bm(e,0),Sf(e,n),Vs(e,Pi()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Jt(345));case 2:Uh(e,Rs,Qu);break;case 3:if(Sf(e,n),(n&130023424)===n&&(t=QT+500-Pi(),10<t)){if(w2(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ws(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=OP(Uh.bind(null,e,Rs,Qu),t);break}Uh(e,Rs,Qu);break;case 4:if(Sf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Tc(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Pi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ese(n/1960))-n,10<n){e.timeoutHandle=OP(Uh.bind(null,e,Rs,Qu),n);break}Uh(e,Rs,Qu);break;case 5:Uh(e,Rs,Qu);break;default:throw Error(Jt(329))}}}return Vs(e,Pi()),e.callbackNode===r?tW.bind(null,e):null}function JP(e,t){var r=hx;return e.current.memoizedState.isDehydrated&&(bm(e,t).flags|=256),e=F2(e,t),e!==2&&(t=Rs,Rs=r,t!==null&&QP(t)),e}function QP(e){Rs===null?Rs=e:Rs.push.apply(Rs,e)}function tse(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!$c(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sf(e,t){for(t&=~JT,t&=~Y_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Tc(t),n=1<<r;e[r]=-1,t&=~n}}function PR(e){if(ea&6)throw Error(Jt(327));wg();var t=w2(e,0);if(!(t&1))return Vs(e,Pi()),null;var r=F2(e,t);if(e.tag!==0&&r===2){var n=_P(e);n!==0&&(t=n,r=JP(e,n))}if(r===1)throw r=i0,bm(e,0),Sf(e,t),Vs(e,Pi()),r;if(r===6)throw Error(Jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uh(e,Rs,Qu),Vs(e,Pi()),null}function ZT(e,t){var r=ea;ea|=1;try{return e(t)}finally{ea=r,ea===0&&(zg=Pi()+500,V_&&yh())}}function Lm(e){Pf!==null&&Pf.tag===0&&!(ea&6)&&wg();var t=ea;ea|=1;var r=Jl.transition,n=ya;try{if(Jl.transition=null,ya=1,e)return e()}finally{ya=n,Jl.transition=r,ea=t,!(ea&6)&&yh()}}function eI(){cl=ig.current,Xa(ig)}function bm(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ooe(r)),Li!==null)for(r=Li.return;r!==null;){var n=r;switch(DT(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&C2();break;case 3:Fg(),Xa(Us),Xa(Xo),UT();break;case 5:qT(n);break;case 4:Fg();break;case 13:Xa(ci);break;case 19:Xa(ci);break;case 10:$T(n.type._context);break;case 22:case 23:eI()}r=r.return}if(po=e,Li=e=Uf(e.current,null),ko=cl=t,ro=0,i0=null,JT=Y_=Rm=0,Rs=hx=null,am!==null){for(t=0;t<am.length;t++)if(r=am[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}am=null}return e}function rW(e,t){do{var r=Li;try{if(LT(),Kw.current=M2,D2){for(var n=di.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}D2=!1}if(Mm=0,ho=Qi=di=null,dx=!1,r0=0,XT.current=null,r===null||r.return===null){ro=1,i0=t,Li=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ko,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=pR(o);if(m!==null){m.flags&=-257,gR(m,o,l,i,t),m.mode&1&&mR(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){mR(i,u,t),tI();break e}c=Error(Jt(426))}}else if(ni&&l.mode&1){var v=pR(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),gR(v,o,l,i,t),MT(Bg(c,l));break e}}i=c=Bg(c,l),ro!==4&&(ro=2),hx===null?hx=[i]:hx.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=FU(i,c,t);lR(i,x);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(zf===null||!zf.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=BU(i,l,t);lR(i,_);break e}}i=i.return}while(i!==null)}iW(r)}catch(j){t=j,Li===r&&r!==null&&(Li=r=r.return);continue}break}while(1)}function nW(){var e=R2.current;return R2.current=M2,e===null?M2:e}function tI(){(ro===0||ro===3||ro===2)&&(ro=4),po===null||!(Rm&268435455)&&!(Y_&268435455)||Sf(po,ko)}function F2(e,t){var r=ea;ea|=2;var n=nW();(po!==e||ko!==t)&&(Qu=null,bm(e,t));do try{rse();break}catch(a){rW(e,a)}while(1);if(LT(),ea=r,R2.current=n,Li!==null)throw Error(Jt(261));return po=null,ko=0,ro}function rse(){for(;Li!==null;)aW(Li)}function nse(){for(;Li!==null&&!Pie();)aW(Li)}function aW(e){var t=sW(e.alternate,e,cl);e.memoizedProps=e.pendingProps,t===null?iW(e):Li=t,XT.current=null}function iW(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Xoe(r,t),r!==null){r.flags&=32767,Li=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ro=6,Li=null;return}}else if(r=Yoe(r,t,cl),r!==null){Li=r;return}if(t=t.sibling,t!==null){Li=t;return}Li=t=e}while(t!==null);ro===0&&(ro=5)}function Uh(e,t,r){var n=ya,a=Jl.transition;try{Jl.transition=null,ya=1,ase(e,t,r,n)}finally{Jl.transition=a,ya=n}return null}function ase(e,t,r,n){do wg();while(Pf!==null);if(ea&6)throw Error(Jt(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Jt(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if($ie(e,i),e===po&&(Li=po=null,ko=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||V1||(V1=!0,lW(b2,function(){return wg(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Jl.transition,Jl.transition=null;var o=ya;ya=1;var l=ea;ea|=4,XT.current=null,Qoe(e,r),ZU(r,e),joe(EP),S2=!!PP,EP=PP=null,e.current=r,Zoe(r),Eie(),ea=l,ya=o,Jl.transition=i}else e.current=r;if(V1&&(V1=!1,Pf=e,$2=a),i=e.pendingLanes,i===0&&(zf=null),Tie(r.stateNode),Vs(e,Pi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(L2)throw L2=!1,e=YP,YP=null,e;return $2&1&&e.tag!==0&&wg(),i=e.pendingLanes,i&1?e===XP?mx++:(mx=0,XP=e):mx=0,yh(),null}function wg(){if(Pf!==null){var e=F9($2),t=Jl.transition,r=ya;try{if(Jl.transition=null,ya=16>e?16:e,Pf===null)var n=!1;else{if(e=Pf,Pf=null,$2=0,ea&6)throw Error(Jt(331));var a=ea;for(ea|=4,_r=e.current;_r!==null;){var i=_r,o=i.child;if(_r.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(_r=u;_r!==null;){var d=_r;switch(d.tag){case 0:case 11:case 15:fx(8,d,i)}var f=d.child;if(f!==null)f.return=d,_r=f;else for(;_r!==null;){d=_r;var h=d.sibling,m=d.return;if(XU(d),d===u){_r=null;break}if(h!==null){h.return=m,_r=h;break}_r=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}_r=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_r=o;else e:for(;_r!==null;){if(i=_r,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fx(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,_r=x;break e}_r=i.return}}var b=e.current;for(_r=b;_r!==null;){o=_r;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,_r=w;else e:for(o=b;_r!==null;){if(l=_r,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:K_(9,l)}}catch(j){xi(l,l.return,j)}if(l===o){_r=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,_r=_;break e}_r=l.return}}if(ea=a,yh(),mu&&typeof mu.onPostCommitFiberRoot=="function")try{mu.onPostCommitFiberRoot(B_,e)}catch{}n=!0}return n}finally{ya=r,Jl.transition=t}}return!1}function ER(e,t,r){t=Bg(r,t),t=FU(e,t,1),e=Bf(e,t,1),t=ws(),e!==null&&(yb(e,1,t),Vs(e,t))}function xi(e,t,r){if(e.tag===3)ER(e,e,r);else for(;t!==null;){if(t.tag===3){ER(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zf===null||!zf.has(n))){e=Bg(r,e),e=BU(t,e,1),t=Bf(t,e,1),e=ws(),t!==null&&(yb(t,1,e),Vs(t,e));break}}t=t.return}}function ise(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ws(),e.pingedLanes|=e.suspendedLanes&r,po===e&&(ko&r)===r&&(ro===4||ro===3&&(ko&130023424)===ko&&500>Pi()-QT?bm(e,0):JT|=r),Vs(e,t)}function oW(e,t){t===0&&(e.mode&1?(t=M1,M1<<=1,!(M1&130023424)&&(M1=4194304)):t=1);var r=ws();e=kd(e,t),e!==null&&(yb(e,t,r),Vs(e,r))}function ose(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oW(e,r)}function sse(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Jt(314))}n!==null&&n.delete(t),oW(e,r)}var sW;sW=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Us.current)Fs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Fs=!1,Koe(e,t,r);Fs=!!(e.flags&131072)}else Fs=!1,ni&&t.flags&1048576&&dU(t,E2,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Xw(e,t),e=t.pendingProps;var a=Rg(t,Xo.current);bg(t,r),a=VT(null,t,n,e,a,r);var i=HT();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ws(n)?(i=!0,A2(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,BT(t),a.updater=G_,t.stateNode=a,a._reactInternals=t,$P(t,n,e,r),t=zP(null,t,n,!0,i,r)):(t.tag=0,ni&&i&&IT(t),ms(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Xw(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=cse(n),e=wc(n,e),a){case 0:t=BP(null,t,n,e,r);break e;case 1:t=xR(null,t,n,e,r);break e;case 11:t=vR(null,t,n,e,r);break e;case 14:t=yR(null,t,n,wc(n.type,e),r);break e}throw Error(Jt(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),BP(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),xR(e,t,n,a,r);case 3:e:{if(WU(t),e===null)throw Error(Jt(387));n=t.pendingProps,i=t.memoizedState,a=i.element,vU(e,t),T2(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Bg(Error(Jt(423)),t),t=bR(e,t,n,r,a);break e}else if(n!==a){a=Bg(Error(Jt(424)),t),t=bR(e,t,n,r,a);break e}else for(ml=Ff(t.stateNode.containerInfo.firstChild),xl=t,ni=!0,Pc=null,r=pU(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lg(),n===a){t=Od(e,t,r);break e}ms(e,t,n,r)}t=t.child}return t;case 5:return yU(t),e===null&&MP(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,kP(n,a)?o=null:i!==null&&kP(n,i)&&(t.flags|=32),UU(e,t),ms(e,t,o,r),t.child;case 6:return e===null&&MP(t),null;case 13:return VU(e,t,r);case 4:return zT(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$g(t,null,n,r):ms(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),vR(e,t,n,a,r);case 7:return ms(e,t,t.pendingProps,r),t.child;case 8:return ms(e,t,t.pendingProps.children,r),t.child;case 12:return ms(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,$a(k2,n._currentValue),n._currentValue=o,i!==null)if($c(i.value,o)){if(i.children===a.children&&!Us.current){t=Od(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Sd(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),RP(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Jt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),RP(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ms(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,bg(t,r),a=ec(a),n=n(a),t.flags|=1,ms(e,t,n,r),t.child;case 14:return n=t.type,a=wc(n,t.pendingProps),a=wc(n.type,a),yR(e,t,n,a,r);case 15:return zU(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wc(n,a),Xw(e,t),t.tag=1,Ws(n)?(e=!0,A2(t)):e=!1,bg(t,r),$U(t,n,a),$P(t,n,a,r),zP(null,t,n,!0,e,r);case 19:return HU(e,t,r);case 22:return qU(e,t,r)}throw Error(Jt(156,t.tag))};function lW(e,t){return M9(e,t)}function lse(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,r,n){return new lse(e,t,r,n)}function rI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cse(e){if(typeof e=="function")return rI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wT)return 11;if(e===ST)return 14}return 2}function Uf(e,t){var r=e.alternate;return r===null?(r=Hl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Zw(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")rI(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yp:return wm(r.children,a,i,t);case bT:o=8,a|=8;break;case lP:return e=Hl(12,r,t,a|2),e.elementType=lP,e.lanes=i,e;case cP:return e=Hl(13,r,t,a),e.elementType=cP,e.lanes=i,e;case uP:return e=Hl(19,r,t,a),e.elementType=uP,e.lanes=i,e;case y9:return X_(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case g9:o=10;break e;case v9:o=9;break e;case wT:o=11;break e;case ST:o=14;break e;case gf:o=16,n=null;break e}throw Error(Jt(130,e==null?e:typeof e,""))}return t=Hl(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function wm(e,t,r,n){return e=Hl(7,e,n,t),e.lanes=r,e}function X_(e,t,r,n){return e=Hl(22,e,n,t),e.elementType=y9,e.lanes=r,e.stateNode={isHidden:!1},e}function VC(e,t,r){return e=Hl(6,e,null,t),e.lanes=r,e}function HC(e,t,r){return t=Hl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function use(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=CC(0),this.expirationTimes=CC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=CC(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function nI(e,t,r,n,a,i,o,l,c){return e=new use(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Hl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},BT(i),e}function dse(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function cW(e){if(!e)return ih;e=e._reactInternals;e:{if(np(e)!==e||e.tag!==1)throw Error(Jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ws(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Jt(171))}if(e.tag===1){var r=e.type;if(Ws(r))return cU(e,r,t)}return t}function uW(e,t,r,n,a,i,o,l,c){return e=nI(r,n,!0,e,a,i,o,l,c),e.context=cW(null),r=e.current,n=ws(),a=qf(r),i=Sd(n,a),i.callback=t??null,Bf(r,i,a),e.current.lanes=a,yb(e,a,n),Vs(e,n),e}function J_(e,t,r,n){var a=t.current,i=ws(),o=qf(a);return r=cW(r),t.context===null?t.context=r:t.pendingContext=r,t=Sd(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Bf(a,t,o),e!==null&&(Ic(e,a,o,i),Gw(e,a,o)),o}function B2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function aI(e,t){kR(e,t),(e=e.alternate)&&kR(e,t)}function fse(){return null}var dW=typeof reportError=="function"?reportError:function(e){console.error(e)};function iI(e){this._internalRoot=e}Q_.prototype.render=iI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Jt(409));J_(e,t,null,null)};Q_.prototype.unmount=iI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lm(function(){J_(null,e,null,null)}),t[Ed]=null}};function Q_(e){this._internalRoot=e}Q_.prototype.unstable_scheduleHydration=function(e){if(e){var t=q9();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wf.length&&t!==0&&t<wf[r].priority;r++);wf.splice(r,0,e),r===0&&W9(e)}};function oI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Z_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function OR(){}function hse(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=B2(o);i.call(u)}}var o=uW(t,n,e,0,null,!1,!1,"",OR);return e._reactRootContainer=o,e[Ed]=o.current,Jx(e.nodeType===8?e.parentNode:e),Lm(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=B2(c);l.call(u)}}var c=nI(e,0,!1,null,null,!1,!1,"",OR);return e._reactRootContainer=c,e[Ed]=c.current,Jx(e.nodeType===8?e.parentNode:e),Lm(function(){J_(t,c,r,n)}),c}function ej(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=B2(o);l.call(c)}}J_(t,o,e,a)}else o=hse(r,t,e,a,n);return B2(o)}B9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Jy(t.pendingLanes);r!==0&&(NT(t,r|1),Vs(t,Pi()),!(ea&6)&&(zg=Pi()+500,yh()))}break;case 13:Lm(function(){var n=kd(e,1);if(n!==null){var a=ws();Ic(n,e,1,a)}}),aI(e,1)}};CT=function(e){if(e.tag===13){var t=kd(e,134217728);if(t!==null){var r=ws();Ic(t,e,134217728,r)}aI(e,134217728)}};z9=function(e){if(e.tag===13){var t=qf(e),r=kd(e,t);if(r!==null){var n=ws();Ic(r,e,t,n)}aI(e,t)}};q9=function(){return ya};U9=function(e,t){var r=ya;try{return ya=e,t()}finally{ya=r}};bP=function(e,t,r){switch(t){case"input":if(hP(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=W_(n);if(!a)throw Error(Jt(90));b9(n),hP(n,a)}}}break;case"textarea":S9(e,r);break;case"select":t=r.value,t!=null&&gg(e,!!r.multiple,t,!1)}};E9=ZT;k9=Lm;var mse={usingClientEntryPoint:!1,Events:[bb,Zp,W_,A9,P9,ZT]},Sy={findFiberByHostInstance:nm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pse={bundleType:Sy.bundleType,version:Sy.version,rendererPackageName:Sy.rendererPackageName,rendererConfig:Sy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=I9(e),e===null?null:e.stateNode},findFiberByHostInstance:Sy.findFiberByHostInstance||fse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H1.isDisabled&&H1.supportsFiber)try{B_=H1.inject(pse),mu=H1}catch{}}Al.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mse;Al.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oI(t))throw Error(Jt(200));return dse(e,t,null,r)};Al.createRoot=function(e,t){if(!oI(e))throw Error(Jt(299));var r=!1,n="",a=dW;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=nI(e,1,!1,null,null,r,!1,n,a),e[Ed]=t.current,Jx(e.nodeType===8?e.parentNode:e),new iI(t)};Al.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Jt(188)):(e=Object.keys(e).join(","),Error(Jt(268,e)));return e=I9(t),e=e===null?null:e.stateNode,e};Al.flushSync=function(e){return Lm(e)};Al.hydrate=function(e,t,r){if(!Z_(t))throw Error(Jt(200));return ej(null,e,t,!0,r)};Al.hydrateRoot=function(e,t,r){if(!oI(e))throw Error(Jt(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=dW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=uW(t,null,e,1,r??null,a,!1,i,o),e[Ed]=t.current,Jx(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Q_(t)};Al.render=function(e,t,r){if(!Z_(t))throw Error(Jt(200));return ej(null,e,t,!1,r)};Al.unmountComponentAtNode=function(e){if(!Z_(e))throw Error(Jt(40));return e._reactRootContainer?(Lm(function(){ej(null,null,e,!1,function(){e._reactRootContainer=null,e[Ed]=null})}),!0):!1};Al.unstable_batchedUpdates=ZT;Al.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Z_(r))throw Error(Jt(200));if(e==null||e._reactInternals===void 0)throw Error(Jt(38));return ej(e,t,r,!1,n)};Al.version="18.3.1-next-f1338f8080-20240426";function fW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fW)}catch(e){console.error(e)}}fW(),f9.exports=Al;var xh=f9.exports;const hW=Gn(xh);var TR=xh;oP.createRoot=TR.createRoot,oP.hydrateRoot=TR.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o0.apply(this,arguments)}var Ef;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ef||(Ef={}));const IR="popstate";function gse(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return ZP("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:z2(a)}return yse(t,r,null,e)}function fi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vse(){return Math.random().toString(36).substr(2,8)}function DR(e,t){return{usr:e.state,key:e.key,idx:t}}function ZP(e,t,r,n){return r===void 0&&(r=null),o0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Iv(t):t,{state:r,key:t&&t.key||n||vse()})}function z2(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Iv(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function yse(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Ef.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(o0({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Ef.Pop;let v=d(),x=v==null?null:v-u;u=v,c&&c({action:l,location:p.location,delta:x})}function h(v,x){l=Ef.Push;let b=ZP(p.location,v,x);r&&r(b,v),u=d()+1;let w=DR(b,u),_=p.createHref(b);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:p.location,delta:1})}function m(v,x){l=Ef.Replace;let b=ZP(p.location,v,x);r&&r(b,v),u=d();let w=DR(b,u),_=p.createHref(b);o.replaceState(w,"",_),i&&c&&c({action:l,location:p.location,delta:0})}function g(v){let x=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof v=="string"?v:z2(v);return b=b.replace(/ $/,"%20"),fi(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let p={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(IR,f),c=v,()=>{a.removeEventListener(IR,f),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return o.go(v)}};return p}var MR;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(MR||(MR={}));function xse(e,t,r){return r===void 0&&(r="/"),bse(e,t,r,!1)}function bse(e,t,r,n){let a=typeof t=="string"?Iv(t):t,i=qg(a.pathname||"/",r);if(i==null)return null;let o=pW(e);wse(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Tse(i);l=kse(o[c],u,n)}return l}function pW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(fi(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Wf([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(fi(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pW(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Pse(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of gW(i.path))a(i,o,c)}),t}function gW(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=gW(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function wse(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ese(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Sse=/^:[\w-]+$/,_se=3,jse=2,Nse=1,Cse=10,Ase=-2,RR=e=>e==="*";function Pse(e,t){let r=e.split("/"),n=r.length;return r.some(RR)&&(n+=Ase),t&&(n+=jse),r.filter(a=>!RR(a)).reduce((a,i)=>a+(Sse.test(i)?_se:i===""?Nse:Cse),n)}function Ese(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function kse(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=q2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=q2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Wf([i,f.pathname]),pathnameBase:Rse(Wf([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Wf([i,f.pathnameBase]))}return o}function q2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Ose(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Ose(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),mW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Tse(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Ise(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Iv(e):e;return{pathname:r?r.startsWith("/")?r:Dse(r,t):t,search:Lse(n),hash:$se(a)}}function Dse(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function GC(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mse(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function sI(e,t){let r=Mse(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function lI(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Iv(e):(a=o0({},e),fi(!a.pathname||!a.pathname.includes("?"),GC("?","pathname","search",a)),fi(!a.pathname||!a.pathname.includes("#"),GC("#","pathname","hash",a)),fi(!a.search||!a.search.includes("#"),GC("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=Ise(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Wf=e=>e.join("/").replace(/\/\/+/g,"/"),Rse=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Lse=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$se=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Fse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vW=["post","put","patch","delete"];new Set(vW);const Bse=["get",...vW];new Set(Bse);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s0.apply(this,arguments)}const tj=y.createContext(null),yW=y.createContext(null),Ud=y.createContext(null),rj=y.createContext(null),bh=y.createContext({outlet:null,matches:[],isDataRoute:!1}),xW=y.createContext(null);function zse(e,t){let{relative:r}=t===void 0?{}:t;Dv()||fi(!1);let{basename:n,navigator:a}=y.useContext(Ud),{hash:i,pathname:o,search:l}=nj(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Wf([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Dv(){return y.useContext(rj)!=null}function js(){return Dv()||fi(!1),y.useContext(rj).location}function bW(e){y.useContext(Ud).static||y.useLayoutEffect(e)}function Vc(){let{isDataRoute:e}=y.useContext(bh);return e?ele():qse()}function qse(){Dv()||fi(!1);let e=y.useContext(tj),{basename:t,future:r,navigator:n}=y.useContext(Ud),{matches:a}=y.useContext(bh),{pathname:i}=js(),o=JSON.stringify(sI(a,r.v7_relativeSplatPath)),l=y.useRef(!1);return bW(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=lI(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Wf([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function nj(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=y.useContext(Ud),{matches:a}=y.useContext(bh),{pathname:i}=js(),o=JSON.stringify(sI(a,n.v7_relativeSplatPath));return y.useMemo(()=>lI(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Use(e,t){return Wse(e,t)}function Wse(e,t,r,n){Dv()||fi(!1);let{navigator:a}=y.useContext(Ud),{matches:i}=y.useContext(bh),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=js(),d;if(t){var f;let v=typeof t=="string"?Iv(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||fi(!1),d=v}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=xse(e,{pathname:m}),p=Yse(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Wf([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Wf([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&p?y.createElement(rj.Provider,{value:{location:s0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ef.Pop}},p):p}function Vse(){let e=Zse(),t=Fse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:a},r):null,i)}const Hse=y.createElement(Vse,null);class Gse extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?y.createElement(bh.Provider,{value:this.props.routeContext},y.createElement(xW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kse(e){let{routeContext:t,match:r,children:n}=e,a=y.useContext(tj);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(bh.Provider,{value:t},n)}function Yse(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);d>=0||fi(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,g=!1,p=null,v=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||Hse,c&&(u<0&&h===0?(tle("route-fallback",!1),g=!0,v=null):u===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=p:g?w=v:f.route.Component?w=y.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,y.createElement(Kse,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?y.createElement(Gse,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var wW=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wW||{}),U2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(U2||{});function Xse(e){let t=y.useContext(tj);return t||fi(!1),t}function Jse(e){let t=y.useContext(yW);return t||fi(!1),t}function Qse(e){let t=y.useContext(bh);return t||fi(!1),t}function SW(e){let t=Qse(),r=t.matches[t.matches.length-1];return r.route.id||fi(!1),r.route.id}function Zse(){var e;let t=y.useContext(xW),r=Jse(U2.UseRouteError),n=SW(U2.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ele(){let{router:e}=Xse(wW.UseNavigateStable),t=SW(U2.UseNavigateStable),r=y.useRef(!1);return bW(()=>{r.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,s0({fromRouteId:t},i)))},[e,t])}const LR={};function tle(e,t,r){!t&&!LR[e]&&(LR[e]=!0)}function rle(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function nle(e){let{to:t,replace:r,state:n,relative:a}=e;Dv()||fi(!1);let{future:i,static:o}=y.useContext(Ud),{matches:l}=y.useContext(bh),{pathname:c}=js(),u=Vc(),d=lI(t,sI(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return y.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function Xi(e){fi(!1)}function ale(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Ef.Pop,navigator:i,static:o=!1,future:l}=e;Dv()&&fi(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:o,future:s0({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Iv(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=n,p=y.useMemo(()=>{let v=qg(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:m,key:g},navigationType:a}},[c,d,f,h,m,g,a]);return p==null?null:y.createElement(Ud.Provider,{value:u},y.createElement(rj.Provider,{children:r,value:p}))}function _W(e){let{children:t,location:r}=e;return Use(eE(t),r)}new Promise(()=>{});function eE(e,t){t===void 0&&(t=[]);let r=[];return y.Children.forEach(e,(n,a)=>{if(!y.isValidElement(n))return;let i=[...t,a];if(n.type===y.Fragment){r.push.apply(r,eE(n.props.children,i));return}n.type!==Xi&&fi(!1),!n.props.index||!n.props.children||fi(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=eE(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W2.apply(this,arguments)}function jW(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ile(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ole(e,t){return e.button===0&&(!t||t==="_self")&&!ile(e)}function tE(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function sle(e,t){let r=tE(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const lle=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cle=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ule="6";try{window.__reactRouterVersion=ule}catch{}const dle=y.createContext({isTransitioning:!1}),fle="startTransition",$R=gT[fle];function hle(e){let{basename:t,children:r,future:n,window:a}=e,i=y.useRef();i.current==null&&(i.current=gse({window:a,v5Compat:!0}));let o=i.current,[l,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=y.useCallback(f=>{u&&$R?$R(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.useEffect(()=>rle(n),[n]),y.createElement(ale,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const mle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ple=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NW=y.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=jW(t,lle),{basename:m}=y.useContext(Ud),g,p=!1;if(typeof u=="string"&&ple.test(u)&&(g=u,mle))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=qg(_.pathname,m);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:p=!0}catch{}let v=zse(u,{relative:a}),x=vle(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function b(w){n&&n(w),w.defaultPrevented||x(w)}return y.createElement("a",W2({},h,{href:g||v,onClick:p||i?n:b,ref:r,target:c}))}),Wh=y.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,f=jW(t,cle),h=nj(c,{relative:f.relative}),m=js(),g=y.useContext(yW),{navigator:p,basename:v}=y.useContext(Ud),x=g!=null&&xle(h)&&u===!0,b=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,w=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(w=w.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&v&&(_=qg(_,v)||_);const j=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let A=w===b||!o&&w.startsWith(b)&&w.charAt(j)==="/",P=_!=null&&(_===b||!o&&_.startsWith(b)&&_.charAt(b.length)==="/"),C={isActive:A,isPending:P,isTransitioning:x},k=A?n:void 0,R;typeof i=="function"?R=i(C):R=[i,A?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let E=typeof l=="function"?l(C):l;return y.createElement(NW,W2({},f,{"aria-current":k,className:R,ref:r,style:E,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var rE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(rE||(rE={}));var FR;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(FR||(FR={}));function gle(e){let t=y.useContext(tj);return t||fi(!1),t}function vle(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Vc(),u=js(),d=nj(e,{relative:o});return y.useCallback(f=>{if(ole(f,r)){f.preventDefault();let h=n!==void 0?n:z2(u)===z2(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}function yle(e){let t=y.useRef(tE(e)),r=y.useRef(!1),n=js(),a=y.useMemo(()=>sle(n.search,r.current?null:t.current),[n.search]),i=Vc(),o=y.useCallback((l,c)=>{const u=tE(typeof l=="function"?l(a):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,o]}function xle(e,t){t===void 0&&(t={});let r=y.useContext(dle);r==null&&fi(!1);let{basename:n}=gle(rE.useViewTransitionState),a=nj(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=qg(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=qg(r.nextLocation.pathname,n)||r.nextLocation.pathname;return q2(a.pathname,o)!=null||q2(a.pathname,i)!=null}function CW(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=CW(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function dn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=CW(e))&&(n&&(n+=" "),n+=t);return n}function ble(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=AW(t))&&(n&&(n+=" "),n+=r);return n}function AW(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=AW(e[n]))&&(r&&(r+=" "),r+=t);return r}var cI="-";function wle(e){var t=_le(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var c=l.split(cI);return c[0]===""&&c.length!==1&&c.shift(),PW(c,t)||Sle(l)}function o(l,c){var u=r[l]||[];return c&&a[l]?[].concat(u,a[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function PW(e,t){if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),a=n?PW(e.slice(1),n):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(cI);return t.validators.find(function(o){var l=o.validator;return l(i)})?.classGroupId}}var BR=/^\[(.+)\]$/;function Sle(e){if(BR.test(e)){var t=BR.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function _le(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},a=Nle(Object.entries(e.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];nE(l,n,o,t)}),n}function nE(e,t,r,n){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:zR(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(jle(a)){nE(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];nE(c,zR(t,l),r,n)})})}function zR(e,t){var r=e;return t.split(cI).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function jle(e){return e.isThemeGetter}function Nle(e,t){return t?e.map(function(r){var n=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):o});return[n,i]}):e}function Cle(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function a(i,o){r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var EW="!";function Ale(e){var t=e.separator||":",r=t.length===1,n=t[0],a=t.length;return function(o){for(var l=[],c=0,u=0,d,f=0;f<o.length;f++){var h=o[f];if(c===0){if(h===n&&(r||o.slice(f,f+a)===t)){l.push(o.slice(u,f)),u=f+a;continue}if(h==="/"){d=f;continue}}h==="["?c++:h==="]"&&c--}var m=l.length===0?o:o.substring(u),g=m.startsWith(EW),p=g?m.substring(1):m,v=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:v}}}function Ple(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var a=n[0]==="[";a?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function Ele(e){return{cache:Cle(e.cacheSize),splitModifiers:Ale(e),...wle(e)}}var kle=/\s+/;function Ole(e,t){var r=t.splitModifiers,n=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(kle).map(function(o){var l=r(o),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,f=l.maybePostfixModifierPosition,h=n(f?d.substring(0,f):d),m=!!f;if(!h){if(!f)return{isTailwindClass:!1,originalClassName:o};if(h=n(d),!h)return{isTailwindClass:!1,originalClassName:o};m=!1}var g=Ple(c).join(":"),p=u?g+EW:g;return{isTailwindClass:!0,modifierId:p,classGroupId:h,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=l+c;return i.has(d)?!1:(i.add(d),a(c,u).forEach(function(f){return i.add(l+f)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Tle(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a,i,o=l;function l(u){var d=t[0],f=t.slice(1),h=f.reduce(function(m,g){return g(m)},d());return n=Ele(h),a=n.cache.get,i=n.cache.set,o=c,c(u)}function c(u){var d=a(u);if(d)return d;var f=Ole(u,n);return i(u,f),f}return function(){return o(ble.apply(null,arguments))}}function Va(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var kW=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ile=/^\d+\/\d+$/,Dle=new Set(["px","full","screen"]),Mle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Lle=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function pc(e){return om(e)||Dle.has(e)||Ile.test(e)||aE(e)}function aE(e){return ap(e,"length",Ule)}function $le(e){return ap(e,"size",OW)}function Fle(e){return ap(e,"position",OW)}function Ble(e){return ap(e,"url",Wle)}function G1(e){return ap(e,"number",om)}function om(e){return!Number.isNaN(Number(e))}function zle(e){return e.endsWith("%")&&om(e.slice(0,-1))}function _y(e){return qR(e)||ap(e,"number",qR)}function Fn(e){return kW.test(e)}function jy(){return!0}function af(e){return Mle.test(e)}function qle(e){return ap(e,"",Vle)}function ap(e,t,r){var n=kW.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function Ule(e){return Rle.test(e)}function OW(){return!1}function Wle(e){return e.startsWith("url(")}function qR(e){return Number.isInteger(Number(e))}function Vle(e){return Lle.test(e)}function Hle(){var e=Va("colors"),t=Va("spacing"),r=Va("blur"),n=Va("brightness"),a=Va("borderColor"),i=Va("borderRadius"),o=Va("borderSpacing"),l=Va("borderWidth"),c=Va("contrast"),u=Va("grayscale"),d=Va("hueRotate"),f=Va("invert"),h=Va("gap"),m=Va("gradientColorStops"),g=Va("gradientColorStopPositions"),p=Va("inset"),v=Va("margin"),x=Va("opacity"),b=Va("padding"),w=Va("saturate"),_=Va("scale"),j=Va("sepia"),A=Va("skew"),P=Va("space"),C=Va("translate"),k=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},E=function(){return["auto",Fn,t]},I=function(){return[Fn,t]},T=function(){return["",pc]},M=function(){return["auto",om,Fn]},z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},V=function(){return["solid","dashed","dotted","double","none"]},W=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},G=function(){return["","0",Fn]},me=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},de=function(){return[om,G1]},L=function(){return[om,Fn]};return{cacheSize:500,theme:{colors:[jy],spacing:[pc],blur:["none","",af,Fn],brightness:de(),borderColor:[e],borderRadius:["none","","full",af,Fn],borderSpacing:I(),borderWidth:T(),contrast:de(),grayscale:G(),hueRotate:L(),invert:G(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[zle,aE],inset:E(),margin:E(),opacity:de(),padding:I(),saturate:de(),scale:de(),sepia:G(),skew:L(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Fn]}],container:["container"],columns:[{columns:[af]}],"break-after":[{"break-after":me()}],"break-before":[{"break-before":me()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(z(),[Fn])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_y]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fn]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",_y]}],"grid-cols":[{"grid-cols":[jy]}],"col-start-end":[{col:["auto",{span:["full",_y]},Fn]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[jy]}],"row-start-end":[{row:["auto",{span:[_y]},Fn]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Fn,t]}],"min-w":[{"min-w":["min","max","fit",Fn,pc]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[af]},af,Fn]}],h:[{h:[Fn,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Fn,pc]}],"max-h":[{"max-h":[Fn,t,"min","max","fit"]}],"font-size":[{text:["base",af,aE]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",G1]}],"font-family":[{font:[jy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Fn]}],"line-clamp":[{"line-clamp":["none",om,G1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fn,pc]}],"list-image":[{"list-image":["none",Fn]}],"list-style-type":[{list:["none","disc","decimal",Fn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(V(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",pc]}],"underline-offset":[{"underline-offset":["auto",Fn,pc]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(z(),[Fle])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$le]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ble]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(V(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:V()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(V())}],"outline-offset":[{"outline-offset":[Fn,pc]}],"outline-w":[{outline:[pc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[pc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",af,qle]}],"shadow-color":[{shadow:[jy]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":W()}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",af,Fn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fn]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",Fn]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[_y,Fn]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fn]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[pc,G1]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Gle=Tle(Hle);function Et(...e){return Gle(dn(e))}const UR=["#3B82F6","#22C55E","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#F43F5E","#10B981","#A855F7","#EAB308"];function Kle(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return Math.abs(t)}function yf(e){if(!e)return"#94A3B8";const t=Kle(String(e))%UR.length;return UR[t]}var Yle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Xle=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ar=(e,t)=>{const r=y.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>y.createElement("svg",{ref:u,...Yle,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${Xle(e)}`,...c},[...t.map(([d,f])=>y.createElement(d,f)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},Dc=ar("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ug=ar("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Jle=ar("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),KC=ar("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),K1=ar("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),uI=ar("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),TW=ar("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),V2=ar("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Qle=ar("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),iE=ar("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Zle=ar("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),dI=ar("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),ece=ar("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),fI=ar("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]),e2=ar("CalendarX",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"10",x2:"14",y1:"14",y2:"18",key:"1g3qc0"}],["line",{x1:"14",x2:"10",y1:"14",y2:"18",key:"1az83m"}]]),gu=ar("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),YC=ar("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Bs=ar("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),hI=ar("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),H2=ar("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),IW=ar("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),aj=ar("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),tce=ar("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),rce=ar("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),Wg=ar("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),sm=ar("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ls=ar("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ms=ar("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Sb=ar("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),_b=ar("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ny=ar("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Gl=ar("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),nce=ar("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),ace=ar("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ice=ar("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),oce=ar("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),sce=ar("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),lce=ar("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),DW=ar("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),cce=ar("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),uce=ar("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),dce=ar("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),MW=ar("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),lm=ar("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Vg=ar("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),fce=ar("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),hce=ar("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),oE=ar("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),mce=ar("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),XC=ar("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),WR=ar("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),VR=ar("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Hg=ar("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Sm=ar("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),HR=ar("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),RW=ar("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),ri=ar("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),pce=ar("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Po=ar("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),sE=ar("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),GR=ar("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),gce=ar("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),lE=ar("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),jb=ar("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),vce=ar("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),KR=ar("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),yce=ar("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),mI=ar("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),xce=ar("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),G2=ar("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Nb=ar("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Cb=ar("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),LW=ar("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),$W=ar("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),bce=ar("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),wce=ar("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),FW=ar("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),cE=ar("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ps=ar("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),BW=ar("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),K2=ar("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Vf=ar("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zW=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ij=y.createContext({}),oj=y.createContext(null),sj=typeof document<"u",pI=sj?y.useLayoutEffect:y.useEffect,qW=y.createContext({strict:!1}),gI=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Sce="framerAppearId",UW="data-"+gI(Sce);function _ce(e,t,r,n){const{visualElement:a}=y.useContext(ij),i=y.useContext(qW),o=y.useContext(oj),l=y.useContext(zW).reducedMotion,c=y.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;y.useInsertionEffect(()=>{u&&u.update(r,o)});const d=y.useRef(!!(r[UW]&&!window.HandoffComplete));return pI(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function og(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function jce(e,t,r){return y.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):og(r)&&(r.current=n))},[t])}function l0(e){return typeof e=="string"||Array.isArray(e)}function lj(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const vI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yI=["initial",...vI];function cj(e){return lj(e.animate)||yI.some(t=>l0(e[t]))}function WW(e){return!!(cj(e)||e.variants)}function Nce(e,t){if(cj(e)){const{initial:r,animate:n}=e;return{initial:r===!1||l0(r)?r:void 0,animate:l0(n)?n:void 0}}return e.inherit!==!1?t:{}}function Cce(e){const{initial:t,animate:r}=Nce(e,y.useContext(ij));return y.useMemo(()=>({initial:t,animate:r}),[YR(t),YR(r)])}function YR(e){return Array.isArray(e)?e.join(" "):e}const XR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},c0={};for(const e in XR)c0[e]={isEnabled:t=>XR[e].some(r=>!!t[r])};function Ace(e){for(const t in e)c0[t]={...c0[t],...e[t]}}const xI=y.createContext({}),VW=y.createContext({}),Pce=Symbol.for("motionComponentSymbol");function Ece({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){e&&Ace(e);function i(l,c){let u;const d={...y.useContext(zW),...l,layoutId:kce(l)},{isStatic:f}=d,h=Cce(l),m=n(l,f);if(!f&&sj){h.visualElement=_ce(a,m,d,t);const g=y.useContext(VW),p=y.useContext(qW).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,p,e,g))}return y.createElement(ij.Provider,{value:h},u&&h.visualElement?y.createElement(u,{visualElement:h.visualElement,...d}):null,r(a,l,jce(m,h.visualElement,c),m,f,h.visualElement))}const o=y.forwardRef(i);return o[Pce]=a,o}function kce({layoutId:e}){const t=y.useContext(xI).id;return t&&e!==void 0?t+"-"+e:e}function Oce(e){function t(n,a={}){return Ece(e(n,a))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,a)=>(r.has(a)||r.set(a,t(a)),r.get(a))})}const Tce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bI(e){return typeof e!="string"||e.includes("-")?!1:!!(Tce.indexOf(e)>-1||/[A-Z]/.test(e))}const Y2={};function Ice(e){Object.assign(Y2,e)}const Ab=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ip=new Set(Ab);function HW(e,{layout:t,layoutId:r}){return ip.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Y2[e]||e==="opacity")}const Gs=e=>!!(e&&e.getVelocity),Dce={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mce=Ab.length;function Rce(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,a){let i="";for(let o=0;o<Mce;o++){const l=Ab[o];if(e[l]!==void 0){const c=Dce[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):r&&n&&(i="none"),i}const GW=e=>t=>typeof t=="string"&&t.startsWith(e),KW=GW("--"),uE=GW("var(--"),Lce=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,$ce=(e,t)=>t&&typeof e=="number"?t.transform(e):e,oh=(e,t,r)=>Math.min(Math.max(r,e),t),op={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},px={...op,transform:e=>oh(0,1,e)},Y1={...op,default:1},gx=e=>Math.round(e*1e5)/1e5,uj=/(-)?([\d]*\.?[\d])+/g,YW=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Fce=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Pb(e){return typeof e=="string"}const Eb=e=>({test:t=>Pb(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ff=Eb("deg"),vu=Eb("%"),tn=Eb("px"),Bce=Eb("vh"),zce=Eb("vw"),JR={...vu,parse:e=>vu.parse(e)/100,transform:e=>vu.transform(e*100)},QR={...op,transform:Math.round},XW={borderWidth:tn,borderTopWidth:tn,borderRightWidth:tn,borderBottomWidth:tn,borderLeftWidth:tn,borderRadius:tn,radius:tn,borderTopLeftRadius:tn,borderTopRightRadius:tn,borderBottomRightRadius:tn,borderBottomLeftRadius:tn,width:tn,maxWidth:tn,height:tn,maxHeight:tn,size:tn,top:tn,right:tn,bottom:tn,left:tn,padding:tn,paddingTop:tn,paddingRight:tn,paddingBottom:tn,paddingLeft:tn,margin:tn,marginTop:tn,marginRight:tn,marginBottom:tn,marginLeft:tn,rotate:ff,rotateX:ff,rotateY:ff,rotateZ:ff,scale:Y1,scaleX:Y1,scaleY:Y1,scaleZ:Y1,skew:ff,skewX:ff,skewY:ff,distance:tn,translateX:tn,translateY:tn,translateZ:tn,x:tn,y:tn,z:tn,perspective:tn,transformPerspective:tn,opacity:px,originX:JR,originY:JR,originZ:tn,zIndex:QR,fillOpacity:px,strokeOpacity:px,numOctaves:QR};function wI(e,t,r,n){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const f in t){const h=t[f];if(KW(f)){i[f]=h;continue}const m=XW[f],g=$ce(h,m);if(ip.has(f)){if(c=!0,o[f]=g,!d)continue;h!==(m.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,l[f]=g):a[f]=g}if(t.transform||(c||n?a.transform=Rce(e.transform,r,d,n):a.transform&&(a.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:m=0}=l;a.transformOrigin=`${f} ${h} ${m}`}}const SI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JW(e,t,r){for(const n in t)!Gs(t[n])&&!HW(n,r)&&(e[n]=t[n])}function qce({transformTemplate:e},t,r){return y.useMemo(()=>{const n=SI();return wI(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Uce(e,t,r){const n=e.style||{},a={};return JW(a,n,e),Object.assign(a,qce(e,t,r)),e.transformValues?e.transformValues(a):a}function Wce(e,t,r){const n={},a=Uce(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const Vce=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function X2(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Vce.has(e)}let QW=e=>!X2(e);function Hce(e){e&&(QW=t=>t.startsWith("on")?!X2(t):e(t))}try{Hce(require("@emotion/is-prop-valid").default)}catch{}function Gce(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(QW(a)||r===!0&&X2(a)||!t&&!X2(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function ZR(e,t,r){return typeof e=="string"?e:tn.transform(t+r*e)}function Kce(e,t,r){const n=ZR(t,e.x,e.width),a=ZR(r,e.y,e.height);return`${n} ${a}`}const Yce={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xce={offset:"strokeDashoffset",array:"strokeDasharray"};function Jce(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?Yce:Xce;e[i.offset]=tn.transform(-n);const o=tn.transform(t),l=tn.transform(r);e[i.array]=`${o} ${l}`}function _I(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,f,h){if(wI(e,u,d,h),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g,dimensions:p}=e;m.transform&&(p&&(g.transform=m.transform),delete m.transform),p&&(a!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=Kce(p,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),o!==void 0&&Jce(m,o,l,c,!1)}const ZW=()=>({...SI(),attrs:{}}),jI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Qce(e,t,r,n){const a=y.useMemo(()=>{const i=ZW();return _I(i,t,{enableHardwareAcceleration:!1},jI(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};JW(i,e.style,e),a.style={...i,...a.style}}return a}function Zce(e=!1){return(r,n,a,{latestValues:i},o)=>{const c=(bI(r)?Qce:Wce)(n,i,o,r),d={...Gce(n,typeof r=="string",e),...c,ref:a},{children:f}=n,h=y.useMemo(()=>Gs(f)?f.get():f,[f]);return y.createElement(r,{...d,children:h})}}function eV(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const tV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rV(e,t,r,n){eV(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(tV.has(a)?a:gI(a),t.attrs[a])}function NI(e,t){const{style:r}=e,n={};for(const a in r)(Gs(r[a])||t.style&&Gs(t.style[a])||HW(a,e))&&(n[a]=r[a]);return n}function nV(e,t){const r=NI(e,t);for(const n in e)if(Gs(e[n])||Gs(t[n])){const a=Ab.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=e[n]}return r}function CI(e,t,r,n={},a={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),t}function aV(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const J2=e=>Array.isArray(e),eue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),tue=e=>J2(e)?e[e.length-1]||0:e;function t2(e){const t=Gs(e)?e.get():e;return eue(t)?t.toValue():t}function rue({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,a,i){const o={latestValues:nue(n,a,i,e),renderState:t()};return r&&(o.mount=l=>r(n,l,o)),o}const iV=e=>(t,r)=>{const n=y.useContext(ij),a=y.useContext(oj),i=()=>rue(e,t,n,a);return r?i():aV(i)};function nue(e,t,r,n){const a={},i=n(e,{});for(const h in i)a[h]=t2(i[h]);let{initial:o,animate:l}=e;const c=cj(e),u=WW(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?l:o;return f&&typeof f!="boolean"&&!lj(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const g=CI(e,m);if(!g)return;const{transitionEnd:p,transition:v,...x}=g;for(const b in x){let w=x[b];if(Array.isArray(w)){const _=d?w.length-1:0;w=w[_]}w!==null&&(a[b]=w)}for(const b in p)a[b]=p[b]}),a}const wi=e=>e;class eL{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function aue(e){let t=new eL,r=new eL,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const f=d&&a,h=f?t:r;return u&&o.add(c),h.add(c)&&f&&a&&(n=t.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(a){i=!0;return}if(a=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),e())}a=!1,i&&(i=!1,l.process(c))}};return l}const X1=["prepare","read","update","preRender","render","postRender"],iue=40;function oue(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=X1.reduce((f,h)=>(f[h]=aue(()=>r=!0),f),{}),o=f=>i[f].process(a),l=()=>{const f=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(f-a.timestamp,iue),1),a.timestamp=f,a.isProcessing=!0,X1.forEach(o),a.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,a.isProcessing||e(l)};return{schedule:X1.reduce((f,h)=>{const m=i[h];return f[h]=(g,p=!1,v=!1)=>(r||c(),m.schedule(g,p,v)),f},{}),cancel:f=>X1.forEach(h=>i[h].cancel(f)),state:a,steps:i}}const{schedule:Fa,cancel:Td,state:Uo,steps:JC}=oue(typeof requestAnimationFrame<"u"?requestAnimationFrame:wi,!0),sue={useVisualState:iV({scrapeMotionValuesFromProps:nV,createRenderState:ZW,onMount:(e,t,{renderState:r,latestValues:n})=>{Fa.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Fa.render(()=>{_I(r,n,{enableHardwareAcceleration:!1},jI(t.tagName),e.transformTemplate),rV(t,r)})}})},lue={useVisualState:iV({scrapeMotionValuesFromProps:NI,createRenderState:SI})};function cue(e,{forwardMotionProps:t=!1},r,n){return{...bI(e)?sue:lue,preloadedFeatures:r,useRender:Zce(t),createVisualElement:n,Component:e}}function cd(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const oV=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function dj(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const uue=e=>t=>oV(t)&&e(t,dj(t));function _d(e,t,r,n){return cd(e,t,uue(r),n)}const due=(e,t)=>r=>t(e(r)),Hf=(...e)=>e.reduce(due);function sV(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const tL=sV("dragHorizontal"),rL=sV("dragVertical");function lV(e){let t=!1;if(e==="y")t=rL();else if(e==="x")t=tL();else{const r=tL(),n=rL();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function cV(){const e=lV(!0);return e?(e(),!1):!0}class wh{constructor(t){this.isMounted=!1,this.node=t}update(){}}function nL(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||cV())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Fa.update(()=>l[n](i,o))};return _d(e.current,r,a,{passive:!e.getProps()[n]})}class fue extends wh{mount(){this.unmount=Hf(nL(this.node,!0),nL(this.node,!1))}unmount(){}}class hue extends wh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hf(cd(this.node.current,"focus",()=>this.onFocus()),cd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const uV=(e,t)=>t?e===t?!0:uV(e,t.parentElement):!1;function QC(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,dj(r))}class mue extends wh{constructor(){super(...arguments),this.removeStartListeners=wi,this.removeEndListeners=wi,this.removeAccessibleListeners=wi,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=_d(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Fa.update(()=>{!f&&!uV(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=_d(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Hf(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||QC("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Fa.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=cd(this.node.current,"keyup",o),QC("down",(l,c)=>{this.startPress(l,c)})},r=cd(this.node.current,"keydown",t),n=()=>{this.isPressing&&QC("cancel",(i,o)=>this.cancelPress(i,o))},a=cd(this.node.current,"blur",n);this.removeAccessibleListeners=Hf(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Fa.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!cV()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Fa.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=_d(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=cd(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Hf(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const dE=new WeakMap,ZC=new WeakMap,pue=e=>{const t=dE.get(e.target);t&&t(e)},gue=e=>{e.forEach(pue)};function vue({root:e,...t}){const r=e||document;ZC.has(r)||ZC.set(r,{});const n=ZC.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(gue,{root:e,...t})),n[a]}function yue(e,t,r){const n=vue(t);return dE.set(e,r),n.observe(e),()=>{dE.delete(e),n.unobserve(e)}}const xue={some:0,all:1};class bue extends wh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:xue[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return yue(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(wue(t,r))&&this.startObserver()}unmount(){}}function wue({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Sue={inView:{Feature:bue},tap:{Feature:mue},focus:{Feature:hue},hover:{Feature:fue}};function dV(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function _ue(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function jue(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function fj(e,t,r){const n=e.getProps();return CI(n,t,r!==void 0?r:n.custom,_ue(e),jue(e))}let Nue=wi,AI=wi;const Gf=e=>e*1e3,jd=e=>e/1e3,Cue={current:!1},fV=e=>Array.isArray(e)&&typeof e[0]=="number";function hV(e){return!!(!e||typeof e=="string"&&mV[e]||fV(e)||Array.isArray(e)&&e.every(hV))}const Zy=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,mV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zy([0,.65,.55,1]),circOut:Zy([.55,0,1,.45]),backIn:Zy([.31,.01,.66,-.59]),backOut:Zy([.33,1.53,.69,.99])};function pV(e){if(e)return fV(e)?Zy(e):Array.isArray(e)?e.map(pV):mV[e]}function Aue(e,t,r,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=pV(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Pue(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const gV=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Eue=1e-7,kue=12;function Oue(e,t,r,n,a){let i,o,l=0;do o=t+(r-t)/2,i=gV(o,n,a)-e,i>0?r=o:t=o;while(Math.abs(i)>Eue&&++l<kue);return o}function kb(e,t,r,n){if(e===t&&r===n)return wi;const a=i=>Oue(i,0,1,e,r);return i=>i===0||i===1?i:gV(a(i),t,n)}const Tue=kb(.42,0,1,1),Iue=kb(0,0,.58,1),vV=kb(.42,0,.58,1),Due=e=>Array.isArray(e)&&typeof e[0]!="number",yV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xV=e=>t=>1-e(1-t),PI=e=>1-Math.sin(Math.acos(e)),bV=xV(PI),Mue=yV(PI),wV=kb(.33,1.53,.69,.99),EI=xV(wV),Rue=yV(EI),Lue=e=>(e*=2)<1?.5*EI(e):.5*(2-Math.pow(2,-10*(e-1))),$ue={linear:wi,easeIn:Tue,easeInOut:vV,easeOut:Iue,circIn:PI,circInOut:Mue,circOut:bV,backIn:EI,backInOut:Rue,backOut:wV,anticipate:Lue},aL=e=>{if(Array.isArray(e)){AI(e.length===4);const[t,r,n,a]=e;return kb(t,r,n,a)}else if(typeof e=="string")return $ue[e];return e},kI=(e,t)=>r=>!!(Pb(r)&&Fce.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),SV=(e,t,r)=>n=>{if(!Pb(n))return n;const[a,i,o,l]=n.match(uj);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Fue=e=>oh(0,255,e),e5={...op,transform:e=>Math.round(Fue(e))},cm={test:kI("rgb","red"),parse:SV("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+e5.transform(e)+", "+e5.transform(t)+", "+e5.transform(r)+", "+gx(px.transform(n))+")"};function Bue(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const fE={test:kI("#"),parse:Bue,transform:cm.transform},sg={test:kI("hsl","hue"),parse:SV("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+vu.transform(gx(t))+", "+vu.transform(gx(r))+", "+gx(px.transform(n))+")"},fs={test:e=>cm.test(e)||fE.test(e)||sg.test(e),parse:e=>cm.test(e)?cm.parse(e):sg.test(e)?sg.parse(e):fE.parse(e),transform:e=>Pb(e)?e:e.hasOwnProperty("red")?cm.transform(e):sg.transform(e)},ui=(e,t,r)=>-r*e+r*t+e;function t5(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function zue({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=t5(c,l,e+1/3),i=t5(c,l,e),o=t5(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const r5=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},que=[fE,cm,sg],Uue=e=>que.find(t=>t.test(e));function iL(e){const t=Uue(e);let r=t.parse(e);return t===sg&&(r=zue(r)),r}const _V=(e,t)=>{const r=iL(e),n=iL(t),a={...r};return i=>(a.red=r5(r.red,n.red,i),a.green=r5(r.green,n.green,i),a.blue=r5(r.blue,n.blue,i),a.alpha=ui(r.alpha,n.alpha,i),cm.transform(a))};function Wue(e){var t,r;return isNaN(e)&&Pb(e)&&(((t=e.match(uj))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(YW))===null||r===void 0?void 0:r.length)||0)>0}const jV={regex:Lce,countKey:"Vars",token:"${v}",parse:wi},NV={regex:YW,countKey:"Colors",token:"${c}",parse:fs.parse},CV={regex:uj,countKey:"Numbers",token:"${n}",parse:op.parse};function n5(e,{regex:t,countKey:r,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function Q2(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&n5(r,jV),n5(r,NV),n5(r,CV),r}function AV(e){return Q2(e).values}function PV(e){const{values:t,numColors:r,numVars:n,tokenised:a}=Q2(e),i=t.length;return o=>{let l=a;for(let c=0;c<i;c++)c<n?l=l.replace(jV.token,o[c]):c<n+r?l=l.replace(NV.token,fs.transform(o[c])):l=l.replace(CV.token,gx(o[c]));return l}}const Vue=e=>typeof e=="number"?0:e;function Hue(e){const t=AV(e);return PV(e)(t.map(Vue))}const sh={test:Wue,parse:AV,createTransformer:PV,getAnimatableNone:Hue},EV=(e,t)=>r=>`${r>0?t:e}`;function kV(e,t){return typeof e=="number"?r=>ui(e,t,r):fs.test(e)?_V(e,t):e.startsWith("var(")?EV(e,t):TV(e,t)}const OV=(e,t)=>{const r=[...e],n=r.length,a=e.map((i,o)=>kV(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}},Gue=(e,t)=>{const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=kV(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},TV=(e,t)=>{const r=sh.createTransformer(t),n=Q2(e),a=Q2(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?Hf(OV(n.values,a.values),r):EV(e,t)},u0=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},oL=(e,t)=>r=>ui(e,t,r);function Kue(e){return typeof e=="number"?oL:typeof e=="string"?fs.test(e)?_V:TV:Array.isArray(e)?OV:typeof e=="object"?Gue:oL}function Yue(e,t,r){const n=[],a=r||Kue(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||wi:t;l=Hf(c,l)}n.push(l)}return n}function IV(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(AI(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Yue(t,n,a),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=u0(e[d],e[d+1],u);return o[d](f)};return r?u=>c(oh(e[0],e[i-1],u)):c}function Xue(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=u0(0,t,n);e.push(ui(r,1,a))}}function Jue(e){const t=[0];return Xue(t,e.length-1),t}function Que(e,t){return e.map(r=>r*t)}function Zue(e,t){return e.map(()=>t||vV).splice(0,e.length-1)}function Z2({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=Due(n)?n.map(aL):aL(n),i={done:!1,value:t[0]},o=Que(r&&r.length===t.length?r:Jue(t),e),l=IV(o,t,{ease:Array.isArray(a)?a:Zue(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function DV(e,t){return t?e*(1e3/t):0}const ede=5;function MV(e,t,r){const n=Math.max(t-ede,0);return DV(r-e(n),t-n)}const a5=.001,tde=.01,sL=10,rde=.05,nde=1;function ade({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let a,i;Nue(e<=Gf(sL));let o=1-t;o=oh(rde,nde,o),e=oh(tde,sL,jd(e)),o<1?(a=u=>{const d=u*o,f=d*e,h=d-r,m=hE(u,o),g=Math.exp(-f);return a5-h/m*g},i=u=>{const f=u*o*e,h=f*r+r,m=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-f),p=hE(Math.pow(u,2),o);return(-a(u)+a5>0?-1:1)*((h-m)*g)/p}):(a=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-a5+d*f},i=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=ode(a,i,l);if(e=Gf(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const ide=12;function ode(e,t,r){let n=r;for(let a=1;a<ide;a++)n=n-e(n)/t(n);return n}function hE(e,t){return e*Math.sqrt(1-t*t)}const sde=["duration","bounce"],lde=["stiffness","damping","mass"];function lL(e,t){return t.some(r=>e[r]!==void 0)}function cde(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!lL(e,lde)&&lL(e,sde)){const r=ade(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function RV({keyframes:e,restDelta:t,restSpeed:r,...n}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=cde({...n,velocity:-jd(n.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*u)),p=i-a,v=jd(Math.sqrt(l/u)),x=Math.abs(p)<5;r||(r=x?.01:2),t||(t=x?.005:.5);let b;if(g<1){const w=hE(v,g);b=_=>{const j=Math.exp(-g*v*_);return i-j*((m+g*v*p)/w*Math.sin(w*_)+p*Math.cos(w*_))}}else if(g===1)b=w=>i-Math.exp(-v*w)*(p+(m+v*p)*w);else{const w=v*Math.sqrt(g*g-1);b=_=>{const j=Math.exp(-g*v*_),A=Math.min(w*_,300);return i-j*((m+g*v*p)*Math.sinh(A)+w*p*Math.cosh(A))/w}}return{calculatedDuration:h&&d||null,next:w=>{const _=b(w);if(h)o.done=w>=d;else{let j=m;w!==0&&(g<1?j=MV(b,w,_):j=0);const A=Math.abs(j)<=r,P=Math.abs(i-_)<=t;o.done=A&&P}return o.value=o.done?i:_,o}}}function cL({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,g=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let p=r*t;const v=f+p,x=o===void 0?v:o(v);x!==v&&(p=x-f);const b=C=>-p*Math.exp(-C/n),w=C=>x+b(C),_=C=>{const k=b(C),R=w(C);h.done=Math.abs(k)<=u,h.value=h.done?x:R};let j,A;const P=C=>{m(h.value)&&(j=C,A=RV({keyframes:[h.value,g(h.value)],velocity:MV(w,C,h.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:C=>{let k=!1;return!A&&j===void 0&&(k=!0,_(C),P(C)),j!==void 0&&C>j?A.next(C-j):(!k&&_(C),h)}}}const ude=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Fa.update(t,!0),stop:()=>Td(t),now:()=>Uo.isProcessing?Uo.timestamp:performance.now()}},uL=2e4;function dL(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<uL;)t+=r,n=e.next(t);return t>=uL?1/0:t}const dde={decay:cL,inertia:cL,tween:Z2,keyframes:Z2,spring:RV};function eS({autoplay:e=!0,delay:t=0,driver:r=ude,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...h}){let m=1,g=!1,p,v;const x=()=>{v=new Promise(de=>{p=de})};x();let b;const w=dde[a]||Z2;let _;w!==Z2&&typeof n[0]!="number"&&(_=IV([0,100],n,{clamp:!1}),n=[0,100]);const j=w({...h,keyframes:n});let A;l==="mirror"&&(A=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let P="idle",C=null,k=null,R=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=dL(j));const{calculatedDuration:E}=j;let I=1/0,T=1/0;E!==null&&(I=E+o,T=I*(i+1)-o);let M=0;const z=de=>{if(k===null)return;m>0&&(k=Math.min(k,de)),m<0&&(k=Math.min(de-T/m,k)),C!==null?M=C:M=Math.round(de-k)*m;const L=M-t*(m>=0?1:-1),B=m>=0?L<0:L>T;M=Math.max(L,0),P==="finished"&&C===null&&(M=T);let J=M,q=j;if(i){const te=Math.min(M,T)/I;let ve=Math.floor(te),Ce=te%1;!Ce&&te>=1&&(Ce=1),Ce===1&&ve--,ve=Math.min(ve,i+1),!!(ve%2)&&(l==="reverse"?(Ce=1-Ce,o&&(Ce-=o/I)):l==="mirror"&&(q=A)),J=oh(0,1,Ce)*I}const X=B?{done:!1,value:n[0]}:q.next(J);_&&(X.value=_(X.value));let{done:Z}=X;!B&&E!==null&&(Z=m>=0?M>=T:M<=0);const pe=C===null&&(P==="finished"||P==="running"&&Z);return f&&f(X.value),pe&&$(),X},V=()=>{b&&b.stop(),b=void 0},W=()=>{P="idle",V(),p(),x(),k=R=null},$=()=>{P="finished",d&&d(),V(),p()},G=()=>{if(g)return;b||(b=r(z));const de=b.now();c&&c(),C!==null?k=de-C:(!k||P==="finished")&&(k=de),P==="finished"&&x(),R=k,C=null,P="running",b.start()};e&&G();const me={then(de,L){return v.then(de,L)},get time(){return jd(M)},set time(de){de=Gf(de),M=de,C!==null||!b||m===0?C=de:k=b.now()-de/m},get duration(){const de=j.calculatedDuration===null?dL(j):j.calculatedDuration;return jd(de)},get speed(){return m},set speed(de){de===m||!b||(m=de,me.time=jd(M))},get state(){return P},play:G,pause:()=>{P="paused",C=M},stop:()=>{g=!0,P!=="idle"&&(P="idle",u&&u(),W())},cancel:()=>{R!==null&&z(R),W()},complete:()=>{P="finished"},sample:de=>(k=0,z(de))};return me}function fde(e){let t;return()=>(t===void 0&&(t=e()),t)}const hde=fde(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mde=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),J1=10,pde=2e4,gde=(e,t)=>t.type==="spring"||e==="backgroundColor"||!hV(t.ease);function vde(e,t,{onUpdate:r,onComplete:n,...a}){if(!(hde()&&mde.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:f,duration:h=300,ease:m,times:g}=a;if(gde(t,a)){const w=eS({...a,repeat:0,delay:0});let _={done:!1,value:f[0]};const j=[];let A=0;for(;!_.done&&A<pde;)_=w.sample(A),j.push(_.value),A+=J1;g=void 0,f=j,h=A-J1,m="linear"}const p=Aue(e.owner.current,t,f,{...a,duration:h,ease:m,times:g}),v=()=>{u=!1,p.cancel()},x=()=>{u=!0,Fa.update(v),l(),d()};return p.onfinish=()=>{u||(e.set(Pue(f,a)),n&&n(),x())},{then(w,_){return c.then(w,_)},attachTimeline(w){return p.timeline=w,p.onfinish=null,wi},get time(){return jd(p.currentTime||0)},set time(w){p.currentTime=Gf(w)},get speed(){return p.playbackRate},set speed(w){p.playbackRate=w},get duration(){return jd(h)},play:()=>{o||(p.play(),Td(v))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:w}=p;if(w){const _=eS({...a,autoplay:!1});e.setWithVelocity(_.sample(w-J1).value,_.sample(w).value,J1)}x()},complete:()=>{u||p.finish()},cancel:x}}function yde({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const a=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:wi,pause:wi,stop:wi,then:i=>(i(),Promise.resolve()),cancel:wi,complete:wi});return t?eS({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const xde={type:"spring",stiffness:500,damping:25,restSpeed:10},bde=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),wde={type:"keyframes",duration:.8},Sde={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_de=(e,{keyframes:t})=>t.length>2?wde:ip.has(e)?e.startsWith("scale")?bde(t[1]):xde:Sde,mE=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sh.test(t)||t==="0")&&!t.startsWith("url(")),jde=new Set(["brightness","contrast","saturate","opacity"]);function Nde(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(uj)||[];if(!n)return e;const a=r.replace(n,"");let i=jde.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const Cde=/([a-z-]*)\(.*?\)/g,pE={...sh,getAnimatableNone:e=>{const t=e.match(Cde);return t?t.map(Nde).join(" "):e}},Ade={...XW,color:fs,backgroundColor:fs,outlineColor:fs,fill:fs,stroke:fs,borderColor:fs,borderTopColor:fs,borderRightColor:fs,borderBottomColor:fs,borderLeftColor:fs,filter:pE,WebkitFilter:pE},OI=e=>Ade[e];function LV(e,t){let r=OI(e);return r!==pE&&(r=sh),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const $V=e=>/^0[^.\s]+$/.test(e);function Pde(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||$V(e)}function Ede(e,t,r,n){const a=mE(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Pde(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(a&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=LV(t,l)}return i}function kde({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function TI(e,t){return e[t]||e.default||e}const Ode={skipAnimations:!1},II=(e,t,r,n={})=>a=>{const i=TI(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Gf(o);const c=Ede(t,e,r,i),u=c[0],d=c[c.length-1],f=mE(e,u),h=mE(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(kde(i)||(m={...m,..._de(e,m)}),m.duration&&(m.duration=Gf(m.duration)),m.repeatDelay&&(m.repeatDelay=Gf(m.repeatDelay)),!f||!h||Cue.current||i.type===!1||Ode.skipAnimations)return yde(m);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=vde(t,e,m);if(g)return g}return eS(m)};function tS(e){return!!(Gs(e)&&e.add)}const FV=e=>/^\-?\d*\.?\d+$/.test(e);function DI(e,t){e.indexOf(t)===-1&&e.push(t)}function MI(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class RI{constructor(){this.subscriptions=[]}add(t){return DI(this.subscriptions,t),()=>MI(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Tde=e=>!isNaN(parseFloat(e));class Ide{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=Uo;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Fa.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Fa.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Tde(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new RI);const n=this.events[t].add(r);return t==="change"?()=>{n(),Fa.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?DV(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gg(e,t){return new Ide(e,t)}const BV=e=>t=>t.test(e),Dde={test:e=>e==="auto",parse:e=>e},zV=[op,tn,vu,ff,zce,Bce,Dde],Cy=e=>zV.find(BV(e)),Mde=[...zV,fs,sh],Rde=e=>Mde.find(BV(e));function Lde(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Gg(r))}function $de(e,t){const r=fj(e,t);let{transitionEnd:n={},transition:a={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=tue(i[o]);Lde(e,o,l)}}function Fde(e,t,r){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(a=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&a!==void 0?a:t[c]),d!=null&&(typeof d=="string"&&(FV(d)||$V(d))?d=parseFloat(d):!Rde(d)&&sh.test(u)&&(d=LV(c,u)),e.addValue(c,Gg(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function Bde(e,t){return t?(t[e]||t.default||t).from:void 0}function zde(e,t,r){const n={};for(const a in e){const i=Bde(a,t);if(i!==void 0)n[a]=i;else{const o=r.getValue(a);o&&(n[a]=o.get())}}return n}function qde({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function Ude(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function qV(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const f in l){const h=e.getValue(f),m=l[f];if(!h||m===void 0||d&&qde(d,f))continue;const g={delay:r,elapsed:0,...TI(i||{},f)};if(window.HandoffAppearAnimations){const x=e.getProps()[UW];if(x){const b=window.HandoffAppearAnimations(x,f,h,Fa);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let p=!g.isHandoff&&!Ude(h,m);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(p=!1),h.animation&&(p=!1),p)continue;h.start(II(f,h,m,e.shouldReduceMotion&&ip.has(f)?{type:!1}:g));const v=h.animation;tS(c)&&(c.add(f),v.then(()=>c.remove(f))),u.push(v)}return o&&Promise.all(u).then(()=>{o&&$de(e,o)}),u}function gE(e,t,r={}){const n=fj(e,t,r.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(qV(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=a;return Wde(e,t,u+c,d,f,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function Wde(e,t,r=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(Vde).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(gE(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Vde(e,t){return e.sortNodePosition(t)}function Hde(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>gE(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=gE(e,t,r);else{const a=typeof t=="function"?fj(e,t,r.custom):t;n=Promise.all(qV(e,a,r))}return n.then(()=>e.notify("AnimationComplete",t))}const Gde=[...vI].reverse(),Kde=vI.length;function Yde(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Hde(e,r,n)))}function Xde(e){let t=Yde(e);const r=Qde();let n=!0;const a=(c,u)=>{const d=fj(e,u);if(d){const{transition:f,transitionEnd:h,...m}=d;c={...c,...m,...h}}return c};function i(c){t=c(e)}function o(c,u){const d=e.getProps(),f=e.getVariantContext(!0)||{},h=[],m=new Set;let g={},p=1/0;for(let x=0;x<Kde;x++){const b=Gde[x],w=r[b],_=d[b]!==void 0?d[b]:f[b],j=l0(_),A=b===u?w.isActive:null;A===!1&&(p=x);let P=_===f[b]&&_!==d[b]&&j;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...g},!w.isActive&&A===null||!_&&!w.prevProp||lj(_)||typeof _=="boolean")continue;let k=Jde(w.prevProp,_)||b===u&&w.isActive&&!P&&j||x>p&&j,R=!1;const E=Array.isArray(_)?_:[_];let I=E.reduce(a,{});A===!1&&(I={});const{prevResolvedValues:T={}}=w,M={...T,...I},z=V=>{k=!0,m.has(V)&&(R=!0,m.delete(V)),w.needsAnimating[V]=!0};for(const V in M){const W=I[V],$=T[V];if(g.hasOwnProperty(V))continue;let G=!1;J2(W)&&J2($)?G=!dV(W,$):G=W!==$,G?W!==void 0?z(V):m.add(V):W!==void 0&&m.has(V)?z(V):w.protectedKeys[V]=!0}w.prevProp=_,w.prevResolvedValues=I,w.isActive&&(g={...g,...I}),n&&e.blockInitialAnimation&&(k=!1),k&&(!P||R)&&h.push(...E.map(V=>({animation:V,options:{type:b,...c}})))}if(m.size){const x={};m.forEach(b=>{const w=e.getBaseTarget(b);w!==void 0&&(x[b]=w)}),h.push({animation:x})}let v=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(h):Promise.resolve()}function l(c,u,d){var f;if(r[c].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const h=o(d,c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function Jde(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dV(t,e):!1}function Dh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qde(){return{animate:Dh(!0),whileInView:Dh(),whileHover:Dh(),whileTap:Dh(),whileDrag:Dh(),whileFocus:Dh(),exit:Dh()}}class Zde extends wh{constructor(t){super(t),t.animationState||(t.animationState=Xde(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),lj(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let efe=0;class tfe extends wh{constructor(){super(...arguments),this.id=efe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const rfe={animation:{Feature:Zde},exit:{Feature:tfe}},fL=(e,t)=>Math.abs(e-t);function nfe(e,t){const r=fL(e.x,t.x),n=fL(e.y,t.y);return Math.sqrt(r**2+n**2)}class UV{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=o5(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=nfe(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=f,{timestamp:p}=Uo;this.history.push({...g,timestamp:p});const{onStart:v,onMove:x}=this.handlers;h||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=i5(h,this.transformPagePoint),Fa.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=o5(f.type==="pointercancel"?this.lastMoveEventInfo:i5(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,v),g&&g(f,v)},!oV(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=dj(t),l=i5(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Uo;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,o5(l,this.history)),this.removeListeners=Hf(_d(this.contextWindow,"pointermove",this.handlePointerMove),_d(this.contextWindow,"pointerup",this.handlePointerUp),_d(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Td(this.updatePoint)}}function i5(e,t){return t?{point:t(e.point)}:e}function hL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function o5({point:e},t){return{point:e,delta:hL(e,WV(t)),offset:hL(e,afe(t)),velocity:ife(t,.1)}}function afe(e){return e[0]}function WV(e){return e[e.length-1]}function ife(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=WV(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>Gf(t)));)r--;if(!n)return{x:0,y:0};const i=jd(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Cl(e){return e.max-e.min}function vE(e,t=0,r=.01){return Math.abs(e-t)<=r}function mL(e,t,r,n=.5){e.origin=n,e.originPoint=ui(t.min,t.max,e.origin),e.scale=Cl(r)/Cl(t),(vE(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ui(r.min,r.max,e.origin)-e.originPoint,(vE(e.translate)||isNaN(e.translate))&&(e.translate=0)}function vx(e,t,r,n){mL(e.x,t.x,r.x,n?n.originX:void 0),mL(e.y,t.y,r.y,n?n.originY:void 0)}function pL(e,t,r){e.min=r.min+t.min,e.max=e.min+Cl(t)}function ofe(e,t,r){pL(e.x,t.x,r.x),pL(e.y,t.y,r.y)}function gL(e,t,r){e.min=t.min-r.min,e.max=e.min+Cl(t)}function yx(e,t,r){gL(e.x,t.x,r.x),gL(e.y,t.y,r.y)}function sfe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ui(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ui(r,e,n.max):Math.min(e,r)),e}function vL(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function lfe(e,{top:t,left:r,bottom:n,right:a}){return{x:vL(e.x,r,a),y:vL(e.y,t,n)}}function yL(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function cfe(e,t){return{x:yL(e.x,t.x),y:yL(e.y,t.y)}}function ufe(e,t){let r=.5;const n=Cl(e),a=Cl(t);return a>n?r=u0(t.min,t.max-n,e.min):n>a&&(r=u0(e.min,e.max-a,t.min)),oh(0,1,r)}function dfe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const yE=.35;function ffe(e=yE){return e===!1?e=0:e===!0&&(e=yE),{x:xL(e,"left","right"),y:xL(e,"top","bottom")}}function xL(e,t,r){return{min:bL(e,t),max:bL(e,r)}}function bL(e,t){return typeof e=="number"?e:e[t]||0}const wL=()=>({translate:0,scale:1,origin:0,originPoint:0}),lg=()=>({x:wL(),y:wL()}),SL=()=>({min:0,max:0}),Di=()=>({x:SL(),y:SL()});function Bl(e){return[e("x"),e("y")]}function VV({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function hfe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mfe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function s5(e){return e===void 0||e===1}function xE({scale:e,scaleX:t,scaleY:r}){return!s5(e)||!s5(t)||!s5(r)}function Vh(e){return xE(e)||HV(e)||e.z||e.rotate||e.rotateX||e.rotateY}function HV(e){return _L(e.x)||_L(e.y)}function _L(e){return e&&e!=="0%"}function rS(e,t,r){const n=e-r,a=t*n;return r+a}function jL(e,t,r,n,a){return a!==void 0&&(e=rS(e,a,n)),rS(e,r,n)+t}function bE(e,t=0,r=1,n,a){e.min=jL(e.min,t,r,n,a),e.max=jL(e.max,t,r,n,a)}function GV(e,{x:t,y:r}){bE(e.x,t.translate,t.scale,t.originPoint),bE(e.y,r.translate,r.scale,r.originPoint)}function pfe(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&cg(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,GV(e,o)),n&&Vh(i.latestValues)&&cg(e,i.latestValues))}t.x=NL(t.x),t.y=NL(t.y)}function NL(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function xf(e,t){e.min=e.min+t,e.max=e.max+t}function CL(e,t,[r,n,a]){const i=t[a]!==void 0?t[a]:.5,o=ui(e.min,e.max,i);bE(e,t[r],t[n],o,t.scale)}const gfe=["x","scaleX","originX"],vfe=["y","scaleY","originY"];function cg(e,t){CL(e.x,t,gfe),CL(e.y,t,vfe)}function KV(e,t){return VV(mfe(e.getBoundingClientRect(),t))}function yfe(e,t,r){const n=KV(e,r),{scroll:a}=t;return a&&(xf(n.x,a.offset.x),xf(n.y,a.offset.y)),n}const YV=({current:e})=>e?e.ownerDocument.defaultView:null,xfe=new WeakMap;class bfe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Di(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(dj(d,"page").point)},i=(d,f)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=lV(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bl(v=>{let x=this.getAxisMotionValue(v).get()||0;if(vu.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[v];w&&(x=Cl(w)*(parseFloat(x)/100))}}this.originPoint[v]=x}),g&&Fa.update(()=>g(d,f),!1,!0);const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:v}=f;if(m&&this.currentDirection===null){this.currentDirection=wfe(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),p&&p(d,f)},l=(d,f)=>this.stop(d,f),c=()=>Bl(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new UV(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:YV(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Fa.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!Q1(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=sfe(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&og(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=lfe(a.layoutBox,r):this.constraints=!1,this.elastic=ffe(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Bl(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=dfe(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!og(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=yfe(n,a.root,this.visualElement.getTransformPagePoint());let o=cfe(a.layout.layoutBox,i);if(r){const l=r(hfe(o));this.hasMutatedConstraints=!!l,l&&(o=VV(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Bl(d=>{if(!Q1(d,r,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const h=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(II(t,n,0,r))}stopAnimation(){Bl(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Bl(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Bl(r=>{const{drag:n}=this.getProps();if(!Q1(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-ui(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!og(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Bl(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();a[o]=ufe({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Bl(o=>{if(!Q1(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ui(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;xfe.set(this.visualElement,this);const t=this.visualElement.current,r=_d(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();og(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=cd(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Bl(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=yE,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Q1(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function wfe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Sfe extends wh{constructor(t){super(t),this.removeGroupControls=wi,this.removeListeners=wi,this.controls=new bfe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wi}unmount(){this.removeGroupControls(),this.removeListeners()}}const AL=e=>(t,r)=>{e&&Fa.update(()=>e(t,r))};class _fe extends wh{constructor(){super(...arguments),this.removePointerDownListener=wi}onPointerDown(t){this.session=new UV(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YV(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:AL(t),onStart:AL(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Fa.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=_d(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jfe(){const e=y.useContext(oj);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,a=y.useId();return y.useEffect(()=>n(a),[]),!t&&r?[!1,()=>r&&r(a)]:[!0]}const r2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ay={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(tn.test(e))e=parseFloat(e);else return e;const r=PL(e,t.target.x),n=PL(e,t.target.y);return`${r}% ${n}%`}},Nfe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=sh.parse(e);if(a.length>5)return n;const i=sh.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const u=ui(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),i(a)}};class Cfe extends se.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;Ice(Afe),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),r2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Fa.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function XV(e){const[t,r]=jfe(),n=y.useContext(xI);return se.createElement(Cfe,{...e,layoutGroup:n,switchLayoutGroup:y.useContext(VW),isPresent:t,safeToRemove:r})}const Afe={borderRadius:{...Ay,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ay,borderTopRightRadius:Ay,borderBottomLeftRadius:Ay,borderBottomRightRadius:Ay,boxShadow:Nfe},JV=["TopLeft","TopRight","BottomLeft","BottomRight"],Pfe=JV.length,EL=e=>typeof e=="string"?parseFloat(e):e,kL=e=>typeof e=="number"||tn.test(e);function Efe(e,t,r,n,a,i){a?(e.opacity=ui(0,r.opacity!==void 0?r.opacity:1,kfe(n)),e.opacityExit=ui(t.opacity!==void 0?t.opacity:1,0,Ofe(n))):i&&(e.opacity=ui(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<Pfe;o++){const l=`border${JV[o]}Radius`;let c=OL(t,l),u=OL(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||kL(c)===kL(u)?(e[l]=Math.max(ui(EL(c),EL(u),n),0),(vu.test(u)||vu.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=ui(t.rotate||0,r.rotate||0,n))}function OL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kfe=QV(0,.5,bV),Ofe=QV(.5,.95,wi);function QV(e,t,r){return n=>n<e?0:n>t?1:r(u0(e,t,n))}function TL(e,t){e.min=t.min,e.max=t.max}function Ml(e,t){TL(e.x,t.x),TL(e.y,t.y)}function IL(e,t,r,n,a){return e-=t,e=rS(e,1/r,n),a!==void 0&&(e=rS(e,1/a,n)),e}function Tfe(e,t=0,r=1,n=.5,a,i=e,o=e){if(vu.test(t)&&(t=parseFloat(t),t=ui(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ui(i.min,i.max,n);e===i&&(l-=t),e.min=IL(e.min,t,r,l,a),e.max=IL(e.max,t,r,l,a)}function DL(e,t,[r,n,a],i,o){Tfe(e,t[r],t[n],t[a],t.scale,i,o)}const Ife=["x","scaleX","originX"],Dfe=["y","scaleY","originY"];function ML(e,t,r,n){DL(e.x,t,Ife,r?r.x:void 0,n?n.x:void 0),DL(e.y,t,Dfe,r?r.y:void 0,n?n.y:void 0)}function RL(e){return e.translate===0&&e.scale===1}function ZV(e){return RL(e.x)&&RL(e.y)}function Mfe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function eH(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function LL(e){return Cl(e.x)/Cl(e.y)}class Rfe{constructor(){this.members=[]}add(t){DI(this.members,t),t.scheduleRender()}remove(t){if(MI(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $L(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Lfe=(e,t)=>e.depth-t.depth;class $fe{constructor(){this.children=[],this.isDirty=!1}add(t){DI(this.children,t),this.isDirty=!0}remove(t){MI(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Lfe),this.isDirty=!1,this.children.forEach(t)}}function Ffe(e,t){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(Td(n),e(i-t))};return Fa.read(n,!0),()=>Td(n)}function Bfe(e){window.MotionDebug&&window.MotionDebug.record(e)}function zfe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function qfe(e,t,r){const n=Gs(e)?e:Gg(e);return n.start(II("",n,t,r)),n.animation}const FL=["","X","Y","Z"],Ufe={visibility:"hidden"},BL=1e3;let Wfe=0;const Hh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function tH({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t?.()){this.id=Wfe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hh.totalNodes=Hh.resolvedTargetDeltas=Hh.recalculatedProjection=0,this.nodes.forEach(Gfe),this.nodes.forEach(Qfe),this.nodes.forEach(Zfe),this.nodes.forEach(Kfe),Bfe(Hh)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new $fe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new RI),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zfe(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Ffe(h,250),r2.hasAnimatedSinceResize&&(r2.hasAnimatedSinceResize=!1,this.nodes.forEach(qL))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||d.getDefaultTransition()||ahe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=d.getProps(),b=!this.targetLayout||!eH(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const _={...TI(p,"layout"),onPlay:v,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||qL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Td(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ehe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zL);return}this.isUpdating||this.nodes.forEach(Xfe),this.isUpdating=!1,this.nodes.forEach(Jfe),this.nodes.forEach(Vfe),this.nodes.forEach(Hfe),this.clearAllSnapshots();const l=performance.now();Uo.delta=oh(0,1e3/60,l-Uo.timestamp),Uo.timestamp=l,Uo.isProcessing=!0,JC.update.process(Uo),JC.preRender.process(Uo),JC.render.process(Uo),Uo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Yfe),this.sharedNodes.forEach(the)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Di(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!ZV(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Vh(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),ihe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Di();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(xf(l.x,c.offset.x),xf(l.y,c.offset.y)),l}removeElementScroll(o){const l=Di();Ml(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){Ml(l,o);const{scroll:h}=this.root;h&&(xf(l.x,-h.offset.x),xf(l.y,-h.offset.y))}xf(l.x,d.offset.x),xf(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=Di();Ml(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&cg(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Vh(d.latestValues)&&cg(c,d.latestValues)}return Vh(this.latestValues)&&cg(c,this.latestValues),c}removeTransform(o){const l=Di();Ml(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Vh(u.latestValues))continue;xE(u.latestValues)&&u.updateSnapshot();const d=Di(),f=u.measurePageBox();Ml(d,f),ML(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Vh(this.latestValues)&&ML(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Uo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Uo.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Di(),this.relativeTargetOrigin=Di(),yx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Di(),this.targetWithTransforms=Di()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ofe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ml(this.target,this.layout.layoutBox),GV(this.target,this.targetDelta)):Ml(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Di(),this.relativeTargetOrigin=Di(),yx(this.relativeTargetOrigin,this.target,m.target),Ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||xE(this.parent.latestValues)||HV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Uo.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ml(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;pfe(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=lg(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=lg(),this.projectionDeltaWithTransform=lg());const p=this.projectionTransform;vx(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=$L(this.projectionDelta,this.treeScale),(this.projectionTransform!==p||this.treeScale.x!==h||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Hh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=lg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Di(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,v=this.getStack(),x=!v||v.members.length<=1,b=!!(p&&!x&&this.options.crossfade===!0&&!this.path.some(nhe));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;UL(f.x,o.x,j),UL(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rhe(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&Mfe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Di()),Ml(w,this.relativeTarget)),p&&(this.animationValues=d,Efe(d,u,this.latestValues,j,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Td(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fa.update(()=>{r2.hasAnimatedSinceResize=!0,this.currentAnimation=qfe(0,BL,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&rH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Di();const f=Cl(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=Cl(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Ml(l,c),cg(l,d),vx(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rfe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<FL.length;d++){const f="rotate"+FL[d];c[f]&&(u[f]=c[f],o.setStaticValue(f,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ufe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=t2(o?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=t2(o?.pointerEvents)||""),this.hasProjected&&!Vh(this.latestValues)&&(p.transform=d?d({},""):"none",this.hasProjected=!1),p}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=$L(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in Y2){if(h[p]===void 0)continue;const{correct:v,applyTo:x}=Y2[p],b=u.transform==="none"?h[p]:v(h[p],f);if(x){const w=x.length;for(let _=0;_<w;_++)u[x[_]]=b}else u[p]=b}return this.options.layoutId&&(u.pointerEvents=f===this?t2(o?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(zL),this.root.sharedNodes.clear()}}}function Vfe(e){e.updateLayout()}function Hfe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?Bl(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],m=Cl(h);h.min=n[f].min,h.max=h.min+m}):rH(i,r.layoutBox,n)&&Bl(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],m=Cl(n[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=lg();vx(l,n,r.layoutBox);const c=lg();o?vx(c,e.applyTransform(a,!0),r.measuredBox):vx(c,n,r.layoutBox);const u=!ZV(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const g=Di();yx(g,r.layoutBox,h.layoutBox);const p=Di();yx(p,n,m.layoutBox),eH(g,p)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Gfe(e){Hh.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Kfe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Yfe(e){e.clearSnapshot()}function zL(e){e.clearMeasurements()}function Xfe(e){e.isLayoutDirty=!1}function Jfe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function qL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Qfe(e){e.resolveTargetDelta()}function Zfe(e){e.calcProjection()}function ehe(e){e.resetRotation()}function the(e){e.removeLeadSnapshot()}function UL(e,t,r){e.translate=ui(t.translate,0,r),e.scale=ui(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function WL(e,t,r,n){e.min=ui(t.min,r.min,n),e.max=ui(t.max,r.max,n)}function rhe(e,t,r,n){WL(e.x,t.x,r.x,n),WL(e.y,t.y,r.y,n)}function nhe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ahe={duration:.45,ease:[.4,0,.1,1]},VL=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),HL=VL("applewebkit/")&&!VL("chrome/")?Math.round:wi;function GL(e){e.min=HL(e.min),e.max=HL(e.max)}function ihe(e){GL(e.x),GL(e.y)}function rH(e,t,r){return e==="position"||e==="preserve-aspect"&&!vE(LL(t),LL(r),.2)}const ohe=tH({attachResizeListener:(e,t)=>cd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),l5={current:void 0},nH=tH({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!l5.current){const e=new ohe({});e.mount(window),e.setOptions({layoutScroll:!0}),l5.current=e}return l5.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),she={pan:{Feature:_fe},drag:{Feature:Sfe,ProjectionNode:nH,MeasureLayout:XV}},lhe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function che(e){const t=lhe.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function wE(e,t,r=1){const[n,a]=che(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return FV(o)?parseFloat(o):o}else return uE(a)?wE(a,t,r+1):a}function uhe(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(a=>{const i=a.get();if(!uE(i))return;const o=wE(i,n);o&&a.set(o)});for(const a in t){const i=t[a];if(!uE(i))continue;const o=wE(i,n);o&&(t[a]=o,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:t,transitionEnd:r}}const dhe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),aH=e=>dhe.has(e),fhe=e=>Object.keys(e).some(aH),KL=e=>e===op||e===tn,YL=(e,t)=>parseFloat(e.split(", ")[t]),XL=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return YL(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?YL(i[1],e):0}},hhe=new Set(["x","y","z"]),mhe=Ab.filter(e=>!hhe.has(e));function phe(e){const t=[];return mhe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Kg={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:XL(4,13),y:XL(5,14)};Kg.translateX=Kg.x;Kg.translateY=Kg.y;const ghe=(e,t,r)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=Kg[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=Kg[u](c,i)}),e},vhe=(e,t,r={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(aH);let i=[],o=!1;const l=[];if(a.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],f=Cy(d);const h=t[c];let m;if(J2(h)){const g=h.length,p=h[0]===null?1:0;d=h[p],f=Cy(d);for(let v=p;v<g&&h[v]!==null;v++)m?AI(Cy(h[v])===m):m=Cy(h[v])}else m=Cy(h);if(f!==m)if(KL(f)&&KL(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof h=="string"?t[c]=parseFloat(h):Array.isArray(h)&&m===tn&&(t[c]=h.map(parseFloat))}else f?.transform&&m?.transform&&(d===0||h===0)?d===0?u.set(m.transform(d)):t[c]=f.transform(h):(o||(i=phe(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(h))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=ghe(t,e,l);return i.length&&i.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),sj&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function yhe(e,t,r,n){return fhe(t)?vhe(e,t,r,n):{target:t,transitionEnd:n}}const xhe=(e,t,r,n)=>{const a=uhe(e,t,n);return t=a.target,n=a.transitionEnd,yhe(e,t,r,n)},SE={current:null},iH={current:!1};function bhe(){if(iH.current=!0,!!sj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>SE.current=e.matches;e.addListener(t),t()}else SE.current=!1}function whe(e,t,r){const{willChange:n}=t;for(const a in t){const i=t[a],o=r[a];if(Gs(i))e.addValue(a,i),tS(n)&&n.add(a);else if(Gs(o))e.addValue(a,Gg(i,{owner:e})),tS(n)&&n.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,Gg(l!==void 0?l:i,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const JL=new WeakMap,oH=Object.keys(c0),She=oH.length,QL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],_he=yI.length;class jhe{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Fa.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=cj(r),this.isVariantNode=WW(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const f in d){const h=d[f];l[f]!==void 0&&Gs(h)&&(h.set(l[f],!1),tS(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,JL.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),iH.current||bhe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:SE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){JL.delete(this.current),this.projection&&this.projection.unmount(),Td(this.notifyUpdate),Td(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=ip.has(t),a=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Fa.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,a,i){let o,l;for(let c=0;c<She;c++){const u=oH[c],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:m}=c0[u];h&&(o=h),d(r)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:m}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&og(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Di()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<QL.length;n++){const a=QL[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=whe(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<_he;n++){const a=yI[n],i=this.props[a];(l0(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Gg(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=CI(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Gs(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new RI),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class sH extends jhe{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:a},i){let o=zde(n,t||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),o&&(o=a(o))),i){Fde(this,n,o);const l=xhe(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function Nhe(e){return window.getComputedStyle(e)}class Che extends sH{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(ip.has(r)){const n=OI(r);return n&&n.default||0}else{const n=Nhe(t),a=(KW(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return KV(t,r)}build(t,r,n,a){wI(t,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,r){return NI(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gs(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,a){eV(t,r,n,a)}}class Ahe extends sH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ip.has(r)){const n=OI(r);return n&&n.default||0}return r=tV.has(r)?r:gI(r),t.getAttribute(r)}measureInstanceViewportBox(){return Di()}scrapeMotionValuesFromProps(t,r){return nV(t,r)}build(t,r,n,a){_I(t,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,r,n,a){rV(t,r,n,a)}mount(t){this.isSVGTag=jI(t.tagName),super.mount(t)}}const Phe=(e,t)=>bI(e)?new Ahe(t,{enableHardwareAcceleration:!1}):new Che(t,{enableHardwareAcceleration:!0}),Ehe={layout:{ProjectionNode:nH,MeasureLayout:XV}},khe={...rfe,...Sue,...she,...Ehe},ur=Oce((e,t)=>cue(e,t,khe,Phe));function lH(){const e=y.useRef(!1);return pI(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Ohe(){const e=lH(),[t,r]=y.useState(0),n=y.useCallback(()=>{e.current&&r(t+1)},[t]);return[y.useCallback(()=>Fa.postRender(n),[n]),t]}class The extends y.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ihe({children:e,isPresent:t}){const r=y.useId(),n=y.useRef(null),a=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=a.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),y.createElement(The,{isPresent:t,childRef:n,sizeRef:a},y.cloneElement(e,{ref:n}))}const c5=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=aV(Dhe),c=y.useId(),u=y.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:d=>{l.set(d,!0);for(const f of l.values())if(!f)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return y.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[r]),y.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(e=y.createElement(Ihe,{isPresent:r},e)),y.createElement(oj.Provider,{value:u},e)};function Dhe(){return new Map}function Mhe(e){return y.useEffect(()=>()=>e(),[])}const Gh=e=>e.key||"";function Rhe(e,t){e.forEach(r=>{const n=Gh(r);t.set(n,r)})}function Lhe(e){const t=[];return y.Children.forEach(e,r=>{y.isValidElement(r)&&t.push(r)}),t}const $he=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=y.useContext(xI).forceRender||Ohe()[0],c=lH(),u=Lhe(e);let d=u;const f=y.useRef(new Map).current,h=y.useRef(d),m=y.useRef(new Map).current,g=y.useRef(!0);if(pI(()=>{g.current=!1,Rhe(u,m),h.current=d}),Mhe(()=>{g.current=!0,m.clear(),f.clear()}),g.current)return y.createElement(y.Fragment,null,d.map(b=>y.createElement(c5,{key:Gh(b),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},b)));d=[...d];const p=h.current.map(Gh),v=u.map(Gh),x=p.length;for(let b=0;b<x;b++){const w=p[b];v.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return o==="wait"&&f.size&&(d=[]),f.forEach((b,w)=>{if(v.indexOf(w)!==-1)return;const _=m.get(w);if(!_)return;const j=p.indexOf(w);let A=b;if(!A){const P=()=>{f.delete(w);const C=Array.from(m.keys()).filter(k=>!v.includes(k));if(C.forEach(k=>m.delete(k)),h.current=u.filter(k=>{const R=Gh(k);return R===w||C.includes(R)}),!f.size){if(c.current===!1)return;l(),n&&n()}};A=y.createElement(c5,{key:Gh(_),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:o},_),f.set(w,A)}d.splice(j,0,A)}),d=d.map(b=>{const w=b.key;return f.has(w)?b:y.createElement(c5,{key:Gh(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),y.createElement(y.Fragment,null,f.size?d:d.map(b=>y.cloneElement(b)))};function ZL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function hj(...e){return t=>{let r=!1;const n=e.map(a=>{const i=ZL(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():ZL(e[a],null)}}}}function Wn(...e){return y.useCallback(hj(...e),e)}function lh(e){const t=Bhe(e),r=y.forwardRef((n,a)=>{const{children:i,...o}=n,l=y.Children.toArray(i),c=l.find(qhe);if(c){const u=c.props.children,d=l.map(f=>f===c?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var Fhe=lh("Slot");function Bhe(e){const t=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const o=Whe(a),l=Uhe(i,a.props);return a.type!==y.Fragment&&(l.ref=n?hj(n,o):o),y.cloneElement(a,l)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cH=Symbol("radix.slottable");function zhe(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=cH,t}function qhe(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cH}function Uhe(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Whe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const e6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,t6=dn,LI=(e,t)=>r=>{var n;if(t?.variants==null)return t6(e,r?.class,r?.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r?.[u],f=i?.[u];if(d===null)return null;const h=e6(d)||e6(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...l}[p]):{...i,...l}[p]===v})?[...u,f,h]:u},[]);return t6(e,o,c,r?.class,r?.className)},d0=LI("inline-flex items-center justify-center rounded-sm text-sm font-bold tracking-wide transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-brand text-primary-foreground hover:bg-brand/90 shadow-lg shadow-brand/15",destructive:"bg-danger text-white hover:bg-danger/90 shadow-lg shadow-danger/15",outline:"border border-border bg-transparent hover:bg-accent hover:text-accent-foreground",secondary:"bg-surface-2 text-secondary-foreground hover:bg-surface-2/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-brand underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90 shadow-lg shadow-success/15"},size:{default:"h-10 px-5 py-2 gap-2",sm:"h-9 rounded-sm px-3 gap-1.5",lg:"h-12 rounded-md px-8 gap-2.5 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ae=se.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Fhe:"button";return s.jsx(o,{className:Et(d0({variant:t,size:r,className:e})),ref:i,...a})});Ae.displayName="Button";const u5=[{to:"/",icon:dce,label:"Painel Principal"},{to:"/agenda",icon:gu,label:"Agenda"},{to:"/vendas",icon:jb,label:"Loja"},{to:"/financeiro",icon:BW,label:"Financeiro"}],uH={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:e*.05+.3,duration:.3,ease:"easeOut"}})},r6=({to:e,icon:t,label:r,index:n,onNavigate:a})=>{const i="flex items-center h-[52px] px-4 rounded-sm bg-brand text-primary-foreground font-bold shadow-lg shadow-brand/10 border-l-4 border-brand",o="flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 border-transparent";return s.jsx(ur.li,{custom:n,variants:uH,initial:"hidden",animate:"visible",whileHover:{x:4},transition:{type:"spring",stiffness:300,damping:15},children:s.jsxs(Wh,{to:e,onClick:a,className:({isActive:l})=>l?i:o,children:[s.jsx(t,{className:"h-5 w-5 mr-4 flex-shrink-0"}),s.jsx("span",{className:"text-base",children:r})]})})};function Vhe({onNavigate:e,isVisible:t,setIsVisible:r,sidebarPinned:n}){const a=js(),i=["/produtos","/clientes","/equipe","/quadras","/empresas","/finalizadoras"],o=y.useMemo(()=>i.includes(a.pathname),[a.pathname]),[l,c]=y.useState(o),u=y.useRef(null);y.useRef(null);const d=y.useRef(0),f=y.useRef(0),h=()=>{window.innerWidth<768&&r(!1)};return y.useEffect(()=>{const m=v=>{window.innerWidth>=768||(d.current=v.touches[0].clientX,f.current=v.touches[0].clientY)},g=v=>{if(window.innerWidth>=768)return;const x=v.touches[0].clientX,b=v.touches[0].clientY,w=x-d.current,_=Math.abs(b-f.current);d.current<50&&w>50&&_<50&&r(!0)},p=()=>{d.current=0,f.current=0};return window.addEventListener("touchstart",m,{passive:!0}),window.addEventListener("touchmove",g,{passive:!0}),window.addEventListener("touchend",p,{passive:!0}),()=>{window.removeEventListener("touchstart",m),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",p)}},[t]),s.jsx(s.Fragment,{children:s.jsxs(ur.aside,{ref:u,initial:!1,animate:{width:n||t?280:0},className:"h-screen flex-shrink-0 bg-surface flex flex-col border-r border-border shadow-xl shadow-black/20 overflow-hidden",children:[s.jsxs(ur.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"flex items-center px-6 pt-8 pb-6 h-[120px] flex-shrink-0",children:[s.jsx("div",{className:"w-14 h-14 bg-brand rounded-xl flex items-center justify-center mr-4",children:s.jsx(Cb,{className:"w-8 h-8 text-primary-foreground"})}),s.jsxs("div",{className:"flex items-baseline",children:[s.jsx("span",{className:"font-extrabold text-2xl",style:{color:"#FF6600"},children:"Fluxo"}),s.jsx("span",{className:"font-extrabold text-2xl",style:{color:"#FFAA33"},children:"7"}),s.jsx("span",{className:"font-medium text-2xl",style:{color:"#B0B0B0"},children:" Arena"})]})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto px-6 py-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent hover:scrollbar-thumb-border-hover",children:s.jsxs("ul",{className:"space-y-3",children:[u5.map((m,g)=>s.jsx(r6,{...m,index:g,onNavigate:h},m.to)),s.jsxs(ur.li,{custom:u5.length,variants:uH,initial:"hidden",animate:"visible",children:[s.jsxs("button",{type:"button",onClick:()=>c(m=>!m),className:`w-full flex items-center h-[52px] px-4 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-all duration-200 border-l-4 ${o?"bg-brand text-primary-foreground font-bold border-brand":"border-transparent"}`,children:[s.jsx(ace,{className:"h-5 w-5 mr-4 flex-shrink-0"}),s.jsx("span",{className:"text-base flex-1 text-left",children:"Cadastros"}),s.jsx(H2,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]}),l&&s.jsxs("ul",{className:"mt-2 ml-8 space-y-2",children:[s.jsx("li",{children:s.jsxs(Wh,{to:"/clientes",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(ps,{className:"h-4 w-4 mr-3"})," Clientes & Fornecedores"]})}),s.jsx("li",{children:s.jsxs(Wh,{to:"/finalizadoras",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(sm,{className:"h-4 w-4 mr-3"})," Finalizadoras"]})}),s.jsx("li",{children:s.jsxs(Wh,{to:"/produtos",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(Hg,{className:"h-4 w-4 mr-3"})," Produtos"]})}),s.jsx("li",{children:s.jsxs(Wh,{to:"/equipe",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(wce,{className:"h-4 w-4 mr-3"})," Equipe"]})}),s.jsx("li",{children:s.jsxs(Wh,{to:"/quadras",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(uce,{className:"h-4 w-4 mr-3"})," Quadras"]})}),s.jsx("li",{children:s.jsxs(Wh,{to:"/empresas",onClick:h,className:({isActive:m})=>m?"flex items-center h-[40px] px-3 rounded-sm bg-brand/20 text-text-primary font-medium text-sm":"flex items-center h-[40px] px-3 rounded-sm text-text-secondary hover:bg-surface-2 hover:text-text-primary transition-colors text-sm",children:[s.jsx(iE,{className:"h-4 w-4 mr-3"})," Empresa"]})})]})]})]})}),s.jsx(ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},className:"px-6 pb-6 flex-shrink-0",children:s.jsx(r6,{to:"/suporte",icon:MW,label:"Suporte",index:u5.length,onNavigate:h})})]})})}function lr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function Hhe(e,t){const r=y.createContext(t),n=i=>{const{children:o,...l}=i,c=y.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=y.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function ac(e,t=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];const u=f=>{const{scope:h,children:m,...g}=f,p=h?.[e]?.[c]||l,v=y.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(f,h){const m=h?.[e]?.[c]||l,g=y.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=l?.[e]||i;return y.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Ghe(a,...t)]}function Ghe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var To=globalThis?.document?y.useLayoutEffect:()=>{},Khe=gT[" useId ".trim().toString()]||(()=>{}),Yhe=0;function Mc(e){const[t,r]=y.useState(Khe());return To(()=>{e||r(n=>n??String(Yhe++))},[e]),e||(t?`radix-${t}`:"")}var Xhe=gT[" useInsertionEffect ".trim().toString()]||To;function Id({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=Jhe({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=y.useRef(e!==void 0);y.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=y.useCallback(d=>{if(l){const f=Qhe(d)?d(e):d;f!==e&&o.current?.(f)}else i(d)},[l,e,i,o]);return[c,u]}function Jhe({defaultProp:e,onChange:t}){const[r,n]=y.useState(e),a=y.useRef(r),i=y.useRef(t);return Xhe(()=>{i.current=t},[t]),y.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function Qhe(e){return typeof e=="function"}var Zhe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qr=Zhe.reduce((e,t)=>{const r=lh(`Primitive.${t}`),n=y.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function $I(e,t){e&&xh.flushSync(()=>e.dispatchEvent(t))}function Ks(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...r)=>t.current?.(...r),[])}function eme(e,t=globalThis?.document){const r=Ks(e);y.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var tme="DismissableLayer",_E="dismissableLayer.update",rme="dismissableLayer.pointerDownOutside",nme="dismissableLayer.focusOutside",n6,dH=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mv=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=y.useContext(dH),[d,f]=y.useState(null),h=d?.ownerDocument??globalThis?.document,[,m]=y.useState({}),g=Wn(t,P=>f(P)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(v),b=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=b>=x,j=ime(P=>{const C=P.target,k=[...u.branches].some(R=>R.contains(C));!_||k||(a?.(P),o?.(P),P.defaultPrevented||l?.())},h),A=ome(P=>{const C=P.target;[...u.branches].some(R=>R.contains(C))||(i?.(P),o?.(P),P.defaultPrevented||l?.())},h);return eme(P=>{b===u.layers.size-1&&(n?.(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},h),y.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(n6=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),a6(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=n6)}},[d,h,r,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),a6())},[d,u]),y.useEffect(()=>{const P=()=>m({});return document.addEventListener(_E,P),()=>document.removeEventListener(_E,P)},[]),s.jsx(Qr.div,{...c,ref:g,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:lr(e.onFocusCapture,A.onFocusCapture),onBlurCapture:lr(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:lr(e.onPointerDownCapture,j.onPointerDownCapture)})});Mv.displayName=tme;var ame="DismissableLayerBranch",fH=y.forwardRef((e,t)=>{const r=y.useContext(dH),n=y.useRef(null),a=Wn(t,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Qr.div,{...e,ref:a})});fH.displayName=ame;function ime(e,t=globalThis?.document){const r=Ks(e),n=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){hH(rme,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function ome(e,t=globalThis?.document){const r=Ks(e),n=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!n.current&&hH(nme,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function a6(){const e=new CustomEvent(_E);document.dispatchEvent(e)}function hH(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?$I(a,i):a.dispatchEvent(i)}var sme=Mv,lme=fH,d5="focusScope.autoFocusOnMount",f5="focusScope.autoFocusOnUnmount",i6={bubbles:!1,cancelable:!0},cme="FocusScope",Ob=y.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=y.useState(null),u=Ks(a),d=Ks(i),f=y.useRef(null),h=Wn(t,p=>c(p)),m=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:hf(f.current,{select:!0})},v=function(w){if(m.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||hf(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&hf(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),b.disconnect()}}},[n,l,m.paused]),y.useEffect(()=>{if(l){s6.add(m);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(d5,i6);l.addEventListener(d5,u),l.dispatchEvent(x),x.defaultPrevented||(ume(pme(mH(l)),{select:!0}),document.activeElement===p&&hf(l))}return()=>{l.removeEventListener(d5,u),setTimeout(()=>{const x=new CustomEvent(f5,i6);l.addEventListener(f5,d),l.dispatchEvent(x),x.defaultPrevented||hf(p??document.body,{select:!0}),l.removeEventListener(f5,d),s6.remove(m)},0)}}},[l,u,d,m]);const g=y.useCallback(p=>{if(!r&&!n||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(v&&x){const b=p.currentTarget,[w,_]=dme(b);w&&_?!p.shiftKey&&x===_?(p.preventDefault(),r&&hf(w,{select:!0})):p.shiftKey&&x===w&&(p.preventDefault(),r&&hf(_,{select:!0})):x===b&&p.preventDefault()}},[r,n,m.paused]);return s.jsx(Qr.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Ob.displayName=cme;function ume(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(hf(n,{select:t}),document.activeElement!==r)return}function dme(e){const t=mH(e),r=o6(t,e),n=o6(t.reverse(),e);return[r,n]}function mH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function o6(e,t){for(const r of e)if(!fme(r,{upTo:t}))return r}function fme(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hme(e){return e instanceof HTMLInputElement&&"select"in e}function hf(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&hme(e)&&t&&e.select()}}var s6=mme();function mme(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=l6(e,t),e.unshift(t)},remove(t){e=l6(e,t),e[0]?.resume()}}}function l6(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function pme(e){return e.filter(t=>t.tagName!=="A")}var gme="Portal",Rv=y.forwardRef((e,t)=>{const{container:r,...n}=e,[a,i]=y.useState(!1);To(()=>i(!0),[]);const o=r||a&&globalThis?.document?.body;return o?hW.createPortal(s.jsx(Qr.div,{...n,ref:t}),o):null});Rv.displayName=gme;function vme(e,t){return y.useReducer((r,n)=>t[r][n]??r,e)}var El=e=>{const{present:t,children:r}=e,n=yme(t),a=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=Wn(n.ref,xme(a));return typeof r=="function"||n.isPresent?y.cloneElement(a,{ref:i}):null};El.displayName="Presence";function yme(e){const[t,r]=y.useState(),n=y.useRef(null),a=y.useRef(e),i=y.useRef("none"),o=e?"mounted":"unmounted",[l,c]=vme(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Z1(n.current);i.current=l==="mounted"?u:"none"},[l]),To(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Z1(u);e?c("MOUNT"):m==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),To(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=Z1(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(i.current=Z1(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Z1(e){return e?.animationName||"none"}function xme(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var h5=0;function mj(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??c6()),document.body.insertAdjacentElement("beforeend",e[1]??c6()),h5++,()=>{h5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),h5--}},[])}function c6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ou=function(){return ou=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ou.apply(this,arguments)};function pH(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function bme(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var n2="right-scroll-bar-position",a2="width-before-scroll-bar",wme="with-scroll-bars-hidden",Sme="--removed-body-scroll-bar-size";function m5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function _me(e,t){var r=y.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var jme=typeof window<"u"?y.useLayoutEffect:y.useEffect,u6=new WeakMap;function Nme(e,t){var r=_me(t||null,function(n){return e.forEach(function(a){return m5(a,n)})});return jme(function(){var n=u6.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||m5(l,null)}),i.forEach(function(l){a.has(l)||m5(l,o)})}u6.set(r,e)},[e]),r}function Cme(e){return e}function Ame(e,t){t===void 0&&(t=Cme);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function Pme(e){e===void 0&&(e={});var t=Ame(null);return t.options=ou({async:!0,ssr:!1},e),t}var gH=function(e){var t=e.sideCar,r=pH(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,ou({},r))};gH.isSideCarExport=!0;function Eme(e,t){return e.useMedium(t),gH}var vH=Pme(),p5=function(){},pj=y.forwardRef(function(e,t){var r=y.useRef(null),n=y.useState({onScrollCapture:p5,onWheelCapture:p5,onTouchMoveCapture:p5}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,v=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,w=e.gapMode,_=pH(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,A=Nme([r,t]),P=ou(ou({},_),a);return y.createElement(y.Fragment,null,d&&y.createElement(j,{sideCar:vH,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?y.cloneElement(y.Children.only(l),ou(ou({},P),{ref:A})):y.createElement(b,ou({},P,{className:c,ref:A}),l))});pj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pj.classNames={fullWidth:a2,zeroRight:n2};var d6,kme=function(){if(d6)return d6;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ome(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kme();return t&&e.setAttribute("nonce",t),e}function Tme(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ime(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Dme=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Ome())&&(Tme(t,r),Ime(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Mme=function(){var e=Dme();return function(t,r){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},yH=function(){var e=Mme(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Rme={left:0,top:0,right:0,gap:0},g5=function(e){return parseInt(e||"",10)||0},Lme=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[g5(r),g5(n),g5(a)]},$me=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rme;var t=Lme(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Fme=yH(),Sg="data-scroll-locked",Bme=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(wme,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Sg,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(n2,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(a2,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(n2," .").concat(n2,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(a2," .").concat(a2,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Sg,`] {
    `).concat(Sme,": ").concat(l,`px;
  }
`)},f6=function(){var e=parseInt(document.body.getAttribute(Sg)||"0",10);return isFinite(e)?e:0},zme=function(){y.useEffect(function(){return document.body.setAttribute(Sg,(f6()+1).toString()),function(){var e=f6()-1;e<=0?document.body.removeAttribute(Sg):document.body.setAttribute(Sg,e.toString())}},[])},qme=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;zme();var i=y.useMemo(function(){return $me(a)},[a]);return y.createElement(Fme,{styles:Bme(i,!t,a,r?"":"!important")})},jE=!1;if(typeof window<"u")try{var ew=Object.defineProperty({},"passive",{get:function(){return jE=!0,!0}});window.addEventListener("test",ew,ew),window.removeEventListener("test",ew,ew)}catch{jE=!1}var _p=jE?{passive:!1}:!1,Ume=function(e){return e.tagName==="TEXTAREA"},xH=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Ume(e)&&r[t]==="visible")},Wme=function(e){return xH(e,"overflowY")},Vme=function(e){return xH(e,"overflowX")},h6=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=bH(e,n);if(a){var i=wH(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Hme=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Gme=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},bH=function(e,t){return e==="v"?Wme(t):Vme(t)},wH=function(e,t){return e==="v"?Hme(t):Gme(t)},Kme=function(e,t){return e==="h"&&t==="rtl"?-1:1},Yme=function(e,t,r,n,a){var i=Kme(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=wH(e,l),g=m[0],p=m[1],v=m[2],x=p-v-i*g;(g||x)&&bH(e,l)&&(f+=x,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(a&&Math.abs(f)<1||!a&&o>f)||!d&&(a&&Math.abs(h)<1||!a&&-o>h))&&(u=!0),u},tw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},m6=function(e){return[e.deltaX,e.deltaY]},p6=function(e){return e&&"current"in e?e.current:e},Xme=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Jme=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Qme=0,jp=[];function Zme(e){var t=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),a=y.useState(Qme++)[0],i=y.useState(yH)[0],o=y.useRef(e);y.useEffect(function(){o.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=bme([e.lockRef.current],(e.shards||[]).map(p6),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=y.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=tw(p),b=r.current,w="deltaX"in p?p.deltaX:b[0]-x[0],_="deltaY"in p?p.deltaY:b[1]-x[1],j,A=p.target,P=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in p&&P==="h"&&A.type==="range")return!1;var C=h6(P,A);if(!C)return!0;if(C?j=P:(j=P==="v"?"h":"v",C=h6(P,A)),!C)return!1;if(!n.current&&"changedTouches"in p&&(w||_)&&(n.current=j),!j)return!0;var k=n.current||j;return Yme(k,v,p,k==="h"?w:_,!0)},[]),c=y.useCallback(function(p){var v=p;if(!(!jp.length||jp[jp.length-1]!==i)){var x="deltaY"in v?m6(v):tw(v),b=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&Xme(j.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(p6).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=w.length>0?l(v,w[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=y.useCallback(function(p,v,x,b){var w={name:p,delta:v,target:x,should:b,shadowParent:epe(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=y.useCallback(function(p){r.current=tw(p),n.current=void 0},[]),f=y.useCallback(function(p){u(p.type,m6(p),p.target,l(p,e.lockRef.current))},[]),h=y.useCallback(function(p){u(p.type,tw(p),p.target,l(p,e.lockRef.current))},[]);y.useEffect(function(){return jp.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,_p),document.addEventListener("touchmove",c,_p),document.addEventListener("touchstart",d,_p),function(){jp=jp.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,_p),document.removeEventListener("touchmove",c,_p),document.removeEventListener("touchstart",d,_p)}},[]);var m=e.removeScrollBar,g=e.inert;return y.createElement(y.Fragment,null,g?y.createElement(i,{styles:Jme(a)}):null,m?y.createElement(qme,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function epe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const tpe=Eme(vH,Zme);var SH=y.forwardRef(function(e,t){return y.createElement(pj,ou({},e,{ref:t,sideCar:tpe}))});SH.classNames=pj.classNames;const gj=SH;var rpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Np=new WeakMap,rw=new WeakMap,nw={},v5=0,_H=function(e){return e&&(e.host||_H(e.parentNode))},npe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=_H(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ape=function(e,t,r,n){var a=npe(t,Array.isArray(e)?e:[e]);nw[r]||(nw[r]=new WeakMap);var i=nw[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",p=(Np.get(h)||0)+1,v=(i.get(h)||0)+1;Np.set(h,p),i.set(h,v),o.push(h),p===1&&g&&rw.set(h,!0),v===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(t),l.clear(),v5++,function(){o.forEach(function(f){var h=Np.get(f)-1,m=i.get(f)-1;Np.set(f,h),i.set(f,m),h||(rw.has(f)||f.removeAttribute(n),rw.delete(f)),m||f.removeAttribute(r)}),v5--,v5||(Np=new WeakMap,Np=new WeakMap,rw=new WeakMap,nw={})}},vj=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||rpe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),ape(n,a,r,"aria-hidden")):function(){return null}},yj="Dialog",[jH,NH]=ac(yj),[ipe,Hc]=jH(yj),CH=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=y.useRef(null),c=y.useRef(null),[u,d]=Id({prop:n,defaultProp:a??!1,onChange:i,caller:yj});return s.jsx(ipe,{scope:t,triggerRef:l,contentRef:c,contentId:Mc(),titleId:Mc(),descriptionId:Mc(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};CH.displayName=yj;var AH="DialogTrigger",PH=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Hc(AH,r),i=Wn(t,a.triggerRef);return s.jsx(Qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":zI(a.open),...n,ref:i,onClick:lr(e.onClick,a.onOpenToggle)})});PH.displayName=AH;var FI="DialogPortal",[ope,EH]=jH(FI,{forceMount:void 0}),kH=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Hc(FI,t);return s.jsx(ope,{scope:t,forceMount:r,children:y.Children.map(n,o=>s.jsx(El,{present:r||i.open,children:s.jsx(Rv,{asChild:!0,container:a,children:o})}))})};kH.displayName=FI;var nS="DialogOverlay",OH=y.forwardRef((e,t)=>{const r=EH(nS,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Hc(nS,e.__scopeDialog);return i.modal?s.jsx(El,{present:n||i.open,children:s.jsx(lpe,{...a,ref:t})}):null});OH.displayName=nS;var spe=lh("DialogOverlay.RemoveScroll"),lpe=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Hc(nS,r);return s.jsx(gj,{as:spe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Qr.div,{"data-state":zI(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),$m="DialogContent",TH=y.forwardRef((e,t)=>{const r=EH($m,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Hc($m,e.__scopeDialog);return s.jsx(El,{present:n||i.open,children:i.modal?s.jsx(cpe,{...a,ref:t}):s.jsx(upe,{...a,ref:t})})});TH.displayName=$m;var cpe=y.forwardRef((e,t)=>{const r=Hc($m,e.__scopeDialog),n=y.useRef(null),a=Wn(t,r.contentRef,n);return y.useEffect(()=>{const i=n.current;if(i)return vj(i)},[]),s.jsx(IH,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lr(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:lr(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:lr(e.onFocusOutside,i=>i.preventDefault())})}),upe=y.forwardRef((e,t)=>{const r=Hc($m,e.__scopeDialog),n=y.useRef(!1),a=y.useRef(!1);return s.jsx(IH,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),IH=y.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Hc($m,r),c=y.useRef(null),u=Wn(t,c);return mj(),s.jsxs(s.Fragment,{children:[s.jsx(Ob,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Mv,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":zI(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(fpe,{titleId:l.titleId}),s.jsx(mpe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),BI="DialogTitle",DH=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Hc(BI,r);return s.jsx(Qr.h2,{id:a.titleId,...n,ref:t})});DH.displayName=BI;var MH="DialogDescription",RH=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Hc(MH,r);return s.jsx(Qr.p,{id:a.descriptionId,...n,ref:t})});RH.displayName=MH;var LH="DialogClose",$H=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Hc(LH,r);return s.jsx(Qr.button,{type:"button",...n,ref:t,onClick:lr(e.onClick,()=>a.onOpenChange(!1))})});$H.displayName=LH;function zI(e){return e?"open":"closed"}var FH="DialogTitleWarning",[dpe,BH]=Hhe(FH,{contentName:$m,titleName:BI,docsSlug:"dialog"}),fpe=({titleId:e})=>{const t=BH(FH),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},hpe="DialogDescriptionWarning",mpe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BH(hpe).contentName}}.`;return y.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},zH=CH,ppe=PH,qH=kH,qI=OH,UI=TH,WI=DH,VI=RH,xj=$H;const rn=zH,gpe=qH,Fm=xj,UH=se.forwardRef(({className:e,disableAnimations:t,...r},n)=>{const a=typeof window<"u"&&(window.matchMedia?.("(pointer: coarse)")?.matches||window.innerWidth<768),i=typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,o=(t??!1)||a||i;return s.jsx(qI,{ref:n,className:Et("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",o?"data-[state=open]:animate-none data-[state=closed]:animate-none":"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r})});UH.displayName=qI.displayName;const Yr=se.forwardRef(({className:e,children:t,overlayClassName:r,disableAnimations:n,alignTop:a,...i},o)=>{const l=typeof window<"u"&&(window.matchMedia?.("(pointer: coarse)")?.matches||window.innerWidth<768),c=typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,u=(n??!1)||l||c;return s.jsxs(gpe,{children:[s.jsx(UH,{disableAnimations:u,className:r}),s.jsxs(UI,{ref:o,className:Et("fixed z-50 grid w-full max-w-lg gap-4 border border-border bg-surface p-6 shadow-lg duration-200 sm:rounded-lg",a?"left-1/2 top-[10%] -translate-x-1/2":"left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",u?"data-[state=open]:animate-none data-[state=closed]:animate-none":"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...i,children:[t,s.jsxs(xj,{className:"absolute right-3 top-3 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1",children:[s.jsx(Vf,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Yr.displayName=UI.displayName;const nn=({className:e,...t})=>s.jsx("div",{className:Et("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nn.displayName="DialogHeader";const Dn=({className:e,...t})=>s.jsx("div",{className:Et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Dn.displayName="DialogFooter";const Xr=se.forwardRef(({className:e,...t},r)=>s.jsx(WI,{ref:r,className:Et("text-lg font-semibold leading-none tracking-tight",e),...t}));Xr.displayName=WI.displayName;const cn=se.forwardRef(({className:e,...t},r)=>s.jsx(VI,{ref:r,className:Et("text-sm text-text-secondary",e),...t}));cn.displayName=VI.displayName;const vpe=1;let y5=0;function ype(){return y5=(y5+1)%Number.MAX_VALUE,y5.toString()}const hs={state:{toasts:[]},listeners:[],getState:()=>hs.state,setState:e=>{typeof e=="function"?hs.state=e(hs.state):hs.state={...hs.state,...e},hs.listeners.forEach(t=>t(hs.state))},subscribe:e=>(hs.listeners.push(e),()=>{hs.listeners=hs.listeners.filter(t=>t!==e)})},xpe=({...e})=>{const t=ype(),r=a=>hs.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===t?{...o,...a}:o)})),n=()=>hs.setState(a=>({...a,toasts:a.toasts.filter(i=>i.id!==t)}));return hs.setState(a=>({...a,toasts:[{...e,id:t,dismiss:n},...a.toasts].slice(0,vpe)})),{id:t,dismiss:n,update:r}};function ii(){const[e,t]=y.useState(hs.getState());return y.useEffect(()=>hs.subscribe(n=>{t(n)}),[]),y.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const a=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(a)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:xpe,toasts:e.toasts}}const bpe="modulepreload",wpe=function(e){return"/"+e},g6={},yu=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=wpe(i),i in g6)return;g6[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let d=a.length-1;d>=0;d--){const f=a[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":bpe,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Spe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>yu(()=>Promise.resolve().then(()=>Lv),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class HI extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class _pe extends HI{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class v6 extends HI{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class y6 extends HI{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var NE;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(NE||(NE={}));var jpe=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Npe{constructor(t,{headers:r={},customFetch:n,region:a=NE.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Spe(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return jpe(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(p=>{throw new _pe(p)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new v6(f);if(!f.ok)throw new y6(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield f.json():m==="application/octet-stream"?g=yield f.blob():m==="text/event-stream"?g=f:m==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof y6||a instanceof v6?a.context:void 0}}})}}var $s={},GI={},bj={},Tb={},wj={},Sj={},Cpe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yg=Cpe();const Ape=Yg.fetch,WH=Yg.fetch.bind(Yg),VH=Yg.Headers,Ppe=Yg.Request,Epe=Yg.Response,Lv=Object.freeze(Object.defineProperty({__proto__:null,Headers:VH,Request:Ppe,Response:Epe,default:WH,fetch:Ape},Symbol.toStringTag,{value:"Module"})),kpe=Wae(Lv);var _j={};Object.defineProperty(_j,"__esModule",{value:!0});let Ope=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};_j.default=Ope;var HH=Ko&&Ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sj,"__esModule",{value:!0});const Tpe=HH(kpe),Ipe=HH(_j);let Dpe=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Tpe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,f=null,h=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=b:f=JSON.parse(b))}const v=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(f=[],d=null,m=200,g="OK")}catch{i.status===404&&v===""?(m=204,g="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d?.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new Ipe.default(d)}return{error:d,data:f,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(l=i?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Sj.default=Dpe;var Mpe=Ko&&Ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wj,"__esModule",{value:!0});const Rpe=Mpe(Sj);let Lpe=class extends Rpe.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};wj.default=Lpe;var $pe=Ko&&Ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tb,"__esModule",{value:!0});const Fpe=$pe(wj);let Bpe=class extends Fpe.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Tb.default=Bpe;var zpe=Ko&&Ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bj,"__esModule",{value:!0});const Py=zpe(Tb);let qpe=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Py.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Py.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Py.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Py.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Py.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};bj.default=qpe;var GH=Ko&&Ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(GI,"__esModule",{value:!0});const Upe=GH(bj),Wpe=GH(Tb);let Vpe=class KH{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Upe.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new KH(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Wpe.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};GI.default=Vpe;var $v=Ko&&Ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($s,"__esModule",{value:!0});$s.PostgrestError=$s.PostgrestBuilder=$s.PostgrestTransformBuilder=$s.PostgrestFilterBuilder=$s.PostgrestQueryBuilder=$s.PostgrestClient=void 0;const YH=$v(GI);$s.PostgrestClient=YH.default;const XH=$v(bj);$s.PostgrestQueryBuilder=XH.default;const JH=$v(Tb);$s.PostgrestFilterBuilder=JH.default;const QH=$v(wj);$s.PostgrestTransformBuilder=QH.default;const ZH=$v(Sj);$s.PostgrestBuilder=ZH.default;const eG=$v(_j);$s.PostgrestError=eG.default;var Hpe=$s.default={PostgrestClient:YH.default,PostgrestQueryBuilder:XH.default,PostgrestFilterBuilder:JH.default,PostgrestTransformBuilder:QH.default,PostgrestBuilder:ZH.default,PostgrestError:eG.default};const{PostgrestClient:Gpe,PostgrestQueryBuilder:Vnt,PostgrestFilterBuilder:Hnt,PostgrestTransformBuilder:Gnt,PostgrestBuilder:Knt,PostgrestError:Ynt}=Hpe;class Kpe{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ype="2.15.1",Xpe=`realtime-js/${Ype}`,Jpe="1.0.0",CE=1e4,Qpe=1e3,Zpe=100;var xx;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(xx||(xx={}));var Yi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Yi||(Yi={}));var jc;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jc||(jc={}));var AE;(function(e){e.websocket="websocket"})(AE||(AE={}));var tm;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tm||(tm={}));class ege{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class tG{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ma;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ma||(Ma={}));const x6=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=tge(o,e,t,a),i),{})},tge=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a?.type,o=r[e];return i&&!n.includes(i)?rG(i,o):PE(o)},rG=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ige(t,r)}switch(e){case Ma.bool:return rge(t);case Ma.float4:case Ma.float8:case Ma.int2:case Ma.int4:case Ma.int8:case Ma.numeric:case Ma.oid:return nge(t);case Ma.json:case Ma.jsonb:return age(t);case Ma.timestamp:return oge(t);case Ma.abstime:case Ma.date:case Ma.daterange:case Ma.int4range:case Ma.int8range:case Ma.money:case Ma.reltime:case Ma.text:case Ma.time:case Ma.timestamptz:case Ma.timetz:case Ma.tsrange:case Ma.tstzrange:return PE(t);default:return PE(t)}},PE=e=>e,rge=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},nge=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},age=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ige=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>rG(t,l))}return e},oge=e=>typeof e=="string"?e.replace(" ","T"):e,nG=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class x5{constructor(t,r,n={},a=CE){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var b6;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(b6||(b6={}));class bx{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bx.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=bx.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=bx.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),p=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var w6;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(w6||(w6={}));var wx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(wx||(wx={}));var Zu;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zu||(Zu={}));class KI{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Yi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new x5(this,jc.join,this.params,this.timeout),this.rejoinTimer=new tG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Yi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Yi.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Yi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Yi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Yi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jc.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new bx(this),this.broadcastEndpointURL=nG(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Yi.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[wx.PRESENCE]&&this.bindings[wx.PRESENCE].length>0,d={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(Zu.CHANNEL_ERROR,h)),this._onClose(()=>t?.(Zu.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){t?.(Zu.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,p=(m=g?.length)!==null&&m!==void 0?m:0,v=[];for(let x=0;x<p;x++){const b=g[x],{filter:{event:w,schema:_,table:j,filter:A}}=b,P=h&&h[x];if(P&&P.event===w&&P.schema===_&&P.table===j&&P.filter===A)v.push(Object.assign(Object.assign({},b),{id:P.id}));else{this.unsubscribe(),this.state=Yi.errored,t?.(Zu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Zu.SUBSCRIBED);return}}).receive("error",h=>{this.state=Yi.errored,t?.(Zu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(Zu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Yi.joined&&t===wx.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Yi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jc.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new x5(this,jc.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Yi.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new x5(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Zpe){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=jc;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,p,v,x,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(j==="*"||j?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(b=(x=m?.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:v,commit_timestamp:x,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===Yi.closed}_isJoined(){return this.state===Yi.joined}_isJoining(){return this.state===Yi.joining}_isLeaving(){return this.state===Yi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&KI.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jc.close,{},t)}_onError(t){this._on(jc.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Yi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=x6(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=x6(t.columns,t.old_record)),r}}const S6=()=>{},aw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sge=[1e3,2e3,5e3,1e4],lge=1e4,cge=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uge{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=CE,this.transport=null,this.heartbeatIntervalMs=aw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=S6,this.ref=0,this.reconnectTimer=null,this.logger=S6,this.conn=null,this.sendBuffer=[],this.serializer=new ege,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>yu(()=>Promise.resolve().then(()=>Lv),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${AE.websocket}`,this.httpEndpoint=nG(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kpe.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jpe}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xx.connecting:return tm.Connecting;case xx.open:return tm.Open;case xx.closing:return tm.Closing;default:return tm.Closed}}isConnected(){return this.connectionState()===tm.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new KI(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Qpe,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},aw.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(jc.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([cge],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:Xpe};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(jc.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new tG(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},aw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:CE,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:aw.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:d=>sge[d-1]||lge,this.encode=(c=t?.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class YI extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ji(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class dge extends YI{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class EE extends YI{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var fge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const aG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>yu(()=>Promise.resolve().then(()=>Lv),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},hge=()=>fge(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yu(()=>Promise.resolve().then(()=>Lv),void 0)).Response:Response}),kE=e=>{if(Array.isArray(e))return e.map(r=>kE(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=kE(n)}),t},mge=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var sp=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const b5=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pge=(e,t,r)=>sp(void 0,void 0,void 0,function*(){const n=yield hge();e instanceof n&&!r?.noResolveJson?e.json().then(a=>{const i=e.status||500,o=a?.statusCode||i+"";t(new dge(b5(a),i,o))}).catch(a=>{t(new EE(b5(a),a))}):t(new EE(b5(e),e))}),gge=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||!n?a:(mge(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,t?.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Ib(e,t,r,n,a,i){return sp(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,gge(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>pge(c,l,n))})})}function aS(e,t,r,n){return sp(this,void 0,void 0,function*(){return Ib(e,"GET",t,r,n)})}function ru(e,t,r,n,a){return sp(this,void 0,void 0,function*(){return Ib(e,"POST",t,n,a,r)})}function OE(e,t,r,n,a){return sp(this,void 0,void 0,function*(){return Ib(e,"PUT",t,n,a,r)})}function vge(e,t,r,n){return sp(this,void 0,void 0,function*(){return Ib(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function iG(e,t,r,n,a){return sp(this,void 0,void 0,function*(){return Ib(e,"DELETE",t,n,a,r)})}var as=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const yge={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xge{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=aG(a)}uploadOrUpdate(t,r,n,a){return as(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},_6),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?OE:ru)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Ji(i))return{data:null,error:i};throw i}})}upload(t,r,n){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return as(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:_6.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield OE(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(Ji(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return as(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const i=yield ru(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new YI("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Ji(n))return{data:null,error:n};throw n}})}update(t,r,n){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return as(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ji(a))return{data:null,error:a};throw a}})}copy(t,r,n){return as(this,void 0,void 0,function*(){try{return{data:{path:(yield ru(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ji(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return as(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ru(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Ji(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return as(this,void 0,void 0,function*(){try{const a=yield ru(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Ji(a))return{data:null,error:a};throw a}})}download(t,r){return as(this,void 0,void 0,function*(){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield aS(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ji(l))return{data:null,error:l};throw l}})}info(t){return as(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield aS(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:kE(n),error:null}}catch(n){if(Ji(n))return{data:null,error:n};throw n}})}exists(t){return as(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield vge(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ji(n)&&n instanceof EE){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return as(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Ji(r))return{data:null,error:r};throw r}})}list(t,r,n){return as(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},yge),r),{prefix:t||""});return{data:yield ru(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Ji(a))return{data:null,error:a};throw a}})}listV2(t,r){return as(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ru(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ji(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const bge="2.11.0",wge={"X-Client-Info":`storage-js/${bge}`};var Cp=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Sge{constructor(t,r={},n,a){const i=new URL(t);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},wge),r),this.fetch=aG(n)}listBuckets(){return Cp(this,void 0,void 0,function*(){try{return{data:yield aS(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ji(t))return{data:null,error:t};throw t}})}getBucket(t){return Cp(this,void 0,void 0,function*(){try{return{data:yield aS(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Ji(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Cp(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ji(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Cp(this,void 0,void 0,function*(){try{return{data:yield OE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ji(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Cp(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ji(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Cp(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Ji(r))return{data:null,error:r};throw r}})}}class _ge extends Sge{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new xge(this.url,this.headers,t,this.fetch)}}const jge="2.56.0";let ex="";typeof Deno<"u"?ex="deno":typeof document<"u"?ex="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ex="react-native":ex="node";const Nge={"X-Client-Info":`supabase-js-${ex}/${jge}`},Cge={headers:Nge},Age={schema:"public"},Pge={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ege={};var kge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Oge=e=>{let t;return e?t=e:typeof fetch>"u"?t=WH:t=fetch,(...r)=>t(...r)},Tge=()=>typeof Headers>"u"?VH:Headers,Ige=(e,t,r)=>{const n=Oge(r),a=Tge();return(i,o)=>kge(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Dge=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Mge(e){return e.endsWith("/")?e:e+"/"}function Rge(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Dge(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const oG="2.71.1",Wp=30*1e3,TE=3,w5=TE*Wp,Lge="http://localhost:9999",$ge="supabase.auth.token",Fge={"X-Client-Info":`gotrue-js/${oG}`},IE="X-Supabase-Api-Version",sG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bge=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zge=10*60*1e3;class XI extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function xn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class qge extends XI{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Uge(e){return xn(e)&&e.name==="AuthApiError"}class lG extends XI{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Sh extends XI{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class mf extends Sh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wge(e){return xn(e)&&e.name==="AuthSessionMissingError"}class iw extends Sh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ow extends Sh{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class sw extends Sh{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Vge(e){return xn(e)&&e.name==="AuthImplicitGrantRedirectError"}class j6 extends Sh{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DE extends Sh{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function S5(e){return xn(e)&&e.name==="AuthRetryableFetchError"}class N6 extends Sh{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ME extends Sh{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const iS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),C6=` 	
\r=`.split(""),Hge=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<C6.length;t+=1)e[C6[t].charCodeAt(0)]=-2;for(let t=0;t<iS.length;t+=1)e[iS[t].charCodeAt(0)]=t;return e})();function A6(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(iS[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(iS[n]),t.queuedBits-=6}}function cG(e,t,r){const n=Hge[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function P6(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Yge(o,n,r)};for(let o=0;o<e.length;o+=1)cG(e.charCodeAt(o),a,i);return t.join("")}function Gge(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Kge(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Gge(n,t)}}function Yge(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Xge(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)cG(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Jge(e){const t=[];return Kge(e,r=>t.push(r)),new Uint8Array(t)}function Qge(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>A6(a,r,n)),A6(null,r,n),t.join("")}function Zge(e){return Math.round(Date.now()/1e3)+e}function eve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const xc=()=>typeof window<"u"&&typeof document<"u",Mh={tested:!1,writable:!1},uG=()=>{if(!xc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mh.tested)return Mh.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Mh.tested=!0,Mh.writable=!0}catch{Mh.tested=!0,Mh.writable=!1}return Mh.writable};function tve(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const dG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>yu(()=>Promise.resolve().then(()=>Lv),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},rve=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Rh=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},of=async(e,t)=>{await e.removeItem(t)};class jj{constructor(){this.promise=new jj.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}jj.promiseConstructor=Promise;function _5(e){const t=e.split(".");if(t.length!==3)throw new ME("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Bge.test(t[n]))throw new ME("JWT not in base64url format");return{header:JSON.parse(P6(t[0])),payload:JSON.parse(P6(t[1])),signature:Xge(t[2]),raw:{header:t[0],payload:t[1]}}}async function nve(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ave(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function ive(e){return("0"+e.toString(16)).substr(-2)}function ove(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ive).join("")}async function sve(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function lve(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await sve(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ap(e,t,r=!1){const n=ove();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Vp(e,`${t}-code-verifier`,a);const i=await lve(n);return[i,n===i?"plain":"s256"]}const cve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uve(e){const t=e.headers.get(IE);if(!t||!t.match(cve))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function dve(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function fve(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hve=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pp(e){if(!hve.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function j5(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function E6(e){return JSON.parse(JSON.stringify(e))}var mve=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Kh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pve=[502,503,504];async function k6(e){var t;if(!rve(e))throw new DE(Kh(e),0);if(pve.includes(e.status))throw new DE(Kh(e),e.status);let r;try{r=await e.json()}catch(i){throw new lG(Kh(i),i)}let n;const a=uve(e);if(a&&a.getTime()>=sG["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new N6(Kh(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new mf}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new N6(Kh(r),e.status,r.weak_password.reasons);throw new qge(Kh(r),e.status||500,n)}const gve=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Mn(e,t,r,n){var a;const i=Object.assign({},n?.headers);i[IE]||(i[IE]=sG["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await vve(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function vve(e,t,r,n,a,i){const o=gve(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new DE(Kh(c),0)}if(l.ok||await k6(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await k6(c)}}function Ju(e){var t;let r=null;wve(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Zge(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function O6(e){const t=Ju(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _f(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function yve(e){return{data:e,error:null}}function xve(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=mve(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function bve(e){return e}function wve(e){return e.access_token&&e.refresh_token&&e.expires_in}const N5=["global","local","others"];var Sve=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class _ve{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=dG(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=N5[0]){if(N5.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${N5.join(", ")}`);try{return await Mn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Mn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_f})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Sve(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await Mn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:xve,redirectTo:r?.redirectTo})}catch(r){if(xn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Mn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_f})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Mn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:bve});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(xn(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Pp(t);try{return await Mn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_f})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Pp(t);try{return await Mn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:_f})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Pp(t);try{return await Mn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:_f})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Pp(t.userId);try{const{data:r,error:n}=await Mn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Pp(t.userId),Pp(t.id);try{return{data:await Mn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(xn(r))return{data:null,error:r};throw r}}}function T6(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function jve(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ep={debug:!!(globalThis&&uG()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fG extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Nve extends fG{}async function Cve(e,t,r){Ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ep.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Nve(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ep.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}jve();const Ave={url:Lge,storageKey:$ge,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fge,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function I6(e,t,r){return await r()}const kp={};class f0{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=f0.nextInstanceID,f0.nextInstanceID+=1,this.instanceID>0&&xc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Ave),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new _ve({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=dG(a.fetch),this.lock=a.lock||I6,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:xc()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Cve:this.lock=I6,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:uG()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=T6(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=T6(this.memoryStorage)),xc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=kp[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){kp[this.storageKey]=Object.assign(Object.assign({},kp[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=kp[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){kp[this.storageKey]=Object.assign(Object.assign({},kp[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oG}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=tve(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),xc()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Vge(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return xn(r)?{error:r}:{error:new lG("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Mn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ju}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(xn(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Ap(this.storage,this.storageKey)),i=await Mn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:d,password:f,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:g},xform:Ju})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Mn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(a=h?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Ju})}else throw new ow("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(xn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Mn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:O6})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Mn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:O6})}else throw new ow("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new iw}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(xn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:v,wallet:x,statement:b,options:w}=t;let _;if(xc())if(typeof x=="object")_=x;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))_=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const A=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let P;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")P=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)P=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)g=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),p=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const A=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=A}}try{const{data:v,error:x}=await Mn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Qge(p)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ju});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new iw}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(xn(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const r=await Rh(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Mn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ju});if(await of(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new iw}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(xn(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Mn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ju}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new iw}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(xn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ap(this.storage,this.storageKey));const{error:f}=await Mn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Mn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new ow("You must provide either an email or phone number.")}catch(l){if(xn(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Mn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ju});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(xn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ap(this.storage,this.storageKey)),await Mn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:yve})}catch(i){if(xn(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new mf;const{error:a}=await Mn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(xn(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Mn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Mn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new ow("You must provide either an email or phone number and a type")}catch(r){if(xn(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Rh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<w5:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Rh(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=j5()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Mn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_f}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mf}:await Mn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:_f})})}catch(r){if(xn(r))return Wge(r)&&(await this._removeSession(),await of(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new mf;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ap(this.storage,this.storageKey));const{data:u,error:d}=await Mn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:_f});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new mf;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=_5(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(xn(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new mf;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(xn(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!xc())throw new sw("No browser detected.");if(t.error||t.error_description||t.error_code)throw new sw(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new j6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sw("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new j6("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new sw("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Wp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(xn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Rh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Uge(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await of(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=eve(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ap(this.storage,this.storageKey,!0));try{return await Mn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(xn(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(xn(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Mn(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return xc()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(xn(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Mn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ave(async a=>(a>0&&await nve(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Mn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ju})),(a,i)=>{const o=200*Math.pow(2,a);return i&&S5(i)&&Date.now()+o-n<Wp})}catch(n){if(this._debug(r,"error",n),xn(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),xc()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Rh(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Rh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Vp(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o?.user)!==null&&t!==void 0?t:j5()}else if(a&&!a.user&&!a.user){const o=await Rh(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await of(this.storage,this.storageKey+"-user"),await Vp(this.storage,this.storageKey,a)):a.user=j5()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<w5;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${w5}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),S5(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new mf;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new jj;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new mf;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),xn(i)){const o={session:null,error:i};return S5(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vp(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=E6(a);await Vp(this.storage,this.storageKey,i)}else{const a=E6(r);await Vp(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await of(this.storage,this.storageKey),await of(this.storage,this.storageKey+"-code-verifier"),await of(this.storage,this.storageKey+"-user"),this.userStorage&&await of(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&xc()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wp);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Wp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Wp}ms, refresh threshold is ${TE} ticks`),a<=TE&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof fG)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xc()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ap(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Mn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Mn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Mn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(xn(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Mn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(xn(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=t?.factors||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_5(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+zge>a)return n;const{data:i,error:o}=await Mn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=_5(n);r?.allowExpired||dve(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=fve(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,Jge(`${l}.${c}`)))throw new ME("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(xn(n))return{data:null,error:n};throw n}}}f0.nextInstanceID=0;const Pve=f0;class Eve extends Pve{constructor(t){super(t)}}var kve=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Ove{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Mge(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Age,realtime:Ege,auth:Object.assign(Object.assign({},Pge),{storageKey:u}),global:Cge},f=Rge(n??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=Ige(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Gpe(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new _ge(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Npe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return kve(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Eve({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new uge(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tve=(e,t,r)=>new Ove(e,t,r);function Ive(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Ive()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const JI="https://dlfryxtyxqoacuunswuc.supabase.co",RE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZnJ5eHR5eHFvYWN1dW5zd3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODg0MzcsImV4cCI6MjA3MTQ2NDQzN30.AizQBbCE1p_xfAQ9T0Eha1anGzcFETcc__8AV4iaQTY";function Dve(){try{return(new URL(JI).host||"").split(".")[0]||""}catch{return""}}function Mve(){const e=Dve();return e?`sb-${e}-auth-token`:"sb-auth-token"}async function Rve(){try{if(typeof Kf<"u"&&Kf?.auth?.getSession){const e=new Promise((a,i)=>setTimeout(()=>i(new Error("getSession timeout")),1e3)),t=Kf.auth.getSession(),{data:r}=await Promise.race([t,e]),n=r?.session?.access_token;if(n)return console.debug("[Supabase Wrapper] Token obtido via getSession"),n}}catch(e){console.debug("[Supabase Wrapper] getSession falhou ou timeout:",e.message)}try{const e=Mve(),t=localStorage.getItem(e);if(t){const r=JSON.parse(t);if(r?.access_token)return console.debug("[Supabase Wrapper] Token obtido via localStorage"),r.access_token;if(r?.currentSession?.access_token)return console.debug("[Supabase Wrapper] Token obtido via localStorage (currentSession)"),r.currentSession.access_token}}catch(e){console.warn("[Supabase Wrapper] Erro ao ler localStorage:",e)}return console.warn("[Supabase Wrapper]  Nenhum token encontrado - usando anon key"),null}const Lve=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,n])=>{n!=null&&t.append(r,String(n))}),t.toString()},hG=async(e,t={})=>{const{method:r="GET",body:n,headers:a={},params:i={},signal:o,timeoutMs:l=8e3}=t,c=Lve(i),u=`${JI}/rest/v1/${e}${c?`?${c}`:""}`,d={apikey:RE,Authorization:`Bearer ${RE}`,"Content-Type":"application/json",Prefer:"return=representation",...a};try{const w=await Rve();w&&(d.Authorization=`Bearer ${w}`)}catch(w){console.warn("[Supabase Wrapper] Erro ao obter token de sesso:",w)}const f={method:r,headers:d};n&&(f.body=JSON.stringify(n)),o&&(f.signal=o);const h=new AbortController,m=setTimeout(()=>{try{h.abort("timeout")}catch{}},Math.max(2e3,l)),g=(()=>{if(!o)return h.signal;try{o.addEventListener("abort",()=>{try{h.abort("upstream-abort")}catch{}})}catch{}return h.signal})();f.signal=g;const p=Date.now();let v;try{v=await fetch(u,f)}finally{clearTimeout(m)}if(!v.ok){let w="";try{w=await v.text()}catch{}const _=Date.now()-p;throw new Error(`[Supabase Wrapper] HTTP ${v.status} (${_}ms) - ${w||"unknown error"}`)}const x=Date.now()-p;let b;try{b=await v.json()}catch(w){throw console.error(`[Supabase Wrapper] Erro ao parsear JSON de ${e}:`,w),new Error(`[Supabase Wrapper] JSON parse error: ${w.message}`)}return x>3e3?console.warn(`[Supabase Wrapper]  fetch ${e} LENTO (${x}ms)`):console.debug(`[Supabase Wrapper] fetch ${e} OK (${x}ms)`),{data:b,error:null}};class $ve{constructor(t){this.table=t,this.params={},this.selectColumns="*",this.signal=null}select(t="*"){return this.selectColumns=t,this.params.select=t,this}eq(t,r){return this.params[t]=`eq.${r}`,this}neq(t,r){return this.params[t]=`neq.${r}`,this}gt(t,r){return this.params[t]=`gt.${r}`,this}gte(t,r){return this.params[t]=`gte.${r}`,this}lt(t,r){return this.params[t]=`lt.${r}`,this}lte(t,r){return this.params[t]=`lte.${r}`,this}like(t,r){return this.params[t]=`like.${r}`,this}ilike(t,r){return this.params[t]=`ilike.${r}`,this}is(t,r){return this.params[t]=`is.${r}`,this}in(t,r){return this.params[t]=`in.(${r.join(",")})`,this}not(t,r,n){return this.params[t]=`not.${r}.${n}`,this}or(t){return this.params.or=`(${t})`,this}contains(t,r){return this.params[t]=`cs.{${r}}`,this}containedBy(t,r){return this.params[t]=`cd.{${r}}`,this}filter(t,r,n){return this.params[t]=`${r}.${n}`,this}order(t,r={}){const{ascending:n=!0}=r;return this.params.order=`${t}.${n?"asc":"desc"}`,this}limit(t){return this.params.limit=t,this}range(t,r){return this.params.offset=t,this.params.limit=r-t+1,this}single(){return this.params.limit=1,this.isSingle=!0,this}maybeSingle(){return this.params.limit=1,this.isMaybeSingle=!0,this}abortSignal(t){return this.signal=t,this}async then(t,r){try{const n=await hG(this.table,{params:this.params,signal:this.signal});this.isSingle&&n.data&&(n.data=n.data[0]||null),this.isMaybeSingle&&n.data&&(n.data=n.data[0]||null),t(n)}catch(n){r(n)}}}class Fve extends $ve{insert(t){return this.method="POST",this.body=Array.isArray(t)?t:[t],this}update(t){return this.method="PATCH",this.body=t,this}upsert(t,r={}){this.method="POST",this.body=Array.isArray(t)?t:[t];const n=r.ignoreDuplicates?"resolution=ignore-duplicates":"resolution=merge-duplicates",a=r.returning==="minimal"?"return=minimal":"return=representation";return this.headers={...this.headers||{},Prefer:`${n},${a}`},r.onConflict&&(this.params.on_conflict=r.onConflict),this}delete(){return this.method="DELETE",this}async then(t,r){try{const n=await hG(this.table,{method:this.method||"GET",body:this.body,params:this.params,signal:this.signal,headers:this.headers||{}});this.isSingle&&n.data&&(n.data=n.data[0]||null),this.isMaybeSingle&&n.data&&(n.data=n.data[0]||null),t(n)}catch(n){r(n)}}}const Kf={from(e){return new Fve(e)},auth:null,supabaseUrl:JI,supabaseKey:RE};typeof window<"u"&&(console.log("[Supabase Wrapper] Testando wrapper..."),Kf.from("empresas").select("id").limit(1).then(({data:e,error:t})=>{t?console.error("[Supabase Wrapper]  ERRO:",t):console.log("[Supabase Wrapper]  SUCESSO com WRAPPER:",e)}).catch(e=>{console.error("[Supabase Wrapper]  EXCEPTION:",e)}));const mG="https://dlfryxtyxqoacuunswuc.supabase.co",pG="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZnJ5eHR5eHFvYWN1dW5zd3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODg0MzcsImV4cCI6MjA3MTQ2NDQzN30.AizQBbCE1p_xfAQ9T0Eha1anGzcFETcc__8AV4iaQTY";console.log("[Supabase Init] URL:"," OK");console.log("[Supabase Init] Key:"," OK");console.log("[Supabase Init] Env Mode:","production");const nu=Tve(mG,pG,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0},global:{headers:{"X-Client-Info":"fluxo7arena-web"}}});try{typeof window<"u"&&Kf&&(Kf.auth=nu.auth)}catch{}const Pe={from:e=>Kf.from(e),auth:nu.auth,storage:nu.storage,functions:nu.functions,realtime:nu.realtime,channel:(...e)=>nu.channel(...e),removeChannel:(...e)=>nu.removeChannel(...e),removeAllChannels:()=>nu.removeAllChannels(),getChannels:()=>nu.getChannels(),supabaseUrl:mG,supabaseKey:pG};console.log("[Supabase Init] Modo:"," WRAPPER (produo)");console.log("[Supabase Init] Client criado:",!!Pe);typeof window<"u"&&(window.__supabase=Pe,window.__supabase_original=nu,window.__supabase_wrapper=Kf,console.log("[Supabase Init]  Exposto em window.__supabase"));const gG=y.createContext({}),io=()=>{const e=y.useContext(gG);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Bve=({children:e})=>{const[t,r]=y.useState(null),[n,a]=y.useState(null),[i,o]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState(!1),f=y.useRef(null),h=y.useRef(!1);y.useEffect(()=>{if((()=>{try{return sessionStorage.getItem("auth:forceLogout")==="1"}catch{return!1}})()){try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company")}catch{}r(null),a(null),o(null),d(!0),c(!1);try{sessionStorage.removeItem("auth:forceLogout")}catch{}try{Pe.auth.signOut({scope:"global"}).catch(()=>{})}catch{}return}try{const P=localStorage.getItem("auth:userProfile"),C=localStorage.getItem("auth:company");P&&a(JSON.parse(P)),C&&o(JSON.parse(C)),(P||C)&&d(!0)}catch(P){console.warn("AuthContext: falha ao hidratar cache local:",P)}(async()=>{try{const{data:{session:P},error:C}=await Pe.auth.getSession();C&&console.error("supabase.auth.getSession error:",C),P?.user?(r(P.user),d(!0),await m(P.user.id),f.current=P.user.id):d(!0)}catch(P){console.error("getSession exception:",P)}finally{c(!1)}})();const{data:j}=Pe.auth.onAuthStateChange(async(P,C)=>{console.log("[AuthContext] onAuthStateChange",{event:P,userId:C?.user?.id||null});try{if(P==="SIGNED_OUT"){try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company")}catch{}r(null),a(null),o(null),f.current=null,h.current=!1,c(!1),d(!0);return}const k=C?.user||null;r(k),d(!0),k?.id&&(await m(k.id),f.current=k.id,c(!1))}catch(k){console.error("onAuthStateChange handler error:",k),c(!1),d(!0)}}),A=setTimeout(()=>{c(P=>P&&!1),d(P=>P||!0)},12e3);return()=>{clearTimeout(A),j.subscription.unsubscribe()}},[]),y.useEffect(()=>{(async()=>{try{if(!u||!t)return;const _=!n,j=!!n&&!i&&!!n.codigo_empresa;(_||j)&&(await m(t.id),f.current=t.id)}catch{}})()},[u,t?.id,!!n,n?.codigo_empresa,!!i]),y.useEffect(()=>{const w=()=>{try{const A=localStorage.getItem("auth:userProfile"),P=localStorage.getItem("auth:company");if(A){const C=JSON.parse(A);(!n||!n.codigo_empresa)&&a(C)}if(P){const C=JSON.parse(P);(!i||!i.codigo_empresa)&&o(C)}}catch{}},_=()=>{w(),t?.id&&m(t.id).catch(()=>{})},j=()=>{document.visibilityState==="visible"&&_()};return window.addEventListener("focus",_),document.addEventListener("visibilitychange",j),()=>{window.removeEventListener("focus",_),document.removeEventListener("visibilitychange",j)}},[t?.id]);const m=async w=>{if(h.current){console.log("[AuthDebug] loadUserProfile:skip (already running)");return}h.current=!0;try{const _=[300,800,1600,3e3],j=C=>new Promise(k=>setTimeout(k,C)),A=async(C,k)=>{let R;try{const E=new Promise(T=>{R=setTimeout(()=>T({__timeout:!0}),k)});return await Promise.race([C,E])}finally{clearTimeout(R)}},P=1200;for(let C=0;C<=_.length;C++){console.log("[AuthDebug] loadUserProfile:start",{userId:w,attempt:C});try{console.log("[AuthDebug] querying colaboradores",{userId:w});const k=Pe.from("colaboradores").select("*").eq("id",w).single(),R=await A(k,P);if(R&&R.__timeout){console.warn("[AuthDebug] colaboradores:timeout, using usuarios fallback (inline)");try{console.log("[AuthDebug] fallback-inline: querying usuarios by id");const{data:T,error:M}=await Pe.from("usuarios").select("*").eq("id",w).maybeSingle();if(!M&&T){let z=null;if(T.codigo_empresa){console.log("[AuthDebug] fallback-inline: querying empresas by codigo",{codigo_empresa:T.codigo_empresa});const{data:W,error:$}=await Pe.from("empresas").select("*").eq("codigo_empresa",T.codigo_empresa).single();$?console.warn("[AuthDebug] fallback-inline: empresa error",{status:$.status,code:$.code,message:$.message}):(z=W,console.log("[AuthDebug] fallback-inline: empresa loaded"))}const V={id:w,nome:T.nome||null,cargo:T.papel||"user",codigo_empresa:T.codigo_empresa||null,_source:"usuarios"};a(V);try{localStorage.setItem("auth:userProfile",JSON.stringify(V))}catch{}if(z){o(z);try{localStorage.setItem("auth:company",JSON.stringify(z))}catch{}console.log("[AuthDebug] fallback-inline: set company from usuarios path")}else console.warn("[AuthDebug] fallback-inline: no company resolved; preserving previous company");return}M&&console.warn("[AuthDebug] fallback-inline: usuarios error",{status:M.status,code:M.code,message:M.message})}catch(T){console.warn("[AuthDebug] fallback-inline: unexpected error",T?.message||T)}if(C<_.length){await j(_[C]);continue}return}const{data:E,error:I}=R||{};if(console.log("[AuthDebug] colaboradores:success",{hasProfile:!!E,codigo_empresa:E?.codigo_empresa||null}),I){if(console.warn("[AuthDebug] colaboradores:error",{code:I.code,status:I.status,message:I.message}),I.code==="42P17"){if(C<_.length){await j(_[C]);continue}console.warn("RLS recursion (42P17) persistente ao carregar perfil. Prosseguindo sem alterar cache.");return}if([401,403].includes(Number(I.status))&&(console.warn("[AuthDebug] Erro de autorizao detectado, tentando fallback"),C<_.length)){await j(_[C]);continue}if(I.code==="PGRST116"){try{console.log("[AuthDebug] fallback: querying usuarios by id");const{data:M,error:z}=await Pe.from("usuarios").select("*").eq("id",w).maybeSingle();if(!z&&M){let V=null;if(M.codigo_empresa){console.log("[AuthDebug] fallback: querying empresas by codigo",{codigo_empresa:M.codigo_empresa});const{data:$,error:G}=await Pe.from("empresas").select("*").eq("codigo_empresa",M.codigo_empresa).single();G?console.warn("[AuthDebug] fallback: empresa error",{status:G.status,code:G.code,message:G.message}):(V=$,console.log("[AuthDebug] fallback: empresa loaded"))}const W={id:w,nome:M.nome||null,cargo:M.papel||"user",codigo_empresa:M.codigo_empresa||null,_source:"usuarios"};a(W);try{localStorage.setItem("auth:userProfile",JSON.stringify(W))}catch{}if(V){o(V);try{localStorage.setItem("auth:company",JSON.stringify(V))}catch{}console.log("[AuthDebug] fallback: set company from usuarios path")}else console.warn("[AuthDebug] fallback: no company resolved; preserving previous company");return}z&&console.warn("[AuthDebug] fallback: usuarios error",{status:z.status,code:z.code,message:z.message})}catch{}console.warn("AuthContext: perfil no encontrado (PGRST116) e fallback falhou; mantendo cache atual.");return}if([401,403,406].includes(Number(I.status))&&C<_.length){await j(_[C]);continue}throw I}if(!E){if(C<_.length){await j(_[C]);continue}return}a(E);try{localStorage.setItem("auth:userProfile",JSON.stringify(E))}catch{}if(E?.codigo_empresa){console.log("[AuthDebug] company: querying empresas by codigo from colaboradores",{codigo_empresa:E.codigo_empresa});const{data:T,error:M}=await Pe.from("empresas").select("*").eq("codigo_empresa",E.codigo_empresa).single();if(M){if([401,403,406].includes(Number(M.status))&&C<_.length){await j(_[C]);continue}console.warn("[AuthDebug] company: load error; preserving previous company",{status:M.status,code:M.code,message:M.message});return}else{o(T);try{localStorage.setItem("auth:company",JSON.stringify(T))}catch{}console.log("[AuthDebug] company: set from colaboradores path")}}else console.warn("[AuthDebug] company: no codigo_empresa available on profile; preserving previous company");return}catch(k){if(console.error("[AuthDebug] loadUserProfile:unexpected error",{message:k?.message,code:k?.code,status:k?.status}),C<_.length){await j(_[C]);continue}console.error("Error loading user profile:",k);return}}}finally{h.current=!1}},b={user:t,userProfile:n,company:i,loading:l,authReady:u,signUp:async(w,_,j,A=null)=>{try{const{data:P,error:C}=await Pe.auth.signUp({email:w,password:_});if(C)throw C;if(P?.user&&A){const{data:k,error:R}=await Pe.from("empresas").select("id, codigo_empresa").eq("codigo_empresa",A).single();if(R)throw new Error("Cdigo de empresa invlido. Verifique o cdigo informado.");const{error:E}=await Pe.from("colaboradores").insert({id:P.user.id,codigo_empresa:k.codigo_empresa,nome:j,cargo:"user",ativo:!0});if(E)throw E}return{data:P,error:null}}catch(P){let C="No foi possvel cadastrar. Verifique os dados e tente novamente.";const k=(P?.message||"").toLowerCase();return k.includes("user already registered")||k.includes("already registered")||k.includes("user already exists")?C="Email j cadastrado. Tente entrar ou redefinir a senha.":k.includes("password")&&k.includes("length")&&(C="Senha muito curta. Use ao menos 6 caracteres."),{data:null,error:new Error(C)}}},signIn:async(w,_)=>{try{const{data:j,error:A}=await Pe.auth.signInWithPassword({email:w,password:_});if(A){let P="No foi possvel entrar. Tente novamente.";const C=(A.message||"").toLowerCase(),k=A.status;return C.includes("invalid login")||C.includes("invalid credentials")||k===400?P="Email ou senha invlidos.":C.includes("email not confirmed")||C.includes("not confirmed")?P="Email no confirmado. Verifique sua caixa de entrada.":k===429?P="Muitas tentativas. Aguarde alguns minutos e tente novamente.":k>=500&&(P="Servio indisponvel no momento. Tente novamente mais tarde."),{data:null,error:new Error(P)}}return j.user&&await Pe.from("colaboradores").select("id").eq("id",j.user.id).single(),{data:j,error:null}}catch(j){return{data:null,error:j}}},signOut:async()=>{try{const w=Pe.auth.signOut({scope:"global"}),_=new Promise(j=>setTimeout(j,700));await Promise.race([w,_])}catch(w){console.warn("[AuthContext] signOut(): error during signOut",w?.message||w)}f.current=null,r(null),a(null),o(null),c(!1),d(!0);try{localStorage.removeItem("auth:userProfile"),localStorage.removeItem("auth:company"),localStorage.removeItem("clientes:list"),localStorage.removeItem("quadras:list"),localStorage.removeItem("agenda:courts"),localStorage.removeItem("agenda:selectedCourts"),localStorage.removeItem("agenda:viewFilter"),Object.keys(localStorage).filter(w=>w.startsWith("agenda:bookings:")).forEach(w=>localStorage.removeItem(w)),Object.keys(localStorage).filter(w=>w.startsWith("sb-")).forEach(w=>localStorage.removeItem(w)),Object.keys(sessionStorage).filter(w=>w.startsWith("sb-")).forEach(w=>sessionStorage.removeItem(w))}catch{}try{sessionStorage.setItem("auth:forceLogout","1")}catch{}try{window.location.replace("/")}catch{}return{error:null}},reloadCompany:async()=>{try{const w=n&&n.codigo_empresa?n.codigo_empresa:null;if(!w)return;const{data:_,error:j}=await Pe.from("empresas").select("*").eq("codigo_empresa",w).single();if(!j&&_){o(_);try{localStorage.setItem("auth:company",JSON.stringify(_))}catch{}}}catch{}}};return s.jsx(gG.Provider,{value:b,children:e})};function Bn(e){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(e)}function ao(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function qr(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function wn(e){qr(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Bn(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ri(e,t){qr(2,arguments);var r=wn(e),n=ao(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function Fc(e,t){qr(2,arguments);var r=wn(e),n=ao(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),i=new Date(r.getTime());i.setMonth(r.getMonth()+n+1,0);var o=i.getDate();return a>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),a),r)}function zve(e,t){qr(2,arguments);var r=wn(e).getTime(),n=ao(t);return new Date(r+n)}var qve={};function _h(){return qve}function Bc(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=_h(),f=ao((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=wn(e),m=h.getDay(),g=(m<f?7:0)+m-f;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h}function Bm(e){return qr(1,arguments),Bc(e,{weekStartsOn:1})}function Uve(e){qr(1,arguments);var t=wn(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var a=Bm(n),i=new Date(0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);var o=Bm(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Wve(e){qr(1,arguments);var t=Uve(e),r=new Date(0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);var n=Bm(r);return n}function h0(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function pl(e){qr(1,arguments);var t=wn(e);return t.setHours(0,0,0,0),t}var Vve=864e5;function ud(e,t){qr(2,arguments);var r=pl(e),n=pl(t),a=r.getTime()-h0(r),i=n.getTime()-h0(n);return Math.round((a-i)/Vve)}function LE(e,t){qr(2,arguments);var r=ao(t),n=r*7;return Ri(e,n)}function Hve(e,t){qr(2,arguments);var r=ao(t);return Fc(e,r*12)}function Gve(e){qr(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Bn(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(n){var a=wn(n);(r===void 0||r<a||isNaN(Number(a)))&&(r=a)}),r||new Date(NaN)}function Kve(e){qr(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Bn(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(n){var a=wn(n);(r===void 0||r>a||isNaN(a.getDate()))&&(r=a)}),r||new Date(NaN)}var vG=6e4,yG=36e5;function gs(e,t){qr(2,arguments);var r=pl(e),n=pl(t);return r.getTime()===n.getTime()}function QI(e){return qr(1,arguments),e instanceof Date||Bn(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Yve(e){if(qr(1,arguments),!QI(e)&&typeof e!="number")return!1;var t=wn(e);return!isNaN(Number(t))}function m0(e,t){qr(2,arguments);var r=wn(e),n=wn(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}var Xve=6048e5;function Jve(e,t,r){qr(2,arguments);var n=Bc(e,r),a=Bc(t,r),i=n.getTime()-h0(n),o=a.getTime()-h0(a);return Math.round((i-o)/Xve)}function $E(e){qr(1,arguments);var t=wn(e);return t.setHours(23,59,59,999),t}function ZI(e){qr(1,arguments);var t=wn(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Hs(e){qr(1,arguments);var t=wn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Qve(e){qr(1,arguments);var t=wn(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function e3(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=_h(),f=ao((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=wn(e),m=h.getDay(),g=(m<f?-7:0)+6-(m-f);return h.setDate(h.getDate()+g),h.setHours(23,59,59,999),h}function xG(e){return qr(1,arguments),e3(e,{weekStartsOn:1})}function Zve(e,t){qr(2,arguments);var r=ao(t);return zve(e,-r)}var eye=864e5;function tye(e){qr(1,arguments);var t=wn(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/eye)+1}function oS(e){qr(1,arguments);var t=1,r=wn(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function bG(e){qr(1,arguments);var t=wn(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=oS(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=oS(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function rye(e){qr(1,arguments);var t=bG(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=oS(r);return n}var nye=6048e5;function aye(e){qr(1,arguments);var t=wn(e),r=oS(t).getTime()-rye(t).getTime();return Math.round(r/nye)+1}function sS(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=_h(),f=ao((r=(n=(a=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=wn(e),m=h.getUTCDay(),g=(m<f?7:0)+m-f;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function wG(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=wn(e),f=d.getUTCFullYear(),h=_h(),m=ao((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,m),g.setUTCHours(0,0,0,0);var p=sS(g,t),v=new Date(0);v.setUTCFullYear(f,0,m),v.setUTCHours(0,0,0,0);var x=sS(v,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=x.getTime()?f:f-1}function iye(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=_h(),f=ao((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=wG(e,t),m=new Date(0);m.setUTCFullYear(h,0,f),m.setUTCHours(0,0,0,0);var g=sS(m,t);return g}var oye=6048e5;function sye(e,t){qr(1,arguments);var r=wn(e),n=sS(r,t).getTime()-iye(r,t).getTime();return Math.round(n/oye)+1}function va(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var lye={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return va(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):va(n+1,2)},d:function(t,r){return va(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return va(t.getUTCHours()%12||12,r.length)},H:function(t,r){return va(t.getUTCHours(),r.length)},m:function(t,r){return va(t.getUTCMinutes(),r.length)},s:function(t,r){return va(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return va(i,r.length)}};const sf=lye;var Op={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cye={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return sf.y(t,r)},Y:function(t,r,n,a){var i=wG(t,a),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return va(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):va(o,r.length)},R:function(t,r){var n=bG(t);return va(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return va(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return va(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return va(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return sf.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return va(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var i=sye(t,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):va(i,r.length)},I:function(t,r,n){var a=aye(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):va(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):sf.d(t,r)},D:function(t,r,n){var a=tye(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):va(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return va(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return va(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return va(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),i;switch(a===12?i=Op.noon:a===0?i=Op.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),i;switch(a>=17?i=Op.evening:a>=12?i=Op.afternoon:a>=4?i=Op.morning:i=Op.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return sf.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):sf.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):va(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):va(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):sf.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):sf.s(t,r)},S:function(t,r){return sf.S(t,r)},X:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return M6(o);case"XXXX":case"XX":return Yh(o);case"XXXXX":case"XXX":default:return Yh(o,":")}},x:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return M6(o);case"xxxx":case"xx":return Yh(o);case"xxxxx":case"xxx":default:return Yh(o,":")}},O:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+D6(o,":");case"OOOO":default:return"GMT"+Yh(o,":")}},z:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+D6(o,":");case"zzzz":default:return"GMT"+Yh(o,":")}},t:function(t,r,n,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return va(o,r.length)},T:function(t,r,n,a){var i=a._originalDate||t,o=i.getTime();return va(o,r.length)}};function D6(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var o=t||"";return r+String(a)+o+va(i,2)}function M6(e,t){if(e%60===0){var r=e>0?"-":"+";return r+va(Math.abs(e)/60,2)}return Yh(e,t)}function Yh(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),i=va(Math.floor(a/60),2),o=va(a%60,2);return n+i+r+o}const uye=cye;var R6=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},SG=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},dye=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return R6(t,r);var o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",R6(a,r)).replace("{{time}}",SG(i,r))},fye={p:SG,P:dye};const hye=fye;var mye=["D","DD"],pye=["YY","YYYY"];function gye(e){return mye.indexOf(e)!==-1}function vye(e){return pye.indexOf(e)!==-1}function L6(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var yye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xye=function(t,r,n){var a,i=yye[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};const bye=xye;function _g(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var wye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_ye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jye={date:_g({formats:wye,defaultWidth:"full"}),time:_g({formats:Sye,defaultWidth:"full"}),dateTime:_g({formats:_ye,defaultWidth:"full"})};const Nye=jye;var Cye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Aye=function(t,r,n,a){return Cye[t]};const Pye=Aye;function su(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var Eye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Oye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Iye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Dye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mye=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rye={ordinalNumber:Mye,era:su({values:Eye,defaultWidth:"wide"}),quarter:su({values:kye,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:su({values:Oye,defaultWidth:"wide"}),day:su({values:Tye,defaultWidth:"wide"}),dayPeriod:su({values:Iye,defaultWidth:"wide",formattingValues:Dye,defaultFormattingWidth:"wide"})};const Lye=Rye;function lu(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Fye(l,function(f){return f.test(o)}):$ye(l,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function $ye(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function Fye(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function _G(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var Bye=/^(\d+)(th|st|nd|rd)?/i,zye=/\d+/i,qye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uye={any:[/^b/i,/^(a|c)/i]},Wye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vye={any:[/1/i,/2/i,/3/i,/4/i]},Hye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Gye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qye={ordinalNumber:_G({matchPattern:Bye,parsePattern:zye,valueCallback:function(t){return parseInt(t,10)}}),era:lu({matchPatterns:qye,defaultMatchWidth:"wide",parsePatterns:Uye,defaultParseWidth:"any"}),quarter:lu({matchPatterns:Wye,defaultMatchWidth:"wide",parsePatterns:Vye,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:lu({matchPatterns:Hye,defaultMatchWidth:"wide",parsePatterns:Gye,defaultParseWidth:"any"}),day:lu({matchPatterns:Kye,defaultMatchWidth:"wide",parsePatterns:Yye,defaultParseWidth:"any"}),dayPeriod:lu({matchPatterns:Xye,defaultMatchWidth:"any",parsePatterns:Jye,defaultParseWidth:"any"})};const Zye=Qye;var exe={code:"en-US",formatDistance:bye,formatLong:Nye,formatRelative:Pye,localize:Lye,match:Zye,options:{weekStartsOn:0,firstWeekContainsDate:1}};const jG=exe;var txe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rxe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nxe=/^'([^]*?)'?$/,axe=/''/g,ixe=/[a-zA-Z]/;function Hr(e,t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,v,x,b,w,_;qr(2,arguments);var j=String(t),A=_h(),P=(n=(a=r?.locale)!==null&&a!==void 0?a:A.locale)!==null&&n!==void 0?n:jG,C=ao((i=(o=(l=(c=r?.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:A.firstWeekContainsDate)!==null&&o!==void 0?o:(f=A.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=ao((m=(g=(p=(v=r?.weekStartsOn)!==null&&v!==void 0?v:r==null||(x=r.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&p!==void 0?p:A.weekStartsOn)!==null&&g!==void 0?g:(w=A.locale)===null||w===void 0||(_=w.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&m!==void 0?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var R=wn(e);if(!Yve(R))throw new RangeError("Invalid time value");var E=h0(R),I=Zve(R,E),T={firstWeekContainsDate:C,weekStartsOn:k,locale:P,_originalDate:R},M=j.match(rxe).map(function(z){var V=z[0];if(V==="p"||V==="P"){var W=hye[V];return W(z,P.formatLong)}return z}).join("").match(txe).map(function(z){if(z==="''")return"'";var V=z[0];if(V==="'")return oxe(z);var W=uye[V];if(W)return!(r!=null&&r.useAdditionalWeekYearTokens)&&vye(z)&&L6(z,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&gye(z)&&L6(z,t,String(e)),W(I,z,P.localize,T);if(V.match(ixe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return z}).join("");return M}function oxe(e){var t=e.match(nxe);return t?t[1].replace(axe,"'"):e}function sxe(e){qr(1,arguments);var t=wn(e),r=t.getFullYear(),n=t.getMonth(),a=new Date(0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Wu(e){qr(1,arguments);var t=wn(e),r=t.getHours();return r}var lxe=6048e5;function cxe(e){qr(1,arguments);var t=wn(e),r=Bm(t).getTime()-Wve(t).getTime();return Math.round(r/lxe)+1}function Vu(e){qr(1,arguments);var t=wn(e),r=t.getMinutes();return r}function uxe(e){qr(1,arguments);var t=wn(e),r=t.getTime();return r}function dxe(e){return qr(1,arguments),Math.floor(uxe(e)/1e3)}function fxe(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=wn(e),f=d.getFullYear(),h=_h(),m=ao((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(f+1,0,m),g.setHours(0,0,0,0);var p=Bc(g,t),v=new Date(0);v.setFullYear(f,0,m),v.setHours(0,0,0,0);var x=Bc(v,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=x.getTime()?f:f-1}function hxe(e,t){var r,n,a,i,o,l,c,u;qr(1,arguments);var d=_h(),f=ao((r=(n=(a=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=fxe(e,t),m=new Date(0);m.setFullYear(h,0,f),m.setHours(0,0,0,0);var g=Bc(m,t);return g}var mxe=6048e5;function pxe(e,t){qr(1,arguments);var r=wn(e),n=Bc(r,t).getTime()-hxe(r,t).getTime();return Math.round(n/mxe)+1}function gxe(e){qr(1,arguments);var t=wn(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function vxe(e,t){return qr(1,arguments),Jve(gxe(e),Hs(e),t)+1}function FE(e,t){qr(2,arguments);var r=wn(e),n=wn(t);return r.getTime()>n.getTime()}function NG(e,t){qr(2,arguments);var r=wn(e),n=wn(t);return r.getTime()<n.getTime()}function $6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yxe(e,t){if(e){if(typeof e=="string")return $6(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$6(e,t):void 0}}function BE(e,t){return BE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},BE(e,t)}function xxe(e,t){if(Bn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bxe(e){var t=xxe(e,"string");return Bn(t)=="symbol"?t:t+""}function wxe(e,t,r){return(t=bxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t3(e,t){qr(2,arguments);var r=wn(e),n=wn(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Sxe(e,t){qr(2,arguments);var r=wn(e),n=wn(t);return r.getFullYear()===n.getFullYear()}function i2(e,t){qr(2,arguments);var r=ao(t);return Ri(e,-r)}function F6(e,t){var r;qr(1,arguments);var n=ao((r=t?.additionalDigits)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=Cxe(e),i;if(a.date){var o=Axe(a.date,n);i=Pxe(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),c=0,u;if(a.time&&(c=Exe(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(u=kxe(a.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(l+c),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(l+c+u)}var lw={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_xe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jxe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Nxe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Cxe(e){var t={},r=e.split(lw.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],lw.timeZoneDelimiter.test(t.date)&&(t.date=e.split(lw.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){var a=lw.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Axe(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Pxe(e,t){if(t===null)return new Date(NaN);var r=e.match(_xe);if(!r)return new Date(NaN);var n=!!r[4],a=Ey(r[1]),i=Ey(r[2])-1,o=Ey(r[3]),l=Ey(r[4]),c=Ey(r[5])-1;if(n)return Mxe(t,l,c)?Oxe(t,l,c):new Date(NaN);var u=new Date(0);return!Ixe(t,i,o)||!Dxe(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}function Ey(e){return e?parseInt(e):1}function Exe(e){var t=e.match(jxe);if(!t)return NaN;var r=C5(t[1]),n=C5(t[2]),a=C5(t[3]);return Rxe(r,n,a)?r*yG+n*vG+a*1e3:NaN}function C5(e){return e&&parseFloat(e.replace(",","."))||0}function kxe(e){if(e==="Z")return 0;var t=e.match(Nxe);if(!t)return 0;var r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Lxe(n,a)?r*(n*yG+a*vG):NaN}function Oxe(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var Txe=[31,null,31,30,31,30,31,31,30,31,30,31];function CG(e){return e%400===0||e%4===0&&e%100!==0}function Ixe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Txe[t]||(CG(e)?29:28))}function Dxe(e,t){return t>=1&&t<=(CG(e)?366:365)}function Mxe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Rxe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Lxe(e,t){return t>=0&&t<=59}function A5(e,t){qr(2,arguments);var r=wn(e),n=ao(t),a=r.getFullYear(),i=r.getDate(),o=new Date(0);o.setFullYear(a,n,15),o.setHours(0,0,0,0);var l=sxe(o);return r.setMonth(n,Math.min(i,l)),r}function B6(e,t){qr(2,arguments);var r=wn(e),n=ao(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(n),r)}const AG=y.createContext(),$xe=({children:e})=>{const{userProfile:t}=io(),[r,n]=y.useState([]),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(!1),d=y.useCallback(async()=>{if(t?.codigo_empresa)try{u(!0);const f=t.codigo_empresa,h=new Date,m=pl(h).toISOString(),g=$E(h).toISOString(),p=[],{data:v}=await Pe.from("produtos").select("nome, estoque, estoque_minimo, status").eq("codigo_empresa",f).not("estoque_minimo","is",null),x=(v||[]).filter(T=>{const M=Number(T.estoque||0),z=Number(T.estoque_minimo||0);return M<=z&&z>0});x.length>0&&p.push({tipo:"estoque",icone:"Package",cor:"danger",mensagem:`${x.length} produto${x.length>1?"s":""} com estoque baixo`,link:"/produtos"});const{data:b}=await Pe.from("agendamentos").select("id").eq("codigo_empresa",f).gte("inicio",m).lte("inicio",g);if(b&&b.length>0){const T=b.map(z=>z.id),{data:M}=await Pe.from("agendamento_participantes").select("id").eq("codigo_empresa",f).in("agendamento_id",T).eq("status_pagamento","Pendente");M&&M.length>0&&p.push({tipo:"pagamento",icone:"DollarSign",cor:"warning",mensagem:`${M.length} pagamento${M.length>1?"s":""} pendente${M.length>1?"s":""} em agendamentos de hoje`,link:"/agenda"})}const w=new Date;w.setHours(w.getHours()-3);const{data:_}=await Pe.from("comandas").select("id, aberto_em").eq("codigo_empresa",f).eq("status","open").lte("aberto_em",w.toISOString());_&&_.length>0&&p.push({tipo:"comanda",icone:"Clock",cor:"warning",mensagem:`${_.length} comanda${_.length>1?"s":""} aberta${_.length>1?"s":""} h mais de 3 horas`,link:"/vendas"});const j=new Date;j.setHours(j.getHours()-12);const{data:A}=await Pe.from("caixa_sessoes").select("id, aberto_em").eq("codigo_empresa",f).eq("status","open").lte("aberto_em",j.toISOString()).limit(1);A&&A.length>0&&p.push({tipo:"caixa",icone:"ShoppingCart",cor:"danger",mensagem:"Caixa aberto h mais de 12 horas",link:"/vendas"});const{data:P}=await Pe.from("mesas").select("id, nome, numero").eq("codigo_empresa",f).eq("status","awaiting-payment");if(P&&P.length>0){const T=P.map(z=>z.id),{data:M}=await Pe.from("comandas").select("id, mesa_id").eq("codigo_empresa",f).in("mesa_id",T).eq("status","open");if(M&&M.length>0){const z=M.map(G=>G.id),{data:V}=await Pe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",z),W={};(V||[]).forEach(G=>{const me=(Number(G.quantidade)||0)*(Number(G.preco_unitario)||0),de=Number(G.desconto)||0,L=me-de;W[G.comanda_id]=(W[G.comanda_id]||0)+L});const $=Object.values(W).filter(G=>G>100).length;$>0&&p.push({tipo:"mesa",icone:"Store",cor:"info",mensagem:`${$} mesa${$>1?"s":""} com saldo alto aguardando pagamento`,link:"/vendas"})}}const{data:C}=await Pe.from("clientes").select("id, nome, aniversario").eq("codigo_empresa",f).eq("status","Ativo").not("aniversario","is",null),k=Hr(h,"MM-dd"),R=(C||[]).filter(T=>T.aniversario?Hr(new Date(T.aniversario),"MM-dd")===k:!1);R.length>0&&p.push({tipo:"aniversario",icone:"Users",cor:"success",mensagem:` ${R.length} aniversariante${R.length>1?"s":""} hoje!`,link:"/clientes"});const E=[];for(let T=1;T<=7;T++){const M=new Date(h);M.setDate(M.getDate()+T),E.push(Hr(M,"MM-dd"))}const I=(C||[]).filter(T=>{if(!T.aniversario)return!1;const M=Hr(new Date(T.aniversario),"MM-dd");return E.includes(M)});I.length>0&&p.push({tipo:"aniversario-semana",icone:"CalendarPlus",cor:"purple",mensagem:` ${I.length} aniversariante${I.length>1?"s":""} esta semana`,link:"/clientes"}),console.log(" [AlertsContext] Alertas carregados:",p.length,p),n(p)}catch(f){console.error("[AlertsContext] Erro ao carregar alertas:",f)}finally{u(!1)}},[t?.codigo_empresa]);return y.useEffect(()=>{if(t?.codigo_empresa){d();const f=setInterval(()=>{d()},5*60*1e3);return()=>clearInterval(f)}},[t?.codigo_empresa,d]),s.jsx(AG.Provider,{value:{alerts:r,setAlerts:n,showModal:a,setShowModal:i,showBalloon:o,setShowBalloon:l,loading:c,loadAlerts:d},children:e})},PG=()=>{const e=y.useContext(AG);if(!e)throw new Error("useAlerts must be used within AlertsProvider");return e};function Fxe({onToggleSidebar:e,sidebarVisible:t,sidebarPinned:r}){const{toast:n}=ii(),{signOut:a,userProfile:i,company:o,user:l}=io(),{alerts:c,showModal:u,setShowModal:d}=PG(),f=Vc(),h=i?.nome||"Usurio",m=se.useMemo(()=>{const R=h.trim().split(/\s+/);return R.length>=2?`${R[0]} ${R[1]}`:h},[h]),g=i?.cargo||i?.papel||"";let p="";try{const R=localStorage.getItem("auth:company");if(R){const E=JSON.parse(R);p=E?.nome_fantasia||E?.razao_social||E?.nome||E?.codigoEmpresa||"";var v=E?.logo_url||""}}catch{}const x=o?.nome_fantasia||o?.razao_social||o?.nome||o?.codigoEmpresa||p||"Empresa no vinculada",b=o?.logo_url||(typeof v<"u"?v:""),w=se.useMemo(()=>o?.logo_url?`${o.logo_url}?v=${Date.now()}`:b||"",[o?.logo_url]),_=R=>({Package:Hg,DollarSign:Ls,CalendarCheck:dI,Clock:Wg,ShoppingCart:jb,Store:mI,Users:ps,CalendarPlus:fI,AlertTriangle:Ug,Info:DW})[R]||Ug,j=R=>({danger:"text-danger",warning:"text-warning",info:"text-info",success:"text-success",purple:"text-purple"})[R]||"text-warning",A=({alert:R,onClick:E})=>{const I=_(R.icone),T=j(R.cor);return s.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-white/5 transition-colors cursor-pointer group",onClick:E,children:[s.jsx(I,{className:`w-4 h-4 flex-shrink-0 ${T}`}),s.jsx("span",{className:"text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:R.mensagem}),R.link&&s.jsx(uI,{className:"w-3 h-3 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]})},P=async()=>{console.log("[Header] Logout button clicked",{at:new Date().toISOString(),userBefore:!!l});const{error:R}=await a();console.log("[Header] Logout completed",{error:R,userAfter:!!l}),n(R?{title:"Erro ao sair",description:"Ocorreu um erro ao fazer logout. Tente novamente.",variant:"destructive"}:{title:"Logout realizado",description:"Voc foi desconectado com sucesso.",variant:"default"})};new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});const C=js(),k=se.useMemo(()=>{try{const R=String(C?.pathname||"");if(R==="/"||R.startsWith("/dashboard"))return"";const I=[{key:"/agenda",label:"Agenda"},{key:"/clientes",label:"Clientes & Fornecedores"},{key:"/produtos",label:"Produtos"},{key:"/vendas",label:"Vendas"},{key:"/financeiro",label:"Financeiro"},{key:"/balcao",label:"Balco"},{key:"/cadastros",label:"Cadastros"},{key:"/quadras",label:"Quadras"},{key:"/equipe",label:"Equipe"},{key:"/finalizadoras",label:"Finalizadoras"},{key:"/empresas",label:"Empresas"},{key:"/configuracoes",label:"Configuraes"},{key:"/login",label:"Login"}].find(T=>R.startsWith(T.key));if(I)return I.label;if(typeof document<"u"){const T=String(document.title||"");return(T.includes(" - ")?T.split(" - ")[0]:T)||""}}catch{}return""},[C?.pathname]);return s.jsxs(ur.header,{animate:{opacity:1,y:0},transition:{duration:.6,ease:[.22,1,.36,1]},className:"relative bg-surface/80 backdrop-blur-sm text-text-primary h-[72px] flex-shrink-0 flex items-center justify-between px-8 border-b border-border shadow-[0_1px_0_RGBA(255,255,255,0.04)]",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ae,{variant:"ghost",size:"icon",onClick:e,"aria-label":t?"Ocultar barra lateral":"Mostrar barra lateral",className:"h-12 w-12 hover:bg-surface-2/60 transition-colors",children:s.jsx(mce,{className:`w-7 h-7 transition-colors ${t?"text-brand":"text-text-primary"}`})}),s.jsxs("div",{className:"group pl-3 pr-5 py-1.5 rounded-full border border-white/10 bg-gradient-to-b from-surface-2/60 to-surface/60 text-text-primary flex items-center gap-4 shadow-sm hover:border-white/20 transition-colors",title:x,children:[s.jsx("div",{className:"relative w-11 h-11 shrink-0 rounded-full overflow-hidden border border-white/10 ring-2 ring-brand/30 ring-offset-0 bg-surface-2/60 grid place-items-center shadow-[0_0_0_3px_RGBA(0,0,0,0.2)]",children:w?s.jsx("img",{src:w,alt:"Logo",className:"w-full h-full object-cover"}):s.jsx(Zle,{className:"w-6 h-6 opacity-80"})}),s.jsx("span",{className:"tracking-tight max-w-[240px] md:max-w-[320px] truncate leading-[44px] text-base text-text-primary font-semibold",children:x})]})]}),k?s.jsx("div",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 hidden md:block",children:s.jsx("h1",{className:"text-lg md:text-xl font-bold tracking-tight text-text-primary",children:k})}):null,s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ae,{variant:"ghost",size:"icon",onClick:()=>d(!0),className:"relative text-text-secondary hover:text-text-primary transition-colors duration-200",children:[s.jsx(V2,{className:"h-5 w-5"}),c.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:c.length})]}),s.jsx(Ae,{variant:"ghost",size:"icon",onClick:P,className:"text-text-secondary hover:text-brand hover:bg-brand/10 transition-colors duration-200",children:s.jsx(hce,{className:"h-5 w-5"})}),s.jsx("div",{className:"w-px h-8 bg-border mx-2"}),s.jsxs("div",{className:"group pl-4 pr-4 py-1.5 rounded-full border border-white/10 bg-gradient-to-b from-surface-2/60 to-surface/60 text-text-primary flex items-center gap-3 shadow-sm hover:border-white/20 transition-colors",title:`${m}  ${g}`,children:[s.jsx("span",{className:"text-sm font-semibold truncate max-w-[180px]",children:m}),s.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-brand/15 text-brand font-medium tracking-wide",children:g})]})]}),s.jsx(rn,{open:u,onOpenChange:d,children:s.jsxs(Yr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(nn,{children:s.jsxs(Xr,{className:"flex items-center gap-2",children:[s.jsx(V2,{className:"h-5 w-5 text-brand"}),"Todos os Alertas (",c.length,")"]})}),s.jsx("div",{className:"mt-4",children:c.length===0?s.jsx("p",{className:"text-sm text-text-muted text-center py-8",children:"Nenhum alerta no momento! "}):s.jsx("ul",{className:"space-y-2 text-sm",children:c.map((R,E)=>s.jsx(A,{alert:R,onClick:()=>{R.link&&(f(R.link),d(!1))}},E))})})]})})]})}const Mt=se.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Et("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));Mt.displayName="Input";var Bxe="Label",EG=y.forwardRef((e,t)=>s.jsx(Qr.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));EG.displayName=Bxe;var kG=EG;const zxe=LI("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ct=se.forwardRef(({className:e,...t},r)=>s.jsx(kG,{ref:r,className:Et(zxe(),e),...t}));ct.displayName=kG.displayName;const qxe=e=>{const t={"Invalid login credentials":"Email ou senha incorretos","Email not confirmed":"Email no confirmado","User not found":"Usurio no encontrado","Invalid email":"Email invlido","Password should be at least 6 characters":"A senha deve ter pelo menos 6 caracteres","Unable to validate email address: invalid format":"Formato de email invlido","Email rate limit exceeded":"Muitas tentativas. Aguarde alguns minutos","Network request failed":"Erro de conexo. Verifique sua internet","Failed to fetch":"Erro de conexo. Verifique sua internet"};if(t[e])return t[e];for(const[r,n]of Object.entries(t))if(e.includes(r))return n;return"Erro ao fazer login. Verifique suas credenciais e tente novamente."},Uxe=()=>{const[e,t]=y.useState(!1),[r,n]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState({email:"",password:""}),{signIn:c,user:u,authReady:d}=io(),{toast:f}=ii();y.useEffect(()=>{if(d&&u)try{const p=sessionStorage.getItem("auth:returnUrl");sessionStorage.removeItem("auth:returnUrl");const v=p||"/";console.log("[LoginPage] Redirecionando para:",v),window.location.replace(v)}catch{}},[d,!!u]);const h=p=>{l({...o,[p.target.name]:p.target.value}),a&&i("")},m=async p=>{p.preventDefault(),n(!0),i("");try{const v=await c(o.email,o.password);if(v.error)throw v.error;f({title:"Login realizado!",description:"Bem-vindo de volta!",variant:"default"});try{const x=sessionStorage.getItem("auth:returnUrl");sessionStorage.removeItem("auth:returnUrl");const b=x||"/";console.log("[LoginPage] Redirecionando aps login para:",b),window.location.replace(b)}catch{}}catch(v){const x=v.message||"Ocorreu um erro. Tente novamente.",b=qxe(x);i(b),f({title:"Erro",description:b,variant:"destructive"})}finally{n(!1)}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 sm:p-6",children:[s.jsx("div",{className:"absolute inset-0 bg-court-pattern opacity-[0.02] mix-blend-overlay"}),s.jsxs(ur.div,{variants:g,initial:"hidden",animate:"visible",className:"relative z-10 w-full max-w-md pb-20 sm:pb-0",children:[s.jsxs("div",{className:"fx-card",children:[s.jsx("div",{className:"text-center mb-6",children:s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-brand rounded-xl flex items-center justify-center mr-4",children:s.jsx(Cb,{className:"w-8 h-8 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-5xl font-extrabold",children:[s.jsx("span",{style:{color:"#FF6600"},children:"Fluxo"}),s.jsx("span",{style:{color:"#FFAA33"},children:"7"})]}),s.jsx("p",{className:"text-2xl font-semibold",style:{color:"#B0B0B0"},children:"Arena"})]})]})}),s.jsxs("form",{onSubmit:m,className:"space-y-5 sm:space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ct,{htmlFor:"email",className:"text-text-primary flex items-center gap-2 text-sm sm:text-base",children:[s.jsx(oE,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Email"]}),s.jsx(Mt,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:o.email,onChange:h,required:!0,className:"placeholder:text-[#B0B0B0] h-12 sm:h-10 text-base sm:text-sm"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ct,{htmlFor:"password",className:"text-text-primary flex items-center gap-2 text-sm sm:text-base",children:[s.jsx(Vg,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Senha"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Mt,{id:"password",name:"password",type:e?"text":"password",placeholder:"Sua senha",value:o.password,onChange:h,required:!0,className:"pr-10 placeholder:text-[#B0B0B0] h-12 sm:h-10 text-base sm:text-sm"}),s.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",children:e?s.jsx(Sb,{className:"w-5 h-5 sm:w-4 sm:h-4"}):s.jsx(_b,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]}),a&&s.jsx(ur.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-destructive/10 border border-destructive/30 text-destructive text-sm",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-base",children:""}),s.jsx("span",{className:"flex-1",children:a})]})}),s.jsx(Ae,{type:"submit",className:"w-full h-12 sm:h-10 text-base sm:text-sm",disabled:r,children:r?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fce,{className:"w-4 h-4"}),"Entrar"]})})]})]}),s.jsx("p",{className:"mt-4 text-center text-xs text-text-muted opacity-70",children:" 2025 Fluxo7 Arena  Todos os direitos reservados."})]})]})})},Wxe=({children:e})=>{const{user:t,authReady:r}=io(),n=js();return y.useEffect(()=>{if(r&&!t&&n.pathname!=="/login")try{sessionStorage.setItem("auth:returnUrl",n.pathname+n.search),console.log("[ProtectedRoute] Salvando rota de retorno:",n.pathname+n.search)}catch(a){console.warn("[ProtectedRoute] Erro ao salvar rota de retorno:",a)}},[r,t,n.pathname,n.search]),r?t?e:s.jsx(Uxe,{}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-brand border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-text-primary font-medium",children:"Carregando..."})]})})};var Vxe=Array.isArray,Ys=Vxe,Hxe=typeof Ko=="object"&&Ko&&Ko.Object===Object&&Ko,OG=Hxe,Gxe=OG,Kxe=typeof self=="object"&&self&&self.Object===Object&&self,Yxe=Gxe||Kxe||Function("return this")(),Ou=Yxe,Xxe=Ou,Jxe=Xxe.Symbol,Db=Jxe,z6=Db,TG=Object.prototype,Qxe=TG.hasOwnProperty,Zxe=TG.toString,ky=z6?z6.toStringTag:void 0;function e0e(e){var t=Qxe.call(e,ky),r=e[ky];try{e[ky]=void 0;var n=!0}catch{}var a=Zxe.call(e);return n&&(t?e[ky]=r:delete e[ky]),a}var t0e=e0e,r0e=Object.prototype,n0e=r0e.toString;function a0e(e){return n0e.call(e)}var i0e=a0e,q6=Db,o0e=t0e,s0e=i0e,l0e="[object Null]",c0e="[object Undefined]",U6=q6?q6.toStringTag:void 0;function u0e(e){return e==null?e===void 0?c0e:l0e:U6&&U6 in Object(e)?o0e(e):s0e(e)}var Wd=u0e;function d0e(e){return e!=null&&typeof e=="object"}var Vd=d0e,f0e=Wd,h0e=Vd,m0e="[object Symbol]";function p0e(e){return typeof e=="symbol"||h0e(e)&&f0e(e)==m0e}var Fv=p0e,g0e=Ys,v0e=Fv,y0e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x0e=/^\w*$/;function b0e(e,t){if(g0e(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||v0e(e)?!0:x0e.test(e)||!y0e.test(e)||t!=null&&e in Object(t)}var r3=b0e;function w0e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var jh=w0e;const Bv=Gn(jh);var S0e=Wd,_0e=jh,j0e="[object AsyncFunction]",N0e="[object Function]",C0e="[object GeneratorFunction]",A0e="[object Proxy]";function P0e(e){if(!_0e(e))return!1;var t=S0e(e);return t==N0e||t==C0e||t==j0e||t==A0e}var n3=P0e;const Jr=Gn(n3);var E0e=Ou,k0e=E0e["__core-js_shared__"],O0e=k0e,P5=O0e,W6=function(){var e=/[^.]+$/.exec(P5&&P5.keys&&P5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function T0e(e){return!!W6&&W6 in e}var I0e=T0e,D0e=Function.prototype,M0e=D0e.toString;function R0e(e){if(e!=null){try{return M0e.call(e)}catch{}try{return e+""}catch{}}return""}var IG=R0e,L0e=n3,$0e=I0e,F0e=jh,B0e=IG,z0e=/[\\^$.*+?()[\]{}|]/g,q0e=/^\[object .+?Constructor\]$/,U0e=Function.prototype,W0e=Object.prototype,V0e=U0e.toString,H0e=W0e.hasOwnProperty,G0e=RegExp("^"+V0e.call(H0e).replace(z0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K0e(e){if(!F0e(e)||$0e(e))return!1;var t=L0e(e)?G0e:q0e;return t.test(B0e(e))}var Y0e=K0e;function X0e(e,t){return e?.[t]}var J0e=X0e,Q0e=Y0e,Z0e=J0e;function ebe(e,t){var r=Z0e(e,t);return Q0e(r)?r:void 0}var lp=ebe,tbe=lp,rbe=tbe(Object,"create"),Nj=rbe,V6=Nj;function nbe(){this.__data__=V6?V6(null):{},this.size=0}var abe=nbe;function ibe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var obe=ibe,sbe=Nj,lbe="__lodash_hash_undefined__",cbe=Object.prototype,ube=cbe.hasOwnProperty;function dbe(e){var t=this.__data__;if(sbe){var r=t[e];return r===lbe?void 0:r}return ube.call(t,e)?t[e]:void 0}var fbe=dbe,hbe=Nj,mbe=Object.prototype,pbe=mbe.hasOwnProperty;function gbe(e){var t=this.__data__;return hbe?t[e]!==void 0:pbe.call(t,e)}var vbe=gbe,ybe=Nj,xbe="__lodash_hash_undefined__";function bbe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ybe&&t===void 0?xbe:t,this}var wbe=bbe,Sbe=abe,_be=obe,jbe=fbe,Nbe=vbe,Cbe=wbe;function zv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zv.prototype.clear=Sbe;zv.prototype.delete=_be;zv.prototype.get=jbe;zv.prototype.has=Nbe;zv.prototype.set=Cbe;var Abe=zv;function Pbe(){this.__data__=[],this.size=0}var Ebe=Pbe;function kbe(e,t){return e===t||e!==e&&t!==t}var a3=kbe,Obe=a3;function Tbe(e,t){for(var r=e.length;r--;)if(Obe(e[r][0],t))return r;return-1}var Cj=Tbe,Ibe=Cj,Dbe=Array.prototype,Mbe=Dbe.splice;function Rbe(e){var t=this.__data__,r=Ibe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Mbe.call(t,r,1),--this.size,!0}var Lbe=Rbe,$be=Cj;function Fbe(e){var t=this.__data__,r=$be(t,e);return r<0?void 0:t[r][1]}var Bbe=Fbe,zbe=Cj;function qbe(e){return zbe(this.__data__,e)>-1}var Ube=qbe,Wbe=Cj;function Vbe(e,t){var r=this.__data__,n=Wbe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Hbe=Vbe,Gbe=Ebe,Kbe=Lbe,Ybe=Bbe,Xbe=Ube,Jbe=Hbe;function qv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qv.prototype.clear=Gbe;qv.prototype.delete=Kbe;qv.prototype.get=Ybe;qv.prototype.has=Xbe;qv.prototype.set=Jbe;var Aj=qv,Qbe=lp,Zbe=Ou,e1e=Qbe(Zbe,"Map"),i3=e1e,H6=Abe,t1e=Aj,r1e=i3;function n1e(){this.size=0,this.__data__={hash:new H6,map:new(r1e||t1e),string:new H6}}var a1e=n1e;function i1e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var o1e=i1e,s1e=o1e;function l1e(e,t){var r=e.__data__;return s1e(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Pj=l1e,c1e=Pj;function u1e(e){var t=c1e(this,e).delete(e);return this.size-=t?1:0,t}var d1e=u1e,f1e=Pj;function h1e(e){return f1e(this,e).get(e)}var m1e=h1e,p1e=Pj;function g1e(e){return p1e(this,e).has(e)}var v1e=g1e,y1e=Pj;function x1e(e,t){var r=y1e(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var b1e=x1e,w1e=a1e,S1e=d1e,_1e=m1e,j1e=v1e,N1e=b1e;function Uv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Uv.prototype.clear=w1e;Uv.prototype.delete=S1e;Uv.prototype.get=_1e;Uv.prototype.has=j1e;Uv.prototype.set=N1e;var o3=Uv,DG=o3,C1e="Expected a function";function s3(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(C1e);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(s3.Cache||DG),r}s3.Cache=DG;var MG=s3;const A1e=Gn(MG);var P1e=MG,E1e=500;function k1e(e){var t=P1e(e,function(n){return r.size===E1e&&r.clear(),n}),r=t.cache;return t}var O1e=k1e,T1e=O1e,I1e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D1e=/\\(\\)?/g,M1e=T1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(I1e,function(r,n,a,i){t.push(a?i.replace(D1e,"$1"):n||r)}),t}),R1e=M1e;function L1e(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var l3=L1e,G6=Db,$1e=l3,F1e=Ys,B1e=Fv,z1e=1/0,K6=G6?G6.prototype:void 0,Y6=K6?K6.toString:void 0;function RG(e){if(typeof e=="string")return e;if(F1e(e))return $1e(e,RG)+"";if(B1e(e))return Y6?Y6.call(e):"";var t=e+"";return t=="0"&&1/e==-z1e?"-0":t}var q1e=RG,U1e=q1e;function W1e(e){return e==null?"":U1e(e)}var LG=W1e,V1e=Ys,H1e=r3,G1e=R1e,K1e=LG;function Y1e(e,t){return V1e(e)?e:H1e(e,t)?[e]:G1e(K1e(e))}var $G=Y1e,X1e=Fv,J1e=1/0;function Q1e(e){if(typeof e=="string"||X1e(e))return e;var t=e+"";return t=="0"&&1/e==-J1e?"-0":t}var Ej=Q1e,Z1e=$G,ewe=Ej;function twe(e,t){t=Z1e(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ewe(t[r++])];return r&&r==n?e:void 0}var c3=twe,rwe=c3;function nwe(e,t,r){var n=e==null?void 0:rwe(e,t);return n===void 0?r:n}var FG=nwe;const bl=Gn(FG);function awe(e){return e==null}var iwe=awe;const un=Gn(iwe);var owe=Wd,swe=Ys,lwe=Vd,cwe="[object String]";function uwe(e){return typeof e=="string"||!swe(e)&&lwe(e)&&owe(e)==cwe}var dwe=uwe;const zm=Gn(dwe);var BG={exports:{}},xa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3=Symbol.for("react.element"),d3=Symbol.for("react.portal"),kj=Symbol.for("react.fragment"),Oj=Symbol.for("react.strict_mode"),Tj=Symbol.for("react.profiler"),Ij=Symbol.for("react.provider"),Dj=Symbol.for("react.context"),fwe=Symbol.for("react.server_context"),Mj=Symbol.for("react.forward_ref"),Rj=Symbol.for("react.suspense"),Lj=Symbol.for("react.suspense_list"),$j=Symbol.for("react.memo"),Fj=Symbol.for("react.lazy"),hwe=Symbol.for("react.offscreen"),zG;zG=Symbol.for("react.module.reference");function ic(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case u3:switch(e=e.type,e){case kj:case Tj:case Oj:case Rj:case Lj:return e;default:switch(e=e&&e.$$typeof,e){case fwe:case Dj:case Mj:case Fj:case $j:case Ij:return e;default:return t}}case d3:return t}}}xa.ContextConsumer=Dj;xa.ContextProvider=Ij;xa.Element=u3;xa.ForwardRef=Mj;xa.Fragment=kj;xa.Lazy=Fj;xa.Memo=$j;xa.Portal=d3;xa.Profiler=Tj;xa.StrictMode=Oj;xa.Suspense=Rj;xa.SuspenseList=Lj;xa.isAsyncMode=function(){return!1};xa.isConcurrentMode=function(){return!1};xa.isContextConsumer=function(e){return ic(e)===Dj};xa.isContextProvider=function(e){return ic(e)===Ij};xa.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===u3};xa.isForwardRef=function(e){return ic(e)===Mj};xa.isFragment=function(e){return ic(e)===kj};xa.isLazy=function(e){return ic(e)===Fj};xa.isMemo=function(e){return ic(e)===$j};xa.isPortal=function(e){return ic(e)===d3};xa.isProfiler=function(e){return ic(e)===Tj};xa.isStrictMode=function(e){return ic(e)===Oj};xa.isSuspense=function(e){return ic(e)===Rj};xa.isSuspenseList=function(e){return ic(e)===Lj};xa.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kj||e===Tj||e===Oj||e===Rj||e===Lj||e===hwe||typeof e=="object"&&e!==null&&(e.$$typeof===Fj||e.$$typeof===$j||e.$$typeof===Ij||e.$$typeof===Dj||e.$$typeof===Mj||e.$$typeof===zG||e.getModuleId!==void 0)};xa.typeOf=ic;BG.exports=xa;var mwe=BG.exports,pwe=Wd,gwe=Vd,vwe="[object Number]";function ywe(e){return typeof e=="number"||gwe(e)&&pwe(e)==vwe}var qG=ywe;const xwe=Gn(qG);var bwe=qG;function wwe(e){return bwe(e)&&e!=+e}var Swe=wwe;const Wv=Gn(Swe);var vs=function(t){return t===0?0:t>0?1:-1},um=function(t){return zm(t)&&t.indexOf("%")===t.length-1},Xt=function(t){return xwe(t)&&!Wv(t)},_we=function(t){return un(t)},no=function(t){return Xt(t)||zm(t)},jwe=0,cp=function(t){var r=++jwe;return"".concat(t||"").concat(r)},ys=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xt(t)&&!zm(t))return n;var i;if(um(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Wv(i)&&(i=n),a&&i>r&&(i=r),i},jf=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Nwe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},eo=function(t,r){return Xt(t)&&Xt(r)?function(n){return t+n*(r-t)}:function(){return r}};function lS(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):bl(n,t))===r})}var Cwe=function(t,r){return Xt(t)&&Xt(r)?t-r:zm(t)&&zm(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function jg(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function zE(e){"@babel/helpers - typeof";return zE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zE(e)}var Awe=["viewBox","children"],Pwe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],X6=["points","pathLength"],E5={svg:Awe,polygon:X6,polyline:X6},f3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cS=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(y.isValidElement(t)&&(n=t.props),!Bv(n))return null;var a={};return Object.keys(n).forEach(function(i){f3.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Ewe=function(t,r,n){return function(a){return t(r,n,a),null}},qm=function(t,r,n){if(!Bv(t)||zE(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];f3.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Ewe(o,r,n))}),a},kwe=["children"],Owe=["children"];function J6(e,t){if(e==null)return{};var r=Twe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Twe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qE(e){"@babel/helpers - typeof";return qE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qE(e)}var Q6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Nd=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Z6=null,k5=null,h3=function e(t){if(t===Z6&&Array.isArray(k5))return k5;var r=[];return y.Children.forEach(t,function(n){un(n)||(mwe.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),k5=r,Z6=t,r};function wl(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Nd(a)}):n=[Nd(t)],h3(e).forEach(function(a){var i=bl(a,"type.displayName")||bl(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ul(e,t){var r=wl(e,t);return r&&r[0]}var e$=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Xt(n)||n<=0||!Xt(a)||a<=0)},Iwe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Dwe=function(t){return t&&t.type&&zm(t.type)&&Iwe.indexOf(t.type)>=0},UG=function(t){return t&&qE(t)==="object"&&"clipDot"in t},Mwe=function(t,r,n,a){var i,o=(i=E5?.[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Jr(t)&&(a&&o.includes(r)||Pwe.includes(r))||n&&f3.includes(r)},$r=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(y.isValidElement(t)&&(a=t.props),!Bv(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Mwe((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},UE=function e(t,r){if(t===r)return!0;var n=y.Children.count(t);if(n!==y.Children.count(r))return!1;if(n===0)return!0;if(n===1)return t$(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!t$(i,o))return!1}return!0},t$=function(t,r){if(un(t)&&un(r))return!0;if(!un(t)&&!un(r)){var n=t.props||{},a=n.children,i=J6(n,kwe),o=r.props||{},l=o.children,c=J6(o,Owe);return a&&l?jg(i,c)&&UE(a,l):!a&&!l?jg(i,c):!1}return!1},r$=function(t,r){var n=[],a={};return h3(t).forEach(function(i,o){if(Dwe(i))n.push(i);else if(i){var l=Nd(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},Rwe=function(t){var r=t&&t.type;return r&&Q6[r]?Q6[r]:null},Lwe=function(t,r){return h3(r).indexOf(t)},$we=["children","width","height","viewBox","className","style","title","desc"];function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WE.apply(this,arguments)}function Fwe(e,t){if(e==null)return{};var r=Bwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function VE(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Fwe(e,$we),d=a||{width:r,height:n,x:0,y:0},f=dn("recharts-surface",i);return se.createElement("svg",WE({},$r(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),se.createElement("title",null,l),se.createElement("desc",null,c),t)}var zwe=["children","className"];function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HE.apply(this,arguments)}function qwe(e,t){if(e==null)return{};var r=Uwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Uwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Rn=se.forwardRef(function(e,t){var r=e.children,n=e.className,a=qwe(e,zwe),i=dn("recharts-layer",n);return se.createElement("g",HE({className:i},$r(a,!0),{ref:t}),r)}),Rc=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Wwe(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var Vwe=Wwe,Hwe=Vwe;function Gwe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Hwe(e,t,r)}var Kwe=Gwe,Ywe="\\ud800-\\udfff",Xwe="\\u0300-\\u036f",Jwe="\\ufe20-\\ufe2f",Qwe="\\u20d0-\\u20ff",Zwe=Xwe+Jwe+Qwe,e2e="\\ufe0e\\ufe0f",t2e="\\u200d",r2e=RegExp("["+t2e+Ywe+Zwe+e2e+"]");function n2e(e){return r2e.test(e)}var WG=n2e;function a2e(e){return e.split("")}var i2e=a2e,VG="\\ud800-\\udfff",o2e="\\u0300-\\u036f",s2e="\\ufe20-\\ufe2f",l2e="\\u20d0-\\u20ff",c2e=o2e+s2e+l2e,u2e="\\ufe0e\\ufe0f",d2e="["+VG+"]",GE="["+c2e+"]",KE="\\ud83c[\\udffb-\\udfff]",f2e="(?:"+GE+"|"+KE+")",HG="[^"+VG+"]",GG="(?:\\ud83c[\\udde6-\\uddff]){2}",KG="[\\ud800-\\udbff][\\udc00-\\udfff]",h2e="\\u200d",YG=f2e+"?",XG="["+u2e+"]?",m2e="(?:"+h2e+"(?:"+[HG,GG,KG].join("|")+")"+XG+YG+")*",p2e=XG+YG+m2e,g2e="(?:"+[HG+GE+"?",GE,GG,KG,d2e].join("|")+")",v2e=RegExp(KE+"(?="+KE+")|"+g2e+p2e,"g");function y2e(e){return e.match(v2e)||[]}var x2e=y2e,b2e=i2e,w2e=WG,S2e=x2e;function _2e(e){return w2e(e)?S2e(e):b2e(e)}var j2e=_2e,N2e=Kwe,C2e=WG,A2e=j2e,P2e=LG;function E2e(e){return function(t){t=P2e(t);var r=C2e(t)?A2e(t):void 0,n=r?r[0]:t.charAt(0),a=r?N2e(r,1).join(""):t.slice(1);return n[e]()+a}}var k2e=E2e,O2e=k2e,T2e=O2e("toUpperCase"),I2e=T2e;const Bj=Gn(I2e);function La(e){return function(){return e}}const JG=Math.cos,uS=Math.sin,Gc=Math.sqrt,dS=Math.PI,zj=2*dS,YE=Math.PI,XE=2*YE,Xh=1e-6,D2e=XE-Xh;function QG(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function M2e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return QG;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class R2e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?QG:M2e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Xh)if(!(Math.abs(f*c-u*d)>Xh)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,p=c*c+u*u,v=m*m+g*g,x=Math.sqrt(p),b=Math.sqrt(h),w=i*Math.tan((YE-Math.acos((p+h-v)/(2*x*b)))/2),_=w/b,j=w/x;Math.abs(_-1)>Xh&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xh||Math.abs(this._y1-d)>Xh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%XE+XE),h>D2e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Xh&&this._append`A${n},${n},0,${+(h>=YE)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function m3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new R2e(t)}function p3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZG(e){this._context=e}ZG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qj(e){return new ZG(e)}function eK(e){return e[0]}function tK(e){return e[1]}function rK(e,t){var r=La(!0),n=null,a=qj,i=null,o=m3(l);e=typeof e=="function"?e:e===void 0?eK:La(e),t=typeof t=="function"?t:t===void 0?tK:La(t);function l(c){var u,d=(c=p3(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:La(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:La(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:La(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function cw(e,t,r){var n=null,a=La(!0),i=null,o=qj,l=null,c=m3(u);e=typeof e=="function"?e:e===void 0?eK:La(+e),t=typeof t=="function"?t:La(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?tK:La(+r);function u(f){var h,m,g,p=(f=p3(f)).length,v,x=!1,b,w=new Array(p),_=new Array(p);for(i==null&&(l=o(b=c())),h=0;h<=p;++h){if(!(h<p&&a(v=f[h],h,f))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],_[g]);l.lineEnd(),l.areaEnd()}x&&(w[h]=+e(v,h,f),_[h]=+t(v,h,f),l.point(n?+n(v,h,f):w[h],r?+r(v,h,f):_[h]))}if(b)return l=null,b+""||null}function d(){return rK().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:La(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:La(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:La(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:La(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:La(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:La(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:La(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class nK{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function L2e(e){return new nK(e,!0)}function $2e(e){return new nK(e,!1)}const g3={draw(e,t){const r=Gc(t/dS);e.moveTo(r,0),e.arc(0,0,r,0,zj)}},F2e={draw(e,t){const r=Gc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},aK=Gc(1/3),B2e=aK*2,z2e={draw(e,t){const r=Gc(t/B2e),n=r*aK;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},q2e={draw(e,t){const r=Gc(t),n=-r/2;e.rect(n,n,r,r)}},U2e=.8908130915292852,iK=uS(dS/10)/uS(7*dS/10),W2e=uS(zj/10)*iK,V2e=-JG(zj/10)*iK,H2e={draw(e,t){const r=Gc(t*U2e),n=W2e*r,a=V2e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=zj*i/5,l=JG(o),c=uS(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},O5=Gc(3),G2e={draw(e,t){const r=-Gc(t/(O5*3));e.moveTo(0,r*2),e.lineTo(-O5*r,-r),e.lineTo(O5*r,-r),e.closePath()}},Rl=-.5,Ll=Gc(3)/2,JE=1/Gc(12),K2e=(JE/2+1)*3,Y2e={draw(e,t){const r=Gc(t/K2e),n=r/2,a=r*JE,i=n,o=r*JE+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Rl*n-Ll*a,Ll*n+Rl*a),e.lineTo(Rl*i-Ll*o,Ll*i+Rl*o),e.lineTo(Rl*l-Ll*c,Ll*l+Rl*c),e.lineTo(Rl*n+Ll*a,Rl*a-Ll*n),e.lineTo(Rl*i+Ll*o,Rl*o-Ll*i),e.lineTo(Rl*l+Ll*c,Rl*c-Ll*l),e.closePath()}};function X2e(e,t){let r=null,n=m3(a);e=typeof e=="function"?e:La(e||g3),t=typeof t=="function"?t:La(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:La(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:La(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function fS(){}function hS(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function oK(e){this._context=e}oK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J2e(e){return new oK(e)}function sK(e){this._context=e}sK.prototype={areaStart:fS,areaEnd:fS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:hS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q2e(e){return new sK(e)}function lK(e){this._context=e}lK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:hS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Z2e(e){return new lK(e)}function cK(e){this._context=e}cK.prototype={areaStart:fS,areaEnd:fS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function eSe(e){return new cK(e)}function n$(e){return e<0?-1:1}function a$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(n$(i)+n$(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function i$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function T5(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function mS(e){this._context=e}mS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:T5(this,this._t0,i$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,T5(this,i$(this,r=a$(this,e,t)),r);break;default:T5(this,this._t0,r=a$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function uK(e){this._context=new dK(e)}(uK.prototype=Object.create(mS.prototype)).point=function(e,t){mS.prototype.point.call(this,t,e)};function dK(e){this._context=e}dK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function tSe(e){return new mS(e)}function rSe(e){return new uK(e)}function fK(e){this._context=e}fK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=o$(e),a=o$(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function o$(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function nSe(e){return new fK(e)}function Uj(e,t){this._context=e,this._t=t}Uj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function aSe(e){return new Uj(e,.5)}function iSe(e){return new Uj(e,0)}function oSe(e){return new Uj(e,1)}function Xg(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function QE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function sSe(e,t){return e[t]}function lSe(e){const t=[];return t.key=e,t}function cSe(){var e=La([]),t=QE,r=Xg,n=sSe;function a(i){var o=Array.from(e.apply(this,arguments),lSe),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=p3(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:La(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:La(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?QE:typeof i=="function"?i:La(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Xg,a):r},a}function uSe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Xg(e,t)}}function dSe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Xg(e,t)}}function fSe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],v=p[n][1]||0,x=p[n-1][1]||0;m+=v-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Xg(e,t)}}function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}var hSe=["type","size","sizeType"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZE.apply(this,arguments)}function s$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s$(Object(r),!0).forEach(function(n){mSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mSe(e,t,r){return t=pSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pSe(e){var t=gSe(e,"string");return p0(t)=="symbol"?t:t+""}function gSe(e,t){if(p0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(p0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vSe(e,t){if(e==null)return{};var r=ySe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ySe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var hK={symbolCircle:g3,symbolCross:F2e,symbolDiamond:z2e,symbolSquare:q2e,symbolStar:H2e,symbolTriangle:G2e,symbolWye:Y2e},xSe=Math.PI/180,bSe=function(t){var r="symbol".concat(Bj(t));return hK[r]||g3},wSe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*xSe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},SSe=function(t,r){hK["symbol".concat(Bj(t))]=r},v3=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=vSe(t,hSe),u=l$(l$({},c),{},{type:n,size:i,sizeType:l}),d=function(){var v=bSe(n),x=X2e().type(v).size(wSe(i,l,n));return x()},f=u.className,h=u.cx,m=u.cy,g=$r(u,!0);return h===+h&&m===+m&&i===+i?se.createElement("path",ZE({},g,{className:dn("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};v3.registerSymbol=SSe;function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ek.apply(this,arguments)}function c$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _Se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c$(Object(r),!0).forEach(function(n){g0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pK(n.key),n)}}function NSe(e,t,r){return t&&u$(e.prototype,t),r&&u$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function CSe(e,t,r){return t=pS(t),ASe(e,mK()?Reflect.construct(t,r||[],pS(e).constructor):t.apply(e,r))}function ASe(e,t){if(t&&(Jg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(e)}function PSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mK=function(){return!!e})()}function pS(e){return pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pS(e)}function ESe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tk(e,t)}function g0(e,t,r){return t=pK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pK(e){var t=kSe(e,"string");return Jg(t)=="symbol"?t:t+""}function kSe(e,t){if(Jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $l=32,y3=function(e){function t(){return jSe(this,t),CSe(this,t,arguments)}return ESe(t,e),NSe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=$l/2,o=$l/6,l=$l/3,c=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:$l,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat($l,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat($l/8,"h").concat($l,"v").concat($l*3/4,"h").concat(-$l,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var u=_Se({},n);return delete u.legendIcon,se.cloneElement(n.legendIcon,u)}return se.createElement(v3,{fill:c,cx:i,cy:i,size:$l,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:$l,height:$l},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,v=dn(g0(g0({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Jr(m.value)?null:m.value;Rc(!Jr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return se.createElement("li",ek({className:v,style:f,key:"legend-item-".concat(g)},qm(n.props,m,g)),se.createElement(VE,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(x,m,g):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(y.PureComponent);g0(y3,"displayName","Legend");g0(y3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var OSe=Aj;function TSe(){this.__data__=new OSe,this.size=0}var ISe=TSe;function DSe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var MSe=DSe;function RSe(e){return this.__data__.get(e)}var LSe=RSe;function $Se(e){return this.__data__.has(e)}var FSe=$Se,BSe=Aj,zSe=i3,qSe=o3,USe=200;function WSe(e,t){var r=this.__data__;if(r instanceof BSe){var n=r.__data__;if(!zSe||n.length<USe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new qSe(n)}return r.set(e,t),this.size=r.size,this}var VSe=WSe,HSe=Aj,GSe=ISe,KSe=MSe,YSe=LSe,XSe=FSe,JSe=VSe;function Vv(e){var t=this.__data__=new HSe(e);this.size=t.size}Vv.prototype.clear=GSe;Vv.prototype.delete=KSe;Vv.prototype.get=YSe;Vv.prototype.has=XSe;Vv.prototype.set=JSe;var gK=Vv,QSe="__lodash_hash_undefined__";function ZSe(e){return this.__data__.set(e,QSe),this}var e_e=ZSe;function t_e(e){return this.__data__.has(e)}var r_e=t_e,n_e=o3,a_e=e_e,i_e=r_e;function gS(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new n_e;++t<r;)this.add(e[t])}gS.prototype.add=gS.prototype.push=a_e;gS.prototype.has=i_e;var vK=gS;function o_e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var yK=o_e;function s_e(e,t){return e.has(t)}var xK=s_e,l_e=vK,c_e=yK,u_e=xK,d_e=1,f_e=2;function h_e(e,t,r,n,a,i){var o=r&d_e,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&f_e?new l_e:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],p=t[f];if(n)var v=o?n(p,g,f,t,e,i):n(g,p,f,e,t,i);if(v!==void 0){if(v)continue;h=!1;break}if(m){if(!c_e(t,function(x,b){if(!u_e(m,b)&&(g===x||a(g,x,r,n,i)))return m.push(b)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var bK=h_e,m_e=Ou,p_e=m_e.Uint8Array,g_e=p_e;function v_e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var y_e=v_e;function x_e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var x3=x_e,d$=Db,f$=g_e,b_e=a3,w_e=bK,S_e=y_e,__e=x3,j_e=1,N_e=2,C_e="[object Boolean]",A_e="[object Date]",P_e="[object Error]",E_e="[object Map]",k_e="[object Number]",O_e="[object RegExp]",T_e="[object Set]",I_e="[object String]",D_e="[object Symbol]",M_e="[object ArrayBuffer]",R_e="[object DataView]",h$=d$?d$.prototype:void 0,I5=h$?h$.valueOf:void 0;function L_e(e,t,r,n,a,i,o){switch(r){case R_e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M_e:return!(e.byteLength!=t.byteLength||!i(new f$(e),new f$(t)));case C_e:case A_e:case k_e:return b_e(+e,+t);case P_e:return e.name==t.name&&e.message==t.message;case O_e:case I_e:return e==t+"";case E_e:var l=S_e;case T_e:var c=n&j_e;if(l||(l=__e),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=N_e,o.set(e,t);var d=w_e(l(e),l(t),n,a,i,o);return o.delete(e),d;case D_e:if(I5)return I5.call(e)==I5.call(t)}return!1}var $_e=L_e;function F_e(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var wK=F_e,B_e=wK,z_e=Ys;function q_e(e,t,r){var n=t(e);return z_e(e)?n:B_e(n,r(e))}var U_e=q_e;function W_e(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var V_e=W_e;function H_e(){return[]}var G_e=H_e,K_e=V_e,Y_e=G_e,X_e=Object.prototype,J_e=X_e.propertyIsEnumerable,m$=Object.getOwnPropertySymbols,Q_e=m$?function(e){return e==null?[]:(e=Object(e),K_e(m$(e),function(t){return J_e.call(e,t)}))}:Y_e,Z_e=Q_e;function eje(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var tje=eje,rje=Wd,nje=Vd,aje="[object Arguments]";function ije(e){return nje(e)&&rje(e)==aje}var oje=ije,p$=oje,sje=Vd,SK=Object.prototype,lje=SK.hasOwnProperty,cje=SK.propertyIsEnumerable,uje=p$(function(){return arguments}())?p$:function(e){return sje(e)&&lje.call(e,"callee")&&!cje.call(e,"callee")},b3=uje,vS={exports:{}};function dje(){return!1}var fje=dje;vS.exports;(function(e,t){var r=Ou,n=fje,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(vS,vS.exports);var _K=vS.exports,hje=9007199254740991,mje=/^(?:0|[1-9]\d*)$/;function pje(e,t){var r=typeof e;return t=t??hje,!!t&&(r=="number"||r!="symbol"&&mje.test(e))&&e>-1&&e%1==0&&e<t}var w3=pje,gje=9007199254740991;function vje(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gje}var S3=vje,yje=Wd,xje=S3,bje=Vd,wje="[object Arguments]",Sje="[object Array]",_je="[object Boolean]",jje="[object Date]",Nje="[object Error]",Cje="[object Function]",Aje="[object Map]",Pje="[object Number]",Eje="[object Object]",kje="[object RegExp]",Oje="[object Set]",Tje="[object String]",Ije="[object WeakMap]",Dje="[object ArrayBuffer]",Mje="[object DataView]",Rje="[object Float32Array]",Lje="[object Float64Array]",$je="[object Int8Array]",Fje="[object Int16Array]",Bje="[object Int32Array]",zje="[object Uint8Array]",qje="[object Uint8ClampedArray]",Uje="[object Uint16Array]",Wje="[object Uint32Array]",Ga={};Ga[Rje]=Ga[Lje]=Ga[$je]=Ga[Fje]=Ga[Bje]=Ga[zje]=Ga[qje]=Ga[Uje]=Ga[Wje]=!0;Ga[wje]=Ga[Sje]=Ga[Dje]=Ga[_je]=Ga[Mje]=Ga[jje]=Ga[Nje]=Ga[Cje]=Ga[Aje]=Ga[Pje]=Ga[Eje]=Ga[kje]=Ga[Oje]=Ga[Tje]=Ga[Ije]=!1;function Vje(e){return bje(e)&&xje(e.length)&&!!Ga[yje(e)]}var Hje=Vje;function Gje(e){return function(t){return e(t)}}var jK=Gje,yS={exports:{}};yS.exports;(function(e,t){var r=OG,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(yS,yS.exports);var Kje=yS.exports,Yje=Hje,Xje=jK,g$=Kje,v$=g$&&g$.isTypedArray,Jje=v$?Xje(v$):Yje,NK=Jje,Qje=tje,Zje=b3,eNe=Ys,tNe=_K,rNe=w3,nNe=NK,aNe=Object.prototype,iNe=aNe.hasOwnProperty;function oNe(e,t){var r=eNe(e),n=!r&&Zje(e),a=!r&&!n&&tNe(e),i=!r&&!n&&!a&&nNe(e),o=r||n||a||i,l=o?Qje(e.length,String):[],c=l.length;for(var u in e)(t||iNe.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||rNe(u,c)))&&l.push(u);return l}var sNe=oNe,lNe=Object.prototype;function cNe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||lNe;return e===r}var uNe=cNe;function dNe(e,t){return function(r){return e(t(r))}}var CK=dNe,fNe=CK,hNe=fNe(Object.keys,Object),mNe=hNe,pNe=uNe,gNe=mNe,vNe=Object.prototype,yNe=vNe.hasOwnProperty;function xNe(e){if(!pNe(e))return gNe(e);var t=[];for(var r in Object(e))yNe.call(e,r)&&r!="constructor"&&t.push(r);return t}var bNe=xNe,wNe=n3,SNe=S3;function _Ne(e){return e!=null&&SNe(e.length)&&!wNe(e)}var Mb=_Ne,jNe=sNe,NNe=bNe,CNe=Mb;function ANe(e){return CNe(e)?jNe(e):NNe(e)}var Wj=ANe,PNe=U_e,ENe=Z_e,kNe=Wj;function ONe(e){return PNe(e,kNe,ENe)}var TNe=ONe,y$=TNe,INe=1,DNe=Object.prototype,MNe=DNe.hasOwnProperty;function RNe(e,t,r,n,a,i){var o=r&INe,l=y$(e),c=l.length,u=y$(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:MNe.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<c;){h=l[f];var x=e[h],b=t[h];if(n)var w=o?n(b,x,h,t,e,i):n(x,b,h,e,t,i);if(!(w===void 0?x===b||a(x,b,r,n,i):w)){p=!1;break}v||(v=h=="constructor")}if(p&&!v){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(e),i.delete(t),p}var LNe=RNe,$Ne=lp,FNe=Ou,BNe=$Ne(FNe,"DataView"),zNe=BNe,qNe=lp,UNe=Ou,WNe=qNe(UNe,"Promise"),VNe=WNe,HNe=lp,GNe=Ou,KNe=HNe(GNe,"Set"),AK=KNe,YNe=lp,XNe=Ou,JNe=YNe(XNe,"WeakMap"),QNe=JNe,rk=zNe,nk=i3,ak=VNe,ik=AK,ok=QNe,PK=Wd,Hv=IG,x$="[object Map]",ZNe="[object Object]",b$="[object Promise]",w$="[object Set]",S$="[object WeakMap]",_$="[object DataView]",eCe=Hv(rk),tCe=Hv(nk),rCe=Hv(ak),nCe=Hv(ik),aCe=Hv(ok),Jh=PK;(rk&&Jh(new rk(new ArrayBuffer(1)))!=_$||nk&&Jh(new nk)!=x$||ak&&Jh(ak.resolve())!=b$||ik&&Jh(new ik)!=w$||ok&&Jh(new ok)!=S$)&&(Jh=function(e){var t=PK(e),r=t==ZNe?e.constructor:void 0,n=r?Hv(r):"";if(n)switch(n){case eCe:return _$;case tCe:return x$;case rCe:return b$;case nCe:return w$;case aCe:return S$}return t});var iCe=Jh,D5=gK,oCe=bK,sCe=$_e,lCe=LNe,j$=iCe,N$=Ys,C$=_K,cCe=NK,uCe=1,A$="[object Arguments]",P$="[object Array]",uw="[object Object]",dCe=Object.prototype,E$=dCe.hasOwnProperty;function fCe(e,t,r,n,a,i){var o=N$(e),l=N$(t),c=o?P$:j$(e),u=l?P$:j$(t);c=c==A$?uw:c,u=u==A$?uw:u;var d=c==uw,f=u==uw,h=c==u;if(h&&C$(e)){if(!C$(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new D5),o||cCe(e)?oCe(e,t,r,n,a,i):sCe(e,t,c,r,n,a,i);if(!(r&uCe)){var m=d&&E$.call(e,"__wrapped__"),g=f&&E$.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,v=g?t.value():t;return i||(i=new D5),a(p,v,r,n,i)}}return h?(i||(i=new D5),lCe(e,t,r,n,a,i)):!1}var hCe=fCe,mCe=hCe,k$=Vd;function EK(e,t,r,n,a){return e===t?!0:e==null||t==null||!k$(e)&&!k$(t)?e!==e&&t!==t:mCe(e,t,r,n,EK,a)}var _3=EK,pCe=gK,gCe=_3,vCe=1,yCe=2;function xCe(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new pCe;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?gCe(d,u,vCe|yCe,n,f):h))return!1}}return!0}var bCe=xCe,wCe=jh;function SCe(e){return e===e&&!wCe(e)}var kK=SCe,_Ce=kK,jCe=Wj;function NCe(e){for(var t=jCe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,_Ce(a)]}return t}var CCe=NCe;function ACe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var OK=ACe,PCe=bCe,ECe=CCe,kCe=OK;function OCe(e){var t=ECe(e);return t.length==1&&t[0][2]?kCe(t[0][0],t[0][1]):function(r){return r===e||PCe(r,e,t)}}var TCe=OCe;function ICe(e,t){return e!=null&&t in Object(e)}var DCe=ICe,MCe=$G,RCe=b3,LCe=Ys,$Ce=w3,FCe=S3,BCe=Ej;function zCe(e,t,r){t=MCe(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=BCe(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&FCe(a)&&$Ce(o,a)&&(LCe(e)||RCe(e)))}var qCe=zCe,UCe=DCe,WCe=qCe;function VCe(e,t){return e!=null&&WCe(e,t,UCe)}var HCe=VCe,GCe=_3,KCe=FG,YCe=HCe,XCe=r3,JCe=kK,QCe=OK,ZCe=Ej,e5e=1,t5e=2;function r5e(e,t){return XCe(e)&&JCe(t)?QCe(ZCe(e),t):function(r){var n=KCe(r,e);return n===void 0&&n===t?YCe(r,e):GCe(t,n,e5e|t5e)}}var n5e=r5e;function a5e(e){return e}var Gv=a5e;function i5e(e){return function(t){return t?.[e]}}var o5e=i5e,s5e=c3;function l5e(e){return function(t){return s5e(t,e)}}var c5e=l5e,u5e=o5e,d5e=c5e,f5e=r3,h5e=Ej;function m5e(e){return f5e(e)?u5e(h5e(e)):d5e(e)}var p5e=m5e,g5e=TCe,v5e=n5e,y5e=Gv,x5e=Ys,b5e=p5e;function w5e(e){return typeof e=="function"?e:e==null?y5e:typeof e=="object"?x5e(e)?v5e(e[0],e[1]):g5e(e):b5e(e)}var Tu=w5e;function S5e(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var TK=S5e;function _5e(e){return e!==e}var j5e=_5e;function N5e(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var C5e=N5e,A5e=TK,P5e=j5e,E5e=C5e;function k5e(e,t,r){return t===t?E5e(e,t,r):A5e(e,P5e,r)}var O5e=k5e,T5e=O5e;function I5e(e,t){var r=e==null?0:e.length;return!!r&&T5e(e,t,0)>-1}var D5e=I5e;function M5e(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var R5e=M5e;function L5e(){}var $5e=L5e,M5=AK,F5e=$5e,B5e=x3,z5e=1/0,q5e=M5&&1/B5e(new M5([,-0]))[1]==z5e?function(e){return new M5(e)}:F5e,U5e=q5e,W5e=vK,V5e=D5e,H5e=R5e,G5e=xK,K5e=U5e,Y5e=x3,X5e=200;function J5e(e,t,r){var n=-1,a=V5e,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=H5e;else if(i>=X5e){var u=t?null:K5e(e);if(u)return Y5e(u);o=!1,a=G5e,c=new W5e}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var Q5e=J5e,Z5e=Tu,eAe=Q5e;function tAe(e,t){return e&&e.length?eAe(e,Z5e(t)):[]}var rAe=tAe;const O$=Gn(rAe);function IK(e,t,r){return t===!0?O$(e,r):Jr(t)?O$(e,t):e}function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}var nAe=["ref"];function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){Vj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MK(n.key),n)}}function iAe(e,t,r){return t&&I$(e.prototype,t),r&&I$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oAe(e,t,r){return t=xS(t),sAe(e,DK()?Reflect.construct(t,r||[],xS(e).constructor):t.apply(e,r))}function sAe(e,t){if(t&&(Qg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lAe(e)}function lAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DK=function(){return!!e})()}function xS(e){return xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xS(e)}function cAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sk(e,t)}function Vj(e,t,r){return t=MK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MK(e){var t=uAe(e,"string");return Qg(t)=="symbol"?t:t+""}function uAe(e,t){if(Qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dAe(e,t){if(e==null)return{};var r=fAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hAe(e){return e.value}function mAe(e,t){if(se.isValidElement(e))return se.cloneElement(e,t);if(typeof e=="function")return se.createElement(e,t);t.ref;var r=dAe(t,nAe);return se.createElement(y3,r)}var D$=1,_m=function(e){function t(){var r;aAe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=oAe(this,t,[].concat(a)),Vj(r,"lastBoundingBox",{width:-1,height:-1}),r}return cAe(t,e),iAe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>D$||Math.abs(a.height-this.lastBoundingBox.height)>D$)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Hu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Hu(Hu({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Hu(Hu({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return se.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},mAe(i,Hu(Hu({},this.props),{},{payload:IK(d,u,hAe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Hu(Hu({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Xt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(y.PureComponent);Vj(_m,"displayName","Legend");Vj(_m,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var M$=Db,pAe=b3,gAe=Ys,R$=M$?M$.isConcatSpreadable:void 0;function vAe(e){return gAe(e)||pAe(e)||!!(R$&&e&&e[R$])}var yAe=vAe,xAe=wK,bAe=yAe;function RK(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=bAe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?RK(l,t-1,r,n,a):xAe(a,l):n||(a[a.length]=l)}return a}var LK=RK;function wAe(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var SAe=wAe,_Ae=SAe,jAe=_Ae(),NAe=jAe,CAe=NAe,AAe=Wj;function PAe(e,t){return e&&CAe(e,t,AAe)}var $K=PAe,EAe=Mb;function kAe(e,t){return function(r,n){if(r==null)return r;if(!EAe(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var OAe=kAe,TAe=$K,IAe=OAe,DAe=IAe(TAe),j3=DAe,MAe=j3,RAe=Mb;function LAe(e,t){var r=-1,n=RAe(e)?Array(e.length):[];return MAe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var FK=LAe;function $Ae(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var FAe=$Ae,L$=Fv;function BAe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=L$(e),o=t!==void 0,l=t===null,c=t===t,u=L$(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var zAe=BAe,qAe=zAe;function UAe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=qAe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var WAe=UAe,R5=l3,VAe=c3,HAe=Tu,GAe=FK,KAe=FAe,YAe=jK,XAe=WAe,JAe=Gv,QAe=Ys;function ZAe(e,t,r){t.length?t=R5(t,function(i){return QAe(i)?function(o){return VAe(o,i.length===1?i[0]:i)}:i}):t=[JAe];var n=-1;t=R5(t,YAe(HAe));var a=GAe(e,function(i,o,l){var c=R5(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return KAe(a,function(i,o){return XAe(i,o,r)})}var ePe=ZAe;function tPe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var rPe=tPe,nPe=rPe,$$=Math.max;function aPe(e,t,r){return t=$$(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=$$(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),nPe(e,this,l)}}var iPe=aPe;function oPe(e){return function(){return e}}var sPe=oPe,lPe=lp,cPe=function(){try{var e=lPe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),BK=cPe,uPe=sPe,F$=BK,dPe=Gv,fPe=F$?function(e,t){return F$(e,"toString",{configurable:!0,enumerable:!1,value:uPe(t),writable:!0})}:dPe,hPe=fPe,mPe=800,pPe=16,gPe=Date.now;function vPe(e){var t=0,r=0;return function(){var n=gPe(),a=pPe-(n-r);if(r=n,a>0){if(++t>=mPe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var yPe=vPe,xPe=hPe,bPe=yPe,wPe=bPe(xPe),SPe=wPe,_Pe=Gv,jPe=iPe,NPe=SPe;function CPe(e,t){return NPe(jPe(e,t,_Pe),e+"")}var APe=CPe,PPe=a3,EPe=Mb,kPe=w3,OPe=jh;function TPe(e,t,r){if(!OPe(r))return!1;var n=typeof t;return(n=="number"?EPe(r)&&kPe(t,r.length):n=="string"&&t in r)?PPe(r[t],e):!1}var Hj=TPe,IPe=LK,DPe=ePe,MPe=APe,B$=Hj,RPe=MPe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&B$(e,t[0],t[1])?t=[]:r>2&&B$(t[0],t[1],t[2])&&(t=[t[0]]),DPe(e,IPe(t,1),[])}),LPe=RPe;const N3=Gn(LPe);function v0(e){"@babel/helpers - typeof";return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v0(e)}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lk.apply(this,arguments)}function $Pe(e,t){return qPe(e)||zPe(e,t)||BPe(e,t)||FPe()}function FPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BPe(e,t){if(e){if(typeof e=="string")return z$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z$(e,t)}}function z$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function qPe(e){if(Array.isArray(e))return e}function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(n){UPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UPe(e,t,r){return t=WPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WPe(e){var t=VPe(e,"string");return v0(t)=="symbol"?t:t+""}function VPe(e,t){if(v0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(v0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HPe(e){return Array.isArray(e)&&no(e[0])&&no(e[1])?e.join(" ~ "):e}var GPe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,v=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,w=function(){if(d&&d.length){var I={padding:0,margin:0},T=(h?N3(d,h):d).map(function(M,z){if(M.type==="none")return null;var V=L5({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),W=M.formatter||f||HPe,$=M.value,G=M.name,me=$,de=G;if(W&&me!=null&&de!=null){var L=W($,G,M,z,d);if(Array.isArray(L)){var B=$Pe(L,2);me=B[0],de=B[1]}else me=L}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:V},no(de)?se.createElement("span",{className:"recharts-tooltip-item-name"},de):null,no(de)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},me),se.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:I},T)}return null},_=L5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=L5({margin:0},u),A=!un(p),P=A?p:"",C=dn("recharts-default-tooltip",m),k=dn("recharts-tooltip-label",g);A&&v&&d!==void 0&&d!==null&&(P=v(p,d));var R=b?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",lk({className:C,style:_},R),se.createElement("p",{className:k,style:j},se.isValidElement(P)?P:"".concat(P)),w())};function y0(e){"@babel/helpers - typeof";return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y0(e)}function dw(e,t,r){return t=KPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KPe(e){var t=YPe(e,"string");return y0(t)=="symbol"?t:t+""}function YPe(e,t){if(y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oy="recharts-tooltip-wrapper",XPe={visibility:"hidden"};function JPe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return dn(Oy,dw(dw(dw(dw({},"".concat(Oy,"-right"),Xt(r)&&t&&Xt(t.x)&&r>=t.x),"".concat(Oy,"-left"),Xt(r)&&t&&Xt(t.x)&&r<t.x),"".concat(Oy,"-bottom"),Xt(n)&&t&&Xt(t.y)&&n>=t.y),"".concat(Oy,"-top"),Xt(n)&&t&&Xt(t.y)&&n<t.y))}function U$(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Xt(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,p=c[n]+u;return g>p?Math.max(d,c[n]):Math.max(f,c[n])}function QPe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function ZPe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=U$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=U$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=QPe({translateX:d,translateY:f,useTranslate3d:l})):u=XPe,{cssProperties:u,cssClasses:JPe({translateX:d,translateY:f,coordinate:r})}}function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(e)}function W$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(r),!0).forEach(function(n){uk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qK(n.key),n)}}function tEe(e,t,r){return t&&H$(e.prototype,t),r&&H$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rEe(e,t,r){return t=bS(t),nEe(e,zK()?Reflect.construct(t,r||[],bS(e).constructor):t.apply(e,r))}function nEe(e,t){if(t&&(Zg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aEe(e)}function aEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zK=function(){return!!e})()}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bS(e)}function iEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}function ck(e,t){return ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ck(e,t)}function uk(e,t,r){return t=qK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qK(e){var t=oEe(e,"string");return Zg(t)=="symbol"?t:t+""}function oEe(e,t){if(Zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G$=1,sEe=function(e){function t(){var r;eEe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=rEe(this,t,[].concat(a)),uk(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),uk(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return iEe(t,e),tEe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>G$||Math.abs(n.height-this.state.lastBoundingBox.height)>G$)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,v=a.useTranslate3d,x=a.viewBox,b=a.wrapperStyle,w=ZPe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),_=w.cssClasses,j=w.cssProperties,A=V$(V$({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return se.createElement("div",{tabIndex:-1,className:_,style:A,ref:function(C){n.wrapperNode=C}},u)}}])}(y.PureComponent),lEe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Lc={isSsr:lEe(),get:function(t){return Lc[t]},set:function(t,r){if(typeof t=="string")Lc[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Lc[a]=t[a]})}}};function ev(e){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ev(e)}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){C3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WK(n.key),n)}}function uEe(e,t,r){return t&&X$(e.prototype,t),r&&X$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dEe(e,t,r){return t=wS(t),fEe(e,UK()?Reflect.construct(t,r||[],wS(e).constructor):t.apply(e,r))}function fEe(e,t){if(t&&(ev(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hEe(e)}function hEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UK=function(){return!!e})()}function wS(e){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wS(e)}function mEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dk(e,t)}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dk(e,t)}function C3(e,t,r){return t=WK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WK(e){var t=pEe(e,"string");return ev(t)=="symbol"?t:t+""}function pEe(e,t){if(ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ev(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gEe(e){return e.dataKey}function vEe(e,t){return se.isValidElement(e)?se.cloneElement(e,t):typeof e=="function"?se.createElement(e,t):se.createElement(GPe,t)}var dl=function(e){function t(){return cEe(this,t),dEe(this,t,arguments)}return mEe(t,e),uEe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,v=a.position,x=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,_=a.wrapperStyle,j=g??[];f&&j.length&&(j=IK(g.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),p,gEe));var A=j.length>0;return se.createElement(sEe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:A,offset:m,position:v,reverseDirection:x,useTranslate3d:b,viewBox:w,wrapperStyle:_},vEe(u,Y$(Y$({},this.props),{},{payload:j})))}}])}(y.PureComponent);C3(dl,"displayName","Tooltip");C3(dl,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Lc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var yEe=Ou,xEe=function(){return yEe.Date.now()},bEe=xEe,wEe=/\s/;function SEe(e){for(var t=e.length;t--&&wEe.test(e.charAt(t)););return t}var _Ee=SEe,jEe=_Ee,NEe=/^\s+/;function CEe(e){return e&&e.slice(0,jEe(e)+1).replace(NEe,"")}var AEe=CEe,PEe=AEe,J$=jh,EEe=Fv,Q$=0/0,kEe=/^[-+]0x[0-9a-f]+$/i,OEe=/^0b[01]+$/i,TEe=/^0o[0-7]+$/i,IEe=parseInt;function DEe(e){if(typeof e=="number")return e;if(EEe(e))return Q$;if(J$(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=J$(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=PEe(e);var r=OEe.test(e);return r||TEe.test(e)?IEe(e.slice(2),r?2:8):kEe.test(e)?Q$:+e}var VK=DEe,MEe=jh,$5=bEe,Z$=VK,REe="Expected a function",LEe=Math.max,$Ee=Math.min;function FEe(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(REe);t=Z$(t)||0,MEe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?LEe(Z$(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(A){var P=n,C=a;return n=a=void 0,u=A,o=e.apply(C,P),o}function g(A){return u=A,l=setTimeout(x,t),d?m(A):o}function p(A){var P=A-c,C=A-u,k=t-P;return f?$Ee(k,i-C):k}function v(A){var P=A-c,C=A-u;return c===void 0||P>=t||P<0||f&&C>=i}function x(){var A=$5();if(v(A))return b(A);l=setTimeout(x,p(A))}function b(A){return l=void 0,h&&n?m(A):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:b($5())}function j(){var A=$5(),P=v(A);if(n=arguments,a=this,c=A,P){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return j.cancel=w,j.flush=_,j}var BEe=FEe,zEe=BEe,qEe=jh,UEe="Expected a function";function WEe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(UEe);return qEe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),zEe(e,t,{leading:n,maxWait:t,trailing:a})}var VEe=WEe;const HK=Gn(VEe);function x0(e){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x0(e)}function eF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eF(Object(r),!0).forEach(function(n){HEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HEe(e,t,r){return t=GEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GEe(e){var t=KEe(e,"string");return x0(t)=="symbol"?t:t+""}function KEe(e,t){if(x0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(x0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YEe(e,t){return ZEe(e)||QEe(e,t)||JEe(e,t)||XEe()}function XEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JEe(e,t){if(e){if(typeof e=="string")return tF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tF(e,t)}}function tF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZEe(e){if(Array.isArray(e))return e}var o2=y.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,v=e.id,x=e.className,b=e.onResize,w=e.style,_=w===void 0?{}:w,j=y.useRef(null),A=y.useRef();A.current=b,y.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var P=y.useState({containerWidth:a.width,containerHeight:a.height}),C=YEe(P,2),k=C[0],R=C[1],E=y.useCallback(function(T,M){R(function(z){var V=Math.round(T),W=Math.round(M);return z.containerWidth===V&&z.containerHeight===W?z:{containerWidth:V,containerHeight:W}})},[]);y.useEffect(function(){var T=function(G){var me,de=G[0].contentRect,L=de.width,B=de.height;E(L,B),(me=A.current)===null||me===void 0||me.call(A,L,B)};p>0&&(T=HK(T,p,{trailing:!0,leading:!1}));var M=new ResizeObserver(T),z=j.current.getBoundingClientRect(),V=z.width,W=z.height;return E(V,W),M.observe(j.current),function(){M.disconnect()}},[E,p]);var I=y.useMemo(function(){var T=k.containerWidth,M=k.containerHeight;if(T<0||M<0)return null;Rc(um(o)||um(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Rc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=um(o)?T:o,V=um(c)?M:c;r&&r>0&&(z?V=z/r:V&&(z=V*r),h&&V>h&&(V=h)),Rc(z>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,V,o,c,d,f,r);var W=!Array.isArray(m)&&Nd(m.type).endsWith("Chart");return se.Children.map(m,function($){return se.isValidElement($)?y.cloneElement($,fw({width:z,height:V},W?{style:fw({height:"100%",width:"100%",maxHeight:V,maxWidth:z},$.props.style)}:{})):$})},[r,m,c,h,f,d,k,o]);return se.createElement("div",{id:v?"".concat(v):void 0,className:dn("recharts-responsive-container",x),style:fw(fw({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},I)}),b0=function(t){return null};b0.displayName="Cell";function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function rF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rF(Object(r),!0).forEach(function(n){eke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eke(e,t,r){return t=tke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tke(e){var t=rke(e,"string");return w0(t)=="symbol"?t:t+""}function rke(e,t){if(w0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(w0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tp={widthCache:{},cacheCount:0},nke=2e3,ake={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nF="recharts_measurement_span";function ike(e){var t=fk({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Sx=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lc.isSsr)return{width:0,height:0};var n=ike(r),a=JSON.stringify({text:t,copyStyle:n});if(Tp.widthCache[a])return Tp.widthCache[a];try{var i=document.getElementById(nF);i||(i=document.createElement("span"),i.setAttribute("id",nF),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=fk(fk({},ake),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Tp.widthCache[a]=c,++Tp.cacheCount>nke&&(Tp.cacheCount=0,Tp.widthCache={}),c}catch{return{width:0,height:0}}},oke=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function S0(e){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S0(e)}function SS(e,t){return uke(e)||cke(e,t)||lke(e,t)||ske()}function ske(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lke(e,t){if(e){if(typeof e=="string")return aF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aF(e,t)}}function aF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function uke(e){if(Array.isArray(e))return e}function dke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hke(n.key),n)}}function fke(e,t,r){return t&&iF(e.prototype,t),r&&iF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hke(e){var t=mke(e,"string");return S0(t)=="symbol"?t:t+""}function mke(e,t){if(S0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(S0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pke=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gke=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,GK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vke=Object.keys(GK),ug="NaN";function yke(e,t){return e*GK[t]}var hw=function(){function e(t,r){dke(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!pke.test(r)&&(this.num=NaN,this.unit=""),vke.includes(r)&&(this.num=yke(t,r),this.unit="px")}return fke(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=gke.exec(r))!==null&&n!==void 0?n:[],i=SS(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function KK(e){if(e.includes(ug))return ug;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=oF.exec(t))!==null&&r!==void 0?r:[],a=SS(n,4),i=a[1],o=a[2],l=a[3],c=hw.parse(i??""),u=hw.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return ug;t=t.replace(oF,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=sF.exec(t))!==null&&f!==void 0?f:[],m=SS(h,4),g=m[1],p=m[2],v=m[3],x=hw.parse(g??""),b=hw.parse(v??""),w=p==="+"?x.add(b):x.subtract(b);if(w.isNaN())return ug;t=t.replace(sF,w.toString())}return t}var lF=/\(([^()]*)\)/;function xke(e){for(var t=e;t.includes("(");){var r=lF.exec(t),n=SS(r,2),a=n[1];t=t.replace(lF,KK(a))}return t}function bke(e){var t=e.replace(/\s+/g,"");return t=xke(t),t=KK(t),t}function wke(e){try{return bke(e)}catch{return ug}}function F5(e){var t=wke(e.slice(5,-1));return t===ug?"":t}var Ske=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_ke=["dx","dy","angle","className","breakAll"];function hk(){return hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hk.apply(this,arguments)}function cF(e,t){if(e==null)return{};var r=jke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uF(e,t){return Pke(e)||Ake(e,t)||Cke(e,t)||Nke()}function Nke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cke(e,t){if(e){if(typeof e=="string")return dF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dF(e,t)}}function dF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ake(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Pke(e){if(Array.isArray(e))return e}var YK=/[ \f\n\r\t\v\u2028\u2029]+/,XK=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];un(r)||(n?i=r.toString().split(""):i=r.toString().split(YK));var o=i.map(function(c){return{word:c,width:Sx(c,a).width}}),l=n?0:Sx("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Eke=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Xt(o),f=l,h=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(V,W){var $=W.word,G=W.width,me=V[V.length-1];if(me&&(a==null||i||me.width+G+n<Number(a)))me.words.push($),me.width+=G+n;else{var de={words:[$],width:G};V.push(de)}return V},[])},m=h(r),g=function(z){return z.reduce(function(V,W){return V.width>W.width?V:W})};if(!d)return m;for(var p="",v=function(z){var V=f.slice(0,z),W=XK({breakAll:u,style:c,children:V+p}).wordsWithComputedWidth,$=h(W),G=$.length>o||g($).width>Number(a);return[G,$]},x=0,b=f.length-1,w=0,_;x<=b&&w<=f.length-1;){var j=Math.floor((x+b)/2),A=j-1,P=v(A),C=uF(P,2),k=C[0],R=C[1],E=v(j),I=uF(E,1),T=I[0];if(!k&&!T&&(x=j+1),k&&T&&(b=j-1),!k&&T){_=R;break}w++}return _||m},fF=function(t){var r=un(t)?[]:t.toString().split(YK);return[{words:r}]},kke=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Lc.isSsr){var c,u,d=XK({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return fF(a);return Eke({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return fF(a)},hF="#808080",Um=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,v=t.fill,x=v===void 0?hF:v,b=cF(t,Ske),w=y.useMemo(function(){return kke({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),_=b.dx,j=b.dy,A=b.angle,P=b.className,C=b.breakAll,k=cF(b,_ke);if(!no(n)||!no(i))return null;var R=n+(Xt(_)?_:0),E=i+(Xt(j)?j:0),I;switch(p){case"start":I=F5("calc(".concat(u,")"));break;case"middle":I=F5("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=F5("calc(".concat(w.length-1," * -").concat(l,")"));break}var T=[];if(f){var M=w[0].width,z=b.width;T.push("scale(".concat((Xt(z)?z/M:1)/M,")"))}return A&&T.push("rotate(".concat(A,", ").concat(R,", ").concat(E,")")),T.length&&(k.transform=T.join(" ")),se.createElement("text",hk({},$r(k,!0),{x:R,y:E,className:dn("recharts-text",P),textAnchor:m,fill:x.includes("url")?hF:x}),w.map(function(V,W){var $=V.words.join(C?"":" ");return se.createElement("tspan",{x:R,dy:W===0?I:l,key:"".concat($,"-").concat(W)},$)}))};function Yf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Oke(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function A3(e){let t,r,n;e.length!==2?(t=Yf,r=(l,c)=>Yf(e(l),c),n=(l,c)=>e(l)-c):(t=e===Yf||e===Oke?e:Tke,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function Tke(){return 0}function JK(e){return e===null?NaN:+e}function*Ike(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const Dke=A3(Yf),Mke=Dke.right;A3(JK).center;const Rb=Mke;class mF extends Map{constructor(t,r=$ke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(pF(this,t))}has(t){return super.has(pF(this,t))}set(t,r){return super.set(Rke(this,t),r)}delete(t){return super.delete(Lke(this,t))}}function pF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Rke({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Lke({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function $ke(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Fke(e=Yf){if(e===Yf)return QK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function QK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Bke=Math.sqrt(50),zke=Math.sqrt(10),qke=Math.sqrt(2);function _S(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Bke?10:i>=zke?5:i>=qke?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?_S(e,t,r*2):[l,c,u]}function mk(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?_S(t,e,r):_S(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function pk(e,t,r){return t=+t,e=+e,r=+r,_S(e,t,r)[2]}function gk(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?pk(t,e,r):pk(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function gF(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function vF(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function ZK(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?QK:Fke(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));ZK(e,t,m,g,a)}const i=e[t];let o=r,l=n;for(Ty(e,r,t),a(e[n],i)>0&&Ty(e,r,n);o<l;){for(Ty(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Ty(e,r,l):(++l,Ty(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ty(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Uke(e,t,r){if(e=Float64Array.from(Ike(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return vF(e);if(t>=1)return gF(e);var n,a=(n-1)*t,i=Math.floor(a),o=gF(ZK(e,i).subarray(0,i+1)),l=vF(e.subarray(i+1));return o+(l-o)*(a-i)}}function Wke(e,t,r=JK){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Vke(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function oc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vk=Symbol("implicit");function P3(){var e=new mF,t=[],r=[],n=vk;function a(i){let o=e.get(i);if(o===void 0){if(n!==vk)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new mF;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return P3(t,r).unknown(n)},oc.apply(a,arguments),a}function _0(){var e=P3().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,p=m?n:a;i=(p-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=Vke(h).map(function(x){return g+i*x});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return _0(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},oc.apply(f(),arguments)}function eY(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eY(t())},e}function _x(){return eY(_0.apply(null,arguments).paddingInner(1))}function E3(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tY(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Lb(){}var j0=.7,jS=1/j0,Ng="\\s*([+-]?\\d+)\\s*",N0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hke=/^#([0-9a-f]{3,8})$/,Gke=new RegExp(`^rgb\\(${Ng},${Ng},${Ng}\\)$`),Kke=new RegExp(`^rgb\\(${xu},${xu},${xu}\\)$`),Yke=new RegExp(`^rgba\\(${Ng},${Ng},${Ng},${N0}\\)$`),Xke=new RegExp(`^rgba\\(${xu},${xu},${xu},${N0}\\)$`),Jke=new RegExp(`^hsl\\(${N0},${xu},${xu}\\)$`),Qke=new RegExp(`^hsla\\(${N0},${xu},${xu},${N0}\\)$`),yF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};E3(Lb,C0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xF,formatHex:xF,formatHex8:Zke,formatHsl:eOe,formatRgb:bF,toString:bF});function xF(){return this.rgb().formatHex()}function Zke(){return this.rgb().formatHex8()}function eOe(){return rY(this).formatHsl()}function bF(){return this.rgb().formatRgb()}function C0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Hke.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?wF(t):r===3?new zs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?mw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?mw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gke.exec(e))?new zs(t[1],t[2],t[3],1):(t=Kke.exec(e))?new zs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yke.exec(e))?mw(t[1],t[2],t[3],t[4]):(t=Xke.exec(e))?mw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jke.exec(e))?jF(t[1],t[2]/100,t[3]/100,1):(t=Qke.exec(e))?jF(t[1],t[2]/100,t[3]/100,t[4]):yF.hasOwnProperty(e)?wF(yF[e]):e==="transparent"?new zs(NaN,NaN,NaN,0):null}function wF(e){return new zs(e>>16&255,e>>8&255,e&255,1)}function mw(e,t,r,n){return n<=0&&(e=t=r=NaN),new zs(e,t,r,n)}function tOe(e){return e instanceof Lb||(e=C0(e)),e?(e=e.rgb(),new zs(e.r,e.g,e.b,e.opacity)):new zs}function yk(e,t,r,n){return arguments.length===1?tOe(e):new zs(e,t,r,n??1)}function zs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}E3(zs,yk,tY(Lb,{brighter(e){return e=e==null?jS:Math.pow(jS,e),new zs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?j0:Math.pow(j0,e),new zs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zs(jm(this.r),jm(this.g),jm(this.b),NS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SF,formatHex:SF,formatHex8:rOe,formatRgb:_F,toString:_F}));function SF(){return`#${dm(this.r)}${dm(this.g)}${dm(this.b)}`}function rOe(){return`#${dm(this.r)}${dm(this.g)}${dm(this.b)}${dm((isNaN(this.opacity)?1:this.opacity)*255)}`}function _F(){const e=NS(this.opacity);return`${e===1?"rgb(":"rgba("}${jm(this.r)}, ${jm(this.g)}, ${jm(this.b)}${e===1?")":`, ${e})`}`}function NS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dm(e){return e=jm(e),(e<16?"0":"")+e.toString(16)}function jF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ec(e,t,r,n)}function rY(e){if(e instanceof Ec)return new Ec(e.h,e.s,e.l,e.opacity);if(e instanceof Lb||(e=C0(e)),!e)return new Ec;if(e instanceof Ec)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Ec(o,l,c,e.opacity)}function nOe(e,t,r,n){return arguments.length===1?rY(e):new Ec(e,t,r,n??1)}function Ec(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}E3(Ec,nOe,tY(Lb,{brighter(e){return e=e==null?jS:Math.pow(jS,e),new Ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?j0:Math.pow(j0,e),new Ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new zs(B5(e>=240?e-240:e+120,a,n),B5(e,a,n),B5(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ec(NF(this.h),pw(this.s),pw(this.l),NS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=NS(this.opacity);return`${e===1?"hsl(":"hsla("}${NF(this.h)}, ${pw(this.s)*100}%, ${pw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function NF(e){return e=(e||0)%360,e<0?e+360:e}function pw(e){return Math.max(0,Math.min(1,e||0))}function B5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const k3=e=>()=>e;function aOe(e,t){return function(r){return e+r*t}}function iOe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function oOe(e){return(e=+e)==1?nY:function(t,r){return r-t?iOe(t,r,e):k3(isNaN(t)?r:t)}}function nY(e,t){var r=t-e;return r?aOe(e,r):k3(isNaN(e)?t:e)}const CF=function e(t){var r=oOe(t);function n(a,i){var o=r((a=yk(a)).r,(i=yk(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=nY(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function sOe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function lOe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cOe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Kv(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function uOe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function CS(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function dOe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Kv(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var xk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,z5=new RegExp(xk.source,"g");function fOe(e){return function(){return e}}function hOe(e){return function(t){return e(t)+""}}function mOe(e,t){var r=xk.lastIndex=z5.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=xk.exec(e))&&(a=z5.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:CS(n,a)})),r=z5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?hOe(c[0].x):fOe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Kv(e,t){var r=typeof t,n;return t==null||r==="boolean"?k3(t):(r==="number"?CS:r==="string"?(n=C0(t))?(t=n,CF):mOe:t instanceof C0?CF:t instanceof Date?uOe:lOe(t)?sOe:Array.isArray(t)?cOe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dOe:CS)(e,t)}function O3(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function pOe(e,t){t===void 0&&(t=e,e=Kv);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function gOe(e){return function(){return e}}function AS(e){return+e}var AF=[0,1];function xs(e){return e}function bk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:gOe(isNaN(t)?NaN:.5)}function vOe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function yOe(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=bk(a,n),i=r(o,i)):(n=bk(n,a),i=r(i,o)),function(l){return i(n(l))}}function xOe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=bk(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Rb(e,l,1,n)-1;return i[c](a[c](l))}}function $b(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gj(){var e=AF,t=AF,r=Kv,n,a,i,o=xs,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==xs&&(o=vOe(e[0],e[h-1])),l=h>2?xOe:yOe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),CS)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,AS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=O3,d()},f.clamp=function(h){return arguments.length?(o=h?!0:xs,d()):o!==xs},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function T3(){return Gj()(xs,xs)}function bOe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function PS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function tv(e){return e=PS(Math.abs(e)),e?e[1]:NaN}function wOe(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function SOe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _Oe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A0(e){if(!(t=_Oe.exec(e)))throw new Error("invalid format: "+e);var t;return new I3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}A0.prototype=I3.prototype;function I3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}I3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jOe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var aY;function NOe(e,t){var r=PS(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(aY=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+PS(e,Math.max(0,t+i-1))[0]}function PF(e,t){var r=PS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const EF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bOe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>PF(e*100,t),r:PF,s:NOe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kF(e){return e}var OF=Array.prototype.map,TF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function COe(e){var t=e.grouping===void 0||e.thousands===void 0?kF:wOe(OF.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?kF:SOe(OF.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=A0(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,v=f.zero,x=f.width,b=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(b=!0,j="g"):EF[j]||(w===void 0&&(w=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var A=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",P=p==="$"?n:/[%p]/.test(j)?o:"",C=EF[j],k=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R(E){var I=A,T=P,M,z,V;if(j==="c")T=C(E)+T,E="";else{E=+E;var W=E<0||1/E<0;if(E=isNaN(E)?c:C(Math.abs(E),w),_&&(E=jOe(E)),W&&+E==0&&g!=="+"&&(W=!1),I=(W?g==="("?g:l:g==="-"||g==="("?"":g)+I,T=(j==="s"?TF[8+aY/3]:"")+T+(W&&g==="("?")":""),k){for(M=-1,z=E.length;++M<z;)if(V=E.charCodeAt(M),48>V||V>57){T=(V===46?a+E.slice(M+1):E.slice(M))+T,E=E.slice(0,M);break}}}b&&!v&&(E=t(E,1/0));var $=I.length+E.length+T.length,G=$<x?new Array(x-$+1).join(h):"";switch(b&&v&&(E=t(G+E,G.length?x-T.length:1/0),G=""),m){case"<":E=I+E+T+G;break;case"=":E=I+G+E+T;break;case"^":E=G.slice(0,$=G.length>>1)+I+E+T+G.slice($);break;default:E=G+I+E+T;break}return i(E)}return R.toString=function(){return f+""},R}function d(f,h){var m=u((f=A0(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(tv(h)/3)))*3,p=Math.pow(10,-g),v=TF[8+g/3];return function(x){return m(p*x)+v}}return{format:u,formatPrefix:d}}var gw,D3,iY;AOe({thousands:",",grouping:[3],currency:["$",""]});function AOe(e){return gw=COe(e),D3=gw.format,iY=gw.formatPrefix,gw}function POe(e){return Math.max(0,-tv(Math.abs(e)))}function EOe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tv(t)/3)))*3-tv(Math.abs(e)))}function kOe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tv(t)-tv(e))+1}function oY(e,t,r,n){var a=gk(e,t,r),i;switch(n=A0(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=EOe(a,o))&&(n.precision=i),iY(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=kOe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=POe(a))&&(n.precision=i-(n.type==="%")*2);break}}return D3(n)}function Nh(e){var t=e.domain;return e.ticks=function(r){var n=t();return mk(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return oY(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=pk(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function ES(){var e=T3();return e.copy=function(){return $b(e,ES())},oc.apply(e,arguments),Nh(e)}function sY(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,AS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return sY(e).unknown(t)},e=arguments.length?Array.from(e,AS):[0,1],Nh(r)}function lY(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function IF(e){return Math.log(e)}function DF(e){return Math.exp(e)}function OOe(e){return-Math.log(-e)}function TOe(e){return-Math.exp(-e)}function IOe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function DOe(e){return e===10?IOe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function MOe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MF(e){return(t,r)=>-e(-t,r)}function M3(e){const t=e(IF,DF),r=t.domain;let n=10,a,i;function o(){return a=MOe(n),i=DOe(n),r()[0]<0?(a=MF(a),i=MF(i),e(OOe,TOe)):e(IF,DF),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,p;const v=l==null?10:+l;let x=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<v&&(x=mk(u,d,v))}else x=mk(h,m,Math.min(m-h,v)).map(i);return f?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=A0(c)).precision==null&&(c.trim=!0),c=D3(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(lY(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function cY(){const e=M3(Gj()).domain([1,10]);return e.copy=()=>$b(e,cY()).base(e.base()),oc.apply(e,arguments),e}function RF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function LF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function R3(e){var t=1,r=e(RF(t),LF(t));return r.constant=function(n){return arguments.length?e(RF(t=+n),LF(t)):t},Nh(r)}function uY(){var e=R3(Gj());return e.copy=function(){return $b(e,uY()).constant(e.constant())},oc.apply(e,arguments)}function $F(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ROe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function LOe(e){return e<0?-e*e:e*e}function L3(e){var t=e(xs,xs),r=1;function n(){return r===1?e(xs,xs):r===.5?e(ROe,LOe):e($F(r),$F(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Nh(t)}function $3(){var e=L3(Gj());return e.copy=function(){return $b(e,$3()).exponent(e.exponent())},oc.apply(e,arguments),e}function $Oe(){return $3.apply(null,arguments).exponent(.5)}function FF(e){return Math.sign(e)*e*e}function FOe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function dY(){var e=T3(),t=[0,1],r=!1,n;function a(i){var o=FOe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(FF(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,AS)).map(FF)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return dY(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},oc.apply(a,arguments),Nh(a)}function fY(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Wke(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Rb(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Yf),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return fY().domain(e).range(t).unknown(n)},oc.apply(i,arguments)}function hY(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Rb(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return hY().domain([e,t]).range(a).unknown(i)},oc.apply(Nh(o),arguments)}function mY(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Rb(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return mY().domain(e).range(t).unknown(r)},oc.apply(a,arguments)}const q5=new Date,U5=new Date;function oo(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>oo(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(q5.setTime(+i),U5.setTime(+o),e(q5),e(U5),Math.floor(r(q5,U5))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const kS=oo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?oo(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):kS);kS.range;const dd=1e3,Kl=dd*60,fd=Kl*60,Dd=fd*24,F3=Dd*7,BF=Dd*30,W5=Dd*365,fm=oo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*dd)},(e,t)=>(t-e)/dd,e=>e.getUTCSeconds());fm.range;const B3=oo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*dd)},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getMinutes());B3.range;const z3=oo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getUTCMinutes());z3.range;const q3=oo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*dd-e.getMinutes()*Kl)},(e,t)=>{e.setTime(+e+t*fd)},(e,t)=>(t-e)/fd,e=>e.getHours());q3.range;const U3=oo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fd)},(e,t)=>(t-e)/fd,e=>e.getUTCHours());U3.range;const Fb=oo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kl)/Dd,e=>e.getDate()-1);Fb.range;const Kj=oo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dd,e=>e.getUTCDate()-1);Kj.range;const pY=oo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dd,e=>Math.floor(e/Dd));pY.range;function up(e){return oo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Kl)/F3)}const Yj=up(0),OS=up(1),BOe=up(2),zOe=up(3),rv=up(4),qOe=up(5),UOe=up(6);Yj.range;OS.range;BOe.range;zOe.range;rv.range;qOe.range;UOe.range;function dp(e){return oo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/F3)}const Xj=dp(0),TS=dp(1),WOe=dp(2),VOe=dp(3),nv=dp(4),HOe=dp(5),GOe=dp(6);Xj.range;TS.range;WOe.range;VOe.range;nv.range;HOe.range;GOe.range;const W3=oo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());W3.range;const V3=oo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());V3.range;const Md=oo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Md.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Md.range;const Rd=oo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Rd.range;function gY(e,t,r,n,a,i){const o=[[fm,1,dd],[fm,5,5*dd],[fm,15,15*dd],[fm,30,30*dd],[i,1,Kl],[i,5,5*Kl],[i,15,15*Kl],[i,30,30*Kl],[a,1,fd],[a,3,3*fd],[a,6,6*fd],[a,12,12*fd],[n,1,Dd],[n,2,2*Dd],[r,1,F3],[t,1,BF],[t,3,3*BF],[e,1,W5]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=A3(([,,v])=>v).right(o,h);if(m===o.length)return e.every(gk(u/W5,d/W5,f));if(m===0)return kS.every(Math.max(gk(u,d,f),1));const[g,p]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[KOe,YOe]=gY(Rd,V3,Xj,pY,U3,z3),[XOe,JOe]=gY(Md,W3,Yj,Fb,q3,B3);function V5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function H5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Iy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function QOe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Dy(a),d=My(a),f=Dy(i),h=My(i),m=Dy(o),g=My(o),p=Dy(l),v=My(l),x=Dy(c),b=My(c),w={a:W,A:$,b:G,B:me,c:null,d:HF,e:HF,f:wTe,g:OTe,G:ITe,H:yTe,I:xTe,j:bTe,L:vY,m:STe,M:_Te,p:de,q:L,Q:YF,s:XF,S:jTe,u:NTe,U:CTe,V:ATe,w:PTe,W:ETe,x:null,X:null,y:kTe,Y:TTe,Z:DTe,"%":KF},_={a:B,A:J,b:q,B:X,c:null,d:GF,e:GF,f:$Te,g:KTe,G:XTe,H:MTe,I:RTe,j:LTe,L:xY,m:FTe,M:BTe,p:Z,q:pe,Q:YF,s:XF,S:zTe,u:qTe,U:UTe,V:WTe,w:VTe,W:HTe,x:null,X:null,y:GTe,Y:YTe,Z:JTe,"%":KF},j={a:R,A:E,b:I,B:T,c:M,d:WF,e:WF,f:mTe,g:UF,G:qF,H:VF,I:VF,j:uTe,L:hTe,m:cTe,M:dTe,p:k,q:lTe,Q:gTe,s:vTe,S:fTe,u:nTe,U:aTe,V:iTe,w:rTe,W:oTe,x:z,X:V,y:UF,Y:qF,Z:sTe,"%":pTe};w.x=A(r,w),w.X=A(n,w),w.c=A(t,w),_.x=A(r,_),_.X=A(n,_),_.c=A(t,_);function A(te,ve){return function(Ce){var he=[],qe=-1,ye=0,ce=te.length,Ft,qt,It;for(Ce instanceof Date||(Ce=new Date(+Ce));++qe<ce;)te.charCodeAt(qe)===37&&(he.push(te.slice(ye,qe)),(qt=zF[Ft=te.charAt(++qe)])!=null?Ft=te.charAt(++qe):qt=Ft==="e"?" ":"0",(It=ve[Ft])&&(Ft=It(Ce,qt)),he.push(Ft),ye=qe+1);return he.push(te.slice(ye,qe)),he.join("")}}function P(te,ve){return function(Ce){var he=Iy(1900,void 0,1),qe=C(he,te,Ce+="",0),ye,ce;if(qe!=Ce.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(ve&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(ye=H5(Iy(he.y,0,1)),ce=ye.getUTCDay(),ye=ce>4||ce===0?TS.ceil(ye):TS(ye),ye=Kj.offset(ye,(he.V-1)*7),he.y=ye.getUTCFullYear(),he.m=ye.getUTCMonth(),he.d=ye.getUTCDate()+(he.w+6)%7):(ye=V5(Iy(he.y,0,1)),ce=ye.getDay(),ye=ce>4||ce===0?OS.ceil(ye):OS(ye),ye=Fb.offset(ye,(he.V-1)*7),he.y=ye.getFullYear(),he.m=ye.getMonth(),he.d=ye.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),ce="Z"in he?H5(Iy(he.y,0,1)).getUTCDay():V5(Iy(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(ce+5)%7:he.w+he.U*7-(ce+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,H5(he)):V5(he)}}function C(te,ve,Ce,he){for(var qe=0,ye=ve.length,ce=Ce.length,Ft,qt;qe<ye;){if(he>=ce)return-1;if(Ft=ve.charCodeAt(qe++),Ft===37){if(Ft=ve.charAt(qe++),qt=j[Ft in zF?ve.charAt(qe++):Ft],!qt||(he=qt(te,Ce,he))<0)return-1}else if(Ft!=Ce.charCodeAt(he++))return-1}return he}function k(te,ve,Ce){var he=u.exec(ve.slice(Ce));return he?(te.p=d.get(he[0].toLowerCase()),Ce+he[0].length):-1}function R(te,ve,Ce){var he=m.exec(ve.slice(Ce));return he?(te.w=g.get(he[0].toLowerCase()),Ce+he[0].length):-1}function E(te,ve,Ce){var he=f.exec(ve.slice(Ce));return he?(te.w=h.get(he[0].toLowerCase()),Ce+he[0].length):-1}function I(te,ve,Ce){var he=x.exec(ve.slice(Ce));return he?(te.m=b.get(he[0].toLowerCase()),Ce+he[0].length):-1}function T(te,ve,Ce){var he=p.exec(ve.slice(Ce));return he?(te.m=v.get(he[0].toLowerCase()),Ce+he[0].length):-1}function M(te,ve,Ce){return C(te,t,ve,Ce)}function z(te,ve,Ce){return C(te,r,ve,Ce)}function V(te,ve,Ce){return C(te,n,ve,Ce)}function W(te){return o[te.getDay()]}function $(te){return i[te.getDay()]}function G(te){return c[te.getMonth()]}function me(te){return l[te.getMonth()]}function de(te){return a[+(te.getHours()>=12)]}function L(te){return 1+~~(te.getMonth()/3)}function B(te){return o[te.getUTCDay()]}function J(te){return i[te.getUTCDay()]}function q(te){return c[te.getUTCMonth()]}function X(te){return l[te.getUTCMonth()]}function Z(te){return a[+(te.getUTCHours()>=12)]}function pe(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var ve=A(te+="",w);return ve.toString=function(){return te},ve},parse:function(te){var ve=P(te+="",!1);return ve.toString=function(){return te},ve},utcFormat:function(te){var ve=A(te+="",_);return ve.toString=function(){return te},ve},utcParse:function(te){var ve=P(te+="",!0);return ve.toString=function(){return te},ve}}}var zF={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,ZOe=/^%/,eTe=/[\\^$*+?|[\]().{}]/g;function aa(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function tTe(e){return e.replace(eTe,"\\$&")}function Dy(e){return new RegExp("^(?:"+e.map(tTe).join("|")+")","i")}function My(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function rTe(e,t,r){var n=yo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function nTe(e,t,r){var n=yo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function aTe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function iTe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function oTe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function qF(e,t,r){var n=yo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function UF(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function sTe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function lTe(e,t,r){var n=yo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function cTe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function WF(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function uTe(e,t,r){var n=yo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function VF(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function dTe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function fTe(e,t,r){var n=yo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function hTe(e,t,r){var n=yo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function mTe(e,t,r){var n=yo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function pTe(e,t,r){var n=ZOe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function gTe(e,t,r){var n=yo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function vTe(e,t,r){var n=yo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function HF(e,t){return aa(e.getDate(),t,2)}function yTe(e,t){return aa(e.getHours(),t,2)}function xTe(e,t){return aa(e.getHours()%12||12,t,2)}function bTe(e,t){return aa(1+Fb.count(Md(e),e),t,3)}function vY(e,t){return aa(e.getMilliseconds(),t,3)}function wTe(e,t){return vY(e,t)+"000"}function STe(e,t){return aa(e.getMonth()+1,t,2)}function _Te(e,t){return aa(e.getMinutes(),t,2)}function jTe(e,t){return aa(e.getSeconds(),t,2)}function NTe(e){var t=e.getDay();return t===0?7:t}function CTe(e,t){return aa(Yj.count(Md(e)-1,e),t,2)}function yY(e){var t=e.getDay();return t>=4||t===0?rv(e):rv.ceil(e)}function ATe(e,t){return e=yY(e),aa(rv.count(Md(e),e)+(Md(e).getDay()===4),t,2)}function PTe(e){return e.getDay()}function ETe(e,t){return aa(OS.count(Md(e)-1,e),t,2)}function kTe(e,t){return aa(e.getFullYear()%100,t,2)}function OTe(e,t){return e=yY(e),aa(e.getFullYear()%100,t,2)}function TTe(e,t){return aa(e.getFullYear()%1e4,t,4)}function ITe(e,t){var r=e.getDay();return e=r>=4||r===0?rv(e):rv.ceil(e),aa(e.getFullYear()%1e4,t,4)}function DTe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+aa(t/60|0,"0",2)+aa(t%60,"0",2)}function GF(e,t){return aa(e.getUTCDate(),t,2)}function MTe(e,t){return aa(e.getUTCHours(),t,2)}function RTe(e,t){return aa(e.getUTCHours()%12||12,t,2)}function LTe(e,t){return aa(1+Kj.count(Rd(e),e),t,3)}function xY(e,t){return aa(e.getUTCMilliseconds(),t,3)}function $Te(e,t){return xY(e,t)+"000"}function FTe(e,t){return aa(e.getUTCMonth()+1,t,2)}function BTe(e,t){return aa(e.getUTCMinutes(),t,2)}function zTe(e,t){return aa(e.getUTCSeconds(),t,2)}function qTe(e){var t=e.getUTCDay();return t===0?7:t}function UTe(e,t){return aa(Xj.count(Rd(e)-1,e),t,2)}function bY(e){var t=e.getUTCDay();return t>=4||t===0?nv(e):nv.ceil(e)}function WTe(e,t){return e=bY(e),aa(nv.count(Rd(e),e)+(Rd(e).getUTCDay()===4),t,2)}function VTe(e){return e.getUTCDay()}function HTe(e,t){return aa(TS.count(Rd(e)-1,e),t,2)}function GTe(e,t){return aa(e.getUTCFullYear()%100,t,2)}function KTe(e,t){return e=bY(e),aa(e.getUTCFullYear()%100,t,2)}function YTe(e,t){return aa(e.getUTCFullYear()%1e4,t,4)}function XTe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?nv(e):nv.ceil(e),aa(e.getUTCFullYear()%1e4,t,4)}function JTe(){return"+0000"}function KF(){return"%"}function YF(e){return+e}function XF(e){return Math.floor(+e/1e3)}var Ip,wY,SY;QTe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QTe(e){return Ip=QOe(e),wY=Ip.format,Ip.parse,SY=Ip.utcFormat,Ip.utcParse,Ip}function ZTe(e){return new Date(e)}function eIe(e){return e instanceof Date?+e:+new Date(+e)}function H3(e,t,r,n,a,i,o,l,c,u){var d=T3(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(A){return(c(A)<A?m:l(A)<A?g:o(A)<A?p:i(A)<A?v:n(A)<A?a(A)<A?x:b:r(A)<A?w:_)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?h(Array.from(A,eIe)):h().map(ZTe)},d.ticks=function(A){var P=h();return e(P[0],P[P.length-1],A??10)},d.tickFormat=function(A,P){return P==null?j:u(P)},d.nice=function(A){var P=h();return(!A||typeof A.range!="function")&&(A=t(P[0],P[P.length-1],A??10)),A?h(lY(P,A)):d},d.copy=function(){return $b(d,H3(e,t,r,n,a,i,o,l,c,u))},d}function tIe(){return oc.apply(H3(XOe,JOe,Md,W3,Yj,Fb,q3,B3,fm,wY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rIe(){return oc.apply(H3(KOe,YOe,Rd,V3,Xj,Kj,U3,z3,fm,SY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jj(){var e=0,t=1,r,n,a,i,o=xs,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(Kv),u.rangeRound=d(O3),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Ch(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _Y(){var e=Nh(Jj()(xs));return e.copy=function(){return Ch(e,_Y())},Hd.apply(e,arguments)}function jY(){var e=M3(Jj()).domain([1,10]);return e.copy=function(){return Ch(e,jY()).base(e.base())},Hd.apply(e,arguments)}function NY(){var e=R3(Jj());return e.copy=function(){return Ch(e,NY()).constant(e.constant())},Hd.apply(e,arguments)}function G3(){var e=L3(Jj());return e.copy=function(){return Ch(e,G3()).exponent(e.exponent())},Hd.apply(e,arguments)}function nIe(){return G3.apply(null,arguments).exponent(.5)}function CY(){var e=[],t=xs;function r(n){if(n!=null&&!isNaN(n=+n))return t((Rb(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Yf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Uke(e,i/n))},r.copy=function(){return CY(t).domain(e)},Hd.apply(r,arguments)}function Qj(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=xs,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(v){var x,b,w;return arguments.length?([x,b,w]=v,u=pOe(p,[x,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Kv),m.rangeRound=g(O3),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,a=p(e),i=p(t),o=p(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function AY(){var e=Nh(Qj()(xs));return e.copy=function(){return Ch(e,AY())},Hd.apply(e,arguments)}function PY(){var e=M3(Qj()).domain([.1,1,10]);return e.copy=function(){return Ch(e,PY()).base(e.base())},Hd.apply(e,arguments)}function EY(){var e=R3(Qj());return e.copy=function(){return Ch(e,EY()).constant(e.constant())},Hd.apply(e,arguments)}function K3(){var e=L3(Qj());return e.copy=function(){return Ch(e,K3()).exponent(e.exponent())},Hd.apply(e,arguments)}function aIe(){return K3.apply(null,arguments).exponent(.5)}const JF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_0,scaleDiverging:AY,scaleDivergingLog:PY,scaleDivergingPow:K3,scaleDivergingSqrt:aIe,scaleDivergingSymlog:EY,scaleIdentity:sY,scaleImplicit:vk,scaleLinear:ES,scaleLog:cY,scaleOrdinal:P3,scalePoint:_x,scalePow:$3,scaleQuantile:fY,scaleQuantize:hY,scaleRadial:dY,scaleSequential:_Y,scaleSequentialLog:jY,scaleSequentialPow:G3,scaleSequentialQuantile:CY,scaleSequentialSqrt:nIe,scaleSequentialSymlog:NY,scaleSqrt:$Oe,scaleSymlog:uY,scaleThreshold:mY,scaleTime:tIe,scaleUtc:rIe,tickFormat:oY},Symbol.toStringTag,{value:"Module"}));var iIe=Fv;function oIe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!iIe(o):r(o,l)))var l=o,c=i}return c}var Zj=oIe;function sIe(e,t){return e>t}var kY=sIe,lIe=Zj,cIe=kY,uIe=Gv;function dIe(e){return e&&e.length?lIe(e,uIe,cIe):void 0}var fIe=dIe;const kf=Gn(fIe);function hIe(e,t){return e<t}var OY=hIe,mIe=Zj,pIe=OY,gIe=Gv;function vIe(e){return e&&e.length?mIe(e,gIe,pIe):void 0}var yIe=vIe;const eN=Gn(yIe);var xIe=l3,bIe=Tu,wIe=FK,SIe=Ys;function _Ie(e,t){var r=SIe(e)?xIe:wIe;return r(e,bIe(t))}var jIe=_Ie,NIe=LK,CIe=jIe;function AIe(e,t){return NIe(CIe(e,t),1)}var PIe=AIe;const EIe=Gn(PIe);var kIe=_3;function OIe(e,t){return kIe(e,t)}var TIe=OIe;const Wm=Gn(TIe);var Yv=1e9,IIe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},X3,ai=!0,rc="[DecimalError] ",Nm=rc+"Invalid argument: ",Y3=rc+"Exponent out of range: ",Xv=Math.floor,Qh=Math.pow,DIe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hl,fo=1e7,Ka=7,TY=9007199254740991,IS=Xv(TY/Ka),jr={};jr.absoluteValue=jr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jr.comparedTo=jr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};jr.decimalPlaces=jr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ka;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};jr.dividedBy=jr.div=function(e){return Cd(this,new this.constructor(e))};jr.dividedToIntegerBy=jr.idiv=function(e){var t=this,r=t.constructor;return Ea(Cd(t,new r(e),0,1),r.precision)};jr.equals=jr.eq=function(e){return!this.cmp(e)};jr.exponent=function(){return $i(this)};jr.greaterThan=jr.gt=function(e){return this.cmp(e)>0};jr.greaterThanOrEqualTo=jr.gte=function(e){return this.cmp(e)>=0};jr.isInteger=jr.isint=function(){return this.e>this.d.length-2};jr.isNegative=jr.isneg=function(){return this.s<0};jr.isPositive=jr.ispos=function(){return this.s>0};jr.isZero=function(){return this.s===0};jr.lessThan=jr.lt=function(e){return this.cmp(e)<0};jr.lessThanOrEqualTo=jr.lte=function(e){return this.cmp(e)<1};jr.logarithm=jr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(hl))throw Error(rc+"NaN");if(r.s<1)throw Error(rc+(r.s?"NaN":"-Infinity"));return r.eq(hl)?new n(0):(ai=!1,t=Cd(P0(r,i),P0(e,i),i),ai=!0,Ea(t,a))};jr.minus=jr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MY(t,e):IY(t,(e.s=-e.s,e))};jr.modulo=jr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(rc+"NaN");return r.s?(ai=!1,t=Cd(r,e,0,1).times(e),ai=!0,r.minus(t)):Ea(new n(r),a)};jr.naturalExponential=jr.exp=function(){return DY(this)};jr.naturalLogarithm=jr.ln=function(){return P0(this)};jr.negated=jr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jr.plus=jr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IY(t,e):MY(t,(e.s=-e.s,e))};jr.precision=jr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Nm+e);if(t=$i(a)+1,n=a.d.length-1,r=n*Ka+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};jr.squareRoot=jr.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(rc+"NaN")}for(e=$i(l),ai=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=uu(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Xv((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Cd(l,i,o+2)).times(.5),uu(i.d).slice(0,o)===(t=uu(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Ea(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return ai=!0,Ea(n,r)};jr.times=jr.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%fo|0,t=l/fo|0;i[a]=(i[a]+t)%fo|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ai?Ea(e,f.precision):e};jr.toDecimalPlaces=jr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Au(e,0,Yv),t===void 0?t=n.rounding:Au(t,0,8),Ea(r,e+$i(r)+1,t))};jr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Vm(n,!0):(Au(e,0,Yv),t===void 0?t=a.rounding:Au(t,0,8),n=Ea(new a(n),e+1,t),r=Vm(n,!0,e+1)),r};jr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Vm(a):(Au(e,0,Yv),t===void 0?t=i.rounding:Au(t,0,8),n=Ea(new i(a),e+$i(a)+1,t),r=Vm(n.abs(),!1,e+$i(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};jr.toInteger=jr.toint=function(){var e=this,t=e.constructor;return Ea(new t(e),$i(e)+1,t.rounding)};jr.toNumber=function(){return+this};jr.toPower=jr.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(hl);if(l=new c(l),!l.s){if(e.s<1)throw Error(rc+"Infinity");return l}if(l.eq(hl))return l;if(n=c.precision,e.eq(hl))return Ea(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=TY){for(a=new c(hl),t=Math.ceil(n/Ka+4),ai=!1;r%2&&(a=a.times(l),ZF(a.d,t)),r=Xv(r/2),r!==0;)l=l.times(l),ZF(l.d,t);return ai=!0,e.s<0?new c(hl).div(a):Ea(a,n)}}else if(i<0)throw Error(rc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ai=!1,a=e.times(P0(l,n+u)),ai=!0,a=DY(a),a.s=i,a};jr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=$i(a),n=Vm(a,r<=i.toExpNeg||r>=i.toExpPos)):(Au(e,1,Yv),t===void 0?t=i.rounding:Au(t,0,8),a=Ea(new i(a),e,t),r=$i(a),n=Vm(a,e<=r||r<=i.toExpNeg,e)),n};jr.toSignificantDigits=jr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Au(e,1,Yv),t===void 0?t=n.rounding:Au(t,0,8)),Ea(new n(r),e,t)};jr.toString=jr.valueOf=jr.val=jr.toJSON=jr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=$i(e),r=e.constructor;return Vm(e,t<=r.toExpNeg||t>=r.toExpPos)};function IY(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ai?Ea(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ka),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/fo|0,c[i]%=fo;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ai?Ea(t,f):t}function Au(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Nm+e)}function uu(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Ka-n.length,r&&(i+=bf(r)),i+=n;o=e[t],n=o+"",r=Ka-n.length,r&&(i+=bf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Cd=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%fo|0,o=i/fo|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*fo+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,g,p,v,x,b,w,_,j,A,P,C,k=n.constructor,R=n.s==a.s?1:-1,E=n.d,I=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(rc+"Division by zero");for(c=n.e-a.e,P=I.length,j=E.length,m=new k(R),g=m.d=[],u=0;I[u]==(E[u]||0);)++u;if(I[u]>(E[u]||0)&&--c,i==null?b=i=k.precision:o?b=i+($i(n)-$i(a))+1:b=i,b<0)return new k(0);if(b=b/Ka+2|0,u=0,P==1)for(d=0,I=I[0],b++;(u<j||d)&&b--;u++)w=d*fo+(E[u]||0),g[u]=w/I|0,d=w%I|0;else{for(d=fo/(I[0]+1)|0,d>1&&(I=e(I,d),E=e(E,d),P=I.length,j=E.length),_=P,p=E.slice(0,P),v=p.length;v<P;)p[v++]=0;C=I.slice(),C.unshift(0),A=I[0],I[1]>=fo/2&&++A;do d=0,l=t(I,p,P,v),l<0?(x=p[0],P!=v&&(x=x*fo+(p[1]||0)),d=x/A|0,d>1?(d>=fo&&(d=fo-1),f=e(I,d),h=f.length,v=p.length,l=t(f,p,h,v),l==1&&(d--,r(f,P<h?C:I,h))):(d==0&&(l=d=1),f=I.slice()),h=f.length,h<v&&f.unshift(0),r(p,f,v),l==-1&&(v=p.length,l=t(I,p,P,v),l<1&&(d++,r(p,P<v?C:I,v))),v=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[v++]=E[_]||0:(p=[E[_]],v=1);while((_++<j||p[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,Ea(m,o?i+$i(m)+1:i)}}();function DY(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if($i(e)>16)throw Error(Y3+$i(e));if(!e.s)return new d(hl);for(t==null?(ai=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Qh(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(hl),d.precision=l;;){if(a=Ea(a.times(e),l),r=r.times(++c),o=i.plus(Cd(a,r,l)),uu(o.d).slice(0,l)===uu(i.d).slice(0,l)){for(;u--;)i=Ea(i.times(i),l);return d.precision=f,t==null?(ai=!0,Ea(i,f)):i}i=o}}function $i(e){for(var t=e.e*Ka,r=e.d[0];r>=10;r/=10)t++;return t}function G5(e,t,r){if(t>e.LN10.sd())throw ai=!0,r&&(e.precision=r),Error(rc+"LN10 precision limit exceeded");return Ea(new e(e.LN10),t)}function bf(e){for(var t="";e--;)t+="0";return t}function P0(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(rc+(m.s?"NaN":"-Infinity"));if(m.eq(hl))return new p(0);if(t==null?(ai=!1,u=v):u=t,m.eq(10))return t==null&&(ai=!0),G5(p,u);if(u+=h,p.precision=u,r=uu(g),n=r.charAt(0),i=$i(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=uu(m.d),n=r.charAt(0),f++;i=$i(m),n>1?(m=new p("0."+r),i++):m=new p(n+"."+r.slice(1))}else return c=G5(p,u+2,v).times(i+""),m=P0(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=v,t==null?(ai=!0,Ea(m,v)):m;for(l=o=m=Cd(m.minus(hl),m.plus(hl),u),d=Ea(m.times(m),u),a=3;;){if(o=Ea(o.times(d),u),c=l.plus(Cd(o,new p(a),u)),uu(c.d).slice(0,u)===uu(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(G5(p,u+2,v).times(i+""))),l=Cd(l,new p(f),u),p.precision=v,t==null?(ai=!0,Ea(l,v)):l;l=c,a+=2}}function QF(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Xv(r/Ka),e.d=[],n=(r+1)%Ka,r<0&&(n+=Ka),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ka;n<a;)e.d.push(+t.slice(n,n+=Ka));t=t.slice(n),n=Ka-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ai&&(e.e>IS||e.e<-IS))throw Error(Y3+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ea(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ka,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ka),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Ka,a=n-Ka+o}if(r!==void 0&&(i=Qh(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Qh(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=$i(e),f.length=1,t=t-i-1,f[0]=Qh(10,(Ka-t%Ka)%Ka),e.e=Xv(-t/Ka)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Qh(10,Ka-n),f[d]=a>0?(u/Qh(10,o-a)%Qh(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==fo&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=fo)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(ai&&(e.e>IS||e.e<-IS))throw Error(Y3+$i(e));return e}function MY(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ai?Ea(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Ka),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=fo-1;--c[i],c[a]+=fo}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ai?Ea(t,m):t):new h(0)}function Vm(e,t,r){var n,a=$i(e),i=uu(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+bf(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+bf(-a-1)+i,r&&(n=r-o)>0&&(i+=bf(n))):a>=o?(i+=bf(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+bf(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=bf(n))),e.s<0?"-"+i:i}function ZF(e,t){if(e.length>t)return e.length=t,!0}function RY(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Nm+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return QF(o,i.toString())}else if(typeof i!="string")throw Error(Nm+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,DIe.test(i))QF(o,i);else throw Error(Nm+i)}if(a.prototype=jr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=RY,a.config=a.set=MIe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function MIe(e){if(!e||typeof e!="object")throw Error(rc+"Object expected");var t,r,n,a=["precision",1,Yv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Xv(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Nm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Nm+r+": "+n);return this}var X3=RY(IIe);hl=new X3(1);const _a=X3;function RIe(e){return BIe(e)||FIe(e)||$Ie(e)||LIe()}function LIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ie(e,t){if(e){if(typeof e=="string")return wk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wk(e,t)}}function FIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function BIe(e){if(Array.isArray(e))return wk(e)}function wk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zIe=function(t){return t},LY={"@@functional/placeholder":!0},$Y=function(t){return t===LY},e8=function(t){return function r(){return arguments.length===0||arguments.length===1&&$Y(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},qIe=function e(t,r){return t===1?r:e8(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==LY}).length;return o>=t?r.apply(void 0,a):e(t-o,e8(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return $Y(f)?c.shift():f});return r.apply(void 0,RIe(d).concat(c))}))})},tN=function(t){return qIe(t.length,t)},Sk=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},UIe=tN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),WIe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return zIe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},_k=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},FY=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function VIe(e){var t;return e===0?t=1:t=Math.floor(new _a(e).abs().log(10).toNumber())+1,t}function HIe(e,t,r){for(var n=new _a(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var GIe=tN(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),KIe=tN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),YIe=tN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const rN={rangeStep:HIe,getDigitCount:VIe,interpolateNumber:GIe,uninterpolateNumber:KIe,uninterpolateTruncation:YIe};function jk(e){return QIe(e)||JIe(e)||BY(e)||XIe()}function XIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function QIe(e){if(Array.isArray(e))return Nk(e)}function E0(e,t){return t3e(e)||e3e(e,t)||BY(e,t)||ZIe()}function ZIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BY(e,t){if(e){if(typeof e=="string")return Nk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nk(e,t)}}function Nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function e3e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function t3e(e){if(Array.isArray(e))return e}function zY(e){var t=E0(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function qY(e,t,r){if(e.lte(0))return new _a(0);var n=rN.getDigitCount(e.toNumber()),a=new _a(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new _a(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new _a(Math.ceil(c))}function r3e(e,t,r){var n=1,a=new _a(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new _a(10).pow(rN.getDigitCount(e)-1),a=new _a(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new _a(Math.floor(e)))}else e===0?a=new _a(Math.floor((t-1)/2)):r||(a=new _a(Math.floor(e)));var o=Math.floor((t-1)/2),l=WIe(UIe(function(c){return a.add(new _a(c-o).mul(n)).toNumber()}),Sk);return l(0,t)}function UY(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new _a(0),tickMin:new _a(0),tickMax:new _a(0)};var i=qY(new _a(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new _a(0):(o=new _a(e).add(t).div(2),o=o.sub(new _a(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new _a(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?UY(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new _a(l).mul(i)),tickMax:o.add(new _a(c).mul(i))})}function n3e(e){var t=E0(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=zY([r,n]),c=E0(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(jk(Sk(0,a-1).map(function(){return 1/0}))):[].concat(jk(Sk(0,a-1).map(function(){return-1/0})),[d]);return r>n?_k(f):f}if(u===d)return r3e(u,a,i);var h=UY(u,d,o,i),m=h.step,g=h.tickMin,p=h.tickMax,v=rN.rangeStep(g,p.add(new _a(.1).mul(m)),m);return r>n?_k(v):v}function a3e(e,t){var r=E0(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=zY([n,a]),l=E0(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=qY(new _a(u).sub(c).div(d-1),i,0),h=[].concat(jk(rN.rangeStep(new _a(c),new _a(u).sub(new _a(.99).mul(f)),f)),[u]);return n>a?_k(h):h}var i3e=FY(n3e),o3e=FY(a3e),s3e=!0,K5="Invariant failed";function ch(e,t){if(!e){if(s3e)throw new Error(K5);var r=typeof t=="function"?t():t,n=r?"".concat(K5,": ").concat(r):K5;throw new Error(n)}}var l3e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DS.apply(this,arguments)}function c3e(e,t){return h3e(e)||f3e(e,t)||d3e(e,t)||u3e()}function u3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d3e(e,t){if(e){if(typeof e=="string")return t8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t8(e,t)}}function t8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function h3e(e){if(Array.isArray(e))return e}function m3e(e,t){if(e==null)return{};var r=p3e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function g3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HY(n.key),n)}}function v3e(e,t,r){return t&&r8(e.prototype,t),r&&r8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y3e(e,t,r){return t=MS(t),x3e(e,WY()?Reflect.construct(t,r||[],MS(e).constructor):t.apply(e,r))}function x3e(e,t){if(t&&(av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b3e(e)}function b3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WY=function(){return!!e})()}function MS(e){return MS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},MS(e)}function w3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ck(e,t)}function Ck(e,t){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ck(e,t)}function VY(e,t,r){return t=HY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HY(e){var t=S3e(e,"string");return av(t)=="symbol"?t:t+""}function S3e(e,t){if(av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bb=function(e){function t(){return g3e(this,t),y3e(this,t,arguments)}return w3e(t,e),v3e(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=m3e(n,l3e),m=$r(h,!1);this.props.direction==="x"&&d.type!=="number"&&ch(!1);var g=c.map(function(p){var v=u(p,l),x=v.x,b=v.y,w=v.value,_=v.errorVal;if(!_)return null;var j=[],A,P;if(Array.isArray(_)){var C=c3e(_,2);A=C[0],P=C[1]}else A=P=_;if(i==="vertical"){var k=d.scale,R=b+a,E=R+o,I=R-o,T=k(w-A),M=k(w+P);j.push({x1:M,y1:E,x2:M,y2:I}),j.push({x1:T,y1:R,x2:M,y2:R}),j.push({x1:T,y1:E,x2:T,y2:I})}else if(i==="horizontal"){var z=f.scale,V=x+a,W=V-o,$=V+o,G=z(w-A),me=z(w+P);j.push({x1:W,y1:me,x2:$,y2:me}),j.push({x1:V,y1:G,x2:V,y2:me}),j.push({x1:W,y1:G,x2:$,y2:G})}return se.createElement(Rn,DS({className:"recharts-errorBar",key:"bar-".concat(j.map(function(de){return"".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)}))},m),j.map(function(de){return se.createElement("line",DS({},de,{key:"line-".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)}))}))});return se.createElement(Rn,{className:"recharts-errorBars"},g)}}])}(se.Component);VY(Bb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});VY(Bb,"displayName","ErrorBar");function k0(e){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k0(e)}function n8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n8(Object(r),!0).forEach(function(n){_3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _3e(e,t,r){return t=j3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j3e(e){var t=N3e(e,"string");return k0(t)=="symbol"?t:t+""}function N3e(e,t){if(k0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(k0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GY=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ul(r,_m);if(!o)return null;var l=_m.defaultProps,c=l!==void 0?Lh(Lh({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?Lh(Lh({},h),f.props):{},g=m.dataKey,p=m.name,v=m.legendType,x=m.hide;return{inactive:x,dataKey:g,type:c.iconType||v||"square",color:J3(f),value:p||g,payload:m}}),Lh(Lh(Lh({},c),_m.getWithHeight(o,a)),{},{payload:u,item:o})};function O0(e){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O0(e)}function a8(e){return E3e(e)||P3e(e)||A3e(e)||C3e()}function C3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A3e(e,t){if(e){if(typeof e=="string")return Ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ak(e,t)}}function P3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E3e(e){if(Array.isArray(e))return Ak(e)}function Ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i8(Object(r),!0).forEach(function(n){Cg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cg(e,t,r){return t=k3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k3e(e){var t=O3e(e,"string");return O0(t)=="symbol"?t:t+""}function O3e(e,t){if(O0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(O0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ti(e,t,r){return un(e)||un(t)?r:no(t)?bl(e,t,r):Jr(t)?t(e):r}function jx(e,t,r,n){var a=EIe(e,function(l){return Ti(l,t)});if(r==="number"){var i=a.filter(function(l){return Xt(l)||parseFloat(l)});return i.length?[eN(i),kf(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!un(l)}):a;return o.map(function(l){return no(l)||l instanceof Date?l:""})}var T3e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(vs(f-d)!==vs(h-f)){var g=[];if(vs(h-f)===vs(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var v=h+c[1]-c[0];g[0]=Math.min(f,(v+f)/2),g[1]=Math.max(f,(v+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>x[0]&&t<=x[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(d,h),w=Math.max(d,h);if(t>(b+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},J3=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?bi(bi({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},I3e=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,v=g.cateAxisId,x=p.filter(function(P){return Nd(P.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,w=b!==void 0?bi(bi({},b),x[0].props):x[0].props,_=w.barSize,j=w[v];o[j]||(o[j]=[]);var A=un(_)?r:_;o[j].push({item:x[0],stackList:x.slice(1),barSize:un(A)?void 0:ys(A,n,0)})}}return o},D3e=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=ys(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(_,j){return _+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(_,j){var A={item:j.item,position:{offset:v.offset+v.size+u,size:h?m:j.barSize}},P=[].concat(a8(_),[A]);return v=P[P.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){P.push({item:C,position:v})}),P},f)}else{var x=ys(n,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var b=(a-2*x-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;d=o.reduce(function(_,j,A){var P=[].concat(a8(_),[{item:j.item,position:{offset:x+(b+u)*A+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){P.push({item:C,position:P[P.length-1].position})}),P},f)}return d},M3e=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=GY({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&Xt(t[m]))return bi(bi({},t),{},Cg({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&Xt(t[g]))return bi(bi({},t),{},Cg({},g,t[g]+(h||0)))}return t},R3e=function(t,r,n){return un(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},KY=function(t,r,n,a,i){var o=r.props.children,l=wl(o,Bb).filter(function(u){return R3e(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Ti(d,n);if(un(f))return u;var h=Array.isArray(f)?[eN(f),kf(f)]:[f,f],m=c.reduce(function(g,p){var v=Ti(d,p,0),x=h[0]-Math.abs(Array.isArray(v)?v[0]:v),b=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},L3e=function(t,r,n,a,i){var o=r.map(function(l){return KY(t,l,n,i,a)}).filter(function(l){return!un(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},YY=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&KY(t,c,u,a)||jx(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},XY=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},JY=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},hd=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?vs(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Wv(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Y5=new WeakMap,vw=function(t,r){if(typeof r!="function")return t;Y5.has(t)||Y5.set(t,new WeakMap);var n=Y5.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},QY=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:_0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ES(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:_x(),realScaleType:"point"}:i==="category"?{scale:_0(),realScaleType:"band"}:{scale:ES(),realScaleType:"linear"};if(zm(a)){var c="scale".concat(Bj(a));return{scale:(JF[c]||_x)(),realScaleType:JF[c]?c:"point"}}return Jr(a)?{scale:a}:{scale:_x(),realScaleType:"point"}},o8=1e-4,ZY=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-o8,o=Math.max(a[0],a[1])+o8,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},$3e=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},F3e=function(t,r){if(!r||r.length!==2||!Xt(r[0])||!Xt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Xt(t[0])||t[0]<n)&&(i[0]=n),(!Xt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},B3e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Wv(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},z3e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Wv(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},q3e={sign:B3e,expand:uSe,none:Xg,silhouette:dSe,wiggle:fSe,positive:z3e},U3e=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=q3e[n],o=cSe().keys(a).value(function(l,c){return+Ti(l,c,0)}).order(QE).offset(i);return o(t)},W3e=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?bi(bi({},h.type.defaultProps),h.props):h.props,p=g.stackId,v=g.hide;if(v)return f;var x=g[n],b=f[x]||{hasStack:!1,stackGroups:{}};if(no(p)){var w=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[p]=w}else b.stackGroups[cp("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return bi(bi({},f),{},Cg({},x,b))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,v){var x=m.stackGroups[v];return bi(bi({},p),{},Cg({},v,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:U3e(t,x.items,i)}))},g)}return bi(bi({},f),{},Cg({},h,m))},d)},eX=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=i3e(u,i,l);return t.domain([eN(d),kf(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=o3e(f,i,l);return{niceTicks:h}}return null};function RS(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!un(a[t.dataKey])){var l=lS(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Ti(a,un(o)?t.dataKey:o);return un(c)?null:t.scale(c)}var s8=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Ti(o,r.dataKey,r.domain[l]);return un(c)?null:r.scale(c)-i/2+a},V3e=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},H3e=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?bi(bi({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(no(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},G3e=function(t){return t.reduce(function(r,n){return[eN(n.concat([r[0]]).filter(Xt)),kf(n.concat([r[1]]).filter(Xt))]},[1/0,-1/0])},tX=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=G3e(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},l8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,c8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pk=function(t,r,n){if(Jr(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Xt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(l8.test(t[0])){var i=+l8.exec(t[0])[1];a[0]=r[0]-i}else Jr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Xt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(c8.test(t[1])){var o=+c8.exec(t[1])[1];a[1]=r[1]+o}else Jr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},LS=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=N3(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},u8=function(t,r,n){return!t||!t.length||Wm(t,bl(n,"type.defaultProps.domain"))?r:t},rX=function(t,r){var n=t.type.defaultProps?bi(bi({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return bi(bi({},$r(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:J3(t),value:Ti(r,a),type:c,payload:r,chartType:u,hide:d})};function T0(e){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T0(e)}function d8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ed(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d8(Object(r),!0).forEach(function(n){nX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nX(e,t,r){return t=K3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K3e(e){var t=Y3e(e,"string");return T0(t)=="symbol"?t:t+""}function Y3e(e,t){if(T0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(T0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X3e(e,t){return e4e(e)||Z3e(e,t)||Q3e(e,t)||J3e()}function J3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q3e(e,t){if(e){if(typeof e=="string")return f8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f8(e,t)}}function f8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function e4e(e){if(Array.isArray(e))return e}var $S=Math.PI/180,t4e=function(t){return t*180/Math.PI},Ba=function(t,r,n,a){return{x:t+Math.cos(-$S*a)*n,y:r+Math.sin(-$S*a)*n}},aX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},r4e=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=ys(t.cx,o,o/2),f=ys(t.cy,l,l/2),h=aX(o,l,n),m=ys(t.innerRadius,h,0),g=ys(t.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(v,x){var b=r[x],w=b.domain,_=b.reversed,j;if(un(b.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,g]),_&&(j=[j[1],j[0]]);else{j=b.range;var A=j,P=X3e(A,2);c=P[0],u=P[1]}var C=QY(b,i),k=C.realScaleType,R=C.scale;R.domain(w).range(j),ZY(R);var E=eX(R,ed(ed({},b),{},{realScaleType:k})),I=ed(ed(ed({},b),E),{},{range:j,radius:g,realScaleType:k,scale:R,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return ed(ed({},v),{},nX({},x,I))},{})},n4e=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},a4e=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=n4e({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:t4e(u),angleInRadian:u}},i4e=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},o4e=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},h8=function(t,r){var n=t.x,a=t.y,i=a4e({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=i4e(r),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?ed(ed({},r),{},{radius:o,angle:o4e(m,r)}):null},iX=function(t){return!y.isValidElement(t)&&!Jr(t)&&typeof t!="boolean"?t.className:""};function I0(e){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I0(e)}var s4e=["offset"];function l4e(e){return f4e(e)||d4e(e)||u4e(e)||c4e()}function c4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u4e(e,t){if(e){if(typeof e=="string")return Ek(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ek(e,t)}}function d4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f4e(e){if(Array.isArray(e))return Ek(e)}function Ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h4e(e,t){if(e==null)return{};var r=m4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function m8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m8(Object(r),!0).forEach(function(n){p4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p4e(e,t,r){return t=g4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g4e(e){var t=v4e(e,"string");return I0(t)=="symbol"?t:t+""}function v4e(e,t){if(I0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(I0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(this,arguments)}var y4e=function(t){var r=t.value,n=t.formatter,a=un(t.children)?r:t.children;return Jr(n)?n(a):a},x4e=function(t,r){var n=vs(r-t),a=Math.min(Math.abs(r-t),360);return n*a},b4e=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,v=(f+h)/2,x=x4e(m,g),b=x>=0?1:-1,w,_;a==="insideStart"?(w=m+b*o,_=p):a==="insideEnd"?(w=g-b*o,_=!p):a==="end"&&(w=g+b*o,_=p),_=x<=0?_:!_;var j=Ba(u,d,v,w),A=Ba(u,d,v,w+(_?1:-1)*359),P="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(A.x,",").concat(A.y),C=un(t.id)?cp("recharts-radial-line-"):t.id;return se.createElement("text",D0({},n,{dominantBaseline:"central",className:dn("recharts-radial-bar-label",l)}),se.createElement("defs",null,se.createElement("path",{id:C,d:P})),se.createElement("textPath",{xlinkHref:"#".concat(C)},r))},w4e=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=Ba(o,l,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,x=Ba(o,l,v,h),b=x.x,w=x.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},S4e=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,v=p*a,x=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Ki(Ki({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return Ki(Ki({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Ki(Ki({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var A={x:l+u+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Ki(Ki({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return i==="insideLeft"?Ki({x:l+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},P):i==="insideRight"?Ki({x:l+u-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},P):i==="insideTop"?Ki({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},P):i==="insideBottom"?Ki({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},P):i==="insideTopLeft"?Ki({x:l+v,y:c+h,textAnchor:b,verticalAnchor:g},P):i==="insideTopRight"?Ki({x:l+u-v,y:c+h,textAnchor:x,verticalAnchor:g},P):i==="insideBottomLeft"?Ki({x:l+v,y:c+d-h,textAnchor:b,verticalAnchor:m},P):i==="insideBottomRight"?Ki({x:l+u-v,y:c+d-h,textAnchor:x,verticalAnchor:m},P):Bv(i)&&(Xt(i.x)||um(i.x))&&(Xt(i.y)||um(i.y))?Ki({x:l+ys(i.x,u),y:c+ys(i.y,d),textAnchor:"end",verticalAnchor:"end"},P):Ki({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},_4e=function(t){return"cx"in t&&Xt(t.cx)};function mo(e){var t=e.offset,r=t===void 0?5:t,n=h4e(e,s4e),a=Ki({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||un(l)&&un(c)&&!y.isValidElement(u)&&!Jr(u))return null;if(y.isValidElement(u))return y.cloneElement(u,a);var m;if(Jr(u)){if(m=y.createElement(u,a),y.isValidElement(m))return m}else m=y4e(a);var g=_4e(i),p=$r(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return b4e(a,m,p);var v=g?w4e(a):S4e(a);return se.createElement(Um,D0({className:dn("recharts-label",f)},p,v,{breakAll:h}),m)}mo.displayName="Label";var oX=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,v=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(Xt(p)&&Xt(v)){if(Xt(f)&&Xt(h))return{x:f,y:h,width:p,height:v};if(Xt(m)&&Xt(g))return{x:m,y:g,width:p,height:v}}return Xt(f)&&Xt(h)?{x:f,y:h,width:0,height:0}:Xt(r)&&Xt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},j4e=function(t,r){return t?t===!0?se.createElement(mo,{key:"label-implicit",viewBox:r}):no(t)?se.createElement(mo,{key:"label-implicit",viewBox:r,value:t}):y.isValidElement(t)?t.type===mo?y.cloneElement(t,{key:"label-implicit",viewBox:r}):se.createElement(mo,{key:"label-implicit",content:t,viewBox:r}):Jr(t)?se.createElement(mo,{key:"label-implicit",content:t,viewBox:r}):Bv(t)?se.createElement(mo,D0({viewBox:r},t,{key:"label-implicit"})):null:null},N4e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=oX(t),o=wl(a,mo).map(function(c,u){return y.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=j4e(t.label,r||i);return[l].concat(l4e(o))};mo.parseViewBox=oX;mo.renderCallByParent=N4e;function C4e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var A4e=C4e;const P4e=Gn(A4e);function M0(e){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M0(e)}var E4e=["valueAccessor"],k4e=["data","dataKey","clockWise","id","textBreakAll"];function O4e(e){return M4e(e)||D4e(e)||I4e(e)||T4e()}function T4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I4e(e,t){if(e){if(typeof e=="string")return kk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kk(e,t)}}function D4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M4e(e){if(Array.isArray(e))return kk(e)}function kk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FS(){return FS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FS.apply(this,arguments)}function p8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function g8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p8(Object(r),!0).forEach(function(n){R4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R4e(e,t,r){return t=L4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L4e(e){var t=$4e(e,"string");return M0(t)=="symbol"?t:t+""}function $4e(e,t){if(M0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(M0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v8(e,t){if(e==null)return{};var r=F4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var B4e=function(t){return Array.isArray(t.value)?P4e(t.value):t.value};function bu(e){var t=e.valueAccessor,r=t===void 0?B4e:t,n=v8(e,E4e),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=v8(n,k4e);return!a||!a.length?null:se.createElement(Rn,{className:"recharts-label-list"},a.map(function(d,f){var h=un(i)?r(d,f):Ti(d&&d.payload,i),m=un(l)?{}:{id:"".concat(l,"-").concat(f)};return se.createElement(mo,FS({},$r(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:mo.parseViewBox(un(o)?d:g8(g8({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}bu.displayName="LabelList";function z4e(e,t){return e?e===!0?se.createElement(bu,{key:"labelList-implicit",data:t}):se.isValidElement(e)||Jr(e)?se.createElement(bu,{key:"labelList-implicit",data:t,content:e}):Bv(e)?se.createElement(bu,FS({data:t},e,{key:"labelList-implicit"})):null:null}function q4e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=wl(n,bu).map(function(o,l){return y.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=z4e(e.label,t);return[i].concat(O4e(a))}bu.renderCallByParent=q4e;function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ok.apply(this,arguments)}function y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(r),!0).forEach(function(n){U4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U4e(e,t,r){return t=W4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W4e(e){var t=V4e(e,"string");return R0(t)=="symbol"?t:t+""}function V4e(e,t){if(R0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(R0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H4e=function(t,r){var n=vs(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},yw=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/$S,h=u?i:i+o*f,m=Ba(r,n,d,h),g=Ba(r,n,a,h),p=u?i-o*f:i,v=Ba(r,n,d*Math.cos(f*$S),p);return{center:m,circleTangency:g,lineTangency:v,theta:f}},sX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=H4e(o,l),u=o+c,d=Ba(r,n,i,o),f=Ba(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Ba(r,n,a,o),g=Ba(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},G4e=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=vs(d-u),h=yw({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,v=yw({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),x=v.circleTangency,b=v.lineTangency,w=v.theta,_=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):sX({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var A=yw({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=A.circleTangency,C=A.lineTangency,k=A.theta,R=yw({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=R.circleTangency,I=R.lineTangency,T=R.theta,M=c?Math.abs(u-d):Math.abs(u-d)-k-T;if(M<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},K4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Q3=function(t){var r=x8(x8({},K4e),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=dn("recharts-sector",h),g=o-i,p=ys(l,g,0,!0),v;return p>0&&Math.abs(d-f)<360?v=G4e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=sX({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),se.createElement("path",Ok({},$r(r,!0),{className:m,d:v,role:"img"}))};function L0(e){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L0(e)}function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tk.apply(this,arguments)}function b8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(r),!0).forEach(function(n){Y4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y4e(e,t,r){return t=X4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X4e(e){var t=J4e(e,"string");return L0(t)=="symbol"?t:t+""}function J4e(e,t){if(L0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(L0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S8={curveBasisClosed:Q2e,curveBasisOpen:Z2e,curveBasis:J2e,curveBumpX:L2e,curveBumpY:$2e,curveLinearClosed:eSe,curveLinear:qj,curveMonotoneX:tSe,curveMonotoneY:rSe,curveNatural:nSe,curveStep:aSe,curveStepAfter:oSe,curveStepBefore:iSe},xw=function(t){return t.x===+t.x&&t.y===+t.y},Ry=function(t){return t.x},Ly=function(t){return t.y},Q4e=function(t,r){if(Jr(t))return t;var n="curve".concat(Bj(t));return(n==="curveMonotone"||n==="curveBump")&&r?S8["".concat(n).concat(r==="vertical"?"Y":"X")]:S8[n]||qj},Z4e=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Q4e(n,l),f=u?i.filter(function(p){return xw(p)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(p){return xw(p)}):o,g=f.map(function(p,v){return w8(w8({},p),{},{base:m[v]})});return l==="vertical"?h=cw().y(Ly).x1(Ry).x0(function(p){return p.base.x}):h=cw().x(Ry).y1(Ly).y0(function(p){return p.base.y}),h.defined(xw).curve(d),h(g)}return l==="vertical"&&Xt(o)?h=cw().y(Ly).x1(Ry).x0(o):Xt(o)?h=cw().x(Ry).y1(Ly).y0(o):h=rK().x(Ry).y(Ly),h.defined(xw).curve(d),h(f)},Cm=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Z4e(t):a;return y.createElement("path",Tk({},$r(t,!1),cS(t),{className:dn("recharts-curve",r),d:o,ref:i}))},lX={exports:{}},eDe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tDe=eDe,rDe=tDe;function cX(){}function uX(){}uX.resetWarningCache=cX;var nDe=function(){function e(n,a,i,o,l,c){if(c!==rDe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uX,resetWarningCache:cX};return r.PropTypes=r,r};lX.exports=nDe();var aDe=lX.exports;const Ur=Gn(aDe);var iDe=Object.getOwnPropertyNames,oDe=Object.getOwnPropertySymbols,sDe=Object.prototype.hasOwnProperty;function _8(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function bw(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function j8(e){return iDe(e).concat(oDe(e))}var lDe=Object.hasOwn||function(e,t){return sDe.call(e,t)};function fp(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var cDe="__v",uDe="__o",dDe="_owner",N8=Object.getOwnPropertyDescriptor,C8=Object.keys;function fDe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function hDe(e,t){return fp(e.getTime(),t.getTime())}function mDe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function pDe(e,t){return e===t}function A8(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var gDe=fp;function vDe(e,t,r){var n=C8(e),a=n.length;if(C8(t).length!==a)return!1;for(;a-- >0;)if(!dX(e,t,r,n[a]))return!1;return!0}function $y(e,t,r){var n=j8(e),a=n.length;if(j8(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!dX(e,t,r,i)||(o=N8(e,i),l=N8(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function yDe(e,t){return fp(e.valueOf(),t.valueOf())}function xDe(e,t){return e.source===t.source&&e.flags===t.flags}function P8(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function bDe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function wDe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function dX(e,t,r,n){return(n===dDe||n===uDe||n===cDe)&&(e.$$typeof||t.$$typeof)?!0:lDe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var SDe="[object Arguments]",_De="[object Boolean]",jDe="[object Date]",NDe="[object Error]",CDe="[object Map]",ADe="[object Number]",PDe="[object Object]",EDe="[object RegExp]",kDe="[object Set]",ODe="[object String]",TDe="[object URL]",IDe=Array.isArray,E8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,k8=Object.assign,DDe=Object.prototype.toString.call.bind(Object.prototype.toString);function MDe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,v){if(g===p)return!0;if(g==null||p==null)return!1;var x=typeof g;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(g,p,v):x==="function"?a(g,p,v):!1;var b=g.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(g,p,v);if(IDe(g))return t(g,p,v);if(E8!=null&&E8(g))return f(g,p,v);if(b===Date)return r(g,p,v);if(b===RegExp)return u(g,p,v);if(b===Map)return i(g,p,v);if(b===Set)return d(g,p,v);var w=DDe(g);return w===jDe?r(g,p,v):w===EDe?u(g,p,v):w===CDe?i(g,p,v):w===kDe?d(g,p,v):w===PDe?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,v):w===TDe?h(g,p,v):w===NDe?n(g,p,v):w===SDe?l(g,p,v):w===_De||w===ADe||w===ODe?c(g,p,v):!1}}function RDe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?$y:fDe,areDatesEqual:hDe,areErrorsEqual:mDe,areFunctionsEqual:pDe,areMapsEqual:n?_8(A8,$y):A8,areNumbersEqual:gDe,areObjectsEqual:n?$y:vDe,arePrimitiveWrappersEqual:yDe,areRegExpsEqual:xDe,areSetsEqual:n?_8(P8,$y):P8,areTypedArraysEqual:n?$y:bDe,areUrlsEqual:wDe};if(r&&(a=k8({},a,r(a))),t){var i=bw(a.areArraysEqual),o=bw(a.areMapsEqual),l=bw(a.areObjectsEqual),c=bw(a.areSetsEqual);a=k8({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function LDe(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function $De(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var FDe=Ah();Ah({strict:!0});Ah({circular:!0});Ah({circular:!0,strict:!0});Ah({createInternalComparator:function(){return fp}});Ah({strict:!0,createInternalComparator:function(){return fp}});Ah({circular:!0,createInternalComparator:function(){return fp}});Ah({circular:!0,createInternalComparator:function(){return fp},strict:!0});function Ah(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=RDe(e),c=MDe(l),u=n?n(c):LDe(c);return $De({circular:r,comparator:c,createState:a,equals:u,strict:o})}function BDe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function O8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):BDe(a)};requestAnimationFrame(n)}function Ik(e){"@babel/helpers - typeof";return Ik=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ik(e)}function zDe(e){return VDe(e)||WDe(e)||UDe(e)||qDe()}function qDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UDe(e,t){if(e){if(typeof e=="string")return T8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T8(e,t)}}function T8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VDe(e){if(Array.isArray(e))return e}function HDe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=zDe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){O8(a.bind(null,u),c);return}a(c),O8(a.bind(null,u));return}Ik(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function $0(e){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0(e)}function I8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I8(Object(r),!0).forEach(function(n){fX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fX(e,t,r){return t=GDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GDe(e){var t=KDe(e,"string");return $0(t)==="symbol"?t:String(t)}function KDe(e,t){if($0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YDe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},XDe=function(t){return t},JDe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Nx=function(t,r){return Object.keys(r).reduce(function(n,a){return D8(D8({},n),{},fX({},a,t(a,r[a])))},{})},M8=function(t,r,n){return t.map(function(a){return"".concat(JDe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function QDe(e,t){return tMe(e)||eMe(e,t)||hX(e,t)||ZDe()}function ZDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function tMe(e){if(Array.isArray(e))return e}function rMe(e){return iMe(e)||aMe(e)||hX(e)||nMe()}function nMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hX(e,t){if(e){if(typeof e=="string")return Dk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dk(e,t)}}function aMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iMe(e){if(Array.isArray(e))return Dk(e)}function Dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var BS=1e-4,mX=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},pX=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},R8=function(t,r){return function(n){var a=mX(t,r);return pX(a,n)}},oMe=function(t,r){return function(n){var a=mX(t,r),i=[].concat(rMe(a.map(function(o,l){return o*l}).slice(1)),[0]);return pX(i,n)}},L8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=QDe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=R8(a,o),h=R8(i,l),m=oMe(a,o),g=function(x){return x>1?1:x<0?0:x},p=function(x){for(var b=x>1?1:x,w=b,_=0;_<8;++_){var j=f(w)-b,A=m(w);if(Math.abs(j-b)<BS||A<BS)return h(w);w=g(w-j/A)}return h(w)};return p.isStepper=!1,p},sMe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,g=h*i,p=h+(m-g)*l/1e3,v=h*l/1e3+d;return Math.abs(v-f)<BS&&Math.abs(p)<BS?[f,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},lMe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return L8(a);case"spring":return sMe();default:if(a.split("(")[0]==="cubic-bezier")return L8(a)}return typeof a=="function"?a:null};function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}function $8(e){return dMe(e)||uMe(e)||gX(e)||cMe()}function cMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dMe(e){if(Array.isArray(e))return Rk(e)}function F8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F8(Object(r),!0).forEach(function(n){Mk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mk(e,t,r){return t=fMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fMe(e){var t=hMe(e,"string");return F0(t)==="symbol"?t:String(t)}function hMe(e,t){if(F0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(F0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mMe(e,t){return vMe(e)||gMe(e,t)||gX(e,t)||pMe()}function pMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gX(e,t){if(e){if(typeof e=="string")return Rk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rk(e,t)}}function Rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vMe(e){if(Array.isArray(e))return e}var zS=function(t,r,n){return t+(r-t)*n},Lk=function(t){var r=t.from,n=t.to;return r!==n},yMe=function e(t,r,n){var a=Nx(function(i,o){if(Lk(o)){var l=t(o.from,o.to,o.velocity),c=mMe(l,2),u=c[0],d=c[1];return No(No({},o),{},{from:u,velocity:d})}return o},r);return n<1?Nx(function(i,o){return Lk(o)?No(No({},o),{},{velocity:zS(o.velocity,a[i].velocity,n),from:zS(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const xMe=function(e,t,r,n,a){var i=YDe(e,t),o=i.reduce(function(v,x){return No(No({},v),{},Mk({},x,[e[x],t[x]]))},{}),l=i.reduce(function(v,x){return No(No({},v),{},Mk({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Nx(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(Lk).length},g=function(x){u||(u=x);var b=x-u,w=b/r.dt;l=yMe(r,l,w),a(No(No(No({},e),t),h())),u=x,m()||(c=requestAnimationFrame(f))},p=function(x){d||(d=x);var b=(x-d)/n,w=Nx(function(j,A){return zS.apply(void 0,$8(A).concat([r(b)]))},o);if(a(No(No(No({},e),t),w)),b<1)c=requestAnimationFrame(f);else{var _=Nx(function(j,A){return zS.apply(void 0,$8(A).concat([r(1)]))},o);a(No(No(No({},e),t),_))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function iv(e){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(e)}var bMe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function wMe(e,t){if(e==null)return{};var r=SMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SMe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function X5(e){return CMe(e)||NMe(e)||jMe(e)||_Me()}function _Me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jMe(e,t){if(e){if(typeof e=="string")return $k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(e,t)}}function NMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CMe(e){if(Array.isArray(e))return $k(e)}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B8(Object(r),!0).forEach(function(n){tx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tx(e,t,r){return t=vX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vX(n.key),n)}}function PMe(e,t,r){return t&&z8(e.prototype,t),r&&z8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vX(e){var t=EMe(e,"string");return iv(t)==="symbol"?t:String(t)}function EMe(e,t){if(iv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(iv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fk(e,t)}function Fk(e,t){return Fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fk(e,t)}function OMe(e){var t=TMe();return function(){var n=qS(e),a;if(t){var i=qS(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Bk(this,a)}}function Bk(e,t){if(t&&(iv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zk(e)}function zk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qS(e){return qS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qS(e)}var nN=function(e){kMe(r,e);var t=OMe(r);function r(n,a){var i;AMe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(zk(i)),i.changeStyle=i.changeStyle.bind(zk(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),Bk(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Bk(i);i.state={style:c?tx({},c,u):u}}else i.state={style:{}};return i}return PMe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?tx({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(FDe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:a.to;if(this.state&&h){var v={style:c?tx({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(v)}this.runAnimation(gc(gc({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=xMe(o,l,lMe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,v,x){if(x===0)return p;var b=v.duration,w=v.easing,_=w===void 0?"ease":w,j=v.style,A=v.properties,P=v.onAnimationEnd,C=x>0?o[x-1]:v,k=A||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(X5(p),[i.runJSAnimation.bind(i,{from:C.style,to:j,duration:b,easing:_}),b]);var R=M8(k,b,_),E=gc(gc(gc({},C.style),j),{},{transition:R});return[].concat(X5(p),[E,b,P]).filter(XDe)};return this.manager.start([c].concat(X5(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=HDe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=l?tx({},l,c):c,v=M8(Object.keys(p),o,u);g.start([d,i,gc(gc({},p),{},{transition:v}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=wMe(a,bMe),u=y.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var g=m.props,p=g.style,v=p===void 0?{}:p,x=g.className,b=y.cloneElement(m,gc(gc({},c),{},{style:gc(gc({},v),d),className:x}));return b};return u===1?f(y.Children.only(i)):se.createElement("div",null,y.Children.map(i,function(h){return f(h)}))}}]),r}(y.PureComponent);nN.displayName="Animate";nN.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};nN.propTypes={from:Ur.oneOfType([Ur.object,Ur.string]),to:Ur.oneOfType([Ur.object,Ur.string]),attributeName:Ur.string,duration:Ur.number,begin:Ur.number,easing:Ur.oneOfType([Ur.string,Ur.func]),steps:Ur.arrayOf(Ur.shape({duration:Ur.number.isRequired,style:Ur.object.isRequired,easing:Ur.oneOfType([Ur.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ur.func]),properties:Ur.arrayOf("string"),onAnimationEnd:Ur.func})),children:Ur.oneOfType([Ur.node,Ur.func]),isActive:Ur.bool,canBegin:Ur.bool,onAnimationEnd:Ur.func,shouldReAnimate:Ur.bool,onAnimationStart:Ur.func,onAnimationReStart:Ur.func};const uh=nN;function Gr(){return Gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gr.apply(null,arguments)}function US(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yX(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,BE(e,t)}function B0(e){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B0(e)}function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WS.apply(this,arguments)}function IMe(e,t){return LMe(e)||RMe(e,t)||MMe(e,t)||DMe()}function DMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MMe(e,t){if(e){if(typeof e=="string")return q8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q8(e,t)}}function q8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LMe(e){if(Array.isArray(e))return e}function U8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U8(Object(r),!0).forEach(function(n){$Me(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Me(e,t,r){return t=FMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FMe(e){var t=BMe(e,"string");return B0(t)=="symbol"?t:t+""}function BMe(e,t){if(B0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(B0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V8=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},zMe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},qMe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Z3=function(t){var r=W8(W8({},qMe),t),n=y.useRef(),a=y.useState(-1),i=IMe(a,2),o=i[0],l=i[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,v=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=dn("recharts-rectangle",m);return b?se.createElement(uh,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(_){var j=_.width,A=_.height,P=_.x,C=_.y;return se.createElement(uh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:x,easing:g},se.createElement("path",WS({},$r(r,!0),{className:w,d:V8(P,C,j,A,h),ref:n})))}):se.createElement("path",WS({},$r(r,!0),{className:w,d:V8(c,u,d,f,h)}))},UMe=["points","className","baseLinePoints","connectNulls"];function dg(){return dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dg.apply(this,arguments)}function WMe(e,t){if(e==null)return{};var r=VMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function H8(e){return YMe(e)||KMe(e)||GMe(e)||HMe()}function HMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GMe(e,t){if(e){if(typeof e=="string")return qk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qk(e,t)}}function KMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YMe(e){if(Array.isArray(e))return qk(e)}function qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G8=function(t){return t&&t.x===+t.x&&t.y===+t.y},XMe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){G8(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),G8(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Cx=function(t,r){var n=XMe(t);r&&(n=[n.reduce(function(i,o){return[].concat(H8(i),H8(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},JMe=function(t,r,n){var a=Cx(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Cx(r.reverse(),n).slice(1))},QMe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=WMe(t,UMe);if(!r||!r.length)return null;var l=dn("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=JMe(r,a,i);return se.createElement("g",{className:l},se.createElement("path",dg({},$r(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?se.createElement("path",dg({},$r(o,!0),{fill:"none",d:Cx(r,i)})):null,c?se.createElement("path",dg({},$r(o,!0),{fill:"none",d:Cx(a,i)})):null)}var d=Cx(r,i);return se.createElement("path",dg({},$r(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function Uk(){return Uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uk.apply(this,arguments)}var zb=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=dn("recharts-dot",i);return r===+r&&n===+n&&a===+a?y.createElement("circle",Uk({},$r(t,!1),cS(t),{className:o,cx:r,cy:n,r:a})):null};function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z0(e)}var ZMe=["x","y","top","left","width","height","className"];function Wk(){return Wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wk.apply(this,arguments)}function K8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(r),!0).forEach(function(n){tRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tRe(e,t,r){return t=rRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rRe(e){var t=nRe(e,"string");return z0(t)=="symbol"?t:t+""}function nRe(e,t){if(z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(z0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aRe(e,t){if(e==null)return{};var r=iRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var oRe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},sRe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=aRe(t,ZMe),v=eRe({x:n,y:i,top:l,left:u,width:f,height:m},p);return!Xt(n)||!Xt(i)||!Xt(f)||!Xt(m)||!Xt(l)||!Xt(u)?null:se.createElement("path",Wk({},$r(v,!0),{className:dn("recharts-cross",g),d:oRe(n,i,f,m,l,u)}))},lRe=Zj,cRe=kY,uRe=Tu;function dRe(e,t){return e&&e.length?lRe(e,uRe(t),cRe):void 0}var fRe=dRe;const hRe=Gn(fRe);var mRe=Zj,pRe=Tu,gRe=OY;function vRe(e,t){return e&&e.length?mRe(e,pRe(t),gRe):void 0}var yRe=vRe;const xRe=Gn(yRe);var bRe=["cx","cy","angle","ticks","axisLine"],wRe=["ticks","tick","angle","tickFormatter","stroke"];function ov(e){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ax.apply(this,arguments)}function Y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y8(Object(r),!0).forEach(function(n){aN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X8(e,t){if(e==null)return{};var r=SRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bX(n.key),n)}}function jRe(e,t,r){return t&&J8(e.prototype,t),r&&J8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NRe(e,t,r){return t=VS(t),CRe(e,xX()?Reflect.construct(t,r||[],VS(e).constructor):t.apply(e,r))}function CRe(e,t){if(t&&(ov(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ARe(e)}function ARe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xX=function(){return!!e})()}function VS(e){return VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},VS(e)}function PRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vk(e,t)}function Vk(e,t){return Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vk(e,t)}function aN(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=ERe(e,"string");return ov(t)=="symbol"?t:t+""}function ERe(e,t){if(ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iN=function(e){function t(){return _Re(this,t),NRe(this,t,arguments)}return PRe(t,e),jRe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Ba(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=hRe(l,function(d){return d.coordinate||0}),u=xRe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=X8(n,bRe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=Ba(a,i,d[0],o),h=Ba(a,i,d[1],o),m=$h($h($h({},$r(u,!1)),{},{fill:"none"},$r(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return se.createElement("line",Ax({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=X8(a,wRe),f=this.getTickTextAnchor(),h=$r(d,!1),m=$r(o,!1),g=i.map(function(p,v){var x=n.getTickValueCoord(p),b=$h($h($h($h({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:v},x),{},{payload:p});return se.createElement(Rn,Ax({className:dn("recharts-polar-radius-axis-tick",iX(o)),key:"tick-".concat(p.coordinate)},qm(n.props,p,v)),t.renderTickItem(o,b,c?c(p.value,v):p.value))});return se.createElement(Rn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:se.createElement(Rn,{className:dn("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),mo.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):Jr(n)?o=n(a):o=se.createElement(Um,Ax({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(y.PureComponent);aN(iN,"displayName","PolarRadiusAxis");aN(iN,"axisType","radiusAxis");aN(iN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}function rm(){return rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rm.apply(this,arguments)}function Q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q8(Object(r),!0).forEach(function(n){oN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SX(n.key),n)}}function ORe(e,t,r){return t&&Z8(e.prototype,t),r&&Z8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TRe(e,t,r){return t=HS(t),IRe(e,wX()?Reflect.construct(t,r||[],HS(e).constructor):t.apply(e,r))}function IRe(e,t){if(t&&(sv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DRe(e)}function DRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wX=function(){return!!e})()}function HS(e){return HS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},HS(e)}function MRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hk(e,t)}function Hk(e,t){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hk(e,t)}function oN(e,t,r){return t=SX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SX(e){var t=RRe(e,"string");return sv(t)=="symbol"?t:t+""}function RRe(e,t){if(sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LRe=Math.PI/180,eB=1e-5,sN=function(e){function t(){return kRe(this,t),TRe(this,t,arguments)}return MRe(t,e),ORe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Ba(i,o,l,n.coordinate),h=Ba(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*LRe),o;return i>eB?o=a==="outer"?"start":"end":i<-eB?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=Fh(Fh({},$r(this.props,!1)),{},{fill:"none"},$r(l,!1));if(c==="circle")return se.createElement(zb,rm({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return Ba(a,i,o,h.coordinate)});return se.createElement(QMe,rm({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=$r(this.props,!1),f=$r(o,!1),h=Fh(Fh({},d),{},{fill:"none"},$r(l,!1)),m=i.map(function(g,p){var v=n.getTickLineCoord(g),x=n.getTickTextAnchor(g),b=Fh(Fh(Fh({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:v.x2,y:v.y2});return se.createElement(Rn,rm({className:dn("recharts-polar-angle-axis-tick",iX(o)),key:"tick-".concat(g.coordinate)},qm(n.props,g,p)),l&&se.createElement("line",rm({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&t.renderTickItem(o,b,c?c(g.value,p):g.value))});return se.createElement(Rn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(Rn,{className:dn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):Jr(n)?o=n(a):o=se.createElement(Um,rm({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(y.PureComponent);oN(sN,"displayName","PolarAngleAxis");oN(sN,"axisType","angleAxis");oN(sN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var $Re=CK,FRe=$Re(Object.getPrototypeOf,Object),BRe=FRe,zRe=Wd,qRe=BRe,URe=Vd,WRe="[object Object]",VRe=Function.prototype,HRe=Object.prototype,_X=VRe.toString,GRe=HRe.hasOwnProperty,KRe=_X.call(Object);function YRe(e){if(!URe(e)||zRe(e)!=WRe)return!1;var t=qRe(e);if(t===null)return!0;var r=GRe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&_X.call(r)==KRe}var XRe=YRe;const JRe=Gn(XRe);var QRe=Wd,ZRe=Vd,eLe="[object Boolean]";function tLe(e){return e===!0||e===!1||ZRe(e)&&QRe(e)==eLe}var rLe=tLe;const nLe=Gn(rLe);function q0(e){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q0(e)}function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GS.apply(this,arguments)}function aLe(e,t){return lLe(e)||sLe(e,t)||oLe(e,t)||iLe()}function iLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oLe(e,t){if(e){if(typeof e=="string")return tB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tB(e,t)}}function tB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function lLe(e){if(Array.isArray(e))return e}function rB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(r),!0).forEach(function(n){cLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cLe(e,t,r){return t=uLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uLe(e){var t=dLe(e,"string");return q0(t)=="symbol"?t:t+""}function dLe(e,t){if(q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(q0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aB=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},fLe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hLe=function(t){var r=nB(nB({},fLe),t),n=y.useRef(),a=y.useState(-1),i=aLe(a,2),o=i[0],l=i[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,v=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=dn("recharts-trapezoid",m);return x?se.createElement(uh,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:x},function(w){var _=w.upperWidth,j=w.lowerWidth,A=w.height,P=w.x,C=w.y;return se.createElement(uh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:g},se.createElement("path",GS({},$r(r,!0),{className:b,d:aB(P,C,_,j,A),ref:n})))}):se.createElement("g",null,se.createElement("path",GS({},$r(r,!0),{className:b,d:aB(c,u,d,f,h)})))},mLe=["option","shapeType","propTransformer","activeClassName","isActive"];function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}function pLe(e,t){if(e==null)return{};var r=gLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iB(Object(r),!0).forEach(function(n){vLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vLe(e,t,r){return t=yLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yLe(e){var t=xLe(e,"string");return U0(t)=="symbol"?t:t+""}function xLe(e,t){if(U0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(U0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bLe(e,t){return KS(KS({},t),e)}function wLe(e,t){return e==="symbols"}function oB(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return se.createElement(Z3,r);case"trapezoid":return se.createElement(hLe,r);case"sector":return se.createElement(Q3,r);case"symbols":if(wLe(t))return se.createElement(v3,r);break;default:return null}}function SLe(e){return y.isValidElement(e)?e.props:e}function jX(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?bLe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=pLe(e,mLe),u;if(y.isValidElement(t))u=y.cloneElement(t,KS(KS({},c),SLe(t)));else if(Jr(t))u=t(c);else if(JRe(t)&&!nLe(t)){var d=a(t,c);u=se.createElement(oB,{shapeType:r,elementProps:d})}else{var f=c;u=se.createElement(oB,{shapeType:r,elementProps:f})}return l?se.createElement(Rn,{className:o},u):u}function lN(e,t){return t!=null&&"trapezoids"in e.props}function cN(e,t){return t!=null&&"sectors"in e.props}function W0(e,t){return t!=null&&"points"in e.props}function _Le(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function jLe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function NLe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function CLe(e,t){var r;return lN(e,t)?r=_Le:cN(e,t)?r=jLe:W0(e,t)&&(r=NLe),r}function ALe(e,t){var r;return lN(e,t)?r="trapezoids":cN(e,t)?r="sectors":W0(e,t)&&(r="points"),r}function PLe(e,t){if(lN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(cN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return W0(e,t)?t.payload:{}}function ELe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=ALe(r,t),i=PLe(r,t),o=n.filter(function(c,u){var d=Wm(i,c),f=r.props[a].filter(function(g){var p=CLe(r,t);return p(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var s2;function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}function fg(){return fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fg.apply(this,arguments)}function sB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sB(Object(r),!0).forEach(function(n){Wl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CX(n.key),n)}}function OLe(e,t,r){return t&&lB(e.prototype,t),r&&lB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TLe(e,t,r){return t=YS(t),ILe(e,NX()?Reflect.construct(t,r||[],YS(e).constructor):t.apply(e,r))}function ILe(e,t){if(t&&(lv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DLe(e)}function DLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NX=function(){return!!e})()}function YS(e){return YS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},YS(e)}function MLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gk(e,t)}function Gk(e,t){return Gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gk(e,t)}function Wl(e,t,r){return t=CX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=RLe(e,"string");return lv(t)=="symbol"?t:t+""}function RLe(e,t){if(lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pu=function(e){function t(r){var n;return kLe(this,t),n=TLe(this,t,[r]),Wl(n,"pieRef",null),Wl(n,"sectorRefs",[]),Wl(n,"id",cp("recharts-pie-")),Wl(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Jr(a)&&a()}),Wl(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Jr(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return MLe(t,e),OLe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=$r(this.props,!1),f=$r(o,!1),h=$r(l,!1),m=o&&o.offsetRadius||20,g=n.map(function(p,v){var x=(p.startAngle+p.endAngle)/2,b=Ba(p.cx,p.cy,p.outerRadius+m,x),w=Ra(Ra(Ra(Ra({},d),p),{},{stroke:"none"},f),{},{index:v,textAnchor:t.getTextAnchor(b.x,p.cx)},b),_=Ra(Ra(Ra(Ra({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:v,points:[Ba(p.cx,p.cy,p.outerRadius,x),b]}),j=c;return un(c)&&un(u)?j="value":un(c)&&(j=u),se.createElement(Rn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,w,Ti(p,j)))});return se.createElement(Rn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,g=Ra(Ra({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return se.createElement(Rn,fg({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},qm(a.props,u,d),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(d)}),se.createElement(jX,fg({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return se.createElement(uh,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,v=[],x=i&&i[0],b=x.startAngle;return i.forEach(function(w,_){var j=h&&h[_],A=_>0?bl(w,"paddingAngle",0):0;if(j){var P=eo(j.endAngle-j.startAngle,w.endAngle-w.startAngle),C=Ra(Ra({},w),{},{startAngle:b+A,endAngle:b+P(p)+A});v.push(C),b=C.endAngle}else{var k=w.endAngle,R=w.startAngle,E=eo(0,k-R),I=E(p),T=Ra(Ra({},w),{},{startAngle:b+A,endAngle:b+I+A});v.push(T),b=T.endAngle}}),se.createElement(Rn,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Wm(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!Xt(u)||!Xt(d)||!Xt(f)||!Xt(h))return null;var p=dn("recharts-pie",l);return se.createElement(Rn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){n.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),mo.renderCallByParent(this.props,null,!1),(!m||g)&&bu.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(se.isValidElement(n))return se.cloneElement(n,a);if(Jr(n))return n(a);var o=dn("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return se.createElement(Cm,fg({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(se.isValidElement(n))return se.cloneElement(n,a);var o=i;if(Jr(n)&&(o=n(a),se.isValidElement(o)))return o;var l=dn("recharts-pie-label-text",typeof n!="boolean"&&!Jr(n)?n.className:"");return se.createElement(Um,fg({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(y.PureComponent);s2=Pu;Wl(Pu,"displayName","Pie");Wl(Pu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Lc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Wl(Pu,"parseDeltaAngle",function(e,t){var r=vs(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Wl(Pu,"getRealPieData",function(e){var t=e.data,r=e.children,n=$r(e,!1),a=wl(r,b0);return t&&t.length?t.map(function(i,o){return Ra(Ra(Ra({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Ra(Ra({},n),i.props)}):[]});Wl(Pu,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=aX(a,i),l=n+ys(e.cx,a,a/2),c=r+ys(e.cy,i,i/2),u=ys(e.innerRadius,o,0),d=ys(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Wl(Pu,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Ra(Ra({},t.type.defaultProps),t.props):t.props,a=s2.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=s2.parseCoordinateOfPie(n,r),p=s2.parseDeltaAngle(o,l),v=Math.abs(p),x=u;un(u)&&un(f)?(Rc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):un(u)&&(Rc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var b=a.filter(function(C){return Ti(C,x,0)!==0}).length,w=(v>=360?b:b-1)*c,_=v-b*m-w,j=a.reduce(function(C,k){var R=Ti(k,x,0);return C+(Xt(R)?R:0)},0),A;if(j>0){var P;A=a.map(function(C,k){var R=Ti(C,x,0),E=Ti(C,d,k),I=(Xt(R)?R:0)/j,T;k?T=P.endAngle+vs(p)*c*(R!==0?1:0):T=o;var M=T+vs(p)*((R!==0?m:0)+I*_),z=(T+M)/2,V=(g.innerRadius+g.outerRadius)/2,W=[{name:E,value:R,payload:C,dataKey:x,type:h}],$=Ba(g.cx,g.cy,V,z);return P=Ra(Ra(Ra({percent:I,cornerRadius:i,name:E,tooltipPayload:W,midAngle:z,middleRadius:V,tooltipPosition:$},C),g),{},{value:Ti(C,x),startAngle:T,endAngle:M,payload:C,paddingAngle:vs(p)*c}),P})}return Ra(Ra({},g),{},{sectors:A,data:a})});var LLe=Math.ceil,$Le=Math.max;function FLe(e,t,r,n){for(var a=-1,i=$Le(LLe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var BLe=FLe,zLe=VK,cB=1/0,qLe=17976931348623157e292;function ULe(e){if(!e)return e===0?e:0;if(e=zLe(e),e===cB||e===-cB){var t=e<0?-1:1;return t*qLe}return e===e?e:0}var AX=ULe,WLe=BLe,VLe=Hj,J5=AX;function HLe(e){return function(t,r,n){return n&&typeof n!="number"&&VLe(t,r,n)&&(r=n=void 0),t=J5(t),r===void 0?(r=t,t=0):r=J5(r),n=n===void 0?t<r?1:-1:J5(n),WLe(t,r,n,e)}}var GLe=HLe,KLe=GLe,YLe=KLe(),XLe=YLe;const XS=Gn(XLe);function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function uB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uB(Object(r),!0).forEach(function(n){PX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PX(e,t,r){return t=JLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JLe(e){var t=QLe(e,"string");return V0(t)=="symbol"?t:t+""}function QLe(e,t){if(V0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(V0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZLe=["Webkit","Moz","O","ms"],e6e=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=ZLe.reduce(function(i,o){return dB(dB({},i),{},PX({},o+n,r))},{});return a[t]=r,a};function cv(e){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cv(e)}function JS(){return JS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JS.apply(this,arguments)}function fB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fB(Object(r),!0).forEach(function(n){sl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kX(n.key),n)}}function r6e(e,t,r){return t&&hB(e.prototype,t),r&&hB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function n6e(e,t,r){return t=QS(t),a6e(e,EX()?Reflect.construct(t,r||[],QS(e).constructor):t.apply(e,r))}function a6e(e,t){if(t&&(cv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i6e(e)}function i6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!e})()}function QS(e){return QS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},QS(e)}function o6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t)}function Kk(e,t){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Kk(e,t)}function sl(e,t,r){return t=kX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=s6e(e,"string");return cv(t)=="symbol"?t:t+""}function s6e(e,t){if(cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l6e=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=_x().domain(XS(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},mB=function(t){return t.changedTouches&&!!t.changedTouches.length},uv=function(e){function t(r){var n;return t6e(this,t),n=n6e(this,t,[r]),sl(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),sl(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),sl(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),sl(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),sl(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),sl(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),sl(n,"handleSlideDragStart",function(a){var i=mB(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return o6e(t,e),r6e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Ti(i[n],l,n);return Jr(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==h||v.endIndex!==m)&&g&&g(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=mB(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,v=d.data,x={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),x[o]=u+b;var w=this.getIndex(x),_=w.startIndex,j=w.endIndex,A=function(){var C=v.length-1;return o==="startX"&&(l>c?_%p===0:j%p===0)||l<c&&j===C||o==="endX"&&(l>c?j%p===0:_%p===0)||l>c&&j===C};this.setState(sl(sl({},o,u+b),"brushMoveStartX",n.pageX),function(){g&&A()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(sl({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return se.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=y.Children.only(u);return f?se.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,v=c.endIndex,x=Math.max(n,this.props.x),b=Q5(Q5({},$r(this.props,!1)),{},{x,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return se.createElement(Rn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return se.createElement(Rn,{className:"recharts-brush-texts"},se.createElement(Um,JS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),se.createElement(Um,JS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,v=h.isSlideMoving,x=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Xt(l)||!Xt(c)||!Xt(u)||!Xt(d)||u<=0||d<=0)return null;var w=dn("recharts-brush",i),_=se.Children.count(o)===1,j=e6e("userSelect","none");return se.createElement(Rn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||v||x||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),se.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):Jr(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Q5({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?l6e({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(y.PureComponent);sl(uv,"displayName","Brush");sl(uv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var c6e=j3;function u6e(e,t){var r;return c6e(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var d6e=u6e,f6e=yK,h6e=Tu,m6e=d6e,p6e=Ys,g6e=Hj;function v6e(e,t,r){var n=p6e(e)?f6e:m6e;return r&&g6e(e,t,r)&&(t=void 0),n(e,h6e(t))}var y6e=v6e;const x6e=Gn(y6e);var wu=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},pB=BK;function b6e(e,t,r){t=="__proto__"&&pB?pB(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var w6e=b6e,S6e=w6e,_6e=$K,j6e=Tu;function N6e(e,t){var r={};return t=j6e(t),_6e(e,function(n,a,i){S6e(r,a,t(n,a,i))}),r}var C6e=N6e;const A6e=Gn(C6e);function P6e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var E6e=P6e,k6e=j3;function O6e(e,t){var r=!0;return k6e(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var T6e=O6e,I6e=E6e,D6e=T6e,M6e=Tu,R6e=Ys,L6e=Hj;function $6e(e,t,r){var n=R6e(e)?I6e:D6e;return r&&L6e(e,t,r)&&(t=void 0),n(e,M6e(t))}var F6e=$6e;const OX=Gn(F6e);var B6e=["x","y"];function H0(e){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H0(e)}function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yk.apply(this,arguments)}function gB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gB(Object(r),!0).forEach(function(n){z6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z6e(e,t,r){return t=q6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q6e(e){var t=U6e(e,"string");return H0(t)=="symbol"?t:t+""}function U6e(e,t){if(H0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(H0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W6e(e,t){if(e==null)return{};var r=V6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function H6e(e,t){var r=e.x,n=e.y,a=W6e(e,B6e),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Fy(Fy(Fy(Fy(Fy({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function vB(e){return se.createElement(jX,Yk({shapeType:"rectangle",propTransformer:H6e,activeClassName:"recharts-active-bar"},e))}var G6e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Xt(n)||_we(n);return i?t(n,a):(i||ch(!1),r)}},K6e=["value","background"],TX;function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function Y6e(e,t){if(e==null)return{};var r=X6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function X6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZS.apply(this,arguments)}function yB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yB(Object(r),!0).forEach(function(n){Of(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DX(n.key),n)}}function Q6e(e,t,r){return t&&xB(e.prototype,t),r&&xB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z6e(e,t,r){return t=e_(t),e$e(e,IX()?Reflect.construct(t,r||[],e_(e).constructor):t.apply(e,r))}function e$e(e,t){if(t&&(dv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t$e(e)}function t$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IX=function(){return!!e})()}function e_(e){return e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e_(e)}function r$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xk(e,t)}function Xk(e,t){return Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xk(e,t)}function Of(e,t,r){return t=DX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DX(e){var t=n$e(e,"string");return dv(t)=="symbol"?t:t+""}function n$e(e,t){if(dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hp=function(e){function t(){var r;J6e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Z6e(this,t,[].concat(a)),Of(r,"state",{isAnimationFinished:!1}),Of(r,"id",cp("recharts-bar-")),Of(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Of(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return r$e(t,e),Q6e(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=$r(this.props,!1);return n&&n.map(function(f,h){var m=h===c,g=m?u:o,p=Mi(Mi(Mi({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(Rn,ZS({className:"recharts-bar-rectangle"},qm(a.props,f,h),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(h)}),se.createElement(vB,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return se.createElement(uh,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(v,x){var b=h&&h[x];if(b){var w=eo(b.x,v.x),_=eo(b.y,v.y),j=eo(b.width,v.width),A=eo(b.height,v.height);return Mi(Mi({},v),{},{x:w(g),y:_(g),width:j(g),height:A(g)})}if(o==="horizontal"){var P=eo(0,v.height),C=P(g);return Mi(Mi({},v),{},{y:v.y+v.height-C,height:C})}var k=eo(0,v.width),R=k(g);return Mi(Mi({},v),{},{width:R})});return se.createElement(Rn,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Wm(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=$r(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=Y6e(u,K6e);if(!f)return null;var m=Mi(Mi(Mi(Mi(Mi({},h),{},{fill:"#eee"},f),c),qm(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return se.createElement(vB,ZS({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=wl(d,Bb);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,x){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:Ti(v,x)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Rn,g,f.map(function(p){return se.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,x=dn("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,_=b||w,j=un(p)?this.id:p;return se.createElement(Rn,{className:x},b||w?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(j)},se.createElement("rect",{x:b?u:u-f/2,y:w?d:d-h/2,width:b?f:f*2,height:w?h:h*2}))):null,se.createElement(Rn,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||v)&&bu.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(y.PureComponent);TX=hp;Of(hp,"displayName","Bar");Of(hp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Lc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Of(hp,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=$3e(n,r);if(!m)return null;var g=t.layout,p=r.type.defaultProps,v=p!==void 0?Mi(Mi({},p),r.props):r.props,x=v.dataKey,b=v.children,w=v.minPointSize,_=g==="horizontal"?o:i,j=u?_.scale.domain():null,A=V3e({numericAxis:_}),P=wl(b,b0),C=f.map(function(k,R){var E,I,T,M,z,V;u?E=F3e(u[d+R],j):(E=Ti(k,x),Array.isArray(E)||(E=[A,E]));var W=G6e(w,TX.defaultProps.minPointSize)(E[1],R);if(g==="horizontal"){var $,G=[o.scale(E[0]),o.scale(E[1])],me=G[0],de=G[1];I=s8({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:k,index:R}),T=($=de??me)!==null&&$!==void 0?$:void 0,M=m.size;var L=me-de;if(z=Number.isNaN(L)?0:L,V={x:I,y:o.y,width:M,height:o.height},Math.abs(W)>0&&Math.abs(z)<Math.abs(W)){var B=vs(z||W)*(Math.abs(W)-Math.abs(z));T-=B,z+=B}}else{var J=[i.scale(E[0]),i.scale(E[1])],q=J[0],X=J[1];if(I=q,T=s8({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:k,index:R}),M=X-q,z=m.size,V={x:i.x,y:T,width:i.width,height:z},Math.abs(W)>0&&Math.abs(M)<Math.abs(W)){var Z=vs(M||W)*(Math.abs(W)-Math.abs(M));M+=Z}}return Mi(Mi(Mi({},k),{},{x:I,y:T,width:M,height:z,value:u?E:E[1],payload:k,background:V},P&&P[R]&&P[R].props),{},{tooltipPayload:[rX(r,k)],tooltipPosition:{x:I+M/2,y:T+z/2}})});return Mi({data:C,layout:g},h)});function G0(e){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G0(e)}function a$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MX(n.key),n)}}function i$e(e,t,r){return t&&bB(e.prototype,t),r&&bB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(r),!0).forEach(function(n){uN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uN(e,t,r){return t=MX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MX(e){var t=o$e(e,"string");return G0(t)=="symbol"?t:t+""}function o$e(e,t){if(G0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(G0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e4=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!ul(u,hp);return d.reduce(function(m,g){var p=r[g],v=p.orientation,x=p.domain,b=p.padding,w=b===void 0?{}:b,_=p.mirror,j=p.reversed,A="".concat(v).concat(_?"Mirror":""),P,C,k,R,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=x[1]-x[0],T=1/0,M=p.categoricalDomain.sort(Cwe);if(M.forEach(function(J,q){q>0&&(T=Math.min((J||0)-(M[q-1]||0),T))}),Number.isFinite(T)){var z=T/I,V=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(P=z*V/2),p.padding==="no-gap"){var W=ys(t.barCategoryGap,z*V),$=z*V/2;P=$-W-($-W)/V*W}}}a==="xAxis"?C=[n.left+(w.left||0)+(P||0),n.left+n.width-(w.right||0)-(P||0)]:a==="yAxis"?C=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(P||0),n.top+n.height-(w.bottom||0)-(P||0)]:C=p.range,j&&(C=[C[1],C[0]]);var G=QY(p,i,h),me=G.scale,de=G.realScaleType;me.domain(x).range(C),ZY(me);var L=eX(me,Nc(Nc({},p),{},{realScaleType:de}));a==="xAxis"?(E=v==="top"&&!_||v==="bottom"&&_,k=n.left,R=f[A]-E*p.height):a==="yAxis"&&(E=v==="left"&&!_||v==="right"&&_,k=f[A]-E*p.width,R=n.top);var B=Nc(Nc(Nc({},p),L),{},{realScaleType:de,x:k,y:R,scale:me,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return B.bandSize=LS(B,L),!p.hide&&a==="xAxis"?f[A]+=(E?-1:1)*B.height:p.hide||(f[A]+=(E?-1:1)*B.width),Nc(Nc({},m),{},uN({},g,B))},{})},RX=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},s$e=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return RX({x:r,y:n},{x:a,y:i})},LX=function(){function e(t){a$e(this,e),this.scale=t}return i$e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();uN(LX,"EPS",1e-4);var t4=function(t){var r=Object.keys(t).reduce(function(n,a){return Nc(Nc({},n),{},uN({},a,LX.create(t[a])))},{});return Nc(Nc({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return A6e(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return OX(a,function(i,o){return r[o].isInRange(i)})}})};function l$e(e){return(e%180+180)%180}var c$e=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=l$e(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},u$e=Tu,d$e=Mb,f$e=Wj;function h$e(e){return function(t,r,n){var a=Object(t);if(!d$e(t)){var i=u$e(r);t=f$e(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var m$e=h$e,p$e=AX;function g$e(e){var t=p$e(e),r=t%1;return t===t?r?t-r:t:0}var v$e=g$e,y$e=TK,x$e=Tu,b$e=v$e,w$e=Math.max;function S$e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:b$e(r);return a<0&&(a=w$e(n+a,0)),y$e(e,x$e(t),a)}var _$e=S$e,j$e=m$e,N$e=_$e,C$e=j$e(N$e),A$e=C$e;const P$e=Gn(A$e);var E$e=A1e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),r4=y.createContext(void 0),n4=y.createContext(void 0),$X=y.createContext(void 0),FX=y.createContext({}),BX=y.createContext(void 0),zX=y.createContext(0),qX=y.createContext(0),SB=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=E$e(i);return se.createElement(r4.Provider,{value:n},se.createElement(n4.Provider,{value:a},se.createElement(FX.Provider,{value:i},se.createElement($X.Provider,{value:d},se.createElement(BX.Provider,{value:o},se.createElement(zX.Provider,{value:u},se.createElement(qX.Provider,{value:c},l)))))))},k$e=function(){return y.useContext(BX)},UX=function(t){var r=y.useContext(r4);r==null&&ch(!1);var n=r[t];return n==null&&ch(!1),n},O$e=function(){var t=y.useContext(r4);return jf(t)},T$e=function(){var t=y.useContext(n4),r=P$e(t,function(n){return OX(n.domain,Number.isFinite)});return r||jf(t)},WX=function(t){var r=y.useContext(n4);r==null&&ch(!1);var n=r[t];return n==null&&ch(!1),n},I$e=function(){var t=y.useContext($X);return t},D$e=function(){return y.useContext(FX)},a4=function(){return y.useContext(qX)},i4=function(){return y.useContext(zX)};function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function M$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HX(n.key),n)}}function R$e(e,t,r){return t&&_B(e.prototype,t),r&&_B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function L$e(e,t,r){return t=t_(t),$$e(e,VX()?Reflect.construct(t,r||[],t_(e).constructor):t.apply(e,r))}function $$e(e,t){if(t&&(fv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F$e(e)}function F$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VX=function(){return!!e})()}function t_(e){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t_(e)}function B$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jk(e,t)}function Jk(e,t){return Jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jk(e,t)}function jB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(r),!0).forEach(function(n){o4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o4(e,t,r){return t=HX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HX(e){var t=z$e(e,"string");return fv(t)=="symbol"?t:t+""}function z$e(e,t){if(fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q$e(e,t){return H$e(e)||V$e(e,t)||W$e(e,t)||U$e()}function U$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W$e(e,t){if(e){if(typeof e=="string")return CB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CB(e,t)}}function CB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V$e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function H$e(e){if(Array.isArray(e))return e}function Qk(){return Qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qk.apply(this,arguments)}var G$e=function(t,r){var n;return se.isValidElement(t)?n=se.cloneElement(t,r):Jr(t)?n=t(r):n=se.createElement("line",Qk({},r,{className:"recharts-reference-line-line"})),n},K$e=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var g=u.y,p=t.y.apply(g,{position:o});if(wu(u,"discard")&&!t.y.isInRange(p))return null;var v=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(r){var x=u.x,b=t.x.apply(x,{position:o});if(wu(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?w.reverse():w}if(a){var _=u.segment,j=_.map(function(A){return t.apply(A,{position:o})});return wu(u,"discard")&&x6e(j,function(A){return!t.isInRange(A)})?null:j}return null};function Y$e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=k$e(),d=UX(a),f=WX(i),h=I$e();if(!u||!h)return null;Rc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=t4({x:d.scale,y:f.scale}),g=no(t),p=no(r),v=n&&n.length===2,x=K$e(m,g,p,v,h,e.position,d.orientation,f.orientation,e);if(!x)return null;var b=q$e(x,2),w=b[0],_=w.x,j=w.y,A=b[1],P=A.x,C=A.y,k=wu(e,"hidden")?"url(#".concat(u,")"):void 0,R=NB(NB({clipPath:k},$r(e,!0)),{},{x1:_,y1:j,x2:P,y2:C});return se.createElement(Rn,{className:dn("recharts-reference-line",l)},G$e(o,R),mo.renderCallByParent(e,s$e({x1:_,y1:j,x2:P,y2:C})))}var s4=function(e){function t(){return M$e(this,t),L$e(this,t,arguments)}return B$e(t,e),R$e(t,[{key:"render",value:function(){return se.createElement(Y$e,this.props)}}])}(se.Component);o4(s4,"displayName","ReferenceLine");o4(s4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Zk(){return Zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zk.apply(this,arguments)}function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function AB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AB(Object(r),!0).forEach(function(n){dN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KX(n.key),n)}}function J$e(e,t,r){return t&&EB(e.prototype,t),r&&EB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q$e(e,t,r){return t=r_(t),Z$e(e,GX()?Reflect.construct(t,r||[],r_(e).constructor):t.apply(e,r))}function Z$e(e,t){if(t&&(hv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eFe(e)}function eFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GX=function(){return!!e})()}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r_(e)}function tFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eO(e,t)}function eO(e,t){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eO(e,t)}function dN(e,t,r){return t=KX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KX(e){var t=rFe(e,"string");return hv(t)=="symbol"?t:t+""}function rFe(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nFe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=t4({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return wu(t,"discard")&&!o.isInRange(l)?null:l},fN=function(e){function t(){return X$e(this,t),Q$e(this,t,arguments)}return tFe(t,e),J$e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=no(a),d=no(i);if(Rc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=nFe(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,v=g.className,x=wu(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=PB(PB({clipPath:x},$r(this.props,!0)),{},{cx:h,cy:m});return se.createElement(Rn,{className:dn("recharts-reference-dot",v)},t.renderDot(p,b),mo.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(se.Component);dN(fN,"displayName","ReferenceDot");dN(fN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});dN(fN,"renderDot",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):Jr(e)?r=e(t):r=se.createElement(zb,Zk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tO.apply(this,arguments)}function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function OB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(n){hN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XX(n.key),n)}}function iFe(e,t,r){return t&&TB(e.prototype,t),r&&TB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oFe(e,t,r){return t=n_(t),sFe(e,YX()?Reflect.construct(t,r||[],n_(e).constructor):t.apply(e,r))}function sFe(e,t){if(t&&(mv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lFe(e)}function lFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YX=function(){return!!e})()}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n_(e)}function cFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rO(e,t)}function rO(e,t){return rO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rO(e,t)}function hN(e,t,r){return t=XX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XX(e){var t=uFe(e,"string");return mv(t)=="symbol"?t:t+""}function uFe(e,t){if(mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dFe=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=t4({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return wu(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:RX(m,g)},mN=function(e){function t(){return aFe(this,t),oFe(this,t,arguments)}return cFe(t,e),iFe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Rc(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=no(a),h=no(i),m=no(o),g=no(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var v=dFe(f,h,m,g,this.props);if(!v&&!p)return null;var x=wu(this.props,"hidden")?"url(#".concat(d,")"):void 0;return se.createElement(Rn,{className:dn("recharts-reference-area",c)},t.renderRect(p,OB(OB({clipPath:x},$r(this.props,!0)),v)),mo.renderCallByParent(this.props,v))}}])}(se.Component);hN(mN,"displayName","ReferenceArea");hN(mN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});hN(mN,"renderRect",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):Jr(e)?r=e(t):r=se.createElement(Z3,tO({},t,{className:"recharts-reference-area-rect"})),r});function JX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)n.push(e[a]);else return;return n}function fFe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return c$e(n,r)}function hFe(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function a_(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function mFe(e,t){return JX(e,t+1)}function pFe(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=n?.[c];if(g===void 0)return{v:JX(n,u)};var p=c,v,x=function(){return v===void 0&&(v=r(g,p)),v},b=g.coordinate,w=c===0||a_(e,b,x,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function IB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IB(Object(r),!0).forEach(function(n){gFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gFe(e,t,r){return t=vFe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vFe(e){var t=yFe(e,"string");return K0(t)=="symbol"?t:t+""}function yFe(e,t){if(K0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(K0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xFe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===o-1){var v=e*(m.coordinate+e*p()/2-c);i[h]=m=Wo(Wo({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=Wo(Wo({},m),{},{tickCoord:m.coordinate});var x=a_(e,m.tickCoord,p,l,c);x&&(c=m.tickCoord-e*(p()/2+a),i[h]=Wo(Wo({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function bFe(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Wo(Wo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=a_(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Wo(Wo({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(b){var w=o[b],_,j=function(){return _===void 0&&(_=r(w,b)),_};if(b===0){var A=e*(w.coordinate-e*j()/2-c);o[b]=w=Wo(Wo({},w),{},{tickCoord:A<0?w.coordinate-A*e:w.coordinate})}else o[b]=w=Wo(Wo({},w),{},{tickCoord:w.coordinate});var P=a_(e,w.tickCoord,j,c,u);P&&(c=w.tickCoord+e*(j()/2+a),o[b]=Wo(Wo({},w),{},{isShow:!0}))},v=0;v<g;v++)p(v);return o}function l4(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Xt(c)||Lc.isSsr)return mFe(a,typeof c=="number"&&Xt(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Sx(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(w,_){var j=Jr(u)?u(w.value,_):w.value;return m==="width"?fFe(Sx(j,{fontSize:t,letterSpacing:r}),g,f):Sx(j,{fontSize:t,letterSpacing:r})[m]},v=a.length>=2?vs(a[1].coordinate-a[0].coordinate):1,x=hFe(i,v,m);return c==="equidistantPreserveStart"?pFe(v,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=bFe(v,x,p,a,o,c==="preserveStartEnd"):h=xFe(v,x,p,a,o),h.filter(function(b){return b.isShow}))}var wFe=["viewBox"],SFe=["viewBox"],_Fe=["ticks"];function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function hg(){return hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hg.apply(this,arguments)}function DB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(r),!0).forEach(function(n){c4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z5(e,t){if(e==null)return{};var r=jFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function NFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZX(n.key),n)}}function CFe(e,t,r){return t&&MB(e.prototype,t),r&&MB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AFe(e,t,r){return t=i_(t),PFe(e,QX()?Reflect.construct(t,r||[],i_(e).constructor):t.apply(e,r))}function PFe(e,t){if(t&&(pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EFe(e)}function EFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QX=function(){return!!e})()}function i_(e){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i_(e)}function kFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nO(e,t)}function nO(e,t){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nO(e,t)}function c4(e,t,r){return t=ZX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZX(e){var t=OFe(e,"string");return pv(t)=="symbol"?t:t+""}function OFe(e,t){if(pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jv=function(e){function t(r){var n;return NFe(this,t),n=AFe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return kFe(t,e),CFe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Z5(n,wFe),l=this.props,c=l.viewBox,u=Z5(l,SFe);return!jg(i,c)||!jg(o,u)||!jg(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,p,v,x,b,w=f?-1:1,_=n.tickSize||d,j=Xt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,v=o+ +!f*c,p=v-w*_,b=p-w*h,x=j;break;case"left":p=v=n.coordinate,g=i+ +!f*l,m=g-w*_,x=m-w*h,b=j;break;case"right":p=v=n.coordinate,g=i+ +f*l,m=g+w*_,x=m+w*h,b=j;break;default:m=g=n.coordinate,v=o+ +f*c,p=v+w*_,b=p+w*h,x=j;break}return{line:{x1:m,y1:p,x2:g,y2:v},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Hi(Hi(Hi({},$r(this.props,!1)),$r(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Hi(Hi({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Hi(Hi({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return se.createElement("line",hg({},f,{className:dn("recharts-cartesian-axis-line",bl(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=l4(Hi(Hi({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=$r(this.props,!1),x=$r(d,!1),b=Hi(Hi({},v),{},{fill:"none"},$r(c,!1)),w=m.map(function(_,j){var A=o.getTickLineCoord(_),P=A.line,C=A.tick,k=Hi(Hi(Hi(Hi({textAnchor:g,verticalAnchor:p},v),{},{stroke:"none",fill:u},x),C),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return se.createElement(Rn,hg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},qm(o.props,_,j)),c&&se.createElement("line",hg({},b,P,{className:dn("recharts-cartesian-axis-tick-line",bl(c,"className"))})),d&&t.renderTickItem(d,k,"".concat(Jr(f)?f(_.value,j):_.value).concat(h||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=Z5(f,_Fe),g=h;return Jr(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:se.createElement(Rn,{className:dn("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),mo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=dn(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?o=se.cloneElement(n,Hi(Hi({},a),{},{className:l})):Jr(n)?o=n(Hi(Hi({},a),{},{className:l})):o=se.createElement(Um,hg({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(y.Component);c4(Jv,"displayName","CartesianAxis");c4(Jv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var TFe=["x1","y1","x2","y2","key"],IFe=["offset"];function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function RB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RB(Object(r),!0).forEach(function(n){DFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DFe(e,t,r){return t=MFe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MFe(e){var t=RFe(e,"string");return Hm(t)=="symbol"?t:t+""}function RFe(e,t){if(Hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hm.apply(this,arguments)}function LB(e,t){if(e==null)return{};var r=LFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $Fe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return se.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function eJ(e,t){var r;if(se.isValidElement(e))r=se.cloneElement(e,t);else if(Jr(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=LB(t,TFe),u=$r(c,!1);u.offset;var d=LB(u,IFe);r=se.createElement("line",hm({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function FFe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Go(Go({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return eJ(a,u)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function BFe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Go(Go({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return eJ(a,u)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function zFe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+o-h:d[m+1]-h;if(p<=0)return null;var v=m%t.length;return se.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function qFe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+l-h:d[m+1]-h;if(p<=0)return null;var v=m%n.length;return se.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:p,height:c,stroke:"none",fill:n[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var UFe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return JY(l4(Go(Go(Go({},Jv.defaultProps),n),{},{ticks:hd(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},WFe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return JY(l4(Go(Go(Go({},Jv.defaultProps),n),{},{ticks:hd(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Dp={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function aO(e){var t,r,n,a,i,o,l=a4(),c=i4(),u=D$e(),d=Go(Go({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Dp.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Dp.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Dp.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Dp.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Dp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Dp.verticalFill,x:Xt(e.x)?e.x:u.left,y:Xt(e.y)?e.y:u.top,width:Xt(e.width)?e.width:u.width,height:Xt(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,b=O$e(),w=T$e();if(!Xt(m)||m<=0||!Xt(g)||g<=0||!Xt(f)||f!==+f||!Xt(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||UFe,j=d.horizontalCoordinatesGenerator||WFe,A=d.horizontalPoints,P=d.verticalPoints;if((!A||!A.length)&&Jr(j)){var C=v&&v.length,k=j({yAxis:w?Go(Go({},w),{},{ticks:C?v:w.ticks}):void 0,width:l,height:c,offset:u},C?!0:p);Rc(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Hm(k),"]")),Array.isArray(k)&&(A=k)}if((!P||!P.length)&&Jr(_)){var R=x&&x.length,E=_({xAxis:b?Go(Go({},b),{},{ticks:R?x:b.ticks}):void 0,width:l,height:c,offset:u},R?!0:p);Rc(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Hm(E),"]")),Array.isArray(E)&&(P=E)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement($Fe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),se.createElement(FFe,hm({},d,{offset:u,horizontalPoints:A,xAxis:b,yAxis:w})),se.createElement(BFe,hm({},d,{offset:u,verticalPoints:P,xAxis:b,yAxis:w})),se.createElement(zFe,hm({},d,{horizontalPoints:A})),se.createElement(qFe,hm({},d,{verticalPoints:P})))}aO.displayName="CartesianGrid";var VFe=["type","layout","connectNulls","ref"],HFe=["key"];function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function $B(e,t){if(e==null)return{};var r=GFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Px.apply(this,arguments)}function FB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(r),!0).forEach(function(n){Cc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mp(e){return JFe(e)||XFe(e)||YFe(e)||KFe()}function KFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YFe(e,t){if(e){if(typeof e=="string")return iO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iO(e,t)}}function XFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JFe(e){if(Array.isArray(e))return iO(e)}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rJ(n.key),n)}}function ZFe(e,t,r){return t&&BB(e.prototype,t),r&&BB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function e8e(e,t,r){return t=o_(t),t8e(e,tJ()?Reflect.construct(t,r||[],o_(e).constructor):t.apply(e,r))}function t8e(e,t){if(t&&(gv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r8e(e)}function r8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tJ=function(){return!!e})()}function o_(e){return o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o_(e)}function n8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oO(e,t)}function oO(e,t){return oO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oO(e,t)}function Cc(e,t,r){return t=rJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rJ(e){var t=a8e(e,"string");return gv(t)=="symbol"?t:t+""}function a8e(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qb=function(e){function t(){var r;QFe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=e8e(this,t,[].concat(a)),Cc(r,"state",{isAnimationFinished:!0,totalLength:0}),Cc(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Cc(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(x,b){return x+b});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>f){m=[].concat(Mp(c.slice(0,g)),[f-p]);break}var v=m.length%2===0?[0,h]:[h];return[].concat(Mp(t.repeat(c,d)),Mp(m),v).map(function(x){return"".concat(x,"px")}).join(", ")}),Cc(r,"id",cp("recharts-line-")),Cc(r,"pathRef",function(o){r.mainCurve=o}),Cc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Cc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return n8e(t,e),ZFe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=wl(d,Bb);if(!f)return null;var h=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:Ti(p.payload,v)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Rn,m,f.map(function(g){return se.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=$r(this.props,!1),h=$r(c,!0),m=u.map(function(p,v){var x=ol(ol(ol({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,x)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return se.createElement(Rn,Px({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=$B(l,VFe),h=ol(ol(ol({},$r(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return se.createElement(Cm,Px({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,v=o.height,x=this.state,b=x.prevPoints,w=x.totalLength;return se.createElement(uh,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(b){var A=b.length/l.length,P=l.map(function(I,T){var M=Math.floor(T*A);if(b[M]){var z=b[M],V=eo(z.x,I.x),W=eo(z.y,I.y);return ol(ol({},I),{},{x:V(j),y:W(j)})}if(g){var $=eo(p*2,I.x),G=eo(v/2,I.y);return ol(ol({},I),{},{x:$(j),y:G(j)})}return ol(ol({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(P,n,a)}var C=eo(0,w),k=C(j),R;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});R=i.getStrokeDasharray(k,w,E)}else R=i.generateSimpleStrokeDasharray(w,k);return i.renderCurveStatically(l,n,a,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Wm(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=dn("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,A=_||j,P=un(v)?this.id:v,C=(n=$r(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=C.r,R=k===void 0?3:k,E=C.strokeWidth,I=E===void 0?2:E,T=UG(o)?o:{},M=T.clipDot,z=M===void 0?!0:M,V=R*2+I;return se.createElement(Rn,{className:w},_||j?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(P)},se.createElement("rect",{x:_?h:h-m/2,y:j?f:f-g/2,width:_?m:m*2,height:j?g:g*2})),!z&&se.createElement("clipPath",{id:"clipPath-dots-".concat(P)},se.createElement("rect",{x:h-V/2,y:f-V/2,width:m+V,height:g+V}))):null,!b&&this.renderCurve(A,P),this.renderErrorBar(A,P),(b||o)&&this.renderDots(A,z,P),(!p||x)&&bu.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Mp(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(Mp(o),Mp(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(Jr(n))i=n(a);else{var o=a.key,l=$B(a,HFe),c=dn("recharts-line-dot",typeof n!="boolean"?n.className:"");i=se.createElement(zb,Px({key:o},l,{className:c}))}return i}}])}(y.PureComponent);Cc(qb,"displayName","Line");Cc(qb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Lc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Cc(qb,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var g=Ti(h,o);return d==="horizontal"?{x:RS({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:un(g)?null:n.scale(g),value:g,payload:h}:{x:un(g)?null:r.scale(g),y:RS({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:g,payload:h}});return ol({points:f,layout:d},u)});var i8e=["layout","type","stroke","connectNulls","isRange","ref"],o8e=["key"],nJ;function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function aJ(e,t){if(e==null)return{};var r=s8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(this,arguments)}function zB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zB(Object(r),!0).forEach(function(n){du(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oJ(n.key),n)}}function c8e(e,t,r){return t&&qB(e.prototype,t),r&&qB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u8e(e,t,r){return t=s_(t),d8e(e,iJ()?Reflect.construct(t,r||[],s_(e).constructor):t.apply(e,r))}function d8e(e,t){if(t&&(vv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f8e(e)}function f8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iJ=function(){return!!e})()}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s_(e)}function h8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sO(e,t)}function sO(e,t){return sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sO(e,t)}function du(e,t,r){return t=oJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e){var t=m8e(e,"string");return vv(t)=="symbol"?t:t+""}function m8e(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ph=function(e){function t(){var r;l8e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=u8e(this,t,[].concat(a)),du(r,"state",{isAnimationFinished:!0}),du(r,"id",cp("recharts-area-")),du(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Jr(o)&&o()}),du(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Jr(o)&&o()}),r}return h8e(t,e),c8e(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=$r(this.props,!1),m=$r(u,!0),g=d.map(function(v,x){var b=pf(pf(pf({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return t.renderDotItem(u,b)}),p={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return se.createElement(Rn,mm({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=kf(o.map(function(h){return h.y||0}));return Xt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(kf(i.map(function(h){return h.y||0})),f)),Xt(f)?se.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=kf(o.map(function(h){return h.x||0}));return Xt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(kf(i.map(function(h){return h.x||0})),f)),Xt(f)?se.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=aJ(l,i8e);return se.createElement(Rn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},se.createElement(Cm,mm({},$r(m,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&se.createElement(Cm,mm({},$r(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&se.createElement(Cm,mm({},$r(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=this.state,p=g.prevPoints,v=g.prevBaseLine;return se.createElement(uh,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t;if(p){var w=p.length/l.length,_=l.map(function(C,k){var R=Math.floor(k*w);if(p[R]){var E=p[R],I=eo(E.x,C.x),T=eo(E.y,C.y);return pf(pf({},C),{},{x:I(b),y:T(b)})}return C}),j;if(Xt(c)&&typeof c=="number"){var A=eo(v,c);j=A(b)}else if(un(c)||Wv(c)){var P=eo(v,0);j=P(b)}else j=c.map(function(C,k){var R=Math.floor(k*w);if(v[R]){var E=v[R],I=eo(E.x,C.x),T=eo(E.y,C.y);return pf(pf({},C),{},{x:I(b),y:T(b)})}return C});return i.renderAreaStatically(_,j,n,a)}return se.createElement(Rn,null,se.createElement("defs",null,se.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(b))),se.createElement(Rn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!Wm(d,o)||!Wm(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=dn("recharts-area",c),_=f&&f.allowDataOverflow,j=h&&h.allowDataOverflow,A=_||j,P=un(v)?this.id:v,C=(n=$r(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=C.r,R=k===void 0?3:k,E=C.strokeWidth,I=E===void 0?2:E,T=UG(o)?o:{},M=T.clipDot,z=M===void 0?!0:M,V=R*2+I;return se.createElement(Rn,{className:w},_||j?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(P)},se.createElement("rect",{x:_?d:d-m/2,y:j?u:u-g/2,width:_?m:m*2,height:j?g:g*2})),!z&&se.createElement("clipPath",{id:"clipPath-dots-".concat(P)},se.createElement("rect",{x:d-V/2,y:u-V/2,width:m+V,height:g+V}))):null,b?null:this.renderArea(A,P),(o||b)&&this.renderDots(A,z,P),(!p||x)&&bu.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(y.PureComponent);nJ=Ph;du(Ph,"displayName","Area");du(Ph,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Lc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});du(Ph,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Xt(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});du(Ph,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,g=u&&u.length,p=nJ.getBaseValue(t,r,n,a),v=m==="horizontal",x=!1,b=f.map(function(_,j){var A;g?A=u[d+j]:(A=Ti(_,c),Array.isArray(A)?x=!0:A=[p,A]);var P=A[1]==null||g&&Ti(_,c)==null;return v?{x:RS({axis:n,ticks:i,bandSize:l,entry:_,index:j}),y:P?null:a.scale(A[1]),value:A,payload:_}:{x:P?null:n.scale(A[1]),y:RS({axis:a,ticks:o,bandSize:l,entry:_,index:j}),value:A,payload:_}}),w;return g||x?w=b.map(function(_){var j=Array.isArray(_.value)?_.value[0]:null;return v?{x:_.x,y:j!=null&&_.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:_.y}}):w=v?a.scale(p):n.scale(p),pf({points:b,baseLine:w,layout:m,isRange:x},h)});du(Ph,"renderDotItem",function(e,t){var r;if(se.isValidElement(e))r=se.cloneElement(e,t);else if(Jr(e))r=e(t);else{var n=dn("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=aJ(t,o8e);r=se.createElement(zb,mm({},i,{key:a,className:n}))}return r});function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function p8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cJ(n.key),n)}}function g8e(e,t,r){return t&&UB(e.prototype,t),r&&UB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v8e(e,t,r){return t=l_(t),y8e(e,sJ()?Reflect.construct(t,r||[],l_(e).constructor):t.apply(e,r))}function y8e(e,t){if(t&&(yv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x8e(e)}function x8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sJ=function(){return!!e})()}function l_(e){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l_(e)}function b8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lO(e,t)}function lO(e,t){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lO(e,t)}function lJ(e,t,r){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJ(e){var t=w8e(e,"string");return yv(t)=="symbol"?t:t+""}function w8e(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cO.apply(this,arguments)}function S8e(e){var t=e.xAxisId,r=a4(),n=i4(),a=UX(t);return a==null?null:y.createElement(Jv,cO({},a,{className:dn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return hd(o,!0)}}))}var Gm=function(e){function t(){return p8e(this,t),v8e(this,t,arguments)}return b8e(t,e),g8e(t,[{key:"render",value:function(){return y.createElement(S8e,this.props)}}])}(y.Component);lJ(Gm,"displayName","XAxis");lJ(Gm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}function _8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fJ(n.key),n)}}function j8e(e,t,r){return t&&WB(e.prototype,t),r&&WB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N8e(e,t,r){return t=c_(t),C8e(e,uJ()?Reflect.construct(t,r||[],c_(e).constructor):t.apply(e,r))}function C8e(e,t){if(t&&(xv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A8e(e)}function A8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uJ=function(){return!!e})()}function c_(e){return c_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c_(e)}function P8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uO(e,t)}function uO(e,t){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uO(e,t)}function dJ(e,t,r){return t=fJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fJ(e){var t=E8e(e,"string");return xv(t)=="symbol"?t:t+""}function E8e(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dO(){return dO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dO.apply(this,arguments)}var k8e=function(t){var r=t.yAxisId,n=a4(),a=i4(),i=WX(r);return i==null?null:y.createElement(Jv,dO({},i,{className:dn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return hd(l,!0)}}))},Km=function(e){function t(){return _8e(this,t),N8e(this,t,arguments)}return P8e(t,e),j8e(t,[{key:"render",value:function(){return y.createElement(k8e,this.props)}}])}(y.Component);dJ(Km,"displayName","YAxis");dJ(Km,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VB(e){return D8e(e)||I8e(e)||T8e(e)||O8e()}function O8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T8e(e,t){if(e){if(typeof e=="string")return fO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fO(e,t)}}function I8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D8e(e){if(Array.isArray(e))return fO(e)}function fO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hO=function(t,r,n,a,i){var o=wl(t,s4),l=wl(t,fN),c=[].concat(VB(o),VB(l)),u=wl(t,mN),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(p,v){if(v.props[d]===n&&wu(v.props,"extendDomain")&&Xt(v.props[f])){var x=v.props[f];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,v){if(v.props[d]===n&&wu(v.props,"extendDomain")&&Xt(v.props[m])&&Xt(v.props[g])){var x=v.props[m],b=v.props[g];return[Math.min(p[0],x,b),Math.max(p[1],x,b)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,v){return Xt(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},h)),h},hJ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var v=this._events[p],x=arguments.length,b,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];v.fn.apply(v.context,b)}else{var _=v.length,j;for(w=0;w<_;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),x){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,f);break;case 4:v[w].fn.call(v[w].context,d,f,h);break;default:if(!b)for(j=1,b=new Array(x-1);j<x;j++)b[j-1]=arguments[j];v[w].fn.apply(v[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var p=0,v=[],x=g.length;p<x;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&v.push(g[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(hJ);var M8e=hJ.exports;const R8e=Gn(M8e);var eA=new R8e,tA="recharts.syncMouseEvents";function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function L8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mJ(n.key),n)}}function $8e(e,t,r){return t&&HB(e.prototype,t),r&&HB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rA(e,t,r){return t=mJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mJ(e){var t=F8e(e,"string");return Y0(t)=="symbol"?t:t+""}function F8e(e,t){if(Y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Y0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B8e=function(){function e(){L8e(this,e),rA(this,"activeIndex",0),rA(this,"coordinateList",[]),rA(this,"layout","horizontal")}return $8e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function z8e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],a=e?.[1];if(n&&a&&Xt(n)&&Xt(a))return!0}return!1}function q8e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function pJ(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Ba(t,r,n,a),l=Ba(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function U8e(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Ba(l,c,u,f),m=Ba(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return pJ(t);return[{x:n,y:a},{x:i,y:o}]}function X0(e){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X0(e)}function GB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ww(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GB(Object(r),!0).forEach(function(n){W8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W8e(e,t,r){return t=V8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V8e(e){var t=H8e(e,"string");return X0(t)=="symbol"?t:t+""}function H8e(e,t){if(X0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(X0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G8e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,p=Cm;if(h==="ScatterChart")g=o,p=sRe;else if(h==="BarChart")g=q8e(f,o,c,d),p=Z3;else if(f==="radial"){var v=pJ(o),x=v.cx,b=v.cy,w=v.radius,_=v.startAngle,j=v.endAngle;g={cx:x,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},p=Q3}else g={points:U8e(f,o,c)},p=Cm;var A=ww(ww(ww(ww({stroke:"#ccc",pointerEvents:"none"},c),g),$r(m,!1)),{},{payload:l,payloadIndex:u,className:dn("recharts-tooltip-cursor",m.className)});return y.isValidElement(m)?y.cloneElement(m,A):y.createElement(p,A)}var K8e=["item"],Y8e=["children","className","width","height","style","compact","title","desc"];function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}function mg(){return mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mg.apply(this,arguments)}function KB(e,t){return Q8e(e)||J8e(e,t)||vJ(e,t)||X8e()}function X8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Q8e(e){if(Array.isArray(e))return e}function YB(e,t){if(e==null)return{};var r=Z8e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yJ(n.key),n)}}function tBe(e,t,r){return t&&XB(e.prototype,t),r&&XB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rBe(e,t,r){return t=u_(t),nBe(e,gJ()?Reflect.construct(t,r||[],u_(e).constructor):t.apply(e,r))}function nBe(e,t){if(t&&(bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aBe(e)}function aBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gJ=function(){return!!e})()}function u_(e){return u_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u_(e)}function iBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mO(e,t)}function mO(e,t){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mO(e,t)}function wv(e){return lBe(e)||sBe(e)||vJ(e)||oBe()}function oBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vJ(e,t){if(e){if(typeof e=="string")return pO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(e,t)}}function sBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lBe(e){if(Array.isArray(e))return pO(e)}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function JB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JB(Object(r),!0).forEach(function(n){Kr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kr(e,t,r){return t=yJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yJ(e){var t=cBe(e,"string");return bv(t)=="symbol"?t:t+""}function cBe(e,t){if(bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uBe={xAxis:["bottom","top"],yAxis:["left","right"]},dBe={width:"100%",height:"100%"},xJ={x:0,y:0};function Sw(e){return e}var fBe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},hBe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return vt(vt(vt({},a),Ba(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return vt(vt(vt({},a),Ba(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return xJ},pN=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(wv(l),wv(u)):l},[]);return o.length>0?o:t&&t.length&&Xt(a)&&Xt(i)?t.slice(a,i+1):[]};function bJ(e){return e==="number"?[0,"auto"]:void 0}var gO=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=pN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=lS(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(wv(c),[rX(u,h)]):c},[])},QB=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=fBe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=T3e(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=gO(t,r,d,f),m=hBe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},mBe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=XY(d,i);return n.reduce(function(g,p){var v,x=p.type.defaultProps!==void 0?vt(vt({},p.type.defaultProps),p.props):p.props,b=x.type,w=x.dataKey,_=x.allowDataOverflow,j=x.allowDuplicatedCategory,A=x.scale,P=x.ticks,C=x.includeHidden,k=x[o];if(g[k])return g;var R=pN(t.data,{graphicalItems:a.filter(function(L){var B,J=o in L.props?L.props[o]:(B=L.type.defaultProps)===null||B===void 0?void 0:B[o];return J===k}),dataStartIndex:c,dataEndIndex:u}),E=R.length,I,T,M;z8e(x.domain,_,b)&&(I=Pk(x.domain,null,_),m&&(b==="number"||A!=="auto")&&(M=jx(R,w,"category")));var z=bJ(b);if(!I||I.length===0){var V,W=(V=x.domain)!==null&&V!==void 0?V:z;if(w){if(I=jx(R,w,b),b==="category"&&m){var $=Nwe(I);j&&$?(T=I,I=XS(0,E)):j||(I=u8(W,I,p).reduce(function(L,B){return L.indexOf(B)>=0?L:[].concat(wv(L),[B])},[]))}else if(b==="category")j?I=I.filter(function(L){return L!==""&&!un(L)}):I=u8(W,I,p).reduce(function(L,B){return L.indexOf(B)>=0||B===""||un(B)?L:[].concat(wv(L),[B])},[]);else if(b==="number"){var G=L3e(R,a.filter(function(L){var B,J,q=o in L.props?L.props[o]:(B=L.type.defaultProps)===null||B===void 0?void 0:B[o],X="hide"in L.props?L.props.hide:(J=L.type.defaultProps)===null||J===void 0?void 0:J.hide;return q===k&&(C||!X)}),w,i,d);G&&(I=G)}m&&(b==="number"||A!=="auto")&&(M=jx(R,w,"category"))}else m?I=XS(0,E):l&&l[k]&&l[k].hasStack&&b==="number"?I=h==="expand"?[0,1]:tX(l[k].stackGroups,c,u):I=YY(R,a.filter(function(L){var B=o in L.props?L.props[o]:L.type.defaultProps[o],J="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return B===k&&(C||!J)}),b,d,!0);if(b==="number")I=hO(f,I,k,i,P),W&&(I=Pk(W,I,_));else if(b==="category"&&W){var me=W,de=I.every(function(L){return me.indexOf(L)>=0});de&&(I=me)}}return vt(vt({},g),{},Kr({},k,vt(vt({},x),{},{axisType:i,domain:I,categoricalDomain:M,duplicateDomain:T,originalDomain:(v=x.domain)!==null&&v!==void 0?v:z,isCategorical:m,layout:d})))},{})},pBe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=pN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=XY(d,i),p=-1;return n.reduce(function(v,x){var b=x.type.defaultProps!==void 0?vt(vt({},x.type.defaultProps),x.props):x.props,w=b[o],_=bJ("number");if(!v[w]){p++;var j;return g?j=XS(0,m):l&&l[w]&&l[w].hasStack?(j=tX(l[w].stackGroups,c,u),j=hO(f,j,w,i)):(j=Pk(_,YY(h,n.filter(function(A){var P,C,k=o in A.props?A.props[o]:(P=A.type.defaultProps)===null||P===void 0?void 0:P[o],R="hide"in A.props?A.props.hide:(C=A.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===w&&!R}),"number",d),a.defaultProps.allowDataOverflow),j=hO(f,j,w,i)),vt(vt({},v),{},Kr({},w,vt(vt({axisType:i},a.defaultProps),{},{hide:!0,orientation:bl(uBe,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:_,isCategorical:g,layout:d})))}return v},{})},gBe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=wl(d,i),m={};return h&&h.length?m=mBe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=pBe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},vBe=function(t){var r=jf(t),n=hd(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:N3(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:LS(r,n)}},ZB=function(t){var r=t.children,n=t.defaultShowTooltip,a=ul(r,uv),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},yBe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Nd(r&&r.type);return n&&n.indexOf("Bar")>=0})},e7=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xBe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=ul(f,uv),g=ul(f,_m),p=Object.keys(c).reduce(function(j,A){var P=c[A],C=P.orientation;return!P.mirror&&!P.hide?vt(vt({},j),{},Kr({},C,j[C]+P.width)):j},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(j,A){var P=o[A],C=P.orientation;return!P.mirror&&!P.hide?vt(vt({},j),{},Kr({},C,bl(j,"".concat(C))+P.height)):j},{top:h.top||0,bottom:h.bottom||0}),x=vt(vt({},v),p),b=x.bottom;m&&(x.bottom+=m.props.height||uv.defaultProps.height),g&&r&&(x=M3e(x,a,n,r));var w=u-x.left-x.right,_=d-x.top-x.bottom;return vt(vt({brushBottom:b},x),{},{width:Math.max(w,0),height:Math.max(_,0)})},bBe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},gN=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(x,b){var w=b.graphicalItems,_=b.stackGroups,j=b.offset,A=b.updateId,P=b.dataStartIndex,C=b.dataEndIndex,k=x.barSize,R=x.layout,E=x.barGap,I=x.barCategoryGap,T=x.maxBarSize,M=e7(R),z=M.numericAxisName,V=M.cateAxisName,W=yBe(w),$=[];return w.forEach(function(G,me){var de=pN(x.data,{graphicalItems:[G],dataStartIndex:P,dataEndIndex:C}),L=G.type.defaultProps!==void 0?vt(vt({},G.type.defaultProps),G.props):G.props,B=L.dataKey,J=L.maxBarSize,q=L["".concat(z,"Id")],X=L["".concat(V,"Id")],Z={},pe=c.reduce(function(Pt,ue){var rt=b["".concat(ue.axisType,"Map")],Ee=L["".concat(ue.axisType,"Id")];rt&&rt[Ee]||ue.axisType==="zAxis"||ch(!1);var Ke=rt[Ee];return vt(vt({},Pt),{},Kr(Kr({},ue.axisType,Ke),"".concat(ue.axisType,"Ticks"),hd(Ke)))},Z),te=pe[V],ve=pe["".concat(V,"Ticks")],Ce=_&&_[q]&&_[q].hasStack&&H3e(G,_[q].stackGroups),he=Nd(G.type).indexOf("Bar")>=0,qe=LS(te,ve),ye=[],ce=W&&I3e({barSize:k,stackGroups:_,totalSize:bBe(pe,V)});if(he){var Ft,qt,It=un(J)?T:J,et=(Ft=(qt=LS(te,ve,!0))!==null&&qt!==void 0?qt:It)!==null&&Ft!==void 0?Ft:0;ye=D3e({barGap:E,barCategoryGap:I,bandSize:et!==qe?et:qe,sizeList:ce[X],maxBarSize:It}),et!==qe&&(ye=ye.map(function(Pt){return vt(vt({},Pt),{},{position:vt(vt({},Pt.position),{},{offset:Pt.position.offset-et/2})})}))}var Ze=G&&G.type&&G.type.getComposedData;Ze&&$.push({props:vt(vt({},Ze(vt(vt({},pe),{},{displayedData:de,props:x,dataKey:B,item:G,bandSize:qe,barPosition:ye,offset:j,stackedData:Ce,layout:R,dataStartIndex:P,dataEndIndex:C}))),{},Kr(Kr(Kr({key:G.key||"item-".concat(me)},z,pe[z]),V,pe[V]),"animationId",A)),childIndex:Lwe(G,x.children),item:G})}),$},m=function(x,b){var w=x.props,_=x.dataStartIndex,j=x.dataEndIndex,A=x.updateId;if(!e$({props:w}))return null;var P=w.children,C=w.layout,k=w.stackOffset,R=w.data,E=w.reverseStackOrder,I=e7(C),T=I.numericAxisName,M=I.cateAxisName,z=wl(P,n),V=W3e(R,z,"".concat(T,"Id"),"".concat(M,"Id"),k,E),W=c.reduce(function(L,B){var J="".concat(B.axisType,"Map");return vt(vt({},L),{},Kr({},J,gBe(w,vt(vt({},B),{},{graphicalItems:z,stackGroups:B.axisType===T&&V,dataStartIndex:_,dataEndIndex:j}))))},{}),$=xBe(vt(vt({},W),{},{props:w,graphicalItems:z}),b?.legendBBox);Object.keys(W).forEach(function(L){W[L]=d(w,W[L],$,L.replace("Map",""),r)});var G=W["".concat(M,"Map")],me=vBe(G),de=h(w,vt(vt({},W),{},{dataStartIndex:_,dataEndIndex:j,updateId:A,graphicalItems:z,stackGroups:V,offset:$}));return vt(vt({formattedGraphicalItems:de,graphicalItems:z,offset:$,stackGroups:V},me),W)},g=function(v){function x(b){var w,_,j;return eBe(this,x),j=rBe(this,x,[b]),Kr(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kr(j,"accessibilityManager",new B8e),Kr(j,"handleLegendBBoxUpdate",function(A){if(A){var P=j.state,C=P.dataStartIndex,k=P.dataEndIndex,R=P.updateId;j.setState(vt({legendBBox:A},m({props:j.props,dataStartIndex:C,dataEndIndex:k,updateId:R},vt(vt({},j.state),{},{legendBBox:A}))))}}),Kr(j,"handleReceiveSyncEvent",function(A,P,C){if(j.props.syncId===A){if(C===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(P)}}),Kr(j,"handleBrushChange",function(A){var P=A.startIndex,C=A.endIndex;if(P!==j.state.dataStartIndex||C!==j.state.dataEndIndex){var k=j.state.updateId;j.setState(function(){return vt({dataStartIndex:P,dataEndIndex:C},m({props:j.props,dataStartIndex:P,dataEndIndex:C,updateId:k},j.state))}),j.triggerSyncEvent({dataStartIndex:P,dataEndIndex:C})}}),Kr(j,"handleMouseEnter",function(A){var P=j.getMouseInfo(A);if(P){var C=vt(vt({},P),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var k=j.props.onMouseEnter;Jr(k)&&k(C,A)}}),Kr(j,"triggeredAfterMouseMove",function(A){var P=j.getMouseInfo(A),C=P?vt(vt({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var k=j.props.onMouseMove;Jr(k)&&k(C,A)}),Kr(j,"handleItemMouseEnter",function(A){j.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Kr(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Kr(j,"handleMouseMove",function(A){A.persist(),j.throttleTriggeredAfterMouseMove(A)}),Kr(j,"handleMouseLeave",function(A){j.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var C=j.props.onMouseLeave;Jr(C)&&C(P,A)}),Kr(j,"handleOuterEvent",function(A){var P=Rwe(A),C=bl(j.props,"".concat(P));if(P&&Jr(C)){var k,R;/.*touch.*/i.test(P)?R=j.getMouseInfo(A.changedTouches[0]):R=j.getMouseInfo(A),C((k=R)!==null&&k!==void 0?k:{},A)}}),Kr(j,"handleClick",function(A){var P=j.getMouseInfo(A);if(P){var C=vt(vt({},P),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var k=j.props.onClick;Jr(k)&&k(C,A)}}),Kr(j,"handleMouseDown",function(A){var P=j.props.onMouseDown;if(Jr(P)){var C=j.getMouseInfo(A);P(C,A)}}),Kr(j,"handleMouseUp",function(A){var P=j.props.onMouseUp;if(Jr(P)){var C=j.getMouseInfo(A);P(C,A)}}),Kr(j,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Kr(j,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&j.handleMouseDown(A.changedTouches[0])}),Kr(j,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&j.handleMouseUp(A.changedTouches[0])}),Kr(j,"handleDoubleClick",function(A){var P=j.props.onDoubleClick;if(Jr(P)){var C=j.getMouseInfo(A);P(C,A)}}),Kr(j,"handleContextMenu",function(A){var P=j.props.onContextMenu;if(Jr(P)){var C=j.getMouseInfo(A);P(C,A)}}),Kr(j,"triggerSyncEvent",function(A){j.props.syncId!==void 0&&eA.emit(tA,j.props.syncId,A,j.eventEmitterSymbol)}),Kr(j,"applySyncEvent",function(A){var P=j.props,C=P.layout,k=P.syncMethod,R=j.state.updateId,E=A.dataStartIndex,I=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)j.setState(vt({dataStartIndex:E,dataEndIndex:I},m({props:j.props,dataStartIndex:E,dataEndIndex:I,updateId:R},j.state)));else if(A.activeTooltipIndex!==void 0){var T=A.chartX,M=A.chartY,z=A.activeTooltipIndex,V=j.state,W=V.offset,$=V.tooltipTicks;if(!W)return;if(typeof k=="function")z=k($,A);else if(k==="value"){z=-1;for(var G=0;G<$.length;G++)if($[G].value===A.activeLabel){z=G;break}}var me=vt(vt({},W),{},{x:W.left,y:W.top}),de=Math.min(T,me.x+me.width),L=Math.min(M,me.y+me.height),B=$[z]&&$[z].value,J=gO(j.state,j.props.data,z),q=$[z]?{x:C==="horizontal"?$[z].coordinate:de,y:C==="horizontal"?L:$[z].coordinate}:xJ;j.setState(vt(vt({},A),{},{activeLabel:B,activeCoordinate:q,activePayload:J,activeTooltipIndex:z}))}else j.setState(A)}),Kr(j,"renderCursor",function(A){var P,C=j.state,k=C.isTooltipActive,R=C.activeCoordinate,E=C.activePayload,I=C.offset,T=C.activeTooltipIndex,M=C.tooltipAxisBandSize,z=j.getTooltipEventType(),V=(P=A.props.active)!==null&&P!==void 0?P:k,W=j.props.layout,$=A.key||"_recharts-cursor";return se.createElement(G8e,{key:$,activeCoordinate:R,activePayload:E,activeTooltipIndex:T,chartName:r,element:A,isActive:V,layout:W,offset:I,tooltipAxisBandSize:M,tooltipEventType:z})}),Kr(j,"renderPolarAxis",function(A,P,C){var k=bl(A,"type.axisType"),R=bl(j.state,"".concat(k,"Map")),E=A.type.defaultProps,I=E!==void 0?vt(vt({},E),A.props):A.props,T=R&&R[I["".concat(k,"Id")]];return y.cloneElement(A,vt(vt({},T),{},{className:dn(k,T.className),key:A.key||"".concat(P,"-").concat(C),ticks:hd(T,!0)}))}),Kr(j,"renderPolarGrid",function(A){var P=A.props,C=P.radialLines,k=P.polarAngles,R=P.polarRadius,E=j.state,I=E.radiusAxisMap,T=E.angleAxisMap,M=jf(I),z=jf(T),V=z.cx,W=z.cy,$=z.innerRadius,G=z.outerRadius;return y.cloneElement(A,{polarAngles:Array.isArray(k)?k:hd(z,!0).map(function(me){return me.coordinate}),polarRadius:Array.isArray(R)?R:hd(M,!0).map(function(me){return me.coordinate}),cx:V,cy:W,innerRadius:$,outerRadius:G,key:A.key||"polar-grid",radialLines:C})}),Kr(j,"renderLegend",function(){var A=j.state.formattedGraphicalItems,P=j.props,C=P.children,k=P.width,R=P.height,E=j.props.margin||{},I=k-(E.left||0)-(E.right||0),T=GY({children:C,formattedGraphicalItems:A,legendWidth:I,legendContent:u});if(!T)return null;var M=T.item,z=YB(T,K8e);return y.cloneElement(M,vt(vt({},z),{},{chartWidth:k,chartHeight:R,margin:E,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Kr(j,"renderTooltip",function(){var A,P=j.props,C=P.children,k=P.accessibilityLayer,R=ul(C,dl);if(!R)return null;var E=j.state,I=E.isTooltipActive,T=E.activeCoordinate,M=E.activePayload,z=E.activeLabel,V=E.offset,W=(A=R.props.active)!==null&&A!==void 0?A:I;return y.cloneElement(R,{viewBox:vt(vt({},V),{},{x:V.left,y:V.top}),active:W,label:z,payload:W?M:[],coordinate:T,accessibilityLayer:k})}),Kr(j,"renderBrush",function(A){var P=j.props,C=P.margin,k=P.data,R=j.state,E=R.offset,I=R.dataStartIndex,T=R.dataEndIndex,M=R.updateId;return y.cloneElement(A,{key:A.key||"_recharts-brush",onChange:vw(j.handleBrushChange,A.props.onChange),data:k,x:Xt(A.props.x)?A.props.x:E.left,y:Xt(A.props.y)?A.props.y:E.top+E.height+E.brushBottom-(C.bottom||0),width:Xt(A.props.width)?A.props.width:E.width,startIndex:I,endIndex:T,updateId:"brush-".concat(M)})}),Kr(j,"renderReferenceElement",function(A,P,C){if(!A)return null;var k=j,R=k.clipPathId,E=j.state,I=E.xAxisMap,T=E.yAxisMap,M=E.offset,z=A.type.defaultProps||{},V=A.props,W=V.xAxisId,$=W===void 0?z.xAxisId:W,G=V.yAxisId,me=G===void 0?z.yAxisId:G;return y.cloneElement(A,{key:A.key||"".concat(P,"-").concat(C),xAxis:I[$],yAxis:T[me],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:R})}),Kr(j,"renderActivePoints",function(A){var P=A.item,C=A.activePoint,k=A.basePoint,R=A.childIndex,E=A.isRange,I=[],T=P.props.key,M=P.item.type.defaultProps!==void 0?vt(vt({},P.item.type.defaultProps),P.item.props):P.item.props,z=M.activeDot,V=M.dataKey,W=vt(vt({index:R,dataKey:V,cx:C.x,cy:C.y,r:4,fill:J3(P.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},$r(z,!1)),cS(z));return I.push(x.renderActiveDot(z,W,"".concat(T,"-activePoint-").concat(R))),k?I.push(x.renderActiveDot(z,vt(vt({},W),{},{cx:k.x,cy:k.y}),"".concat(T,"-basePoint-").concat(R))):E&&I.push(null),I}),Kr(j,"renderGraphicChild",function(A,P,C){var k=j.filterFormatItem(A,P,C);if(!k)return null;var R=j.getTooltipEventType(),E=j.state,I=E.isTooltipActive,T=E.tooltipAxis,M=E.activeTooltipIndex,z=E.activeLabel,V=j.props.children,W=ul(V,dl),$=k.props,G=$.points,me=$.isRange,de=$.baseLine,L=k.item.type.defaultProps!==void 0?vt(vt({},k.item.type.defaultProps),k.item.props):k.item.props,B=L.activeDot,J=L.hide,q=L.activeBar,X=L.activeShape,Z=!!(!J&&I&&W&&(B||q||X)),pe={};R!=="axis"&&W&&W.props.trigger==="click"?pe={onClick:vw(j.handleItemMouseEnter,A.props.onClick)}:R!=="axis"&&(pe={onMouseLeave:vw(j.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:vw(j.handleItemMouseEnter,A.props.onMouseEnter)});var te=y.cloneElement(A,vt(vt({},k.props),pe));function ve(ue){return typeof T.dataKey=="function"?T.dataKey(ue.payload):null}if(Z)if(M>=0){var Ce,he;if(T.dataKey&&!T.allowDuplicatedCategory){var qe=typeof T.dataKey=="function"?ve:"payload.".concat(T.dataKey.toString());Ce=lS(G,qe,z),he=me&&de&&lS(de,qe,z)}else Ce=G?.[M],he=me&&de&&de[M];if(X||q){var ye=A.props.activeIndex!==void 0?A.props.activeIndex:M;return[y.cloneElement(A,vt(vt(vt({},k.props),pe),{},{activeIndex:ye})),null,null]}if(!un(Ce))return[te].concat(wv(j.renderActivePoints({item:k,activePoint:Ce,basePoint:he,childIndex:M,isRange:me})))}else{var ce,Ft=(ce=j.getItemByXY(j.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:te},qt=Ft.graphicalItem,It=qt.item,et=It===void 0?A:It,Ze=qt.childIndex,Pt=vt(vt(vt({},k.props),pe),{},{activeIndex:Ze});return[y.cloneElement(et,Pt),null,null]}return me?[te,null,null]:[te,null]}),Kr(j,"renderCustomized",function(A,P,C){return y.cloneElement(A,vt(vt({key:"recharts-customized-".concat(C)},j.props),j.state))}),Kr(j,"renderMap",{CartesianGrid:{handler:Sw,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Sw},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Sw},YAxis:{handler:Sw},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:cp("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=HK(j.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return iBe(x,v),tBe(x,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,j=w.data,A=w.height,P=w.layout,C=ul(_,dl);if(C){var k=C.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,E=gO(this.state,j,k,R),I=this.state.tooltipTicks[k].coordinate,T=(this.state.offset.top+A)/2,M=P==="horizontal",z=M?{x:I,y:T}:{y:I,x:T},V=this.state.formattedGraphicalItems.find(function($){var G=$.item;return G.type.name==="Scatter"});V&&(z=vt(vt({},z),V.props.points[k].tooltipPosition),E=V.props.points[k].tooltipPayload);var W={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:R,activePayload:E,activeCoordinate:z};this.setState(W),this.renderCursor(C),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,A;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(w){UE([ul(w.children,dl)],[ul(this.props.children,dl)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=ul(this.props.children,dl);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),A=oke(j),P={chartX:Math.round(w.pageX-A.left),chartY:Math.round(w.pageY-A.top)},C=j.width/_.offsetWidth||1,k=this.inRange(P.chartX,P.chartY,C);if(!k)return null;var R=this.state,E=R.xAxisMap,I=R.yAxisMap,T=this.getTooltipEventType(),M=QB(this.state,this.props.data,this.props.layout,k);if(T!=="axis"&&E&&I){var z=jf(E).scale,V=jf(I).scale,W=z&&z.invert?z.invert(P.chartX):null,$=V&&V.invert?V.invert(P.chartY):null;return vt(vt({},P),{},{xValue:W,yValue:$},M)}return M?vt(vt({},P),M):null}},{key:"inRange",value:function(w,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,P=w/j,C=_/j;if(A==="horizontal"||A==="vertical"){var k=this.state.offset,R=P>=k.left&&P<=k.left+k.width&&C>=k.top&&C<=k.top+k.height;return R?{x:P,y:C}:null}var E=this.state,I=E.angleAxisMap,T=E.radiusAxisMap;if(I&&T){var M=jf(I);return h8({x:P,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),j=ul(w,dl),A={};j&&_==="axis"&&(j.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=cS(this.props,this.handleOuterEvent);return vt(vt({},P),A)}},{key:"addListener",value:function(){eA.on(tA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eA.removeListener(tA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,j){for(var A=this.state.formattedGraphicalItems,P=0,C=A.length;P<C;P++){var k=A[P];if(k.item===w||k.props.key===w.key||_===Nd(k.item.type)&&j===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,j=_.left,A=_.top,P=_.height,C=_.width;return se.createElement("defs",null,se.createElement("clipPath",{id:w},se.createElement("rect",{x:j,y:A,height:P,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,j){var A=KB(j,2),P=A[0],C=A[1];return vt(vt({},_),{},Kr({},P,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,j){var A=KB(j,2),P=A[0],C=A[1];return vt(vt({},_),{},Kr({},P,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,j=_.formattedGraphicalItems,A=_.activeItem;if(j&&j.length)for(var P=0,C=j.length;P<C;P++){var k=j[P],R=k.props,E=k.item,I=E.type.defaultProps!==void 0?vt(vt({},E.type.defaultProps),E.props):E.props,T=Nd(E.type);if(T==="Bar"){var M=(R.data||[]).find(function($){return zMe(w,$)});if(M)return{graphicalItem:k,payload:M}}else if(T==="RadialBar"){var z=(R.data||[]).find(function($){return h8(w,$)});if(z)return{graphicalItem:k,payload:z}}else if(lN(k,A)||cN(k,A)||W0(k,A)){var V=ELe({graphicalItem:k,activeTooltipItem:A,itemData:I.data}),W=I.activeIndex===void 0?V:I.activeIndex;return{graphicalItem:vt(vt({},k),{},{childIndex:W}),payload:W0(k,A)?I.data[V]:k.props.data[V]}}}return null}},{key:"render",value:function(){var w=this;if(!e$(this))return null;var _=this.props,j=_.children,A=_.className,P=_.width,C=_.height,k=_.style,R=_.compact,E=_.title,I=_.desc,T=YB(_,Y8e),M=$r(T,!1);if(R)return se.createElement(SB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(VE,mg({},M,{width:P,height:C,title:E,desc:I}),this.renderClipPath(),r$(j,this.renderMap)));if(this.props.accessibilityLayer){var z,V;M.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,M.role=(V=this.props.role)!==null&&V!==void 0?V:"application",M.onKeyDown=function($){w.accessibilityManager.keyboardEvent($)},M.onFocus=function(){w.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return se.createElement(SB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",mg({className:dn("recharts-wrapper",A),style:vt({position:"relative",cursor:"default",width:P,height:C},k)},W,{ref:function(G){w.container=G}}),se.createElement(VE,mg({},M,{width:P,height:C,title:E,desc:I,style:dBe}),this.renderClipPath(),r$(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);Kr(g,"displayName",r),Kr(g,"defaultProps",vt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Kr(g,"getDerivedStateFromProps",function(v,x){var b=v.dataKey,w=v.data,_=v.children,j=v.width,A=v.height,P=v.layout,C=v.stackOffset,k=v.margin,R=x.dataStartIndex,E=x.dataEndIndex;if(x.updateId===void 0){var I=ZB(v);return vt(vt(vt({},I),{},{updateId:0},m(vt(vt({props:v},I),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:A,prevLayout:P,prevStackOffset:C,prevMargin:k,prevChildren:_})}if(b!==x.prevDataKey||w!==x.prevData||j!==x.prevWidth||A!==x.prevHeight||P!==x.prevLayout||C!==x.prevStackOffset||!jg(k,x.prevMargin)){var T=ZB(v),M={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},z=vt(vt({},QB(x,w,P)),{},{updateId:x.updateId+1}),V=vt(vt(vt({},T),M),z);return vt(vt(vt({},V),m(vt({props:v},V),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:A,prevLayout:P,prevStackOffset:C,prevMargin:k,prevChildren:_})}if(!UE(_,x.prevChildren)){var W,$,G,me,de=ul(_,uv),L=de&&(W=($=de.props)===null||$===void 0?void 0:$.startIndex)!==null&&W!==void 0?W:R,B=de&&(G=(me=de.props)===null||me===void 0?void 0:me.endIndex)!==null&&G!==void 0?G:E,J=L!==R||B!==E,q=!un(w),X=q&&!J?x.updateId:x.updateId+1;return vt(vt({updateId:X},m(vt(vt({props:v},x),{},{updateId:X,dataStartIndex:L,dataEndIndex:B}),x)),{},{prevChildren:_,dataStartIndex:L,dataEndIndex:B})}return null}),Kr(g,"renderActiveDot",function(v,x,b){var w;return y.isValidElement(v)?w=y.cloneElement(v,x):Jr(v)?w=v(x):w=se.createElement(zb,x),se.createElement(Rn,{className:"recharts-active-dot",key:b},w)});var p=y.forwardRef(function(x,b){return se.createElement(g,mg({},x,{ref:b}))});return p.displayName=g.displayName,p},wBe=gN({chartName:"LineChart",GraphicalChild:qb,axisComponents:[{axisType:"xAxis",AxisComp:Gm},{axisType:"yAxis",AxisComp:Km}],formatAxisMap:e4}),SBe=gN({chartName:"BarChart",GraphicalChild:hp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Gm},{axisType:"yAxis",AxisComp:Km}],formatAxisMap:e4}),_Be=gN({chartName:"PieChart",GraphicalChild:Pu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:sN},{axisType:"radiusAxis",AxisComp:iN}],formatAxisMap:r4e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),jBe=gN({chartName:"AreaChart",GraphicalChild:Ph,axisComponents:[{axisType:"xAxis",AxisComp:Gm},{axisType:"yAxis",AxisComp:Km}],formatAxisMap:e4});const t7=({icon:e,title:t,value:r,trend:n,trendValue:a,color:i,className:o})=>{const l=n==="up"?uI:Jle,c=n==="up"?"text-success":"text-danger";return s.jsx(ur.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group flex flex-col justify-between ${o}`,children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10",style:{color:`var(--${i})`},children:s.jsx(e,{className:"h-5 w-5"})}),n&&a&&s.jsxs("div",{className:`flex items-center text-xs font-bold ${c}`,children:[s.jsx(l,{className:"w-3.5 h-3.5 mr-1"}),s.jsx("span",{children:a})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2",children:t}),s.jsx("p",{className:"text-3xl font-bold text-text-primary tabular-nums tracking-tight",children:r})]})]})})},NBe=({alerts:e,className:t})=>{const r=Vc(),[n,a]=y.useState(!1),i=d=>({Package:Hg,DollarSign:Ls,CalendarCheck:dI,Clock:Wg,ShoppingCart:jb,Store:mI,Users:ps,CalendarPlus:fI,AlertTriangle:Ug,Info:DW})[d]||Ug,o=d=>({danger:"text-danger",warning:"text-warning",info:"text-info",success:"text-success",purple:"text-purple"})[d]||"text-warning",l=e.length>2?e.slice(0,2):e,c=e.length>2,u=({alert:d,onClick:f})=>{const h=i(d.icone),m=o(d.cor);return s.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-white/5 transition-colors cursor-pointer group",onClick:f,children:[s.jsx(h,{className:`w-4 h-4 flex-shrink-0 ${m}`}),s.jsx("span",{className:"text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:d.mensagem}),d.link&&s.jsx(uI,{className:"w-3 h-3 text-text-muted opacity-0 group-hover:opacity-100 transition-opacity"})]})};return s.jsxs(s.Fragment,{children:[s.jsxs(ur.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card ${t||""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center",children:[s.jsx(V2,{className:"mr-2 h-5 w-5 text-brand"})," Alertas do Dia"]}),c&&s.jsx(Ae,{variant:"ghost",size:"sm",className:"text-xs text-brand hover:text-brand/80",onClick:()=>a(!0),children:"Ver todos"})]}),e.length===0?s.jsx("p",{className:"text-sm text-text-muted",children:"Nenhum alerta no momento! "}):s.jsx("ul",{className:"space-y-2 text-sm",children:l.map((d,f)=>s.jsx(u,{alert:d,onClick:()=>d.link&&r(d.link)},f))})]}),s.jsx(rn,{open:n,onOpenChange:a,children:s.jsxs(Yr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(nn,{children:s.jsxs(Xr,{className:"flex items-center gap-2",children:[s.jsx(V2,{className:"h-5 w-5 text-brand"}),"Todos os Alertas (",e.length,")"]})}),s.jsx("div",{className:"mt-4",children:e.length===0?s.jsx("p",{className:"text-sm text-text-muted text-center py-8",children:"Nenhum alerta no momento! "}):s.jsx("ul",{className:"space-y-2 text-sm",children:e.map((d,f)=>s.jsx(u,{alert:d,onClick:()=>{d.link&&(r(d.link),a(!1))}},f))})})]})})]})},CBe=({title:e,icon:t,data:r,color:n,className:a})=>{const i=r.reduce((c,u)=>c+(u.receita||0),0),o=r.reduce((c,u)=>c+(u.despesa||0),0),l=i-o;return s.jsxs(ur.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group ${a||""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10 mr-3",style:{color:`var(--${n})`},children:s.jsx(t,{className:"h-5 w-5"})}),s.jsx("h3",{className:"text-base font-bold text-text-primary flex-1",children:e}),s.jsx("div",{className:"text-xs font-semibold text-text-muted",children:"ltimos 14 dias"})]}),s.jsx("div",{className:"mb-2",children:s.jsx(o2,{width:"100%",height:90,children:s.jsxs(jBe,{data:r,margin:{top:4,right:0,left:0,bottom:0},children:[s.jsx(dl,{cursor:{stroke:"var(--border)",strokeDasharray:"3 3"},contentStyle:{background:"rgba(10, 10, 10, 0.85)",borderColor:"var(--border)",color:"var(--text-primary)",borderRadius:"var(--radius-sm)"},formatter:(c,u)=>u==="saldo"?[`R$ ${c.toLocaleString("pt-BR")}`,"Saldo"]:c,labelFormatter:c=>c}),s.jsx(Ph,{type:"monotone",dataKey:"saldo",stroke:"var(--brand)",strokeWidth:2,fill:"var(--brand)",fillOpacity:.15})]})})}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary",children:"Receita"}),s.jsxs("p",{className:"font-bold text-success tabular-nums",children:["R$ ",i.toLocaleString("pt-BR")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary",children:"Despesa"}),s.jsxs("p",{className:"font-bold text-danger tabular-nums",children:["R$ ",o.toLocaleString("pt-BR")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary",children:"Saldo"}),s.jsxs("p",{className:"font-bold text-text-primary tabular-nums",children:["R$ ",l.toLocaleString("pt-BR")]})]})]})]})},ABe=({title:e,icon:t,data:r,color:n,className:a})=>s.jsxs(ur.div,{variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}}},className:`fx-card group flex flex-col ${a||""}`,children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-md border border-white/10 bg-white/5 transition-colors duration-300 group-hover:border-brand/50 group-hover:bg-brand/10 mr-3",style:{color:`var(--${n})`},children:s.jsx(t,{className:"h-5 w-5"})}),s.jsx("h3",{className:"text-base font-bold text-text-primary",children:e})]}),s.jsx("div",{className:"space-y-3 mt-auto",children:r.map((i,o)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:i.name}),s.jsx("span",{className:"font-bold text-text-primary tabular-nums",children:i.value})]},o))})]}),PBe={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1,delayChildren:.2}}},nA={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}};function EBe(){ii();const{userProfile:e}=io(),{alerts:t}=PG(),r=Vc(),[n,a]=y.useState(!0),[i,o]=y.useState(0),[l,c]=y.useState({finalizados:0,total:0}),[u,d]=y.useState(0),[f,h]=y.useState(0),[m,g]=y.useState(0),[p,v]=y.useState(0),[x,b]=y.useState(0),[w,_]=y.useState(0),[j,A]=y.useState([]);y.useEffect(()=>{(async()=>{if(e?.codigo_empresa)try{a(!0);const R=e.codigo_empresa,E=new Date,I=pl(E).toISOString(),T=$E(E).toISOString(),{data:M}=await Pe.from("pagamentos").select("valor, status").eq("codigo_empresa",R).gte("recebido_em",I).lte("recebido_em",T),z=(M||[]).filter(Ce=>!["Cancelado","Estornado"].includes(Ce.status)).reduce((Ce,he)=>Ce+Number(he.valor||0),0),{data:V}=await Pe.from("agendamentos").select("id").eq("codigo_empresa",R).gte("inicio",I).lte("inicio",T);let W=0;if(V&&V.length>0){const Ce=V.map(qe=>qe.id),{data:he}=await Pe.from("agendamento_participantes").select("valor_cota, status_pagamento").eq("codigo_empresa",R).in("agendamento_id",Ce).eq("status_pagamento","Pago");W=(he||[]).reduce((qe,ye)=>qe+Number(ye.valor_cota||0),0)}const $=z+W;o($);const{data:G}=await Pe.from("agendamentos").select("id, status, inicio").eq("codigo_empresa",R).gte("inicio",I).lte("inicio",T),me=(G||[]).filter(Ce=>Ce.status==="finished").length;c({finalizados:me,total:G?.length||0});const de=new Date().toISOString(),L=(G||[]).filter(Ce=>Ce.inicio>de&&!["canceled","finished"].includes(Ce.status)).length;d(L);const B=(G||[]).filter(Ce=>Ce.status==="in_progress").length;h(B);const{data:J}=await Pe.from("quadras").select("id").eq("codigo_empresa",R),q=J?.length||0;g(q*3);const{data:X}=await Pe.from("comandas").select("id").eq("codigo_empresa",R).eq("status","open");v(X?.length||0);const{data:Z}=await Pe.from("mesas").select("id, status").eq("codigo_empresa",R),pe=(Z||[]).filter(Ce=>["in-use","awaiting-payment"].includes(Ce.status)).length;b(pe);const{data:te}=await Pe.from("comandas").select("id").eq("codigo_empresa",R).eq("status","closed").gte("fechado_em",I).lte("fechado_em",T);_(te?.length||0);const ve=[];for(let Ce=13;Ce>=0;Ce--){const he=new Date;he.setDate(he.getDate()-Ce);const qe=pl(he).toISOString(),ye=$E(he).toISOString(),{data:ce}=await Pe.from("pagamentos").select("valor, status").eq("codigo_empresa",R).gte("recebido_em",qe).lte("recebido_em",ye),Ft=(ce||[]).filter(Ze=>!["Cancelado","Estornado"].includes(Ze.status)).reduce((Ze,Pt)=>Ze+Number(Pt.valor||0),0),{data:qt}=await Pe.from("agendamentos").select("id").eq("codigo_empresa",R).gte("inicio",qe).lte("inicio",ye);let It=0;if(qt&&qt.length>0){const Ze=qt.map(ue=>ue.id),{data:Pt}=await Pe.from("agendamento_participantes").select("valor_cota").eq("codigo_empresa",R).in("agendamento_id",Ze).eq("status_pagamento","Pago");It=(Pt||[]).reduce((ue,rt)=>ue+Number(rt.valor_cota||0),0)}const et=Ft+It;ve.push({name:Ce===0?"Hoje":`${Ce}d`,saldo:Math.round(et),receita:Math.round(et),despesa:0})}A(ve)}catch(R){console.error("Erro ao carregar dashboard:",R)}finally{a(!1)}})()},[e?.codigo_empresa]);const P=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(k||0)),C=[{name:"Comandas Abertas",value:p},{name:"Mesas Ocupadas",value:x},{name:"Vendas Hoje",value:w}];return n?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand mx-auto mb-4"}),s.jsx("p",{className:"text-text-secondary",children:"Carregando dashboard..."})]})}):s.jsx(s.Fragment,{children:s.jsxs(ur.div,{variants:PBe,initial:"hidden",animate:"visible",className:"space-y-4",children:[s.jsxs(ur.div,{variants:nA,className:"relative grid grid-cols-1 xl:grid-cols-12 gap-4 items-start",children:[s.jsx("div",{className:"xl:col-span-8",children:s.jsxs("div",{className:"bg-surface/70 backdrop-blur-sm relative p-4 rounded-xl border border-white/10 overflow-hidden shadow-1",children:[s.jsx("div",{className:"absolute inset-0 bg-court-pattern opacity-[0.03] mix-blend-overlay"}),s.jsxs("div",{className:"relative z-10 max-w-[720px]",children:[s.jsxs("h1",{className:"text-3xl font-black mb-2 text-text-primary tracking-tighter",children:["Bem-vindo de volta, ",s.jsxs("span",{className:"text-brand",children:[e?.nome_exibicao||e?.nome||e?.email?.split("@")[0]||"Admin","!"]})]}),s.jsx("p",{className:"text-text-secondary mb-3 max-w-[60ch] text-sm md:text-base font-normal",children:"Sua central de comando para uma gesto de sucesso. Monitore agendamentos, faturamento e clientes em um s lugar."}),s.jsxs("div",{className:"flex flex-wrap gap-2.5",children:[s.jsxs(Ae,{onClick:()=>r("/agenda",{state:{openModal:!0}}),size:"default",children:[s.jsx(fI,{className:"mr-2 h-4 w-4"}),"+ Agendamento"]}),s.jsxs(Ae,{onClick:()=>r("/clientes",{state:{openModal:!0}}),variant:"outline",size:"default",children:[s.jsx(ps,{className:"mr-2 h-4 w-4"}),"Adicionar Cliente"]})]})]})]})}),s.jsx("div",{className:"xl:col-span-4",children:s.jsxs("div",{className:"fx-card",children:[s.jsxs("h2",{className:"text-lg font-bold text-text-primary mb-3 flex items-center",children:[s.jsx(Wg,{className:"mr-2 h-5 w-5 text-brand"})," Resumo do Dia"]}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-secondary",children:"Prximas Reservas"}),s.jsx("span",{className:"font-bold text-text-primary tabular-nums",children:u})]}),s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-secondary",children:"Quadras em Uso"}),s.jsx("span",{className:"font-bold text-success tabular-nums",children:f})]}),s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-text-secondary",children:"Horrios Disponveis"}),s.jsx("span",{className:"font-bold text-info tabular-nums",children:m})]})]})]})})]}),s.jsxs(ur.div,{variants:nA,className:"relative grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-12 gap-4 items-stretch",children:[s.jsx("div",{className:"xl:col-span-3",children:s.jsx(t7,{icon:Ls,title:"Faturamento do Dia",value:P(i),color:"success",className:"h-full"})}),s.jsx("div",{className:"xl:col-span-3",children:s.jsx(t7,{icon:dI,title:"Agend. Finalizados",value:`${l.finalizados} de ${l.total}`,color:"info",className:"h-full"})}),s.jsx("div",{className:"xl:col-span-3",children:s.jsx(NBe,{className:"h-full",alerts:t})}),s.jsx("div",{className:"xl:col-span-3",children:s.jsx(ABe,{icon:mI,title:"Informaes da Loja",data:C,color:"purple",className:"h-full"})})]}),s.jsx(ur.div,{variants:nA,className:"grid grid-cols-1 gap-4",children:s.jsx(CBe,{icon:Nb,title:"Resumo Financeiro",data:j,color:"brand"})})]})})}var kBe={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},OBe=function(t,r,n){var a,i=kBe[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",String(r)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+a:"h "+a:a};const TBe=OBe;var IBe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},DBe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},MBe={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RBe={date:_g({formats:IBe,defaultWidth:"full"}),time:_g({formats:DBe,defaultWidth:"full"}),dateTime:_g({formats:MBe,defaultWidth:"full"})};const LBe=RBe;var $Be={lastWeek:function(t){var r=t.getUTCDay(),n=r===0||r===6?"ltimo":"ltima";return"'"+n+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},FBe=function(t,r,n,a){var i=$Be[t];return typeof i=="function"?i(r):i};const BBe=FBe;var zBe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},qBe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},UBe={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},WBe={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},VBe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},HBe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},GBe=function(t,r){var n=Number(t);return r?.unit==="week"?n+"":n+""},KBe={ordinalNumber:GBe,era:su({values:zBe,defaultWidth:"wide"}),quarter:su({values:qBe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:su({values:UBe,defaultWidth:"wide"}),day:su({values:WBe,defaultWidth:"wide"}),dayPeriod:su({values:VBe,defaultWidth:"wide",formattingValues:HBe,defaultFormattingWidth:"wide"})};const YBe=KBe;var XBe=/^(\d+)[o]?/i,JBe=/\d+/i,QBe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},ZBe={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},e7e={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},t7e={any:[/1/i,/2/i,/3/i,/4/i]},r7e={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},n7e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},a7e={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},i7e={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},o7e={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},s7e={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},l7e={ordinalNumber:_G({matchPattern:XBe,parsePattern:JBe,valueCallback:function(t){return parseInt(t,10)}}),era:lu({matchPatterns:QBe,defaultMatchWidth:"wide",parsePatterns:ZBe,defaultParseWidth:"any"}),quarter:lu({matchPatterns:e7e,defaultMatchWidth:"wide",parsePatterns:t7e,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:lu({matchPatterns:r7e,defaultMatchWidth:"wide",parsePatterns:n7e,defaultParseWidth:"any"}),day:lu({matchPatterns:a7e,defaultMatchWidth:"wide",parsePatterns:i7e,defaultParseWidth:"any"}),dayPeriod:lu({matchPatterns:o7e,defaultMatchWidth:"any",parsePatterns:s7e,defaultParseWidth:"any"})};const c7e=l7e;var u7e={code:"pt-BR",formatDistance:TBe,formatLong:LBe,formatRelative:BBe,localize:YBe,match:c7e,options:{weekStartsOn:0,firstWeekContainsDate:1}};const rd=u7e,d7e=["top","right","bottom","left"],dh=Math.min,fl=Math.max,d_=Math.round,_w=Math.floor,Su=e=>({x:e,y:e}),f7e={left:"right",right:"left",bottom:"top",top:"bottom"},h7e={start:"end",end:"start"};function vO(e,t,r){return fl(e,dh(t,r))}function Ld(e,t){return typeof e=="function"?e(t):e}function $d(e){return e.split("-")[0]}function Qv(e){return e.split("-")[1]}function u4(e){return e==="x"?"y":"x"}function d4(e){return e==="y"?"height":"width"}const m7e=new Set(["top","bottom"]);function fu(e){return m7e.has($d(e))?"y":"x"}function f4(e){return u4(fu(e))}function p7e(e,t,r){r===void 0&&(r=!1);const n=Qv(e),a=f4(e),i=d4(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=f_(o)),[o,f_(o)]}function g7e(e){const t=f_(e);return[yO(e),t,yO(t)]}function yO(e){return e.replace(/start|end/g,t=>h7e[t])}const r7=["left","right"],n7=["right","left"],v7e=["top","bottom"],y7e=["bottom","top"];function x7e(e,t,r){switch(e){case"top":case"bottom":return r?t?n7:r7:t?r7:n7;case"left":case"right":return t?v7e:y7e;default:return[]}}function b7e(e,t,r,n){const a=Qv(e);let i=x7e($d(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(yO)))),i}function f_(e){return e.replace(/left|right|bottom|top/g,t=>f7e[t])}function w7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function wJ(e){return typeof e!="number"?w7e(e):{top:e,right:e,bottom:e,left:e}}function h_(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function a7(e,t,r){let{reference:n,floating:a}=e;const i=fu(t),o=f4(t),l=d4(o),c=$d(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Qv(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const S7e=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=a7(u,n,c),h=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:v,fn:x}=l[p],{x:b,y:w,data:_,reset:j}=await x({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,f=w??f,m={...m,[v]:{...m[v],..._}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=a7(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function J0(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=Ld(t,e),g=wJ(m),v=l[h?f==="floating"?"reference":"floating":f],x=h_(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=h_(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-j.top+g.top)/_.y,bottom:(j.bottom-x.bottom+g.bottom)/_.y,left:(x.left-j.left+g.left)/_.x,right:(j.right-x.right+g.right)/_.x}}const _7e=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Ld(e,t)||{};if(u==null)return{};const f=wJ(d),h={x:r,y:n},m=f4(a),g=d4(m),p=await o.getDimensions(u),v=m==="y",x=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=A?A[w]:0;(!P||!await(o.isElement==null?void 0:o.isElement(A)))&&(P=l.floating[w]||i.floating[g]);const C=_/2-j/2,k=P/2-p[g]/2-1,R=dh(f[x],k),E=dh(f[b],k),I=R,T=P-p[g]-E,M=P/2-p[g]/2+C,z=vO(I,M,T),V=!c.arrow&&Qv(a)!=null&&M!==z&&i.reference[g]/2-(M<I?R:E)-p[g]/2<0,W=V?M<I?M-I:M-T:0;return{[m]:h[m]+W,data:{[m]:z,centerOffset:M-z-W,...V&&{alignmentOffset:W}},reset:V}}}),j7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...v}=Ld(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=$d(a),b=fu(l),w=$d(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!p?[f_(l)]:g7e(l)),A=g!=="none";!h&&A&&j.push(...b7e(l,p,g,_));const P=[l,...j],C=await J0(t,v),k=[];let R=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&k.push(C[x]),f){const M=p7e(a,o,_);k.push(C[M[0]],C[M[1]])}if(R=[...R,{placement:a,overflows:k}],!k.every(M=>M<=0)){var E,I;const M=(((E=i.flip)==null?void 0:E.index)||0)+1,z=P[M];if(z&&(!(f==="alignment"?b!==fu(z):!1)||R.every($=>fu($.placement)===b?$.overflows[0]>0:!0)))return{data:{index:M,overflows:R},reset:{placement:z}};let V=(I=R.filter(W=>W.overflows[0]<=0).sort((W,$)=>W.overflows[1]-$.overflows[1])[0])==null?void 0:I.placement;if(!V)switch(m){case"bestFit":{var T;const W=(T=R.filter($=>{if(A){const G=fu($.placement);return G===b||G==="y"}return!0}).map($=>[$.placement,$.overflows.filter(G=>G>0).reduce((G,me)=>G+me,0)]).sort(($,G)=>$[1]-G[1])[0])==null?void 0:T[0];W&&(V=W);break}case"initialPlacement":V=l;break}if(a!==V)return{reset:{placement:V}}}return{}}}};function i7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function o7(e){return d7e.some(t=>e[t]>=0)}const N7e=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Ld(e,t);switch(n){case"referenceHidden":{const i=await J0(t,{...a,elementContext:"reference"}),o=i7(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:o7(o)}}}case"escaped":{const i=await J0(t,{...a,altBoundary:!0}),o=i7(i,r.floating);return{data:{escapedOffsets:o,escaped:o7(o)}}}default:return{}}}}},SJ=new Set(["left","top"]);async function C7e(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=$d(r),l=Qv(r),c=fu(r)==="y",u=SJ.has(o)?-1:1,d=i&&c?-1:1,f=Ld(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const A7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await C7e(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},P7e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=Ld(e,t),u={x:r,y:n},d=await J0(t,c),f=fu($d(a)),h=u4(f);let m=u[h],g=u[f];if(i){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=m+d[v],w=m-d[x];m=vO(b,m,w)}if(o){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=g+d[v],w=g-d[x];g=vO(b,g,w)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[f]:o}}}}}},E7e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ld(e,t),d={x:r,y:n},f=fu(a),h=u4(f);let m=d[h],g=d[f];const p=Ld(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",_=i.reference[h]-i.floating[w]+v.mainAxis,j=i.reference[h]+i.reference[w]-v.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var x,b;const w=h==="y"?"width":"height",_=SJ.has($d(a)),j=i.reference[f]-i.floating[w]+(_&&((x=o.offset)==null?void 0:x[f])||0)+(_?0:v.crossAxis),A=i.reference[f]+i.reference[w]+(_?0:((b=o.offset)==null?void 0:b[f])||0)-(_?v.crossAxis:0);g<j?g=j:g>A&&(g=A)}return{[h]:m,[f]:g}}}},k7e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Ld(e,t),d=await J0(t,u),f=$d(a),h=Qv(a),m=fu(a)==="y",{width:g,height:p}=i.floating;let v,x;f==="top"||f==="bottom"?(v=f,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,v=h==="end"?"top":"bottom");const b=p-d.top-d.bottom,w=g-d.left-d.right,_=dh(p-d[v],b),j=dh(g-d[x],w),A=!t.middlewareData.shift;let P=_,C=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(P=b),A&&!h){const R=fl(d.left,0),E=fl(d.right,0),I=fl(d.top,0),T=fl(d.bottom,0);m?C=g-2*(R!==0||E!==0?R+E:fl(d.left,d.right)):P=p-2*(I!==0||T!==0?I+T:fl(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:P});const k=await o.getDimensions(l.floating);return g!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function vN(){return typeof window<"u"}function Zv(e){return _J(e)?(e.nodeName||"").toLowerCase():"#document"}function Sl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Iu(e){var t;return(t=(_J(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _J(e){return vN()?e instanceof Node||e instanceof Sl(e).Node:!1}function zc(e){return vN()?e instanceof Element||e instanceof Sl(e).Element:!1}function Eu(e){return vN()?e instanceof HTMLElement||e instanceof Sl(e).HTMLElement:!1}function s7(e){return!vN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Sl(e).ShadowRoot}const O7e=new Set(["inline","contents"]);function Ub(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=qc(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!O7e.has(a)}const T7e=new Set(["table","td","th"]);function I7e(e){return T7e.has(Zv(e))}const D7e=[":popover-open",":modal"];function yN(e){return D7e.some(t=>{try{return e.matches(t)}catch{return!1}})}const M7e=["transform","translate","scale","rotate","perspective"],R7e=["transform","translate","scale","rotate","perspective","filter"],L7e=["paint","layout","strict","content"];function h4(e){const t=m4(),r=zc(e)?qc(e):e;return M7e.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||R7e.some(n=>(r.willChange||"").includes(n))||L7e.some(n=>(r.contain||"").includes(n))}function $7e(e){let t=fh(e);for(;Eu(t)&&!Sv(t);){if(h4(t))return t;if(yN(t))return null;t=fh(t)}return null}function m4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const F7e=new Set(["html","body","#document"]);function Sv(e){return F7e.has(Zv(e))}function qc(e){return Sl(e).getComputedStyle(e)}function xN(e){return zc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fh(e){if(Zv(e)==="html")return e;const t=e.assignedSlot||e.parentNode||s7(e)&&e.host||Iu(e);return s7(t)?t.host:t}function jJ(e){const t=fh(e);return Sv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Eu(t)&&Ub(t)?t:jJ(t)}function Q0(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=jJ(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Sl(a);if(i){const l=xO(o);return t.concat(o,o.visualViewport||[],Ub(a)?a:[],l&&r?Q0(l):[])}return t.concat(a,Q0(a,[],r))}function xO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function NJ(e){const t=qc(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Eu(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=d_(r)!==i||d_(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function p4(e){return zc(e)?e:e.contextElement}function Ag(e){const t=p4(e);if(!Eu(t))return Su(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=NJ(t);let o=(i?d_(r.width):r.width)/n,l=(i?d_(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const B7e=Su(0);function CJ(e){const t=Sl(e);return!m4()||!t.visualViewport?B7e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function z7e(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Sl(e)?!1:t}function Ym(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=p4(e);let o=Su(1);t&&(n?zc(n)&&(o=Ag(n)):o=Ag(e));const l=z7e(i,r,n)?CJ(i):Su(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=Sl(i),m=n&&zc(n)?Sl(n):n;let g=h,p=xO(g);for(;p&&n&&m!==g;){const v=Ag(p),x=p.getBoundingClientRect(),b=qc(p),w=x.left+(p.clientLeft+parseFloat(b.paddingLeft))*v.x,_=x.top+(p.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=w,u+=_,g=Sl(p),p=xO(g)}}return h_({width:d,height:f,x:c,y:u})}function g4(e,t){const r=xN(e).scrollLeft;return t?t.left+r:Ym(Iu(e)).left+r}function AJ(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:g4(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function q7e(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Iu(n),l=t?yN(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Su(1);const d=Su(0),f=Eu(n);if((f||!f&&!i)&&((Zv(n)!=="body"||Ub(o))&&(c=xN(n)),Eu(n))){const m=Ym(n);u=Ag(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?AJ(o,c,!0):Su(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function U7e(e){return Array.from(e.getClientRects())}function W7e(e){const t=Iu(e),r=xN(e),n=e.ownerDocument.body,a=fl(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=fl(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+g4(e);const l=-r.scrollTop;return qc(n).direction==="rtl"&&(o+=fl(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function V7e(e,t){const r=Sl(e),n=Iu(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=m4();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const H7e=new Set(["absolute","fixed"]);function G7e(e,t){const r=Ym(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Eu(e)?Ag(e):Su(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function l7(e,t,r){let n;if(t==="viewport")n=V7e(e,r);else if(t==="document")n=W7e(Iu(e));else if(zc(t))n=G7e(t,r);else{const a=CJ(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return h_(n)}function PJ(e,t){const r=fh(e);return r===t||!zc(r)||Sv(r)?!1:qc(r).position==="fixed"||PJ(r,t)}function K7e(e,t){const r=t.get(e);if(r)return r;let n=Q0(e,[],!1).filter(l=>zc(l)&&Zv(l)!=="body"),a=null;const i=qc(e).position==="fixed";let o=i?fh(e):e;for(;zc(o)&&!Sv(o);){const l=qc(o),c=h4(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&H7e.has(a.position)||Ub(o)&&!c&&PJ(e,o))?n=n.filter(d=>d!==o):a=l,o=fh(o)}return t.set(e,n),n}function Y7e(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?yN(t)?[]:K7e(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=l7(t,d,a);return u.top=fl(f.top,u.top),u.right=dh(f.right,u.right),u.bottom=dh(f.bottom,u.bottom),u.left=fl(f.left,u.left),u},l7(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function X7e(e){const{width:t,height:r}=NJ(e);return{width:t,height:r}}function J7e(e,t,r){const n=Eu(t),a=Iu(t),i=r==="fixed",o=Ym(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Su(0);function u(){c.x=g4(a)}if(n||!n&&!i)if((Zv(t)!=="body"||Ub(a))&&(l=xN(t)),n){const m=Ym(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?AJ(a,l):Su(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function aA(e){return qc(e).position==="static"}function c7(e,t){if(!Eu(e)||qc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Iu(e)===r&&(r=r.ownerDocument.body),r}function EJ(e,t){const r=Sl(e);if(yN(e))return r;if(!Eu(e)){let a=fh(e);for(;a&&!Sv(a);){if(zc(a)&&!aA(a))return a;a=fh(a)}return r}let n=c7(e,t);for(;n&&I7e(n)&&aA(n);)n=c7(n,t);return n&&Sv(n)&&aA(n)&&!h4(n)?r:n||$7e(e)||r}const Q7e=async function(e){const t=this.getOffsetParent||EJ,r=this.getDimensions,n=await r(e.floating);return{reference:J7e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Z7e(e){return qc(e).direction==="rtl"}const eze={convertOffsetParentRelativeRectToViewportRelativeRect:q7e,getDocumentElement:Iu,getClippingRect:Y7e,getOffsetParent:EJ,getElementRects:Q7e,getClientRects:U7e,getDimensions:X7e,getScale:Ag,isElement:zc,isRTL:Z7e};function kJ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function tze(e,t){let r=null,n;const a=Iu(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=_w(f),p=_w(a.clientWidth-(d+h)),v=_w(a.clientHeight-(f+m)),x=_w(d),w={rootMargin:-g+"px "+-p+"px "+-v+"px "+-x+"px",threshold:fl(0,dh(1,c))||1};let _=!0;function j(A){const P=A[0].intersectionRatio;if(P!==c){if(!_)return o();P?o(!1,P):n=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!kJ(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function rze(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=p4(e),d=a||i?[...u?Q0(u):[],...Q0(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const f=u&&l?tze(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?Ym(e):null;c&&v();function v(){const x=Ym(e);p&&!kJ(p,x)&&r(),p=x,g=requestAnimationFrame(v)}return r(),()=>{var x;d.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f?.(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const nze=A7e,aze=P7e,ize=j7e,oze=k7e,sze=N7e,u7=_7e,lze=E7e,cze=(e,t,r)=>{const n=new Map,a={platform:eze,...r},i={...a.platform,_c:n};return S7e(e,t,{...a,platform:i})};var uze=typeof document<"u",dze=function(){},l2=uze?y.useLayoutEffect:dze;function m_(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!m_(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!m_(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function OJ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function d7(e,t){const r=OJ(e);return Math.round(t*r)/r}function iA(e){const t=y.useRef(e);return l2(()=>{t.current=e}),t}function fze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=y.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=y.useState(n);m_(h,n)||m(n);const[g,p]=y.useState(null),[v,x]=y.useState(null),b=y.useCallback($=>{$!==A.current&&(A.current=$,p($))},[]),w=y.useCallback($=>{$!==P.current&&(P.current=$,x($))},[]),_=i||g,j=o||v,A=y.useRef(null),P=y.useRef(null),C=y.useRef(d),k=c!=null,R=iA(c),E=iA(a),I=iA(u),T=y.useCallback(()=>{if(!A.current||!P.current)return;const $={placement:t,strategy:r,middleware:h};E.current&&($.platform=E.current),cze(A.current,P.current,$).then(G=>{const me={...G,isPositioned:I.current!==!1};M.current&&!m_(C.current,me)&&(C.current=me,xh.flushSync(()=>{f(me)}))})},[h,t,r,E,I]);l2(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[u]);const M=y.useRef(!1);l2(()=>(M.current=!0,()=>{M.current=!1}),[]),l2(()=>{if(_&&(A.current=_),j&&(P.current=j),_&&j){if(R.current)return R.current(_,j,T);T()}},[_,j,T,R,k]);const z=y.useMemo(()=>({reference:A,floating:P,setReference:b,setFloating:w}),[b,w]),V=y.useMemo(()=>({reference:_,floating:j}),[_,j]),W=y.useMemo(()=>{const $={position:r,left:0,top:0};if(!V.floating)return $;const G=d7(V.floating,d.x),me=d7(V.floating,d.y);return l?{...$,transform:"translate("+G+"px, "+me+"px)",...OJ(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:G,top:me}},[r,l,V.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:T,refs:z,elements:V,floatingStyles:W}),[d,T,z,V,W])}const hze=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?u7({element:n.current,padding:a}).fn(r):{}:n?u7({element:n,padding:a}).fn(r):{}}}},mze=(e,t)=>({...nze(e),options:[e,t]}),pze=(e,t)=>({...aze(e),options:[e,t]}),gze=(e,t)=>({...lze(e),options:[e,t]}),vze=(e,t)=>({...ize(e),options:[e,t]}),yze=(e,t)=>({...oze(e),options:[e,t]}),xze=(e,t)=>({...sze(e),options:[e,t]}),bze=(e,t)=>({...hze(e),options:[e,t]});var wze="Arrow",TJ=y.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Qr.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});TJ.displayName=wze;var Sze=TJ;function IJ(e){const[t,r]=y.useState(void 0);return To(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var v4="Popper",[DJ,ey]=ac(v4),[_ze,MJ]=DJ(v4),RJ=e=>{const{__scopePopper:t,children:r}=e,[n,a]=y.useState(null);return s.jsx(_ze,{scope:t,anchor:n,onAnchorChange:a,children:r})};RJ.displayName=v4;var LJ="PopperAnchor",$J=y.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=MJ(LJ,r),o=y.useRef(null),l=Wn(t,o),c=y.useRef(null);return y.useEffect(()=>{const u=c.current;c.current=n?.current||o.current,u!==c.current&&i.onAnchorChange(c.current)}),n?null:s.jsx(Qr.div,{...a,ref:l})});$J.displayName=LJ;var y4="PopperContent",[jze,Nze]=DJ(y4),FJ=y.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,v=MJ(y4,r),[x,b]=y.useState(null),w=Wn(t,Z=>b(Z)),[_,j]=y.useState(null),A=IJ(_),P=A?.width??0,C=A?.height??0,k=n+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},E=Array.isArray(u)?u:[u],I=E.length>0,T={padding:R,boundary:E.filter(Aze),altBoundary:I},{refs:M,floatingStyles:z,placement:V,isPositioned:W,middlewareData:$}=fze({strategy:"fixed",placement:k,whileElementsMounted:(...Z)=>rze(...Z,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[mze({mainAxis:a+C,alignmentAxis:o}),c&&pze({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?gze():void 0,...T}),c&&vze({...T}),yze({...T,apply:({elements:Z,rects:pe,availableWidth:te,availableHeight:ve})=>{const{width:Ce,height:he}=pe.reference,qe=Z.floating.style;qe.setProperty("--radix-popper-available-width",`${te}px`),qe.setProperty("--radix-popper-available-height",`${ve}px`),qe.setProperty("--radix-popper-anchor-width",`${Ce}px`),qe.setProperty("--radix-popper-anchor-height",`${he}px`)}}),_&&bze({element:_,padding:l}),Pze({arrowWidth:P,arrowHeight:C}),h&&xze({strategy:"referenceHidden",...T})]}),[G,me]=qJ(V),de=Ks(g);To(()=>{W&&de?.()},[W,de]);const L=$.arrow?.x,B=$.arrow?.y,J=$.arrow?.centerOffset!==0,[q,X]=y.useState();return To(()=>{x&&X(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:W?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(jze,{scope:r,placedSide:G,onArrowChange:j,arrowX:L,arrowY:B,shouldHideArrow:J,children:s.jsx(Qr.div,{"data-side":G,"data-align":me,...p,ref:w,style:{...p.style,animation:W?void 0:"none"}})})})});FJ.displayName=y4;var BJ="PopperArrow",Cze={top:"bottom",right:"left",bottom:"top",left:"right"},zJ=y.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=Nze(BJ,n),o=Cze[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(Sze,{...a,ref:r,style:{...a.style,display:"block"}})})});zJ.displayName=BJ;function Aze(e){return e!==null}var Pze=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=qJ(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(a.arrow?.x??0)+l/2,m=(a.arrow?.y??0)+c/2;let g="",p="";return u==="bottom"?(g=o?f:`${h}px`,p=`${-c}px`):u==="top"?(g=o?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:g,y:p}}}});function qJ(e){const[t,r="center"]=e.split("-");return[t,r]}var x4=RJ,bN=$J,b4=FJ,w4=zJ,wN="Popover",[UJ,Xnt]=ac(wN,[ey]),Wb=ey(),[Eze,Eh]=UJ(wN),WJ=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Wb(t),c=y.useRef(null),[u,d]=y.useState(!1),[f,h]=Id({prop:n,defaultProp:a??!1,onChange:i,caller:wN});return s.jsx(x4,{...l,children:s.jsx(Eze,{scope:t,contentId:Mc(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>d(!0),[]),onCustomAnchorRemove:y.useCallback(()=>d(!1),[]),modal:o,children:r})})};WJ.displayName=wN;var VJ="PopoverAnchor",kze=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Eh(VJ,r),i=Wb(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return y.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(bN,{...i,...n,ref:t})});kze.displayName=VJ;var HJ="PopoverTrigger",GJ=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Eh(HJ,r),i=Wb(r),o=Wn(t,a.triggerRef),l=s.jsx(Qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":QJ(a.open),...n,ref:o,onClick:lr(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(bN,{asChild:!0,...i,children:l})});GJ.displayName=HJ;var S4="PopoverPortal",[Oze,Tze]=UJ(S4,{forceMount:void 0}),KJ=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Eh(S4,t);return s.jsx(Oze,{scope:t,forceMount:r,children:s.jsx(El,{present:r||i.open,children:s.jsx(Rv,{asChild:!0,container:a,children:n})})})};KJ.displayName=S4;var _v="PopoverContent",YJ=y.forwardRef((e,t)=>{const r=Tze(_v,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Eh(_v,e.__scopePopover);return s.jsx(El,{present:n||i.open,children:i.modal?s.jsx(Dze,{...a,ref:t}):s.jsx(Mze,{...a,ref:t})})});YJ.displayName=_v;var Ize=lh("PopoverContent.RemoveScroll"),Dze=y.forwardRef((e,t)=>{const r=Eh(_v,e.__scopePopover),n=y.useRef(null),a=Wn(t,n),i=y.useRef(!1);return y.useEffect(()=>{const o=n.current;if(o)return vj(o)},[]),s.jsx(gj,{as:Ize,allowPinchZoom:!0,children:s.jsx(XJ,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lr(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:lr(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:lr(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Mze=y.forwardRef((e,t)=>{const r=Eh(_v,e.__scopePopover),n=y.useRef(!1),a=y.useRef(!1);return s.jsx(XJ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),XJ=y.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Eh(_v,r),m=Wb(r);return mj(),s.jsx(Ob,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Mv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(b4,{"data-state":QJ(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),JJ="PopoverClose",Rze=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Eh(JJ,r);return s.jsx(Qr.button,{type:"button",...n,ref:t,onClick:lr(e.onClick,()=>a.onOpenChange(!1))})});Rze.displayName=JJ;var Lze="PopoverArrow",$ze=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Wb(r);return s.jsx(w4,{...a,...n,ref:t})});$ze.displayName=Lze;function QJ(e){return e?"open":"closed"}var Fze=WJ,Bze=GJ,zze=KJ,ZJ=YJ;const Fd=Fze,Bd=Bze,ku=se.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(zze,{children:s.jsx(ZJ,{ref:a,align:t,sideOffset:r,className:Et("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ku.displayName=ZJ.displayName;var on=function(){return on=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},on.apply(this,arguments)};function qze(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function eQ(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Vb(e){return e.mode==="multiple"}function Hb(e){return e.mode==="range"}function SN(e){return e.mode==="single"}var Uze={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Wze(e,t){return Hr(e,"LLLL y",t)}function Vze(e,t){return Hr(e,"d",t)}function Hze(e,t){return Hr(e,"LLLL",t)}function Gze(e){return"".concat(e)}function Kze(e,t){return Hr(e,"cccccc",t)}function Yze(e,t){return Hr(e,"yyyy",t)}var Xze=Object.freeze({__proto__:null,formatCaption:Wze,formatDay:Vze,formatMonthCaption:Hze,formatWeekNumber:Gze,formatWeekdayName:Kze,formatYearCaption:Yze}),Jze=function(e,t,r){return Hr(e,"do MMMM (EEEE)",r)},Qze=function(){return"Month: "},Zze=function(){return"Go to next month"},eqe=function(){return"Go to previous month"},tqe=function(e,t){return Hr(e,"cccc",t)},rqe=function(e){return"Week n. ".concat(e)},nqe=function(){return"Year: "},aqe=Object.freeze({__proto__:null,labelDay:Jze,labelMonthDropdown:Qze,labelNext:Zze,labelPrevious:eqe,labelWeekNumber:rqe,labelWeekday:tqe,labelYearDropdown:nqe});function iqe(){var e="buttons",t=Uze,r=jG,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Xze,labels:aqe,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function oqe(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Hs(n):t&&(i=new Date(t,0,1)),a?o=ZI(a):r&&(o=new Date(r,11,31)),{fromDate:i?pl(i):void 0,toDate:o?pl(o):void 0}}var tQ=y.createContext(void 0);function sqe(e){var t,r=e.initialProps,n=iqe(),a=oqe(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(SN(r)||Vb(r)||Hb(r))&&(c=r.onSelect);var u=on(on(on({},n),r),{captionLayout:l,classNames:on(on({},n.classNames),r.classNames),components:on({},r.components),formatters:on(on({},n.formatters),r.formatters),fromDate:i,labels:on(on({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:on(on({},n.modifiers),r.modifiers),modifiersClassNames:on(on({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:on(on({},n.styles),r.styles),toDate:o});return s.jsx(tQ.Provider,{value:u,children:e.children})}function za(){var e=y.useContext(tQ);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function rQ(e){var t=za(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function lqe(e){return s.jsx("svg",on({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function nQ(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=za(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:lqe;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function cqe(e){var t,r=za(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(Sxe(n,a))for(var h=Hs(n),m=n.getMonth();m<=a.getMonth();m++)f.push(A5(h,m));else for(var h=Hs(new Date),m=0;m<=11;m++)f.push(A5(h,m));var g=function(v){var x=Number(v.target.value),b=A5(Hs(e.displayMonth),x);e.onChange(b)},p=(t=u?.Dropdown)!==null&&t!==void 0?t:nQ;return s.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(v){return s.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function uqe(e){var t,r=e.displayMonth,n=za(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),p=m;p<=g;p++)h.push(B6(Qve(new Date),p));var v=function(b){var w=B6(Hs(r),Number(b.target.value));e.onChange(w)},x=(t=u?.Dropdown)!==null&&t!==void 0?t:nQ;return s.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(b){return s.jsx("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function dqe(e,t){var r=y.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function fqe(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&m0(i,a)<0){var u=-1*(c-1);a=Fc(i,u)}return o&&m0(a,o)<0&&(a=o),Hs(a)}function hqe(){var e=za(),t=fqe(e),r=dqe(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Hs(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function mqe(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Hs(e),i=Hs(Fc(a,n)),o=m0(i,a),l=[],c=0;c<o;c++){var u=Fc(a,c);l.push(u)}return r&&(l=l.reverse()),l}function pqe(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Hs(e);if(!r)return Fc(l,o);var c=m0(r,e);if(!(c<i))return Fc(l,o)}}function gqe(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Hs(e);if(!r)return Fc(l,-o);var c=m0(l,r);if(!(c<=0))return Fc(l,-o)}}var aQ=y.createContext(void 0);function vqe(e){var t=za(),r=hqe(),n=r[0],a=r[1],i=mqe(n,t),o=pqe(n,t),l=gqe(n,t),c=function(f){return i.some(function(h){return t3(f,h)})},u=function(f,h){c(f)||(h&&NG(f,h)?a(Fc(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(aQ.Provider,{value:d,children:e.children})}function Gb(){var e=y.useContext(aQ);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function f7(e){var t,r=za(),n=r.classNames,a=r.styles,i=r.components,o=Gb().goToMonth,l=function(d){o(Fc(d,e.displayIndex?-e.displayIndex:0))},c=(t=i?.CaptionLabel)!==null&&t!==void 0?t:rQ,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(cqe,{onChange:l,displayMonth:e.displayMonth}),s.jsx(uqe,{onChange:l,displayMonth:e.displayMonth})]})}function yqe(e){return s.jsx("svg",on({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xqe(e){return s.jsx("svg",on({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var p_=y.forwardRef(function(e,t){var r=za(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=on(on({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",on({},e,{ref:t,type:"button",className:o,style:l}))});function bqe(e){var t,r,n=za(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:i}),p=[o.nav_button,o.nav_button_next].join(" "),v=(t=f?.IconRight)!==null&&t!==void 0?t:xqe,x=(r=f?.IconLeft)!==null&&r!==void 0?r:yqe;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(p_,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(v,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(p_,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function h7(e){var t=za().numberOfMonths,r=Gb(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return t3(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(bqe,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function wqe(e){var t,r=za(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:rQ,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(f7,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(f7,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(h7,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(h7,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function Sqe(e){var t=za(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function _qe(e,t,r){for(var n=r?Bm(new Date):Bc(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=Ri(n,i);a.push(o)}return a}function jqe(){var e=za(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=_qe(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function Nqe(){var e,t=za(),r=t.classNames,n=t.styles,a=t.components,i=(e=a?.HeadRow)!==null&&e!==void 0?e:jqe;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function Cqe(e){var t=za(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var _4=y.createContext(void 0);function Aqe(e){if(!Vb(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(_4.Provider,{value:t,children:e.children})}return s.jsx(Pqe,{initialProps:e.initialProps,children:e.children})}function Pqe(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&n?.length===a);if(!g){var p=!!(!d.selected&&i&&n?.length===i);if(!p){var v=n?eQ([],n,!0):[];if(d.selected){var x=v.findIndex(function(b){return gs(u,b)});v.splice(x,1)}else v.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,v,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return gs(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(_4.Provider,{value:c,children:r})}function j4(){var e=y.useContext(_4);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Eqe(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?gs(a,e)&&gs(n,e)?void 0:gs(a,e)?{from:a,to:void 0}:gs(n,e)?void 0:FE(n,e)?{from:e,to:a}:{from:n,to:e}:a?FE(e,a)?{from:a,to:e}:{from:e,to:a}:n?NG(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var N4=y.createContext(void 0);function kqe(e){if(!Hb(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(N4.Provider,{value:t,children:e.children})}return s.jsx(Oqe,{initialProps:e.initialProps,children:e.children})}function Oqe(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,p){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,m,g,p);var b=Eqe(m,n);(x=t.onSelect)===null||x===void 0||x.call(t,b,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],gs(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:i2(i,l-1),before:Ri(i,l-1)}),i&&o&&d.disabled.push({after:i,before:Ri(i,l-1)}),!i&&o&&d.disabled.push({after:i2(o,l-1),before:Ri(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:Ri(i,-c+1)}),d.disabled.push({after:Ri(i,c-1)})),i&&o){var f=ud(o,i)+1,h=c-f;d.disabled.push({before:i2(i,h)}),d.disabled.push({after:Ri(o,h)})}!i&&o&&(d.disabled.push({before:Ri(o,-c+1)}),d.disabled.push({after:Ri(o,c-1)}))}return s.jsx(N4.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function C4(){var e=y.useContext(N4);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function c2(e){return Array.isArray(e)?eQ([],e,!0):e!==void 0?[e]:[]}function Tqe(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=c2(a)}),t}var Uc;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Uc||(Uc={}));var Iqe=Uc.Selected,Gu=Uc.Disabled,Dqe=Uc.Hidden,Mqe=Uc.Today,oA=Uc.RangeEnd,sA=Uc.RangeMiddle,lA=Uc.RangeStart,Rqe=Uc.Outside;function Lqe(e,t,r){var n,a=(n={},n[Iqe]=c2(e.selected),n[Gu]=c2(e.disabled),n[Dqe]=c2(e.hidden),n[Mqe]=[e.today],n[oA]=[],n[sA]=[],n[lA]=[],n[Rqe]=[],n);return e.fromDate&&a[Gu].push({before:e.fromDate}),e.toDate&&a[Gu].push({after:e.toDate}),Vb(e)?a[Gu]=a[Gu].concat(t.modifiers[Gu]):Hb(e)&&(a[Gu]=a[Gu].concat(r.modifiers[Gu]),a[lA]=r.modifiers[lA],a[sA]=r.modifiers[sA],a[oA]=r.modifiers[oA]),a}var iQ=y.createContext(void 0);function $qe(e){var t=za(),r=j4(),n=C4(),a=Lqe(t,r,n),i=Tqe(t.modifiers),o=on(on({},a),i);return s.jsx(iQ.Provider,{value:o,children:e.children})}function oQ(){var e=y.useContext(iQ);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Fqe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Bqe(e){return!!(e&&typeof e=="object"&&"from"in e)}function zqe(e){return!!(e&&typeof e=="object"&&"after"in e)}function qqe(e){return!!(e&&typeof e=="object"&&"before"in e)}function Uqe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Wqe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=ud(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=ud(e,n)>=0&&ud(a,e)>=0;return o}return a?gs(a,e):n?gs(n,e):!1}function Vqe(e){return QI(e)}function Hqe(e){return Array.isArray(e)&&e.every(QI)}function Gqe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(Vqe(r))return gs(e,r);if(Hqe(r))return r.includes(e);if(Bqe(r))return Wqe(e,r);if(Uqe(r))return r.dayOfWeek.includes(e.getDay());if(Fqe(r)){var n=ud(r.before,e),a=ud(r.after,e),i=n>0,o=a<0,l=FE(r.before,r.after);return l?o&&i:i||o}return zqe(r)?ud(e,r.after)>0:qqe(r)?ud(r.before,e)>0:typeof r=="function"?r(e):!1})}function A4(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return Gqe(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!t3(e,r)&&(a.outside=!0),a}function Kqe(e,t){for(var r=Hs(e[0]),n=ZI(e[e.length-1]),a,i,o=r;o<=n;){var l=A4(o,t),c=!l.disabled&&!l.hidden;if(!c){o=Ri(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=Ri(o,1)}return i||a}var Yqe=365;function sQ(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:Ri,week:LE,month:Fc,year:Hve,startOfWeek:function(v){return a.ISOWeek?Bm(v):Bc(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?xG(v):e3(v,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=Gve([u,m]):n==="after"&&d&&(m=Kve([d,m]));var g=!0;if(i){var p=A4(m,i);g=!p.disabled&&!p.hidden}return g?m:l.count>Yqe?l.lastFocused:sQ(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:on(on({},l),{count:l.count+1})})}var lQ=y.createContext(void 0);function Xqe(e){var t=Gb(),r=oQ(),n=y.useState(),a=n[0],i=n[1],o=y.useState(),l=o[0],c=o[1],u=Kqe(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(v){i(v)},m=za(),g=function(v,x){if(a){var b=sQ(a,{moveBy:v,direction:x,context:m,modifiers:r});gs(a,b)||(t.goToDate(b,a),h(b))}},p={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(lQ.Provider,{value:p,children:e.children})}function P4(){var e=y.useContext(lQ);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Jqe(e,t){var r=oQ(),n=A4(e,r,t);return n}var E4=y.createContext(void 0);function Qqe(e){if(!SN(e.initialProps)){var t={selected:void 0};return s.jsx(E4.Provider,{value:t,children:e.children})}return s.jsx(Zqe,{initialProps:e.initialProps,children:e.children})}function Zqe(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(E4.Provider,{value:a,children:r})}function cQ(){var e=y.useContext(E4);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function e9e(e,t){var r=za(),n=cQ(),a=j4(),i=C4(),o=P4(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,p=o.focusYearBefore,v=o.focusYearAfter,x=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(W){var $,G,me,de;SN(r)?($=n.onDayClick)===null||$===void 0||$.call(n,e,t,W):Vb(r)?(G=a.onDayClick)===null||G===void 0||G.call(a,e,t,W):Hb(r)?(me=i.onDayClick)===null||me===void 0||me.call(i,e,t,W):(de=r.onDayClick)===null||de===void 0||de.call(r,e,t,W)},_=function(W){var $;h(e),($=r.onDayFocus)===null||$===void 0||$.call(r,e,t,W)},j=function(W){var $;f(),($=r.onDayBlur)===null||$===void 0||$.call(r,e,t,W)},A=function(W){var $;($=r.onDayMouseEnter)===null||$===void 0||$.call(r,e,t,W)},P=function(W){var $;($=r.onDayMouseLeave)===null||$===void 0||$.call(r,e,t,W)},C=function(W){var $;($=r.onDayPointerEnter)===null||$===void 0||$.call(r,e,t,W)},k=function(W){var $;($=r.onDayPointerLeave)===null||$===void 0||$.call(r,e,t,W)},R=function(W){var $;($=r.onDayTouchCancel)===null||$===void 0||$.call(r,e,t,W)},E=function(W){var $;($=r.onDayTouchEnd)===null||$===void 0||$.call(r,e,t,W)},I=function(W){var $;($=r.onDayTouchMove)===null||$===void 0||$.call(r,e,t,W)},T=function(W){var $;($=r.onDayTouchStart)===null||$===void 0||$.call(r,e,t,W)},M=function(W){var $;($=r.onDayKeyUp)===null||$===void 0||$.call(r,e,t,W)},z=function(W){var $;switch(W.key){case"ArrowLeft":W.preventDefault(),W.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":W.preventDefault(),W.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":W.preventDefault(),W.stopPropagation(),u();break;case"ArrowUp":W.preventDefault(),W.stopPropagation(),d();break;case"PageUp":W.preventDefault(),W.stopPropagation(),W.shiftKey?p():m();break;case"PageDown":W.preventDefault(),W.stopPropagation(),W.shiftKey?v():g();break;case"Home":W.preventDefault(),W.stopPropagation(),x();break;case"End":W.preventDefault(),W.stopPropagation(),b();break}($=r.onDayKeyDown)===null||$===void 0||$.call(r,e,t,W)},V={onClick:w,onFocus:_,onBlur:j,onKeyDown:z,onKeyUp:M,onMouseEnter:A,onMouseLeave:P,onPointerEnter:C,onPointerLeave:k,onTouchCancel:R,onTouchEnd:E,onTouchMove:I,onTouchStart:T};return V}function t9e(){var e=za(),t=cQ(),r=j4(),n=C4(),a=SN(e)?t.selected:Vb(e)?r.selected:Hb(e)?n.selected:void 0;return a}function r9e(e){return Object.values(Uc).includes(e)}function n9e(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(r9e(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function a9e(e,t){var r=on({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=on(on({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function i9e(e,t,r){var n,a,i,o=za(),l=P4(),c=Jqe(e,t),u=e9e(e,c),d=t9e(),f=!!(o.onDayClick||o.mode!=="default");y.useEffect(function(){var A;c.outside||l.focusedDay&&f&&gs(l.focusedDay,e)&&((A=r.current)===null||A===void 0||A.focus())},[l.focusedDay,e,r,f,c.outside]);var h=n9e(o,c).join(" "),m=a9e(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Cqe,v=s.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),x={style:m,className:h,children:v,role:"gridcell"},b=l.focusTarget&&gs(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&gs(l.focusedDay,e),_=on(on(on({},x),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||b?0:-1,n)),u),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:x};return j}function o9e(e){var t=y.useRef(null),r=i9e(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(p_,on({name:"day",ref:t},r.buttonProps)):s.jsx("div",on({},r.divProps))}function s9e(e){var t=e.number,r=e.dates,n=za(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return s.jsx(p_,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function l9e(e){var t,r,n=za(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l?.Day)!==null&&t!==void 0?t:o9e,u=(r=l?.WeekNumber)!==null&&r!==void 0?r:s9e,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},dxe(f))})]})}function m7(e,t,r){for(var n=r?.ISOWeek?xG(t):e3(t,r),a=r?.ISOWeek?Bm(e):Bc(e,r),i=ud(n,a),o=[],l=0;l<=i;l++)o.push(Ri(a,l));var c=o.reduce(function(u,d){var f=r?.ISOWeek?cxe(d):pxe(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function c9e(e,t){var r=m7(Hs(e),ZI(e),t);if(t?.useFixedWeeks){var n=vxe(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=LE(i,6-n),l=m7(LE(i,1),o,t);r.push.apply(r,l)}}return r}function u9e(e){var t,r,n,a=za(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=c9e(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d?.Head)!==null&&t!==void 0?t:Nqe,v=(r=d?.Row)!==null&&r!==void 0?r:l9e,x=(n=d?.Footer)!==null&&n!==void 0?n:Sqe;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(p,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return s.jsx(v,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),s.jsx(x,{displayMonth:e.displayMonth})]})}function d9e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var f9e=d9e()?y.useLayoutEffect:y.useEffect,cA=!1,h9e=0;function p7(){return"react-day-picker-".concat(++h9e)}function m9e(e){var t,r=e??(cA?p7():null),n=y.useState(r),a=n[0],i=n[1];return f9e(function(){a===null&&i(p7())},[]),y.useEffect(function(){cA===!1&&(cA=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function p9e(e){var t,r,n=za(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=Gb().displayMonths,u=m9e(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=on(on({},h),o.caption_start)),g&&(f.push(i.caption_end),h=on(on({},h),o.caption_end)),p&&(f.push(i.caption_between),h=on(on({},h),o.caption_between));var v=(r=l?.Caption)!==null&&r!==void 0?r:wqe;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(v,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(u9e,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function g9e(e){var t=za(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function v9e(e){var t,r,n=e.initialProps,a=za(),i=P4(),o=Gb(),l=y.useState(!1),c=l[0],u=l[1];y.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=on(on({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var v;return on(on({},g),(v={},v[p]=n[p],v))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:g9e;return s.jsx("div",on({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(g,p){return s.jsx(p9e,{displayIndex:p,displayMonth:g},p)})})}))}function y9e(e){var t=e.children,r=qze(e,["children"]);return s.jsx(sqe,{initialProps:r,children:s.jsx(vqe,{children:s.jsx(Qqe,{initialProps:r,children:s.jsx(Aqe,{initialProps:r,children:s.jsx(kqe,{initialProps:r,children:s.jsx($qe,{children:s.jsx(Xqe,{children:t})})})})})})})}function bO(e){return s.jsx(y9e,on({},e,{children:s.jsx(v9e,{initialProps:e})}))}function _u({className:e,classNames:t,showOutsideDays:r=!0,weekStartsOn:n=1,locale:a=rd,...i}){const o=["dom","seg","ter","qua","qui","sex","sb"];return s.jsx(bO,{showOutsideDays:r,weekStartsOn:n,locale:a,className:Et("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Et(d0({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Et(d0({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},formatters:{formatWeekdayName:(l,c)=>o[l.getDay()]},components:{IconLeft:({...l})=>s.jsx(IW,{className:"h-4 w-4"}),IconRight:({...l})=>s.jsx(aj,{className:"h-4 w-4"})},...i})}_u.displayName="Calendar";var uQ="AlertDialog",[x9e,Jnt]=ac(uQ,[NH]),Gd=NH(),dQ=e=>{const{__scopeAlertDialog:t,...r}=e,n=Gd(t);return s.jsx(zH,{...n,...r,modal:!0})};dQ.displayName=uQ;var b9e="AlertDialogTrigger",fQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(ppe,{...a,...n,ref:t})});fQ.displayName=b9e;var w9e="AlertDialogPortal",hQ=e=>{const{__scopeAlertDialog:t,...r}=e,n=Gd(t);return s.jsx(qH,{...n,...r})};hQ.displayName=w9e;var S9e="AlertDialogOverlay",mQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(qI,{...a,...n,ref:t})});mQ.displayName=S9e;var Pg="AlertDialogContent",[_9e,j9e]=x9e(Pg),N9e=zhe("AlertDialogContent"),pQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Gd(r),o=y.useRef(null),l=Wn(t,o),c=y.useRef(null);return s.jsx(dpe,{contentName:Pg,titleName:gQ,docsSlug:"alert-dialog",children:s.jsx(_9e,{scope:r,cancelRef:c,children:s.jsxs(UI,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:lr(a.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(N9e,{children:n}),s.jsx(A9e,{contentRef:o})]})})})});pQ.displayName=Pg;var gQ="AlertDialogTitle",vQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(WI,{...a,...n,ref:t})});vQ.displayName=gQ;var yQ="AlertDialogDescription",xQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(VI,{...a,...n,ref:t})});xQ.displayName=yQ;var C9e="AlertDialogAction",bQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Gd(r);return s.jsx(xj,{...a,...n,ref:t})});bQ.displayName=C9e;var wQ="AlertDialogCancel",SQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=j9e(wQ,r),i=Gd(r),o=Wn(t,a);return s.jsx(xj,{...i,...n,ref:o})});SQ.displayName=wQ;var A9e=({contentRef:e})=>{const t=`\`${Pg}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Pg}\` by passing a \`${yQ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Pg}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},P9e=dQ,E9e=fQ,k9e=hQ,_Q=mQ,jQ=pQ,NQ=bQ,CQ=SQ,AQ=vQ,PQ=xQ;const Tf=P9e,pm=E9e,O9e=k9e,EQ=se.forwardRef(({className:e,...t},r)=>s.jsx(_Q,{className:Et("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));EQ.displayName=_Q.displayName;const md=se.forwardRef(({className:e,...t},r)=>s.jsxs(O9e,{children:[s.jsx(EQ,{}),s.jsx(jQ,{ref:r,className:Et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));md.displayName=jQ.displayName;const pd=({className:e,...t})=>s.jsx("div",{className:Et("flex flex-col space-y-2 text-center sm:text-left",e),...t});pd.displayName="AlertDialogHeader";const gd=({className:e,...t})=>s.jsx("div",{className:Et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});gd.displayName="AlertDialogFooter";const vd=se.forwardRef(({className:e,...t},r)=>s.jsx(AQ,{ref:r,className:Et("text-lg font-semibold",e),...t}));vd.displayName=AQ.displayName;const yd=se.forwardRef(({className:e,...t},r)=>s.jsx(PQ,{ref:r,className:Et("text-sm text-muted-foreground",e),...t}));yd.displayName=PQ.displayName;const xd=se.forwardRef(({className:e,...t},r)=>s.jsx(NQ,{ref:r,className:Et(d0(),e),...t}));xd.displayName=NQ.displayName;const bd=se.forwardRef(({className:e,...t},r)=>s.jsx(CQ,{ref:r,className:Et(d0({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));bd.displayName=CQ.displayName;function g7(e,[t,r]){return Math.min(r,Math.max(t,e))}function _N(e){const t=e+"CollectionProvider",[r,n]=ac(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:x}=p,b=se.useRef(null),w=se.useRef(new Map).current;return s.jsx(a,{scope:v,itemMap:w,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=lh(l),u=se.forwardRef((p,v)=>{const{scope:x,children:b}=p,w=i(l,x),_=Wn(v,w.collectionRef);return s.jsx(c,{ref:_,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=lh(d),m=se.forwardRef((p,v)=>{const{scope:x,children:b,...w}=p,_=se.useRef(null),j=Wn(v,_),A=i(d,x);return se.useEffect(()=>(A.itemMap.set(_,{ref:_,...w}),()=>void A.itemMap.delete(_))),s.jsx(h,{[f]:"",ref:j,children:b})});m.displayName=d;function g(p){const v=i(e+"CollectionConsumer",p);return se.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((A,P)=>w.indexOf(A.ref.current)-w.indexOf(P.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,n]}var T9e=y.createContext(void 0);function jN(e){const t=y.useContext(T9e);return e||t||"ltr"}function kQ(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var OQ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I9e="VisuallyHidden",k4=y.forwardRef((e,t)=>s.jsx(Qr.span,{...e,ref:t,style:{...OQ,...e.style}}));k4.displayName=I9e;var D9e=[" ","Enter","ArrowUp","ArrowDown"],M9e=[" ","Enter"],Xm="Select",[NN,CN,R9e]=_N(Xm),[ty,Qnt]=ac(Xm,[R9e,ey]),AN=ey(),[L9e,kh]=ty(Xm),[$9e,F9e]=ty(Xm),TQ=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=AN(t),[v,x]=y.useState(null),[b,w]=y.useState(null),[_,j]=y.useState(!1),A=jN(u),[P,C]=Id({prop:n,defaultProp:a??!1,onChange:i,caller:Xm}),[k,R]=Id({prop:o,defaultProp:l,onChange:c,caller:Xm}),E=y.useRef(null),I=v?g||!!v.closest("form"):!0,[T,M]=y.useState(new Set),z=Array.from(T).map(V=>V.props.value).join(";");return s.jsx(x4,{...p,children:s.jsxs(L9e,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Mc(),value:k,onValueChange:R,open:P,onOpenChange:C,dir:A,triggerPointerDownPosRef:E,disabled:h,children:[s.jsx(NN.Provider,{scope:t,children:s.jsx($9e,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(V=>{M(W=>new Set(W).add(V))},[]),onNativeOptionRemove:y.useCallback(V=>{M(W=>{const $=new Set(W);return $.delete(V),$})},[]),children:r})}),I?s.jsxs(eZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:k,onChange:V=>R(V.target.value),disabled:h,form:g,children:[k===void 0?s.jsx("option",{value:""}):null,Array.from(T)]},z):null]})})};TQ.displayName=Xm;var IQ="SelectTrigger",DQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=AN(r),o=kh(IQ,r),l=o.disabled||n,c=Wn(t,o.onTriggerChange),u=CN(r),d=y.useRef("touch"),[f,h,m]=rZ(p=>{const v=u().filter(w=>!w.disabled),x=v.find(w=>w.value===o.value),b=nZ(v,p,x);b!==void 0&&o.onValueChange(b.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(bN,{asChild:!0,...i,children:s.jsx(Qr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":tZ(o.value)?"":void 0,...a,ref:c,onClick:lr(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:lr(a.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:lr(a.onKeyDown,p=>{const v=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(v&&p.key===" ")&&D9e.includes(p.key)&&(g(),p.preventDefault())})})})});DQ.displayName=IQ;var MQ="SelectValue",RQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=kh(MQ,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=Wn(t,c.onValueNodeChange);return To(()=>{u(d)},[u,d]),s.jsx(Qr.span,{...l,ref:f,style:{pointerEvents:"none"},children:tZ(c.value)?s.jsx(s.Fragment,{children:o}):i})});RQ.displayName=MQ;var B9e="SelectIcon",LQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Qr.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});LQ.displayName=B9e;var z9e="SelectPortal",$Q=e=>s.jsx(Rv,{asChild:!0,...e});$Q.displayName=z9e;var Jm="SelectContent",FQ=y.forwardRef((e,t)=>{const r=kh(Jm,e.__scopeSelect),[n,a]=y.useState();if(To(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?xh.createPortal(s.jsx(BQ,{scope:e.__scopeSelect,children:s.jsx(NN.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(zQ,{...e,ref:t})});FQ.displayName=Jm;var bc=10,[BQ,Oh]=ty(Jm),q9e="SelectContentImpl",U9e=lh("SelectContent.RemoveScroll"),zQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v,...x}=e,b=kh(Jm,r),[w,_]=y.useState(null),[j,A]=y.useState(null),P=Wn(t,Z=>_(Z)),[C,k]=y.useState(null),[R,E]=y.useState(null),I=CN(r),[T,M]=y.useState(!1),z=y.useRef(!1);y.useEffect(()=>{if(w)return vj(w)},[w]),mj();const V=y.useCallback(Z=>{const[pe,...te]=I().map(he=>he.ref.current),[ve]=te.slice(-1),Ce=document.activeElement;for(const he of Z)if(he===Ce||(he?.scrollIntoView({block:"nearest"}),he===pe&&j&&(j.scrollTop=0),he===ve&&j&&(j.scrollTop=j.scrollHeight),he?.focus(),document.activeElement!==Ce))return},[I,j]),W=y.useCallback(()=>V([C,w]),[V,C,w]);y.useEffect(()=>{T&&W()},[T,W]);const{onOpenChange:$,triggerPointerDownPosRef:G}=b;y.useEffect(()=>{if(w){let Z={x:0,y:0};const pe=ve=>{Z={x:Math.abs(Math.round(ve.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(ve.pageY)-(G.current?.y??0))}},te=ve=>{Z.x<=10&&Z.y<=10?ve.preventDefault():w.contains(ve.target)||$(!1),document.removeEventListener("pointermove",pe),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",te,{capture:!0})}}},[w,$,G]),y.useEffect(()=>{const Z=()=>$(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[$]);const[me,de]=rZ(Z=>{const pe=I().filter(Ce=>!Ce.disabled),te=pe.find(Ce=>Ce.ref.current===document.activeElement),ve=nZ(pe,Z,te);ve&&setTimeout(()=>ve.ref.current.focus())}),L=y.useCallback((Z,pe,te)=>{const ve=!z.current&&!te;(b.value!==void 0&&b.value===pe||ve)&&(k(Z),ve&&(z.current=!0))},[b.value]),B=y.useCallback(()=>w?.focus(),[w]),J=y.useCallback((Z,pe,te)=>{const ve=!z.current&&!te;(b.value!==void 0&&b.value===pe||ve)&&E(Z)},[b.value]),q=n==="popper"?wO:qQ,X=q===wO?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return s.jsx(BQ,{scope:r,content:w,viewport:j,onViewportChange:A,itemRefCallback:L,selectedItem:C,onItemLeave:B,itemTextRefCallback:J,focusSelectedItem:W,selectedItemText:R,position:n,isPositioned:T,searchRef:me,children:s.jsx(gj,{as:U9e,allowPinchZoom:!0,children:s.jsx(Ob,{asChild:!0,trapped:b.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:lr(a,Z=>{b.trigger?.focus({preventScroll:!0}),Z.preventDefault()}),children:s.jsx(Mv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(q,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Z=>Z.preventDefault(),...x,...X,onPlaced:()=>M(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:lr(x.onKeyDown,Z=>{const pe=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!pe&&Z.key.length===1&&de(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ve=I().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Ce=Z.target,he=ve.indexOf(Ce);ve=ve.slice(he+1)}setTimeout(()=>V(ve)),Z.preventDefault()}})})})})})})});zQ.displayName=q9e;var W9e="SelectItemAlignedPosition",qQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=kh(Jm,r),o=Oh(Jm,r),[l,c]=y.useState(null),[u,d]=y.useState(null),f=Wn(t,P=>d(P)),h=CN(r),m=y.useRef(!1),g=y.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:x,focusSelectedItem:b}=o,w=y.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&v&&x){const P=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(i.dir!=="rtl"){const Ce=R.left-C.left,he=k.left-Ce,qe=P.left-he,ye=P.width+qe,ce=Math.max(ye,C.width),Ft=window.innerWidth-bc,qt=g7(he,[bc,Math.max(bc,Ft-ce)]);l.style.minWidth=ye+"px",l.style.left=qt+"px"}else{const Ce=C.right-R.right,he=window.innerWidth-k.right-Ce,qe=window.innerWidth-P.right-he,ye=P.width+qe,ce=Math.max(ye,C.width),Ft=window.innerWidth-bc,qt=g7(he,[bc,Math.max(bc,Ft-ce)]);l.style.minWidth=ye+"px",l.style.right=qt+"px"}const E=h(),I=window.innerHeight-bc*2,T=p.scrollHeight,M=window.getComputedStyle(u),z=parseInt(M.borderTopWidth,10),V=parseInt(M.paddingTop,10),W=parseInt(M.borderBottomWidth,10),$=parseInt(M.paddingBottom,10),G=z+V+T+$+W,me=Math.min(v.offsetHeight*5,G),de=window.getComputedStyle(p),L=parseInt(de.paddingTop,10),B=parseInt(de.paddingBottom,10),J=P.top+P.height/2-bc,q=I-J,X=v.offsetHeight/2,Z=v.offsetTop+X,pe=z+V+Z,te=G-pe;if(pe<=J){const Ce=E.length>0&&v===E[E.length-1].ref.current;l.style.bottom="0px";const he=u.clientHeight-p.offsetTop-p.offsetHeight,qe=Math.max(q,X+(Ce?B:0)+he+W),ye=pe+qe;l.style.height=ye+"px"}else{const Ce=E.length>0&&v===E[0].ref.current;l.style.top="0px";const qe=Math.max(J,z+p.offsetTop+(Ce?L:0)+X)+te;l.style.height=qe+"px",p.scrollTop=pe-J+p.offsetTop}l.style.margin=`${bc}px 0`,l.style.minHeight=me+"px",l.style.maxHeight=I+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,p,v,x,i.dir,n]);To(()=>w(),[w]);const[_,j]=y.useState();To(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const A=y.useCallback(P=>{P&&g.current===!0&&(w(),b?.(),g.current=!1)},[w,b]);return s.jsx(H9e,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(Qr.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});qQ.displayName=W9e;var V9e="SelectPopperPosition",wO=y.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=bc,...i}=e,o=AN(r);return s.jsx(b4,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wO.displayName=V9e;var[H9e,O4]=ty(Jm,{}),SO="SelectViewport",UQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Oh(SO,r),o=O4(SO,r),l=Wn(t,i.onViewportChange),c=y.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(NN.Slot,{scope:r,children:s.jsx(Qr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:lr(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h?.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-bc*2,p=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),x=Math.max(p,v);if(x<g){const b=x+m,w=Math.min(g,b),_=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});UQ.displayName=SO;var WQ="SelectGroup",[G9e,K9e]=ty(WQ),Y9e=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Mc();return s.jsx(G9e,{scope:r,id:a,children:s.jsx(Qr.div,{role:"group","aria-labelledby":a,...n,ref:t})})});Y9e.displayName=WQ;var VQ="SelectLabel",HQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=K9e(VQ,r);return s.jsx(Qr.div,{id:a.id,...n,ref:t})});HQ.displayName=VQ;var g_="SelectItem",[X9e,GQ]=ty(g_),KQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=kh(g_,r),c=Oh(g_,r),u=l.value===n,[d,f]=y.useState(i??""),[h,m]=y.useState(!1),g=Wn(t,b=>c.itemRefCallback?.(b,n,a)),p=Mc(),v=y.useRef("touch"),x=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(X9e,{scope:r,value:n,disabled:a,textId:p,isSelected:u,onItemTextChange:y.useCallback(b=>{f(w=>w||(b?.textContent??"").trim())},[]),children:s.jsx(NN.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Qr.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:lr(o.onFocus,()=>m(!0)),onBlur:lr(o.onBlur,()=>m(!1)),onClick:lr(o.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:lr(o.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:lr(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:lr(o.onPointerMove,b=>{v.current=b.pointerType,a?c.onItemLeave?.():v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lr(o.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:lr(o.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(M9e.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});KQ.displayName=g_;var rx="SelectItemText",YQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=kh(rx,r),l=Oh(rx,r),c=GQ(rx,r),u=F9e(rx,r),[d,f]=y.useState(null),h=Wn(t,x=>f(x),c.onItemTextChange,x=>l.itemTextRefCallback?.(x,c.value,c.disabled)),m=d?.textContent,g=y.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return To(()=>(p(g),()=>v(g)),[p,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(Qr.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?xh.createPortal(i.children,o.valueNode):null]})});YQ.displayName=rx;var XQ="SelectItemIndicator",JQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return GQ(XQ,r).isSelected?s.jsx(Qr.span,{"aria-hidden":!0,...n,ref:t}):null});JQ.displayName=XQ;var _O="SelectScrollUpButton",J9e=y.forwardRef((e,t)=>{const r=Oh(_O,e.__scopeSelect),n=O4(_O,e.__scopeSelect),[a,i]=y.useState(!1),o=Wn(t,n.onScrollButtonChange);return To(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(QQ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});J9e.displayName=_O;var jO="SelectScrollDownButton",Q9e=y.forwardRef((e,t)=>{const r=Oh(jO,e.__scopeSelect),n=O4(jO,e.__scopeSelect),[a,i]=y.useState(!1),o=Wn(t,n.onScrollButtonChange);return To(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(QQ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Q9e.displayName=jO;var QQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Oh("SelectScrollButton",r),o=y.useRef(null),l=CN(r),c=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),To(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(Qr.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:lr(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:lr(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:lr(a.onPointerLeave,()=>{c()})})}),Z9e="SelectSeparator",ZQ=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Qr.div,{"aria-hidden":!0,...n,ref:t})});ZQ.displayName=Z9e;var NO="SelectArrow",eUe=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=AN(r),i=kh(NO,r),o=Oh(NO,r);return i.open&&o.position==="popper"?s.jsx(w4,{...a,...n,ref:t}):null});eUe.displayName=NO;var tUe="SelectBubbleInput",eZ=y.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=y.useRef(null),i=Wn(n,a),o=kQ(t);return y.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Qr.select,{...r,style:{...OQ,...r.style},ref:i,defaultValue:t})});eZ.displayName=tUe;function tZ(e){return e===""||e===void 0}function rZ(e){const t=Ks(e),r=y.useRef(""),n=y.useRef(0),a=y.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function nZ(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=rUe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function rUe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var nUe=TQ,aZ=DQ,aUe=RQ,iUe=LQ,oUe=$Q,iZ=FQ,sUe=UQ,oZ=HQ,sZ=KQ,lUe=YQ,cUe=JQ,lZ=ZQ;const kn=nUe,On=aUe,An=se.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(aZ,{ref:n,className:Et("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,s.jsx(iUe,{asChild:!0,children:s.jsx(H2,{className:"h-4 w-4 opacity-50"})})]}));An.displayName=aZ.displayName;const Pn=se.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(oUe,{children:s.jsx(iZ,{ref:a,className:Et("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:s.jsx(sUe,{className:Et("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Pn.displayName=iZ.displayName;const uUe=se.forwardRef(({className:e,...t},r)=>s.jsx(oZ,{ref:r,className:Et("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));uUe.displayName=oZ.displayName;const Ht=se.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(sZ,{ref:n,className:Et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(cUe,{children:s.jsx(hI,{className:"h-4 w-4"})})}),s.jsx(lUe,{children:t})]}));Ht.displayName=sZ.displayName;const dUe=se.forwardRef(({className:e,...t},r)=>s.jsx(lZ,{ref:r,className:Et("-mx-1 my-1 h-px bg-muted",e),...t}));dUe.displayName=lZ.displayName;var PN="Checkbox",[fUe,Znt]=ac(PN),[hUe,T4]=fUe(PN);function mUe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Id({prop:r,defaultProp:a??!1,onChange:c,caller:PN}),[g,p]=y.useState(null),[v,x]=y.useState(null),b=y.useRef(!1),w=g?!!o||!!g.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Xf(a)?!1:a,isFormControl:w,bubbleInput:v,setBubbleInput:x};return s.jsx(hUe,{scope:t,..._,children:pUe(f)?f(_):n})}var cZ="CheckboxTrigger",uZ=y.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=T4(cZ,e),p=Wn(a,d),v=y.useRef(c);return y.useEffect(()=>{const x=i?.form;if(x){const b=()=>f(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[i,f]),s.jsx(Qr.button,{type:"button",role:"checkbox","aria-checked":Xf(c)?"mixed":c,"aria-required":u,"data-state":pZ(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:p,onKeyDown:lr(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:lr(r,x=>{f(b=>Xf(b)?!0:!b),g&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});uZ.displayName=cZ;var I4=y.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(mUe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(uZ,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(mZ,{__scopeCheckbox:r})]})})});I4.displayName=PN;var dZ="CheckboxIndicator",fZ=y.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=T4(dZ,r);return s.jsx(El,{present:n||Xf(i.checked)||i.checked===!0,children:s.jsx(Qr.span,{"data-state":pZ(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});fZ.displayName=dZ;var hZ="CheckboxBubbleInput",mZ=y.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=T4(hZ,e),g=Wn(r,m),p=kQ(i),v=IJ(n);y.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,A=!a.current;if(p!==i&&j){const P=new Event("click",{bubbles:A});b.indeterminate=Xf(i),j.call(b,Xf(i)?!1:i),b.dispatchEvent(P)}},[h,p,i,a]);const x=y.useRef(Xf(i)?!1:i);return s.jsx(Qr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mZ.displayName=hZ;function pUe(e){return typeof e=="function"}function Xf(e){return e==="indeterminate"}function pZ(e){return Xf(e)?"indeterminate":e?"checked":"unchecked"}const Sc=se.forwardRef(({className:e,...t},r)=>s.jsx(I4,{ref:r,className:Et("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(fZ,{className:Et("flex items-center justify-center text-current"),children:s.jsx(hI,{className:"h-4 w-4"})})}));Sc.displayName=I4.displayName;var uA="rovingFocusGroup.onEntryFocus",gUe={bubbles:!1,cancelable:!0},Kb="RovingFocusGroup",[CO,gZ,vUe]=_N(Kb),[yUe,EN]=ac(Kb,[vUe]),[xUe,bUe]=yUe(Kb),vZ=y.forwardRef((e,t)=>s.jsx(CO.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(CO.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(wUe,{...e,ref:t})})}));vZ.displayName=Kb;var wUe=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=y.useRef(null),m=Wn(t,h),g=jN(i),[p,v]=Id({prop:o,defaultProp:l??null,onChange:c,caller:Kb}),[x,b]=y.useState(!1),w=Ks(u),_=gZ(r),j=y.useRef(!1),[A,P]=y.useState(0);return y.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(uA,w),()=>C.removeEventListener(uA,w)},[w]),s.jsx(xUe,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:y.useCallback(C=>v(C),[v]),onItemShiftTab:y.useCallback(()=>b(!0),[]),onFocusableItemAdd:y.useCallback(()=>P(C=>C+1),[]),onFocusableItemRemove:y.useCallback(()=>P(C=>C-1),[]),children:s.jsx(Qr.div,{tabIndex:x||A===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:lr(e.onMouseDown,()=>{j.current=!0}),onFocus:lr(e.onFocus,C=>{const k=!j.current;if(C.target===C.currentTarget&&k&&!x){const R=new CustomEvent(uA,gUe);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const E=_().filter(V=>V.focusable),I=E.find(V=>V.active),T=E.find(V=>V.id===p),z=[I,T,...E].filter(Boolean).map(V=>V.ref.current);bZ(z,d)}}j.current=!1}),onBlur:lr(e.onBlur,()=>b(!1))})})}),yZ="RovingFocusGroupItem",xZ=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Mc(),u=i||c,d=bUe(yZ,r),f=d.currentTabStopId===u,h=gZ(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return y.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(CO.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Qr.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:lr(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:lr(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:lr(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=jUe(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(v.currentTarget);w=d.loop?NUe(w,_+1):w.slice(_+1)}setTimeout(()=>bZ(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});xZ.displayName=yZ;var SUe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _Ue(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function jUe(e,t,r){const n=_Ue(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return SUe[n]}function bZ(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function NUe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var wZ=vZ,SZ=xZ,AO=["Enter"," "],CUe=["ArrowDown","PageUp","Home"],_Z=["ArrowUp","PageDown","End"],AUe=[...CUe,..._Z],PUe={ltr:[...AO,"ArrowRight"],rtl:[...AO,"ArrowLeft"]},EUe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Yb="Menu",[Z0,kUe,OUe]=_N(Yb),[mp,jZ]=ac(Yb,[OUe,ey,EN]),kN=ey(),NZ=EN(),[TUe,pp]=mp(Yb),[IUe,Xb]=mp(Yb),CZ=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=kN(t),[c,u]=y.useState(null),d=y.useRef(!1),f=Ks(i),h=jN(a);return y.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(x4,{...l,children:s.jsx(TUe,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(IUe,{scope:t,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};CZ.displayName=Yb;var DUe="MenuAnchor",D4=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=kN(r);return s.jsx(bN,{...a,...n,ref:t})});D4.displayName=DUe;var M4="MenuPortal",[MUe,AZ]=mp(M4,{forceMount:void 0}),PZ=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=pp(M4,t);return s.jsx(MUe,{scope:t,forceMount:r,children:s.jsx(El,{present:r||i.open,children:s.jsx(Rv,{asChild:!0,container:a,children:n})})})};PZ.displayName=M4;var Ql="MenuContent",[RUe,R4]=mp(Ql),EZ=y.forwardRef((e,t)=>{const r=AZ(Ql,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=pp(Ql,e.__scopeMenu),o=Xb(Ql,e.__scopeMenu);return s.jsx(Z0.Provider,{scope:e.__scopeMenu,children:s.jsx(El,{present:n||i.open,children:s.jsx(Z0.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(LUe,{...a,ref:t}):s.jsx($Ue,{...a,ref:t})})})})}),LUe=y.forwardRef((e,t)=>{const r=pp(Ql,e.__scopeMenu),n=y.useRef(null),a=Wn(t,n);return y.useEffect(()=>{const i=n.current;if(i)return vj(i)},[]),s.jsx(L4,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:lr(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),$Ue=y.forwardRef((e,t)=>{const r=pp(Ql,e.__scopeMenu);return s.jsx(L4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),FUe=lh("MenuContent.ScrollLock"),L4=y.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,v=pp(Ql,r),x=Xb(Ql,r),b=kN(r),w=NZ(r),_=kUe(r),[j,A]=y.useState(null),P=y.useRef(null),C=Wn(t,P,v.onContentChange),k=y.useRef(0),R=y.useRef(""),E=y.useRef(0),I=y.useRef(null),T=y.useRef("right"),M=y.useRef(0),z=g?gj:y.Fragment,V=g?{as:FUe,allowPinchZoom:!0}:void 0,W=G=>{const me=R.current+G,de=_().filter(Z=>!Z.disabled),L=document.activeElement,B=de.find(Z=>Z.ref.current===L)?.textValue,J=de.map(Z=>Z.textValue),q=JUe(J,me,B),X=de.find(Z=>Z.textValue===q)?.ref.current;(function Z(pe){R.current=pe,window.clearTimeout(k.current),pe!==""&&(k.current=window.setTimeout(()=>Z(""),1e3))})(me),X&&setTimeout(()=>X.focus())};y.useEffect(()=>()=>window.clearTimeout(k.current),[]),mj();const $=y.useCallback(G=>T.current===I.current?.side&&ZUe(G,I.current?.area),[]);return s.jsx(RUe,{scope:r,searchRef:R,onItemEnter:y.useCallback(G=>{$(G)&&G.preventDefault()},[$]),onItemLeave:y.useCallback(G=>{$(G)||(P.current?.focus(),A(null))},[$]),onTriggerLeave:y.useCallback(G=>{$(G)&&G.preventDefault()},[$]),pointerGraceTimerRef:E,onPointerGraceIntentChange:y.useCallback(G=>{I.current=G},[]),children:s.jsx(z,{...V,children:s.jsx(Ob,{asChild:!0,trapped:a,onMountAutoFocus:lr(i,G=>{G.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Mv,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx(wZ,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:A,onEntryFocus:lr(c,G=>{x.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(b4,{role:"menu","aria-orientation":"vertical","data-state":VZ(v.open),"data-radix-menu-content":"",dir:x.dir,...b,...p,ref:C,style:{outline:"none",...p.style},onKeyDown:lr(p.onKeyDown,G=>{const de=G.target.closest("[data-radix-menu-content]")===G.currentTarget,L=G.ctrlKey||G.altKey||G.metaKey,B=G.key.length===1;de&&(G.key==="Tab"&&G.preventDefault(),!L&&B&&W(G.key));const J=P.current;if(G.target!==J||!AUe.includes(G.key))return;G.preventDefault();const X=_().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);_Z.includes(G.key)&&X.reverse(),YUe(X)}),onBlur:lr(e.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(k.current),R.current="")}),onPointerMove:lr(e.onPointerMove,eb(G=>{const me=G.target,de=M.current!==G.clientX;if(G.currentTarget.contains(me)&&de){const L=G.clientX>M.current?"right":"left";T.current=L,M.current=G.clientX}}))})})})})})})});EZ.displayName=Ql;var BUe="MenuGroup",$4=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Qr.div,{role:"group",...n,ref:t})});$4.displayName=BUe;var zUe="MenuLabel",kZ=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Qr.div,{...n,ref:t})});kZ.displayName=zUe;var v_="MenuItem",v7="menu.itemSelect",ON=y.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=y.useRef(null),o=Xb(v_,e.__scopeMenu),l=R4(v_,e.__scopeMenu),c=Wn(t,i),u=y.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(v7,{bubbles:!0,cancelable:!0});f.addEventListener(v7,m=>n?.(m),{once:!0}),$I(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(OZ,{...a,ref:c,disabled:r,onClick:lr(e.onClick,d),onPointerDown:f=>{e.onPointerDown?.(f),u.current=!0},onPointerUp:lr(e.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:lr(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||AO.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});ON.displayName=v_;var OZ=y.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=R4(v_,r),l=NZ(r),c=y.useRef(null),u=Wn(t,c),[d,f]=y.useState(!1),[h,m]=y.useState("");return y.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),s.jsx(Z0.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:s.jsx(SZ,{asChild:!0,...l,focusable:!n,children:s.jsx(Qr.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:lr(e.onPointerMove,eb(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:lr(e.onPointerLeave,eb(g=>o.onItemLeave(g))),onFocus:lr(e.onFocus,()=>f(!0)),onBlur:lr(e.onBlur,()=>f(!1))})})})}),qUe="MenuCheckboxItem",TZ=y.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(LZ,{scope:e.__scopeMenu,checked:r,children:s.jsx(ON,{role:"menuitemcheckbox","aria-checked":y_(r)?"mixed":r,...a,ref:t,"data-state":B4(r),onSelect:lr(a.onSelect,()=>n?.(y_(r)?!0:!r),{checkForDefaultPrevented:!1})})})});TZ.displayName=qUe;var IZ="MenuRadioGroup",[UUe,WUe]=mp(IZ,{value:void 0,onValueChange:()=>{}}),DZ=y.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Ks(n);return s.jsx(UUe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx($4,{...a,ref:t})})});DZ.displayName=IZ;var MZ="MenuRadioItem",RZ=y.forwardRef((e,t)=>{const{value:r,...n}=e,a=WUe(MZ,e.__scopeMenu),i=r===a.value;return s.jsx(LZ,{scope:e.__scopeMenu,checked:i,children:s.jsx(ON,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":B4(i),onSelect:lr(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});RZ.displayName=MZ;var F4="MenuItemIndicator",[LZ,VUe]=mp(F4,{checked:!1}),$Z=y.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=VUe(F4,r);return s.jsx(El,{present:n||y_(i.checked)||i.checked===!0,children:s.jsx(Qr.span,{...a,ref:t,"data-state":B4(i.checked)})})});$Z.displayName=F4;var HUe="MenuSeparator",FZ=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Qr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});FZ.displayName=HUe;var GUe="MenuArrow",BZ=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=kN(r);return s.jsx(w4,{...a,...n,ref:t})});BZ.displayName=GUe;var KUe="MenuSub",[eat,zZ]=mp(KUe),nx="MenuSubTrigger",qZ=y.forwardRef((e,t)=>{const r=pp(nx,e.__scopeMenu),n=Xb(nx,e.__scopeMenu),a=zZ(nx,e.__scopeMenu),i=R4(nx,e.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(D4,{asChild:!0,...u,children:s.jsx(OZ,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":VZ(r.open),...e,ref:hj(t,a.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:lr(e.onPointerMove,eb(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:lr(e.onPointerLeave,eb(f=>{d();const h=r.content?.getBoundingClientRect();if(h){const m=r.content?.dataset.side,g=m==="right",p=g?-5:5,v=h[g?"left":"right"],x=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+p,y:f.clientY},{x:v,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:v,y:h.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:lr(e.onKeyDown,f=>{const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||PUe[n.dir].includes(f.key)&&(r.onOpenChange(!0),r.content?.focus(),f.preventDefault())})})})});qZ.displayName=nx;var UZ="MenuSubContent",WZ=y.forwardRef((e,t)=>{const r=AZ(Ql,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=pp(Ql,e.__scopeMenu),o=Xb(Ql,e.__scopeMenu),l=zZ(UZ,e.__scopeMenu),c=y.useRef(null),u=Wn(t,c);return s.jsx(Z0.Provider,{scope:e.__scopeMenu,children:s.jsx(El,{present:n||i.open,children:s.jsx(Z0.Slot,{scope:e.__scopeMenu,children:s.jsx(L4,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{o.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:lr(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:lr(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:lr(e.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),h=EUe[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});WZ.displayName=UZ;function VZ(e){return e?"open":"closed"}function y_(e){return e==="indeterminate"}function B4(e){return y_(e)?"indeterminate":e?"checked":"unchecked"}function YUe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function XUe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function JUe(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=XUe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function QUe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function ZUe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return QUe(r,t)}function eb(e){return t=>t.pointerType==="mouse"?e(t):void 0}var eWe=CZ,tWe=D4,rWe=PZ,nWe=EZ,aWe=$4,iWe=kZ,oWe=ON,sWe=TZ,lWe=DZ,cWe=RZ,uWe=$Z,dWe=FZ,fWe=BZ,hWe=qZ,mWe=WZ,TN="DropdownMenu",[pWe,tat]=ac(TN,[jZ]),Ns=jZ(),[gWe,HZ]=pWe(TN),GZ=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Ns(t),u=y.useRef(null),[d,f]=Id({prop:a,defaultProp:i??!1,onChange:o,caller:TN});return s.jsx(gWe,{scope:t,triggerId:Mc(),triggerRef:u,contentId:Mc(),open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(eWe,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};GZ.displayName=TN;var KZ="DropdownMenuTrigger",YZ=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=HZ(KZ,r),o=Ns(r);return s.jsx(tWe,{asChild:!0,...o,children:s.jsx(Qr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:hj(t,i.triggerRef),onPointerDown:lr(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:lr(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});YZ.displayName=KZ;var vWe="DropdownMenuPortal",XZ=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ns(t);return s.jsx(rWe,{...n,...r})};XZ.displayName=vWe;var JZ="DropdownMenuContent",QZ=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=HZ(JZ,r),i=Ns(r),o=y.useRef(!1);return s.jsx(nWe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:lr(e.onCloseAutoFocus,l=>{o.current||a.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:lr(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QZ.displayName=JZ;var yWe="DropdownMenuGroup",xWe=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(aWe,{...a,...n,ref:t})});xWe.displayName=yWe;var bWe="DropdownMenuLabel",ZZ=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(iWe,{...a,...n,ref:t})});ZZ.displayName=bWe;var wWe="DropdownMenuItem",eee=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(oWe,{...a,...n,ref:t})});eee.displayName=wWe;var SWe="DropdownMenuCheckboxItem",tee=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(sWe,{...a,...n,ref:t})});tee.displayName=SWe;var _We="DropdownMenuRadioGroup",jWe=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(lWe,{...a,...n,ref:t})});jWe.displayName=_We;var NWe="DropdownMenuRadioItem",ree=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(cWe,{...a,...n,ref:t})});ree.displayName=NWe;var CWe="DropdownMenuItemIndicator",nee=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(uWe,{...a,...n,ref:t})});nee.displayName=CWe;var AWe="DropdownMenuSeparator",aee=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(dWe,{...a,...n,ref:t})});aee.displayName=AWe;var PWe="DropdownMenuArrow",EWe=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(fWe,{...a,...n,ref:t})});EWe.displayName=PWe;var kWe="DropdownMenuSubTrigger",iee=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(hWe,{...a,...n,ref:t})});iee.displayName=kWe;var OWe="DropdownMenuSubContent",oee=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ns(r);return s.jsx(mWe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oee.displayName=OWe;var TWe=GZ,IWe=YZ,DWe=XZ,see=QZ,lee=ZZ,cee=eee,uee=tee,dee=ree,fee=nee,hee=aee,mee=iee,pee=oee;const Ex=TWe,kx=IWe,MWe=se.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(mee,{ref:a,className:Et("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(aj,{className:"ml-auto h-4 w-4"})]}));MWe.displayName=mee.displayName;const RWe=se.forwardRef(({className:e,...t},r)=>s.jsx(pee,{ref:r,className:Et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));RWe.displayName=pee.displayName;const Eg=se.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(DWe,{children:s.jsx(see,{ref:n,sideOffset:t,className:Et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Eg.displayName=see.displayName;const zl=se.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(cee,{ref:n,className:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));zl.displayName=cee.displayName;const LWe=se.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(uee,{ref:a,className:Et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(fee,{children:s.jsx(hI,{className:"h-4 w-4"})})}),t]}));LWe.displayName=uee.displayName;const $We=se.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(dee,{ref:n,className:Et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(fee,{children:s.jsx(tce,{className:"h-2 w-2 fill-current"})})}),t]}));$We.displayName=dee.displayName;const gee=se.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(lee,{ref:n,className:Et("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));gee.displayName=lee.displayName;const PO=se.forwardRef(({className:e,...t},r)=>s.jsx(hee,{ref:r,className:Et("-mx-1 my-1 h-px bg-muted",e),...t}));PO.displayName=hee.displayName;function bn(){try{const e=localStorage.getItem("auth:userProfile");if(e){const r=JSON.parse(e);if(r?.codigo_empresa)return r.codigo_empresa}const t=localStorage.getItem("auth:company");if(t){const r=JSON.parse(t);if(r?.codigo_empresa)return r.codigo_empresa;if(r?.codigo)return r.codigo}return typeof window<"u"&&window.__authProfile&&window.__authProfile.codigo_empresa?window.__authProfile.codigo_empresa:null}catch{return null}}async function kg({somenteAtivas:e=!0,codigoEmpresa:t}={}){const r=t||bn();let n=Pe.from("finalizadoras").select("*").order("nome",{ascending:!0});r&&(n=n.eq("codigo_empresa",r)),e&&(n=n.eq("ativo",!0));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function FWe(e,t){const r=t||bn(),n={codigo_interno:e?.codigo_interno||null,codigo_sefaz:e?.codigo_sefaz||null,nome:(e?.nome||"").trim(),tipo:e?.tipo||"outros",ativo:e?.ativo??!0,taxa_percentual:e?.taxa_percentual==null?null:Number(e.taxa_percentual)};if(!n.nome)throw new Error("Nome  obrigatrio");r&&(n.codigo_empresa=r);const{data:a,error:i}=await Pe.from("finalizadoras").insert(n).select("*").single();if(i)throw i;return a}async function x_({caixaSessaoId:e,codigoEmpresa:t}={}){if(!e)throw new Error("caixaSessaoId  obrigatrio");const r=t||bn();let n=Pe.from("caixa_sessoes").select("id, aberto_em, fechado_em, saldo_inicial, saldo_final").eq("id",e).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o=Array.isArray(a)?a[0]:a;if(!o)throw new Error("Sesso no encontrada");const l=o.aberto_em,c=o.fechado_em||new Date().toISOString(),u=await Yl({from:l,to:c,codigoEmpresa:r});let d=0,f=0,h=0,m=0;try{let p=Pe.from("caixa_movimentacoes").select("tipo, valor").eq("caixa_sessao_id",e);r&&(p=p.eq("codigo_empresa",r));const{data:v}=await p;for(const x of v||[]){const b=Number(x?.valor||0),w=String(x?.tipo||"").toLowerCase();w==="suprimento"?d+=b:w==="sangria"?f+=b:w==="ajuste"?h+=b:w==="troco"&&(m+=b)}}catch{}const g=d+h-f-m;return{...u,saldoInicial:Number(o.saldo_inicial||0),saldoFinal:o.saldo_final!=null?Number(o.saldo_final):null,movimentos:{suprimentos:d,sangrias:f,ajustes:h,troco:m,totalMovimentos:g}}}async function BWe(e,t,r){if(!e)throw new Error("ID invlido");const n=r||bn(),a={codigo_interno:t?.codigo_interno||null,codigo_sefaz:t?.codigo_sefaz||null,nome:(t?.nome||"").trim(),tipo:t?.tipo||"outros",ativo:t?.ativo??!0,taxa_percentual:t?.taxa_percentual==null?null:Number(t.taxa_percentual)};if(!a.nome)throw new Error("Nome  obrigatrio");let i=Pe.from("finalizadoras").update(a).eq("id",e);n&&(i=i.eq("codigo_empresa",n));const{data:o,error:l}=await i.select("*").single();if(l)throw l;return o}async function zWe(e,t,r){if(!e)throw new Error("ID invlido");const n=r||bn();let a=Pe.from("finalizadoras").update({ativo:!!t}).eq("id",e);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:o}=await a.select("*").single();if(o)throw o;return i}async function z4({codigoEmpresa:e}={}){const t=e||bn();let r=Pe.from("caixa_sessoes").select("id").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;if(!(Array.isArray(n)&&n.length>0)){const o=new Error(" necessrio abrir o caixa antes de criar comandas.");throw o.code="NO_OPEN_CASH_SESSION",o}return!0}async function y7(e=[],t){if(!Array.isArray(e)||e.length===0)return{};const r=t||bn(),n=async o=>{let l=Pe.from("comanda_clientes").select(`comanda_id, cliente_id, nome_livre, clientes:clientes${o}(id, nome)`).in("comanda_id",e);return r&&(l=l.eq("codigo_empresa",r)),l};let a=[];try{const{data:o,error:l}=await n("!comanda_clientes_cliente_id_fkey");if(l)throw l;a=o||[]}catch{try{const{data:o,error:l}=await n("!fk_comanda_clientes_cliente");if(l)throw l;a=o||[]}catch{let o=Pe.from("comanda_clientes").select("comanda_id, cliente_id, nome_livre").in("comanda_id",e);r&&(o=o.eq("codigo_empresa",r));const{data:l}=await o;a=l||[]}}const i={};for(const o of a){const l=o.comanda_id,c=o.clientes?.nome||o.nome_livre||"";i[l]||(i[l]=[]),c&&i[l].push(c)}for(const o of Object.keys(i))i[o]=Array.from(new Set(i[o])).join(", ");return i}async function x7(e=[],t){if(!Array.isArray(e)||e.length===0)return{};const r=t||bn();let n=Pe.from("pagamentos").select("comanda_id, metodo, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").in("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o={};for(const c of a||[]){if(!((c.status||"Pago")!=="Cancelado"&&(c.status||"Pago")!=="Estornado"))continue;const d=c.comanda_id,f=c?.finalizadoras?.nome||c.metodo||"Outros";o[d]||(o[d]=[]),o[d].push(f)}const l={};for(const[c,u]of Object.entries(o))u.length===0?l[c]="":u.length===1?l[c]=u[0]:l[c]=`${u[0]} +${u.length-1}`;return l}async function qWe({comandaId:e,codigoEmpresa:t}={}){if(!e)throw new Error("comandaId  obrigatrio");const r=t||bn();let n=Pe.from("comanda_itens").select("produto_id, quantidade").eq("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o=new Map;for(const m of a||[]){const g=m.produto_id,p=Number(m.quantidade||0);o.set(g,(o.get(g)||0)+p)}if(o.size===0)return!0;const l=Array.from(o.keys());let c=Pe.from("produtos").select("id, nome, estoque");c=c.in("id",l),r&&(c=c.eq("codigo_empresa",r));const{data:u,error:d}=await c;if(d)throw d;const f=new Map((u||[]).map(m=>[m.id,{nome:m.nome,estoque:Number(m.estoque||0)}])),h=[];for(const[m,g]of o.entries()){const p=f.get(m)||{nome:`Produto ${m}`,estoque:0};g>p.estoque&&h.push({id:m,name:p.nome,solicitado:g,estoque:p.estoque})}if(h.length>0){const m=h.map(p=>`${p.name}: solicitado ${p.solicitado}, estoque ${p.estoque}`).join("; "),g=new Error(`Estoque insuficiente para finalizar: ${m}`);throw g.code="INSUFFICIENT_STOCK_COMANDA",g.items=h,g}return!0}async function vee({codigoEmpresa:e}={}){const t=e||bn();let r=Pe.from("comandas").select("id,status,aberto_em").is("mesa_id",null).in("status",["open","awaiting-payment"]).order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n?.[0]||null}async function b7({codigoEmpresa:e}={}){const t=e||bn();console.log("[getOrCreateComandaBalcao] Iniciando com codigo_empresa:",t),await z4({codigoEmpresa:t});const r=await vee({codigoEmpresa:t});if(r)return console.log("[getOrCreateComandaBalcao] Comanda existente encontrada:",r),r;const n={status:"open",mesa_id:null,aberto_em:new Date().toISOString()};console.log("[getOrCreateComandaBalcao] Criando nova comanda (codigo_empresa via DEFAULT):",n);const{data:a,error:i}=await Pe.from("comandas").insert(n).select("id,status,aberto_em,tipo,codigo_empresa").single();if(i)throw console.error("[getOrCreateComandaBalcao] ERRO ao criar comanda:",i),i;return console.log("[getOrCreateComandaBalcao] Comanda criada com sucesso:",a),console.log("[getOrCreateComandaBalcao] Codigo da comanda criada:",a?.codigo_empresa,"vs esperado:",t),await new Promise(o=>setTimeout(o,100)),a}async function w7({status:e,from:t,to:r,search:n="",limit:a=50,offset:i=0,codigoEmpresa:o}={}){const l=o||bn();let c=Pe.from("comandas").select("id, mesa_id, status, aberto_em, fechado_em").order("fechado_em",{ascending:!1,nullsFirst:!1}).order("aberto_em",{ascending:!1}).range(i,i+a-1);l&&(c=c.eq("codigo_empresa",l)),e&&Array.isArray(e)&&e.length?c=c.in("status",e):typeof e=="string"&&(e==="closed"?c=c.or("status.eq.closed,fechado_em.not.is.null"):c=c.eq("status",e));const u=v=>{if(!v)return null;if(typeof v=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(v)){const[x,b,w]=v.split("-").map(Number);return new Date(x,b-1,w,0,0,0,0)}return new Date(v)},d=v=>{if(!v)return null;if(typeof v=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(v)){const[x,b,w]=v.split("-").map(Number);return new Date(x,b-1,w,23,59,59,999)}return new Date(v)},f=u(t),h=d(r);f&&(c=c.gte("aberto_em",f.toISOString())),h&&(c=c.lte("aberto_em",h.toISOString()));const m=(n||"").trim();if(m){const v=/^\d+$/.test(m),x=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(m);v||x?c=c.or(`id.eq.${m},status.ilike.%${m}%`):c=c.or(`status.ilike.%${m}%`)}const{data:g,error:p}=await c;if(p)throw p;return g||[]}async function Yl({from:e,to:t,codigoEmpresa:r}={}){const n="[listarResumoPeriodo]",a=r||bn();console.log(`${n} Iniciando consulta`),console.log(`${n} Perodo: ${e||"SEM from"} at ${t||"SEM to"}`),console.log(`${n} codigo_empresa: ${a}`);let i=[];try{let h=Pe.from("comandas").select("id, fechado_em").eq("status","closed");a&&(h=h.eq("codigo_empresa",a)),e&&(h=h.gte("fechado_em",new Date(e).toISOString())),t&&(h=h.lte("fechado_em",new Date(t).toISOString()));const{data:m,error:g}=await h;if(g)throw g;i=m||[]}catch{i=[]}const o=(i||[]).map(h=>h.id);let l=0,c=0;if(o.length>0)try{let h=Pe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",o);a&&(h=h.eq("codigo_empresa",a));const{data:m,error:g}=await h;if(g)throw g;for(const p of m||[]){const v=Number(p.quantidade||0)*Number(p.preco_unitario||0),x=Number(p.desconto||0);l+=v,c+=x}}catch{}const u=Math.max(0,l-c),d={};let f=0;try{let h=Pe.from("pagamentos").select("metodo, valor, recebido_em, status");a&&(h=h.eq("codigo_empresa",a)),e&&(h=h.gte("recebido_em",new Date(e).toISOString())),t&&(h=h.lte("recebido_em",new Date(t).toISOString())),console.log(`${n} Consultando pagamentos...`);const{data:m,error:g}=await h;if(g)throw console.error(`${n}  Erro ao buscar pagamentos:`,g),g;console.log(`${n} Total de pagamentos encontrados: ${(m||[]).length}`);for(const p of m||[]){if(!((p.status||"Pago")!=="Cancelado"&&(p.status||"Pago")!=="Estornado"))continue;const x=p.metodo||"outros",b=Number(p.valor||0);d[x]=(d[x]||0)+b,f+=b}console.log(`${n}  Resumo por finalizadora:`,d),console.log(`${n} Total de entradas: R$ ${f.toFixed(2)}`)}catch(h){console.error(`${n}  Exception ao processar pagamentos:`,h)}return{from:e?new Date(e).toISOString():null,to:t?new Date(t).toISOString():null,totalPorFinalizadora:d,totalEntradas:f,totalVendasBrutas:l,totalDescontos:c,totalVendasLiquidas:u}}async function tb({codigoEmpresa:e}={}){const t=e||bn();let r=null;try{let a=Pe.from("caixa_sessoes").select("aberto_em").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(a=a.eq("codigo_empresa",t));const{data:i,error:o}=await a;if(o)throw o;r=i?.[0]?.aberto_em||null}catch{}if(!r)return null;const n=new Date().toISOString();return Yl({from:r,to:n,codigoEmpresa:t})}async function UWe({comandaId:e,codigoEmpresa:t}={}){const r=t||bn();let n=Pe.from("pagamentos").select("*, finalizadoras!pagamentos_finalizadora_id_fkey(id, nome, codigo_sefaz, codigo_interno)").order("recebido_em",{ascending:!0});e&&(n=n.eq("comanda_id",e)),r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function u2({searchTerm:e="",limit:t=20,codigoEmpresa:r}={}){const n=r||bn();let a=Pe.from("clientes").select("*").eq("status","active").order("nome",{ascending:!0}).limit(t);n&&(a=a.eq("codigo_empresa",n));const i=(e||"").trim();i&&(/^\d+$/.test(i)?a=a.or(`codigo.eq.${i},nome.ilike.%${i}%,email.ilike.%${i}%,telefone.ilike.%${i}%`):a=a.or(`nome.ilike.%${i}%,email.ilike.%${i}%,telefone.ilike.%${i}%`));const{data:o,error:l}=await a;if(l)throw l;return o||[]}async function au({codigoEmpresa:e}={}){const t="[listarComandasAbertas]",r=e||bn();console.log(`${t} Iniciando - codigo_empresa:`,r);try{const n=new Promise((u,d)=>setTimeout(()=>d(new Error("listarComandasAbertas timeout aps 5s")),5e3));let a=Pe.from("comandas").select("id, mesa_id, status, aberto_em, fechado_em").is("fechado_em",null).order("aberto_em",{ascending:!1});r&&(a=a.eq("codigo_empresa",r)),console.log(`${t} Query montada, executando...`);const i=a,{data:o,error:l}=await Promise.race([i,n]);if(l)throw console.error(`${t}  ERRO:`,l),l;console.log(`${t} Consulta retornou ${(o||[]).length} comandas (fechado_em=null)`);const c=(o||[]).filter(u=>u.status==="open"||u.status==="awaiting-payment");return console.log(`${t}  Aps filtro: ${c.length} comandas abertas`),c}catch(n){throw console.error(`${t}  EXCEPTION:`,n?.message||n),n}}async function EO(e=[],t){if(!e||e.length===0)return{};const r=t||bn();let n=Pe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario").in("comanda_id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o={};for(const l of a||[]){const c=l.comanda_id,u=Number(l.quantidade||0)*Number(l.preco_unitario||0);o[c]=(o[c]||0)+u}return o}async function pg(e){const t="[listMesas]",r=e||bn();console.log(`${t} Iniciando - codigo_empresa:`,r);try{const n=new Promise((c,u)=>setTimeout(()=>u(new Error("listMesas timeout aps 5s")),5e3));let a=Pe.from("mesas").select("*").order("numero",{ascending:!0});r&&(a=a.eq("codigo_empresa",r)),console.log(`${t} Query montada, executando...`);const i=a,{data:o,error:l}=await Promise.race([i,n]);if(l)throw console.error(`${t}  ERRO:`,l),l;return console.log(`${t}  Sucesso - ${(o||[]).length} mesas carregadas`),o||[]}catch(n){throw console.error(`${t}  EXCEPTION:`,n?.message||n),n}}async function WWe({numero:e,nome:t,codigoEmpresa:r}={}){const n=r||bn();let a=e;if(!a){let o=Pe.from("mesas").select("numero").order("numero",{ascending:!1}).limit(1);n&&(o=o.eq("codigo_empresa",n));const{data:l,error:c}=await o;if(c)throw c;a=(l?.[0]?.numero||0)+1}const i={numero:a,status:"available"};t&&typeof t=="string"&&t.trim()&&(i.nome=t.trim()),n&&(i.codigo_empresa=n);try{const{data:o,error:l}=await Pe.from("mesas").insert(i).select("*").single();if(l)throw l;return o}catch(o){const l=String(o?.message||o||"");if(/column\s+\"?nome\"?\s+of\s+relation/i.test(l)||/column\s+\"?nome\"?\s+does not exist/i.test(l)){const c={numero:a,status:"available"};n&&(c.codigo_empresa=n);const{data:u,error:d}=await Pe.from("mesas").insert(c).select("*").single();if(d)throw d;return u}throw o}}async function nd({saldoInicial:e=0,codigoEmpresa:t}={}){const r=t||bn();let n=Pe.from("caixa_sessoes").select("id,status,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;if(a&&a.length>0){const u=a[0];try{const d=new Date(u.aberto_em),f=new Date;if(d.toDateString()!==f.toDateString()){const m=f.toISOString();let g=0,p=0;try{const b=await Yl({from:u.aberto_em,to:m,codigoEmpresa:r});g=Number(b?.totalEntradas||0)}catch{}try{let b=Pe.from("caixa_movimentacoes").select("tipo,valor").eq("caixa_sessao_id",u.id);r&&(b=b.eq("codigo_empresa",r));const{data:w}=await b;for(const _ of w||[]){const j=Number(_?.valor||0),A=String(_?.tipo||"").toLowerCase();A==="suprimento"||A==="ajuste"?p+=j:(A==="sangria"||A==="troco")&&(p-=j)}}catch{}const v=Number(u?.saldo_inicial||0)+g+p;let x=Pe.from("caixa_sessoes").update({status:"closed",saldo_final:v,fechado_em:m}).eq("id",u.id).eq("status","open");r&&(x=x.eq("codigo_empresa",r)),await x;try{const b=await x_({caixaSessaoId:u.id,codigoEmpresa:r}).catch(async()=>await Yl({from:u.aberto_em,to:m,codigoEmpresa:r})),w={codigo_empresa:r||bn(),caixa_sessao_id:u.id,periodo_de:b?.from||u.aberto_em,periodo_ate:b?.to||m,total_bruto:Number(b?.totalVendasBrutas||0),total_descontos:Number(b?.totalDescontos||0),total_liquido:Number(b?.totalVendasLiquidas||0),total_entradas:Number(b?.totalEntradas||0),por_finalizadora:b?.totalPorFinalizadora||{}},_=w.por_finalizadora;await Pe.from("caixa_resumos").insert({...w,por_finalizadora:_&&typeof _!="string"?JSON.stringify(_):_})}catch{}}else{try{if(u?.saldo_inicial==null&&e!=null){let m=Pe.from("caixa_sessoes").update({saldo_inicial:Number(e)||0}).eq("id",u.id);return r&&(m=m.eq("codigo_empresa",r)),await m,{...u,saldo_inicial:Number(e)||0}}}catch{}return u}}catch{}return u}const o={status:"open",saldo_inicial:e};r&&(o.codigo_empresa=r);const{data:l,error:c}=await Pe.from("caixa_sessoes").insert(o).select("id,status,aberto_em").single();if(c)throw c;return l}async function If({codigoEmpresa:e}={}){const t=e||bn();let r=Pe.from("caixa_sessoes").select("id,status,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);t&&(r=r.eq("codigo_empresa",t));const{data:n,error:a}=await r;if(a)throw a;return n?.[0]||null}async function yee({from:e,to:t,limit:r=50,offset:n=0,codigoEmpresa:a}={}){const i=a||bn();let o=Pe.from("caixa_sessoes").select("id, status, aberto_em, fechado_em, saldo_inicial, saldo_final").order("aberto_em",{ascending:!1}).range(n,n+r-1);i&&(o=o.eq("codigo_empresa",i));const l=m=>{if(!m)return null;if(typeof m=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(m)){const[g,p,v]=m.split("-").map(Number);return new Date(g,p-1,v,0,0,0,0)}return new Date(m)},c=m=>{if(!m)return null;if(typeof m=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(m)){const[g,p,v]=m.split("-").map(Number);return new Date(g,p-1,v,23,59,59,999)}return new Date(m)},u=l(e),d=c(t);u&&(o=o.gte("aberto_em",u.toISOString())),d&&(o=o.lte("aberto_em",d.toISOString()));const{data:f,error:h}=await o;if(h)throw h;return f||[]}async function xee({saldoFinal:e=null,codigoEmpresa:t}={}){const r=t||bn();try{let v=await au({codigoEmpresa:r});v=v||[];const x=v.filter(w=>!w.mesa_id);for(const w of x)try{(await Ai({comandaId:w.id,codigoEmpresa:r})||[]).length===0&&await w_({comandaId:w.id,codigoEmpresa:r})}catch{}let b=0;for(;b<5&&(v=await au({codigoEmpresa:r}),!(!v||v.length===0));)await new Promise(w=>setTimeout(w,180)),b++;if(v&&v.length>0)throw new Error(`Existem ${v.length} comandas abertas. Feche todas antes de encerrar o caixa.`)}catch(v){if(v&&/Existem \d+ comandas/.test(v.message||""))throw v;const x=new Error("Falha ao validar comandas abertas. Tente novamente e verifique sua conexo.");throw x.code="CASH_CLOSE_VALIDATION_FAILED",x}let n=Pe.from("caixa_sessoes").select("id,aberto_em,saldo_inicial").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;const o=a?.[0]?.id||null,l=a?.[0]?.aberto_em||null,c=Number(a?.[0]?.saldo_inicial||0);if(!o)throw new Error("Nenhuma sesso de caixa aberta encontrada.");const u=new Date().toISOString();let d=0,f=0;try{const v=await Yl({from:l,to:u,codigoEmpresa:r});d=Number(v?.totalEntradas||0)}catch{}try{let v=Pe.from("caixa_movimentacoes").select("tipo, valor").eq("caixa_sessao_id",o);r&&(v=v.eq("codigo_empresa",r));const{data:x}=await v;for(const b of x||[]){const w=Number(b?.valor||0),_=String(b?.tipo||"").toLowerCase();_==="suprimento"||_==="ajuste"?f+=w:(_==="sangria"||_==="troco")&&(f-=w)}}catch{}const h=e!=null?Number(e):c+d+f;try{const v=await au({codigoEmpresa:r});if(v&&v.length>0)throw new Error("Existem comandas abertas. Feche todas antes de encerrar o caixa.")}catch(v){if(!(v&&v.message)){const x=new Error("Falha ao validar comandas abertas no momento do fechamento. Tente novamente.");throw x.code="CASH_CLOSE_FINAL_CHECK_FAILED",x}throw v}let m=Pe.from("caixa_sessoes").update({status:"closed",saldo_final:h,fechado_em:u}).eq("id",o).eq("status","open");r&&(m=m.eq("codigo_empresa",r));const{data:g,error:p}=await m.select("id,status,fechado_em,saldo_final").single();if(p){const v=String(p.message||"");if(v.toLowerCase().includes("row")||v.toLowerCase().includes("single")){let x=Pe.from("caixa_sessoes").select("id,status,fechado_em,saldo_final").eq("id",o).limit(1);r&&(x=x.eq("codigo_empresa",r));const{data:b}=await x;if(b&&b[0])return b[0]}throw p}try{if(l&&u&&g?.status==="closed"){let v;try{v=await x_({caixaSessaoId:o,codigoEmpresa:r})}catch{v=await Yl({from:l,to:u,codigoEmpresa:r})}const x={codigo_empresa:r||bn(),caixa_sessao_id:o,periodo_de:v?.from||l,periodo_ate:v?.to||u,total_bruto:Number(v?.totalVendasBrutas||0),total_descontos:Number(v?.totalDescontos||0),total_liquido:Number(v?.totalVendasLiquidas||0),total_entradas:Number(v?.totalEntradas||0),por_finalizadora:v?.totalPorFinalizadora||{}},w=await(async _=>{const j=_.por_finalizadora,A={..._,por_finalizadora:j&&typeof j!="string"?JSON.stringify(j):j};return await Pe.from("caixa_resumos").insert(A)})(x);if(w.error)throw w.error}}catch(v){console.warn("[fecharCaixa] Falha ao gravar snapshot de fechamento:",v)}try{let v=Pe.from("caixa_sessoes").select("id,aberto_em,saldo_inicial").eq("status","open");r&&(v=v.eq("codigo_empresa",r));const{data:x}=await v;if(Array.isArray(x)&&x.length>0)for(const b of x)try{const w=b?.aberto_em,_=Number(b?.saldo_inicial||0),j=new Date().toISOString();let A=0,P=0;try{const k=await Yl({from:w,to:j,codigoEmpresa:r});A=Number(k?.totalEntradas||0)}catch{}try{let k=Pe.from("caixa_movimentacoes").select("tipo,valor").eq("caixa_sessao_id",b.id);r&&(k=k.eq("codigo_empresa",r));const{data:R}=await k;for(const E of R||[]){const I=Number(E?.valor||0),T=String(E?.tipo||"").toLowerCase();T==="suprimento"||T==="ajuste"?P+=I:(T==="sangria"||T==="troco")&&(P-=I)}}catch{}const C=_+A+P;await Pe.from("caixa_sessoes").update({status:"closed",saldo_final:C,fechado_em:j}).eq("id",b.id).eq("status","open").eq(r?"codigo_empresa":"id",r||b.id);try{const k=await x_({caixaSessaoId:b.id,codigoEmpresa:r}).catch(async()=>await Yl({from:w,to:j,codigoEmpresa:r})),R={codigo_empresa:r||bn(),caixa_sessao_id:b.id,periodo_de:k?.from||w,periodo_ate:k?.to||j,total_bruto:Number(k?.totalVendasBrutas||0),total_descontos:Number(k?.totalDescontos||0),total_liquido:Number(k?.totalVendasLiquidas||0),total_entradas:Number(k?.totalEntradas||0),por_finalizadora:k?.totalPorFinalizadora||{}},E=R.por_finalizadora;await Pe.from("caixa_resumos").insert({...R,por_finalizadora:E&&typeof E!="string"?JSON.stringify(E):E})}catch{}}catch(w){try{console.warn("[fecharCaixa] Saneamento: falhou ao fechar sesso remanescente",b?.id,w?.message||w)}catch{}}}catch{}return g}async function b_({caixaSessaoId:e,codigoEmpresa:t}={}){if(!e)throw new Error("caixaSessaoId  obrigatrio");const r=t||bn();let n=null;try{let a=Pe.from("caixa_resumos").select("caixa_sessao_id, periodo_de, periodo_ate, total_bruto, total_descontos, total_liquido, total_entradas, por_finalizadora").eq("caixa_sessao_id",e).order("criado_em",{ascending:!1}).limit(1);r&&(a=a.eq("codigo_empresa",r));const{data:i}=await a;n=i?.[0]||null}catch(a){try{console.warn("[getCaixaResumo] Snapshot select falhou, usando fallback dinmico:",a?.message||a)}catch{}}if(!n||typeof n.saldo_inicial>"u"||typeof n.saldo_final>"u"){const a=await x_({caixaSessaoId:e,codigoEmpresa:r});let i=null;try{let o=Pe.from("caixa_sessoes").select("saldo_inicial, saldo_final").eq("id",e).limit(1);r&&(o=o.eq("codigo_empresa",r));const{data:l}=await o;i=l?.[0]||null}catch{}n={codigo_empresa:r,caixa_sessao_id:e,periodo_de:a?.from||null,periodo_ate:a?.to||null,total_bruto:Number(a?.totalVendasBrutas||0),total_descontos:Number(a?.totalDescontos||0),total_liquido:Number(a?.totalVendasLiquidas||0),total_entradas:Number(a?.totalEntradas||0),por_finalizadora:a?.totalPorFinalizadora||{},saldo_inicial:Number(i?.saldo_inicial??a?.saldoInicial??0),saldo_final:i?.saldo_final!=null?Number(i.saldo_final):null,movimentos:a?.movimentos||{suprimentos:0,sangrias:0,ajustes:0,troco:0,totalMovimentos:0}}}else if(typeof n.por_finalizadora=="string")try{n.por_finalizadora=JSON.parse(n.por_finalizadora)}catch{n.por_finalizadora={}}return n}async function bee({tipo:e,valor:t,observacao:r="",caixaSessaoId:n,codigoEmpresa:a}={}){const i=a||bn();if(!e||!["sangria","suprimento","troco","ajuste"].includes(e))throw new Error("Tipo invlido de movimentao");let o=n;if(!o){let d=Pe.from("caixa_sessoes").select("id").eq("status","open").order("aberto_em",{ascending:!1}).limit(1);i&&(d=d.eq("codigo_empresa",i));const{data:f,error:h}=await d;if(h)throw h;o=f?.[0]?.id||null}if(!o)throw new Error("Sesso de caixa no encontrada para registrar movimentao");const l={codigo_empresa:i,caixa_sessao_id:o,tipo:e,valor:Math.max(0,Number(t)||0),observacao:(r||"").trim()||null},{data:c,error:u}=await Pe.from("caixa_movimentacoes").insert(l).select("*").single();if(u)throw u;return c}async function Am({caixaSessaoId:e,codigoEmpresa:t}={}){const r=t||bn();if(!e)throw new Error("caixaSessaoId  obrigatrio");let n=Pe.from("caixa_movimentacoes").select("*").eq("caixa_sessao_id",e).order("criado_em",{ascending:!0});r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function VWe({mesaId:e,codigoEmpresa:t}={}){const r=t||bn();await z4({codigoEmpresa:r}),console.log(`[abrirComandaParaMesa] Iniciando para mesaId: ${e}, codigo_empresa: ${r}`);try{const n={status:"open",aberto_em:new Date().toISOString()};e&&(n.mesa_id=e),console.log("[abrirComandaParaMesa] Payload (codigo_empresa via DEFAULT):",n);const{data:a,error:i}=await Pe.from("comandas").insert(n).select("*").single();if(i)throw console.error("[abrirComandaParaMesa] ERRO ao criar comanda:",i),i;return console.log("[abrirComandaParaMesa]  Comanda criada:",a),await new Promise(o=>setTimeout(o,100)),a}catch(n){throw console.error("[abrirComandaParaMesa] ERRO:",n),n}}async function HWe({mesaId:e,codigoEmpresa:t}){const r=t||bn();let n=Pe.from("comandas").select("id,status,aberto_em,fechado_em").eq("mesa_id",e).is("fechado_em",null).in("status",["open","awaiting-payment"]).order("aberto_em",{ascending:!1}).limit(1);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a?.[0]||null}async function Ai({comandaId:e,codigoEmpresa:t}){const r=t||bn();let n=Pe.from("comanda_itens").select("*").eq("comanda_id",e).order("created_at",{ascending:!0});r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n;if(i)throw i;return a||[]}async function GWe({mesaId:e,codigoEmpresa:t}={}){const r=t||bn();await z4({codigoEmpresa:r}),console.log(`[getOrCreateComandaForMesa] SEMPRE criando nova comanda para mesa ${e}`);const n=await HWe({mesaId:e,codigoEmpresa:r});if(n){console.log(`[getOrCreateComandaForMesa] Fechando comanda existente ${n.id} para criar nova`);try{await Pe.from("comandas").update({status:"closed",fechado_em:new Date().toISOString()}).eq("id",n.id).eq("codigo_empresa",r),await Pe.from("comanda_clientes").delete().eq("comanda_id",n.id).eq("codigo_empresa",r)}catch(a){console.error("Erro ao fechar comanda antiga:",a)}}return console.log(`[getOrCreateComandaForMesa] Criando nova comanda zerada para mesa ${e}`),VWe({mesaId:e,codigoEmpresa:r})}async function Ox({comandaId:e,clienteIds:t=[],nomesLivres:r=[],codigoEmpresa:n}={}){const a=n||bn();if(!e)throw new Error("comandaId  obrigatrio");console.log(`[adicionarClientesAComanda] Adicionando clientes  comanda ${e}:`,{clienteIds:t,nomesLivres:r,codigo:a});const{data:i}=await Pe.from("comanda_clientes").select("cliente_id").eq("comanda_id",e),o=new Set((i||[]).map(d=>d.cliente_id).filter(Boolean)),l=[];for(const d of t||[])o.has(d)?console.log(`[adicionarClientesAComanda] Cliente ${d} j vinculado, pulando`):l.push({comanda_id:e,cliente_id:d});for(const d of r||[]){const f=(d||"").trim();f&&l.push({comanda_id:e,nome_livre:f})}if(l.length===0)return console.log("[adicionarClientesAComanda] Nenhum cliente novo para adicionar"),!0;const c=l.map(d=>a?{...d,codigo_empresa:a}:d);console.log("[adicionarClientesAComanda] Payload para insero:",c);const{error:u}=await Pe.from("comanda_clientes").insert(c);if(u)throw console.error("[adicionarClientesAComanda] ERRO ao inserir clientes:",u),u;return console.log("[adicionarClientesAComanda] Clientes adicionados com sucesso"),!0}async function Vo({comandaId:e,codigoEmpresa:t}={}){if(t||bn(),!e)throw new Error("comandaId  obrigatrio");try{const{data:r,error:n}=await Pe.from("comanda_clientes").select("id, cliente_id, nome_livre, clientes:clientes!comanda_clientes_cliente_id_fkey(id, nome, email, telefone)").eq("comanda_id",e).order("created_at",{ascending:!0});if(n)throw n;return(r||[]).map(a=>({id:a.id,tipo:a.cliente_id?"cadastrado":"comum",nome:a.clientes?.nome||a.nome_livre,cliente_id:a.cliente_id}))}catch{try{const{data:n,error:a}=await Pe.from("comanda_clientes").select("id, cliente_id, nome_livre, clientes:clientes!fk_comanda_clientes_cliente(id, nome, email, telefone)").eq("comanda_id",e).order("created_at",{ascending:!0});if(a)throw a;return(n||[]).map(i=>({id:i.id,tipo:i.cliente_id?"cadastrado":"comum",nome:i.clientes?.nome||i.nome_livre,cliente_id:i.cliente_id}))}catch{const{data:a,error:i}=await Pe.from("comanda_clientes").select("id, cliente_id, nome_livre").eq("comanda_id",e).order("created_at",{ascending:!0});if(i)throw i;return(a||[]).map(o=>({id:o.id,tipo:o.cliente_id?"cadastrado":"comum",nome:o.nome_livre||"",cliente_id:o.cliente_id}))}}}async function kO({comandaId:e,produtoId:t,descricao:r,quantidade:n,precoUnitario:a,desconto:i=0,codigoEmpresa:o}){const l=o||bn();console.log(`[adicionarItem] Adicionando item  comanda ${e}:`,{produtoId:t,descricao:r,quantidade:n,precoUnitario:a,codigo:l});try{let f=Pe.from("produtos").select("id, estoque, estoque_minimo, nome").eq("id",t).limit(1);l&&(f=f.eq("codigo_empresa",l));const{data:h,error:m}=await f;if(m)throw m;const g=Array.isArray(h)?h[0]:h;if(g){const p=Number(g.estoque??0),v=Number(g.estoque_minimo??0),x=Number(n??1);if(p<=0){const P=new Error(`Produto sem estoque: ${g.nome||""}`.trim());throw P.code="OUT_OF_STOCK",P}let b=Pe.from("comanda_itens").select("quantidade").eq("comanda_id",e).eq("produto_id",t);l&&(b=b.eq("codigo_empresa",l));const{data:w,error:_}=await b;if(_)throw _;const j=Array.isArray(w)&&w.length?w.reduce((P,C)=>P+Number(C?.quantidade||0),0):0;if(j+x>p){const P=new Error(`Estoque insuficiente. Em comanda: ${j}, solicitado: +${x}, disponvel: ${p}`);throw P.code="INSUFFICIENT_STOCK",P}if(p<=v&&p>0)try{console.warn(`[adicionarItem] Aviso: estoque baixo para produto '${g.nome}' (estoque=${p}, minimo=${v})`)}catch{}}}catch(f){throw f}const c={comanda_id:e,produto_id:t,descricao:r,quantidade:n,preco_unitario:a,desconto:i};l&&(c.codigo_empresa=l);const{data:u,error:d}=await Pe.from("comanda_itens").insert(c).select("*").single();if(d)throw d;return u}async function od({itemId:e,quantidade:t,codigoEmpresa:r}){const n=r||bn();let a=Pe.from("comanda_itens").select("id, quantidade, produto_id, comanda_id").eq("id",e).limit(1);n&&(a=a.eq("codigo_empresa",n));const{data:i,error:o}=await a;if(o)throw o;const l=Array.isArray(i)?i[0]:i,c=Number(t||0);if(!l)throw new Error("Item no encontrado");const u=Number(l.quantidade||0);if(c-u>0){let g=Pe.from("produtos").select("id, estoque, nome, estoque_minimo").eq("id",l.produto_id).limit(1);n&&(g=g.eq("codigo_empresa",n));const{data:p,error:v}=await g;if(v)throw v;const x=Array.isArray(p)?p[0]:p;if(x){const b=Number(x.estoque??0);let w=Pe.from("comanda_itens").select("quantidade").eq("comanda_id",l.comanda_id).eq("produto_id",l.produto_id).neq("id",l.id);n&&(w=w.eq("codigo_empresa",n));const{data:_,error:j}=await w;if(j)throw j;const A=Array.isArray(_)&&_.length?_.reduce((R,E)=>R+Number(E?.quantidade||0),0):0;if(A+c>b){const R=new Error(`Estoque insuficiente. Em comanda (outros itens): ${A}, novo para este item: ${c}, disponvel: ${b}`);throw R.code="INSUFFICIENT_STOCK",R}const C=Number(x.estoque_minimo??0),k=b-(A+c);if(k<=C&&k>=0)try{console.warn(`[atualizarQuantidadeItem] Aviso: produto '${x.nome}' atingiu nvel de estoque baixo (restante=${k}, minimo=${C})`)}catch{}}}let f=Pe.from("comanda_itens").update({quantidade:c}).eq("id",e);n&&(f=f.eq("codigo_empresa",n));const{data:h,error:m}=await f.select("*").single();if(m)throw m;return h}async function Og({itemId:e,codigoEmpresa:t}){const r=t||bn();let n=Pe.from("comanda_itens").delete().eq("id",e);r&&(n=n.eq("codigo_empresa",r));const{data:a,error:i}=await n.select("id").single();if(i)throw i;return!!a}function KWe(e){if(!e)return!1;const t=e.code?String(e.code):"",r=[e.message,e.details,e.hint].filter(Boolean).join(" ").toLowerCase();return t==="22P02"||r.includes("invalid input value for enum")}async function OO({comandaId:e,finalizadoraId:t,metodo:r,valor:n,status:a="Pago",codigoEmpresa:i,clienteId:o=null}){const l=i||bn();if(!l)throw new Error("Empresa no identificada (codigo_empresa ausente).");const c=a&&["Pendente","Pago","Estornado","Cancelado"].includes(a)?a:"Pago",u=["dinheiro","credito","debito","pix","voucher","outros"],f=(m=>{if(!m)return"outros";const g=String(m).toLowerCase().trim(),v={"cartao credito":"credito","carto credito":"credito","cartao debito":"debito","carto debito":"debito","carto de credito":"credito","carto de dbito":"debito","cartao de credito":"credito","cartao de debito":"debito"}[g]||g;return u.includes(v)?v:"outros"})(r),h={comanda_id:e,finalizadora_id:t||null,metodo:f,valor:Math.max(0,Number(n)||0),status:c,recebido_em:new Date().toISOString(),codigo_empresa:l};console.log("[registrarPagamento] Iniciando registro de pagamento:",{comandaId:e,finalizadoraId:t,metodo:f,valor:h.valor,status:h.status,codigoEmpresa:l,payload:h});try{const{data:m,error:g}=await Pe.from("pagamentos").insert(h).select().single();if(g){console.warn("[registrarPagamento] Primeira tentativa falhou:",{code:g.code,message:g.message});const p=`${g?.message||""} ${g?.details||""}`.toLowerCase();if(g?.code==="42703"||p.includes("column")&&p.includes("cliente_id")){const{cliente_id:x,...b}=h;try{localStorage.setItem("schema:pagamentos:cliente_id","no")}catch{}const{data:w,error:_}=await Pe.from("pagamentos").insert(b).select().single();if(_)throw _;return console.log("[registrarPagamento] Pagamento registrado sem cliente_id:",w),w}if(KWe(g)){console.log("[registrarPagamento] Tentando abordagem alternativa sem status...");try{const x={...h};delete x.status;const{data:b,error:w}=await Pe.from("pagamentos").insert(x).select().single();if(w)throw w;return console.log("[registrarPagamento] Pagamento registrado com sucesso (abordagem alternativa):",b),b}catch(x){throw console.error("[registrarPagamento] Falha na abordagem alternativa:",x),new Error(`Falha ao processar pagamento: ${x.message}`)}}throw g}return console.log("[registrarPagamento] Pagamento registrado com sucesso:",m),m}catch(m){throw console.error("[registrarPagamento] Erro ao registrar pagamento:",{error:{message:m.message,code:m.code,details:m.details,hint:m.hint},comandaId:e,finalizadoraId:t,valor:h.valor,status:h.status,codigoEmpresa:l}),m}}async function w_({comandaId:e,codigoEmpresa:t}){const r=t||bn(),n="[fecharComandaEMesa]";try{console.group(n)}catch{}try{console.time?.(n)}catch{}try{console.log(`${n} Iniciando fechamento da comanda ${e}`),console.log(`${n} Obtendo dados da comanda...`);const{data:a,error:i}=await Pe.from("comandas").select("id, mesa_id, status, fechado_em").eq("id",e).single();if(i||!a)throw console.error(`${n} Erro ao buscar comanda:`,i?.message||"Comanda no encontrada"),i||new Error("Comanda no encontrada");if(a.fechado_em)return console.log(`${n} Comanda ${e} j est fechada em ${a.fechado_em}`),!0;const o=new Date().toISOString();console.log(`${n} Atualizando comanda...`),console.log(`${n} Fechando comanda com status closed + fechado_em...`);const{error:l}=await Pe.from("comandas").update({status:"closed",fechado_em:o}).eq("id",e).eq("codigo_empresa",r);if(l)throw console.error(`${n} Erro ao fechar comanda:`,l),l;if(console.log(`${n} Comanda ${e} fechada com sucesso`),a.mesa_id){console.log(`${n} Atualizando status da mesa ${a.mesa_id} para disponvel...`);try{const{error:c}=await Pe.from("mesas").update({status:"available"}).eq("id",a.mesa_id).select("id").single();c?console.error(`${n} Erro ao atualizar status da mesa:`,c):console.log(`${n} Mesa ${a.mesa_id} marcada como disponvel`)}catch(c){console.error(`${n} Exceo ao atualizar mesa:`,c)}}else console.log(`${n} Nenhuma mesa associada para liberar`);return console.log(`${n} Fechamento da comanda ${e} concludo com sucesso`),!0}catch(a){throw console.error(`${n} Erro fatal ao fechar comanda:`,a),a}finally{try{console.timeEnd?.(n)}catch{}try{console.groupEnd()}catch{}}}async function S7({comandaId:e,codigoEmpresa:t}){const r=t||bn(),n="[cancelarComandaEMesa]";try{console.group(n)}catch{}try{console.time?.(n)}catch{}try{if(!e)throw new Error("comandaId obrigatrio");if(!r)throw new Error("codigo_empresa obrigatrio");console.log(`${n} Cancelando comanda ${e}`);const{data:a}=await Pe.from("comandas").select("id, mesa_id").eq("id",e).single();try{await Pe.from("comanda_itens").delete().eq("comanda_id",e).eq("codigo_empresa",r)}catch{}try{await Pe.from("comanda_clientes").delete().eq("comanda_id",e).eq("codigo_empresa",r)}catch{}const{error:i}=await Pe.from("comandas").update({status:"cancelled",fechado_em:null}).eq("id",e).eq("codigo_empresa",r);if(i)throw i;if(a?.mesa_id){console.log(`${n} Liberando mesa ${a.mesa_id}`);try{await Pe.from("mesas").update({status:"available"}).eq("id",a.mesa_id)}catch(o){console.error(`${n} Erro ao liberar mesa:`,o)}}return console.log(`${n} Comanda ${e} cancelada com sucesso`),!0}catch(a){throw console.error(`${n} Falha:`,a),a}finally{try{console.timeEnd?.(n)}catch{}try{console.groupEnd?.(n)}catch{}}}var IN="Tabs",[YWe,rat]=ac(IN,[EN]),wee=EN(),[XWe,q4]=YWe(IN),See=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=jN(l),[f,h]=Id({prop:n,onChange:a,defaultProp:i??"",caller:IN});return s.jsx(XWe,{scope:r,baseId:Mc(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Qr.div,{dir:d,"data-orientation":o,...u,ref:t})})});See.displayName=IN;var _ee="TabsList",jee=y.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=q4(_ee,r),o=wee(r);return s.jsx(wZ,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Qr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});jee.displayName=_ee;var Nee="TabsTrigger",Cee=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=q4(Nee,r),l=wee(r),c=Eee(o.baseId,n),u=kee(o.baseId,n),d=n===o.value;return s.jsx(SZ,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Qr.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:lr(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:lr(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:lr(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});Cee.displayName=Nee;var Aee="TabsContent",Pee=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=q4(Aee,r),c=Eee(l.baseId,n),u=kee(l.baseId,n),d=n===l.value,f=y.useRef(d);return y.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(El,{present:a||d,children:({present:h})=>s.jsx(Qr.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});Pee.displayName=Aee;function Eee(e,t){return`${e}-trigger-${t}`}function kee(e,t){return`${e}-content-${t}`}var JWe=See,Oee=jee,Tee=Cee,Iee=Pee;const Ad=JWe,ju=se.forwardRef(({className:e,...t},r)=>s.jsx(Oee,{ref:r,className:Et("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ju.displayName=Oee.displayName;const ua=se.forwardRef(({className:e,...t},r)=>s.jsx(Tee,{ref:r,className:Et("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ua.displayName=Tee.displayName;const to=se.forwardRef(({className:e,...t},r)=>s.jsx(Iee,{ref:r,className:Et("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));to.displayName=Iee.displayName;function Dee({open:e,onOpenChange:t,client:r,onSaved:n}){const{toast:a}=ii(),{userProfile:i}=io(),o=C=>({tipo_pessoa:C?.tipo_pessoa||"PF",tipo_cadastro:C?.tipo_cadastro||"cliente",nome:C?.nome||"",apelido:C?.apelido||"",cpf:C?.cpf||"",cnpj:C?.cnpj||"",rg:C?.rg||"",ie:C?.ie||"",email:C?.email||"",telefone:C?.telefone||"",fone2:C?.fone2||"",celular1:C?.celular1||"",celular2:C?.celular2||"",whatsapp:C?.whatsapp||"",cep:C?.cep||"",endereco:C?.endereco||"",numero:C?.numero||"",complemento:C?.complemento||"",bairro:C?.bairro||"",cidade:C?.cidade||"",uf:C?.uf||"",cidade_ibge:C?.cidade_ibge||"",limite_credito:C?.limite_credito??"",tipo_recebimento:C?.tipo_recebimento||"",regime_tributario:C?.regime_tributario||"",tipo_contribuinte:C?.tipo_contribuinte||"",aniversario:C?.aniversario?String(C.aniversario).slice(0,10):"",sexo:C?.sexo||"",estado_civil:C?.estado_civil||"",nome_mae:C?.nome_mae||"",nome_pai:C?.nome_pai||"",observacoes:C?.observacoes||"",status:C?.status||"active"}),[l,c]=y.useState(o(r)),[u,d]=y.useState("basicos");y.useEffect(()=>{let C="cliente";r?.flag_cliente&&r?.flag_fornecedor?C="ambos":r?.flag_fornecedor&&(C="fornecedor"),c({tipo_pessoa:r?.tipo_pessoa||"PF",tipo_cadastro:C,nome:r?.nome||"",apelido:r?.apelido||"",cpf:r?.cpf||"",cnpj:r?.cnpj||"",rg:r?.rg||"",ie:r?.ie||"",email:r?.email||"",telefone:r?.telefone||"",fone2:r?.fone2||"",celular1:r?.celular1||"",celular2:r?.celular2||"",whatsapp:r?.whatsapp||"",cep:r?.cep||"",endereco:r?.endereco||"",numero:r?.numero||"",complemento:r?.complemento||"",bairro:r?.bairro||"",cidade:r?.cidade||"",uf:r?.uf||"",cidade_ibge:r?.cidade_ibge||"",limite_credito:r?.limite_credito??"",tipo_recebimento:r?.tipo_recebimento||"",regime_tributario:r?.regime_tributario||"",tipo_contribuinte:r?.tipo_contribuinte||"",aniversario:r?.aniversario?String(r.aniversario).slice(0,10):"",sexo:r?.sexo||"",estado_civil:r?.estado_civil||"",nome_mae:r?.nome_mae||"",nome_pai:r?.nome_pai||"",observacoes:r?.observacoes||"",status:r?.status||"active"})},[r]),y.useEffect(()=>{e?c(o(r||null)):r||c(o(null))},[e,!!r]);const f=C=>{const{id:k,value:R}=C.target;c(E=>({...E,[k]:R}))},h=C=>C===""?null:C,m=C=>{if(C==null)return null;if(typeof C=="number")return C;const k=String(C).trim();if(!k)return null;const R=k.replace(/\s+/g,"").replace(/\.(?=\d{3}(?:\D|$))/g,"").replace(/,/g,"."),E=Number(R);return Number.isFinite(E)?E:null},g=y.useMemo(()=>({digits:C=>(C||"").replace(/\D+/g,"")}),[]),p=C=>g.digits(C).slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),v=C=>g.digits(C).slice(0,14).replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2"),x=C=>g.digits(C).slice(0,8).replace(/(\d{5})(\d)/,"$1-$2"),b=C=>{const k=g.digits(C).slice(0,11);return k.length<=10?k.replace(/(\d{2})(\d{4})(\d{0,4})/,"($1) $2-$3").trim():k.replace(/(\d{2})(\d{5})(\d{0,4})/,"($1) $2-$3").trim()},w=C=>String(C||"").replace(/[^a-z]/gi,"").toUpperCase().slice(0,2),_=(C,k=6)=>g.digits(C).slice(0,k),j=(C,k)=>{let R=k;C==="cpf"&&(R=p(k)),C==="cnpj"&&(R=v(k)),C==="cep"&&(R=x(k)),["telefone","fone2","celular1","celular2","whatsapp"].includes(C)&&(R=b(k)),C==="uf"&&(R=w(k)),C==="numero"&&(R=_(k,8)),C==="cidade_ibge"&&(R=_(k,7)),c(E=>({...E,[C]:R}))},A=async()=>{const C=g.digits(l.cep);if(!C||C.length!==8){a({title:"CEP invlido",description:"Informe 8 dgitos.",variant:"destructive"});return}try{const R=await(await fetch(`https://viacep.com.br/ws/${C}/json/`)).json();if(R.erro)throw new Error("CEP no encontrado");c(E=>({...E,endereco:R.logradouro||E.endereco,bairro:R.bairro||E.bairro,cidade:R.localidade||E.cidade,uf:R.uf||E.uf,cidade_ibge:R.ibge||E.cidade_ibge}))}catch(k){a({title:"Falha ao buscar CEP",description:k.message||"Tente novamente.",variant:"destructive"})}},P=async C=>{C?.preventDefault?.();try{if(!l.nome||l.nome.trim().length<2)throw new Error("Informe o nome/razo social do cliente.");const k={tipo_pessoa:h(l.tipo_pessoa),nome:l.nome,apelido:h(l.apelido),cpf:h(l.cpf),cnpj:h(l.cnpj),rg:h(l.rg),ie:h(l.ie),email:h(l.email),telefone:h(l.telefone),fone2:h(l.fone2),celular1:h(l.celular1),celular2:h(l.celular2),whatsapp:h(l.whatsapp),cep:h(l.cep),endereco:h(l.endereco),numero:h(l.numero),complemento:h(l.complemento),bairro:h(l.bairro),cidade:h(l.cidade),uf:h(l.uf),cidade_ibge:h(l.cidade_ibge),limite_credito:m(l.limite_credito),tipo_recebimento:h(l.tipo_recebimento),regime_tributario:h(l.regime_tributario),tipo_contribuinte:h(l.tipo_contribuinte),aniversario:h(l.aniversario),sexo:h(l.sexo),estado_civil:h(l.estado_civil),nome_mae:h(l.nome_mae),nome_pai:h(l.nome_pai),observacoes:h(l.observacoes),flag_cliente:l.tipo_cadastro==="cliente"||l.tipo_cadastro==="ambos",flag_fornecedor:l.tipo_cadastro==="fornecedor"||l.tipo_cadastro==="ambos",flag_funcionario:!1,flag_administradora:!1,flag_parceiro:!1,flag_ccf_spc:!1,status:l.status};let R,E=null;if(r?.id){const{data:I,error:T}=await Pe.from("clientes").update(k).eq("id",r.id).select().single();R=T,E=I??null}else{const I=i?.codigo_empresa||null;if(!I)throw new Error("No foi possvel identificar a empresa do usurio (codigo_empresa). Tente recarregar a pgina ou entrar novamente.");const T={...k,codigo_empresa:I},{data:M,error:z}=await Pe.from("clientes").insert(T).select().single();R=z,E=M??null}if(R)throw R;a({title:"Cliente salvo!",description:"As informaes do cliente foram atualizadas.",variant:"success"}),n?.(E),setTimeout(()=>{t?.(!1)},50)}catch(k){const R=(k?.message||"").toLowerCase(),E=R.includes("column")&&R.includes("does not exist")?"Seu banco pode no estar migrado para os novos campos. Atualize o schema conforme estrutura_bd.":k.message;a({title:"Erro ao salvar cliente",description:E,variant:"destructive"})}};return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto w-full",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:r?"Editar Cliente":"Novo Cliente"}),s.jsx(cn,{children:"Preencha os dados cadastrais do cliente."})]}),s.jsx("form",{onSubmit:P,className:"grid gap-4 sm:gap-6 py-2",children:s.jsxs(Ad,{value:u,onValueChange:d,className:"w-full",children:[s.jsx("div",{className:"sm:hidden mb-4",children:s.jsxs(kn,{value:u,onValueChange:d,children:[s.jsx(An,{className:"w-full",children:s.jsx(On,{})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"basicos",children:"Dados Bsicos"}),s.jsx(Ht,{value:"endereco",children:"Endereo"}),s.jsx(Ht,{value:"financeiro",children:"Financeiro"}),s.jsx(Ht,{value:"adicionais",children:"Adicionais"})]})]})}),s.jsxs(ju,{className:"hidden sm:grid grid-cols-4 gap-2",children:[s.jsx(ua,{value:"basicos",children:"Dados Bsicos"}),s.jsx(ua,{value:"endereco",children:"Endereo"}),s.jsx(ua,{value:"financeiro",children:"Financeiro"}),s.jsx(ua,{value:"adicionais",children:"Adicionais"})]}),s.jsx(to,{value:"basicos",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{children:"Tipo de Pessoa"}),s.jsxs(kn,{value:l.tipo_pessoa,onValueChange:C=>c(k=>({...k,tipo_pessoa:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Pessoa"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"PF",children:"Fsica"}),s.jsx(Ht,{value:"PJ",children:"Jurdica"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{children:"Tipo de Cadastro *"}),s.jsxs(kn,{value:l.tipo_cadastro,onValueChange:C=>c(k=>({...k,tipo_cadastro:C})),required:!0,children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"cliente",children:"Cliente"}),s.jsx(Ht,{value:"fornecedor",children:"Fornecedor"}),s.jsx(Ht,{value:"ambos",children:"Cliente e Fornecedor"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(ct,{htmlFor:"nome",children:l.tipo_pessoa==="PJ"?"Razo Social":"Nome"}),s.jsx(Mt,{id:"nome",value:l.nome,onChange:f,required:!0})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(ct,{htmlFor:"apelido",children:l.tipo_pessoa==="PJ"?"Nome Fantasia":"Apelido"}),s.jsx(Mt,{id:"apelido",value:l.apelido,onChange:f})]}),l.tipo_pessoa==="PF"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"cpf",children:"CPF"}),s.jsx(Mt,{id:"cpf",value:l.cpf,onChange:C=>j("cpf",C.target.value),placeholder:"000.000.000-00"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"rg",children:"RG"}),s.jsx(Mt,{id:"rg",value:l.rg,onChange:f})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"cnpj",children:"CNPJ"}),s.jsx(Mt,{id:"cnpj",value:l.cnpj,onChange:C=>j("cnpj",C.target.value),placeholder:"00.000.000/0000-00"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"ie",children:"Inscrio Estadual (IE)"}),s.jsx(Mt,{id:"ie",value:l.ie,onChange:f})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(ct,{htmlFor:"email",children:"Email"}),s.jsx(Mt,{id:"email",type:"email",value:l.email,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"telefone",children:"Telefone"}),s.jsx(Mt,{id:"telefone",value:l.telefone,onChange:C=>j("telefone",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"celular1",children:"Celular"}),s.jsx(Mt,{id:"celular1",value:l.celular1,onChange:C=>j("celular1",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"whatsapp",children:"WhatsApp"}),s.jsx(Mt,{id:"whatsapp",value:l.whatsapp,onChange:C=>j("whatsapp",C.target.value),placeholder:"(DDD) 9...."})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"fone2",children:"Fone 2"}),s.jsx(Mt,{id:"fone2",value:l.fone2,onChange:C=>j("fone2",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"celular2",children:"Celular 2"}),s.jsx(Mt,{id:"celular2",value:l.celular2,onChange:C=>j("celular2",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"aniversario",children:"Nascimento"}),s.jsx(Mt,{id:"aniversario",type:"date",value:l.aniversario||"",onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{children:"Status"}),s.jsxs(kn,{value:l.status,onValueChange:C=>c(k=>({...k,status:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Status"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"active",children:"Ativo"}),s.jsx(Ht,{value:"inactive",children:"Inativo"})]})]})]})]})}),s.jsx(to,{value:"endereco",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"cep",children:"CEP"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Mt,{id:"cep",value:l.cep,onChange:C=>j("cep",C.target.value),placeholder:"00000-000"}),s.jsx(Ae,{type:"button",variant:"outline",onClick:A,children:"Buscar"})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-6",children:[s.jsx(ct,{htmlFor:"endereco",children:"Endereo"}),s.jsx(Mt,{id:"endereco",value:l.endereco,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"numero",children:"Nmero"}),s.jsx(Mt,{id:"numero",value:l.numero,onChange:C=>j("numero",C.target.value)})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(ct,{htmlFor:"complemento",children:"Complemento"}),s.jsx(Mt,{id:"complemento",value:l.complemento,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(ct,{htmlFor:"bairro",children:"Bairro"}),s.jsx(Mt,{id:"bairro",value:l.bairro,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"cidade",children:"Cidade"}),s.jsx(Mt,{id:"cidade",value:l.cidade,onChange:f})]}),s.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[s.jsx(ct,{htmlFor:"uf",children:"UF"}),s.jsx(Mt,{id:"uf",value:l.uf,onChange:C=>j("uf",C.target.value),placeholder:"UF"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"cidade_ibge",children:"Cd. IBGE"}),s.jsx(Mt,{id:"cidade_ibge",value:l.cidade_ibge,onChange:C=>j("cidade_ibge",C.target.value)})]})]})}),s.jsx(to,{value:"financeiro",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{htmlFor:"limite_credito",children:"Limite de Crdito"}),s.jsx(Mt,{id:"limite_credito",value:l.limite_credito,onChange:f,placeholder:"0,00"})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{children:"Tipo de Recebimento"}),s.jsxs(kn,{value:l.tipo_recebimento||"",onValueChange:C=>c(k=>({...k,tipo_recebimento:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"avista",children:" vista"}),s.jsx(Ht,{value:"aprazo",children:"A prazo"}),s.jsx(Ht,{value:"misto",children:"Misto"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{children:"Regime Tributrio"}),s.jsxs(kn,{value:l.regime_tributario||"",onValueChange:C=>c(k=>({...k,regime_tributario:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"simples",children:"Simples"}),s.jsx(Ht,{value:"lucro_presumido",children:"Lucro Presumido"}),s.jsx(Ht,{value:"lucro_real",children:"Lucro Real"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-3",children:[s.jsx(ct,{children:"Tipo de Contribuinte"}),s.jsxs(kn,{value:l.tipo_contribuinte||"",onValueChange:C=>c(k=>({...k,tipo_contribuinte:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"nao_contribuinte",children:"No Contribuinte"}),s.jsx(Ht,{value:"contribuinte",children:"Contribuinte"}),s.jsx(Ht,{value:"isento",children:"Isento"})]})]})]})]})}),s.jsx(to,{value:"adicionais",className:"space-y-3 sm:space-y-4 mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(ct,{htmlFor:"sexo",children:"Sexo"}),s.jsxs(kn,{value:l.sexo||"",onValueChange:C=>c(k=>({...k,sexo:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"m",children:"Masculino"}),s.jsx(Ht,{value:"f",children:"Feminino"}),s.jsx(Ht,{value:"o",children:"Outro"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(ct,{htmlFor:"estado_civil",children:"Estado Civil"}),s.jsxs(kn,{value:l.estado_civil||"",onValueChange:C=>c(k=>({...k,estado_civil:C})),children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"solteiro",children:"Solteiro(a)"}),s.jsx(Ht,{value:"casado",children:"Casado(a)"}),s.jsx(Ht,{value:"divorciado",children:"Divorciado(a)"}),s.jsx(Ht,{value:"viuvo",children:"Vivo(a)"})]})]})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(ct,{htmlFor:"nome_mae",children:"Nome da Me"}),s.jsx(Mt,{id:"nome_mae",value:l.nome_mae,onChange:f})]}),s.jsxs("div",{className:"col-span-12 sm:col-span-4",children:[s.jsx(ct,{htmlFor:"nome_pai",children:"Nome do Pai"}),s.jsx(Mt,{id:"nome_pai",value:l.nome_pai,onChange:f})]}),s.jsxs("div",{className:"col-span-12",children:[s.jsx(ct,{htmlFor:"observacoes",children:"Observaes"}),s.jsx("textarea",{id:"observacoes",value:l.observacoes,onChange:f,rows:4,className:"w-full rounded-md border border-border bg-background p-2 text-sm"})]})]})})]})}),s.jsxs(Dn,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Cancelar"})}),s.jsx(Ae,{type:"submit",onClick:P,className:"w-full sm:w-auto",children:"Salvar Cliente"})]})]})})}const In=30,vc=e=>{const t=String(e??"").replace(/\D/g,"");if(!t)return"";const r=(Number(t)/100).toFixed(2),[n,a]=r.split(".");return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${a}`},Gi=e=>{if(e==null||e==="")return NaN;const t=String(e).replace(/\./g,"").replace(",","."),r=parseFloat(t);return Number.isFinite(r)?r:NaN};function _7(e){const t=String(e||"").trim().split(/\s+/).filter(Boolean);return t.length===0?"":t.length===1?t[0]:`${t[0]} ${t[1]}`}const is=56,QWe=6,TO=6,Mee=24;Array.from({length:(Mee-TO)*(60/In)},(e,t)=>{const r=TO*60+t*In,n=Math.floor(r/60),a=r%60;return{time:`${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`,isHourMark:a===0}});const Bh=["Futebol","Beach Tennis","Futevlei","Treino"],os={scheduled:{label:"Agendado",accent:"bg-[#3B82F6]",text:"text-[#3B82F6]",border:"border-[#3B82F6]",hex:"#3B82F6",icon:gu},confirmed:{label:"Confirmado",accent:"bg-[#22C55E]",text:"text-[#22C55E]",border:"border-[#22C55E]",hex:"#22C55E",icon:Bs},in_progress:{label:"Em andamento",accent:"bg-[#FACC15]",text:"text-[#FACC15]",border:"border-[#FACC15]",hex:"#FACC15",icon:RW},finished:{label:"Finalizado",accent:"bg-[#6B7280]",text:"text-[#6B7280]",border:"border-[#6B7280]",hex:"#6B7280",icon:nce},canceled:{label:"Cancelado",accent:"bg-[#EF4444]",text:"text-[#EF4444]",border:"border-[#EF4444]",hex:"#EF4444",icon:K2},absent:{label:"Ausente",accent:"bg-[#F97316]",text:"text-[#F97316]",border:"border-[#F97316]",hex:"#F97316",icon:FW}},ZWe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},j7={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function eVe(){const{toast:e}=ii(),t=js(),r=y.useMemo(()=>{try{return typeof window<"u"&&localStorage.getItem("debug:agenda")==="1"}catch{return!1}},[]),n=y.useCallback((...ie)=>{if(r)try{console.log("[AgendaDbg]",...ie)}catch{}},[r]);y.useEffect(()=>{const ie=console.log,ae=console.info,Re=console.debug,Le=console.warn,_t=console.error,H=U=>{const le=String(U||"");return le.startsWith("[AgendaDbg]")||!1||le.startsWith("[PulseDump]")||le.startsWith("[Clientes:load]")||le.startsWith("[AgendaSettings]")||le.startsWith("[Auto]")||le.startsWith("[DEBUG-PaymentModal]")||le.startsWith("[PaymentModal]")||le.startsWith(" EditGuard")};return console.log=(...U)=>{try{if(H(U[0]))return}catch{}return ie(...U)},console.info=(...U)=>{try{if(H(U[0]))return}catch{}return ae(...U)},console.debug=(...U)=>{try{if(H(U[0]))return}catch{}return Re(...U)},console.warn=(...U)=>{try{if(H(U[0]))return}catch{}return Le(...U)},console.error=(...U)=>{try{if(H(U[0]))return}catch{}return _t(...U)},()=>{console.log=ie,console.info=ae,console.debug=Re,console.warn=Le,console.error=_t}},[]);const a=y.useRef({active:!1,tag:"",start:0,timer:null,events:[]}),i=y.useCallback((ie,ae)=>{if(r)try{const Re=Date.now(),Le=a.current&&a.current.active?Re-(a.current.start||Re):0;a.current.events.push({t:Re,ms:Le,event:ie,data:ae})}catch{}},[r]),o=y.useCallback(ie=>{if(r){try{if(!a.current.active)return;const{tag:ae,start:Re,events:Le}=a.current,_t=`[PulseDump] tag=${ae} dur=${Date.now()-Re}ms reason=${ie}`;console.groupCollapsed(_t);for(const H of Le)console.log(` +${String(H.ms).padStart(4," ")}ms`,H.event,H.data||{});console.groupEnd()}catch{}try{a.current.timer&&clearTimeout(a.current.timer)}catch{}a.current={active:!1,tag:"",start:0,timer:null,events:[]}}},[r]),l=y.useCallback((ie,ae=5e3)=>{if(r){try{a.current.timer&&clearTimeout(a.current.timer)}catch{}a.current={active:!0,tag:ie,start:Date.now(),timer:null,events:[]},a.current.timer=setTimeout(()=>o("timeout"),ae),n("PulseStart",{tag:ie,timeoutMs:ae})}},[r,o,n]),{userProfile:c,authReady:u,company:d}=io(),[f,h]=y.useState(new Date),[m,g]=y.useState([]),[p,v]=y.useState(!1),[x,b]=y.useState(null),[w,_]=y.useState({}),j=y.useRef(0),A=y.useRef(""),P=y.useRef(!1);y.useEffect(()=>{P.current=p,n("Modal state change:",{isModalOpen:p}),i("modal",{open:p})},[p,n]);const C=y.useRef("init"),k=y.useRef(0),R=y.useRef(!1),E=y.useRef(0),I=y.useRef(!1),T=y.useRef(0),[M,z]=y.useState(!1),V=y.useRef(0),W=y.useRef(!1),$=y.useRef(0),G=y.useCallback((ie=800)=>{$.current=Date.now()+ie,n("UI:busy set",{ms:ie})},[n]),me=y.useCallback(()=>Date.now()<$.current,[]),de=y.useRef(0),L=y.useRef(0),B=y.useRef(!1),J=y.useCallback(()=>{const ie=Date.now();p||ie-L.current<350||(L.current=ie,v(!0),B.current=!0)},[p]),q=y.useRef(!1);y.useEffect(()=>{t.state?.openModal&&!p&&!q.current&&(q.current=!0,J(),window.history.replaceState({},document.title))},[t.state?.openModal,p,J]);const[X,Z]=y.useState({scheduled:!0,available:!0,canceledOnly:!1,pendingPayments:!1}),[pe,te]=y.useState(null),[ve,Ce]=y.useState(!0),he=y.useMemo(()=>Object.fromEntries((pe??[]).map(ie=>[ie.nome,ie])),[pe]),qe=y.useMemo(()=>(pe??[]).map(ie=>ie.nome),[pe]),[ye,ce]=y.useState([]),Ft=c?.codigo_empresa,qt=y.useMemo(()=>Ft?`quadras:list:${Ft}`:"quadras:list",[Ft]),It=y.useMemo(()=>Ft?`agenda:selectedCourts:${Ft}`:"agenda:selectedCourts",[Ft]),et=y.useMemo(()=>Ft?`agenda:viewFilter:${Ft}`:"agenda:viewFilter",[Ft]),[Ze,Pt]=y.useState(null),[ue,rt]=y.useState(0);y.useEffect(()=>{ye.length>0&&Ze===null&&Pt(ye[0])},[ye,Ze]);const[Ee,Ke]=y.useState([]),Ge=y.useRef(null),bt=y.useRef({scheduled:!0,canceledOnly:!1}),[ot,kt]=y.useState(null),[yt,je]=y.useState(""),We=y.useRef(0),Ot=y.useRef(!1),Ve=y.useRef(!1),[nt,Rt]=y.useState(!1),[Lt,Tt]=y.useState(()=>{try{return localStorage.getItem("agenda:hideCanceledInfo")==="1"}catch{return!1}});y.useEffect(()=>{try{localStorage.setItem("agenda:hideCanceledInfo",Lt?"1":"0")}catch{}},[Lt]);const ir=y.useMemo(()=>{if(!c?.codigo_empresa)return null;const ie=Hr(f,"yyyy-MM-dd");return`agenda:bookings:${c.codigo_empresa}:${ie}`},[c?.codigo_empresa,f]),fr=y.useMemo(()=>{if(!c?.codigo_empresa)return null;const ie=Hr(f,"yyyy-MM-dd");return`agenda:participants:${c.codigo_empresa}:${ie}`},[c?.codigo_empresa,f]),[ia,fn]=y.useState(!1),Or=y.useMemo(()=>({autoConfirmEnabled:!1,autoConfirmMinutesBefore:120,autoStartEnabled:!0,autoFinishEnabled:!0}),[]),[yr,Er]=y.useState(Or),[Dr,wa]=y.useState(Or),[or,dr]=y.useState(!1),[Vn,qa]=y.useState(0),la=y.useCallback(()=>Date.now()+(Number.isFinite(Vn)?Vn:0),[Vn]),[_e,wt]=y.useState(null);y.useEffect(()=>{(async()=>{if(console.log("[AgendaSettings][LOAD] Iniciando carregamento...",{authReady:u,company_id:d?.id}),!u||!d?.id){console.warn("[AgendaSettings][LOAD] Aguardando autenticao...");return}try{console.log("[AgendaSettings][LOAD] Modo:","PRODUO (wrapper)"),console.log("[AgendaSettings][LOAD] Buscando para empresa_id:",d.id);const{data:ae,error:Re}=await Pe.from("agenda_settings").select("*").eq("empresa_id",d.id).maybeSingle();if(console.log("[AgendaSettings][LOAD] Resultado da query:",{data:ae,error:Re}),console.log("[AgendaSettings][LOAD] Data type:",ae===null?"null":typeof ae),Re){console.error("[AgendaSettings][LOAD] ERRO ao carregar:",Re);return}if(!ae){console.warn("[AgendaSettings][LOAD] Nenhum registro encontrado (ainda no criado)");return}console.log("[AgendaSettings][LOAD]  Registro encontrado:",ae);const Le={autoConfirmEnabled:!!ae.auto_confirm_enabled,autoConfirmMinutesBefore:ae.auto_confirm_enabled&&Number.isFinite(Number(ae.auto_confirm_hours))?Number(ae.auto_confirm_hours)*60:Or.autoConfirmMinutesBefore,autoStartEnabled:!!ae.auto_start_enabled,autoFinishEnabled:!!ae.auto_finish_enabled};console.log("[AgendaSettings][LOAD]  Estado mapeado:",Le),Er(_t=>({..._t,...Le})),wa(Le),console.log("[AgendaSettings][LOAD]  Estados atualizados com sucesso!")}catch(ae){console.warn("[AgendaSettings] unexpected load error",ae)}})()},[u,d?.id]),y.useEffect(()=>{let ie=!0,ae=null,Re=!1;const Le=async()=>{try{const{data:_t,error:H}=await Pe.functions.invoke("time-br",{body:{}});if(!H&&_t&&ie){const U=Number(_t.nowMs);if(Number.isFinite(U)){const le=U-Date.now();qa(le),wt(Date.now());return}}if(!Re){Re=!0;try{console.warn("[TimeSync] time-br sem dados vlidos; usando relgio local.")}catch{}}}catch{if(!Re){Re=!0;try{console.warn("[TimeSync] time-br falhou; usando relgio local.")}catch{}}}};return Le(),ae=setInterval(Le,5*60*1e3),()=>{ie=!1,ae&&clearInterval(ae)}},[]);const[dt,ht]=y.useState({}),mt=2*60*60*1e3,at=y.useCallback(ie=>{ht(ae=>({...ae,[ie]:Date.now()}))},[]),$t=y.useCallback(ie=>{ht(ae=>{if(!ae||!(ie in ae))return ae;const Re={...ae};return delete Re[ie],Re})},[]),ut=y.useCallback(ie=>{const ae=dt?.[ie];return typeof ae=="number"&&Date.now()-ae<mt},[dt]),[Wt,Yt]=y.useState(null),nr=y.useCallback(()=>new Promise(ie=>{Yt({resolve:ie})}),[]),Vr=y.useRef(new Map),Cn=async()=>{console.log(" [AgendaSettings][SAVE] FUNO CHAMADA! "),console.log("[AgendaSettings][SAVE] Linha 509 - Antes do try");try{if(console.log("[AgendaSettings][SAVE] Linha 511 - Dentro do try"),console.log("[AgendaSettings][SAVE] authReady:",u),console.log("[AgendaSettings][SAVE] company:",d),!u||!d?.id){console.error("[AgendaSettings][SAVE] ERRO: No autenticado",{authReady:u,company:d}),e({title:"No autenticado",description:"Faa login para salvar as configuraes.",variant:"destructive"});return}console.log("[AgendaSettings][SAVE]  Autenticado! Preparando payload..."),console.log("[AgendaSettings][SAVE] automation atual:",yr),dr(!0);const ie={empresa_id:d.id,auto_confirm_enabled:!!yr.autoConfirmEnabled,auto_confirm_hours:yr.autoConfirmEnabled?Math.max(0,Math.round(Number(yr.autoConfirmMinutesBefore||0)/60)):null,auto_start_enabled:!!yr.autoStartEnabled,auto_finish_enabled:!!yr.autoFinishEnabled};console.log("[AgendaSettings][SAVE] Payload preparado:",ie),console.log("[AgendaSettings][SAVE] Modo:","PRODUO (wrapper)"),console.log("[AgendaSettings][SAVE] Supabase client type:",typeof Pe.from);const{data:ae,error:Re}=await Pe.from("agenda_settings").upsert(ie,{onConflict:"empresa_id"}).select();if(console.log("[AgendaSettings][SAVE] Resultado do upsert:",{data:ae,error:Re}),console.log("[AgendaSettings][SAVE] Data type:",Array.isArray(ae)?"array":typeof ae),console.log("[AgendaSettings][SAVE] Data length:",ae?.length),Re)throw console.error("[AgendaSettings][SAVE]  ERRO no upsert:",Re),Re;!ae||ae.length===0?console.error("[AgendaSettings][SAVE]  AVISO: Upsert no retornou dados!"):console.log("[AgendaSettings][SAVE]  Dados salvos com sucesso:",ae[0]),wa(yr),console.log("[AgendaSettings][SAVE]  savedAutomation atualizado:",yr),e({title:"Configuraes salvas",description:"As automaes da agenda foram atualizadas com sucesso."}),fn(!1),console.log("[AgendaSettings][SAVE]  Salvamento concludo!")}catch(ie){console.error(" [AgendaSettings][SAVE] ERRO CAPTURADO:",ie),console.error("[AgendaSettings][SAVE] Stack:",ie?.stack),console.error("[AgendaSettings][SAVE] Message:",ie?.message);const ae=ie?.message||"Falha ao salvar as configuraes.";e({title:"Erro ao salvar",description:ae,variant:"destructive"})}finally{console.log("[AgendaSettings][SAVE] Finally executado"),dr(!1)}},Sn=y.useCallback(async(ie,ae,Re="user")=>{try{const Le=["canceled","finished","absent"],_t=["scheduled","confirmed","in_progress"],H=Le.includes(ae);let U=!1;if(Re==="user"&&_t.includes(ae)){const Oe=(m||[]).find(jt=>jt.id===ie),$e=Oe?Le.includes(Oe.status):!1,He=Oe?!!Oe.auto_disabled:!1;($e||He)&&(U=!!await nr())}const le=H?{status:ae,auto_disabled:!0}:U?{status:ae,auto_disabled:!1}:{status:ae},{error:we}=await Pe.from("agendamentos").update(le).eq("codigo_empresa",c.codigo_empresa).eq("id",ie).select("id");if(we)throw we;g(Oe=>Oe.map($e=>{if($e.id!==ie)return $e;const He={...$e,status:ae,customer:$e.customer||""};return H?He.auto_disabled=!0:U&&(He.auto_disabled=!1),He}));try{Vr.current.set(ie,{status:ae,ts:Date.now()})}catch{}try{const Oe=JSON.parse(localStorage.getItem(ir)||"[]");if(Array.isArray(Oe)&&Oe.length>0){const $e=Array.isArray(Oe)?Oe.map(He=>{if(He.id!==ie)return He;const jt={...He,status:ae,customer:He.customer||""};return H?jt.auto_disabled=!0:U&&(jt.auto_disabled=!1),jt}):Oe;localStorage.setItem(ir,JSON.stringify($e))}}catch{}if(Re==="user")try{U?$t(ie):at(ie)}catch{}}catch(Le){console.error("Auto-status: falha ao atualizar",ie,ae,Le)}},[m,ir,at,$t,nr,X]),Fi=y.useRef(!1),ja=y.useRef(null),da=y.useRef(null),oi=y.useCallback(()=>{try{ja.current&&(clearTimeout(ja.current),ja.current=null)}catch{}},[]),Tn=y.useCallback(()=>{if(!u||!c?.codigo_empresa)return;if(Date.now()<(de.current||0)){console.log("[AutoDiag] scheduleNextAutomation:deferred returning-from-hidden"),setTimeout(()=>Tn(),600);return}if(P.current){n("scheduleNextAutomation:skipped (modal open)");return}i("auto:schedule"),oi();const ae=la();let Re=1/0;const Le=_t=>{Number.isFinite(_t)&&_t>ae&&_t<Re&&(Re=_t)};try{for(const _t of m||[]){if(!_t||_t.auto_disabled||ut(_t.id))continue;const H=_t.start instanceof Date?_t.start.getTime():new Date(_t.start).getTime(),U=_t.end instanceof Date?_t.end.getTime():new Date(_t.end).getTime();if(_t.status==="scheduled"&&Dr.autoConfirmEnabled){const le=Number(Dr.autoConfirmMinutesBefore||0)*6e4;Le(H-le),Dr.autoFinishEnabled&&Le(U)}_t.status==="confirmed"&&(Dr.autoStartEnabled&&Le(H),Dr.autoFinishEnabled&&Le(U)),_t.status==="in_progress"&&Dr.autoFinishEnabled&&Le(U)}}catch{}if(Re!==1/0){const _t=Math.max(0,Math.min(Re-ae+250,6e5));try{console.debug("[Auto] next schedule in ms",_t)}catch{}try{Qt(Re)}catch{}ja.current=setTimeout(()=>{try{da.current&&da.current()}catch{}},_t)}},[u,c?.codigo_empresa,m,Dr,ut,oi,la]),Cs=y.useCallback(async ie=>{try{if(!(typeof _e=="number"&&Date.now()-_e<6e5))try{const{data:Le}=await Pe.functions.invoke("time-br",{body:{}}),_t=Number(Le?.nowMs);Number.isFinite(_t)&&(qa(_t-Date.now()),wt(Date.now()))}catch{}try{Tn()}catch{}let Re=null;if(ie?.id&&c?.codigo_empresa){const{data:Le}=await Pe.from("agendamentos").select("id, inicio, fim, status, modalidade, quadra_id, cliente_id, auto_disabled").eq("codigo_empresa",c.codigo_empresa).eq("id",ie.id).single();if(Le){const _t={...ie,start:new Date(Le.inicio),end:new Date(Le.fim),status:Le.status||ie.status,modality:Le.modalidade||ie.modality,auto_disabled:!!Le.auto_disabled,customer:ie.customer||""};Re=_t,g(H=>H.map(U=>U.id===ie.id?_t:U))}}try{const Le=Re||ie;if(Le&&Le.id){const _t=la(),H=Le.start instanceof Date?Le.start.getTime():new Date(Le.start).getTime(),U=Le.end instanceof Date?Le.end.getTime():new Date(Le.end).getTime();if(!Le.auto_disabled&&!ut(Le.id))if(Le.status==="in_progress"&&Dr.autoFinishEnabled&&Number.isFinite(U)&&_t>=U)await Sn(Le.id,"finished","automation");else if(Le.status==="scheduled"&&Dr.autoStartEnabled&&Number.isFinite(H)&&_t>=H)await Sn(Le.id,"in_progress","automation");else if(Le.status==="confirmed"&&Dr.autoStartEnabled&&Number.isFinite(H)&&_t>=H)await Sn(Le.id,"in_progress","automation");else if(Le.status==="scheduled"&&Dr.autoConfirmEnabled&&Number.isFinite(H)){const we=Number(Dr.autoConfirmMinutesBefore||0)*6e4;_t>=H-we&&await Sn(Le.id,"confirmed","automation")}else(Le.status==="scheduled"||Le.status==="confirmed")&&Dr.autoFinishEnabled&&Number.isFinite(U)&&_t>=U&&await Sn(Le.id,"finished","automation")}}catch{}try{da.current&&da.current()}catch{}try{console.log(" EditGuard | ok | tempo=",typeof _e=="number"?"Servidor":"Local")}catch{}return{booking:Re}}catch(ae){try{console.warn(" EditGuard | falha leve",ae?.message||ae)}catch{}return{booking:null}}},[_e,Pe,c,g,Tn,la,yr,ut,Sn]),so=y.useCallback(async()=>{if(!(!u||!c?.codigo_empresa)){if(P.current){n("runAutomation:skipped (modal open)");return}if(!Fi.current){Fi.current=!0;try{try{console.debug("[Auto] tick")}catch{}i("auto:tick");const ie=la(),ae=new Date(ie),Re=Hr(ae,"yyyy-MM-dd");let Le=(m||[]).filter(H=>Hr(H.start,"yyyy-MM-dd")===Re);if(Le.length===0)try{const H=pl(ae),U=Ri(H,1),{data:le,error:we}=await Pe.from("agendamentos").select("id, inicio, fim, status, auto_disabled").eq("codigo_empresa",c.codigo_empresa).gte("inicio",H.toISOString()).lt("inicio",U.toISOString());!we&&Array.isArray(le)&&(Le=le.map(Oe=>({id:Oe.id,start:new Date(Oe.inicio),end:new Date(Oe.fim),status:Oe.status||"scheduled",auto_disabled:!!Oe.auto_disabled})))}catch{}try{const{data:H,error:U}=await Pe.from("agendamentos").select("id, inicio, fim, status, auto_disabled").eq("codigo_empresa",c.codigo_empresa).lt("fim",ae.toISOString()).in("status",["scheduled","confirmed","in_progress"]);if(!U&&Array.isArray(H)&&H.length>0){const le=H.map(Oe=>({id:Oe.id,start:new Date(Oe.inicio),end:new Date(Oe.fim),status:Oe.status||"scheduled",auto_disabled:!!Oe.auto_disabled})),we=new Map(Le.map(Oe=>[Oe.id,Oe]));for(const Oe of le)we.has(Oe.id)||we.set(Oe.id,Oe);Le=Array.from(we.values())}}catch{}let _t=!1;for(const H of Le){if(H.auto_disabled||ut(H.id))continue;const U=H.start instanceof Date?H.start.getTime():new Date(H.start).getTime(),le=H.end instanceof Date?H.end.getTime():new Date(H.end).getTime();if(H.status==="in_progress"&&Dr.autoFinishEnabled&&ie>=le){try{console.debug("[Auto] finish",{id:H.id})}catch{}await Sn(H.id,"finished","automation"),_t=!0;continue}if(H.status==="scheduled"&&Dr.autoStartEnabled&&ie>=U){try{console.debug("[Auto] start-direct (skip confirm)",{id:H.id})}catch{}await Sn(H.id,"in_progress","automation"),_t=!0;continue}if(H.status==="confirmed"&&Dr.autoStartEnabled&&ie>=U){try{console.debug("[Auto] start",{id:H.id})}catch{}await Sn(H.id,"in_progress","automation"),_t=!0;continue}if(H.status==="scheduled"&&Dr.autoConfirmEnabled){const we=Number(Dr.autoConfirmMinutesBefore||0)*6e4;if(ie>=U-we){try{console.debug("[Auto] confirm",{id:H.id})}catch{}await Sn(H.id,"confirmed","automation"),_t=!0;continue}}if((H.status==="scheduled"||H.status==="confirmed")&&Dr.autoFinishEnabled&&ie>=le){try{console.debug("[Auto] catchup-finish",{id:H.id})}catch{}await Sn(H.id,"finished","automation"),_t=!0;continue}}if(_t)try{setTimeout(()=>{try{hn()}catch{}},800)}catch{}try{Tn()}catch{}}finally{Fi.current=!1}}}},[u,c?.codigo_empresa,m,Dr,Sn,ut,Tn,la]);y.useEffect(()=>{da.current=so},[so]),y.useEffect(()=>{const ie=setInterval(so,1e4);try{da.current&&da.current()}catch{}try{Tn()}catch{}return()=>clearInterval(ie)},[so]),y.useEffect(()=>{const ie=setInterval(()=>{try{if(!!!(Dr?.autoConfirmEnabled||Dr?.autoStartEnabled||Dr?.autoFinishEnabled))return;da.current&&(console.debug("[Auto][Watchdog] forcing periodic automation run"),da.current())}catch{}},18e5);return()=>clearInterval(ie)},[Dr]),y.useEffect(()=>{if(ir)try{const ie=JSON.parse(localStorage.getItem(ir)||"[]");if(Array.isArray(ie)&&ie.length>0){const ae=ie.map(Re=>({...Re,start:new Date(Re.start),end:new Date(Re.end),customer:Re.customer||""}));n("cache:bookings:hydrate",{count:ae.length,sample:ae[0]}),i("cache:hydrate",{count:ae.length}),g(Re=>Re&&Re.length>0?Re:ae),G(1200)}}catch{}},[ir,n]),y.useEffect(()=>{const ie=()=>{try{const Le=new Date().toISOString();if(document.visibilityState==="visible"){const _t=Date.now();de.current=_t+800}}catch{}},ae=()=>{try{const Le=new Date().toISOString()}catch{}},Re=()=>{try{const Le=new Date().toISOString()}catch{}};return document.addEventListener("visibilitychange",ie),window.addEventListener("focus",ae),window.addEventListener("blur",Re),()=>{document.removeEventListener("visibilitychange",ie),window.removeEventListener("focus",ae),window.removeEventListener("blur",Re)}},[p,m]),y.useEffect(()=>{try{Tn()}catch{}return()=>{try{oi()}catch{}}},[m,yr,Tn,oi]),y.useEffect(()=>{if(fr)try{const ie=JSON.parse(localStorage.getItem(fr)||"{}");ie&&typeof ie=="object"&&(_(ie),A.current=Hr(f,"yyyy-MM-dd"))}catch{}},[fr]);const hn=y.useCallback(async()=>{if(!u||!c?.codigo_empresa||Date.now()<(de.current||0)||p)return;n("fetchBookings:start",{date:Hr(f,"yyyy-MM-dd"),empresa:c?.codigo_empresa}),i("fetch:start",{day:Hr(f,"yyyy-MM-dd")});const ie=pl(f),ae=Ri(ie,1),{data:Re,error:Le}=await Pe.from("agendamentos").select(`
        id, codigo, codigo_empresa, quadra_id, cliente_id, clientes, inicio, fim, modalidade, status, auto_disabled,
        quadra:quadra_id ( nome ),
        cliente:cliente_id ( nome )
      `).eq("codigo_empresa",c.codigo_empresa).gte("inicio",ie.toISOString()).lt("inicio",ae.toISOString()).order("inicio",{ascending:!0});if(Le){n("fetchBookings:error",{message:Le?.message,code:Le?.code,status:Le?.status}),i("fetch:error",{message:Le?.message,code:Le?.code,status:Le?.status}),e({title:"Erro ao carregar agendamentos",description:Le.message,variant:"destructive"}),Ot.current||(Ot.current=!0,setTimeout(hn,900));return}if(!Re||Re.length===0){n("fetchBookings:empty-first-hit"),i("fetch:empty-first");let U=!1;try{const le=ir?JSON.parse(localStorage.getItem(ir)||"[]"):[];U=Array.isArray(le)&&le.length>0}catch{}if(!Ot.current&&(Ot.current=!0,U)){setTimeout(hn,700);return}}Ot.current=!1;const _t=Date.now(),H=(Re||[]).map(U=>{const le=new Date(U.inicio),we=new Date(U.fim),Oe=U.quadra?.[0]?.nome||U.quadra?.nome||Object.values(he).find(Kt=>Kt.id===U.quadra_id)?.nome||"";let $e=U.cliente?.[0]?.nome||U.cliente?.nome||"";if(!$e&&U.clientes)try{const Kt=typeof U.clientes=="string"?JSON.parse(U.clientes):U.clientes;Array.isArray(Kt)&&Kt.length>0&&($e=Kt[0]?.nome||Kt[0]||"")}catch{}if(!$e&&w[U.id]){const Kt=w[U.id];Array.isArray(Kt)&&Kt.length>0&&($e=Kt[0]?.nome||Kt[0]?.cliente?.nome||"")}const He=Vr.current.get(U.id),jt=He&&_t-He.ts<4e3;return{id:U.id,code:U.codigo,court:Oe,customer:$e,start:le,end:we,status:jt?He.status:U.status||"scheduled",modality:U.modalidade||"",auto_disabled:!!U.auto_disabled}});g(H);try{if(ir){const U=H.map(le=>({id:le.id,code:le.code,court:le.court,customer:le.customer,start:le.start.toISOString(),end:le.end.toISOString(),status:le.status,modality:le.modality,auto_disabled:le.auto_disabled}));localStorage.setItem(ir,JSON.stringify(U))}}catch{}},[u,c?.codigo_empresa,f,he,ir,e,n,r,w]);y.useEffect(()=>{if(r)try{const ie=(m||[]).map(ae=>`${ae.id}:${Hr(ae.start,"HH:mm")}-${Hr(ae.end,"HH:mm")}:${ae.status}`).join(" | ");console.log("[AgendaDbg] bookings:changed",{count:Array.isArray(m)?m.length:0,summary:ie})}catch{}},[m,r]),y.useEffect(()=>{try{const ie=Date.now()+1800;E.current=ie,n("Picker:suppressClose window set",{until:ie})}catch{}},[m]),y.useEffect(()=>{u&&c?.codigo_empresa&&hn()},[u,c?.codigo_empresa,f,he,ir]);const Io=y.useRef(null),[Bi,Ii]=y.useState("idle"),[mi,ee]=y.useState(null),Ie=y.useRef(!1);y.useEffect(()=>{if(!u||!c?.codigo_empresa)return;const ie=pl(f);Ri(ie,1);const ae=setInterval(()=>{P.current||hn()},3e4);return()=>{try{Io.current&&clearTimeout(Io.current)}catch{}try{clearInterval(ae)}catch{}try{Ii("polling")}catch{}}},[u,c?.codigo_empresa,f,hn]),y.useEffect(()=>{if(!p&&Ie.current){Ie.current=!1;try{n("Modal closed: flushing pending realtime refresh"),i("rt:flushAfterModalClose"),hn()}catch{}}},[p,hn,n]);const[tt,Qt]=y.useState(null),it=y.useRef("");y.useEffect(()=>{try{const ie=typeof _e=="number"&&Date.now()-_e<6e5,ae=Oe=>typeof Oe=="number"?Hr(new Date(Oe),"HH:mm:ss",{locale:rd}):"",Re=Oe=>typeof Oe=="number"?Hr(new Date(Oe),"HH:mm",{locale:rd}):"",Le=ie?"":"",H=String(Bi).toUpperCase()==="SUBSCRIBED"||String(Bi).toLowerCase()==="polling"?"":"",U=typeof tt=="number"?"":"",le=Array.isArray(m)?m.length:0,we=` Agenda | ${Le} Tempo=${ie?"Servidor":"Local"} (${Math.round(Vn)}ms, sync ${ae(_e)}) |  Realtime=${H} ${Bi}${mi?` (${ae(mi)})`:""} | ${U} Prximo=${Re(tt)} |  Agendamentos=${le}`;it.current!==we&&(it.current=we,console.log(we)),typeof window<"u"&&(window.__AgendaConn={usingServer:ie,serverOffsetMs:Vn,lastTimeSyncAtMs:_e,realtimeStatus:Bi,lastRealtimeEventAtMs:mi,nextAutoAtMs:tt})}catch{}},[Vn,_e,Bi,mi,yr,tt,c?.codigo_empresa,f,Array.isArray(m)?m.length:0]),y.useEffect(()=>{const ie=setInterval(()=>{try{const ae=Date.now();if(ae<(de.current||0)){console.log("[AutoDiag] reconcile:skipped returning-from-hidden");return}if(p){console.log("[AutoDiag] reconcile:skipped modal-open");return}const Re=String(Bi||"").toUpperCase()==="SUBSCRIBED",Le=typeof mi=="number"?ae-mi:1/0,_t=!Re||Le>7*60*1e3,H=typeof tt=="number"?ae>tt+60*1e3:!1;if(_t||H){console.debug("[Reconcile] forcing fetchBookings (stale=",_t," tickDue=",H,")"),hn();try{Tn()}catch{}}}catch{}},3e5);return()=>clearInterval(ie)},[Bi,mi,tt,hn,Tn]),y.useEffect(()=>{(async()=>{if(!u||!c?.codigo_empresa||Date.now()<(de.current||0))return;if(P.current){n("Participants:skipped (modal open)");return}n("Participants:load start"),i("parts:start");const ae=(m||[]).map(le=>le.id).filter(Boolean),Re=Hr(f,"yyyy-MM-dd");if(!ae.length){if(A.current!==Re){_({});try{fr&&localStorage.setItem(fr,"{}")}catch{}A.current=Re}n("Participants:skip empty ids"),i("parts:skip");return}const Le=++j.current,{data:_t,error:H}=await Pe.from("agendamento_participantes").select("id, agendamento_id, codigo_empresa, cliente_id, nome, valor_cota, status_pagamento, finalizadora_id, cliente:clientes!agendamento_participantes_cliente_id_fkey(nome)").in("agendamento_id",ae);if(j.current!==Le)return;if(H){console.warn("[Participants] load error",H),n("Participants:error",{message:H?.message,code:H?.code,status:H?.status}),i("parts:error",{code:H?.code});return}const U={};for(const le of _t||[]){const we=le.agendamento_id;U[we]||(U[we]=[]);const Oe=(Array.isArray(le.cliente)?le.cliente[0]?.nome:le.cliente?.nome)||le.nome||"";U[we].push({...le,nome:Oe})}n("Participants:loaded",{bookings:ae.length,rows:(_t||[]).length}),i("parts:loaded",{rows:(_t||[]).length}),A.current=Re,_(le=>{const we={...le};for(const Oe of ae)we[Oe]=U[Oe]||[];try{fr&&localStorage.setItem(fr,JSON.stringify(we))}catch{}return n("Participants:set state for ids",{ids:ae}),i("parts:set",{idsCount:ae.length}),we})})()},[u,c?.codigo_empresa,m,f,fr,n]),y.useEffect(()=>{if(Ft)try{const ie=JSON.parse(localStorage.getItem(qt)||"[]");Array.isArray(ie)&&ie.length&&(!pe||pe.length===0)&&(te(ie),Ce(!1))}catch{}},[Ft,qt]),y.useEffect(()=>{const ie=async()=>{if(!c?.codigo_empresa)return;try{const _t=JSON.parse(localStorage.getItem(qt)||"[]");if(Array.isArray(_t)&&_t.length>0){const H=_t[0]?.codigo_empresa;if(H&&H!==c.codigo_empresa){console.warn(" [Cache Limpo] Quadras de outra empresa detectadas e removidas"),localStorage.removeItem(qt),localStorage.removeItem(It),te([]);try{ce([])}catch{}try{Pt(null)}catch{}try{setForm(U=>({...U,court:""}))}catch{}}}}catch{}(!pe||pe.length===0)&&Ce(!0);const{data:ae,error:Re}=await Pe.from("quadras").select("id, nome, modalidades, hora_inicio, hora_fim, valor, codigo_empresa").eq("codigo_empresa",c.codigo_empresa).order("nome",{ascending:!0});if(Re){e({title:"Erro ao carregar quadras",description:Re.message}),Ve.current?Ce(!1):(Ve.current=!0,setTimeout(ie,900));return}const Le=ae||[];if(Le.length===0){let _t=0;try{const H=JSON.parse(localStorage.getItem("quadras:list")||"[]");_t=Array.isArray(H)?H.length:0}catch{}if(_t>0&&!Ve.current){Ve.current=!0,Ce(!1),setTimeout(ie,700);return}}Ve.current=!1,console.log(" [Quadras Carregadas]",{empresa:c?.codigo_empresa,total:Le.length,quadras:Le.map(_t=>({id:_t.id,nome:_t.nome}))}),te(Le);try{localStorage.setItem(qt,JSON.stringify(Le))}catch{}Ce(!1)};u&&c?.codigo_empresa&&ie()},[u,c?.codigo_empresa,qt,It]),y.useEffect(()=>{try{if(ve)return;const ie=qe||[];form?.court&&!ie.includes(form.court)&&setForm(ae=>({...ae,court:ie[0]||""})),(!form?.court||form.court==="")&&ie.length>0&&setForm(ae=>({...ae,court:ie[0]}))}catch{}},[ve,qe,c?.codigo_empresa]),y.useEffect(()=>{if(ve)return;const ie=(()=>{try{return JSON.parse(localStorage.getItem(It)||"[]")}catch{return[]}})(),ae=(()=>{try{return JSON.parse(localStorage.getItem(et)||"{}")}catch{return{}}})(),Re=ie.filter(Le=>qe.includes(Le));Re.length>0?ce(Re):ye.length===0&&ce(qe),ae&&typeof ae=="object"&&Z(Le=>({...Le,canceledOnly:!1,...ae}))},[ve,qe.length]),y.useEffect(()=>{try{localStorage.setItem(It,JSON.stringify(ye))}catch{}},[ye,It]),y.useEffect(()=>{try{localStorage.setItem(et,JSON.stringify(X))}catch{}},[X,et]);const lt=y.useMemo(()=>{const ie=ye.map(Re=>he[Re]?.hora_inicio||"06:00:00").map(Re=>{const[Le,_t]=String(Re).split(":").map(Number);return(Le||0)*60+(_t||0)});if(!ie.length)return TO;const ae=Math.min(...ie);return Math.floor(ae/60)},[ye,he]),tr=y.useMemo(()=>{const ie=ye.map(Re=>he[Re]?.hora_fim||"24:00:00").map(Re=>{const[Le,_t]=String(Re).split(":").map(Number);return(Le||0)*60+(_t||0)});if(!ie.length)return Mee;const ae=Math.max(...ie);return Math.ceil(ae/60)},[ye,he]);y.useEffect(()=>{const ie=new Date,ae=Wu(ie),Re=Vu(ie);setTimeout(()=>{if(!Ge.current)return;const _t=Math.max(0,(ae-lt)*60+Re)/In;Ge.current.scrollTop=Math.max(0,_t*is-120)},150)},[lt]);const mr=({booking:ie,courtGridStart:ae,courtGridEnd:Re})=>{const Le=is,_t=ta=>Wu(ta)*60+Vu(ta),H=_t(ie.start),U=_t(ie.end),le=ae!==void 0?ae:Ze?kr.start*60:lt*60,we=Re!==void 0?Re:Ze?kr.end*60:tr*60,Oe=H-le,$e=(we-le)/In;let He=Math.floor(Oe/In);const jt=Math.max(0,U-H),Kt=Math.max(1,Math.ceil(jt/In));let Qe=He+Kt;He=Math.max(0,Math.min(He,$e-1)),Qe=Math.max(0,Math.min(Qe,$e)),Qe<=He&&(Qe=He+1),Qe=Math.min(Qe,$e);const gt=He*Le;let pr=(Qe-He)*Le;const Nt=os[ie.status]||os.confirmed,zt=Nt.icon,Ue=Nt.border,Dt=Kt===1,gr=Dt?4:QWe,Zr=gt+gr,Nr=Math.max(Dt?40:32,pr-gr*2),Te=jt>=90,hr=2,cr=1.15,Fr=Te?(()=>{const ta=Math.min(Math.max((jt-90)/90,0),1);return Math.min(cr+ta*(hr-cr),hr)})():1,pn=16,wr=14,ln=Dt?16:24,Kn=Math.round(pn*(Te?Fr:1)),Na=Math.round(wr*(Te?Fr:1)),lo=Math.round(ln*(Te?Fr:1)),ca=Dt?12:16,En=Dt?12:16,Oa=Te?Math.min(Fr,1.3):1,Jc=Math.round(ca*Oa),Si=Math.round(En*Oa),As=w[ie.id]||[],Ps=As.filter(ta=>String(ta.status_pagamento||"").toLowerCase()==="pago").length,Jo=As.length;return s.jsxs(ur.div,{layout:p?!1:"position",initial:p?!1:{opacity:0,y:6},animate:p?!1:{opacity:1,y:0},exit:p?!1:{opacity:0,y:6},id:`booking-${ie.id}`,className:Et("absolute left-2 right-2 rounded-md border-2 bg-surface text-sm shadow-sm z-0 cursor-pointer",Ue,"overflow-hidden transition-all duration-150 hover:bg-surface-2 hover:shadow-md"),style:{top:`${Zr}px`,height:`${Nr}px`},onClick:async()=>{const ta=Cs(ie),Do=new Promise(Js=>setTimeout(Js,600));let bo=null;try{bo=await Promise.race([ta,Do])}catch{}const Mu=bo&&bo.booking||m.find(Js=>Js.id===ie.id)||ie;b(Mu),J()},children:[s.jsx("div",{className:Et("absolute left-0 top-0 h-full w-[6px] rounded-l-md",Nt.accent)}),s.jsx("div",{className:Et("h-full flex",Dt?"px-3 py-3":"px-4 py-4"),style:{paddingLeft:Jc,paddingRight:Jc,paddingTop:Si,paddingBottom:Si},children:s.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[s.jsx("p",{className:"font-semibold text-text-primary truncate text-base",style:{fontSize:Kn,lineHeight:1.15},children:_7(ie.customer)}),Dt&&s.jsx("span",{className:"text-xs font-bold text-white truncate bg-gradient-to-r from-slate-700 to-slate-800 border border-slate-600/60 rounded-md px-2 py-0.5 whitespace-nowrap shadow-md",style:{fontSize:Na},children:ie.modality})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:Et("text-text-muted font-semibold text-base whitespace-nowrap"),style:{fontSize:Kn},children:[Hr(ie.start,"HH:mm"),"",Hr(ie.end,"HH:mm")]}),Dt&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zt,{className:Et(Nt.text),style:{width:lo,height:lo}}),s.jsx("span",{className:Et("truncate font-semibold",Nt.text,"text-base"),style:{fontSize:Kn},children:Nt.label})]}),Dt&&Jo>0&&s.jsxs("span",{className:`text-xs font-semibold rounded-full px-2 py-0.5 border ${Ps===Jo?"text-emerald-300 bg-emerald-500/10 border-emerald-400/30":"text-amber-300 bg-amber-500/10 border-amber-400/30"}`,style:{fontSize:Math.max(11,Math.round(11*(Te?Fr:1)))},children:[Ps,"/",Jo]})]}),s.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 flex-wrap",children:[!Dt&&s.jsx("span",{className:"text-xs font-bold text-white truncate bg-gradient-to-r from-slate-700 to-slate-800 border border-slate-600/60 rounded-md px-2.5 py-1 shadow-md",style:{fontSize:Na},children:ie.modality}),!Dt&&s.jsxs("div",{className:"flex items-center gap-1.5 text-base flex-wrap justify-end",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zt,{className:Et(Nt.text),style:{width:lo,height:lo}}),s.jsx("span",{className:Et("truncate font-semibold",Nt.text),style:{fontSize:Kn},children:Nt.label})]}),Jo>0&&(()=>{const ta=typeof window<"u"&&window.innerWidth<768;return s.jsxs("span",{className:Et("font-bold rounded-full border flex items-center gap-1",Dt?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm",Ps===Jo?"text-emerald-300 bg-emerald-500/10 border-emerald-400/30":"text-amber-300 bg-amber-500/10 border-amber-400/30"),style:{fontSize:Math.max(Dt?11:13,Math.round((Dt?11:13)*(Te?Fr:1)))},children:[s.jsx(Ls,{className:"w-3 h-3"}),s.jsxs("span",{children:[Ps,"/",Jo,ta?"":" pagos"]})]})})()]})]})]})})]})},er=()=>{y.useRef(Math.random().toString(36).slice(2));const ie=y.useRef(0),ae=y.useRef(""),Re=ne=>{if(!ne)return"";if(typeof ne=="string")return ne;const Ne=ne.nome||ne.name||"",Se=ne.codigo??ne.code;return Se!=null?`[${Se}] ${Ne}`:Ne},Le=ne=>ne?typeof ne=="string"?ne:ne.nome||ne.name||"":"",_t=ne=>{const Ne=he[ne];if(!Ne)return{start:lt*60,end:tr*60};const[Se,Be]=String(Ne.hora_inicio||"06:00:00").split(":").map(Number),[Je,st]=String(Ne.hora_fim||"24:00:00").split(":").map(Number);return{start:Se*60+(Be||0),end:Je*60+(st||0)}},H=()=>{const ne=Wu(new Date),Ne=Vu(new Date),Se=ne*60+Ne,Be=qe[0]||"",Je=_t(Be);return Math.max(Je.start,Math.min(Je.end-In,Math.round(Se/In)*In))},[U,le]=y.useState(()=>{let ne=[];try{const Ne=sessionStorage.getItem("agenda:customerPicker:closingAt"),Se=Ne?Number(Ne):0,Be=Se&&Date.now()-Se<1e4,Je=sessionStorage.getItem(cr),st=Je?JSON.parse(Je):[];if(Be&&Array.isArray(st)&&st.length>0?ne=st:Array.isArray(ln)&&ln.length>0?ne=ln:Array.isArray(Te.current)&&Te.current.length>0&&(ne=Te.current),ne.length>0)try{Oe.current=!0}catch{}}catch{}return{selectedClients:ne,court:qe[0]||"",modality:Bh[0],status:"scheduled",date:f,startMinutes:H(),endMinutes:H()+60}}),we=y.useRef([]),Oe=y.useRef(!1),$e=y.useRef(null);y.useEffect(()=>{we.current=Array.isArray(U.selectedClients)?U.selectedClients:[];try{(we.current||[]).length>0&&(Oe.current=!0)}catch{}},[U.selectedClients]);const[He,jt]=y.useState(!1),[Kt,Qe]=y.useState(""),gt=y.useRef(0),pr=y.useRef(!1);y.useEffect(()=>{const ne=()=>{try{if(document.visibilityState==="hidden"){pr.current=!!(M||He);const Ne=Date.now();try{V.current=Ne+1200}catch{}try{E.current=Ne+1200}catch{}try{gt.current=Ne+800}catch{}}else if(document.visibilityState==="visible"){const Ne=pr.current;pr.current=!1;const Se=Date.now();try{V.current=Math.max(V.current||0,Se+600)}catch{}try{E.current=Math.max(E.current||0,Se+600)}catch{}try{gt.current=Math.max(gt.current||0,Se+400)}catch{}Ne&&!P.current&&setTimeout(()=>{P.current||(jt(!0),z(!0))},60)}}catch{}};return document.addEventListener("visibilitychange",ne),()=>document.removeEventListener("visibilitychange",ne)},[M,He,p]),y.useEffect(()=>{},[He,M]);const Nt=y.useRef(0);y.useEffect(()=>{const ne=Array.isArray(U.selectedClients)?U.selectedClients.length:-1,Ne=Nt.current;ne!==Ne&&(Nt.current=ne)},[U.selectedClients,He,M]);const[zt,Ue]=y.useState(!1),[Dt,Vt]=y.useState(null),[gr,Zr]=y.useState(!1),Nr=y.useRef(!1),Te=y.useRef([]),hr=y.useRef("init"),cr=y.useMemo(()=>{try{return`agenda:lastSelection:${c?.codigo_empresa||"no-company"}`}catch{return"agenda:lastSelection:no-company"}},[c?.codigo_empresa]),Fr=y.useCallback(ne=>{try{sessionStorage.setItem(cr,JSON.stringify(ne||[]))}catch{}},[cr]),pn=y.useCallback(()=>{try{const ne=sessionStorage.getItem(cr);if(ne){const Ne=JSON.parse(ne);Array.isArray(Ne)&&(Te.current=Ne)}}catch{}},[cr]),wr=y.useRef(!1),[ln,Kn]=y.useState([]),Na=y.useCallback(ne=>{Kn(ne)},[]),lo=y.useRef(null),[ca,En]=y.useState([]),[Oa,Jc]=y.useState([]),[Si,As]=y.useState(!1),[Ps,Jo]=y.useState(!1),[ta,Do]=y.useState(!1),[bo,Mu]=y.useState(!1),[Js,sc]=y.useState(!1);y.useEffect(()=>{if(!Si)return;let ne=!1;return(async()=>{try{if(!u||!c?.codigo_empresa)return;const Ne=await kg({somenteAtivas:!0,codigoEmpresa:c.codigo_empresa});ne||Jc(Array.isArray(Ne)?Ne:[])}catch{}})(),()=>{ne=!0}},[Si,u,c?.codigo_empresa]),y.useEffect(()=>{if(!Si||!Array.isArray(Oa)||Oa.length===0)return;const ne=String(Oa[0].id);En(Ne=>Ne.length===0&&Array.isArray(U.selectedClients)&&U.selectedClients.length>0?U.selectedClients.map(Je=>({cliente_id:Je.id,nome:Je.nome,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:ne})):Ne.map(Be=>({...Be,finalizadora_id:Be.finalizadora_id&&Be.finalizadora_id!==""?Be.finalizadora_id:ne})))},[Si,Oa]);const Qs=y.useCallback((ne,Ne)=>{try{const Se=Date.now(),Be=Se<(We.current||0)||Se<(E.current||0),Je=!M,st=!!wr.current;let St=Array.isArray(Ne)?Ne:[];if(St.length===0&&Je&&Be&&!st){const Ct=Array.isArray(Te.current)?Te.current:[];Ct.length>0&&(St=Ct)}try{if(!x&&Array.isArray(St)&&St.length>0&&$e.current){const Ct=St.findIndex(xr=>xr&&xr.id===$e.current);Ct>0&&(St=[St[Ct],...St.filter((zr,en)=>en!==Ct)])}}catch{}if(le(Ct=>({...Ct,selectedClients:St})),Array.isArray(St)&&St.length>0){Te.current=St,Na(St);try{sessionStorage.setItem(cr,JSON.stringify(St))}catch{}wr.current=!1}try{hr.current=ne}catch{}}catch{}},[M,le,Na,cr]),[O,K]=y.useState(""),ge=y.useRef(null);y.useEffect(()=>{try{k.current=Date.now()}catch{}},[He,ta]),y.useEffect(()=>{if(r){if(R.current=He,He)l("customer-picker",6e3),i("picker:open"),I.current=!0,z(!0);else if(i("picker:close"),o("picker-close"),Ie.current){Ie.current=!1;try{n("Picker closed: flushing pending refresh"),i("picker:flush"),hn()}catch{}}}},[He]);const ke=y.useCallback((ne,Ne={})=>{if(r)try{const Se=new Date().toISOString(),Be=C.current,Je=!!I.current,st=!!Nr.current}catch{}},[r,p,He,M,ta,zt]);y.useEffect(()=>{r&&ke("state-change",{isCustomerPickerOpen:He,effectiveCustomerPickerOpen:M})},[r,He,M]),y.useEffect(()=>{if(!p||M)return;const ne=Array.isArray(U.selectedClients)?U.selectedClients:[],Ne=Array.isArray(Te.current)?Te.current:[],Se=Date.now()<(V.current||0);if(ne.length===0&&Ne.length>0&&!wr.current&&Se)hr.current="global:restore",le(Be=>({...Be,selectedClients:Ne}));else if(ne.length===0&&Ne.length>0&&wr.current&&!Se)try{Te.current=[]}catch{}},[p,M,U.selectedClients]),y.useEffect(()=>{if(!p)return;let ne=I.current;try{const Se=localStorage.getItem("agenda:customerPicker:desiredAt");if(Se){const Be=Number(Se);Number.isFinite(Be)&&Date.now()-Be<3e3&&(ne=!0)}}catch{}if(!ne||He||Date.now()<E.current||me())return;const Ne=Date.now();Ne-T.current<800||(T.current=Ne,C.current="open",jt(!0),z(!0))},[He,p]),y.useEffect(()=>{const ne=Array.isArray(U.selectedClients)?U.selectedClients:[];ne.length>0&&(Te.current=ne,Fr(ne),Na(ne))},[U.selectedClients,Fr]),y.useEffect(()=>{if(!p||(pn(),M)||I.current)return;const ne=Array.isArray(U.selectedClients)?U.selectedClients:[],Ne=(()=>{const Se=Array.isArray(Te.current)?Te.current:[];if(Se&&Se.length>0)return Se;try{const Be=sessionStorage.getItem(cr),Je=Be?JSON.parse(Be):[];return Array.isArray(Je)?Je:[]}catch{return[]}})();ne.length===0&&Ne.length>0&&!wr.current&&(le(Se=>({...Se,selectedClients:Ne})),Nr.current=!1)},[M,p,pn,cr]);const Fe=y.useRef(0);y.useEffect(()=>{try{const ne=Date.now(),Ne=Array.isArray(we.current)?we.current:[],Se=Array.isArray(Te.current)?Te.current:[];if(ne-Fe.current>300&&(Fe.current=ne),p&&!M&&Ne.length===0&&Se.length>0&&!wr.current){try{We.current=Date.now()+2e3}catch{}try{const Be=E?.current||0,Je={ts:new Date().toISOString(),reason:"empty-after-close",modalOpen:p,pickerOpen:M,formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Ne.length,lastLen:Se.length,clearedByUser:!!wr?.current,lastAction:hr?.current,chipsLen:Array.isArray(ln)?ln.length:NaN,clientsLoading:!!ta,suppressUntil:Be}}catch{}Na(Se);try{sessionStorage.setItem(cr,JSON.stringify(Se))}catch{}le(Be=>({...Be,selectedClients:[...Se]}));try{Promise.resolve().then(()=>{le(Be=>({...Be,selectedClients:[...Te.current]}))})}catch{}try{requestAnimationFrame(()=>{le(Be=>({...Be,selectedClients:[...Te.current||[]]}))})}catch{}setTimeout(()=>{const Be=Array.isArray(we.current)?we.current:[],Je=Array.isArray(Te.current)?Te.current:[];Be.length===0&&Je.length>0&&le(st=>({...st,selectedClients:[...Je]}))},25),setTimeout(()=>{const Be=Array.isArray(we.current)?we.current:[],Je=Array.isArray(Te.current)?Te.current:[];Be.length===0&&Je.length>0&&le(st=>({...st,selectedClients:[...Je]}))},120),setTimeout(()=>{const Be=Array.isArray(we.current)?we.current:[],Je=Array.isArray(Te.current)?Te.current:[];Be.length===0&&Je.length>0&&le(st=>({...st,selectedClients:[...Je]}))},240)}}catch{}},[U.selectedClients,M,p]),y.useEffect(()=>{try{const ne=now<(We.current||0),Ne=Array.isArray(we.current)?we.current:[],Se=Array.isArray(Te.current)?Te.current:[],Be=now<(V.current||0);if(p&&!M&&(ne||Be)&&Ne.length===0&&Se.length>0&&!wr.current){Kn(Se);try{sessionStorage.setItem(cr,JSON.stringify(Se))}catch{}le(Je=>({...Je,selectedClients:[...Se]}));try{requestAnimationFrame(()=>le(Je=>({...Je,selectedClients:[...Te.current||[]]})))}catch{}setTimeout(()=>le(Je=>({...Je,selectedClients:[...Te.current||[]]})),32),setTimeout(()=>le(Je=>({...Je,selectedClients:[...Te.current||[]]})),96)}}catch{}},[U.selectedClients,M,p]),y.useEffect(()=>{const ne=Date.now();if(ne<(de.current||0)||!p||M||ne>=(V.current||0))return;const Ne=Array.isArray(U.selectedClients)?U.selectedClients:[],Se=Array.isArray(Te.current)?Te.current:[];if(Ne.length===0&&Se.length>0){Kn(Se);try{sessionStorage.setItem(cr,JSON.stringify(Se))}catch{}le(Be=>({...Be,selectedClients:[...Se]})),Promise.resolve().then(()=>le(Be=>({...Be,selectedClients:[...Te.current||[]]}))),setTimeout(()=>le(Be=>({...Be,selectedClients:[...Te.current||[]]})),24),setTimeout(()=>le(Be=>({...Be,selectedClients:[...Te.current||[]]})),80),setTimeout(()=>le(Be=>({...Be,selectedClients:[...Te.current||[]]})),240)}},[U.selectedClients,p,M]);const[ft,Bt]=y.useState([]);y.useEffect(()=>{Si&&Bt([])},[Si]);const vr=y.useRef(!1),br=y.useRef(!1),[an,Wr]=y.useState(null),[$n,Ta]=y.useState(null),Ua=y.useRef(!1);y.useEffect(()=>{const ne=Array.isArray(U.selectedClients)?U.selectedClients:[],Ne=an,Se=Ne&&ne.some(Be=>Be&&Be.id===Ne);ne.length>0&&!Se?Wr(ne[0]?.id||null):ne.length===0&&Ne&&Wr(null)},[U.selectedClients,p,x]);const ra=y.useRef(!1),Ia=y.useRef(!1),[na,si]=y.useState(Ee),Mo=y.useRef(0);y.useEffect(()=>{if(!(Date.now()<(de.current||0)))if(ta){Mo.current||(Mo.current=Date.now());const Ne=setTimeout(()=>{ta&&(!Array.isArray(na)||na.length===0)&&Do(!1)},2e3);return()=>clearTimeout(Ne)}else Mo.current=0},[ta,na]);const _i=y.useMemo(()=>Array.isArray(U.selectedClients)?U.selectedClients:[],[U.selectedClients]),yp=y.useMemo(()=>{const ne=_i||[];if(ne.length===0)return"Adicionar clientes";const Ne=ne[0]?.nome||"Cliente",Se=ne.length-1;return Se>0?`${Ne} +${Se}`:Ne},[_i]),Ru=y.useMemo(()=>{const ne=Array.isArray(U.selectedClients)?U.selectedClients:[],Ne=Array.isArray(we.current)?we.current:[],Se=Array.isArray(Te.current)?Te.current:[],Be=Array.isArray(ln)?ln:[];return ne.length>0&&ne.every(Je=>Je?.nome)?ne:ne.length>0?ne.map(Je=>{if(Je?.nome)return Je;const st=Ne.find(zr=>zr?.id===Je?.id),St=Se.find(zr=>zr?.id===Je?.id),Ct=Be.find(zr=>zr?.id===Je?.id),xr=(na||[]).find(zr=>zr?.id===Je?.id);return{...Je,nome:st?.nome||St?.nome||Ct?.nome||xr?.nome||Je?.nome||"Cliente"}}):Ne.length>0&&Ne.every(Je=>Je?.nome)?Ne:Be.length>0&&Be.every(Je=>Je?.nome)?Be:Se.length>0&&Se.every(Je=>Je?.nome)?Se:ne},[U.selectedClients,ln,na]);y.useEffect(()=>{if(!(Date.now()<(de.current||0)))try{n("Chips:effective change",{effectiveLen:Array.isArray(_i)?_i.length:0,formLen:Array.isArray(U.selectedClients)?U.selectedClients.length:0,lastLen:Array.isArray(Te.current)?Te.current.length:0,pickerOpen:He})}catch{}},[_i,U.selectedClients,He]);const lc=y.useRef(null),Ol=y.useRef(!1);y.useEffect(()=>{if(p){Array.isArray(Ee)&&Ee.length>0&&si(Ee);try{if(!na||na.length===0){const ne=c?.codigo_empresa?`clientes:list:${c.codigo_empresa}`:null;if(ne){const Ne=JSON.parse(localStorage.getItem(ne)||"[]");Array.isArray(Ne)&&Ne.length>0&&si(Ne)}}}catch{}}},[p,Ee]),y.useEffect(()=>{p||(lc.current=null,Do(!1))},[p]),y.useEffect(()=>{p||(vr.current=!1,br.current=!1,sc(!1),Ia.current=!1)},[p]);const cc=y.useRef(!1);y.useEffect(()=>{if(p&&!cc.current){cc.current=!0;try{const ne=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Ne=sessionStorage.getItem("agenda:customerPicker:closingAt"),Se=Ne?Number(Ne):0,Be=Se&&Date.now()-Se<1e4;ne&&Be?ae.current=ne:ae.current||(ae.current=`${Date.now()}-${Math.random().toString(36).slice(2)}`),sessionStorage.setItem("agenda:modal:sessionId",ae.current)}catch{}if(!x){try{const ne=sessionStorage.getItem("agenda:customerPicker:closingAt"),Ne=ne?Number(ne):0,Se=Ne&&Date.now()-Ne<1e4,Be=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Je=sessionStorage.getItem("agenda:modal:sessionId")||"",st=sessionStorage.getItem(cr),St=st?JSON.parse(st):[];if(Se&&Array.isArray(St)&&St.length>0&&Be&&Je&&Be===Je){try{Oe.current=!0}catch{}le(Ct=>({...Ct,selectedClients:St})),Te.current=St,Na(St);try{wr.current=!1}catch{}try{Promise.resolve().then(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}try{requestAnimationFrame(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),24),setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),96);return}if(Se&&Array.isArray(St)&&St.length>0){try{Oe.current=!0}catch{}le(Ct=>({...Ct,selectedClients:St})),Te.current=St,Na(St);try{wr.current=!1}catch{}try{Promise.resolve().then(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}try{requestAnimationFrame(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),24),setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),96);return}}catch{}try{if(Date.now()<(ie.current||0))return}catch{}try{I.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{const ne=sessionStorage.getItem(cr),Ne=ne?JSON.parse(ne):[],Se=Array.isArray(Te.current)?Te.current:[];if(!(Array.isArray(Ne)&&Ne.length>0||Array.isArray(Se)&&Se.length>0)){try{Te.current=[]}catch{}try{Kn([])}catch{}try{wr.current=!1}catch{}le(Be=>({...Be,selectedClients:[]}))}}catch{try{Te.current=[]}catch{}try{Kn([])}catch{}try{wr.current=!1}catch{}le(ne=>({...ne,selectedClients:[]}))}}}else!p&&cc.current;if(x)Qo.current=!1;else{if(Qo.current)return;Qo.current=!0;try{const ne=sessionStorage.getItem("agenda:customerPicker:closingAt"),Ne=ne?Number(ne):0,Se=Ne&&Date.now()-Ne<5e3,Be=sessionStorage.getItem("agenda:customerPicker:sessionId")||"",Je=sessionStorage.getItem("agenda:modal:sessionId")||"",st=sessionStorage.getItem(cr),St=st?JSON.parse(st):[];if(Se&&Array.isArray(St)&&St.length>0&&Be&&Je&&Be===Je){try{Oe.current=!0}catch{}le(Ct=>({...Ct,selectedClients:St})),Te.current=St,Na(St);try{wr.current=!1}catch{}try{Promise.resolve().then(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}try{requestAnimationFrame(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),24),setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),96);return}if(Se&&Array.isArray(St)&&St.length>0){try{Oe.current=!0}catch{}le(Ct=>({...Ct,selectedClients:St})),Te.current=St,Na(St);try{wr.current=!1}catch{}try{Promise.resolve().then(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}try{requestAnimationFrame(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})))}catch{}setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),24),setTimeout(()=>le(Ct=>({...Ct,selectedClients:[...Te.current||[]]})),96);return}}catch{}try{if(Date.now()<(ie.current||0))return}catch{}try{I.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{wr.current=!1}catch{}try{const ne=sessionStorage.getItem(cr),Ne=ne?JSON.parse(ne):[],Se=Array.isArray(Te.current)?Te.current:[];if(!(Array.isArray(Ne)&&Ne.length>0||Array.isArray(Se)&&Se.length>0)){try{Te.current=[]}catch{}try{Kn([])}catch{}le(Be=>({...Be,selectedClients:[]}))}}catch{try{Te.current=[]}catch{}try{Kn([])}catch{}le(ne=>({...ne,selectedClients:[]}))}}},[p,x]);const Qo=y.useRef(!1);y.useEffect(()=>{if(!p){Qo.current=!1;try{sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt"),sessionStorage.removeItem("agenda:customerPicker:sessionId"),sessionStorage.removeItem("agenda:modal:sessionId"),ae.current="",sessionStorage.removeItem(cr);try{Te.current=[]}catch{}try{Kn([])}catch{}try{Oe.current=!1}catch{}try{ie.current=0}catch{}try{V.current=0}catch{}try{E.current=0}catch{}try{C.current=null}catch{}try{I.current=!1}catch{}le(ne=>({...ne,selectedClients:[]})),Wr(null)}catch{}return}if(x)Qo.current=!1;else{if(Qo.current)return;Qo.current=!0;try{if(Date.now()<(ie.current||0))return}catch{}try{I.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{wr.current=!1}catch{}try{const ne=sessionStorage.getItem(cr),Ne=ne?JSON.parse(ne):[],Se=Array.isArray(Te.current)?Te.current:[];if(!(Array.isArray(Ne)&&Ne.length>0||Array.isArray(Se)&&Se.length>0)){try{Te.current=[]}catch{}try{Kn([])}catch{}le(Be=>({...Be,selectedClients:[]}))}}catch{try{Te.current=[]}catch{}try{Kn([])}catch{}le(ne=>({...ne,selectedClients:[]}))}}},[p,x]);const Lu=y.useCallback(async()=>{if(!Js){sc(!0);try{const ne=he[U.court];if(!ne){e({title:"Selecione uma quadra",variant:"destructive"}),vr.current=!1,br.current=!1;return}const Ne=U.startMinutes,Se=U.endMinutes;if(!(Number.isFinite(Ne)&&Number.isFinite(Se)&&Se>Ne)){e({title:"Horrio invlido",variant:"destructive"}),vr.current=!1,br.current=!1;return}if(!Es(Ne,Se)){e({title:"Conflito de horrio",description:"O horrio selecionado est ocupado.",variant:"destructive"}),vr.current=!1,br.current=!1;return}const Je=(gn,Cr)=>new Date(gn.getFullYear(),gn.getMonth(),gn.getDate(),Math.floor(Cr/60),Cr%60,0,0),st=Je(U.date,Ne),St=Je(U.date,Se);let Ct=Array.isArray(we.current)?we.current:[];if((!Ct||Ct.length===0)&&x?.id)try{const gn=Array.isArray(Te.current)?Te.current:[];gn&&gn.length>0&&(Ct=gn,le(Cr=>({...Cr,selectedClients:gn})))}catch{}const xr=Ct[0],zr=Ct.map(Le).filter(Boolean);if(!x?.id&&!xr?.id){e({title:"Selecione um cliente",description:"Para criar um agendamento, selecione pelo menos um cliente.",variant:"destructive"});return}if(x?.id){const gn=x.status,Cr=U.status!==gn,Yn={quadra_id:ne.id,cliente_id:xr?.id??null,clientes:zr,inicio:st.toISOString(),fim:St.toISOString(),modalidade:U.modality};if(!Cr){let Ca=U.status;try{const Xn=la(),co=st.getTime();if(!!yr?.autoConfirmEnabled&&Number.isFinite(Number(yr?.autoConfirmMinutesBefore))){const ha=Number(yr.autoConfirmMinutesBefore)*6e4,Za=co-ha;Ca==="confirmed"&&Xn<Za?Ca="scheduled":Ca==="scheduled"&&Xn>=Za&&(Ca="confirmed")}}catch{}Yn.status=Ca}const{error:zn}=await Pe.from("agendamentos").update(Yn).eq("codigo_empresa",c.codigo_empresa).eq("id",x.id);if(zn)throw zn;if(g(Ca=>Ca.map(Xn=>Xn.id===x.id?{...Xn,court:U.court,customer:xr?.nome||Xn.customer,start:st,end:St,modality:U.modality,...Cr?{}:{status:Yn.status??U.status}}:Xn)),Cr)try{v(!1),await Sn(x.id,U.status,"user")}catch{}e({title:"Agendamento atualizado"}),br.current=!0,vr.current=!1;try{Te.current=[]}catch{}try{Kn([])}catch{}try{sessionStorage.removeItem(cr)}catch{}v(!1);return}let en=null;try{const{data:gn}=await Pe.from("agendamentos").select("id, status, codigo").eq("codigo_empresa",c.codigo_empresa).eq("quadra_id",ne.id).eq("inicio",st.toISOString()).eq("fim",St.toISOString()).limit(1);Array.isArray(gn)&&gn.length>0&&(en=gn[0])}catch{}if(en?.id&&en.status!=="canceled"){const gn={id:en.id,code:en.codigo,court:U.court,customer:xr?.nome||zr[0]||"",start:st,end:St,status:U.status,modality:U.modality};g(Cr=>Cr.some(zn=>zn.id===en.id)?Cr:[...Cr,gn]),e({title:"Agendamento confirmado"}),br.current=!0,v(!1);return}const{data:Sa,error:pi}=await Pe.from("agendamentos").insert({codigo_empresa:c.codigo_empresa,quadra_id:ne.id,cliente_id:xr?.id??null,clientes:zr,inicio:st.toISOString(),fim:St.toISOString(),modalidade:U.modality,status:U.status}).select("id, codigo").single();if(pi)throw pi;const li={id:Sa.id,code:Sa.codigo,court:U.court,customer:xr?.nome||zr[0]||"",start:st,end:St,status:U.status,modality:U.modality};g(gn=>[...gn,li]),e({title:"Agendamento criado"});try{const gn=(U.selectedClients||[]).map(Cr=>({codigo_empresa:c.codigo_empresa,agendamento_id:Sa.id,cliente_id:Cr.id,nome:Cr.nome,valor_cota:0,status_pagamento:"Pendente"}));if(gn.length>0){const{error:Cr}=await Pe.from("agendamento_participantes").insert(gn);if(!Cr){const Yn=gn.map(zn=>({agendamento_id:zn.agendamento_id,cliente_id:zn.cliente_id,nome:U.selectedClients.find(Ca=>Ca.id===zn.cliente_id)?.nome||"",valor_cota:zn.valor_cota,status_pagamento:zn.status_pagamento}));_(zn=>({...zn,[Sa.id]:Yn}))}}}catch{}br.current=!0,vr.current=!1;try{Te.current=[]}catch{}try{Kn([])}catch{}try{sessionStorage.removeItem(cr)}catch{}v(!1)}catch(ne){e({title:"Erro ao salvar agendamento",description:ne?.message||"Tentando novamente automaticamente",variant:"destructive"})}finally{sc(!1)}}},[Js,he,U,x,c,Es,g,e,v,Sn]);y.useEffect(()=>{const ne=async()=>{if(!p||!c?.codigo_empresa)return;const Ne=String(c.codigo_empresa);if(lc.current!==Ne)try{Do(!0);try{const Je=`clientes:list:${c.codigo_empresa}`,st=JSON.parse(localStorage.getItem(Je)||"[]");if(Array.isArray(st)&&st.length>0){si(st);try{Ke(St=>JSON.stringify(St)===JSON.stringify(st)?St:st)}catch{}}}catch{}const{data:Se,error:Be}=await Pe.from("clientes").select("id, nome, codigo, email, telefone, status, codigo_empresa").eq("codigo_empresa",c.codigo_empresa).eq("status","active").order("nome",{ascending:!0});if(Be){console.error("Falha ao carregar clientes:",Be);return}if(Array.isArray(Se)){if(Se.length===0){let Je=0;try{const st=`clientes:list:${c.codigo_empresa}`,St=JSON.parse(localStorage.getItem(st)||"[]");Je=Array.isArray(St)?St.length:0}catch{}if(Je>0&&!Ol.current){Ol.current=!0,setTimeout(ne,700);return}}Ol.current=!1,lc.current=Ne,si(Se);try{const Je=`clientes:list:${c.codigo_empresa}`;localStorage.setItem(Je,JSON.stringify(Se))}catch{}try{Ke(Je=>JSON.stringify(Je)===JSON.stringify(Se)?Je:Se)}catch{}}}catch{}finally{Do(!1)}};ne()},[p,c?.codigo_empresa]),y.useEffect(()=>{const ne=he[U.court];if(!ne)return;const Ne=Number(ne.valor||0);if(!Number.isFinite(Ne)||Ne<=0)return;const Se=Math.max(0,U.endMinutes-U.startMinutes);if(Se<=0)return;const Be=Se/In,Je=Math.round(Ne*Be*100)/100;Xd(vc(String(Je.toFixed(2))))},[he,U.court,U.startMinutes,U.endMinutes]),y.useEffect(()=>{if(p&&!Ia.current)if(x){const ne=Wu(x.start)*60+Vu(x.start),Ne=Wu(x.end)*60+Vu(x.end),Se=w[x.id]||[],Be=Se.filter(St=>St&&St.cliente_id).map(St=>({id:St.cliente_id,nome:St.nome})).filter((St,Ct,xr)=>xr.findIndex(zr=>zr.id===St.id)===Ct),Je=he[x.court]?.modalidades||Bh,st=Je.includes(x.modality)?x.modality:Je[0]||"";le({selectedClients:Be,court:x.court,modality:st,status:x.status,date:pl(x.start),startMinutes:ne,endMinutes:Ne}),ra.current=!0,En(Se.map(St=>({cliente_id:St.cliente_id,nome:St.nome,valor_cota:(()=>{const Ct=Number.isFinite(Number(St.valor_cota))?Number(St.valor_cota):Gi(St.valor_cota);return vc(String((Number.isFinite(Ct)?Ct:0).toFixed(2)))})(),status_pagamento:St.status_pagamento||"Pendente",finalizadora_id:St.finalizadora_id?String(St.finalizadora_id):null}))),Wr(Be[0]?.id||null),Be.length===0&&(async()=>{try{const{data:St,error:Ct}=await Pe.from("agendamento_participantes").select("cliente_id, valor_cota, status_pagamento, finalizadora_id, cliente:clientes!agendamento_participantes_cliente_id_fkey ( nome )").eq("codigo_empresa",c.codigo_empresa).eq("agendamento_id",x.id);if(!Ct&&Array.isArray(St)){const xr=St.filter(zr=>zr&&zr.cliente_id).map(zr=>({id:zr.cliente_id,nome:zr.cliente?.nome||""})).filter((zr,en,Sa)=>Sa.findIndex(pi=>pi.id===zr.id)===en);le(zr=>({...zr,selectedClients:xr})),En(St.map(zr=>({cliente_id:zr.cliente_id,nome:zr.cliente?.nome||"",valor_cota:(()=>{const en=Number.isFinite(Number(zr.valor_cota))?Number(zr.valor_cota):Gi(zr.valor_cota);return vc(String((Number.isFinite(en)?en:0).toFixed(2)))})(),status_pagamento:zr.status_pagamento||"Pendente",finalizadora_id:zr.finalizadora_id?String(zr.finalizadora_id):null}))),Wr(xr[0]?.id||null)}}catch(St){console.error("Falha ao carregar participantes (fallback)",St)}})(),Ia.current=!0}else if(ot){const ne=(qe||[]).includes(ot.court)?ot.court:(qe||[])[0]||"";le({selectedClients:Oe.current?Array.isArray(U.selectedClients)?U.selectedClients:[]:[],court:ne,modality:(()=>(he[ne]?.modalidades||Bh)[0]||"")(),status:"scheduled",date:ot.date??f,startMinutes:ot.startMinutes??H(),endMinutes:ot.endMinutes??H()+60}),En([]),ra.current=!0,Ia.current=!0}else{const ne=qe[0]||"",Ne=he[ne]?.modalidades||Bh,Se=Array.isArray(ln)?ln:[],Be=Oe.current?Array.isArray(U.selectedClients)?U.selectedClients:[]:Se.length>0?Se:[];if(!Oe.current&&Se.length>0)try{Oe.current=!0}catch{}le({selectedClients:Be,court:ne,modality:Ne[0]||"",status:"scheduled",date:f,startMinutes:H(),endMinutes:H()+60}),En([]),ra.current=!0,Ia.current=!0}},[p,x,f,ot,qe,Bh,w]),y.useEffect(()=>{if(p&&x){Ia.current=!1,Ua.current=!1,Oe.current||le(ne=>({...ne,selectedClients:[]}));try{wr.current=!1}catch{}}},[x,p]),y.useEffect(()=>{if(!p||!x||Ua.current)return;const ne=w[x.id]||[];if(!ne.length)return;const Ne=ne.filter(Se=>Se&&Se.cliente_id).map(Se=>({id:Se.cliente_id,nome:Se.nome})).filter((Se,Be,Je)=>Je.findIndex(st=>st.id===Se.id)===Be);(U.selectedClients||[]).length===0&&Ne.length>0&&(le(Se=>({...Se,selectedClients:Ne})),En(ne.map(Se=>({cliente_id:Se.cliente_id,nome:Se.nome,valor_cota:(()=>{const Be=Number.isFinite(Number(Se.valor_cota))?Number(Se.valor_cota):Gi(Se.valor_cota);return vc(String((Number.isFinite(Be)?Be:0).toFixed(2)))})(),status_pagamento:Se.status_pagamento||"Pendente",finalizadora_id:Se.finalizadora_id||null}))),Wr(Ne[0]?.id||null),Ua.current=!0)},[p,x,w]);const fa=y.useMemo(()=>{const ne=he[U.court];if(!ne)return{start:lt*60,end:tr*60};const[Ne,Se]=String(ne.hora_inicio||"06:00:00").split(":").map(Number),[Be,Je]=String(ne.hora_fim||"24:00:00").split(":").map(Number);return{start:Ne*60+(Se||0),end:Be*60+(Je||0)}},[he,U.court,lt,tr]),Tl=y.useMemo(()=>{const ne=Hr(U.date,"yyyy-MM-dd"),Ne=Se=>Wu(Se)*60+Vu(Se);return m.filter(Se=>Se.court===U.court&&Hr(Se.start,"yyyy-MM-dd")===ne&&Se.status!=="canceled"&&(!x||Se.id!==x.id)).map(Se=>[Ne(Se.start),Ne(Se.end)]).sort((Se,Be)=>Se[0]-Be[0])},[m,U.court,U.date,x]),$u=(ne,Ne,Se,Be)=>ne<Be&&Se<Ne;function Es(ne,Ne){if(Ne<=ne||ne<fa.start||Ne>fa.end)return!1;for(const[Se,Be]of Tl)if($u(ne,Ne,Se,Be))return!1;return!0}const Kd=ne=>{let Ne=ne+In;if(!Es(ne,Ne))return null;for(;Ne+In<=fa.end&&Es(ne,Ne+In);)Ne+=In;return Ne},Ja=y.useMemo(()=>{const ne=fa,Ne=[];for(let Se=ne.start;Se<=ne.end-In;Se+=In){const Be=Es(Se,Se+In),Je=Math.floor(Se/60),st=Se%60;Ne.push({value:Se,label:`${String(Je).padStart(2,"0")}:${String(st).padStart(2,"0")}`,available:Be})}return Ne},[fa,Tl]),uc=y.useMemo(()=>{const ne=Kd(U.startMinutes),Ne=[];for(let Se=U.startMinutes+In;Se<=fa.end;Se+=In){const Be=!!ne&&Se<=ne,Je=Math.floor(Se/60),st=Se%60;Ne.push({value:Se,label:`${String(Je).padStart(2,"0")}:${String(st).padStart(2,"0")}`,available:Be})}return Ne},[U.startMinutes,Tl,fa]);y.useEffect(()=>{if(ra.current){ra.current=!1;return}const Ne=(()=>{if(Es(U.startMinutes,U.startMinutes+In))return U.startMinutes;for(let Je=Math.max(fa.start,U.startMinutes);Je<=fa.end-In;Je+=In)if(Es(Je,Je+In))return Je;for(let Je=fa.start;Je<=fa.end-In;Je+=In)if(Es(Je,Je+In))return Je;return U.startMinutes})();if(Ne!==U.startMinutes){le(Je=>({...Je,startMinutes:Ne}));return}const Se=Kd(Ne);if(!Se)return;let Be=U.endMinutes;(!Number.isFinite(Be)||Be<=Ne||Be>Se)&&(Be=Math.min(Ne+60,Se),Be<Ne+In&&(Be=Ne+In),le(Je=>({...Je,endMinutes:Be})))},[U.startMinutes,U.court,U.date,Tl,fa]);const Yd=y.useMemo(()=>he[U.court]?.modalidades||Bh,[he,U.court]);y.useEffect(()=>{const ne=he[U.court]?.modalidades||Bh;ne.includes(U.modality)||le(Ne=>({...Ne,modality:ne[0]||""}))},[U.court,he]);const xp=y.useMemo(()=>{const ne=Math.max(0,U.endMinutes-U.startMinutes),Ne=Math.floor(ne/60),Se=ne%60;return Ne>0&&Se>0?`${Ne}h ${Se}min`:Ne>0?`${Ne}h`:`${Se}min`},[U.startMinutes,U.endMinutes]),Zo=y.useMemo(()=>{if(!p)return"";const ne=new Date,Ne=Wu(ne)*60+Vu(ne),Se=Number(U.startMinutes),Be=Number(U.endMinutes),Je=st=>{const St=Math.floor(st/60),Ct=st%60;return`${String(St).padStart(2,"0")}:${String(Ct).padStart(2,"0")}`};if(yr.autoConfirmEnabled&&U.status==="scheduled"){const st=Math.max(0,Se-Number(yr.autoConfirmMinutesBefore||0));if(Ne<st)return`Este agendamento est com automao ativa (Confirmar automaticamente s ${Je(st)})`}return yr.autoStartEnabled&&U.status==="confirmed"&&Ne<Se?`Este agendamento est com automao ativa (Iniciar automaticamente s ${Je(Se)})`:yr.autoFinishEnabled&&U.status==="in_progress"&&Ne<Be?`Este agendamento est com automao ativa (Finalizar automaticamente s ${Je(Be)})`:""},[p,U.startMinutes,U.endMinutes,U.status,yr]),[ji,Xd]=y.useState(""),ks=y.useMemo(()=>(U.selectedClients||[]).length,[U.selectedClients]),Qa=y.useMemo(()=>{const Ne=(U.selectedClients||[]).map(Ct=>{const xr=ca.find(en=>en.cliente_id===Ct.id),zr=Gi(xr?.valor_cota);return Number.isFinite(zr)?zr:0}).reduce((Ct,xr)=>Ct+xr,0),Se=Gi(ji),Be=Number.isFinite(Se)?Se:0,Je=Number((Be-Ne).toFixed(2));let st=0,St=0;for(const Ct of U.selectedClients||[])(ca.find(en=>en.cliente_id===Ct.id)?.status_pagamento||"Pendente")==="Pago"?st++:St++;return{totalAssigned:Ne,totalTarget:Be,diff:Je,paid:st,pending:St}},[U.selectedClients,ca,ji]);y.useEffect(()=>{const ne=Gi(ji);if(!Number.isFinite(ne)||ne<=0)return;(ca||[]).some(Se=>Gi(Se?.valor_cota)>=ne)&&(ca||[]).some(Se=>Se.status_pagamento!=="Pago")&&En(Se=>Se.map(Be=>({...Be,status_pagamento:"Pago"})))},[ca,ji]);const Fu=y.useCallback(()=>{const ne=(U.selectedClients||[]).length;if(!ne)return;const Ne=Gi(ji);if(!Number.isFinite(Ne)||Ne<0)return;const Se=Math.round(Ne*100),Be=Math.floor(Se/ne);let Je=Se-Be*ne;En(st=>{const St=new Map(st.map(xr=>[xr.cliente_id,xr]));return(U.selectedClients||[]).slice().forEach((xr,zr)=>{const en=Be+(Je>0?1:0);Je>0&&Je--;const Sa=(en/100).toFixed(2),pi=vc(String(Sa)),li=Gi(pi),gn=St.get(xr.id)||{cliente_id:xr.id,nome:xr.nome,status_pagamento:"Pendente",valor_cota:""};gn.valor_cota=pi,gn.status_pagamento=Number.isFinite(li)&&li>0?"Pago":"Pendente",St.set(xr.id,gn)}),Array.from(St.values())})},[U.selectedClients,ji,En]),es=y.useCallback(()=>{En(ne=>ne.map(Ne=>({...Ne,valor_cota:"",status_pagamento:"Pendente"})))},[En]),zi=y.useCallback(()=>{try{I.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{C.current="close"}catch{}try{jt(!1),z(!1)}catch{}},[]);return s.jsxs(s.Fragment,{children:[s.jsx(rn,{open:!!Wt,onOpenChange:ne=>{if(!ne&&Wt){try{Wt.resolve(!1)}catch{}Yt(null)}},children:s.jsxs(Yr,{onOpenAutoFocus:ne=>ne.preventDefault(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Reativar automao?"}),s.jsx(cn,{children:"Ao reativar, este agendamento voltar a ser atualizado automaticamente (incio e trmino) pelas regras da agenda."})]}),s.jsx(Dn,{children:s.jsxs("div",{className:"ml-auto flex gap-2",children:[s.jsx(Ae,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>{try{Wt?.resolve(!1)}catch{}Yt(null)},children:"Cancelar"}),s.jsx(Ae,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white",onClick:()=>{try{Wt?.resolve(!0)}catch{}Yt(null)},children:"Reativar"})]})})]})}),s.jsx(rn,{open:p,onOpenChange:ne=>{if(ne)v(!0);else{try{const Ne=Date.now()<(E.current||0);if(M||zt||Ne){try{const Se={ts:new Date().toISOString(),hook:"Dialog:onOpenChange(blocked)",effectiveCustomerPickerOpen:M,isClientFormOpen:zt,suppressUntil:E.current,formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Array.isArray(we.current)?we.current.length:NaN,lastLen:Array.isArray(Te.current)?Te.current.length:NaN};console.warn("[CustomerPicker][DIALOG:block-close]",Se)}catch{}return}}catch{}try{const Ne={ts:new Date().toISOString(),hook:"Dialog:onOpenChange(allow-close)",effectiveCustomerPickerOpen:M,isClientFormOpen:zt,suppressUntil:E.current,formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Array.isArray(we.current)?we.current.length:NaN,lastLen:Array.isArray(Te.current)?Te.current.length:NaN};console.warn("[CustomerPicker][DIALOG:allow-close]",Ne)}catch{}v(!1),b(null),kt(null),As(!1),Ua.current=!1}},children:s.jsxs(Yr,{forceMount:!0,disableAnimations:!0,alignTop:!0,className:"sm:max-w-[960px] max-h-[85vh] min-h-[360px] flex flex-col p-0",onOpenAutoFocus:ne=>ne.preventDefault(),onInteractOutside:ne=>{try{const Ne=Date.now()<(E.current||0);if(Si||M||zt||Ne){try{const Se={ts:new Date().toISOString(),hook:"DialogContent:onInteractOutside(blocked)",effectiveCustomerPickerOpen:M,isClientFormOpen:zt,isPaymentModalOpen:Si,suppressUntil:E.current,formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Array.isArray(we.current)?we.current.length:NaN,lastLen:Array.isArray(Te.current)?Te.current.length:NaN}}catch{}ne.preventDefault();return}}catch{}},onEscapeKeyDown:ne=>{try{const Ne=Date.now()<(E.current||0);if(Si||M||zt||Ne){ne.preventDefault();return}}catch{}},children:[s.jsxs(nn,{className:"px-6 pt-6 pb-4 flex-shrink-0",children:[s.jsxs(Xr,{className:"flex items-center justify-between gap-3 flex-wrap",children:[s.jsx("span",{children:x?(()=>{const ne=x?.code,Ne=typeof ne=="number"?String(ne).padStart(3,"0"):null;return Ne?`Editar agendamento - ${Ne}`:"Editar Agendamento"})():"Novo Agendamento"}),x&&(()=>{Qa?.pending===0&&ks>0;const ne=(Qa?.pending||0)>0,Ne="inline-flex items-center gap-2 px-2.5 py-1 rounded-full border text-xs",Se="bg-emerald-600/10 text-emerald-400 border-emerald-700/30",Be="bg-amber-600/15 text-amber-400 border-amber-700/30",Je=st=>s.jsx("span",{"aria-hidden":!0,className:`inline-block w-2 h-2 rounded-full ${st}`});return s.jsxs("span",{className:`${Ne} ${ne?Be:Se}`,title:ne?"H pagamentos pendentes":"Todos participantes pagos","aria-live":"polite",children:[Je(ne?"bg-amber-400":"bg-emerald-400"),s.jsx("span",{className:"tracking-wide",children:"Pagos"}),s.jsx("strong",{className:"text-base font-semibold tabular-nums",children:Qa?.paid||0}),s.jsx("span",{className:"opacity-60",children:"/"}),s.jsx("span",{className:"text-base font-semibold tabular-nums",children:ks})]})})(),s.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-md border text-sm bg-white/5 border-white/10 text-text-primary",title:"Data do agendamento",children:[s.jsx(gu,{className:"w-4 h-4 opacity-80"}),s.jsxs("span",{className:"font-semibold",children:[Hr(U.date,"dd/MM/yyyy"),(()=>{const ne=Number(U?.startMinutes),Ne=Number(U?.endMinutes);if(!(Number.isFinite(ne)&&Number.isFinite(Ne)&&Ne>ne))return"";const Be=Je=>`${String(Math.floor(Je/60)).padStart(2,"0")}:${String(Je%60).padStart(2,"0")}`;return`  ${Be(ne)}${Be(Ne)}`})()]})]})]}),s.jsx(cn,{children:x?"Atualize os detalhes do agendamento.":"Preencha os detalhes para criar uma nova reserva."})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pb-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"font-bold",children:"Clientes"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsxs(Fd,{modal:!1,open:M,onOpenChange:ne=>{const Ne=Date.now(),Se=Ne<(V.current||0)||Ne<(E.current||0)||Ne<(gt.current||0)||me();if(console.log("[PickerEvt] onOpenChange",{ts:new Date().toISOString(),requestedOpen:ne,guardActive:Se,guards:{selectionLockUntil:V.current,suppressCloseUntil:E.current,pickerBlockUntil:gt.current,uiBusyUntil:$.current}}),!((zt||ta)&&ne===!1)){if(!ne&&Se){ke("onOpenChange:blocked:guard-window");return}if(!ne&&C.current!=="close"){ke("onOpenChange:blocked:sticky-close");return}if(ne){I.current=!0;try{localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}z(!0),ke("open:accepted")}else{I.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{const Be=Array.isArray(we.current)?[...we.current]:[];if(Be.length>0){hr.current="onOpenChange:close:preserve";try{sessionStorage.setItem(cr,JSON.stringify(Be))}catch{}Na(Be),Qs("onOpenChange:close:preserve",Be)}else wr.current||(hr.current="onOpenChange:close:empty",Qs("onOpenChange:close:empty",[]))}catch{}try{E.current=Date.now()+1500}catch{}try{const Be={ts:new Date().toISOString(),hook:"onOpenChange(false)",formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Array.isArray(we.current)?we.current.length:NaN,lastLen:Array.isArray(Te.current)?Te.current.length:NaN,chipsLen:Array.isArray(ln)?ln.length:NaN,clientsLoading:!!ta,lastAction:hr?.current,clearedByUser:!!wr?.current,suppressUntil:E.current};console.warn("[CustomerPicker][CLOSE:onOpenChange]",Be)}catch{}z(!1),ke("close:accepted")}!ne&&Nr.current&&(Zr(!0),Nr.current=!1,setTimeout(()=>Zr(!1),1200)),C.current=ne?"open":"close",jt(ne)}},children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{type:"button",variant:"outline",className:Et("min-w-[180px] justify-between",gr&&"ring-2 ring-emerald-500/40 ring-offset-2 ring-offset-transparent transition-shadow"),onClick:()=>{ke("trigger:click");try{C.current="open"}catch{}try{I.current=!0,localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}jt(!0),z(!0),setTimeout(()=>{jt(!0),z(!0),ke("trigger:reassert-open")},30),ke("trigger:after-set-open")},children:[yp,s.jsx(H2,{className:"w-4 h-4 ml-2 opacity-60"})]})}),s.jsx(ku,{forceMount:!0,side:"bottom",align:"start",className:"w-[360px] p-2 z-[9999]",onPointerDownOutside:ne=>{const Ne=Date.now(),Se=Ne<(V.current||0)||Ne<(E.current||0)||Ne<(gt.current||0)||me();if(console.log("[PickerEvt] onPointerDownOutside",{ts:new Date().toISOString(),guardActive:Se}),Se){ne.preventDefault();return}if(zt||ta){ne.preventDefault();return}try{const Be=Array.isArray(we.current)?[...we.current]:[];if(Be.length>0){hr.current="outside:close:snapshot",Te.current=Be;try{sessionStorage.setItem(cr,JSON.stringify(Be))}catch{}Na(Be),Qs("outside:close:apply",Be),wr.current=!1}else{if(hr.current="outside:close:empty",wr.current){Te.current=[];try{sessionStorage.removeItem(cr)}catch{}console.warn("[CustomerPicker][outside:close:empty:cleared]",{ts:new Date().toISOString()})}Qs("outside:close:empty",[])}}catch{}try{E.current=Date.now()+1500}catch{}try{const Be={ts:new Date().toISOString(),hook:"onPointerDownOutside",formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Array.isArray(we.current)?we.current.length:NaN,lastLen:Array.isArray(Te.current)?Te.current.length:NaN,chipsLen:Array.isArray(ln)?ln.length:NaN,clientsLoading:!!ta,lastAction:hr?.current,clearedByUser:!!wr?.current,suppressUntil:E.current}}catch{}Nr.current=!0,C.current="close",I.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}jt(!1),z(!1)},onFocusOutside:ne=>{ke("focusOutside"),(zt||ta)&&ne.preventDefault()},onEscapeKeyDown:ne=>{ke("escapeKeyDown"),(zt||ta)&&ne.preventDefault()},children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Mt,{ref:lo,placeholder:"Buscar cliente...",value:Kt,onChange:ne=>Qe(ne.target.value),className:"pr-10"}),Kt&&s.jsx("button",{type:"button","aria-label":"Limpar busca",className:"absolute right-2 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary p-1 rounded hover:bg-white/10",onClick:()=>{Qe(""),lo.current?.focus()},children:s.jsx(Vf,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"max-h-[260px] overflow-y-auto divide-y divide-border rounded-md border border-border",onWheel:ne=>{ne.stopPropagation()},onTouchMove:ne=>{ne.stopPropagation()},style:{overscrollBehavior:"contain"},children:[ta&&(na||[]).length===0&&s.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Carregando clientes"}),!ta&&(na||[]).length===0&&s.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Nenhum cliente encontrado"}),!ta&&(na||[]).filter(ne=>{const Ne=Kt.trim().toLowerCase();return Ne?String(Re(ne)||"").toLowerCase().includes(Ne):!0}).slice().sort((ne,Ne)=>{const Se=typeof ne=="object"&&Number.isFinite(Number(ne?.codigo))?Number(ne.codigo):1/0,Be=typeof Ne=="object"&&Number.isFinite(Number(Ne?.codigo))?Number(Ne.codigo):1/0;if(Se!==Be)return Se-Be;const Je=String(Le(ne)||"").toLowerCase(),st=String(Le(Ne)||"").toLowerCase();return Je.localeCompare(st)}).map(ne=>{const Ne=typeof ne=="object"?ne.id:null,Se=Le(ne),Be=String(Se||"").toLowerCase(),Je=St=>St.id&&Ne?St.id===Ne:String(St.nome||"").toLowerCase()===Be,st=(U.selectedClients||[]).some(Je);return s.jsxs("button",{type:"button",className:"w-full text-left py-2 px-3 hover:bg-white/5 flex items-center justify-between",onMouseDown:St=>{St.stopPropagation()},role:"option","aria-checked":st,onClick:()=>{if((Array.isArray(we.current)?we.current:[]).some(Je)){const Ct=(Array.isArray(we.current)?we.current:[]).filter(xr=>xr.id&&Ne?xr.id!==Ne:String(xr.nome||"").toLowerCase()!==Be);try{wr.current=Ct.length===0}catch{}try{Ct.length===0&&($e.current=null)}catch{}try{Ct.length>0&&(Te.current=Ct)}catch{}try{we.current=Ct}catch{}Qs("list:remove",Ct)}else{const Ct={id:Ne,nome:Se},xr=[...Array.isArray(we.current)?we.current:[],Ct];try{(we.current||[]).length===0&&($e.current=Ne||null)}catch{}try{wr.current=!1}catch{}try{xr.length>0&&(Te.current=xr)}catch{}try{we.current=xr}catch{}Qs("list:add",xr)}I.current=!0;try{localStorage.setItem("agenda:customerPicker:desiredAt",String(Date.now()))}catch{}},children:[s.jsx("span",{className:`truncate mr-2 ${st?"text-text-muted":""}`,children:Re(ne)}),st&&s.jsx(Bs,{className:`w-4 h-4 ${os.confirmed.text}`,"aria-label":"Selecionado"})]},Ne||Be)})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1",children:[s.jsx(Ae,{type:"button",size:"sm",className:"bg-emerald-600 hover:bg-emerald-500 text-white shadow-md ring-2 ring-emerald-400/40 ring-offset-2 ring-offset-transparent",onMouseDown:ne=>{try{E.current=Date.now()+3e3}catch{}try{V.current=Date.now()+3500}catch{}try{ie.current=Date.now()+5e3}catch{}try{C.current="close"}catch{}try{I.current=!1,localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}try{sessionStorage.setItem("agenda:customerPicker:closing","1"),sessionStorage.setItem("agenda:customerPicker:closingAt",String(Date.now()));const Ne=ae.current||sessionStorage.getItem("agenda:modal:sessionId")||"";Ne&&sessionStorage.setItem("agenda:customerPicker:sessionId",Ne);const Se=Array.isArray(we.current)?we.current:[];Se.length>0&&sessionStorage.setItem(cr,JSON.stringify(Se));try{const Be={ts:new Date().toISOString(),hook:"conclude:mousedown",modalSessionId:Ne,closingAt:sessionStorage.getItem("agenda:customerPicker:closingAt"),selLen:Array.isArray(Se)?Se.length:NaN,formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,lockUntil:V.current,suppressUntil:E.current,isPickerOpen:!!M,isModalOpen:!!p};console.warn("[CustomerPicker][CONCLUDE:mousedown]",Be)}catch{}}catch{}ne.stopPropagation()},onClick:()=>{C.current="close",I.current=!1;try{ie.current=Date.now()+5e3}catch{}try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}W.current=!0;const Ne=Array.isArray(we.current)?[...we.current]:[];try{Ne.length>0&&(hr.current="conclude:close:snapshot",Te.current=Ne,sessionStorage.setItem(cr,JSON.stringify(Ne)))}catch{}Na(Ne);try{V.current=Date.now()+3e3}catch{}Qs("conclude:close:apply",Ne),le(Se=>({...Se,selectedClients:[...Ne]}));try{wr.current=!1}catch{}try{E.current=Date.now()+2500}catch{}jt(!1),z(!1),setTimeout(()=>{try{E.current=Date.now()+2500}catch{}jt(!1),z(!1)},15),setTimeout(()=>{try{E.current=Date.now()+2500}catch{}jt(!1),z(!1)},120);try{E.current=Date.now()+2500}catch{}try{const Se={ts:new Date().toISOString(),hook:"conclude:click",formLen:Array.isArray(U?.selectedClients)?U.selectedClients.length:NaN,curLen:Array.isArray(we.current)?we.current.length:NaN,lastLen:Array.isArray(Te.current)?Te.current.length:NaN,chipsLen:Array.isArray(ln)?ln.length:NaN,clientsLoading:!!ta,lastAction:hr?.current,clearedByUser:!!wr?.current,suppressUntil:E.current,selectionLockUntil:V.current,restoreGuardUntil:We.current,modalSessionId:ae.current||sessionStorage.getItem("agenda:modal:sessionId")||"",closingAt:sessionStorage.getItem("agenda:customerPicker:closingAt"),pickerOpen:!!M,modalOpen:!!p};console.warn("[CustomerPicker][CLOSE:conclude]",Se)}catch{}setTimeout(()=>{try{W.current=!1}catch{}},3e3)},children:"Concluir"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-xs text-text-muted",children:[(_i||[]).length," selecionado(s)"]})})]})]})})]}),s.jsx(Ae,{type:"button",onClick:()=>{try{const ne=Array.isArray(we.current)?we.current:[];ne.length>0&&(Te.current=ne,sessionStorage.setItem(cr,JSON.stringify(ne)),Na(ne),console.warn("[CustomerPicker][+Novo:save-selection]",{savedCount:ne.length}))}catch{}I.current=!1;try{localStorage.removeItem("agenda:customerPicker:desiredAt")}catch{}C.current="close",jt(!1),z(!1),Vt(null),Ue(!0)},children:"+ Novo"})]}),Ru.length>0?s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Ru.map(ne=>{const Ne=String(ne?.nome||"").toLowerCase(),Se=ne?.id||Ne||Math.random().toString(36).slice(2),Be=ne?.id||`__name:${Ne}`;return s.jsxs("span",{className:"text-sm font-medium bg-white/5 border border-white/10 rounded px-2 py-1 flex items-center gap-2",children:[_7(ne.nome),s.jsxs("button",{type:"button","aria-label":"Remover cliente",title:"Remover cliente",className:"text-text-muted hover:text-red-400 p-1 rounded hover:bg-red-500/10",onClick:()=>{n("CustomerPicker:chip:remove",{token:Be});const Je=(Array.isArray(we.current)?we.current:[]).filter(st=>st?.id&&ne?.id?st.id!==ne.id:String(st?.nome||"").toLowerCase()!==Ne);try{wr.current=Je.length===0}catch{}try{Te.current=Je,Je.length===0&&(sessionStorage.removeItem(cr),console.warn("[CustomerPicker][chip:remove:cleared-all]",{ts:new Date().toISOString()}))}catch{}try{we.current=Je}catch{}Qs("chips:remove",Je)},children:[s.jsx(Vf,{className:"w-5 h-5"}),s.jsx("span",{className:"sr-only",children:"Remover"})]})]},Se)})}):null]}),s.jsxs("div",{children:[s.jsx(ct,{className:"font-bold",children:"Quadra"}),s.jsxs(kn,{value:U.court,onValueChange:ne=>le(Ne=>({...Ne,court:ne})),children:[s.jsx(An,{className:"mt-1",onMouseDown:()=>{M&&setTimeout(zi,0)},children:s.jsx(On,{children:U.court&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:yf(U.court)}}),s.jsx("span",{children:U.court})]})})}),s.jsx(Pn,{className:"z-[60]",children:qe.map(ne=>s.jsx(Ht,{value:ne,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:yf(ne)}}),s.jsx("span",{children:ne})]})},ne))})]})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"font-bold",children:"Modalidade"}),s.jsxs(kn,{value:U.modality,onValueChange:ne=>le(Ne=>({...Ne,modality:ne})),children:[s.jsx(An,{className:"mt-1",onMouseDown:()=>{M&&setTimeout(zi,0)},children:s.jsx(On,{})}),s.jsx(Pn,{children:(Yd||[]).map(ne=>s.jsx(Ht,{value:ne,children:ne},ne))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"font-bold",children:"Status"}),s.jsxs(kn,{value:U.status,onValueChange:ne=>le(Ne=>({...Ne,status:ne})),children:[s.jsx(An,{className:"mt-1",onMouseDown:()=>{M&&setTimeout(zi,0)},children:s.jsx(On,{})}),s.jsx(Pn,{children:Object.keys(os).map(ne=>s.jsx(Ht,{value:ne,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{"aria-hidden":!0,className:`inline-block h-4 w-1 rounded ${os[ne].accent}`}),os[ne].label]})},ne))})]}),Zo&&s.jsx("div",{className:"mt-1 text-xs text-text-secondary italic",children:Zo})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"font-bold",children:"Horrio"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs(kn,{value:String(U.startMinutes),onValueChange:ne=>le(Ne=>({...Ne,startMinutes:Number(ne)})),children:[s.jsx(An,{className:"w-32","aria-label":"Hora incio",onMouseDown:()=>{M&&setTimeout(zi,0)},children:s.jsx(On,{})}),s.jsx(Pn,{className:"max-h-[300px] z-[60] [&>div]:scrollbar-thin [&>div]:scrollbar-track-surface [&>div]:scrollbar-thumb-brand/40 [&>div]:hover:scrollbar-thumb-brand/60",children:Ja.map(ne=>s.jsx(Ht,{value:String(ne.value),disabled:!ne.available,className:Et(!ne.available&&"opacity-60"),children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[ne.available?s.jsx(Wg,{className:"w-4 h-4 opacity-80"}):s.jsx(Vg,{className:"w-4 h-4 opacity-80"}),ne.label]})},ne.value))})]}),s.jsxs(kn,{value:String(U.endMinutes),onValueChange:ne=>le(Ne=>({...Ne,endMinutes:Number(ne)})),children:[s.jsx(An,{className:"w-32","aria-label":"Hora fim",onMouseDown:()=>{M&&setTimeout(zi,0)},children:s.jsx(On,{})}),s.jsx(Pn,{className:"max-h-[300px] z-[60] [&>div]:scrollbar-thin [&>div]:scrollbar-track-surface [&>div]:scrollbar-thumb-brand/40 [&>div]:hover:scrollbar-thumb-brand/60",children:uc.map(ne=>s.jsx(Ht,{value:String(ne.value),disabled:!ne.available,className:Et(!ne.available&&"opacity-60"),children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[ne.available?s.jsx(Wg,{className:"w-4 h-4 opacity-80"}):s.jsx(Vg,{className:"w-4 h-4 opacity-80"}),ne.label]})},ne.value))})]})]}),s.jsxs("div",{className:"mt-1 inline-block text-xs font-semibold text-text-secondary bg-white/5 border border-white/10 rounded px-2 py-0.5",children:["Durao: ",xp]})]})]})]})}),s.jsx(Dn,{className:"flex-shrink-0 border-t border-border bg-surface px-6 py-3",children:s.jsxs("div",{className:"w-full flex flex-col gap-3 sm:flex-row sm:items-center",children:[x&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:mr-auto w-full sm:w-auto",children:[s.jsxs(Ae,{type:"button",variant:"destructive",className:"bg-red-600 hover:bg-red-500 text-white border border-red-700 w-full sm:w-auto justify-center",onClick:()=>Jo(!0),children:[s.jsx(K2,{className:"w-4 h-4 mr-2 opacity-90"}),"Cancelar agendamento"]}),s.jsxs(Ae,{type:"button",variant:"secondary",className:"bg-teal-600 hover:bg-teal-500 text-white border-teal-700 w-full sm:w-auto justify-center",onClick:()=>{As(!0)},children:[s.jsx(Ls,{className:"w-4 h-4 mr-2 opacity-90"})," Pagamentos"]})]}),s.jsx(Tf,{open:Ps,onOpenChange:Jo,children:s.jsxs(md,{children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Cancelar agendamento?"}),s.jsx(yd,{children:'Ao cancelar, este agendamento deixar de aparecer na agenda padro. Ele s ser visvel ao selecionar o filtro "Cancelados".'})]}),s.jsxs(gd,{children:[s.jsx(bd,{children:"Voltar"}),s.jsx(xd,{className:"bg-red-600 hover:bg-red-500",onClick:async()=>{try{Jo(!1),v(!1),await Sn(x.id,"canceled","user"),e({title:"Agendamento cancelado"})}catch(ne){e({title:"Erro ao cancelar",description:ne?.message||"Tente novamente."})}},children:"Confirmar cancelamento"})]})]})})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[s.jsx(Ae,{type:"button",variant:"ghost",className:"border border-white/10 flex-1 sm:flex-none",onClick:()=>v(!1),children:"Fechar"}),s.jsx(Ae,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white disabled:opacity-60 disabled:cursor-not-allowed flex-1 sm:flex-none",disabled:Js,onClick:async()=>{try{if(Js)return;vr.current=!0,br.current=!1,await Lu()}catch{}},children:"Salvar"})]})]})})]})}),x&&s.jsx(rn,{open:Si,onOpenChange:As,children:s.jsxs(Yr,{forceMount:!0,className:"sm:max-w-[960px] max-h-[90vh] overflow-y-auto",onOpenAutoFocus:ne=>ne.preventDefault(),onInteractOutside:ne=>{ne.preventDefault()},onEscapeKeyDown:ne=>{ne.preventDefault()},children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Registrar pagamento"}),s.jsx(cn,{children:"Gerencie valores, diviso e status de pagamento dos participantes."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 rounded-lg border border-border bg-gradient-to-br from-surface-2 to-surface shadow-md",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap md:items-end gap-3",children:[s.jsxs("div",{className:"space-y-1 w-full md:w-auto",children:[s.jsx(ct,{className:"font-bold",children:"Valor total a receber"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[s.jsx(Mt,{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:vc(ji),onChange:ne=>Xd(vc(ne.target.value)),className:"w-full sm:max-w-[180px]"}),s.jsx(Ae,{type:"button",variant:"secondary",size:"sm",className:"bg-sky-600 hover:bg-sky-500 text-white w-full sm:w-auto",onClick:Fu,disabled:!ji||ks===0,children:(()=>{const ne=Gi(ji),Ne=Number.isFinite(ne)&&ks>0,Se=Ne?ne/ks:0;return`Dividir igualmente${Ne?` (R$ ${Se.toFixed(2)} p/ cada)`:""}`})()}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",className:"border border-white/10 w-full sm:w-auto",onClick:es,disabled:ks===0,children:"Zerar valores"})]})]}),s.jsxs("div",{className:"ml-auto text-sm",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Participantes:"}),s.jsx("strong",{children:ks})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Atribudo:"}),s.jsxs("strong",{children:["R$ ",Qa.totalAssigned.toFixed(2)]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Alvo:"}),s.jsxs("strong",{children:["R$ ",Qa.totalTarget.toFixed(2)]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Diferena:"}),s.jsxs("strong",{className:Qa.diff===0?"text-emerald-500":Qa.diff>0?"text-amber-500":"text-rose-500",children:["R$ ",Qa.diff.toFixed(2)]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Pago:"}),s.jsx("strong",{children:Qa.paid})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-white/5 border border-white/10",children:[s.jsx("span",{className:"text-text-secondary",children:"Pendente:"}),s.jsx("strong",{children:Qa.pending})]})]}),(()=>{const ne=Qa.totalTarget>0?Qa.totalAssigned/Qa.totalTarget*100:0,Ne=Math.max(0,Math.min(100,ne)),Se=Ne>0&&Ne<1?1:Ne,Be=Qa.diff===0?"bg-emerald-500":Qa.diff>0?"bg-amber-500":"bg-rose-500";return s.jsxs("div",{className:"mt-2 w-full min-w-[280px]",children:[s.jsx("div",{className:"h-2 w-full rounded bg-white/10 overflow-hidden",children:s.jsx("div",{className:`h-full ${Be}`,style:{width:`${Se}%`}})}),s.jsxs("div",{className:"mt-1 text-sm font-medium text-text-muted",children:[Ne.toFixed(0),"% atribudo"]})]})})()]})]})}),(U.selectedClients||[]).length===0&&s.jsx("div",{className:"text-xs text-text-muted italic",children:'Nenhum participante neste agendamento. Adicione participantes no campo "Clientes" do modal principal.'}),(U.selectedClients||[]).length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative w-full max-w-[320px]",children:[s.jsx(Mt,{ref:ge,type:"text",placeholder:"Buscar participante...",value:O,onChange:ne=>K(ne.target.value),className:"pr-16"}),s.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-amber-400 hover:text-amber-300",onClick:()=>{K("");try{ge.current?.focus()}catch{}},children:"limpar"})]})}),$n?.type==="pending"&&s.jsxs("div",{role:"alert",className:"mb-2 rounded-md border border-amber-600/40 bg-amber-500/10 px-3 py-2 text-amber-200 flex items-start gap-3",children:[s.jsx("div",{className:"mt-0.5",children:s.jsx(Ug,{className:"w-4 h-4 text-amber-300"})}),s.jsxs("div",{className:"flex-1 text-sm",children:[s.jsx("strong",{children:"Ateno:"})," Existem ",s.jsx("strong",{children:$n.count})," participante(s) com status ",s.jsx("strong",{children:"Pendente"}),".",s.jsxs("span",{className:"ml-1",children:["Marque como ",s.jsx("strong",{children:"Pago"})," antes de salvar."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-white/10 hover:bg-white/15 border border-white/10",onClick:()=>{const ne=$n.firstPendingId;if(ne){Wr(ne);const Ne=document.getElementById(`payment-row-${ne}`);Ne&&Ne.scrollIntoView({behavior:"smooth",block:"center"})}},children:"Ver pendentes"}),s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-amber-500/20 hover:bg-amber-500/30 border border-amber-600/40",onClick:()=>Ta(null),children:"Entendi"})]})]}),s.jsxs("div",{className:"border border-border rounded-md overflow-hidden",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 items-center px-3 py-2 bg-surface-2 text-[11px] uppercase tracking-wide text-text-secondary",children:[s.jsx("div",{className:"col-span-5",children:"Participante"}),s.jsx("div",{className:"col-span-3",children:"Finalizadora"}),s.jsx("div",{className:"col-span-2",children:"Valor"}),s.jsx("div",{className:"col-span-1 flex items-center justify-between pr-2",children:s.jsx("span",{children:"Status"})}),s.jsx("div",{className:"col-span-1 text-right",children:"Aes"})]}),s.jsx("div",{className:"divide-y divide-border max-h-[50vh] overflow-y-auto fx-scroll",children:(()=>{const ne=O.trim().toLowerCase(),Ne=(U.selectedClients||[]).filter(Se=>!ft.includes(Se.id)).filter(Se=>ne?String(Se?.nome||"").toLowerCase().includes(ne):!0);return Ne.length===0?s.jsx("div",{className:"px-3 py-4 text-sm text-text-muted",children:"Nenhum participante com esse nome"}):Ne.map(Se=>{const Be=ca.find(st=>st.cliente_id===Se.id);Be?console.log("[PaymentModal] Cliente encontrado:",{cliente_id:Se.id,finalizadora_id:Be.finalizadora_id}):console.warn("[PaymentModal] Cliente no encontrado em participantsForm:",{buscando_id:Se.id,buscando_nome:Se.nome,participantsForm_length:ca.length,participantsForm_ids:ca.map(st=>({id:st.cliente_id,fin:st.finalizadora_id}))});const Je=Be||{cliente_id:Se.id,nome:Se.nome,valor_cota:"",status_pagamento:"Pendente",finalizadora_id:Oa[0]?.id?String(Oa[0].id):null};return s.jsxs("div",{id:`payment-row-${Se.id}`,className:`${$n?.type==="pending"&&Je.status_pagamento!=="Pago"?"bg-amber-500/5":""}`,children:[s.jsxs("div",{className:"md:hidden p-3 space-y-3",children:[s.jsx("div",{className:"font-semibold text-base",children:Se.nome}),s.jsxs("div",{children:[s.jsx(ct,{className:"text-xs text-text-muted mb-1",children:"Finalizadora"}),s.jsxs(kn,{value:String(Je.finalizadora_id||Oa[0]?.id||""),onValueChange:st=>{En(St=>{const Ct=[...St],xr=Ct.findIndex(zr=>zr.cliente_id===Se.id);return xr>=0?Ct[xr]={...Ct[xr],finalizadora_id:st}:Ct.push({cliente_id:Se.id,nome:Se.nome,valor_cota:Je.valor_cota||"",status_pagamento:Je.status_pagamento||"Pendente",finalizadora_id:st}),Ct})},children:[s.jsx(An,{className:"w-full h-10",children:s.jsx(On,{placeholder:"Selecione"})}),s.jsx(Pn,{className:"bg-surface border border-border",children:Oa.map(st=>s.jsx(Ht,{value:String(st.id),children:st.nome||st.tipo||"Outros"},st.id))})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ct,{className:"text-xs text-text-muted mb-1",children:"Valor"}),s.jsx(Mt,{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:vc(Je.valor_cota),onChange:st=>{const St=vc(st.target.value),Ct=Gi(St),xr=Number.isFinite(Ct)&&Ct>0?"Pago":"Pendente";En(zr=>{let en=[...zr];const Sa=en.findIndex(li=>li.cliente_id===Se.id);Sa>=0?en[Sa]={...en[Sa],valor_cota:St,status_pagamento:xr}:en=[...en,{cliente_id:Se.id,nome:Se.nome,valor_cota:St,status_pagamento:xr}];const pi=Gi(ji);return Number.isFinite(pi)&&Gi(St)>=pi&&(en=en.map(gn=>({...gn,status_pagamento:"Pago"}))),en})},className:"text-sm"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ct,{className:"text-xs text-text-muted mb-1",children:"Status"}),s.jsx("div",{className:`flex items-center justify-center h-10 px-3 rounded text-sm font-medium border w-full select-none ${Je.status_pagamento==="Pago"?"bg-emerald-600/20 text-emerald-400 border-emerald-700/40":"bg-amber-600/20 text-amber-400 border-amber-700/40"}`,children:Je.status_pagamento==="Pago"?"Pago":"Pendente"})]})]}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400 w-full",onClick:()=>{Bt(st=>st.includes(Se.id)?st:[...st,Se.id]),En(st=>st.filter(St=>St.cliente_id!==Se.id))},children:"Remover participante"})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-12 items-center px-3 py-2",children:[s.jsx("div",{className:"col-span-5 truncate text-[15px] font-medium",children:Se.nome}),s.jsx("div",{className:"col-span-3 pr-2",children:s.jsxs(kn,{value:String(Je.finalizadora_id||Oa[0]?.id||""),onValueChange:st=>{En(St=>{const Ct=[...St],xr=Ct.findIndex(zr=>zr.cliente_id===Se.id);return xr>=0?Ct[xr]={...Ct[xr],finalizadora_id:st}:Ct.push({cliente_id:Se.id,nome:Se.nome,valor_cota:Je.valor_cota||"",status_pagamento:Je.status_pagamento||"Pendente",finalizadora_id:st}),Ct})},children:[s.jsx(An,{className:"h-8 text-sm max-w-[140px]",children:s.jsx(On,{placeholder:"Selecione"})}),s.jsx(Pn,{className:"bg-surface border border-border",children:Oa.map(st=>s.jsx(Ht,{value:String(st.id),children:st.nome||st.tipo||"Outros"},st.id))})]})}),s.jsx("div",{className:"col-span-2 pr-2",children:s.jsx(Mt,{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:vc(Je.valor_cota),onChange:st=>{const St=vc(st.target.value),Ct=Gi(St),xr=Number.isFinite(Ct)&&Ct>0?"Pago":"Pendente";En(zr=>{let en=[...zr];const Sa=en.findIndex(li=>li.cliente_id===Se.id);Sa>=0?en[Sa]={...en[Sa],valor_cota:St,status_pagamento:xr}:en=[...en,{cliente_id:Se.id,nome:Se.nome,valor_cota:St,status_pagamento:xr}];const pi=Gi(ji);return Number.isFinite(pi)&&Gi(St)>=pi&&(en=en.map(gn=>({...gn,status_pagamento:"Pago"}))),en})},className:"w-24 md:w-28 text-sm"})}),s.jsx("div",{className:"col-span-1 pr-2",children:s.jsx("span",{className:`inline-flex items-center justify-center h-8 px-2 rounded text-sm font-medium border w-full select-none ${Je.status_pagamento==="Pago"?"bg-emerald-600/20 text-emerald-400 border-emerald-700/40":"bg-amber-600/20 text-amber-400 border-amber-700/40"}`,title:Je.status_pagamento==="Pago"?"Status automtico: Pago (valor > 0)":"Status automtico: Pendente (valor = 0)",children:Je.status_pagamento==="Pago"?"Pago":"Pendente"})}),s.jsx("div",{className:"col-span-1 text-right",children:s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-400",onClick:()=>{Bt(st=>st.includes(Se.id)?st:[...st,Se.id]),En(st=>st.filter(St=>St.cliente_id!==Se.id))},children:"Remover"})})]})]},Se.id)})})()})]})]}),s.jsxs(Dn,{className:"gap-2",children:[s.jsx(Ae,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>As(!1),children:"Cancelar"}),s.jsx(Ae,{type:"button",className:"bg-emerald-600 hover:bg-emerald-500 text-white disabled:opacity-60 disabled:cursor-not-allowed",disabled:bo,onClick:async()=>{const Ne=`[PaymentsSave Trace ${Date.now()}]`;try{console.groupCollapsed(Ne)}catch{}try{const Se={modalOpen:Si,isSavingPayments:bo,bookingId:x?.id,company:c?.codigo_empresa,participantsCount:ks,selectedClientIds:(U?.selectedClients||[]).map(Cr=>Cr?.id),hiddenIds:[...ft||[]],paymentTotal:ji};try{console.info("[PaymentsSave] click",Se)}catch{}if(bo){try{console.warn("[PaymentsSave] ignored: already saving")}catch{}return}Mu(!0);try{console.debug("[PaymentsSave] state set: isSavingPayments=true")}catch{}const Be=x?.id,Je=c?.codigo_empresa;if(!Be||!Je){try{console.error("[PaymentsSave] missing identifiers",{agendamentoId:Be,codigo:Je})}catch{}e({title:"Erro ao salvar pagamentos",description:"Agendamento ou empresa indisponvel.",variant:"destructive"});return}const st=Date.now();let St,Ct,xr;try{St=new Map((ca||[]).map(Cr=>[Cr.cliente_id,Cr])),Ct=(U.selectedClients||[]).filter(Cr=>!ft.includes(Cr.id)),xr=Ct.reduce((Cr,Yn)=>{const zn=St.get(Yn.id)?.status_pagamento||"Pendente";return Cr+(zn!=="Pago"?1:0)},0)}catch(Cr){try{console.error("[PaymentsSave] calc error",Cr,{participantsForm:ca,formSelected:U?.selectedClients,paymentHiddenIds:ft})}catch{}e({title:"Erro ao processar participantes",description:"Tente novamente.",variant:"destructive"});return}try{console.debug("[PaymentsSave] pendingCount",{pendingCount:xr,effectiveSelected:Ct.map(Cr=>Cr.id)})}catch{}const zr=Date.now(),{error:en}=await Pe.from("agendamento_participantes").delete().eq("codigo_empresa",Je).eq("agendamento_id",Be);if(en)throw console.error("[ParticipantsSave] Delete error",en),e({title:"Erro ao salvar pagamentos",description:"Falha ao limpar registros anteriores.",variant:"destructive"}),en;try{console.debug("[PaymentsSave] delete ok",{ms:Date.now()-zr})}catch{}console.log("[PaymentsSave] ANTES DE MONTAR ROWS:",{effectiveSelected:Ct.map(Cr=>({id:Cr.id,nome:Cr.nome})),participantsForm:ca,payMethods:Oa.map(Cr=>({id:Cr.id,nome:Cr.nome}))});const Sa=Ct.map(Cr=>{const Yn=ca.find(co=>co.cliente_id===Cr.id);Yn||console.error("[PaymentsSave]  Participante no encontrado em participantsForm:",{cliente_id:Cr.id,nome:Cr.nome,participantsFormLen:ca.length});const zn=Gi(Yn?.valor_cota),Ca=Yn?.finalizadora_id||(Oa[0]?.id?String(Oa[0].id):null),Xn={codigo_empresa:Je,agendamento_id:Be,cliente_id:Cr.id,nome:Cr.nome,valor_cota:Number.isFinite(zn)?zn:0,status_pagamento:Yn?.status_pagamento||"Pendente",finalizadora_id:Ca};return console.log("[PaymentsSave] Row montada:",{cliente:Cr.nome,finalizadora_id:Ca,pf:Yn}),Xn});console.log("[PaymentsSave]  TODAS AS ROWS MONTADAS:",Sa);try{console.debug("[PaymentsSave] rows prepared",{count:Sa.length,sample:Sa.slice(0,3)})}catch{}if(Sa.length>0){const Cr=Date.now(),{data:Yn,error:zn}=await Pe.from("agendamento_participantes").insert(Sa).select();if(zn)throw e({title:"Erro ao salvar pagamentos",description:"Falha ao inserir pagamentos.",variant:"destructive"}),zn;try{console.debug("[PaymentsSave] insert ok",{insertedCount:Yn?.length||0,ms:Date.now()-Cr})}catch{}}else try{console.warn("[PaymentsSave] no rows to insert")}catch{}try{if((ft||[]).length>0){const Cr=Ct,Yn=Cr[0]||null,zn=Cr.map(Xn=>Xn?.nome).filter(Boolean),Ca=Date.now();await Pe.from("agendamentos").update({cliente_id:Yn?.id??null,clientes:zn}).eq("codigo_empresa",Je).eq("id",Be);try{console.debug("[PaymentsSave] booking updated after removals",{primaryId:Yn?.id||null,count:Cr.length,ms:Date.now()-Ca})}catch{}le(Xn=>({...Xn,selectedClients:Cr})),g(Xn=>Xn.map(co=>co.id===Be?{...co,customer:Yn?.nome||""}:co))}}catch{}try{const Cr=Date.now(),{data:Yn,error:zn}=await Pe.from("agendamento_participantes").select("id, agendamento_id, codigo_empresa, cliente_id, nome, valor_cota, status_pagamento, finalizadora_id").eq("codigo_empresa",Je).eq("agendamento_id",Be);if(!zn){_(Ca=>{const Xn={...Ca,[Be]:Yn||[]};try{fr&&localStorage.setItem(fr,JSON.stringify(Xn))}catch{}return Xn});try{console.debug("[PaymentsSave] refresh participants ok",{count:Yn?.length||0,ms:Date.now()-Cr})}catch{}}}catch(Cr){try{console.warn("[PaymentsSave] refresh participants failed",Cr)}catch{}}const pi=Gi(ji),li=Number.isFinite(pi)?pi:0,gn=(U.selectedClients||[]).reduce((Cr,Yn)=>{const zn=ca.find(Xn=>Xn.cliente_id===Yn.id),Ca=Gi(zn?.valor_cota);return Cr+(Number.isFinite(Ca)?Ca:0)},0);try{console.info("[PaymentsSave] totals",{totalTarget:li,totalAssigned:gn,pendingCount:xr})}catch{}li>0&&gn<li-.005?e({title:"Pagamentos salvos",description:"Total no alcanado.",variant:"warning"}):xr>0?e({title:"Pagamentos salvos",description:`Pendentes: ${xr}`,variant:"warning"}):e({title:"Pagamentos salvos",variant:"success"}),Ta(null);try{console.info("[PaymentsSave] done",{ms:Date.now()-st})}catch{}As(!1),v(!1)}catch(Se){e({title:"Erro ao salvar pagamentos",description:"Tente novamente.",variant:"destructive"}),console.error("[PaymentsSave] error",Se)}finally{Mu(!1);try{console.groupEnd()}catch{}}},children:"Salvar Pagamentos"})]})]})]})}),s.jsx(Dee,{open:zt,onOpenChange:ne=>{Ue(ne),ne||Vt(null)},client:Dt,onSaved:ne=>{try{if(ne&&typeof ne=="object"){console.warn("[CustomerPicker][onSaved:START]",{clientId:ne.id,clientName:ne.nome,currentSelection:Array.isArray(we.current)?we.current.length:0});try{ie.current=Date.now()+3e3,V.current=Date.now()+3e3,We.current=Date.now()+3e3}catch{}(na||[]).some(Se=>typeof Se=="object"?Se.id===ne.id:!1)||(si(Se=>[...Se||[],ne]),Ke(Se=>[...Se||[],ne])),le(Se=>{const Be=Array.isArray(Se.selectedClients)?Se.selectedClients:[],Je={id:ne.id,nome:ne.nome||ne.name||Le(ne),codigo:ne.codigo},st=Be.filter(Ct=>Ct.id!==ne.id),St=[Je,...st];try{we.current=St}catch{}try{Te.current=St}catch{}try{Na(St)}catch{}try{sessionStorage.setItem(cr,JSON.stringify(St))}catch{}try{wr.current=!1}catch{}return console.warn("[CustomerPicker][onSaved:COMPLETE]",{newClientId:ne.id,newClientName:ne.nome,totalSelected:St.length,refsSynced:!0,protectionActive:!0}),{...Se,selectedClients:St}}),Promise.resolve().then(()=>{try{const Se=Array.isArray(we.current)?we.current:[];Se.length>0&&(le(Be=>({...Be,selectedClients:[...Se]})),console.warn("[CustomerPicker][onSaved:REASSERT]",{count:Se.length}))}catch{}})}}catch(Ne){console.error("[CustomerPicker][onSaved:ERROR]",Ne)}}})]})},Zt=y.useMemo(()=>{const ie=Hr(f,"yyyy-MM-dd");let ae=m.filter(Re=>Hr(Re.start,"yyyy-MM-dd")===ie);if(ae=X.canceledOnly?ae.filter(Re=>Re.status==="canceled"):ae.filter(Re=>Re.status!=="canceled"),X.pendingPayments&&(ae=ae.filter(Re=>{const Le=w[Re.id]||[];return Le.some(H=>String(H.status_pagamento||"").toLowerCase()!=="pago")&&Le.length>0})),yt.trim()){const Re=yt.trim().toLowerCase();ae=ae.filter(Le=>(Le.customer||"").toLowerCase().includes(Re)||(Le.court||"").toLowerCase().includes(Re)||(os[Le.status]?.label||"").toLowerCase().includes(Re))}return X.scheduled||X.canceledOnly||X.pendingPayments?ae:[]},[m,f,X.scheduled,X.canceledOnly,X.pendingPayments,yt,w]);y.useEffect(()=>{if(!yt.trim()||!(X.scheduled||X.canceledOnly||X.pendingPayments)||!Zt||Zt.length===0)return;const ie=[...Zt].sort((Re,Le)=>Re.start-Le.start)[0];if(!ie?.id)return;const ae=document.getElementById(`booking-${ie.id}`);ae?.scrollIntoView&&ae.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},[yt,Zt,X.scheduled,X.canceledOnly,X.pendingPayments]),y.useEffect(()=>{const ie=Ge.current,ae=bt.current||{},Re=X.canceledOnly&&!ae.canceledOnly,Le=X.scheduled&&!ae.scheduled&&!X.canceledOnly,_t=X.pendingPayments&&!ae.pendingPayments;if(!ie||!Re&&!Le&&!_t){bt.current={scheduled:X.scheduled,canceledOnly:X.canceledOnly,pendingPayments:X.pendingPayments};return}const H=Zt||[];if(H.length===0){bt.current={scheduled:X.scheduled,canceledOnly:X.canceledOnly,pendingPayments:X.pendingPayments};return}const U=ie.getBoundingClientRect();if(!H.some(we=>{const Oe=document.getElementById(`booking-${we.id}`);if(!Oe)return!1;const $e=Oe.getBoundingClientRect();return $e.bottom>U.top&&$e.top<U.bottom})){const we=[...H].sort(($e,He)=>$e.start-He.start)[0],Oe=we&&document.getElementById(`booking-${we.id}`);Oe?.scrollIntoView&&Oe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}bt.current={scheduled:X.scheduled,canceledOnly:X.canceledOnly,pendingPayments:X.pendingPayments}},[X.scheduled,X.canceledOnly,X.pendingPayments,Zt]);const kr=y.useMemo(()=>{if(!Ze||!he[Ze])return{start:lt,end:tr};const ie=he[Ze],ae=ie.hora_inicio||`${lt}:00:00`,Re=ie.hora_fim||`${tr}:00:00`,[Le,_t]=String(ae).split(":").map(Number),[H,U]=String(Re).split(":").map(Number);return{start:Le||lt,end:H||tr,startMinutes:(Le||0)*60+(_t||0),endMinutes:(H||0)*60+(U||0)}},[Ze,he,lt,tr]);return y.useMemo(()=>{const ie=kr.start,ae=kr.end;return Array.from({length:Math.max(0,ae-ie)},(Re,Le)=>ie+Le)},[kr]),y.useMemo(()=>{const ie=kr.start,ae=kr.end;return Math.max(0,ae-ie)*(60/In)*is},[kr]),s.jsxs(s.Fragment,{children:[s.jsxs(ur.div,{variants:p?void 0:ZWe,initial:p?!1:"hidden",animate:p?!1:"visible",className:"h-full flex flex-col md:px-0",children:[s.jsx(ur.div,{variants:j7,className:"p-3 bg-surface mb-6 md:rounded-lg",children:s.jsxs("div",{className:"max-w-[1200px] mx-auto w-full flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ae,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>h(i2(f,1)),children:s.jsx(IW,{className:"h-5 w-5"})}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"ghost",className:"w-full sm:w-auto max-w-full justify-center text-base font-semibold whitespace-nowrap truncate",children:[s.jsx(gu,{className:"mr-2 h-5 w-5"}),s.jsx("span",{className:"hidden sm:inline",children:Hr(f,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:rd})}),s.jsx("span",{className:"sm:hidden",children:Hr(f,"EEEE, dd/MM/yyyy",{locale:rd})})]})}),s.jsx(ku,{className:"w-auto p-0",children:s.jsx(_u,{mode:"single",selected:f,onSelect:ie=>ie&&h(ie),initialFocus:!0})})]}),s.jsx(Ae,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>h(Ri(f,1)),children:s.jsx(aj,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-3 justify-end",children:[s.jsxs("div",{className:"relative w-full sm:w-56",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar agendamento...",className:"pl-9",value:yt,onChange:ie=>je(ie.target.value),onBlur:()=>je("")}),yt&&s.jsx("button",{type:"button","aria-label":"Limpar busca",className:"absolute right-2 top-1/2 -translate-y-1/2 px-2 py-0.5 rounded text-xs font-medium text-primary hover:bg-surface-2",onClick:()=>je(""),children:"Limpar"})]}),s.jsxs(Ae,{size:"sm",onClick:()=>{b(null),kt(null);try{sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt")}catch{}J()},"aria-label":"Novo agendamento",className:"gap-2",disabled:qe.length===0,children:[s.jsx(ri,{className:"h-4 w-4"})," Agendar"]}),s.jsxs(Ex,{children:[s.jsx(kx,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",size:"sm",className:"gap-2",disabled:qe.length===0,children:[s.jsx(vce,{className:"h-4 w-4"})," Filtros"]})}),s.jsxs(Eg,{align:"end",className:"w-64",children:[s.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5",children:[s.jsx(gee,{className:"p-0",children:"Exibio"}),s.jsx(Ae,{variant:"ghost",size:"sm",className:"h-7 text-xs text-text-muted hover:text-text-primary",onClick:()=>Z({scheduled:!0,available:!0,canceledOnly:!1,pendingPayments:!1}),children:"Limpar"})]}),s.jsx(PO,{}),s.jsx(zl,{onClick:ie=>ie.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gu,{className:"h-4 w-4 text-text-muted"}),s.jsx("span",{children:"Agendados"})]}),s.jsx(Sc,{checked:X.scheduled,onCheckedChange:ie=>Z(ae=>({...ae,scheduled:!!ie,canceledOnly:ie?!1:ae.canceledOnly}))})]})}),s.jsx(zl,{onClick:ie=>ie.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yce,{className:"h-4 w-4 text-text-muted"}),s.jsx("span",{children:"Livres"})]}),s.jsx(Sc,{checked:X.available,onCheckedChange:ie=>Z(ae=>({...ae,available:!!ie,canceledOnly:ie?!1:ae.canceledOnly}))})]})}),s.jsx(zl,{onClick:ie=>ie.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K2,{className:"h-4 w-4 text-rose-400"}),s.jsx("span",{children:"Cancelados"})]}),s.jsx(Sc,{checked:X.canceledOnly,onCheckedChange:ie=>{const ae=!!ie;Z(Re=>({...Re,canceledOnly:ae,scheduled:ae?!1:Re.scheduled,available:ae?!1:Re.available})),ae&&!Lt&&Rt(!0)}})]})}),s.jsx(zl,{onClick:ie=>ie.preventDefault(),children:s.jsxs("div",{className:"flex items-center justify-between gap-3 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ls,{className:"h-4 w-4 text-warning"}),s.jsx("span",{children:"Pagamentos Pendentes"})]}),s.jsx(Sc,{checked:X.pendingPayments,onCheckedChange:ie=>Z(ae=>({...ae,pendingPayments:!!ie}))})]})})]})]}),s.jsx(Ae,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>fn(!0),disabled:qe.length===0,"aria-label":"Configurar agenda",title:"Configurar agenda",children:s.jsx(sE,{className:"h-5 w-5"})})]})]})}),s.jsx(rn,{open:ia,onOpenChange:ie=>{ie||Er(Dr),fn(ie)},children:s.jsxs(Yr,{className:"sm:max-w-[680px]",onOpenAutoFocus:ie=>ie.preventDefault(),children:[s.jsx(nn,{className:"pb-3 border-b border-border bg-surface-2/40 rounded-t-lg px-2 -mx-2 -mt-2",children:s.jsx(Xr,{className:"text-base font-semibold tracking-tight",children:"Configuraes da Agenda"})}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[s.jsx(Bs,{className:"h-4 w-4",style:{color:os.confirmed.hex}}),s.jsx("span",{className:"text-sm font-medium",children:"Confirmao automtica"})]}),s.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-3",style:{borderLeftWidth:3,borderLeftColor:os.confirmed.hex},children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sc,{id:"autoConfirmEnabled",checked:yr.autoConfirmEnabled,onCheckedChange:ie=>Er(ae=>({...ae,autoConfirmEnabled:!!ie}))}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:os.confirmed.hex}}),s.jsx(ct,{htmlFor:"autoConfirmEnabled",className:"font-medium",children:"Confirmao automtica"})]})]})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ct,{className:"text-sm text-text-muted",children:"Confirmar se faltar"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(kn,{value:String(Math.max(0,Math.round((yr.autoConfirmMinutesBefore||0)/60))),onValueChange:ie=>Er(ae=>({...ae,autoConfirmMinutesBefore:Math.max(0,Number(ie))*60})),disabled:!yr.autoConfirmEnabled,children:[s.jsx(An,{className:"w-32",children:s.jsx(On,{placeholder:"Horas"})}),s.jsxs(Pn,{align:"start",children:[s.jsx(Ht,{value:"0",children:"Imediato"}),s.jsx(Ht,{value:"1",children:"1 h"}),s.jsx(Ht,{value:"2",children:"2 h"}),s.jsx(Ht,{value:"3",children:"3 h"}),s.jsx(Ht,{value:"4",children:"4 h"}),s.jsx(Ht,{value:"6",children:"6 h"}),s.jsx(Ht,{value:"8",children:"8 h"}),s.jsx(Ht,{value:"12",children:"12 h"}),s.jsx(Ht,{value:"24",children:"24 h"})]})]}),s.jsx("span",{className:"text-sm text-text-muted",children:"antes"})]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[s.jsx(RW,{className:"h-4 w-4",style:{color:os.in_progress.hex}}),s.jsx("span",{className:"text-sm font-medium",children:"Transies automticas"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-2",style:{borderLeftWidth:3,borderLeftColor:os.in_progress.hex},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sc,{id:"autoStartEnabled",checked:yr.autoStartEnabled,onCheckedChange:ie=>Er(ae=>({...ae,autoStartEnabled:!!ie}))}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:os.in_progress.hex}}),s.jsx(ct,{htmlFor:"autoStartEnabled",className:"font-medium",children:"Iniciar no horrio"})]})]}),s.jsx("p",{className:"text-xs text-text-muted ml-7",children:"Confirmado  Em andamento no horrio de incio."})]}),s.jsxs("div",{className:"rounded-lg border border-border bg-surface-2/40 p-4 space-y-2",style:{borderLeftWidth:3,borderLeftColor:os.finished.hex},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sc,{id:"autoFinishEnabled",checked:yr.autoFinishEnabled,onCheckedChange:ie=>Er(ae=>({...ae,autoFinishEnabled:!!ie}))}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{backgroundColor:os.finished.hex}}),s.jsx(ct,{htmlFor:"autoFinishEnabled",className:"font-medium",children:"Finalizar ao trmino"})]})]}),s.jsx("p",{className:"text-xs text-text-muted ml-7",children:"Em andamento  Finalizado no horrio de trmino."})]})]})]})]}),s.jsxs(Dn,{className:"mt-2 gap-2",children:[s.jsx(Ae,{type:"button",variant:"ghost",className:"border border-white/10",onClick:()=>fn(!1),children:"Cancelar"}),s.jsx(Ae,{type:"button",variant:"default",onClick:()=>{console.log(" BOTO SALVAR CLICADO!"),Cn()},disabled:or,children:or?"Salvando":"Salvar"})]})]})}),s.jsx(rn,{open:nt,onOpenChange:Rt,children:s.jsxs(Yr,{className:"sm:max-w-[520px]",onOpenAutoFocus:ie=>ie.preventDefault(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Sobre agendamentos cancelados"}),s.jsx(cn,{children:"Agendamentos cancelados no aparecem na agenda quando o filtro no est selecionado e no ocupam horrio."})]}),s.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[s.jsx(Sc,{id:"hide-canceled-info",checked:Lt,onCheckedChange:ie=>Tt(!!ie),className:"mt-0.5"}),s.jsx(ct,{htmlFor:"hide-canceled-info",className:"text-sm cursor-pointer text-text-secondary",children:"No mostrar novamente"})]}),s.jsx(Dn,{className:"mt-4",children:s.jsx(Ae,{type:"button",onClick:()=>Rt(!1),children:"Entendi"})})]})}),!ve&&qe.length===0&&s.jsxs("div",{className:"mb-4 p-4 rounded-lg border border-border bg-surface text-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Nenhuma quadra encontrada"}),s.jsx("div",{className:"text-text-muted",children:"Cadastre suas quadras para comear a usar a agenda."})]}),s.jsx(Ae,{asChild:!0,className:"w-full sm:w-auto",children:s.jsxs(NW,{to:"/quadras",children:[s.jsx("span",{className:"hidden sm:inline",children:"Ir para Cadastros  Quadras"}),s.jsx("span",{className:"sm:hidden",children:"Adicionar"})]})})]}),ye.length>0&&(()=>{const ie=typeof window<"u"&&window.innerWidth<768,ae=ie?[ye[ue%ye.length]]:Ze?[Ze]:ye,Re=ie?ae[0]:Ze,Le=(()=>{if(Re&&he[Re]){const U=he[Re],le=U.hora_inicio||`${lt}:00:00`,we=U.hora_fim||`${tr}:00:00`,[Oe]=String(le).split(":").map(Number),[$e]=String(we).split(":").map(Number);return{start:Oe||lt,end:$e||tr}}return{start:lt,end:tr}})(),_t=Array.from({length:Math.max(0,Le.end-Le.start)},(U,le)=>Le.start+le),H=Math.max(0,Le.end-Le.start)*(60/In)*is;return s.jsx(s.Fragment,{children:s.jsx(ur.div,{variants:p?void 0:j7,className:Et("flex-1 overflow-auto bg-surface fx-scroll",ie?"":"rounded-lg border border-border"),ref:Ge,children:s.jsxs("div",{className:Et("grid",!ie&&"mx-auto"),style:{gridTemplateColumns:ie?"60px 1fr":ae.length===1?"120px 760px":ae.length===2?"120px repeat(2, 520px)":`120px repeat(${ae.length}, 1fr)`,width:ie?"100%":ae.length<=2?"fit-content":void 0,columnGap:ie?"4px":"16px"},children:[s.jsxs("div",{className:"sticky left-0 bg-surface z-20",children:[s.jsx("div",{className:"sticky top-0 z-20 h-14 border-b border-r border-border bg-surface flex items-center justify-center px-2",children:s.jsxs(Ex,{children:[s.jsx(kx,{asChild:!0,children:s.jsx(Ae,{size:"sm",variant:"ghost",className:"hover:bg-surface-2/50 text-lg font-semibold",children:gs(f,new Date)?"Hoje":Hr(f,"EEEE",{locale:rd})})}),s.jsxs(Eg,{align:"center",children:[s.jsx(zl,{onClick:()=>h(new Date),children:"Hoje"}),s.jsx(PO,{}),(()=>{const U=["Segunda","Tera","Quarta","Quinta","Sexta","Sbado","Domingo"],le=Bc(f,{weekStartsOn:1,locale:rd});return U.map((we,Oe)=>s.jsx(zl,{onClick:()=>h(Ri(le,Oe)),children:we},we))})()]})]})}),_t.map(U=>s.jsxs("div",{className:Et("border-r border-border",U%2===1&&"bg-surface-2/30"),children:[s.jsx("div",{className:"relative border-b border-border/80",style:{height:is},children:s.jsxs("span",{className:Et("absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-surface rounded font-bold",ie?"px-1 text-sm":"px-2 text-lg"),children:[String(U).padStart(2,"0"),":00"]})}),s.jsx("div",{className:"relative border-b border-border/80",style:{height:is},children:s.jsxs("span",{className:Et("absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-surface rounded font-bold",ie?"px-1 text-sm":"px-2 text-lg"),children:[String(U).padStart(2,"0"),":30"]})})]},`time-${U}`))]}),ae.map(U=>s.jsxs("div",{className:"relative border-r border-border",children:[!ie&&ye.length>1?s.jsx("div",{className:"h-14 border-b border-border sticky top-0 bg-surface z-10 flex items-center justify-center gap-2 px-3 overflow-x-auto",children:ye.map(le=>s.jsxs("button",{onClick:()=>Pt(le),className:Et("px-4 py-2 rounded-lg font-semibold text-base transition-all duration-200 whitespace-nowrap flex items-center gap-2.5 flex-shrink-0",Ze===le?"bg-surface-2 text-text-primary border-2 border-brand/60":le===U?"bg-surface-2/50 text-text-primary hover:bg-surface-2":"hover:bg-surface-2/60 text-text-muted hover:text-text-primary"),children:[s.jsx("span",{className:Et("inline-block w-2.5 h-2.5 rounded-full shadow-sm",Ze===le&&"ring-2 ring-brand/40"),style:{backgroundColor:yf(le)}}),s.jsx("span",{className:"tracking-tight font-bold",children:le})]},le))}):s.jsx("div",{className:"h-14 border-b border-border sticky top-0 bg-surface z-10 flex items-center justify-center",children:ie&&ye.length>1?s.jsxs(Ex,{children:[s.jsx(kx,{asChild:!0,children:s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-surface-2 transition-colors",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:yf(U)}}),s.jsx("span",{className:"font-semibold text-lg tracking-tight",children:U}),s.jsx(H2,{className:"h-4 w-4 text-text-muted"})]})}),s.jsx(Eg,{align:"center",className:"w-56",children:ye.map((le,we)=>s.jsxs(zl,{onClick:()=>rt(we),className:Et("flex items-center gap-2",le===U&&"bg-surface-2"),children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:yf(le)}}),s.jsx("span",{className:"font-semibold",children:le}),le===U&&s.jsx("span",{className:"ml-auto text-brand",children:""})]},le))})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:yf(U),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"}}),s.jsx("span",{className:"font-semibold text-lg tracking-tight",children:U})]})}),s.jsxs("div",{className:"relative",style:{height:H},children:[(X.scheduled||X.canceledOnly||X.pendingPayments)&&(()=>{const le=Le.start*60,we=Le.end*60,Oe=(()=>{const zt=he[U]?.hora_inicio,Ue=he[U]?.hora_fim,[Dt,Vt]=String(zt||`${Le.start}:00:00`).split(":").map(Number),[gr,Zr]=String(Ue||`${Le.end}:00:00`).split(":").map(Number);return{start:(Dt||0)*60+(Vt||0),end:(gr||0)*60+(Zr||0)}})(),$e=Math.max(Oe.start,le),He=Math.min(Oe.end,we),jt=Math.max(0,Math.floor(($e-le)/In)),Kt=Math.max(jt,Math.ceil((He-le)/In)),Qe=Math.max(0,(we-le)/In),gt=jt*is,pr=Math.min(Qe,Math.max(0,Kt-jt)),Nt=Math.max(0,(Qe-Kt)*is);return s.jsxs(s.Fragment,{children:[gt>0&&s.jsx("div",{style:{height:gt}}),Array.from({length:pr},(zt,Ue)=>{const Dt=jt+Ue,gr=(Math.floor(Dt/(60/In))+Math.floor(le/60))%2===1;return s.jsx("div",{className:Et("border-b border-border/80",gr&&"bg-surface-2/30"),style:{height:is}},`base-${U}-slot-${Dt}`)}),Nt>0&&s.jsx("div",{style:{height:Nt}})]})})(),(X.scheduled||X.canceledOnly||X.pendingPayments)&&Zt.filter(le=>le.court===U).map(le=>s.jsx(mr,{booking:le,courtGridStart:Le.start*60,courtGridEnd:Le.end*60},le.id)),X.available&&(()=>{const le=(()=>{const gt=he[U]?.hora_inicio;if(!gt)return lt*60;const[pr,Nt]=String(gt).split(":").map(Number);return pr*60+(Nt||0)})(),we=(()=>{const gt=he[U]?.hora_fim;if(!gt)return tr*60;const[pr,Nt]=String(gt).split(":").map(Number);return pr*60+(Nt||0)})(),Oe=gt=>Wu(gt)*60+Vu(gt),$e=Hr(f,"yyyy-MM-dd"),He=m.filter(gt=>gt.court===U&&Hr(gt.start,"yyyy-MM-dd")===$e&&gt.status!=="canceled").map(gt=>[Oe(gt.start),Oe(gt.end)]).sort((gt,pr)=>gt[0]-pr[0]),jt=[];let Kt=le;for(const[gt,pr]of He)gt>Kt&&jt.push([Kt,gt]),Kt=Math.max(Kt,pr);Kt<we&&jt.push([Kt,we]);const Qe=({startM:gt,endM:pr})=>{const[Nt,zt]=y.useState(null),Ue=Le.start*60,Dt=Math.floor((gt-Ue)/In),Vt=Math.max(1,Math.ceil((pr-gt)/In)),gr=Dt+Vt,Zr=Dt*is-1,Nr=(gr-Dt)*is+2,Te=`${String(Math.floor(gt/60)).padStart(2,"0")}:${String(gt%60).padStart(2,"0")}`,hr=`${String(Math.floor(pr/60)).padStart(2,"0")}:${String(pr%60).padStart(2,"0")}`;return s.jsxs("div",{className:Et("absolute left-2 right-2 rounded-md border-2 border-dashed text-sm z-0 cursor-pointer","border-[#10B981]","bg-transparent hover:border-[#10B981]/80 hover:shadow-sm"),style:{top:`${Zr}px`,height:`${Nr}px`},onMouseMove:cr=>{const Fr=cr.currentTarget.getBoundingClientRect(),pn=Math.min(Math.max(0,cr.clientY-Fr.top),Fr.height);let wr=Math.floor(pn/is);wr=Math.max(0,Math.min(wr,Vt-1)),zt(wr)},onMouseLeave:()=>zt(null),onClick:cr=>{const Fr=cr.currentTarget.getBoundingClientRect(),pn=Math.min(Math.max(0,cr.clientY-Fr.top),Fr.height),wr=Math.floor(pn/is);let ln=gt+wr*In;ln=Math.max(gt,Math.min(ln,pr-In));const Kn=(()=>m.filter(En=>En.court===U&&Hr(En.start,"yyyy-MM-dd")===$e).map(En=>Wu(En.start)*60+Vu(En.start)).filter(En=>En>ln).sort((En,Oa)=>En-Oa)[0])(),Na=typeof Kn=="number"?Kn:we;let lo=Math.min(ln+60,Na);if(lo-ln<30){const ca=Na-30;ca>=gt?(ln=Math.max(gt,Math.min(ln,ca)),lo=Na):(ln=gt,lo=Math.min(Na,pr))}b(null);{const ca=qe||[],En=ca.includes(U)?U:ca[0]||"";kt({court:En,date:f,startMinutes:ln,endMinutes:lo})}try{lastNonEmptySelectionRef.current=[],setChipsSnapshot([]),sessionStorage.removeItem(persistLastKey),sessionStorage.removeItem("agenda:customerPicker:closing"),sessionStorage.removeItem("agenda:customerPicker:closingAt")}catch{}J()},title:`Livre: ${Te}${hr}`,children:[Nt!==null&&s.jsx("div",{className:"pointer-events-none absolute left-[6px] right-[6px] rounded-md border border-white/10 bg-white/5",style:{top:`${Nt*is}px`,height:`${is}px`}}),s.jsxs("div",{className:"h-full px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-[#10B981]",children:"Livre"}),s.jsxs("span",{className:"text-text-muted",children:[Te,"",hr]})]})]})};return jt.map(([gt,pr],Nt)=>s.jsx(Qe,{startM:gt,endM:pr},`free-${U}-${Nt}`))})()]})]},U))]})})})})()]}),s.jsx(er,{})]})}function N7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N7(Object(r),!0).forEach(function(n){wxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ds(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var A7=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),dA=function(){return Math.random().toString(36).substring(7).split("").join(".")},P7={INIT:"@@redux/INIT"+dA(),REPLACE:"@@redux/REPLACE"+dA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+dA()}};function tVe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ree(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ds(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ds(1));return r(Ree)(e,t)}if(typeof e!="function")throw new Error(Ds(2));var a=e,i=t,o=[],l=o,c=!1;function u(){l===o&&(l=o.slice())}function d(){if(c)throw new Error(Ds(3));return i}function f(p){if(typeof p!="function")throw new Error(Ds(4));if(c)throw new Error(Ds(5));var v=!0;return u(),l.push(p),function(){if(v){if(c)throw new Error(Ds(6));v=!1,u();var b=l.indexOf(p);l.splice(b,1),o=null}}}function h(p){if(!tVe(p))throw new Error(Ds(7));if(typeof p.type>"u")throw new Error(Ds(8));if(c)throw new Error(Ds(9));try{c=!0,i=a(i,p)}finally{c=!1}for(var v=o=l,x=0;x<v.length;x++){var b=v[x];b()}return p}function m(p){if(typeof p!="function")throw new Error(Ds(10));a=p,h({type:P7.REPLACE})}function g(){var p,v=f;return p={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ds(11));function w(){b.next&&b.next(d())}w();var _=v(w);return{unsubscribe:_}}},p[A7]=function(){return this},p}return h({type:P7.INIT}),n={dispatch:h,subscribe:f,getState:d,replaceReducer:m},n[A7]=g,n}function E7(e,t){return function(){return t(e.apply(this,arguments))}}function k7(e,t){if(typeof e=="function")return E7(e,t);if(typeof e!="object"||e===null)throw new Error(Ds(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=E7(a,t))}return r}function Lee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function rVe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Ds(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=Lee.apply(void 0,l)(a.dispatch),C7(C7({},a),{},{dispatch:i})}}}var $ee=se.createContext(null);function nVe(e){e()}var Fee=nVe,aVe=function(t){return Fee=t},iVe=function(){return Fee};function oVe(){var e=iVe(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var O7={notify:function(){},get:function(){return[]}};function Bee(e,t){var r,n=O7;function a(f){return c(),n.subscribe(f)}function i(){n.notify()}function o(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=oVe())}function u(){r&&(r(),r=void 0,n.clear(),n=O7)}var d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return d}var zee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;function sVe(e){var t=e.store,r=e.context,n=e.children,a=y.useMemo(function(){var l=Bee(t);return{store:t,subscription:l}},[t]),i=y.useMemo(function(){return t.getState()},[t]);zee(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,i]);var o=r||$ee;return se.createElement(o.Provider,{value:a},n)}var qee={exports:{}},ba={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=typeof Symbol=="function"&&Symbol.for,U4=xo?Symbol.for("react.element"):60103,W4=xo?Symbol.for("react.portal"):60106,DN=xo?Symbol.for("react.fragment"):60107,MN=xo?Symbol.for("react.strict_mode"):60108,RN=xo?Symbol.for("react.profiler"):60114,LN=xo?Symbol.for("react.provider"):60109,$N=xo?Symbol.for("react.context"):60110,V4=xo?Symbol.for("react.async_mode"):60111,FN=xo?Symbol.for("react.concurrent_mode"):60111,BN=xo?Symbol.for("react.forward_ref"):60112,zN=xo?Symbol.for("react.suspense"):60113,lVe=xo?Symbol.for("react.suspense_list"):60120,qN=xo?Symbol.for("react.memo"):60115,UN=xo?Symbol.for("react.lazy"):60116,cVe=xo?Symbol.for("react.block"):60121,uVe=xo?Symbol.for("react.fundamental"):60117,dVe=xo?Symbol.for("react.responder"):60118,fVe=xo?Symbol.for("react.scope"):60119;function kl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case U4:switch(e=e.type,e){case V4:case FN:case DN:case RN:case MN:case zN:return e;default:switch(e=e&&e.$$typeof,e){case $N:case BN:case UN:case qN:case LN:return e;default:return t}}case W4:return t}}}function Uee(e){return kl(e)===FN}ba.AsyncMode=V4;ba.ConcurrentMode=FN;ba.ContextConsumer=$N;ba.ContextProvider=LN;ba.Element=U4;ba.ForwardRef=BN;ba.Fragment=DN;ba.Lazy=UN;ba.Memo=qN;ba.Portal=W4;ba.Profiler=RN;ba.StrictMode=MN;ba.Suspense=zN;ba.isAsyncMode=function(e){return Uee(e)||kl(e)===V4};ba.isConcurrentMode=Uee;ba.isContextConsumer=function(e){return kl(e)===$N};ba.isContextProvider=function(e){return kl(e)===LN};ba.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===U4};ba.isForwardRef=function(e){return kl(e)===BN};ba.isFragment=function(e){return kl(e)===DN};ba.isLazy=function(e){return kl(e)===UN};ba.isMemo=function(e){return kl(e)===qN};ba.isPortal=function(e){return kl(e)===W4};ba.isProfiler=function(e){return kl(e)===RN};ba.isStrictMode=function(e){return kl(e)===MN};ba.isSuspense=function(e){return kl(e)===zN};ba.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===DN||e===FN||e===RN||e===MN||e===zN||e===lVe||typeof e=="object"&&e!==null&&(e.$$typeof===UN||e.$$typeof===qN||e.$$typeof===LN||e.$$typeof===$N||e.$$typeof===BN||e.$$typeof===uVe||e.$$typeof===dVe||e.$$typeof===fVe||e.$$typeof===cVe)};ba.typeOf=kl;qee.exports=ba;var hVe=qee.exports,H4=hVe,mVe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pVe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},gVe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Wee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},G4={};G4[H4.ForwardRef]=gVe;G4[H4.Memo]=Wee;function T7(e){return H4.isMemo(e)?Wee:G4[e.$$typeof]||mVe}var vVe=Object.defineProperty,yVe=Object.getOwnPropertyNames,I7=Object.getOwnPropertySymbols,xVe=Object.getOwnPropertyDescriptor,bVe=Object.getPrototypeOf,D7=Object.prototype;function Vee(e,t,r){if(typeof t!="string"){if(D7){var n=bVe(t);n&&n!==D7&&Vee(e,n,r)}var a=yVe(t);I7&&(a=a.concat(I7(t)));for(var i=T7(e),o=T7(t),l=0;l<a.length;++l){var c=a[l];if(!pVe[c]&&!(r&&r[c])&&!(o&&o[c])&&!(i&&i[c])){var u=xVe(t,c);try{vVe(e,c,u)}catch{}}}}return e}var wVe=Vee;const M7=Gn(wVe);var Hee={exports:{}},ka={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WN=60103,VN=60106,Jb=60107,Qb=60108,Zb=60114,e1=60109,t1=60110,r1=60112,n1=60113,K4=60120,a1=60115,i1=60116,Gee=60121,Kee=60122,Yee=60117,Xee=60129,Jee=60131;if(typeof Symbol=="function"&&Symbol.for){var jo=Symbol.for;WN=jo("react.element"),VN=jo("react.portal"),Jb=jo("react.fragment"),Qb=jo("react.strict_mode"),Zb=jo("react.profiler"),e1=jo("react.provider"),t1=jo("react.context"),r1=jo("react.forward_ref"),n1=jo("react.suspense"),K4=jo("react.suspense_list"),a1=jo("react.memo"),i1=jo("react.lazy"),Gee=jo("react.block"),Kee=jo("react.server.block"),Yee=jo("react.fundamental"),Xee=jo("react.debug_trace_mode"),Jee=jo("react.legacy_hidden")}function Kc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WN:switch(e=e.type,e){case Jb:case Zb:case Qb:case n1:case K4:return e;default:switch(e=e&&e.$$typeof,e){case t1:case r1:case i1:case a1:case e1:return e;default:return t}}case VN:return t}}}var SVe=e1,_Ve=WN,jVe=r1,NVe=Jb,CVe=i1,AVe=a1,PVe=VN,EVe=Zb,kVe=Qb,OVe=n1;ka.ContextConsumer=t1;ka.ContextProvider=SVe;ka.Element=_Ve;ka.ForwardRef=jVe;ka.Fragment=NVe;ka.Lazy=CVe;ka.Memo=AVe;ka.Portal=PVe;ka.Profiler=EVe;ka.StrictMode=kVe;ka.Suspense=OVe;ka.isAsyncMode=function(){return!1};ka.isConcurrentMode=function(){return!1};ka.isContextConsumer=function(e){return Kc(e)===t1};ka.isContextProvider=function(e){return Kc(e)===e1};ka.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WN};ka.isForwardRef=function(e){return Kc(e)===r1};ka.isFragment=function(e){return Kc(e)===Jb};ka.isLazy=function(e){return Kc(e)===i1};ka.isMemo=function(e){return Kc(e)===a1};ka.isPortal=function(e){return Kc(e)===VN};ka.isProfiler=function(e){return Kc(e)===Zb};ka.isStrictMode=function(e){return Kc(e)===Qb};ka.isSuspense=function(e){return Kc(e)===n1};ka.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jb||e===Zb||e===Xee||e===Qb||e===n1||e===K4||e===Jee||typeof e=="object"&&e!==null&&(e.$$typeof===i1||e.$$typeof===a1||e.$$typeof===e1||e.$$typeof===t1||e.$$typeof===r1||e.$$typeof===Yee||e.$$typeof===Gee||e[0]===Kee)};ka.typeOf=Kc;Hee.exports=ka;var TVe=Hee.exports,IVe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],DVe=["reactReduxForwardedRef"],MVe=[],RVe=[null,null];function LVe(e,t){var r=e[1];return[t.payload,r+1]}function R7(e,t,r){zee(function(){return e.apply(void 0,t)},r)}function $Ve(e,t,r,n,a,i,o){e.current=n,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function FVe(e,t,r,n,a,i,o,l,c,u){if(e){var d=!1,f=null,h=function(){if(!d){var p=t.getState(),v,x;try{v=n(p,a.current)}catch(b){x=b,f=b}x||(f=null),v===i.current?o.current||c():(i.current=v,l.current=v,o.current=!0,u({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=h,r.trySubscribe(),h();var m=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return m}}var BVe=function(){return[null,0]};function zVe(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(w){return"ConnectAdvanced("+w+")"}:n,i=r.methodName,o=i===void 0?"connectAdvanced":i,l=r.renderCountProp,c=l===void 0?void 0:l,u=r.shouldHandleStateChanges,d=u===void 0?!0:u,f=r.storeKey,h=f===void 0?"store":f;r.withRef;var m=r.forwardRef,g=m===void 0?!1:m,p=r.context,v=p===void 0?$ee:p,x=US(r,IVe),b=v;return function(_){var j=_.displayName||_.name||"Component",A=a(j),P=Gr({},x,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:A,wrappedComponentName:j,WrappedComponent:_}),C=x.pure;function k(M){return e(M.dispatch,P)}var R=C?y.useMemo:function(M){return M()};function E(M){var z=y.useMemo(function(){var et=M.reactReduxForwardedRef,Ze=US(M,DVe);return[M.context,et,Ze]},[M]),V=z[0],W=z[1],$=z[2],G=y.useMemo(function(){return V&&V.Consumer&&TVe.isContextConsumer(se.createElement(V.Consumer,null))?V:b},[V,b]),me=y.useContext(G),de=!!M.store&&!!M.store.getState&&!!M.store.dispatch;me&&me.store;var L=de?M.store:me.store,B=y.useMemo(function(){return k(L)},[L]),J=y.useMemo(function(){if(!d)return RVe;var et=Bee(L,de?null:me.subscription),Ze=et.notifyNestedSubs.bind(et);return[et,Ze]},[L,de,me]),q=J[0],X=J[1],Z=y.useMemo(function(){return de?me:Gr({},me,{subscription:q})},[de,me,q]),pe=y.useReducer(LVe,MVe,BVe),te=pe[0],ve=te[0],Ce=pe[1];if(ve&&ve.error)throw ve.error;var he=y.useRef(),qe=y.useRef($),ye=y.useRef(),ce=y.useRef(!1),Ft=R(function(){return ye.current&&$===qe.current?ye.current:B(L.getState(),$)},[L,ve,$]);R7($Ve,[qe,he,ce,$,Ft,ye,X]),R7(FVe,[d,L,q,B,qe,he,ce,ye,X,Ce],[L,q,B]);var qt=y.useMemo(function(){return se.createElement(_,Gr({},Ft,{ref:W}))},[W,_,Ft]),It=y.useMemo(function(){return d?se.createElement(G.Provider,{value:Z},qt):qt},[G,qt,Z]);return It}var I=C?se.memo(E):E;if(I.WrappedComponent=_,I.displayName=E.displayName=A,g){var T=se.forwardRef(function(z,V){return se.createElement(I,Gr({},z,{reactReduxForwardedRef:V}))});return T.displayName=A,T.WrappedComponent=_,M7(T,_)}return M7(I,_)}}function L7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function fA(e,t){if(L7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!L7(e[r[a]],t[r[a]]))return!1;return!0}function qVe(e,t){var r={},n=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var a in e)n(a);return r}function Y4(e){return function(r,n){var a=e(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function $7(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Qee(e,t){return function(n,a){a.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=$7(e);var u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=$7(u),u=i(l,c)),u},i}}function UVe(e){return typeof e=="function"?Qee(e):void 0}function WVe(e){return e?void 0:Y4(function(t){return{dispatch:t}})}function VVe(e){return e&&typeof e=="object"?Y4(function(t){return qVe(e,t)}):void 0}const HVe=[UVe,WVe,VVe];function GVe(e){return typeof e=="function"?Qee(e):void 0}function KVe(e){return e?void 0:Y4(function(){return{}})}const YVe=[GVe,KVe];function XVe(e,t,r){return Gr({},r,e,t)}function JVe(e){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,l;return function(u,d,f){var h=e(u,d,f);return o?(!a||!i(h,l))&&(l=h):(o=!0,l=h),l}}}function QVe(e){return typeof e=="function"?JVe(e):void 0}function ZVe(e){return e?void 0:function(){return XVe}}const eHe=[QVe,ZVe];var tHe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function rHe(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function nHe(e,t,r,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,u,d,f,h,m;function g(w,_){return u=w,d=_,f=e(u,d),h=t(n,d),m=r(f,h,d),c=!0,m}function p(){return f=e(u,d),t.dependsOnOwnProps&&(h=t(n,d)),m=r(f,h,d),m}function v(){return e.dependsOnOwnProps&&(f=e(u,d)),t.dependsOnOwnProps&&(h=t(n,d)),m=r(f,h,d),m}function x(){var w=e(u,d),_=!l(w,f);return f=w,_&&(m=r(f,h,d)),m}function b(w,_){var j=!o(_,d),A=!i(w,u,_,d);return u=w,d=_,j&&A?p():j?v():A?x():m}return function(_,j){return c?b(_,j):g(_,j)}}function aHe(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,i=US(t,tHe),o=r(e,i),l=n(e,i),c=a(e,i),u=i.pure?nHe:rHe;return u(o,l,c,e,i)}var iHe=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function hA(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function oHe(e,t){return e===t}function sHe(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?zVe:r,a=t.mapStateToPropsFactories,i=a===void 0?YVe:a,o=t.mapDispatchToPropsFactories,l=o===void 0?HVe:o,c=t.mergePropsFactories,u=c===void 0?eHe:c,d=t.selectorFactory,f=d===void 0?aHe:d;return function(m,g,p,v){v===void 0&&(v={});var x=v,b=x.pure,w=b===void 0?!0:b,_=x.areStatesEqual,j=_===void 0?oHe:_,A=x.areOwnPropsEqual,P=A===void 0?fA:A,C=x.areStatePropsEqual,k=C===void 0?fA:C,R=x.areMergedPropsEqual,E=R===void 0?fA:R,I=US(x,iHe),T=hA(m,i,"mapStateToProps"),M=hA(g,l,"mapDispatchToProps"),z=hA(p,u,"mergeProps");return n(f,Gr({methodName:"connect",getDisplayName:function(W){return"Connect("+W+")"},shouldHandleStateChanges:!!m,initMapStateToProps:T,initMapDispatchToProps:M,initMergeProps:z,pure:w,areStatesEqual:j,areOwnPropsEqual:P,areStatePropsEqual:k,areMergedPropsEqual:E},I))}}const Zee=sHe();aVe(xh.unstable_batchedUpdates);function lHe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ete(e,t){var r=y.useState(function(){return{inputs:t,result:e()}})[0],n=y.useRef(!0),a=y.useRef(r),i=n.current||!!(t&&a.current.inputs&&lHe(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return y.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function cHe(e,t){return ete(function(){return e},t)}var Zn=ete,Br=cHe,kc=function(t){var r=t.top,n=t.right,a=t.bottom,i=t.left,o=n-i,l=a-r,c={top:r,right:n,bottom:a,left:i,width:o,height:l,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},X4=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},F7=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},uHe=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},mA={top:0,right:0,bottom:0,left:0},J4=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?mA:n,i=t.border,o=i===void 0?mA:i,l=t.padding,c=l===void 0?mA:l,u=kc(X4(r,a)),d=kc(F7(r,o)),f=kc(F7(d,c));return{marginBox:u,borderBox:kc(r),paddingBox:d,contentBox:f,margin:a,border:o,padding:c}},Fl=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&ch(!1),a},dHe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},S_=function(t,r){var n=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=uHe(n,r);return J4({borderBox:l,border:a,margin:i,padding:o})},__=function(t,r){return r===void 0&&(r=dHe()),S_(t,r)},tte=function(t,r){var n={top:Fl(r.marginTop),right:Fl(r.marginRight),bottom:Fl(r.marginBottom),left:Fl(r.marginLeft)},a={top:Fl(r.paddingTop),right:Fl(r.paddingRight),bottom:Fl(r.paddingBottom),left:Fl(r.paddingLeft)},i={top:Fl(r.borderTopWidth),right:Fl(r.borderRightWidth),bottom:Fl(r.borderBottomWidth),left:Fl(r.borderLeftWidth)};return J4({borderBox:t,margin:n,padding:a,border:i})},rte=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return tte(r,n)},B7=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function fHe(e,t){return!!(e===t||B7(e)&&B7(t))}function hHe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!fHe(e[r],t[r]))return!1;return!0}function go(e,t){t===void 0&&(t=hHe);var r,n=[],a,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&r===this&&t(l,n)||(a=e.apply(this,l),i=!0,r=this,n=l),a}return o}var mHe=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};const rb=mHe;function nte(e,t){}nte.bind(null,"warn");nte.bind(null,"error");function Jf(){}function pHe(e,t){return Gr({},e,{},t)}function Xl(e,t,r){var n=t.map(function(a){var i=pHe(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var gHe="Invariant failed";function j_(e){this.message=e}j_.prototype.toString=function(){return this.message};function rr(e,t){if(!e)throw new j_(gHe)}var vHe=function(e){yX(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Jf,n.onWindowError=function(l){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=l.error;u instanceof j_&&l.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(l){n.callbacks=l},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Xl(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof j_){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(se.Component),yHe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,N_=function(t){return t+1},xHe=function(t){return`
  You have lifted an item in position `+N_(t.source.index)+`
`},ate=function(t,r){var n=t.droppableId===r.droppableId,a=N_(t.index),i=N_(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},ite=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},bHe=function(t){var r=t.destination;if(r)return ate(t.source,r);var n=t.combine;return n?ite(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},z7=function(t){return`
  The item has returned to its starting position
  of `+N_(t.index)+`
`},wHe=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+z7(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+ate(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+ite(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+z7(t.source)+`
  `},d2={dragHandleUsageInstructions:yHe,onDragStart:xHe,onDragUpdate:bHe,onDragEnd:wHe},vo={x:0,y:0},Eo=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},gl=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Qf=function(t,r){return t.x===r.x&&t.y===r.y},ry=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Qm=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},nb=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},q7=function(t,r){return Math.min.apply(Math,r.map(function(n){return nb(t,n)}))},ote=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},SHe=function(e,t){var r=kc({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},o1=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},U7=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},_He={top:0,right:0,bottom:0,left:0},jHe=function(t,r){return r?o1(t,r.scroll.diff.displacement):t},NHe=function(t,r,n){if(n&&n.increasedBy){var a;return Gr({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},CHe=function(t,r){return r&&r.shouldClipSubject?SHe(r.pageMarginBox,t):kc(t)},jv=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,i=jHe(t.marginBox,a),o=NHe(i,n,r),l=CHe(o,a);return{page:t,withPlaceholder:r,active:l}},Q4=function(e,t){e.frame||rr(!1);var r=e.frame,n=gl(t,r.scroll.initial),a=ry(n),i=Gr({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=jv({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=Gr({},e,{frame:i,subject:o});return l};function C_(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Z4(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Th(e,t){if(e.find)return e.find(t);var r=Z4(e,t);if(r!==-1)return e[r]}function ste(e){return Array.prototype.slice.call(e)}var lte=go(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),cte=go(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),HN=go(function(e){return C_(e)}),AHe=go(function(e){return C_(e)}),ny=go(function(e,t){var r=AHe(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function eD(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function GN(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var KN=go(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),PHe=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=eD(i);if(!o)return null;function l(p){var v={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return Gr({},i,{at:v})}var c=i.displaced.all,u=c.length?c[0]:null;if(t)return u?l(u):null;var d=KN(r,a);if(!u){if(!d.length)return null;var f=d[d.length-1];return l(f.descriptor.id)}var h=Z4(d,function(p){return p.descriptor.id===u});h===-1&&rr(!1);var m=h-1;if(m<0)return null;var g=d[m];return l(g.descriptor.id)},ay=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ute={point:vo,value:0},ab={invisible:{},visible:{},all:[]},EHe={displaced:ab,displacedBy:ute,at:null},Zl=function(e,t){return function(r){return e<=r&&r<=t}},dte=function(e){var t=Zl(e.top,e.bottom),r=Zl(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),l=i&&o;if(l)return!0;var c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right,d=c&&u;if(d)return!0;var f=c&&o||u&&i;return f}},kHe=function(e){var t=Zl(e.top,e.bottom),r=Zl(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},tD={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},fte={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},OHe=function(e){return function(t){var r=Zl(t.top,t.bottom),n=Zl(t.left,t.right);return function(a){return e===tD?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},THe=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:vo;return o1(t,n)},IHe=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},DHe=function(t,r,n){return n(r)(t)},rD=function(t){var r=t.target,n=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=i?THe(r,n):r;return IHe(l,n,o)&&DHe(l,a,o)},MHe=function(t){return rD(Gr({},t,{isVisibleThroughFrameFn:dte}))},hte=function(t){return rD(Gr({},t,{isVisibleThroughFrameFn:kHe}))},RHe=function(t){return rD(Gr({},t,{isVisibleThroughFrameFn:OHe(t.destination.axis)}))},LHe=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function $He(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return kc(X4(r,n))}function ib(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,u){var d=$He(u,n),f=u.descriptor.id;c.all.push(f);var h=MHe({target:d,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var m=LHe(f,o,i),g={draggableId:f,shouldAnimate:m};return c.visible[f]=g,c},{all:[],visible:{},invisible:{}})}function FHe(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function W7(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,i=FHe(t,{inHomeList:r});return{displaced:ab,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function A_(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,u=ay(t,n);if(l==null)return W7({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var d=Th(r,function(p){return p.descriptor.index===l});if(!d)return W7({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var f=KN(t,r),h=r.indexOf(d),m=f.slice(h),g=ib({afterDragging:m,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function hh(e,t){return!!t.effected[e]}var BHe=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,l=n[o],c=l.descriptor.index,u=hh(o,i);return u?t?c:c-1:t?c+1:c},zHe=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=t?i+1:i-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return o<l||o>u?null:o},qHe=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,u=e.afterCritical,d=l.at;if(d||rr(!1),d.type==="REORDER"){var f=zHe({isMovingForward:t,isInHomeList:r,location:d.destination,insideDestination:o});return f==null?null:A_({draggable:n,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})}var h=BHe({isMovingForward:t,destination:i,displaced:l.displaced,draggables:a,combine:d.combine,afterCritical:u});return h==null?null:A_({draggable:n,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},UHe=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(t.visible[n]||t.invisible[n]);return hh(n,r)?i?vo:ry(a.point):i?a.point:vo},WHe=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=GN(r);a||rr(!1);var i=a.draggableId,o=n[i].page.borderBox.center,l=UHe({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Eo(o,l)},mte=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},VHe=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},nD=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},V7=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return Qm(r.line,n.marginBox[r.end]+mte(r,a),nD(r,n.marginBox,a))},H7=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return Qm(r.line,n.marginBox[r.start]-VHe(r,a),nD(r,n.marginBox,a))},HHe=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return Qm(r.line,n.contentBox[r.start]+mte(r,a),nD(r,n.contentBox,a))},GHe=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=ny(a.descriptor.id,n),l=r.page,c=a.axis;if(!o.length)return HHe({axis:c,moveInto:a.page,isMoving:l});var u=t.displaced,d=t.displacedBy,f=u.all[0];if(f){var h=n[f];if(hh(f,i))return H7({axis:c,moveRelativeTo:h.page,isMoving:l});var m=S_(h.page,d.point);return H7({axis:c,moveRelativeTo:m,isMoving:l})}var g=o[o.length-1];if(g.descriptor.id===r.descriptor.id)return l.borderBox.center;if(hh(g.descriptor.id,i)){var p=S_(g.page,ry(i.displacedBy.point));return V7({axis:c,moveRelativeTo:p,isMoving:l})}return V7({axis:c,moveRelativeTo:g.page,isMoving:l})},IO=function(e,t){var r=e.frame;return r?Eo(t,r.scroll.diff.displacement):t},KHe=function(t){var r=t.impact,n=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,l=n.page.borderBox.center,c=r.at;return!a||!c?l:c.type==="REORDER"?GHe({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:o}):WHe({impact:r,draggables:i,afterCritical:o})},YN=function(e){var t=KHe(e),r=e.droppable,n=r?IO(r,t):t;return n},pte=function(e,t){var r=gl(t,e.scroll.initial),n=ry(r),a=kc({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return i};function G7(e,t){return e.map(function(r){return t[r]})}function YHe(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var XHe=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=pte(r,Eo(r.scroll.current,i)),l=n.frame?Q4(n,Eo(n.frame.scroll.current,i)):n,c=t.displaced,u=ib({afterDragging:G7(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),d=ib({afterDragging:G7(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),f={},h={},m=[c,u,d];c.all.forEach(function(p){var v=YHe(p,m);if(v){h[p]=v;return}f[p]=!0});var g=Gr({},t,{displaced:{all:c.all,invisible:f,visible:h}});return g},JHe=function(e,t){return Eo(e.scroll.diff.displacement,t)},aD=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=JHe(n,t),i=gl(a,r.page.borderBox.center);return Eo(r.client.borderBox.center,i)},gte=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=gl(n,t.page.borderBox.center),u=o1(t.page.borderBox,c),d={target:u,destination:r,withDroppableDisplacement:i,viewport:a};return l?RHe(d):hte(d)},QHe=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var d=ny(n.descriptor.id,a),f=ay(r,n),h=PHe({isMovingForward:t,draggable:r,destination:n,insideDestination:d,previousImpact:i})||qHe({isMovingForward:t,isInHomeList:f,draggable:r,draggables:a,destination:n,insideDestination:d,previousImpact:i,viewport:o,afterCritical:u});if(!h)return null;var m=YN({impact:h,draggable:r,droppable:n,draggables:a,afterCritical:u}),g=gte({draggable:r,destination:n,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var p=aD({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:p,impact:h,scrollJumpRequest:null}}var v=gl(m,l),x=XHe({impact:h,viewport:o,destination:n,draggables:a,maxScrollChange:v});return{clientSelection:c,impact:x,scrollJumpRequest:v}},ss=function(t){var r=t.subject.active;return r||rr(!1),r},ZHe=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var l=n.axis,c=Zl(o[l.start],o[l.end]),u=HN(a).filter(function(f){return f!==n}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return dte(i.frame)(ss(f))}).filter(function(f){var h=ss(f);return t?o[l.crossAxisEnd]<h[l.crossAxisEnd]:h[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(f){var h=ss(f),m=Zl(h[l.start],h[l.end]);return c(h[l.start])||c(h[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(f,h){var m=ss(f)[l.crossAxisStart],g=ss(h)[l.crossAxisStart];return t?m-g:g-m}).filter(function(f,h,m){return ss(f)[l.crossAxisStart]===ss(m[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=Zl(ss(f)[l.start],ss(f)[l.end]);return h(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return ss(f)[l.start]-ss(h)[l.start]})[0]:u.sort(function(f,h){var m=q7(r,U7(ss(f))),g=q7(r,U7(ss(h)));return m!==g?m-g:ss(f)[l.start]-ss(h)[l.start]})[0]},K7=function(t,r){var n=t.page.borderBox.center;return hh(t.descriptor.id,r)?gl(n,r.displacedBy.point):n},eGe=function(t,r){var n=t.page.borderBox;return hh(t.descriptor.id,r)?o1(n,ry(r.displacedBy.point)):n},tGe=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(l){return hte({target:eGe(l,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var u=nb(t,IO(n,K7(l,i))),d=nb(t,IO(n,K7(c,i)));return u<d?-1:d<u?1:l.descriptor.index-c.descriptor.index});return o[0]||null},s1=go(function(t,r){var n=r[t.line];return{value:n,point:Qm(t.line,n)}}),rGe=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return Qm(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=ny(t.descriptor.id,n),l=o.reduce(function(d,f){return d+f.client.marginBox[a.size]},0),c=l+r[a.line],u=c-i;return u<=0?null:Qm(a.line,u)},vte=function(t,r){return Gr({},t,{scroll:Gr({},t.scroll,{max:r})})},yte=function(t,r,n){var a=t.frame;ay(r,t)&&rr(!1),t.subject.withPlaceholder&&rr(!1);var i=s1(t.axis,r.displaceBy).point,o=rGe(t,i,n),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=jv({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return Gr({},t,{subject:c})}var u=o?Eo(a.scroll.max,o):a.scroll.max,d=vte(a,u),f=jv({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:d});return Gr({},t,{subject:f,frame:d})},nGe=function(t){var r=t.subject.withPlaceholder;r||rr(!1);var n=t.frame;if(!n){var a=jv({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Gr({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||rr(!1);var o=vte(n,i),l=jv({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return Gr({},t,{subject:l,frame:o})},aGe=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:ab,displacedBy:ute,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},d=YN({impact:u,draggable:a,droppable:o,draggables:i,afterCritical:c}),f=ay(a,o)?o:yte(o,a,i),h=gte({draggable:a,destination:f,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var m=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],g=function(){var v=r.descriptor.index;return r.descriptor.id===a.descriptor.id||m?v:v+1}(),p=s1(o.axis,a.displaceBy);return A_({draggable:a,insideDestination:n,destination:o,viewport:l,displacedBy:p,last:ab,index:g})},iGe=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,u=ZHe({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:l});if(!u)return null;var d=ny(u.descriptor.id,i),f=tGe({pageBorderBoxCenter:r,viewport:l,destination:u,insideDestination:d,afterCritical:c}),h=aGe({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:i,moveRelativeTo:f,insideDestination:d,viewport:l,afterCritical:c});if(!h)return null;var m=YN({impact:h,draggable:n,droppable:u,draggables:i,afterCritical:c}),g=aD({pageBorderBoxCenter:m,draggable:n,viewport:l});return{clientSelection:g,impact:h,scrollJumpRequest:null}},_l=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},oGe=function(t,r){var n=_l(t);return n?r[n]:null},sGe=function(e){var t=e.state,r=e.type,n=oGe(t.impact,t.dimensions.droppables),a=!!n,i=t.dimensions.droppables[t.critical.droppable.id],o=n||i,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,h=t.dimensions,m=h.draggables,g=h.droppables;return c?QHe({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:o,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):iGe({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:o,draggables:m,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})};function Zh(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function xte(e){var t=Zl(e.top,e.bottom),r=Zl(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function lGe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function cGe(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,i=n.map(function(o){var l=o.axis,c=Qm(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:nb(a,c)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function uGe(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=HN(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!lGe(t,o))return!1;if(xte(o)(t.center))return!0;var l=i.axis,c=o.center[l.crossAxisLine],u=t[l.crossAxisStart],d=t[l.crossAxisEnd],f=Zl(o[l.crossAxisStart],o[l.crossAxisEnd]),h=f(u),m=f(d);return!h&&!m?!0:h?u<c:d>c});return a.length?a.length===1?a[0].descriptor.id:cGe({pageBorderBox:t,draggable:r,candidates:a}):null}var bte=function(t,r){return kc(o1(t,r))},dGe=function(e,t){var r=e.frame;return r?bte(t,r.scroll.diff.value):t};function wte(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function fGe(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var hGe=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,l=e.afterCritical,c=n.axis,u=s1(n.axis,r.displaceBy),d=u.value,f=t[c.start],h=t[c.end],m=KN(r,a),g=Th(m,function(v){var x=v.descriptor.id,b=v.page.borderBox.center[c.line],w=hh(x,l),_=wte({displaced:i,id:x});return w?_?h<=b:f<b-d:_?h<=b+d:f<b}),p=fGe({draggable:r,closest:g,inHomeList:ay(r,n)});return A_({draggable:r,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:u,index:p})},mGe=4,pGe=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=s1(a.axis,t.displaceBy),u=c.value,d=r[l.start],f=r[l.end],h=KN(t,i),m=Th(h,function(p){var v=p.descriptor.id,x=p.page.borderBox,b=x[l.size],w=b/mGe,_=hh(v,o),j=wte({displaced:n.displaced,id:v});return _?j?f>x[l.start]+w&&f<x[l.end]-w:d>x[l.start]-u+w&&d<x[l.end]-u-w:j?f>x[l.start]+u+w&&f<x[l.end]+u-w:d>x[l.start]+w&&d<x[l.end]-w});if(!m)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:a.descriptor.id}}};return g},Ste=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,l=e.afterCritical,c=bte(r.page.borderBox,t),u=uGe({pageBorderBox:c,draggable:r,droppables:a});if(!u)return EHe;var d=a[u],f=ny(d.descriptor.id,n),h=dGe(d,c);return pGe({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:d,insideDestination:f,afterCritical:l})||hGe({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:f,last:i.displaced,viewport:o,afterCritical:l})},iD=function(e,t){var r;return Gr({},e,(r={},r[t.descriptor.id]=t,r))},gGe=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,i=_l(r),o=_l(n);if(!i||i===o)return a;var l=a[i];if(!l.subject.withPlaceholder)return a;var c=nGe(l);return iD(a,c)},vGe=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=gGe({previousImpact:a,impact:i,droppables:n}),l=_l(i);if(!l)return o;var c=n[l];if(ay(t,c)||c.subject.withPlaceholder)return o;var u=yte(c,t,r);return iD(o,u)},Tx=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,l=a||t.viewport,c=n||t.dimensions,u=r||t.current.client.selection,d=gl(u,t.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Eo(t.initial.client.borderBoxCenter,d)},h={selection:Eo(f.selection,l.scroll.current),borderBoxCenter:Eo(f.borderBoxCenter,l.scroll.current),offset:Eo(f.offset,l.scroll.diff.value)},m={client:f,page:h};if(t.phase==="COLLECTING")return Gr({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:m});var g=c.draggables[t.critical.draggable.id],p=i||Ste({pageOffset:h.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),v=vGe({draggable:g,impact:p,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),x=Gr({},t,{current:m,dimensions:{draggables:c.draggables,droppables:v},impact:p,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function yGe(e,t){return e.map(function(r){return t[r]})}var _te=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,l=yGe(o.all,n),c=ib({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return Gr({},t,{displaced:c})},jte=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,l=YN({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return aD({pageBorderBoxCenter:l,draggable:r,viewport:i})},Nte=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&rr(!1);var a=t.impact,i=n||t.viewport,o=r||t.dimensions,l=o.draggables,c=o.droppables,u=l[t.critical.draggable.id],d=_l(a);d||rr(!1);var f=c[d],h=_te({impact:a,viewport:i,destination:f,draggables:l}),m=jte({impact:h,draggable:u,droppable:f,draggables:l,viewport:i,afterCritical:t.afterCritical});return Tx({impact:h,clientSelection:m,state:t,dimensions:o,viewport:i})},xGe=function(e){return{index:e.index,droppableId:e.droppableId}},Cte=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,i=s1(r.axis,t.displaceBy),o=ny(r.descriptor.id,n),l=o.indexOf(t);l===-1&&rr(!1);var c=o.slice(l+1),u=c.reduce(function(m,g){return m[g.descriptor.id]=!0,m},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:u},f=ib({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:i,at:{type:"REORDER",destination:xGe(t.descriptor)}};return{impact:h,afterCritical:d}},bGe=function(e,t){return{draggables:e.draggables,droppables:iD(e.droppables,t)}},wGe=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=S_(t.client,r),i=__(a,n),o=Gr({},t,{placeholder:Gr({},t.placeholder,{client:a}),client:a,page:i});return o},SGe=function(e){var t=e.frame;return t||rr(!1),t},_Ge=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,l=r[o],c=SGe(l),u=c.scroll.diff.value,d=Eo(a,u),f=wGe({draggable:i,offset:d,initialWindowScroll:n.scroll.initial});return f})},jGe=function(e){var t=e.state,r=e.published,n=r.modified.map(function(w){var _=t.dimensions.droppables[w.droppableId],j=Q4(_,w.scroll);return j}),a=Gr({},t.dimensions.droppables,{},lte(n)),i=cte(_Ge({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=Gr({},t.dimensions.draggables,{},i);r.removals.forEach(function(w){delete o[w]});var l={droppables:a,draggables:o},c=_l(t.impact),u=c?l.droppables[c]:null,d=l.draggables[t.critical.draggable.id],f=l.droppables[t.critical.droppable.id],h=Cte({draggable:d,home:f,draggables:o,viewport:t.viewport}),m=h.impact,g=h.afterCritical,p=u&&u.isCombineEnabled?t.impact:m,v=Ste({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:p,viewport:t.viewport,afterCritical:g}),x=Gr({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:m,dimensions:l,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var b=Gr({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},DO=function(t){return t.movementMode==="SNAP"},pA=function(t,r,n){var a=bGe(t.dimensions,r);return!DO(t)||n?Tx({state:t,dimensions:a}):Nte({state:t,dimensions:a})};function gA(e){return e.isDragging&&e.movementMode==="SNAP"?Gr({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Y7={phase:"IDLE",completed:null,shouldFlush:!1},NGe=function(e,t){if(e===void 0&&(e=Y7),t.type==="FLUSH")return Gr({},Y7,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&rr(!1);var r=t.payload,n=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[n.draggable.id],u=o.droppables[n.droppable.id],d={selection:a,borderBoxCenter:c.client.borderBox.center,offset:vo},f={client:d,page:{selection:Eo(d.selection,i.scroll.initial),borderBoxCenter:Eo(d.selection,i.scroll.initial),offset:Eo(d.selection,i.scroll.diff.value)}},h=HN(o.droppables).every(function(Ce){return!Ce.isFixedOnPage}),m=Cte({draggable:c,home:u,draggables:o.draggables,viewport:i}),g=m.impact,p=m.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:o,initial:f,current:f,isWindowScrollAllowed:h,impact:g,afterCritical:p,onLiftImpact:g,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&rr(!1);var x=Gr({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||rr(!1),jGe({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Zh(e)||rr(!1);var b=t.payload.client;return Qf(b,e.current.client.selection)?e:Tx({state:e,clientSelection:b,impact:DO(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return gA(e);Zh(e)||rr(!1);var w=t.payload,_=w.id,j=w.newScroll,A=e.dimensions.droppables[_];if(!A)return e;var P=Q4(A,j);return pA(e,P,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Zh(e)||rr(!1);var C=t.payload,k=C.id,R=C.isEnabled,E=e.dimensions.droppables[k];E||rr(!1),E.isEnabled===R&&rr(!1);var I=Gr({},E,{isEnabled:R});return pA(e,I,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Zh(e)||rr(!1);var T=t.payload,M=T.id,z=T.isCombineEnabled,V=e.dimensions.droppables[M];V||rr(!1),V.isCombineEnabled===z&&rr(!1);var W=Gr({},V,{isCombineEnabled:z});return pA(e,W,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Zh(e)||rr(!1),e.isWindowScrollAllowed||rr(!1);var $=t.payload.newScroll;if(Qf(e.viewport.scroll.current,$))return gA(e);var G=pte(e.viewport,$);return DO(e)?Nte({state:e,viewport:G}):Tx({state:e,viewport:G})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Zh(e))return e;var me=t.payload.maxScroll;if(Qf(me,e.viewport.scroll.max))return e;var de=Gr({},e.viewport,{scroll:Gr({},e.viewport.scroll,{max:me})});return Gr({phase:"DRAGGING"},e,{viewport:de})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&rr(!1);var L=sGe({state:e,type:t.type});return L?Tx({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var B=t.payload.reason;e.phase!=="COLLECTING"&&rr(!1);var J=Gr({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:B});return J}if(t.type==="DROP_ANIMATE"){var q=t.payload,X=q.completed,Z=q.dropDuration,pe=q.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||rr(!1);var te={phase:"DROP_ANIMATING",completed:X,dropDuration:Z,newHomeClientOffset:pe,dimensions:e.dimensions};return te}if(t.type==="DROP_COMPLETE"){var ve=t.payload.completed;return{phase:"IDLE",completed:ve,shouldFlush:!1}}return e},CGe=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},AGe=function(t){return{type:"LIFT",payload:t}},PGe=function(t){return{type:"INITIAL_PUBLISH",payload:t}},EGe=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},kGe=function(){return{type:"COLLECTION_STARTING",payload:null}},OGe=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},TGe=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},IGe=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Ate=function(t){return{type:"MOVE",payload:t}},DGe=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},MGe=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},RGe=function(){return{type:"MOVE_UP",payload:null}},LGe=function(){return{type:"MOVE_DOWN",payload:null}},$Ge=function(){return{type:"MOVE_RIGHT",payload:null}},FGe=function(){return{type:"MOVE_LEFT",payload:null}},oD=function(){return{type:"FLUSH",payload:null}},BGe=function(t){return{type:"DROP_ANIMATE",payload:t}},sD=function(t){return{type:"DROP_COMPLETE",payload:t}},Pte=function(t){return{type:"DROP",payload:t}},zGe=function(t){return{type:"DROP_PENDING",payload:t}},Ete=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},qGe=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,l=o.id,c=o.clientSelection,u=o.movementMode,d=r();d.phase==="DROP_ANIMATING"&&n(sD({completed:d.completed})),r().phase!=="IDLE"&&rr(!1),n(oD()),n(CGe({draggableId:l,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:l,scrollOptions:f},m=e.startPublishing(h),g=m.critical,p=m.dimensions,v=m.viewport;n(PGe({critical:g,dimensions:p,clientSelection:c,movementMode:u,viewport:v}))}}}},UGe=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},lD={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ob={opacity:{drop:0,combining:.7},scale:{drop:.75}},cD={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},zh=cD.outOfTheWay+"s "+lD.outOfTheWay,Ix={fluid:"opacity "+zh,snap:"transform "+zh+", opacity "+zh,drop:function(t){var r=t+"s "+lD.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+zh,placeholder:"height "+zh+", width "+zh+", margin "+zh},X7=function(t){return Qf(t,vo)?null:"translate("+t.x+"px, "+t.y+"px)"},MO={moveTo:X7,drop:function(t,r){var n=X7(t);return n?r?n+" scale("+ob.scale.drop+")":n:null}},RO=cD.minDropTime,kte=cD.maxDropTime,WGe=kte-RO,J7=1500,VGe=.6,HGe=function(e){var t=e.current,r=e.destination,n=e.reason,a=nb(t,r);if(a<=0)return RO;if(a>=J7)return kte;var i=a/J7,o=RO+WGe*i,l=n==="CANCEL"?o*VGe:o;return Number(l.toFixed(2))},GGe=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,l=n.droppables,c=_l(t),u=c?l[c]:null,d=l[r.descriptor.droppableId],f=jte({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:u||d,viewport:a}),h=gl(f,r.client.borderBox.center);return h},KGe=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var l=_te({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=Gr({},n,{displaced:ab});return{impact:c,didDropInsideDroppable:!0}},YGe=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(zGe({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&rr(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||rr(!1);var c=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],f=KGe({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=f.impact,m=f.didDropInsideDroppable,g=m?eD(h):null,p=m?GN(h):null,v={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:o,mode:i.movementMode,destination:g,combine:p},b=GGe({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),w={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:h},_=!Qf(i.current.client.offset,b)||!!x.combine;if(!_){r(sD({completed:w}));return}var j=HGe({current:i.current.client.offset,destination:b,reason:o}),A={newHomeClientOffset:b,dropDuration:j,completed:w};r(BGe(A))}}}},Ote=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function XGe(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function JGe(e){var t=e.onWindowScroll;function r(){t(Ote())}var n=rb(r),a=XGe(n),i=Jf;function o(){return i!==Jf}function l(){o()&&rr(!1),i=Xl(window,[a])}function c(){o()||rr(!1),n.cancel(),i(),i=Jf}return{start:l,stop:c,isActive:o}}var QGe=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},ZGe=function(e){var t=JGe({onWindowScroll:function(n){e.dispatch(DGe({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&QGe(n)&&t.stop(),r(n)}}},eKe=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},tKe=function(){var e=[],t=function(i){var o=Z4(e,function(u){return u.timerId===i});o===-1&&rr(!1);var l=e.splice(o,1),c=l[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:i};e.push(l)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},rKe=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},nKe=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},aKe=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},By=function(t,r){r()},jw=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},vA=function(t,r,n,a){if(!t){n(a(r));return}var i=eKe(n),o={announce:i};t(r,o),i.wasCalled()||n(a(r))},iKe=function(e,t){var r=tKe(),n=null,a=function(h,m){n&&rr(!1),By("onBeforeCapture",function(){var g=e().onBeforeCapture;if(g){var p={draggableId:h,mode:m};g(p)}})},i=function(h,m){n&&rr(!1),By("onBeforeDragStart",function(){var g=e().onBeforeDragStart;g&&g(jw(h,m))})},o=function(h,m){n&&rr(!1);var g=jw(h,m);n={mode:m,lastCritical:h,lastLocation:g.source,lastCombine:null},r.add(function(){By("onDragStart",function(){return vA(e().onDragStart,g,t,d2.onDragStart)})})},l=function(h,m){var g=eD(m),p=GN(m);n||rr(!1);var v=!aKe(h,n.lastCritical);v&&(n.lastCritical=h);var x=!rKe(n.lastLocation,g);x&&(n.lastLocation=g);var b=!nKe(n.lastCombine,p);if(b&&(n.lastCombine=p),!(!v&&!x&&!b)){var w=Gr({},jw(h,n.mode),{combine:p,destination:g});r.add(function(){By("onDragUpdate",function(){return vA(e().onDragUpdate,w,t,d2.onDragUpdate)})})}},c=function(){n||rr(!1),r.flush()},u=function(h){n||rr(!1),n=null,By("onDragEnd",function(){return vA(e().onDragEnd,h,t,d2.onDragEnd)})},d=function(){if(n){var h=Gr({},jw(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:u,abort:d}},oKe=function(e,t){var r=iKe(e,t);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;r.flush(),a(i),r.drop(l);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},sKe=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&rr(!1),e.dispatch(sD({completed:n.completed}))}}},lKe=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Ete())}};r=requestAnimationFrame(function(){r=null,t=Xl(window,[o])})}}}},cKe=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},uKe=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},dKe=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},fKe=function(e){return function(t){return function(r){return function(n){if(dKe(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&rr(!1),e.start(a);return}r(n),e.scroll(t.getState())}}}},hKe=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Pte({reason:n.reason})))}}}},mKe=Lee,pKe=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Ree(NGe,mKe(rVe(UGe(n),cKe(t),qGe(t),YGe,sKe,lKe,hKe,fKe(o),ZGe,uKe(r),oKe(a,i))))},yA=function(){return{additions:{},removals:{},modified:{}}};function gKe(e){var t=e.registry,r=e.callbacks,n=yA(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var d=n,f=d.additions,h=d.removals,m=d.modified,g=Object.keys(f).map(function(x){return t.draggable.getById(x).getDimension(vo)}).sort(function(x,b){return x.descriptor.index-b.descriptor.index}),p=Object.keys(m).map(function(x){var b=t.droppable.getById(x),w=b.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:w}}),v={additions:g,removals:Object.keys(h),modified:p};n=yA(),r.publish(v)}))},o=function(d){var f=d.descriptor.id;n.additions[f]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],i()},l=function(d){var f=d.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=yA())};return{add:o,remove:l,stop:c}}var Tte=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,i=gl({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},Ite=function(){var e=document.documentElement;return e||rr(!1),e},Dte=function(){var e=Ite(),t=Tte({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},vKe=function(){var e=Ote(),t=Dte(),r=e.y,n=e.x,a=Ite(),i=a.clientWidth,o=a.clientHeight,l=n+i,c=r+o,u=kc({top:r,left:n,right:l,bottom:c}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:vo,displacement:vo}}};return d},yKe=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=vKe(),i=a.scroll.current,o=t.droppable,l=n.droppable.getAllByType(o.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(f){return f.getDimension(i)}),u={draggables:cte(c),droppables:lte(l)},d={dimensions:u,critical:t,viewport:a};return d};function Q7(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var xKe=function(e,t){var r=null,n=gKe({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(m,g){e.droppable.exists(m)||rr(!1),r&&t.updateDroppableIsEnabled({id:m,isEnabled:g})},i=function(m,g){r&&(e.droppable.exists(m)||rr(!1),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:g}))},o=function(m,g){r&&(e.droppable.exists(m)||rr(!1),t.updateDroppableScroll({id:m,newScroll:g}))},l=function(m,g){r&&e.droppable.getById(m).callbacks.scroll(g)},c=function(){if(r){n.stop();var m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(function(g){return g.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(m){r||rr(!1);var g=r.critical.draggable;m.type==="ADDITION"&&Q7(e,g,m.value)&&n.add(m.value),m.type==="REMOVAL"&&Q7(e,g,m.value)&&n.remove(m.value)},d=function(m){r&&rr(!1);var g=e.draggable.getById(m.draggableId),p=e.droppable.getById(g.descriptor.droppableId),v={draggable:g.descriptor,droppable:p.descriptor},x=e.subscribe(u);return r={critical:v,unsubscribe:x},yKe({critical:v,registry:e,scrollOptions:m.scrollOptions})},f={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:d,stopPublishing:c};return f},Mte=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},bKe=function(e){window.scrollBy(e.x,e.y)},wKe=go(function(e){return HN(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),SKe=function(t,r){var n=Th(wKe(r),function(a){return a.frame||rr(!1),xte(a.frame.pageMarginBox)(t)});return n},_Ke=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var i=SKe(t,n);return i},Zf={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},jKe=function(e,t){var r=e[t.size]*Zf.startFromPercentage,n=e[t.size]*Zf.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},Rte=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var i=n-t,o=i/a;return o},uD=1,NKe=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Zf.maxPixelScroll;if(e===t.startScrollingFrom)return uD;var r=Rte({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=Zf.maxPixelScroll*Zf.ease(n);return Math.ceil(a)},Z7=Zf.durationDampening.accelerateAt,ez=Zf.durationDampening.stopDampeningAt,CKe=function(e,t){var r=t,n=ez,a=Date.now(),i=a-r;if(i>=ez)return e;if(i<Z7)return uD;var o=Rte({startOfRange:Z7,endOfRange:n,current:i}),l=e*Zf.ease(o);return Math.ceil(l)},tz=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=NKe(t,r);return i===0?0:a?Math.max(CKe(i,n),uD):i},rz=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=jKe(t,a),l=r[a.end]<r[a.start];return l?tz({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*tz({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},AKe=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},PKe=ote(function(e){return e===0?0:e}),Lte=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},l=rz({container:r,distanceToEdges:o,dragStartTime:t,axis:tD,shouldUseTimeDampening:i}),c=rz({container:r,distanceToEdges:o,dragStartTime:t,axis:fte,shouldUseTimeDampening:i}),u=PKe({x:c,y:l});if(Qf(u,vo))return null;var d=AKe({container:r,subject:n,proposedScroll:u});return d?Qf(d,vo)?null:d:null},EKe=ote(function(e){return e===0?0:e>0?1:-1}),dD=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,i=Eo(r,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return Qf(o,vo)?null:o}}(),$te=function(t){var r=t.max,n=t.current,a=t.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=EKe(a),l=dD({max:i,current:n,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},fD=function(t,r){return $te({current:t.scroll.current,max:t.scroll.max,change:r})},kKe=function(t,r){if(!fD(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return dD({current:a,max:n,change:r})},hD=function(t,r){var n=t.frame;return n?$te({current:n.scroll.current,max:n.scroll.max,change:r}):!1},OKe=function(t,r){var n=t.frame;return!n||!hD(t,r)?null:dD({current:n.scroll.current,max:n.scroll.max,change:r})},TKe=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=Lte({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return o&&fD(t,o)?o:null},IKe=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=Lte({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return l&&hD(t,l)?l:null},nz=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=TKe({dragStartTime:r,viewport:u,subject:c,center:o,shouldUseTimeDampening:n});if(d){a(d);return}}var f=_Ke({center:o,destination:_l(t.impact),droppables:t.dimensions.droppables});if(f){var h=IKe({dragStartTime:r,droppable:f,subject:c,center:o,shouldUseTimeDampening:n});h&&i(f.descriptor.id,h)}},DKe=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=rb(t),a=rb(r),i=null,o=function(d){i||rr(!1);var f=i,h=f.shouldUseTimeDampening,m=f.dragStartTime;nz({state:d,scrollWindow:n,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:h})},l=function(d){i&&rr(!1);var f=Date.now(),h=!1,m=function(){h=!0};nz({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&o(d)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:l,stop:c,scroll:o}},MKe=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(u,d){var f=Eo(u.current.client.selection,d);t({client:f})},i=function(u,d){if(!hD(u,d))return d;var f=OKe(u,d);if(!f)return r(u.descriptor.id,d),null;var h=gl(d,f);r(u.descriptor.id,h);var m=gl(d,h);return m},o=function(u,d,f){if(!u||!fD(d,f))return f;var h=kKe(d,f);if(!h)return n(f),null;var m=gl(f,h);n(m);var g=gl(f,m);return g},l=function(u){var d=u.scrollJumpRequest;if(d){var f=_l(u.impact);f||rr(!1);var h=i(u.dimensions.droppables[f],d);if(h){var m=u.viewport,g=o(u.isWindowScrollAllowed,m,h);g&&a(u,g)}}};return l},RKe=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=DKe({scrollWindow:r,scrollDroppable:t}),i=MKe({move:n,scrollWindow:r,scrollDroppable:t}),o=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){a.scroll(u);return}u.scrollJumpRequest&&i(u)}},l={scroll:o,start:a.start,stop:a.stop};return l},Nv="data-rbd",Cv=function(){var e=Nv+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),LO=function(){var e=Nv+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),LKe=function(){var e=Nv+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),az={contextId:Nv+"-scroll-container-context-id"},$Ke=function(t){return function(r){return"["+r+'="'+t+'"]'}},zy=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},FKe="pointer-events: none;",BKe=function(e){var t=$Ke(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Cv.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:FKe,dropAnimating:l}}}(),n=function(){var l=`
      transition: `+Ix.outOfTheWay+`;
    `;return{selector:t(LO.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:t(LKe.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,i];return{always:zy(o,"always"),resting:zy(o,"resting"),dragging:zy(o,"dragging"),dropAnimating:zy(o,"dropAnimating"),userCancel:zy(o,"userCancel")}},jl=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect,xA=function(){var t=document.querySelector("head");return t||rr(!1),t},iz=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function zKe(e,t){var r=Zn(function(){return BKe(e)},[e]),n=y.useRef(null),a=y.useRef(null),i=Br(go(function(f){var h=a.current;h||rr(!1),h.textContent=f}),[]),o=Br(function(f){var h=n.current;h||rr(!1),h.textContent=f},[]);jl(function(){!n.current&&!a.current||rr(!1);var f=iz(t),h=iz(t);return n.current=f,a.current=h,f.setAttribute(Nv+"-always",e),h.setAttribute(Nv+"-dynamic",e),xA().appendChild(f),xA().appendChild(h),o(r.always),i(r.resting),function(){var m=function(p){var v=p.current;v||rr(!1),xA().removeChild(v),p.current=null};m(n),m(a)}},[t,o,i,r.always,r.resting,e]);var l=Br(function(){return i(r.dragging)},[i,r.dragging]),c=Br(function(f){if(f==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),u=Br(function(){a.current&&i(r.resting)},[i,r.resting]),d=Zn(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u]);return d}var Fte=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function XN(e){return e instanceof Fte(e).HTMLElement}function qKe(e,t){var r="["+Cv.contextId+'="'+e+'"]',n=ste(document.querySelectorAll(r));if(!n.length)return null;var a=Th(n,function(i){return i.getAttribute(Cv.draggableId)===t});return!a||!XN(a)?null:a}function UKe(e){var t=y.useRef({}),r=y.useRef(null),n=y.useRef(null),a=y.useRef(!1),i=Br(function(h,m){var g={id:h,focus:m};return t.current[h]=g,function(){var v=t.current,x=v[h];x!==g&&delete v[h]}},[]),o=Br(function(h){var m=qKe(e,h);m&&m!==document.activeElement&&m.focus()},[e]),l=Br(function(h,m){r.current===h&&(r.current=m)},[]),c=Br(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&o(h)}))},[o]),u=Br(function(h){r.current=null;var m=document.activeElement;m&&m.getAttribute(Cv.draggableId)===h&&(r.current=h)},[]);jl(function(){return a.current=!0,function(){a.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var d=Zn(function(){return{register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,u,c,l]);return d}function WKe(){var e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){var m=t.indexOf(f);m!==-1&&t.splice(m,1)}}function n(f){t.length&&t.forEach(function(h){return h(f)})}function a(f){return e.draggables[f]||null}function i(f){var h=a(f);return h||rr(!1),h}var o={register:function(h){e.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,m){var g=e.draggables[m.descriptor.id];g&&g.uniqueId===h.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var m=h.descriptor.id,g=a(m);g&&h.uniqueId===g.uniqueId&&(delete e.draggables[m],n({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return C_(e.draggables).filter(function(m){return m.descriptor.type===h})}};function l(f){return e.droppables[f]||null}function c(f){var h=l(f);return h||rr(!1),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var m=l(h.descriptor.id);m&&h.uniqueId===m.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:function(h){return!!l(h)},getAllByType:function(h){return C_(e.droppables).filter(function(m){return m.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:r,clean:d}}function VKe(){var e=Zn(WKe,[]);return y.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var mD=se.createContext(null),P_=function(){var e=document.body;return e||rr(!1),e},HKe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},GKe=function(t){return"rbd-announcement-"+t};function KKe(e){var t=Zn(function(){return GKe(e)},[e]),r=y.useRef(null);y.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Gr(i.style,HKe),P_().appendChild(i),function(){setTimeout(function(){var c=P_();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var n=Br(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var YKe=0,XKe={separator:"::"};function pD(e,t){return t===void 0&&(t=XKe),Zn(function(){return""+e+t.separator+YKe++},[t.separator,e])}function JKe(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function QKe(e){var t=e.contextId,r=e.text,n=pD("hidden-text",{separator:"-"}),a=Zn(function(){return JKe({contextId:t,uniqueId:n})},[n,t]);return y.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",P_().appendChild(o),function(){var c=P_();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var JN=se.createContext(null);function Bte(e){var t=y.useRef(e);return y.useEffect(function(){t.current=e}),t}function ZKe(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&rr(!1);var l={abandon:o};return e=l,l}function a(){e||rr(!1),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:i}}var eYe=9,tYe=13,gD=27,zte=32,rYe=33,nYe=34,aYe=35,iYe=36,oYe=37,sYe=38,lYe=39,cYe=40,Nw,uYe=(Nw={},Nw[tYe]=!0,Nw[eYe]=!0,Nw),qte=function(e){uYe[e.keyCode]&&e.preventDefault()},QN=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Th(t,function(n){return"on"+n in document});return r||e}(),Ute=0,oz=5;function dYe(e,t){return Math.abs(t.x-e.x)>=oz||Math.abs(t.y-e.y)>=oz}var sz={type:"IDLE"};function fYe(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,u=o.clientY;if(l===Ute){var d={x:c,y:u},f=n();if(f.type==="DRAGGING"){o.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&rr(!1);var h=f.point;if(dYe(h,d)){o.preventDefault();var m=f.actions.fluidLift(d);a({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=n();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=n();if(l.type==="PENDING"){t();return}if(o.keyCode===gD){o.preventDefault(),t();return}qte(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=n();if(l.type==="IDLE"&&rr(!1),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:QN,fn:t}]}function hYe(e){var t=y.useRef(sz),r=y.useRef(Jf),n=Zn(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===Ute&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=e.findClosestDraggableId(f);if(h){var m=e.tryGetLock(h,o,{sourceEvent:f});if(m){f.preventDefault();var g={x:f.clientX,y:f.clientY};r.current(),u(m,g)}}}}}},[e]),a=Zn(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var m=e.findOptionsForDraggable(h);m&&(m.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}}}},[e]),i=Br(function(){var f={passive:!1,capture:!0};r.current=Xl(window,[a,n],f)},[a,n]),o=Br(function(){var d=t.current;d.type!=="IDLE"&&(t.current=sz,r.current(),i())},[i]),l=Br(function(){var d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),c=Br(function(){var f={capture:!0,passive:!1},h=fYe({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});r.current=Xl(window,h,f)},[l,o]),u=Br(function(f,h){t.current.type!=="IDLE"&&rr(!1),t.current={type:"PENDING",point:h,actions:f},c()},[c]);jl(function(){return i(),function(){r.current()}},[i])}var Rp;function mYe(){}var pYe=(Rp={},Rp[nYe]=!0,Rp[rYe]=!0,Rp[iYe]=!0,Rp[aYe]=!0,Rp);function gYe(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===gD){i.preventDefault(),r();return}if(i.keyCode===zte){i.preventDefault(),n();return}if(i.keyCode===cYe){i.preventDefault(),e.moveDown();return}if(i.keyCode===sYe){i.preventDefault(),e.moveUp();return}if(i.keyCode===lYe){i.preventDefault(),e.moveRight();return}if(i.keyCode===oYe){i.preventDefault(),e.moveLeft();return}if(pYe[i.keyCode]){i.preventDefault();return}qte(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:QN,fn:r}]}function vYe(e){var t=y.useRef(mYe),r=Zn(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==zte)return;var o=e.findClosestDraggableId(i);if(!o)return;var l=e.tryGetLock(o,d,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,u=l.snapLift();t.current();function d(){c||rr(!1),c=!1,t.current(),n()}t.current=Xl(window,gYe(u,d),{capture:!0,passive:!1})}}},[e]),n=Br(function(){var i={passive:!1,capture:!0};t.current=Xl(window,[r],i)},[r]);jl(function(){return n(),function(){t.current()}},[n])}var bA={type:"IDLE"},yYe=120,xYe=.15;function bYe(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===gD&&a.preventDefault(),t()}},{eventName:QN,fn:t}]}function wYe(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=i.touches[0],c=l.clientX,u=l.clientY,d={x:c,y:u};i.preventDefault(),o.actions.move(d)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&rr(!1);var l=i.touches[0];if(l){var c=l.force>=xYe;if(c){var u=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){u&&t();return}if(u){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:QN,fn:t}]}function SYe(e){var t=y.useRef(bA),r=y.useRef(Jf),n=Br(function(){return t.current},[]),a=Br(function(m){t.current=m},[]),i=Zn(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var g=e.findClosestDraggableId(m);if(g){var p=e.tryGetLock(g,l,{sourceEvent:m});if(p){var v=m.touches[0],x=v.clientX,b=v.clientY,w={x,y:b};r.current(),f(p,w)}}}}}},[e]),o=Br(function(){var m={capture:!0,passive:!1};r.current=Xl(window,[i],m)},[i]),l=Br(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(bA),r.current(),o())},[o,a]),c=Br(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=Br(function(){var m={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:n},p=Xl(window,wYe(g),m),v=Xl(window,bYe(g),m);r.current=function(){p(),v()}},[c,n,l]),d=Br(function(){var m=n();m.type!=="PENDING"&&rr(!1);var g=m.actions.fluidLift(m.point);a({type:"DRAGGING",actions:g,hasMoved:!1})},[n,a]),f=Br(function(m,g){n().type!=="IDLE"&&rr(!1);var p=setTimeout(d,yYe);a({type:"PENDING",point:g,actions:m,longPressTimerId:p}),u()},[u,n,a,d]);jl(function(){return o(),function(){r.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),a(bA))}},[n,o,a]),jl(function(){var m=Xl(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var _Ye={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Wte(e,t){if(t==null)return!1;var r=!!_Ye[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Wte(e,t.parentElement)}function jYe(e,t){var r=t.target;return XN(r)?Wte(e,r):!1}var NYe=function(e){return kc(e.getBoundingClientRect()).center};function CYe(e){return e instanceof Fte(e).Element}var AYe=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Th(t,function(n){return n in Element.prototype});return r||e}();function Vte(e,t){return e==null?null:e[AYe](t)?e:Vte(e.parentElement,t)}function PYe(e,t){return e.closest?e.closest(t):Vte(e,t)}function EYe(e){return"["+Cv.contextId+'="'+e+'"]'}function kYe(e,t){var r=t.target;if(!CYe(r))return null;var n=EYe(e),a=PYe(r,n);return!a||!XN(a)?null:a}function OYe(e,t){var r=kYe(e,t);return r?r.getAttribute(Cv.draggableId):null}function TYe(e,t){var r="["+LO.contextId+'="'+e+'"]',n=ste(document.querySelectorAll(r)),a=Th(n,function(i){return i.getAttribute(LO.id)===t});return!a||!XN(a)?null:a}function IYe(e){e.preventDefault()}function Cw(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function Hte(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Mte(r.getState(),a))}function DYe(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=Hte({lockAPI:t,store:n,registry:a,draggableId:i});if(!c)return null;var u=a.draggable.getById(i),d=TYe(r,u.descriptor.id);if(!d||l&&!u.options.canDragInteractiveElements&&jYe(d,l))return null;var f=t.claim(o||Jf),h="PRE_DRAG";function m(){return u.options.shouldRespectForcePress}function g(){return t.isActive(f)}function p(A,P){Cw({expected:A,phase:h,isLockActive:g,shouldWarn:!0})&&n.dispatch(P())}var v=p.bind(null,"DRAGGING");function x(A){function P(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(P(),h!=="PRE_DRAG"&&rr(!1)),n.dispatch(AGe(A.liftActionArgs)),h="DRAGGING";function C(k,R){if(R===void 0&&(R={shouldBlockNextClick:!1}),A.cleanup(),R.shouldBlockNextClick){var E=Xl(window,[{eventName:"click",fn:IYe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}P(),n.dispatch(Pte({reason:k}))}return Gr({isActive:function(){return Cw({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(R){return C("DROP",R)},cancel:function(R){return C("CANCEL",R)}},A.actions)}function b(A){var P=rb(function(k){v(function(){return Ate({client:k})})}),C=x({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return P.cancel()},actions:{move:P}});return Gr({},C,{move:P})}function w(){var A={moveUp:function(){return v(RGe)},moveRight:function(){return v($Ge)},moveDown:function(){return v(LGe)},moveLeft:function(){return v(FGe)}};return x({liftActionArgs:{id:i,clientSelection:NYe(d),movementMode:"SNAP"},cleanup:Jf,actions:A})}function _(){var A=Cw({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});A&&t.release()}var j={isActive:function(){return Cw({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:b,snapLift:w,abort:_};return j}var MYe=[hYe,vYe,SYe];function RYe(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?MYe:[],a||[]),l=y.useState(function(){return ZKe()})[0],c=Br(function(b,w){b.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);jl(function(){var b=r.getState(),w=r.subscribe(function(){var _=r.getState();c(b,_),b=_});return w},[l,r,c]),jl(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=Br(function(x){return Hte({lockAPI:l,registry:n,store:r,draggableId:x})},[l,n,r]),d=Br(function(x,b,w){return DYe({lockAPI:l,registry:n,contextId:t,store:r,draggableId:x,forceSensorStop:b,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[t,l,n,r]),f=Br(function(x){return OYe(t,x)},[t]),h=Br(function(x){var b=n.draggable.findById(x);return b?b.options:null},[n.draggable]),m=Br(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(oD()))},[l,r]),g=Br(l.isClaimed,[l]),p=Zn(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:g}},[u,d,f,h,m,g]),v=0;v<o.length;v++)o[v](p)}var LYe=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function qy(e){return e.current||rr(!1),e.current}function $Ye(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=y.useRef(null),l=Bte(e),c=Br(function(){return LYe(l.current)},[l]),u=KKe(t),d=QKe({contextId:t,text:i}),f=zKe(t,a),h=Br(function(k){qy(o).dispatch(k)},[]),m=Zn(function(){return k7({publishWhileDragging:EGe,updateDroppableScroll:OGe,updateDroppableIsEnabled:TGe,updateDroppableIsCombineEnabled:IGe,collectionStarting:kGe},h)},[h]),g=VKe(),p=Zn(function(){return xKe(g,m)},[g,m]),v=Zn(function(){return RKe(Gr({scrollWindow:bKe,scrollDroppable:p.scrollDroppable},k7({move:Ate},h)))},[p.scrollDroppable,h]),x=UKe(t),b=Zn(function(){return pKe({announce:u,autoScroller:v,dimensionMarshal:p,focusMarshal:x,getResponders:c,styleMarshal:f})},[u,v,p,x,c,f]);o.current=b;var w=Br(function(){var k=qy(o),R=k.getState();R.phase!=="IDLE"&&k.dispatch(oD())},[]),_=Br(function(){var k=qy(o).getState();return k.isDragging||k.phase==="DROP_ANIMATING"},[]),j=Zn(function(){return{isDragging:_,tryAbort:w}},[_,w]);r(j);var A=Br(function(k){return Mte(qy(o).getState(),k)},[]),P=Br(function(){return Zh(qy(o).getState())},[]),C=Zn(function(){return{marshal:p,focus:x,contextId:t,canLift:A,isMovementAllowed:P,dragHandleUsageInstructionsId:d,registry:g}},[t,p,d,x,A,P,g]);return RYe({contextId:t,store:b,registry:g,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(function(){return w},[w]),se.createElement(JN.Provider,{value:C},se.createElement(sVe,{context:mD,store:b},e.children))}var FYe=0;function BYe(){return Zn(function(){return""+FYe++},[])}function zYe(e){var t=BYe(),r=e.dragHandleUsageInstructions||d2.dragHandleUsageInstructions;return se.createElement(vHe,null,function(n){return se.createElement($Ye,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Gte=function(t){return function(r){return t===r}},qYe=Gte("scroll"),UYe=Gte("auto"),lz=function(t,r){return r(t.overflowX)||r(t.overflowY)},WYe=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return lz(n,qYe)||lz(n,UYe)},VYe=function(){return!1},HYe=function e(t){return t==null?null:t===document.body?VYe()?t:null:t===document.documentElement?null:WYe(t)?t:e(t.parentElement)},$O=function(e){return{x:e.scrollLeft,y:e.scrollTop}},GYe=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},KYe=function(e){var t=HYe(e),r=GYe(e);return{closestScrollable:t,isFixedOnPage:r}},YYe=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,l=e.page,c=e.closest,u=function(){if(!c)return null;var m=c.scrollSize,g=c.client,p=Tte({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:m,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:p,diff:{value:vo,displacement:vo}}}}(),d=i==="vertical"?tD:fte,f=jv({page:l,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:d,isEnabled:r,client:o,page:l,frame:u,subject:f};return h},XYe=function(t,r){var n=rte(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,l=i+r.scrollWidth,c={top:a,right:l,bottom:o,left:i},u=X4(c,n.border),d=J4({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return d},JYe=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,u=n.closestScrollable,d=XYe(t,u),f=__(d,a),h=function(){if(!u)return null;var g=rte(u),p={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:__(g,a),scroll:$O(u),scrollSize:p,shouldClipSubject:c}}(),m=YYe({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:f,closest:h});return m},QYe={passive:!1},ZYe={passive:!0},cz=function(e){return e.shouldPublishImmediately?QYe:ZYe};function E_(e){var t=y.useContext(e);return t||rr(!1),t}var Aw=function(t){return t&&t.env.closestScrollable||null};function eXe(e){var t=y.useRef(null),r=E_(JN),n=pD("droppable"),a=r.registry,i=r.marshal,o=Bte(e),l=Zn(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=y.useRef(l),u=Zn(function(){return go(function(_,j){t.current||rr(!1);var A={x:_,y:j};i.updateDroppableScroll(l.id,A)})},[l.id,i]),d=Br(function(){var _=t.current;return!_||!_.env.closestScrollable?vo:$O(_.env.closestScrollable)},[]),f=Br(function(){var _=d();u(_.x,_.y)},[d,u]),h=Zn(function(){return rb(f)},[f]),m=Br(function(){var _=t.current,j=Aw(_);_&&j||rr(!1);var A=_.scrollOptions;if(A.shouldPublishImmediately){f();return}h()},[h,f]),g=Br(function(_,j){t.current&&rr(!1);var A=o.current,P=A.getDroppableRef();P||rr(!1);var C=KYe(P),k={ref:P,descriptor:l,env:C,scrollOptions:j};t.current=k;var R=JYe({ref:P,descriptor:l,env:C,windowScroll:_,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),E=C.closestScrollable;return E&&(E.setAttribute(az.contextId,r.contextId),E.addEventListener("scroll",m,cz(k.scrollOptions))),R},[r.contextId,l,m,o]),p=Br(function(){var _=t.current,j=Aw(_);return _&&j||rr(!1),$O(j)},[]),v=Br(function(){var _=t.current;_||rr(!1);var j=Aw(_);t.current=null,j&&(h.cancel(),j.removeAttribute(az.contextId),j.removeEventListener("scroll",m,cz(_.scrollOptions)))},[m,h]),x=Br(function(_){var j=t.current;j||rr(!1);var A=Aw(j);A||rr(!1),A.scrollTop+=_.y,A.scrollLeft+=_.x},[]),b=Zn(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:p,dragStopped:v,scroll:x}},[v,g,p,x]),w=Zn(function(){return{uniqueId:n,descriptor:l,callbacks:b}},[b,l,n]);jl(function(){return c.current=w.descriptor,a.droppable.register(w),function(){t.current&&v(),a.droppable.unregister(w)}},[b,l,v,w,i,a.droppable]),jl(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),jl(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function wA(){}var uz={width:0,height:0,margin:_He},tXe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?uz:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},rXe=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,i=tXe({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Ix.placeholder:null}};function nXe(e){var t=y.useRef(null),r=Br(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=y.useState(e.animate==="open"),c=l[0],u=l[1];y.useEffect(function(){return c?n!=="open"?(r(),u(!1),wA):t.current?wA:(t.current=setTimeout(function(){t.current=null,u(!1)}),r):wA},[n,c,r]);var d=Br(function(h){h.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),f=rXe({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return se.createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})}var aXe=se.memo(nXe),vD=se.createContext(null),iXe=function(e){yX(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(se.PureComponent),dz={dragging:5e3,dropAnimating:4500},oXe=function(t,r){return r?Ix.drop(r.duration):t?Ix.snap:Ix.fluid},sXe=function(t,r){return t?r?ob.opacity.drop:ob.opacity.combining:null},lXe=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function cXe(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,l=lXe(e),c=!!i,u=c?MO.drop(n,o):MO.moveTo(n),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:oXe(l,i),transform:u,opacity:sXe(o,c),zIndex:c?dz.dropAnimating:dz.dragging,pointerEvents:"none"};return d}function uXe(e){return{transform:MO.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function dXe(e){return e.type==="DRAGGING"?cXe(e):uXe(e)}function fXe(e,t,r){r===void 0&&(r=vo);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=tte(a,n),o=__(i,r),l={client:i,tagName:t.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},u={descriptor:e,placeholder:l,displaceBy:c,client:i,page:o};return u}function hXe(e){var t=pD("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=Zn(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),u=Br(function(m){var g=a();return g||rr(!1),fXe(r,g,m)},[r,a]),d=Zn(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:u}},[r,u,c,t]),f=y.useRef(d),h=y.useRef(!0);jl(function(){return n.draggable.register(f.current),function(){return n.draggable.unregister(f.current)}},[n.draggable]),jl(function(){if(h.current){h.current=!1;return}var m=f.current;f.current=d,n.draggable.update(d,m)},[d,n.draggable])}function mXe(e){e.preventDefault()}function pXe(e){var t=y.useRef(null),r=Br(function(k){t.current=k},[]),n=Br(function(){return t.current},[]),a=E_(JN),i=a.contextId,o=a.dragHandleUsageInstructionsId,l=a.registry,c=E_(vD),u=c.type,d=c.droppableId,f=Zn(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,m=e.draggableId,g=e.isEnabled,p=e.shouldRespectForcePress,v=e.canDragInteractiveElements,x=e.isClone,b=e.mapped,w=e.dropAnimationFinished;if(!x){var _=Zn(function(){return{descriptor:f,registry:l,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:p,isEnabled:g}},[f,l,n,v,p,g]);hXe(_)}var j=Zn(function(){return g?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:mXe}:null},[i,o,m,g]),A=Br(function(k){b.type==="DRAGGING"&&b.dropping&&k.propertyName==="transform"&&w()},[w,b]),P=Zn(function(){var k=dXe(b),R=b.type==="DRAGGING"&&b.dropping?A:null,E={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":m,style:k,onTransitionEnd:R},dragHandleProps:j};return E},[i,j,m,b,A,r]),C=Zn(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(P,b.snapshot,C)}var Kte=function(e,t){return e===t},Yte=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},gXe=function(t){return t.combine?t.combine.draggableId:null},vXe=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function yXe(){var e=go(function(a,i){return{x:a,y:i}}),t=go(function(a,i,o,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=go(function(a,i,o,l,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:a,dimension:o,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],u=_l(i.impact),d=vXe(i.impact),f=i.forceShouldAnimate;return r(e(l.x,l.y),i.movementMode,c,o.isClone,u,d,f)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==o.draggableId)return null;var m=o.isClone,g=i.dimensions.draggables[o.draggableId],p=h.result,v=p.mode,x=Yte(p),b=gXe(p),w=i.dropDuration,_={duration:w,curve:lD.drop,moveTo:i.newHomeClientOffset,opacity:b?ob.opacity.drop:null,scale:b?ob.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:g,dropping:_,draggingOver:x,combineWith:b,mode:v,forceShouldAnimate:null,snapshot:t(v,m,x,b,_)}}}return null};return n}function Xte(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var xXe={mapped:{type:"SECONDARY",offset:vo,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Xte(null)}};function bXe(){var e=go(function(o,l){return{x:o,y:l}}),t=go(Xte),r=go(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),n=function(l){return l?r(vo,l,!0):null},a=function(l,c,u,d){var f=u.displaced.visible[l],h=!!(d.inVirtualList&&d.effected[l]),m=GN(u),g=m&&m.draggableId===l?c:null;if(!f){if(!h)return n(g);if(u.displaced.invisible[l])return null;var p=ry(d.displacedBy.point),v=e(p.x,p.y);return r(v,g,!0)}if(h)return n(g);var x=u.displacedBy.point,b=e(x.x,x.y);return r(b,g,f.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===c.draggableId?null:a(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return i}var wXe=function(){var t=yXe(),r=bXe(),n=function(i,o){return t(i,o)||r(i,o)||xXe};return n},SXe={dropAnimationFinished:Ete},_Xe=Zee(wXe,SXe,null,{context:mD,pure:!0,areStatePropsEqual:Kte})(pXe);function Jte(e){var t=E_(vD),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:se.createElement(_Xe,e)}function jXe(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return se.createElement(Jte,Gr({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function NXe(e){var t=y.useContext(JN);t||rr(!1);var r=t.contextId,n=t.isMovementAllowed,a=y.useRef(null),i=y.useRef(null),o=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,m=e.isCombineEnabled,g=e.snapshot,p=e.useClone,v=e.updateViewportMaxScroll,x=e.getContainerForClone,b=Br(function(){return a.current},[]),w=Br(function(E){a.current=E},[]);Br(function(){return i.current},[]);var _=Br(function(E){i.current=E},[]),j=Br(function(){n()&&v({maxScroll:Dte()})},[n,v]);eXe({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:b});var A=se.createElement(iXe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(E){var I=E.onClose,T=E.data,M=E.animate;return se.createElement(aXe,{placeholder:T,onClose:I,innerRef:_,animate:M,contextId:r,onTransitionEnd:j})}),P=Zn(function(){return{innerRef:w,placeholder:A,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,A,w]),C=p?p.dragging.draggableId:null,k=Zn(function(){return{droppableId:l,type:c,isUsingCloneFor:C}},[l,C,c]);function R(){if(!p)return null;var E=p.dragging,I=p.render,T=se.createElement(Jte,{draggableId:E.draggableId,index:E.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(M,z){return I(M,z,E)});return hW.createPortal(T,x())}return se.createElement(vD.Provider,{value:k},o(P,g),R())}var SA=function(t,r){return t===r.droppable.type},fz=function(t,r){return r.draggables[t.draggable.id]},CXe=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Gr({},t,{shouldAnimatePlaceholder:!1}),n=go(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=go(function(o,l,c,u,d,f){var h=d.descriptor.id,m=d.descriptor.droppableId===o;if(m){var g=f?{render:f,dragging:n(d.descriptor)}:null,p={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:p,useClone:g}}if(!l)return r;if(!u)return t;var v={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),i=function(l,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(l.isDragging){var m=l.critical;if(!SA(d,m))return r;var g=fz(m,l.dimensions),p=_l(l.impact)===u;return a(u,f,p,p,g,h)}if(l.phase==="DROP_ANIMATING"){var v=l.completed;if(!SA(d,v.critical))return r;var x=fz(v.critical,l.dimensions);return a(u,f,Yte(v.result)===u,_l(v.impact)===u,x,h)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var b=l.completed;if(!SA(d,b.critical))return r;var w=_l(b.impact)===u,_=!!(b.impact.at&&b.impact.at.type==="COMBINE"),j=b.critical.droppable.id===u;return w?_?t:r:j?t:r}return r};return i},AXe={updateViewportMaxScroll:MGe};function PXe(){return document.body||rr(!1),document.body}var EXe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:PXe},Qte=Zee(CXe,AXe,null,{context:mD,pure:!0,areStatePropsEqual:Kte})(NXe);Qte.defaultProps=EXe;function yD(e){return{id:e.id,code:e.codigo_produto??"",name:e.nome,category:e.categoria??"",type:e.tipo_produto==="uso_interno"?"Uso Interno":"Venda",cost:Number(e.valor_custo??e.preco_custo??0),price:Number(e.valor_venda??e.preco_venda??0),stock:Number(e.estoque??e.estoque_atual??0),minStock:Number(e.estoque_minimo??0),status:e.status??(Number(e.estoque??0)===0?"inactive":Number(e.estoque??0)>0&&Number(e.estoque??0)<=Number(e.estoque_minimo??0)?"low_stock":"active"),validade:e.validade?new Date(e.validade):null,barcode:e.codigo_barras??"",barcodeBox:e.codigo_barras_caixa??"",reference:e.referencia??"",brand:e.marca??"",group:e.grupo??"",unit:e.unidade??"UN",initialStock:Number(e.estoque_inicial??0),currentStock:Number(e.estoque_atual??e.estoque??0),weight:e.peso!=null?Number(e.peso):null,buyPrice:e.preco_compra!=null?Number(e.preco_compra):null,costsPercent:e.custos_percent!=null?Number(e.custos_percent):null,costPrice:e.preco_custo!=null?Number(e.preco_custo):null,marginPercent:e.lucro_percent!=null?Number(e.lucro_percent):null,salePrice:e.preco_venda!=null?Number(e.preco_venda):null,wholesaleQty:e.qtd_atacado!=null?Number(e.qtd_atacado):null,wholesalePrice:e.preco_atacado!=null?Number(e.preco_atacado):null,commissionPercent:e.comissao_percent!=null?Number(e.comissao_percent):null,discountPercent:e.desconto_percent!=null?Number(e.desconto_percent):null,cfopInterno:e.cfop_interno??"",cstIcmsInterno:e.cst_icms_interno??"",csosnInterno:e.csosn_interno??"",aliqIcmsInterno:e.aliquota_icms_interno!=null?Number(e.aliquota_icms_interno):null,cfopExterno:e.cfop_externo??"",cstIcmsExterno:e.cst_icms_externo??"",csosnExterno:e.csosn_externo??"",aliqIcmsExterno:e.aliquota_icms_externo!=null?Number(e.aliquota_icms_externo):null,cstPisEntrada:e.cst_pis_entrada??"",cstPisSaida:e.cst_pis_saida??"",aliqPisPercent:e.aliquota_pis_percent!=null?Number(e.aliquota_pis_percent):null,aliqCofinsPercent:e.aliquota_cofins_percent!=null?Number(e.aliquota_cofins_percent):null,cstIpi:e.cst_ipi??"",aliqIpiPercent:e.aliquota_ipi_percent!=null?Number(e.aliquota_ipi_percent):null,fcpPercent:e.fcp_percent!=null?Number(e.fcp_percent):null,mvaPercent:e.mva_percent!=null?Number(e.mva_percent):null,baseReduzidaPercent:e.base_reduzida_percent!=null?Number(e.base_reduzida_percent):null,ncm:e.ncm??"",ncmDescription:e.descricao_ncm??"",cest:e.cest??"",active:e.ativo??!0,allowSale:e.permite_venda??!0,payCommission:e.paga_comissao??!1,variablePrice:e.preco_variavel??!1,composition:e.composicao??!1,service:e.servico??!1,hasGrid:e.grade??!1,usePriceTable:e.usar_tabela_preco??!1,fuel:e.combustivel??!1,useImei:e.usa_imei??!1,stockByGrid:e.controle_estoque_por_grade??!1,showInApp:e.mostrar_no_app??!1}}async function kXe({from:e,to:t,codigoEmpresa:r,limit:n=1e3}={}){if(!e||!t)throw new Error("Perodo invlido");const a=(e instanceof Date?e:new Date(e)).toISOString(),i=(t instanceof Date?t:new Date(t)).toISOString(),{data:o,error:l}=await Yo(g=>{let p=Pe.from("comanda_itens").select("produto_id, quantidade, created_at").gte("created_at",a).lte("created_at",i).limit(n).abortSignal(g);return r&&(p=p.eq("codigo_empresa",r)),p},2e4,"Timeout getSoldProductsByPeriod (20s)");if(l)throw l;const c=new Map;for(const g of o||[]){const p=g.produto_id,v=Number(g.quantidade||0);c.set(p,(c.get(p)||0)+v)}const u=Array.from(c.entries()).sort((g,p)=>p[1]-g[1]);if(u.length===0)return[];const d=u.map(([g])=>g),{data:f,error:h}=await Yo(g=>{let p=Pe.from("produtos").select("id, nome").in("id",d).abortSignal(g);return r&&(p=p.eq("codigo_empresa",r)),p},15e3,"Timeout getSoldProductsByPeriod:produtos (15s)");if(h)throw h;const m=new Map((f||[]).map(g=>[g.id,g.nome]));return u.map(([g,p])=>({id:g,name:m.get(g)||String(g),total:p}))}async function hz({productId:e,delta:t,codigoEmpresa:r}){const n=Number(t);if(!e||!Number.isFinite(n)||n===0)throw new Error("Parmetros invlidos para ajuste de estoque");const{data:a,error:i}=await Yo(u=>{let d=Pe.from("produtos").select("id, estoque, estoque_atual").eq("id",e).single().abortSignal(u);return r&&(d=d.eq("codigo_empresa",r)),d},1e4,"Timeout get current stock (10s)");if(i)throw i;const l=Number(a?.estoque??a?.estoque_atual??0)+n,{error:c}=await Yo(u=>{let d=Pe.from("produtos").update({estoque:l,estoque_atual:l}).eq("id",e).abortSignal(u);return r&&(d=d.eq("codigo_empresa",r)),d},1e4,"Timeout update stock (10s)");if(c)throw c;return{id:e,stock:l}}async function OXe({limit:e=5,codigoEmpresa:t}={}){const r=new Date;r.setHours(0,0,0,0);const n=r.toISOString(),{data:a,error:i}=await Yo(h=>{let m=Pe.from("comanda_itens").select("produto_id, quantidade, created_at").gte("created_at",n).abortSignal(h);return t&&(m=m.eq("codigo_empresa",t)),m},15e3,"Timeout getMostSoldProductsToday (15s)");if(i)throw i;const o=new Map;for(const h of a||[]){const m=h.produto_id,g=Number(h.quantidade||0);o.set(m,(o.get(m)||0)+g)}const l=Array.from(o.entries()).sort((h,m)=>m[1]-h[1]).slice(0,e);if(l.length===0)return[];const c=l.map(([h])=>h),{data:u,error:d}=await Yo(h=>{let m=Pe.from("produtos").select("id, nome").in("id",c).abortSignal(h);return t&&(m=m.eq("codigo_empresa",t)),m},15e3,"Timeout getMostSoldProductsToday:produtos (15s)");if(d)throw d;const f=new Map((u||[]).map(h=>[h.id,h.nome]));return l.map(([h,m])=>({id:h,name:f.get(h)||String(h),total:m}))}function Zte(e){return{codigo_produto:e.code||null,nome:e.name,categoria:e.category||null,tipo_produto:e.type==="Uso Interno"?"uso_interno":"venda",valor_custo:e.cost!=null?Number(e.cost):0,valor_venda:e.price!=null?Number(e.price):0,estoque:e.stock!=null?Number(e.stock):0,estoque_minimo:e.minStock!=null?Number(e.minStock):0,status:e.status||null,validade:e.validade?new Date(e.validade).toISOString().slice(0,10):null,codigo_barras:e.barcode||null,codigo_barras_caixa:e.barcodeBox||null,referencia:e.reference||null,marca:e.brand||null,grupo:e.group||null,unidade:e.unit||null,estoque_inicial:e.initialStock!=null?Number(e.initialStock):null,estoque_atual:e.currentStock!=null?Number(e.currentStock):null,peso:e.weight!=null?Number(e.weight):null,preco_compra:e.buyPrice!=null?Number(e.buyPrice):null,custos_percent:e.costsPercent!=null?Number(e.costsPercent):null,preco_custo:e.costPrice!=null?Number(e.costPrice):null,lucro_percent:e.marginPercent!=null?Number(e.marginPercent):null,preco_venda:e.salePrice!=null?Number(e.salePrice):null,qtd_atacado:e.wholesaleQty!=null?Number(e.wholesaleQty):null,preco_atacado:e.wholesalePrice!=null?Number(e.wholesalePrice):null,comissao_percent:e.commissionPercent!=null?Number(e.commissionPercent):null,desconto_percent:e.discountPercent!=null?Number(e.discountPercent):null,cfop_interno:e.cfopInterno||null,cst_icms_interno:e.cstIcmsInterno||null,csosn_interno:e.csosnInterno||null,aliquota_icms_interno:e.aliqIcmsInterno!=null?Number(e.aliqIcmsInterno):null,cfop_externo:e.cfopExterno||null,cst_icms_externo:e.cstIcmsExterno||null,csosn_externo:e.csosnExterno||null,aliquota_icms_externo:e.aliqIcmsExterno!=null?Number(e.aliqIcmsExterno):null,cst_pis_entrada:e.cstPisEntrada||null,cst_pis_saida:e.cstPisSaida||null,aliquota_pis_percent:e.aliqPisPercent!=null?Number(e.aliqPisPercent):null,aliquota_cofins_percent:e.aliqCofinsPercent!=null?Number(e.aliqCofinsPercent):null,cst_ipi:e.cstIpi||null,aliquota_ipi_percent:e.aliqIpiPercent!=null?Number(e.aliqIpiPercent):null,fcp_percent:e.fcpPercent!=null?Number(e.fcpPercent):null,mva_percent:e.mvaPercent!=null?Number(e.mvaPercent):null,base_reduzida_percent:e.baseReduzidaPercent!=null?Number(e.baseReduzidaPercent):null,ncm:e.ncm||null,descricao_ncm:e.ncmDescription||null,cest:e.cest||null,ativo:e.active!=null?!!e.active:!0,permite_venda:e.allowSale!=null?!!e.allowSale:!0,paga_comissao:e.payCommission!=null?!!e.payCommission:!1,preco_variavel:e.variablePrice!=null?!!e.variablePrice:!1,composicao:e.composition!=null?!!e.composition:!1,servico:e.service!=null?!!e.service:!1,grade:e.hasGrid!=null?!!e.hasGrid:!1,usar_tabela_preco:e.usePriceTable!=null?!!e.usePriceTable:!1,combustivel:e.fuel!=null?!!e.fuel:!1,usa_imei:e.useImei!=null?!!e.useImei:!1,controle_estoque_por_grade:e.stockByGrid!=null?!!e.stockByGrid:!1,mostrar_no_app:e.showInApp!=null?!!e.showInApp:!1,importado_via_xml:e.importedViaXML===!0,xml_chave:e.xmlChave||null,xml_numero:e.xmlNumero||null,xml_serie:e.xmlSerie||null,xml_emissao:e.xmlEmissao?new Date(e.xmlEmissao).toISOString():null}}async function mh(e={}){const{includeInactive:t=!1,search:r="",codigoEmpresa:n}=e;console.info("[products.api] listProducts: start");const{data:a,error:i}=await Yo(l=>{let c=Pe.from("produtos").select("*").order("nome",{ascending:!0}).abortSignal(l);if(n&&(c=c.eq("codigo_empresa",n)),t||(c=c.or("status.is.null,status.neq.inactive")),r&&r.trim().length>0){const u=r.trim();c=c.or(`nome.ilike.%${u}%,codigo_produto.ilike.%${u}%`)}return c},15e3,"Timeout listProducts (15s)");if(i)throw console.error("[products.api] listProducts:error",i),i;const o=(a||[]).map(yD);return console.info("[products.api] listProducts: ok",{count:o.length}),o}async function ere(e,t={}){const{codigoEmpresa:r}=t,n=Zte(e);r&&(n.codigo_empresa=r),console.info("[products.api] createProduct: payload",n);const a=async()=>Yo(u=>Pe.from("produtos").insert(n).select("*").single().abortSignal(u),15e3,"Timeout createProduct (15s)"),i=u=>{if(!u)return!1;if(u.code&&String(u.code)==="23505")return!0;const d=[u.message,u.details,u.hint].filter(Boolean).join(" ").toLowerCase();return d.includes("duplicate key")||d.includes("unique constraint")||d.includes("ux_produtos_empresa_codigo_produto")||d.includes("codigo_produto")};let o,l;if({data:o,error:l}=await a(),l&&i(l)&&n.codigo_produto){console.warn("[products.api] createProduct: duplicate code, trying to free code from inactive product");const{data:u,error:d}=await Yo(f=>Pe.from("produtos").select("id,status").eq("codigo_produto",n.codigo_produto).eq("status","inactive").limit(1).single().abortSignal(f),15e3,"Timeout find duplicate product (15s)");if(!d&&u&&u.status==="inactive"){const{error:f}=await Yo(h=>Pe.from("produtos").update({codigo_produto:null}).eq("id",u.id).abortSignal(h),15e3,"Timeout clear duplicate code (15s)");f||({data:o,error:l}=await a())}}if(l)throw console.error("[products.api] createProduct:error",l),l;const c=yD(o);return console.info("[products.api] createProduct: ok",c),c}async function tre(e,t,r={}){const n=Zte(t);console.info("[products.api] updateProduct: id",e,"payload",n);const{data:a,error:i}=await Yo(l=>Pe.from("produtos").update(n).eq("id",e).select("*").single().abortSignal(l),15e3,"Timeout updateProduct (15s)");if(i)throw console.error("[products.api] updateProduct:error",i),i;const o=yD(a);return console.info("[products.api] updateProduct: ok",o),o}async function Yo(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(new Error(r)),t);try{return await e(n.signal)}catch(i){throw i?.name==="AbortError"?new Error(r):i}finally{clearTimeout(a)}}async function TXe(e){console.info("[products.api] deleteProduct (soft): id",e);const{error:t}=await Yo(r=>Pe.from("produtos").update({status:"inactive",codigo_produto:null}).eq("id",e).abortSignal(r),15e3,"Timeout deleteProduct (15s)");if(t)throw console.error("[products.api] deleteProduct:error",t),t;return console.info("[products.api] deleteProduct: ok (inativado)"),!0}async function mz(){console.info("[products.api] listCategories: start");const{data:e,error:t}=await Yo(n=>Pe.from("produto_categorias").select("nome").eq("ativa",!0).order("nome",{ascending:!0}).abortSignal(n),15e3,"Timeout listCategories (15s)");if(t)throw console.error("[products.api] listCategories:error",t),t;const r=(e||[]).map(n=>n.nome).filter(Boolean);return console.info("[products.api] listCategories: ok",{count:r.length}),r}async function IXe(e){const t=String(e||"").trim();if(!t)throw new Error("Nome da categoria invlido");console.info("[products.api] createCategory:",t);const{data:r,error:n}=await Yo(a=>Pe.from("produto_categorias").insert({nome:t}).select("nome").single().abortSignal(a),15e3,"Timeout createCategory (15s)");if(n)throw console.error("[products.api] createCategory:error",n),n;return r?.nome||t}async function DXe(e){const t=String(e||"").trim();if(!t)throw new Error("Nome da categoria invlido");console.info("[products.api] removeCategory:",t);const{count:r,error:n}=await Yo(l=>Pe.from("produtos").select("id",{count:"exact",head:!0}).eq("categoria",t).neq("status","inactive").abortSignal(l),15e3,"Timeout removeCategory:count (15s)");if(n)throw console.error("[products.api] removeCategory:count:error",n),n;if((r??0)>0){const l=new Error("Categoria possui produtos ativos vinculados");throw console.warn("[products.api] removeCategory: blocked by active products",{nome:t,prodCount:r}),l}const{data:a,error:i}=await Yo(l=>Pe.from("produto_categorias").update({ativa:!1}).eq("nome",t).select("nome").abortSignal(l),15e3,"Timeout removeCategory (15s)");if(i)throw console.error("[products.api] removeCategory:error",i),i;if((Array.isArray(a)?a.length:0)===0){const l=new Error("Categoria no encontrada para desativar");throw console.warn("[products.api] removeCategory: no rows affected",{nome:t}),l}return!0}const MXe={available:{label:"Livre",color:"border-success/50 bg-success/10 text-success",icon:Bs},"in-use":{label:"Em Uso",color:"border-warning/50 bg-warning/10 text-warning",icon:Wg},"awaiting-payment":{label:"Pagamento",color:"border-info/50 bg-info/10 text-info",icon:Gl}},RXe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},LXe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function $Xe(){const{toast:e}=ii(),{userProfile:t,authReady:r}=io(),n=Vc(),[a,i]=y.useState([]),[o,l]=y.useState(null),[c,u]=y.useState(!1),[d,f]=y.useState(0),h=y.useRef(!1),[m,g]=y.useState(!1);y.useState([]);const[p,v]=y.useState(!1),[x,b]=y.useState(!1),[w,_]=y.useState(null),[j,A]=y.useState(null),[P,C]=y.useState(!1),[k,R]=y.useState(!1),[E,I]=y.useState(!1),[T,M]=y.useState([]),[z,V]=y.useState(!1),[W,$]=y.useState(!1),[G,me]=y.useState(!1),[de,L]=y.useState(null),[B,J]=y.useState(""),[q,X]=y.useState(!1),[Z,pe]=y.useState(!1),[te,ve]=y.useState([]),[Ce,he]=y.useState(null),[qe,ye]=y.useState(null),[ce,Ft]=y.useState(!1),qt=y.useRef(""),[It,et]=y.useState(!1),[Ze,Pt]=y.useState(!1),[ue,rt]=y.useState("order"),[Ee,Ke]=y.useState(!1),[Ge,bt]=y.useState(""),[ot,kt]=y.useState(()=>{try{return typeof window<"u"&&window.innerWidth<=640}catch{return!1}});y.useEffect(()=>{const H=()=>{try{kt(typeof window<"u"&&window.innerWidth<=640)}catch{kt(!1)}};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const yt=G||W||k||p||q||ce||m||P||Ze||!1,je=yt?void 0:RXe,We=yt?void 0:LXe,Ot=y.useRef(null),Ve=y.useRef(!1),nt=y.useRef(""),Rt=y.useCallback(async()=>{try{const H=await If({codigoEmpresa:t?.codigo_empresa});u(!!(H&&(H.id||H?.length)))}catch{u(!1)}},[t?.codigo_empresa]);y.useEffect(()=>{const H=Ot.current??document.body.style.overflow;if(Ot.current=H,yt&&!Ve.current){document.body.style.overflow="hidden";try{const U=window.innerWidth-document.documentElement.clientWidth;U>0&&(nt.current=document.body.style.paddingRight||"",document.body.style.paddingRight=`${U}px`)}catch{}try{document.documentElement.classList.add("no-dialog-anim")}catch{}}if(!yt&&Ve.current){document.body.style.overflow=H||"";try{document.body.style.paddingRight=nt.current||""}catch{}try{document.documentElement.classList.remove("no-dialog-anim")}catch{}}return Ve.current=yt,()=>{document.body.style.overflow=H||"";try{document.body.style.paddingRight=nt.current||""}catch{}try{document.documentElement.classList.remove("no-dialog-anim")}catch{}}},[yt]);const Lt=async()=>{const H=t?.codigo_empresa||null;try{if(!H)return;b(!0);const[U,le]=await Promise.all([tb({codigoEmpresa:H}).catch(()=>null),If({codigoEmpresa:H}).catch(()=>null)]);if(!le?.id){_(null);return}let we=0,Oe=[];try{Oe=await Am({caixaSessaoId:le.id,codigoEmpresa:H}),we=(Oe||[]).filter(He=>(He?.tipo||"")==="sangria").reduce((He,jt)=>He+Number(jt?.valor||0),0)}catch{}const $e={saldo_inicial:le.saldo_inicial||0,totalPorFinalizadora:U?.totalPorFinalizadora||U?.porFinalizadora||{},totalEntradas:U?.totalEntradas||U?.entradas||0,totalSangria:we,totalSaidas:we,sessaoId:le.id,movimentacoes:Oe};_($e)}catch{_(null)}finally{b(!1)}};y.useEffect(()=>{(async()=>{try{if(!p)return;await Lt()}catch{}})()},[p,t?.codigo_empresa]);const Tt=H=>H==="in_use"?"in-use":H==="awaiting_payment"?"awaiting-payment":"available",ir=y.useRef(!0);y.useEffect(()=>(ir.current=!0,()=>{ir.current=!1}),[]);const fr=y.useRef(0),ia=y.useRef(0),fn=y.useRef(0);y.useEffect(()=>{const H=t?.codigo_empresa||null,U=H?`vendas:tables:${H}`:null,le="[Vendas:loadTables]",we=()=>{try{if(!U)return;const $e=JSON.parse(localStorage.getItem(U)||"[]");Array.isArray($e)&&$e.length>0&&i($e)}catch{}};H&&we();const Oe=async()=>{try{if(!r||!H)return;const $e=++fn.current;try{console.group(le)}catch{}try{console.log("start",{codigoEmpresa:H})}catch{}const He=setTimeout(()=>{if(ir.current){try{console.warn(le+" still waiting... (showing cached tables if any)")}catch{}we()}},2e3),jt=setTimeout(()=>{if(ir.current&&fn.current===$e){try{console.warn(le+" safety timeout reached")}catch{}we()}},1e4);let Kt=await pg(H),Qe=[];try{Qe=await au({codigoEmpresa:H}),console.log("[VendasPage:load] Comandas abertas carregadas:",Qe)}catch(Vt){console.error("[VendasPage:load] Erro ao carregar comandas abertas:",Vt)}const gt=await(async()=>{try{return await EO((Qe||[]).map(Vt=>Vt.id),H)}catch{return{}}})(),pr=await(async()=>{try{const Vt=await Promise.all((Qe||[]).map(async gr=>{try{const Nr=(await Vo({comandaId:gr.id,codigoEmpresa:H})||[]).map(Te=>Te?.nome).filter(Boolean);return[gr.id,Nr.length?Nr.join(", "):null]}catch{return[gr.id,null]}}));return Object.fromEntries(Vt)}catch{return{}}})(),Nt=new Map;(Qe||[]).forEach(Vt=>Nt.set(Vt.mesa_id,Vt));const Ue=(Kt||[]).map(Vt=>{const gr=Nt.get(Vt.id);let Zr=Tt(Vt.status),Nr=null,Te=0,hr=null;return gr&&(Zr=gr.status==="awaiting-payment"||gr.status==="awaiting_payment"?"awaiting-payment":"in-use",Nr=gr.id,Te=Number(gt[gr.id]||0),hr=pr[gr.id]||null),{id:Vt.id,number:Vt.numero,name:Vt.nome||null,status:Zr,order:[],customer:hr,comandaId:Nr,totalHint:Te}}).map(Vt=>o&&Vt.id===o.id?{...Vt,order:o.order||[],customer:o.customer||Vt.customer}:Vt);if(!ir.current||fn.current!==$e){clearTimeout(He),clearTimeout(jt);return}if(i(Ue),(Ue||[]).length===0)try{U&&localStorage.removeItem(U)}catch{}else try{U&&localStorage.setItem(U,JSON.stringify(Ue))}catch{}ia.current=Array.isArray(Ue)?Ue.length:0,fr.current=Date.now();let Dt=null;try{const Vt=H?`vendas:selected:${H}`:null,gr=Vt?localStorage.getItem(Vt):null;if(gr){const Zr=Ue.find(Nr=>String(Nr.id)===String(gr));Zr&&(Dt=Zr)}}catch{}Dt?q||l(Dt):q||l(Vt=>{const gr=Vt?Ue.find(Nr=>Nr.id===Vt.id):null;return(gr&&Vt?{...gr,order:Vt.order||gr.order,customer:Vt.customer||gr.customer}:gr)||Ue[0]||null});try{let Vt=await mh({includeInactive:!1,codigoEmpresa:H});(!Array.isArray(Vt)||Vt.length===0)&&(console.warn("[VendasPage] Nenhum produto ativo encontrado. Tentando carregar inativos tambm..."),Vt=await mh({includeInactive:!0,codigoEmpresa:H})),M(Vt||[]),console.info("[VendasPage] Produtos carregados:",(Vt||[]).length)}catch(Vt){console.warn("Falha ao carregar produtos:",Vt?.message||Vt)}try{console.log("ok",{tables:Ue.length,openComandas:(Qe||[]).length})}catch{}try{console.groupEnd()}catch{}clearTimeout(He),clearTimeout(jt)}catch($e){console.error("Erro ao carregar mesas:",$e)}};return we(),r&&H&&Oe(),()=>{}},[r,t?.codigo_empresa,yt]),y.useEffect(()=>{!r||!t?.codigo_empresa||Rt()},[r,t?.codigo_empresa,Rt]),y.useEffect(()=>{(async()=>{if(!h.current&&d>0&&!c){h.current=!0;try{await nd({codigoEmpresa:t?.codigo_empresa}),await Rt()}catch{}}})()},[d,c,Rt,t?.codigo_empresa]),y.useEffect(()=>{let H=!0;return(async()=>{try{if(!t?.codigo_empresa){H&&f(0);return}const U=await au({codigoEmpresa:t?.codigo_empresa});if(!H)return;f(Array.isArray(U)?U.length:0)}catch{H&&f(0)}})(),()=>{H=!1}},[t?.codigo_empresa,a.length]),y.useEffect(()=>{const H=t?.codigo_empresa||null,U=H?`vendas:selected:${H}`:null;try{U&&o?.id&&localStorage.setItem(U,String(o.id))}catch{}o?.comandaId&&(!o.order||o.order.length===0)&&dr(o)},[o?.id,o?.comandaId]),y.useEffect(()=>{const H=()=>{!yt&&!E&&o?.comandaId&&dr(o)},U=()=>{!yt&&!E&&document.visibilityState==="visible"&&o?.comandaId&&dr(o)};return window.addEventListener("focus",H),document.addEventListener("visibilitychange",U),()=>{window.removeEventListener("focus",H),document.removeEventListener("visibilitychange",U)}},[o?.comandaId,yt,E]);const Or=async()=>{try{if(!o?.comandaId){e({title:"Selecione uma mesa com comanda aberta",variant:"warning"});return}await nd({codigoEmpresa:t?.codigo_empresa});try{const we=(await Ai({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map($e=>({id:$e.id,productId:$e.produto_id,name:$e.descricao||"Item",price:Number($e.preco_unitario||0),quantity:Number($e.quantidade||1)})),Oe={...o,order:we};l(Oe),i($e=>$e.map(He=>He.id===Oe.id?Oe:He))}catch{}const H=await kg({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa});ve(H||[]);const U=H&&H[0]&&H[0].id?H[0].id:null;he(U),ye(U),X(!0)}catch(H){e({title:"Falha ao carregar finalizadoras",description:H?.message||"Tente novamente",variant:"destructive"})}},yr=H=>{if(!H.destination)return;const U=Array.from(a),[le]=U.splice(H.source.index,1);U.splice(H.destination.index,0,le),i(U),e({title:"Layout das mesas atualizado!",description:"As posies foram salvas temporariamente.",variant:"success"})},Er=H=>(H||[]).reduce((U,le)=>U+le.price*le.quantity,0),Dr=H=>{if(!H)return"";const U=H.trim().split(/\s+/);return U.length<=2?H:U.slice(0,2).join(" ")},wa=H=>{if(!H)return"";const U=we=>String(we).replace(/^\s*[\[]+\s*/g,"").replace(/\s*[\]]+\s*$/g,"").trim(),le=H.split(",").map(we=>U(we)).filter(Boolean);return le.length===0?"":le.length===1?Dr(le[0]):`${Dr(le[0])} +${le.length-1}`},or=y.useMemo(()=>{const H=new Map,U=o?.order||[];for(const le of U){const we=le.productId;we&&H.set(we,(H.get(we)||0)+Number(le.quantity||0))}return H},[o?.order]),dr=async H=>{try{if(!H?.comandaId)return;const le=(await Ai({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map($e=>({id:$e.id,productId:$e.produto_id,name:$e.descricao||"Item",price:Number($e.preco_unitario||0),quantity:Number($e.quantidade||1)}));let we=H.customer||null;try{const He=(await Vo({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(jt=>jt?.nome).filter(Boolean);we=He.length?He.join(", "):null}catch{}const Oe={...H,status:H.status==="awaiting-payment"?"awaiting-payment":"in-use",order:le,customer:we};l(Oe),i($e=>$e.map(He=>He.id===Oe.id?Oe:He))}catch(U){console.warn("[VendasPage] Falha ao recarregar detalhes da mesa selecionada:",U)}},Vn=async({showToast:H=!1}={})=>{try{const U=t?.codigo_empresa;if(!U){console.warn("[refreshTablesLight] Cdigo da empresa no disponvel");return}console.log("[refreshTablesLight] Iniciando atualizao das mesas...");const le=await pg(U);console.log("[refreshTablesLight] Mesas carregadas:",le?.length||0);let we=[];try{we=await au({codigoEmpresa:U}),console.log("[refreshTablesLight] Comandas abertas:",we?.length||0)}catch(Qe){console.error("[refreshTablesLight] Erro ao carregar comandas:",Qe)}const Oe=new Map((we||[]).map(Qe=>[Qe.mesa_id,Qe])),$e={},He={};try{const Qe=(we||[]).map(Nt=>Nt.id);(await Promise.all(Qe.map(async Nt=>{try{return{id:Nt,vinculos:await Vo({comandaId:Nt,codigoEmpresa:U})}}catch{return{id:Nt,vinculos:[]}}}))).forEach(({id:Nt,vinculos:zt})=>{const Ue=(zt||[]).map(Dt=>Dt?.nome).filter(Boolean);$e[Nt]=Ue.length?Ue.join(", "):null}),(await Promise.all(Qe.map(async Nt=>{try{const zt=await Ai({comandaId:Nt,codigoEmpresa:U}),Ue=(zt||[]).reduce((Dt,Vt)=>{const gr=(Vt.quantidade||0)*(Vt.preco_unitario||0)-(Vt.desconto||0);return Dt+gr},0);return console.log(`[refreshTablesLight] Comanda ${Nt}: ${zt?.length||0} itens, total: R$ ${Ue.toFixed(2)}`),{comandaId:Nt,total:Ue}}catch(zt){return console.error(`[refreshTablesLight] Erro ao buscar itens da comanda ${Nt}:`,zt),{comandaId:Nt,total:0}}}))).forEach(({comandaId:Nt,total:zt})=>{He[Nt]=zt})}catch(Qe){console.error("[refreshTablesLight] Erro ao carregar clientes/totais:",Qe)}const Kt=(le||[]).map(Qe=>{const gt=Oe.get(Qe.id);let pr=Tt(Qe.status),Nt=null,zt=null,Ue=0;return gt&&(pr=gt.status==="awaiting-payment"||gt.status==="awaiting_payment"?"awaiting-payment":"in-use",Nt=gt.id,zt=$e[gt.id]||null,Ue=He[gt.id]||0),{id:Qe.id,number:Qe.numero,name:Qe.nome||null,status:pr,order:[],customer:zt,comandaId:Nt,totalHint:Ue}}).map(Qe=>o&&Qe.id===o.id?{...Qe,order:o.order||[],customer:o.customer||Qe.customer}:Qe);i(Kt),console.log("[refreshTablesLight] Mesas atualizadas com sucesso:",Kt.length)}catch(U){console.error("[refreshTablesLight] Erro fatal:",U),H&&e({title:"Erro ao atualizar mesas",description:"Recarregue a pgina se o problema persistir",variant:"destructive"})}},qa=async H=>{if(!Z){pe(!0);try{const U=o;if(V(!0),H.comandaId){console.log(`[handleSelectTable] Verificando status da comanda ${H.comandaId}`);try{const{data:le,error:we}=await Pe.from("comandas").select("id, status, fechado_em").eq("id",H.comandaId).eq("codigo_empresa",t?.codigo_empresa).single();if(we||!le){console.log(`[handleSelectTable] Comanda ${H.comandaId} no encontrada, criando nova`),L(H),$(!0);return}if(le.fechado_em||le.status==="closed"){console.log(`[handleSelectTable] Comanda ${H.comandaId} est fechada, criando nova`),L(H),$(!0);return}console.log(`[handleSelectTable] Comanda ${H.comandaId} ativa, carregando dados`);const $e=(await Ai({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(Kt=>({id:Kt.id,name:Kt.descricao||"Item",price:Number(Kt.preco_unitario||0),quantity:Number(Kt.quantidade||1)}));let He=null;try{const Qe=(await Vo({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(gt=>gt?.nome).filter(Boolean);He=Qe.length?Qe.join(", "):null,console.log(`[handleSelectTable] Clientes da comanda ativa ${H.comandaId}:`,Qe)}catch(Kt){console.error("[handleSelectTable] Erro ao carregar clientes:",Kt)}const jt={...H,status:"in-use",order:$e,customer:He};l(jt),i(Kt=>Kt.map(Qe=>Qe.id===H.id?jt:Qe))}catch(le){console.error("[handleSelectTable] Erro ao verificar comanda:",le),L(H),$(!0)}}else L(H),$(!0)}catch(U){e({title:"Falha ao carregar comanda da mesa",description:U?.message||"Tente novamente",variant:"destructive"}),l(le=>le||previous||null)}finally{V(!1),pe(!1)}}},la=({table:H,provided:U,isDragging:le})=>{const we=MXe[H.status],Oe=we.icon,$e=Er(H.order);wa(H.customer);const He=H.status==="in-use"||H.status==="awaiting-payment"?$e>0?$e:Number(H.totalHint||0):0,jt=H.status==="available"?"text-success bg-success/10 border-success/30":H.status==="in-use"?"text-warning bg-warning/10 border-warning/30":"text-info bg-info/10 border-info/30";return s.jsxs("div",{ref:U.innerRef,...U.draggableProps,className:Et("p-4 rounded-lg border bg-surface flex flex-col transition-colors duration-150 relative h-44 shadow-sm min-w-[240px]",le&&"shadow-lg",o?.id===H.id&&"ring-2 ring-brand/60 bg-surface-2",c?"cursor-pointer hover:shadow-md":"cursor-not-allowed opacity-60"),onClick:()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}qa(H)},children:[s.jsx("div",{...U.dragHandleProps,className:"absolute top-2 right-2 text-text-muted opacity-60 hover:opacity-100",children:s.jsx(oce,{size:14})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Oe,{className:"w-5 h-5 text-text-secondary"}),s.jsx("span",{className:"text-lg font-semibold text-text-primary truncate flex-1",children:H.name?H.name:`Mesa ${H.number}`}),s.jsx("span",{className:Et("text-[11px] font-medium px-2 py-0.5 rounded-full border",jt),children:we.label})]}),s.jsx("div",{className:Et("flex-1 flex items-center justify-center"),children:H.status==="available"?s.jsx("img",{src:"/mesalivre.png",alt:"Mesa livre",className:Et("w-16 h-16 object-contain opacity-80 transition-all duration-200",o?.id===H.id&&"opacity-100 scale-110")}):H.status==="in-use"?s.jsx("img",{src:"/mesaocupada.png",alt:"Mesa ocupada",className:Et("w-16 h-16 object-contain opacity-80 transition-all duration-200",o?.id===H.id&&"opacity-100 scale-110")}):s.jsx("div",{className:Et("w-16 h-16 rounded-lg bg-info/20 border-2 border-info/40 flex items-center justify-center transition-all duration-200",o?.id===H.id&&"bg-info/30 border-info/60 scale-110"),children:s.jsx(Gl,{className:"w-8 h-8 text-info"})})}),H.status==="in-use"||H.status==="awaiting-payment"?s.jsxs("div",{className:"w-full mt-auto",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(ps,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),s.jsx("div",{className:"text-sm sm:text-base font-medium text-text-primary truncate",title:H.customer||"",children:wa(H.customer)||""})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ls,{className:"w-3 h-3 text-text-muted flex-shrink-0"}),s.jsxs("div",{className:"text-sm font-bold text-text-secondary",children:["R$ ",He.toFixed(2)]})]})]}):s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"text-xs text-text-muted text-center",children:"Sem comanda"})})]})},_e=()=>{const H=o?Er(o.order):0,[U,le]=y.useState(!1),[we,Oe]=y.useState([]),[$e,He]=y.useState(1),[jt,Kt]=y.useState([]),Qe=y.useRef(new Map),gt=typeof window<"u"&&window.innerWidth<=640,pr=Dt=>{const Vt=String(Dt||"").replace(/\D/g,"");return Vt?Number(Vt)/100:0},Nt=()=>(we||[]).reduce((Dt,Vt)=>Dt+pr(Vt.value),0),zt=(Dt,Vt)=>{try{if(gt)return;const gr=(we||[]).findIndex(Zr=>Zr.id===Vt);if(gr>=0){const Zr=(we||[])[gr+1]||null;if(Zr&&Qe.current.get(Zr.id)){const Nr=Qe.current.get(Zr.id);setTimeout(()=>{try{Nr.focus(),Nr.select?.()}catch{}},0);return}}if(Dt&&Dt instanceof HTMLElement){const Zr=Array.from(document.querySelectorAll('input[data-pay-value="1"]')),Nr=Zr.indexOf(Dt);if(Nr>=0&&Zr[Nr+1]){const Te=Zr[Nr+1];setTimeout(()=>{try{Te.focus(),Te.select?.()}catch{}},0);return}}Oe(Zr=>{const Nr=jt[0]?.id||"",Te=te&&te[0]&&te[0].id?te[0].id:null,hr=$e,cr=[...Zr,{id:hr,clientId:Nr,methodId:Te,value:""}];return He(Fr=>Fr+1),gt||setTimeout(()=>{const Fr=Qe.current.get(hr);if(Fr)try{Fr.focus(),Fr.select?.()}catch{}},0),cr})}catch{}};y.useEffect(()=>{let Dt=!0;return(async()=>{try{if(!q||!o?.comandaId)return;let gr=[];try{const hr=await Vo({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa});gr=(Array.isArray(hr)?hr:[]).map(Fr=>{const pn=Fr?.cliente_id??Fr?.clientes?.id??null,wr=Fr?.clientes?.nome??Fr?.nome??Fr?.nome_livre??"";return pn?{id:pn,nome:wr}:null}).filter(Boolean)}catch{gr=[]}if(!Dt)return;Kt(gr);let Zr=te&&te[0]&&te[0].id?te[0].id:null,Nr=gr[0]?.id||null,Te="";try{const cr=(await Ai({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).reduce((Fr,pn)=>Fr+Number(pn.quantidade||0)*Number(pn.preco_unitario||0),0);cr>0&&(Te=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(cr))}catch{}Oe([{id:1,clientId:Nr,methodId:Zr,value:Te}]),He(2)}catch{}})(),()=>{Dt=!1}},[q,o?.comandaId]),y.useEffect(()=>{let Dt=!0;return(async()=>{try{if(!q||Array.isArray(te)&&te.length>0)return;const gr=await kg({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa});if(!Dt)return;ve(gr||[])}catch{}})(),()=>{Dt=!1}},[q]);const Ue=async()=>{try{if(!o?.comandaId)return;const Dt=t?.codigo_empresa;if(!Dt){e({title:"Empresa no definida",variant:"destructive"});return}if(!Array.isArray(we)||we.length===0){e({title:"Informe os pagamentos",description:"Adicione pelo menos uma forma de pagamento.",variant:"warning"});return}for(const Te of we){if(!Te.methodId){e({title:"Forma de pagamento faltando",description:"Selecione a finalizadora em todas as linhas.",variant:"warning"});return}if(pr(Te.value)<=0){e({title:"Valor invlido",description:"Informe valores maiores que zero.",variant:"warning"});return}}const Vt=H>0?H:0,gr=Nt(),Zr=Math.abs(gr-Vt);if(Zr>.009&&Zr<=.05){const Te=Vt-gr;Oe(hr=>{const cr=hr.length-1;return hr.map((Fr,pn)=>{if(pn===cr){const ln=pr(Fr.value)+Te,Kn=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ln);return{...Fr,value:Kn}}return Fr})})}else if(Zr>.05){const Te=Vt-gr;Te>0?e({title:"Valor insuficiente",description:`Faltam R$ ${Te.toFixed(2)} para fechar o total.`,variant:"warning"}):e({title:"Valor excedente",description:`Excedeu em R$ ${Math.abs(Te).toFixed(2)}. Ajuste os valores.`,variant:"warning"});return}let Nr=H;if(Nr<=0)try{Nr=(await Ai({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).reduce((cr,Fr)=>cr+Number(Fr.quantidade||0)*Number(Fr.preco_unitario||0),0)}catch{}le(!0),await nd({codigoEmpresa:t?.codigo_empresa});for(const Te of we){const hr=pr(Te.value),cr=te.find(pn=>String(pn.id)===String(Te.methodId)),Fr=cr?.nome||cr?.tipo||"outros";await OO({comandaId:o.comandaId,finalizadoraId:Te.methodId,metodo:Fr,valor:hr,status:"Pago",codigoEmpresa:Dt,clienteId:Te.clientId||null})}await w_({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa}),i(Te=>Te.map(hr=>hr.id===o.id?{...hr,status:"available",order:[],comandaId:null,customer:null,totalHint:0}:hr)),l(Te=>Te&&{...Te,status:"available",order:[],comandaId:null,customer:null,totalHint:0});try{t?.codigo_empresa&&localStorage.removeItem(`vendas:tables:${t.codigo_empresa}`)}catch{}try{const Te=await pg(t?.codigo_empresa),hr=await au({codigoEmpresa:t?.codigo_empresa}),cr={};await Promise.all((hr||[]).map(async pn=>{try{const ln=(await Vo({comandaId:pn.id,codigoEmpresa:t?.codigo_empresa})||[]).map(Kn=>Kn?.nome).filter(Boolean);cr[pn.id]=ln.length?ln.join(", "):null}catch{cr[pn.id]=null}}));const Fr=(Te||[]).map(pn=>{const wr=(hr||[]).find(ln=>ln.mesa_id===pn.id);return{id:pn.id,name:pn.nome||`Mesa ${pn.numero}`,status:wr?"in-use":"available",comandaId:wr?.id||null,customer:wr?cr[wr.id]:null,order:[],totalHint:0}});i(Fr)}catch{}e({title:"Pagamento registrado",description:`Total R$ ${Nr.toFixed(2)}`,variant:"success"}),X(!1)}catch(Dt){e({title:"Falha ao registrar pagamento",description:Dt?.message||"Tente novamente",variant:"destructive"})}finally{le(!1)}};return we&&we.length>0,s.jsx(rn,{open:q,onOpenChange:X,children:s.jsxs(Yr,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:Dt=>Dt.stopPropagation(),onKeyDownCapture:Dt=>Dt.stopPropagation(),onPointerDownOutside:Dt=>Dt.stopPropagation(),onInteractOutside:Dt=>Dt.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Fechar Conta"}),s.jsx(cn,{children:"Divida o pagamento entre clientes e vrias finalizadoras, se necessrio."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-lg font-semibold",children:"Total"}),s.jsxs("div",{className:"text-lg font-bold",children:["R$ ",H.toFixed(2)]})]}),s.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto thin-scroll pr-1 max-h-[60vh]",children:[s.jsx(ct,{className:"block",children:"Pagamentos"}),(we||[]).map((Dt,Vt)=>{const gr=Te=>{if(!Te)return"Cliente";const hr=(jt||[]).find(cr=>String(cr.id)===String(Te));return hr?.nome?hr.nome:"Cliente"},Zr=(jt||[]).length>1,Nr=(jt||[])[0]||null;return(jt||[]).filter(Te=>String(Te.id)!==String(Nr?.id||"")),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"sm:col-span-1 flex sm:justify-start",children:we.length>1&&Vt>0&&s.jsx(Ae,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8",onClick:()=>{Oe(Te=>{const hr=Te.filter(wr=>wr.id!==Dt.id);if(hr.length===0)return[];const cr=H>0?H:0,Fr=Math.floor(cr/hr.length*100)/100,pn=cr-Fr*hr.length;return hr.map((wr,ln)=>{const Kn=ln===hr.length-1?Fr+pn:Fr,Na=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Kn);return{...wr,value:Na}})})},children:""})}),Vt===0?s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:gr(Nr?.id||Dt.clientId)})}):Zr?s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(kn,{value:Dt.clientId||"",onValueChange:Te=>Oe(hr=>hr.map(cr=>cr.id===Dt.id?{...cr,clientId:Te}:cr)),children:[s.jsx(An,{className:"w-full truncate",children:s.jsx(On,{placeholder:"Cliente"})}),s.jsx(Pn,{children:(jt||[]).map(Te=>s.jsx(Ht,{value:Te.id,children:Te.nome},Te.id))})]})}):s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:gr(Nr?.id||Dt.clientId)})}),s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(kn,{value:Dt.methodId||"",onValueChange:Te=>Oe(hr=>hr.map(cr=>cr.id===Dt.id?{...cr,methodId:Te}:cr)),children:[s.jsx(An,{className:"w-full truncate",children:s.jsx(On,{placeholder:"Forma de pagamento"})}),s.jsx(Pn,{children:(te||[]).map(Te=>s.jsx(Ht,{value:Te.id,children:Te.nome},Te.id))})]})}),s.jsx("div",{className:"sm:col-span-3",children:s.jsx(Mt,{placeholder:"0,00",inputMode:"numeric",value:Dt.value,"data-pay-value":"1",ref:Te=>{Te?Qe.current.set(Dt.id,Te):Qe.current.delete(Dt.id)},onChange:Te=>{const hr=(Te.target.value||"").replace(/\D/g,""),cr=hr?Number(hr)/100:0,Fr=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(cr);Oe(pn=>pn.map(wr=>wr.id===Dt.id?{...wr,value:Fr}:wr))},onKeyDown:Te=>{if(Te.stopPropagation(),Te.key==="Enter"){Te.preventDefault(),zt(Te.currentTarget,Dt.id);return}["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(Te.key)||/^[0-9]$/.test(Te.key)||Te.preventDefault()},onBeforeInput:Te=>{const hr=Te.data??"";hr&&/\D/.test(hr)&&Te.preventDefault()}})})]},Dt.id)}),s.jsx("div",{children:s.jsx(Ae,{type:"button",variant:"secondary",size:"sm",onClick:()=>{Oe(Dt=>{const Vt=jt[0]?.id||"",gr=te&&te[0]&&te[0].id?te[0].id:null,Zr=[...Dt,{id:$e,clientId:Vt,methodId:gr,value:""}],Nr=H>0?H:0,Te=Math.floor(Nr/Zr.length*100)/100,hr=Nr-Te*Zr.length;return Zr.map((cr,Fr)=>{const pn=Fr===Zr.length-1?Te+hr:Te,wr=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(pn);return{...cr,value:wr}})}),He(Dt=>Dt+1)},children:"Adicionar forma"})}),s.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[s.jsx("span",{children:"Soma"}),s.jsxs("span",{children:["R$ ",Nt().toFixed(2)]})]}),s.jsxs("div",{className:"text-sm font-semibold flex justify-between",children:[s.jsx("span",{children:"Restante"}),s.jsxs("span",{className:Math.abs(H-Nt())<.005?"text-success":"text-warning",children:["R$ ",(H-Nt()).toFixed(2)]})]})]})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{type:"button",variant:"outline",onClick:()=>X(!1),disabled:U,children:"Cancelar"}),s.jsx(Ae,{type:"button",onClick:Ue,disabled:!(we&&we.length>0&&!U),children:U?"Processando...":"Confirmar Pagamento"})]})]})})},wt=()=>{const H=zt=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(zt||0));Number(w?.saldo_inicial??w?.saldoInicial??0);const U=w?.totalPorFinalizadora||w?.porFinalizadora||{},le=Number(w?.totalEntradas??w?.entradas??0);le>0||Object.values(U||{}).reduce((zt,Ue)=>zt+Number(Ue||0),0);const we=Number(w?.sangria??w?.totalSangria??0);Number(w?.totalSaidas??w?.saidas??we);const[Oe,$e]=y.useState(!1),[He,jt]=y.useState(""),[Kt,Qe]=y.useState(""),[gt,pr]=y.useState(!1),Nt=async()=>{try{pr(!0);const zt=String(He||"").replace(/\D/g,""),Ue=zt?Number(zt)/100:0;if(Ue<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await nd({codigoEmpresa:t?.codigo_empresa}),await bee({tipo:"sangria",valor:Ue,observacao:Kt,codigoEmpresa:t?.codigo_empresa}),$e(!1),jt(""),Qe(""),await Lt(),e({title:"Sangria registrada",variant:"success"})}catch(zt){e({title:"Falha ao registrar sangria",description:zt?.message||"Tente novamente",variant:"destructive"})}finally{pr(!1)}};return s.jsx(rn,{open:p,onOpenChange:v,children:s.jsxs(Yr,{className:"sm:max-w-lg w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:zt=>zt.stopPropagation(),onKeyDownCapture:zt=>zt.stopPropagation(),onPointerDownOutside:zt=>zt.stopPropagation(),onInteractOutside:zt=>zt.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),s.jsx(cn,{children:"Resumo da sesso atual do caixa."})]}),x?s.jsx("div",{className:"text-sm text-text-muted px-3",children:"Atualizando..."}):s.jsxs("div",{className:"px-1",children:[Object.keys(U).length===0?s.jsx("div",{className:"p-3 text-sm text-text-muted border rounded-md",children:"Nenhuma finalizadora registrada ainda."}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"rounded-md border border-border overflow-hidden divide-y divide-border",children:Object.entries(U).map(([zt,Ue])=>s.jsxs("li",{className:"bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:String(zt)}),s.jsx("span",{className:"text-sm font-semibold tabular-nums",children:H(Ue)})]},zt))}),s.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Sangrias"}),s.jsx("span",{className:"text-sm font-semibold tabular-nums text-danger",children:H(we)})]})]}),s.jsx("div",{className:"mt-3 text-xs text-text-muted leading-relaxed px-1",children:'Sadas incluem sangrias e ajustes. Use "Registrar Sangria" para lanar uma retirada.'})]}),s.jsxs(Dn,{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"mr-auto"}),s.jsx(Ae,{variant:"destructive",onClick:()=>$e(!0),children:"Registrar Sangria"}),s.jsx(Ae,{variant:"secondary",onClick:()=>v(!1),children:"Fechar"})]}),s.jsx(rn,{open:Oe,onOpenChange:$e,children:s.jsxs(Yr,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:zt=>zt.stopPropagation(),onKeyDownCapture:zt=>zt.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold",children:"Registrar Sangria"}),s.jsx(cn,{children:"Informe o valor a retirar do caixa e, opcionalmente, uma observao."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"sangria-valor",children:"Valor"}),s.jsx(Mt,{id:"sangria-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:He,onChange:zt=>{const Ue=(zt.target.value||"").replace(/\D/g,""),Dt=Ue?Number(Ue)/100:0,Vt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Dt);jt(Vt)},onKeyDown:zt=>{zt.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(zt.key)&&(/^[0-9]$/.test(zt.key)||zt.preventDefault())},onBeforeInput:zt=>{const Ue=zt.data??"";Ue&&/\D/.test(Ue)&&zt.preventDefault()}})]}),s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"sangria-obs",children:"Observao"}),s.jsx(Mt,{id:"sangria-obs",placeholder:"Opcional",value:Kt,onChange:zt=>Qe(zt.target.value)})]})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>$e(!1),disabled:gt,children:"Cancelar"}),s.jsx(Ae,{onClick:Nt,disabled:gt,children:gt?"Registrando...":"Confirmar"})]})]})})]})})},dt=()=>{const H=o,U=H?.order||[],le=H?Er(U):0;return s.jsx(rn,{open:k,onOpenChange:R,children:s.jsxs(Yr,{className:"sm:max-w-xl w-[92vw] animate-none",onKeyDown:we=>we.stopPropagation(),onKeyDownCapture:we=>we.stopPropagation(),onPointerDownOutside:we=>we.stopPropagation(),onInteractOutside:we=>we.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsxs(Xr,{className:"text-2xl font-bold",children:["Comanda da Mesa ",H?.number??""]}),s.jsx(cn,{children:H?.customer?`Cliente: ${H.customer}`:"Sem cliente vinculado"})]}),s.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto thin-scroll",children:U.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhum item na comanda."}):s.jsx("ul",{className:"divide-y divide-border",children:U.map(we=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:we.name}),s.jsxs("div",{className:"text-xs text-text-muted",children:["Qtd: ",we.quantity,"  Unit: R$ ",Number(we.price||0).toFixed(2)]})]}),s.jsxs("div",{className:"font-semibold",children:["R$ ",(Number(we.price||0)*Number(we.quantity||0)).toFixed(2)]})]},we.id))})}),s.jsxs(Dn,{children:[s.jsxs("div",{className:"mr-auto text-sm font-semibold",children:["Total: R$ ",le.toFixed(2)]}),s.jsx(Ae,{variant:"secondary",onClick:()=>R(!1),children:"Fechar"}),s.jsxs(Ae,{onClick:async()=>{R(!1),await Or()},disabled:!H||U.length===0,children:[s.jsx(Ls,{className:"mr-2 h-4 w-4"})," Fechar Conta"]})]})]})})},ht=({table:H})=>{if(!H)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-text-muted",children:[s.jsx(lE,{size:48,className:"mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Nenhuma mesa selecionada"}),s.jsx("p",{children:"Clique em uma mesa para ver os detalhes da comanda."})]});const U=Er(H.order),le=wa(H.customer),we=async()=>{if(!H?.comandaId)return;const jt=(await Ai({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(gt=>({id:gt.id,productId:gt.produto_id,name:gt.descricao||"Item",price:Number(gt.preco_unitario||0),quantity:Number(gt.quantidade||1)}));let Kt=H.customer||null;try{const pr=(await Vo({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(Nt=>Nt?.nome).filter(Boolean);Kt=pr.length?pr.join(", "):null}catch{}const Qe={...H,order:jt,customer:Kt};l(Qe),i(gt=>gt.map(pr=>pr.id===Qe.id?Qe:pr))},Oe=async(He,jt)=>{try{const Qe=Number(He.quantity||1)+jt;if(Qe<=0){await Og({itemId:He.id,codigoEmpresa:t?.codigo_empresa}),await we(),e({title:"Item removido",description:He.name,variant:"warning"});return}await od({itemId:He.id,quantidade:Qe,codigoEmpresa:t?.codigo_empresa}),await we(),e({title:"Quantidade atualizada",description:`${He.name}: ${Qe}`,variant:"success"})}catch(Kt){e({title:"Falha ao atualizar quantidade",description:Kt?.message||"Tente novamente",variant:"destructive"})}},$e=async He=>{try{await Og({itemId:He.id,codigoEmpresa:t?.codigo_empresa}),await we(),e({title:"Item removido",description:He.name,variant:"warning"})}catch(jt){e({title:"Falha ao remover item",description:jt?.message||"Tente novamente",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2",children:[le?s.jsx("div",{className:"text-sm font-medium text-text-primary leading-none truncate",title:H.customer||"",children:le}):s.jsx("div",{className:"h-0 w-0","aria-hidden":"true"}),s.jsx("div",{className:"flex items-center gap-2",children:H.comandaId?s.jsxs(s.Fragment,{children:[s.jsxs(Ae,{size:"sm",className:"h-8 px-3 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-black/60 text-white border border-white/10 shadow-sm hover:bg-black/80 hover:shadow transition-all flex items-center",onClick:()=>I(!0),children:[s.jsx(ps,{size:12,className:"text-white/80 mr-1.5"}),"Clientes"]}),s.jsxs(Ae,{size:"sm",variant:"outline",className:"h-8 px-3 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-black/60 text-white border border-white/10 shadow-sm hover:bg-black/80 hover:shadow transition-all",onClick:()=>R(!0),children:[s.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-black/40 border border-white/10 mr-1.5",children:s.jsx(Gl,{size:12,className:"text-white/80"})}),"Comanda"]}),s.jsxs(Tf,{children:[s.jsx(pm,{asChild:!0,children:s.jsx(Ae,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap bg-red-600 hover:bg-red-500 text-white border border-red-600/70 focus:outline-none focus:ring-0 focus-visible:ring-0 shadow-none",children:"Cancelar"})}),s.jsxs(md,{className:"sm:max-w-[420px] animate-none",onKeyDown:He=>He.stopPropagation(),children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Cancelar comanda?"}),s.jsx(yd,{children:"Esta ao no pode ser desfeita. Os itens sero descartados e a mesa voltar a ficar livre."})]}),s.jsxs(gd,{children:[s.jsx(bd,{children:"Voltar"}),s.jsx(xd,{onClick:async()=>{try{console.log("[Cancelar Comanda] Iniciando cancelamento da comanda:",H.comandaId),await S7({comandaId:H.comandaId,codigoEmpresa:t?.codigo_empresa}),console.log("[Cancelar Comanda] Comanda cancelada com sucesso"),l(null),await Vn({showToast:!0}),console.log("[Cancelar Comanda] Mesas atualizadas"),e({title:"Comanda cancelada",variant:"success"})}catch(He){console.error("[Cancelar Comanda] Erro:",He),e({title:"Falha ao cancelar comanda",description:He?.message||"Tente novamente",variant:"destructive"});try{await Vn({showToast:!0})}catch(jt){console.error("[Cancelar Comanda] Erro ao recarregar aps falha:",jt)}}},children:"Confirmar Cancelamento"})]})]})]})]}):s.jsx(Ae,{size:"sm",className:"h-7 px-2.5 rounded-full text-[12px] font-medium leading-none whitespace-nowrap",onClick:()=>{L(H),$(!0)},children:"Abrir Mesa"})})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 thin-scroll",children:H.order.length===0?s.jsx("div",{className:"text-center text-text-muted pt-16",children:s.jsx("p",{children:"Comanda vazia. Adicione produtos na aba ao lado."})}):s.jsx("ul",{className:"space-y-3",children:H.order.map(He=>s.jsxs("li",{className:"p-2 rounded-md border border-border/30 bg-surface",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-semibold text-text-primary truncate",title:He.name,children:He.name})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ae,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>Oe(He,-1),children:s.jsx(WR,{size:12})}),s.jsx("span",{className:"w-7 text-center font-semibold text-sm",children:He.quantity}),s.jsx(Ae,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>Oe(He,1),children:s.jsx(ri,{size:12})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-bold text-text-primary whitespace-nowrap",children:["R$ ",(He.price*He.quantity).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border",children:["x",He.quantity]}),s.jsx(Ae,{variant:"ghost",size:"icon",className:"text-danger/80 hover:text-danger h-7 w-7",onClick:()=>$e(He),children:s.jsx(G2,{size:14})})]})]})]},He.id))})}),s.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-text-secondary mb-2",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",U.toFixed(2)]})]}),s.jsxs(Ae,{size:"lg",className:"w-full",onClick:Or,children:[s.jsx(Ls,{className:"mr-2"})," Fechar Conta"]})]})]}),s.jsx(_e,{})]})},mt=()=>{const[H,U]=y.useState(""),[le,we]=y.useState(""),Oe=async()=>{try{V(!0);const $e=(H??"").toString().trim(),He=$e?Number($e):void 0;if(He!==void 0&&(Number.isNaN(He)||He<=0)){e({title:"Nmero invlido",description:"Informe um nmero positivo.",variant:"warning"});return}const jt=await WWe({numero:He,nome:(le||"").trim()||void 0,codigoEmpresa:t?.codigo_empresa}),Kt={id:jt.id,number:jt.numero,name:jt.nome,status:"available",order:[],customer:null,comandaId:null,totalHint:0};i(Qe=>(Qe.some(Nt=>Nt.id===Kt.id)?Qe.map(Nt=>Nt.id===Kt.id?Kt:Nt):[...Qe,Kt]).slice().sort((Nt,zt)=>Number(Nt.number)-Number(zt.number))),l(Kt),e({title:"Mesa criada",description:`Mesa ${jt.numero} adicionada`,variant:"success"}),me(!1),U(""),we("")}catch($e){e({title:"Falha ao criar mesa",description:$e?.message||"Tente novamente",variant:"destructive"})}finally{V(!1)}};return s.jsx(rn,{open:G,onOpenChange:$e=>{me($e),$e||(U(""),we(""))},children:s.jsxs(Yr,{className:"sm:max-w-md w-[92vw] sm:w-[400px]",onOpenAutoFocus:$e=>$e.preventDefault(),onKeyDown:$e=>$e.stopPropagation(),onKeyDownCapture:$e=>$e.stopPropagation(),onPointerDownOutside:$e=>$e.stopPropagation(),onInteractOutside:$e=>$e.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Nova Mesa"}),s.jsx(cn,{children:"Informe o nome da mesa. Se deixar em branco, ser criada com numerao automtica."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ct,{htmlFor:"nova-mesa-nome",children:"Nome da mesa"}),s.jsx(Mt,{id:"nova-mesa-nome",type:"text",placeholder:"Ex.: Mesa 1, Ptio 1, VIP...",value:le,onChange:$e=>{we($e.target.value)},onKeyDown:$e=>{$e.stopPropagation(),$e.key==="Enter"&&$e.preventDefault()},onKeyUp:$e=>$e.stopPropagation(),onKeyPress:$e=>$e.stopPropagation()})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{type:"button",variant:"outline",onClick:()=>me(!1),disabled:z,children:"Cancelar"}),s.jsx(Ae,{type:"button",onClick:Oe,disabled:z,children:z?"Criando...":"Criar Mesa"})]})]})})},at=async H=>{try{if(!o?.comandaId){e({title:"Selecione uma mesa",description:"Abra a comanda clicando na mesa primeiro.",variant:"destructive"});return}const U=Number(H.salePrice??H.price??0);let le=await Ai({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa});const we=(le||[]).find(He=>He.produto_id===H.id);we?await od({itemId:we.id,quantidade:Number(we.quantidade||0)+1,codigoEmpresa:t?.codigo_empresa}):await kO({comandaId:o.comandaId,produtoId:H.id,descricao:H.name,quantidade:1,precoUnitario:U,codigoEmpresa:t?.codigo_empresa}),le=await Ai({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa});const Oe=(le||[]).map(He=>({id:He.id,productId:He.produto_id,name:He.descricao||"Item",price:Number(He.preco_unitario||0),quantity:Number(He.quantidade||1)})),$e={...o,order:Oe};l($e),i(He=>He.map(jt=>jt.id===$e.id?$e:jt)),e({title:"Produto adicionado",description:H.name,variant:"success"})}catch(U){e({title:"Falha ao adicionar produto",description:U?.message||"Tente novamente",variant:"destructive"})}},$t=()=>{const[H,U]=y.useState(""),we=(T||[]).slice().sort((Oe,$e)=>{const He=Oe.code||"",jt=$e.code||"";return/^\d+$/.test(He)&&/^\d+$/.test(jt)?parseInt(He,10)-parseInt(jt,10):He.localeCompare(jt)}).filter(Oe=>{const $e=H.trim().toLowerCase();return $e?(Oe.name||"").toLowerCase().includes($e)||String(Oe.code||"").toLowerCase().includes($e):!0});return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar produto...",className:"pl-9",value:H,onChange:Oe=>U(Oe.target.value),onKeyDown:Oe=>Oe.stopPropagation()})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:s.jsx("ul",{className:"space-y-2",children:we.length===0?s.jsxs("li",{className:"text-center text-text-muted py-8",children:[s.jsx("div",{className:"mb-3",children:"Nenhum produto encontrado."}),s.jsx(Ae,{size:"sm",onClick:()=>n("/produtos"),children:"Cadastrar Produtos"})]}):we.map(Oe=>{const $e=or.get(Oe.id)||0,He=Number(Oe.stock??Oe.currentStock??0),jt=Math.max(0,He-$e),Kt=()=>{A(Oe),C(!0),rt("products")};return s.jsxs("li",{className:"flex items-center gap-3 p-3 rounded-md border border-border bg-surface hover:bg-surface-2 transition-colors",onClick:Kt,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate",title:`${Oe.code?`[${Oe.code}] `:""}${Oe.name}`,children:[Oe.code&&s.jsxs("span",{className:"text-text-muted",children:["[",Oe.code,"]"]})," ",Oe.name]}),$e>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",$e]})]}),s.jsxs("div",{className:"mt-0.5 flex items-center gap-2",children:[s.jsxs("p",{className:"text-xs sm:text-sm text-text-muted",children:["R$ ",Number(Oe.salePrice??Oe.price??0).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[10px] sm:text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",jt]})]})]}),s.jsx(Ae,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:Qe=>{Qe.preventDefault(),Qe.stopPropagation(),at(Oe)},"aria-label":`Adicionar ${Oe.name}`,children:s.jsx(ri,{size:16})})]},Oe.id)})})})]})},[ut,Wt]=y.useState(null),[Yt,nr]=y.useState([]),[Vr,Cn]=y.useState(!1),[Sn,Fi]=y.useState(""),[ja,da]=y.useState(!1),[oi,Tn]=y.useState([]),[Cs,so]=y.useState(!1),[hn,Io]=y.useState(null),[Bi,Ii]=y.useState(!1),[mi,ee]=y.useState(null),Ie=y.useMemo(()=>{const H=new Map;for(const U of Yt||[]){const le=U.productId,we=Number(U.quantity||0);H.set(le,(H.get(le)||0)+we)}return H},[Yt]),tt=async H=>{if(!H)return;const le=(await Ai({comandaId:H,codigoEmpresa:t?.codigo_empresa})||[]).map(we=>({id:we.id,productId:we.produto_id,name:we.descricao||"Item",price:Number(we.preco_unitario||0),quantity:Number(we.quantidade||1)}));nr(le)},Qt=async H=>{if(!ut)return;const U=Number(H.salePrice??H.price??0);await kO({comandaId:ut,produtoId:H.id,descricao:H.name,quantidade:1,precoUnitario:U,codigoEmpresa:t?.codigo_empresa}),await tt(ut),e({title:"Produto adicionado",description:H.name,variant:"success"})},it=async H=>{if(!(!ut||!H)){da(!1);try{await Ox({comandaId:ut,clienteIds:[H],nomesLivres:[],codigoEmpresa:t?.codigo_empresa}),Io(H),Fi(""),Tn([]),e({title:"Cliente associado",variant:"success"})}catch(U){e({title:"Falha ao associar cliente",description:U?.message||"Tente novamente",variant:"destructive"}),da(!0)}}},lt=async()=>{if(ut)try{const H=Er(Yt);if(H<=0){e({title:"Sem itens",description:"Adicione itens antes de pagar.",variant:"warning"});return}Cn(!0),await nd({codigoEmpresa:t?.codigo_empresa});let U=te;if(!Array.isArray(U)||U.length===0)try{U=await kg({somenteAtivas:!0,codigoEmpresa:t?.codigo_empresa}),ve(U)}catch{}const le=U?.[0],we=le?.tipo||le?.nome||"outros";await OO({comandaId:ut,finalizadoraId:le?.id,metodo:we,valor:H,codigoEmpresa:t?.codigo_empresa}),await w_({comandaId:ut,codigoEmpresa:t?.codigo_empresa}),e({title:"Pagamento registrado (balco)",description:`R$ ${H.toFixed(2)}`,variant:"success"}),nr([]),Wt(null),g(!1)}catch(H){e({title:"Falha no pagamento (balco)",description:H?.message||"Tente novamente",variant:"destructive"})}finally{Cn(!1)}},tr=()=>{y.useEffect(()=>{let U=!0;return(async()=>{if(m)try{Cn(!0);const we=await getOrCreateComandaBalcao({codigoEmpresa:t?.codigo_empresa});if(!U)return;Wt(we.id),await tt(we.id)}catch(we){U&&e({title:"Falha ao abrir comanda de balco",description:we?.message||"Tente novamente",variant:"destructive"})}finally{U&&Cn(!1)}})(),()=>{U=!1}},[m]),y.useEffect(()=>{if(!ja)return;let U=!0;const we=setTimeout(async()=>{try{so(!0);const Oe=await u2({searchTerm:Sn,limit:20,codigoEmpresa:t?.codigo_empresa});U&&Tn(Oe||[])}catch{U&&Tn([])}finally{U&&so(!1)}},250);return()=>{U=!1,clearTimeout(we)}},[ja,Sn]);const H=Er(Yt);return s.jsx(rn,{open:m,onOpenChange:g,children:s.jsxs(Yr,{className:"max-w-4xl h-[90vh]",onKeyDown:U=>U.stopPropagation(),onKeyDownCapture:U=>U.stopPropagation(),onPointerDownOutside:U=>U.stopPropagation(),onInteractOutside:U=>U.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Modo Balco"}),s.jsx(cn,{children:"Venda rpida para clientes sem mesa."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full overflow-hidden pt-4",children:[s.jsxs("div",{className:"col-span-1 flex flex-col border-r border-border pr-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Catlogo de Produtos"}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>da(!0),children:hn?s.jsxs(s.Fragment,{children:[s.jsx(Bs,{className:"mr-1 h-4 w-4 text-success"})," Cliente"]}):"Cliente"})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar produto...",className:"pl-9",value:Sn,onChange:U=>Fi(U.target.value)})]}),s.jsx("div",{className:"flex-1 overflow-y-auto -mr-4 pr-4 thin-scroll",children:s.jsxs("ul",{className:"space-y-2",children:[(T||[]).filter(U=>{const le=Sn.trim().toLowerCase();return le?(U.name||"").toLowerCase().includes(le)||(U.code||"").toLowerCase().includes(le):!0}).sort((U,le)=>{const we=U.code||"",Oe=le.code||"";return/^\d+$/.test(we)&&/^\d+$/.test(Oe)?parseInt(we,10)-parseInt(Oe,10):we.localeCompare(Oe)}).map(U=>{const le=(Yt||[]).reduce(($e,He)=>$e+(He.productId===U.id?Number(He.quantity||0):0),0),we=Number(U.stock??U.currentStock??0),Oe=Math.max(0,we-le);return s.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors",onClick:()=>{ee(U),Ii(!0)},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate",title:`${U.code?`[${U.code}] `:""}${U.name}`,children:[U.code&&s.jsxs("span",{className:"text-text-muted",children:["[",U.code,"]"]})," ",U.name]}),le>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",le]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",Number(U.salePrice??U.price??0).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",Oe]})]})]}),s.jsx(Ae,{size:"icon",className:"flex-shrink-0 bg-amber-500 hover:bg-amber-400 text-black border border-amber-500/60",onClick:$e=>{$e.stopPropagation(),Qt(U)},"aria-label":`Adicionar ${U.name}`,children:s.jsx(ri,{size:16})})]},U.id)}),(!T||T.length===0)&&s.jsxs("li",{className:"text-center text-text-muted py-8",children:[s.jsx("div",{className:"mb-3",children:"Nenhum produto cadastrado. Cadastre produtos para vender no balco."}),s.jsx(Ae,{size:"sm",onClick:()=>n("/produtos"),children:"Cadastrar Produtos"})]})]})})]}),s.jsxs("div",{className:"col-span-1 flex flex-col",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Comanda do Balco"}),s.jsx("div",{className:"flex-1 overflow-y-auto bg-surface-2 rounded-lg p-4 thin-scroll",children:Yt.length===0?s.jsx("p",{className:"text-center text-text-muted pt-16",children:"Adicione produtos  comanda."}):s.jsx("ul",{className:"divide-y divide-border",children:Yt.map(U=>s.jsxs("li",{className:"py-2 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:U.name}),s.jsxs("div",{className:"text-xs text-text-muted",children:["Qtd: ",U.quantity,"  Unit: R$ ",Number(U.price||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"font-semibold mr-2",children:["R$ ",(Number(U.price||0)*Number(U.quantity||0)).toFixed(2)]}),s.jsx(Ae,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{const le=Number(U.quantity||1)-1;try{le<=0?await Og({itemId:U.id,codigoEmpresa:t?.codigo_empresa}):await od({itemId:U.id,quantidade:le,codigoEmpresa:t?.codigo_empresa}),await tt(ut)}catch(we){e({title:"Falha ao atualizar",description:we?.message||"Tente novamente",variant:"destructive"})}},children:s.jsx(WR,{size:14})}),s.jsx("span",{className:"w-8 text-center font-semibold",children:U.quantity}),s.jsx(Ae,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{try{await od({itemId:U.id,quantidade:Number(U.quantity||1)+1,codigoEmpresa:t?.codigo_empresa}),await tt(ut)}catch(le){e({title:"Falha ao atualizar",description:le?.message||"Tente novamente",variant:"destructive"})}},children:s.jsx(ri,{size:14})})]})]},U.id))})}),s.jsxs("div",{className:"p-4 border-t border-border mt-auto",children:[s.jsxs("div",{className:"flex justify-between items-center text-xl font-bold mb-4",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",H.toFixed(2)]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(Tf,{children:[s.jsx(pm,{asChild:!0,children:s.jsx(Ae,{size:"lg",className:"flex-1 bg-red-600 hover:bg-red-500 text-white border border-red-600/70",children:"Cancelar"})}),s.jsxs(md,{className:"sm:max-w-[420px] animate-none",onKeyDown:U=>U.stopPropagation(),children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Cancelar comanda do balco?"}),s.jsx(yd,{children:"Os itens sero descartados e o balco ser limpo. Esta ao no pode ser desfeita."})]}),s.jsxs(gd,{children:[s.jsx(bd,{children:"Voltar"}),s.jsx(xd,{onClick:async()=>{try{if(!ut){g(!1);return}await S7({comandaId:ut,codigoEmpresa:t?.codigo_empresa}),nr([]),Wt(null),g(!1),e({title:"Comanda cancelada (balco)",variant:"success"})}catch(U){e({title:"Falha ao cancelar",description:U?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Cancelamento"})]})]})]}),s.jsxs(Ae,{size:"lg",className:"flex-1",onClick:lt,disabled:Vr||H<=0,children:[s.jsx(Ls,{className:"mr-2"})," Finalizar Pagamento"]})]})]})]})]}),ja&&s.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center",onClick:U=>{U.target===U.currentTarget&&da(!1)},onKeyDown:U=>{U.key==="Escape"&&da(!1)},children:s.jsxs("div",{className:"bg-surface rounded-lg border border-border shadow-lg w-full max-w-md p-4",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-lg font-semibold",children:"Selecionar Cliente"}),s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>da(!1),children:"Fechar"})]}),s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Nome, e-mail, telefone ou cdigo",className:"pl-9",value:Sn,onChange:U=>Fi(U.target.value)})]}),s.jsx("div",{className:"max-h-64 overflow-auto thin-scroll border rounded-md",children:Cs?s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Carregando clientes..."}):oi.length>0?s.jsx("ul",{children:oi.map(U=>s.jsxs("li",{className:Et("p-2 flex items-center justify-between cursor-pointer hover:bg-surface-2",hn===U.id&&"bg-surface-2"),onClick:()=>it(U.id),children:[s.jsx("div",{children:s.jsxs("div",{className:"font-medium",children:[U.codigo!=null?String(U.codigo)+" - ":"",U.nome]})}),hn===U.id&&s.jsx(Bs,{size:16,className:"text-success"})]},U.id))}):s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum cliente encontrado."})})]})})]})})},mr=()=>{const H=mi,U=H&&Ie.get(H.id)||0,le=H?Number(H.salePrice??H.price??0):0,we=Oe=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(Oe||0));return s.jsx(rn,{open:Bi,onOpenChange:Oe=>{Ii(Oe),Oe||ee(null)},children:s.jsxs(Yr,{overlayClassName:"z-[60]",className:"sm:max-w-[420px] w-[92vw] max-h-[85vh] flex flex-col animate-none z-[61]",onKeyDown:Oe=>Oe.stopPropagation(),onPointerDownOutside:Oe=>Oe.stopPropagation(),onInteractOutside:Oe=>Oe.stopPropagation(),onEscapeKeyDown:Oe=>{Oe.preventDefault(),Oe.stopPropagation()},children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold break-words",title:H?.name||"",children:H?.name||"Produto"}),s.jsx(cn,{children:"Detalhes do produto (Balco)."})]}),H?s.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),s.jsx("span",{className:"text-sm font-semibold",children:we(le)})]}),H.category?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),s.jsx("span",{className:"text-sm font-medium",children:H.category})]}):null,s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof H.stock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),s.jsx("div",{className:"text-base font-semibold",children:H.stock})]}),typeof H.minStock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),s.jsx("div",{className:"text-base font-semibold",children:H.minStock})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),s.jsxs("div",{className:"text-base font-semibold",children:["x",U]})]})]})]}):null,s.jsxs(Dn,{className:"flex items-center justify-between gap-2",children:[s.jsxs(Ae,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{H&&n("/produtos",{state:{productId:H.id,productName:H.name}})},children:[s.jsx(Gl,{className:"w-4 h-4"}),s.jsx("span",{children:"Info"})]}),s.jsx(Ae,{variant:"outline",onClick:()=>{Ii(!1),ee(null)},children:"Fechar"}),s.jsx(Ae,{onClick:async()=>{H&&(await Qt(H),Ii(!1),ee(null))},children:"Adicionar"})]})]})})},er=()=>{const[H,U]=y.useState(""),[le,we]=y.useState(!1),[Oe,$e]=y.useState([]),[He,jt]=y.useState([]);y.useEffect(()=>{let Qe=!0;const pr=setTimeout(async()=>{try{we(!0);const Nt=await u2({searchTerm:H,limit:20});if(!Qe)return;const zt=(Nt||[]).slice().sort((Ue,Dt)=>Number(Ue?.codigo||0)-Number(Dt?.codigo||0));$e(zt)}catch{if(!Qe)return;$e([])}finally{Qe&&we(!1)}},200);return()=>{Qe=!1,clearTimeout(pr)}},[H]);const Kt=async()=>{try{if(!de)return;const Qe=await GWe({mesaId:de.id,codigoEmpresa:t?.codigo_empresa}),gt=Array.from(new Set(He||[])),pr=[];await Ox({comandaId:Qe.id,clienteIds:gt,nomesLivres:pr,codigoEmpresa:t?.codigo_empresa});let Nt=null;try{const Dt=(await Vo({comandaId:Qe.id,codigoEmpresa:t?.codigo_empresa})||[]).map(Vt=>Vt?.nome).filter(Boolean);Nt=Dt.length?Dt.join(", "):null}catch{}Nt||(Nt=gt.length?gt.map(Ue=>Oe.find(Dt=>Dt.id===Ue)?.nome).filter(Boolean).join(", "):pr[0]||"");const zt={...de,comandaId:Qe.id,status:"in-use",customer:Nt||null,order:[]};l(zt),i(Ue=>Ue.map(Dt=>Dt.id===zt.id?zt:Dt)),await new Promise(Ue=>setTimeout(Ue,500));try{const Ue=await pg(t?.codigo_empresa),Dt=await au({codigoEmpresa:t?.codigo_empresa});console.log(`[confirmOpen] Aps aguardar: ${Dt.length} comandas abertas encontradas`);const Vt={},gr={};await Promise.all((Dt||[]).map(async Nr=>{try{const hr=(await Vo({comandaId:Nr.id,codigoEmpresa:t?.codigo_empresa})||[]).map(pn=>pn?.nome).filter(Boolean);Vt[Nr.id]=hr.length?hr.join(", "):null;const Fr=(await Ai({comandaId:Nr.id,codigoEmpresa:t?.codigo_empresa})||[]).reduce((pn,wr)=>{const ln=(wr.quantidade||0)*(wr.preco_unitario||0)-(wr.desconto||0);return pn+ln},0);gr[Nr.id]=Fr}catch{Vt[Nr.id]=null,gr[Nr.id]=0}}));const Zr=(Ue||[]).map(Nr=>{const Te=(Dt||[]).find(hr=>hr.mesa_id===Nr.id);return{id:Nr.id,name:Nr.nome||`Mesa ${Nr.numero}`,status:Te?"in-use":"available",comandaId:Te?.id||null,customer:Te?Vt[Te.id]:null,order:[],totalHint:Te&&gr[Te.id]||0}});i(Zr),console.log("[confirmOpen] Estado das mesas atualizado aps abertura")}catch(Ue){console.error("[confirmOpen] Erro ao atualizar mesas:",Ue)}$(!1),L(null),J(""),jt([]),e({title:"Mesa aberta",description:Nt?`Comanda criada para: ${Nt}`:"Comanda criada.",variant:"success"})}catch(Qe){e({title:"Falha ao abrir mesa",description:Qe?.message||"Tente novamente",variant:"destructive"})}};return s.jsx(rn,{open:W,onOpenChange:Qe=>{$(Qe),Qe||(L(null),J(""),jt([]))},children:s.jsxs(Yr,{className:"w-[95vw] max-w-md max-h-[75vh] flex flex-col animate-none",onOpenAutoFocus:Qe=>Qe.preventDefault(),onKeyDown:Qe=>Qe.stopPropagation(),onKeyDownCapture:Qe=>Qe.stopPropagation(),onPointerDownOutside:Qe=>{Qe.preventDefault(),Qe.stopPropagation()},onInteractOutside:Qe=>{Qe.preventDefault(),Qe.stopPropagation()},onEscapeKeyDown:Qe=>Qe.preventDefault(),children:[s.jsxs(nn,{className:"flex-shrink-0",children:[s.jsxs(Xr,{className:"text-xl font-bold",children:["Abrir Mesa ",de?`#${de.number}`:""]}),s.jsx(cn,{className:"text-sm",children:"Selecione um ou mais clientes para a mesa."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 space-y-3 py-2",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"text-sm font-medium mb-1.5 block",children:"Buscar cliente"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Po,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Nome, telefone ou cdigo",className:"pl-8 h-9 text-sm",value:H,onChange:Qe=>U(Qe.target.value)})]}),s.jsx(Ae,{type:"button",size:"icon",title:"Cadastrar cliente",className:"h-9 w-9 flex-shrink-0 bg-brand text-black hover:bg-brand/90",onClick:()=>{window.location.href="/clientes"},children:s.jsx(ri,{className:"h-4 w-4"})})]})]}),He.length>0&&s.jsxs("div",{className:"bg-success/10 border border-success/30 rounded-md p-2.5",children:[s.jsxs("div",{className:"text-xs font-medium text-success mb-1",children:[He.length," cliente",He.length>1?"s":""," selecionado",He.length>1?"s":""]}),s.jsx("div",{className:"text-sm text-text-primary",children:Oe.filter(Qe=>He.includes(Qe.id)).map(Qe=>Qe.nome).join(", ")})]}),s.jsx("div",{className:"border rounded-md max-h-56 overflow-auto thin-scroll",children:le?s.jsx("div",{className:"p-3 text-center text-sm text-text-muted",children:"Carregando..."}):Oe.length>0?s.jsx("ul",{className:"divide-y divide-border",children:Oe.map(Qe=>{const gt=He.includes(Qe.id);return s.jsxs("li",{className:Et("p-2.5 flex items-center justify-between cursor-pointer transition-colors",gt?"bg-success/5 hover:bg-success/10":"hover:bg-surface-2"),onClick:()=>{J(""),jt(pr=>pr.includes(Qe.id)?pr.filter(Nt=>Nt!==Qe.id):[...pr,Qe.id])},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-medium text-sm truncate",children:[Qe.codigo!=null?`${Qe.codigo} - `:"",Qe.nome]}),Qe.telefone&&s.jsx("div",{className:"text-xs text-text-muted mt-0.5",children:Qe.telefone})]}),s.jsx("div",{className:"ml-2 flex-shrink-0",children:gt?s.jsx(Bs,{size:18,className:"text-success"}):s.jsx("div",{className:"w-[18px] h-[18px] rounded-full border-2 border-border"})})]},Qe.id)})}):s.jsx("div",{className:"p-4 text-center text-sm text-text-muted",children:"Nenhum cliente encontrado"})})]}),s.jsxs(Dn,{className:"flex-shrink-0 pt-3",children:[s.jsx(Ae,{type:"button",variant:"outline",onClick:()=>{$(!1),L(null),J(""),jt([])},children:"Cancelar"}),s.jsx(Ae,{onClick:Kt,disabled:!de,children:"Confirmar Abertura"})]})]})})},Zt=()=>{const[H,U]=y.useState("");return y.useEffect(()=>{qt.current&&U(qt.current)},[]),s.jsxs(s.Fragment,{children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Abrir Caixa"}),s.jsx(yd,{children:"Insira o valor inicial (suprimento) para abrir o caixa."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(ct,{htmlFor:"initial-value",children:"Valor Inicial"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-muted",children:"R$"}),s.jsx(Mt,{id:"initial-value",type:"text",inputMode:"numeric",pattern:"[0-9.,]*",autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,name:"cash-open-initial",placeholder:"0,00",className:"pl-9 font-semibold",value:H,onChange:le=>{const we=(le.target.value||"").replace(/\D/g,""),Oe=we?Number(we)/100:0,$e=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Oe);U($e),qt.current=$e},onKeyDown:le=>{le.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(le.key)&&(/^[0-9]$/.test(le.key)||le.preventDefault())},onBeforeInput:le=>{const we=le.data??"";we&&/\D/.test(we)&&le.preventDefault()},onMouseDown:le=>le.stopPropagation()})]})]}),s.jsxs(gd,{children:[s.jsx(bd,{onClick:()=>Ft(!1),children:"Cancelar"}),s.jsx(xd,{onClick:async()=>{if(!It){et(!0);try{const le=String(H).replace(/\./g,"").replace(",","."),we=Number(le)||0;try{localStorage.setItem("cash:opening",String(Date.now()))}catch{}await nd({saldoInicial:we,codigoEmpresa:t?.codigo_empresa}),await Rt(),await Vn({showToast:!1}),Ft(!1),e({title:"Caixa aberto com sucesso!",variant:"success"}),qt.current="",U("")}catch(le){e({title:"Falha ao abrir caixa",description:le?.message||"Tente novamente",variant:"destructive"})}finally{try{localStorage.removeItem("cash:opening")}catch{}et(!1)}}},children:"Confirmar Abertura"})]})]})},kr=()=>s.jsxs(Tf,{open:ce,onOpenChange:Ft,children:[s.jsx(pm,{asChild:!0,children:s.jsxs(Ae,{variant:"success",size:"sm",disabled:c||It,onClick:()=>Ft(!0),className:"px-3",children:[s.jsx(LW,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Abrir"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Abrir Caixa"})]})}),s.jsx(md,{className:"sm:max-w-[425px] animate-none",onKeyDown:H=>H.stopPropagation(),onKeyDownCapture:H=>H.stopPropagation(),onEscapeKeyDown:H=>H.preventDefault(),onPointerDownOutside:H=>{H.preventDefault(),H.stopPropagation()},onInteractOutside:H=>{H.preventDefault(),H.stopPropagation()},children:s.jsx(Zt,{})})]}),ie=()=>{const[H,U]=y.useState({loading:!1,saldoInicial:0,resumo:null}),[le,we]=y.useState(!1),[Oe,$e]=y.useState(!1),[He,jt]=y.useState(!1),Kt=async()=>{try{U({loading:!0,saldoInicial:0,resumo:null});const Nt=await If({codigoEmpresa:t?.codigo_empresa}),zt=await tb({codigoEmpresa:t?.codigo_empresa});U({loading:!1,saldoInicial:Number(Nt?.saldo_inicial||0),resumo:zt||{totalPorFinalizadora:{}}})}catch{U({loading:!1,saldoInicial:0,resumo:{totalPorFinalizadora:{}}})}},Qe=H?.resumo?.totalPorFinalizadora||{},gt=Object.values(Qe).reduce((Nt,zt)=>Nt+Number(zt||0),0),pr=Number(H.saldoInicial||0)+gt;return s.jsxs(Tf,{open:le,onOpenChange:Nt=>{we(Nt),Nt&&Kt()},children:[s.jsx(pm,{asChild:!0,children:s.jsxs(Ae,{variant:"destructive",size:"sm",disabled:!c,onClick:()=>we(!0),className:"px-3",children:[s.jsx(Vg,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Fechar"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Fechar Caixa"})]})}),s.jsxs(md,{className:"sm:max-w-[425px] w-[92vw] max-h-[85vh] animate-none",onOpenAutoFocus:Nt=>Nt.preventDefault(),onKeyDown:Nt=>Nt.stopPropagation(),onKeyDownCapture:Nt=>Nt.stopPropagation(),onPointerDownOutside:Nt=>{Nt.preventDefault(),Nt.stopPropagation()},onInteractOutside:Nt=>{Nt.preventDefault(),Nt.stopPropagation()},children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Fechar Caixa"}),s.jsx(yd,{children:"Confira os valores e confirme o fechamento do caixa. Esta ao  irreversvel."})]}),Oe&&s.jsxs("div",{className:"md:hidden mb-2 text-[12px] text-warning bg-warning/10 border border-warning/30 rounded px-2 py-1 flex items-center gap-1",children:[s.jsx(Dc,{className:"h-3.5 w-3.5"}),"Existem comandas abertas. Finalize-as antes de fechar o caixa."]}),H.loading?s.jsx("div",{className:"py-4 text-text-muted",children:"Carregando resumo"}):s.jsxs("div",{className:"py-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor Inicial:"})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(H.saldoInicial||0).toFixed(2)]})]}),Object.keys(Qe).length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos nesta sesso."}):Object.entries(Qe).map(([Nt,zt])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-text-secondary",children:[String(Nt),":"]})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(zt||0).toFixed(2)]})]},Nt)),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{className:"text-text-primary",children:"Total em Caixa:"})," ",s.jsxs("span",{className:"font-mono text-success",children:["R$ ",Number(pr||0).toFixed(2)]})]})]}),s.jsxs(gd,{children:[s.jsx(bd,{onClick:()=>we(!1),disabled:He,children:"Cancelar"}),s.jsx(xd,{onClick:async()=>{try{if(He)return;jt(!0);try{const Nt=await au({codigoEmpresa:t?.codigo_empresa});if(Array.isArray(Nt)&&Nt.length>0){if(ot){bt(`Existem ${Nt.length} comandas abertas. Feche todas antes de encerrar o caixa.`);try{we(!1)}catch{}typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{Ke(!0)}):Ke(!0),setTimeout(()=>Ke(!1),2600)}else e({title:"Fechamento bloqueado",description:`Existem ${Nt.length} comandas abertas. Feche todas antes de encerrar o caixa.`,variant:"warning",duration:2500});return}}catch{}await xee({codigoEmpresa:t?.codigo_empresa}),u(!1),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{we(!1),e({title:"Caixa fechado!",description:"O relatrio de fechamento foi gerado."})}):(we(!1),e({title:"Caixa fechado!",description:"O relatrio de fechamento foi gerado."})),setTimeout(async()=>{try{await If({codigoEmpresa:t?.codigo_empresa})}catch{}},0)}catch(Nt){console.error(Nt);const zt=Nt?.message||"Tente novamente";if(ot){bt(zt.includes("Existem")?zt:`Falha ao fechar caixa: ${zt}`);try{we(!1)}catch{}typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{Ke(!0)}):Ke(!0),setTimeout(()=>Ke(!1),2600)}else e({title:"Falha ao fechar caixa",description:zt,variant:"destructive"})}finally{jt(!1)}},children:"Confirmar Fechamento"})]})]})]})},ae=()=>{const[H,U]=y.useState(""),[le,we]=y.useState([]),[Oe,$e]=y.useState([]),[He,jt]=y.useState(!1),[Kt,Qe]=y.useState(new Set),gt=y.useRef([]),pr=y.useRef(!1);y.useEffect(()=>{let Ue=!0;const Dt=async()=>{if(!(!E||!o?.comandaId))try{jt(!0);const gr=(await Vo({comandaId:o.comandaId,codigoEmpresa:t?.codigo_empresa})||[]).map(Te=>Te?.cliente_id??Te?.clientes?.id).filter(Boolean);if(!Ue)return;$e(gr),gt.current=gr,Qe(new Set);const Zr=await u2({searchTerm:H,limit:50});if(!Ue)return;const Nr=(Zr||[]).slice().sort((Te,hr)=>Number(Te?.codigo||0)-Number(hr?.codigo||0));we(Nr),pr.current=!0}catch(Vt){console.error("Erro ao carregar clientes:",Vt)}finally{Ue&&jt(!1)}};if(!E)return pr.current=!1,()=>{Ue=!1};if(H){const Vt=setTimeout(()=>{Dt()},300);return()=>{Ue=!1,clearTimeout(Vt)}}else pr.current||Dt();return()=>{Ue=!1}},[E,H]);const Nt=Ue=>{if(!o?.comandaId)return;const Dt=Oe.includes(Ue);$e(Vt=>Dt?Vt.filter(gr=>gr!==Ue):[...Vt,Ue]),Qe(Vt=>{const gr=new Set(Vt);return gr.add(Ue),gr})},zt=async()=>{if(!o?.comandaId){I(!1);return}if(Kt.size===0){I(!1);return}try{jt(!0);const Ue=Oe.filter(Vt=>!gt.current.includes(Vt)),Dt=gt.current.filter(Vt=>!Oe.includes(Vt));console.log("[confirmChanges] toAdd:",Ue,"toRemove:",Dt);for(const Vt of Dt){console.log("[confirmChanges] Removendo cliente:",Vt);const{error:gr}=await Pe.from("comanda_clientes").delete().eq("comanda_id",o.comandaId).eq("cliente_id",Vt).eq("codigo_empresa",t?.codigo_empresa);if(gr)throw console.error("[confirmChanges] Erro ao remover:",gr),gr}Ue.length>0&&(console.log("[confirmChanges] Adicionando clientes:",Ue),await Ox({comandaId:o.comandaId,clienteIds:Ue,nomesLivres:[],codigoEmpresa:t?.codigo_empresa})),console.log("[confirmChanges] Operaes concludas, atualizando mesa"),await dr(o),await Vn({showToast:!1}),e({title:"Clientes atualizados",variant:"success"}),I(!1)}catch(Ue){console.error("[confirmChanges] Erro:",Ue),e({title:"Falha ao atualizar clientes",description:Ue?.message||"Tente novamente",variant:"destructive"})}finally{jt(!1)}};return s.jsx(rn,{open:E,onOpenChange:I,children:s.jsxs(Yr,{className:"sm:max-w-[480px] w-[92vw] animate-none",onOpenAutoFocus:Ue=>Ue.preventDefault(),onKeyDown:Ue=>Ue.stopPropagation(),onKeyDownCapture:Ue=>Ue.stopPropagation(),onPointerDownOutside:Ue=>{Ue.preventDefault(),Ue.stopPropagation()},onInteractOutside:Ue=>{Ue.preventDefault(),Ue.stopPropagation()},onEscapeKeyDown:Ue=>Ue.preventDefault(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Gerenciar Clientes da Mesa"}),s.jsx(cn,{children:"Clique nos clientes para adicionar ou remover. Pode ter mltiplos clientes."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar cliente...",className:"pl-9",value:H,onChange:Ue=>U(Ue.target.value),onKeyDown:Ue=>Ue.stopPropagation(),onKeyUp:Ue=>Ue.stopPropagation()})]}),Oe.length>0&&s.jsxs("div",{className:"bg-success/10 border border-success/30 rounded-md p-3",children:[s.jsxs("div",{className:"text-xs font-medium text-success mb-1",children:["Clientes vinculados (",Oe.length,"):"]}),s.jsx("div",{className:"text-sm text-text-primary",children:le.filter(Ue=>Oe.includes(Ue.id)).map(Ue=>Ue?.codigo?`${Ue.codigo} - ${Ue?.nome||""}`:Ue?.nome||"").join(", ")||"Carregando..."})]}),s.jsx("div",{className:"border rounded-md max-h-[400px] overflow-y-auto thin-scroll",children:He?s.jsx("div",{className:"p-4 text-center text-text-muted",children:"Carregando..."}):le.length===0?s.jsx("div",{className:"p-4 text-center text-text-muted",children:"Nenhum cliente encontrado"}):s.jsx("ul",{className:"divide-y divide-border",children:le.map(Ue=>{const Dt=Oe.includes(Ue.id);return s.jsxs("li",{className:Et("p-3 cursor-pointer transition-colors flex items-center justify-between",Dt?"bg-success/5 hover:bg-success/10":"hover:bg-surface-2"),onClick:Vt=>{Vt.preventDefault(),Vt.stopPropagation(),Nt(Ue.id)},style:{userSelect:"none",WebkitUserSelect:"none"},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:`${Ue?.codigo?`${Ue.codigo} - `:""}${Ue?.nome||""}`}),Ue.telefone&&s.jsx("div",{className:"text-xs text-text-muted",children:Ue.telefone})]}),s.jsx("div",{className:"ml-3 flex-shrink-0",children:Dt?s.jsx(Bs,{className:"h-5 w-5 text-success"}):s.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-border"})})]},Ue.id)})})})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>I(!1),disabled:He,children:"Cancelar"}),s.jsx(Ae,{onClick:zt,disabled:He,children:He?"Salvando...":`Confirmar ${Kt.size>0?`(${Kt.size} alteraes)`:""}`})]})]})})},Re=()=>{const H=le=>le==="available"?"bg-success/10 border-success/30 text-success":le==="in-use"?"bg-warning/10 border-warning/30 text-warning":le==="awaiting-payment"?"bg-info/10 border-info/30 text-info":"bg-surface-2 border-border text-text-secondary",U=le=>le==="available"?"Livre":le==="in-use"?"Ocupada":le==="awaiting-payment"?"Aguardando":"Desconhecido";return s.jsx("div",{className:"md:hidden space-y-2",children:a.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:"text-text-muted mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),s.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhuma mesa encontrada"}),s.jsx("p",{className:"text-text-muted mb-4",children:"Crie sua primeira mesa para comear"})]}):a.map(le=>{const we=Er(le.order||[]),Oe=le.totalHint>0?le.totalHint:we;return s.jsx("div",{onClick:async()=>{if(!c){e({title:"Caixa Fechado",description:"Abra o caixa antes de gerenciar as mesas.",variant:"warning"});return}await qa(le),le.status!=="available"&&Pt(!0)},className:Et("p-3 rounded-lg border-2 bg-surface transition-all active:scale-[0.98]",H(le.status),o?.id===le.id&&"ring-2 ring-brand/60",c?"cursor-pointer":"cursor-not-allowed opacity-60"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-bold text-base truncate",children:le.name||`Mesa ${le.number}`}),s.jsx("span",{className:Et("text-xs px-2 py-0.5 rounded-full border font-medium",H(le.status)),children:U(le.status)})]}),le.status==="in-use"||le.status==="awaiting-payment"?s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-text-secondary",children:[s.jsx(ps,{className:"w-3.5 h-3.5 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:wa(le.customer)||"Sem cliente"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-text-primary",children:[s.jsx(Ls,{className:"w-3.5 h-3.5 flex-shrink-0"}),s.jsxs("span",{children:["R$ ",Oe.toFixed(2)]})]})]}):s.jsx("div",{className:"text-xs text-text-muted",children:"Mesa disponvel"})]}),s.jsx(aj,{className:"w-5 h-5 text-text-muted flex-shrink-0 ml-2"})]})},le.id)})})},Le=()=>o?s.jsx(rn,{open:Ze,modal:!P,onOpenChange:H=>{!H&&P||Pt(H)},children:s.jsxs(Yr,{className:"sm:max-w-2xl w-[90vw] max-h-[85vh] flex flex-col p-0 gap-0 animate-none",onKeyDown:H=>H.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b border-border bg-surface-2",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx(Xr,{className:"text-xl font-bold",children:o.name||`Mesa ${o.number}`})}),s.jsx(cn,{className:"sr-only",children:"Visualizao da comanda e produtos da mesa selecionada"}),(o.status==="in-use"||o.status==="awaiting-payment")&&s.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ps,{className:"w-4 h-4"}),s.jsx("span",{children:wa(o.customer)||"Sem cliente"})]}),o.order&&o.order.length>0&&s.jsxs("div",{className:"flex items-center gap-1 font-semibold text-text-primary",children:[s.jsx(Ls,{className:"w-4 h-4"}),s.jsxs("span",{children:["R$ ",(o.totalHint>0?o.totalHint:Er(o.order||[])).toFixed(2)]})]})]})]}),s.jsxs(Ad,{value:ue,onValueChange:rt,className:"flex flex-col flex-1 min-h-0",children:[s.jsxs(ju,{className:"grid w-full grid-cols-2 m-2 rounded-lg",children:[s.jsx(ua,{value:"order",className:"text-sm",children:"Comanda"}),s.jsx(ua,{value:"products",className:"text-sm",children:"Produtos"})]}),s.jsx(to,{value:"order",className:"flex-1 overflow-hidden min-h-0 m-0",children:s.jsx(ht,{table:o})}),s.jsx(to,{value:"products",className:"flex-1 overflow-hidden min-h-0 m-0",children:s.jsx($t,{})})]})]})}):null,_t=()=>{const H=j,U=H&&or.get(H.id)||0,le=H?Number(H.salePrice??H.price??0):0,we=Oe=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(Oe||0));return s.jsx(rn,{open:P,onOpenChange:Oe=>{C(Oe),Oe||A(null)},children:s.jsxs(Yr,{overlayClassName:"z-[70]",className:"sm:max-w-[420px] w-[92vw] max-h-[85vh] flex flex-col animate-none z-[71]",onOpenAutoFocus:Oe=>{},onKeyDown:Oe=>Oe.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold break-words",title:H?.name||"",children:H?.name||"Produto"}),s.jsx(cn,{children:"Detalhes do produto e aes rpidas."})]}),H?s.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),s.jsx("span",{className:"text-sm font-semibold",children:we(le)})]}),H.category?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),s.jsx("span",{className:"text-sm font-medium",children:H.category})]}):null,s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof H.stock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),s.jsx("div",{className:"text-base font-semibold",children:H.stock})]}),typeof H.minStock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),s.jsx("div",{className:"text-base font-semibold",children:H.minStock})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),s.jsxs("div",{className:"text-base font-semibold",children:["x",U]})]})]})]}):null,s.jsxs(Dn,{className:"flex items-center justify-between gap-2",children:[s.jsxs(Ae,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{H&&n("/produtos",{state:{productId:H.id,productName:H.name}})},children:[s.jsx(Gl,{className:"w-4 h-4"}),s.jsx("span",{children:"Info"})]}),s.jsx(Ae,{variant:"outline",onClick:()=>{C(!1),A(null)},children:"Fechar"}),s.jsx(Ae,{onClick:async()=>{H&&(await at(H),C(!1),A(null))},children:"Adicionar"})]})]})})};return s.jsxs(s.Fragment,{children:[s.jsx(_t,{}),s.jsx(mr,{}),s.jsxs(ur.div,{variants:je,initial:!1,animate:yt?!1:"visible",layout:!1,className:"h-full flex flex-col",children:[s.jsxs(ur.div,{variants:We,initial:!1,animate:yt?!1:void 0,layout:!1,className:"flex items-center justify-between mb-2 md:mb-6 gap-2 md:gap-4 flex-wrap",children:[s.jsx("div",{className:"w-full md:w-auto flex items-center gap-2 md:gap-3",children:s.jsx(Ad,{value:"mesas",className:"w-full md:w-auto flex-1",onValueChange:H=>{H==="mesas"&&n("/vendas"),H==="balcao"&&n("/balcao"),H==="historico"&&n("/historico")},children:s.jsxs(ju,{className:"!grid w-full grid-cols-3",children:[s.jsx(ua,{value:"mesas",className:"text-xs sm:text-sm",children:"Mesas"}),s.jsx(ua,{value:"balcao",className:"text-xs sm:text-sm",children:"Balco"}),s.jsx(ua,{value:"historico",className:"text-xs sm:text-sm",children:"Histrico"})]})})}),s.jsxs("div",{className:"w-full md:w-auto flex items-center gap-1.5 md:gap-3 md:ml-auto justify-end mt-1 md:mt-0",children:[s.jsx(kr,{}),s.jsx(ie,{}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"px-3",children:[s.jsx(TW,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Detalhes"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Detalhes do Caixa"})]}),s.jsx("div",{className:"hidden md:block w-px h-6 bg-border mx-1"}),s.jsxs(Ae,{onClick:()=>me(!0),className:"hidden md:flex",size:"sm",children:[s.jsx(ri,{className:"mr-2 h-4 w-4"})," Nova Mesa"]})]})]}),!c&&d>0&&s.jsxs("div",{className:"md:hidden mb-3 text-[11px] text-warning flex items-center gap-2",children:[s.jsx(Dc,{className:"h-3 w-3"}),"H comandas abertas, mas o caixa parece fechado.",s.jsx(Ae,{size:"sm",variant:"outline",className:"h-6 px-2 text-[11px]",onClick:()=>Ft(!0),children:"Reabrir sesso"})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden min-h-0",children:[s.jsxs(ur.div,{variants:We,initial:!1,animate:yt?!1:void 0,layout:!1,className:"lg:col-span-2 bg-surface rounded-lg border border-border p-4 md:p-6 overflow-y-auto thin-scroll min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Mapa de Mesas"}),s.jsx(Ae,{type:"button",className:"md:hidden h-9 w-9 p-0 bg-amber-400 text-black hover:bg-amber-300",size:"icon",title:"Nova Mesa",onClick:()=>me(!0),children:s.jsx(ri,{className:"h-5 w-5"})})]}),s.jsx(Re,{}),s.jsx("div",{className:"hidden md:block",children:s.jsx(zYe,{onDragEnd:yr,children:s.jsx(Qte,{droppableId:"tables",children:H=>s.jsxs("div",{...H.droppableProps,ref:H.innerRef,className:"grid gap-5 grid-cols-[repeat(auto-fit,minmax(240px,1fr))]",children:[a.length===0?s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:"text-text-muted mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),s.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhuma mesa encontrada"}),s.jsx("p",{className:"text-text-muted mb-4",children:"Crie sua primeira mesa para comear a receber pedidos"}),s.jsxs(Ae,{onClick:()=>me(!0),className:"flex items-center gap-2",children:[s.jsx(ri,{size:16}),"Criar Nova Mesa"]})]}):a.map((U,le)=>s.jsx(jXe,{draggableId:U.id,index:le,children:(we,Oe)=>s.jsx(la,{table:U,provided:we,isDragging:Oe.isDragging})},U.id)),H.placeholder]})})})})]}),s.jsx(ur.div,{variants:We,initial:!1,animate:yt?!1:void 0,layout:!1,className:"hidden md:flex bg-surface rounded-lg border border-border flex-col min-h-0",children:s.jsxs(Ad,{defaultValue:"order",className:"flex flex-col h-full",children:[s.jsxs(ju,{className:"grid w-full grid-cols-2 m-2",children:[s.jsx(ua,{value:"order",children:"Comanda"}),s.jsx(ua,{value:"products",children:"Produtos"})]}),s.jsx(to,{value:"order",className:"flex-1 overflow-hidden min-h-0",children:s.jsx(ht,{table:o})}),s.jsx(to,{value:"products",className:"flex-1 overflow-hidden min-h-0",children:s.jsx($t,{})})]})})]})]}),s.jsx(Le,{}),s.jsx(tr,{}),s.jsx(wt,{}),s.jsx(dt,{}),s.jsx(ae,{}),s.jsx(er,{}),s.jsx(mt,{}),Ee&&s.jsx("div",{className:"fixed left-3 right-3 z-[9999]",role:"alert","aria-live":"assertive",style:{bottom:"calc(12px + env(safe-area-inset-bottom, 0px))"},children:s.jsxs("div",{className:"pointer-events-none flex items-start gap-2 rounded-md border border-amber-500 bg-amber-400 text-black px-3 py-2 shadow-lg",children:[s.jsx(Dc,{className:"h-4 w-4 mt-0.5","aria-hidden":"true"}),s.jsx("div",{className:"text-sm font-semibold leading-snug drop-shadow-[0_1px_0_rgba(255,255,255,0.25)]",children:Ge||"Ateno"})]})})]})}function FXe(){const{toast:e}=ii(),t=Vc(),{userProfile:r}=io(),[n,a]=y.useState(null),[i,o]=y.useState([]),[l,c]=y.useState([]),[u,d]=y.useState(!0),[f,h]=y.useState(""),[m,g]=y.useState(""),[p,v]=y.useState(null),[x,b]=y.useState(null),[w,_]=y.useState(!1),j=y.useRef(!1),[A,P]=y.useState(!1),[C,k]=y.useState(!1),[R,E]=y.useState(!1),[I,T]=y.useState(!1),[M,z]=y.useState(null),[V,W]=y.useState(!1),[$,G]=y.useState([]);y.useState(null);const[me,de]=y.useState(!1),[L,B]=y.useState([]),[J,q]=y.useState(1),[X,Z]=y.useState([]),[pe,te]=y.useState(null),[ve,Ce]=y.useState(!1),[he,qe]=y.useState(null),[ye,ce]=y.useState(!1),[Ft,qt]=y.useState(""),[It,et]=y.useState(!1),[Ze,Pt]=y.useState(""),[ue,rt]=y.useState(()=>{try{return typeof window<"u"&&window.innerWidth<=640}catch{return!1}});y.useEffect(()=>{const _e=()=>{try{rt(typeof window<"u"&&window.innerWidth<=640)}catch{rt(!1)}};return _e(),window.addEventListener("resize",_e),()=>window.removeEventListener("resize",_e)},[]),y.useState("cadastrado");const[Ee,Ke]=y.useState(""),[Ge,bt]=y.useState([]),[ot,kt]=y.useState([]);y.useState(!1),y.useState(!1);const[yt,je]=y.useState(!1),[We,Ot]=y.useState(!1),Ve=y.useRef(0),nt=y.useRef([]);y.useEffect(()=>{nt.current=l},[l]);const Rt=y.useRef(!1);y.useEffect(()=>(Rt.current=!0,()=>{Rt.current=!1}),[]),y.useEffect(()=>{(l||[]).length>0&&(j.current=!0)},[l]),y.useEffect(()=>{n&&j.current&&(l||[]).length===0&&Dr(n,2)},[n,l?.length]),y.useEffect(()=>{let _e=!0;return(async()=>{try{const wt=await If({codigoEmpresa:r?.codigo_empresa});_e&&P(!!wt)}catch{_e&&P(!1)}})(),()=>{_e=!1}},[r?.codigo_empresa]);const Lt=async()=>{const _e=r?.codigo_empresa||null;try{if(!_e)return;T(!0);const[wt,dt]=await Promise.all([tb({codigoEmpresa:_e}).catch(()=>null),If({codigoEmpresa:_e}).catch(()=>null)]);if(!dt?.id){z(null);return}let ht=0,mt=[];try{mt=await Am({caixaSessaoId:dt.id,codigoEmpresa:_e}),ht=(mt||[]).filter($t=>($t?.tipo||"")==="sangria").reduce(($t,ut)=>$t+Number(ut?.valor||0),0)}catch{}const at={saldo_inicial:dt.saldo_inicial||0,totalPorFinalizadora:wt?.totalPorFinalizadora||wt?.porFinalizadora||{},totalEntradas:wt?.totalEntradas||wt?.entradas||0,totalSangria:ht,totalSaidas:ht,sessaoId:dt.id,movimentacoes:mt};z(at)}catch{z(null)}finally{T(!1)}};y.useEffect(()=>{let _e=!0;return(async()=>{try{if(!V||!n)return;const dt=r?.codigo_empresa;let ht=[];try{const $t=await Vo({comandaId:n,codigoEmpresa:dt});ht=(Array.isArray($t)?$t:[]).map(Wt=>{const Yt=Wt?.clientes?.id??Wt?.cliente_id??Wt?.id??null,nr=Wt?.clientes?.nome??Wt?.nome??Wt?.nome_livre??"";return Yt?{id:Yt,nome:nr}:null}).filter(Boolean)}catch{ht=[]}if(!_e)return;Z(ht);const at=Array.isArray(ot)&&ot.length>0?ot:ht.map($t=>$t.id);if(!Array.isArray(at)||at.length===0)return;B($t=>{let ut=$t&&$t.length?[...$t]:[{id:1,clientId:at[0],methodId:$[0]?.id||"",value:""}];ut[0]||(ut[0]={id:1,clientId:at[0],methodId:$[0]?.id||"",value:""}),ut[0].clientId=at[0];const Wt=new Set([ut[0].clientId].filter(Boolean));for(let Yt=1;Yt<ut.length;Yt++){if(!ut[Yt].clientId||Wt.has(ut[Yt].clientId)){const nr=(at||[]).find(Vr=>!Wt.has(Vr));ut[Yt].clientId=nr||at[0]}Wt.add(ut[Yt].clientId)}return ut})}catch{}})(),()=>{_e=!1}},[V,ot,n,r?.codigo_empresa]);const Tt=async()=>{try{if(!n){e({title:"Nenhuma comanda aberta",description:"Adicione itens para abrir uma comanda.",variant:"warning"});return}const _e=r?.codigo_empresa;if(!_e){e({title:"Empresa no definida",variant:"destructive"});return}if(!Array.isArray(L)||L.length===0){e({title:"Informe os pagamentos",description:"Adicione pelo menos uma forma de pagamento.",variant:"warning"});return}for(const mt of L){if(!mt.methodId){e({title:"Forma de pagamento faltando",description:"Selecione a finalizadora em todas as linhas.",variant:"warning"});return}if(!String(mt.value||"").replace(/\D/g,"")){e({title:"Valor invlido",description:"Informe valores maiores que zero.",variant:"warning"});return}}let wt=0;try{wt=(await Ai({comandaId:n,codigoEmpresa:_e})||[]).reduce((at,$t)=>at+Number($t.quantidade||0)*Number($t.preco_unitario||0),0)}catch{}const dt=(L||[]).reduce((mt,at)=>mt+(Number(String(at.value||"").replace(/\D/g,""))/100||0),0),ht=Math.abs(dt-wt);if(ht>.009&&ht<=.05){const mt=wt-dt;B(at=>{const $t=at.length-1;return at.map((ut,Wt)=>{if(Wt===$t){const nr=Number(String(ut.value||"").replace(/\D/g,""))/100+mt,Vr=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(nr);return{...ut,value:Vr}}return ut})})}else if(ht>.05){const mt=wt-dt;mt>0?e({title:"Valor insuficiente",description:`Faltam R$ ${mt.toFixed(2)} para fechar o total.`,variant:"warning"}):e({title:"Valor excedente",description:`Excedeu em R$ ${Math.abs(mt).toFixed(2)}. Ajuste os valores.`,variant:"warning"});return}de(!0),await nd({codigoEmpresa:_e});for(const mt of L){const at=Number(String(mt.value||"").replace(/\D/g,""))/100||0,$t=$.find(Wt=>String(Wt.id)===String(mt.methodId)),ut=$t?.nome||$t?.tipo||"outros";await OO({comandaId:n,finalizadoraId:mt.methodId,metodo:ut,valor:at,status:"Pago",codigoEmpresa:_e,clienteId:mt.clientId||null})}await w_({comandaId:n,codigoEmpresa:_e}),a(null),c([]),kt([]),h(""),Ot(!1),B([]);try{localStorage.removeItem(Er.comandaId),localStorage.removeItem(Er.items),localStorage.removeItem(Er.customerName)}catch{}e({title:"Pagamento concludo",description:`Total R$ ${wt.toFixed(2)}`,variant:"success"}),W(!1)}catch(_e){e({title:"Falha ao concluir",description:_e?.message||"Tente novamente",variant:"destructive"})}finally{de(!1)}},ir=()=>{try{return(L||[]).reduce((_e,wt)=>{const dt=String(wt?.value||"").replace(/\D/g,""),ht=dt?Number(dt)/100:0;return _e+ht},0)}catch{return 0}};y.useEffect(()=>{(async()=>{try{if(!C)return;await Lt()}catch{}})()},[C,r?.codigo_empresa]);const fr=()=>{const[_e,wt]=y.useState(""),dt=y.useRef(null);return y.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<=640)return;const mt=setTimeout(()=>{try{dt.current?.focus()}catch{}},0);return()=>clearTimeout(mt)},[]),s.jsxs(s.Fragment,{children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Abrir Caixa"}),s.jsx(yd,{children:"Insira o valor inicial (suprimento) para abrir o caixa."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(ct,{className:"mb-2 block",htmlFor:"open-cash-initial",children:"Saldo inicial"}),s.jsx(Mt,{id:"open-cash-initial",ref:dt,type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:_e,onChange:ht=>{const mt=(ht.target.value||"").replace(/\D/g,""),at=mt?Number(mt)/100:0,$t=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(at);wt($t)},onKeyDown:ht=>{ht.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(ht.key)&&(/^[0-9]$/.test(ht.key)||ht.preventDefault())},onBeforeInput:ht=>{const mt=ht.data??"";mt&&/\D/.test(mt)&&ht.preventDefault()}}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Digite nmeros; a mscara formata em reais automaticamente."})]}),s.jsxs(gd,{children:[s.jsx(bd,{onClick:()=>E(!1),children:"Cancelar"}),s.jsx(xd,{onClick:async()=>{try{const ht=String(_e||"").replace(/\D/g,""),mt=ht?Number(ht)/100:0;await nd({saldoInicial:mt,codigoEmpresa:r?.codigo_empresa}),P(!0),E(!1),e({title:"Caixa aberto com sucesso!",variant:"success"})}catch(ht){e({title:"Falha ao abrir caixa",description:ht?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar Abertura"})]})]})},ia=()=>s.jsxs(Tf,{open:R,onOpenChange:E,children:[s.jsx(pm,{asChild:!0,children:s.jsxs(Ae,{variant:"success",disabled:A,onClick:()=>E(!0),className:"h-9 rounded-md px-3 sm:h-10",children:[s.jsx(LW,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Abrir"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Abrir Caixa"})]})}),s.jsx(md,{className:"sm:max-w-[425px] w-[92vw] animate-none",onKeyDown:_e=>_e.stopPropagation(),onPointerDownOutside:_e=>{_e.preventDefault(),_e.stopPropagation()},onInteractOutside:_e=>{_e.preventDefault(),_e.stopPropagation()},children:s.jsx(fr,{})})]}),fn=()=>{const[_e,wt]=y.useState({loading:!1,saldoInicial:0,resumo:null}),[dt,ht]=y.useState(!1),mt=async()=>{try{wt({loading:!0,saldoInicial:0,resumo:null});const Wt=await If({codigoEmpresa:r?.codigo_empresa}),Yt=await tb({codigoEmpresa:r?.codigo_empresa});wt({loading:!1,saldoInicial:Number(Wt?.saldo_inicial||0),resumo:Yt||{totalPorFinalizadora:{}}})}catch{wt({loading:!1,saldoInicial:0,resumo:{totalPorFinalizadora:{}}})}},at=_e?.resumo?.totalPorFinalizadora||{},$t=Object.values(at).reduce((Wt,Yt)=>Wt+Number(Yt||0),0),ut=Number(_e.saldoInicial||0)+$t;return s.jsxs(Tf,{children:[s.jsx(pm,{asChild:!0,children:s.jsxs(Ae,{variant:"destructive",disabled:!A,onClick:mt,className:"h-9 rounded-md px-3 sm:h-10",children:[s.jsx(Vg,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Fechar"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Fechar Caixa"})]})}),s.jsxs(md,{className:"sm:max-w-[425px] w-[92vw] max-h-[85vh] animate-none",onKeyDown:Wt=>Wt.stopPropagation(),onPointerDownOutside:Wt=>{Wt.preventDefault(),Wt.stopPropagation()},onInteractOutside:Wt=>{Wt.preventDefault(),Wt.stopPropagation()},children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Fechar Caixa"}),s.jsx(yd,{children:"Confira os valores e confirme o fechamento do caixa. Esta ao  irreversvel."})]}),dt&&s.jsxs("div",{className:"md:hidden mb-2 text-[12px] text-warning bg-warning/10 border border-warning/30 rounded px-2 py-1 flex items-center gap-1",children:[s.jsx(Dc,{className:"h-3.5 w-3.5"}),"Existem comandas abertas. Finalize-as antes de fechar o caixa."]}),_e.loading?s.jsx("div",{className:"py-4 text-text-muted",children:"Carregando resumo"}):s.jsxs("div",{className:"py-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor Inicial:"})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(_e.saldoInicial||0).toFixed(2)]})]}),Object.keys(at).length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos nesta sesso."}):Object.entries(at).map(([Wt,Yt])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-text-secondary",children:[String(Wt),":"]})," ",s.jsxs("span",{className:"font-mono",children:["R$ ",Number(Yt||0).toFixed(2)]})]},Wt)),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{className:"text-text-primary",children:"Total em Caixa:"})," ",s.jsxs("span",{className:"font-mono text-success",children:["R$ ",Number(ut||0).toFixed(2)]})]})]}),s.jsxs(gd,{children:[s.jsx(bd,{children:"Cancelar"}),s.jsx(xd,{onClick:async()=>{try{try{const Wt=await au({codigoEmpresa:r?.codigo_empresa});if(Array.isArray(Wt)&&Wt.length>0){ue?(ht(!0),Pt(`Existem ${Wt.length} comandas abertas. Feche todas antes de encerrar o caixa.`),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>et(!0)):et(!0),setTimeout(()=>et(!1),2600)):e({title:"Fechamento bloqueado",description:`Existem ${Wt.length} comandas abertas. Feche todas antes de encerrar o caixa.`,variant:"warning",duration:2500});return}}catch{}await xee({codigoEmpresa:r?.codigo_empresa}),P(!1),e({title:"Caixa fechado!",description:"O relatrio de fechamento foi gerado.",variant:"success"})}catch(Wt){const Yt=Wt?.message||"Tente novamente";ue?(Pt(Yt.includes("Existem")?Yt:`Falha ao fechar caixa: ${Yt}`),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>et(!0)):et(!0),setTimeout(()=>et(!1),2600)):e({title:"Falha ao fechar caixa",description:Yt,variant:"destructive"})}},children:"Confirmar Fechamento"})]})]})]})},Or=()=>{const _e=nr=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(nr||0)),[wt,dt]=y.useState(!1),[ht,mt]=y.useState(""),[at,$t]=y.useState(""),[ut,Wt]=y.useState(!1),Yt=async()=>{try{Wt(!0);const nr=String(ht||"").replace(/\D/g,""),Vr=nr?Number(nr)/100:0;if(Vr<=0){e({title:"Valor invlido",description:"Informe um valor positivo.",variant:"warning"});return}await nd({codigoEmpresa:r?.codigo_empresa}),await bee({tipo:"sangria",valor:Vr,observacao:at,codigoEmpresa:r?.codigo_empresa}),dt(!1),mt(""),$t(""),await Lt(),e({title:"Sangria registrada",variant:"success"})}catch(nr){e({title:"Falha ao registrar sangria",description:nr?.message||"Tente novamente",variant:"destructive"})}finally{Wt(!1)}};return s.jsx(rn,{open:C,onOpenChange:k,children:s.jsxs(Yr,{className:"sm:max-w-lg w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden",onKeyDown:nr=>nr.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Detalhes do Caixa"}),s.jsx(cn,{children:I?"Carregando resumo...":M?"Resumo da sesso atual do caixa.":"Nenhuma sesso de caixa aberta."})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Saldo Inicial"}),s.jsx("div",{className:"text-base md:text-lg font-bold tabular-nums leading-tight",children:_e(M.saldo_inicial)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Entradas"}),s.jsx("div",{className:"text-base md:text-lg font-bold text-success tabular-nums leading-tight",children:_e(M.totalEntradas)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Sadas"}),s.jsx("div",{className:"text-base md:text-lg font-bold text-danger tabular-nums leading-tight",children:_e(M.totalSangria)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border text-center",children:[s.jsx("div",{className:"text-[12px] text-text-secondary whitespace-nowrap mb-1",children:"Saldo Atual"}),s.jsx("div",{className:"text-base md:text-lg font-bold tabular-nums leading-tight",children:_e((M.saldo_inicial||0)+(M.totalEntradas||0)-(M.totalSangria||0))})]})]}),s.jsxs("div",{className:"mt-5",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("h4",{className:"text-sm font-semibold text-text-secondary",children:"Totais por Finalizadora"})}),Object.keys(M.totalPorFinalizadora||{}).length===0?s.jsx("div",{className:"p-3 text-sm text-text-muted border rounded-md",children:"Nenhuma finalizadora registrada ainda."}):s.jsx("ul",{className:"rounded-md border border-border overflow-hidden divide-y divide-border",children:Object.entries(M.totalPorFinalizadora||{}).map(([nr,Vr])=>s.jsxs("li",{className:"bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:String(nr)}),s.jsx("span",{className:"text-sm font-semibold tabular-nums",children:_e(Vr)})]},nr))}),s.jsxs("div",{className:"mt-2 rounded-md border border-border bg-surface px-3 py-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate pr-3",children:"Sangrias"}),s.jsx("span",{className:"text-sm font-semibold tabular-nums text-danger",children:_e(M.totalSangria)})]})]})]}),s.jsxs(Dn,{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"mr-auto"}),s.jsx(Ae,{variant:"destructive",onClick:()=>dt(!0),children:"Registrar Sangria"}),s.jsx(Ae,{variant:"secondary",onClick:()=>k(!1),children:"Fechar"})]}),s.jsx(rn,{open:wt,onOpenChange:dt,children:s.jsxs(Yr,{className:"sm:max-w-sm w-[92vw] max-h-[85vh] animate-none",onKeyDown:nr=>nr.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold",children:"Registrar Sangria"}),s.jsx(cn,{children:"Informe o valor a retirar do caixa e, opcionalmente, uma observao."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"s-valor",children:"Valor"}),s.jsx(Mt,{id:"s-valor",type:"text",inputMode:"numeric",autoComplete:"off",placeholder:"0,00",value:ht,onChange:nr=>{const Vr=(nr.target.value||"").replace(/\D/g,""),Cn=Vr?Number(Vr)/100:0,Sn=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Cn);mt(Sn)},onKeyDown:nr=>{nr.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(nr.key)&&(/^[0-9]$/.test(nr.key)||nr.preventDefault())},onBeforeInput:nr=>{const Vr=nr.data??"";Vr&&/\D/.test(Vr)&&nr.preventDefault()}})]}),s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"s-obs",children:"Observao"}),s.jsx(Mt,{id:"s-obs",placeholder:"Opcional",value:at,onChange:nr=>$t(nr.target.value)})]})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>dt(!1),disabled:ut,children:"Cancelar"}),s.jsx(Ae,{onClick:Yt,disabled:ut,children:ut?"Registrando...":"Confirmar"})]})]})})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma sesso de caixa aberta."})]})})},yr=r?.codigo_empresa||"anon",Er={comandaId:`balcao:comandaId:${yr}`,items:`balcao:items:${yr}`,customerName:`balcao:customer:${yr}`,clientChosen:`balcao:clientChosen:${yr}`,pendingClientIds:`balcao:pendingClientIds:${yr}`,missCount:`balcao:missCount:${yr}`,lastMissTs:`balcao:lastMissTs:${yr}`},Dr=async(_e,wt=3)=>{if(!_e)return;const dt=r?.codigo_empresa,ht=++Ve.current;for(let mt=0;mt<wt;mt++)try{const at=await Ai({comandaId:_e,codigoEmpresa:dt});if(ht!==Ve.current)return;const $t=(at||[]).map(ut=>({id:ut.id,productId:ut.produto_id,name:ut.descricao||"Item",price:Number(ut.preco_unitario||0),quantity:Number(ut.quantidade||1)}));$t.length===0&&(nt.current||[]).length>0||c($t);try{const ut=await Vo({comandaId:_e,codigoEmpresa:dt});if(ht!==Ve.current)return;const Wt=(ut||[]).map(nr=>nr?.nome).filter(Boolean),Yt=Wt.length?Wt.join(", "):"";h(Yt),Ot(!!Yt)}catch{h(""),Ot(!1)}break}catch(at){if(mt===wt-1)e({title:"Falha ao atualizar itens",description:at?.message||"Tente novamente",variant:"destructive"});else{const $t=350*(mt+1),ut=Math.floor(Math.random()*120);await new Promise(Wt=>setTimeout(Wt,$t+ut))}}},wa=async()=>{try{d(!0);let _e=setTimeout(()=>{Rt.current&&d(!1)},1e4);const wt=r?.codigo_empresa;if(!wt){Rt.current&&d(!1);return}try{const at=localStorage.getItem(Er.comandaId),$t=JSON.parse(localStorage.getItem(Er.items)||"[]"),ut=localStorage.getItem(Er.customerName)||"",Wt=localStorage.getItem(Er.clientChosen),Yt=JSON.parse(localStorage.getItem(Er.pendingClientIds)||"[]");at&&a(Number.isNaN(+at)?at:Number(at)),Array.isArray($t)&&$t.length>0&&c($t),ut&&h(ut),Wt==="true"&&Ot(!0),Array.isArray(Yt)&&Yt.length>0&&kt(Yt)}catch{}const dt=localStorage.getItem(Er.comandaId),ht=dt?Number.isNaN(+dt)?dt:Number(dt):null,mt=await vee({codigoEmpresa:wt}).catch(()=>null);if(mt?.id)a(mt.id),await Dr(mt.id);else if(ht)a(ht),await Dr(ht,3);else{let at=0,$t=0;try{at=Number(localStorage.getItem(Er.missCount)||"0"),$t=Number(localStorage.getItem(Er.lastMissTs)||"0")}catch{}const ut=Date.now(),Yt=ut-$t<9e4?at+1:1;try{localStorage.setItem(Er.missCount,String(Yt)),localStorage.setItem(Er.lastMissTs,String(ut))}catch{}try{const nr=localStorage.getItem(Er.customerName)||"",Vr=localStorage.getItem(Er.clientChosen)==="true",Cn=JSON.parse(localStorage.getItem(Er.pendingClientIds)||"[]");h(nr||""),Ot(!!Vr),kt(Array.isArray(Cn)?Cn:[])}catch{}if(a(null),Yt>=2){c([]);try{localStorage.removeItem(Er.comandaId),localStorage.removeItem(Er.items)}catch{}}else try{const nr=JSON.parse(localStorage.getItem(Er.items)||"[]");Array.isArray(nr)&&nr.length>0&&c(nr)}catch{}}try{const at=await mh({includeInactive:!1,search:m?.trim()||void 0,codigoEmpresa:wt});Rt.current&&o(at||[])}catch{o([])}clearTimeout(_e)}catch(_e){e({title:"Falha ao carregar Modo Balco",description:_e?.message||"Tente novamente",variant:"destructive"})}finally{Rt.current&&d(!1)}},or=async()=>{try{_(!0);const _e=r?.codigo_empresa;if(n&&_e)try{try{await Pe.from("comanda_itens").delete().eq("comanda_id",n).eq("codigo_empresa",_e)}catch{}try{await Pe.from("comanda_clientes").delete().eq("comanda_id",n).eq("codigo_empresa",_e)}catch{}await Pe.from("comandas").update({status:"canceled"}).eq("id",n).eq("codigo_empresa",_e)}catch{}}finally{a(null),c([]),kt([]),h(""),Ot(!1),b(null);try{localStorage.removeItem(Er.comandaId),localStorage.removeItem(Er.items),localStorage.removeItem(Er.customerName)}catch{}_(!1),e({title:"Venda cancelada",variant:"success"})}};y.useEffect(()=>{let _e=!1;(async()=>{await wa(),!_e&&Rt.current&&!n&&(nt.current||[]).length===0&&(_e=!0,setTimeout(()=>{Rt.current&&wa()},700))})()},[r?.codigo_empresa]),y.useEffect(()=>{try{n&&localStorage.setItem(Er.comandaId,String(n)),localStorage.setItem(Er.items,JSON.stringify(l||[])),localStorage.setItem(Er.customerName,f||""),localStorage.setItem(Er.clientChosen,We?"true":"false"),n?localStorage.removeItem(Er.pendingClientIds):localStorage.setItem(Er.pendingClientIds,JSON.stringify(ot||[]))}catch{}},[n,l,f,We,ot]),y.useEffect(()=>{const _e=()=>{n&&Dr(n,2)},wt=()=>{document.visibilityState==="visible"&&n&&Dr(n,2)};return window.addEventListener("focus",_e),document.addEventListener("visibilitychange",wt),()=>{window.removeEventListener("focus",_e),document.removeEventListener("visibilitychange",wt)}},[n]),y.useEffect(()=>{let _e=!0;const wt=setTimeout(async()=>{try{const dt=await mh({includeInactive:!1,search:m?.trim()||void 0,codigoEmpresa:r?.codigo_empresa});if(!_e)return;let ht=dt||[];if(m?.trim()){const mt=m.trim().toLowerCase();ht=ht.filter(at=>(at.name||"").toLowerCase().includes(mt)||(at.code||"").toLowerCase().includes(mt))}ht.sort((mt,at)=>{const $t=mt.code||"",ut=at.code||"";return/^\d+$/.test($t)&&/^\d+$/.test(ut)?parseInt($t,10)-parseInt(ut,10):$t.localeCompare(ut)}),o(ht)}catch{_e&&o([])}},300);return()=>{_e=!1,clearTimeout(wt)}},[m]),y.useEffect(()=>{let _e=!0;const wt=setTimeout(async()=>{try{const dt=await u2({searchTerm:Ee,limit:20,codigoEmpresa:r?.codigo_empresa});if(!_e)return;const ht=(dt||[]).slice().sort((mt,at)=>Number(mt?.codigo||0)-Number(at?.codigo||0));bt(ht)}catch{_e&&bt([])}},250);return()=>{_e=!1,clearTimeout(wt)}},[Ee]);const dr=y.useMemo(()=>l.reduce((_e,wt)=>_e+Number(wt.price||0)*Number(wt.quantity||0),0),[l]),Vn=y.useMemo(()=>{const _e=new Map;for(const wt of l||[]){const dt=wt.productId;if(!dt)continue;const ht=Number(wt.quantity||0);_e.set(dt,(_e.get(dt)||0)+ht)}return _e},[l]),qa=async(_e,wt={})=>{try{if(!We&&!wt.skipClientCheck){b(_e),je(!0),e({title:"Selecione o cliente",description:"Escolha um cliente cadastrado antes de vender.",variant:"warning"});return}const dt=r?.codigo_empresa;if(!dt){e({title:"Empresa no definida",description:"Faa login novamente.",variant:"destructive"});return}if(p)return;const ht=Number(_e.stock??_e.currentStock??0),mt=Number(_e.minStock??0);if(ht<=0){e({title:"Sem estoque",description:`Produto "${_e.name}" est com estoque zerado.`,variant:"destructive"});return}v(_e.id);let at=n;const $t=!at;if(!at)try{const Yt=await b7({codigoEmpresa:dt});at=Yt.id,a(Yt.id)}catch(Yt){if(Yt?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para vender",description:"Voc precisa abrir o caixa antes de iniciar uma comanda no Balco.",variant:"warning"});return}throw Yt}const ut=Number(_e.salePrice??_e.price??0),Wt=(nt.current||[]).find(Yt=>Yt.productId===_e.id);if(Wt?await od({itemId:Wt.id,quantidade:Number(Wt.quantity||0)+1,codigoEmpresa:dt}):await kO({comandaId:at,produtoId:_e.id,descricao:_e.name,quantidade:1,precoUnitario:ut,codigoEmpresa:dt}),await Dr(at),$t)try{const Yt=Array.from(new Set(ot||[]));if(Yt.length>0){await Ox({comandaId:at,clienteIds:Yt,nomesLivres:[],codigoEmpresa:dt}),await Dr(at);const Vr=(await Vo({comandaId:at,codigoEmpresa:dt})||[]).map(Cn=>Cn?.nome).filter(Boolean);h(Vr.length?Vr.join(", "):""),Ot(!0);try{localStorage.removeItem(Er.pendingClientIds),localStorage.setItem(Er.customerName,Vr.length?Vr.join(", "):""),localStorage.setItem(Er.clientChosen,"true")}catch(Cn){console.error("Erro ao atualizar cache local:",Cn)}}}catch(Yt){console.error("Erro ao associar clientes:",Yt)}ht-1<=0?e({title:"ltima unidade vendida",description:`"${_e.name}" esgotou aps esta venda.`,variant:"warning"}):ht-1<=mt?e({title:"Estoque baixo",description:`"${_e.name}" atingiu nvel de estoque baixo.`,variant:"warning"}):e({title:"Produto adicionado",description:_e.name,variant:"success"})}catch(dt){const ht=String(dt?.message||"").toLowerCase();dt?.code==="OUT_OF_STOCK"||ht.includes("sem estoque")?e({title:"Sem estoque",description:"Este produto est sem estoque.",variant:"destructive"}):dt?.code==="INSUFFICIENT_STOCK"||ht.includes("insuficiente")?e({title:"Estoque insuficiente",description:dt?.message||"Quantidade maior que o disponvel.",variant:"destructive"}):e({title:"Falha ao adicionar",description:dt?.message||"Tente novamente",variant:"destructive"})}finally{v(null)}},la=async()=>{try{if(de(!0),!We){je(!0),e({title:"Selecione o cliente",description:"Escolha um cliente cadastrado antes de pagar.",variant:"warning"}),de(!1);return}const _e=r?.codigo_empresa;if(!_e){e({title:"Empresa no definida",variant:"destructive"});return}if(!n)try{const at=await b7({codigoEmpresa:_e});if(!at?.id){e({title:"Comanda no encontrada",description:"Abra uma comanda antes de pagar.",variant:"destructive"}),de(!1);return}a(at.id)}catch(at){if(at?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para pagar",description:" necessrio abrir o caixa antes de iniciar/confirmar uma venda.",variant:"warning"}),de(!1);return}throw at}try{await qWe({comandaId:n,codigoEmpresa:_e})}catch(at){const $t=Array.isArray(at?.items)&&at.items.length?at.items.map(ut=>`${ut.name} (solicitado ${ut.solicitado}, estoque ${ut.estoque})`).join("; "):at?.message||"Estoque insuficiente na comanda";e({title:"Estoque insuficiente",description:$t,variant:"destructive",duration:7e3}),de(!1);return}const wt=await kg({somenteAtivas:!0,codigoEmpresa:_e});G(wt||[]);let dt=[];try{const at=await Vo({comandaId:n,codigoEmpresa:_e});dt=(Array.isArray(at)?at:[]).map(ut=>{const Wt=ut?.cliente_id??ut?.clientes?.id??null,Yt=ut?.clientes?.nome??ut?.nome??ut?.nome_livre??"";return Wt?{id:Wt,nome:Yt}:null}).filter(Boolean)}catch{dt=[]}Z(dt);const ht=wt&&wt[0]&&wt[0].id?wt[0].id:null,mt=ot&&ot.length>0?ot[0]:dt[0]?.id||null;B([{id:1,clientId:mt,methodId:ht,value:""}]),q(2);try{const $t=(await Ai({comandaId:n,codigoEmpresa:_e})||[]).reduce((ut,Wt)=>ut+Number(Wt.quantidade||0)*Number(Wt.preco_unitario||0),0);if($t>0){const ut=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format($t);B([{id:1,clientId:mt,methodId:ht,value:ut}])}}catch{}W(!0),de(!1);return}catch(_e){if(_e?.code==="NO_OPEN_CASH_SESSION"){e({title:"Abra o caixa para pagar",description:" necessrio abrir o caixa antes de iniciar/confirmar uma venda.",variant:"warning"}),de(!1);return}e({title:"Falha ao iniciar pagamento",description:_e?.message||"Tente novamente",variant:"destructive"})}finally{}};return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"mb-3 space-y-2",children:[s.jsx("div",{className:"w-full",children:s.jsx(Ad,{value:"balcao",onValueChange:_e=>{_e==="mesas"&&t("/vendas"),_e==="balcao"&&t("/balcao"),_e==="historico"&&t("/historico")},children:s.jsxs(ju,{className:"w-full grid grid-cols-3 sm:w-auto sm:inline-flex",children:[s.jsx(ua,{value:"mesas",children:"Mesas"}),s.jsx(ua,{value:"balcao",children:"Balco"}),s.jsx(ua,{value:"historico",children:"Histrico"})]})})}),s.jsxs("div",{className:"w-full flex items-center gap-2 justify-end",children:[s.jsx(ia,{}),s.jsx(fn,{}),s.jsxs(Ae,{variant:"outline",onClick:()=>k(!0),className:"h-9 rounded-md px-3 sm:h-10",children:[s.jsx(TW,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 md:hidden",children:"Detalhes"}),s.jsx("span",{className:"ml-2 hidden md:inline",children:"Detalhes do Caixa"})]})]})]}),s.jsx(Or,{}),s.jsx(rn,{open:ve,onOpenChange:_e=>{Ce(_e),_e||te(null)},children:s.jsxs(Yr,{className:"sm:max-w-[420px] w-full max-h-[85vh] flex flex-col animate-none",onKeyDown:_e=>_e.stopPropagation(),onPointerDownOutside:_e=>_e.stopPropagation(),onInteractOutside:_e=>_e.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold break-words",title:pe?.name||"",children:pe?.name||"Produto"}),s.jsx(cn,{children:"Detalhes do produto e aes rpidas."})]}),pe?s.jsxs("div",{className:"space-y-3 overflow-y-auto pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Preo"}),s.jsx("span",{className:"text-sm font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(pe.price??pe.salePrice??0))})]}),pe.category?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Categoria"}),s.jsx("span",{className:"text-sm font-medium",children:pe.category})]}):null,s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[typeof pe.stock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Estoque"}),s.jsx("div",{className:"text-base font-semibold",children:pe.stock})]}),typeof pe.minStock<"u"&&s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Mnimo"}),s.jsx("div",{className:"text-base font-semibold",children:pe.minStock})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Na Comanda"}),s.jsxs("div",{className:"text-base font-semibold",children:["x",Vn.get(pe.id)||0]})]})]})]}):null,s.jsxs(Dn,{className:"flex items-center justify-between gap-2",children:[s.jsxs(Ae,{variant:"ghost",size:"sm",className:"mr-auto inline-flex items-center gap-1",onClick:()=>{pe&&t("/produtos",{state:{productId:pe.id,productName:pe.name}})},children:[s.jsx(Gl,{className:"w-4 h-4"}),s.jsx("span",{children:"Info"})]}),s.jsx(Ae,{variant:"outline",onClick:()=>{Ce(!1),te(null)},children:"Fechar"}),s.jsx(Ae,{onClick:async()=>{pe&&(await qa(pe,{skipClientCheck:!1}),Ce(!1),te(null))},children:"Adicionar"})]})]})}),s.jsx(rn,{open:ye,onOpenChange:ce,children:s.jsxs(Yr,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] flex flex-col overflow-hidden animate-none",onOpenAutoFocus:_e=>_e.preventDefault(),onKeyDown:_e=>_e.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold",children:"Adicionar Produtos"}),s.jsx(cn,{children:"Busque e adicione produtos  comanda do balco."})]}),s.jsx("div",{className:"p-4 pt-0",children:s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar produto...",className:"pl-9",value:Ft,onChange:_e=>qt(_e.target.value)})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 thin-scroll",children:[s.jsx("ul",{className:"space-y-2",children:(i||[]).filter(_e=>{const wt=(Ft||"").toLowerCase();if(!wt)return!0;const dt=String(_e.name||_e.descricao||"").toLowerCase(),ht=String(_e.code||_e.codigo||"").toLowerCase();return dt.includes(wt)||ht.includes(wt)}).map(_e=>{const wt=Vn.get(_e.id)||0,dt=Number(_e.stock??_e.currentStock??0),ht=Math.max(0,dt-wt),mt=Number(_e.salePrice??_e.price??0);return s.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors border border-border/40",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate max-w-[200px]",title:`${_e.code?`[${_e.code}] `:""}${_e.name}`,children:[_e.code&&s.jsxs("span",{className:"text-text-muted",children:["[",_e.code,"]"]})," ",_e.name]}),wt>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",wt]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",ht]})]}),s.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",mt.toFixed(2)]})]}),s.jsx(Ae,{size:"icon",variant:"outline",className:"flex-shrink-0",onClick:async()=>{await qa(_e)},"aria-label":`Adicionar ${_e.name}`,children:s.jsx(ri,{className:"h-4 w-4"})})]},_e.id)})}),Array.isArray(i)&&i.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(lE,{className:"w-16 h-16 text-text-muted mb-4"}),s.jsx("p",{className:"text-sm text-text-muted",children:"Nenhum produto encontrado."})]})]}),s.jsx(Dn,{children:s.jsx(Ae,{variant:"outline",onClick:()=>ce(!1),children:"Fechar"})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex flex-col border rounded-lg border-border overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar produto...",className:"pl-9",value:m,onChange:_e=>g(_e.target.value)})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:(i||[]).length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12",children:[s.jsx(lE,{className:"w-16 h-16 text-text-muted mb-4"}),s.jsx("p",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhum produto cadastrado"}),s.jsx("p",{className:"text-sm text-text-muted mb-6 text-center",children:"Cadastre produtos para comear a vender"}),s.jsxs(Ae,{onClick:()=>t("/produtos"),children:[s.jsx(ri,{className:"mr-2 h-4 w-4"}),"Cadastrar Produto"]})]}):s.jsx("ul",{className:"space-y-2",children:i.map(_e=>{const wt=Vn.get(_e.id)||0,dt=Number(_e.stock??_e.currentStock??0),ht=Math.max(0,dt-wt),mt=Number(_e.salePrice??_e.price??0);return s.jsx(se.Fragment,{children:s.jsxs("li",{className:"flex items-center p-2 rounded-md hover:bg-surface-2 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{te({..._e,qty:wt,remaining:ht,price:mt}),Ce(!0)},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"font-semibold truncate max-w-[180px]",title:`${_e.code?`[${_e.code}] `:""}${_e.name}`,children:[_e.code&&s.jsxs("span",{className:"text-text-muted",children:["[",_e.code,"]"]})," ",_e.name.length>20?`${_e.name.substring(0,20)}...`:_e.name]}),wt>0&&s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-brand/15 text-brand border border-brand/30 flex-shrink-0",children:["x",wt]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface-2 text-text-secondary border border-border flex-shrink-0",children:["Qtd ",ht]})]}),s.jsxs("p",{className:"text-sm text-text-muted",children:["R$ ",mt.toFixed(2)]})]}),s.jsx(Ae,{size:"icon",variant:"outline",className:"flex-shrink-0",onClick:at=>{at.stopPropagation(),qa(_e)},"aria-label":`Adicionar ${_e.name}`,children:s.jsx(ri,{className:"h-4 w-4"})})]})},_e.id)})})})]}),s.jsxs("div",{className:"flex flex-col border rounded-lg border-border overflow-hidden",children:[s.jsxs("div",{className:"p-3 border-b border-border flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:"Comanda"}),s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"text-base font-bold",children:"Balco"}),f?s.jsx("span",{className:"max-w-[140px] truncate text-[11px] px-2 py-0.5 rounded-full border border-border bg-surface-2 text-text-secondary",children:f}):null]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[s.jsxs(Ae,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs whitespace-nowrap",onClick:()=>ce(!0),title:"Adicionar produto",children:[s.jsx(ri,{className:"h-4 w-4 mr-1"}),"Produto"]}),We&&s.jsx(Ae,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs whitespace-nowrap",onClick:()=>je(!0),children:"+ Cliente"}),We?s.jsxs(Tf,{children:[s.jsx(pm,{asChild:!0,children:s.jsx(Ae,{size:"sm",className:"h-8 px-2 text-xs whitespace-nowrap bg-red-600 hover:bg-red-500 text-white border border-red-600/70 focus:outline-none focus:ring-0 focus-visible:ring-0 shadow-none",disabled:w,children:w?"Cancelando...":"Cancelar"})}),s.jsxs(md,{className:"sm:max-w-[420px] animate-none",onKeyDown:_e=>_e.stopPropagation(),children:[s.jsxs(pd,{children:[s.jsx(vd,{children:"Cancelar venda do balco?"}),s.jsx(yd,{children:"Os itens sero descartados e a venda ser limpa. Esta ao no pode ser desfeita."})]}),s.jsxs(gd,{children:[s.jsx(bd,{children:"Voltar"}),s.jsx(xd,{onClick:or,children:"Confirmar Cancelamento"})]})]})]}):s.jsx(Ae,{size:"sm",variant:"outline",className:"h-8 px-2 text-xs opacity-60 cursor-not-allowed whitespace-nowrap",disabled:!0,children:"Cancelar"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 thin-scroll",children:We?l.length===0?s.jsx("div",{className:"text-center text-text-muted pt-16",children:'Comanda vazia. Use o boto "+" para adicionar produtos.'}):s.jsx("ul",{className:"space-y-3 pr-1",children:l.map(_e=>s.jsxs("li",{className:"p-2 rounded-md border border-border/30 bg-surface hover:bg-surface-2 transition-colors",children:[s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx("div",{className:"font-medium truncate",title:_e.name,children:_e.name.length>25?`${_e.name.substring(0,25)}...`:_e.name})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ae,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:async wt=>{wt.stopPropagation();const dt=r?.codigo_empresa;if(!dt){e({title:"Empresa no definida",variant:"destructive"});return}const ht=Number(_e.quantity||1)-1;c(mt=>mt.map($t=>$t.id===_e.id?{...$t,quantity:Math.max(ht,0)}:$t).filter($t=>$t.quantity>0));try{ht<=0?await Og({itemId:_e.id,codigoEmpresa:dt}):await od({itemId:_e.id,quantidade:ht,codigoEmpresa:dt})}catch(mt){try{const $t=await Ai({comandaId:n,codigoEmpresa:dt});c(($t||[]).map(ut=>({id:ut.id,productId:ut.produto_id,name:ut.descricao||"Item",price:Number(ut.preco_unitario||0),quantity:Number(ut.quantidade||1)})))}catch{}const at=String(mt?.message||"").toLowerCase();mt?.code==="INSUFFICIENT_STOCK"||at.includes("insuficiente")?e({title:"Estoque insuficiente",description:mt?.message||"Quantidade maior que o disponvel.",variant:"warning"}):e({title:"Falha ao atualizar item",description:mt?.message||"Tente novamente",variant:"destructive"})}},children:"-"}),s.jsx("span",{className:"w-7 text-center font-semibold text-sm",children:_e.quantity}),s.jsx(Ae,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:async wt=>{wt.stopPropagation();const dt=r?.codigo_empresa;if(!dt){e({title:"Empresa no definida",variant:"destructive"});return}const ht=Number(_e.quantity||1)+1;c(mt=>mt.map(at=>at.id===_e.id?{...at,quantity:ht}:at));try{await od({itemId:_e.id,quantidade:ht,codigoEmpresa:dt})}catch(mt){try{const $t=await Ai({comandaId:n,codigoEmpresa:dt});c(($t||[]).map(ut=>({id:ut.id,productId:ut.produto_id,name:ut.descricao||"Item",price:Number(ut.preco_unitario||0),quantity:Number(ut.quantidade||1)})))}catch{}const at=String(mt?.message||"").toLowerCase();mt?.code==="INSUFFICIENT_STOCK"||at.includes("insuficiente")?e({title:"Estoque insuficiente",description:mt?.message||"Quantidade maior que o disponvel.",variant:"warning"}):e({title:"Falha ao atualizar item",description:mt?.message||"Tente novamente",variant:"destructive"})}},children:"+"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-semibold whitespace-nowrap",children:["R$ ",(Number(_e.quantity)*Number(_e.price)).toFixed(2)]}),s.jsxs("span",{className:"inline-flex items-center justify-center text-[11px] px-1.5 py-0.5 rounded-full bg-surface text-text-secondary border border-border",children:["x",_e.quantity]})]})]})]},_e.id))}):s.jsxs("div",{className:"text-center pt-12",children:[s.jsx("div",{className:"text-sm text-text-secondary mb-3",children:"Para comear, inicie uma nova venda e selecione o cliente."}),s.jsx(Ae,{onClick:()=>je(!0),children:"Iniciar nova venda"})]})}),s.jsxs("div",{className:"p-4 border-t border-border",children:[s.jsxs("div",{className:"flex justify-between items-center text-lg font-bold mb-3",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",dr.toFixed(2)]})]}),s.jsx(Ae,{size:"lg",className:"w-full",onClick:la,disabled:dr<=0,children:"Finalizar Pagamento"})]})]})]}),s.jsx(rn,{open:V,onOpenChange:W,children:s.jsxs(Yr,{className:"sm:max-w-xl w-[92vw] max-h-[85vh] flex flex-col overflow-hidden animate-none",onKeyDown:_e=>_e.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Fechar Conta"}),s.jsx(cn,{children:"Divida o pagamento entre clientes e vrias finalizadoras, se necessrio."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["R$ ",dr.toFixed(2)]})]}),s.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto thin-scroll pr-1 max-h-[60vh]",children:[s.jsx(ct,{className:"block",children:"Pagamentos"}),(()=>null)(),(()=>null)(),(L||[]).map((_e,wt)=>{const dt=at=>{if(!at)return f||"Cliente";const $t=String(at),ut=(X||[]).find(Yt=>String(Yt.id)===$t);if(ut?.nome)return ut.nome;const Wt=(Ge||[]).find(Yt=>String(Yt.id)===$t);return Wt?.nome?Wt.nome:f||"Cliente"},ht=(X||[]).length>1,mt=(X||[])[0]||null;return(X||[]).filter(at=>String(at.id)!==String(mt?.id||"")),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"sm:col-span-1 flex sm:justify-start",children:L.length>1&&wt>0&&s.jsx(Ae,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{B(at=>{const $t=at.filter(nr=>nr.id!==_e.id);if($t.length===0)return[];const ut=dr>0?dr:0,Wt=Math.floor(ut/$t.length*100)/100,Yt=ut-Wt*$t.length;return $t.map((nr,Vr)=>{const Cn=Vr===$t.length-1?Wt+Yt:Wt,Sn=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Cn);return{...nr,value:Sn}})})},children:s.jsx(Vf,{className:"h-4 w-4"})})}),wt===0?s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:dt(mt?.id||_e.clientId)})}):ht?s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(kn,{value:_e.clientId||"",onValueChange:at=>B($t=>$t.map(ut=>ut.id===_e.id?{...ut,clientId:at}:ut)),children:[s.jsx(An,{className:"w-full truncate",children:s.jsx(On,{placeholder:"Cliente"})}),s.jsx(Pn,{children:(X||[]).map(at=>s.jsx(Ht,{value:at.id,children:at.nome},at.id))})]})}):s.jsx("div",{className:"sm:col-span-4",children:s.jsx("div",{className:"h-9 px-3 rounded-md border border-border bg-surface flex items-center text-sm truncate",children:dt(mt?.id||_e.clientId)})}),s.jsx("div",{className:"sm:col-span-4",children:s.jsxs(kn,{value:_e.methodId||"",onValueChange:at=>B($t=>$t.map(ut=>ut.id===_e.id?{...ut,methodId:at}:ut)),children:[s.jsx(An,{className:"w-full truncate",children:s.jsx(On,{placeholder:"Forma de pagamento"})}),s.jsx(Pn,{children:($||[]).map(at=>s.jsx(Ht,{value:at.id,children:at.nome},at.id))})]})}),s.jsx("div",{className:"sm:col-span-3",children:s.jsx(Mt,{placeholder:"0,00",inputMode:"numeric",value:_e.value,onChange:at=>{const $t=(at.target.value||"").replace(/\D/g,""),ut=$t?Number($t)/100:0,Wt=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ut);B(Yt=>Yt.map(nr=>nr.id===_e.id?{...nr,value:Wt}:nr))},onKeyDown:at=>{at.stopPropagation(),!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(at.key)&&(/^[0-9]$/.test(at.key)||at.preventDefault())},onBeforeInput:at=>{const $t=at.data??"";$t&&/\D/.test($t)&&at.preventDefault()}})})]},_e.id)}),s.jsx("div",{children:s.jsx(Ae,{type:"button",variant:"secondary",size:"sm",onClick:()=>{B(_e=>{const dt=Array.isArray(ot)&&ot.length>0?ot:(X||[]).map(nr=>nr.id),ht=new Set(_e.map(nr=>nr.clientId).filter(Boolean)),at=(dt||[]).filter(nr=>!ht.has(nr))[0]||dt[0]||"",$t=[..._e,{id:J,clientId:at,methodId:$[0]?.id||"",value:""}],ut=dr>0?dr:0,Wt=Math.floor(ut/$t.length*100)/100,Yt=ut-Wt*$t.length;return $t.map((nr,Vr)=>{const Cn=Vr===$t.length-1?Wt+Yt:Wt,Sn=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Cn);return{...nr,value:Sn}})}),q(_e=>_e+1)},children:"Adicionar forma"})}),s.jsxs("div",{className:"text-sm text-text-secondary flex justify-between",children:[s.jsx("span",{children:"Soma"}),s.jsxs("span",{children:["R$ ",ir().toFixed(2)]})]}),s.jsxs("div",{className:"text-sm font-semibold flex justify-between",children:[s.jsx("span",{children:"Restante"}),s.jsxs("span",{className:Math.abs(dr-ir())<.005?"text-success":"text-warning",children:["R$ ",(dr-ir()).toFixed(2)]})]})]})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>W(!1),disabled:me,children:"Cancelar"}),s.jsx(Ae,{onClick:Tt,disabled:me,children:me?"Processando...":"Confirmar Pagamento"})]})]})}),s.jsx(rn,{open:yt,onOpenChange:_e=>je(_e),children:s.jsxs(Yr,{className:"max-w-lg",onOpenAutoFocus:_e=>_e.preventDefault(),onKeyDown:_e=>_e.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Identificar Cliente"}),s.jsx(cn,{children:"Selecione um cliente cadastrado para esta venda."})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"w-full",children:[s.jsx(ct,{className:"mb-1 block",children:"Buscar cliente"}),s.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Nome, e-mail, telefone ou cdigo",className:"pl-9",value:Ee,onChange:_e=>Ke(_e.target.value)})]}),s.jsx(Ae,{type:"button",size:"icon",title:"Cadastrar cliente",className:"ml-2 bg-brand text-black hover:bg-brand/90 border border-brand",onClick:()=>{window.location.href="/clientes"},children:s.jsx(ri,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"mt-2 max-h-48 overflow-auto border rounded-md thin-scroll",children:s.jsxs("ul",{children:[(Ge||[]).map(_e=>{const wt=(ot||[]).includes(_e.id);return s.jsxs("li",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-surface-2 ${wt?"bg-surface-2":""}`,onClick:()=>{kt(dt=>{const ht=new Set(dt||[]);ht.has(_e.id)?ht.delete(_e.id):ht.add(_e.id);const mt=Array.from(ht);try{localStorage.setItem(Er.pendingClientIds,JSON.stringify(mt))}catch{}return mt})},children:[s.jsx("div",{children:s.jsxs("div",{className:"font-medium",children:[_e.codigo!=null?String(_e.codigo)+" - ":"",_e.nome]})}),s.jsx(Bs,{size:16,className:wt?"text-success":"text-text-muted opacity-40"})]},_e.id)}),(!Ge||Ge.length===0)&&s.jsx("li",{className:"p-2 text-sm text-text-muted",children:"Nenhum cliente encontrado."})]})})]})}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>je(!1),children:"Fechar"}),s.jsx(Ae,{onClick:async()=>{try{const _e=Array.from(new Set(ot||[]));if(_e.length===0){e({title:"Selecione pelo menos um cliente",variant:"warning"});return}const wt=r?.codigo_empresa;if(n){try{await Ox({comandaId:n,clienteIds:_e,nomesLivres:[],codigoEmpresa:wt})}catch(mt){if(!mt?.message?.includes("duplicate")&&!mt?.message?.includes("violates foreign key"))throw mt;console.log("Alguns clientes j estavam vinculados, continuando...")}const ht=(await Vo({comandaId:n,codigoEmpresa:wt})||[]).map(mt=>mt?.nome).filter(Boolean);h(ht.length?ht.join(", "):""),Ot(!0),je(!1)}else{const dt=(Ge||[]).filter(mt=>_e.includes(mt.id)).map(mt=>mt?.nome).filter(Boolean),ht=dt.length?dt.join(", "):"";h(ht),Ot(!0);try{localStorage.setItem(Er.customerName,ht||""),localStorage.setItem(Er.clientChosen,"true")}catch{}je(!1)}if(x){const dt=x;b(null),await qa(dt,{skipClientCheck:!0})}}catch(_e){e({title:"Falha ao iniciar venda",description:_e?.message||"Tente novamente",variant:"destructive"})}},children:"Confirmar"})]})]})}),s.jsx(rn,{open:!!he,onOpenChange:_e=>!_e&&qe(null),children:s.jsx(Yr,{className:"sm:max-w-[425px]",children:he&&s.jsxs(s.Fragment,{children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-lg",children:he.name}),s.jsx(cn,{className:"text-sm",children:"Detalhes do item"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Preo Unitrio"}),s.jsxs("p",{className:"text-lg font-bold",children:["R$ ",Number(he.price).toFixed(2)]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Quantidade"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ae,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:async _e=>{_e.stopPropagation();const wt=r?.codigo_empresa;if(!wt){e({title:"Empresa no definida",variant:"destructive"});return}const dt=Math.max(0,he.quantity-1);try{dt<=0?(await Og({itemId:he.id,codigoEmpresa:wt}),qe(null)):(await od({itemId:he.id,quantidade:dt,codigoEmpresa:wt}),qe({...he,quantity:dt}));const ht=await Ai({comandaId:n,codigoEmpresa:wt});c((ht||[]).map(mt=>({id:mt.id,productId:mt.produto_id,name:mt.descricao||"Item",price:Number(mt.preco_unitario||0),quantity:Number(mt.quantidade||1)})))}catch(ht){e({title:"Erro ao atualizar quantidade",description:ht?.message||"Tente novamente",variant:"destructive"})}},children:"-"}),s.jsx("span",{className:"w-8 text-center font-semibold",children:he.quantity}),s.jsx(Ae,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:async _e=>{_e.stopPropagation();const wt=r?.codigo_empresa;if(!wt){e({title:"Empresa no definida",variant:"destructive"});return}const dt=he.quantity+1;try{await od({itemId:he.id,quantidade:dt,codigoEmpresa:wt}),qe({...he,quantity:dt});const ht=await Ai({comandaId:n,codigoEmpresa:wt});c((ht||[]).map(mt=>({id:mt.id,productId:mt.produto_id,name:mt.descricao||"Item",price:Number(mt.preco_unitario||0),quantity:Number(mt.quantidade||1)})))}catch(ht){e({title:"Erro ao atualizar quantidade",description:ht?.message||"Tente novamente",variant:"destructive"})}},children:"+"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Subtotal"}),s.jsxs("p",{className:"text-lg font-bold",children:["R$ ",(he.quantity*he.price).toFixed(2)]})]})]}),s.jsx(Dn,{children:s.jsx(Ae,{variant:"destructive",onClick:async()=>{try{const _e=r?.codigo_empresa;if(!_e){e({title:"Empresa no definida",variant:"destructive"});return}await Og({itemId:he.id,codigoEmpresa:_e});const wt=await Ai({comandaId:n,codigoEmpresa:_e});c((wt||[]).map(dt=>({id:dt.id,productId:dt.produto_id,name:dt.descricao||"Item",price:Number(dt.preco_unitario||0),quantity:Number(dt.quantidade||1)}))),qe(null),e({title:"Item removido",variant:"success"})}catch(_e){e({title:"Falha ao remover item",description:_e?.message||"Tente novamente",variant:"destructive"})}},children:"Remover Item"})})]})})}),It&&s.jsx("div",{className:"fixed left-3 right-3 z-[9999] md:hidden",role:"alert","aria-live":"assertive",style:{bottom:"calc(12px + env(safe-area-inset-bottom, 0px))"},children:s.jsxs("div",{className:"pointer-events-none flex items-start gap-2 rounded-md border border-amber-500 bg-amber-400 text-black px-3 py-2 shadow-lg",children:[s.jsx(Dc,{className:"h-4 w-4 mt-0.5","aria-hidden":"true"}),s.jsx("div",{className:"text-sm font-semibold leading-snug drop-shadow-[0_1px_0_rgba(255,255,255,0.25)]",children:Ze||"Ateno"})]})})]})}function rre(e){try{const r=new DOMParser().parseFromString(e,"text/xml"),n=r.querySelector("parsererror");if(n)throw new Error("XML invlido: "+n.textContent);const a=BXe(r),i=zXe(r),o=qXe(r),l=UXe(r),c=o.reduce((u,d)=>u+(d.valorTotal||0),0);return{produtos:o,fornecedor:i,pagamentos:l,nfe:{...a,totalNota:c},success:!0}}catch(t){return console.error("[XMLParser] Erro ao fazer parse do XML:",t),{produtos:[],fornecedor:null,nfe:null,success:!1,error:t.message}}}function BXe(e){const t=e.querySelector("ide");if(!t)return null;let r="";const n=e.querySelector("chNFe");if(n&&(r=n.textContent.trim()),!r){const a=e.querySelector("infNFe");if(a){const i=a.getAttribute("Id");i&&(r=i.replace("NFe",""))}}return{numero:Nn(t,"nNF"),serie:Nn(t,"serie"),dataEmissao:Nn(t,"dhEmi"),chaveAcesso:r,tipo:Nn(t,"tpNF")==="0"?"Entrada":"Sada",naturezaOperacao:Nn(t,"natOp")}}function zXe(e){const t=e.querySelector("emit");return t?{cnpj:Nn(t,"CNPJ"),razaoSocial:Nn(t,"xNome"),nomeFantasia:Nn(t,"xFant"),endereco:{logradouro:Nn(t,"xLgr"),numero:Nn(t,"nro"),bairro:Nn(t,"xBairro"),cidade:Nn(t,"xMun"),uf:Nn(t,"UF"),cep:Nn(t,"CEP")}}:null}function qXe(e){const t=e.querySelectorAll("det"),r=new Map;return t.forEach((n,a)=>{const i=n.querySelector("prod"),o=n.querySelector("imposto");if(!i)return;const l=Nn(i,"cProd"),c=Nn(i,"cEAN"),u=Nn(i,"xProd"),d=parseFloat(Nn(i,"qCom")||"0"),f=c&&c!=="SEM GTIN"?`ean:${c}`:l?`cod:${l}`:`nome:${u.toLowerCase().trim()}`;if(r.has(f)){const h=r.get(f);h.quantidade+=d,h.valorTotal+=parseFloat(Nn(i,"vProd")||"0")}else{const h={codigo:l,ean:c,nome:u,ncm:Nn(i,"NCM"),cest:Nn(i,"CEST"),cfop:Nn(i,"CFOP"),unidade:Nn(i,"uCom"),quantidade:d,valorUnitario:parseFloat(Nn(i,"vUnCom")||"0"),valorTotal:parseFloat(Nn(i,"vProd")||"0"),desconto:parseFloat(Nn(i,"vDesc")||"0"),impostos:VXe(o),descricao:u,origem:a+1};r.set(f,h)}}),Array.from(r.values())}function UXe(e){const t=e.querySelectorAll("pag"),r=[];return t.forEach(n=>{const a=Nn(n,"tPag"),i=parseFloat(Nn(n,"vPag")||"0");a&&i>0&&r.push({codigoSefaz:a,valor:i,descricao:WXe(a)})}),r}function WXe(e){return{"01":"Dinheiro","02":"Cheque","03":"Carto de Crdito","04":"Carto de Dbito","05":"Carto da Loja",10:"Vale Alimentao",11:"Vale Refeio",12:"Vale Presente",13:"Vale Combustvel",14:"Duplicata Mercantil",15:"Boleto Bancrio",16:"Depsito Bancrio",17:"PIX Dinmico",18:"Transferncia Bancria",19:"Programa de Fidelidade",20:"PIX Esttico",21:"Crdito em Loja",22:"Pagamento Eletrnico",90:"Sem Pagamento",99:"Outros"}[e]||"Outros"}function VXe(e){if(!e)return{};const t={},r=e.querySelector("ICMS");if(r){const o=r.children[0];o&&(t.icms={cst:Nn(o,"CST"),csosn:Nn(o,"CSOSN"),aliquota:parseFloat(Nn(o,"pICMS")||"0"),valor:parseFloat(Nn(o,"vICMS")||"0")})}const n=e.querySelector("PIS");if(n){const o=n.children[0];o&&(t.pis={cst:Nn(o,"CST"),aliquota:parseFloat(Nn(o,"pPIS")||"0"),valor:parseFloat(Nn(o,"vPIS")||"0")})}const a=e.querySelector("COFINS");if(a){const o=a.children[0];o&&(t.cofins={cst:Nn(o,"CST"),aliquota:parseFloat(Nn(o,"pCOFINS")||"0"),valor:parseFloat(Nn(o,"vCOFINS")||"0")})}const i=e.querySelector("IPI");if(i){const o=i.querySelector("IPITrib");o&&(t.ipi={cst:Nn(o,"CST"),aliquota:parseFloat(Nn(o,"pIPI")||"0"),valor:parseFloat(Nn(o,"vIPI")||"0")})}return t}function Nn(e,t){if(!e)return"";const r=e.querySelector(t);return r?r.textContent.trim():""}function nre(e,t){if(e.ean&&e.ean!=="SEM GTIN"){const a=t.find(i=>i.barcode===e.ean);if(a)return a}if(e.codigo){const a=t.find(i=>i.code===e.codigo);if(a)return a}const r=e.nome?.toLowerCase().trim()||"";if(r){const a=t.find(i=>(i.name?.toLowerCase().trim()||"")===r);if(a)return a}return t.find(a=>HXe(a.name?.toLowerCase()||"",e.nome?.toLowerCase()||"")>.85)||null}function HXe(e,t){const r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length===0)return 1;const a=GXe(r,n);return(r.length-a)/r.length}function GXe(e,t){const r=[];for(let n=0;n<=t.length;n++)r[n]=[n];for(let n=0;n<=e.length;n++)r[0][n]=n;for(let n=1;n<=t.length;n++)for(let a=1;a<=e.length;a++)t.charAt(n-1)===e.charAt(a-1)?r[n][a]=r[n-1][a-1]:r[n][a]=Math.min(r[n-1][a-1]+1,r[n][a-1]+1,r[n-1][a]+1);return r[t.length][e.length]}function KXe(e,t){return{code:e.codigo||"",name:e.nome||"",barcode:e.ean&&e.ean!=="SEM GTIN"?e.ean:"",ncm:e.ncm||"",cest:e.cest||"",unit:e.unidade||"UN",costPrice:e.valorUnitario||0,salePrice:e.valorUnitario*1.3||0,stock:0,minStock:0,status:"active",active:!0,type:"Venda",category:"Importados",cfopInterno:e.cfop||"",cstIcmsInterno:e.impostos?.icms?.cst||"",csosnInterno:e.impostos?.icms?.csosn||"",aliqIcmsInterno:e.impostos?.icms?.aliquota||0,cstPisEntrada:e.impostos?.pis?.cst||"",aliqPisPercent:e.impostos?.pis?.aliquota||0,aliqCofinsPercent:e.impostos?.cofins?.aliquota||0,cstIpi:e.impostos?.ipi?.cst||"",aliqIpiPercent:e.impostos?.ipi?.aliquota||0,codigo_empresa:t,importedViaXML:!0,xmlChave:e?.xmlChave||null,xmlNumero:e?.xmlNumero||null,xmlSerie:e?.xmlSerie||null,xmlEmissao:e?.xmlEmissao||null}}function YXe({open:e,onOpenChange:t,products:r,codigoEmpresa:n,onSuccess:a}){const{toast:i}=ii(),[o,l]=y.useState("upload"),[c,u]=y.useState(null),[d,f]=y.useState(null),[h,m]=y.useState([]),[g,p]=y.useState(!1),[v,x]=y.useState({created:0,updated:0,errors:0,details:[]}),b=async A=>{const P=A.target.files?.[0];if(P){if(!P.name.endsWith(".xml")){i({title:"Arquivo invlido",description:"Selecione um arquivo XML vlido.",variant:"destructive"});return}u(P);try{const C=await P.text(),k=rre(C);if(!k.success){i({title:"Erro ao ler XML",description:k.error||"XML invlido",variant:"destructive"});return}if(!k.produtos||k.produtos.length===0){i({title:"Nenhum produto encontrado",description:"O XML no contm produtos.",variant:"warning"});return}f(k);let R=r;try{R=await mh({search:"",codigoEmpresa:n})||r}catch(I){console.warn("[XMLImport] No foi possvel carregar lista completa, usando cache:",I)}const E=k.produtos.map(I=>{const T=nre(I,R);return{xml:I,existing:T,isNew:!T,willCreate:!T,willUpdate:!!T}});m(E),l("preview")}catch(C){console.error("[XMLImport] Erro ao processar arquivo:",C),i({title:"Erro ao processar XML",description:C.message,variant:"destructive"})}}},w=async()=>{l("processing"),p(!0);const A={created:0,updated:0,errors:0,skipped:0,details:[]};for(const P of h)try{if(P.isNew){const C=KXe(P.xml,n);C.salePrice!=null&&C.price==null&&(C.price=C.salePrice);const k=Number(P.xml.quantidade)||0;C.stock=k,C.initialStock=k,C.currentStock=k,C.importedViaXML=!0,C.category="Importados",d?.nfe&&(C.xmlChave=d.nfe.chaveAcesso||null,C.xmlNumero=d.nfe.numero||null,C.xmlSerie=d.nfe.serie||null,C.xmlEmissao=d.nfe.dataEmissao||null);try{await ere(C,{codigoEmpresa:n}),A.created++,A.details.push({produto:P.xml.nome,acao:"Criado",status:"success"})}catch(R){if(R.message?.includes("duplicate")||R.message?.includes("unique constraint")){console.warn("[XMLImport] Produto j existe, tentando atualizar estoque:",P.xml.nome);const I=(await mh({search:P.xml.nome,codigoEmpresa:n})).find(T=>T.name?.toLowerCase()===P.xml.nome?.toLowerCase()||T.barcode===P.xml.ean||T.code===P.xml.codigo);I&&Number(P.xml.quantidade)>0?(await hz({productId:I.id,delta:Number(P.xml.quantidade)||0,codigoEmpresa:n}),A.updated++,A.details.push({produto:P.xml.nome,acao:"J existe - Estoque atualizado",status:"success"})):(A.skipped++,A.details.push({produto:P.xml.nome,acao:"J existe - Ignorado",status:"warning"}))}else throw R}}else{const C=Number(P.xml.quantidade)||0;C>0&&await hz({productId:P.existing.id,delta:C,codigoEmpresa:n});const k=Number(P.xml.valorUnitario)||0,R=Number(P.existing.price??P.existing.salePrice??0);if(k>0&&R===0)try{await tre(P.existing.id,{salePrice:k,price:k})}catch(E){console.warn("[XMLImport] Falha ao ajustar preo do produto existente",E)}A.updated++,A.details.push({produto:P.xml.nome,acao:C>0?"Estoque atualizado":"Verificado",status:"success"})}}catch(C){console.error("[XMLImport] Erro ao processar produto:",P.xml.nome,C),A.errors++,A.details.push({produto:P.xml.nome,acao:"Erro",status:"error",error:C.message})}x(A),p(!1),l("done"),A.errors===0?i({title:"Importao concluda!",description:`${A.created} produto(s) criado(s), ${A.updated} atualizado(s).`,variant:"success"}):i({title:"Importao concluda com erros",description:`${A.created} criado(s), ${A.updated} atualizado(s), ${A.errors} erro(s).`,variant:"warning"}),a&&a()},_=()=>{l("upload"),u(null),f(null),m([]),x({created:0,updated:0,errors:0,details:[]}),t(!1)},j=()=>{l("upload"),u(null),f(null),m([])};return s.jsx(rn,{open:e,onOpenChange:_,children:s.jsxs(Yr,{className:"max-w-4xl max-h-[85vh] flex flex-col overflow-hidden",children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Importar XML de Compra (NF-e)"}),s.jsxs(cn,{children:[o==="upload"&&"Selecione o arquivo XML da nota fiscal de entrada",o==="preview"&&"Revise os produtos que sero importados",o==="processing"&&"Processando produtos...",o==="done"&&"Importao finalizada"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o==="upload"&&s.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("label",{htmlFor:"xml-upload",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer bg-surface hover:bg-surface-2 transition-colors",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx($W,{className:"w-12 h-12 mb-4 text-text-muted"}),s.jsx("p",{className:"mb-2 text-sm text-text-primary font-semibold",children:"Clique para selecionar ou arraste o arquivo"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Arquivo XML de NF-e (Nota Fiscal Eletrnica)"})]}),s.jsx("input",{id:"xml-upload",type:"file",accept:".xml",className:"hidden",onChange:b})]}),c&&s.jsxs("div",{className:"mt-4 p-3 bg-surface-2 rounded-lg flex items-center gap-2",children:[s.jsx(Gl,{className:"w-5 h-5 text-success"}),s.jsx("span",{className:"text-sm text-text-primary",children:c.name})]})]})}),o==="preview"&&s.jsxs("div",{className:"space-y-4",children:[d?.nfe&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Informaes da NF-e"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Nmero:"})," ",s.jsx("span",{className:"font-mono",children:d.nfe.numero})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Srie:"})," ",s.jsx("span",{className:"font-mono",children:d.nfe.serie})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Tipo:"})," ",s.jsx("span",{children:d.nfe.tipo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Fornecedor:"})," ",s.jsx("span",{children:d.fornecedor?.razaoSocial})]})]}),d.nfe.chaveAcesso&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[s.jsx("span",{className:"text-text-muted text-xs",children:"Chave de Acesso:"}),s.jsx("p",{className:"font-mono text-xs break-all",children:d.nfe.chaveAcesso})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border flex flex-col max-h-[500px]",children:[s.jsxs("h3",{className:"font-semibold mb-3",children:["Produtos Encontrados (",h.length,")"]}),s.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:h.map((A,P)=>s.jsxs("div",{className:Et("p-3 rounded-lg border flex items-start gap-3",A.isNew?"bg-success/10 border-success/30":"bg-info/10 border-info/30"),children:[A.isNew?s.jsx(ri,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}):s.jsx(pce,{className:"w-5 h-5 text-info flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-sm truncate",children:A.xml.nome}),s.jsxs("p",{className:"text-xs text-text-muted",children:[A.xml.codigo&&`Cdigo: ${A.xml.codigo}  `,A.xml.ean&&A.xml.ean!=="SEM GTIN"&&`EAN: ${A.xml.ean}  `,"Qtd: ",A.xml.quantidade," ",A.xml.unidade]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",A.xml.valorUnitario.toFixed(2)]}),s.jsx("p",{className:"text-xs text-text-muted",children:A.isNew?"Novo produto":"Atualizar estoque"})]})]})})]},P))})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),s.jsxs("span",{children:[h.filter(A=>A.isNew).length," produto(s) novo(s)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-info"}),s.jsxs("span",{children:[h.filter(A=>!A.isNew).length," produto(s) existente(s)"]})]})]})]}),o==="processing"&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(lm,{className:"w-12 h-12 animate-spin text-warning mb-4"}),s.jsx("p",{className:"text-lg font-semibold",children:"Processando produtos..."}),s.jsx("p",{className:"text-sm text-text-muted",children:"Aguarde enquanto importamos os produtos"})]}),o==="done"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-6 border border-border text-center",children:[s.jsx(Bs,{className:"w-16 h-16 text-success mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Importao Concluda!"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:v.created}),s.jsx("p",{className:"text-sm text-text-muted",children:"Criados"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-info",children:v.updated}),s.jsx("p",{className:"text-sm text-text-muted",children:"Atualizados"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-danger",children:v.errors}),s.jsx("p",{className:"text-sm text-text-muted",children:"Erros"})]})]})]}),v.details.length>0&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Detalhes"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:v.details.map((A,P)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[A.status==="success"?s.jsx(Bs,{className:"w-4 h-4 text-success flex-shrink-0"}):s.jsx(Dc,{className:"w-4 h-4 text-danger flex-shrink-0"}),s.jsx("span",{className:"flex-1 truncate",children:A.produto}),s.jsx("span",{className:Et("text-xs px-2 py-1 rounded",A.status==="success"?"bg-success/20 text-success":"bg-danger/20 text-danger"),children:A.acao})]},P))})]})]})]}),s.jsxs(Dn,{children:[o==="upload"&&s.jsx(Ae,{variant:"outline",onClick:_,children:"Cancelar"}),o==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(Ae,{variant:"outline",onClick:j,children:"Voltar"}),s.jsxs(Ae,{onClick:w,children:["Confirmar Importao (",h.length," produtos)"]})]}),o==="done"&&s.jsx(Ae,{onClick:_,children:"Fechar"})]})]})})}const XXe=[],JXe=[],QXe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},FO={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function ZXe(e){const t=["Cdigo","Produto","Categoria","Tipo","Unidade","Preo Custo","Preo Venda","% Lucro","Estoque","Estoque Mn.","Validade","Status","Ativo","EAN-13","EAN-13 Caixa","Referncia","Marca","Grupo","NCM","Descrio NCM","CEST","Usar CSOSN","CFOP Interno","CST ICMS Interno","CSOSN Interno","Aliq ICMS Interno (%)","CFOP Externo","CST ICMS Externo","CSOSN Externo","Aliq ICMS Externo (%)","CST PIS Entrada","CST PIS Sada","Aliq PIS (%)","Aliq COFINS (%)","CST IPI","Aliq IPI (%)","FCP (%)","MVA (%)","Base Reduzida (%)"],r=";",n=p=>{const v=Number(p??0);return Number.isFinite(v)?v.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"0,00"},a=p=>`R$ ${n(p)}`,i=p=>{const v=Number(p??0);return Number.isFinite(v)?v.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},o=p=>{if(!p)return"";try{if(typeof p=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(p)){const[x,b,w]=p.split("-");return`${w}/${b}/${x}`}const v=new Date(p);if(!isNaN(v)){const x=String(v.getDate()).padStart(2,"0"),b=String(v.getMonth()+1).padStart(2,"0"),w=v.getFullYear();return`${x}/${b}/${w}`}}catch{}return String(p)},l=p=>p==="active"?"Ativo":p==="low_stock"?"Estoque Baixo":p==="inactive"?"Inativo":"",c=p=>p?"Sim":"No",u=p=>p??"",d=p=>{const v=p==null?"":String(p);return/[";\n]/.test(v)?`"${v.replace(/"/g,'""')}"`:v},f=[];f.push("\uFEFF"+t.join(r));for(const p of e){const v=[u(p.code),u(p.name),u(p.category),u(p.type),u(p.unit),a(p.costPrice),a(p.price??p.salePrice),i(p.marginPercent),Number(p.stock??0),Number(p.minStock??0),o(p.validade),l(p.status),c(p.active!==!1),u(p.barcode),u(p.barcodeBox),u(p.reference),u(p.brand),u(p.group),u(p.ncm),u(p.ncmDescription),u(p.cest),p.useCsosn?"Sim":"",u(p.cfopInterno),u(p.cstIcmsInterno),u(p.csosnInterno),i(p.aliqIcmsInterno),u(p.cfopExterno),u(p.cstIcmsExterno),u(p.csosnExterno),i(p.aliqIcmsExterno),u(p.cstPisEntrada),u(p.cstPisSaida),i(p.aliqPisPercent),i(p.aliqCofinsPercent),u(p.cstIpi),i(p.aliqIpiPercent),i(p.fcpPercent),i(p.mvaPercent),i(p.baseReduzidaPercent)].map(d).join(r);f.push(v)}const h=new Blob([f.join(`
`)],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(h),g=document.createElement("a");g.href=m,g.download="produtos.csv",document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(m)}function Ac(e,{action:t}={}){const r=String(e?.message||e||"").toLowerCase();if(r.includes("categoria possui produtos ativos vinculados"))return{title:"No  possvel remover",description:"Existem produtos ativos vinculados a esta categoria. Inative ou recategoriz-os antes."};if(r.includes("categoria no encontrada"))return{title:"Categoria no encontrada",description:"No foi possvel localizar a categoria para desativao."};if(r.includes("duplicate key")&&r.includes("ux_produtos_empresa_codigo_produto"))return{title:"Cdigo j cadastrado",description:"J existe um produto com este cdigo na sua empresa. Informe outro cdigo."};if(r.includes("duplicate key")&&r.includes("unique constraint"))return{title:"Registro j existe",description:"J existe um registro com estes dados."};if(r.includes("permission denied")||r.includes("violates row-level security")||r.includes("rls"))return{title:"Sem permisso",description:"Voc no tem permisso para executar esta ao."};const n=r.match(/null value in column "([^"]+)" violates not-null constraint/);return n?{title:"Campo obrigatrio",description:`Preencha o campo "${n[1].replace(/_/g," ")}".`}:r.includes("invalid input syntax")||r.includes("invalid input value")?{title:"Valor invlido",description:"Revise os valores informados (formato invlido)."}:r.includes("violates check constraint")?{title:"Valor invlido",description:"Os dados informados no atendem s regras do sistema."}:r.includes("violates foreign key constraint")?r.includes("update or delete on table")?{title:"No  possvel excluir",description:"Existem registros vinculados que impedem a excluso."}:{title:"Relao invlida",description:"O registro relacionado no foi encontrado ou  invlido."}:r.includes("failed to fetch")||r.includes("networkerror")||r.includes("network error")?{title:"Falha de conexo",description:"Verifique sua internet e tente novamente."}:r.includes("timeout")?{title:"Tempo esgotado",description:"A operao demorou demais. Tente novamente."}:r.includes("rate limit")||r.includes("too many requests")||r.includes("status code 429")?{title:"Muitas solicitaes",description:"Aguarde alguns segundos e tente novamente."}:t==="save"?{title:"Falha ao salvar",description:"No foi possvel salvar o produto. Tente novamente."}:t==="delete"?{title:"Falha ao inativar",description:"No foi possvel inativar o produto."}:t==="fetch"?{title:"Erro ao carregar",description:"No foi possvel atualizar a lista de produtos."}:t==="export"?{title:"Falha ao exportar",description:"No foi possvel gerar o arquivo."}:{title:"Erro",description:e?.message||"Ocorreu um erro."}}const _A=({icon:e,title:t,value:r,subtitle:n,color:a,onClick:i,isActive:o})=>{const l=e;return s.jsxs(ur.div,{variants:FO,className:Et("bg-surface rounded-lg border-2 p-4 flex flex-col justify-between gap-2 cursor-pointer transition-all duration-300",o?`${a}/30 border-${a}`:"border-border hover:border-border-hover"),onClick:i,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-text-secondary text-sm font-semibold",children:t}),s.jsx(l,{className:`w-5 h-5 ${a}`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r}),s.jsx("p",{className:"text-xs text-text-muted",children:n})]})]})};function eJe({open:e,onOpenChange:t,product:r,onSave:n,categories:a,onCreateCategory:i,suggestedCode:o}){const{toast:l}=ii();io();const[c,u]=y.useState("dados"),[d,f]=y.useState(r?.code||""),[h,m]=y.useState(r?.name||""),[g,p]=y.useState(r?.category||""),[v,x]=y.useState(r?.type||"Venda"),[b,w]=y.useState(r?.unit||"UN"),[_,j]=y.useState(r?.active??!0),[A,P]=y.useState(r?.barcode||""),[C,k]=y.useState(r?.barcodeBox||""),[R,E]=y.useState(r?.reference||""),[I,T]=y.useState(r?.brand||""),[M,z]=y.useState(r?.group||""),[V,W]=y.useState(!!r?.allowSale),[$,G]=y.useState(!!r?.payCommission),[me,de]=y.useState(!!r?.variablePrice),[L,B]=y.useState(!!r?.composition),[J,q]=y.useState(!!r?.service),[X,Z]=y.useState(!!r?.hasGrid),[pe,te]=y.useState(!!r?.usePriceTable),[ve,Ce]=y.useState(!!r?.fuel),[he,qe]=y.useState(!!r?.useImei),[ye,ce]=y.useState(!!r?.stockByGrid),[Ft,qt]=y.useState(!!r?.showInApp),[It,et]=y.useState(r?.costPrice!=null?Number(r.costPrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.cost!=null?Number(r.cost).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[Ze,Pt]=y.useState(r?.salePrice!=null?Number(r.salePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.price!=null?Number(r.price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),[ue,rt]=y.useState(r?.marginPercent!=null?String(Number(r.marginPercent).toFixed(2)).replace(".",","):""),[Ee,Ke]=y.useState(r?.stock?String(r.stock):""),[Ge,bt]=y.useState(r?.minStock?String(r.minStock):""),[ot,kt]=y.useState(r?.status||"active"),[yt,je]=y.useState(r?.validade||null),[We,Ot]=y.useState(!1),[Ve,nt]=y.useState(!1),[Rt,Lt]=y.useState(""),[Tt,ir]=y.useState(!0),[fr,ia]=y.useState(!!(r?.csosnInterno||r?.csosnExterno)),[fn,Or]=y.useState(r?.cfopInterno||""),[yr,Er]=y.useState(r?.cstIcmsInterno||""),[Dr,wa]=y.useState(r?.csosnInterno||""),[or,dr]=y.useState(r?.aliqIcmsInterno!=null?String(r.aliqIcmsInterno).replace(".",","):""),[Vn,qa]=y.useState(r?.cfopExterno||""),[la,_e]=y.useState(r?.cstIcmsExterno||""),[wt,dt]=y.useState(r?.csosnExterno||""),[ht,mt]=y.useState(r?.aliqIcmsExterno!=null?String(r.aliqIcmsExterno).replace(".",","):""),[at,$t]=y.useState(r?.cstPisEntrada||""),[ut,Wt]=y.useState(r?.cstPisSaida||""),[Yt,nr]=y.useState(r?.aliqPisPercent!=null?String(r.aliqPisPercent).replace(".",","):""),[Vr,Cn]=y.useState(r?.aliqCofinsPercent!=null?String(r.aliqCofinsPercent).replace(".",","):""),[Sn,Fi]=y.useState(r?.cstIpi||""),[ja,da]=y.useState(r?.aliqIpiPercent!=null?String(r.aliqIpiPercent).replace(".",","):""),[oi,Tn]=y.useState(r?.fcpPercent!=null?String(r.fcpPercent).replace(".",","):""),[Cs,so]=y.useState(r?.mvaPercent!=null?String(r.mvaPercent).replace(".",","):""),[hn,Io]=y.useState(r?.baseReduzidaPercent!=null?String(r.baseReduzidaPercent).replace(".",","):""),[Bi,Ii]=y.useState(r?.ncm||""),[mi,ee]=y.useState(r?.ncmDescription||""),[Ie,tt]=y.useState(r?.cest||""),Qt=ae=>{const Re=String(ae||"").replace(/\D/g,"");return(Re?Number(Re)/100:0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},it=ae=>{if(!ae)return 0;const Re=String(ae).replace(/\./g,"").replace(",","."),Le=Number(Re);return Number.isFinite(Le)?Le:0},lt=ae=>{const Re=String(ae||"").replace(/[^\d,\.]/g,"").replace(/\./g,"").replace(",","."),Le=Number(Re);return(Number.isFinite(Le)?Le:0).toFixed(2).replace(".",",")},tr=ae=>{if(ae==null||ae==="")return 0;const Re=String(ae).replace(/\./g,"").replace(",","."),Le=Number(Re);return Number.isFinite(Le)?Le:0},mr=ae=>String(ae||"").replace(/\D/g,"").slice(0,13),er=ae=>String(ae||"").replace(/\D/g,"").slice(0,4),Zt=ae=>String(ae||"").replace(/\D/g,"").slice(0,8),kr=ae=>String(ae||"").replace(/\D/g,"").slice(0,7);y.useEffect(()=>{f(r?.code||""),m(r?.name||""),p(r?.category||""),x(r?.type||"Venda"),w(r?.unit||"UN"),j(r?.active??!0),P(r?.barcode||""),k(r?.barcodeBox||""),E(r?.reference||""),T(r?.brand||""),z(r?.group||""),W(!!r?.allowSale),G(!!r?.payCommission),de(!!r?.variablePrice),B(!!r?.composition),q(!!r?.service),Z(!!r?.hasGrid),te(!!r?.usePriceTable),Ce(!!r?.fuel),qe(!!r?.useImei),ce(!!r?.stockByGrid),qt(!!r?.showInApp),et(r?.costPrice!=null?Number(r.costPrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.cost!=null?Number(r.cost).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),Pt(r?.salePrice!=null?Number(r.salePrice).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):r?.price!=null?Number(r.price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""),rt(r?.marginPercent!=null?String(Number(r.marginPercent).toFixed(2)).replace(".",","):""),Ke(r?.stock?String(r.stock):""),bt(r?.minStock?String(r.minStock):""),kt(r?.status||"active"),je(r?.validade||null),ia(!!(r?.csosnInterno||r?.csosnExterno)),Or(r?.cfopInterno||""),Er(r?.cstIcmsInterno||""),wa(r?.csosnInterno||""),dr(r?.aliqIcmsInterno!=null?String(r.aliqIcmsInterno).replace(".",","):""),qa(r?.cfopExterno||""),_e(r?.cstIcmsExterno||""),dt(r?.csosnExterno||""),mt(r?.aliqIcmsExterno!=null?String(r.aliqIcmsExterno).replace(".",","):""),$t(r?.cstPisEntrada||""),Wt(r?.cstPisSaida||""),nr(r?.aliqPisPercent!=null?String(r.aliqPisPercent).replace(".",","):""),Cn(r?.aliqCofinsPercent!=null?String(r.aliqCofinsPercent).replace(".",","):""),Fi(r?.cstIpi||""),da(r?.aliqIpiPercent!=null?String(r.aliqIpiPercent).replace(".",","):""),Tn(r?.fcpPercent!=null?String(r.fcpPercent).replace(".",","):""),so(r?.mvaPercent!=null?String(r.mvaPercent).replace(".",","):""),Io(r?.baseReduzidaPercent!=null?String(r.baseReduzidaPercent).replace(".",","):""),Ii(r?.ncm||""),ee(r?.ncmDescription||""),tt(r?.cest||""),ir(!0),!r&&o&&!d&&f(o)},[r,e]),y.useEffect(()=>{const ae=it(It),Re=it(Ze);if(Re>0){const Le=(Re-ae)/Re*100;rt(Le.toFixed(2).replace(".",","))}else rt("")},[It,Ze]);const ie=async ae=>{if(ae.preventDefault(),We)return;const Re=[];if(h?.trim()||Re.push("Descrio"),b?.trim()||Re.push("Unidade"),v||Re.push("Tipo de Produto"),it(Ze)<=0&&Re.push("Preo de Venda"),Re.length){l({title:"Preencha os campos obrigatrios",description:Re.join(", "),variant:"destructive"});return}const Le={id:r?.id,code:d?.trim()||"",name:h,category:g,type:v,stock:Number(Ee||0),minStock:Number(Ge||0),status:ot,validade:yt,unit:b,active:_,barcode:mr(A),barcodeBox:mr(C),reference:R?.trim()||null,brand:I?.trim()||null,group:M?.trim()||null,cost:it(It),price:it(Ze),buyPrice:null,costsPercent:null,costPrice:it(It),salePrice:it(Ze),marginPercent:tr(ue),allowSale:V,payCommission:$,variablePrice:me,composition:L,service:J,hasGrid:X,usePriceTable:pe,fuel:ve,useImei:he,stockByGrid:ye,showInApp:Ft,cfopInterno:er(fn)||null,cstIcmsInterno:fr?null:yr||null,csosnInterno:fr&&Dr||null,aliqIcmsInterno:tr(or),cfopExterno:er(Vn)||null,cstIcmsExterno:fr?null:la||null,csosnExterno:fr&&wt||null,aliqIcmsExterno:tr(ht),cstPisEntrada:at||null,cstPisSaida:ut||null,aliqPisPercent:tr(Yt),aliqCofinsPercent:tr(Vr),cstIpi:Sn||null,aliqIpiPercent:tr(ja),fcpPercent:tr(oi),mvaPercent:tr(Cs),baseReduzidaPercent:tr(hn),ncm:Zt(Bi)||null,ncmDescription:mi||null,cest:kr(Ie)||null};try{Ot(!0),console.log("[Produtos] Salvando produto",Le);const _t=2e4,H=new Promise((U,le)=>setTimeout(()=>le(new Error("Timeout ao salvar produto (20s)")),_t));await Promise.race([n(Le),H]),l({title:"Produto salvo",description:"O produto foi salvo com sucesso.",variant:"success",duration:4e3,className:"bg-amber-500 text-black shadow-xl"}),t(!1)}catch(_t){console.error("[Produtos] Erro ao salvar",_t);const H=Ac(_t,{action:"save"});l({title:H.title,description:H.description,variant:"destructive",duration:6e3})}finally{Ot(!1)}};return y.useEffect(()=>{e||Ot(!1)},[e]),s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{className:"w-[95vw] sm:max-w-[780px] max-h-[90vh] sm:max-h-[85vh] flex flex-col",onKeyDown:ae=>{ae.key==="F5"&&(ae.preventDefault(),ie(ae)),ae.key==="Escape"&&(ae.preventDefault(),t(!1))},children:[s.jsx(nn,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx(Xr,{className:"text-lg sm:text-xl",children:r?"Detalhes do Produto":"Novo Produto"}),s.jsx(cn,{className:"text-xs sm:text-sm",children:"Preencha as informaes e use as abas para navegar."})]})})}),s.jsx("form",{onSubmit:ie,className:"grid gap-4 py-2 flex-1 overflow-y-auto pr-1 fx-scroll",children:s.jsxs(Ad,{value:c,onValueChange:u,className:"w-full",children:[s.jsx("div",{className:"sm:hidden mb-4",children:s.jsxs(kn,{value:c,onValueChange:u,children:[s.jsx(An,{className:"w-full",children:s.jsx(On,{})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"dados",children:"Dados"}),s.jsx(Ht,{value:"estoque",children:"Estoque"}),s.jsx(Ht,{value:"preco",children:"Preo e Lucro"}),s.jsx(Ht,{value:"impostos",children:"Impostos"}),s.jsx(Ht,{value:"outras",children:"Outras Info"})]})]})}),s.jsxs(ju,{className:"hidden sm:grid grid-cols-5 gap-1",children:[s.jsx(ua,{value:"dados",children:"Dados"}),s.jsx(ua,{value:"estoque",children:"Estoque"}),s.jsx(ua,{value:"preco",children:"Preo e Lucro"}),s.jsx(ua,{value:"impostos",children:"Impostos"}),s.jsx(ua,{value:"outras",children:"Outras Info"})]}),s.jsx("div",{className:"mt-2 text-[10px] sm:text-[11px] text-text-muted",children:"* Campo obrigatrio"}),s.jsxs(to,{value:"dados",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(ct,{htmlFor:"code",className:"text-left sm:text-right text-xs sm:text-sm",children:["Cdigo ",s.jsx("span",{className:"text-text-muted text-[10px] sm:text-xs",children:"(auto)"})]}),s.jsx(Mt,{id:"code",value:d,onChange:ae=>f(ae.target.value.replace(/\D/g,"")),className:"col-span-1 sm:col-span-3 text-sm",placeholder:o||"Ex.: 0001",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(ct,{htmlFor:"name",className:"text-left sm:text-right text-xs sm:text-sm",children:["Descrio ",!h?.trim()&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(Mt,{id:"name",value:h,onChange:ae=>m(ae.target.value),className:"col-span-1 sm:col-span-3 text-sm",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx(ct,{htmlFor:"category",className:"text-left sm:text-right text-xs sm:text-sm",children:"Categoria"}),s.jsxs("div",{className:"col-span-3 flex gap-2 items-center",children:[s.jsxs(kn,{value:g,onValueChange:ae=>Tt&&p(ae),children:[s.jsx(An,{className:"w-full",disabled:!Tt,children:s.jsx(On,{placeholder:"Selecione..."})}),s.jsx(Pn,{children:a.map(ae=>s.jsx(Ht,{value:ae,children:ae},ae))})]}),s.jsxs(Ae,{type:"button",onClick:()=>nt(ae=>!ae),className:"bg-amber-500 hover:bg-amber-400 text-black inline-flex items-center gap-2 whitespace-nowrap px-3",title:Ve?"Fechar":"Adicionar nova categoria",disabled:!Tt,children:[s.jsx("span",{className:"font-bold",children:"+"}),s.jsx("span",{children:"Novo"})]})]})]}),Ve&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx("div",{className:"col-span-1"}),s.jsxs("div",{className:"col-span-3 flex gap-2",children:[s.jsx(Mt,{value:Rt,onChange:ae=>Lt(ae.target.value),placeholder:"Nome da nova categoria"}),s.jsx(Ae,{type:"button",onClick:async()=>{const ae=Rt.trim();if(ae)try{if(a.includes(ae)){l({title:"Categoria j existe",description:"Escolha outro nome.",variant:"destructive"});return}await i?.(ae),p(ae),Lt(""),nt(!1),l({title:"Categoria adicionada",description:"Ela j est selecionada no formulrio.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(Re){console.error("[Produto] add category inline:error",Re);const Le=Ac(Re,{action:"save"});l({title:Le.title,description:Le.description,variant:"destructive"})}},children:"Adicionar"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(ct,{htmlFor:"unit",className:"text-left sm:text-right text-xs sm:text-sm",children:["Unidade ",!b?.trim()&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(Mt,{id:"unit",value:b,onChange:ae=>w(ae.target.value.toUpperCase().slice(0,5)),className:"col-span-1 sm:col-span-3 text-sm",placeholder:"UN, KG, LT",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(ct,{className:"text-left sm:text-right text-xs sm:text-sm",children:["Tipo ",!v&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs(kn,{value:v,onValueChange:ae=>Tt&&x(ae),children:[s.jsx(An,{className:"col-span-1 sm:col-span-3 text-sm",disabled:!Tt,children:s.jsx(On,{placeholder:"Selecione o tipo"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"Venda",children:"Produto para Venda"}),s.jsx(Ht,{value:"Uso Interno",children:"Produto de Uso Interno"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx(ct,{className:"text-left sm:text-right text-xs sm:text-sm",children:"Ativo"}),s.jsx("div",{className:"col-span-1 sm:col-span-3",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Sc,{checked:_,onCheckedChange:ae=>j(!!ae),disabled:!Tt}),s.jsx("span",{className:"ml-2 text-xs sm:text-sm",children:"Ativo"})]}):s.jsxs(kn,{value:_?"ativo":"inativo",onValueChange:ae=>j(ae==="ativo"),children:[s.jsx(An,{className:"w-full sm:w-48 text-sm",disabled:!Tt,children:s.jsx(On,{placeholder:"Selecione"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"ativo",children:"Ativo"}),s.jsx(Ht,{value:"inativo",children:"Inativo"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx(ct,{htmlFor:"barcode",className:"text-left sm:text-right text-xs sm:text-sm",children:"EAN-13"}),s.jsx(Mt,{id:"barcode",value:A,onChange:ae=>P(mr(ae.target.value)),className:"col-span-1 sm:col-span-3 text-sm",placeholder:"789...",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 sm:gap-4",children:[s.jsxs(ct,{htmlFor:"validade",className:"text-left sm:text-right text-xs sm:text-sm",children:["Validade ",s.jsx("span",{className:"text-text-muted text-[10px] sm:text-xs",children:"(Opcional)"})]}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:Et("col-span-1 sm:col-span-3 justify-start text-left font-normal text-xs sm:text-sm",!yt&&"text-muted-foreground"),disabled:!Tt,children:[s.jsx(e2,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),yt?Hr(yt,"dd/MM/yyyy"):s.jsx("span",{children:"Selecione a data"})]})}),s.jsx(ku,{className:"p-0 w-[280px] sm:w-[300px]",children:s.jsx("div",{className:"w-[280px] sm:w-[300px] min-h-[300px] sm:min-h-[332px]",children:s.jsx(_u,{mode:"single",selected:yt,onSelect:je,initialFocus:!0,fixedWeeks:!0})})})]})]})]}),s.jsx(to,{value:"estoque",className:"space-y-3 mt-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid grid-cols-2 items-center gap-2",children:[s.jsx(ct,{htmlFor:"stock",className:"text-right",children:"Estoque"}),s.jsx(Mt,{id:"stock",value:Ee,onChange:ae=>Ke(ae.target.value.replace(/[^0-9]/g,"")),disabled:!Tt,className:"col-span-1",inputMode:"numeric"})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(ct,{htmlFor:"minStock",className:"text-right",children:"Estoque Mn."}),s.jsx(Mt,{id:"minStock",value:Ge,onChange:ae=>bt(ae.target.value.replace(/[^0-9]/g,"")),disabled:!Tt,inputMode:"numeric"})]})]})}),s.jsxs(to,{value:"preco",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"costPrice",className:"text-right",children:"Preo de Custo (R$)"}),s.jsx(Mt,{id:"costPrice",inputMode:"numeric",placeholder:"Ex.: 10,00",value:`R$ ${It||"0,00"}`,onChange:ae=>et(Qt(ae.target.value)),disabled:!Tt,className:"col-span-3"})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(ct,{htmlFor:"salePrice",className:"text-right",children:["Preo de Venda (R$) ",(!Ze||it(Ze)<=0)&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(Mt,{id:"salePrice",inputMode:"numeric",placeholder:"Ex.: 15,00",value:`R$ ${Ze||"0,00"}`,onChange:ae=>Pt(Qt(ae.target.value)),disabled:!Tt,className:"col-span-3"})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"marginPercent",className:"text-right",children:"% de Lucro"}),s.jsx(Mt,{id:"marginPercent",inputMode:"decimal",placeholder:"Calculado",value:`${ue||"0,00"} %`,onChange:ae=>rt(lt(ae.target.value)),disabled:!Tt,className:"col-span-3"})]})]}),s.jsxs(to,{value:"impostos",className:"space-y-4 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Sc,{id:"useCsosn",checked:fr,onCheckedChange:ae=>ia(!!ae),disabled:!Tt}),s.jsx(ct,{htmlFor:"useCsosn",className:"cursor-pointer",children:"Usar CSOSN (Simples Nacional)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"ICMS - Operao Interna"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CFOP"}),s.jsx(Mt,{value:fn,onChange:ae=>Or(er(ae.target.value)),className:"col-span-3",placeholder:"5102",disabled:!Tt})]}),!fr&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CST"}),s.jsx(Mt,{value:yr,onChange:ae=>Er(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"00, 20, 40...",disabled:!Tt})]}),fr&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CSOSN"}),s.jsx(Mt,{value:Dr,onChange:ae=>wa(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"101, 102...",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"Alquota ICMS (%)"}),s.jsx(Mt,{value:`${or||""}`,onChange:ae=>dr(lt(ae.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!Tt})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"ICMS - Operao Externa"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CFOP"}),s.jsx(Mt,{value:Vn,onChange:ae=>qa(er(ae.target.value)),className:"col-span-3",placeholder:"6102",disabled:!Tt})]}),!fr&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CST"}),s.jsx(Mt,{value:la,onChange:ae=>_e(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"00, 20, 40...",disabled:!Tt})]}),fr&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CSOSN"}),s.jsx(Mt,{value:wt,onChange:ae=>dt(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"101, 102...",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"Alquota ICMS (%)"}),s.jsx(Mt,{value:`${ht||""}`,onChange:ae=>mt(lt(ae.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!Tt})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"PIS/COFINS"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CST PIS Entrada"}),s.jsx(Mt,{value:at,onChange:ae=>$t(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"50, 70...",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CST PIS Sada"}),s.jsx(Mt,{value:ut,onChange:ae=>Wt(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"01, 04...",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"Alquota PIS (%)"}),s.jsx(Mt,{value:`${Yt||""}`,onChange:ae=>nr(lt(ae.target.value)),className:"col-span-3",placeholder:"0,65",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"Alquota COFINS (%)"}),s.jsx(Mt,{value:`${Vr||""}`,onChange:ae=>Cn(lt(ae.target.value)),className:"col-span-3",placeholder:"3,00",disabled:!Tt})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-semibold",children:"IPI"}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CST IPI"}),s.jsx(Mt,{value:Sn,onChange:ae=>Fi(ae.target.value.toUpperCase()),className:"col-span-3",placeholder:"50, 99...",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"Alquota IPI (%)"}),s.jsx(Mt,{value:`${ja||""}`,onChange:ae=>da(lt(ae.target.value)),className:"col-span-3",placeholder:"0,00",disabled:!Tt})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"FCP (%)"}),s.jsx(Mt,{value:`${oi||""}`,onChange:ae=>Tn(lt(ae.target.value)),placeholder:"2,00",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"MVA (%)"}),s.jsx(Mt,{value:`${Cs||""}`,onChange:ae=>so(lt(ae.target.value)),placeholder:"40,00",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"Base Reduzida (%)"}),s.jsx(Mt,{value:`${hn||""}`,onChange:ae=>Io(lt(ae.target.value)),placeholder:"0,00",disabled:!Tt})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"NCM"}),s.jsx(Mt,{value:Bi,onChange:ae=>Ii(Zt(ae.target.value)),placeholder:"00000000",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4",children:[s.jsx(ct,{className:"text-right",children:"CEST"}),s.jsx(Mt,{value:Ie,onChange:ae=>tt(kr(ae.target.value)),placeholder:"0000000",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 col-span-3 sm:col-span-1",children:[s.jsx(ct,{className:"text-right",children:"Descrio NCM"}),s.jsx(Mt,{value:mi,onChange:ae=>ee(ae.target.value),placeholder:"Descrio do NCM",disabled:!Tt})]})]})]}),s.jsxs(to,{value:"outras",className:"space-y-3 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"barcode2",className:"text-right",children:"Cdigo de Barras"}),s.jsx(Mt,{id:"barcode2",value:A,onChange:ae=>P(mr(ae.target.value)),className:"col-span-3",placeholder:"EAN-13",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"barcodeBox",className:"text-right",children:"Cdigo Barras (Caixa)"}),s.jsx(Mt,{id:"barcodeBox",value:C,onChange:ae=>k(mr(ae.target.value)),className:"col-span-3",placeholder:"EAN-13 da caixa",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"reference",className:"text-right",children:"Referncia"}),s.jsx(Mt,{id:"reference",value:R,onChange:ae=>E(ae.target.value),className:"col-span-3",placeholder:"Ex.: REF-123",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"brand",className:"text-right",children:"Marca"}),s.jsx(Mt,{id:"brand",value:I,onChange:ae=>T(ae.target.value),className:"col-span-3",placeholder:"Ex.: Nike",disabled:!Tt})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ct,{htmlFor:"group",className:"text-right",children:"Grupo"}),s.jsx(Mt,{id:"group",value:M,onChange:ae=>z(ae.target.value),className:"col-span-3",placeholder:"Ex.: Calados",disabled:!Tt})]})]}),!1]})}),s.jsxs(Dn,{children:[s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",children:"Cancelar"})}),s.jsx(Ae,{type:"button",onClick:ie,disabled:We||!Tt,title:"F5 para salvar",children:We?"Salvando...":"Salvar Produto"})]})]})})}function tJe({open:e,onOpenChange:t,categories:r,onAddCategory:n,onRemoveCategory:a}){const{toast:i}=ii(),[o,l]=y.useState(""),[c,u]=y.useState(!1),d=async()=>{const h=o.trim();if(h){if(r.includes(h)){i({title:"Categoria j existe",description:"Escolha outro nome.",variant:"destructive"});return}try{u(!0),await n(h),l(""),i({title:"Categoria adicionada",description:"Ela j aparece na lista.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(m){console.error("[Categorias] add:error",m);const g=Ac(m,{action:"save"});i({title:g.title,description:g.description,variant:"destructive"})}finally{u(!1)}}},f=async h=>{try{u(!0),await a(h),i({title:"Categoria desativada",description:"A categoria foi marcada como inativa.",variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(m){console.error("[Categorias] remove:error",m);const g=Ac(m,{action:"save"});i({title:g.title,description:g.description,variant:"destructive"})}finally{u(!1)}};return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Gerenciar Categorias"}),s.jsx(cn,{children:"Adicione ou remova categorias de produtos."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Mt,{value:o,onChange:h=>l(h.target.value),placeholder:"Nome da nova categoria"}),s.jsx(Ae,{onClick:d,disabled:c,children:c?"Processando...":"Adicionar"})]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.map(h=>s.jsxs("div",{className:"flex items-center justify-between bg-surface-2 p-2 rounded-md",children:[s.jsx("span",{className:"font-semibold",children:h}),s.jsx(Ae,{variant:"ghost",size:"icon",className:"h-8 w-8 text-danger/80 hover:text-danger",onClick:()=>f(h),disabled:c,children:s.jsx(G2,{size:14})})]},h))})]})]})})}function rJe(){const{toast:e}=ii(),{userProfile:t,authReady:r}=io();js();const[n,a]=y.useState(XXe),[i,o]=y.useState(JXe);y.useState("list");const[l,c]=y.useState(!0),[u,d]=y.useState(null),[f,h]=y.useState(!1),[m,g]=y.useState(!1),[p,v]=y.useState("all"),[x,b]=y.useState(""),[w,_]=y.useState({type:"all",category:"all",status:"active"}),[j,A]=y.useState(!1),[P,C]=y.useState(!1),[k,R]=y.useState(!1),[E,I]=y.useState(null),[T,M]=y.useState({by:"code",dir:"asc"}),z=y.useRef(!0),V=y.useRef(0),W=y.useRef(0);y.useRef(!1),y.useEffect(()=>(z.current=!0,()=>{z.current=!1}),[]);const $=async()=>{const je=t?.codigo_empresa||null;if(!r||!je)return;const We=`produtos:list:${je}`;A(!0);const Ot=setTimeout(()=>{if(z.current)try{const Ve=JSON.parse(localStorage.getItem(We)||"[]");Array.isArray(Ve)&&Ve.length>0&&(console.warn("[Produtos] slow fallback: using cached snapshot"),a(Ve))}catch{}},2e3);try{const Ve=await mh({includeInactive:w.status==="inactive",search:x,codigoEmpresa:je});if(!z.current)return;a(Ve);try{localStorage.setItem(We,JSON.stringify(Ve))}catch{}W.current=Array.isArray(Ve)?Ve.length:0,V.current=Date.now()}catch(Ve){console.error("[Produtos] refetchProducts:error",Ve);const nt=Ac(Ve,{action:"fetch"});e({title:nt.title,description:nt.description,variant:"destructive"})}finally{clearTimeout(Ot),A(!1)}};y.useEffect(()=>{const je=(()=>{try{const Rt=localStorage.getItem("auth:userProfile");return Rt&&JSON.parse(Rt)?.codigo_empresa||null}catch{return null}})(),We=t?.codigo_empresa||je;if(!We)return;const Ot=`produtos:list:${We}`,Ve=(()=>{try{return JSON.parse(localStorage.getItem(Ot)||"[]")}catch{return[]}})();Array.isArray(Ve)&&Ve.length>0&&(a(Ve),W.current=Ve.length);const nt=async(Rt=3)=>{for(let Lt=0;Lt<Rt;Lt++)try{if(z.current){await $();break}}catch(Tt){console.warn(`[ProdutosPage] Tentativa ${Lt+1} falhou:`,Tt),Lt===Rt-1?console.error("[ProdutosPage] Todas as tentativas falharam"):await new Promise(ir=>setTimeout(ir,1e3*(Lt+1)))}};try{const Rt=JSON.parse(localStorage.getItem(`produtos:cats:${We}`)||"[]");Array.isArray(Rt)&&Rt.length>0&&o(Rt)}catch{}if(r&&t?.codigo_empresa){const Rt=setTimeout(()=>nt(),100);return(async()=>{try{const Lt=await mz({codigoEmpresa:t.codigo_empresa});if(!z.current)return;o(Lt);try{localStorage.setItem(`produtos:cats:${t.codigo_empresa}`,JSON.stringify(Lt))}catch{}}catch(Lt){console.error("[Categorias] load on mount:error",Lt)}})(),()=>clearTimeout(Rt)}},[r,t?.codigo_empresa]),y.useEffect(()=>{const je=()=>{(Date.now()-(V.current||0)>3e4||W.current===0)&&$()},We=()=>{document.visibilityState==="visible"&&(Date.now()-(V.current||0)>3e4||W.current===0)&&$()};return window.addEventListener("focus",je),document.addEventListener("visibilitychange",We),()=>{window.removeEventListener("focus",je),document.removeEventListener("visibilitychange",We)}},[r,t?.codigo_empresa]),y.useEffect(()=>{r&&$()},[w.status,r]),y.useEffect(()=>{const je=setTimeout(()=>{r&&$()},300);return()=>clearTimeout(je)},[x,r]);const[G,me]=y.useState("N/A");y.useEffect(()=>{let je=!0;return(async()=>{try{const We=await OXe({limit:1,codigoEmpresa:t?.codigo_empresa});if(!je)return;if(Array.isArray(We)&&We.length>0){const Ot=We[0];me(`${Ot.name} (${Ot.total})`)}else me("")}catch{je&&me("N/A")}})(),()=>{je=!1}},[t?.codigo_empresa]);const[de,L]=y.useState(!1),[B,J]=y.useState(()=>{const je=new Date;return je.setHours(0,0,0,0),je}),[q,X]=y.useState(!1),[Z,pe]=y.useState(()=>new Date),[te,ve]=y.useState(!1),[Ce,he]=y.useState([]),qe=async()=>{try{ve(!0);const je=await kXe({from:B,to:Z,codigoEmpresa:t?.codigo_empresa});he(je||[])}catch(je){e({title:"Falha ao carregar vendas do perodo",description:je?.message||"Tente novamente",variant:"destructive"})}finally{ve(!1)}},ye=y.useMemo(()=>{const je=new Date;return{mostSold:G,lowStock:n.filter(We=>We.status==="low_stock"||We.stock>0&&We.stock<=We.minStock).length,expired:n.filter(We=>We.validade&&We.validade<je).length}},[n,G]),ce=y.useMemo(()=>{const je=new Date;return n.filter(We=>{const Ot=p==="all"?!0:p==="low_stock"?We.status==="low_stock"||We.stock>0&&We.stock<=We.minStock:p==="expired"?We.validade&&We.validade<je:!1,Ve=w.status==="all"?We.status!=="inactive":We.status===w.status,nt=w.type==="all"||We.type===w.type,Rt=w.category==="all"||We.category===w.category;return Ot&&Ve&&nt&&Rt})},[n,p,w]),Ft=y.useMemo(()=>{const je=[...ce],We=T.dir==="asc"?1:-1,Ot=(nt,Rt)=>Number.isFinite(nt)?nt:Rt,Ve=nt=>{if(!nt)return NaN;if(nt instanceof Date)return nt.getTime();const Rt=new Date(nt);return Number.isNaN(Rt.getTime())?NaN:Rt.getTime()};return je.sort((nt,Rt)=>{if(T.by==="code"){const Lt=Ot(parseInt((nt.code||"").trim(),10),1/0),Tt=Ot(parseInt((Rt.code||"").trim(),10),1/0);return Lt===Tt?0:Lt>Tt?We:-We}if(T.by==="name"){const Lt=(nt.name||"").toString(),Tt=(Rt.name||"").toString();return Lt.localeCompare(Tt,"pt-BR",{sensitivity:"base"})*We}if(T.by==="validade"){const Lt=Ot(Ve(nt.validade),1/0),Tt=Ot(Ve(Rt.validade),1/0);return Lt===Tt?0:Lt>Tt?We:-We}return 0}),je},[ce,T]),qt=je=>{M(We=>We.by===je?{by:je,dir:We.dir==="asc"?"desc":"asc"}:{by:je,dir:"asc"})},It=je=>{v(We=>We===je?"all":je)},et=()=>{J(()=>{const je=new Date;return je.setHours(0,0,0,0),je}),pe(new Date),L(!0),setTimeout(qe,0)},Ze=(je,We)=>{_(Ot=>({...Ot,[je]:We}))},Pt=()=>{d(null),h(!0)},ue=je=>{d(je),h(!0)},rt=()=>{try{ZXe(Ft),e({title:"Exportao concluda",description:`${Ft.length} produto(s) exportado(s).`,variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(je){console.error("[Produtos] export:error",je);const We=Ac(je,{action:"export"});e({title:We.title,description:We.description,variant:"destructive"})}},Ee=async()=>{const je=t?.codigo_empresa||null;if(!(!r||!je))try{const We=await mz({codigoEmpresa:je});if(!z.current)return;o(We);try{localStorage.setItem(`produtos:cats:${je}`,JSON.stringify(We))}catch{}}catch(We){console.error("[Categorias] load on mount:error",We)}},Ke=async je=>{o(We=>{if(We.includes(je))return We;const Ot=[...We,je];return Ot.sort((Ve,nt)=>Ve.localeCompare(nt,"pt-BR")),Ot});try{await IXe(je),await Ee()}catch(We){o(Ve=>Ve.filter(nt=>nt!==je)),console.error("[Categorias] add:error",We);const Ot=Ac(We,{action:"save"});e({title:Ot.title,description:Ot.description,variant:"destructive"})}},Ge=async je=>{if(n.some(Ve=>Ve.category===je&&Ve.status!=="inactive"))throw new Error("Categoria possui produtos ativos vinculados");const Ot=i;o(Ve=>Ve.filter(nt=>nt!==je));try{await DXe(je),await Ee()}catch(Ve){o(Ot),console.error("[Categorias] remove:error",Ve);const nt=Ac(Ve,{action:"save"});e({title:nt.title,description:nt.description,variant:"destructive"})}},bt=async je=>{try{if(console.log("[Produtos] handleSaveProduct",je),!je.code){const Ve=n.map(Rt=>(Rt.code||"").trim()).filter(Rt=>/^\d+$/.test(Rt)).map(Rt=>parseInt(Rt,10)),nt=Ve.length?Math.max(...Ve)+1:1;je.code=String(nt).padStart(4,"0")}const We=t?.codigo_empresa||null,Ot=async Ve=>{const Rt=new Promise((Lt,Tt)=>setTimeout(()=>Tt(new Error("Timeout update/create (12s)")),12e3));return Promise.race([Ve,Rt])};if(je.id){const Ve=await Ot(tre(je.id,je,{codigoEmpresa:We}));console.log("[Produtos] Produto atualizado",Ve),a(nt=>nt.map(Rt=>Rt.id===Ve.id?Ve:Rt)),setTimeout(()=>{$().catch(nt=>console.error("[Produtos] refetch ps-update falhou",nt))},0)}else{const Ve=await Ot(ere(je,{codigoEmpresa:We}));console.log("[Produtos] Produto criado",Ve),a(nt=>[Ve,...nt]),setTimeout(()=>{$().catch(nt=>console.error("[Produtos] refetch ps-create falhou",nt))},0)}}catch(We){console.error("[Produtos] Erro no handleSaveProduct",We);const Ot=Ac(We,{action:"save"});throw e({title:Ot.title,description:Ot.description,variant:"destructive"}),We}},ot=je=>{I(je),C(!0)},kt=async()=>{if(E?.id)try{R(!0),await TXe(E.id),a(We=>We.filter(Ot=>Ot.id!==E.id)),await $();const je=Ac(null,{action:"delete"});e({title:"Produto inativado",description:"O produto foi marcado como inativo.",variant:"success",duration:4e3,className:"bg-amber-500 text-black shadow-xl"})}catch(je){console.error(je);const We=Ac(je,{action:"delete"});e({title:We.title,description:We.description,variant:"destructive"})}finally{R(!1),C(!1),I(null)}},yt=y.useMemo(()=>{const je=n.map(Ot=>(Ot.code||"").trim()).filter(Ot=>/^\d+$/.test(Ot)).map(Ot=>parseInt(Ot,10)),We=je.length?Math.max(...je)+1:1;return String(We).padStart(4,"0")},[n]);return s.jsxs(s.Fragment,{children:[s.jsxs(ur.div,{variants:QXe,initial:"hidden",animate:"visible",className:"flex flex-col",children:[s.jsxs(ur.div,{variants:FO,className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-text-primary tracking-tighter",children:"Controle de Produtos"}),s.jsx("p",{className:"text-text-secondary",children:"Controle total sobre seu inventrio e estoque."})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Ae,{variant:"outline",size:"icon",onClick:()=>c(je=>!je),title:l?"Ocultar resumo":"Mostrar resumo","aria-label":l?"Ocultar resumo":"Mostrar resumo",children:l?s.jsx(Sb,{className:"h-4 w-4"}):s.jsx(_b,{className:"h-4 w-4"})}),s.jsxs(Ae,{variant:"outline",onClick:rt,className:"hidden sm:flex",children:[s.jsx(Ms,{className:"mr-2 h-4 w-4"})," Exportar"]}),s.jsxs(Ae,{variant:"outline",onClick:rt,className:"sm:hidden",children:[s.jsx(Ms,{className:"h-4 w-4 mr-1"})," CSV"]}),s.jsxs(Ae,{variant:"secondary",onClick:()=>X(!0),className:"hidden sm:flex",children:[s.jsx(Gl,{className:"mr-2 h-4 w-4"})," Importar XML"]}),s.jsxs(Ae,{variant:"secondary",onClick:()=>X(!0),className:"sm:hidden",children:[s.jsx(Gl,{className:"h-4 w-4 mr-1"})," XML"]}),s.jsxs(Ae,{onClick:Pt,className:"hidden sm:flex",children:[s.jsx(ri,{className:"mr-2 h-4 w-4"})," Novo Produto"]}),s.jsxs(Ae,{onClick:Pt,className:"sm:hidden",children:[s.jsx(ri,{className:"h-4 w-4 mr-1"})," Produto"]})]})]}),l&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(_A,{icon:Cb,title:"Mais Vendido (Dia)",value:ye.mostSold,subtitle:"Produto com mais sadas hoje",color:"text-brand",onClick:et}),s.jsx(_A,{icon:Ug,title:"Estoque Baixo",value:ye.lowStock,subtitle:"Produtos precisando de reposio",color:"text-warning",onClick:()=>It("low_stock"),isActive:p==="low_stock"}),s.jsx(_A,{icon:e2,title:"Vencidos",value:ye.expired,subtitle:"Produtos fora da data de validade",color:"text-danger",onClick:()=>It("expired"),isActive:p==="expired"})]}),s.jsx(rn,{open:de,onOpenChange:L,children:s.jsxs(Yr,{className:"max-w-2xl",onKeyDown:je=>je.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold",children:"Vendas por Perodo"}),s.jsx(cn,{children:"Selecione o intervalo de datas e visualize os produtos vendidos."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Incio"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:"w-full justify-start",children:[s.jsx(e2,{className:"mr-2 h-4 w-4"}),B?Hr(B,"dd/MM/yyyy"):"Incio"]})}),s.jsx(ku,{className:"p-0 w-[300px]",children:s.jsx("div",{className:"w-[300px] min-h-[332px]",children:s.jsx(_u,{mode:"single",selected:B,onSelect:je=>je&&J(je),initialFocus:!0,fixedWeeks:!0})})})]})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Fim"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:"w-full justify-start",children:[s.jsx(e2,{className:"mr-2 h-4 w-4"}),Z?Hr(Z,"dd/MM/yyyy"):"Fim"]})}),s.jsx(ku,{className:"p-0 w-[300px]",children:s.jsx("div",{className:"w-[300px] min-h-[332px]",children:s.jsx(_u,{mode:"single",selected:Z,onSelect:je=>je&&pe(je),initialFocus:!0,fixedWeeks:!0})})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ae,{type:"button",onClick:qe,disabled:te,className:"w-full",children:te?"Carregando...":"Aplicar"}),s.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>{try{const je=Ce||[],We=";",Ot=()=>{const Lt=["Produto;Quantidade"];for(const Tt of je)Lt.push(`${(Tt.name||"").replace(/;/g,",")}${We}${Number(Tt.total||0)}`);return Lt.join(`
`)},Ve=new Blob(["\uFEFF"+Ot()],{type:"text/csv;charset=utf-8;"}),nt=URL.createObjectURL(Ve),Rt=document.createElement("a");Rt.href=nt,Rt.download="vendas-periodo.csv",document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt),URL.revokeObjectURL(nt),e({title:"Exportao concluda",description:`${je.length} linha(s)`,variant:"success"})}catch(je){e({title:"Falha ao exportar",description:je?.message||"Tente novamente",variant:"destructive"})}},children:"Exportar CSV"})]})]}),s.jsx("div",{className:"mt-3 border rounded-md max-h-[50vh] overflow-auto thin-scroll",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-surface-2",children:[s.jsx("th",{className:"text-left p-2",children:"Produto"}),s.jsx("th",{className:"text-right p-2",children:"Quantidade"})]})}),s.jsxs("tbody",{children:[(Ce||[]).length===0&&!te&&s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:"p-3 text-text-muted",children:"Nenhum item no perodo."})}),(Ce||[]).map(je=>s.jsxs("tr",{className:"border-t border-border",children:[s.jsx("td",{className:"p-2",children:je.name}),s.jsx("td",{className:"p-2 text-right font-mono",children:Number(je.total||0)})]},je.id))]})]})}),s.jsx(Dn,{children:s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",children:"Fechar"})})})]})}),s.jsxs(ur.div,{variants:FO,className:"bg-surface rounded-lg border border-border flex flex-col",children:[s.jsxs("div",{className:"p-3 pb-4 sm:p-4 border-b border-border space-y-3 flex-shrink-0",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar por nome ou cdigo...",className:"pl-9 text-sm",value:x,onChange:je=>b(je.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:items-center gap-2",children:[s.jsxs(kn,{value:w.type,onValueChange:je=>Ze("type",je),children:[s.jsx(An,{className:"text-xs sm:text-sm",children:s.jsx(On,{})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"all",children:"Todos Tipos"}),s.jsx(Ht,{value:"Venda",children:"Venda"}),s.jsx(Ht,{value:"Uso Interno",children:"Uso Interno"})]})]}),s.jsxs(kn,{value:w.category,onValueChange:je=>Ze("category",je),children:[s.jsx(An,{className:"text-xs sm:text-sm",children:s.jsx(On,{})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"all",children:"Categorias"}),i.map(je=>s.jsx(Ht,{value:je,children:je},je))]})]}),s.jsxs(kn,{value:w.status,onValueChange:je=>Ze("status",je),children:[s.jsx(An,{className:"text-xs sm:text-sm",children:s.jsx(On,{})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"all",children:"Todos Status"}),s.jsx(Ht,{value:"active",children:"Ativo"}),s.jsx(Ht,{value:"low_stock",children:"Estoque Baixo"}),s.jsx(Ht,{value:"inactive",children:"Inativo"})]})]}),s.jsxs(Ae,{variant:"outline",onClick:()=>g(!0),className:"text-xs sm:text-sm",size:"sm",children:[s.jsx(xce,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"})," Categorias"]})]})]}),s.jsx("div",{children:Ft.length===0?s.jsxs("div",{className:"p-10 text-center text-text-secondary",children:[s.jsx("p",{className:"text-lg mb-3",children:"Nenhum produto cadastrado."}),s.jsxs(Ae,{onClick:Pt,children:[s.jsx(ri,{className:"mr-2 h-4 w-4"}),"Cadastrar primeiro produto"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden p-4 space-y-3",children:Ft.map(je=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-base text-text-primary truncate",title:je.name,children:je.name}),s.jsx("p",{className:"text-xs text-text-muted mt-0.5",children:je.category||"Sem categoria"})]}),s.jsx("span",{className:Et("inline-flex px-2 py-0.5 rounded-full text-xs border flex-shrink-0",je.status==="active"&&"bg-emerald-50/5 border-emerald-500/30 text-emerald-400",je.status==="low_stock"&&"bg-amber-50/5 border-amber-500/30 text-amber-400",je.status==="inactive"&&"bg-surface-2 border-border text-text-muted"),children:je.status==="active"?"Ativo":je.status==="low_stock"?"Estoque Baixo":"Inativo"})]}),je.code&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Cdigo: "}),s.jsx("span",{className:"text-sm font-mono",children:je.code})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Preo"}),s.jsxs("span",{className:"text-sm font-bold text-text-primary",children:["R$ ",je.price.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Estoque"}),s.jsx("span",{className:"text-sm font-medium",children:je.stock})]}),je.validade&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Validade"}),s.jsx("span",{className:"text-sm font-medium",children:(()=>{const We=je.validade instanceof Date?je.validade:F6(String(je.validade));return isNaN(We)?"-":Hr(We,"dd/MM/yyyy")})()})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",onClick:()=>ue(je),className:"flex-1",children:[s.jsx(Sm,{className:"h-3 w-3 mr-1"})," Editar"]}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:We=>{We.stopPropagation(),ot(je)},className:"text-danger hover:text-danger",children:s.jsx(G2,{className:"h-3 w-3"})})]})]},je.id))}),s.jsx("div",{className:"hidden md:block rounded-lg border border-border overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm bg-surface table-fixed",children:[s.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:s.jsxs("tr",{className:"border-b border-border",children:[s.jsxs("th",{className:"p-3 text-left font-semibold select-none cursor-pointer whitespace-nowrap w-[110px]",onClick:()=>qt("code"),children:["Cdigo ",T.by==="code"?T.dir==="asc"?"":"":""]}),s.jsxs("th",{className:"p-3 text-left font-semibold select-none cursor-pointer whitespace-nowrap w-[40%]",onClick:()=>qt("name"),children:["Produto ",T.by==="name"?T.dir==="asc"?"":"":""]}),s.jsx("th",{className:"p-3 text-left font-semibold whitespace-nowrap w-[18%]",children:"Categoria"}),s.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[120px]",children:"Preo"}),s.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[110px]",children:"Estoque"}),s.jsxs("th",{className:"p-3 text-center font-semibold select-none cursor-pointer whitespace-nowrap w-[120px]",onClick:()=>qt("validade"),children:["Validade ",T.by==="validade"?T.dir==="asc"?"":"":""]}),s.jsx("th",{className:"p-3 text-center font-semibold whitespace-nowrap w-[140px]",children:"Status"}),s.jsx("th",{className:"p-3 text-right font-semibold whitespace-nowrap w-[90px]",children:"Aes"})]})}),s.jsx("tbody",{className:"text-text-primary divide-y divide-border",children:Ft.map(je=>s.jsxs("tr",{className:"hover:bg-surface-2 transition-colors group cursor-pointer align-middle",children:[s.jsx("td",{className:"p-3 font-mono text-sm text-text-secondary align-middle whitespace-nowrap",onClick:()=>ue(je),children:je.code||"-"}),s.jsx("td",{className:"p-3 font-semibold align-middle text-text-primary whitespace-nowrap overflow-hidden text-ellipsis",onClick:()=>ue(je),title:je.name,children:je.name}),s.jsx("td",{className:"p-3 text-text-secondary align-middle whitespace-nowrap",onClick:()=>ue(je),children:je.category}),s.jsxs("td",{className:"p-3 text-right font-mono tabular-nums align-middle whitespace-nowrap",onClick:()=>ue(je),children:["R$ ",je.price.toFixed(2)]}),s.jsx("td",{className:"p-3 text-right font-mono tabular-nums align-middle whitespace-nowrap",onClick:()=>ue(je),children:je.stock}),s.jsx("td",{className:"p-3 text-center font-mono tabular-nums whitespace-nowrap",onClick:()=>ue(je),children:(()=>{if(!je.validade)return"-";const We=je.validade instanceof Date?je.validade:F6(String(je.validade));return isNaN(We)?"-":Hr(We,"dd/MM/yy")})()}),s.jsx("td",{className:"p-3 text-center whitespace-nowrap",onClick:()=>ue(je),children:s.jsx("span",{className:Et("px-2 py-1 text-xs font-bold rounded-full",je.status==="active"&&"bg-success/10 text-success",je.status==="low_stock"&&"bg-warning/10 text-warning",je.status==="inactive"&&"bg-danger/10 text-danger"),children:je.status==="active"?"Ativo":je.status==="low_stock"?"Estoque Baixo":"Inativo"})}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ae,{variant:"ghost",size:"icon",className:"h-8 w-8 text-text-muted hover:text-danger",onClick:We=>{We.stopPropagation(),ot(je)},children:s.jsx(G2,{size:14})})})})]},je.id))})]})})]})})]})]}),s.jsx(eJe,{open:f,onOpenChange:h,product:u,categories:i,onSave:bt,onCreateCategory:Ke,suggestedCode:u?void 0:yt}),s.jsx(rn,{open:P,onOpenChange:C,children:s.jsxs(Yr,{className:"sm:max-w-[480px]",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Excluir produto"}),s.jsxs(cn,{children:["Tem certeza que deseja excluir o produto",E?` "${E.name}"`:"","? Esta ao no pode ser desfeita."]})]}),s.jsxs(Dn,{children:[s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",disabled:k,children:"Cancelar"})}),s.jsx(Ae,{type:"button",variant:"destructive",onClick:kt,disabled:k,children:k?"Excluindo...":"Excluir"})]})]})}),s.jsx(YXe,{open:q,onOpenChange:X,products:n,codigoEmpresa:t?.codigo_empresa,onSuccess:()=>{$(),X(!1)}}),s.jsx(tJe,{open:m,onOpenChange:g,categories:i,onAddCategory:Ke,onRemoveCategory:Ge})]})}const cs=se.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Et("w-full caption-bottom text-sm",e),...t})}));cs.displayName="Table";const us=se.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Et("[&_tr]:border-b",e),...t}));us.displayName="TableHeader";const ds=se.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Et("[&_tr:last-child]:border-0",e),...t}));ds.displayName="TableBody";const nJe=se.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Et("bg-primary font-medium text-primary-foreground",e),...t}));nJe.displayName="TableFooter";const Qn=se.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Et("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Qn.displayName="TableRow";const Mr=se.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Et("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Mr.displayName="TableHead";const Sr=se.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Et("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Sr.displayName="TableCell";const aJe=se.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Et("mt-4 text-sm text-muted-foreground",e),...t}));aJe.displayName="TableCaption";const iJe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},are={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},Pw=({icon:e,title:t,value:r,color:n,onClick:a,isActive:i})=>{const o=e;return s.jsxs(ur.div,{variants:are,className:Et("bg-surface rounded-lg border p-4 flex items-center gap-4 cursor-pointer transition-all duration-200",i?"border-brand ring-2 ring-brand/50":"border-border hover:border-brand/50"),onClick:a,children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n}/20`,children:s.jsx(o,{className:`w-6 h-6 ${n}`})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium",children:t}),s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r})]})]})};function oJe({open:e,onOpenChange:t,client:r,onEdit:n,onInactivate:a,codigoEmpresa:i}){const{toast:o}=ii(),l={scheduled:{bg:"bg-[#3B82F6]/10",text:"text-[#3B82F6]",border:"border-[#3B82F6]/30"},confirmed:{bg:"bg-[#22C55E]/10",text:"text-[#22C55E]",border:"border-[#22C55E]/30"},in_progress:{bg:"bg-[#FACC15]/10",text:"text-[#FACC15]",border:"border-[#FACC15]/30"},finished:{bg:"bg-[#6B7280]/10",text:"text-[#6B7280]",border:"border-[#6B7280]/30"},canceled:{bg:"bg-[#EF4444]/10",text:"text-[#EF4444]",border:"border-[#EF4444]/30"},absent:{bg:"bg-[#F97316]/10",text:"text-[#F97316]",border:"border-[#F97316]/30"}},c=({label:T,value:M})=>s.jsxs("div",{className:"grid grid-cols-12 items-start gap-3 py-2 border-b border-border/50",children:[s.jsx("div",{className:"col-span-5 sm:col-span-4",children:s.jsx("span",{className:"block text-[11px] uppercase tracking-wide text-text-muted font-semibold",children:T})}),s.jsx("div",{className:"col-span-7 sm:col-span-8",children:s.jsx("span",{className:"block text-sm font-medium text-text-primary break-words",children:M})})]}),[u,d]=y.useState(!1),[f,h]=y.useState([]),[m,g]=y.useState(!1),[p,v]=y.useState([]),x=y.useRef(!1),b=y.useRef(!1),[w,_]=y.useState(!1),[j,A]=y.useState(null),[P,C]=y.useState(!1),[k,R]=y.useState(null),E=y.useMemo(()=>{try{const T=(f||[]).map(z=>({kind:"comanda",ts:new Date(z.aberto_em||z.created_at||0).getTime(),data:z})),M=(p||[]).map(z=>({kind:"agendamento",ts:new Date(z.inicio||0).getTime(),data:z}));return[...T,...M].sort((z,V)=>V.ts-z.ts).slice(0,10)}catch{return[]}},[f,p]),I=async T=>{try{if(_(!0),A(T?.kind||null),C(!0),R(null),T?.kind==="comanda"){const M=T?.data?.comanda_id;if(!M){C(!1);return}let z=Pe.from("comanda_itens").select("id, quantidade, preco_unitario, desconto, produto:produtos!comanda_itens_produto_id_fkey ( nome )").eq("comanda_id",M);i&&(z=z.eq("codigo_empresa",i));const{data:V}=await z,W=(V||[]).map(Z=>({id:Z.id,quantidade:Z.quantidade,preco_unitario:Z.preco_unitario,desconto:Z.desconto,produto_nome:Z.produto?.[0]?.nome||Z.produto?.nome||"Item"}));let $=Pe.from("pagamentos").select("id, valor, status, recebido_em, metodo").eq("comanda_id",M);i&&($=$.eq("codigo_empresa",i));const{data:G}=await $,me=G||[];let de=Pe.from("comanda_clientes").select("cliente:clientes!comanda_clientes_cliente_id_fkey ( id, nome, email, telefone )").eq("comanda_id",M);i&&(de=de.eq("codigo_empresa",i));const{data:L}=await de,B=(L||[]).map(Z=>Z.cliente?.[0]||Z.cliente).filter(Boolean),J=(W||[]).reduce((Z,pe)=>Z+(Number(pe.quantidade||0)*Number(pe.preco_unitario||0)-Number(pe.desconto||0)),0),q=(me||[]).filter(Z=>(Z.status||"Pago")!=="Cancelado"&&(Z.status||"Pago")!=="Estornado").reduce((Z,pe)=>Z+Number(pe.valor||0),0),X=Math.max(0,J-q);R({comandaId:M,mesa_title:T?.data?.mesa_title||"Balco",status:T?.data?.status||"open",itens:W||[],pagamentos:me||[],clientes:B,totalItens:J,totalPagos:q,saldo:X,aberto_em:T?.data?.aberto_em||T?.data?.created_at||null,fechado_em:T?.data?.fechado_em||null})}else if(T?.kind==="agendamento"){const M=T?.data?.id;if(!M){C(!1);return}let z=[];try{const{data:G}=await Pe.from("v_agendamento_participantes").select("*").eq("agendamento_id",M).limit(200);z=G||[]}catch{z=[]}const V=Array.from(new Set((z||[]).map(G=>G.cliente_id).filter(Boolean)));let W=[];W=(z||[]).map(G=>({id:G.cliente_id,nome:G.cliente_nome||G.nome||null,email:G.cliente_email||G.email||null,telefone:G.cliente_telefone||G.telefone||null,valor_cota:G.valor_cota??null,status_pagamento:G.status_pagamento_text||G.status_pagamento||null}));const $=V.filter(G=>!W.some(me=>String(me.id)===String(G)&&me.nome));if($.length>0)try{const{data:G}=await Pe.from("clientes").select("id,nome,email,telefone").in("id",$),me=new Map((G||[]).map(de=>[String(de.id),de]));W=W.map(de=>{if(!de.nome){const L=me.get(String(de.id));if(L)return{...de,nome:L.nome,email:L.email,telefone:L.telefone}}return de})}catch{}R({id:M,inicio:T?.data?.inicio||null,fim:T?.data?.fim||null,status:T?.data?.status||null,modalidade:T?.data?.modalidade||null,quadra_nome:T?.data?.quadra_nome||null,participantes:W})}}catch{}finally{C(!1)}};return y.useEffect(()=>{let T=!1;if(e&&(x.current=!1,b.current=!1),e&&r?.id&&!i)return d(!1),g(!1),()=>{T=!0};const M=async()=>{if(!e||!r?.id)return;d(!0);let V;try{V=setTimeout(()=>d(!1),1e4)}catch{}try{console.debug("[ClientDetailsModal] loadHistory: start",{clientId:r.id,codigoEmpresa:i});let W=Pe.from("comanda_clientes").select("comanda_id, created_at").eq("cliente_id",r.id).order("created_at",{ascending:!1}).limit(10);i&&(W=W.eq("codigo_empresa",i));const{data:$,error:G}=await W;if($&&$.length,G)throw G;const me=Array.from(new Set(($||[]).map(ue=>ue.comanda_id).filter(Boolean)));let de=Pe.from("comandas").select("id, status, aberto_em, fechado_em").eq("cliente_id",r.id).order("aberto_em",{ascending:!1}).limit(10);i&&(de=de.eq("codigo_empresa",i));const{data:L,error:B}=await de;if(B)throw B;const J=Array.from(new Set((L||[]).map(ue=>ue.id))),q=Array.from(new Set([...me,...J]));if(q.length===0){h([]),d(!1);return}let X=Pe.from("comandas").select("id,status,aberto_em,fechado_em, mesa:mesas!comandas_mesa_id_fkey ( nome, numero )").in("id",q);i&&(X=X.eq("codigo_empresa",i));const{data:Z,error:pe}=await X;if(pe)throw pe;const te=new Map((Z||[]).map(ue=>[ue.id,ue]));let ve=Pe.from("comanda_itens").select("comanda_id, quantidade, preco_unitario, desconto").in("comanda_id",q);i&&(ve=ve.eq("codigo_empresa",i));const{data:Ce,error:he}=await ve;if(he)throw he;const qe={};for(const ue of Ce||[]){const rt=Number(ue.quantidade||0)*Number(ue.preco_unitario||0),Ee=Number(ue.desconto||0);qe[ue.comanda_id]=(qe[ue.comanda_id]||0)+Math.max(0,rt-Ee)}let ye=Pe.from("pagamentos").select("comanda_id, valor, status, recebido_em, metodo").in("comanda_id",q);i&&(ye=ye.eq("codigo_empresa",i));const{data:ce,error:Ft}=await ye;if(Ft)throw Ft;const qt={};for(const ue of ce||[])(ue.status||"Pago")!=="Cancelado"&&(ue.status||"Pago")!=="Estornado"&&(qt[ue.comanda_id]=(qt[ue.comanda_id]||0)+Number(ue.valor||0));const It=(ue,rt=null)=>{const Ee=te.get(ue)||{},Ke=Number(qe[ue]||0),Ge=Number(qt[ue]||0),bt=Math.max(0,Ke-Ge),ot=Ee.mesa?.[0]?.nome||Ee.mesa?.nome||null,kt=Ee.mesa?.[0]?.numero||Ee.mesa?.numero||null,yt=ot||(kt!=null?`Mesa ${kt}`:"Balco");return{comanda_id:ue,created_at:rt,aberto_em:Ee.aberto_em||null,fechado_em:Ee.fechado_em||null,status:Ee.status||"open",total:Ke,pago:Ge,saldo:bt,mesa_title:yt}},et=($||[]).map(ue=>It(ue.comanda_id,ue.created_at)),Ze=(L||[]).filter(ue=>!(me||[]).includes(ue.id)).map(ue=>It(ue.id,ue.aberto_em)),Pt=[...et,...Ze].sort((ue,rt)=>{const Ee=new Date(ue.aberto_em||ue.created_at||0).getTime();return new Date(rt.aberto_em||rt.created_at||0).getTime()-Ee}).slice(0,10);if(!T&&Pt.length===0&&!x.current){x.current=!0,console.debug("[ClientDetailsModal] loadHistory: empty result, retrying once..."),setTimeout(()=>{e&&r?.id&&M()},700);return}T||h(Pt)}catch(W){o({title:"Falha ao carregar histrico do cliente",description:W?.message||"Tente novamente",variant:"destructive"})}finally{try{clearTimeout(V)}catch{}T||d(!1)}},z=async()=>{if(!e||!r?.id)return;g(!0);let V;try{V=setTimeout(()=>g(!1),1e4)}catch{}try{console.debug("[ClientDetailsModal] loadBookings: start",{clientId:r.id,codigoEmpresa:i});let W=Pe.from("agendamentos").select(`
            id, inicio, fim, status, modalidade,
            quadra:quadra_id ( nome )
          `).eq("cliente_id",r.id).order("inicio",{ascending:!1}).limit(10);i&&(W=W.eq("codigo_empresa",i));const{data:$,error:G}=await W;if(G)throw G;const me=($||[]).map(te=>({id:te.id,inicio:te.inicio,fim:te.fim,status:te.status,modalidade:te.modalidade,quadra_nome:te.quadra?.[0]?.nome||te.quadra?.nome||null}));let de=Pe.from("v_agendamento_participantes").select("agendamento_id").eq("cliente_id",r.id).limit(30);const{data:L,error:B}=await de;if(B)throw B;const J=Array.from(new Set((L||[]).map(te=>te.agendamento_id).filter(Boolean))),q=new Set((me||[]).map(te=>te.id)),X=J.filter(te=>!q.has(te));let Z=[];if(X.length>0){let te=Pe.from("agendamentos").select(`
              id, inicio, fim, status, modalidade,
              quadra:quadra_id ( nome )
            `).in("id",X);i&&(te=te.eq("codigo_empresa",i));const{data:ve,error:Ce}=await te;if(Ce)throw Ce;Z=(ve||[]).map(he=>({id:he.id,inicio:he.inicio,fim:he.fim,status:he.status,modalidade:he.modalidade,quadra_nome:he.quadra?.[0]?.nome||he.quadra?.nome||null}))}const pe=[...me,...Z].sort((te,ve)=>new Date(ve.inicio)-new Date(te.inicio)).slice(0,10);if(!T&&pe.length===0&&!b.current){b.current=!0,console.debug("[ClientDetailsModal] loadBookings: empty result, retrying once..."),setTimeout(()=>{e&&r?.id&&z()},700);return}T||v(pe)}catch(W){console.warn("[ClientDetailsModal] Falha ao carregar agendamentos do cliente:",W)}finally{try{clearTimeout(V)}catch{}T||g(!1)}};return M(),z(),()=>{T=!0,e||(d(!1),g(!1))}},[e,r?.id,i]),r?s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto w-full",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Detalhes do Cliente"}),s.jsx(cn,{children:"Informaes cadastrais e histrico recente deste cliente."})]}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-6 sm:space-y-8",children:[s.jsx("div",{className:"overflow-hidden",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-extrabold tracking-tight text-text-primary truncate",children:r.nome}),s.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-surface-2 border border-border text-text-secondary",children:["Cdigo: ",s.jsx("span",{className:"text-text-primary font-mono",children:r.codigo})]}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold border ${r.status==="active"?"bg-emerald-500/10 text-emerald-400 border-emerald-400/30":"bg-rose-500/10 text-rose-400 border-rose-400/30"}`,children:r.status==="active"?"Ativo":"Inativo"}),r.flag_cliente&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),r.flag_fornecedor&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]}),s.jsx("span",{className:"mt-2 block text-sm text-text-secondary truncate",children:r.email||""})]})})}),s.jsx("div",{className:"grid grid-cols-1 gap-8",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-text-secondary mb-2",children:"Informaes Cadastrais"}),s.jsxs("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg space-y-1",children:[s.jsx(c,{label:"Cdigo",value:r.codigo}),s.jsx(c,{label:"CPF/CNPJ",value:r.cpf||r.cnpj||""}),s.jsx(c,{label:"Telefone",value:r.telefone||""}),s.jsx(c,{label:"Aniversrio",value:r.aniversario?new Date(r.aniversario).toLocaleDateString("pt-BR"):""}),s.jsx(c,{label:"Email",value:r.email||""}),s.jsx(c,{label:"Status",value:r.status==="active"?"Ativo":"Inativo"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[s.jsx(sce,{className:"w-5 h-5 text-text-secondary"}),s.jsx("h4",{className:"font-semibold",children:"Histrico Recente"})]}),s.jsx("div",{className:"bg-surface-2 p-3 sm:p-4 rounded-lg",children:u&&m?s.jsx("div",{className:"text-center py-8 text-sm text-text-muted",children:"Carregando histrico..."}):E&&E.length>0?s.jsx("div",{className:"max-h-64 overflow-y-auto thin-scroll pr-1",children:s.jsx("div",{className:"space-y-3",children:E.map((T,M)=>s.jsxs("div",{className:"group flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3 p-3 rounded-md border border-border/60 bg-background cursor-pointer transition-colors transition-shadow hover:bg-surface-2/60 hover:shadow-md hover:border-brand/30",title:"Clique para ver detalhes",onClick:()=>I(T),children:[s.jsx("div",{className:"min-w-0",children:T.kind==="comanda"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:T.data.mesa_title||"Balco"}),s.jsx("div",{className:"text-xs text-text-secondary truncate",children:(()=>{const z=T.data;return z.aberto_em?new Date(z.aberto_em).toLocaleString("pt-BR"):new Date(z.created_at).toLocaleString("pt-BR")})()})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary truncate",children:T.data.modalidade||"Agendamento"}),s.jsxs("div",{className:"text-xs text-text-secondary truncate",children:[new Date(T.data.inicio).toLocaleString("pt-BR"),"  ",T.data.quadra_nome||"Quadra"]})]})}),s.jsx("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto justify-between sm:justify-end",children:T.kind==="comanda"?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:Et("px-2 py-1 text-[11px] font-semibold rounded-full border",T.data.status==="closed"||T.data.fechado_em?"bg-success/10 text-success border-success/30":T.data.status==="awaiting-payment"?"bg-info/10 text-info border-info/30":"bg-warning/10 text-warning border-warning/30"),children:T.data.status==="closed"||T.data.fechado_em?"Fechada":T.data.status==="awaiting-payment"?"Pagamento":"Em uso"}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[11px] text-text-secondary whitespace-nowrap",children:"Clique para detalhes"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:Et("px-2 py-1 text-[11px] font-semibold rounded-full border",(()=>{const z=String(T.data.status||"scheduled"),V=l[z]||l.scheduled;return`${V.bg} ${V.text} ${V.border}`})()),children:(()=>{switch(T.data.status){case"finished":return"Finalizado";case"canceled":return"Cancelado";case"in_progress":return"Em andamento";case"confirmed":return"Confirmado";case"absent":return"Ausente";case"scheduled":default:return"Agendado"}})()}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-[11px] text-text-secondary whitespace-nowrap",children:"Clique para detalhes"})]})})]},`${T.kind}-${M}`))})}):s.jsx("div",{className:"text-center py-8 text-sm text-text-muted",children:"Sem registros recentes para este cliente."})})]}),s.jsx(rn,{open:w,onOpenChange:_,children:s.jsxs(Yr,{className:"sm:max-w-[700px] w-full max-h-[85vh] overflow-y-auto",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:j==="comanda"?k?.mesa_title||"Detalhes da Comanda":"Detalhes do Agendamento"}),s.jsx(cn,{children:j==="comanda"?"Itens e pagamentos desta comanda.":"Informaes do agendamento e participantes."})]}),s.jsx("div",{className:"space-y-4",children:P?s.jsx("div",{className:"text-sm text-text-muted",children:"Carregando detalhes..."}):j==="comanda"&&k?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Status"}),s.jsx("p",{className:"font-semibold",children:(()=>{const T=String(k.status||"").toLowerCase();return T==="closed"||k.fechado_em?"Fechada":T==="awaiting-payment"?"Aguardando pagamento":"Aberta"})()})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Abertura"}),s.jsx("p",{className:"font-semibold",children:k.aberto_em?new Date(k.aberto_em).toLocaleString("pt-BR"):""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Fechamento"}),s.jsx("p",{className:"font-semibold",children:k.fechado_em?new Date(k.fechado_em).toLocaleString("pt-BR"):""})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Itens"}),s.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(k.itens||[]).map(T=>s.jsxs("div",{className:"p-2 flex flex-col sm:grid sm:grid-cols-12 gap-1 sm:gap-2 text-sm",children:[s.jsx("div",{className:"sm:col-span-6 font-medium",children:T.produto_nome||"Item"}),s.jsxs("div",{className:"sm:col-span-2 sm:text-right text-text-muted",children:["Qtd: ",Number(T.quantidade||0)]}),s.jsxs("div",{className:"sm:col-span-2 sm:text-right",children:["R$ ",Number(T.preco_unitario||0).toFixed(2)]}),s.jsx("div",{className:"sm:col-span-2 sm:text-right text-text-secondary",children:Number(T.desconto||0)?`- R$ ${Number(T.desconto||0).toFixed(2)}`:""})]},T.id)),(!k.itens||k.itens.length===0)&&s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum item."})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Pagamentos"}),s.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(k.pagamentos||[]).map(T=>s.jsxs("div",{className:"p-2 flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"truncate",children:[T.metodo||""," ",T.status?`(${T.status})`:""]}),s.jsxs("span",{className:"font-semibold",children:["R$ ",Number(T.valor||0).toFixed(2)]})]},T.id)),(!k.pagamentos||k.pagamentos.length===0)&&s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum pagamento registrado."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Total de Itens"}),s.jsxs("p",{className:"font-bold",children:["R$ ",Number(k.totalItens||0).toFixed(2)]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Total Pago"}),s.jsxs("p",{className:"font-bold text-success",children:["R$ ",Number(k.totalPagos||0).toFixed(2)]})]})]})]}):j==="agendamento"&&k?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Modalidade"}),s.jsx("p",{className:"font-semibold",children:k.modalidade||""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Quadra"}),s.jsx("p",{className:"font-semibold",children:k.quadra_nome||""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Incio"}),s.jsx("p",{className:"font-semibold",children:k.inicio?new Date(k.inicio).toLocaleString("pt-BR"):""})]}),s.jsxs("div",{className:"bg-surface-2 rounded-md p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Fim"}),s.jsx("p",{className:"font-semibold",children:k.fim?new Date(k.fim).toLocaleString("pt-BR"):""})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Participantes"}),s.jsxs("div",{className:"border rounded-md divide-y divide-border",children:[(k.participantes||[]).map(T=>s.jsxs("div",{className:"p-2 text-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:T.nome||"Participante"}),s.jsxs("div",{className:"text-xs text-text-muted truncate",children:[T.email||""," ",T.telefone?` ${T.telefone}`:""]})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-between sm:justify-end",children:[T.valor_cota!=null&&s.jsxs("span",{className:"text-xs font-semibold text-text-secondary",children:["R$ ",Number(T.valor_cota||0).toFixed(2)]}),s.jsx("span",{className:`text-[11px] font-semibold rounded-full px-2 py-0.5 border ${String(T.status_pagamento||"").toLowerCase()==="pago"?"bg-success/10 text-success border-success/30":"bg-warning/10 text-warning border-warning/30"}`,children:String(T.status_pagamento||T.status_pagamento_text||"Pendente")})]})]},T.id)),(!k.participantes||k.participantes.length===0)&&s.jsx("div",{className:"p-3 text-sm text-text-muted",children:"Nenhum participante encontrado."})]})]})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma informao para exibir."})}),s.jsx(Dn,{children:s.jsx(Ae,{variant:"outline",onClick:()=>_(!1),children:"Fechar"})})]})})]}),s.jsxs(Dn,{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-0 sm:justify-between",children:[s.jsx("div",{className:"w-full sm:flex-1",children:s.jsxs(Ae,{type:"button",variant:"destructive",className:"bg-red-600 hover:bg-red-500 text-white w-full sm:w-auto",onClick:()=>a?.(r),children:[s.jsx(FW,{className:"mr-2 h-4 w-4"})," Inativar Cliente"]})}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",className:"flex-1 sm:flex-none",children:"Fechar"})}),s.jsxs(Ae,{onClick:()=>n(r),className:"flex-1 sm:flex-none",children:[s.jsx(Sm,{className:"mr-2 h-4 w-4"})," Editar Cliente"]})]})]})]})}):null}function sJe(){const{toast:e}=ii(),{userProfile:t,authReady:r}=io(),n=js(),[a,i]=y.useState(()=>{try{const B=localStorage.getItem("auth:userProfile"),J=B&&JSON.parse(B)?.codigo_empresa||null,q=J?`clientes:list:${J}`:"clientes:list",X=JSON.parse(localStorage.getItem(q)||"[]");return Array.isArray(X)?X:[]}catch{return[]}}),[o,l]=y.useState(!1),[c,u]=y.useState(!0),[d,f]=y.useState(!1),[h,m]=y.useState(!1),[g,p]=y.useState(null),[v,x]=y.useState(null),[b,w]=y.useState({searchTerm:"",status:"all",tipo:"todos"}),_=y.useRef(!1),j=y.useRef(0),A=y.useRef(0),P=y.useRef(!1);y.useEffect(()=>{n.state?.openModal&&!d&&!P.current&&(P.current=!0,f(!0),window.history.replaceState({},document.title))},[n.state?.openModal,d]);const C=async()=>{try{const B=a&&a.length>0;if(B||l(!0),!t?.codigo_empresa)return;const J=`clientes:list:${t.codigo_empresa}`;let q=Pe.from("clientes").select("*").eq("codigo_empresa",t.codigo_empresa).order("codigo",{ascending:!0});if(b.searchTerm.trim()!==""){const ve=b.searchTerm.trim();/^\d+$/.test(ve)?q=q.or(`codigo.eq.${ve},nome.ilike.%${ve}%,email.ilike.%${ve}%,telefone.ilike.%${ve}%`):q=q.or(`nome.ilike.%${ve}%,email.ilike.%${ve}%,telefone.ilike.%${ve}%`)}b.status!=="all"&&(q=q.eq("status",b.status));const X=setTimeout(()=>{try{if(!B){const ve=JSON.parse(localStorage.getItem(J)||"[]");Array.isArray(ve)&&ve.length>0&&(console.warn("[Clientes] slow fallback: using cached snapshot"),i(ve),A.current=ve.length)}}catch{}},2e3),{data:Z,error:pe}=await q;if(pe){if(!_.current){_.current=!0,setTimeout(C,900);return}throw pe}const te=Z||[];if(te.length===0&&B&&!_.current){_.current=!0,setTimeout(C,700);return}_.current=!1,i(te);try{localStorage.setItem(J,JSON.stringify(te))}catch{}A.current=te.length,j.current=Date.now()}catch(B){e({title:"Erro ao carregar clientes",description:B.message,variant:"destructive"})}finally{l(!1);try{clearTimeout(slowFallback)}catch{}}};y.useEffect(()=>{try{const B=localStorage.getItem("auth:userProfile"),J=t?.codigo_empresa||B&&JSON.parse(B)?.codigo_empresa||null;if(J){const q=`clientes:list:${J}`,X=JSON.parse(localStorage.getItem(q)||"[]");Array.isArray(X)&&X.length&&a.length===0&&(i(X),A.current=X.length)}}catch{}if(r&&t?.codigo_empresa){const B=setTimeout(C,50);return()=>clearTimeout(B)}return()=>{}},[r,t?.codigo_empresa]),y.useEffect(()=>{if(r&&t?.codigo_empresa){const B=setTimeout(C,200);return()=>clearTimeout(B)}return()=>{}},[b.searchTerm,b.status,r,t?.codigo_empresa]),y.useEffect(()=>{const B=()=>{(Date.now()-(j.current||0)>3e4||A.current===0)&&r&&t?.codigo_empresa&&C()},J=()=>{document.visibilityState==="visible"&&(Date.now()-(j.current||0)>3e4||A.current===0)&&r&&t?.codigo_empresa&&C()};return window.addEventListener("focus",B),document.addEventListener("visibilitychange",J),()=>{window.removeEventListener("focus",B),document.removeEventListener("visibilitychange",J)}},[r,t?.codigo_empresa]);const k=y.useMemo(()=>{const J=new Date().getMonth();return{total:a.length,birthdays:a.filter(q=>q.aniversario&&new Date(q.aniversario).getMonth()===J).length,active:a.filter(q=>q.status==="Ativo").length}},[a]);function R(B){const J=["Cdigo","Tipo Pessoa","Nome/Razo Social","Apelido/Nome Fantasia","CPF","CNPJ","RG","IE","Email","Telefone","Fone 2","Celular 1","Celular 2","WhatsApp","CEP","Endereo","Nmero","Complemento","Bairro","Cidade","UF","Cidade IBGE","Limite Crdito","Tipo Recebimento","Regime Tributrio","Tipo Contribuinte","Aniversrio","Sexo","Estado Civil","Nome da Me","Nome do Pai","Observaes"," Cliente"," Fornecedor"," Funcionrio"," Administradora"," Parceiro","CCF/SPC","Status"],q=";",X=ye=>{if(!ye)return"";try{const ce=new Date(ye);if(!isNaN(ce)){const Ft=String(ce.getDate()).padStart(2,"0"),qt=String(ce.getMonth()+1).padStart(2,"0"),It=ce.getFullYear();return`${Ft}/${qt}/${It}`}}catch{}return String(ye)},Z=ye=>{const ce=Number(ye??0);return Number.isFinite(ce)?ce.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},pe=ye=>ye?"Sim":"No",te=ye=>{const ce=ye==null?"":String(ye);return/[";\n]/.test(ce)?`"${ce.replace(/"/g,'""')}"`:ce},ve=[];ve.push("\uFEFF"+J.join(q));for(const ye of B){const ce=[ye.codigo??"",ye.tipo_pessoa||"",ye.nome||"",ye.apelido||"",ye.cpf||"",ye.cnpj||"",ye.rg||"",ye.ie||"",ye.email||"",ye.telefone||"",ye.fone2||"",ye.celular1||"",ye.celular2||"",ye.whatsapp||"",ye.cep||"",ye.endereco||"",ye.numero||"",ye.complemento||"",ye.bairro||"",ye.cidade||"",ye.uf||"",ye.cidade_ibge||"",Z(ye.limite_credito),ye.tipo_recebimento||"",ye.regime_tributario||"",ye.tipo_contribuinte||"",X(ye.aniversario),ye.sexo||"",ye.estado_civil||"",ye.nome_mae||"",ye.nome_pai||"",ye.observacoes||"",pe(!!ye.flag_cliente),pe(!!ye.flag_fornecedor),pe(!!ye.flag_funcionario),pe(!!ye.flag_administradora),pe(!!ye.flag_parceiro),pe(!!ye.flag_ccf_spc),ye.status==="active"?"Ativo":"Inativo"].map(te).join(q);ve.push(ce)}const Ce=new Blob([ve.join(`
`)],{type:"text/csv;charset=utf-8;"}),he=URL.createObjectURL(Ce),qe=document.createElement("a");qe.href=he,qe.download="clientes.csv",document.body.appendChild(qe),qe.click(),document.body.removeChild(qe),URL.revokeObjectURL(he)}const E=()=>{try{R(I),e({title:"Exportao concluda",description:`${I.length} cliente(s) exportado(s).`,variant:"success",className:"bg-amber-500 text-black shadow-xl"})}catch(B){e({title:"Falha ao exportar",description:B?.message||"No foi possvel gerar o arquivo.",variant:"destructive"})}},I=y.useMemo(()=>(new Date().getMonth(),a.filter(J=>{const q=b.searchTerm.toLowerCase()===""||(J.nome||"").toLowerCase().includes(b.searchTerm.toLowerCase())||(J.cpf||"").includes(b.searchTerm)||(J.telefone||"").includes(b.searchTerm),X=b.status==="all"||J.status===b.status;let Z=!0;return b.tipo==="clientes"?Z=J.flag_cliente===!0:b.tipo==="fornecedores"?Z=J.flag_fornecedor===!0:b.tipo==="ambos"&&(Z=J.flag_cliente===!0&&J.flag_fornecedor===!0),q&&X&&Z})),[a,b]),[T,M]=y.useState({by:"codigo",dir:"asc"}),z=B=>{M(J=>J.by===B?{by:B,dir:J.dir==="asc"?"desc":"asc"}:{by:B,dir:"asc"})},V=y.useMemo(()=>{const B=[...I],J=T.dir==="asc"?1:-1,q=(X,Z)=>Number.isFinite(X)?X:Z;return B.sort((X,Z)=>{if(T.by==="codigo"){const pe=q(parseInt(String(X.codigo||"").trim(),10),1/0),te=q(parseInt(String(Z.codigo||"").trim(),10),1/0);return pe===te?0:pe>te?J:-J}if(T.by==="nome"){const pe=(X.nome||"").toString(),te=(Z.nome||"").toString();return pe.localeCompare(te,"pt-BR",{sensitivity:"base"})*J}return 0}),B},[I,T]),W=B=>{p(B),m(!0)},$=()=>{x(null),f(!0)},G=B=>{m(!1),x(B),f(!0)},me=async B=>{try{const{error:J}=await Pe.from("clientes").update({status:"inactive"}).eq("id",B.id);if(J)throw J;m(!1),e({title:"Cliente inativado",description:`${B.nome} foi marcado como inativo.`}),C()}catch(J){e({title:"Erro ao inativar cliente",description:J.message,variant:"destructive"})}},de=()=>{w({searchTerm:"",status:"all",tipo:"todos"})},L=b.searchTerm!==""||b.status!=="all"||b.tipo!=="todos";return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-full flex flex-col",children:s.jsxs(ur.div,{variants:iJe,initial:"hidden",animate:"visible",children:[s.jsxs(ur.div,{variants:are,className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary tracking-tighter",children:"Clientes & Fornecedores"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Gesto completa de clientes e fornecedores"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[s.jsx(Ae,{variant:"outline",size:"icon",onClick:()=>u(B=>!B),title:c?"Ocultar resumo":"Mostrar resumo","aria-label":c?"Ocultar resumo":"Mostrar resumo",className:"flex-shrink-0",children:c?s.jsx(Sb,{className:"h-4 w-4"}):s.jsx(_b,{className:"h-4 w-4"})}),s.jsxs(Ae,{variant:"outline",onClick:E,className:"text-sm",children:[s.jsx(Ms,{className:"mr-2 h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),s.jsx("span",{className:"sm:hidden",children:"CSV"})]}),s.jsxs(Ae,{onClick:$,className:"text-sm",children:[s.jsx(ri,{className:"mr-2 h-4 w-4"})," ",s.jsx("span",{className:"hidden xs:inline",children:"Novo"}),s.jsx("span",{className:"xs:hidden",children:"Novo"})]})]})]}),c&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx(Pw,{icon:ps,title:"Total de Clientes",value:a.filter(B=>B.flag_cliente).length,color:"text-brand",onClick:()=>w(B=>({...B,tipo:"clientes"})),isActive:b.tipo==="clientes"}),s.jsx(Pw,{icon:ps,title:"Total de Fornecedores",value:a.filter(B=>B.flag_fornecedor).length,color:"text-purple-500",onClick:()=>w(B=>({...B,tipo:"fornecedores"})),isActive:b.tipo==="fornecedores"}),s.jsx(Pw,{icon:ice,title:"Aniversariantes do Ms",value:k.birthdays,color:"text-info",onClick:()=>w(B=>({...B,tipo:"todos"})),isActive:b.tipo==="todos"}),s.jsx(Pw,{icon:Nb,title:"Ativos",value:k.active,color:"text-success",onClick:()=>w(B=>({...B,status:"active"})),isActive:b.status==="active"})]}),s.jsx(ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col gap-4",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar por nome, CPF ou telefone...",className:"pl-9",value:b.searchTerm,onChange:B=>w(J=>({...J,searchTerm:B.target.value}))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(kn,{value:b.tipo,onValueChange:B=>w(J=>({...J,tipo:B})),children:[s.jsx(An,{className:"w-full sm:w-[200px]",children:s.jsx(On,{placeholder:"Tipo"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"todos",children:"Todos"}),s.jsx(Ht,{value:"clientes",children:"Apenas Clientes"}),s.jsx(Ht,{value:"fornecedores",children:"Apenas Fornecedores"}),s.jsx(Ht,{value:"ambos",children:"Clientes e Fornecedores"})]})]}),s.jsxs(kn,{value:b.status,onValueChange:B=>w(J=>({...J,status:B})),children:[s.jsx(An,{className:"w-full sm:w-[180px]",children:s.jsx(On,{placeholder:"Status"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"all",children:"Todos os Status"}),s.jsx(Ht,{value:"active",children:"Ativos"}),s.jsx(Ht,{value:"inactive",children:"Inativos"})]})]}),L&&s.jsxs(Ae,{variant:"ghost",onClick:de,className:"w-full sm:w-auto",children:[s.jsx(K2,{className:"mr-2 h-4 w-4"}),"Limpar Filtros"]})]})]}),s.jsx("div",{className:"md:hidden space-y-3 p-4",children:o?s.jsx("div",{className:"text-center py-8 text-text-muted",children:"Carregando..."}):V.length>0?V.map(B=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3 cursor-pointer hover:border-brand/50 transition-colors",onClick:()=>W(B),children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{className:"font-mono text-sm font-semibold text-text-primary",children:B.codigo}),s.jsx("span",{className:Et("px-2 py-0.5 text-xs font-semibold rounded-full flex-shrink-0",B.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:B.status==="active"?"Ativo":"Inativo"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-base text-text-primary mb-1",children:B.nome||""}),s.jsx("p",{className:"text-sm text-text-muted",children:B.cpf&&`CPF: ${B.cpf}`||B.cnpj&&`CNPJ: ${B.cnpj}`||(B.apelido?`Apelido: ${B.apelido}`:" ")})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[B.flag_cliente&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),B.flag_fornecedor&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]}),(B.telefone||B.email)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Contato"}),s.jsx("span",{className:"text-sm font-medium",children:B.telefone||B.email})]}),s.jsx("div",{className:"text-xs text-text-muted text-center pt-2 border-t border-border/50",children:"Toque para ver detalhes"})]},B.id)):s.jsx("div",{className:"text-center py-8 text-text-muted",children:"Nenhum cliente encontrado com os filtros aplicados."})}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(cs,{children:[s.jsx(us,{className:"sticky top-0 bg-surface-2 z-10",children:s.jsxs(Qn,{className:"border-b border-border",children:[s.jsxs(Mr,{className:"select-none cursor-pointer text-text-secondary",onClick:()=>z("codigo"),title:"Ordenar por cdigo",children:["Cdigo ",T.by==="codigo"?T.dir==="asc"?"":"":""]}),s.jsxs(Mr,{className:"text-text-secondary select-none cursor-pointer",onClick:()=>z("nome"),title:"Ordenar por nome",children:["Cliente ",T.by==="nome"?T.dir==="asc"?"":"":""]}),s.jsx(Mr,{className:"text-text-secondary",children:"Contato"}),s.jsx(Mr,{className:"text-text-secondary",children:"Tipo"}),s.jsx(Mr,{className:"text-text-secondary",children:"Status"})]})}),s.jsx(ds,{children:o?s.jsx(Qn,{children:s.jsx(Sr,{colSpan:5,className:"h-24 text-center",children:"Carregando..."})}):V.length>0?V.map(B=>s.jsxs(Qn,{className:"cursor-pointer",onClick:()=>W(B),children:[s.jsx(Sr,{className:"font-mono text-base font-semibold text-text-primary",children:B.codigo}),s.jsx(Sr,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-base font-semibold text-text-primary truncate",children:B.nome||""}),s.jsx("span",{className:"text-xs text-text-muted truncate",children:B.cpf&&`CPF: ${B.cpf}`||B.cnpj&&`CNPJ: ${B.cnpj}`||(B.apelido?`Apelido: ${B.apelido}`:" ")})]})}),s.jsx(Sr,{children:s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-sm truncate",children:B.telefone||B.email||""})})}),s.jsx(Sr,{children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.flag_cliente&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/10 text-blue-500 border border-blue-500/30",children:"Cliente"}),B.flag_fornecedor&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-500/10 text-purple-500 border border-purple-500/30",children:"Fornecedor"})]})}),s.jsx(Sr,{children:s.jsx("span",{className:Et("px-2 py-1 text-xs font-semibold rounded-full",B.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:B.status==="active"?"Ativo":"Inativo"})})]},B.id)):s.jsx(Qn,{children:s.jsx(Sr,{colSpan:5,className:"h-24 text-center",children:"Nenhum cliente encontrado com os filtros aplicados."})})})]})})]})})]})}),s.jsx(Dee,{open:d,onOpenChange:f,client:v,onSaved:C}),s.jsx(oJe,{open:h,onOpenChange:m,client:g,onEdit:G,onInactivate:me,codigoEmpresa:t?.codigo_empresa})]})}const lJe=[],cJe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ire={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},jA=({icon:e,title:t,value:r,color:n})=>{const a=e;return s.jsxs(ur.div,{variants:ire,className:"bg-surface rounded-lg border border-border p-4 flex items-center gap-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n}/20`,children:s.jsx(a,{className:`w-6 h-6 ${n}`})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium",children:t}),s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r})]})]})};function uJe({open:e,onOpenChange:t,member:r,onEdit:n}){return r?s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{className:"sm:max-w-[500px] w-full",children:[s.jsx(nn,{children:s.jsx(Xr,{children:"Detalhes do Funcionrio"})}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:r.name}),s.jsx("p",{className:"text-brand font-semibold",children:r.role})]}),s.jsxs("div",{className:"bg-surface-2 p-8 rounded-lg text-center border border-border",children:[s.jsx("p",{className:"text-lg font-semibold text-text-secondary",children:" Em desenvolvimento"}),s.jsx("p",{className:"text-sm text-text-muted mt-2",children:"Detalhes completos do funcionrio estaro disponveis em breve."})]})]}),s.jsxs(Dn,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Fechar"})}),s.jsxs(Ae,{onClick:()=>n(r),className:"w-full sm:w-auto",children:[s.jsx(Sm,{className:"mr-2 h-4 w-4"})," Editar"]})]})]})}):null}function dJe({open:e,onOpenChange:t,member:r,onSave:n,loading:a}){const{toast:i}=ii(),[o,l]=y.useState(r?.name||""),[c,u]=y.useState(r?.role||"");y.useEffect(()=>{e&&(l(r?.name||""),u(r?.role||""))},[r,e]);const d=async f=>{if(f.preventDefault(),!o.trim()){i({title:"Nome  obrigatrio",variant:"destructive"});return}await n({name:o.trim(),role:c.trim()})};return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{className:"sm:max-w-[700px] w-full",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:r?"Editar Funcionrio":"Novo Funcionrio"}),s.jsx(cn,{children:"Informe apenas nome e cargo. O cargo  livre (texto)."})]}),s.jsx("form",{onSubmit:d,className:"py-2",children:s.jsx("div",{className:"bg-surface-2 border border-border rounded-lg p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ct,{htmlFor:"name",children:"Nome"}),s.jsxs("div",{className:"relative",children:[s.jsx(cE,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{id:"name",value:o,onChange:f=>l(f.target.value),className:"pl-9",placeholder:"Ex.: Maria Silva"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ct,{htmlFor:"role",children:"Cargo"}),s.jsxs("div",{className:"relative",children:[s.jsx(cce,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{id:"role",value:c,onChange:f=>u(f.target.value),className:"pl-9",placeholder:"Ex.: Gerente, Caixa, ..."})]})]})]})})}),s.jsxs(Dn,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[s.jsx(Fm,{asChild:!0,children:s.jsx(Ae,{type:"button",variant:"secondary",className:"w-full sm:w-auto",children:"Cancelar"})}),s.jsx(Ae,{type:"submit",onClick:d,disabled:!!a,className:"w-full sm:w-auto",children:a?"Salvando...":"Salvar"})]})]})})}function fJe(){const{company:e,authReady:t,userProfile:r}=io(),{toast:n}=ii(),[a,i]=y.useState(lJe),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(null),[h,m]=y.useState(null),[g,p]=y.useState(""),[v,x]=y.useState(!1),b=y.useRef(!1),w=y.useRef(!0);y.useEffect(()=>(w.current=!0,()=>{w.current=!1}),[]);const _=async()=>{try{const T=e?.codigo_empresa||null;if(!T&&!e?.id)return;const M=T?`team:list:${T}`:"team:list",z=setTimeout(()=>{if(w.current)try{const L=localStorage.getItem(M),B=L?JSON.parse(L):[];Array.isArray(B)&&B.length>0&&(console.warn("[Equipe] slow fallback: using cached snapshot"),i(B))}catch{}},5e3);let V=Pe.from("colaboradores").select("*").order("nome",{ascending:!0});T&&(V=V.eq("codigo_empresa",T));const{data:W,error:$}=await V;if($){if(!b.current){b.current=!0,setTimeout(_,800);return}throw $}let me=(W||[]).map(L=>({id:L.id,name:L.nome||"",role:L.cargo||"user",status:L.ativo===!1?"inactive":"active",online:!1,permissions:{}}));const de=r?.codigo_empresa&&e?.codigo_empresa&&r.codigo_empresa===e.codigo_empresa;if(r?.id&&de&&(me.some(B=>B.id===r.id)||(me=[{id:r.id,name:r.nome||"Voc",role:r.cargo||"user",status:"active",online:!1,permissions:{}},...me])),!w.current)return;i(me);try{localStorage.setItem(M,JSON.stringify(me))}catch{}}catch(T){console.error("Falha ao carregar equipe:",T);const M=e?.codigo_empresa||null,z=M?`team:list:${M}`:"team:list";try{const V=localStorage.getItem(z);V&&w.current&&i(JSON.parse(V))}catch{}}finally{b.current=!1}};y.useEffect(()=>{const T=e?.codigo_empresa||null;if(!(!t||!T)){try{const M=localStorage.getItem(`team:list:${T}`),z=M?JSON.parse(M):[];Array.isArray(z)&&z.length>0&&i(z)}catch{}_()}},[t,e?.codigo_empresa]),y.useEffect(()=>{const T=()=>{document.visibilityState==="visible"&&t&&(e?.codigo_empresa||e?.id)&&_()},M=()=>{t&&(e?.codigo_empresa||e?.id)&&_()};return document.addEventListener("visibilitychange",T),window.addEventListener("focus",M),()=>{document.removeEventListener("visibilitychange",T),window.removeEventListener("focus",M)}},[t,e?.codigo_empresa,e?.id]);const j=y.useMemo(()=>({total:a.length,active:a.filter(T=>T.status==="active").length,inactive:a.filter(T=>T.status==="inactive").length}),[a]),A=y.useMemo(()=>a.filter(T=>T.name.toLowerCase().includes(g.toLowerCase())||T.role.toLowerCase().includes(g.toLowerCase())),[a,g]),P=T=>{f(T),u(!0)},C=()=>{m(null),l(!0)},k=T=>{u(!1),m(T),l(!0)},R=T=>{m(T),l(!0)},E=async({name:T,role:M})=>{try{if(x(!0),!e?.codigo_empresa&&!e?.id)throw new Error("Empresa no encontrada para o usurio atual.");let z=e?.codigo_empresa||null;if(!z&&e?.id){const{data:V}=await Pe.from("empresas").select("codigo_empresa").eq("id",e.id).single();z=V?.codigo_empresa||null}if(!z)throw new Error("Empresa sem cdigo. Defina o cdigo da empresa antes de adicionar colaboradores.");if(h){const{error:V}=await Pe.from("colaboradores").update({nome:T,cargo:M}).eq("id",h.id);if(V)throw V;n({title:"Funcionrio atualizado",description:h.name,variant:"default"})}else{const{error:V}=await Pe.from("colaboradores").insert({codigo_empresa:z,nome:T,cargo:M,ativo:!0});if(V)throw V;n({title:"Funcionrio criado com sucesso",description:T,variant:"success"})}await _(),l(!1),m(null)}catch(z){n({title:"Erro ao salvar funcionrio",description:z.message||String(z),variant:"destructive"})}finally{x(!1)}},I=async T=>{try{if(!(e?.id||e?.codigo_empresa))return;const M=a[0]?.id;if(T.id===M){n({title:"Ao no permitida",description:"No  possvel desativar o primeiro funcionrio.",variant:"destructive"});return}if(r?.id&&T.id===r.id){n({title:"Ao no permitida",description:"Voc no pode desativar o seu prprio usurio.",variant:"destructive"});return}if(a.filter(V=>V.status==="active").length<=1){n({title:"Ao no permitida",description:"Deve haver pelo menos um funcionrio ativo.",variant:"destructive"});return}const{error:z}=await Pe.from("colaboradores").update({ativo:!1}).eq("id",T.id);if(z)throw z;n({title:"Funcionrio desativado",description:T.name}),await _()}catch(M){n({title:"Erro ao desativar",description:M.message||String(M),variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-full flex flex-col",children:s.jsxs(ur.div,{variants:cJe,initial:"hidden",animate:"visible",children:[s.jsxs(ur.div,{variants:ire,className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary tracking-tighter",children:"Gesto de Equipe"}),s.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Controle de funcionrios, permisses e logs."})]}),s.jsxs(Ae,{onClick:C,disabled:!t||!e?.codigo_empresa,title:t?e?.codigo_empresa?"":"Empresa sem cdigo. Defina o cdigo da empresa antes.":"Aguardando autenticao...",children:[s.jsx(ri,{className:"mr-2 h-4 w-4"})," Novo Funcionrio"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(jA,{icon:ps,title:"Total",value:j.total,color:"text-brand"}),s.jsx(jA,{icon:bce,title:"Ativos",value:j.active,color:"text-success"}),s.jsx(jA,{icon:gce,title:"Desativados",value:j.inactive,color:"text-danger"})]}),s.jsx(ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsxs("div",{className:"bg-surface rounded-lg border border-border",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar por nome ou cargo...",className:"pl-9",value:g,onChange:T=>p(T.target.value)})]})}),s.jsx("div",{className:"md:hidden p-4 space-y-3",children:A.length===0?s.jsx("div",{className:"text-center py-10 text-text-muted",children:"Nenhum funcionrio cadastrado."}):A.map((T,M)=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",onClick:()=>P(T),children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-base text-text-primary truncate",children:T.name}),s.jsx("p",{className:"text-sm text-text-muted mt-0.5",children:T.role})]}),s.jsx("span",{className:Et("inline-flex px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",T.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:T.status==="active"?"Ativo":"Inativo"})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(Ae,{variant:"outline",size:"sm",onClick:z=>{z.stopPropagation(),P(T)},className:"flex-1",children:"Ver Detalhes"}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:z=>{z.stopPropagation(),R(T)},children:s.jsx(Sm,{className:"h-3 w-3"})}),s.jsxs(Ex,{children:[s.jsx(kx,{asChild:!0,children:s.jsx(Ae,{variant:"outline",size:"sm",onClick:z=>z.stopPropagation(),children:s.jsx(VR,{className:"h-3 w-3"})})}),s.jsx(Eg,{align:"end",children:s.jsx(zl,{className:"text-danger",disabled:M===0||a.filter(z=>z.status==="active").length<=1||r?.id&&T.id===r.id,onClick:z=>{z.stopPropagation(),I(T)},children:"Desativar"})})]})]})]},T.id))}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Funcionrio"}),s.jsx(Mr,{children:"Cargo"}),s.jsx(Mr,{children:"Status"}),s.jsx(Mr,{className:"w-[80px] text-center",children:"Aes"})]})}),s.jsxs(ds,{children:[A.length===0&&s.jsx(Qn,{children:s.jsx(Sr,{colSpan:4,className:"text-center py-10 text-text-muted",children:"Nenhum funcionrio cadastrado."})}),A.map((T,M)=>s.jsxs(Qn,{className:"cursor-pointer",onClick:()=>P(T),children:[s.jsx(Sr,{className:"font-medium",children:s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("span",{children:T.name})})}),s.jsx(Sr,{children:T.role}),s.jsx(Sr,{children:s.jsx("span",{className:Et("px-2 py-1 text-xs font-semibold rounded-full",T.status==="active"?"bg-success/10 text-success":"bg-danger/10 text-danger"),children:T.status==="active"?"Ativo":"Inativo"})}),s.jsx(Sr,{className:"text-center",children:s.jsxs(Ex,{children:[s.jsx(kx,{asChild:!0,children:s.jsx(Ae,{variant:"ghost",className:"h-8 w-8 p-0 mx-auto",onClick:z=>z.stopPropagation(),children:s.jsx(VR,{className:"h-4 w-4"})})}),s.jsxs(Eg,{align:"end",children:[s.jsx(zl,{onClick:z=>{z.stopPropagation(),P(T)},children:"Ver Detalhes"}),s.jsx(zl,{onClick:z=>{z.stopPropagation(),R(T)},children:"Editar"}),s.jsx(zl,{className:"text-danger",disabled:M===0||a.filter(z=>z.status==="active").length<=1||r?.id&&T.id===r.id,onClick:z=>{z.stopPropagation(),I(T)},children:"Desativar"})]})]})})]},T.id))]})]})})]})})]})}),s.jsx(dJe,{open:o,onOpenChange:l,member:h,onSave:E,loading:v}),s.jsx(uJe,{open:c,onOpenChange:u,member:d,onEdit:k})]})}const hJe="v1.0.0";function lf({title:e,icon:t,children:r,className:n="",collapsible:a=!1,defaultOpen:i=!0}){return a?s.jsx("div",{className:`bg-surface rounded-lg border border-border shadow-sm ${n}`,children:s.jsxs("details",{className:"group",open:i,children:[s.jsxs("summary",{className:"list-none cursor-pointer select-none p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[t&&s.jsx(t,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"text-base font-semibold",children:e})]}),s.jsx("span",{className:"text-xs text-text-secondary group-open:rotate-180 transition-transform",children:""})]}),s.jsx("div",{className:"px-4 pb-4",children:r})]})}):s.jsxs("div",{className:`bg-surface rounded-lg border border-border shadow-sm p-4 ${n}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t&&s.jsx(t,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"text-base font-semibold",children:e})]}),r]})}function cf({label:e,value:t}){return s.jsxs("div",{className:"flex items-center justify-between gap-3 py-1 text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:e}),s.jsx("span",{className:"font-medium truncate",children:t||""})]})}function mJe(){const{userProfile:e,company:t,authReady:r,loading:n}=io();js();const[a,i]=y.useState("Agenda"),[o,l]=y.useState("Mdia"),[c,u]=y.useState(""),[d,f]=y.useState(""),[h,m]=y.useState(!0),[g,p]=y.useState(null),[v,x]=y.useState(!1),[b,w]=y.useState(!1),_="Fluxo7 Arena",j="fluxo7team@gmail.com",A="https://wa.me/5534998936088",P="tel:+5534998936088",C="+55 (34) 99893-6088";y.useEffect(()=>{try{const z=window.matchMedia("(pointer:fine)"),V=()=>m(z.matches);return V(),z.addEventListener?.("change",V),()=>z.removeEventListener?.("change",V)}catch{m(!0)}},[]),y.useEffect(()=>{const z=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;w(z),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&x(!0);const V=$=>{$.preventDefault(),p($)},W=()=>{x(!0),p(null)};return window.addEventListener("beforeinstallprompt",V),window.addEventListener("appinstalled",W),()=>{window.removeEventListener("beforeinstallprompt",V),window.removeEventListener("appinstalled",W)}},[]);const k=async()=>{if(!g)return;g.prompt();const{outcome:z}=await g.userChoice;z==="accepted"&&x(!0),p(null)},R=()=>{navigator.share?navigator.share({title:"F7 Arena",text:"Adicione F7 Arena  sua tela inicial",url:window.location.href}).catch(()=>{alert(`Para adicionar  tela inicial:

1. Toque no boto de Compartilhar (cone de quadrado com seta)
2. Role para baixo
3. Toque em "Adicionar  Tela de Incio"`)}):alert(`Para adicionar  tela inicial:

1. Toque no boto de Compartilhar (cone de quadrado com seta)
2. Role para baixo
3. Toque em "Adicionar  Tela de Incio"`)},E=y.useMemo(()=>{try{return{empresa:t?.nome||t?.fantasia||t?.razao_social||t?.razaoSocial||t?.displayName||t?.codigo_empresa||"",usuario:e?.nome||e?.name||e?.email||"",dataHora:new Date().toLocaleString("pt-BR")}}catch{return{empresa:"",usuario:"",dataHora:new Date().toLocaleString("pt-BR")}}},[t?.nome,t?.fantasia,t?.razao_social,t?.razaoSocial,t?.displayName,t?.codigo_empresa,e?.nome,e?.name,e?.email]),I=y.useMemo(()=>[`[${_} - Suporte]`,`Assunto: ${c||"(sem assunto)"} `,`Categoria: ${a} `,`Severidade: ${o}`,"","Descrio:",(d||"(adicione uma descrio detalhada, passos para reproduzir, prints se possvel)")+`
`," Dados ",`Empresa: ${E.empresa}`,`Usurio: ${E.usuario}`,`Data e Hora: ${E.dataHora}`].join(`
`),[c,a,o,d,E]),T=`${A}?text=${encodeURIComponent(I)}`,M=`mailto:${j}?subject=${encodeURIComponent(`[Suporte] ${c||"Assunto"}`)}&body=${encodeURIComponent(I)}`;return s.jsxs("div",{className:"px-4 md:px-6 lg:px-8 py-4 md:py-6",children:[s.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 md:p-6 mb-6",children:[s.jsxs("div",{className:"flex items-start md:items-center justify-between gap-4 flex-col md:flex-row",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand/10 border border-brand/30 flex items-center justify-center",children:s.jsx(MW,{className:"w-5 h-5 text-brand"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Suporte"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Precisa de ajuda? Fale com a gente ou consulte as respostas rpidas abaixo."})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-10 h-10 bg-brand rounded-xl flex items-center justify-center",children:s.jsx(Cb,{className:"w-6 h-6 text-primary-foreground"})}),s.jsxs("div",{className:"flex items-baseline",children:[s.jsx("span",{className:"font-extrabold text-base md:text-xl",style:{color:"#FF6600"},children:"Fluxo"}),s.jsx("span",{className:"font-extrabold text-base md:text-xl",style:{color:"#FFAA33"},children:"7"}),s.jsx("span",{className:"font-medium text-base md:text-xl",style:{color:"#B0B0B0"},children:" Arena"})]})]}),s.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:["Verso ",hJe]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[s.jsx(lf,{title:"Status",icon:YC,children:s.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[s.jsx(cf,{label:"Empresa",value:E.empresa}),s.jsx(cf,{label:"Usurio",value:`${E.usuario}`})]})}),s.jsx(lf,{title:"Fale com a gente",icon:XC,children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("a",{href:A,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-brand text-black hover:opacity-90 transition",children:[s.jsx(XC,{className:"w-4 h-4"})," WhatsApp"]}),s.jsxs("a",{href:`mailto:${j}`,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(oE,{className:"w-4 h-4"})," E-mail"]}),s.jsxs("a",{href:P,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(HR,{className:"w-4 h-4"})," ",h?C:"Telefone"]})]})}),!v&&b&&s.jsx(lf,{title:"Adicionar  Tela Inicial",icon:KR,children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-text-secondary",children:"Crie um atalho do F7 Arena na sua tela inicial para acesso rpido."}),s.jsxs("button",{onClick:R,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-md bg-brand text-black font-medium hover:opacity-90 transition",children:[s.jsx(GR,{className:"w-4 h-4"})," Criar Atalho"]}),s.jsxs("details",{className:"text-xs text-text-muted",children:[s.jsx("summary",{className:"cursor-pointer hover:text-text-secondary",children:"Como fazer manualmente?"}),s.jsxs("div",{className:"mt-2 space-y-1 pl-2",children:[s.jsxs("p",{children:["1. Toque no boto ",s.jsx(GR,{className:"inline w-3 h-3"})," (Compartilhar)"]}),s.jsx("p",{children:'2. Role para baixo e toque em "Adicionar  Tela de Incio"'}),s.jsx("p",{children:'3. Toque em "Adicionar"'})]})]})]})}),!v&&!b&&g&&s.jsx(lf,{title:"Instalar Aplicativo",icon:KR,children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-text-secondary",children:"Instale o F7 Arena no seu dispositivo para acesso rpido e experincia completa de aplicativo."}),s.jsxs("button",{onClick:k,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-md bg-brand text-black font-medium hover:opacity-90 transition",children:[s.jsx(Ms,{className:"w-4 h-4"})," Instalar Agora"]})]})}),v&&s.jsx(lf,{title:"Aplicativo Instalado",icon:YC,children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[s.jsx(YC,{className:"w-4 h-4"}),s.jsx("span",{children:"F7 Arena est instalado no seu dispositivo!"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-3",children:s.jsx(lf,{title:"Perguntas Frequentes (FAQ)",children:s.jsxs("div",{className:"divide-y divide-border/60",children:[s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como abrir comanda de balco?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Abra o caixa antes. A tela de balco utiliza uma comanda sem mesa (mesa_id nulo). Se no existir, o sistema cria ao abrir o balco; caso o caixa esteja fechado, a abertura da comanda  bloqueada."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Por que no consigo fechar o caixa?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"O fechamento  bloqueado se houver comandas com itens em aberto (inclui balco e mesas). Finalize ou feche as comandas pendentes antes de encerrar o caixa."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como adicionar participantes no agendamento?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"No modal de agendamento, selecione um ou mais clientes. Aps salvar, o chip de pagamentos  atualizado imediatamente. Se no visualizar, recarregue os dados da agenda."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como ver o histrico completo do cliente?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Abra o cliente e utilize o Histrico Recente, que combina comandas e agendamentos em uma nica timeline com totais e status."})]}),s.jsxs("details",{className:"py-3",children:[s.jsx("summary",{className:"cursor-pointer select-none font-medium",children:"Como ajustar estoque mnimo e ver mais vendidos?"}),s.jsx("p",{className:"mt-2 text-sm text-text-secondary",children:"Na aba de Produtos voc pode gerenciar estoque, preos e relatrios. Utilize filtros e exportaes para anlise."})]})]})})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"space-y-3 lg:sticky lg:top-6",children:[s.jsx(lf,{title:"Reportar um problema",icon:Qle,collapsible:!0,defaultOpen:!1,children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Categoria"}),s.jsxs("select",{value:a,onChange:z=>i(z.target.value),className:"w-full mt-1 px-2 py-2 rounded-md bg-background border border-border",children:[s.jsx("option",{children:"Agenda"}),s.jsx("option",{children:"Vendas"}),s.jsx("option",{children:"Clientes"}),s.jsx("option",{children:"Produtos"}),s.jsx("option",{children:"Financeiro"}),s.jsx("option",{children:"Outros"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Severidade"}),s.jsxs("select",{value:o,onChange:z=>l(z.target.value),className:"w-full mt-1 px-2 py-2 rounded-md bg-background border border-border",children:[s.jsx("option",{children:"Baixa"}),s.jsx("option",{children:"Mdia"}),s.jsx("option",{children:"Alta"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Assunto"}),s.jsx("input",{value:c,onChange:z=>u(z.target.value),placeholder:"Ex.: Erro ao salvar agendamento",className:"w-full mt-1 px-3 py-2 rounded-md bg-background border border-border"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Descrio"}),s.jsx("textarea",{value:d,onChange:z=>f(z.target.value),rows:4,placeholder:"Descreva o que aconteceu, passos para reproduzir, expectativa.",className:"w-full mt-1 px-3 py-2 rounded-md bg-background border border-border resize-y"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[s.jsxs("a",{href:T,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-brand text-black hover:opacity-90 transition",children:[s.jsx(XC,{className:"w-4 h-4"})," Enviar no WhatsApp"]}),s.jsxs("a",{href:M,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(oE,{className:"w-4 h-4"})," Enviar por E-mail"]}),s.jsxs("a",{href:P,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-border hover:bg-surface-2 transition",children:[s.jsx(HR,{className:"w-4 h-4"})," ",h?C:"Ligar agora"]})]})]})}),s.jsx(lf,{title:"Diagnstico",icon:rce,children:s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx(cf,{label:"Empresa",value:E.empresa}),s.jsx(cf,{label:"Usurio",value:`${E.usuario}`}),s.jsx(cf,{label:"Data/Hora",value:E.dataHora}),s.jsx(cf,{label:"Canal - WhatsApp",value:"(34) 99893-6088"}),s.jsx(cf,{label:"Canal - E-mail",value:"fluxo7team@gmail.com"}),s.jsx(cf,{label:"Canal - Telefone",value:"(34) 99893-6088"})]})})]})})]})]})}var Wc=Uint8Array,vl=Uint16Array,xD=Int32Array,bD=new Wc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wD=new Wc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pz=new Wc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ore=function(e,t){for(var r=new vl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new xD(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},sre=ore(bD,2),pJe=sre.b,BO=sre.r;pJe[28]=258,BO[258]=28;var gJe=ore(wD,0),gz=gJe.r,zO=new vl(32768);for(var Ya=0;Ya<32768;++Ya){var uf=(Ya&43690)>>1|(Ya&21845)<<1;uf=(uf&52428)>>2|(uf&13107)<<2,uf=(uf&61680)>>4|(uf&3855)<<4,zO[Ya]=((uf&65280)>>8|(uf&255)<<8)>>1}var Dx=function(e,t,r){for(var n=e.length,a=0,i=new vl(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new vl(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new vl(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[zO[f]>>c]=u}else for(l=new vl(n),a=0;a<n;++a)e[a]&&(l[a]=zO[o[e[a]-1]++]>>15-e[a]);return l},Zm=new Wc(288);for(var Ya=0;Ya<144;++Ya)Zm[Ya]=8;for(var Ya=144;Ya<256;++Ya)Zm[Ya]=9;for(var Ya=256;Ya<280;++Ya)Zm[Ya]=7;for(var Ya=280;Ya<288;++Ya)Zm[Ya]=8;var k_=new Wc(32);for(var Ya=0;Ya<32;++Ya)k_[Ya]=5;var vJe=Dx(Zm,9,0),yJe=Dx(k_,5,0),lre=function(e){return(e+7)/8|0},xJe=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new Wc(e.subarray(t,r))},Ku=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Uy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},NA=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:ure,l:0};if(a==1){var o=new Wc(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,A){return j.f-A.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var m=new vl(h+1),g=qO(r[d-1],m,0);if(g>t){var n=0,p=0,v=g-t,x=1<<v;for(i.sort(function(A,P){return m[P.s]-m[A.s]||A.f-P.f});n<a;++n){var b=i[n].s;if(m[b]>t)p+=x-(1<<g-m[b]),m[b]=t;else break}for(p>>=v;p>0;){var w=i[n].s;m[w]<t?p-=1<<t-m[w]++-1:++n}for(;n>=0&&p;--n){var _=i[n].s;m[_]==t&&(--m[_],++p)}g=t}return{t:new Wc(m),l:g}},qO=function(e,t,r){return e.s==-1?Math.max(qO(e.l,t,r+1),qO(e.r,t,r+1)):t[e.s]=r},vz=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new vl(++t),n=0,a=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Wy=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},cre=function(e,t,r){var n=r.length,a=lre(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},yz=function(e,t,r,n,a,i,o,l,c,u,d){Ku(t,d++,r),++a[256];for(var f=NA(a,15),h=f.t,m=f.l,g=NA(i,15),p=g.t,v=g.l,x=vz(h),b=x.c,w=x.n,_=vz(p),j=_.c,A=_.n,P=new vl(19),C=0;C<b.length;++C)++P[b[C]&31];for(var C=0;C<j.length;++C)++P[j[C]&31];for(var k=NA(P,7),R=k.t,E=k.l,I=19;I>4&&!R[pz[I-1]];--I);var T=u+5<<3,M=Wy(a,Zm)+Wy(i,k_)+o,z=Wy(a,h)+Wy(i,p)+o+14+3*I+Wy(P,R)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&T<=M&&T<=z)return cre(t,d,e.subarray(c,c+u));var V,W,$,G;if(Ku(t,d,1+(z<M)),d+=2,z<M){V=Dx(h,m,0),W=h,$=Dx(p,v,0),G=p;var me=Dx(R,E,0);Ku(t,d,w-257),Ku(t,d+5,A-1),Ku(t,d+10,I-4),d+=14;for(var C=0;C<I;++C)Ku(t,d+3*C,R[pz[C]]);d+=3*I;for(var de=[b,j],L=0;L<2;++L)for(var B=de[L],C=0;C<B.length;++C){var J=B[C]&31;Ku(t,d,me[J]),d+=R[J],J>15&&(Ku(t,d,B[C]>>5&127),d+=B[C]>>12)}}else V=vJe,W=Zm,$=yJe,G=k_;for(var C=0;C<l;++C){var q=n[C];if(q>255){var J=q>>18&31;Uy(t,d,V[J+257]),d+=W[J+257],J>7&&(Ku(t,d,q>>23&31),d+=bD[J]);var X=q&31;Uy(t,d,$[X]),d+=G[X],X>3&&(Uy(t,d,q>>5&8191),d+=wD[X])}else Uy(t,d,V[q]),d+=W[q]}return Uy(t,d,V[256]),d+W[256]},bJe=new xD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ure=new Wc(0),wJe=function(e,t,r,n,a,i){var o=i.z||e.length,l=new Wc(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=bJe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,p=i.p||new vl(32768),v=i.h||new vl(g+1),x=Math.ceil(r/3),b=2*x,w=function(ye){return(e[ye]^e[ye+1]<<x^e[ye+2]<<b)&g},_=new xD(25e3),j=new vl(288),A=new vl(32),P=0,C=0,k=i.i||0,R=0,E=i.w||0,I=0;k+2<o;++k){var T=w(k),M=k&32767,z=v[T];if(p[M]=z,v[T]=M,E<=k){var V=o-k;if((P>7e3||R>24576)&&(V>423||!u)){d=yz(e,c,0,_,j,A,C,R,I,k-I,d),R=P=C=0,I=k;for(var W=0;W<286;++W)j[W]=0;for(var W=0;W<30;++W)A[W]=0}var $=2,G=0,me=m,de=M-z&32767;if(V>2&&T==w(k-de))for(var L=Math.min(h,V)-1,B=Math.min(32767,k),J=Math.min(258,V);de<=B&&--me&&M!=z;){if(e[k+$]==e[k+$-de]){for(var q=0;q<J&&e[k+q]==e[k+q-de];++q);if(q>$){if($=q,G=de,q>L)break;for(var X=Math.min(de,q-2),Z=0,W=0;W<X;++W){var pe=k-de+W&32767,te=p[pe],ve=pe-te&32767;ve>Z&&(Z=ve,z=pe)}}}M=z,z=p[M],de+=M-z&32767}if(G){_[R++]=268435456|BO[$]<<18|gz[G];var Ce=BO[$]&31,he=gz[G]&31;C+=bD[Ce]+wD[he],++j[257+Ce],++A[he],E=k+$,++P}else _[R++]=e[k],++j[e[k]]}}for(k=Math.max(k,E);k<o;++k)_[R++]=e[k],++j[e[k]];d=yz(e,c,u,_,j,A,C,R,I,k-I,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=v,i.p=p,i.i=k,i.w=E)}else{for(var k=i.w||0;k<o+u;k+=65535){var qe=k+65535;qe>=o&&(c[d/8|0]=u,qe=o),d=cre(c,d+1,e.subarray(k,qe))}i.i=o}return xJe(l,0,n+lre(d)+a)},dre=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},SJe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Wc(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return wJe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},fre=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},_Je=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=dre();a.p(t.dictionary),fre(e,2,a.d())}};function UO(e,t){t||(t={});var r=dre();r.p(e);var n=SJe(e,t,t.dictionary?6:2,4);return _Je(n,t),fre(n,n.length-4,r.d()),n}var jJe=typeof TextDecoder<"u"&&new TextDecoder,NJe=0;try{jJe.decode(ure,{stream:!0}),NJe=1}catch{}function CJe(e){if(Array.isArray(e))return e}function AJe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function PJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xz(e,t){return CJe(e)||AJe(e,t)||yxe(e,t)||PJe()}function bz(e,t="utf8"){return new TextDecoder(t).decode(e)}const EJe=new TextEncoder;function kJe(e){return EJe.encode(e)}const OJe=1024*8,TJe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),CA={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class SD{constructor(t=OJe,r={}){ga(this,"buffer");ga(this,"byteLength");ga(this,"byteOffset");ga(this,"length");ga(this,"offset");ga(this,"lastWrittenByte");ga(this,"littleEndian");ga(this,"_data");ga(this,"_mark");ga(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof SD)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=CA[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===TJe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new CA[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new CA[r](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return bz(this.readBytes(t))}decodeText(t=1,r="utf8"){return bz(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(kJe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const IJe=4,wz=0,Sz=1,DJe=2;function iy(e){let t=e.length;for(;--t>=0;)e[t]=0}const MJe=0,hre=1,RJe=2,LJe=3,$Je=258,_D=29,l1=256,sb=l1+1+_D,Tg=30,jD=19,mre=2*sb+1,gm=15,AA=16,FJe=7,ND=256,pre=16,gre=17,vre=18,WO=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),f2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),BJe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),yre=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zJe=512,ad=new Array((sb+2)*2);iy(ad);const Mx=new Array(Tg*2);iy(Mx);const lb=new Array(zJe);iy(lb);const cb=new Array($Je-LJe+1);iy(cb);const CD=new Array(_D);iy(CD);const O_=new Array(Tg);iy(O_);function PA(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let xre,bre,wre;function EA(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Sre=e=>e<256?lb[e]:lb[256+(e>>>7)],ub=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},qs=(e,t,r)=>{e.bi_valid>AA-r?(e.bi_buf|=t<<e.bi_valid&65535,ub(e,e.bi_buf),e.bi_buf=t>>AA-e.bi_valid,e.bi_valid+=r-AA):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},cu=(e,t,r)=>{qs(e,r[t*2],r[t*2+1])},_re=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},qJe=e=>{e.bi_valid===16?(ub(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},UJe=(e,t)=>{const r=t.dyn_tree,n=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,d,f,h,m,g,p=0;for(h=0;h<=gm;h++)e.bl_count[h]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<mre;u++)d=e.heap[u],h=r[r[d*2+1]*2+1]+1,h>c&&(h=c,p++),r[d*2+1]=h,!(d>n)&&(e.bl_count[h]++,m=0,d>=l&&(m=o[d-l]),g=r[d*2],e.opt_len+=g*(h+m),i&&(e.static_len+=g*(a[d*2+1]+m)));if(p!==0){do{for(h=c-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(h=c;h!==0;h--)for(d=e.bl_count[h];d!==0;)f=e.heap[--u],!(f>n)&&(r[f*2+1]!==h&&(e.opt_len+=(h-r[f*2+1])*r[f*2],r[f*2+1]=h),d--)}},jre=(e,t,r)=>{const n=new Array(gm+1);let a=0,i,o;for(i=1;i<=gm;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let l=e[o*2+1];l!==0&&(e[o*2]=_re(n[l]++,l))}},WJe=()=>{let e,t,r,n,a;const i=new Array(gm+1);for(r=0,n=0;n<_D-1;n++)for(CD[n]=r,e=0;e<1<<WO[n];e++)cb[r++]=n;for(cb[r-1]=n,a=0,n=0;n<16;n++)for(O_[n]=a,e=0;e<1<<f2[n];e++)lb[a++]=n;for(a>>=7;n<Tg;n++)for(O_[n]=a<<7,e=0;e<1<<f2[n]-7;e++)lb[256+a++]=n;for(t=0;t<=gm;t++)i[t]=0;for(e=0;e<=143;)ad[e*2+1]=8,e++,i[8]++;for(;e<=255;)ad[e*2+1]=9,e++,i[9]++;for(;e<=279;)ad[e*2+1]=7,e++,i[7]++;for(;e<=287;)ad[e*2+1]=8,e++,i[8]++;for(jre(ad,sb+1,i),e=0;e<Tg;e++)Mx[e*2+1]=5,Mx[e*2]=_re(e,5);xre=new PA(ad,WO,l1+1,sb,gm),bre=new PA(Mx,f2,0,Tg,gm),wre=new PA(new Array(0),BJe,0,jD,FJe)},Nre=e=>{let t;for(t=0;t<sb;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Tg;t++)e.dyn_dtree[t*2]=0;for(t=0;t<jD;t++)e.bl_tree[t*2]=0;e.dyn_ltree[ND*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Cre=e=>{e.bi_valid>8?ub(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},_z=(e,t,r,n)=>{const a=t*2,i=r*2;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},kA=(e,t,r)=>{const n=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&_z(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!_z(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},jz=(e,t,r)=>{let n,a,i=0,o,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+i++]&255,n+=(e.pending_buf[e.sym_buf+i++]&255)<<8,a=e.pending_buf[e.sym_buf+i++],n===0?cu(e,a,t):(o=cb[a],cu(e,o+l1+1,t),l=WO[o],l!==0&&(a-=CD[o],qs(e,a,l)),n--,o=Sre(n),cu(e,o,r),l=f2[o],l!==0&&(n-=O_[o],qs(e,n,l)));while(i<e.sym_next);cu(e,ND,t)},VO=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,l,c=-1,u;for(e.heap_len=0,e.heap_max=mre,o=0;o<i;o++)r[o*2]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,a&&(e.static_len-=n[u*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)kA(e,r,o);u=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],kA(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,r[u*2]=r[o*2]+r[l*2],e.depth[u]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,r[o*2+1]=r[l*2+1]=u,e.heap[1]=u++,kA(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],UJe(e,t),jre(r,c,e.bl_count)},Nz=(e,t,r)=>{let n,a=-1,i,o=t[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=t[(n+1)*2+1],!(++l<c&&i===o)&&(l<u?e.bl_tree[i*2]+=l:i!==0?(i!==a&&e.bl_tree[i*2]++,e.bl_tree[pre*2]++):l<=10?e.bl_tree[gre*2]++:e.bl_tree[vre*2]++,l=0,a=i,o===0?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},Cz=(e,t,r)=>{let n,a=-1,i,o=t[0*2+1],l=0,c=7,u=4;for(o===0&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[(n+1)*2+1],!(++l<c&&i===o)){if(l<u)do cu(e,i,e.bl_tree);while(--l!==0);else i!==0?(i!==a&&(cu(e,i,e.bl_tree),l--),cu(e,pre,e.bl_tree),qs(e,l-3,2)):l<=10?(cu(e,gre,e.bl_tree),qs(e,l-3,3)):(cu(e,vre,e.bl_tree),qs(e,l-11,7));l=0,a=i,o===0?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}},VJe=e=>{let t;for(Nz(e,e.dyn_ltree,e.l_desc.max_code),Nz(e,e.dyn_dtree,e.d_desc.max_code),VO(e,e.bl_desc),t=jD-1;t>=3&&e.bl_tree[yre[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},HJe=(e,t,r,n)=>{let a;for(qs(e,t-257,5),qs(e,r-1,5),qs(e,n-4,4),a=0;a<n;a++)qs(e,e.bl_tree[yre[a]*2+1],3);Cz(e,e.dyn_ltree,t-1),Cz(e,e.dyn_dtree,r-1)},GJe=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return wz;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Sz;for(r=32;r<l1;r++)if(e.dyn_ltree[r*2]!==0)return Sz;return wz};let Az=!1;const KJe=e=>{Az||(WJe(),Az=!0),e.l_desc=new EA(e.dyn_ltree,xre),e.d_desc=new EA(e.dyn_dtree,bre),e.bl_desc=new EA(e.bl_tree,wre),e.bi_buf=0,e.bi_valid=0,Nre(e)},Are=(e,t,r,n)=>{qs(e,(MJe<<1)+(n?1:0),3),Cre(e),ub(e,r),ub(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},YJe=e=>{qs(e,hre<<1,3),cu(e,ND,ad),qJe(e)},XJe=(e,t,r,n)=>{let a,i,o=0;e.level>0?(e.strm.data_type===DJe&&(e.strm.data_type=GJe(e)),VO(e,e.l_desc),VO(e,e.d_desc),o=VJe(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=r+5,r+4<=a&&t!==-1?Are(e,t,r,n):e.strategy===IJe||i===a?(qs(e,(hre<<1)+(n?1:0),3),jz(e,ad,Mx)):(qs(e,(RJe<<1)+(n?1:0),3),HJe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),jz(e,e.dyn_ltree,e.dyn_dtree)),Nre(e),n&&Cre(e)},JJe=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(cb[r]+l1+1)*2]++,e.dyn_dtree[Sre(t)*2]++),e.sym_next===e.sym_end);var QJe=KJe,ZJe=Are,eQe=XJe,tQe=JJe,rQe=YJe,nQe={_tr_init:QJe,_tr_stored_block:ZJe,_tr_flush_block:eQe,_tr_tally:tQe,_tr_align:rQe};const aQe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var db=aQe;const iQe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},oQe=new Uint32Array(iQe()),sQe=(e,t,r,n)=>{const a=oQe,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var uo=sQe,Av={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},c1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:lQe,_tr_stored_block:HO,_tr_flush_block:cQe,_tr_tally:eh,_tr_align:uQe}=nQe,{Z_NO_FLUSH:th,Z_PARTIAL_FLUSH:dQe,Z_FULL_FLUSH:fQe,Z_FINISH:Vl,Z_BLOCK:Pz,Z_OK:Ao,Z_STREAM_END:Ez,Z_STREAM_ERROR:Nu,Z_DATA_ERROR:hQe,Z_BUF_ERROR:OA,Z_DEFAULT_COMPRESSION:mQe,Z_FILTERED:pQe,Z_HUFFMAN_ONLY:Ew,Z_RLE:gQe,Z_FIXED:vQe,Z_DEFAULT_STRATEGY:yQe,Z_UNKNOWN:xQe,Z_DEFLATED:ZN}=c1,bQe=9,wQe=15,SQe=8,_Qe=29,jQe=256,GO=jQe+1+_Qe,NQe=30,CQe=19,AQe=2*GO+1,PQe=15,Un=3,Df=258,Cu=Df+Un+1,EQe=32,Pv=42,AD=57,KO=69,YO=73,XO=91,JO=103,vm=113,ax=666,bs=1,oy=2,ep=3,sy=4,kQe=3,ym=(e,t)=>(e.msg=Av[t],t),kz=e=>e*2-(e>4?9:0),Nf=e=>{let t=e.length;for(;--t>=0;)e[t]=0},OQe=e=>{let t,r,n,a=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t);t=a,n=t;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)};let TQe=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,rh=TQe;const ll=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},yl=(e,t)=>{cQe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ll(e.strm)},sa=(e,t)=>{e.pending_buf[e.pending++]=t},Vy=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},QO=(e,t,r,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),e.state.wrap===1?e.adler=db(e.adler,t,a,r):e.state.wrap===2&&(e.adler=uo(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},Pre=(e,t)=>{let r=e.max_chain_length,n=e.strstart,a,i,o=e.prev_length,l=e.nice_match;const c=e.strstart>e.w_size-Cu?e.strstart-(e.w_size-Cu):0,u=e.window,d=e.w_mask,f=e.prev,h=e.strstart+Df;let m=u[n+o-1],g=u[n+o];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(a=t,!(u[a+o]!==g||u[a+o-1]!==m||u[a]!==u[n]||u[++a]!==u[n+1])){n+=2,a++;do;while(u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&n<h);if(i=Df-(h-n),n=h-Df,i>o){if(e.match_start=t,o=i,i>=l)break;m=u[n+o-1],g=u[n+o]}}while((t=f[t&d])>c&&--r!==0);return o<=e.lookahead?o:e.lookahead},Ev=e=>{const t=e.w_size;let r,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Cu)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),OQe(e),n+=t),e.strm.avail_in===0)break;if(r=QO(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Un)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=rh(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=rh(e,e.ins_h,e.window[a+Un-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Un)););}while(e.lookahead<Cu&&e.strm.avail_in!==0)},Ere=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,i,o=0,l=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&t!==Vl||t===th||n!==a+e.strm.avail_in)))break;o=t===Vl&&n===a+e.strm.avail_in?1:0,HO(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ll(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(QO(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(o===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?sy:t!==th&&t!==Vl&&e.strm.avail_in===0&&e.strstart===e.block_start?oy:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(QO(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,r=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=r||(a||t===Vl)&&t!==th&&e.strm.avail_in===0&&a<=i)&&(n=a>i?i:a,o=t===Vl&&e.strm.avail_in===0&&n===a?1:0,HO(e,e.block_start,n,o),e.block_start+=n,ll(e.strm)),o?ep:bs)},TA=(e,t)=>{let r,n;for(;;){if(e.lookahead<Cu){if(Ev(e),e.lookahead<Cu&&t===th)return bs;if(e.lookahead===0)break}if(r=0,e.lookahead>=Un&&(e.ins_h=rh(e,e.ins_h,e.window[e.strstart+Un-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Cu&&(e.match_length=Pre(e,r)),e.match_length>=Un)if(n=eh(e,e.strstart-e.match_start,e.match_length-Un),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Un){e.match_length--;do e.strstart++,e.ins_h=rh(e,e.ins_h,e.window[e.strstart+Un-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=rh(e,e.ins_h,e.window[e.strstart+1]);else n=eh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(yl(e,!1),e.strm.avail_out===0))return bs}return e.insert=e.strstart<Un-1?e.strstart:Un-1,t===Vl?(yl(e,!0),e.strm.avail_out===0?ep:sy):e.sym_next&&(yl(e,!1),e.strm.avail_out===0)?bs:oy},Lp=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<Cu){if(Ev(e),e.lookahead<Cu&&t===th)return bs;if(e.lookahead===0)break}if(r=0,e.lookahead>=Un&&(e.ins_h=rh(e,e.ins_h,e.window[e.strstart+Un-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Un-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Cu&&(e.match_length=Pre(e,r),e.match_length<=5&&(e.strategy===pQe||e.match_length===Un&&e.strstart-e.match_start>4096)&&(e.match_length=Un-1)),e.prev_length>=Un&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Un,n=eh(e,e.strstart-1-e.prev_match,e.prev_length-Un),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=rh(e,e.ins_h,e.window[e.strstart+Un-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Un-1,e.strstart++,n&&(yl(e,!1),e.strm.avail_out===0))return bs}else if(e.match_available){if(n=eh(e,0,e.window[e.strstart-1]),n&&yl(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return bs}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=eh(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Un-1?e.strstart:Un-1,t===Vl?(yl(e,!0),e.strm.avail_out===0?ep:sy):e.sym_next&&(yl(e,!1),e.strm.avail_out===0)?bs:oy},IQe=(e,t)=>{let r,n,a,i;const o=e.window;for(;;){if(e.lookahead<=Df){if(Ev(e),e.lookahead<=Df&&t===th)return bs;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Un&&e.strstart>0&&(a=e.strstart-1,n=o[a],n===o[++a]&&n===o[++a]&&n===o[++a])){i=e.strstart+Df;do;while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);e.match_length=Df-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Un?(r=eh(e,1,e.match_length-Un),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=eh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(yl(e,!1),e.strm.avail_out===0))return bs}return e.insert=0,t===Vl?(yl(e,!0),e.strm.avail_out===0?ep:sy):e.sym_next&&(yl(e,!1),e.strm.avail_out===0)?bs:oy},DQe=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(Ev(e),e.lookahead===0)){if(t===th)return bs;break}if(e.match_length=0,r=eh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(yl(e,!1),e.strm.avail_out===0))return bs}return e.insert=0,t===Vl?(yl(e,!0),e.strm.avail_out===0?ep:sy):e.sym_next&&(yl(e,!1),e.strm.avail_out===0)?bs:oy};function Zc(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}const ix=[new Zc(0,0,0,0,Ere),new Zc(4,4,8,4,TA),new Zc(4,5,16,8,TA),new Zc(4,6,32,32,TA),new Zc(4,4,16,16,Lp),new Zc(8,16,32,32,Lp),new Zc(8,16,128,128,Lp),new Zc(8,32,128,256,Lp),new Zc(32,128,258,1024,Lp),new Zc(32,258,258,4096,Lp)],MQe=e=>{e.window_size=2*e.w_size,Nf(e.head),e.max_lazy_match=ix[e.level].max_lazy,e.good_match=ix[e.level].good_length,e.nice_match=ix[e.level].nice_length,e.max_chain_length=ix[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Un-1,e.match_available=0,e.ins_h=0};function RQe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ZN,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(AQe*2),this.dyn_dtree=new Uint16Array((2*NQe+1)*2),this.bl_tree=new Uint16Array((2*CQe+1)*2),Nf(this.dyn_ltree),Nf(this.dyn_dtree),Nf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(PQe+1),this.heap=new Uint16Array(2*GO+1),Nf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*GO+1),Nf(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const u1=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Pv&&t.status!==AD&&t.status!==KO&&t.status!==YO&&t.status!==XO&&t.status!==JO&&t.status!==vm&&t.status!==ax?1:0},kre=e=>{if(u1(e))return ym(e,Nu);e.total_in=e.total_out=0,e.data_type=xQe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?AD:t.wrap?Pv:vm,e.adler=t.wrap===2?0:1,t.last_flush=-2,lQe(t),Ao},Ore=e=>{const t=kre(e);return t===Ao&&MQe(e.state),t},LQe=(e,t)=>u1(e)||e.state.wrap!==2?Nu:(e.state.gzhead=t,Ao),Tre=(e,t,r,n,a,i)=>{if(!e)return Nu;let o=1;if(t===mQe&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>bQe||r!==ZN||n<8||n>15||t<0||t>9||i<0||i>vQe||n===8&&o!==1)return ym(e,Nu);n===8&&(n=9);const l=new RQe;return e.state=l,l.strm=e,l.status=Pv,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Un-1)/Un),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=i,l.method=r,Ore(e)},$Qe=(e,t)=>Tre(e,t,ZN,wQe,SQe,yQe),FQe=(e,t)=>{if(u1(e)||t>Pz||t<0)return e?ym(e,Nu):Nu;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===ax&&t!==Vl)return ym(e,e.avail_out===0?OA:Nu);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(ll(e),e.avail_out===0)return r.last_flush=-1,Ao}else if(e.avail_in===0&&kz(t)<=kz(n)&&t!==Vl)return ym(e,OA);if(r.status===ax&&e.avail_in!==0)return ym(e,OA);if(r.status===Pv&&r.wrap===0&&(r.status=vm),r.status===Pv){let a=ZN+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=Ew||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,a|=i<<6,r.strstart!==0&&(a|=EQe),a+=31-a%31,Vy(r,a),r.strstart!==0&&(Vy(r,e.adler>>>16),Vy(r,e.adler&65535)),e.adler=1,r.status=vm,ll(e),r.pending!==0)return r.last_flush=-1,Ao}if(r.status===AD){if(e.adler=0,sa(r,31),sa(r,139),sa(r,8),r.gzhead)sa(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),sa(r,r.gzhead.time&255),sa(r,r.gzhead.time>>8&255),sa(r,r.gzhead.time>>16&255),sa(r,r.gzhead.time>>24&255),sa(r,r.level===9?2:r.strategy>=Ew||r.level<2?4:0),sa(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(sa(r,r.gzhead.extra.length&255),sa(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=uo(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=KO;else if(sa(r,0),sa(r,0),sa(r,0),sa(r,0),sa(r,0),sa(r,r.level===9?2:r.strategy>=Ew||r.level<2?4:0),sa(r,kQe),r.status=vm,ll(e),r.pending!==0)return r.last_flush=-1,Ao}if(r.status===KO){if(r.gzhead.extra){let a=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=uo(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=l,ll(e),r.pending!==0)return r.last_flush=-1,Ao;a=0,i-=l}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>a&&(e.adler=uo(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=YO}if(r.status===YO){if(r.gzhead.name){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=uo(e.adler,r.pending_buf,r.pending-a,a)),ll(e),r.pending!==0)return r.last_flush=-1,Ao;a=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,sa(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=uo(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=XO}if(r.status===XO){if(r.gzhead.comment){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=uo(e.adler,r.pending_buf,r.pending-a,a)),ll(e),r.pending!==0)return r.last_flush=-1,Ao;a=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,sa(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=uo(e.adler,r.pending_buf,r.pending-a,a))}r.status=JO}if(r.status===JO){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ll(e),r.pending!==0))return r.last_flush=-1,Ao;sa(r,e.adler&255),sa(r,e.adler>>8&255),e.adler=0}if(r.status=vm,ll(e),r.pending!==0)return r.last_flush=-1,Ao}if(e.avail_in!==0||r.lookahead!==0||t!==th&&r.status!==ax){let a=r.level===0?Ere(r,t):r.strategy===Ew?DQe(r,t):r.strategy===gQe?IQe(r,t):ix[r.level].func(r,t);if((a===ep||a===sy)&&(r.status=ax),a===bs||a===ep)return e.avail_out===0&&(r.last_flush=-1),Ao;if(a===oy&&(t===dQe?uQe(r):t!==Pz&&(HO(r,0,0,!1),t===fQe&&(Nf(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ll(e),e.avail_out===0))return r.last_flush=-1,Ao}return t!==Vl?Ao:r.wrap<=0?Ez:(r.wrap===2?(sa(r,e.adler&255),sa(r,e.adler>>8&255),sa(r,e.adler>>16&255),sa(r,e.adler>>24&255),sa(r,e.total_in&255),sa(r,e.total_in>>8&255),sa(r,e.total_in>>16&255),sa(r,e.total_in>>24&255)):(Vy(r,e.adler>>>16),Vy(r,e.adler&65535)),ll(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ao:Ez)},BQe=e=>{if(u1(e))return Nu;const t=e.state.status;return e.state=null,t===vm?ym(e,hQe):Ao},zQe=(e,t)=>{let r=t.length;if(u1(e))return Nu;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==Pv||n.lookahead)return Nu;if(a===1&&(e.adler=db(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){a===0&&(Nf(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}const i=e.avail_in,o=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Ev(n);n.lookahead>=Un;){let c=n.strstart,u=n.lookahead-(Un-1);do n.ins_h=rh(n,n.ins_h,n.window[c+Un-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=Un-1,Ev(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Un-1,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=i,n.wrap=a,Ao};var qQe=$Qe,UQe=Tre,WQe=Ore,VQe=kre,HQe=LQe,GQe=FQe,KQe=BQe,YQe=zQe,XQe="pako deflate (from Nodeca project)",Rx={deflateInit:qQe,deflateInit2:UQe,deflateReset:WQe,deflateResetKeep:VQe,deflateSetHeader:HQe,deflate:GQe,deflateEnd:KQe,deflateSetDictionary:YQe,deflateInfo:XQe};const JQe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var QQe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)JQe(r,n)&&(e[n]=r[n])}}return e},ZQe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let o=e[n];r.set(o,a),a+=o.length}return r},eC={assign:QQe,flattenChunks:ZQe};let Ire=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ire=!1}const fb=new Uint8Array(256);for(let e=0;e<256;e++)fb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;fb[254]=fb[254]=1;var eZe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,o=e.length,l=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const tZe=(e,t)=>{if(t<65534&&e.subarray&&Ire)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var rZe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){i[a++]=o;continue}let l=fb[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return tZe(i,a)},nZe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+fb[e[r]]>t?r:t},hb={string2buf:eZe,buf2string:rZe,utf8border:nZe};function aZe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Dre=aZe;const Mre=Object.prototype.toString,{Z_NO_FLUSH:iZe,Z_SYNC_FLUSH:oZe,Z_FULL_FLUSH:sZe,Z_FINISH:lZe,Z_OK:T_,Z_STREAM_END:cZe,Z_DEFAULT_COMPRESSION:uZe,Z_DEFAULT_STRATEGY:dZe,Z_DEFLATED:fZe}=c1;function PD(e){this.options=eC.assign({level:uZe,method:fZe,chunkSize:16384,windowBits:15,memLevel:8,strategy:dZe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Dre,this.strm.avail_out=0;let r=Rx.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==T_)throw new Error(Av[r]);if(t.header&&Rx.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=hb.string2buf(t.dictionary):Mre.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=Rx.deflateSetDictionary(this.strm,n),r!==T_)throw new Error(Av[r]);this._dict_set=!0}}PD.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let a,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?lZe:iZe,typeof e=="string"?r.input=hb.string2buf(e):Mre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===oZe||i===sZe)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=Rx.deflate(r,i),a===cZe)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Rx.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===T_;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};PD.prototype.onData=function(e){this.chunks.push(e)};PD.prototype.onEnd=function(e){e===T_&&(this.result=eC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const kw=16209,hZe=16191;var mZe=function(t,r){let n,a,i,o,l,c,u,d,f,h,m,g,p,v,x,b,w,_,j,A,P,C,k,R;const E=t.state;n=t.next_in,k=t.input,a=n+(t.avail_in-5),i=t.next_out,R=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),c=E.dmax,u=E.wsize,d=E.whave,f=E.wnext,h=E.window,m=E.hold,g=E.bits,p=E.lencode,v=E.distcode,x=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;e:do{g<15&&(m+=k[n++]<<g,g+=8,m+=k[n++]<<g,g+=8),w=p[m&x];t:for(;;){if(_=w>>>24,m>>>=_,g-=_,_=w>>>16&255,_===0)R[i++]=w&65535;else if(_&16){j=w&65535,_&=15,_&&(g<_&&(m+=k[n++]<<g,g+=8),j+=m&(1<<_)-1,m>>>=_,g-=_),g<15&&(m+=k[n++]<<g,g+=8,m+=k[n++]<<g,g+=8),w=v[m&b];r:for(;;){if(_=w>>>24,m>>>=_,g-=_,_=w>>>16&255,_&16){if(A=w&65535,_&=15,g<_&&(m+=k[n++]<<g,g+=8,g<_&&(m+=k[n++]<<g,g+=8)),A+=m&(1<<_)-1,A>c){t.msg="invalid distance too far back",E.mode=kw;break e}if(m>>>=_,g-=_,_=i-o,A>_){if(_=A-_,_>d&&E.sane){t.msg="invalid distance too far back",E.mode=kw;break e}if(P=0,C=h,f===0){if(P+=u-_,_<j){j-=_;do R[i++]=h[P++];while(--_);P=i-A,C=R}}else if(f<_){if(P+=u+f-_,_-=f,_<j){j-=_;do R[i++]=h[P++];while(--_);if(P=0,f<j){_=f,j-=_;do R[i++]=h[P++];while(--_);P=i-A,C=R}}}else if(P+=f-_,_<j){j-=_;do R[i++]=h[P++];while(--_);P=i-A,C=R}for(;j>2;)R[i++]=C[P++],R[i++]=C[P++],R[i++]=C[P++],j-=3;j&&(R[i++]=C[P++],j>1&&(R[i++]=C[P++]))}else{P=i-A;do R[i++]=R[P++],R[i++]=R[P++],R[i++]=R[P++],j-=3;while(j>2);j&&(R[i++]=R[P++],j>1&&(R[i++]=R[P++]))}}else if(_&64){t.msg="invalid distance code",E.mode=kw;break e}else{w=v[(w&65535)+(m&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){E.mode=hZe;break e}else{t.msg="invalid literal/length code",E.mode=kw;break e}else{w=p[(w&65535)+(m&(1<<_)-1)];continue t}break}}while(n<a&&i<l);j=g>>3,n-=j,g-=j<<3,m&=(1<<g)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<l?257+(l-i):257-(i-l),E.hold=m,E.bits=g};const $p=15,Oz=852,Tz=592,Iz=0,IA=1,Dz=2,pZe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gZe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vZe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yZe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),xZe=(e,t,r,n,a,i,o,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,m=0,g=0,p=0,v=0,x=0,b=0,w,_,j,A,P,C=null,k;const R=new Uint16Array($p+1),E=new Uint16Array($p+1);let I=null,T,M,z;for(u=0;u<=$p;u++)R[u]=0;for(d=0;d<n;d++)R[t[r+d]]++;for(m=c,h=$p;h>=1&&R[h]===0;h--);if(m>h&&(m=h),h===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&R[f]===0;f++);for(m<f&&(m=f),v=1,u=1;u<=$p;u++)if(v<<=1,v-=R[u],v<0)return-1;if(v>0&&(e===Iz||h!==1))return-1;for(E[1]=0,u=1;u<$p;u++)E[u+1]=E[u]+R[u];for(d=0;d<n;d++)t[r+d]!==0&&(o[E[t[r+d]]++]=d);if(e===Iz?(C=I=o,k=20):e===IA?(C=pZe,I=gZe,k=257):(C=vZe,I=yZe,k=0),b=0,d=0,u=f,P=i,g=m,p=0,j=-1,x=1<<m,A=x-1,e===IA&&x>Oz||e===Dz&&x>Tz)return 1;for(;;){T=u-p,o[d]+1<k?(M=0,z=o[d]):o[d]>=k?(M=I[o[d]-k],z=C[o[d]-k]):(M=32+64,z=0),w=1<<u-p,_=1<<g,f=_;do _-=w,a[P+(b>>p)+_]=T<<24|M<<16|z|0;while(_!==0);for(w=1<<u-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,d++,--R[u]===0){if(u===h)break;u=t[r+o[d]]}if(u>m&&(b&A)!==j){for(p===0&&(p=m),P+=f,g=u-p,v=1<<g;g+p<h&&(v-=R[g+p],!(v<=0));)g++,v<<=1;if(x+=1<<g,e===IA&&x>Oz||e===Dz&&x>Tz)return 1;j=b&A,a[j]=m<<24|g<<16|P-i|0}}return b!==0&&(a[P+b]=u-p<<24|64<<16|0),l.bits=m,0};var Lx=xZe;const bZe=0,Rre=1,Lre=2,{Z_FINISH:Mz,Z_BLOCK:wZe,Z_TREES:Ow,Z_OK:tp,Z_STREAM_END:SZe,Z_NEED_DICT:_Ze,Z_STREAM_ERROR:nc,Z_DATA_ERROR:$re,Z_MEM_ERROR:Fre,Z_BUF_ERROR:jZe,Z_DEFLATED:Rz}=c1,tC=16180,Lz=16181,$z=16182,Fz=16183,Bz=16184,zz=16185,qz=16186,Uz=16187,Wz=16188,Vz=16189,I_=16190,Yu=16191,DA=16192,Hz=16193,MA=16194,Gz=16195,Kz=16196,Yz=16197,Xz=16198,Tw=16199,Iw=16200,Jz=16201,Qz=16202,Zz=16203,eq=16204,tq=16205,RA=16206,rq=16207,nq=16208,ei=16209,Bre=16210,zre=16211,NZe=852,CZe=592,AZe=15,PZe=AZe,aq=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function EZe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<tC||t.mode>zre?1:0},qre=e=>{if(gp(e))return nc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=tC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(NZe),t.distcode=t.distdyn=new Int32Array(CZe),t.sane=1,t.back=-1,tp},Ure=e=>{if(gp(e))return nc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,qre(e)},Wre=(e,t)=>{let r;if(gp(e))return nc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?nc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Ure(e))},Vre=(e,t)=>{if(!e)return nc;const r=new EZe;e.state=r,r.strm=e,r.window=null,r.mode=tC;const n=Wre(e,t);return n!==tp&&(e.state=null),n},kZe=e=>Vre(e,PZe);let iq=!0,LA,$A;const OZe=e=>{if(iq){LA=new Int32Array(512),$A=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Lx(Rre,e.lens,0,288,LA,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Lx(Lre,e.lens,0,32,$A,0,e.work,{bits:5}),iq=!1}e.lencode=LA,e.lenbits=9,e.distcode=$A,e.distbits=5},Hre=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},TZe=(e,t)=>{let r,n,a,i,o,l,c,u,d,f,h,m,g,p,v=0,x,b,w,_,j,A,P,C;const k=new Uint8Array(4);let R,E;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gp(e)||!e.output||!e.input&&e.avail_in!==0)return nc;r=e.state,r.mode===Yu&&(r.mode=DA),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,f=l,h=c,C=tp;e:for(;;)switch(r.mode){case tC:if(r.wrap===0){r.mode=DA;break}for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,k[0]=u&255,k[1]=u>>>8&255,r.check=uo(r.check,k,2,0),u=0,d=0,r.mode=Lz;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=ei;break}if((u&15)!==Rz){e.msg="unknown compression method",r.mode=ei;break}if(u>>>=4,d-=4,P=(u&15)+8,r.wbits===0&&(r.wbits=P),P>15||P>r.wbits){e.msg="invalid window size",r.mode=ei;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?Vz:Yu,u=0,d=0;break;case Lz:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==Rz){e.msg="unknown compression method",r.mode=ei;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=ei;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=uo(r.check,k,2,0)),u=0,d=0,r.mode=$z;case $z:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,r.check=uo(r.check,k,4,0)),u=0,d=0,r.mode=Fz;case Fz:for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=uo(r.check,k,2,0)),u=0,d=0,r.mode=Bz;case Bz:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=uo(r.check,k,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=zz;case zz:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+m),P)),r.flags&512&&r.wrap&4&&(r.check=uo(r.check,n,m,i)),l-=m,i+=m,r.length-=m),r.length))break e;r.length=0,r.mode=qz;case qz:if(r.flags&2048){if(l===0)break e;m=0;do P=n[i+m++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P));while(P&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=uo(r.check,n,m,i)),l-=m,i+=m,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Uz;case Uz:if(r.flags&4096){if(l===0)break e;m=0;do P=n[i+m++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P));while(P&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=uo(r.check,n,m,i)),l-=m,i+=m,P)break e}else r.head&&(r.head.comment=null);r.mode=Wz;case Wz:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=ei;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Yu;break;case Vz:for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}e.adler=r.check=aq(u),u=0,d=0,r.mode=I_;case I_:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,_Ze;e.adler=r.check=1,r.mode=Yu;case Yu:if(t===wZe||t===Ow)break e;case DA:if(r.last){u>>>=d&7,d-=d&7,r.mode=RA;break}for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=Hz;break;case 1:if(OZe(r),r.mode=Tw,t===Ow){u>>>=2,d-=2;break e}break;case 2:r.mode=Kz;break;case 3:e.msg="invalid block type",r.mode=ei}u>>>=2,d-=2;break;case Hz:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=ei;break}if(r.length=u&65535,u=0,d=0,r.mode=MA,t===Ow)break e;case MA:r.mode=Gz;case Gz:if(m=r.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;a.set(n.subarray(i,i+m),o),l-=m,i+=m,c-=m,o+=m,r.length-=m;break}r.mode=Yu;break;case Kz:for(;d<14;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=ei;break}r.have=0,r.mode=Yz;case Yz:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.lens[I[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},C=Lx(bZe,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,C){e.msg="invalid code lengths set",r.mode=ei;break}r.have=0,r.mode=Xz;case Xz:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[u&(1<<r.lenbits)-1],x=v>>>24,b=v>>>16&255,w=v&65535,!(x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(w<16)u>>>=x,d-=x,r.lens[r.have++]=w;else{if(w===16){for(E=x+2;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){e.msg="invalid bit length repeat",r.mode=ei;break}P=r.lens[r.have-1],m=3+(u&3),u>>>=2,d-=2}else if(w===17){for(E=x+3;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=x,d-=x,P=0,m=3+(u&7),u>>>=3,d-=3}else{for(E=x+7;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=x,d-=x,P=0,m=11+(u&127),u>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=ei;break}for(;m--;)r.lens[r.have++]=P}}if(r.mode===ei)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=ei;break}if(r.lenbits=9,R={bits:r.lenbits},C=Lx(Rre,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,C){e.msg="invalid literal/lengths set",r.mode=ei;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},C=Lx(Lre,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,C){e.msg="invalid distances set",r.mode=ei;break}if(r.mode=Tw,t===Ow)break e;case Tw:r.mode=Iw;case Iw:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,mZe(e,h),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,r.mode===Yu&&(r.back=-1);break}for(r.back=0;v=r.lencode[u&(1<<r.lenbits)-1],x=v>>>24,b=v>>>16&255,w=v&65535,!(x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(b&&!(b&240)){for(_=x,j=b,A=w;v=r.lencode[A+((u&(1<<_+j)-1)>>_)],x=v>>>24,b=v>>>16&255,w=v&65535,!(_+x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=_,d-=_,r.back+=_}if(u>>>=x,d-=x,r.back+=x,r.length=w,b===0){r.mode=tq;break}if(b&32){r.back=-1,r.mode=Yu;break}if(b&64){e.msg="invalid literal/length code",r.mode=ei;break}r.extra=b&15,r.mode=Jz;case Jz:if(r.extra){for(E=r.extra;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Qz;case Qz:for(;v=r.distcode[u&(1<<r.distbits)-1],x=v>>>24,b=v>>>16&255,w=v&65535,!(x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(!(b&240)){for(_=x,j=b,A=w;v=r.distcode[A+((u&(1<<_+j)-1)>>_)],x=v>>>24,b=v>>>16&255,w=v&65535,!(_+x<=d);){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}u>>>=_,d-=_,r.back+=_}if(u>>>=x,d-=x,r.back+=x,b&64){e.msg="invalid distance code",r.mode=ei;break}r.offset=w,r.extra=b&15,r.mode=Zz;case Zz:if(r.extra){for(E=r.extra;d<E;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=ei;break}r.mode=eq;case eq:if(c===0)break e;if(m=h-c,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=ei;break}m>r.wnext?(m-=r.wnext,g=r.wsize-m):g=r.wnext-m,m>r.length&&(m=r.length),p=r.window}else p=a,g=o-r.offset,m=r.length;m>c&&(m=c),c-=m,r.length-=m;do a[o++]=p[g++];while(--m);r.length===0&&(r.mode=Iw);break;case tq:if(c===0)break e;a[o++]=r.length,c--,r.mode=Iw;break;case RA:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[i++]<<d,d+=8}if(h-=c,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?uo(r.check,a,h,o-h):db(r.check,a,h,o-h)),h=c,r.wrap&4&&(r.flags?u:aq(u))!==r.check){e.msg="incorrect data check",r.mode=ei;break}u=0,d=0}r.mode=rq;case rq:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[i++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=ei;break}u=0,d=0}r.mode=nq;case nq:C=SZe;break e;case ei:C=$re;break e;case Bre:return Fre;case zre:default:return nc}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==e.avail_out&&r.mode<ei&&(r.mode<RA||t!==Mz))&&Hre(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,r.wrap&4&&h&&(e.adler=r.check=r.flags?uo(r.check,a,h,e.next_out-h):db(r.check,a,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Yu?128:0)+(r.mode===Tw||r.mode===MA?256:0),(f===0&&h===0||t===Mz)&&C===tp&&(C=jZe),C},IZe=e=>{if(gp(e))return nc;let t=e.state;return t.window&&(t.window=null),e.state=null,tp},DZe=(e,t)=>{if(gp(e))return nc;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,tp):nc},MZe=(e,t)=>{const r=t.length;let n,a,i;return gp(e)||(n=e.state,n.wrap!==0&&n.mode!==I_)?nc:n.mode===I_&&(a=1,a=db(a,t,r,0),a!==n.check)?$re:(i=Hre(e,t,r,r),i?(n.mode=Bre,Fre):(n.havedict=1,tp))};var RZe=Ure,LZe=Wre,$Ze=qre,FZe=kZe,BZe=Vre,zZe=TZe,qZe=IZe,UZe=DZe,WZe=MZe,VZe="pako inflate (from Nodeca project)",id={inflateReset:RZe,inflateReset2:LZe,inflateResetKeep:$Ze,inflateInit:FZe,inflateInit2:BZe,inflate:zZe,inflateEnd:qZe,inflateGetHeader:UZe,inflateSetDictionary:WZe,inflateInfo:VZe};function HZe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var GZe=HZe;const Gre=Object.prototype.toString,{Z_NO_FLUSH:KZe,Z_FINISH:YZe,Z_OK:mb,Z_STREAM_END:FA,Z_NEED_DICT:BA,Z_STREAM_ERROR:XZe,Z_DATA_ERROR:oq,Z_MEM_ERROR:JZe}=c1;function d1(e){this.options=eC.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Dre,this.strm.avail_out=0;let r=id.inflateInit2(this.strm,t.windowBits);if(r!==mb)throw new Error(Av[r]);if(this.header=new GZe,id.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=hb.string2buf(t.dictionary):Gre.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=id.inflateSetDictionary(this.strm,t.dictionary),r!==mb)))throw new Error(Av[r])}d1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?YZe:KZe,Gre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=id.inflate(r,o),i===BA&&a&&(i=id.inflateSetDictionary(r,a),i===mb?i=id.inflate(r,o):i===oq&&(i=BA));r.avail_in>0&&i===FA&&r.state.wrap>0&&e[r.next_in]!==0;)id.inflateReset(r),i=id.inflate(r,o);switch(i){case XZe:case oq:case BA:case JZe:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===FA))if(this.options.to==="string"){let c=hb.utf8border(r.output,r.next_out),u=r.next_out-c,d=hb.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===mb&&l===0)){if(i===FA)return i=id.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};d1.prototype.onData=function(e){this.chunks.push(e)};d1.prototype.onEnd=function(e){e===mb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=eC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ED(e,t){const r=new d1(t);if(r.push(e),r.err)throw r.msg||Av[r.err];return r.result}function QZe(e,t){return t=t||{},t.raw=!0,ED(e,t)}var ZZe=d1,eet=ED,tet=QZe,ret=ED,net=c1,aet={Inflate:ZZe,inflate:eet,inflateRaw:tet,ungzip:ret,constants:net};const{Inflate:iet,inflate:oet,inflateRaw:nat,ungzip:aat}=aet;var sq=iet,set=oet;const Kre=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Kre[e]=t}const lq=4294967295;function cet(e,t,r){let n=e;for(let a=0;a<r;a++)n=Kre[(n^t[a])&255]^n>>>8;return n}function uet(e,t){return(cet(lq,e,t)^lq)>>>0}function cq(e,t,r){const n=e.readUint32(),a=uet(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function Yre(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function Xre(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function Jre(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function Qre(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function Zre(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+det(t[i-a],r[i],r[i-a])&255}}function det(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),o=Math.abs(n-r);return a<=i&&a<=o?e:i<=o?t:r}function fet(e,t,r,n,a,i){switch(e){case 0:Yre(t,r,a);break;case 1:Xre(t,r,a,i);break;case 2:Jre(t,r,n,a);break;case 3:Qre(t,r,n,a,i);break;case 4:Zre(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const het=new Uint16Array([255]),met=new Uint8Array(het.buffer),pet=met[0]===255;function get(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],h=Math.ceil((r-f.x)/f.xStep),m=Math.ceil((n-f.y)/f.yStep);if(h<=0||m<=0)continue;const g=h*l,p=new Uint8Array(g);for(let v=0;v<m;v++){const x=t[u++],b=t.subarray(u,u+g);u+=g;const w=new Uint8Array(g);fet(x,b,w,p,g,l),p.set(w);for(let _=0;_<h;_++){const j=f.x+_*f.xStep,A=f.y+v*f.yStep;if(!(j>=r||A>=n))for(let P=0;P<l;P++)c[(A*r+j)*l+P]=w[_*l+P]}}}if(i===16){const d=new Uint16Array(c.buffer);if(pet)for(let f=0;f<d.length;f++)d[f]=vet(d[f]);return d}else return c}function vet(e){return(e&255)<<8|e>>8&255}const yet=new Uint16Array([255]),xet=new Uint8Array(yet.buffer),bet=xet[0]===255,wet=new Uint8Array(0);function uq(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(n*l);let u=wet,d=0,f,h;for(let m=0;m<n;m++){switch(f=t.subarray(d+1,d+1+l),h=c.subarray(m*l,(m+1)*l),t[d]){case 0:Yre(f,h,l);break;case 1:Xre(f,h,l,o);break;case 2:Jre(f,h,u,l);break;case 3:Qre(f,h,u,l,o);break;case 4:Zre(f,h,u,l,o);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=h,d+=l+1}if(i===16){const m=new Uint16Array(c.buffer);if(bet)for(let g=0;g<m.length;g++)m[g]=_et(m[g]);return m}else return c}function _et(e){return(e&255)<<8|e>>8&255}const h2=Uint8Array.of(137,80,78,71,13,10,26,10);function dq(e){if(!jet(e.readBytes(h2.length)))throw new Error("wrong PNG signature")}function jet(e){if(e.length<h2.length)return!1;for(let t=0;t<h2.length;t++)if(e[t]!==h2[t])return!1;return!0}const Net="tEXt",Cet=0,ene=new TextDecoder("latin1");function Aet(e){if(Eet(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Pet=/^[\u0000-\u00FF]*$/;function Eet(e){if(!Pet.test(e))throw new Error("invalid latin1 text")}function ket(e,t,r){const n=tne(t);e[n]=Oet(t,r-n.length-1)}function tne(e){for(e.mark();e.readByte()!==Cet;);const t=e.offset;e.reset();const r=ene.decode(e.readBytes(t-e.offset-1));return e.skip(1),Aet(r),r}function Oet(e,t){return ene.decode(e.readBytes(t))}const il={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},zA={UNKNOWN:-1,DEFLATE:0},fq={UNKNOWN:-1,ADAPTIVE:0},qA={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Dw={NONE:0,BACKGROUND:1,PREVIOUS:2},UA={SOURCE:0,OVER:1};class Tet extends SD{constructor(r,n={}){super(r);ga(this,"_checkCrc");ga(this,"_inflator");ga(this,"_png");ga(this,"_apng");ga(this,"_end");ga(this,"_hasPalette");ga(this,"_palette");ga(this,"_hasTransparency");ga(this,"_transparency");ga(this,"_compressionMethod");ga(this,"_filterMethod");ga(this,"_interlaceMethod");ga(this,"_colorType");ga(this,"_isAnimated");ga(this,"_numberOfFrames");ga(this,"_numberOfPlays");ga(this,"_frames");ga(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new sq,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=zA.UNKNOWN,this._filterMethod=fq.UNKNOWN,this._interlaceMethod=qA.UNKNOWN,this._colorType=il.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(dq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(dq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Net:ket(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?cq(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?cq(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Iet(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case il.GREYSCALE:a=1;break;case il.TRUECOLOUR:a=3;break;case il.INDEXED_COLOUR:a=1;break;case il.GREYSCALE_ALPHA:a=2;break;case il.TRUECOLOUR_ALPHA:a=4;break;case il.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==zA.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case il.GREYSCALE:case il.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case il.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case il.UNKNOWN:case il.GREYSCALE_ALPHA:case il.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=tne(this),a=this.readUint8();if(a!==zA.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:set(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=uq({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case Dw.NONE:break;case Dw.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case Dw.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case UA.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case UA.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=i(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],m=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==fq.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===qA.NO_INTERLACE)this._png.data=uq({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===qA.ADAM7)this._png.data=get({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Dw.NONE,blendOp:UA.SOURCE,data:r}),this._inflator=new sq,this._writingDataChunks=!1}}function Iet(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var hq;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(hq||(hq={}));function Det(e,t){return new Tet(e,t).decode()}var sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function WA(){sn.console&&typeof sn.console.log=="function"&&sn.console.log.apply(sn.console,arguments)}var Pa={log:WA,warn:function(e){sn.console&&(typeof sn.console.warn=="function"?sn.console.warn.apply(sn.console,arguments):WA.call(null,arguments))},error:function(e){sn.console&&(typeof sn.console.error=="function"?sn.console.error.apply(sn.console,arguments):WA(e))}};function VA(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){em(n.response,t,r)},n.onerror=function(){Pa.error("could not download file")},n.send()}function mq(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Mw(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var em=sn.saveAs||((typeof window>"u"?"undefined":Bn(window))!=="object"||window!==sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=sn.URL||sn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?mq(a.href)?VA(e,t,r):Mw(a,a.target="_blank"):Mw(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Mw(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(mq(e))VA(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Mw(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Bn(i)!=="object"&&(Pa.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return VA(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(sn.HTMLElement)||sn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Bn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=sn.URL||sn.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rne(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var m2=sn.atob.bind(sn),pq=sn.btoa.bind(sn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function HA(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=Fo(r,n,a,i,t[0],7,-680876936),i=Fo(i,r,n,a,t[1],12,-389564586),a=Fo(a,i,r,n,t[2],17,606105819),n=Fo(n,a,i,r,t[3],22,-1044525330),r=Fo(r,n,a,i,t[4],7,-176418897),i=Fo(i,r,n,a,t[5],12,1200080426),a=Fo(a,i,r,n,t[6],17,-1473231341),n=Fo(n,a,i,r,t[7],22,-45705983),r=Fo(r,n,a,i,t[8],7,1770035416),i=Fo(i,r,n,a,t[9],12,-1958414417),a=Fo(a,i,r,n,t[10],17,-42063),n=Fo(n,a,i,r,t[11],22,-1990404162),r=Fo(r,n,a,i,t[12],7,1804603682),i=Fo(i,r,n,a,t[13],12,-40341101),a=Fo(a,i,r,n,t[14],17,-1502002290),r=Bo(r,n=Fo(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Bo(i,r,n,a,t[6],9,-1069501632),a=Bo(a,i,r,n,t[11],14,643717713),n=Bo(n,a,i,r,t[0],20,-373897302),r=Bo(r,n,a,i,t[5],5,-701558691),i=Bo(i,r,n,a,t[10],9,38016083),a=Bo(a,i,r,n,t[15],14,-660478335),n=Bo(n,a,i,r,t[4],20,-405537848),r=Bo(r,n,a,i,t[9],5,568446438),i=Bo(i,r,n,a,t[14],9,-1019803690),a=Bo(a,i,r,n,t[3],14,-187363961),n=Bo(n,a,i,r,t[8],20,1163531501),r=Bo(r,n,a,i,t[13],5,-1444681467),i=Bo(i,r,n,a,t[2],9,-51403784),a=Bo(a,i,r,n,t[7],14,1735328473),r=zo(r,n=Bo(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=zo(i,r,n,a,t[8],11,-2022574463),a=zo(a,i,r,n,t[11],16,1839030562),n=zo(n,a,i,r,t[14],23,-35309556),r=zo(r,n,a,i,t[1],4,-1530992060),i=zo(i,r,n,a,t[4],11,1272893353),a=zo(a,i,r,n,t[7],16,-155497632),n=zo(n,a,i,r,t[10],23,-1094730640),r=zo(r,n,a,i,t[13],4,681279174),i=zo(i,r,n,a,t[0],11,-358537222),a=zo(a,i,r,n,t[3],16,-722521979),n=zo(n,a,i,r,t[6],23,76029189),r=zo(r,n,a,i,t[9],4,-640364487),i=zo(i,r,n,a,t[12],11,-421815835),a=zo(a,i,r,n,t[15],16,530742520),r=qo(r,n=zo(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=qo(i,r,n,a,t[7],10,1126891415),a=qo(a,i,r,n,t[14],15,-1416354905),n=qo(n,a,i,r,t[5],21,-57434055),r=qo(r,n,a,i,t[12],6,1700485571),i=qo(i,r,n,a,t[3],10,-1894986606),a=qo(a,i,r,n,t[10],15,-1051523),n=qo(n,a,i,r,t[1],21,-2054922799),r=qo(r,n,a,i,t[8],6,1873313359),i=qo(i,r,n,a,t[15],10,-30611744),a=qo(a,i,r,n,t[6],15,-1560198380),n=qo(n,a,i,r,t[13],21,1309151649),r=qo(r,n,a,i,t[4],6,-145523070),i=qo(i,r,n,a,t[11],10,-1120210379),a=qo(a,i,r,n,t[2],15,718787259),n=qo(n,a,i,r,t[9],21,-343485551),e[0]=Mf(r,e[0]),e[1]=Mf(n,e[1]),e[2]=Mf(a,e[2]),e[3]=Mf(i,e[3])}function rC(e,t,r,n,a,i){return t=Mf(Mf(t,e),Mf(n,i)),Mf(t<<a|t>>>32-a,r)}function Fo(e,t,r,n,a,i,o){return rC(t&r|~t&n,e,t,a,i,o)}function Bo(e,t,r,n,a,i,o){return rC(t&n|r&~n,e,t,a,i,o)}function zo(e,t,r,n,a,i,o){return rC(t^r^n,e,t,a,i,o)}function qo(e,t,r,n,a,i,o){return rC(r^(t|~n),e,t,a,i,o)}function nne(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)HA(n,Met(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(HA(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,HA(n,a),n}function Met(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var gq="0123456789abcdef".split("");function Ret(e){for(var t="",r=0;r<4;r++)t+=gq[e>>8*r+4&15]+gq[e>>8*r&15];return t}function Let(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function ZO(e){return nne(e).map(Let).join("")}var $et=function(e){for(var t=0;t<e.length;t++)e[t]=Ret(e[t]);return e.join("")}(nne("hello"))!="5d41402abc4b2a76b9719d911017c592";function Mf(e,t){if($et){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function eT(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vq={print:4,modify:8,copy:16,"annot-forms":32};function Hp(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(vq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=vq[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=ZO(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=eT(this.encryptionKey,this.padding)}function Gp(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function yq(e){if(Bn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){sn.console&&Pa.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function pb(e){if(!(this instanceof pb))return new pb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function ane(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Cf(e,t,r,n,a){if(!(this instanceof Cf))return new Cf(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,ane.call(this,n,a)}function xm(e,t,r,n,a){if(!(this instanceof xm))return new xm(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,ane.call(this,n,a)}function Rr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",d=null;Bn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=yq;var g="1.3",p=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(O){g=O};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var x=m.__private__.getPageFormat=function(O){return v[O]};a=a||"a4";var b="compat",w="advanced",_=b;function j(){this.saveGraphicsState(),ce(new dr(yt,0,0,-yt,0,sc()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",_=w}function A(){this.restoreGraphicsState(),u="S",_=b}var P=m.__private__.combineFontStyleAndFontWeight=function(O,K){if(O=="bold"&&K=="normal"||O=="bold"&&K==400||O=="normal"&&K=="italic"||O=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(O=K==400||K==="normal"?O==="italic"?"italic":"normal":K!=700&&K!=="bold"||O!=="normal"?(K==700?"bold":K)+""+O:"bold"),O};m.advancedAPI=function(O){var K=_===b;return K&&j.call(this),typeof O!="function"||(O(this),K&&A.call(this)),this},m.compatAPI=function(O){var K=_===w;return K&&A.call(this),typeof O!="function"||(O(this),K&&j.call(this)),this},m.isAdvancedAPI=function(){return _===w};var C,k=function(O){if(_!==w)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(O,K){var ge=t||K;if(isNaN(O)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(ge).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,c)}:c==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return R(O,16)};var E=m.f2=m.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return R(O,2)},I=m.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return R(O,3)},T=m.scale=m.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return _===b?O*yt:_===w?O:void 0},M=function(O){return T(function(K){return _===b?sc()-K:_===w?K:void 0}(O))};m.__private__.setPrecision=m.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(t=parseInt(O,10))};var z,V="00000000000000000000000000000000",W=m.__private__.getFileId=function(){return V},$=m.__private__.setFileId=function(O){return V=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ie=new Hp(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(O){return $(O),this},m.getFileId=function(){return W()};var G=m.__private__.convertDateToPDFDate=function(O){var K=O.getTimezoneOffset(),ge=K<0?"+":"-",ke=Math.floor(Math.abs(K/60)),Fe=Math.abs(K%60),ft=[ge,J(ke),"'",J(Fe),"'"].join("");return["D:",O.getFullYear(),J(O.getMonth()+1),J(O.getDate()),J(O.getHours()),J(O.getMinutes()),J(O.getSeconds()),ft].join("")},me=m.__private__.convertPDFDateToDate=function(O){var K=parseInt(O.substr(2,4),10),ge=parseInt(O.substr(6,2),10)-1,ke=parseInt(O.substr(8,2),10),Fe=parseInt(O.substr(10,2),10),ft=parseInt(O.substr(12,2),10),Bt=parseInt(O.substr(14,2),10);return new Date(K,ge,ke,Fe,ft,Bt,0)},de=m.__private__.setCreationDate=function(O){var K;if(O===void 0&&(O=new Date),O instanceof Date)K=G(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=O}return z=K},L=m.__private__.getCreationDate=function(O){var K=z;return O==="jsDate"&&(K=me(z)),K};m.setCreationDate=function(O){return de(O),this},m.getCreationDate=function(O){return L(O)};var B,J=m.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},q=m.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},X=0,Z=[],pe=[],te=0,ve=[],Ce=[],he=!1,qe=pe;m.__private__.setCustomOutputDestination=function(O){he=!0,qe=O};var ye=function(O){he||(qe=O)};m.__private__.resetCustomOutputDestination=function(){he=!1,qe=pe};var ce=m.__private__.out=function(O){return O=O.toString(),te+=O.length+1,qe.push(O),qe},Ft=m.__private__.write=function(O){return ce(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},qt=m.__private__.getArrayBuffer=function(O){for(var K=O.length,ge=new ArrayBuffer(K),ke=new Uint8Array(ge);K--;)ke[K]=O.charCodeAt(K);return ge},It=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return It};var et=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(O){return et=_===w?O/yt:O,this};var Ze,Pt=m.__private__.getFontSize=m.getFontSize=function(){return _===b?et:et*yt},ue=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(O){return ue=O,this},m.__private__.getR2L=m.getR2L=function(){return ue};var rt,Ee=m.__private__.setZoomMode=function(O){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))Ze=O;else if(isNaN(O)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');Ze=O}else Ze=parseInt(O,10)};m.__private__.getZoomMode=function(){return Ze};var Ke,Ge=m.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');rt=O};m.__private__.getPageMode=function(){return rt};var bt=m.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');Ke=O};m.__private__.getLayoutMode=function(){return Ke},m.__private__.setDisplayMode=m.setDisplayMode=function(O,K,ge){return Ee(O),bt(K),Ge(ge),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(O){if(Object.keys(ot).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[O]},m.__private__.getDocumentProperties=function(){return ot},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(O){for(var K in ot)ot.hasOwnProperty(K)&&O[K]&&(ot[K]=O[K]);return this},m.__private__.setDocumentProperty=function(O,K){if(Object.keys(ot).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[O]=K};var kt,yt,je,We,Ot,Ve={},nt={},Rt=[],Lt={},Tt={},ir={},fr={},ia=null,fn=0,Or=[],yr=new yq(m),Er=e.hotfixes||[],Dr={},wa={},or=[],dr=function O(K,ge,ke,Fe,ft,Bt){if(!(this instanceof O))return new O(K,ge,ke,Fe,ft,Bt);isNaN(K)&&(K=1),isNaN(ge)&&(ge=0),isNaN(ke)&&(ke=0),isNaN(Fe)&&(Fe=1),isNaN(ft)&&(ft=0),isNaN(Bt)&&(Bt=0),this._matrix=[K,ge,ke,Fe,ft,Bt]};Object.defineProperty(dr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(dr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(dr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(dr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(dr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(dr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(dr.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(dr.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(dr.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(dr.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(dr.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(dr.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(dr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(dr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(dr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(dr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),dr.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(O)},dr.prototype.multiply=function(O){var K=O.sx*this.sx+O.shy*this.shx,ge=O.sx*this.shy+O.shy*this.sy,ke=O.shx*this.sx+O.sy*this.shx,Fe=O.shx*this.shy+O.sy*this.sy,ft=O.tx*this.sx+O.ty*this.shx+this.tx,Bt=O.tx*this.shy+O.ty*this.sy+this.ty;return new dr(K,ge,ke,Fe,ft,Bt)},dr.prototype.decompose=function(){var O=this.sx,K=this.shy,ge=this.shx,ke=this.sy,Fe=this.tx,ft=this.ty,Bt=Math.sqrt(O*O+K*K),vr=(O/=Bt)*ge+(K/=Bt)*ke;ge-=O*vr,ke-=K*vr;var br=Math.sqrt(ge*ge+ke*ke);return vr/=br,O*(ke/=br)<K*(ge/=br)&&(O=-O,K=-K,vr=-vr,Bt=-Bt),{scale:new dr(Bt,0,0,br,0,0),translate:new dr(1,0,0,1,Fe,ft),rotate:new dr(O,K,-K,O,0,0),skew:new dr(1,0,vr,1,0,0)}},dr.prototype.toString=function(O){return this.join(" ")},dr.prototype.inversed=function(){var O=this.sx,K=this.shy,ge=this.shx,ke=this.sy,Fe=this.tx,ft=this.ty,Bt=1/(O*ke-K*ge),vr=ke*Bt,br=-K*Bt,an=-ge*Bt,Wr=O*Bt;return new dr(vr,br,an,Wr,-vr*Fe-an*ft,-br*Fe-Wr*ft)},dr.prototype.applyToPoint=function(O){var K=O.x*this.sx+O.y*this.shx+this.tx,ge=O.x*this.shy+O.y*this.sy+this.ty;return new Oa(K,ge)},dr.prototype.applyToRectangle=function(O){var K=this.applyToPoint(O),ge=this.applyToPoint(new Oa(O.x+O.w,O.y+O.h));return new Jc(K.x,K.y,ge.x-K.x,ge.y-K.y)},dr.prototype.clone=function(){var O=this.sx,K=this.shy,ge=this.shx,ke=this.sy,Fe=this.tx,ft=this.ty;return new dr(O,K,ge,ke,Fe,ft)},m.Matrix=dr;var Vn=m.matrixMult=function(O,K){return K.multiply(O)},qa=new dr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=qa;var la=function(O,K){if(!Tt[O]){var ge=(K instanceof Cf?"Sh":"P")+(Object.keys(Lt).length+1).toString(10);K.id=ge,Tt[O]=ge,Lt[ge]=K,yr.publish("addPattern",K)}};m.ShadingPattern=Cf,m.TilingPattern=xm,m.addShadingPattern=function(O,K){return k("addShadingPattern()"),la(O,K),this},m.beginTilingPattern=function(O){k("beginTilingPattern()"),As(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},m.endTilingPattern=function(O,K){k("endTilingPattern()"),K.stream=Ce[B].join(`
`),la(O,K),yr.publish("endTilingPattern",K),or.pop().restore()};var _e,wt=m.__private__.newObject=function(){var O=dt();return ht(O,!0),O},dt=m.__private__.newObjectDeferred=function(){return X++,Z[X]=function(){return te},X},ht=function(O,K){return K=typeof K=="boolean"&&K,Z[O]=te,K&&ce(O+" 0 obj"),O},mt=m.__private__.newAdditionalObject=function(){var O={objId:dt(),content:""};return ve.push(O),O},at=dt(),$t=dt(),ut=m.__private__.decodeColorString=function(O){var K=O.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length!==5||K[4]!=="k"&&K[4]!=="K"||(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var ge=parseFloat(K[0]);K=[ge,ge,ge,"r"]}for(var ke="#",Fe=0;Fe<3;Fe++)ke+=("0"+Math.floor(255*parseFloat(K[Fe])).toString(16)).slice(-2);return ke},Wt=m.__private__.encodeColorString=function(O){var K;typeof O=="string"&&(O={ch1:O});var ge=O.ch1,ke=O.ch2,Fe=O.ch3,ft=O.ch4,Bt=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var vr=new rne(ge);if(vr.ok)ge=vr.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var br=parseInt(ge.substr(1),16);ge=br>>16&255,ke=br>>8&255,Fe=255&br}if(ke===void 0||ft===void 0&&ge===ke&&ke===Fe)K=typeof ge=="string"?ge+" "+Bt[0]:O.precision===2?E(ge/255)+" "+Bt[0]:I(ge/255)+" "+Bt[0];else if(ft===void 0||Bn(ft)==="object"){if(ft&&!isNaN(ft.a)&&ft.a===0)return["1.","1.","1.",Bt[1]].join(" ");K=typeof ge=="string"?[ge,ke,Fe,Bt[1]].join(" "):O.precision===2?[E(ge/255),E(ke/255),E(Fe/255),Bt[1]].join(" "):[I(ge/255),I(ke/255),I(Fe/255),Bt[1]].join(" ")}else K=typeof ge=="string"?[ge,ke,Fe,ft,Bt[2]].join(" "):O.precision===2?[E(ge),E(ke),E(Fe),E(ft),Bt[2]].join(" "):[I(ge),I(ke),I(Fe),I(ft),Bt[2]].join(" ");return K},Yt=m.__private__.getFilters=function(){return o},nr=m.__private__.putStream=function(O){var K=(O=O||{}).data||"",ge=O.filters||Yt(),ke=O.alreadyAppliedFilters||[],Fe=O.addLength1||!1,ft=K.length,Bt=O.objectId,vr=function(Ia){return Ia};if(d!==null&&Bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(vr=ie.encryptor(Bt,0));var br={};ge===!0&&(ge=["FlateEncode"]);var an=O.additionalKeyValues||[],Wr=(br=Rr.API.processDataByFilters!==void 0?Rr.API.processDataByFilters(K,ge):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(ke)?ke.join(" "):ke.toString());if(br.data.length!==0&&(an.push({key:"Length",value:br.data.length}),Fe===!0&&an.push({key:"Length1",value:ft})),Wr.length!=0)if(Wr.split("/").length-1==1)an.push({key:"Filter",value:Wr});else{an.push({key:"Filter",value:"["+Wr+"]"});for(var $n=0;$n<an.length;$n+=1)if(an[$n].key==="DecodeParms"){for(var Ta=[],Ua=0;Ua<br.reverseChain.split("/").length-1;Ua+=1)Ta.push("null");Ta.push(an[$n].value),an[$n].value="["+Ta.join(" ")+"]"}}ce("<<");for(var ra=0;ra<an.length;ra++)ce("/"+an[ra].key+" "+an[ra].value);ce(">>"),br.data.length!==0&&(ce("stream"),ce(vr(br.data)),ce("endstream"))},Vr=m.__private__.putPage=function(O){var K=O.number,ge=O.data,ke=O.objId,Fe=O.contentsObjId;ht(ke,!0),ce("<</Type /Page"),ce("/Parent "+O.rootDictionaryObjId+" 0 R"),ce("/Resources "+O.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(C(O.mediaBox.bottomLeftX))+" "+parseFloat(C(O.mediaBox.bottomLeftY))+" "+C(O.mediaBox.topRightX)+" "+C(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&ce("/CropBox ["+C(O.cropBox.bottomLeftX)+" "+C(O.cropBox.bottomLeftY)+" "+C(O.cropBox.topRightX)+" "+C(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&ce("/BleedBox ["+C(O.bleedBox.bottomLeftX)+" "+C(O.bleedBox.bottomLeftY)+" "+C(O.bleedBox.topRightX)+" "+C(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&ce("/TrimBox ["+C(O.trimBox.bottomLeftX)+" "+C(O.trimBox.bottomLeftY)+" "+C(O.trimBox.topRightX)+" "+C(O.trimBox.topRightY)+"]"),O.artBox!==null&&ce("/ArtBox ["+C(O.artBox.bottomLeftX)+" "+C(O.artBox.bottomLeftY)+" "+C(O.artBox.topRightX)+" "+C(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&ce("/UserUnit "+O.userUnit),yr.publish("putPage",{objId:ke,pageContext:Or[K],pageNumber:K,page:ge}),ce("/Contents "+Fe+" 0 R"),ce(">>"),ce("endobj");var ft=ge.join(`
`);return _===w&&(ft+=`
Q`),ht(Fe,!0),nr({data:ft,filters:Yt(),objectId:Fe}),ce("endobj"),ke},Cn=m.__private__.putPages=function(){var O,K,ge=[];for(O=1;O<=fn;O++)Or[O].objId=dt(),Or[O].contentsObjId=dt();for(O=1;O<=fn;O++)ge.push(Vr({number:O,data:Ce[O],objId:Or[O].objId,contentsObjId:Or[O].contentsObjId,mediaBox:Or[O].mediaBox,cropBox:Or[O].cropBox,bleedBox:Or[O].bleedBox,trimBox:Or[O].trimBox,artBox:Or[O].artBox,userUnit:Or[O].userUnit,rootDictionaryObjId:at,resourceDictionaryObjId:$t}));ht(at,!0),ce("<</Type /Pages");var ke="/Kids [";for(K=0;K<fn;K++)ke+=ge[K]+" 0 R ";ce(ke+"]"),ce("/Count "+fn),ce(">>"),ce("endobj"),yr.publish("postPutPages")},Sn=function(O){yr.publish("putFont",{font:O,out:ce,newObject:wt,putStream:nr}),O.isAlreadyPutted!==!0&&(O.objectNumber=wt(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+Gp(O.postScriptName)),ce("/Subtype /Type1"),typeof O.encoding=="string"&&ce("/Encoding /"+O.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},Fi=function(O){O.objectNumber=wt();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[C(O.x),C(O.y),C(O.x+O.width),C(O.y+O.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var ge=O.pages[1].join(`
`);nr({data:ge,additionalKeyValues:K,objectId:O.objectNumber}),ce("endobj")},ja=function(O,K){K||(K=21);var ge=wt(),ke=function(Bt,vr){var br,an=[],Wr=1/(vr-1);for(br=0;br<1;br+=Wr)an.push(br);if(an.push(1),Bt[0].offset!=0){var $n={offset:0,color:Bt[0].color};Bt.unshift($n)}if(Bt[Bt.length-1].offset!=1){var Ta={offset:1,color:Bt[Bt.length-1].color};Bt.push(Ta)}for(var Ua="",ra=0,Ia=0;Ia<an.length;Ia++){for(br=an[Ia];br>Bt[ra+1].offset;)ra++;var na=Bt[ra].offset,si=(br-na)/(Bt[ra+1].offset-na),Mo=Bt[ra].color,_i=Bt[ra+1].color;Ua+=q(Math.round((1-si)*Mo[0]+si*_i[0]).toString(16))+q(Math.round((1-si)*Mo[1]+si*_i[1]).toString(16))+q(Math.round((1-si)*Mo[2]+si*_i[2]).toString(16))}return Ua.trim()}(O.colors,K),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+K+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nr({data:ke,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),ce("endobj"),O.objectNumber=wt(),ce("<< /ShadingType "+O.type),ce("/ColorSpace /DeviceRGB");var ft="/Coords ["+C(parseFloat(O.coords[0]))+" "+C(parseFloat(O.coords[1]))+" ";O.type===2?ft+=C(parseFloat(O.coords[2]))+" "+C(parseFloat(O.coords[3])):ft+=C(parseFloat(O.coords[2]))+" "+C(parseFloat(O.coords[3]))+" "+C(parseFloat(O.coords[4]))+" "+C(parseFloat(O.coords[5])),ce(ft+="]"),O.matrix&&ce("/Matrix ["+O.matrix.toString()+"]"),ce("/Function "+ge+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},da=function(O,K){var ge=dt(),ke=wt();K.push({resourcesOid:ge,objectOid:ke}),O.objectNumber=ke;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+O.boundingBox.map(C).join(" ")+"]"}),Fe.push({key:"XStep",value:C(O.xStep)}),Fe.push({key:"YStep",value:C(O.yStep)}),Fe.push({key:"Resources",value:ge+" 0 R"}),O.matrix&&Fe.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),nr({data:O.stream,additionalKeyValues:Fe,objectId:O.objectNumber}),ce("endobj")},oi=function(O){for(var K in O.objectNumber=wt(),ce("<<"),O)switch(K){case"opacity":ce("/ca "+E(O[K]));break;case"stroke-opacity":ce("/CA "+E(O[K]))}ce(">>"),ce("endobj")},Tn=function(O){ht(O.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var K in ce("/Font <<"),Ve)Ve.hasOwnProperty(K)&&(f===!1||f===!0&&h.hasOwnProperty(K))&&ce("/"+K+" "+Ve[K].objectNumber+" 0 R");ce(">>")}(),function(){if(Object.keys(Lt).length>0){for(var K in ce("/Shading <<"),Lt)Lt.hasOwnProperty(K)&&Lt[K]instanceof Cf&&Lt[K].objectNumber>=0&&ce("/"+K+" "+Lt[K].objectNumber+" 0 R");yr.publish("putShadingPatternDict"),ce(">>")}}(),function(K){if(Object.keys(Lt).length>0){for(var ge in ce("/Pattern <<"),Lt)Lt.hasOwnProperty(ge)&&Lt[ge]instanceof m.TilingPattern&&Lt[ge].objectNumber>=0&&Lt[ge].objectNumber<K&&ce("/"+ge+" "+Lt[ge].objectNumber+" 0 R");yr.publish("putTilingPatternDict"),ce(">>")}}(O.objectOid),function(){if(Object.keys(ir).length>0){var K;for(K in ce("/ExtGState <<"),ir)ir.hasOwnProperty(K)&&ir[K].objectNumber>=0&&ce("/"+K+" "+ir[K].objectNumber+" 0 R");yr.publish("putGStateDict"),ce(">>")}}(),function(){for(var K in ce("/XObject <<"),Dr)Dr.hasOwnProperty(K)&&Dr[K].objectNumber>=0&&ce("/"+K+" "+Dr[K].objectNumber+" 0 R");yr.publish("putXobjectDict"),ce(">>")}(),ce(">>"),ce("endobj")},Cs=function(O){nt[O.fontName]=nt[O.fontName]||{},nt[O.fontName][O.fontStyle]=O.id},so=function(O,K,ge,ke,Fe){var ft={id:"F"+(Object.keys(Ve).length+1).toString(10),postScriptName:O,fontName:K,fontStyle:ge,encoding:ke,isStandardFont:Fe||!1,metadata:{}};return yr.publish("addFont",{font:ft,instance:this}),Ve[ft.id]=ft,Cs(ft),ft.id},hn=m.__private__.pdfEscape=m.pdfEscape=function(O,K){return function(ge,ke){var Fe,ft,Bt,vr,br,an,Wr,$n,Ta;if(Bt=(ke=ke||{}).sourceEncoding||"Unicode",br=ke.outputEncoding,(ke.autoencode||br)&&Ve[kt].metadata&&Ve[kt].metadata[Bt]&&Ve[kt].metadata[Bt].encoding&&(vr=Ve[kt].metadata[Bt].encoding,!br&&Ve[kt].encoding&&(br=Ve[kt].encoding),!br&&vr.codePages&&(br=vr.codePages[0]),typeof br=="string"&&(br=vr[br]),br)){for(Wr=!1,an=[],Fe=0,ft=ge.length;Fe<ft;Fe++)($n=br[ge.charCodeAt(Fe)])?an.push(String.fromCharCode($n)):an.push(ge[Fe]),an[Fe].charCodeAt(0)>>8&&(Wr=!0);ge=an.join("")}for(Fe=ge.length;Wr===void 0&&Fe!==0;)ge.charCodeAt(Fe-1)>>8&&(Wr=!0),Fe--;if(!Wr)return ge;for(an=ke.noBOM?[]:[254,255],Fe=0,ft=ge.length;Fe<ft;Fe++){if((Ta=($n=ge.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");an.push(Ta),an.push($n-(Ta<<8))}return String.fromCharCode.apply(void 0,an)}(O,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Io=m.__private__.beginPage=function(O){Ce[++fn]=[],Or[fn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},mi(fn),ye(Ce[B])},Bi=function(O,K){var ge,ke,Fe;switch(r=K||r,typeof O=="string"&&(ge=x(O.toLowerCase()),Array.isArray(ge)&&(ke=ge[0],Fe=ge[1])),Array.isArray(O)&&(ke=O[0]*yt,Fe=O[1]*yt),isNaN(ke)&&(ke=a[0],Fe=a[1]),(ke>14400||Fe>14400)&&(Pa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ke=Math.min(14400,ke),Fe=Math.min(14400,Fe)),a=[ke,Fe],r.substr(0,1)){case"l":Fe>ke&&(a=[Fe,ke]);break;case"p":ke>Fe&&(a=[Fe,ke])}Io(a),Dt(zt),ce(Fr),lo!==0&&ce(lo+" J"),ca!==0&&ce(ca+" j"),yr.publish("addPage",{pageNumber:fn})},Ii=function(O){O>0&&O<=fn&&(Ce.splice(O,1),Or.splice(O,1),fn--,B>fn&&(B=fn),this.setPage(B))},mi=function(O){O>0&&O<=fn&&(B=O)},ee=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ce.length-1},Ie=function(O,K,ge){var ke,Fe=void 0;return ge=ge||{},O=O!==void 0?O:Ve[kt].fontName,K=K!==void 0?K:Ve[kt].fontStyle,ke=O.toLowerCase(),nt[ke]!==void 0&&nt[ke][K]!==void 0?Fe=nt[ke][K]:nt[O]!==void 0&&nt[O][K]!==void 0?Fe=nt[O][K]:ge.disableWarning===!1&&Pa.warn("Unable to look up font label for font '"+O+"', '"+K+"'. Refer to getFontList() for available fonts."),Fe||ge.noFallback||(Fe=nt.times[K])==null&&(Fe=nt.times.normal),Fe},tt=m.__private__.putInfo=function(){var O=wt(),K=function(ke){return ke};for(var ge in d!==null&&(K=ie.encryptor(O,0)),ce("<<"),ce("/Producer ("+hn(K("jsPDF "+Rr.version))+")"),ot)ot.hasOwnProperty(ge)&&ot[ge]&&ce("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+hn(K(ot[ge]))+")");ce("/CreationDate ("+hn(K(z))+")"),ce(">>"),ce("endobj")},Qt=m.__private__.putCatalog=function(O){var K=(O=O||{}).rootDictionaryObjId||at;switch(wt(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+K+" 0 R"),Ze||(Ze="fullwidth"),Ze){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+Ze;ge.substr(ge.length-1)==="%"&&(Ze=parseInt(Ze)/100),typeof Ze=="number"&&ce("/OpenAction [3 0 R /XYZ null null "+E(Ze)+"]")}switch(Ke||(Ke="continuous"),Ke){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}rt&&ce("/PageMode /"+rt),yr.publish("putCatalog"),ce(">>"),ce("endobj")},it=m.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(X+1)),ce("/Root "+X+" 0 R"),ce("/Info "+(X-1)+" 0 R"),d!==null&&ce("/Encrypt "+ie.oid+" 0 R"),ce("/ID [ <"+V+"> <"+V+"> ]"),ce(">>")},lt=m.__private__.putHeader=function(){ce("%PDF-"+g),ce("%")},tr=m.__private__.putXRef=function(){var O="0000000000";ce("xref"),ce("0 "+(X+1)),ce("0000000000 65535 f ");for(var K=1;K<=X;K++)typeof Z[K]=="function"?ce((O+Z[K]()).slice(-10)+" 00000 n "):Z[K]!==void 0?ce((O+Z[K]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},mr=m.__private__.buildDocument=function(){var O;X=0,te=0,pe=[],Z=[],ve=[],at=dt(),$t=dt(),ye(pe),yr.publish("buildDocument"),lt(),Cn(),function(){yr.publish("putAdditionalObjects");for(var ge=0;ge<ve.length;ge++){var ke=ve[ge];ht(ke.objId,!0),ce(ke.content),ce("endobj")}yr.publish("postPutAdditionalObjects")}(),O=[],function(){for(var ge in Ve)Ve.hasOwnProperty(ge)&&(f===!1||f===!0&&h.hasOwnProperty(ge))&&Sn(Ve[ge])}(),function(){var ge;for(ge in ir)ir.hasOwnProperty(ge)&&oi(ir[ge])}(),function(){for(var ge in Dr)Dr.hasOwnProperty(ge)&&Fi(Dr[ge])}(),function(ge){var ke;for(ke in Lt)Lt.hasOwnProperty(ke)&&(Lt[ke]instanceof Cf?ja(Lt[ke]):Lt[ke]instanceof xm&&da(Lt[ke],ge))}(O),yr.publish("putResources"),O.forEach(Tn),Tn({resourcesOid:$t,objectOid:Number.MAX_SAFE_INTEGER}),yr.publish("postPutResources"),d!==null&&(ie.oid=wt(),ce("<<"),ce("/Filter /Standard"),ce("/V "+ie.v),ce("/R "+ie.r),ce("/U <"+ie.toHexString(ie.U)+">"),ce("/O <"+ie.toHexString(ie.O)+">"),ce("/P "+ie.P),ce(">>"),ce("endobj")),tt(),Qt();var K=te;return tr(),it(),ce("startxref"),ce(""+K),ce("%%EOF"),ye(Ce[B]),pe.join(`
`)},er=m.__private__.getBlob=function(O){return new Blob([qt(O)],{type:"application/pdf"})},Zt=m.output=m.__private__.output=(_e=function(O,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",O){case void 0:return mr();case"save":m.save(K.filename);break;case"arraybuffer":return qt(mr());case"blob":return er(mr());case"bloburi":case"bloburl":if(sn.URL!==void 0&&typeof sn.URL.createObjectURL=="function")return sn.URL&&sn.URL.createObjectURL(er(mr()))||void 0;Pa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",ke=mr();try{ge=pq(ke)}catch{ge=pq(unescape(encodeURIComponent(ke)))}return"data:application/pdf;filename="+K.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ft=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Fe=K.pdfObjectUrl,ft="");var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+ft+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",vr=sn.open();return vr!==null&&vr.document.write(Bt),vr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',an=sn.open();if(an!==null){an.document.write(br);var Wr=this;an.document.documentElement.querySelector("#pdfViewer").onload=function(){an.document.title=K.filename,an.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wr.output("bloburl"))}}return an}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',Ta=sn.open();if(Ta!==null&&(Ta.document.write($n),Ta.document.title=K.filename),Ta||typeof safari>"u")return Ta;break;case"datauri":case"dataurl":return sn.document.location.href=this.output("datauristring",K);default:return null}},_e.foo=function(){try{return _e.apply(this,arguments)}catch(ge){var O=ge.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var K="Error in function "+O.split(`
`)[0].split("<")[0]+": "+ge.message;if(!sn.console)throw new Error(K);sn.console.error(K,ge),sn.alert&&alert(K)}},_e.foo.bar=_e,_e.foo),kr=function(O){return Array.isArray(Er)===!0&&Er.indexOf(O)>-1};switch(n){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=kr("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);yt=n}var ie=null;de(),$();var ae=m.__private__.getPageInfo=m.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Or[O].objId,pageNumber:O,pageContext:Or[O]}},Re=m.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in Or)if(Or[K].objId===O)break;return ae(K)},Le=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Or[B].objId,pageNumber:B,pageContext:Or[B]}};m.addPage=function(){return Bi.apply(this,arguments),this},m.setPage=function(){return mi.apply(this,arguments),ye.call(this,Ce[B]),this},m.insertPage=function(O){return this.addPage(),this.movePage(B,O),this},m.movePage=function(O,K){var ge,ke;if(O>K){ge=Ce[O],ke=Or[O];for(var Fe=O;Fe>K;Fe--)Ce[Fe]=Ce[Fe-1],Or[Fe]=Or[Fe-1];Ce[K]=ge,Or[K]=ke,this.setPage(K)}else if(O<K){ge=Ce[O],ke=Or[O];for(var ft=O;ft<K;ft++)Ce[ft]=Ce[ft+1],Or[ft]=Or[ft+1];Ce[K]=ge,Or[K]=ke,this.setPage(K)}return this},m.deletePage=function(){return Ii.apply(this,arguments),this},m.__private__.text=m.text=function(O,K,ge,ke,Fe){var ft,Bt,vr,br,an,Wr,$n,Ta,Ua,ra=(ke=ke||{}).scope||this;if(typeof O=="number"&&typeof K=="number"&&(typeof ge=="string"||Array.isArray(ge))){var Ia=ge;ge=K,K=O,O=Ia}if(arguments[3]instanceof dr==0?(vr=arguments[4],br=arguments[5],Bn($n=arguments[3])==="object"&&$n!==null||(typeof vr=="string"&&(br=vr,vr=null),typeof $n=="string"&&(br=$n,$n=null),typeof $n=="number"&&(vr=$n,$n=null),ke={flags:$n,angle:vr,align:br})):(k("The transform parameter of text() with a Matrix value"),Ua=Fe),isNaN(K)||isNaN(ge)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return ra;var na,si="",Mo=typeof ke.lineHeightFactor=="number"?ke.lineHeightFactor:Nt,_i=ra.internal.scaleFactor;function yp(oa){return oa=oa.split("	").join(Array(ke.TabLen||9).join(" ")),hn(oa,$n)}function Ru(oa){for(var ha,Za=oa.concat(),qi=[],Bu=Za.length;Bu--;)typeof(ha=Za.shift())=="string"?qi.push(ha):Array.isArray(oa)&&(ha.length===1||ha[1]===void 0&&ha[2]===void 0)?qi.push(ha[0]):qi.push([ha[0],ha[1],ha[2]]);return qi}function lc(oa,ha){var Za;if(typeof oa=="string")Za=ha(oa)[0];else if(Array.isArray(oa)){for(var qi,Bu,ly=oa.concat(),bp=[],h1=ly.length;h1--;)typeof(qi=ly.shift())=="string"?bp.push(ha(qi)[0]):Array.isArray(qi)&&typeof qi[0]=="string"&&(Bu=ha(qi[0],qi[1],qi[2]),bp.push([Bu[0],Bu[1],Bu[2]]));Za=bp}return Za}var Ol=!1,cc=!0;if(typeof O=="string")Ol=!0;else if(Array.isArray(O)){var Qo=O.concat();Bt=[];for(var Lu,fa=Qo.length;fa--;)(typeof(Lu=Qo.shift())!="string"||Array.isArray(Lu)&&typeof Lu[0]!="string")&&(cc=!1);Ol=cc}if(Ol===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Tl=et/ra.internal.scaleFactor,$u=Tl*(Mo-1);switch(ke.baseline){case"bottom":ge-=$u;break;case"top":ge+=Tl-$u;break;case"hanging":ge+=Tl-2*$u;break;case"middle":ge+=Tl/2-$u}if((Wr=ke.maxWidth||0)>0&&(typeof O=="string"?O=ra.splitTextToSize(O,Wr):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(oa,ha){return oa.concat(ra.splitTextToSize(ha,Wr))},[]))),ft={text:O,x:K,y:ge,options:ke,mutex:{pdfEscape:hn,activeFontKey:kt,fonts:Ve,activeFontSize:et}},yr.publish("preProcessText",ft),O=ft.text,vr=(ke=ft.options).angle,Ua instanceof dr==0&&vr&&typeof vr=="number"){vr*=Math.PI/180,ke.rotationDirection===0&&(vr=-vr),_===w&&(vr=-vr);var Es=Math.cos(vr),Kd=Math.sin(vr);Ua=new dr(Es,Kd,-Kd,Es,0,0)}else vr&&vr instanceof dr&&(Ua=vr);_!==w||Ua||(Ua=qa),(an=ke.charSpace||Kn)!==void 0&&(si+=C(T(an))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ta=ke.horizontalScale)!==void 0&&(si+=C(100*Ta)+` Tz
`),ke.lang;var Ja=-1,uc=ke.renderingMode!==void 0?ke.renderingMode:ke.stroke,Yd=ra.internal.getCurrentPageInfo().pageContext;switch(uc){case 0:case!1:case"fill":Ja=0;break;case 1:case!0:case"stroke":Ja=1;break;case 2:case"fillThenStroke":Ja=2;break;case 3:case"invisible":Ja=3;break;case 4:case"fillAndAddForClipping":Ja=4;break;case 5:case"strokeAndAddPathForClipping":Ja=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ja=6;break;case 7:case"addToPathForClipping":Ja=7}var xp=Yd.usedRenderingMode!==void 0?Yd.usedRenderingMode:-1;Ja!==-1?si+=Ja+` Tr
`:xp!==-1&&(si+=`0 Tr
`),Ja!==-1&&(Yd.usedRenderingMode=Ja),br=ke.align||"left";var Zo,ji=et*Mo,Xd=ra.internal.pageSize.getWidth(),ks=Ve[kt];an=ke.charSpace||Kn,Wr=ke.maxWidth||0,$n=Object.assign({autoencode:!0,noBOM:!0},ke.flags);var Qa=[],Fu=function(oa){return ra.getStringUnitWidth(oa,{font:ks,charSpace:an,fontSize:et,doKerning:!1})*et/_i};if(Object.prototype.toString.call(O)==="[object Array]"){var es;Bt=Ru(O),br!=="left"&&(Zo=Bt.map(Fu));var zi,ne=0;if(br==="right"){K-=Zo[0],O=[],fa=Bt.length;for(var Ne=0;Ne<fa;Ne++)Ne===0?(zi=Nr(K),es=Te(ge)):(zi=T(ne-Zo[Ne]),es=-ji),O.push([Bt[Ne],zi,es]),ne=Zo[Ne]}else if(br==="center"){K-=Zo[0]/2,O=[],fa=Bt.length;for(var Se=0;Se<fa;Se++)Se===0?(zi=Nr(K),es=Te(ge)):(zi=T((ne-Zo[Se])/2),es=-ji),O.push([Bt[Se],zi,es]),ne=Zo[Se]}else if(br==="left"){O=[],fa=Bt.length;for(var Be=0;Be<fa;Be++)O.push(Bt[Be])}else if(br==="justify"&&ks.encoding==="Identity-H"){O=[],fa=Bt.length,Wr=Wr!==0?Wr:Xd;for(var Je=0,st=0;st<fa;st++)if(es=st===0?Te(ge):-ji,zi=st===0?Nr(K):Je,st<fa-1){var St=T((Wr-Zo[st])/(Bt[st].split(" ").length-1)),Ct=Bt[st].split(" ");O.push([Ct[0]+" ",zi,es]),Je=0;for(var xr=1;xr<Ct.length;xr++){var zr=(Fu(Ct[xr-1]+" "+Ct[xr])-Fu(Ct[xr]))*_i+St;xr==Ct.length-1?O.push([Ct[xr],zr,0]):O.push([Ct[xr]+" ",zr,0]),Je-=zr}}else O.push([Bt[st],zi,es]);O.push(["",Je,0])}else{if(br!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],fa=Bt.length,Wr=Wr!==0?Wr:Xd,st=0;st<fa;st++){es=st===0?Te(ge):-ji,zi=st===0?Nr(K):0;var en=Bt[st].split(" ").length-1,Sa=en>0?(Wr-Zo[st])/en:0;st<fa-1?Qa.push(C(T(Sa))):Qa.push(0),O.push([Bt[st],zi,es])}}}(typeof ke.R2L=="boolean"?ke.R2L:ue)===!0&&(O=lc(O,function(oa,ha,Za){return[oa.split("").reverse().join(""),ha,Za]})),ft={text:O,x:K,y:ge,options:ke,mutex:{pdfEscape:hn,activeFontKey:kt,fonts:Ve,activeFontSize:et}},yr.publish("postProcessText",ft),O=ft.text,na=ft.mutex.isHex||!1;var pi=Ve[kt].encoding;pi!=="WinAnsiEncoding"&&pi!=="StandardEncoding"||(O=lc(O,function(oa,ha,Za){return[yp(oa),ha,Za]})),Bt=Ru(O),O=[];for(var li,gn,Cr,Yn=Array.isArray(Bt[0])?1:0,zn="",Ca=function(oa,ha,Za){var qi="";return Za instanceof dr?(Za=typeof ke.angle=="number"?Vn(Za,new dr(1,0,0,1,oa,ha)):Vn(new dr(1,0,0,1,oa,ha),Za),_===w&&(Za=Vn(new dr(1,0,0,-1,0,0),Za)),qi=Za.join(" ")+` Tm
`):qi=C(oa)+" "+C(ha)+` Td
`,qi},Xn=0;Xn<Bt.length;Xn++){switch(zn="",Yn){case 1:Cr=(na?"<":"(")+Bt[Xn][0]+(na?">":")"),li=parseFloat(Bt[Xn][1]),gn=parseFloat(Bt[Xn][2]);break;case 0:Cr=(na?"<":"(")+Bt[Xn]+(na?">":")"),li=Nr(K),gn=Te(ge)}Qa!==void 0&&Qa[Xn]!==void 0&&(zn=Qa[Xn]+` Tw
`),Xn===0?O.push(zn+Ca(li,gn,Ua)+Cr):Yn===0?O.push(zn+Cr):Yn===1&&O.push(zn+Ca(li,gn,Ua)+Cr)}O=Yn===0?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var co=`BT
/`;return co+=kt+" "+et+` Tf
`,co+=C(et*Mo)+` TL
`,co+=wr+`
`,co+=si,co+=O,ce(co+="ET"),h[kt]=!0,ra};var _t=m.__private__.clip=m.clip=function(O){return ce(O==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return _t("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ce("n"),this};var H=m.__private__.isValidStyle=function(O){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(K=!0),K};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(O){return H(O)&&(u=O),this};var U=m.__private__.getStyle=m.getStyle=function(O){var K=u;switch(O){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=O}return K},le=m.close=function(){return ce("h"),this};m.stroke=function(){return ce("S"),this},m.fill=function(O){return we("f",O),this},m.fillEvenOdd=function(O){return we("f*",O),this},m.fillStroke=function(O){return we("B",O),this},m.fillStrokeEvenOdd=function(O){return we("B*",O),this};var we=function(O,K){Bn(K)==="object"?He(K,O):ce(O)},Oe=function(O){O===null||_===w&&O===void 0||(O=U(O),ce(O))};function $e(O,K,ge,ke,Fe){var ft=new xm(K||this.boundingBox,ge||this.xStep,ke||this.yStep,this.gState,Fe||this.matrix);ft.stream=this.stream;var Bt=O+"$$"+this.cloneIndex+++"$$";return la(Bt,ft),ft}var He=function(O,K){var ge=Tt[O.key],ke=Lt[ge];if(ke instanceof Cf)ce("q"),ce(jt(K)),ke.gState&&m.setGState(ke.gState),ce(O.matrix.toString()+" cm"),ce("/"+ge+" sh"),ce("Q");else if(ke instanceof xm){var Fe=new dr(1,0,0,-1,0,sc());O.matrix&&(Fe=Fe.multiply(O.matrix||qa),ge=$e.call(ke,O.key,O.boundingBox,O.xStep,O.yStep,Fe).id),ce("q"),ce("/Pattern cs"),ce("/"+ge+" scn"),ke.gState&&m.setGState(ke.gState),ce(K),ce("Q")}},jt=function(O){switch(O){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Kt=m.moveTo=function(O,K){return ce(C(T(O))+" "+C(M(K))+" m"),this},Qe=m.lineTo=function(O,K){return ce(C(T(O))+" "+C(M(K))+" l"),this},gt=m.curveTo=function(O,K,ge,ke,Fe,ft){return ce([C(T(O)),C(M(K)),C(T(ge)),C(M(ke)),C(T(Fe)),C(M(ft)),"c"].join(" ")),this};m.__private__.line=m.line=function(O,K,ge,ke,Fe){if(isNaN(O)||isNaN(K)||isNaN(ge)||isNaN(ke)||!H(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return _===b?this.lines([[ge-O,ke-K]],O,K,[1,1],Fe||"S"):this.lines([[ge-O,ke-K]],O,K,[1,1]).stroke()},m.__private__.lines=m.lines=function(O,K,ge,ke,Fe,ft){var Bt,vr,br,an,Wr,$n,Ta,Ua,ra,Ia,na,si;if(typeof O=="number"&&(si=ge,ge=K,K=O,O=si),ke=ke||[1,1],ft=ft||!1,isNaN(K)||isNaN(ge)||!Array.isArray(O)||!Array.isArray(ke)||!H(Fe)||typeof ft!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Kt(K,ge),Bt=ke[0],vr=ke[1],an=O.length,Ia=K,na=ge,br=0;br<an;br++)(Wr=O[br]).length===2?(Ia=Wr[0]*Bt+Ia,na=Wr[1]*vr+na,Qe(Ia,na)):($n=Wr[0]*Bt+Ia,Ta=Wr[1]*vr+na,Ua=Wr[2]*Bt+Ia,ra=Wr[3]*vr+na,Ia=Wr[4]*Bt+Ia,na=Wr[5]*vr+na,gt($n,Ta,Ua,ra,Ia,na));return ft&&le(),Oe(Fe),this},m.path=function(O){for(var K=0;K<O.length;K++){var ge=O[K],ke=ge.c;switch(ge.op){case"m":Kt(ke[0],ke[1]);break;case"l":Qe(ke[0],ke[1]);break;case"c":gt.apply(this,ke);break;case"h":le()}}return this},m.__private__.rect=m.rect=function(O,K,ge,ke,Fe){if(isNaN(O)||isNaN(K)||isNaN(ge)||isNaN(ke)||!H(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return _===b&&(ke=-ke),ce([C(T(O)),C(M(K)),C(T(ge)),C(T(ke)),"re"].join(" ")),Oe(Fe),this},m.__private__.triangle=m.triangle=function(O,K,ge,ke,Fe,ft,Bt){if(isNaN(O)||isNaN(K)||isNaN(ge)||isNaN(ke)||isNaN(Fe)||isNaN(ft)||!H(Bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-O,ke-K],[Fe-ge,ft-ke],[O-Fe,K-ft]],O,K,[1,1],Bt,!0),this},m.__private__.roundedRect=m.roundedRect=function(O,K,ge,ke,Fe,ft,Bt){if(isNaN(O)||isNaN(K)||isNaN(ge)||isNaN(ke)||isNaN(Fe)||isNaN(ft)||!H(Bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vr=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*ge),ft=Math.min(ft,.5*ke),this.lines([[ge-2*Fe,0],[Fe*vr,0,Fe,ft-ft*vr,Fe,ft],[0,ke-2*ft],[0,ft*vr,-Fe*vr,ft,-Fe,ft],[2*Fe-ge,0],[-Fe*vr,0,-Fe,-ft*vr,-Fe,-ft],[0,2*ft-ke],[0,-ft*vr,Fe*vr,-ft,Fe,-ft]],O+Fe,K,[1,1],Bt,!0),this},m.__private__.ellipse=m.ellipse=function(O,K,ge,ke,Fe){if(isNaN(O)||isNaN(K)||isNaN(ge)||isNaN(ke)||!H(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ft=4/3*(Math.SQRT2-1)*ge,Bt=4/3*(Math.SQRT2-1)*ke;return Kt(O+ge,K),gt(O+ge,K-Bt,O+ft,K-ke,O,K-ke),gt(O-ft,K-ke,O-ge,K-Bt,O-ge,K),gt(O-ge,K+Bt,O-ft,K+ke,O,K+ke),gt(O+ft,K+ke,O+ge,K+Bt,O+ge,K),Oe(Fe),this},m.__private__.circle=m.circle=function(O,K,ge,ke){if(isNaN(O)||isNaN(K)||isNaN(ge)||!H(ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,K,ge,ge,ke)},m.setFont=function(O,K,ge){return ge&&(K=P(K,ge)),kt=Ie(O,K,{disableWarning:!1}),this};var pr=m.__private__.getFont=m.getFont=function(){return Ve[Ie.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var O,K,ge={};for(O in nt)if(nt.hasOwnProperty(O))for(K in ge[O]=[],nt[O])nt[O].hasOwnProperty(K)&&ge[O].push(K);return ge},m.addFont=function(O,K,ge,ke,Fe){var ft=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ft.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&ft.indexOf(arguments[3])==-1&&(ge=P(ge,ke)),so.call(this,O,K,ge,Fe=Fe||"Identity-H")};var Nt,zt=e.lineWidth||.200025,Ue=m.__private__.getLineWidth=m.getLineWidth=function(){return zt},Dt=m.__private__.setLineWidth=m.setLineWidth=function(O){return zt=O,ce(C(T(O))+" w"),this};m.__private__.setLineDash=Rr.API.setLineDash=Rr.API.setLineDashPattern=function(O,K){if(O=O||[],K=K||0,isNaN(K)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(ge){return C(T(ge))}).join(" "),K=C(T(K)),ce("["+O+"] "+K+" d"),this};var Vt=m.__private__.getLineHeight=m.getLineHeight=function(){return et*Nt};m.__private__.getLineHeight=m.getLineHeight=function(){return et*Nt};var gr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(Nt=O),this},Zr=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Nt};gr(e.lineHeight);var Nr=m.__private__.getHorizontalCoordinate=function(O){return T(O)},Te=m.__private__.getVerticalCoordinate=function(O){return _===w?O:Or[B].mediaBox.topRightY-Or[B].mediaBox.bottomLeftY-T(O)},hr=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(O){return C(Nr(O))},cr=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(O){return C(Te(O))},Fr=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ut(Fr)},m.__private__.setStrokeColor=m.setDrawColor=function(O,K,ge,ke){return Fr=Wt({ch1:O,ch2:K,ch3:ge,ch4:ke,pdfColorType:"draw",precision:2}),ce(Fr),this};var pn=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ut(pn)},m.__private__.setFillColor=m.setFillColor=function(O,K,ge,ke){return pn=Wt({ch1:O,ch2:K,ch3:ge,ch4:ke,pdfColorType:"fill",precision:2}),ce(pn),this};var wr=e.textColor||"0 g",ln=m.__private__.getTextColor=m.getTextColor=function(){return ut(wr)};m.__private__.setTextColor=m.setTextColor=function(O,K,ge,ke){return wr=Wt({ch1:O,ch2:K,ch3:ge,ch4:ke,pdfColorType:"text",precision:3}),this};var Kn=e.charSpace,Na=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Kn||0)};m.__private__.setCharSpace=m.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Kn=O,this};var lo=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(O){var K=m.CapJoinStyles[O];if(K===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lo=K,ce(K+" J"),this};var ca=0;m.__private__.setLineJoin=m.setLineJoin=function(O){var K=m.CapJoinStyles[O];if(K===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ca=K,ce(K+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(C(T(O))+" M"),this},m.GState=pb,m.setGState=function(O){(O=typeof O=="string"?ir[fr[O]]:En(null,O)).equals(ia)||(ce("/"+O.id+" gs"),ia=O)};var En=function(O,K){if(!O||!fr[O]){var ge=!1;for(var ke in ir)if(ir.hasOwnProperty(ke)&&ir[ke].equals(K)){ge=!0;break}if(ge)K=ir[ke];else{var Fe="GS"+(Object.keys(ir).length+1).toString(10);ir[Fe]=K,K.id=Fe}return O&&(fr[O]=K.id),yr.publish("addGState",K),K}};m.addGState=function(O,K){return En(O,K),this},m.saveGraphicsState=function(){return ce("q"),Rt.push({key:kt,size:et,color:wr}),this},m.restoreGraphicsState=function(){ce("Q");var O=Rt.pop();return kt=O.key,et=O.size,wr=O.color,ia=null,this},m.setCurrentTransformationMatrix=function(O){return ce(O.toString()+" cm"),this},m.comment=function(O){return ce("#"+O),this};var Oa=function(O,K){var ge=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(ft){isNaN(ft)||(ge=parseFloat(ft))}});var ke=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(ft){isNaN(ft)||(ke=parseFloat(ft))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(ft){Fe=ft.toString()}}),this},Jc=function(O,K,ge,ke){Oa.call(this,O,K),this.type="rect";var Fe=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(Bt){isNaN(Bt)||(Fe=parseFloat(Bt))}});var ft=ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ft},set:function(Bt){isNaN(Bt)||(ft=parseFloat(Bt))}}),this},Si=function(){this.page=fn,this.currentPage=B,this.pages=Ce.slice(0),this.pagesContext=Or.slice(0),this.x=je,this.y=We,this.matrix=Ot,this.width=Jo(B),this.height=Do(B),this.outputDestination=qe,this.id="",this.objectNumber=-1};Si.prototype.restore=function(){fn=this.page,B=this.currentPage,Or=this.pagesContext,Ce=this.pages,je=this.x,We=this.y,Ot=this.matrix,ta(B,this.width),bo(B,this.height),qe=this.outputDestination};var As=function(O,K,ge,ke,Fe){or.push(new Si),fn=B=0,Ce=[],je=O,We=K,Ot=Fe,Io([ge,ke])};for(var Ps in m.beginFormObject=function(O,K,ge,ke,Fe){return As(O,K,ge,ke,Fe),this},m.endFormObject=function(O){return function(K){if(wa[K])or.pop().restore();else{var ge=new Si,ke="Xo"+(Object.keys(Dr).length+1).toString(10);ge.id=ke,wa[K]=ke,Dr[ke]=ge,yr.publish("addFormObject",ge),or.pop().restore()}}(O),this},m.doFormObject=function(O,K){var ge=Dr[wa[O]];return ce("q"),ce(K.toString()+" cm"),ce("/"+ge.id+" Do"),ce("Q"),this},m.getFormObject=function(O){var K=Dr[wa[O]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},m.save=function(O,K){return O=O||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(em(er(mr()),O),typeof em.unload=="function"&&sn.setTimeout&&setTimeout(em.unload,911),this):new Promise(function(ge,ke){try{var Fe=em(er(mr()),O);typeof em.unload=="function"&&sn.setTimeout&&setTimeout(em.unload,911),ge(Fe)}catch(ft){ke(ft.message)}})},Rr.API)Rr.API.hasOwnProperty(Ps)&&(Ps==="events"&&Rr.API.events.length?function(O,K){var ge,ke,Fe;for(Fe=K.length-1;Fe!==-1;Fe--)ge=K[Fe][0],ke=K[Fe][1],O.subscribe.apply(O,[ge].concat(typeof ke=="function"?[ke]:ke))}(yr,Rr.API.events):m[Ps]=Rr.API[Ps]);function Jo(O){return Or[O].mediaBox.topRightX-Or[O].mediaBox.bottomLeftX}function ta(O,K){Or[O].mediaBox.topRightX=K+Or[O].mediaBox.bottomLeftX}function Do(O){return Or[O].mediaBox.topRightY-Or[O].mediaBox.bottomLeftY}function bo(O,K){Or[O].mediaBox.topRightY=K+Or[O].mediaBox.bottomLeftY}var Mu=m.getPageWidth=function(O){return Jo(O=O||B)/yt},Js=m.setPageWidth=function(O,K){ta(O,K*yt)},sc=m.getPageHeight=function(O){return Do(O=O||B)/yt},Qs=m.setPageHeight=function(O,K){bo(O,K*yt)};return m.internal={pdfEscape:hn,getStyle:U,getFont:pr,getFontSize:Pt,getCharSpace:Na,getTextColor:ln,getLineHeight:Vt,getLineHeightFactor:Zr,getLineWidth:Ue,write:Ft,getHorizontalCoordinate:Nr,getVerticalCoordinate:Te,getCoordinateString:hr,getVerticalCoordinateString:cr,collections:{},newObject:wt,newAdditionalObject:mt,newObjectDeferred:dt,newObjectDeferredBegin:ht,getFilters:Yt,putStream:nr,events:yr,scaleFactor:yt,pageSize:{getWidth:function(){return Mu(B)},setWidth:function(O){Js(B,O)},getHeight:function(){return sc(B)},setHeight:function(O){Qs(B,O)}},encryptionOptions:d,encryption:ie,getEncryptor:function(O){return d!==null?ie.encryptor(O,0):function(K){return K}},output:Zt,getNumberOfPages:ee,pages:Ce,out:ce,f2:E,f3:I,getPageInfo:ae,getPageInfoByObjId:Re,getCurrentPageInfo:Le,getPDFVersion:p,Point:Oa,Rectangle:Jc,Matrix:dr,hasHotfix:kr},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Mu(B)},set:function(O){Js(B,O)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return sc(B)},set:function(O){Qs(B,O)},enumerable:!0,configurable:!0}),function(O){for(var K=0,ge=It.length;K<ge;K++){var ke=so.call(this,O[K][0],O[K][1],O[K][2],It[K][3],!0);f===!1&&(h[ke]=!0);var Fe=O[K][0].split("-");Cs({id:ke,fontName:Fe[0],fontStyle:Fe[1]||""})}yr.publish("addFonts",{fonts:Ve,dictionary:nt})}.call(m,It),kt="F1",Bi(a,r),yr.publish("initialized"),m}Hp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Hp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Hp.prototype.processOwnerPassword=function(e,t){return eT(ZO(t).substr(0,5),e)},Hp.prototype.encryptor=function(e,t){var r=ZO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return eT(r,n)}},pb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Bn(e)!==Bn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Rr.API={events:[]},Rr.version="3.0.3";var yi=Rr.API,kD=1,vp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(e){return e.toFixed(2)},df=function(e){return e.toFixed(5)};yi.__acroform__={};var Xs=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},xq=function(e){return e*kD},eu=function(e){var t=new one,r=Pr.internal.getHeight(e)||0,n=Pr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(mn(n)),Number(mn(r))],t},Fet=yi.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Bet=yi.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},zet=yi.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ei=yi.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zet(e,t-1)},ki=yi.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Fet(e,t-1)},Oi=yi.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bet(e,t-1)},qet=yi.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(mn(c.lowerLeft_X)),Number(mn(c.lowerLeft_Y)),Number(mn(c.upperRight_X)),Number(mn(c.upperRight_Y))]},Uet=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=tT(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+mn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=eu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},tT=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var i=r,o=Pr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Pr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(E,I,T){if(E+1<a.length){var M=I+" "+a[E+1][0];return Rw(M,e,T).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=Rw("3",e,i).height,h=e.multiline?o-i:(o-f)/2,m=h+=2,g=0,p=0,v=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Rw(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var x="",b=0,w=0;w<a.length;w++)if(a.hasOwnProperty(w)){var _=!1;if(a[w].length!==1&&v!==a[w].length-1){if((f+2)*(b+2)+2>o)continue e;x+=a[w][v],_=!0,p=w,w--}else{x=(x+=a[w][v]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(w),A=c(j,x,i),P=w>=a.length-1;if(A&&!P){x+=" ",v=0;continue}if(A||P){if(P)p=j;else if(e.multiline&&(f+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(b+2)+2>o)continue e;p=j}}for(var C="",k=g;k<=p;k++){var R=a[k];if(e.multiline){if(k===p){C+=R[v]+" ",v=(v+1)%R.length;continue}if(k===g){C+=R[R.length-1]+" ";continue}}C+=R[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,d=Rw(C,e,i).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}t+=mn(u)+" "+mn(m)+` Td
`,t+="("+vp(C)+`) Tj
`,t+=-mn(u)+` 0 Td
`,m=-(i+2),d=0,g=_?p:p+1,b++,x=""}break}return n.text=t,n.fontSize=i,n},Rw=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Wet={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vet=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Het=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Yc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Wet)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kD=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new sne,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&Vet(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=qet(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Pr.createDefaultAppearanceStream(l),Bn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Uet(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&function(p,v){for(var x in p)if(p.hasOwnProperty(x)){var b=x,w=p[x];v.internal.newObjectDeferredBegin(w.objId,!0),Bn(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete p[b]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},ine=yi.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Bn(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+vp(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},GA=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+vp(n(e))+")"},hu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hu.prototype.toString=function(){return this.objId+" 0 R"},hu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},hu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:ine(a,this.objId,this.scope)}):a instanceof hu?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var one=function(){hu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Xs(one,hu);var sne=function(){hu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+vp(r(e))+")"}},set:function(r){e=r}})};Xs(sne,hu);var Yc=function e(){hu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ei(t,3)},set:function(x){x?this.F=ki(t,3):this.F=Oi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof D_)return;i="FieldObject"+e.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+vp(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/kD:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof D_||this instanceof nh))return GA(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Zi==0?GA(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Zi==0?x.substr(0,1)==="("?Fp(x.substr(1,x.length-2)):Fp(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zi==1?Fp(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Zi==1?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Zi==0?GA(m,this.objId,this.scope):m},set:function(x){x=x.toString(),m=this instanceof Zi==0?x.substr(0,1)==="("?Fp(x.substr(1,x.length-2)):Fp(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zi==1?Fp(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Zi==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(x){g=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,1)},set:function(x){x?this.Ff=ki(this.Ff,1):this.Ff=Oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,2)},set:function(x){x?this.Ff=ki(this.Ff,2):this.Ff=Oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,3)},set:function(x){x?this.Ff=ki(this.Ff,3):this.Ff=Oi(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');v=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(v){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};Xs(Yc,hu);var Pm=function(){Yc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ine(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,18)},set:function(r){r?this.Ff=ki(this.Ff,18):this.Ff=Oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ki(this.Ff,19):this.Ff=Oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,20)},set:function(r){r?(this.Ff=ki(this.Ff,20),t.sort()):this.Ff=Oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,22)},set:function(r){r?this.Ff=ki(this.Ff,22):this.Ff=Oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,23)},set:function(r){r?this.Ff=ki(this.Ff,23):this.Ff=Oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,27)},set:function(r){r?this.Ff=ki(this.Ff,27):this.Ff=Oi(this.Ff,27)}}),this.hasAppearanceStream=!1};Xs(Pm,Yc);var Em=function(){Pm.call(this),this.fontName="helvetica",this.combo=!1};Xs(Em,Pm);var km=function(){Em.call(this),this.combo=!0};Xs(km,Em);var $x=function(){km.call(this),this.edit=!0};Xs($x,km);var Zi=function(){Yc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,15)},set:function(r){r?this.Ff=ki(this.Ff,15):this.Ff=Oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,16)},set:function(r){r?this.Ff=ki(this.Ff,16):this.Ff=Oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,17)},set:function(r){r?this.Ff=ki(this.Ff,17):this.Ff=Oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,26)},set:function(r){r?this.Ff=ki(this.Ff,26):this.Ff=Oi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+vp(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Bn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Xs(Zi,Yc);var Fx=function(){Zi.call(this),this.pushButton=!0};Xs(Fx,Zi);var Om=function(){Zi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Xs(Om,Zi);var D_=function(){var e,t;Yc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+vp(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Bn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xs(D_,Yc),Om.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Om.prototype.createOption=function(e){var t=new D_;return t.Parent=this,t.optionName=e,this.Kids.push(t),Get.call(this.scope,t),t};var Bx=function(){Zi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pr.CheckBox.createAppearanceStream()};Xs(Bx,Zi);var nh=function(){Yc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,13)},set:function(t){t?this.Ff=ki(this.Ff,13):this.Ff=Oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,21)},set:function(t){t?this.Ff=ki(this.Ff,21):this.Ff=Oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,23)},set:function(t){t?this.Ff=ki(this.Ff,23):this.Ff=Oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,24)},set:function(t){t?this.Ff=ki(this.Ff,24):this.Ff=Oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,25)},set:function(t){t?this.Ff=ki(this.Ff,25):this.Ff=Oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,26)},set:function(t){t?this.Ff=ki(this.Ff,26):this.Ff=Oi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xs(nh,Yc);var zx=function(){nh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,14)},set:function(e){e?this.Ff=ki(this.Ff,14):this.Ff=Oi(this.Ff,14)}}),this.password=!0};Xs(zx,nh);var Pr={CheckBox:{createAppearanceStream:function(){return{N:{On:Pr.CheckBox.YesNormal},D:{On:Pr.CheckBox.YesPushDown,Off:Pr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=eu(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=tT(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+mn(Pr.internal.getWidth(e))+" "+mn(Pr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+mn(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=eu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Pr.internal.getHeight(e),o=Pr.internal.getWidth(e),l=tT(e,e.caption);return a.push("1 g"),a.push("0 0 "+mn(o)+" "+mn(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mn(o-1)+" "+mn(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+mn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=eu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Pr.internal.getWidth(e))+" "+mn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Circle.YesNormal,t.D[e]=Pr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=eu(e);t.scope=e.scope;var r=[],n=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Pr.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+df(Pr.internal.getWidth(e)/2)+" "+df(Pr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=eu(e);t.scope=e.scope;var r=[],n=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Pr.internal.Bezier_C).toFixed(5)),o=Number((n*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+df(Pr.internal.getWidth(e)/2)+" "+df(Pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+df(Pr.internal.getWidth(e)/2)+" "+df(Pr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=eu(e);t.scope=e.scope;var r=[],n=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+df(Pr.internal.getWidth(e)/2)+" "+df(Pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Cross.YesNormal,t.D[e]=Pr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=eu(e);t.scope=e.scope;var r=[],n=Pr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+mn(Pr.internal.getWidth(e)-2)+" "+mn(Pr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(n.x1.x)+" "+mn(n.x1.y)+" m"),r.push(mn(n.x2.x)+" "+mn(n.x2.y)+" l"),r.push(mn(n.x4.x)+" "+mn(n.x4.y)+" m"),r.push(mn(n.x3.x)+" "+mn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=eu(e);t.scope=e.scope;var r=Pr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+mn(Pr.internal.getWidth(e))+" "+mn(Pr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mn(Pr.internal.getWidth(e)-2)+" "+mn(Pr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),n.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),n.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),n.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=eu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Pr.internal.getWidth(e))+" "+mn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Pr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Pr.internal.getWidth(e),r=Pr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Pr.internal.getWidth=function(e){var t=0;return Bn(e)==="object"&&(t=xq(e.Rect[2])),t},Pr.internal.getHeight=function(e){var t=0;return Bn(e)==="object"&&(t=xq(e.Rect[3])),t};var Get=yi.addField=function(e){if(Het(this,e),!(e instanceof Yc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};yi.AcroFormChoiceField=Pm,yi.AcroFormListBox=Em,yi.AcroFormComboBox=km,yi.AcroFormEditBox=$x,yi.AcroFormButton=Zi,yi.AcroFormPushButton=Fx,yi.AcroFormRadioButton=Om,yi.AcroFormCheckBox=Bx,yi.AcroFormTextField=nh,yi.AcroFormPasswordField=zx,yi.AcroFormAppearance=Pr,yi.AcroForm={ChoiceField:Pm,ListBox:Em,ComboBox:km,EditBox:$x,Button:Zi,PushButton:Fx,RadioButton:Om,CheckBox:Bx,TextField:nh,PasswordField:zx,Appearance:Pr},Rr.AcroForm={ChoiceField:Pm,ListBox:Em,ComboBox:km,EditBox:$x,Button:Zi,PushButton:Fx,RadioButton:Om,CheckBox:Bx,TextField:nh,PasswordField:zx,Appearance:Pr};var Ket=Rr.AcroForm;function lne(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(E,I){var T,M,z,V,W,$=r;if((I=I||r)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(A(E))for(W in n)for(z=n[W],T=0;T<z.length;T+=1){for(V=!0,M=0;M<z[T].length;M+=1)if(z[T][M]!==void 0&&z[T][M]!==E[M]){V=!1;break}if(V===!0){$=W;break}}else for(W in n)for(z=n[W],T=0;T<z.length;T+=1){for(V=!0,M=0;M<z[T].length;M+=1)if(z[T][M]!==void 0&&z[T][M]!==E.charCodeAt(M)){V=!1;break}if(V===!0){$=W;break}}return $===r&&I!==r&&($=I),$},i=function E(I){for(var T=this.internal.write,M=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:I.width}),V.push({key:"Height",value:I.height}),I.colorSpace===x.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===x.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var W="",$=0,G=I.transparency.length;$<G;$++)W+=I.transparency[$]+" "+I.transparency[$]+" ";V.push({key:"Mask",value:"["+W+"]"})}I.sMask!==void 0&&V.push({key:"SMask",value:I.objectId+1+" 0 R"});var me=I.filter!==void 0?["/"+I.filter]:void 0;if(M({data:I.data,additionalKeyValues:V,alreadyAppliedFilters:me,objectId:I.objectId}),T("endobj"),"sMask"in I&&I.sMask!==void 0){var de,L=(de=I.sMaskBitsPerComponent)!==null&&de!==void 0?de:I.bitsPerComponent,B={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:I.sMask};"filter"in I&&(B.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(I.width),B.filter=I.filter),E.call(this,B)}if(I.colorSpace===x.INDEXED){var J=this.internal.newObject();M({data:C(new Uint8Array(I.palette)),objectId:J}),T("endobj")}},o=function(){var E=this.internal.collections[t+"images"];for(var I in E)i.call(this,E[I])},l=function(){var E,I=this.internal.collections[t+"images"],T=this.internal.write;for(var M in I)T("/I"+(E=I[M]).index,E.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var E=this.internal.collections[t+"images"];return c.call(this),E},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(E){return typeof e["process"+E.toUpperCase()]=="function"},h=function(E){return Bn(E)==="object"&&E.nodeType===1},m=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var T=""+E.getAttribute("src");if(T.indexOf("data:image/")===0)return m2(unescape(T).split("base64,").pop());var M=e.loadFile(T,!0);if(M!==void 0)return M}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var z;switch(I){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;default:z="image/jpeg"}return m2(E.toDataURL(z,1).split("base64,").pop())}},g=function(E){var I=this.internal.collections[t+"images"];if(I){for(var T in I)if(E===I[T].alias)return I[T]}},p=function(E,I,T){return E||I||(E=-96,I=-96),E<0&&(E=-1*T.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*T.height*72/I/this.internal.scaleFactor),E===0&&(E=I*T.width/T.height),I===0&&(I=E*T.height/T.width),[E,I]},v=function(E,I,T,M,z,V){var W=p.call(this,T,M,z),$=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,me=u.call(this);if(T=W[0],M=W[1],me[z.index]=z,V){V*=Math.PI/180;var de=Math.cos(V),L=Math.sin(V),B=function(q){return q.toFixed(4)},J=[B(de),B(L),B(-1*L),B(de),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,$(E),G(I+M),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([$(T),"0","0",$(M),"0","0","cm"].join(" "))):this.internal.write([$(T),"0","0",$(M),$(E),G(I+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(E){var I,T,M=0;if(typeof E=="string")for(T=E.length,I=0;I<T;I++)M=(M<<5)-M+E.charCodeAt(I),M|=0;else if(A(E))for(T=E.byteLength/2,I=0;I<T;I++)M=(M<<5)-M+E[I],M|=0;return M},_=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},j=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var I=E.indexOf(",");return I<0?null:E.substring(0,I).trim().endsWith("base64")?E.substring(I+1):null};e.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var A=e.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},P=e.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,T=new Uint8Array(I),M=0;M<I;M++)T[M]=E.charCodeAt(M);return T},C=e.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",T=A(E)?E:new Uint8Array(E),M=0;M<T.length;M+=8192)I+=String.fromCharCode.apply(null,T.subarray(M,M+8192));return I};e.addImage=function(){var E,I,T,M,z,V,W,$,G;if(typeof arguments[1]=="number"?(I=r,T=arguments[1],M=arguments[2],z=arguments[3],V=arguments[4],W=arguments[5],$=arguments[6],G=arguments[7]):(I=arguments[1],T=arguments[2],M=arguments[3],z=arguments[4],V=arguments[5],W=arguments[6],$=arguments[7],G=arguments[8]),Bn(E=arguments[0])==="object"&&!h(E)&&"imageData"in E){var me=E;E=me.imageData,I=me.format||I||r,T=me.x||T||0,M=me.y||M||0,z=me.w||me.width||z,V=me.h||me.height||V,W=me.alias||W,$=me.compression||$,G=me.rotation||me.angle||G}var de=this.internal.getFilters();if($===void 0&&de.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(T)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=k.call(this,E,I,W,$);return v.call(this,T,M,z,V,L,G),this};var k=function(E,I,T,M){var z,V,W;if(typeof E=="string"&&a(E)===r){E=unescape(E);var $=R(E,!1);($!==""||($=e.loadFile(E,!0))!==void 0)&&(E=$)}if(h(E)&&(E=m(E,I)),I=a(E,I),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((W=T)==null||W.length===0)&&(T=function(G){return typeof G=="string"||A(G)?w(G):A(G.data)?w(G.data):null}(E)),(z=g.call(this,T))||(E instanceof Uint8Array||I==="RGBA"||(V=E,E=P(E)),z=this["process"+I.toUpperCase()](E,d.call(this),T,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in e.image_compression?G:b.NONE}(M),V)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},R=e.__addimage__.convertBase64ToBinaryString=function(E,I){I=typeof I!="boolean"||I;var T,M="";if(typeof E=="string"){var z;T=(z=j(E))!==null&&z!==void 0?z:E;try{M=m2(T)}catch(V){if(I)throw _(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};e.getImageProperties=function(E){var I,T,M="";if(h(E)&&(E=m(E)),typeof E=="string"&&a(E)===r&&((M=R(E,!1))===""&&(M=e.loadFile(E)||""),E=M),T=a(E),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(E instanceof Uint8Array||(E=P(E)),!(I=this["process"+T.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=T,I}})(Rr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Rr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(x(n.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(x(b))+") >>",p.content=i;var w=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(p.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var A=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Rr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=e.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&i(p)&&t[p.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(p){var v=0,x=r,b="",w=0;for(v=0;v<p.length;v+=1)x[p.charCodeAt(v)]!==void 0?(w++,typeof(x=x[p.charCodeAt(v)])=="number"&&(b+=String.fromCharCode(x),x=r,w=0),v===p.length-1&&(x=r,b+=p.charAt(v-(w-1)),v-=w-1,w=0)):(x=r,b+=p.charAt(v-w),v-=w,w=0);return b};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(p,v,x){return o(p)?i(p)===!1?-1:!u(p)||!o(v)&&!o(x)||!o(x)&&l(v)||l(p)&&!o(v)||l(p)&&c(v)||l(p)&&l(v)?0:d(p)&&o(v)&&!l(v)&&o(x)&&u(x)?3:l(p)||!o(x)?1:2:-1},m=function(p){var v=0,x=0,b=0,w="",_="",j="",A=(p=p||"").split("\\s+"),P=[];for(v=0;v<A.length;v+=1){for(P.push(""),x=0;x<A[v].length;x+=1)w=A[v][x],_=A[v][x-1],j=A[v][x+1],o(w)?(b=h(w,_,j),P[v]+=b!==-1?String.fromCharCode(t[w.charCodeAt(0)][b]):w):P[v]+=w;P[v]=f(P[v])}return P.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var p,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(v)){var b=0;for(x=[],b=0;b<v.length;b+=1)Array.isArray(v[b])?x.push([m(v[b][0]),v[b][1],v[b][2]]):x.push([m(v[b])]);p=x}else p=m(v);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",g])}(Rr.API),Rr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Rr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(p){m=p}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(p){g=p}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,p=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,_){return w.concat(v.splitTextToSize(_,x))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)m<(p=this.getStringUnitWidth(c[b],{font:f})*d)&&(m=p);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,p,v,x=[],b=[],w=[],_={},j={},A=[],P=[],C=(h=h||{}).autoSize||!1,k=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,E=h.margins||Object.assign({width:this.getPageWidth()},t),I=typeof h.padding=="number"?h.padding:3,T=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),f==null)b=x=Object.keys(d[0]),w=x.map(function(){return"left"});else if(Array.isArray(f)&&Bn(f[0])==="object")for(x=f.map(function(me){return me.name}),b=f.map(function(me){return me.prompt||me.name||""}),w=f.map(function(me){return me.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=.7499990551181103*f[m].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=x=f,w=x.map(function(){return"left"}));if(C||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<x.length;m+=1){for(_[v=x[m]]=d.map(function(me){return me[v]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(b[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=_[v],this.setFont(void 0,"normal"),p=0;p<g.length;p+=1)A.push(this.getTextDimensions(g[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,A)+I+I,A=[]}if(k){var z={};for(m=0;m<x.length;m+=1)z[x[m]]={},z[x[m]].text=b[m],z[x[m]].align=w[m];var V=l.call(this,z,j);P=x.map(function(me){return new i(c,u,j[me],V,z[me].text,void 0,z[me].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var W=f.reduce(function(me,de){return me[de.name]=de.align,me},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var $=l.call(this,d[m],j);for(p=0;p<x.length;p+=1){var G=d[m][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:p,data:G},this),o.call(this,new i(c,u,j[x[p]],$,G,m+2,W[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Rr.API);var cne={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},une=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],rT=lne(une),dne=[100,200,300,400,500,600,700,800,900],Yet=lne(dne);function KA(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return cne[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof rT[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function bq(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Xet={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Sq(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function _q(e){return e.trimLeft()}function Jet(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Qet(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Lw,jq,Nq,Bp,$w,Cq,Aq,Pq,YA=["times"];function Eq(e,t,r,n,a){var i=4,o=Oq;switch(a){case Rr.API.image_compression.FAST:i=1,o=kq;break;case Rr.API.image_compression.MEDIUM:i=6,o=Tq;break;case Rr.API.image_compression.SLOW:i=9,o=Iq}e=function(c,u,d,f){for(var h,m=c.length/u,g=new Uint8Array(c.length+m),p=[Zet,kq,Oq,Tq,Iq],v=0;v<m;v+=1){var x=v*u,b=c.subarray(x,x+u);if(f)g.set(f(b,d,h),x+v);else{for(var w=p.length,_=[],j=0;j<w;j+=1)_[j]=p[j](b,d,h);var A=ttt(_.concat());g.set(_[A],x+v)}h=b}return g}(e,t,Math.ceil(r*n/8),o);var l=UO(e,{level:i});return Rr.API.__addimage__.arrayBufferToBinaryString(l)}function Zet(e){var t=Array.apply([],e);return t.unshift(0),t}function kq(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function Oq(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=e[i]-o+256&255}return a}function Tq(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(o+l>>>1)&255}return a}function Iq(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=ett(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function ett(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function ttt(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function XA(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return fne(e,a)>>i&o}function Dq(e,t,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,c=(t&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(e,i,fne(e,i)&~(l<<o)&65535|c)}function fne(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function rtt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],1&p||(h=null),m=p>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++],j=_>>6&1,A=1<<1+(7&_),P=l,C=c,k=!1;_>>7&&(k=!0,P=t,C=A,t+=3*A);var R=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}d.push({x:v,y:x,width:b,height:w,has_local_palette:k,palette_offset:P,palette_size:C,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,T){var M=this.frameInfo(I),z=M.width*M.height,V=new Uint8Array(z);Mq(e,M.data_offset,V,z);var W=M.palette_offset,$=M.transparent_index;$===null&&($=256);var G=M.width,me=r-G,de=G,L=4*(M.y*r+M.x),B=4*((M.y+M.height)*r+M.x),J=L,q=4*me;M.interlaced===!0&&(q+=4*r*7);for(var X=8,Z=0,pe=V.length;Z<pe;++Z){var te=V[Z];if(de===0&&(de=G,(J+=q)>=B&&(q=4*me+4*r*(X-1),J=L+(G+me)*(X<<1),X>>=1)),te===$)J+=4;else{var ve=e[W+3*te],Ce=e[W+3*te+1],he=e[W+3*te+2];T[J++]=he,T[J++]=Ce,T[J++]=ve,T[J++]=255}--de}},this.decodeAndBlitFrameRGBA=function(I,T){var M=this.frameInfo(I),z=M.width*M.height,V=new Uint8Array(z);Mq(e,M.data_offset,V,z);var W=M.palette_offset,$=M.transparent_index;$===null&&($=256);var G=M.width,me=r-G,de=G,L=4*(M.y*r+M.x),B=4*((M.y+M.height)*r+M.x),J=L,q=4*me;M.interlaced===!0&&(q+=4*r*7);for(var X=8,Z=0,pe=V.length;Z<pe;++Z){var te=V[Z];if(de===0&&(de=G,(J+=q)>=B&&(q=4*me+4*r*(X-1),J=L+(G+me)*(X<<1),X>>=1)),te===$)J+=4;else{var ve=e[W+3*te],Ce=e[W+3*te+1],he=e[W+3*te+2];T[J++]=ve,T[J++]=Ce,T[J++]=he,T[J++]=255}--de}}}function Mq(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),p=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==i){if(v===o)break;for(var x=v<l?v:p,b=0,w=x;w>i;)w=g[w]>>8,++b;var _=w;if(h+b+(x!==v?1:0)>n)return void Pa.log("Warning, gif stream longer than expected.");r[h++]=_;var j=h+=b;for(x!==v&&(r[h++]=_),w=x;b--;)w=g[w],r[--j]=255&w,w>>=8;p!==null&&l<4096&&(g[l++]=p<<8|_,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=v}else l=o+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&Pa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function JA(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),p=[],v=0,x=7,b=new Array(64),w=new Array(64),_=new Array(64),j=new Array(256),A=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(L,B){for(var J=0,q=0,X=new Array,Z=1;Z<=16;Z++){for(var pe=1;pe<=L[Z];pe++)X[B[q]]=[],X[B[q]][0]=J,X[B[q]][1]=Z,q++,J++;J*=2}return X}function W(L){for(var B=L[0],J=L[1]-1;J>=0;)B&1<<J&&(v|=1<<x),J--,--x<0&&(v==255?($(255),$(0)):$(v),x=7,v=0)}function $(L){p.push(L)}function G(L){$(L>>8&255),$(255&L)}function me(L,B,J,q,X){for(var Z,pe=X[0],te=X[240],ve=function(et,Ze){var Pt,ue,rt,Ee,Ke,Ge,bt,ot,kt,yt,je=0;for(kt=0;kt<8;++kt){Pt=et[je],ue=et[je+1],rt=et[je+2],Ee=et[je+3],Ke=et[je+4],Ge=et[je+5],bt=et[je+6];var We=Pt+(ot=et[je+7]),Ot=Pt-ot,Ve=ue+bt,nt=ue-bt,Rt=rt+Ge,Lt=rt-Ge,Tt=Ee+Ke,ir=Ee-Ke,fr=We+Tt,ia=We-Tt,fn=Ve+Rt,Or=Ve-Rt;et[je]=fr+fn,et[je+4]=fr-fn;var yr=.707106781*(Or+ia);et[je+2]=ia+yr,et[je+6]=ia-yr;var Er=.382683433*((fr=ir+Lt)-(Or=nt+Ot)),Dr=.5411961*fr+Er,wa=1.306562965*Or+Er,or=.707106781*(fn=Lt+nt),dr=Ot+or,Vn=Ot-or;et[je+5]=Vn+Dr,et[je+3]=Vn-Dr,et[je+1]=dr+wa,et[je+7]=dr-wa,je+=8}for(je=0,kt=0;kt<8;++kt){Pt=et[je],ue=et[je+8],rt=et[je+16],Ee=et[je+24],Ke=et[je+32],Ge=et[je+40],bt=et[je+48];var qa=Pt+(ot=et[je+56]),la=Pt-ot,_e=ue+bt,wt=ue-bt,dt=rt+Ge,ht=rt-Ge,mt=Ee+Ke,at=Ee-Ke,$t=qa+mt,ut=qa-mt,Wt=_e+dt,Yt=_e-dt;et[je]=$t+Wt,et[je+32]=$t-Wt;var nr=.707106781*(Yt+ut);et[je+16]=ut+nr,et[je+48]=ut-nr;var Vr=.382683433*(($t=at+ht)-(Yt=wt+la)),Cn=.5411961*$t+Vr,Sn=1.306562965*Yt+Vr,Fi=.707106781*(Wt=ht+wt),ja=la+Fi,da=la-Fi;et[je+40]=da+Cn,et[je+24]=da-Cn,et[je+8]=ja+Sn,et[je+56]=ja-Sn,je++}for(kt=0;kt<64;++kt)yt=et[kt]*Ze[kt],m[kt]=yt>0?yt+.5|0:yt-.5|0;return m}(L,B),Ce=0;Ce<64;++Ce)g[P[Ce]]=ve[Ce];var he=g[0]-J;J=g[0],he==0?W(q[0]):(W(q[h[Z=32767+he]]),W(f[Z]));for(var qe=63;qe>0&&g[qe]==0;)qe--;if(qe==0)return W(pe),J;for(var ye,ce=1;ce<=qe;){for(var Ft=ce;g[ce]==0&&ce<=qe;)++ce;var qt=ce-Ft;if(qt>=16){ye=qt>>4;for(var It=1;It<=ye;++It)W(te);qt&=15}Z=32767+g[ce],W(X[(qt<<4)+h[Z]]),W(f[Z]),ce++}return qe!=63&&W(pe),J}function de(L){L=Math.min(Math.max(L,1),100),i!=L&&(function(B){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var X=o((J[q]*B+50)/100);X=Math.min(Math.max(X,1),255),l[P[q]]=X}for(var Z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var te=o((Z[pe]*B+50)/100);te=Math.min(Math.max(te,1),255),c[P[pe]]=te}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,he=0;he<8;he++)for(var qe=0;qe<8;qe++)u[Ce]=1/(l[P[Ce]]*ve[he]*ve[qe]*8),d[Ce]=1/(c[P[Ce]]*ve[he]*ve[qe]*8),Ce++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,B){B&&de(B),p=new Array,v=0,x=7,G(65496),G(65504),G(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),G(1),G(1),$(0),$(0),function(){G(65499),G(132),$(0);for(var ue=0;ue<64;ue++)$(l[ue]);$(1);for(var rt=0;rt<64;rt++)$(c[rt])}(),function(ue,rt){G(65472),G(17),$(8),G(rt),G(ue),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(L.width,L.height),function(){G(65476),G(418),$(0);for(var ue=0;ue<16;ue++)$(C[ue+1]);for(var rt=0;rt<=11;rt++)$(k[rt]);$(16);for(var Ee=0;Ee<16;Ee++)$(R[Ee+1]);for(var Ke=0;Ke<=161;Ke++)$(E[Ke]);$(1);for(var Ge=0;Ge<16;Ge++)$(I[Ge+1]);for(var bt=0;bt<=11;bt++)$(T[bt]);$(17);for(var ot=0;ot<16;ot++)$(M[ot+1]);for(var kt=0;kt<=161;kt++)$(z[kt])}(),G(65498),G(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var J=0,q=0,X=0;v=0,x=7,this.encode.displayName="_encode_";for(var Z,pe,te,ve,Ce,he,qe,ye,ce,Ft=L.data,qt=L.width,It=L.height,et=4*qt,Ze=0;Ze<It;){for(Z=0;Z<et;){for(Ce=et*Ze+Z,qe=-1,ye=0,ce=0;ce<64;ce++)he=Ce+(ye=ce>>3)*et+(qe=4*(7&ce)),Ze+ye>=It&&(he-=et*(Ze+1+ye-It)),Z+qe>=et&&(he-=Z+qe-et+4),pe=Ft[he++],te=Ft[he++],ve=Ft[he++],b[ce]=(A[pe]+A[te+256|0]+A[ve+512|0]>>16)-128,w[ce]=(A[pe+768|0]+A[te+1024|0]+A[ve+1280|0]>>16)-128,_[ce]=(A[pe+1280|0]+A[te+1536|0]+A[ve+1792|0]>>16)-128;J=me(b,u,J,t,n),q=me(w,d,q,r,a),X=me(_,d,X,r,a),Z+=32}Ze+=8}if(x>=0){var Pt=[];Pt[1]=x+1,Pt[0]=(1<<x+1)-1,W(Pt)}return G(65497),new Uint8Array(p)},e=e||50,function(){for(var L=String.fromCharCode,B=0;B<256;B++)j[B]=L(B)}(),t=V(C,k),r=V(I,T),n=V(R,E),a=V(M,z),function(){for(var L=1,B=2,J=1;J<=15;J++){for(var q=L;q<B;q++)h[32767+q]=J,f[32767+q]=[],f[32767+q][1]=J,f[32767+q][0]=q;for(var X=-(B-1);X<=-L;X++)h[32767+X]=J,f[32767+X]=[],f[32767+X][1]=J,f[32767+X][0]=B-1+X;L<<=1,B<<=1}}(),function(){for(var L=0;L<256;L++)A[L]=19595*L,A[L+256|0]=38470*L,A[L+512|0]=7471*L+32768,A[L+768|0]=-11059*L,A[L+1024|0]=-21709*L,A[L+1280|0]=32768*L+8421375,A[L+1536|0]=-27439*L,A[L+1792|0]=-5329*L}(),de(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function yc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Rq(e){function t(k){if(!k)throw Error("assert :P")}function r(k,R,E){for(var I=0;4>I;I++)if(k[R+I]!=E.charCodeAt(I))return!0;return!1}function n(k,R,E,I,T){for(var M=0;M<T;M++)k[R+M]=E[I+M]}function a(k,R,E,I){for(var T=0;T<I;T++)k[R+T]=E}function i(k){return new Int32Array(k)}function o(k,R){for(var E=[],I=0;I<k;I++)E.push(new R);return E}function l(k,R){var E=[];return function I(T,M,z){for(var V=z[M],W=0;W<V&&(T.push(z.length>M+1?[]:new R),!(z.length<M+1));W++)I(T[W],M+1,z)}(E,0,k),E}var c=function(){var k=this;function R(S,N){for(var D=1<<N-1>>>0;S&D;)D>>>=1;return D?(S&D-1)+D:S}function E(S,N,D,F,Y){t(!(F%D));do S[N+(F-=D)]=Y;while(0<F)}function I(S,N,D,F,Y){if(t(2328>=Y),512>=Y)var Q=i(512);else if((Q=i(Y))==null)return 0;return function(re,oe,fe,xe,De,Xe){var be,Me,ze=oe,pt=1<<fe,Ye=i(16),xt=i(16);for(t(De!=0),t(xe!=null),t(re!=null),t(0<fe),Me=0;Me<De;++Me){if(15<xe[Me])return 0;++Ye[xe[Me]]}if(Ye[0]==De)return 0;for(xt[1]=0,be=1;15>be;++be){if(Ye[be]>1<<be)return 0;xt[be+1]=xt[be]+Ye[be]}for(Me=0;Me<De;++Me)be=xe[Me],0<xe[Me]&&(Xe[xt[be]++]=Me);if(xt[15]==1)return(xe=new T).g=0,xe.value=Xe[0],E(re,ze,1,pt,xe),pt;var At,Gt=-1,Ut=pt-1,Lr=0,Ar=1,_n=1,Tr=1<<fe;for(Me=0,be=1,De=2;be<=fe;++be,De<<=1){if(Ar+=_n<<=1,0>(_n-=Ye[be]))return 0;for(;0<Ye[be];--Ye[be])(xe=new T).g=be,xe.value=Xe[Me++],E(re,ze+Lr,De,Tr,xe),Lr=R(Lr,be)}for(be=fe+1,De=2;15>=be;++be,De<<=1){if(Ar+=_n<<=1,0>(_n-=Ye[be]))return 0;for(;0<Ye[be];--Ye[be]){if(xe=new T,(Lr&Ut)!=Gt){for(ze+=Tr,At=1<<(Gt=be)-fe;15>Gt&&!(0>=(At-=Ye[Gt]));)++Gt,At<<=1;pt+=Tr=1<<(At=Gt-fe),re[oe+(Gt=Lr&Ut)].g=At+fe,re[oe+Gt].value=ze-oe-Gt}xe.g=be-fe,xe.value=Xe[Me++],E(re,ze+(Lr>>fe),De,Tr,xe),Lr=R(Lr,be)}}return Ar!=2*xt[15]-1?0:pt}(S,N,D,F,Y,Q)}function T(){this.value=this.g=0}function M(){this.value=this.g=0}function z(){this.G=o(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Fu,M)}function V(S,N,D,F){t(S!=null),t(N!=null),t(2147483648>F),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=N,S.pa=D,S.Jd=N,S.Yc=D+F,S.Zc=4<=F?D+F-4+1:D,pe(S)}function W(S,N){for(var D=0;0<N--;)D|=ve(S,128)<<N;return D}function $(S,N){var D=W(S,N);return te(S)?-D:D}function G(S,N,D,F){var Y,Q=0;for(t(S!=null),t(N!=null),t(4294967288>F),S.Sb=F,S.Ra=0,S.u=0,S.h=0,4<F&&(F=4),Y=0;Y<F;++Y)Q+=N[D+Y]<<8*Y;S.Ra=Q,S.bb=F,S.oa=N,S.pa=D}function me(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<ne-8>>>0,++S.bb,S.u-=8;q(S)&&(S.h=1,S.u=0)}function de(S,N){if(t(0<=N),!S.h&&N<=zi){var D=J(S)&es[N];return S.u+=N,me(S),D}return S.h=1,S.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(S){return S.Ra>>>(S.u&ne-1)>>>0}function q(S){return t(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>ne}function X(S,N){S.u=N,S.h=q(S)}function Z(S){S.u>=Ne&&(t(S.u>=Ne),me(S))}function pe(S){t(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(t(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function te(S){return W(S,1)}function ve(S,N){var D=S.Ca;0>S.b&&pe(S);var F=S.b,Y=D*N>>>8,Q=(S.I>>>F>Y)+0;for(Q?(D-=Y,S.I-=Y+1<<F>>>0):D=Y+1,F=D,Y=0;256<=F;)Y+=8,F>>=8;return F=7^Y+Se[F],S.b-=F,S.Ca=(D<<F)-1,Q}function Ce(S,N,D){S[N+0]=D>>24&255,S[N+1]=D>>16&255,S[N+2]=D>>8&255,S[N+3]=255&D}function he(S,N){return S[N+0]|S[N+1]<<8}function qe(S,N){return he(S,N)|S[N+2]<<16}function ye(S,N){return he(S,N)|he(S,N+2)<<16}function ce(S,N){var D=1<<N;return t(S!=null),t(0<N),S.X=i(D),S.X==null?0:(S.Mb=32-N,S.Xa=N,1)}function Ft(S,N){t(S!=null),t(N!=null),t(S.Xa==N.Xa),n(N.X,0,S.X,0,1<<N.Xa)}function qt(){this.X=[],this.Xa=this.Mb=0}function It(S,N,D,F){t(D!=null),t(F!=null);var Y=D[0],Q=F[0];return Y==0&&(Y=(S*Q+N/2)/N),Q==0&&(Q=(N*Y+S/2)/S),0>=Y||0>=Q?0:(D[0]=Y,F[0]=Q,1)}function et(S,N){return S+(1<<N)-1>>>N}function Ze(S,N){return((4278255360&S)+(4278255360&N)>>>0&4278255360)+((16711935&S)+(16711935&N)>>>0&16711935)>>>0}function Pt(S,N){k[N]=function(D,F,Y,Q,re,oe,fe){var xe;for(xe=0;xe<re;++xe){var De=k[S](oe[fe+xe-1],Y,Q+xe);oe[fe+xe]=Ze(D[F+xe],De)}}}function ue(){this.ud=this.hd=this.jd=0}function rt(S,N){return((4278124286&(S^N))>>>1)+(S&N)>>>0}function Ee(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function Ke(S,N){return Ee(S+(S-N+.5>>1))}function Ge(S,N,D){return Math.abs(N-D)-Math.abs(S-D)}function bt(S,N,D,F,Y,Q,re){for(F=Q[re-1],D=0;D<Y;++D)Q[re+D]=F=Ze(S[N+D],F)}function ot(S,N,D,F,Y){var Q;for(Q=0;Q<D;++Q){var re=S[N+Q],oe=re>>8&255,fe=16711935&(fe=(fe=16711935&re)+((oe<<16)+oe));F[Y+Q]=(4278255360&re)+fe>>>0}}function kt(S,N){N.jd=255&S,N.hd=S>>8&255,N.ud=S>>16&255}function yt(S,N,D,F,Y,Q){var re;for(re=0;re<F;++re){var oe=N[D+re],fe=oe>>>8,xe=oe,De=255&(De=(De=oe>>>16)+((S.jd<<24>>24)*(fe<<24>>24)>>>5));xe=255&(xe=(xe+=(S.hd<<24>>24)*(fe<<24>>24)>>>5)+((S.ud<<24>>24)*(De<<24>>24)>>>5)),Y[Q+re]=(4278255360&oe)+(De<<16)+xe}}function je(S,N,D,F,Y){k[N]=function(Q,re,oe,fe,xe,De,Xe,be,Me){for(fe=Xe;fe<be;++fe)for(Xe=0;Xe<Me;++Xe)xe[De++]=Y(oe[F(Q[re++])])},k[S]=function(Q,re,oe,fe,xe,De,Xe){var be=8>>Q.b,Me=Q.Ea,ze=Q.K[0],pt=Q.w;if(8>be)for(Q=(1<<Q.b)-1,pt=(1<<be)-1;re<oe;++re){var Ye,xt=0;for(Ye=0;Ye<Me;++Ye)Ye&Q||(xt=F(fe[xe++])),De[Xe++]=Y(ze[xt&pt]),xt>>=be}else k["VP8LMapColor"+D](fe,xe,ze,pt,De,Xe,re,oe,Me)}}function We(S,N,D,F,Y){for(D=N+D;N<D;){var Q=S[N++];F[Y++]=Q>>16&255,F[Y++]=Q>>8&255,F[Y++]=255&Q}}function Ot(S,N,D,F,Y){for(D=N+D;N<D;){var Q=S[N++];F[Y++]=Q>>16&255,F[Y++]=Q>>8&255,F[Y++]=255&Q,F[Y++]=Q>>24&255}}function Ve(S,N,D,F,Y){for(D=N+D;N<D;){var Q=(re=S[N++])>>16&240|re>>12&15,re=240&re|re>>28&15;F[Y++]=Q,F[Y++]=re}}function nt(S,N,D,F,Y){for(D=N+D;N<D;){var Q=(re=S[N++])>>16&248|re>>13&7,re=re>>5&224|re>>3&31;F[Y++]=Q,F[Y++]=re}}function Rt(S,N,D,F,Y){for(D=N+D;N<D;){var Q=S[N++];F[Y++]=255&Q,F[Y++]=Q>>8&255,F[Y++]=Q>>16&255}}function Lt(S,N,D,F,Y,Q){if(Q==0)for(D=N+D;N<D;)Ce(F,((Q=S[N++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),Y+=32;else n(F,Y,S,N,D)}function Tt(S,N){k[N][0]=k[S+"0"],k[N][1]=k[S+"1"],k[N][2]=k[S+"2"],k[N][3]=k[S+"3"],k[N][4]=k[S+"4"],k[N][5]=k[S+"5"],k[N][6]=k[S+"6"],k[N][7]=k[S+"7"],k[N][8]=k[S+"8"],k[N][9]=k[S+"9"],k[N][10]=k[S+"10"],k[N][11]=k[S+"11"],k[N][12]=k[S+"12"],k[N][13]=k[S+"13"],k[N][14]=k[S+"0"],k[N][15]=k[S+"0"]}function ir(S){return S==sC||S==lC||S==x1||S==cC}function fr(){this.eb=[],this.size=this.A=this.fb=0}function ia(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fr,this.f.kb=new ia,this.sd=null}function Or(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Er(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Dr(S,N){var D=S.T,F=N.ba.f.RGBA,Y=F.eb,Q=F.fb+S.ka*F.A,re=Dl[N.ba.S],oe=S.y,fe=S.O,xe=S.f,De=S.N,Xe=S.ea,be=S.W,Me=N.cc,ze=N.dc,pt=N.Mc,Ye=N.Nc,xt=S.ka,At=S.ka+S.T,Gt=S.U,Ut=Gt+1>>1;for(xt==0?re(oe,fe,null,null,xe,De,Xe,be,xe,De,Xe,be,Y,Q,null,null,Gt):(re(N.ec,N.fc,oe,fe,Me,ze,pt,Ye,xe,De,Xe,be,Y,Q-F.A,Y,Q,Gt),++D);xt+2<At;xt+=2)Me=xe,ze=De,pt=Xe,Ye=be,De+=S.Rc,be+=S.Rc,Q+=2*F.A,re(oe,(fe+=2*S.fa)-S.fa,oe,fe,Me,ze,pt,Ye,xe,De,Xe,be,Y,Q-F.A,Y,Q,Gt);return fe+=S.fa,S.j+At<S.o?(n(N.ec,N.fc,oe,fe,Gt),n(N.cc,N.dc,xe,De,Ut),n(N.Mc,N.Nc,Xe,be,Ut),D--):1&At||re(oe,fe,null,null,xe,De,Xe,be,xe,De,Xe,be,Y,Q+F.A,null,null,Gt),D}function wa(S,N,D){var F=S.F,Y=[S.J];if(F!=null){var Q=S.U,re=N.ba.S,oe=re==y1||re==x1;N=N.ba.f.RGBA;var fe=[0],xe=S.ka;fe[0]=S.T,S.Kb&&(xe==0?--fe[0]:(--xe,Y[0]-=S.width),S.j+S.ka+S.T==S.o&&(fe[0]=S.o-S.j-xe));var De=N.eb;xe=N.fb+xe*N.A,S=GD(F,Y[0],S.width,Q,fe,De,xe+(oe?0:3),N.A),t(D==fe),S&&ir(re)&&cy(De,xe,oe,Q,fe,N.A)}return 0}function or(S){var N=S.ma,D=N.ba.S,F=11>D,Y=D==g1||D==v1||D==y1||D==oC||D==12||ir(D);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Xd(N.Oa,S,Y?11:12))return 0;if(Y&&ir(D)&&yp(),S.da)alert("todo:use_scaling");else{if(F){if(N.Ib=Er,S.Kb){if(D=S.U+1>>1,N.memory=i(S.U+2*D),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+S.U,N.Mc=N.cc,N.Nc=N.dc+D,N.Ib=Dr,yp()}}else alert("todo:EmitYUV");Y&&(N.Jb=wa,F&&Mo())}if(F&&!uM){for(S=0;256>S;++S)Sae[S]=89858*(S-128)+w1>>b1,Nae[S]=-22014*(S-128)+w1,jae[S]=-45773*(S-128),_ae[S]=113618*(S-128)+w1>>b1;for(S=dy;S<fC;++S)N=76283*(S-16)+w1>>b1,Cae[S-dy]=Ja(N,255),Aae[S-dy]=Ja(N+8>>4,15);uM=1}return 1}function dr(S){var N=S.ma,D=S.U,F=S.T;return t(!(1&S.ka)),0>=D||0>=F?0:(D=N.Ib(S,N),N.Jb!=null&&N.Jb(S,N,D),N.Dc+=D,1)}function Vn(S){S.ma.memory=null}function qa(S,N,D,F){return de(S,8)!=47?0:(N[0]=de(S,14)+1,D[0]=de(S,14)+1,F[0]=de(S,1),de(S,3)!=0?0:!S.h)}function la(S,N){if(4>S)return S+1;var D=S-2>>1;return(2+(1&S)<<D)+de(N,D)+1}function _e(S,N){return 120<N?N-120:1<=(D=((D=lae[N-1])>>4)*S+(8-(15&D)))?D:1;var D}function wt(S,N,D){var F=J(D),Y=S[N+=255&F].g-8;return 0<Y&&(X(D,D.u+8),F=J(D),N+=S[N].value,N+=F&(1<<Y)-1),X(D,D.u+S[N].g),S[N].value}function dt(S,N,D){return D.g+=S.g,D.value+=S.value<<N>>>0,t(8>=D.g),S.g}function ht(S,N,D){var F=S.xc;return t((N=F==0?0:S.vc[S.md*(D>>F)+(N>>F)])<S.Wb),S.Ya[N]}function mt(S,N,D,F){var Y=S.ab,Q=S.c*N,re=S.C;N=re+N;var oe=D,fe=F;for(F=S.Ta,D=S.Ua;0<Y--;){var xe=S.gc[Y],De=re,Xe=N,be=oe,Me=fe,ze=(fe=F,oe=D,xe.Ea);switch(t(De<Xe),t(Xe<=xe.nc),xe.hc){case 2:st(be,Me,(Xe-De)*ze,fe,oe);break;case 0:var pt=De,Ye=Xe,xt=fe,At=oe,Gt=(Tr=xe).Ea;pt==0&&(Be(be,Me,null,null,1,xt,At),bt(be,Me+1,0,0,Gt-1,xt,At+1),Me+=Gt,At+=Gt,++pt);for(var Ut=1<<Tr.b,Lr=Ut-1,Ar=et(Gt,Tr.b),_n=Tr.K,Tr=Tr.w+(pt>>Tr.b)*Ar;pt<Ye;){var qn=_n,Ui=Tr,jn=1;for(Je(be,Me,xt,At-Gt,1,xt,At);jn<Gt;){var Ir=(jn&~Lr)+Ut;Ir>Gt&&(Ir=Gt),(0,en[qn[Ui++]>>8&15])(be,Me+ +jn,xt,At+jn-Gt,Ir-jn,xt,At+jn),jn=Ir}Me+=Gt,At+=Gt,++pt&Lr||(Tr+=Ar)}Xe!=xe.nc&&n(fe,oe-ze,fe,oe+(Xe-De-1)*ze,ze);break;case 1:for(ze=be,Ye=Me,Gt=(be=xe.Ea)-(At=be&~(xt=(Me=1<<xe.b)-1)),pt=et(be,xe.b),Ut=xe.K,xe=xe.w+(De>>xe.b)*pt;De<Xe;){for(Lr=Ut,Ar=xe,_n=new ue,Tr=Ye+At,qn=Ye+be;Ye<Tr;)kt(Lr[Ar++],_n),Sa(_n,ze,Ye,Me,fe,oe),Ye+=Me,oe+=Me;Ye<qn&&(kt(Lr[Ar++],_n),Sa(_n,ze,Ye,Gt,fe,oe),Ye+=Gt,oe+=Gt),++De&xt||(xe+=pt)}break;case 3:if(be==fe&&Me==oe&&0<xe.b){for(Ye=fe,be=ze=oe+(Xe-De)*ze-(At=(Xe-De)*et(xe.Ea,xe.b)),Me=fe,xt=oe,pt=[],At=(Gt=At)-1;0<=At;--At)pt[At]=Me[xt+At];for(At=Gt-1;0<=At;--At)Ye[be+At]=pt[At];St(xe,De,Xe,fe,ze,fe,oe)}else St(xe,De,Xe,be,Me,fe,oe)}oe=F,fe=D}fe!=D&&n(F,D,oe,fe,Q)}function at(S,N){var D=S.V,F=S.Ba+S.c*S.C,Y=N-S.C;if(t(N<=S.l.o),t(16>=Y),0<Y){var Q=S.l,re=S.Ta,oe=S.Ua,fe=Q.width;if(mt(S,Y,D,F),Y=oe=[oe],t((D=S.C)<(F=N)),t(Q.v<Q.va),F>Q.o&&(F=Q.o),D<Q.j){var xe=Q.j-D;D=Q.j,Y[0]+=xe*fe}if(D>=F?D=0:(Y[0]+=4*Q.v,Q.ka=D-Q.j,Q.U=Q.va-Q.v,Q.T=F-D,D=1),D){if(oe=oe[0],11>(D=S.ca).S){var De=D.f.RGBA,Xe=(F=D.S,Y=Q.U,Q=Q.T,xe=De.eb,De.A),be=Q;for(De=De.fb+S.Ma*De.A;0<be--;){var Me=re,ze=oe,pt=Y,Ye=xe,xt=De;switch(F){case p1:pi(Me,ze,pt,Ye,xt);break;case g1:li(Me,ze,pt,Ye,xt);break;case sC:li(Me,ze,pt,Ye,xt),cy(Ye,xt,0,pt,1,0);break;case eM:Yn(Me,ze,pt,Ye,xt);break;case v1:Lt(Me,ze,pt,Ye,xt,1);break;case lC:Lt(Me,ze,pt,Ye,xt,1),cy(Ye,xt,0,pt,1,0);break;case y1:Lt(Me,ze,pt,Ye,xt,0);break;case x1:Lt(Me,ze,pt,Ye,xt,0),cy(Ye,xt,1,pt,1,0);break;case oC:gn(Me,ze,pt,Ye,xt);break;case cC:gn(Me,ze,pt,Ye,xt),HD(Ye,xt,pt,1,0);break;case tM:Cr(Me,ze,pt,Ye,xt);break;default:t(0)}oe+=fe,De+=Xe}S.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");t(S.Ma<=D.height)}}S.C=N,t(S.C<=S.i)}function $t(S){var N;if(0<S.ua)return 0;for(N=0;N<S.Wb;++N){var D=S.Ya[N].G,F=S.Ya[N].H;if(0<D[1][F[1]+0].g||0<D[2][F[2]+0].g||0<D[3][F[3]+0].g)return 0}return 1}function ut(S,N,D,F,Y,Q){if(S.Z!=0){var re=S.qd,oe=S.rd;for(t(Qd[S.Z]!=null);N<D;++N)Qd[S.Z](re,oe,F,Y,F,Y,Q),re=F,oe=Y,Y+=Q;S.qd=re,S.rd=oe}}function Wt(S,N){var D=S.l.ma,F=D.Z==0||D.Z==1?S.l.j:S.C;if(F=S.C<F?F:S.C,t(N<=S.l.o),N>F){var Y=S.l.width,Q=D.ca,re=D.tb+Y*F,oe=S.V,fe=S.Ba+S.c*F,xe=S.gc;t(S.ab==1),t(xe[0].hc==3),xr(xe[0],F,N,oe,fe,Q,re),ut(D,F,N,Q,re,Y)}S.C=S.Ma=N}function Yt(S,N,D,F,Y,Q,re){var oe=S.$/F,fe=S.$%F,xe=S.m,De=S.s,Xe=D+S.$,be=Xe;Y=D+F*Y;var Me=D+F*Q,ze=280+De.ua,pt=S.Pb?oe:16777216,Ye=0<De.ua?De.Wa:null,xt=De.wc,At=Xe<Me?ht(De,fe,oe):null;t(S.C<Q),t(Me<=Y);var Gt=!1;e:for(;;){for(;Gt||Xe<Me;){var Ut=0;if(oe>=pt){var Lr=Xe-D;t((pt=S).Pb),pt.wd=pt.m,pt.xd=Lr,0<pt.s.ua&&Ft(pt.s.Wa,pt.s.vb),pt=oe+uae}if(fe&xt||(At=ht(De,fe,oe)),t(At!=null),At.Qb&&(N[Xe]=At.qb,Gt=!0),!Gt)if(Z(xe),At.jc){Ut=xe,Lr=N;var Ar=Xe,_n=At.pd[J(Ut)&Fu-1];t(At.jc),256>_n.g?(X(Ut,Ut.u+_n.g),Lr[Ar]=_n.value,Ut=0):(X(Ut,Ut.u+_n.g-256),t(256<=_n.value),Ut=_n.value),Ut==0&&(Gt=!0)}else Ut=wt(At.G[0],At.H[0],xe);if(xe.h)break;if(Gt||256>Ut){if(!Gt)if(At.nd)N[Xe]=(At.qb|Ut<<8)>>>0;else{if(Z(xe),Gt=wt(At.G[1],At.H[1],xe),Z(xe),Lr=wt(At.G[2],At.H[2],xe),Ar=wt(At.G[3],At.H[3],xe),xe.h)break;N[Xe]=(Ar<<24|Gt<<16|Ut<<8|Lr)>>>0}if(Gt=!1,++Xe,++fe>=F&&(fe=0,++oe,re!=null&&oe<=Q&&!(oe%16)&&re(S,oe),Ye!=null))for(;be<Xe;)Ut=N[be++],Ye.X[(506832829*Ut&4294967295)>>>Ye.Mb]=Ut}else if(280>Ut){if(Ut=la(Ut-256,xe),Lr=wt(At.G[4],At.H[4],xe),Z(xe),Lr=_e(F,Lr=la(Lr,xe)),xe.h)break;if(Xe-D<Lr||Y-Xe<Ut)break e;for(Ar=0;Ar<Ut;++Ar)N[Xe+Ar]=N[Xe+Ar-Lr];for(Xe+=Ut,fe+=Ut;fe>=F;)fe-=F,++oe,re!=null&&oe<=Q&&!(oe%16)&&re(S,oe);if(t(Xe<=Y),fe&xt&&(At=ht(De,fe,oe)),Ye!=null)for(;be<Xe;)Ut=N[be++],Ye.X[(506832829*Ut&4294967295)>>>Ye.Mb]=Ut}else{if(!(Ut<ze))break e;for(Gt=Ut-280,t(Ye!=null);be<Xe;)Ut=N[be++],Ye.X[(506832829*Ut&4294967295)>>>Ye.Mb]=Ut;Ut=Xe,t(!(Gt>>>(Lr=Ye).Xa)),N[Ut]=Lr.X[Gt],Gt=!0}Gt||t(xe.h==q(xe))}if(S.Pb&&xe.h&&Xe<Y)t(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Ft(S.s.vb,S.s.Wa);else{if(xe.h)break e;re?.(S,oe>Q?Q:oe),S.a=0,S.$=Xe-D}return 1}return S.a=3,0}function nr(S){t(S!=null),S.vc=null,S.yc=null,S.Ya=null;var N=S.Wa;N!=null&&(N.X=null),S.vb=null,t(S!=null)}function Vr(){var S=new br;return S==null?null:(S.a=0,S.xb=aM,Tt("Predictor","VP8LPredictors"),Tt("Predictor","VP8LPredictors_C"),Tt("PredictorAdd","VP8LPredictorsAdd"),Tt("PredictorAdd","VP8LPredictorsAdd_C"),st=ot,Sa=yt,pi=We,li=Ot,gn=Ve,Cr=nt,Yn=Rt,k.VP8LMapColor32b=Ct,k.VP8LMapColor8b=zr,S)}function Cn(S,N,D,F,Y){var Q=1,re=[S],oe=[N],fe=F.m,xe=F.s,De=null,Xe=0;e:for(;;){if(D)for(;Q&&de(fe,1);){var be=re,Me=oe,ze=F,pt=1,Ye=ze.m,xt=ze.gc[ze.ab],At=de(Ye,2);if(ze.Oc&1<<At)Q=0;else{switch(ze.Oc|=1<<At,xt.hc=At,xt.Ea=be[0],xt.nc=Me[0],xt.K=[null],++ze.ab,t(4>=ze.ab),At){case 0:case 1:xt.b=de(Ye,3)+2,pt=Cn(et(xt.Ea,xt.b),et(xt.nc,xt.b),0,ze,xt.K),xt.K=xt.K[0];break;case 3:var Gt,Ut=de(Ye,8)+1,Lr=16<Ut?0:4<Ut?1:2<Ut?2:3;if(be[0]=et(xt.Ea,Lr),xt.b=Lr,Gt=pt=Cn(Ut,1,0,ze,xt.K)){var Ar,_n=Ut,Tr=xt,qn=1<<(8>>Tr.b),Ui=i(qn);if(Ui==null)Gt=0;else{var jn=Tr.K[0],Ir=Tr.w;for(Ui[0]=Tr.K[0][0],Ar=1;Ar<1*_n;++Ar)Ui[Ar]=Ze(jn[Ir+Ar],Ui[Ar-1]);for(;Ar<4*qn;++Ar)Ui[Ar]=0;Tr.K[0]=null,Tr.K[0]=Ui,Gt=1}}pt=Gt;break;case 2:break;default:t(0)}Q=pt}}if(re=re[0],oe=oe[0],Q&&de(fe,1)&&!(Q=1<=(Xe=de(fe,4))&&11>=Xe)){F.a=3;break e}var sr;if(sr=Q)t:{var Ni,vn,Hn,Wa=F,wo=re,ts=oe,gi=Xe,Ro=D,rs=Wa.m,Wi=Wa.s,Jn=[null],ma=1,vi=0,pa=cae[gi];r:for(;;){if(Ro&&de(rs,1)){var So=de(rs,3)+2,fc=et(wo,So),Ci=et(ts,So),Os=fc*Ci;if(!Cn(fc,Ci,0,Wa,Jn))break r;for(Jn=Jn[0],Wi.xc=So,Ni=0;Ni<Os;++Ni){var Aa=Jn[Ni]>>8&65535;Jn[Ni]=Aa,Aa>=ma&&(ma=Aa+1)}}if(rs.h)break r;for(vn=0;5>vn;++vn){var Vi=rM[vn];!vn&&0<gi&&(Vi+=1<<gi),vi<Vi&&(vi=Vi)}var el=o(ma*pa,T),ns=ma,tl=o(ns,z);if(tl==null)var rl=null;else t(65536>=ns),rl=tl;var Ts=i(vi);if(rl==null||Ts==null||el==null){Wa.a=1;break r}var nl=el;for(Ni=Hn=0;Ni<ma;++Ni){var Da=rl[Ni],al=Da.G,hc=Da.H,Ih=0,qu=1,_o=0;for(vn=0;5>vn;++vn){Vi=rM[vn],al[vn]=nl,hc[vn]=Hn,!vn&&0<gi&&(Vi+=1<<gi);a:{var _1,hC=Vi,j1=Wa,fy=Ts,kae=nl,Oae=Hn,mC=0,Zd=j1.m,Tae=de(Zd,1);if(a(fy,0,0,hC),Tae){var Iae=de(Zd,1)+1,Dae=de(Zd,1),hM=de(Zd,Dae==0?1:8);fy[hM]=1,Iae==2&&(fy[hM=de(Zd,8)]=1);var N1=1}else{var mM=i(19),pM=de(Zd,4)+4;if(19<pM){j1.a=3;var C1=0;break a}for(_1=0;_1<pM;++_1)mM[sae[_1]]=de(Zd,3);var pC=void 0,hy=void 0,gM=j1,Mae=mM,A1=hC,vM=fy,gC=0,ef=gM.m,yM=8,xM=o(128,T);n:for(;I(xM,0,7,Mae,19);){if(de(ef,1)){var Rae=2+2*de(ef,3);if((pC=2+de(ef,Rae))>A1)break n}else pC=A1;for(hy=0;hy<A1&&pC--;){Z(ef);var bM=xM[0+(127&J(ef))];X(ef,ef.u+bM.g);var wp=bM.value;if(16>wp)vM[hy++]=wp,wp!=0&&(yM=wp);else{var Lae=wp==16,wM=wp-16,$ae=iae[wM],SM=de(ef,aae[wM])+$ae;if(hy+SM>A1)break n;for(var Fae=Lae?yM:0;0<SM--;)vM[hy++]=Fae}}gC=1;break n}gC||(gM.a=3),N1=gC}(N1=N1&&!Zd.h)&&(mC=I(kae,Oae,8,fy,hC)),N1&&mC!=0?C1=mC:(j1.a=3,C1=0)}if(C1==0)break r;if(qu&&oae[vn]==1&&(qu=nl[Hn].g==0),Ih+=nl[Hn].g,Hn+=C1,3>=vn){var my,vC=Ts[0];for(my=1;my<Vi;++my)Ts[my]>vC&&(vC=Ts[my]);_o+=vC}}if(Da.nd=qu,Da.Qb=0,qu&&(Da.qb=(al[3][hc[3]+0].value<<24|al[1][hc[1]+0].value<<16|al[2][hc[2]+0].value)>>>0,Ih==0&&256>al[0][hc[0]+0].value&&(Da.Qb=1,Da.qb+=al[0][hc[0]+0].value<<8)),Da.jc=!Da.Qb&&6>_o,Da.jc){var P1,Uu=Da;for(P1=0;P1<Fu;++P1){var tf=P1,rf=Uu.pd[tf],E1=Uu.G[0][Uu.H[0]+tf];256<=E1.value?(rf.g=E1.g+256,rf.value=E1.value):(rf.g=0,rf.value=0,tf>>=dt(E1,8,rf),tf>>=dt(Uu.G[1][Uu.H[1]+tf],16,rf),tf>>=dt(Uu.G[2][Uu.H[2]+tf],0,rf),dt(Uu.G[3][Uu.H[3]+tf],24,rf))}}}Wi.vc=Jn,Wi.Wb=ma,Wi.Ya=rl,Wi.yc=el,sr=1;break t}sr=0}if(!(Q=sr)){F.a=3;break e}if(0<Xe){if(xe.ua=1<<Xe,!ce(xe.Wa,Xe)){F.a=1,Q=0;break e}}else xe.ua=0;var yC=F,_M=re,Bae=oe,xC=yC.s,bC=xC.xc;if(yC.c=_M,yC.i=Bae,xC.md=et(_M,bC),xC.wc=bC==0?-1:(1<<bC)-1,D){F.xb=vae;break e}if((De=i(re*oe))==null){F.a=1,Q=0;break e}Q=(Q=Yt(F,De,0,re,oe,oe,null))&&!fe.h;break e}return Q?(Y!=null?Y[0]=De:(t(De==null),t(D)),F.$=0,D||nr(xe)):nr(xe),Q}function Sn(S,N){var D=S.c*S.i,F=D+N+16*N;return t(S.c<=N),S.V=i(F),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+D+N,1)}function Fi(S,N){var D=S.C,F=N-D,Y=S.V,Q=S.Ba+S.c*D;for(t(N<=S.l.o);0<F;){var re=16<F?16:F,oe=S.l.ma,fe=S.l.width,xe=fe*re,De=oe.ca,Xe=oe.tb+fe*D,be=S.Ta,Me=S.Ua;mt(S,re,Y,Q),KD(be,Me,De,Xe,xe),ut(oe,D,D+re,De,Xe,fe),F-=re,Y+=re*S.c,D+=re}t(D==N),S.C=S.Ma=N}function ja(){this.ub=this.yd=this.td=this.Rb=0}function da(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oi(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Tn(){this.Yb=function(){var S=[];return function N(D,F,Y){for(var Q=Y[F],re=0;re<Q&&(D.push(Y.length>F+1?[]:0),!(Y.length<F+1));re++)N(D[re],F+1,Y)}(S,0,[3,11]),S}()}function Cs(){this.jb=i(3),this.Wc=l([4,8],Tn),this.Xc=l([4,17],Tn)}function so(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function hn(){this.ld=this.La=this.dd=this.tc=0}function Io(){this.Na=this.la=0}function Bi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ii(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mi(){this.uc=this.M=this.Nb=0,this.wa=Array(new hn),this.Y=0,this.ya=Array(new Ii),this.aa=0,this.l=new tt}function ee(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ie(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new ja,this.Kc=new da,this.ed=new so,this.Qa=new oi,this.Ic=this.$c=this.Aa=0,this.D=new mi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,L),this.ia=0,this.pb=o(4,Bi),this.Pa=new Cs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ee),this.Hd=0,this.rb=Array(new Io),this.sb=0,this.wa=Array(new hn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ii),this.L=this.aa=0,this.gd=l([4,2],hn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function tt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qt(){var S=new Ie;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,uy||(uy=mr)),S}function it(S,N,D){return S.a==0&&(S.a=N,S.sc=D,S.cb=0),0}function lt(S,N,D){return 3<=D&&S[N+0]==157&&S[N+1]==1&&S[N+2]==42}function tr(S,N){if(S==null)return 0;if(S.a=0,S.sc="OK",N==null)return it(S,2,"null VP8Io passed to VP8GetHeaders()");var D=N.data,F=N.w,Y=N.ha;if(4>Y)return it(S,7,"Truncated header.");var Q=D[F+0]|D[F+1]<<8|D[F+2]<<16,re=S.Od;if(re.Rb=!(1&Q),re.td=Q>>1&7,re.yd=Q>>4&1,re.ub=Q>>5,3<re.td)return it(S,3,"Incorrect keyframe parameters.");if(!re.yd)return it(S,4,"Frame not displayable.");F+=3,Y-=3;var oe=S.Kc;if(re.Rb){if(7>Y)return it(S,7,"cannot parse picture header");if(!lt(D,F,Y))return it(S,3,"Bad code word");oe.c=16383&(D[F+4]<<8|D[F+3]),oe.Td=D[F+4]>>6,oe.i=16383&(D[F+6]<<8|D[F+5]),oe.Ud=D[F+6]>>6,F+=7,Y-=7,S.za=oe.c+15>>4,S.Ub=oe.i+15>>4,N.width=oe.c,N.height=oe.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((Q=S.Pa).jb,0,255,Q.jb.length),t((Q=S.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,a(Q.Zb,0,0,Q.Zb.length),a(Q.Lb,0,0,Q.Lb)}if(re.ub>Y)return it(S,7,"bad partition length");V(Q=S.m,D,F,re.ub),F+=re.ub,Y-=re.ub,re.Rb&&(oe.Ld=te(Q),oe.Kd=te(Q)),oe=S.Qa;var fe,xe=S.Pa;if(t(Q!=null),t(oe!=null),oe.Cb=te(Q),oe.Cb){if(oe.Bb=te(Q),te(Q)){for(oe.Fb=te(Q),fe=0;4>fe;++fe)oe.Zb[fe]=te(Q)?$(Q,7):0;for(fe=0;4>fe;++fe)oe.Lb[fe]=te(Q)?$(Q,6):0}if(oe.Bb)for(fe=0;3>fe;++fe)xe.jb[fe]=te(Q)?W(Q,8):255}else oe.Bb=0;if(Q.Ka)return it(S,3,"cannot parse segment header");if((oe=S.ed).zd=te(Q),oe.Tb=W(Q,6),oe.wb=W(Q,3),oe.Pc=te(Q),oe.Pc&&te(Q)){for(xe=0;4>xe;++xe)te(Q)&&(oe.vd[xe]=$(Q,6));for(xe=0;4>xe;++xe)te(Q)&&(oe.od[xe]=$(Q,6))}if(S.L=oe.Tb==0?0:oe.zd?1:2,Q.Ka)return it(S,3,"cannot parse filter header");var De=Y;if(Y=fe=F,F=fe+De,oe=De,S.Xb=(1<<W(S.m,2))-1,De<3*(xe=S.Xb))D=7;else{for(fe+=3*xe,oe-=3*xe,De=0;De<xe;++De){var Xe=D[Y+0]|D[Y+1]<<8|D[Y+2]<<16;Xe>oe&&(Xe=oe),V(S.Jc[+De],D,fe,Xe),fe+=Xe,oe-=Xe,Y+=3}V(S.Jc[+xe],D,fe,oe),D=fe<F?0:5}if(D!=0)return it(S,D,"cannot parse partitions");for(D=W(fe=S.m,7),Y=te(fe)?$(fe,4):0,F=te(fe)?$(fe,4):0,oe=te(fe)?$(fe,4):0,xe=te(fe)?$(fe,4):0,fe=te(fe)?$(fe,4):0,De=S.Qa,Xe=0;4>Xe;++Xe){if(De.Cb){var be=De.Zb[Xe];De.Fb||(be+=D)}else{if(0<Xe){S.pb[Xe]=S.pb[0];continue}be=D}var Me=S.pb[Xe];Me.Sc[0]=uC[Ja(be+Y,127)],Me.Sc[1]=dC[Ja(be+0,127)],Me.Eb[0]=2*uC[Ja(be+F,127)],Me.Eb[1]=101581*dC[Ja(be+oe,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=uC[Ja(be+xe,117)],Me.Qc[1]=dC[Ja(be+fe,127)],Me.lc=be+fe}if(!re.Rb)return it(S,4,"Not a key frame.");for(te(Q),re=S.Pa,D=0;4>D;++D){for(Y=0;8>Y;++Y)for(F=0;3>F;++F)for(oe=0;11>oe;++oe)xe=ve(Q,pae[D][Y][F][oe])?W(Q,8):hae[D][Y][F][oe],re.Wc[D][Y].Yb[F][oe]=xe;for(Y=0;17>Y;++Y)re.Xc[D][Y]=re.Wc[D][gae[Y]]}return S.kc=te(Q),S.kc&&(S.Bd=W(Q,8)),S.cb=1}function mr(S,N,D,F,Y,Q,re){var oe=N[Y].Yb[D];for(D=0;16>Y;++Y){if(!ve(S,oe[D+0]))return Y;for(;!ve(S,oe[D+1]);)if(oe=N[++Y].Yb[0],D=0,Y==16)return 16;var fe=N[Y+1].Yb;if(ve(S,oe[D+2])){var xe=S,De=0;if(ve(xe,(be=oe)[(Xe=D)+3]))if(ve(xe,be[Xe+6])){for(oe=0,Xe=2*(De=ve(xe,be[Xe+8]))+(be=ve(xe,be[Xe+9+De])),De=0,be=dae[Xe];be[oe];++oe)De+=De+ve(xe,be[oe]);De+=3+(8<<Xe)}else ve(xe,be[Xe+7])?(De=7+2*ve(xe,165),De+=ve(xe,145)):De=5+ve(xe,159);else De=ve(xe,be[Xe+4])?3+ve(xe,be[Xe+5]):2;oe=fe[2]}else De=1,oe=fe[1];fe=re+fae[Y],0>(xe=S).b&&pe(xe);var Xe,be=xe.b,Me=(Xe=xe.Ca>>1)-(xe.I>>be)>>31;--xe.b,xe.Ca+=Me,xe.Ca|=1,xe.I-=(Xe+1&Me)<<be,Q[fe]=((De^Me)-Me)*F[(0<Y)+0]}return 16}function er(S){var N=S.rb[S.sb-1];N.la=0,N.Na=0,a(S.zc,0,0,S.zc.length),S.ja=0}function Zt(S,N,D,F,Y){Y=S[N+D+32*F]+(Y>>3),S[N+D+32*F]=-256&Y?0>Y?0:255:Y}function kr(S,N,D,F,Y,Q){Zt(S,N,0,D,F+Y),Zt(S,N,1,D,F+Q),Zt(S,N,2,D,F-Q),Zt(S,N,3,D,F-Y)}function ie(S){return(20091*S>>16)+S}function ae(S,N,D,F){var Y,Q=0,re=i(16);for(Y=0;4>Y;++Y){var oe=S[N+0]+S[N+8],fe=S[N+0]-S[N+8],xe=(35468*S[N+4]>>16)-ie(S[N+12]),De=ie(S[N+4])+(35468*S[N+12]>>16);re[Q+0]=oe+De,re[Q+1]=fe+xe,re[Q+2]=fe-xe,re[Q+3]=oe-De,Q+=4,N++}for(Y=Q=0;4>Y;++Y)oe=(S=re[Q+0]+4)+re[Q+8],fe=S-re[Q+8],xe=(35468*re[Q+4]>>16)-ie(re[Q+12]),Zt(D,F,0,0,oe+(De=ie(re[Q+4])+(35468*re[Q+12]>>16))),Zt(D,F,1,0,fe+xe),Zt(D,F,2,0,fe-xe),Zt(D,F,3,0,oe-De),Q++,F+=32}function Re(S,N,D,F){var Y=S[N+0]+4,Q=35468*S[N+4]>>16,re=ie(S[N+4]),oe=35468*S[N+1]>>16;kr(D,F,0,Y+re,S=ie(S[N+1]),oe),kr(D,F,1,Y+Q,S,oe),kr(D,F,2,Y-Q,S,oe),kr(D,F,3,Y-re,S,oe)}function Le(S,N,D,F,Y){ae(S,N,D,F),Y&&ae(S,N+16,D,F+4)}function _t(S,N,D,F){Ca(S,N+0,D,F,1),Ca(S,N+32,D,F+128,1)}function H(S,N,D,F){var Y;for(S=S[N+0]+4,Y=0;4>Y;++Y)for(N=0;4>N;++N)Zt(D,F,N,Y,S)}function U(S,N,D,F){S[N+0]&&oa(S,N+0,D,F),S[N+16]&&oa(S,N+16,D,F+4),S[N+32]&&oa(S,N+32,D,F+128),S[N+48]&&oa(S,N+48,D,F+128+4)}function le(S,N,D,F){var Y,Q=i(16);for(Y=0;4>Y;++Y){var re=S[N+0+Y]+S[N+12+Y],oe=S[N+4+Y]+S[N+8+Y],fe=S[N+4+Y]-S[N+8+Y],xe=S[N+0+Y]-S[N+12+Y];Q[0+Y]=re+oe,Q[8+Y]=re-oe,Q[4+Y]=xe+fe,Q[12+Y]=xe-fe}for(Y=0;4>Y;++Y)re=(S=Q[0+4*Y]+3)+Q[3+4*Y],oe=Q[1+4*Y]+Q[2+4*Y],fe=Q[1+4*Y]-Q[2+4*Y],xe=S-Q[3+4*Y],D[F+0]=re+oe>>3,D[F+16]=xe+fe>>3,D[F+32]=re-oe>>3,D[F+48]=xe-fe>>3,F+=64}function we(S,N,D){var F,Y=N-32,Q=Zs,re=255-S[Y-1];for(F=0;F<D;++F){var oe,fe=Q,xe=re+S[N-1];for(oe=0;oe<D;++oe)S[N+oe]=fe[xe+S[Y+oe]];N+=32}}function Oe(S,N){we(S,N,4)}function $e(S,N){we(S,N,8)}function He(S,N){we(S,N,16)}function jt(S,N){var D;for(D=0;16>D;++D)n(S,N+32*D,S,N-32,16)}function Kt(S,N){var D;for(D=16;0<D;--D)a(S,N,S[N-1],16),N+=32}function Qe(S,N,D){var F;for(F=0;16>F;++F)a(N,D+32*F,S,16)}function gt(S,N){var D,F=16;for(D=0;16>D;++D)F+=S[N-1+32*D]+S[N+D-32];Qe(F>>5,S,N)}function pr(S,N){var D,F=8;for(D=0;16>D;++D)F+=S[N-1+32*D];Qe(F>>4,S,N)}function Nt(S,N){var D,F=8;for(D=0;16>D;++D)F+=S[N+D-32];Qe(F>>4,S,N)}function zt(S,N){Qe(128,S,N)}function Ue(S,N,D){return S+2*N+D+2>>2}function Dt(S,N){var D,F=N-32;for(F=new Uint8Array([Ue(S[F-1],S[F+0],S[F+1]),Ue(S[F+0],S[F+1],S[F+2]),Ue(S[F+1],S[F+2],S[F+3]),Ue(S[F+2],S[F+3],S[F+4])]),D=0;4>D;++D)n(S,N+32*D,F,0,F.length)}function Vt(S,N){var D=S[N-1],F=S[N-1+32],Y=S[N-1+64],Q=S[N-1+96];Ce(S,N+0,16843009*Ue(S[N-1-32],D,F)),Ce(S,N+32,16843009*Ue(D,F,Y)),Ce(S,N+64,16843009*Ue(F,Y,Q)),Ce(S,N+96,16843009*Ue(Y,Q,Q))}function gr(S,N){var D,F=4;for(D=0;4>D;++D)F+=S[N+D-32]+S[N-1+32*D];for(F>>=3,D=0;4>D;++D)a(S,N+32*D,F,4)}function Zr(S,N){var D=S[N-1+0],F=S[N-1+32],Y=S[N-1+64],Q=S[N-1-32],re=S[N+0-32],oe=S[N+1-32],fe=S[N+2-32],xe=S[N+3-32];S[N+0+96]=Ue(F,Y,S[N-1+96]),S[N+1+96]=S[N+0+64]=Ue(D,F,Y),S[N+2+96]=S[N+1+64]=S[N+0+32]=Ue(Q,D,F),S[N+3+96]=S[N+2+64]=S[N+1+32]=S[N+0+0]=Ue(re,Q,D),S[N+3+64]=S[N+2+32]=S[N+1+0]=Ue(oe,re,Q),S[N+3+32]=S[N+2+0]=Ue(fe,oe,re),S[N+3+0]=Ue(xe,fe,oe)}function Nr(S,N){var D=S[N+1-32],F=S[N+2-32],Y=S[N+3-32],Q=S[N+4-32],re=S[N+5-32],oe=S[N+6-32],fe=S[N+7-32];S[N+0+0]=Ue(S[N+0-32],D,F),S[N+1+0]=S[N+0+32]=Ue(D,F,Y),S[N+2+0]=S[N+1+32]=S[N+0+64]=Ue(F,Y,Q),S[N+3+0]=S[N+2+32]=S[N+1+64]=S[N+0+96]=Ue(Y,Q,re),S[N+3+32]=S[N+2+64]=S[N+1+96]=Ue(Q,re,oe),S[N+3+64]=S[N+2+96]=Ue(re,oe,fe),S[N+3+96]=Ue(oe,fe,fe)}function Te(S,N){var D=S[N-1+0],F=S[N-1+32],Y=S[N-1+64],Q=S[N-1-32],re=S[N+0-32],oe=S[N+1-32],fe=S[N+2-32],xe=S[N+3-32];S[N+0+0]=S[N+1+64]=Q+re+1>>1,S[N+1+0]=S[N+2+64]=re+oe+1>>1,S[N+2+0]=S[N+3+64]=oe+fe+1>>1,S[N+3+0]=fe+xe+1>>1,S[N+0+96]=Ue(Y,F,D),S[N+0+64]=Ue(F,D,Q),S[N+0+32]=S[N+1+96]=Ue(D,Q,re),S[N+1+32]=S[N+2+96]=Ue(Q,re,oe),S[N+2+32]=S[N+3+96]=Ue(re,oe,fe),S[N+3+32]=Ue(oe,fe,xe)}function hr(S,N){var D=S[N+0-32],F=S[N+1-32],Y=S[N+2-32],Q=S[N+3-32],re=S[N+4-32],oe=S[N+5-32],fe=S[N+6-32],xe=S[N+7-32];S[N+0+0]=D+F+1>>1,S[N+1+0]=S[N+0+64]=F+Y+1>>1,S[N+2+0]=S[N+1+64]=Y+Q+1>>1,S[N+3+0]=S[N+2+64]=Q+re+1>>1,S[N+0+32]=Ue(D,F,Y),S[N+1+32]=S[N+0+96]=Ue(F,Y,Q),S[N+2+32]=S[N+1+96]=Ue(Y,Q,re),S[N+3+32]=S[N+2+96]=Ue(Q,re,oe),S[N+3+64]=Ue(re,oe,fe),S[N+3+96]=Ue(oe,fe,xe)}function cr(S,N){var D=S[N-1+0],F=S[N-1+32],Y=S[N-1+64],Q=S[N-1+96];S[N+0+0]=D+F+1>>1,S[N+2+0]=S[N+0+32]=F+Y+1>>1,S[N+2+32]=S[N+0+64]=Y+Q+1>>1,S[N+1+0]=Ue(D,F,Y),S[N+3+0]=S[N+1+32]=Ue(F,Y,Q),S[N+3+32]=S[N+1+64]=Ue(Y,Q,Q),S[N+3+64]=S[N+2+64]=S[N+0+96]=S[N+1+96]=S[N+2+96]=S[N+3+96]=Q}function Fr(S,N){var D=S[N-1+0],F=S[N-1+32],Y=S[N-1+64],Q=S[N-1+96],re=S[N-1-32],oe=S[N+0-32],fe=S[N+1-32],xe=S[N+2-32];S[N+0+0]=S[N+2+32]=D+re+1>>1,S[N+0+32]=S[N+2+64]=F+D+1>>1,S[N+0+64]=S[N+2+96]=Y+F+1>>1,S[N+0+96]=Q+Y+1>>1,S[N+3+0]=Ue(oe,fe,xe),S[N+2+0]=Ue(re,oe,fe),S[N+1+0]=S[N+3+32]=Ue(D,re,oe),S[N+1+32]=S[N+3+64]=Ue(F,D,re),S[N+1+64]=S[N+3+96]=Ue(Y,F,D),S[N+1+96]=Ue(Q,Y,F)}function pn(S,N){var D;for(D=0;8>D;++D)n(S,N+32*D,S,N-32,8)}function wr(S,N){var D;for(D=0;8>D;++D)a(S,N,S[N-1],8),N+=32}function ln(S,N,D){var F;for(F=0;8>F;++F)a(N,D+32*F,S,8)}function Kn(S,N){var D,F=8;for(D=0;8>D;++D)F+=S[N+D-32]+S[N-1+32*D];ln(F>>4,S,N)}function Na(S,N){var D,F=4;for(D=0;8>D;++D)F+=S[N+D-32];ln(F>>3,S,N)}function lo(S,N){var D,F=4;for(D=0;8>D;++D)F+=S[N-1+32*D];ln(F>>3,S,N)}function ca(S,N){ln(128,S,N)}function En(S,N,D){var F=S[N-D],Y=S[N+0],Q=3*(Y-F)+iC[1020+S[N-2*D]-S[N+D]],re=m1[112+(Q+4>>3)];S[N-D]=Zs[255+F+m1[112+(Q+3>>3)]],S[N+0]=Zs[255+Y-re]}function Oa(S,N,D,F){var Y=S[N+0],Q=S[N+D];return Il[255+S[N-2*D]-S[N-D]]>F||Il[255+Q-Y]>F}function Jc(S,N,D,F){return 4*Il[255+S[N-D]-S[N+0]]+Il[255+S[N-2*D]-S[N+D]]<=F}function Si(S,N,D,F,Y){var Q=S[N-3*D],re=S[N-2*D],oe=S[N-D],fe=S[N+0],xe=S[N+D],De=S[N+2*D],Xe=S[N+3*D];return 4*Il[255+oe-fe]+Il[255+re-xe]>F?0:Il[255+S[N-4*D]-Q]<=Y&&Il[255+Q-re]<=Y&&Il[255+re-oe]<=Y&&Il[255+Xe-De]<=Y&&Il[255+De-xe]<=Y&&Il[255+xe-fe]<=Y}function As(S,N,D,F){var Y=2*F+1;for(F=0;16>F;++F)Jc(S,N+F,D,Y)&&En(S,N+F,D)}function Ps(S,N,D,F){var Y=2*F+1;for(F=0;16>F;++F)Jc(S,N+F*D,1,Y)&&En(S,N+F*D,1)}function Jo(S,N,D,F){var Y;for(Y=3;0<Y;--Y)As(S,N+=4*D,D,F)}function ta(S,N,D,F){var Y;for(Y=3;0<Y;--Y)Ps(S,N+=4,D,F)}function Do(S,N,D,F,Y,Q,re,oe){for(Q=2*Q+1;0<Y--;){if(Si(S,N,D,Q,re))if(Oa(S,N,D,oe))En(S,N,D);else{var fe=S,xe=N,De=D,Xe=fe[xe-2*De],be=fe[xe-De],Me=fe[xe+0],ze=fe[xe+De],pt=fe[xe+2*De],Ye=27*(At=iC[1020+3*(Me-be)+iC[1020+Xe-ze]])+63>>7,xt=18*At+63>>7,At=9*At+63>>7;fe[xe-3*De]=Zs[255+fe[xe-3*De]+At],fe[xe-2*De]=Zs[255+Xe+xt],fe[xe-De]=Zs[255+be+Ye],fe[xe+0]=Zs[255+Me-Ye],fe[xe+De]=Zs[255+ze-xt],fe[xe+2*De]=Zs[255+pt-At]}N+=F}}function bo(S,N,D,F,Y,Q,re,oe){for(Q=2*Q+1;0<Y--;){if(Si(S,N,D,Q,re))if(Oa(S,N,D,oe))En(S,N,D);else{var fe=S,xe=N,De=D,Xe=fe[xe-De],be=fe[xe+0],Me=fe[xe+De],ze=m1[112+(4+(pt=3*(be-Xe))>>3)],pt=m1[112+(pt+3>>3)],Ye=ze+1>>1;fe[xe-2*De]=Zs[255+fe[xe-2*De]+Ye],fe[xe-De]=Zs[255+Xe+pt],fe[xe+0]=Zs[255+be-ze],fe[xe+De]=Zs[255+Me-Ye]}N+=F}}function Mu(S,N,D,F,Y,Q){Do(S,N,D,1,16,F,Y,Q)}function Js(S,N,D,F,Y,Q){Do(S,N,1,D,16,F,Y,Q)}function sc(S,N,D,F,Y,Q){var re;for(re=3;0<re;--re)bo(S,N+=4*D,D,1,16,F,Y,Q)}function Qs(S,N,D,F,Y,Q){var re;for(re=3;0<re;--re)bo(S,N+=4,1,D,16,F,Y,Q)}function O(S,N,D,F,Y,Q,re,oe){Do(S,N,Y,1,8,Q,re,oe),Do(D,F,Y,1,8,Q,re,oe)}function K(S,N,D,F,Y,Q,re,oe){Do(S,N,1,Y,8,Q,re,oe),Do(D,F,1,Y,8,Q,re,oe)}function ge(S,N,D,F,Y,Q,re,oe){bo(S,N+4*Y,Y,1,8,Q,re,oe),bo(D,F+4*Y,Y,1,8,Q,re,oe)}function ke(S,N,D,F,Y,Q,re,oe){bo(S,N+4,1,Y,8,Q,re,oe),bo(D,F+4,1,Y,8,Q,re,oe)}function Fe(){this.ba=new fn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ft(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vr(){this.ua=0,this.Wa=new qt,this.vb=new qt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new T}function br(){this.xb=this.a=0,this.l=new tt,this.ca=new fn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vr,this.ab=0,this.gc=o(4,Bt),this.Oc=0}function an(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wr(S,N,D,F,Y,Q,re){for(S=S==null?0:S[N+0],N=0;N<re;++N)Y[Q+N]=S+D[F+N]&255,S=Y[Q+N]}function $n(S,N,D,F,Y,Q,re){var oe;if(S==null)Wr(null,null,D,F,Y,Q,re);else for(oe=0;oe<re;++oe)Y[Q+oe]=S[N+oe]+D[F+oe]&255}function Ta(S,N,D,F,Y,Q,re){if(S==null)Wr(null,null,D,F,Y,Q,re);else{var oe,fe=S[N+0],xe=fe,De=fe;for(oe=0;oe<re;++oe)xe=De+(fe=S[N+oe])-xe,De=D[F+oe]+(-256&xe?0>xe?0:255:xe)&255,xe=fe,Y[Q+oe]=De}}function Ua(S,N,D,F){var Y=N.width,Q=N.o;if(t(S!=null&&N!=null),0>D||0>=F||D+F>Q)return null;if(!S.Cc){if(S.ga==null){var re;if(S.ga=new an,(re=S.ga==null)||(re=N.width*N.o,t(S.Gb.length==0),S.Gb=i(re),S.Uc=0,S.Gb==null?re=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,re=1),re=!re),!re){re=S.ga;var oe=S.Fa,fe=S.P,xe=S.qc,De=S.mb,Xe=S.nb,be=fe+1,Me=xe-1,ze=re.l;if(t(oe!=null&&De!=null&&N!=null),Qd[0]=null,Qd[1]=Wr,Qd[2]=$n,Qd[3]=Ta,re.ca=De,re.tb=Xe,re.c=N.width,re.i=N.height,t(0<re.c&&0<re.i),1>=xe)N=0;else if(re.$a=3&oe[fe+0],re.Z=oe[fe+0]>>2&3,re.Lc=oe[fe+0]>>4&3,fe=oe[fe+0]>>6&3,0>re.$a||1<re.$a||4<=re.Z||1<re.Lc||fe)N=0;else if(ze.put=dr,ze.ac=or,ze.bc=Vn,ze.ma=re,ze.width=N.width,ze.height=N.height,ze.Da=N.Da,ze.v=N.v,ze.va=N.va,ze.j=N.j,ze.o=N.o,re.$a)e:{t(re.$a==1),N=Vr();t:for(;;){if(N==null){N=0;break e}if(t(re!=null),re.mc=N,N.c=re.c,N.i=re.i,N.l=re.l,N.l.ma=re,N.l.width=re.c,N.l.height=re.i,N.a=0,G(N.m,oe,be,Me),!Cn(re.c,re.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&$t(N.s)?(re.ic=1,oe=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(oe),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(re.ic=0,N=Sn(N,re.c)),!N))break t;N=1;break e}re.mc=null,N=0}else N=Me>=re.c*re.i;re=!N}if(re)return null;S.ga.Lc!=1?S.Ga=0:F=Q-D}t(S.ga!=null),t(D+F<=Q);e:{if(N=(oe=S.ga).c,Q=oe.l.o,oe.$a==0){if(be=S.rc,Me=S.Vc,ze=S.Fa,fe=S.P+1+D*N,xe=S.mb,De=S.nb+D*N,t(fe<=S.P+S.qc),oe.Z!=0)for(t(Qd[oe.Z]!=null),re=0;re<F;++re)Qd[oe.Z](be,Me,ze,fe,xe,De,N),be=xe,Me=De,De+=N,fe+=N;else for(re=0;re<F;++re)n(xe,De,ze,fe,N),be=xe,Me=De,De+=N,fe+=N;S.rc=be,S.Vc=Me}else{if(t(oe.mc!=null),N=D+F,t((re=oe.mc)!=null),t(N<=re.i),re.C>=N)N=1;else if(oe.ic||Mo(),oe.ic){oe=re.V,be=re.Ba,Me=re.c;var pt=re.i,Ye=(ze=1,fe=re.$/Me,xe=re.$%Me,De=re.m,Xe=re.s,re.$),xt=Me*pt,At=Me*N,Gt=Xe.wc,Ut=Ye<At?ht(Xe,xe,fe):null;t(Ye<=xt),t(N<=pt),t($t(Xe));t:for(;;){for(;!De.h&&Ye<At;){if(xe&Gt||(Ut=ht(Xe,xe,fe)),t(Ut!=null),Z(De),256>(pt=wt(Ut.G[0],Ut.H[0],De)))oe[be+Ye]=pt,++Ye,++xe>=Me&&(xe=0,++fe<=N&&!(fe%16)&&Wt(re,fe));else{if(!(280>pt)){ze=0;break t}pt=la(pt-256,De);var Lr,Ar=wt(Ut.G[4],Ut.H[4],De);if(Z(De),!(Ye>=(Ar=_e(Me,Ar=la(Ar,De)))&&xt-Ye>=pt)){ze=0;break t}for(Lr=0;Lr<pt;++Lr)oe[be+Ye+Lr]=oe[be+Ye+Lr-Ar];for(Ye+=pt,xe+=pt;xe>=Me;)xe-=Me,++fe<=N&&!(fe%16)&&Wt(re,fe);Ye<At&&xe&Gt&&(Ut=ht(Xe,xe,fe))}t(De.h==q(De))}Wt(re,fe>N?N:fe);break t}!ze||De.h&&Ye<xt?(ze=0,re.a=De.h?5:3):re.$=Ye,N=ze}else N=Yt(re,re.V,re.Ba,re.c,re.i,N,Fi);if(!N){F=0;break e}}D+F>=Q&&(S.Cc=1),F=1}if(!F)return null;if(S.Cc&&((F=S.ga)!=null&&(F.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+D*Y}function ra(S,N,D,F,Y,Q){for(;0<Y--;){var re,oe=S,fe=N+(D?1:0),xe=S,De=N+(D?0:3);for(re=0;re<F;++re){var Xe=xe[De+4*re];Xe!=255&&(Xe*=32897,oe[fe+4*re+0]=oe[fe+4*re+0]*Xe>>23,oe[fe+4*re+1]=oe[fe+4*re+1]*Xe>>23,oe[fe+4*re+2]=oe[fe+4*re+2]*Xe>>23)}N+=Q}}function Ia(S,N,D,F,Y){for(;0<F--;){var Q;for(Q=0;Q<D;++Q){var re=S[N+2*Q+0],oe=15&(xe=S[N+2*Q+1]),fe=4369*oe,xe=(240&xe|xe>>4)*fe>>16;S[N+2*Q+0]=(240&re|re>>4)*fe>>16&240|(15&re|re<<4)*fe>>16>>4&15,S[N+2*Q+1]=240&xe|oe}N+=Y}}function na(S,N,D,F,Y,Q,re,oe){var fe,xe,De=255;for(xe=0;xe<Y;++xe){for(fe=0;fe<F;++fe){var Xe=S[N+fe];Q[re+4*fe]=Xe,De&=Xe}N+=D,re+=oe}return De!=255}function si(S,N,D,F,Y){var Q;for(Q=0;Q<Y;++Q)D[F+Q]=S[N+Q]>>8}function Mo(){cy=ra,HD=Ia,GD=na,KD=si}function _i(S,N,D){k[S]=function(F,Y,Q,re,oe,fe,xe,De,Xe,be,Me,ze,pt,Ye,xt,At,Gt){var Ut,Lr=Gt-1>>1,Ar=oe[fe+0]|xe[De+0]<<16,_n=Xe[be+0]|Me[ze+0]<<16;t(F!=null);var Tr=3*Ar+_n+131074>>2;for(N(F[Y+0],255&Tr,Tr>>16,pt,Ye),Q!=null&&(Tr=3*_n+Ar+131074>>2,N(Q[re+0],255&Tr,Tr>>16,xt,At)),Ut=1;Ut<=Lr;++Ut){var qn=oe[fe+Ut]|xe[De+Ut]<<16,Ui=Xe[be+Ut]|Me[ze+Ut]<<16,jn=Ar+qn+_n+Ui+524296,Ir=jn+2*(qn+_n)>>3;Tr=Ir+Ar>>1,Ar=(jn=jn+2*(Ar+Ui)>>3)+qn>>1,N(F[Y+2*Ut-1],255&Tr,Tr>>16,pt,Ye+(2*Ut-1)*D),N(F[Y+2*Ut-0],255&Ar,Ar>>16,pt,Ye+(2*Ut-0)*D),Q!=null&&(Tr=jn+_n>>1,Ar=Ir+Ui>>1,N(Q[re+2*Ut-1],255&Tr,Tr>>16,xt,At+(2*Ut-1)*D),N(Q[re+2*Ut+0],255&Ar,Ar>>16,xt,At+(2*Ut+0)*D)),Ar=qn,_n=Ui}1&Gt||(Tr=3*Ar+_n+131074>>2,N(F[Y+Gt-1],255&Tr,Tr>>16,pt,Ye+(Gt-1)*D),Q!=null&&(Tr=3*_n+Ar+131074>>2,N(Q[re+Gt-1],255&Tr,Tr>>16,xt,At+(Gt-1)*D)))}}function yp(){Dl[p1]=yae,Dl[g1]=iM,Dl[eM]=xae,Dl[v1]=oM,Dl[y1]=sM,Dl[oC]=lM,Dl[tM]=bae,Dl[sC]=iM,Dl[lC]=oM,Dl[x1]=sM,Dl[cC]=lM}function Ru(S){return S&~wae?0>S?0:255:S>>cM}function lc(S,N){return Ru((19077*S>>8)+(26149*N>>8)-14234)}function Ol(S,N,D){return Ru((19077*S>>8)-(6419*N>>8)-(13320*D>>8)+8708)}function cc(S,N){return Ru((19077*S>>8)+(33050*N>>8)-17685)}function Qo(S,N,D,F,Y){F[Y+0]=lc(S,D),F[Y+1]=Ol(S,N,D),F[Y+2]=cc(S,N)}function Lu(S,N,D,F,Y){F[Y+0]=cc(S,N),F[Y+1]=Ol(S,N,D),F[Y+2]=lc(S,D)}function fa(S,N,D,F,Y){var Q=Ol(S,N,D);N=Q<<3&224|cc(S,N)>>3,F[Y+0]=248&lc(S,D)|Q>>5,F[Y+1]=N}function Tl(S,N,D,F,Y){var Q=240&cc(S,N)|15;F[Y+0]=240&lc(S,D)|Ol(S,N,D)>>4,F[Y+1]=Q}function $u(S,N,D,F,Y){F[Y+0]=255,Qo(S,N,D,F,Y+1)}function Es(S,N,D,F,Y){Lu(S,N,D,F,Y),F[Y+3]=255}function Kd(S,N,D,F,Y){Qo(S,N,D,F,Y),F[Y+3]=255}function Ja(S,N){return 0>S?0:S>N?N:S}function uc(S,N,D){k[S]=function(F,Y,Q,re,oe,fe,xe,De,Xe){for(var be=De+(-2&Xe)*D;De!=be;)N(F[Y+0],Q[re+0],oe[fe+0],xe,De),N(F[Y+1],Q[re+0],oe[fe+0],xe,De+D),Y+=2,++re,++fe,De+=2*D;1&Xe&&N(F[Y+0],Q[re+0],oe[fe+0],xe,De)}}function Yd(S,N,D){return D==0?S==0?N==0?6:5:N==0?4:0:D}function xp(S,N,D,F,Y){switch(S>>>30){case 3:Ca(N,D,F,Y,0);break;case 2:Xn(N,D,F,Y);break;case 1:oa(N,D,F,Y)}}function Zo(S,N){var D,F,Y=N.M,Q=N.Nb,re=S.oc,oe=S.pc+40,fe=S.oc,xe=S.pc+584,De=S.oc,Xe=S.pc+600;for(D=0;16>D;++D)re[oe+32*D-1]=129;for(D=0;8>D;++D)fe[xe+32*D-1]=129,De[Xe+32*D-1]=129;for(0<Y?re[oe-1-32]=fe[xe-1-32]=De[Xe-1-32]=129:(a(re,oe-32-1,127,21),a(fe,xe-32-1,127,9),a(De,Xe-32-1,127,9)),F=0;F<S.za;++F){var be=N.ya[N.aa+F];if(0<F){for(D=-1;16>D;++D)n(re,oe+32*D-4,re,oe+32*D+12,4);for(D=-1;8>D;++D)n(fe,xe+32*D-4,fe,xe+32*D+4,4),n(De,Xe+32*D-4,De,Xe+32*D+4,4)}var Me=S.Gd,ze=S.Hd+F,pt=be.ad,Ye=be.Hc;if(0<Y&&(n(re,oe-32,Me[ze].y,0,16),n(fe,xe-32,Me[ze].f,0,8),n(De,Xe-32,Me[ze].ea,0,8)),be.Za){var xt=re,At=oe-32+16;for(0<Y&&(F>=S.za-1?a(xt,At,Me[ze].y[15],4):n(xt,At,Me[ze+1].y,0,4)),D=0;4>D;D++)xt[At+128+D]=xt[At+256+D]=xt[At+384+D]=xt[At+0+D];for(D=0;16>D;++D,Ye<<=2)xt=re,At=oe+dM[D],dc[be.Ob[D]](xt,At),xp(Ye,pt,16*+D,xt,At)}else if(xt=Yd(F,Y,be.Ob[0]),Jd[xt](re,oe),Ye!=0)for(D=0;16>D;++D,Ye<<=2)xp(Ye,pt,16*+D,re,oe+dM[D]);for(D=be.Gc,xt=Yd(F,Y,be.Dd),zu[xt](fe,xe),zu[xt](De,Xe),Ye=pt,xt=fe,At=xe,255&(be=0|D)&&(170&be?co(Ye,256,xt,At):ha(Ye,256,xt,At)),be=De,Ye=Xe,255&(D>>=8)&&(170&D?co(pt,320,be,Ye):ha(pt,320,be,Ye)),Y<S.Ub-1&&(n(Me[ze].y,0,re,oe+480,16),n(Me[ze].f,0,fe,xe+224,8),n(Me[ze].ea,0,De,Xe+224,8)),D=8*Q*S.B,Me=S.sa,ze=S.ta+16*F+16*Q*S.R,pt=S.qa,be=S.ra+8*F+D,Ye=S.Ha,xt=S.Ia+8*F+D,D=0;16>D;++D)n(Me,ze+D*S.R,re,oe+32*D,16);for(D=0;8>D;++D)n(pt,be+D*S.B,fe,xe+32*D,8),n(Ye,xt+D*S.B,De,Xe+32*D,8)}}function ji(S,N,D,F,Y,Q,re,oe,fe){var xe=[0],De=[0],Xe=0,be=fe!=null?fe.kd:0,Me=fe??new ft;if(S==null||12>D)return 7;Me.data=S,Me.w=N,Me.ha=D,N=[N],D=[D],Me.gb=[Me.gb];e:{var ze=N,pt=D,Ye=Me.gb;if(t(S!=null),t(pt!=null),t(Ye!=null),Ye[0]=0,12<=pt[0]&&!r(S,ze[0],"RIFF")){if(r(S,ze[0]+8,"WEBP")){Ye=3;break e}var xt=ye(S,ze[0]+4);if(12>xt||4294967286<xt){Ye=3;break e}if(be&&xt>pt[0]-8){Ye=7;break e}Ye[0]=xt,ze[0]+=12,pt[0]-=12}Ye=0}if(Ye!=0)return Ye;for(xt=0<Me.gb[0],D=D[0];;){e:{var At=S;pt=N,Ye=D;var Gt=xe,Ut=De,Lr=ze=[0];if((Tr=Xe=[Xe])[0]=0,8>Ye[0])Ye=7;else{if(!r(At,pt[0],"VP8X")){if(ye(At,pt[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var Ar=ye(At,pt[0]+8),_n=1+qe(At,pt[0]+12);if(2147483648<=_n*(At=1+qe(At,pt[0]+15))){Ye=3;break e}Lr!=null&&(Lr[0]=Ar),Gt!=null&&(Gt[0]=_n),Ut!=null&&(Ut[0]=At),pt[0]+=18,Ye[0]-=18,Tr[0]=1}Ye=0}}if(Xe=Xe[0],ze=ze[0],Ye!=0)return Ye;if(pt=!!(2&ze),!xt&&Xe)return 3;if(Q!=null&&(Q[0]=!!(16&ze)),re!=null&&(re[0]=pt),oe!=null&&(oe[0]=0),re=xe[0],ze=De[0],Xe&&pt&&fe==null){Ye=0;break}if(4>D){Ye=7;break}if(xt&&Xe||!xt&&!Xe&&!r(S,N[0],"ALPH")){D=[D],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{Ar=S,Ye=N,xt=D;var Tr=Me.gb;Gt=Me.na,Ut=Me.P,Lr=Me.Sa,_n=22,t(Ar!=null),t(xt!=null),At=Ye[0];var qn=xt[0];for(t(Gt!=null),t(Lr!=null),Gt[0]=null,Ut[0]=null,Lr[0]=0;;){if(Ye[0]=At,xt[0]=qn,8>qn){Ye=7;break e}var Ui=ye(Ar,At+4);if(4294967286<Ui){Ye=3;break e}var jn=8+Ui+1&-2;if(_n+=jn,0<Tr&&_n>Tr){Ye=3;break e}if(!r(Ar,At,"VP8 ")||!r(Ar,At,"VP8L")){Ye=0;break e}if(qn[0]<jn){Ye=7;break e}r(Ar,At,"ALPH")||(Gt[0]=Ar,Ut[0]=At+8,Lr[0]=Ui),At+=jn,qn-=jn}}if(D=D[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],Ye!=0)break}D=[D],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(Tr=S,Ye=N,xt=D,Gt=Me.gb[0],Ut=Me.Ja,Lr=Me.xa,Ar=Ye[0],At=!r(Tr,Ar,"VP8 "),_n=!r(Tr,Ar,"VP8L"),t(Tr!=null),t(xt!=null),t(Ut!=null),t(Lr!=null),8>xt[0])Ye=7;else{if(At||_n){if(Tr=ye(Tr,Ar+4),12<=Gt&&Tr>Gt-12){Ye=3;break e}if(be&&Tr>xt[0]-8){Ye=7;break e}Ut[0]=Tr,Ye[0]+=8,xt[0]-=8,Lr[0]=_n}else Lr[0]=5<=xt[0]&&Tr[Ar+0]==47&&!(Tr[Ar+4]>>5),Ut[0]=xt[0];Ye=0}if(D=D[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],N=N[0],Ye!=0)break;if(4294967286<Me.Ja)return 3;if(oe==null||pt||(oe[0]=Me.xa?2:1),re=[re],ze=[ze],Me.xa){if(5>D){Ye=7;break}oe=re,be=ze,pt=Q,S==null||5>D?S=0:5<=D&&S[N+0]==47&&!(S[N+4]>>5)?(xt=[0],Tr=[0],Gt=[0],G(Ut=new B,S,N,D),qa(Ut,xt,Tr,Gt)?(oe!=null&&(oe[0]=xt[0]),be!=null&&(be[0]=Tr[0]),pt!=null&&(pt[0]=Gt[0]),S=1):S=0):S=0}else{if(10>D){Ye=7;break}oe=ze,S==null||10>D||!lt(S,N+3,D-3)?S=0:(be=S[N+0]|S[N+1]<<8|S[N+2]<<16,pt=16383&(S[N+7]<<8|S[N+6]),S=16383&(S[N+9]<<8|S[N+8]),1&be||3<(be>>1&7)||!(be>>4&1)||be>>5>=Me.Ja||!pt||!S?S=0:(re&&(re[0]=pt),oe&&(oe[0]=S),S=1))}if(!S||(re=re[0],ze=ze[0],Xe&&(xe[0]!=re||De[0]!=ze)))return 3;fe!=null&&(fe[0]=Me,fe.offset=N-fe.w,t(4294967286>N-fe.w),t(fe.offset==fe.ha-D));break}return Ye==0||Ye==7&&Xe&&fe==null?(Q!=null&&(Q[0]|=Me.na!=null&&0<Me.na.length),F!=null&&(F[0]=re),Y!=null&&(Y[0]=ze),0):Ye}function Xd(S,N,D){var F=N.width,Y=N.height,Q=0,re=0,oe=F,fe=Y;if(N.Da=S!=null&&0<S.Da,N.Da&&(oe=S.cd,fe=S.bd,Q=S.v,re=S.j,11>D||(Q&=-2,re&=-2),0>Q||0>re||0>=oe||0>=fe||Q+oe>F||re+fe>Y))return 0;if(N.v=Q,N.j=re,N.va=Q+oe,N.o=re+fe,N.U=oe,N.T=fe,N.da=S!=null&&0<S.da,N.da){if(!It(oe,fe,D=[S.ib],Q=[S.hb]))return 0;N.ib=D[0],N.hb=Q[0]}return N.ob=S!=null&&S.ob,N.Kb=S==null||!S.Sd,N.da&&(N.ob=N.ib<3*F/4&&N.hb<3*Y/4,N.Kb=0),1}function ks(S){if(S==null)return 2;if(11>S.S){var N=S.f.RGBA;N.fb+=(S.height-1)*N.A,N.A=-N.A}else N=S.f.kb,S=S.height,N.O+=(S-1)*N.fa,N.fa=-N.fa,N.N+=(S-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(S-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(S-1)*N.lb,N.lb=-N.lb);return 0}function Qa(S,N,D,F){if(F==null||0>=S||0>=N)return 2;if(D!=null){if(D.Da){var Y=D.cd,Q=D.bd,re=-2&D.v,oe=-2&D.j;if(0>re||0>oe||0>=Y||0>=Q||re+Y>S||oe+Q>N)return 2;S=Y,N=Q}if(D.da){if(!It(S,N,Y=[D.ib],Q=[D.hb]))return 2;S=Y[0],N=Q[0]}}F.width=S,F.height=N;e:{var fe=F.width,xe=F.height;if(S=F.S,0>=fe||0>=xe||!(S>=p1&&13>S))S=2;else{if(0>=F.Rd&&F.sd==null){re=Q=Y=N=0;var De=(oe=fe*fM[S])*xe;if(11>S||(Q=(xe+1)/2*(N=(fe+1)/2),S==12&&(re=(Y=fe)*xe)),(xe=i(De+2*Q+re))==null){S=1;break e}F.sd=xe,11>S?((fe=F.f.RGBA).eb=xe,fe.fb=0,fe.A=oe,fe.size=De):((fe=F.f.kb).y=xe,fe.O=0,fe.fa=oe,fe.Fd=De,fe.f=xe,fe.N=0+De,fe.Ab=N,fe.Cd=Q,fe.ea=xe,fe.W=0+De+Q,fe.Db=N,fe.Ed=Q,S==12&&(fe.F=xe,fe.J=0+De+2*Q),fe.Tc=re,fe.lb=Y)}if(N=1,Y=F.S,Q=F.width,re=F.height,Y>=p1&&13>Y)if(11>Y)S=F.f.RGBA,N&=(oe=Math.abs(S.A))*(re-1)+Q<=S.size,N&=oe>=Q*fM[Y],N&=S.eb!=null;else{S=F.f.kb,oe=(Q+1)/2,De=(re+1)/2,fe=Math.abs(S.fa),xe=Math.abs(S.Ab);var Xe=Math.abs(S.Db),be=Math.abs(S.lb),Me=be*(re-1)+Q;N&=fe*(re-1)+Q<=S.Fd,N&=xe*(De-1)+oe<=S.Cd,N=(N&=Xe*(De-1)+oe<=S.Ed)&fe>=Q&xe>=oe&Xe>=oe,N&=S.y!=null,N&=S.f!=null,N&=S.ea!=null,Y==12&&(N&=be>=Q,N&=Me<=S.Tc,N&=S.F!=null)}else N=0;S=N?0:2}}return S!=0||D!=null&&D.fd&&(S=ks(F)),S}var Fu=64,es=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zi=24,ne=32,Ne=8,Se=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(S){return S},k.Predictor2=function(S,N,D){return N[D+0]},k.Predictor3=function(S,N,D){return N[D+1]},k.Predictor4=function(S,N,D){return N[D-1]},k.Predictor5=function(S,N,D){return rt(rt(S,N[D+1]),N[D+0])},k.Predictor6=function(S,N,D){return rt(S,N[D-1])},k.Predictor7=function(S,N,D){return rt(S,N[D+0])},k.Predictor8=function(S,N,D){return rt(N[D-1],N[D+0])},k.Predictor9=function(S,N,D){return rt(N[D+0],N[D+1])},k.Predictor10=function(S,N,D){return rt(rt(S,N[D-1]),rt(N[D+0],N[D+1]))},k.Predictor11=function(S,N,D){var F=N[D+0];return 0>=Ge(F>>24&255,S>>24&255,(N=N[D-1])>>24&255)+Ge(F>>16&255,S>>16&255,N>>16&255)+Ge(F>>8&255,S>>8&255,N>>8&255)+Ge(255&F,255&S,255&N)?F:S},k.Predictor12=function(S,N,D){var F=N[D+0];return(Ee((S>>24&255)+(F>>24&255)-((N=N[D-1])>>24&255))<<24|Ee((S>>16&255)+(F>>16&255)-(N>>16&255))<<16|Ee((S>>8&255)+(F>>8&255)-(N>>8&255))<<8|Ee((255&S)+(255&F)-(255&N)))>>>0},k.Predictor13=function(S,N,D){var F=N[D-1];return(Ke((S=rt(S,N[D+0]))>>24&255,F>>24&255)<<24|Ke(S>>16&255,F>>16&255)<<16|Ke(S>>8&255,F>>8&255)<<8|Ke(255&S,255&F))>>>0};var Be=k.PredictorAdd0;k.PredictorAdd1=bt,Pt("Predictor2","PredictorAdd2"),Pt("Predictor3","PredictorAdd3"),Pt("Predictor4","PredictorAdd4"),Pt("Predictor5","PredictorAdd5"),Pt("Predictor6","PredictorAdd6"),Pt("Predictor7","PredictorAdd7"),Pt("Predictor8","PredictorAdd8"),Pt("Predictor9","PredictorAdd9"),Pt("Predictor10","PredictorAdd10"),Pt("Predictor11","PredictorAdd11"),Pt("Predictor12","PredictorAdd12"),Pt("Predictor13","PredictorAdd13");var Je=k.PredictorAdd2;je("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var st,St=k.ColorIndexInverseTransform,Ct=k.MapARGB,xr=k.VP8LColorIndexInverseTransformAlpha,zr=k.MapAlpha,en=k.VP8LPredictorsAdd=[];en.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Sa,pi,li,gn,Cr,Yn,zn,Ca,Xn,co,oa,ha,Za,qi,Bu,ly,bp,h1,BD,zD,qD,UD,WD,VD,cy,HD,GD,KD,YD=i(511),XD=i(2041),JD=i(225),QD=i(767),ZD=0,iC=XD,m1=JD,Zs=QD,Il=YD,p1=0,g1=1,eM=2,v1=3,y1=4,oC=5,tM=6,sC=7,lC=8,x1=9,cC=10,aae=[2,3,7],iae=[3,3,11],rM=[280,256,256,256,40],oae=[0,1,1,1,0],sae=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lae=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cae=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],uae=8,uC=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],dC=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],uy=null,dae=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fae=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hae=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mae=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pae=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gae=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Jd=[],dc=[],zu=[],vae=1,aM=2,Qd=[],Dl=[];_i("UpsampleRgbLinePair",Qo,3),_i("UpsampleBgrLinePair",Lu,3),_i("UpsampleRgbaLinePair",Kd,4),_i("UpsampleBgraLinePair",Es,4),_i("UpsampleArgbLinePair",$u,4),_i("UpsampleRgba4444LinePair",Tl,2),_i("UpsampleRgb565LinePair",fa,2);var yae=k.UpsampleRgbLinePair,xae=k.UpsampleBgrLinePair,iM=k.UpsampleRgbaLinePair,oM=k.UpsampleBgraLinePair,sM=k.UpsampleArgbLinePair,lM=k.UpsampleRgba4444LinePair,bae=k.UpsampleRgb565LinePair,b1=16,w1=1<<b1-1,dy=-227,fC=482,cM=6,wae=(256<<cM)-1,uM=0,Sae=i(256),_ae=i(256),jae=i(256),Nae=i(256),Cae=i(fC-dy),Aae=i(fC-dy);uc("YuvToRgbRow",Qo,3),uc("YuvToBgrRow",Lu,3),uc("YuvToRgbaRow",Kd,4),uc("YuvToBgraRow",Es,4),uc("YuvToArgbRow",$u,4),uc("YuvToRgba4444Row",Tl,2),uc("YuvToRgb565Row",fa,2);var dM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],S1=[0,2,8],Pae=[8,7,6,4,4,2,2,2,1,1,1,1],Eae=1;this.WebPDecodeRGBA=function(S,N,D,F,Y){var Q=g1,re=new Fe,oe=new fn;re.ba=oe,oe.S=Q,oe.width=[oe.width],oe.height=[oe.height];var fe=oe.width,xe=oe.height,De=new Or;if(De==null||S==null)var Xe=2;else t(De!=null),Xe=ji(S,N,D,De.width,De.height,De.Pd,De.Qd,De.format,null);if(Xe!=0?fe=0:(fe!=null&&(fe[0]=De.width[0]),xe!=null&&(xe[0]=De.height[0]),fe=1),fe){oe.width=oe.width[0],oe.height=oe.height[0],F!=null&&(F[0]=oe.width),Y!=null&&(Y[0]=oe.height);e:{if(F=new tt,(Y=new ft).data=S,Y.w=N,Y.ha=D,Y.kd=1,N=[0],t(Y!=null),((S=ji(Y.data,Y.w,Y.ha,null,null,null,N,null,Y))==0||S==7)&&N[0]&&(S=4),(N=S)==0){if(t(re!=null),F.data=Y.data,F.w=Y.w+Y.offset,F.ha=Y.ha-Y.offset,F.put=dr,F.ac=or,F.bc=Vn,F.ma=re,Y.xa){if((S=Vr())==null){re=1;break e}if(function(be,Me){var ze=[0],pt=[0],Ye=[0];t:for(;;){if(be==null)return 0;if(Me==null)return be.a=2,0;if(be.l=Me,be.a=0,G(be.m,Me.data,Me.w,Me.ha),!qa(be.m,ze,pt,Ye)){be.a=3;break t}if(be.xb=aM,Me.width=ze[0],Me.height=pt[0],!Cn(ze[0],pt[0],1,be,null))break t;return 1}return t(be.a!=0),0}(S,F)){if(F=(N=Qa(F.width,F.height,re.Oa,re.ba))==0){t:{F=S;r:for(;;){if(F==null){F=0;break t}if(t(F.s.yc!=null),t(F.s.Ya!=null),t(0<F.s.Wb),t((D=F.l)!=null),t((Y=D.ma)!=null),F.xb!=0){if(F.ca=Y.ba,F.tb=Y.tb,t(F.ca!=null),!Xd(Y.Oa,D,v1)){F.a=2;break r}if(!Sn(F,D.width)||D.da)break r;if((D.da||ir(F.ca.S))&&Mo(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Mo()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!ce(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!Yt(F,F.V,F.Ba,F.c,F.i,D.o,at))break r;Y.Dc=F.Ma,F=1;break t}t(F.a!=0),F=0}F=!F}F&&(N=S.a)}else N=S.a}else{if((S=new Qt)==null){re=1;break e}if(S.Fa=Y.na,S.P=Y.P,S.qc=Y.Sa,tr(S,F)){if((N=Qa(F.width,F.height,re.Oa,re.ba))==0){if(S.Aa=0,D=re.Oa,t((Y=S)!=null),D!=null){if(0<(fe=0>(fe=D.Md)?0:100<fe?255:255*fe/100)){for(xe=De=0;4>xe;++xe)12>(Xe=Y.pb[xe]).lc&&(Xe.ia=fe*Pae[0>Xe.lc?0:Xe.lc]>>3),De|=Xe.ia;De&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=D.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}(function(be,Me){if(be==null)return 0;if(Me==null)return it(be,2,"NULL VP8Io parameter in VP8Decode().");if(!be.cb&&!tr(be,Me))return 0;if(t(be.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(be.L=0);var ze=S1[be.L];if(be.L==2?(be.yb=0,be.zb=0):(be.yb=Me.v-ze>>4,be.zb=Me.j-ze>>4,0>be.yb&&(be.yb=0),0>be.zb&&(be.zb=0)),be.Va=Me.o+15+ze>>4,be.Hb=Me.va+15+ze>>4,be.Hb>be.za&&(be.Hb=be.za),be.Va>be.Ub&&(be.Va=be.Ub),0<be.L){var pt=be.ed;for(ze=0;4>ze;++ze){var Ye;if(be.Qa.Cb){var xt=be.Qa.Lb[ze];be.Qa.Fb||(xt+=pt.Tb)}else xt=pt.Tb;for(Ye=0;1>=Ye;++Ye){var At=be.gd[ze][Ye],Gt=xt;if(pt.Pc&&(Gt+=pt.vd[0],Ye&&(Gt+=pt.od[0])),0<(Gt=0>Gt?0:63<Gt?63:Gt)){var Ut=Gt;0<pt.wb&&(Ut=4<pt.wb?Ut>>2:Ut>>1)>9-pt.wb&&(Ut=9-pt.wb),1>Ut&&(Ut=1),At.dd=Ut,At.tc=2*Gt+Ut,At.ld=40<=Gt?2:15<=Gt?1:0}else At.tc=0;At.La=Ye}}}ze=0}else it(be,6,"Frame setup failed"),ze=be.a;if(ze=ze==0){if(ze){be.$c=0,0<be.Aa||(be.Ic=Eae);t:{ze=be.Ic,pt=4*(Ut=be.za);var Lr=32*Ut,Ar=Ut+1,_n=0<be.L?Ut*(0<be.Aa?2:1):0,Tr=(be.Aa==2?2:1)*Ut;if((At=pt+832+(Ye=3*(16*ze+S1[be.L])/2*Lr)+(xt=be.Fa!=null&&0<be.Fa.length?be.Kc.c*be.Kc.i:0))!=At)ze=0;else{if(At>be.Vb){if(be.Vb=0,be.Ec=i(At),be.Fc=0,be.Ec==null){ze=it(be,1,"no memory during frame initialization.");break t}be.Vb=At}At=be.Ec,Gt=be.Fc,be.Ac=At,be.Bc=Gt,Gt+=pt,be.Gd=o(Lr,ee),be.Hd=0,be.rb=o(Ar+1,Io),be.sb=1,be.wa=_n?o(_n,hn):null,be.Y=0,be.D.Nb=0,be.D.wa=be.wa,be.D.Y=be.Y,0<be.Aa&&(be.D.Y+=Ut),t(!0),be.oc=At,be.pc=Gt,Gt+=832,be.ya=o(Tr,Ii),be.aa=0,be.D.ya=be.ya,be.D.aa=be.aa,be.Aa==2&&(be.D.aa+=Ut),be.R=16*Ut,be.B=8*Ut,Ut=(Lr=S1[be.L])*be.R,Lr=Lr/2*be.B,be.sa=At,be.ta=Gt+Ut,be.qa=be.sa,be.ra=be.ta+16*ze*be.R+Lr,be.Ha=be.qa,be.Ia=be.ra+8*ze*be.B+Lr,be.$c=0,Gt+=Ye,be.mb=xt?At:null,be.nb=xt?Gt:null,t(Gt+xt<=be.Fc+be.Vb),er(be),a(be.Ac,be.Bc,0,pt),ze=1}}if(ze){if(Me.ka=0,Me.y=be.sa,Me.O=be.ta,Me.f=be.qa,Me.N=be.ra,Me.ea=be.Ha,Me.Vd=be.Ia,Me.fa=be.R,Me.Rc=be.B,Me.F=null,Me.J=0,!ZD){for(ze=-255;255>=ze;++ze)YD[255+ze]=0>ze?-ze:ze;for(ze=-1020;1020>=ze;++ze)XD[1020+ze]=-128>ze?-128:127<ze?127:ze;for(ze=-112;112>=ze;++ze)JD[112+ze]=-16>ze?-16:15<ze?15:ze;for(ze=-255;510>=ze;++ze)QD[255+ze]=0>ze?0:255<ze?255:ze;ZD=1}zn=le,Ca=Le,co=_t,oa=H,ha=U,Xn=Re,Za=Mu,qi=Js,Bu=O,ly=K,bp=sc,h1=Qs,BD=ge,zD=ke,qD=As,UD=Ps,WD=Jo,VD=ta,dc[0]=gr,dc[1]=Oe,dc[2]=Dt,dc[3]=Vt,dc[4]=Zr,dc[5]=Te,dc[6]=Nr,dc[7]=hr,dc[8]=Fr,dc[9]=cr,Jd[0]=gt,Jd[1]=He,Jd[2]=jt,Jd[3]=Kt,Jd[4]=pr,Jd[5]=Nt,Jd[6]=zt,zu[0]=Kn,zu[1]=$e,zu[2]=pn,zu[3]=wr,zu[4]=lo,zu[5]=Na,zu[6]=ca,ze=1}else ze=0}ze&&(ze=function(qn,Ui){for(qn.M=0;qn.M<qn.Va;++qn.M){var jn,Ir=qn.Jc[qn.M&qn.Xb],sr=qn.m,Ni=qn;for(jn=0;jn<Ni.za;++jn){var vn=sr,Hn=Ni,Wa=Hn.Ac,wo=Hn.Bc+4*jn,ts=Hn.zc,gi=Hn.ya[Hn.aa+jn];if(Hn.Qa.Bb?gi.$b=ve(vn,Hn.Pa.jb[0])?2+ve(vn,Hn.Pa.jb[2]):ve(vn,Hn.Pa.jb[1]):gi.$b=0,Hn.kc&&(gi.Ad=ve(vn,Hn.Bd)),gi.Za=!ve(vn,145)+0,gi.Za){var Ro=gi.Ob,rs=0;for(Hn=0;4>Hn;++Hn){var Wi,Jn=ts[0+Hn];for(Wi=0;4>Wi;++Wi){Jn=mae[Wa[wo+Wi]][Jn];for(var ma=nM[ve(vn,Jn[0])];0<ma;)ma=nM[2*ma+ve(vn,Jn[ma])];Jn=-ma,Wa[wo+Wi]=Jn}n(Ro,rs,Wa,wo,4),rs+=4,ts[0+Hn]=Jn}}else Jn=ve(vn,156)?ve(vn,128)?1:3:ve(vn,163)?2:0,gi.Ob[0]=Jn,a(Wa,wo,Jn,4),a(ts,0,Jn,4);gi.Dd=ve(vn,142)?ve(vn,114)?ve(vn,183)?1:3:2:0}if(Ni.m.Ka)return it(qn,7,"Premature end-of-partition0 encountered.");for(;qn.ja<qn.za;++qn.ja){if(Ni=Ir,vn=(sr=qn).rb[sr.sb-1],Wa=sr.rb[sr.sb+sr.ja],jn=sr.ya[sr.aa+sr.ja],wo=sr.kc?jn.Ad:0)vn.la=Wa.la=0,jn.Za||(vn.Na=Wa.Na=0),jn.Hc=0,jn.Gc=0,jn.ia=0;else{var vi,pa;if(vn=Wa,Wa=Ni,wo=sr.Pa.Xc,ts=sr.ya[sr.aa+sr.ja],gi=sr.pb[ts.$b],Hn=ts.ad,Ro=0,rs=sr.rb[sr.sb-1],Jn=Wi=0,a(Hn,Ro,0,384),ts.Za)var So=0,fc=wo[3];else{ma=i(16);var Ci=vn.Na+rs.Na;if(Ci=uy(Wa,wo[1],Ci,gi.Eb,0,ma,0),vn.Na=rs.Na=(0<Ci)+0,1<Ci)zn(ma,0,Hn,Ro);else{var Os=ma[0]+3>>3;for(ma=0;256>ma;ma+=16)Hn[Ro+ma]=Os}So=1,fc=wo[0]}var Aa=15&vn.la,Vi=15&rs.la;for(ma=0;4>ma;++ma){var el=1&Vi;for(Os=pa=0;4>Os;++Os)Aa=Aa>>1|(el=(Ci=uy(Wa,fc,Ci=el+(1&Aa),gi.Sc,So,Hn,Ro))>So)<<7,pa=pa<<2|(3<Ci?3:1<Ci?2:Hn[Ro+0]!=0),Ro+=16;Aa>>=4,Vi=Vi>>1|el<<7,Wi=(Wi<<8|pa)>>>0}for(fc=Aa,So=Vi>>4,vi=0;4>vi;vi+=2){for(pa=0,Aa=vn.la>>4+vi,Vi=rs.la>>4+vi,ma=0;2>ma;++ma){for(el=1&Vi,Os=0;2>Os;++Os)Ci=el+(1&Aa),Aa=Aa>>1|(el=0<(Ci=uy(Wa,wo[2],Ci,gi.Qc,0,Hn,Ro)))<<3,pa=pa<<2|(3<Ci?3:1<Ci?2:Hn[Ro+0]!=0),Ro+=16;Aa>>=2,Vi=Vi>>1|el<<5}Jn|=pa<<4*vi,fc|=Aa<<4<<vi,So|=(240&Vi)<<vi}vn.la=fc,rs.la=So,ts.Hc=Wi,ts.Gc=Jn,ts.ia=43690&Jn?0:gi.ia,wo=!(Wi|Jn)}if(0<sr.L&&(sr.wa[sr.Y+sr.ja]=sr.gd[jn.$b][jn.Za],sr.wa[sr.Y+sr.ja].La|=!wo),Ni.Ka)return it(qn,7,"Premature end-of-file encountered.")}if(er(qn),sr=Ui,Ni=1,jn=(Ir=qn).D,vn=0<Ir.L&&Ir.M>=Ir.zb&&Ir.M<=Ir.Va,Ir.Aa==0)t:{if(jn.M=Ir.M,jn.uc=vn,Zo(Ir,jn),Ni=1,jn=(pa=Ir.D).Nb,vn=(Jn=S1[Ir.L])*Ir.R,Wa=Jn/2*Ir.B,ma=16*jn*Ir.R,Os=8*jn*Ir.B,wo=Ir.sa,ts=Ir.ta-vn+ma,gi=Ir.qa,Hn=Ir.ra-Wa+Os,Ro=Ir.Ha,rs=Ir.Ia-Wa+Os,Vi=(Aa=pa.M)==0,Wi=Aa>=Ir.Va-1,Ir.Aa==2&&Zo(Ir,pa),pa.uc)for(el=(Ci=Ir).D.M,t(Ci.D.uc),pa=Ci.yb;pa<Ci.Hb;++pa){So=pa,fc=el;var ns=(tl=(_o=Ci).D).Nb;vi=_o.R;var tl=tl.wa[tl.Y+So],rl=_o.sa,Ts=_o.ta+16*ns*vi+16*So,nl=tl.dd,Da=tl.tc;if(Da!=0)if(t(3<=Da),_o.L==1)0<So&&UD(rl,Ts,vi,Da+4),tl.La&&VD(rl,Ts,vi,Da),0<fc&&qD(rl,Ts,vi,Da+4),tl.La&&WD(rl,Ts,vi,Da);else{var al=_o.B,hc=_o.qa,Ih=_o.ra+8*ns*al+8*So,qu=_o.Ha,_o=_o.Ia+8*ns*al+8*So;ns=tl.ld,0<So&&(qi(rl,Ts,vi,Da+4,nl,ns),ly(hc,Ih,qu,_o,al,Da+4,nl,ns)),tl.La&&(h1(rl,Ts,vi,Da,nl,ns),zD(hc,Ih,qu,_o,al,Da,nl,ns)),0<fc&&(Za(rl,Ts,vi,Da+4,nl,ns),Bu(hc,Ih,qu,_o,al,Da+4,nl,ns)),tl.La&&(bp(rl,Ts,vi,Da,nl,ns),BD(hc,Ih,qu,_o,al,Da,nl,ns))}}if(Ir.ia&&alert("todo:DitherRow"),sr.put!=null){if(pa=16*Aa,Aa=16*(Aa+1),Vi?(sr.y=Ir.sa,sr.O=Ir.ta+ma,sr.f=Ir.qa,sr.N=Ir.ra+Os,sr.ea=Ir.Ha,sr.W=Ir.Ia+Os):(pa-=Jn,sr.y=wo,sr.O=ts,sr.f=gi,sr.N=Hn,sr.ea=Ro,sr.W=rs),Wi||(Aa-=Jn),Aa>sr.o&&(Aa=sr.o),sr.F=null,sr.J=null,Ir.Fa!=null&&0<Ir.Fa.length&&pa<Aa&&(sr.J=Ua(Ir,sr,pa,Aa-pa),sr.F=Ir.mb,sr.F==null&&sr.F.length==0)){Ni=it(Ir,3,"Could not decode alpha data.");break t}pa<sr.j&&(Jn=sr.j-pa,pa=sr.j,t(!(1&Jn)),sr.O+=Ir.R*Jn,sr.N+=Ir.B*(Jn>>1),sr.W+=Ir.B*(Jn>>1),sr.F!=null&&(sr.J+=sr.width*Jn)),pa<Aa&&(sr.O+=sr.v,sr.N+=sr.v>>1,sr.W+=sr.v>>1,sr.F!=null&&(sr.J+=sr.v),sr.ka=pa-sr.j,sr.U=sr.va-sr.v,sr.T=Aa-pa,Ni=sr.put(sr))}jn+1!=Ir.Ic||Wi||(n(Ir.sa,Ir.ta-vn,wo,ts+16*Ir.R,vn),n(Ir.qa,Ir.ra-Wa,gi,Hn+8*Ir.B,Wa),n(Ir.Ha,Ir.Ia-Wa,Ro,rs+8*Ir.B,Wa))}if(!Ni)return it(qn,6,"Output aborted.")}return 1}(be,Me)),Me.bc!=null&&Me.bc(Me),ze&=1}return ze?(be.cb=0,ze):0})(S,F)||(N=S.a)}}else N=S.a}N==0&&re.Oa!=null&&re.Oa.fd&&(N=ks(re.ba))}re=N}Q=re!=0?null:11>Q?oe.f.RGBA.eb:oe.f.kb.y}else Q=null;return Q};var fM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,R){for(var E="",I=0;I<4;I++)E+=String.fromCharCode(k[R++]);return E}function d(k,R){return k[R+0]|k[R+1]<<8}function f(k,R){return(k[R+0]|k[R+1]<<8|k[R+2]<<16)>>>0}function h(k,R){return(k[R+0]|k[R+1]<<8|k[R+2]<<16|k[R+3]<<24)>>>0}new c;var m=[0],g=[0],p=[],v=new c,x=e,b=function(k,R){var E={},I=0,T=!1,M=0,z=0;if(E.frames=[],!function(L,B){for(var J=0;J<4;J++)if(L[B+J]!="RIFF".charCodeAt(J))return!0;return!1}(k,R)){for(h(k,R+=4),R+=8;R<k.length;){var V=u(k,R),W=h(k,R+=4);R+=4;var $=W+(1&W);switch(V){case"VP8 ":case"VP8L":E.frames[I]===void 0&&(E.frames[I]={}),(de=E.frames[I]).src_off=T?z:R-8,de.src_size=M+W+8,I++,T&&(T=!1,M=0,z=0);break;case"VP8X":(de=E.header={}).feature_flags=k[R];var G=R+4;de.canvas_width=1+f(k,G),G+=3,de.canvas_height=1+f(k,G),G+=3;break;case"ALPH":T=!0,M=$+8,z=R-8;break;case"ANIM":(de=E.header).bgcolor=h(k,R),G=R+4,de.loop_count=d(k,G),G+=2;break;case"ANMF":var me,de;(de=E.frames[I]={}).offset_x=2*f(k,R),R+=3,de.offset_y=2*f(k,R),R+=3,de.width=1+f(k,R),R+=3,de.height=1+f(k,R),R+=3,de.duration=f(k,R),R+=3,me=k[R++],de.dispose=1&me,de.blend=me>>1&1}V!="ANMF"&&(R+=$)}return E}}(x,0);b.response=x,b.rgbaoutput=!0,b.dataurl=!1;var w=b.header?b.header:null,_=b.frames?b.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],g=[w.canvas_width];for(var j=0;j<_.length&&_[j].blend!=0;j++);}var A=_[0],P=v.WebPDecodeRGBA(x,A.src_off,A.src_size,g,m);A.rgba=P,A.imgwidth=g[0],A.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)p[C]=P[C];return this.width=g,this.height=m,this.data=p,this}(function(e){var t,r,n,a,i,o,l,c,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=L;Object.defineProperty(this,"pdf",{get:function(){return B}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(ye){J=!!ye}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(ye){q=!!ye}});var X=0;Object.defineProperty(this,"posX",{get:function(){return X},set:function(ye){isNaN(ye)||(X=ye)}});var Z=0;Object.defineProperty(this,"posY",{get:function(){return Z},set:function(ye){isNaN(ye)||(Z=ye)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ye){var ce;typeof ye=="number"?ce=[ye,ye,ye,ye]:((ce=new Array(4))[0]=ye[0],ce[1]=ye.length>=2?ye[1]:ce[0],ce[2]=ye.length>=3?ye[2]:ce[0],ce[3]=ye.length>=4?ye[3]:ce[1]),u.margin=ce}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(ye){pe=ye}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(ye){te=ye}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(ye){ve=ye}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ye){ye instanceof d&&(u=ye)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ye){u.path=ye}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(ye){Ce=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var ce;ce=h(ye),this.ctx.fillStyle=ce.style,this.ctx.isFillTransparent=ce.a===0,this.ctx.fillOpacity=ce.a,this.pdf.setFillColor(ce.r,ce.g,ce.b,{a:ce.a}),this.pdf.setTextColor(ce.r,ce.g,ce.b,{a:ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var ce=h(ye);this.ctx.strokeStyle=ce.style,this.ctx.isStrokeTransparent=ce.a===0,this.ctx.strokeOpacity=ce.a,ce.a===0?this.pdf.setDrawColor(255,255,255):(ce.a,this.pdf.setDrawColor(ce.r,ce.g,ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var he=null,qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return qe},set:function(ye){he=null,qe=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var ce;if(this.ctx.font=ye,(ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var Ft=ce[1];ce[2];var qt=ce[3],It=ce[4];ce[5];var et=ce[6],Ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(It)[2];It=Math.floor(Ze==="px"?parseFloat(It)*this.pdf.internal.scaleFactor:Ze==="em"?parseFloat(It)*this.pdf.getFontSize():parseFloat(It)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(It);var Pt=function(yt){var je,We,Ot=[],Ve=yt.trim();if(Ve==="")return YA;if(Ve in wq)return[wq[Ve]];for(;Ve!=="";){switch(We=null,je=(Ve=_q(Ve)).charAt(0)){case'"':case"'":We=Jet(Ve.substring(1),je);break;default:We=Qet(Ve)}if(We===null||(Ot.push(We[0]),(Ve=_q(We[1]))!==""&&Ve.charAt(0)!==","))return YA;Ve=Ve.replace(/^,/,"")}return Ot}(et);if(this.fontFaces){var ue=function(yt,je){if(he===null){var We=function(Ot){var Ve=[];return Object.keys(Ot).forEach(function(nt){Ot[nt].forEach(function(Rt){var Lt=null;switch(Rt){case"bold":Lt={family:nt,weight:"bold"};break;case"italic":Lt={family:nt,style:"italic"};break;case"bolditalic":Lt={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":Lt={family:nt}}Lt!==null&&(Lt.ref={name:nt,style:Rt},Ve.push(Lt))})}),Ve}(yt.getFontList());he=function(Ot){for(var Ve={},nt=0;nt<Ot.length;++nt){var Rt=KA(Ot[nt]),Lt=Rt.family,Tt=Rt.stretch,ir=Rt.style,fr=Rt.weight;Ve[Lt]=Ve[Lt]||{},Ve[Lt][Tt]=Ve[Lt][Tt]||{},Ve[Lt][Tt][ir]=Ve[Lt][Tt][ir]||{},Ve[Lt][Tt][ir][fr]=Rt}return Ve}(We.concat(je))}return he}(this.pdf,this.fontFaces),rt=Pt.map(function(yt){return{family:yt,stretch:"normal",weight:qt,style:Ft}}),Ee=function(yt,je,We){for(var Ot=(We=We||{}).defaultFontFamily||"times",Ve=Object.assign({},Xet,We.genericFontFamilies||{}),nt=null,Rt=null,Lt=0;Lt<je.length;++Lt)if(Ve[(nt=KA(je[Lt])).family]&&(nt.family=Ve[nt.family]),yt.hasOwnProperty(nt.family)){Rt=yt[nt.family];break}if(!(Rt=Rt||yt[Ot]))throw new Error("Could not find a font-family for the rule '"+Sq(nt)+"' and default family '"+Ot+"'.");if(Rt=function(Tt,ir){if(ir[Tt])return ir[Tt];var fr=rT[Tt],ia=fr<=rT.normal?-1:1,fn=bq(ir,une,fr,ia);if(!fn)throw new Error("Could not find a matching font-stretch value for "+Tt);return fn}(nt.stretch,Rt),Rt=function(Tt,ir){if(ir[Tt])return ir[Tt];for(var fr=cne[Tt],ia=0;ia<fr.length;++ia)if(ir[fr[ia]])return ir[fr[ia]];throw new Error("Could not find a matching font-style for "+Tt)}(nt.style,Rt),!(Rt=function(Tt,ir){if(ir[Tt])return ir[Tt];if(Tt===400&&ir[500])return ir[500];if(Tt===500&&ir[400])return ir[400];var fr=Yet[Tt],ia=bq(ir,dne,fr,Tt<400?-1:1);if(!ia)throw new Error("Could not find a matching font-weight for value "+Tt);return ia}(nt.weight,Rt)))throw new Error("Failed to resolve a font for the rule '"+Sq(nt)+"'.");return Rt}(ue,rt);this.pdf.setFont(Ee.ref.name,Ee.ref.style)}else{var Ke="";(qt==="bold"||parseInt(qt,10)>=700||Ft==="bold")&&(Ke="bold"),Ft==="italic"&&(Ke+="italic"),Ke.length===0&&(Ke="normal");for(var Ge="",bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<Pt.length;ot++){if(this.pdf.internal.getFont(Pt[ot],Ke,{noFallback:!0,disableWarning:!0})!==void 0){Ge=Pt[ot];break}if(Ke==="bolditalic"&&this.pdf.internal.getFont(Pt[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ge=Pt[ot],Ke="bold";else if(this.pdf.internal.getFont(Pt[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ge=Pt[ot],Ke="normal";break}}if(Ge===""){for(var kt=0;kt<Pt.length;kt++)if(bt[Pt[kt]]){Ge=bt[Pt[kt]];break}}Ge=Ge===""?"Times":Ge,this.pdf.setFont(Ge,Ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,B){if(isNaN(L)||isNaN(B))throw Pa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(L,B));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(L,B)},f.prototype.closePath=function(){var L=new o(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&Bn(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){L=new o(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},f.prototype.lineTo=function(L,B){if(isNaN(L)||isNaN(B))throw Pa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(L,B));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,B,J,q){if(isNaN(J)||isNaN(q)||isNaN(L)||isNaN(B))throw Pa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var X=this.ctx.transform.applyToPoint(new o(J,q)),Z=this.ctx.transform.applyToPoint(new o(L,B));this.path.push({type:"qct",x1:Z.x,y1:Z.y,x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},f.prototype.bezierCurveTo=function(L,B,J,q,X,Z){if(isNaN(X)||isNaN(Z)||isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q))throw Pa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new o(X,Z)),te=this.ctx.transform.applyToPoint(new o(L,B)),ve=this.ctx.transform.applyToPoint(new o(J,q));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:ve.x,y2:ve.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},f.prototype.arc=function(L,B,J,q,X,Z){if(isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q)||isNaN(X))throw Pa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Z=!!Z,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new o(L,B));L=pe.x,B=pe.y;var te=this.ctx.transform.applyToPoint(new o(0,J)),ve=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(te.x-ve.x,2)+Math.pow(te.y-ve.y,2))}Math.abs(X-q)>=2*Math.PI&&(q=0,X=2*Math.PI),this.path.push({type:"arc",x:L,y:B,radius:J,startAngle:q,endAngle:X,counterclockwise:Z})},f.prototype.arcTo=function(L,B,J,q,X){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,B,J,q){if(isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q))throw Pa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,B),this.lineTo(L+J,B),this.lineTo(L+J,B+q),this.lineTo(L,B+q),this.lineTo(L,B),this.lineTo(L+J,B),this.lineTo(L,B)},f.prototype.fillRect=function(L,B,J,q){if(isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q))throw Pa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var X={};this.lineCap!=="butt"&&(X.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(X.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,B,J,q),this.fill(),X.hasOwnProperty("lineCap")&&(this.lineCap=X.lineCap),X.hasOwnProperty("lineJoin")&&(this.lineJoin=X.lineJoin)}},f.prototype.strokeRect=function(L,B,J,q){if(isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q))throw Pa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,B,J,q),this.stroke())},f.prototype.clearRect=function(L,B,J,q){if(isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q))throw Pa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,B,J,q))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(B),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var B,J,q,X;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))B=0,J=0,q=0,X=0;else{var Z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Z!==null)B=parseInt(Z[1]),J=parseInt(Z[2]),q=parseInt(Z[3]),X=1;else if((Z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)B=parseInt(Z[1]),J=parseInt(Z[2]),q=parseInt(Z[3]),X=parseFloat(Z[4]);else{if(X=1,typeof L=="string"&&L.charAt(0)!=="#"){var pe=new rne(L);L=pe.ok?pe.toHex():"#000000"}L.length===4?(B=L.substring(1,2),B+=B,J=L.substring(2,3),J+=J,q=L.substring(3,4),q+=q):(B=L.substring(1,3),J=L.substring(3,5),q=L.substring(5,7)),B=parseInt(B,16),J=parseInt(J,16),q=parseInt(q,16)}}return{r:B,g:J,b:q,a:X,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,B,J,q){if(isNaN(B)||isNaN(J)||typeof L!="string")throw Pa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!m.call(this)){var X=$(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;I.call(this,{text:L,x:B,y:J,scale:Z,angle:X,align:this.textAlign,maxWidth:q})}},f.prototype.strokeText=function(L,B,J,q){if(isNaN(B)||isNaN(J)||typeof L!="string")throw Pa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){q=isNaN(q)?void 0:q;var X=$(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;I.call(this,{text:L,x:B,y:J,scale:Z,renderingMode:"stroke",angle:X,align:this.textAlign,maxWidth:q})}},f.prototype.measureText=function(L){if(typeof L!="string")throw Pa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,J=this.pdf.internal.scaleFactor,q=B.internal.getFontSize(),X=B.getStringUnitWidth(L)*q/B.internal.scaleFactor;return new function(Z){var pe=(Z=Z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this}({width:X*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(L,B){if(isNaN(L)||isNaN(B))throw Pa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(L,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(L){if(isNaN(L))throw Pa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},f.prototype.translate=function(L,B){if(isNaN(L)||isNaN(B))throw Pa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,L,B);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(L,B,J,q,X,Z){if(isNaN(L)||isNaN(B)||isNaN(J)||isNaN(q)||isNaN(X)||isNaN(Z))throw Pa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new c(L,B,J,q,X,Z);this.ctx.transform=this.ctx.transform.multiply(pe)},f.prototype.setTransform=function(L,B,J,q,X,Z){L=isNaN(L)?1:L,B=isNaN(B)?0:B,J=isNaN(J)?0:J,q=isNaN(q)?1:q,X=isNaN(X)?0:X,Z=isNaN(Z)?0:Z,this.ctx.transform=new c(L,B,J,q,X,Z)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,B,J,q,X,Z,pe,te,ve){var Ce=this.pdf.getImageProperties(L),he=1,qe=1,ye=1,ce=1;q!==void 0&&te!==void 0&&(ye=te/q,ce=ve/X,he=Ce.width/q*te/q,qe=Ce.height/X*ve/X),Z===void 0&&(Z=B,pe=J,B=0,J=0),q!==void 0&&te===void 0&&(te=q,ve=X),q===void 0&&te===void 0&&(te=Ce.width,ve=Ce.height);for(var Ft,qt=this.ctx.transform.decompose(),It=$(qt.rotate.shx),et=new c,Ze=(et=(et=(et=et.multiply(qt.translate)).multiply(qt.skew)).multiply(qt.scale)).applyToRectangle(new l(Z-B*ye,pe-J*ce,q*he,X*qe)),Pt=v.call(this,Ze),ue=[],rt=0;rt<Pt.length;rt+=1)ue.indexOf(Pt[rt])===-1&&ue.push(Pt[rt]);if(w(ue),this.autoPaging)for(var Ee=ue[0],Ke=ue[ue.length-1],Ge=Ee;Ge<Ke+1;Ge++){this.pdf.setPage(Ge);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Ge===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=Ge===1?0:kt+(Ge-2)*yt;if(this.ctx.clip_path.length!==0){var We=this.path;Ft=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Ft,this.posX+this.margin[3],-je+ot+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=We}var Ot=JSON.parse(JSON.stringify(Ze));Ot=b([Ot],this.posX+this.margin[3],-je+ot+this.ctx.prevPageLastElemOffset)[0];var Ve=(Ge>Ee||Ge<Ke)&&p.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,yt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Ot.x,Ot.y,Ot.w,Ot.h,null,null,It),Ve&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,It)};var v=function(L,B,J){var q=[];B=B||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var X=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":q.push(Math.floor((L.y+X)/J)+1);break;case"arc":q.push(Math.floor((L.y+X-L.radius)/J)+1),q.push(Math.floor((L.y+X+L.radius)/J)+1);break;case"qct":var Z=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);q.push(Math.floor((Z.y+X)/J)+1),q.push(Math.floor((Z.y+Z.h+X)/J)+1);break;case"bct":var pe=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);q.push(Math.floor((pe.y+X)/J)+1),q.push(Math.floor((pe.y+pe.h+X)/J)+1);break;case"rect":q.push(Math.floor((L.y+X)/J)+1),q.push(Math.floor((L.y+L.h+X)/J)+1)}for(var te=0;te<q.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<q[te];)x.call(this);return q},x=function(){var L=this.fillStyle,B=this.strokeStyle,J=this.font,q=this.lineCap,X=this.lineWidth,Z=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=B,this.font=J,this.lineCap=q,this.lineWidth=X,this.lineJoin=Z},b=function(L,B,J){for(var q=0;q<L.length;q++)switch(L[q].type){case"bct":L[q].x2+=B,L[q].y2+=J;case"qct":L[q].x1+=B,L[q].y1+=J;default:L[q].x+=B,L[q].y+=J}return L},w=function(L){return L.sort(function(B,J){return B-J})},_=function(L,B){for(var J,q,X=this.fillStyle,Z=this.strokeStyle,pe=this.lineCap,te=this.lineWidth,ve=Math.abs(te*this.ctx.transform.scaleX),Ce=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ye=[],ce=0;ce<qe.length;ce++)if(qe[ce].x!==void 0)for(var Ft=v.call(this,qe[ce]),qt=0;qt<Ft.length;qt+=1)ye.indexOf(Ft[qt])===-1&&ye.push(Ft[qt]);for(var It=0;It<ye.length;It++)for(;this.pdf.internal.getNumberOfPages()<ye[It];)x.call(this);if(w(ye),this.autoPaging)for(var et=ye[0],Ze=ye[ye.length-1],Pt=et;Pt<Ze+1;Pt++){this.pdf.setPage(Pt),this.fillStyle=X,this.strokeStyle=Z,this.lineCap=pe,this.lineWidth=ve,this.lineJoin=Ce;var ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=Pt===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Pt===1?0:Ee+(Pt-2)*Ke;if(this.ctx.clip_path.length!==0){var bt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(J,this.posX+this.margin[3],-Ge+rt+this.ctx.prevPageLastElemOffset),j.call(this,L,!0),this.path=bt}if(q=JSON.parse(JSON.stringify(he)),this.path=b(q,this.posX+this.margin[3],-Ge+rt+this.ctx.prevPageLastElemOffset),B===!1||Pt===0){var ot=(Pt>et||Pt<Ze)&&p.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ue,Ke,null).clip().discardPath()),j.call(this,L,B),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=ve,j.call(this,L,B),this.lineWidth=te;this.path=he},j=function(L,B){if((L!=="stroke"||B||!g.call(this))&&(L==="stroke"||B||!m.call(this))){for(var J,q,X=[],Z=this.path,pe=0;pe<Z.length;pe++){var te=Z[pe];switch(te.type){case"begin":X.push({begin:!0});break;case"close":X.push({close:!0});break;case"mt":X.push({start:te,deltas:[],abs:[]});break;case"lt":var ve=X.length;if(Z[pe-1]&&!isNaN(Z[pe-1].x)&&(J=[te.x-Z[pe-1].x,te.y-Z[pe-1].y],ve>0)){for(;ve>=0;ve--)if(X[ve-1].close!==!0&&X[ve-1].begin!==!0){X[ve-1].deltas.push(J),X[ve-1].abs.push(te);break}}break;case"bct":J=[te.x1-Z[pe-1].x,te.y1-Z[pe-1].y,te.x2-Z[pe-1].x,te.y2-Z[pe-1].y,te.x-Z[pe-1].x,te.y-Z[pe-1].y],X[X.length-1].deltas.push(J);break;case"qct":var Ce=Z[pe-1].x+2/3*(te.x1-Z[pe-1].x),he=Z[pe-1].y+2/3*(te.y1-Z[pe-1].y),qe=te.x+2/3*(te.x1-te.x),ye=te.y+2/3*(te.y1-te.y),ce=te.x,Ft=te.y;J=[Ce-Z[pe-1].x,he-Z[pe-1].y,qe-Z[pe-1].x,ye-Z[pe-1].y,ce-Z[pe-1].x,Ft-Z[pe-1].y],X[X.length-1].deltas.push(J);break;case"arc":X.push({deltas:[],abs:[],arc:!0}),Array.isArray(X[X.length-1].abs)&&X[X.length-1].abs.push(te)}}q=B?null:L==="stroke"?"stroke":"fill";for(var qt=!1,It=0;It<X.length;It++)if(X[It].arc)for(var et=X[It].abs,Ze=0;Ze<et.length;Ze++){var Pt=et[Ze];Pt.type==="arc"?C.call(this,Pt.x,Pt.y,Pt.radius,Pt.startAngle,Pt.endAngle,Pt.counterclockwise,void 0,B,!qt):T.call(this,Pt.x,Pt.y),qt=!0}else if(X[It].close===!0)this.pdf.internal.out("h"),qt=!1;else if(X[It].begin!==!0){var ue=X[It].start.x,rt=X[It].start.y;M.call(this,X[It].deltas,ue,rt),qt=!0}q&&k.call(this,q),B&&R.call(this)}},A=function(L){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-J;case"top":return L+B-J;case"hanging":return L+B-2*J;case"middle":return L+B/2-J;default:return L}},P=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(B,J){this.colorStops.push([B,J])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(L,B,J,q,X,Z,pe,te,ve){for(var Ce=V.call(this,J,q,X,Z),he=0;he<Ce.length;he++){var qe=Ce[he];he===0&&(ve?E.call(this,qe.x1+L,qe.y1+B):T.call(this,qe.x1+L,qe.y1+B)),z.call(this,L,B,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}te?R.call(this):k.call(this,pe)},k=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(L,B){this.pdf.internal.out(r(L)+" "+n(B)+" m")},I=function(L){var B;switch(L.align){case"right":case"end":B="right";break;case"center":B="center";break;default:B="left"}var J=this.pdf.getTextDimensions(L.text),q=A.call(this,L.y),X=P.call(this,q)-J.h,Z=this.ctx.transform.applyToPoint(new o(L.x,q)),pe=this.ctx.transform.decompose(),te=new c;te=(te=(te=te.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var ve,Ce,he,qe=this.ctx.transform.applyToRectangle(new l(L.x,q,J.w,J.h)),ye=te.applyToRectangle(new l(L.x,X,J.w,J.h)),ce=v.call(this,ye),Ft=[],qt=0;qt<ce.length;qt+=1)Ft.indexOf(ce[qt])===-1&&Ft.push(ce[qt]);if(w(Ft),this.autoPaging)for(var It=Ft[0],et=Ft[Ft.length-1],Ze=It;Ze<et+1;Ze++){this.pdf.setPage(Ze);var Pt=Ze===1?this.posY+this.margin[0]:this.margin[0],ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[2],Ee=rt-this.margin[0],Ke=this.pdf.internal.pageSize.width-this.margin[1],Ge=Ke-this.margin[3],bt=Ze===1?0:ue+(Ze-2)*Ee;if(this.ctx.clip_path.length!==0){var ot=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ve,this.posX+this.margin[3],-1*bt+Pt),j.call(this,"fill",!0),this.path=ot}var kt=b([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-bt+Pt+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*L.scale),he=this.lineWidth,this.lineWidth=he*L.scale);var yt=this.autoPaging!=="text";if(yt||kt.y+kt.h<=rt){if(yt||kt.y>=Pt&&kt.x<=Ke){var je=yt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ke-kt.x)[0],We=b([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-bt+Pt+this.ctx.prevPageLastElemOffset)[0],Ot=yt&&(Ze>It||Ze<et)&&p.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,Ee,null).clip().discardPath()),this.pdf.text(je,We.x,We.y,{angle:L.angle,align:B,renderingMode:L.renderingMode}),Ot&&this.pdf.restoreGraphicsState()}}else kt.y<rt&&(this.ctx.prevPageLastElemOffset+=rt-kt.y);L.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=he)}else L.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*L.scale),he=this.lineWidth,this.lineWidth=he*L.scale),this.pdf.text(L.text,Z.x+this.posX,Z.y+this.posY,{angle:L.angle,align:B,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=he)},T=function(L,B,J,q){J=J||0,q=q||0,this.pdf.internal.out(r(L+J)+" "+n(B+q)+" l")},M=function(L,B,J){return this.pdf.lines(L,B,J,null,null)},z=function(L,B,J,q,X,Z,pe,te){this.pdf.internal.out([t(a(J+L)),t(i(q+B)),t(a(X+L)),t(i(Z+B)),t(a(pe+L)),t(i(te+B)),"c"].join(" "))},V=function(L,B,J,q){for(var X=2*Math.PI,Z=Math.PI/2;B>J;)B-=X;var pe=Math.abs(J-B);pe<X&&q&&(pe=X-pe);for(var te=[],ve=q?-1:1,Ce=B;pe>1e-5;){var he=Ce+ve*Math.min(pe,Z);te.push(W.call(this,L,Ce,he)),pe-=Math.abs(he-Ce),Ce=he}return te},W=function(L,B,J){var q=(J-B)/2,X=L*Math.cos(q),Z=L*Math.sin(q),pe=X,te=-Z,ve=pe*pe+te*te,Ce=ve+pe*X+te*Z,he=4/3*(Math.sqrt(2*ve*Ce)-Ce)/(pe*Z-te*X),qe=pe-he*te,ye=te+he*pe,ce=qe,Ft=-ye,qt=q+B,It=Math.cos(qt),et=Math.sin(qt);return{x1:L*Math.cos(B),y1:L*Math.sin(B),x2:qe*It-ye*et,y2:qe*et+ye*It,x3:ce*It-Ft*et,y3:ce*et+Ft*It,x4:L*Math.cos(J),y4:L*Math.sin(J)}},$=function(L){return 180*L/Math.PI},G=function(L,B,J,q,X,Z){var pe=L+.5*(J-L),te=B+.5*(q-B),ve=X+.5*(J-X),Ce=Z+.5*(q-Z),he=Math.min(L,X,pe,ve),qe=Math.max(L,X,pe,ve),ye=Math.min(B,Z,te,Ce),ce=Math.max(B,Z,te,Ce);return new l(he,ye,qe-he,ce-ye)},me=function(L,B,J,q,X,Z,pe,te){var ve,Ce,he,qe,ye,ce,Ft,qt,It,et,Ze,Pt,ue,rt,Ee=J-L,Ke=q-B,Ge=X-J,bt=Z-q,ot=pe-X,kt=te-Z;for(Ce=0;Ce<41;Ce++)It=(Ft=(he=L+(ve=Ce/40)*Ee)+ve*((ye=J+ve*Ge)-he))+ve*(ye+ve*(X+ve*ot-ye)-Ft),et=(qt=(qe=B+ve*Ke)+ve*((ce=q+ve*bt)-qe))+ve*(ce+ve*(Z+ve*kt-ce)-qt),Ce==0?(Ze=It,Pt=et,ue=It,rt=et):(Ze=Math.min(Ze,It),Pt=Math.min(Pt,et),ue=Math.max(ue,It),rt=Math.max(rt,et));return new l(Math.round(Ze),Math.round(Pt),Math.round(ue-Ze),Math.round(rt-Pt))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,B,J=(L=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:B}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Rr.API),function(e){var t=function(o){var l,c,u,d,f,h,m,g,p,v;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(v=f%85))/85)-(p=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)%85,c.push(h+33,m+33,g+33,p+33,v+33)):c.push(122);return function(x,b){for(var w=b;w>0;w--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,h=String,m="length",g=255,p="charCodeAt",v="slice",x="replace";for(o[v](-2),o=o[v](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[v](o[m]%5||5))[m];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(b,w){for(var _=w;_>0;_--)b.pop()}(u,l[m]),h.fromCharCode.apply(h,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=UO(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Rr.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var p=g.length,v=[],x=String.fromCharCode;for(h=0;h<p;h+=1)v.push(x(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Rr.API),function(e){function t(){return(sn.html2canvas?Promise.resolve(sn.html2canvas):yu(()=>import("./html2canvas.esm-f16e60ff.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(sn.DOMPurify?Promise.resolve(sn.DOMPurify):yu(()=>import("./purify.es-fd086bfc.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Bn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},i=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var g=d[m],p=g.src.find(function(v){return v.format==="truetype"});p&&u.addFont(p.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Rr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return o.convert(h,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Rr.getPageSize=function(l,c,u){if(Bn(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var g,p=0,v=0;if(m.hasOwnProperty(h))p=m[h][1]/f,v=m[h][0]/f;else try{p=u[1],v=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",v>p&&(g=v,v=p,p=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>v&&(g=v,v=p,p=g)}return{width:v,height:p,unit:c,k:f,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(KA):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Rr.API),Rr.API.addJS=function(e){return Nq=e,this.internal.events.subscribe("postPutResources",function(){Lw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Lw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Nq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Lw!==void 0&&jq!==void 0&&this.internal.out("/Names <</JavaScript "+Lw+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Rr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,p={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),p={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Rr.API),Rr.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=Det(e,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,u=i.palette,d=i.depth;a=u&&c===1?function(C){for(var k=C.width,R=C.height,E=C.data,I=C.palette,T=C.depth,M=!1,z=[],V=[],W=void 0,$=!1,G=0,me=0;me<I.length;me++){var de=xz(I[me],4),L=de[0],B=de[1],J=de[2],q=de[3];z.push(L,B,J),q!=null&&(q===0?(G++,V.length<1&&V.push(me)):q<255&&($=!0))}if($||G>1){M=!0,V=void 0;var X=k*R;W=new Uint8Array(X);for(var Z=new DataView(E.buffer),pe=0;pe<X;pe++){var te=XA(Z,pe,T),ve=xz(I[te],4)[3];W[pe]=ve}}else G===0&&(V=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:E,alphaBytes:W,needSMask:M,palette:z,mask:V}}(i):c===2||c===4?function(C){for(var k=C.data,R=C.width,E=C.height,I=C.channels,T=C.depth,M=I===2?"DeviceGray":"DeviceRGB",z=I-1,V=R*E,W=z,$=V*W,G=1*V,me=Math.ceil($*T/8),de=Math.ceil(G*T/8),L=new Uint8Array(me),B=new Uint8Array(de),J=new DataView(k.buffer),q=new DataView(L.buffer),X=new DataView(B.buffer),Z=!1,pe=0;pe<V;pe++){for(var te=pe*I,ve=0;ve<W;ve++)Dq(q,XA(J,te+ve,T),pe*W+ve,T);var Ce=XA(J,te+W,T);Ce<(1<<T)-1&&(Z=!0),Dq(X,Ce,1*pe,T)}return{colorSpace:M,colorsPerPixel:z,sMaskBitsPerComponent:Z?T:void 0,colorBytes:L,alphaBytes:B,needSMask:Z}}(i):function(C){var k=C.data,R=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?function(E){for(var I=E.length,T=new Uint8Array(2*I),M=new DataView(T.buffer,T.byteOffset,T.byteLength),z=0;z<I;z++)M.setUint16(2*z,E[z],!1);return T}(k):k,needSMask:!1}}(i);var f,h,m,g=a,p=g.colorSpace,v=g.colorsPerPixel,x=g.sMaskBitsPerComponent,b=g.colorBytes,w=g.alphaBytes,_=g.needSMask,j=g.palette,A=g.mask,P=null;return n!==Rr.API.image_compression.NONE&&typeof UO=="function"?(P=function(C){var k;switch(C){case Rr.API.image_compression.FAST:k=11;break;case Rr.API.image_compression.MEDIUM:k=13;break;case Rr.API.image_compression.SLOW:k=14;break;default:k=12}return k}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(P," /Colors ").concat(v," /BitsPerComponent ").concat(d," /Columns ").concat(o),e=Eq(b,Math.ceil(o*v*d/8),v,d,n),_&&(m=Eq(w,Math.ceil(o*x/8),1,x,n))):(f=void 0,h=void 0,e=b,_&&(m=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:e,index:t,filter:f,decodeParameters:h,transparency:A,palette:j,sMask:m,predictor:P,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new rtt(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new JA(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Rr.API),yc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},yc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Pa.log("bit decode error:"+r)}},yc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},yc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},yc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},yc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},yc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},yc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},yc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},yc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new yc(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new JA(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Rr.API),Rq.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new Rq(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new JA(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Rr.API),Rr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];i[l++]=d,i[l++]=f,i[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bp=Rr.API,$w=Bp.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,p=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(h=f&&Bn(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||p)/c+h)),g=n;return v},Cq=Bp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Bp.processArabic&&(e=Bp.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:$w.apply(this,arguments).reduce(function(i,o){return i+o},0)},Aq=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},Pq=function(e,t,r){r||(r={});var n,a,i,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,p=e.split(" "),v=$w.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),b=[];p.map(function(_){(_=_.split(/\s*\n/)).length>1?b=b.concat(_.map(function(j,A){return(A&&j.length?`
`:"")+j})):b.push(_[0])}),p=b,c=Cq.apply(this,[x,r])}for(i=0,o=p.length;i<o;i++){var w=0;if(n=p[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),h+m+(g=(a=$w.apply(this,[n,r])).reduce(function(_,j){return _+j},0))>t||w){if(g>t){for(l=Aq.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(_,j){return _+j},0)}else d=[n];f.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(_,j){return(j?x:"")+_.join(" ")}:function(_){return _.join(" ")},f.map(u)},Bp.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Pq.apply(this,[n[l],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var o=function(h){return"0x"+parseInt(h,10).toString(16)},l=e.__fontmetrics__.compress=function(h){var m,g,p,v,x=["{"];for(var b in h){if(m=h[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=o(b).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof m=="number")m<0?(p=o(m).slice(3),v="-"):(p=o(m).slice(2),v=""),p=v+p.slice(0,-1)+a[p.slice(-1)];else{if(Bn(m)!=="object")throw new Error("Don't know what to do with value type "+Bn(m)+".");p=l(m)}x.push(g+p)}return x.push("}"),x.join("")},c=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,p,v,x={},b=1,w=x,_=[],j="",A="",P=h.length-1,C=1;C<P;C+=1)(v=h[C])=="'"?m?(p=m.join(""),m=void 0):m=[]:m?m.push(v):v=="{"?(_.push([w,p]),w={},p=void 0):v=="}"?((g=_.pop())[0][g[1]]=w,p=void 0,w=g[0]):v=="-"?b=-1:p===void 0?n.hasOwnProperty(v)?(j+=n[v],p=parseInt(j,16)*b,b=1,j=""):j+=v:n.hasOwnProperty(v)?(A+=n[v],w[p]=parseInt(A,16)*b,b=1,p=void 0,A=""):A+=v;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,g=f.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode.encoding=p,m.encoding=p.codePages[0])}])}(Rr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(m2(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Rr),Rr.API.addSvgAsImage=function(e,t,r,n,a,i,o,l){if(isNaN(t)||isNaN(r))throw Pa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Pa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(sn.canvg?Promise.resolve(sn.canvg):yu(()=>import("./index.es-4c480b77.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,o,l)})},Rr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Rr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,p){var v,x=!1;for(v=0;v<g.length;v+=1)g[v]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Bn(e)==="object"){for(a in e)if(i=e[a],h(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,p=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?p.push("/"+g+" /"+r[g].value):p.push("/"+g+" "+r[g].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Rr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=i.length;f<h;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(i){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(i).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var p=u();d({data:m,addLength1:!0,objectId:p}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Gp(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Gp(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+Gp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Gp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Gp(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,p=m,v="",x=0,b="",w=g[p].encoding;if(g[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(b=l,p=m,Array.isArray(l)&&(b=l[0]),x=0;x<b.length;x+=1)g[p].metadata.hasOwnProperty("cmap")&&(o=g[p].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),o||b[x].charCodeAt(0)<256&&g[p].metadata.hasOwnProperty("Unicode")?v+=b[x]:v+="";var _="";return parseInt(p.slice(1))<14||w==="WinAnsiEncoding"?_=h(v,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(_=r(v,g[p])),f.isHex=!0,{text:_,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Rr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Rr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var _=function(E){var I=E.charCodeAt(),T=I>>8,M=p[T];return M!==void 0?f[256*M+(255&I)]:T===252||T===253?"AL":x.test(T)?"L":T===8?"R":"N"},j=function(E){for(var I,T=0;T<E.length;T++){if((I=_(E.charAt(T)))==="L")return!1;if(I==="R")return!0}return!1},A=function(E,I,T,M){var z,V,W,$,G=I[M];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(G="AN");break;case"AL":b=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":M<1||M+1>=I.length||(z=T[M-1])!=="EN"&&z!=="AN"||(V=I[M+1])!=="EN"&&V!=="AN"?G="N":b&&(V="AN"),G=V===z?V:"N";break;case"ES":G=(z=M>0?T[M-1]:"B")==="EN"&&M+1<I.length&&I[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&T[M-1]==="EN"){G="EN";break}if(b){G="N";break}for(W=M+1,$=I.length;W<$&&I[W]==="ET";)W++;G=W<$&&I[W]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for($=I.length,W=M+1;W<$&&I[W]==="NSM";)W++;if(W<$){var me=E[M],de=me>=1425&&me<=2303||me===64286;if(z=I[W],de&&(z==="R"||z==="AL")){G="R";break}}}G=M<1||(z=I[M-1])==="B"?"N":T[M-1];break;case"B":b=!1,a=!0,G=w;break;case"S":i=!0,G="N"}return G},P=function(E,I,T){var M=E.split("");return T&&C(M,T,{hiLevel:w}),M.reverse(),I&&I.reverse(),M.join("")},C=function(E,I,T){var M,z,V,W,$,G=-1,me=E.length,de=0,L=[],B=w?m:h,J=[];for(b=!1,a=!1,i=!1,z=0;z<me;z++)J[z]=_(E[z]);for(V=0;V<me;V++){if($=de,L[V]=A(E,J,L,V),M=240&(de=B[$][g[L[V]]]),de&=15,I[V]=W=B[de][5],M>0)if(M===16){for(z=G;z<V;z++)I[z]=1;G=-1}else G=-1;if(B[de][6])G===-1&&(G=V);else if(G>-1){for(z=G;z<V;z++)I[z]=W;G=-1}J[V]==="B"&&(I[V]=0),T.hiLevel|=W}i&&function(q,X,Z){for(var pe=0;pe<Z;pe++)if(q[pe]==="S"){X[pe]=w;for(var te=pe-1;te>=0&&q[te]==="WS";te--)X[te]=w}}(J,I,me)},k=function(E,I,T,M,z){if(!(z.hiLevel<E)){if(E===1&&w===1&&!a)return I.reverse(),void(T&&T.reverse());for(var V,W,$,G,me=I.length,de=0;de<me;){if(M[de]>=E){for($=de+1;$<me&&M[$]>=E;)$++;for(G=de,W=$-1;G<W;G++,W--)V=I[G],I[G]=I[W],I[W]=V,T&&(V=T[G],T[G]=T[W],T[W]=V);de=$}de++}}},R=function(E,I,T){var M=E.split(""),z={hiLevel:w};return T||(T=[]),C(M,T,z),function(V,W,$){if($.hiLevel!==0&&d)for(var G,me=0;me<V.length;me++)W[me]===1&&(G=v.indexOf(V[me]))>=0&&(V[me]=v[G+1])}(M,T,z),k(2,M,I,T,z),k(1,M,I,T,z),M.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,T){if(function(z,V){if(V)for(var W=0;W<z.length;W++)V[W]=W;l===void 0&&(l=j(z)),u===void 0&&(u=j(z))}(E,I),o||!c||u)if(o&&c&&l^u)w=l?1:0,E=P(E,I,T);else if(!o&&c&&u)w=l?1:0,E=R(E,I,T),E=P(E,I);else if(!o||l||c||u){if(o&&!c&&l^u)E=P(E,I),l?(w=0,E=R(E,I,T)):(w=1,E=R(E,I,T),E=P(E,I));else if(o&&l&&!c&&u)w=1,E=R(E,I,T),E=P(E,I);else if(!o&&!c&&l^u){var M=d;l?(w=1,E=R(E,I,T),w=0,d=!1,E=R(E,I,T),d=M):(w=0,E=R(E,I,T),E=P(E,I),w=1,d=!1,E=R(E,I,T),d=M,E=P(E,I))}}else w=0,E=R(E,I,T);else w=l?1:0,E=R(E,I,T);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,c=E.isOutputVisual,l=E.isInputRtl,u=E.isOutputRtl,d=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Rr),Rr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new ph(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new vtt(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ntt(this.contents),this.head=new itt(this),this.name=new utt(this),this.cmap=new hne(this),this.toUnicode={},this.hhea=new ott(this),this.maxp=new dtt(this),this.hmtx=new ftt(this),this.post=new ltt(this),this.os2=new stt(this),this.loca=new gtt(this),this.glyf=new htt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Xc,ph=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),ntt=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,c,u,d,f,h,m,g,p;for(p in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new ph).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),i=16*m,u=a.pos+i,l=null,g=[],r)for(h=r[p],a.writeString(p),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=mne.call(r);r.length%4;)r.push(0);for(i=new ph(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),att={}.hasOwnProperty,Du=function(e,t){for(var r in t)att.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Xc=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var itt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ph).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Lq=function(){function e(t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,v,x,b,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),t.pos+=2,p=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),u=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),d=function(){var _,j;for(j=[],c=_=0;0<=h?_<h:_>h;c=0<=h?++_:--_)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var _,j;for(j=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)j.push(t.readUInt16());return j}(),c=x=0,w=i.length;x<w;c=++x)for(v=i[c],n=b=g=p[c];g<=v?b<=v:b>=v;n=g<=v?++b:--b)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,v,x,b,w,_,j,A,P,C,k,R,E,I,T,M,z,V,W,$,G,me,de,L,B,J,q,X,Z,pe,te,ve,Ce,he;switch(M=new ph,o=Object.keys(t).sort(function(qe,ye){return qe-ye}),r){case"macroman":for(p=0,v=function(){var qe=[];for(g=0;g<256;++g)qe.push(0);return qe}(),b={0:0},i={},z=0,G=o.length;z<G;z++)b[te=t[a=o[z]]]==null&&(b[te]=++p),i[a]={old:t[a],new:b[t[a]]},v[a]=b[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(v),{charMap:i,subtable:M.data,maxGlyphID:p+1};case"unicode":for(I=[],f=[],w=0,b={},n={},x=u=null,V=0,me=o.length;V<me;V++)b[j=t[a=o[V]]]==null&&(b[j]=++w),n[a]={old:j,new:b[j]},l=b[j]-a,x!=null&&l===u||(x&&f.push(x),I.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),I.push(65535),R=2*(k=I.length),C=2*Math.pow(Math.log(k)/Math.LN2,2),h=Math.log(C/2)/Math.LN2,P=2*k-C,c=[],A=[],m=[],g=W=0,de=I.length;W<de;g=++W){if(E=I[g],d=f[g],E===65535){c.push(0),A.push(0);break}if(E-(T=n[E].new)>=32768)for(c.push(0),A.push(2*(m.length+k-g)),a=$=E;E<=d?$<=d:$>=d;a=E<=d?++$:--$)m.push(n[a].new);else c.push(T-E),A.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*k+2*m.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(C),M.writeUInt16(h),M.writeUInt16(P),Z=0,L=f.length;Z<L;Z++)a=f[Z],M.writeUInt16(a);for(M.writeUInt16(0),pe=0,B=I.length;pe<B;pe++)a=I[pe],M.writeUInt16(a);for(ve=0,J=c.length;ve<J;ve++)l=c[ve],M.writeUInt16(l);for(Ce=0,q=A.length;Ce<q;Ce++)_=A[Ce],M.writeUInt16(_);for(he=0,X=m.length;he<X;he++)p=m[he],M.writeUInt16(p);return{charMap:n,subtable:M.data,maxGlyphID:w+1}}},e}(),hne=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new Lq(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=Lq.encode(t,r),(a=new ph).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),ott=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),stt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),ltt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(t.readUInt32());return c}.call(this)}},e}(),ctt=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},utt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,o,l,c,u,d,f,h;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=d=0,f=n.length;d<f;i=++d)a=n[i],t.pos=a.offset,u=t.readString(a.length),o=new ctt(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),dtt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),ftt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,o,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)i=f[u],h.push(i.advance);return h}.call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),mne=[].slice,htt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,o,l,c,u,d,f;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new ph(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new ptt(l,u,f,c,d):new mtt(l,o,u,f,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,o,l,c;for(o=[],i=[],l=0,c=r.length;l<c;l++)a=t[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),mtt=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ptt=function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new ph(mne.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),gtt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Du(e,Xc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),vtt=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,c,u,d,f,h,m,g,p,v,x;for(a in n=hne.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},x=n.charMap)m[(c=x[a]).old]=c.new;for(g in h=n.maxGlyphID,o)g in m||(m[g]=h++);return d=function(b){var w,_;for(w in _={},b)_[b[w]]=w;return _}(m),f=Object.keys(d).sort(function(b,w){return b-w}),p=function(){var b,w,_;for(_=[],b=0,w=f.length;b<w;b++)l=f[b],_.push(d[l]);return _}(),i=this.font.glyf.encode(o,p,m),u=this.font.loca.encode(i.offsets,p),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();Rr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const ytt=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Ket,AcroFormAppearance:Pr,AcroFormButton:Zi,AcroFormCheckBox:Bx,AcroFormChoiceField:Pm,AcroFormComboBox:km,AcroFormEditBox:$x,AcroFormListBox:Em,AcroFormPasswordField:zx,AcroFormPushButton:Fx,AcroFormRadioButton:Om,AcroFormTextField:nh,GState:pb,ShadingPattern:Cf,TilingPattern:xm,default:Rr,jsPDF:Rr},Symbol.toStringTag,{value:"Module"}));function pne(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-i),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var $q={},Ig=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:$q=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return $q||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),nT=function(e,t){return nT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},nT(e,t)};function gne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vne=function(e){gne(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function xtt(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function btt(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function M_(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function yne(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=xne(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function xne(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function nC(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function bne(e,t){var r=nC(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function wtt(e,t,r,n,a){var i={},o=1.3333333333333333,l=QA(t,function(w){return a.getComputedStyle(w).backgroundColor});l!=null&&(i.fillColor=l);var c=QA(t,function(w){return a.getComputedStyle(w).color});c!=null&&(i.textColor=c);var u=_tt(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=o*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var g=QA(t,function(w){return a.getComputedStyle(w)[d]});g!=null&&(i.lineColor=g);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(i.fontSize=v/o);var x=Stt(n);x&&(i.fontStyle=x);var b=(n.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(i.font=b),i}function Stt(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function QA(e,t){var r=wne(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function wne(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:wne(e.parentElement,t):r}function _tt(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),o=nC(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function Sne(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],p=(o=(i=g?.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=jtt(c,u,r,g,n,a);v&&(p==="thead"?d.push(v):p==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function jtt(e,t,r,n,a,i){for(var o=new vne(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=wtt(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Ntt(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function Ntt(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Ctt(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function wd(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function OD(e,t){var r=new Ig(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Ctt(a,n,t);var i=wd({},a,n,t),o;typeof window<"u"&&(o=window);var l=Att(a,n,t),c=Ptt(a,n,t),u=Ett(r,i),d=Ott(r,i,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function Att(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=wd({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=wd({},m[0],m[1],m[2])}},i=0,o=Object.keys(n);i<o.length;i++){var l=o[i];a(l)}return n}function Ptt(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var l=o[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function Ett(e,t){var r,n,a,i,o,l,c,u,d,f,h,m,g=nC(t.margin,40/e.scaleFactor()),p=(r=ktt(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var x;t.showHead===!0?x="everyPage":t.showHead===!1?x="never":x=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,w=t.theme||(b?"plain":"striped"),_=!!t.horizontalPageBreak,j=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:w,startY:p,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:x,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:_,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function ktt(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&r?.finalY!=null?r.finalY+20/n:null}function Ott(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=Sne(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Ttt(n,a,i);return{columns:c,head:n,body:a,foot:i}}function Ttt(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(o=l?.colSpan||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var R_=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),_ne=function(e){gne(t,e);function t(r,n,a,i,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=i,c.column=o,c.section=i.section,c}return t}(R_),jne=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new _ne(t,this,n,a,i,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new R_(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new R_(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),TD=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof vne&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),ID=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=nC(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Nne=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function Itt(e,t){Dtt(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=aT(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=aT(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Rtt(t),Ltt(t,e),Mtt(t)}function Dtt(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=bne(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=M_(u.text,u.styles,e)+f;var h=M_(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function aT(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=aT(h,t,r))}return t}function Mtt(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:i}}}}}function Rtt(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function Ltt(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Fq(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=Fq(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function Fq(e,t,r,n,a){return e.map(function(i){return $tt(i,t,r,n,a)})}function $tt(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=M_(e,r,n))return e;for(;t<M_(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function DD(e,t){var r=new Ig(e),n=Ftt(t,r.scaleFactor()),a=new jne(t,n);return Itt(r,a),r.applyStyles(r.userStyles),a}function Ftt(e,t){var r=e.content,n=ztt(r.columns);if(r.head.length===0){var a=Bq(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=Bq(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:ZA("head",r.head,n,o,i,t),body:ZA("body",r.body,n,o,i,t),foot:ZA("foot",r.foot,n,o,i,t)}}function ZA(e,t,r,n,a,i){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,p=r;g<p.length;g++){var v=p[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var x=void 0;Array.isArray(c)?x=c[v.index-h-d]:x=c[v.dataKey];var b={};typeof x=="object"&&!Array.isArray(x)&&(b=x?.styles||{});var w=qtt(e,v,u,a,n,i,b),_=new ID(x,w,e);f[v.dataKey]=_,f[v.index]=_,m=_.colSpan-1,o[v.index]={left:_.rowSpan-1,times:m}}else m--,h++;else o[v.index].left--,m=o[v.index].times,d++}return new TD(c,u,e,f)});return l}function Bq(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Btt(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Btt(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function ztt(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Nne(a,t,r)})}function qtt(e,t,r,n,a,i,o){var l=btt(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=wd({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?wd({},l.alternateRow,a.alternateRowStyles):{},m=xtt(i),g=wd({},m,u,h,f);return wd(g,o)}function Utt(e,t,r){var n;r===void 0&&(r={});var a=bne(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r?.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function Wtt(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Utt(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function MD(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new Ig(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Ane(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=wd({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Vtt(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return zd(d,t,h,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;L_(d,t,h,g,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return zd(d,t,h,i,t.columns)})),yne(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function Vtt(e,t,r,n){var a=Wtt(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?qx(e,t,r,n,u.columns,!0):zq(e,t,n,u.columns),Htt(e,t,r,n,u.columns),eP(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?qx(e,t,r,n,d,!0):zq(e,t,n,d),u=qq(e,t,o+1,n,d),eP(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),qx(e,t,r,n,h.columns,!0),qq(e,t,o+1,n,h.columns,f),eP(e,t,n,h.columns)}),o=u};o<t.body.length-1;)c()}function zq(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return zd(e,t,i,r,n)})}function Htt(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;L_(e,t,i,l,r,n,a)})}function qq(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=Cne(e,t,d,n);c.canEntireRowFit(f,a)&&(zd(e,t,c,n,a),l=r+u)}),l}function eP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return zd(e,t,i,r,n)})}function Gtt(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function Ktt(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new ID(u.raw,u.styles,u.section);d=wd(d,u),d.text=[];var f=Gtt(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var g=new TD(e.raw,-1,e.section,a,!0);g.height=i;for(var p=0,v=r.columns;p<v.length;p++){var c=v[p],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function Ytt(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function L_(e,t,r,n,a,i,o){var l=Cne(e,t,n,i);if(r.canEntireRowFit(l,o))zd(e,t,r,i,o);else if(Ytt(e,r,l,t)){var c=Ktt(r,l,t,e);zd(e,t,r,i,o),qx(e,t,a,i,o),L_(e,t,c,n,a,i,o)}else qx(e,t,a,i,o),L_(e,t,r,n,a,i,o)}function zd(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var l=o[i],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}Xtt(e,c,n);var d=c.getTextPos();pne(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Xtt(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=xne(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Jtt(e,t,r,n.lineWidth))}function Jtt(e,t,r,n){var a,i,o,l;n.top&&(a=r.x,i=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,o,l)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,o,l)),n.left&&(a=r.x,i=r.y,o=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,o,l)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function Cne(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function qx(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return zd(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;yne(e,t,r,n),Ane(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return zd(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function Ane(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Pne(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=OD(this,n),i=DD(this,a);return MD(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){pne(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Ig.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Ig.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Ig(this),i=Sne(a,t,window,r,!1),o=i.head,l=i.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var tP;function Uq(e,t){var r=OD(e,t),n=DD(e,r);MD(e,n)}function Qtt(e,t){var r=OD(e,t);return DD(e,r)}function Ztt(e,t){MD(e,t)}try{if(typeof window<"u"&&window){var Wq=window,Vq=Wq.jsPDF||((tP=Wq.jspdf)===null||tP===void 0?void 0:tP.jsPDF);Vq&&Pne(Vq)}}catch(e){console.error("Could not apply autoTable plugin",e)}const ert=Object.freeze(Object.defineProperty({__proto__:null,Cell:ID,CellHookData:_ne,Column:Nne,HookData:R_,Row:TD,Table:jne,__createTable:Qtt,__drawTable:Ztt,applyPlugin:Pne,autoTable:Uq,default:Uq},Symbol.toStringTag,{value:"Module"})),trt={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.08,delayChildren:.1}}},ls={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function Fw({icon:e,label:t,value:r,delta:n,positive:a=!0,color:i="brand"}){return s.jsxs(ur.div,{variants:ls,className:"fx-card border-0 ring-0 outline-none shadow-none",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[s.jsx(e,{className:`w-4 h-4 text-${i}`}),s.jsx("span",{children:t})]}),n!=null&&s.jsxs("div",{className:`text-xs font-bold ${a?"text-success":"text-danger"}`,children:[a?"+":"",n]})]}),s.jsx("div",{className:"text-3xl font-bold text-text-primary tabular-nums",children:r})]})}function rrt(){const{toast:e}=ii(),{userProfile:t}=io(),[r,n]=yle(),[a,i]=y.useState(r.get("tab")||"visao-geral"),[o,l]=y.useState(!1),[c,u]=y.useState(()=>{const ee=new Date;return new Date(ee.getFullYear(),ee.getMonth(),1).toISOString().slice(0,10)}),[d,f]=y.useState(()=>new Date().toISOString().slice(0,10)),[h,m]=y.useState(null),[g,p]=y.useState(0),[v,x]=y.useState(0),[b,w]=y.useState([]),[_,j]=y.useState([]),[A,P]=y.useState([]),[C,k]=y.useState([]),[R,E]=y.useState([]),[I,T]=y.useState(0),[M,z]=y.useState(0),[V,W]=y.useState(!1),[$,G]=y.useState(!1),[me,de]=y.useState(null),[L,B]=y.useState([]),[J,q]=y.useState(!1),[X,Z]=y.useState(!1),[pe,te]=y.useState(!1),[ve,Ce]=y.useState(null),[he,qe]=y.useState([]),[ye,ce]=y.useState([]);y.useState({open:!1,tipo:"suprimento",valor:"",observacao:"",loading:!1});const[Ft,qt]=y.useState(!1),[It,et]=y.useState(!1),[Ze,Pt]=y.useState(null),[ue,rt]=y.useState([]),[Ee,Ke]=y.useState(""),[Ge,bt]=y.useState("all"),[ot,kt]=y.useState("all"),[yt,je]=y.useState([]),[We,Ot]=y.useState(""),[Ve,nt]=y.useState("all"),[Rt,Lt]=y.useState("all"),[Tt,ir]=y.useState(!1),[fr,ia]=y.useState(null),[fn,Or]=y.useState([]),[yr,Er]=y.useState(!1),[Dr,wa]=y.useState([]);y.useState("");const or=ee=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(ee||0)),dr=ee=>Number(ee||0).toFixed(2),Vn=async(ee,Ie,tt,Qt)=>{try{const{default:it}=await yu(()=>Promise.resolve().then(()=>ytt),void 0);await yu(()=>Promise.resolve().then(()=>ert),void 0);const lt=new it("p","mm","a4"),tr=lt.internal.pageSize.getWidth();if(lt.setFontSize(20),lt.setTextColor(245,158,11),lt.text(ee,14,20),lt.setDrawColor(245,158,11),lt.setLineWidth(.5),lt.line(14,23,tr-14,23),lt.setFontSize(10),lt.setTextColor(100,100,100),lt.text(`Perodo: ${c||"N/A"} at ${d||"N/A"}`,14,30),lt.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,14,35),typeof lt.autoTable=="function"){lt.autoTable({head:[Ie],body:tt,startY:42,theme:"striped",headStyles:{fillColor:[245,158,11],textColor:[255,255,255],fontStyle:"bold",fontSize:11},bodyStyles:{fontSize:10,textColor:[50,50,50]},alternateRowStyles:{fillColor:[249,249,249]},margin:{top:42,left:14,right:14}});const mr=lt.lastAutoTable.finalY||50;lt.setFontSize(8),lt.setTextColor(150,150,150),lt.text("Relatrio gerado por Fluxo7Arena - Sistema de Gesto de Quadras Esportivas",tr/2,mr+15,{align:"center"})}else{let mr=45;lt.setFontSize(11),lt.setTextColor(0,0,0),Ie.forEach((er,Zt)=>{const kr=14+Zt*60;lt.text(er,kr,mr)}),mr+=7,lt.setFontSize(10),tt.forEach(er=>{er.forEach((Zt,kr)=>{const ie=14+kr*60;lt.text(String(Zt),ie,mr)}),mr+=6})}lt.save(`${Qt}_${Hr(new Date,"yyyy-MM-dd")}.pdf`),e({title:"PDF baixado com sucesso!",description:"O arquivo foi salvo na sua pasta de downloads"})}catch(it){console.error("Erro ao gerar PDF:",it),e({title:"Erro ao gerar PDF",description:it.message,variant:"destructive"})}},qa=({cx:ee,cy:Ie,midAngle:tt,outerRadius:Qt,percent:it})=>{const lt=Math.PI/180,tr=(Qt||0)+12,mr=ee+tr*Math.cos(-tt*lt),er=Ie+tr*Math.sin(-tt*lt);return s.jsx("text",{x:mr,y:er,fill:"#fff",textAnchor:mr>ee?"start":"end",dominantBaseline:"central",style:{pointerEvents:"none",fontSize:15,fontWeight:700},children:`${Math.round((it||0)*100)}%`})},la=ee=>{const Ie=Yt!=null&&Yt!==ee;return{transition:"opacity 320ms ease-in-out, filter 320ms ease-in-out",opacity:Ie?.25:1,filter:Ie?"grayscale(15%)":"none",cursor:"pointer"}};y.useEffect(()=>{(async()=>{if(!Tt||!fr||fr.origem!=="Comanda"||!fr.comanda_id){Or([]),wa([]);return}try{Er(!0);const Ie=t?.codigo_empresa;let tt=Pe.from("comanda_itens").select("descricao, quantidade, preco_unitario").eq("comanda_id",fr.comanda_id);Ie&&(tt=tt.eq("codigo_empresa",Ie));const{data:Qt}=await tt;Or(Qt||[]);let it=Pe.from("pagamentos").select("id, valor, metodo, status, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").eq("comanda_id",fr.comanda_id);Ie&&(it=it.eq("codigo_empresa",Ie));const{data:lt}=await it;wa(lt||[])}catch(Ie){console.warn("[Financeiro][RecebimentoModal] Falha ao carregar itens da comanda:",Ie?.message),Or([]),wa([])}finally{Er(!1)}})()},[Tt,fr,t?.codigo_empresa]);const _e=async()=>{try{l(!0);const ee=mt(c)||void 0,Ie=at(d)||void 0,tt=t?.codigo_empresa;console.debug("[Financeiro][VisaoGeral] Carregando com perodo:",{fromISO:ee,toISO:Ie,codigo:tt});const Qt=await Yl({from:ee,to:Ie}).catch(()=>null);m(Qt||{totalPorFinalizadora:{},totalEntradas:0,totalVendasBrutas:0,totalDescontos:0,totalVendasLiquidas:0}),console.debug("[Financeiro][VisaoGeral] Resumo calculado:",Qt);try{let it=Pe.from("pagamentos").select("valor, status").eq("codigo_empresa",tt);ee&&(it=it.gte("recebido_em",ee)),Ie&&(it=it.lte("recebido_em",Ie));const{data:lt}=await it,tr=(lt||[]).reduce((kr,ie)=>{const ae=ie.status||"Pago";return ae==="Cancelado"||ae==="Estornado"?kr:kr+Number(ie.valor||0)},0);p(tr);let mr=Pe.from("v_agendamentos_detalhado").select("valor_pago").eq("codigo_empresa",tt).eq("status_pagamento","Pago");ee&&(mr=mr.gte("inicio",ee)),Ie&&(mr=mr.lte("inicio",Ie));const{data:er}=await mr,Zt=(er||[]).reduce((kr,ie)=>kr+Number(ie.valor_pago||0),0);x(Zt),console.debug("[Financeiro][VisaoGeral] Receitas por origem:",{totalComandas:tr,totalAg:Zt})}catch(it){console.warn("[Financeiro][VisaoGeral] Falha ao calcular KPIs por origem:",it?.message),p(0),x(0)}try{let it=Pe.from("pagamentos").select("valor, status, origem").eq("codigo_empresa",tt).eq("origem","xml");ee&&(it=it.gte("recebido_em",ee)),Ie&&(it=it.lte("recebido_em",Ie));const{data:lt}=await it,tr=(lt||[]).reduce((er,Zt)=>["Cancelado","Estornado"].includes(Zt.status)?er:er+Number(Zt.valor||0),0);T(tr);const{count:mr}=await Pe.from("produtos").select("id",{count:"exact",head:!0}).eq("codigo_empresa",tt).or("importado_via_xml.is.true,categoria.ilike.Importados").gte("criado_em",ee).lte("criado_em",Ie);z(mr||0)}catch(it){console.warn("[Financeiro][VisaoGeral] Falha KPIs XML:",it?.message),T(0),z(0)}if(tt){let it=Pe.from("comandas").select("id").eq("status","closed");tt&&(it=it.eq("codigo_empresa",tt)),ee&&(it=it.gte("fechado_em",ee)),Ie&&(it=it.lte("fechado_em",Ie));const{data:lt,error:tr}=await it;if(tr)throw tr;const mr=(lt||[]).map(ie=>ie.id);console.debug("[Financeiro][VisaoGeral] Comandas fechadas:",mr.length);let er=[];if(mr.length>0){let ie=Pe.from("comanda_itens").select("produto_id, quantidade, preco_unitario, produtos!comanda_itens_produto_id_fkey(nome)").in("comanda_id",mr);tt&&(ie=ie.eq("codigo_empresa",tt));const{data:ae}=await ie;er=ae||[]}const Zt={};(er||[]).forEach(ie=>{const ae=ie.produtos?.nome||"Produto sem nome",Re=Number(ie.quantidade||0)*Number(ie.preco_unitario||0);Zt[ae]=(Zt[ae]||0)+Re});const kr=Object.entries(Zt).map(([ie,ae])=>({nome:ie,valor:ae})).sort((ie,ae)=>ae.valor-ie.valor);P(kr),w(kr.slice(0,5)),console.debug("[Financeiro][VisaoGeral] Produtos agregados:",{total:kr.length,top5:kr.slice(0,5)})}if(tt)try{let it=Pe.from("pagamentos").select("comanda_id, valor, status").eq("codigo_empresa",tt).neq("status","Cancelado").neq("status","Estornado");ee&&(it=it.gte("recebido_em",ee)),Ie&&(it=it.lte("recebido_em",Ie));const{data:lt}=await it;console.debug("[Financeiro][VisaoGeral] Pagamentos carregados:",(lt||[]).length);const tr=Array.from(new Set((lt||[]).map(Re=>Re.comanda_id).filter(Boolean)));let mr=[];if(tr.length>0){let Re=Pe.from("comanda_clientes").select("comanda_id, cliente_id, nome_livre").in("comanda_id",tr).eq("codigo_empresa",tt);const{data:Le}=await Re;mr=Le||[]}console.debug("[Financeiro][VisaoGeral] Vinculos comanda_clientes:",mr.length);const er=Array.from(new Set(mr.map(Re=>Re.cliente_id).filter(Boolean))),Zt={};if(er.length>0){const{data:Re}=await Pe.from("clientes").select("id, nome").in("id",er).eq("codigo_empresa",tt);(Re||[]).forEach(Le=>{Zt[Le.id]=Le.nome})}const kr={};mr.forEach(Re=>{const Le=Re.nome_livre||Zt[Re.cliente_id]||`Cliente ${Re.cliente_id||""}`;kr[Re.comanda_id]||(kr[Re.comanda_id]=new Set),Le&&kr[Re.comanda_id].add(Le)});const ie={};(lt||[]).forEach(Re=>{const Le=Array.from(kr[Re.comanda_id]||[]),_t=Number(Re.valor||0);if(Le.length===0){const H="Sem cliente";ie[H]||(ie[H]={id:null,nome:H,valor:0}),ie[H].valor+=_t}else Le.forEach(H=>{ie[H]||(ie[H]={id:null,nome:H,valor:0}),ie[H].valor+=_t})});try{const Re=new Map(Object.values(Zt).map(($e,He)=>[Object.keys(Zt)[He],$e]));let Le=Pe.from("v_agendamento_participantes").select("agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text");tt&&(Le=Le.eq("codigo_empresa",tt));let{data:_t}=await Le;_t=_t||[];const H=Array.from(new Set(_t.map($e=>$e.agendamento_id).filter(Boolean)));let U=new Set;if(H.length>0){let $e=Pe.from("agendamentos").select("id, inicio").in("id",H);tt&&($e=$e.eq("codigo_empresa",tt));const{data:He}=await $e,jt=ee?new Date(ee).getTime():null,Kt=Ie?new Date(Ie).getTime():null;(He||[]).forEach(Qe=>{const gt=Qe?.inicio?new Date(Qe.inicio).getTime():null;gt!=null&&(jt==null||gt>=jt)&&(Kt==null||gt<=Kt)&&U.add(Qe.id)})}const le=_t.filter($e=>U.has($e.agendamento_id));console.debug("[Financeiro][Agendamentos] participantes no perodo (by agendamento.inicio):",le.length);const Oe=Array.from(new Set((le||[]).map($e=>$e.cliente_id).filter(Boolean).map(String))).filter($e=>!Re.has($e));if(Oe.length>0){const{data:$e}=await Pe.from("clientes").select("id,nome").in("id",Oe);($e||[]).forEach(He=>Re.set(String(He.id),He.nome))}(le||[]).forEach($e=>{const He=String($e.status_pagamento||$e.status_pagamento_text||"pago").toLowerCase();if(["cancelado","estornado"].includes(He))return;const jt=$e.cliente_id,Kt=jt?Re.get(String(jt))||`Cliente ${jt}`:null;if(!Kt)return;const Qe=Number($e.valor_cota||0);ie[Kt]||(ie[Kt]={id:jt||null,nome:Kt,valor:0}),ie[Kt].valor+=Qe})}catch{}const ae=Object.values(ie).sort((Re,Le)=>Le.valor-Re.valor);k(ae),j(ae.slice(0,5)),console.debug("[Financeiro][VisaoGeral] Clientes agregados:",{total:ae.length,top5:ae.slice(0,5)})}catch(it){console.error("Erro ao carregar top clientes:",it),j([]),k([])}if(tt&&ee&&Ie)try{let it=Pe.from("pagamentos").select("recebido_em, valor, status").eq("codigo_empresa",tt).gte("recebido_em",ee).lte("recebido_em",Ie).order("recebido_em",{ascending:!0});const{data:lt}=await it;let tr=Pe.from("v_agendamentos_detalhado").select("inicio, valor_pago, status_pagamento").eq("codigo_empresa",tt).eq("status_pagamento","Pago").gte("inicio",ee).lte("inicio",Ie).order("inicio",{ascending:!0});const{data:mr}=await tr,er={};(lt||[]).forEach(kr=>{if(["Cancelado","Estornado"].includes(kr.status))return;const ie=new Date(kr.recebido_em).toLocaleDateString("pt-BR");er[ie]=(er[ie]||0)+Number(kr.valor||0)}),(mr||[]).forEach(kr=>{const ie=new Date(kr.inicio).toLocaleDateString("pt-BR");er[ie]=(er[ie]||0)+Number(kr.valor_pago||0)});const Zt=Object.entries(er).map(([kr,ie])=>({data:kr,valor:ie})).sort((kr,ie)=>{const[ae,Re,Le]=kr.data.split("/").map(Number),[_t,H,U]=ie.data.split("/").map(Number);return new Date(Le,Re-1,ae).getTime()-new Date(U,H-1,_t).getTime()});E(Zt),console.debug("[Financeiro][VisaoGeral] Evoluo diria:",Zt.length,"dias")}catch(it){console.warn("[Financeiro][VisaoGeral] Falha ao calcular evoluo diria:",it?.message),E([])}else E([])}catch(ee){e({title:"Falha ao carregar viso geral",description:ee?.message||"Tente novamente",variant:"destructive"})}finally{l(!1)}},wt=async()=>{try{const ee=t?.codigo_empresa,Ie=await If({codigoEmpresa:ee});if(te(!!Ie),Ie){const[Qt,it]=await Promise.all([tb({codigoEmpresa:ee}),Am({caixaSessaoId:Ie.id,codigoEmpresa:ee})]);Ce(Qt||null),qe(it||[])}else Ce(null),qe([]);const tt=await yee({limit:50,codigoEmpresa:ee});ce(tt||[])}catch(ee){e({title:"Falha ao carregar caixa",description:ee?.message,variant:"destructive"})}},dt=async()=>{try{l(!0);const ee=t?.codigo_empresa,Ie=mt(c)||void 0,tt=at(d)||void 0;let Qt=Pe.from("pagamentos").select("id, comanda_id, valor, status, metodo, recebido_em, origem, xml_chave, finalizadoras!pagamentos_finalizadora_id_fkey(nome)").eq("codigo_empresa",ee).order("recebido_em",{ascending:!1});Ie&&(Qt=Qt.gte("recebido_em",Ie)),tt&&(Qt=Qt.lte("recebido_em",tt));const{data:it}=await Qt;let lt=new Map,tr=new Map;try{const ie=Array.from(new Set((it||[]).map(ae=>ae.comanda_id).filter(Boolean)));if(ie.length>0){const{data:ae}=await Pe.from("comandas").select("id, cliente_id, tipo").in("id",ie).eq("codigo_empresa",ee),Re=Array.from(new Set((ae||[]).map(H=>H.cliente_id).filter(Boolean)));let Le=new Map;if(Re.length>0){const{data:H}=await Pe.from("clientes").select("id, nome").in("id",Re).eq("codigo_empresa",ee);Le=new Map((H||[]).map(U=>[U.id,U.nome]))}for(const H of ae||[]){if(!H)continue;const U=Le.get(H.cliente_id)||null;lt.set(H.id,U),tr.set(H.id,H.tipo||null)}const _t=(ae||[]).filter(H=>!H?.cliente_id).map(H=>H.id);if(_t.length>0)try{const{data:H}=await Pe.from("comanda_clientes").select("comanda_id, cliente_id").in("comanda_id",_t).eq("codigo_empresa",ee),U=Array.from(new Set((H||[]).map(le=>le.cliente_id).filter(Boolean)));if(U.length>0){const{data:le}=await Pe.from("clientes").select("id, nome").in("id",U).eq("codigo_empresa",ee),we=new Map((le||[]).map(Oe=>[Oe.id,Oe.nome]));for(const Oe of H||[]){const $e=we.get(Oe.cliente_id)||null;$e&&!lt.get(Oe.comanda_id)&&lt.set(Oe.comanda_id,$e)}}}catch{console.debug("[Financeiro][Recebimentos] comanda_clientes indisponvel (ok)")}}}catch(ie){console.warn("[Financeiro][Recebimentos] Falha ao buscar clientes de comandas:",ie?.message)}let mr=Pe.from("v_agendamentos_detalhado").select("agendamento_id, agendamento_codigo, inicio, quadra_nome, participante_nome, valor_cota, status_pagamento, finalizadora_nome").eq("codigo_empresa",ee).eq("status_pagamento","Pago").order("inicio",{ascending:!1});Ie&&(mr=mr.gte("inicio",Ie)),tt&&(mr=mr.lte("inicio",tt));const{data:er}=await mr,Zt=(it||[]).map(ie=>({id:ie.id,origem:tr.get(ie.comanda_id||"")==="balcao"?"Balco":"Comanda",comanda_id:ie.comanda_id||null,recebido_em:ie.recebido_em,finalizadoras:ie.finalizadoras,metodo:ie.metodo,valor:ie.valor,status:ie.status,descricao:lt.get(ie.comanda_id||"")||null,fonte:ie.origem||"manual",xml_chave:ie.xml_chave||null})),kr=(er||[]).map((ie,ae)=>({id:`ag-${ie.agendamento_id}-${ae}`,origem:"Agendamento",recebido_em:ie.inicio,finalizadoras:ie.finalizadora_nome?{nome:ie.finalizadora_nome}:null,metodo:ie.finalizadora_nome||null,valor:ie.valor_cota,status:ie.status_pagamento,descricao:`#${ie.agendamento_codigo} - ${ie.participante_nome} (${ie.quadra_nome||""})`,agendamento_codigo:ie.agendamento_codigo,quadra_nome:ie.quadra_nome,participante_nome:ie.participante_nome,fonte:null}));rt([...Zt,...kr])}catch(ee){e({title:"Falha ao carregar recebimentos",description:ee?.message,variant:"destructive"})}finally{l(!1)}},ht=async()=>{try{l(!0);const ee=t?.codigo_empresa,Ie=mt(c)||void 0,tt=at(d)||void 0;let Qt=Pe.from("v_agendamentos_detalhado").select("agendamento_codigo, inicio, quadra_nome, participante_nome, valor_cota, finalizadora_nome, status_pagamento").eq("codigo_empresa",ee).order("inicio",{ascending:!1});Ie&&(Qt=Qt.gte("inicio",Ie)),tt&&(Qt=Qt.lte("inicio",tt));const{data:it}=await Qt;je(it||[])}catch(ee){e({title:"Falha ao carregar agendamentos",description:ee?.message,variant:"destructive"})}finally{l(!1)}};y.useEffect(()=>{n({tab:a})},[a]);const mt=ee=>{if(!ee)return null;if(typeof ee=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(ee)){const[Ie,tt,Qt]=ee.split("-").map(Number);return new Date(Ie,tt-1,Qt,0,0,0,0).toISOString()}return new Date(ee).toISOString()},at=ee=>{if(!ee)return null;if(typeof ee=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(ee)){const[Ie,tt,Qt]=ee.split("-").map(Number);return new Date(Ie,tt-1,Qt,23,59,59,999).toISOString()}return new Date(ee).toISOString()};y.useEffect(()=>{t?.codigo_empresa&&(a==="visao-geral"||a==="relatorios"?_e():a==="caixa"?wt():a==="recebimentos"?dt():a==="agendamentos"&&ht())},[a,c,d,t?.codigo_empresa]);const $t=y.useMemo(()=>{const ee=h?.totalPorFinalizadora||{},Ie=Object.entries(ee).map(([tt,Qt])=>({name:tt,valor:Number(Qt||0)}));return Ie.sort((tt,Qt)=>Qt.valor-tt.valor),Ie},[h]),[ut,Wt]=y.useState(null),[Yt,nr]=y.useState(null),Vr={start:90,end:-270},Cn=(ee,Ie,tt)=>ee+(Ie-ee)*tt,Sn=ee=>ee<.5?4*ee*ee*ee:1-Math.pow(-2*ee+2,3)/2,Fi=ee=>{const Ie=Number(g||0),tt=Number(v||0),Qt=Math.max(1e-4,Ie+tt),it=360*(Ie/Qt);return ee===0?{a:Vr.start,b:Vr.start-it}:{a:Vr.start-it,b:Vr.end}},[ja,da]=y.useState({from:null,to:null,t:1}),oi=Yt??ut;y.useEffect(()=>{if(oi==null)return;const ee=Fi(oi);da(lt=>({from:lt.to||ee,to:ee,t:0}));let Ie;const tt=performance.now(),Qt=380,it=lt=>{const tr=Math.min(1,(lt-tt)/Qt),mr=Sn(tr);da(er=>({...er,t:mr})),tr<1&&(Ie=requestAnimationFrame(it))};return Ie=requestAnimationFrame(it),()=>Ie&&cancelAnimationFrame(Ie)},[oi,g,v]);const Tn=86,Cs=94,so=80,[hn,Io]=y.useState({from:[Tn,Tn],to:[Tn,Tn],t:1});y.useEffect(()=>{const ee=oi===0?[Cs,so]:oi===1?[so,Cs]:[Tn,Tn];Io(lt=>({from:lt.to||ee,to:ee,t:0}));let Ie;const tt=performance.now(),Qt=380,it=lt=>{const tr=Math.min(1,(lt-tt)/Qt),mr=Sn(tr);Io(er=>({...er,t:mr})),tr<1&&(Ie=requestAnimationFrame(it))};return Ie=requestAnimationFrame(it),()=>Ie&&cancelAnimationFrame(Ie)},[oi]);const Bi=({cx:ee,cy:Ie,outerRadius:tt})=>{if(!ja.from||!ja.to)return null;const Qt=Cn(ja.from.a,ja.to.a,ja.t),it=Cn(ja.from.b,ja.to.b,ja.t),lt=oi===0?"#22C55E":"#F59E0B";return s.jsx(Q3,{cx:ee,cy:Ie,innerRadius:0,outerRadius:(tt||0)+4,startAngle:Qt,endAngle:it,fill:lt,fillOpacity:.18,stroke:"transparent"})},Ii=y.useMemo(()=>{let ee=ue;if(Ee){const Ie=Ee.toLowerCase();ee=ee.filter(tt=>(tt.descricao||"").toLowerCase().includes(Ie)||(tt.finalizadoras?.nome||"").toLowerCase().includes(Ie)||String(tt.valor||"").includes(Ie)||(tt.origem||"").toLowerCase().includes(Ie))}return Ge!=="all"&&(ee=ee.filter(Ie=>(Ie.finalizadoras?.nome||Ie.metodo)===Ge)),ot!=="all"&&(ee=ee.filter(Ie=>(Ie.fonte||"manual")===ot)),ee},[ue,Ee,Ge,ot]),mi=y.useMemo(()=>{let ee=yt||[];if(Ve!=="all"&&(ee=ee.filter(Ie=>(Ie.status_pagamento||"").toLowerCase()===Ve.toLowerCase())),Rt!=="all"&&(ee=ee.filter(Ie=>(Ie.finalizadora_nome||"")===Rt)),We){const Ie=We.toLowerCase();ee=ee.filter(tt=>String(tt.agendamento_codigo||"").toLowerCase().includes(Ie)||(tt.participante_nome||"").toLowerCase().includes(Ie)||(tt.quadra_nome||"").toLowerCase().includes(Ie))}return ee},[yt,Ve,Rt,We]);return s.jsx(s.Fragment,{children:s.jsxs(ur.div,{variants:trt,initial:"hidden",animate:"visible",className:"space-y-6",children:[s.jsx(ur.div,{variants:ls,className:"fx-card p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Financeiro"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Gesto completa das finanas da empresa"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[s.jsxs("div",{className:"flex flex-col justify-center flex-1 sm:flex-initial",children:[s.jsx("label",{className:"text-xs text-text-secondary mb-1",children:"Incio"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:"h-9 w-full sm:w-[160px] pl-3 pr-3 flex items-center gap-2 justify-start text-left font-medium bg-black border-warning/40 text-white hover:bg-black/80 hover:border-warning",children:[s.jsx(gu,{className:"h-5 w-5 text-warning flex-shrink-0"}),s.jsx("span",{className:"font-mono tracking-wide text-sm leading-none",children:c?Hr(new Date(c+"T00:00:00"),"dd/MM/yyyy",{locale:rd}):"Selecione"})]})}),s.jsx(ku,{className:"w-auto p-0 bg-black border-warning/40",align:"start",children:s.jsx(_u,{mode:"single",selected:c?new Date(c+"T00:00:00"):void 0,onSelect:ee=>ee&&u(Hr(ee,"yyyy-MM-dd")),initialFocus:!0,classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md border-warning/40"}})})]})]}),s.jsxs("div",{className:"flex flex-col justify-center flex-1 sm:flex-initial",children:[s.jsx("label",{className:"text-xs text-text-secondary mb-1",children:"Fim"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:"h-9 w-full sm:w-[160px] pl-3 pr-3 flex items-center gap-2 justify-start text-left font-medium bg-black border-warning/40 text-white hover:bg-black/80 hover:border-warning",children:[s.jsx(gu,{className:"h-5 w-5 text-warning flex-shrink-0"}),s.jsx("span",{className:"font-mono tracking-wide text-sm leading-none",children:d?Hr(new Date(d+"T00:00:00"),"dd/MM/yyyy",{locale:rd}):"Selecione"})]})}),s.jsx(ku,{className:"w-auto p-0 bg-black border-warning/40",align:"start",children:s.jsx(_u,{mode:"single",selected:d?new Date(d+"T00:00:00"):void 0,onSelect:ee=>ee&&f(Hr(ee,"yyyy-MM-dd")),initialFocus:!0,classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md border-warning/40"}})})]})]})]})]})}),s.jsxs(Ad,{value:a,onValueChange:i,children:[s.jsx("div",{className:"md:hidden mb-4",children:s.jsxs(kn,{value:a,onValueChange:i,children:[s.jsx(An,{className:"w-full h-11 bg-black border-warning/40 text-white",children:s.jsx(On,{placeholder:"Selecione uma aba"})}),s.jsxs(Pn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Ht,{value:"visao-geral",children:"Viso Geral"}),s.jsx(Ht,{value:"caixa",children:"Caixa"}),s.jsx(Ht,{value:"recebimentos",children:"Recebimentos"}),s.jsx(Ht,{value:"agendamentos",children:"Agendamentos"}),s.jsx(Ht,{value:"relatorios",children:"Relatrios"})]})]})}),s.jsxs(ju,{className:"hidden md:grid w-full grid-cols-5",children:[s.jsx(ua,{value:"visao-geral",children:"Viso Geral"}),s.jsx(ua,{value:"caixa",children:"Caixa"}),s.jsx(ua,{value:"recebimentos",children:"Recebimentos"}),s.jsx(ua,{value:"agendamentos",children:"Agendamentos"}),s.jsx(ua,{value:"relatorios",children:"Relatrios"})]}),s.jsxs(to,{value:"visao-geral",className:"space-y-6 mt-6",children:[s.jsxs(ur.div,{variants:ls,className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsx(Fw,{icon:BW,label:"Total Geral",value:or(Number(g||0)+Number(v||0)),color:"brand"}),s.jsx(Fw,{icon:jb,label:"Comandas",value:or(g),color:"success"}),s.jsx(Fw,{icon:gu,label:"Agendamentos",value:or(v),color:"success"}),s.jsx(Fw,{icon:sm,label:"XML (Recebimentos)",value:or(I),color:"success"})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[s.jsx(sm,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Proporo de Receita"})]})}),Number(g||0)+Number(v||0)===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem receitas no perodo."}):s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsx("div",{className:"w-full md:flex-1 h-[280px]",children:s.jsx(o2,{width:"100%",height:"100%",children:s.jsxs(_Be,{children:[s.jsxs(Pu,{data:function(){const ee=Cn(hn.from?.[0]??Tn,hn.to?.[0]??Tn,hn.t),Ie=Cn(hn.from?.[1]??Tn,hn.to?.[1]??Tn,hn.t);return[{name:"Comandas",value:Number(g||0),fill:"#22C55E",outerRadius:ee},{name:"Agendamentos",value:Number(v||0),fill:"#F59E0B",outerRadius:Ie}]}(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:0,stroke:"transparent",label:!1,labelLine:!1,isAnimationActive:!0,animationBegin:50,animationDuration:500,startAngle:Vr.start,endAngle:Vr.end,activeIndex:oi,activeShape:void 0,onMouseEnter:(ee,Ie)=>Wt(Ie),onMouseLeave:()=>Wt(null),onClick:(ee,Ie)=>{nr(tt=>tt===Ie?null:Ie),Wt(Ie)},children:[s.jsx(b0,{fill:"#22C55E",style:la(0)},"c"),s.jsx(b0,{fill:"#F59E0B",style:la(1)},"a")]}),Bi({cx:"50%",cy:"50%",outerRadius:92}),s.jsx(Pu,{data:function(){const ee=Cn(hn.from?.[0]??Tn,hn.to?.[0]??Tn,hn.t),Ie=Cn(hn.from?.[1]??Tn,hn.to?.[1]??Tn,hn.t);return[{name:"Comandas",value:Number(g||0),fill:"transparent",outerRadius:ee},{name:"Agendamentos",value:Number(v||0),fill:"transparent",outerRadius:Ie}]}(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:0,stroke:"transparent",label:qa,labelLine:!1,isAnimationActive:!1,startAngle:Vr.start,endAngle:Vr.end}),s.jsx(dl,{formatter:ee=>or(ee),contentStyle:{background:"rgba(10, 10, 10, 0.95)",border:"1px solid #fbbf24",borderRadius:"8px",padding:"8px 10px",color:"#fff"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"},cursor:{fill:"rgba(251, 191, 36, 0.06)"}})]})})}),s.jsx("div",{className:"w-full md:w-64 space-y-3 md:pr-2",children:[{name:"Comandas",value:Number(g||0),color:"#22C55E"},{name:"Agendamentos",value:Number(v||0),color:"#F59E0B"}].map((ee,Ie)=>s.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-md transition-all duration-200 ${ut===Ie?"bg-white/5":"hover:bg-white/5"} cursor-pointer ${Yt!=null&&Yt!==Ie?"opacity-60":""}`,onMouseEnter:()=>Wt(Ie),onMouseLeave:()=>Wt(null),onClick:()=>nr(tt=>tt===Ie?null:Ie),role:"button",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-3 h-3 rounded-sm",style:{backgroundColor:ee.color}}),s.jsx("span",{className:"text-sm text-text-secondary",children:ee.name})]}),s.jsx("div",{className:`text-sm font-semibold ${Yt!=null&&Yt!==Ie?"opacity-70":""}`,children:or(ee.value)})]},ee.name))})]})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider",children:[s.jsx(sm,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Entradas por Finalizadora"})]})}),$t.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos no perodo."}):s.jsx("div",{className:"h-[280px]",children:s.jsx(o2,{width:"100%",height:"100%",children:s.jsxs(SBe,{data:$t,margin:{top:8,right:8,left:8,bottom:8},children:[s.jsx(aO,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(Gm,{dataKey:"name",stroke:"#aaa"}),s.jsx(Km,{stroke:"#aaa",tickFormatter:ee=>or(ee),width:80}),s.jsx(dl,{formatter:ee=>or(ee),labelFormatter:ee=>`Finalizadora: ${ee}`,contentStyle:{background:"rgba(10, 10, 10, 0.95)",border:"1px solid #fbbf24",borderRadius:"8px",padding:"8px 12px",color:"#fff"},cursor:{fill:"rgba(251, 191, 36, 0.1)"}}),s.jsx(_m,{}),s.jsx(hp,{dataKey:"valor",name:"Valor",fill:"#fbbf24"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(ur.div,{variants:ls,className:"fx-card p-4 border-0 ring-0 outline-none focus-visible:outline-none shadow-none cursor-pointer",onClick:()=>W(!0),children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider mb-3",children:[s.jsx(Hg,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Produtos (por faturamento)"}),A.length>5&&s.jsx(Ae,{variant:"outline",size:"xs",className:"ml-auto h-7 px-2",onClick:()=>W(!0),children:"Ver todos"})]}),b.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados no perodo."}):s.jsx("div",{className:"space-y-2",children:b.map((ee,Ie)=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[s.jsxs("span",{className:"text-sm text-text-primary",children:[Ie+1,". ",ee.nome]}),s.jsx("span",{className:"text-sm font-bold text-success",children:or(ee.valor)})]},Ie))})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4 border-0 ring-0 outline-none focus-visible:outline-none shadow-none cursor-pointer",onClick:()=>G(!0),children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs font-semibold uppercase tracking-wider mb-3",children:[s.jsx(ps,{className:"w-4 h-4 text-brand"}),s.jsx("span",{children:"Clientes (por valor pago)"}),C.length>5&&s.jsx(Ae,{variant:"outline",size:"xs",className:"ml-auto h-7 px-2",onClick:()=>G(!0),children:"Ver todos"})]}),_.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados no perodo."}):s.jsx("div",{className:"space-y-2",children:_.map((ee,Ie)=>s.jsxs("button",{className:"w-full flex items-center justify-between py-2 border-b border-border last:border-0 hover:bg-surface-2 rounded-sm px-2 text-left",onClick:()=>{de(ee),G(!0)},children:[s.jsxs("span",{className:"text-sm text-text-primary",children:[Ie+1,". ",ee.nome]}),s.jsx("span",{className:"text-sm font-bold text-success",children:or(ee.valor)})]},Ie))})]})]})]}),s.jsx(to,{value:"agendamentos",className:"space-y-6 mt-6",children:s.jsxs(ur.div,{variants:ls,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Agendamentos (Pagamentos por Participante)"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar (#cdigo, participante, quadra)",value:We,onChange:ee=>Ot(ee.target.value),className:"pl-10 w-full md:w-[260px] bg-black border-warning/40 text-white placeholder:text-white/60"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs(kn,{value:Ve,onValueChange:nt,children:[s.jsx(An,{className:"w-full md:w-[170px] h-9 bg-black border-warning/40 text-white",children:s.jsx(On,{placeholder:"Todos os Status"})}),s.jsxs(Pn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Ht,{value:"all",children:"Todos os Status"}),s.jsx(Ht,{value:"Pago",children:"Pago"}),s.jsx(Ht,{value:"Pendente",children:"Pendente"}),s.jsx(Ht,{value:"Cancelado",children:"Cancelado"})]})]}),s.jsxs(kn,{value:Rt,onValueChange:Lt,children:[s.jsx(An,{className:"w-full md:w-[220px] h-9 bg-black border-warning/40 text-white",children:s.jsx(On,{placeholder:"Todas as Finalizadoras"})}),s.jsxs(Pn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Ht,{value:"all",children:"Todas as Finalizadoras"}),[...new Set((yt||[]).map(ee=>ee.finalizadora_nome).filter(Boolean))].map(ee=>s.jsx(Ht,{value:ee,children:ee},ee))]})]})]}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:()=>{try{const ee=mi||[],tt=[["Data/Hora","Cdigo","Quadra","Participante","Finalizadora","Valor","Status"].join(";")];for(const Zt of ee){const kr=[Zt.inicio?new Date(Zt.inicio).toLocaleString("pt-BR"):"",Zt.agendamento_codigo??"",(Zt.quadra_nome??"").replaceAll('"','""'),(Zt.participante_nome??"").replaceAll('"','""'),(Zt.finalizadora_nome??"").replaceAll('"','""'),String(dr(Zt.valor_cota)).replace(".",","),Zt.status_pagamento??""].map(ie=>`"${String(ie)}"`).join(";");tt.push(kr)}const Qt="\uFEFF"+tt.join(`
`),it=new Blob([Qt],{type:"text/csv;charset=utf-8;"}),lt=URL.createObjectURL(it),tr=document.createElement("a");tr.href=lt;const mr=c?new Date(c+"T00:00:00").toLocaleDateString("pt-BR"):"",er=d?new Date(d+"T00:00:00").toLocaleDateString("pt-BR"):"";tr.download=`agendamentos_${mr}_a_${er}.csv`,document.body.appendChild(tr),tr.click(),document.body.removeChild(tr),URL.revokeObjectURL(lt)}catch(ee){e({title:"Falha ao exportar CSV",description:ee?.message,variant:"destructive"})}},children:[s.jsx(Ms,{className:"h-4 w-4 mr-2"})," Exportar CSV"]})]})]}),o?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),s.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):mi.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros no perodo."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Data/Hora"}),s.jsx(Mr,{children:"Cdigo"}),s.jsx(Mr,{children:"Quadra"}),s.jsx(Mr,{children:"Participante"}),s.jsx(Mr,{children:"Finalizadora"}),s.jsx(Mr,{className:"text-right",children:"Valor"}),s.jsx(Mr,{children:"Status"})]})}),s.jsx(ds,{children:mi.map((ee,Ie)=>s.jsxs(Qn,{children:[s.jsx(Sr,{children:ee.inicio?new Date(ee.inicio).toLocaleString("pt-BR"):""}),s.jsxs(Sr,{children:["#",ee.agendamento_codigo||""]}),s.jsx(Sr,{children:ee.quadra_nome||""}),s.jsx(Sr,{children:ee.participante_nome||""}),s.jsx(Sr,{children:ee.finalizadora_nome||""}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor_cota)}),s.jsx(Sr,{children:ee.status_pagamento||""})]},`${ee.agendamento_codigo}-${Ie}`))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:mi.map((ee,Ie)=>s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm font-semibold text-text-primary",children:["#",ee.agendamento_codigo||""]}),s.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${ee.status_pagamento==="Pago"?"bg-success/20 text-success":ee.status_pagamento==="Cancelado"?"bg-danger/20 text-danger":"bg-warning/20 text-warning"}`,children:ee.status_pagamento||"Pendente"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Data/Hora:"}),s.jsx("span",{className:"text-text-primary",children:ee.inicio?new Date(ee.inicio).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Quadra:"}),s.jsx("span",{className:"text-text-primary font-medium",children:ee.quadra_nome||""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Participante:"}),s.jsx("span",{className:"text-text-primary",children:ee.participante_nome||""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Finalizadora:"}),s.jsx("span",{className:"text-text-primary",children:ee.finalizadora_nome||""})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor da Cota:"}),s.jsx("span",{className:"font-bold text-lg text-success",children:or(ee.valor_cota)})]})]})]},`${ee.agendamento_codigo}-${Ie}`))})]})]})}),s.jsx(to,{value:"caixa",className:"space-y-6 mt-6",children:s.jsxs(ur.div,{variants:ls,className:"fx-card p-4",children:[s.jsx("h3",{className:"text-base font-bold mb-3",children:"Fechamentos Anteriores"}),ye.length===0?s.jsx("div",{className:"text-sm text-text-secondary",children:"Nenhum fechamento encontrado."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Aberto em"}),s.jsx(Mr,{children:"Fechado em"}),s.jsx(Mr,{className:"text-right",children:"Saldo Inicial"}),s.jsx(Mr,{className:"text-right",children:"Saldo Final"}),s.jsx(Mr,{children:"Status"})]})}),s.jsx(ds,{children:ye.map(ee=>s.jsxs(Qn,{className:"cursor-pointer hover:bg-surface-2",onClick:async()=>{qt(!0),et(!0),Pt(null);try{const Ie=t?.codigo_empresa,tt=typeof performance<"u"&&performance.now?performance.now():Date.now();console.log("[Caixa][Fechamento][Open]",{sessaoId:ee.id,from:ee.aberto_em,to:ee.fechado_em,codigo:Ie});let Qt=await b_({caixaSessaoId:ee.id,codigoEmpresa:Ie}),lt=(U=>{if(!U)return null;if(U.total_bruto!=null||U.por_finalizadora!=null){let le=U.por_finalizadora;if(le&&typeof le=="string")try{le=JSON.parse(le)}catch{le={}}return{from:U.periodo_de||null,to:U.periodo_ate||null,totalPorFinalizadora:le||{},totalEntradas:Number(U.total_entradas||0),totalVendasBrutas:Number(U.total_bruto||0),totalDescontos:Number(U.total_descontos||0),totalVendasLiquidas:Number(U.total_liquido||0)}}return U})(Qt);lt||(console.log("[Caixa][Fechamento] Snapshot ausente, calculando resumo por perodo..."),lt=await Yl({from:ee.aberto_em,to:ee.fechado_em||new Date().toISOString(),codigoEmpresa:Ie}));const tr={...ee,saldo_inicial:Qt&&typeof Qt.saldo_inicial<"u"?Number(Qt.saldo_inicial):ee.saldo_inicial,saldo_final:Qt&&typeof Qt.saldo_final<"u"?Number(Qt.saldo_final):ee.saldo_final};if(!lt||!lt.totalPorFinalizadora||Object.keys(lt.totalPorFinalizadora).length===0)try{const U=ee.aberto_em,le=ee.fechado_em||new Date().toISOString();let we=Pe.from("pagamentos").select("metodo, valor, status, recebido_em, finalizadoras:finalizadoras!pagamentos_finalizadora_id_fkey(nome)").gte("recebido_em",U).lte("recebido_em",le);Ie&&(we=we.eq("codigo_empresa",Ie));const{data:Oe}=await we,$e={};let He=0;for(const jt of Oe||[]){if(!((jt.status||"Pago")!=="Cancelado"&&(jt.status||"Pago")!=="Estornado"))continue;const Qe=jt.finalizadoras?.nome||jt.metodo||"Outros",gt=Number(jt.valor||0);$e[Qe]=($e[Qe]||0)+gt,He+=gt}lt={...lt||{},totalPorFinalizadora:$e,totalEntradas:Number(lt?.totalEntradas||0)||He},console.log("[Caixa][Fechamento][FallbackPF]",{methods:Object.keys($e).length})}catch{}const er=await Am({caixaSessaoId:ee.id,codigoEmpresa:Ie}),Zt=Qt&&Qt.movimentos?Qt.movimentos:null,kr=ee.aberto_em,ie=ee.fechado_em||new Date().toISOString();let ae=Pe.from("pagamentos").select("id, valor, status, metodo, recebido_em, finalizadoras:finalizadoras!pagamentos_finalizadora_id_fkey(nome)").gte("recebido_em",kr).lte("recebido_em",ie).order("recebido_em",{ascending:!1});Ie&&(ae=ae.eq("codigo_empresa",Ie));const{data:Re}=await ae;console.log("[Caixa][Fechamento][Pays]",{count:(Re||[]).length}),Pt({resumo:lt,movimentacoes:er,movimentosAgg:Zt,pagamentos:Re||[],sessao:tr});const Le=typeof performance<"u"&&performance.now?performance.now():Date.now(),_t=Array.isArray(er)?er.length:0,H=lt&&lt.totalPorFinalizadora?Object.keys(lt.totalPorFinalizadora).length:0;console.log("[Caixa][Fechamento][Loaded]",{sessaoId:ee.id,finCount:H,movCount:_t,ms:Math.round(Le-tt)})}catch(Ie){console.error("[Caixa][Fechamento][Error]",{sessaoId:ee.id,message:Ie?.message,code:Ie?.code}),e({title:"Falha ao carregar fechamento",description:Ie?.message||"Tente novamente",variant:"destructive"})}finally{et(!1)}},children:[s.jsx(Sr,{children:ee.aberto_em?new Date(ee.aberto_em).toLocaleString("pt-BR"):""}),s.jsx(Sr,{children:ee.fechado_em?new Date(ee.fechado_em).toLocaleString("pt-BR"):""}),s.jsx(Sr,{className:"text-right",children:or(ee.saldo_inicial)}),s.jsx(Sr,{className:"text-right",children:or(ee.saldo_final)}),s.jsx(Sr,{children:String(ee.status||"").toLowerCase()==="open"?"Aberto":"Fechado"})]},ee.id))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:ye.map(ee=>s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 cursor-pointer hover:bg-surface-2/80 transition-colors",onClick:async()=>{qt(!0),et(!0),Pt(null);try{const Ie=t?.codigo_empresa;let tt=await b_({caixaSessaoId:ee.id,codigoEmpresa:Ie}),it=(er=>{if(!er)return null;if(er.total_bruto!=null||er.por_finalizadora!=null){let Zt=er.por_finalizadora;if(Zt&&typeof Zt=="string")try{Zt=JSON.parse(Zt)}catch{Zt={}}return{from:er.periodo_de||null,to:er.periodo_ate||null,totalPorFinalizadora:Zt||{},totalEntradas:Number(er.total_entradas||0),totalVendasBrutas:Number(er.total_bruto||0),totalDescontos:Number(er.total_descontos||0),totalVendasLiquidas:Number(er.total_liquido||0)}}return er})(tt);it||(it=await Yl({from:ee.aberto_em,to:ee.fechado_em||new Date().toISOString(),codigoEmpresa:Ie}));const lt={...ee,saldo_inicial:tt&&typeof tt.saldo_inicial<"u"?Number(tt.saldo_inicial):ee.saldo_inicial,saldo_final:tt&&typeof tt.saldo_final<"u"?Number(tt.saldo_final):ee.saldo_final},tr=await Am({caixaSessaoId:ee.id,codigoEmpresa:Ie}),mr=tt&&tt.movimentos?tt.movimentos:null;Pt({resumo:it,movimentacoes:tr,movimentosAgg:mr,sessao:lt,pagamentos:[]})}catch(Ie){console.error("[Caixa][Fechamento][Error]",Ie),e({title:"Erro ao carregar detalhes",description:Ie?.message,variant:"destructive"})}finally{et(!1)}},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm font-semibold text-text-primary",children:["Sesso #",ee.id]}),s.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${ee.status==="fechado"?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:String(ee.status||"").toLowerCase()==="open"?"Aberto":"Fechado"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Aberto em:"}),s.jsx("span",{className:"text-text-primary",children:ee.aberto_em?new Date(ee.aberto_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Fechado em:"}),s.jsx("span",{className:"text-text-primary",children:ee.fechado_em?new Date(ee.fechado_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Saldo Inicial:"}),s.jsx("span",{className:"font-semibold text-info",children:or(ee.saldo_inicial)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Saldo Final:"}),s.jsx("span",{className:"font-semibold text-success",children:or(ee.saldo_final)})]})]}),s.jsx("div",{className:"mt-3 text-xs text-text-muted text-center",children:"Toque para ver detalhes"})]},ee.id))})]})]})}),s.jsx(to,{value:"recebimentos",className:"space-y-6 mt-6",children:s.jsxs(ur.div,{variants:ls,className:"fx-card p-4 border-0 ring-0 outline-none shadow-none",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Todos os Recebimentos"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar...",value:Ee,onChange:ee=>Ke(ee.target.value),className:"pl-10 w-full md:w-[200px]"})]}),s.jsxs(kn,{value:ot,onValueChange:kt,children:[s.jsx(An,{className:"w-full md:w-[160px] h-9 bg-black border-warning/40 text-white",children:s.jsx(On,{placeholder:"Todas as Fontes"})}),s.jsxs(Pn,{className:"bg-black text-white border-warning/40",children:[s.jsx(Ht,{value:"all",children:"Todas as Fontes"}),s.jsx(Ht,{value:"manual",children:"Manual"}),s.jsx(Ht,{value:"xml",children:"XML"})]})]}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:()=>{try{const ee=Ii||[],tt=[["Data/Hora","Origem","Fonte","Descrio","Finalizadora","Valor","Status"].join(";")];for(const Zt of ee){const kr=[Zt.recebido_em?new Date(Zt.recebido_em).toLocaleString("pt-BR"):"",Zt.origem??"",Zt.fonte??"",(Zt.descricao??"").replaceAll('"','""'),(Zt.finalizadoras?.nome||Zt.metodo||"").replaceAll('"','""'),String(dr(Zt.valor)).replace(".",","),Zt.status??""].map(ie=>`"${String(ie)}"`).join(";");tt.push(kr)}const Qt="\uFEFF"+tt.join(`
`),it=new Blob([Qt],{type:"text/csv;charset=utf-8;"}),lt=URL.createObjectURL(it),tr=c?new Date(c+"T00:00:00").toLocaleDateString("pt-BR"):"",mr=d?new Date(d+"T00:00:00").toLocaleDateString("pt-BR"):"",er=document.createElement("a");er.href=lt,er.download=`recebimentos_${tr}_a_${mr}.csv`,document.body.appendChild(er),er.click(),document.body.removeChild(er),URL.revokeObjectURL(lt)}catch(ee){e({title:"Falha ao exportar CSV",description:ee?.message,variant:"destructive"})}},children:[s.jsx(Ms,{className:"h-4 w-4 mr-2"})," Exportar CSV"]})]})]}),o?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),s.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):Ii.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros no perodo."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Data/Hora"}),s.jsx(Mr,{children:"Origem"}),s.jsx(Mr,{children:"Fonte"}),s.jsx(Mr,{children:"Descrio"}),s.jsx(Mr,{children:"Finalizadora"}),s.jsx(Mr,{className:"text-right",children:"Valor"}),s.jsx(Mr,{children:"Status"})]})}),s.jsx(ds,{children:Ii.map(ee=>s.jsxs(Qn,{className:"cursor-pointer hover:bg-surface-2",onClick:()=>{ia(ee),ir(!0)},children:[s.jsx(Sr,{children:ee.recebido_em?new Date(ee.recebido_em).toLocaleString("pt-BR"):""}),s.jsx(Sr,{children:ee.origem||""}),s.jsx(Sr,{children:ee.fonte?ee.fonte.toUpperCase():""}),s.jsx(Sr,{className:"truncate max-w-[260px]",title:ee.descricao||"",children:ee.descricao||""}),s.jsx(Sr,{children:ee.finalizadoras?.nome||ee.metodo||""}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)}),s.jsx(Sr,{children:ee.status||""})]},ee.id))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:Ii.map(ee=>s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 cursor-pointer hover:bg-surface-2/80 transition-colors",onClick:()=>{ia(ee),ir(!0)},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary",children:ee.origem||"Recebimento"}),s.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${ee.status==="Pago"?"bg-success/20 text-success":ee.status==="Cancelado"?"bg-danger/20 text-danger":"bg-warning/20 text-warning"}`,children:ee.status||"Pendente"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Data/Hora:"}),s.jsx("span",{className:"text-text-primary",children:ee.recebido_em?new Date(ee.recebido_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Fonte:"}),s.jsx("span",{className:"text-text-primary font-medium",children:ee.fonte?ee.fonte.toUpperCase():""})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Finalizadora:"}),s.jsx("span",{className:"text-text-primary",children:ee.finalizadoras?.nome||ee.metodo||""})]}),ee.descricao&&s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Descrio:"}),s.jsx("span",{className:"text-text-primary text-xs bg-surface/50 p-2 rounded",children:ee.descricao})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border/50",children:[s.jsx("span",{className:"text-text-secondary",children:"Valor:"}),s.jsx("span",{className:"font-bold text-lg text-success",children:or(ee.valor)})]})]}),s.jsx("div",{className:"mt-3 text-xs text-text-muted text-center",children:"Toque para ver detalhes"})]},ee.id))})]})]})}),s.jsxs(to,{value:"relatorios",className:"space-y-6 mt-6",children:[s.jsxs(ur.div,{variants:ls,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(Ls,{className:"w-5 h-5 text-success"}),"Faturamento Consolidado"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Resumo geral das receitas no perodo"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const Ie=[["Mtrica","Valor"],["Receita de Comandas",or(g)],["Receita de Agendamentos",or(v)],["Receita Total",or(Number(g||0)+Number(v||0))],["Perodo",`${c||"N/A"} at ${d||"N/A"}`]].map(lt=>lt.map(tr=>`"${tr}"`).join(";")).join(`
`),tt=new Blob(["\uFEFF"+Ie],{type:"text/csv;charset=utf-8;"}),Qt=URL.createObjectURL(tt),it=document.createElement("a");it.href=Qt,it.download=`faturamento_consolidado_${Hr(new Date,"yyyy-MM-dd")}.csv`,it.click(),URL.revokeObjectURL(Qt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(Ms,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const ee=[["Receita de Comandas",or(g)],["Receita de Agendamentos",or(v)],["Receita Total",or(Number(g||0)+Number(v||0))]];Vn("Faturamento Consolidado",["Mtrica","Valor"],ee,"faturamento_consolidado")},children:[s.jsx(Ny,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-success/5 border border-success/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Comandas"}),s.jsx("div",{className:"text-2xl font-bold text-success",children:or(g)}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Vendas no perodo"})]}),s.jsxs("div",{className:"p-4 bg-purple-500/5 border border-purple-500/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Agendamentos"}),s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:or(v)}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Reservas pagas"})]}),s.jsxs("div",{className:"p-4 bg-brand/5 border border-brand/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Receita Total"}),s.jsx("div",{className:"text-2xl font-bold text-brand",children:or(Number(g||0)+Number(v||0))}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Perodo selecionado"})]})]})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(sm,{className:"w-5 h-5 text-info"}),"Pagamentos por Mtodo"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Distribuio por finalizadora"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-info/10 border-info/40 text-info hover:bg-info/20",onClick:()=>{const ee=h?.totalPorFinalizadora||{},Ie=Object.entries(ee).map(([er,Zt])=>[er,or(Zt)]).sort((er,Zt)=>{const kr=Number(String(er[1]).replace(/[^\d,]/g,"").replace(",","."));return Number(String(Zt[1]).replace(/[^\d,]/g,"").replace(",","."))-kr}),tt=Object.values(ee).reduce((er,Zt)=>er+Zt,0),it=[["Mtodo de Pagamento","Valor","% do Total"],...Ie.map(([er,Zt])=>{const ie=((Object.entries(ee).find(([ae])=>ae===er)?.[1]||0)/tt*100).toFixed(1)+"%";return[er,Zt,ie]}),["TOTAL",or(tt),"100%"]].map(er=>er.map(Zt=>`"${Zt}"`).join(";")).join(`
`),lt=new Blob(["\uFEFF"+it],{type:"text/csv;charset=utf-8;"}),tr=URL.createObjectURL(lt),mr=document.createElement("a");mr.href=tr,mr.download=`pagamentos_por_metodo_${Hr(new Date,"yyyy-MM-dd")}.csv`,mr.click(),URL.revokeObjectURL(tr),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(Ms,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-info/10 border-info/40 text-info hover:bg-info/20",onClick:()=>{const ee=h?.totalPorFinalizadora||{},Ie=Object.values(ee).reduce((Qt,it)=>Qt+it,0),tt=Object.entries(ee).sort(([,Qt],[,it])=>it-Qt).map(([Qt,it])=>[Qt,or(it),(it/Ie*100).toFixed(1)+"%"]);tt.push(["TOTAL",or(Ie),"100%"]),Vn("Pagamentos por Mtodo",["Mtodo","Valor","% do Total"],tt,"pagamentos_por_metodo")},children:[s.jsx(Ny,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),Object.keys(h?.totalPorFinalizadora||{}).length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem pagamentos no perodo."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Mtodo de Pagamento"}),s.jsx(Mr,{className:"text-right",children:"Valor"}),s.jsx(Mr,{className:"text-right",children:"% do Total"})]})}),s.jsxs(ds,{children:[Object.entries(h?.totalPorFinalizadora||{}).sort(([,ee],[,Ie])=>Ie-ee).map(([ee,Ie])=>{const tt=Object.values(h?.totalPorFinalizadora||{}).reduce((it,lt)=>it+lt,0),Qt=(Ie/tt*100).toFixed(1);return s.jsxs(Qn,{children:[s.jsx(Sr,{className:"font-medium",children:ee}),s.jsx(Sr,{className:"text-right font-semibold",children:or(Ie)}),s.jsxs(Sr,{className:"text-right text-text-secondary",children:[Qt,"%"]})]},ee)}),s.jsxs(Qn,{className:"bg-surface-2 font-bold",children:[s.jsx(Sr,{children:"TOTAL"}),s.jsx(Sr,{className:"text-right",children:or(Object.values(h?.totalPorFinalizadora||{}).reduce((ee,Ie)=>ee+Ie,0))}),s.jsx(Sr,{className:"text-right",children:"100%"})]})]})]})})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(Hg,{className:"w-5 h-5 text-purple-400"}),"Produtos Mais Vendidos"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Top produtos por faturamento"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-purple-500/10 border-purple-500/40 text-purple-400 hover:bg-purple-500/20",onClick:()=>{const Ie=[["Posio","Produto","Faturamento"],...A.slice(0,50).map((lt,tr)=>[tr+1,lt.nome,or(lt.valor)])].map(lt=>lt.map(tr=>`"${tr}"`).join(";")).join(`
`),tt=new Blob(["\uFEFF"+Ie],{type:"text/csv;charset=utf-8;"}),Qt=URL.createObjectURL(tt),it=document.createElement("a");it.href=Qt,it.download=`produtos_vendidos_${Hr(new Date,"yyyy-MM-dd")}.csv`,it.click(),URL.revokeObjectURL(Qt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(Ms,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-purple-500/10 border-purple-500/40 text-purple-400 hover:bg-purple-500/20",onClick:()=>{const ee=A.slice(0,50).map((Ie,tt)=>[tt+1,Ie.nome,or(Ie.valor)]);Vn("Produtos Mais Vendidos",["#","Produto","Faturamento"],ee,"produtos_vendidos")},children:[s.jsx(Ny,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),A.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem produtos vendidos no perodo."}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{className:"w-16",children:"#"}),s.jsx(Mr,{children:"Produto"}),s.jsx(Mr,{className:"text-right",children:"Faturamento"})]})}),s.jsx(ds,{children:A.slice(0,20).map((ee,Ie)=>s.jsxs(Qn,{children:[s.jsx(Sr,{className:"text-text-secondary font-mono",children:Ie+1}),s.jsx(Sr,{className:"font-medium",children:ee.nome}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)})]},`${ee.nome}-${Ie}`))})]}),A.length>20&&s.jsx("div",{className:"text-center mt-4",children:s.jsxs(Ae,{variant:"ghost",size:"sm",className:"text-brand hover:text-brand/80",onClick:()=>W(!0),children:["Ver todos os ",A.length," produtos"]})})]})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(ps,{className:"w-5 h-5 text-warning"}),"Clientes que Mais Consomem"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Ranking por faturamento total"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-warning/10 border-warning/40 text-warning hover:bg-warning/20",onClick:()=>{const Ie=[["Posio","Cliente","Faturamento"],...C.slice(0,50).map((lt,tr)=>[tr+1,lt.nome,or(lt.valor)])].map(lt=>lt.map(tr=>`"${tr}"`).join(";")).join(`
`),tt=new Blob(["\uFEFF"+Ie],{type:"text/csv;charset=utf-8;"}),Qt=URL.createObjectURL(tt),it=document.createElement("a");it.href=Qt,it.download=`clientes_top_${Hr(new Date,"yyyy-MM-dd")}.csv`,it.click(),URL.revokeObjectURL(Qt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(Ms,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-warning/10 border-warning/40 text-warning hover:bg-warning/20",onClick:()=>{const ee=C.slice(0,50).map((Ie,tt)=>[tt+1,Ie.nome,or(Ie.valor)]);Vn("Clientes que Mais Consomem",["#","Cliente","Total Gasto"],ee,"clientes_top")},children:[s.jsx(Ny,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),C.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem dados de clientes no perodo."}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{className:"w-16",children:"#"}),s.jsx(Mr,{children:"Cliente"}),s.jsx(Mr,{className:"text-right",children:"Total Gasto"})]})}),s.jsx(ds,{children:C.slice(0,20).map((ee,Ie)=>s.jsxs(Qn,{children:[s.jsx(Sr,{className:"text-text-secondary font-mono",children:Ie+1}),s.jsx(Sr,{className:"font-medium",children:ee.nome}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)})]},`${ee.nome}-${Ie}`))})]}),C.length>20&&s.jsx("div",{className:"text-center mt-4",children:s.jsxs(Ae,{variant:"ghost",size:"sm",className:"text-brand hover:text-brand/80",onClick:()=>G(!0),children:["Ver todos os ",C.length," clientes"]})})]})]}),s.jsxs(ur.div,{variants:ls,className:"fx-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(Nb,{className:"w-5 h-5 text-success"}),"Evoluo Diria de Receitas"]}),s.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Faturamento dia a dia no perodo"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const Ie=[["Data","Receita"],...R.map(lt=>[lt.data,or(lt.valor)])].map(lt=>lt.map(tr=>`"${tr}"`).join(";")).join(`
`),tt=new Blob(["\uFEFF"+Ie],{type:"text/csv;charset=utf-8;"}),Qt=URL.createObjectURL(tt),it=document.createElement("a");it.href=Qt,it.download=`evolucao_diaria_${Hr(new Date,"yyyy-MM-dd")}.csv`,it.click(),URL.revokeObjectURL(Qt),e({title:"Relatrio exportado",description:"CSV salvo com sucesso"})},children:[s.jsx(Ms,{className:"w-4 h-4 mr-2"}),"CSV"]}),s.jsxs(Ae,{variant:"outline",size:"sm",className:"bg-success/10 border-success/40 text-success hover:bg-success/20",onClick:()=>{const ee=R.map(Ie=>[Ie.data,or(Ie.valor)]);Vn("Evoluo Diria de Receitas",["Data","Receita"],ee,"evolucao_diaria")},children:[s.jsx(Ny,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),R.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem dados de evoluo no perodo."}):s.jsx("div",{className:"h-80",children:s.jsx(o2,{width:"100%",height:"100%",children:s.jsxs(wBe,{data:R,margin:{top:5,right:20,bottom:5,left:0},children:[s.jsx(aO,{strokeDasharray:"3 3",stroke:"#2a2a2a"}),s.jsx(Gm,{dataKey:"data",stroke:"#888",tick:{fill:"#888",fontSize:11},tickFormatter:ee=>{const Ie=ee.split("/");return`${Ie[0]}/${Ie[1]}`}}),s.jsx(Km,{stroke:"#888",tick:{fill:"#888",fontSize:11},tickFormatter:ee=>`R$ ${(ee/1e3).toFixed(0)}k`}),s.jsx(dl,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"},labelStyle:{color:"#fff"},itemStyle:{color:"#22C55E"},formatter:ee=>[or(ee),"Receita"]}),s.jsx(qb,{type:"monotone",dataKey:"valor",stroke:"#22C55E",strokeWidth:2,dot:{fill:"#22C55E",r:4},activeDot:{r:6}})]})})})]})]})]}),s.jsx(rn,{open:Tt,onOpenChange:ir,children:s.jsxs(Yr,{className:"max-w-lg",children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-xl font-bold",children:"Detalhes do Recebimento"}),s.jsx(cn,{children:fr?.origem==="Comanda"?"Operao de comanda":fr?.origem==="Agendamento"?"Operao de agendamento":"Operao"})]}),fr&&s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Data/Hora"}),s.jsx("div",{className:"font-medium",children:fr.recebido_em?new Date(fr.recebido_em).toLocaleString("pt-BR"):""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Valor"}),s.jsx("div",{className:"font-semibold",children:or(fr.valor)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Origem"}),s.jsx("div",{children:fr.origem||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Fonte"}),s.jsx("div",{children:fr.fonte?fr.fonte.toUpperCase():""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Finalizadora"}),s.jsx("div",{children:fr.finalizadoras?.nome||fr.metodo||""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Status"}),s.jsx("div",{children:fr.status||""})]})]}),fr.origem==="Comanda"&&s.jsxs("div",{className:"mt-2 p-3 rounded border border-border",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Comanda"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Cliente"}),s.jsx("div",{children:fr.descricao||""})]})}),s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-text-muted mb-1",children:"Produtos"}),yr?s.jsx("div",{className:"text-xs text-text-muted",children:"Carregando itens..."}):fn.length===0?s.jsx("div",{className:"text-xs text-text-muted",children:"Sem itens encontrados."}):s.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:fn.map((ee,Ie)=>s.jsxs("div",{className:"text-xs flex justify-between gap-3",children:[s.jsxs("div",{className:"truncate",children:[s.jsx("span",{className:"font-mono",children:dr(ee.quantidade)}),s.jsx("span",{children:" x "}),s.jsx("span",{className:"font-medium",children:ee.descricao})]}),s.jsx("div",{className:"whitespace-nowrap",children:or(Number(ee.preco_unitario||0)*Number(ee.quantidade||0))})]},Ie))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-text-muted mb-1",children:"Pagamentos"}),Dr.length===0?s.jsx("div",{className:"text-xs text-text-muted",children:"Sem pagamentos adicionais."}):s.jsxs("div",{className:"space-y-1",children:[Dr.map((ee,Ie)=>s.jsxs("div",{className:"text-xs flex justify-between gap-3",children:[s.jsx("div",{className:"truncate",children:s.jsx("span",{className:"font-medium",children:ee.finalizadoras?.nome||ee.metodo||""})}),s.jsx("div",{className:"whitespace-nowrap",children:or(ee.valor)})]},ee.id||Ie)),s.jsxs("div",{className:"text-xs flex justify-between gap-3 pt-2 border-t border-border",children:[s.jsx("div",{className:"font-semibold",children:"Total"}),s.jsx("div",{className:"font-semibold",children:or(Dr.reduce((ee,Ie)=>ee+Number(Ie.valor||0),0))})]})]})]})]}),fr.origem==="Agendamento"&&s.jsxs("div",{className:"mt-2 p-3 rounded border border-border",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Agendamento"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Cdigo"}),s.jsxs("div",{className:"font-mono",children:["#",fr.agendamento_codigo]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-text-muted",children:"Participante"}),s.jsx("div",{children:fr.participante_nome})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("div",{className:"text-text-muted",children:"Quadra"}),s.jsx("div",{children:fr.quadra_nome||""})]})]})]})]})]})}),s.jsx(rn,{open:V,onOpenChange:W,children:s.jsxs(Yr,{className:"max-w-2xl bg-surface text-text-primary border-0",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Todos os Produtos"}),s.jsx(cn,{children:"Ordenados por faturamento no perodo selecionado"})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Produto"}),s.jsx(Mr,{className:"text-right",children:"Valor"})]})}),s.jsx(ds,{children:A.map((ee,Ie)=>s.jsxs(Qn,{children:[s.jsxs(Sr,{children:[Ie+1,". ",ee.nome]}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)})]},`${ee.nome}-${Ie}`))})]})})]})}),s.jsx(rn,{open:Ft,onOpenChange:qt,children:s.jsxs(Yr,{className:"sm:max-w-[900px] w-full max-h-[85vh] overflow-y-auto bg-surface text-text-primary border-0",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Fechamento do Caixa"}),s.jsxs(cn,{children:[Ze?.sessao?.aberto_em?`${new Date(Ze.sessao.aberto_em).toLocaleString("pt-BR")}`:"",Ze?.sessao?.fechado_em?`  ${new Date(Ze.sessao.fechado_em).toLocaleString("pt-BR")}`:""]})]}),It?s.jsx("div",{className:"text-sm text-text-muted",children:"Carregando..."}):Ze?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Inicial"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:or(Ze.sessao?.saldo_inicial)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Entradas"}),s.jsx("p",{className:"text-2xl font-bold text-success tabular-nums",children:(()=>{const ee=Number(Ze.sessao?.saldo_inicial||0),tt=Number(Ze.sessao?.saldo_final||0)-ee;return or(tt)})()})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Final"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:or(Ze.sessao?.saldo_final)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Descontos"}),s.jsx("p",{className:"text-2xl font-bold text-warning tabular-nums",children:or(Ze.resumo?.totalDescontos)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Lquido"}),s.jsx("p",{className:"text-2xl font-bold tabular-nums",children:or(Ze.resumo?.totalVendasLiquidas)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Entradas por Finalizadora"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:Ze.resumo?.totalPorFinalizadora&&Object.keys(Ze.resumo.totalPorFinalizadora).length>0?Object.entries(Ze.resumo.totalPorFinalizadora).map(([ee,Ie])=>s.jsxs("div",{className:"bg-surface-2 rounded-md p-2 border border-border flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-text-secondary truncate",children:String(ee)}),s.jsx("span",{className:"text-sm font-semibold",children:or(Ie)})]},ee)):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem pagamentos."})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Movimentaes"}),!Ze.movimentacoes||Ze.movimentacoes.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem movimentaes nesta sesso."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Data"}),s.jsx(Mr,{children:"Tipo"}),s.jsx(Mr,{children:"Obs"}),s.jsx(Mr,{className:"text-right",children:"Valor"})]})}),s.jsx(ds,{children:Ze.movimentacoes.map(ee=>s.jsxs(Qn,{children:[s.jsx(Sr,{children:ee.created_at?new Date(ee.created_at).toLocaleString("pt-BR"):""}),s.jsx(Sr,{className:"capitalize",children:ee.tipo||""}),s.jsx(Sr,{className:"truncate max-w-[280px]",title:ee.observacao||"",children:ee.observacao||""}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)})]},ee.id))})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Recebimentos"}),!Ze.pagamentos||Ze.pagamentos.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem recebimentos no perodo deste caixa."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Data/Hora"}),s.jsx(Mr,{children:"Finalizadora"}),s.jsx(Mr,{className:"text-right",children:"Valor"}),s.jsx(Mr,{children:"Status"})]})}),s.jsx(ds,{children:Ze.pagamentos.map(ee=>s.jsxs(Qn,{children:[s.jsx(Sr,{children:ee.recebido_em?new Date(ee.recebido_em).toLocaleString("pt-BR"):""}),s.jsx(Sr,{children:ee.finalizadoras?.nome||ee.metodo||""}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)}),s.jsx(Sr,{children:ee.status||""})]},ee.id))})]})})]})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados."})]})}),s.jsx(rn,{open:$,onOpenChange:ee=>{G(ee),ee||(de(null),B([]))},children:s.jsxs(Yr,{className:"max-w-2xl bg-surface text-text-primary border-0",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Clientes"}),s.jsx(cn,{children:"Ordenados por valor pago no perodo selecionado"})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto border border-border rounded-md",children:s.jsxs(cs,{children:[s.jsx(us,{children:s.jsxs(Qn,{children:[s.jsx(Mr,{children:"Cliente"}),s.jsx(Mr,{className:"text-right",children:"Pago"})]})}),s.jsx(ds,{children:C.map((ee,Ie)=>s.jsxs(Qn,{className:"cursor-pointer hover:bg-brand/10",onClick:async()=>{Z(!0),de(ee),q(!0);try{const tt=mt(c),Qt=at(d),it=(ee.nome||"").trim(),lt=t?.codigo_empresa;let tr=Pe.from("clientes").select("id, nome").eq("codigo_empresa",lt).ilike("nome",`%${it}%`);const{data:mr}=await tr,er=new Set((mr||[]).map(we=>we.id));let Zt=Pe.from("comanda_clientes").select("comanda_id").eq("codigo_empresa",lt).ilike("nome_livre",`%${it}%`);const{data:kr}=await Zt;let ie=new Set((kr||[]).map(we=>we.comanda_id));if(er.size>0){let we=Pe.from("comanda_clientes").select("comanda_id, cliente_id").eq("codigo_empresa",lt).in("cliente_id",Array.from(er));const{data:Oe}=await we;(Oe||[]).forEach($e=>ie.add($e.comanda_id))}const ae=Array.from(ie);let Re=Pe.from("pagamentos").select("id, valor, recebido_em, metodo, finalizadoras!pagamentos_finalizadora_id_fkey(nome), comanda_id, status").in("comanda_id",ae).neq("status","Cancelado").neq("status","Estornado").order("recebido_em",{ascending:!1}).limit(50);tt&&(Re=Re.gte("recebido_em",tt)),Qt&&(Re=Re.lte("recebido_em",Qt));const{data:Le}=await Re,_t=Le||[],H=Array.from(new Set(_t.map(we=>we.comanda_id).filter(Boolean))),U={};if(H.length>0){let we=Pe.from("comandas").select("id, tipo, mesa_id").in("id",H);const{data:Oe}=await we,$e=Array.from(new Set((Oe||[]).map(jt=>jt.mesa_id).filter(Boolean))),He={};if($e.length>0){let jt=Pe.from("mesas").select("id, numero, nome").in("id",$e);const{data:Kt}=await jt;(Kt||[]).forEach(Qe=>{He[Qe.id]=(Qe.nome||`Mesa ${Qe.numero||""}`).trim()})}(Oe||[]).forEach(jt=>{let Kt="";const Qe=String(jt?.tipo||"").toLowerCase();Qe==="balcao"||Qe==="balco"?Kt="Balco":Qe==="mesa"||jt.mesa_id?Kt=He[jt.mesa_id]||"Mesa":Qe==="agendamento"&&(Kt="Agendamento"),U[jt.id]=Kt})}let le=_t.map(we=>({...we,origem:we.comanda_id&&U[we.comanda_id]||""}));try{const we=t?.codigo_empresa;let Oe=[];if(er&&er.size>0){let gt=Pe.from("v_agendamento_participantes").select("id, agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text").in("cliente_id",Array.from(er));we&&(gt=gt.eq("codigo_empresa",we));const{data:pr}=await gt;if(Oe=pr||[],Oe.length===0&&we){let Nt=Pe.from("v_agendamento_participantes").select("id, agendamento_id, cliente_id, valor_cota, status_pagamento, status_pagamento_text").in("cliente_id",Array.from(er));const{data:zt}=await Nt;Oe=zt||[]}}let $e=[...Oe];const He=Array.from(new Set($e.map(gt=>gt.agendamento_id).filter(Boolean)));let jt=new Set;const Kt={};if(He.length>0){let gt=Pe.from("agendamentos").select("id, inicio").in("id",He);we&&(gt=gt.eq("codigo_empresa",we));const{data:pr}=await gt,Nt=tt?new Date(tt).getTime():null,zt=Qt?new Date(Qt).getTime():null;(pr||[]).forEach(Ue=>{const Dt=Ue?.inicio?new Date(Ue.inicio).getTime():null;Dt!=null&&(Nt==null||Dt>=Nt)&&(zt==null||Dt<=zt)&&jt.add(Ue.id),Ue?.id&&(Kt[Ue.id]=Ue.inicio||null)})}$e=$e.filter(gt=>jt.has(gt.agendamento_id));const Qe=new Set;console.debug("[Financeiro][Agendamentos][Detalhe] encontrados:",$e.length),$e.forEach(gt=>{const pr=`${gt.id}`;if(Qe.has(pr))return;Qe.add(pr);const Nt=String(gt.status_pagamento||gt.status_pagamento_text||"pago").toLowerCase();if(["cancelado","estornado"].includes(Nt))return;const zt=gt.finalizadora_nome||gt.metodo||gt.metodo_pagamento||gt.forma_pagamento||"Agendamento";le.push({id:`ag-${gt.id}`,recebido_em:Kt[gt.agendamento_id]||null,finalizadoras:zt?{nome:zt}:null,metodo:zt,origem:"Agendamento",valor:gt.valor_cota})})}catch{}B(le)}finally{q(!1)}},children:[s.jsx(Sr,{children:ee.nome}),s.jsx(Sr,{className:"text-right font-semibold",children:or(ee.valor)})]},`${ee.nome}-${Ie}`))})]})})]})}),s.jsx(rn,{open:X,onOpenChange:Z,children:s.jsxs(Yr,{className:"max-w-5xl w-[95vw] md:w-[90vw] max-h-[85vh] bg-surface text-text-primary border-0 overflow-hidden flex flex-col",children:[s.jsxs(nn,{className:"flex-shrink-0",children:[s.jsx(Xr,{className:"text-lg md:text-xl",children:"Detalhes do Cliente"}),s.jsx(cn,{className:"text-sm md:text-base",children:me?.nome})]}),me?s.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 md:p-4 bg-surface-2 rounded-lg flex-shrink-0",children:[s.jsx("span",{className:"text-sm md:text-base text-text-secondary",children:"Total Pago no Perodo"}),s.jsx("span",{className:"text-lg md:text-2xl font-bold text-success",children:or(me.valor)})]}),J?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Carregando detalhes..."}):L.length===0?s.jsx("div",{className:"text-sm text-text-muted text-center py-8",children:"Sem pagamentos no perodo selecionado."}):s.jsx("div",{className:"flex-1 overflow-auto border border-border rounded-md",children:s.jsxs(cs,{children:[s.jsx(us,{className:"sticky top-0 bg-surface z-10",children:s.jsxs(Qn,{children:[s.jsx(Mr,{className:"text-xs md:text-sm w-[70px] md:w-auto",children:"Data"}),s.jsx(Mr,{className:"text-xs md:text-sm w-[80px] md:w-auto",children:"Finaliz."}),s.jsx(Mr,{className:"text-xs md:text-sm w-[60px] md:w-auto",children:"Origem"}),s.jsx(Mr,{className:"text-right text-xs md:text-sm w-[70px] md:w-auto",children:"Valor"})]})}),s.jsx(ds,{children:L.map(ee=>s.jsxs(Qn,{children:[s.jsx(Sr,{className:"text-xs md:text-sm w-[70px] md:w-auto",children:s.jsx("div",{className:"text-[10px] md:text-xs leading-tight",children:ee.recebido_em?new Date(ee.recebido_em).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):""})}),s.jsx(Sr,{className:"text-xs md:text-sm w-[80px] md:w-auto",children:s.jsx("div",{className:"truncate max-w-[80px] md:max-w-[200px] text-[10px] md:text-xs",title:ee.finalizadoras?.nome||ee.metodo||"",children:ee.finalizadoras?.nome||ee.metodo||""})}),s.jsx(Sr,{className:"text-xs md:text-sm w-[60px] md:w-auto",children:s.jsx("div",{className:"truncate max-w-[60px] md:max-w-[150px] text-[10px] md:text-xs",title:ee.origem||"",children:ee.origem||""})}),s.jsx(Sr,{className:"text-right font-semibold text-xs md:text-sm w-[70px] md:w-auto",children:s.jsx("div",{className:"text-[10px] md:text-xs whitespace-nowrap",children:or(ee.valor)})})]},ee.id))})]})})]}):s.jsx("div",{className:"text-sm text-text-muted py-8 text-center",children:"Nenhum cliente selecionado"})]})})]})})}const nrt={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.06,delayChildren:.05}}},RD={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35}}};function art({children:e,className:t=""}){return s.jsx(ur.div,{variants:RD,className:`fx-card ${t}`,children:e})}const rP=({icon:e,title:t,value:r,subtitle:n,color:a})=>{const i=e;return s.jsxs(ur.div,{variants:RD,className:"bg-surface rounded-lg border-2 border-border hover:border-border-hover p-4 flex flex-col justify-between gap-2 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-text-secondary text-sm font-semibold",children:t}),s.jsx(i,{className:`w-5 h-5 ${a}`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r}),s.jsx("p",{className:"text-xs text-text-muted",children:n})]})]})};function Hq({label:e,...t}){return s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:e}),s.jsx("input",{...t,className:`bg-surface-2 border border-border rounded-md px-3 py-2 text-sm ${t.className||""}`})]})}function irt(){const{toast:e}=ii(),{userProfile:t,authReady:r}=io(),n=y.useRef(!1),[a,i]=y.useState(()=>{try{const q=JSON.parse(localStorage.getItem("quadras:list")||"[]");return Array.isArray(q)?q:[]}catch{return[]}}),[o,l]=y.useState(()=>{try{const q=JSON.parse(localStorage.getItem("quadras:list")||"[]");return!(Array.isArray(q)&&q.length>0)}catch{return!0}}),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[h,m]=y.useState({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),[g,p]=y.useState(""),[v,x]=y.useState(!1),[b,w]=y.useState(null),[_,j]=y.useState({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),[A,P]=y.useState(""),[C,k]=y.useState(!0),[R,E]=y.useState({mostUsed:"-",topClient:"-",totalBookings:"-"});y.useEffect(()=>{if(!c)return;const q=setTimeout(()=>{console.error("[Quadras] add/update stuck >15s",{route:"/quadras",codigo_empresa:t?.codigo_empresa,editingId:b,formQuadra:h,editForm:_})},15e3);return()=>clearTimeout(q)},[c,t?.codigo_empresa,b,h,_]);const I=q=>{if(!q)return null;const[X,Z]=String(q).split(":");return`${X.padStart(2,"0")}:${Z.padStart(2,"0")}:00`},T=q=>{const X=String(q??"").replace(/\D/g,"");if(!X)return"";const Z=(Number(X)/100).toFixed(2),[pe,te]=Z.split(".");return`${pe.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${te}`},M=q=>{if(q==null||q==="")return NaN;const X=String(q).replace(/\./g,"").replace(",","."),Z=parseFloat(X);return Number.isFinite(Z)?Z:NaN},z=(q,X=!1)=>{if(q==null||!Number.isFinite(Number(q)))return"-";const pe=Number(q).toFixed(2).split("."),te=pe[0],ve=pe[1],he=`${te.replace(/\B(?=(\d{3})+(?!\d))/g,".")},${ve}`;return X?`R$ ${he}`:he},V=q=>{if(!q)return"";const[X,Z]=String(q).split(":");return`${String(X).padStart(2,"0")}:${String(Z).padStart(2,"0")}`},W=q=>{if(!q)return 0;const[X,Z]=String(q).split(":").map(Number);return(X||0)*60+(Z||0)},$=q=>{if(!q)return!1;const X=String(q).split(":");if(X.length<2)return!1;const Z=Number(X[1]);return Z===0||Z===30},G=q=>{if(!q)return"";const[X,Z]=String(q).split(":");let pe=Math.max(0,Math.min(23,parseInt(X||"0",10))),te=Math.max(0,Math.min(59,parseInt(Z||"0",10)));const ve=Math.round(te/30);if(ve>=2?(pe+=1,te=0):te=ve*30,pe>=24)return"23:59";const Ce=String(pe).padStart(2,"0"),he=String(te).padStart(2,"0");return`${Ce}:${he}`},me=async()=>{if(!t?.codigo_empresa)return;const q=a&&a.length>0;q||l(!0);const{data:X,error:Z}=await Pe.from("quadras").select("*").eq("codigo_empresa",t.codigo_empresa).order("nome",{ascending:!0});if(Z){if(!n.current){n.current=!0,setTimeout(me,800),q||l(!1);return}e({title:"Erro ao carregar quadras",description:Z.message}),q||l(!1);return}const pe=X||[];if(pe.length===0&&q&&!n.current){n.current=!0,setTimeout(me,600),q||l(!1);return}n.current=!1,i(pe);try{localStorage.setItem("quadras:list",JSON.stringify(pe))}catch{}q||l(!1)},de=q=>{w(q.id),j({nome:q.nome||"",modalidades:Array.isArray(q.modalidades)?q.modalidades:q.modalidades?[q.modalidades]:[],tipo:q.tipo||"Descoberta",status:q.status||"Ativa",hora_inicio:V(q.hora_inicio||"06:00:00"),hora_fim:V(q.hora_fim||"24:00:00")||"23:59",valor_hora:q.valor!=null&&q.valor!==""?T(String((Number(q.valor)*2).toFixed(2))):""}),P(""),x(!0)},L=async()=>{if(!_.nome?.trim()){e({title:"Nome obrigatrio",description:"Informe um nome para a quadra."});return}if(!_.hora_inicio||!_.hora_fim){e({title:"Horrio obrigatrio",description:"Informe horrio de abertura e fechamento."});return}if(!$(_.hora_inicio)||!$(_.hora_fim)){e({title:"Intervalo invlido",description:"Use apenas horrios em horas cheias ou :30."});return}if(W(_.hora_fim)<=W(_.hora_inicio)){e({title:"Horrio invlido",description:"Fechamento deve ser depois da abertura."});return}if(!_.modalidades?.length){e({title:"Adicione ao menos uma modalidade",description:"Informe e adicione uma modalidade usando o boto +."});return}if(!t?.codigo_empresa||!b){e({title:"Atualizao indisponvel",description:"Dados insuficientes para atualizar."});return}u(!0);const q={nome:_.nome.trim(),modalidades:_.modalidades,tipo:_.tipo,status:_.status,hora_inicio:I(_.hora_inicio),hora_fim:I(_.hora_fim==="24:00"?"23:59":_.hora_fim)};if(_.valor_hora!=null&&String(_.valor_hora).trim()!==""){const te=M(_.valor_hora);!Number.isNaN(te)&&Number.isFinite(te)&&(q.valor=Math.round(te/2*100)/100)}else q.valor=null;const X=(te,ve)=>Promise.race([te,new Promise((Ce,he)=>setTimeout(()=>he(new Error("Timeout ao atualizar quadra (>12s)")),ve))]);let Z,pe;try{({data:Z,error:pe}=await X(Pe.from("quadras").update(q).eq("codigo_empresa",t.codigo_empresa).eq("id",b).select("id,nome,modalidades,tipo,status,hora_inicio,hora_fim,valor").single(),12e3))}catch(te){console.error("update timeout/error",te),e({title:"Tempo excedido",description:"Sem resposta do servidor ao atualizar. Verifique conexo e tente novamente."}),u(!1);return}if(u(!1),pe){e({title:"Erro ao atualizar quadra",description:pe.message});return}if(!Z){await me(),e({title:"Quadra atualizada",description:`${q.nome} foi atualizada.`}),x(!1),w(null),P("");return}e({title:"Quadra atualizada",description:`${Z.nome} foi atualizada.`}),x(!1),w(null),P(""),i(te=>te.map(ve=>ve.id===Z.id?Z:ve).sort((ve,Ce)=>ve.nome.localeCompare(Ce.nome)))};y.useEffect(()=>{try{const q=JSON.parse(localStorage.getItem("quadras:list")||"[]");Array.isArray(q)&&q.length&&a.length===0&&(i(q),l(!1))}catch{}},[]),y.useEffect(()=>{r&&t?.codigo_empresa&&(me(),B())},[r,t?.codigo_empresa]);const B=async()=>{if(t?.codigo_empresa)try{const q=new Date;q.setDate(q.getDate()-30);const{data:X}=await Pe.from("agendamentos").select("quadra_id, cliente_id, quadras!inner(nome), clientes(nome)").eq("codigo_empresa",t.codigo_empresa).gte("inicio",q.toISOString()).neq("status","canceled");if(!X||X.length===0){E({mostUsed:"Sem dados",topClient:"Sem dados",totalBookings:"0"});return}const Z={};X.forEach(Ce=>{const he=Ce.quadras?.nome||"Sem nome";Z[he]=(Z[he]||0)+1});const pe=Object.entries(Z).sort((Ce,he)=>he[1]-Ce[1])[0],te={};X.forEach(Ce=>{if(Ce.cliente_id&&Ce.clientes?.nome){const he=Ce.clientes.nome;te[he]=(te[he]||0)+1}});const ve=Object.entries(te).sort((Ce,he)=>he[1]-Ce[1])[0];E({mostUsed:pe?`${pe[0]} (${pe[1]})`:"Sem dados",topClient:ve?`${ve[0]} (${ve[1]})`:"Sem dados",totalBookings:X.length.toString()})}catch(q){console.error("Erro ao carregar stats:",q),E({mostUsed:"Erro",topClient:"Erro",totalBookings:"0"})}},J=async()=>{if(console.groupCollapsed("[Quadras] addQuadra: CLICK"),console.time("[Quadras] addQuadra duration"),console.log("pre-validate",{codigo_empresa:t?.codigo_empresa,formQuadra:h}),!h.nome?.trim()){e({title:"Nome obrigatrio",description:"Informe um nome para a quadra."}),console.warn("validation: missing nome"),console.groupEnd();return}if(!h.modalidades?.length){e({title:"Adicione ao menos uma modalidade",description:"Informe e adicione uma modalidade usando o boto +."});return}if(!h.hora_inicio||!h.hora_fim){e({title:"Horrio obrigatrio",description:"Informe horrio de abertura e fechamento."});return}if(!$(h.hora_inicio)||!$(h.hora_fim)){e({title:"Intervalo invlido",description:"Use apenas horrios em horas cheias ou :30."});return}if(W(h.hora_fim)<=W(h.hora_inicio)){e({title:"Horrio invlido",description:"Fechamento deve ser depois da abertura."});return}if(!t?.codigo_empresa){e({title:"Empresa no localizada",description:"Associe o usurio a uma empresa para cadastrar quadras."});return}u(!0),console.log("validated, building payload");const q={codigo_empresa:t.codigo_empresa,nome:h.nome.trim(),modalidades:h.modalidades,tipo:h.tipo,status:h.status,hora_inicio:I(h.hora_inicio),hora_fim:I(h.hora_fim==="24:00"?"23:59":h.hora_fim)};if(h.valor_hora!=null&&String(h.valor_hora).trim()!==""){const te=M(h.valor_hora);!Number.isNaN(te)&&Number.isFinite(te)&&(q.valor=Math.round(te/2*100)/100)}console.log("payload",q);const X=(te,ve)=>Promise.race([te,new Promise((Ce,he)=>setTimeout(()=>he(new Error("Timeout ao inserir quadra (>12s)")),ve))]);let Z,pe;try{({data:Z,error:pe}=await X(Pe.from("quadras").insert(q).select("id,nome,modalidades,tipo,status,hora_inicio,hora_fim,valor").single(),12e3))}catch(te){u(!1),console.error("insert timeout/error",te),e({title:"Tempo excedido",description:"Sem resposta do servidor ao cadastrar. Verifique conexo e tente novamente."}),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}if(u(!1),pe){e({title:"Erro ao cadastrar quadra",description:pe.message}),console.error("insert error",{code:pe.code,message:pe.message,details:pe.details}),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}if(!Z){console.warn("insert success sem representao; recarregando lista"),await me(),e({title:"Quadra adicionada",description:`${q.nome} foi cadastrada.`}),m({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),f(!1),p(""),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd();return}console.log("insert success",{id:Z?.id,nome:Z?.nome}),e({title:"Quadra adicionada",description:`${Z.nome} foi cadastrada.`}),m({nome:"",modalidades:[],tipo:"Descoberta",status:"Ativa",hora_inicio:"06:00",hora_fim:"23:59",valor_hora:""}),f(!1),p(""),i(te=>[Z,...te].sort((ve,Ce)=>ve.nome.localeCompare(Ce.nome))),console.timeEnd("[Quadras] addQuadra duration"),console.groupEnd()};return s.jsx(s.Fragment,{children:s.jsxs(ur.div,{variants:nrt,initial:"hidden",animate:"visible",className:"space-y-6",children:[s.jsxs(ur.div,{variants:RD,className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-text-primary tracking-tighter",children:"Controle de Quadras"}),s.jsx("p",{className:"text-text-secondary",children:"Gerencie as quadras e horrios disponveis."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ae,{variant:"outline",size:"icon",onClick:()=>k(q=>!q),title:C?"Ocultar resumo":"Mostrar resumo","aria-label":C?"Ocultar resumo":"Mostrar resumo",children:C?s.jsx(Sb,{className:"h-4 w-4"}):s.jsx(_b,{className:"h-4 w-4"})}),s.jsx(Ae,{onClick:()=>f(!0),className:"shadow-sm",children:"Adicionar Quadra"})]})]}),C&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx(rP,{icon:Cb,title:"Quadra Mais Usada",value:R.mostUsed,subtitle:"ltimos 30 dias",color:"text-brand"}),s.jsx(rP,{icon:ps,title:"Cliente Top",value:R.topClient,subtitle:"Mais agendamentos no ms",color:"text-purple"}),s.jsx(rP,{icon:Nb,title:"Total de Agendamentos",value:R.totalBookings,subtitle:"ltimos 30 dias",color:"text-success"})]}),s.jsxs(art,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Quadras"}),s.jsx("div",{className:"text-xs text-text-muted",children:o?"Carregando...":`${a.length} registro(s)`})]}),!o&&a.length===0?s.jsxs("div",{className:"text-sm text-text-muted py-8 text-center",children:[s.jsx("div",{className:"font-medium mb-1",children:"Nenhuma quadra cadastrada"}),s.jsx("div",{className:"mb-4",children:'Clique em "Adicionar Quadra" para cadastrar a primeira.'}),s.jsx(Ae,{onClick:()=>f(!0),children:"Adicionar Quadra"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden space-y-3",children:a.map(q=>s.jsxs("div",{className:"rounded-lg border border-border bg-surface p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("span",{className:"inline-block w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:yf(q.nome),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"},"aria-hidden":"true"}),s.jsx("span",{className:"font-semibold text-base text-text-primary truncate",children:q.nome})]}),s.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs border flex-shrink-0 ${q.status==="Ativa"?"bg-emerald-50/5 border-emerald-500/30 text-emerald-400":q.status==="Manuteno"?"bg-amber-50/5 border-amber-500/30 text-amber-400":"bg-surface-2 border-border text-text-muted"}`,children:q.status})]}),Array.isArray(q.modalidades)&&q.modalidades.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted mb-1 block",children:"Modalidades"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:q.modalidades.map(X=>s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-xs",children:X},X))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Valor/hora"}),s.jsx("span",{className:"text-sm font-medium",children:q.valor==null||q.valor===""?"-":z(Number(q.valor)*2,!0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-text-muted block mb-1",children:"Funcionamento"}),s.jsxs("span",{className:"text-sm font-medium",children:[V(q.hora_inicio)," - ",V(q.hora_fim==="24:00:00"?"23:59:00":q.hora_fim)]})]})]}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>de(q),className:"w-full",children:"Editar Quadra"})]},q.id))}),s.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-border bg-surface-0",children:s.jsxs(cs,{children:[s.jsx(us,{className:"bg-surface-2/60 backdrop-blur supports-[backdrop-filter]:bg-surface-2/70",children:s.jsxs(Qn,{children:[s.jsx(Mr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Nome"}),s.jsx(Mr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Modalidades"}),s.jsx(Mr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Valor por hora"}),s.jsx(Mr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Funcionamento"}),s.jsx(Mr,{className:"text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Status"}),s.jsx(Mr,{className:"text-right text-[11px] md:text-xs uppercase tracking-wide text-text-muted",children:"Aes"})]})}),s.jsx(ds,{children:a.map(q=>s.jsxs(Qn,{className:"hover:bg-surface-2/40 transition-colors",children:[s.jsx(Sr,{className:"font-medium text-sm md:text-base text-text-primary",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:yf(q.nome),boxShadow:"0 0 0 2px rgba(255,255,255,0.06)"},"aria-hidden":"true"}),s.jsx("span",{children:q.nome})]})}),s.jsx(Sr,{className:"text-sm md:text-base",children:Array.isArray(q.modalidades)&&q.modalidades.length>0?s.jsx("div",{className:"flex flex-wrap gap-1",children:q.modalidades.map(X=>s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-[11px] md:text-xs",children:X},X))}):q.modalidades||""}),s.jsx(Sr,{className:"text-sm md:text-base",children:q.valor==null||q.valor===""?"-":s.jsx("span",{className:"inline-flex px-2 py-0.5 rounded-full bg-surface-2 border border-border text-[11px] md:text-xs",children:z(Number(q.valor)*2,!0)})}),s.jsxs(Sr,{className:"text-sm md:text-base",children:[V(q.hora_inicio)," - ",V(q.hora_fim==="24:00:00"?"23:59:00":q.hora_fim)]}),s.jsx(Sr,{className:"text-sm md:text-base",children:s.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-[11px] md:text-xs border ${q.status==="Ativa"?"bg-emerald-50/5 border-emerald-500/30 text-emerald-400":q.status==="Manuteno"?"bg-amber-50/5 border-amber-500/30 text-amber-400":"bg-surface-2 border-border text-text-muted"}`,children:q.status})}),s.jsx(Sr,{className:"text-right",children:s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>de(q),className:"text-sm",children:"Editar"})})]},q.id))})]})})]})]}),s.jsx(rn,{open:d,onOpenChange:f,children:s.jsxs(Yr,{className:"sm:max-w-[520px]",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Adicionar Quadra"}),s.jsx(cn,{children:"Cadastre uma nova quadra da sua empresa."})]}),s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(Hq,{label:"Nome",value:h.nome,onChange:q=>m({...h,nome:q.target.value}),placeholder:"Ex.: Quadra Society 2"}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Modalidades"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:g,onChange:q=>p(q.target.value),onKeyDown:q=>{if(q.key==="Enter"){q.preventDefault();const X=g.trim();if(!X)return;m(Z=>Z.modalidades.some(te=>te.toLowerCase()===X.toLowerCase())?Z:{...Z,modalidades:[...Z.modalidades,X]}),p("")}},placeholder:"Ex.: Society",className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-60 sm:w-72 focus:outline-none focus:ring-2 focus:ring-primary/30"}),s.jsx(Ae,{type:"button",variant:"secondary",className:"bg-amber-500 hover:bg-amber-400 text-black disabled:opacity-50 disabled:cursor-not-allowed",disabled:!g.trim(),onClick:()=>{const q=g.trim();q&&(m(X=>X.modalidades.some(pe=>pe.toLowerCase()===q.toLowerCase())?X:{...X,modalidades:[...X.modalidades,q]}),p(""))},"aria-label":"Adicionar modalidade",title:"Adicionar modalidade",children:"+"})]}),h.modalidades.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:h.modalidades.map(q=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border bg-surface-2 text-xs",children:[s.jsx("span",{className:"px-0.5",children:q}),s.jsx("button",{type:"button",className:"text-text-muted hover:text-destructive/80",onClick:()=>m(X=>({...X,modalidades:X.modalidades.filter(Z=>Z!==q)})),"aria-label":`Remover ${q}`,title:`Remover ${q}`,children:""})]},q))})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Tipo"}),s.jsxs("select",{value:h.tipo,onChange:q=>m({...h,tipo:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Descoberta"}),s.jsx("option",{children:"Coberta"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Valor por hora (R$)"}),s.jsx("input",{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:h.valor_hora,onChange:q=>m({...h,valor_hora:T(q.target.value)}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-40"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Abertura"}),s.jsx("input",{type:"time",step:"1800",value:h.hora_inicio,onChange:q=>m({...h,hora_inicio:q.target.value}),onBlur:q=>m(X=>({...X,hora_inicio:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Fechamento"}),s.jsx("input",{type:"time",step:"1800",value:h.hora_fim,onChange:q=>m({...h,hora_fim:q.target.value}),onBlur:q=>m(X=>({...X,hora_fim:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Status"}),s.jsxs("select",{value:h.status,onChange:q=>m({...h,status:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Ativa"}),s.jsx("option",{children:"Inativa"}),s.jsx("option",{children:"Manuteno"})]})]})]}),s.jsx(Dn,{children:s.jsx(Ae,{onClick:J,disabled:c||h.modalidades.length===0,children:c?"Adicionando...":"Salvar"})})]})}),s.jsx(rn,{open:v,onOpenChange:x,children:s.jsxs(Yr,{className:"sm:max-w-[520px]",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Editar Quadra"}),s.jsx(cn,{children:"Atualize os dados da quadra selecionada."})]}),s.jsxs("div",{className:"grid gap-4 py-2",children:[s.jsx(Hq,{label:"Nome",value:_.nome,onChange:q=>j({..._,nome:q.target.value}),placeholder:"Ex.: Quadra Society 2"}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Modalidades"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:A,onChange:q=>P(q.target.value),onKeyDown:q=>{if(q.key==="Enter"){q.preventDefault();const X=A.trim();if(!X)return;j(Z=>Z.modalidades.some(te=>te.toLowerCase()===X.toLowerCase())?Z:{...Z,modalidades:[...Z.modalidades,X]}),P("")}},placeholder:"Ex.: Society",className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-60 sm:w-72 focus:outline-none focus:ring-2 focus:ring-primary/30"}),s.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>{const q=A.trim();q&&(j(X=>X.modalidades.some(pe=>pe.toLowerCase()===q.toLowerCase())?X:{...X,modalidades:[...X.modalidades,q]}),P(""))},children:"+"})]}),_.modalidades.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:_.modalidades.map(q=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border bg-surface-2 text-xs",children:[s.jsx("span",{className:"px-0.5",children:q}),s.jsx("button",{type:"button",className:"text-text-muted hover:text-destructive/80",onClick:()=>j(X=>({...X,modalidades:X.modalidades.filter(Z=>Z!==q)})),"aria-label":`Remover ${q}`,title:`Remover ${q}`,children:""})]},q))})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Tipo"}),s.jsxs("select",{value:_.tipo,onChange:q=>j({..._,tipo:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Descoberta"}),s.jsx("option",{children:"Coberta"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Valor por hora (R$)"}),s.jsx("input",{type:"text",inputMode:"decimal",step:"0.01",placeholder:"0,00",value:_.valor_hora,onChange:q=>j({..._,valor_hora:T(q.target.value)}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm w-40"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Abertura"}),s.jsx("input",{type:"time",step:"1800",value:_.hora_inicio,onChange:q=>j({..._,hora_inicio:q.target.value}),onBlur:q=>j(X=>({...X,hora_inicio:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Fechamento"}),s.jsx("input",{type:"time",step:"1800",value:_.hora_fim,onChange:q=>j({..._,hora_fim:q.target.value}),onBlur:q=>j(X=>({...X,hora_fim:G(q.target.value)})),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm"})]})]}),s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Status"}),s.jsxs("select",{value:_.status,onChange:q=>j({..._,status:q.target.value}),className:"bg-surface-2 border border-border rounded-md px-3 py-2 text-sm",children:[s.jsx("option",{children:"Ativa"}),s.jsx("option",{children:"Inativa"}),s.jsx("option",{children:"Manuteno"})]})]})]}),s.jsx(Dn,{children:s.jsx(Ae,{onClick:L,disabled:c||_.modalidades.length===0,children:c?"Salvando...":"Salvar alteraes"})})]})})]})})}const ort={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.06,delayChildren:.05}}},srt={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35}}};function Gq({children:e,className:t=""}){return s.jsx(ur.div,{variants:srt,className:`fx-card ${t}`,children:e})}function zp({label:e,...t}){return s.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:e}),s.jsx("input",{...t,className:`bg-surface-2 border border-border rounded-md px-3 py-2 text-sm ${t.className||""}`})]})}function lrt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,18)}function crt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,15)}function urt(){const{toast:e}=ii(),{company:t,userProfile:r,reloadCompany:n}=io(),[a,i]=y.useState(!1),[o,l]=y.useState({razao_social:"",nome_fantasia:"",cnpj:"",email:"",telefone:"",endereco:"",logo_url:""}),c=y.useRef(null),[u,d]=y.useState(""),f=y.useRef(!0);y.useEffect(()=>(f.current=!0,()=>{f.current=!1}),[]),y.useEffect(()=>{(async()=>{try{const p=r?.codigo_empresa||null;if(!p)return;const v=`empresa:form:${p}`;try{const j=localStorage.getItem(v);if(j){const A=JSON.parse(j);A&&typeof A=="object"&&(l(P=>({...P,...A})),A.logo_url&&d(`${A.logo_url.split("?")[0]}?v=${Date.now()}`))}}catch{}const x=setTimeout(()=>{if(f.current)try{const j=localStorage.getItem(v);if(j){const A=JSON.parse(j);A&&typeof A=="object"&&(console.warn("[Empresas] slow fallback: using cached form"),l(P=>({...P,...A})),A.logo_url&&d(`${A.logo_url.split("?")[0]}?v=${Date.now()}`))}}catch{}},5e3),{data:b,error:w}=await Pe.from("empresas").select("*").eq("codigo_empresa",p).single();if(clearTimeout(x),w)throw w;if(!f.current)return;const _={razao_social:b?.razao_social||"",nome_fantasia:b?.nome_fantasia||b?.nome||"",cnpj:b?.cnpj||"",email:b?.email||"",telefone:b?.telefone||"",endereco:b?.endereco||"",logo_url:b?.logo_url||""};l(_),d(_.logo_url?`${_.logo_url.split("?")[0]}?v=${Date.now()}`:"");try{localStorage.setItem(v,JSON.stringify(_))}catch{}}catch(p){console.warn("Falha ao carregar empresa:",p)}})()},[r?.codigo_empresa]),y.useEffect(()=>{if(!o.logo_url){d("");return}const g=o.logo_url.split("?")[0];d(`${g}?v=${Date.now()}`)},[o.logo_url]);const h=async g=>{if(g.preventDefault(),!a){if(!o.razao_social?.trim()||!o.cnpj?.trim()){e({title:"Campos obrigatrios",description:"Preencha Razo Social e CNPJ."});return}if(!r?.codigo_empresa){e({title:"Empresa no vinculada",description:"No foi possvel identificar a empresa do usurio para salvar."});return}try{i(!0);const p={razao_social:o.razao_social||null,nome_fantasia:o.nome_fantasia||null,cnpj:o.cnpj?.replace(/\D/g,"")||null,email:o.email||null,telefone:o.telefone||null,endereco:o.endereco||null,logo_url:o.logo_url||null},{error:v}=await Pe.from("empresas").update(p).eq("codigo_empresa",r.codigo_empresa).select("id").single();if(v)throw v;await n?.(),e({title:"Dados salvos",description:"As informaes da empresa foram atualizadas."})}catch(p){console.error(p);const v=(p?.message||p?.hint||"").toString()||"No foi possvel salvar os dados. Verifique as permisses e tente novamente.";e({title:"Erro ao salvar",description:v})}finally{i(!1)}}},m=async g=>{try{const p=g.target.files?.[0];if(!p)return;if(!r?.codigo_empresa){e({title:"Empresa no vinculada",description:"Seu usurio no est associado a uma empresa."});return}const v=p.name.split(".").pop()?.toLowerCase()||"png",x=`${r.codigo_empresa}/logo.${v}`,{error:b}=await Pe.storage.from("logos").upload(x,p,{upsert:!0,contentType:p.type||void 0});if(b)throw b;const{data:w}=Pe.storage.from("logos").getPublicUrl(x),_=w?.publicUrl||"";l(j=>({...j,logo_url:_})),d(_?`${_}?v=${Date.now()}`:""),e({title:"Logo enviada",description:"A imagem foi carregada com sucesso. Lembre-se de salvar."})}catch(p){console.error("Falha no upload da logo:",p),e({title:"Erro no upload",description:"No foi possvel enviar a logo. Tente outro arquivo."})}finally{c.current&&(c.current.value="")}};return s.jsx(s.Fragment,{children:s.jsxs(ur.div,{variants:ort,initial:"hidden",animate:"visible",className:"space-y-6",children:[s.jsx(Gq,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Cadastros  Empresa"})})}),s.jsxs(Gq,{children:[s.jsx("h2",{className:"text-lg font-bold text-text-primary mb-4",children:"Dados da Empresa"}),s.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(zp,{label:"Razo Social",value:o.razao_social,onChange:g=>l({...o,razao_social:g.target.value}),placeholder:"Ex.: Fluxo7 Arena LTDA"}),s.jsx(zp,{label:"Nome Fantasia",value:o.nome_fantasia,onChange:g=>l({...o,nome_fantasia:g.target.value}),placeholder:"Ex.: Fluxo7 Arena"}),s.jsx(zp,{label:"CNPJ",type:"text",inputMode:"numeric",value:o.cnpj,onChange:g=>l({...o,cnpj:lrt(g.target.value)}),placeholder:"00.000.000/0000-00"}),s.jsx(zp,{label:"Email",type:"email",value:o.email,onChange:g=>l({...o,email:g.target.value}),placeholder:"contato@empresa.com"}),s.jsx(zp,{label:"Telefone",type:"tel",inputMode:"tel",value:o.telefone,onChange:g=>l({...o,telefone:crt(g.target.value)}),placeholder:"(11) 99999-9999"}),s.jsx(zp,{label:"Endereo",value:o.endereco,onChange:g=>l({...o,endereco:g.target.value}),placeholder:"Rua, nmero, bairro, cidade",className:"md:col-span-2 lg:col-span-2"}),s.jsx("div",{className:"md:col-span-2 lg:col-span-2 grid grid-cols-1 gap-3",children:s.jsxs("div",{className:"flex items-center gap-4",children:[u||o.logo_url?s.jsx("img",{src:u||o.logo_url,alt:"Logo da empresa",className:"w-16 h-16 rounded-md object-cover border border-border"}):s.jsx("div",{className:"w-16 h-16 rounded-md border border-dashed border-border/60 bg-surface-2/40 flex items-center justify-center text-xs text-text-muted",children:"Sem logo"}),s.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[s.jsx("span",{className:"text-xs text-text-muted",children:"Upload da Logo"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ae,{type:"button",variant:"outline",onClick:()=>c.current?.click(),className:"px-3",children:"Escolher imagem"}),s.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:m,className:"hidden"}),(u||o.logo_url)&&s.jsx("span",{className:"text-xs text-text-muted truncate max-w-[260px]",title:o.logo_url||u,children:"Logo selecionada"})]}),s.jsx("span",{className:"text-[11px] text-text-muted",children:"Formatos: PNG/JPG. Tamanho recomendado: 256x256."})]})]})}),s.jsx("div",{className:"flex items-end",children:s.jsx(Ae,{type:"submit",className:"w-full md:w-auto",disabled:a,children:a?"Salvando...":"Salvar"})})]})]})]})})}const drt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},p2={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},Kq=[{codigo:"01",nome:"Dinheiro"},{codigo:"02",nome:"Cheque"},{codigo:"03",nome:"Carto de Crdito"},{codigo:"04",nome:"Carto de Dbito"},{codigo:"05",nome:"Carto da Loja (Private Label)"},{codigo:"10",nome:"Vale Alimentao"},{codigo:"11",nome:"Vale Refeio"},{codigo:"12",nome:"Vale Presente"},{codigo:"13",nome:"Vale Combustvel"},{codigo:"14",nome:"Duplicata Mercantil"},{codigo:"15",nome:"Boleto Bancrio"},{codigo:"16",nome:"Depsito Bancrio"},{codigo:"17",nome:"PIX Dinmico (QR-Code)"},{codigo:"18",nome:"Transferncia Bancria / Carteira Digital"},{codigo:"19",nome:"Programa de Fidelidade / Cashback"},{codigo:"20",nome:"PIX Esttico"},{codigo:"21",nome:"Crdito em Loja"},{codigo:"22",nome:"Pagamento Eletrnico no Informado"},{codigo:"90",nome:"Sem Pagamento"},{codigo:"99",nome:"Outros"}],nP=({icon:e,title:t,value:r,subtitle:n,color:a,onClick:i,isActive:o})=>s.jsx(ur.div,{variants:p2,onClick:i,className:Et("bg-surface rounded-lg border md:border-2 p-3 md:p-4 transition-all text-center h-[90px] md:h-auto",i?"cursor-pointer hover:shadow-md":"",o?`border-${a} bg-${a}/5`:"border-border",i&&!o?"hover:border-border-hover":""),children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 md:flex-row md:items-center md:gap-3 h-full",children:[s.jsx("div",{className:Et("p-1.5 md:p-2 rounded-lg",`bg-${a}/10`),children:s.jsx(e,{className:Et("w-4 h-4 md:w-5 md:h-5",`text-${a}`)})}),s.jsxs("div",{className:"flex-1 md:text-left",children:[s.jsx("p",{className:"text-base md:text-2xl font-bold text-text-primary leading-none",children:r}),s.jsx("p",{className:"text-[10px] md:text-xs font-semibold text-text-secondary md:mt-0.5",children:t}),s.jsx("p",{className:"hidden md:block text-xs text-text-muted",children:n})]})]})});function frt(){const{toast:e}=ii(),{userProfile:t,authReady:r}=io(),[n,a]=y.useState([]),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(""),[f,h]=y.useState("all"),[m,g]=y.useState("all"),[p,v]=y.useState(!0),[x,b]=y.useState(null),[w,_]=y.useState(!1),[j,A]=y.useState(null),[P,C]=y.useState({codigo_interno:"",codigo_sefaz:"",nome:"",taxa_percentual:"",ativo:!0}),[k,R]=y.useState(!1),[E,I]=y.useState(null),[T,M]=y.useState(null),[z,V]=y.useState(!1),[W,$]=y.useState("mes"),[G,me]=y.useState(!1),[de,L]=y.useState([]),[B,J]=y.useState("customizado"),[q,X]=y.useState(""),[Z,pe]=y.useState(""),[te,ve]=y.useState(!1),[Ce,he]=y.useState(!1);y.useEffect(()=>{const Ee=()=>{try{he(typeof window<"u"&&window.innerWidth<=640)}catch{}};return Ee(),window.addEventListener("resize",Ee),()=>window.removeEventListener("resize",Ee)},[]);const qe=async()=>{try{o(!0);const Ee=t?.codigo_empresa;if(!Ee)return;const Ke=await kg({somenteAtivas:!1,codigoEmpresa:Ee});console.log(" Finalizadoras carregadas:",Ke),console.log(" Primeira finalizadora:",Ke?.[0]),a(Array.isArray(Ke)?Ke:[])}catch(Ee){e({title:"Erro ao carregar",description:Ee?.message,variant:"destructive"})}finally{o(!1)}},ye=y.useMemo(()=>{const Ee=n.length,Ke=n.filter(kt=>kt.ativo).length,Ge=n.length>0?n.reduce((kt,yt)=>{const je=yt.nome||"Sem nome";return kt[je]=(kt[je]||0)+1,kt},{}):{},bt=Object.entries(Ge).sort((kt,yt)=>yt[1]-kt[1])[0],ot=bt?bt[0]:"-";return{total:Ee,ativas:Ke,maisUsada:ot}},[n]),ce=y.useMemo(()=>{let Ee=[...n];if(u){const Ke=u.toLowerCase();Ee=Ee.filter(Ge=>{const bt=String(Ge.tipo||"").toLowerCase(),ot=String(Ge.nome||"").toLowerCase(),kt=String(Ge.codigo_interno||"").toLowerCase(),yt=Ke.replace(/\D/g,""),je=String(Ge.codigo_interno||"").replace(/\D/g,"");return bt.includes(Ke)||ot.includes(Ke)||kt.includes(Ke)||!!yt&&je===yt})}return f!=="all"&&(Ee=Ee.filter(Ke=>Ke.tipo===f)),m!=="all"&&(Ee=Ee.filter(Ke=>m==="active"?Ke.ativo:!Ke.ativo)),x==="ativas"&&(Ee=Ee.filter(Ke=>Ke.ativo)),Ee.sort((Ke,Ge)=>{const bt=parseInt(Ke.codigo_interno)||0,ot=parseInt(Ge.codigo_interno)||0;return bt-ot}),Ee},[n,u,f,m,x]),Ft=()=>{A(null);const Ee=n.reduce((Ge,bt)=>{const ot=parseInt(bt.codigo_interno)||0;return ot>Ge?ot:Ge},0),Ke=String(Ee+1).padStart(2,"0");C({codigo_interno:Ke,codigo_sefaz:"",nome:"",taxa_percentual:"",ativo:!0}),_(!0)},qt=Ee=>{A(Ee),C({codigo_interno:Ee.codigo_interno||"",codigo_sefaz:Ee.codigo_sefaz||"",nome:Ee.nome||"",taxa_percentual:Ee.taxa_percentual!=null?String(Ee.taxa_percentual):"",ativo:Ee.ativo!==!1}),_(!0)},It=async(Ee,Ke="mes")=>{try{V(!0);const Ge=t?.codigo_empresa;if(!Ge)return;const bt=new Date;let ot,kt=bt.toISOString();switch(Ke){case"hoje":ot=new Date(bt.setHours(0,0,0,0)).toISOString();break;case"semana":ot=new Date(bt.setDate(bt.getDate()-7)).toISOString();break;case"mes":ot=new Date(bt.setMonth(bt.getMonth()-1)).toISOString();break;default:ot=new Date(bt.setMonth(bt.getMonth()-1)).toISOString()}const{data:yt,error:je}=await Pe.from("pagamentos").select("valor, recebido_em, status").eq("finalizadora_id",Ee).eq("codigo_empresa",Ge).gte("recebido_em",ot).lte("recebido_em",kt).neq("status","Cancelado").neq("status","Estornado");if(je)throw je;const We=yt?.length||0,Ot=yt?.reduce((Rt,Lt)=>Rt+(Number(Lt.valor)||0),0)||0,Ve=We>0?Ot/We:0,nt=yt?.[yt.length-1]?.recebido_em||null;M({transacoes:We,faturamento:Ot,ticketMedio:Ve,ultimaUtilizacao:nt})}catch(Ge){console.error("Erro ao carregar estatsticas:",Ge),e({title:"Erro ao carregar estatsticas",description:Ge?.message,variant:"destructive"})}finally{V(!1)}},et=async(Ee="customizado",Ke=null,Ge=null)=>{try{ve(!0);const bt=t?.codigo_empresa;if(!bt)return;let ot,kt;if(Ee==="customizado"&&Ke&&Ge)ot=new Date(Ke).toISOString(),kt=new Date(Ge+"T23:59:59").toISOString();else{const Ve=new Date;switch(kt=Ve.toISOString(),Ee){case"hoje":ot=new Date(Ve.setHours(0,0,0,0)).toISOString();break;case"semana":ot=new Date(Ve.setDate(Ve.getDate()-7)).toISOString();break;case"mes":ot=new Date(Ve.setMonth(Ve.getMonth()-1)).toISOString();break;default:ot=new Date(Ve.setMonth(Ve.getMonth()-1)).toISOString()}}const{data:yt,error:je}=await Pe.from("pagamentos").select("finalizadora_id, valor, finalizadoras!pagamentos_finalizadora_id_fkey(id, codigo_interno, nome)").eq("codigo_empresa",bt).gte("recebido_em",ot).lte("recebido_em",kt).neq("status","Cancelado").neq("status","Estornado");if(je)throw je;const We={};yt?.forEach(Ve=>{const nt=Ve.finalizadora_id;nt&&(We[nt]||(We[nt]={id:nt,codigo:Ve.finalizadoras?.codigo_interno||"-",nome:Ve.finalizadoras?.nome||"Sem nome",total:0,transacoes:0}),We[nt].total+=Number(Ve.valor)||0,We[nt].transacoes+=1)});const Ot=Object.values(We).sort((Ve,nt)=>nt.total-Ve.total);L(Ot)}catch(bt){console.error("Erro ao carregar ranking:",bt),e({title:"Erro ao carregar ranking",description:bt?.message,variant:"destructive"})}finally{ve(!1)}},Ze=()=>{me(!0),J("customizado");const Ee=new Date,Ke=new Date;Ke.setMonth(Ke.getMonth()-1),X(Ke.toISOString().split("T")[0]),pe(Ee.toISOString().split("T")[0]),et("customizado",Ke.toISOString().split("T")[0],Ee.toISOString().split("T")[0])},Pt=Ee=>{I(Ee),R(!0),$("mes"),It(Ee.id,"mes")},ue=async()=>{try{if(!P.nome?.trim()){e({title:"Nome  obrigatrio",variant:"warning"});return}if(!P.codigo_sefaz){e({title:"Cdigo SEFAZ  obrigatrio",variant:"warning"});return}if(P.codigo_interno?.trim()&&n.some(bt=>bt.codigo_interno===P.codigo_interno.trim()&&(!j||bt.id!==j.id))){e({title:"Cdigo j existe",description:"Este cdigo interno j est em uso por outra finalizadora",variant:"warning"});return}c(!0);const Ee=t?.codigo_empresa,Ke={codigo_interno:P.codigo_interno?.trim()||null,codigo_sefaz:P.codigo_sefaz,nome:P.nome.trim(),tipo:"outros",taxa_percentual:P.taxa_percentual===""?null:Number(P.taxa_percentual),ativo:P.ativo};j?(await BWe(j.id,Ke,Ee),e({title:"Finalizadora atualizada!",variant:"success"})):(await FWe(Ke,Ee),e({title:"Finalizadora criada!",variant:"success"})),_(!1),await qe()}catch(Ee){e({title:"Erro ao salvar",description:Ee?.message,variant:"destructive"})}finally{c(!1)}},rt=async Ee=>{try{await zWe(Ee.id,!Ee.ativo,t?.codigo_empresa),e({title:Ee.ativo?"Desativada":"Ativada",variant:"success"}),await qe()}catch(Ke){e({title:"Erro ao alterar status",description:Ke?.message,variant:"destructive"})}};return y.useEffect(()=>{r&&t?.codigo_empresa&&qe()},[r,t?.codigo_empresa]),s.jsxs(s.Fragment,{children:[s.jsxs(ur.div,{variants:drt,initial:"hidden",animate:"visible",className:"flex-1 space-y-6 p-4 md:p-6",children:[s.jsxs(ur.div,{variants:p2,className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"min-w-0",children:s.jsx("h1",{className:"text-2xl md:text-3xl font-black text-text-primary tracking-tight leading-tight",children:"Finalizadoras"})}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>v(!p),className:"h-9 w-9",children:p?s.jsx(Sb,{className:"h-5 w-5"}):s.jsx(_b,{className:"h-5 w-5"})}),s.jsxs(Ae,{onClick:Ft,className:"gap-2 h-9 px-3 whitespace-nowrap",children:[s.jsx(ri,{className:"h-4 w-4"}),s.jsx("span",{className:"md:hidden",children:"Nova"}),s.jsx("span",{className:"hidden md:inline",children:"Nova Finalizadora"})]})]})]}),p&&s.jsxs("div",{className:"grid grid-cols-3 gap-3 md:grid-cols-3 md:gap-6",children:[s.jsx(nP,{icon:sm,title:"Total",value:ye.total,subtitle:"Finalizadoras cadastradas",color:"brand"}),s.jsx(nP,{icon:Ls,title:"Ativas",value:ye.ativas,subtitle:"Disponveis para uso",color:"success",onClick:()=>b(x==="ativas"?null:"ativas"),isActive:x==="ativas"}),s.jsx(nP,{icon:Nb,title:"Mais Usada",value:ye.maisUsada,subtitle:"Mtodo mais popular",color:"warning",onClick:Ze})]}),s.jsx(ur.div,{variants:p2,className:"bg-surface rounded-lg border border-border p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative min-w-0 basis-0 flex-grow",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar finalizadora...",value:u,onChange:Ee=>d(Ee.target.value),className:"pl-10 h-11"})]}),s.jsxs(kn,{value:m,onValueChange:g,children:[s.jsx(An,{className:"w-[110px] md:w-[180px]",children:s.jsx(On,{placeholder:"Filtrar por status"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"all",children:"Todos"}),s.jsx(Ht,{value:"active",children:"Ativas"}),s.jsx(Ht,{value:"inactive",children:"Inativas"})]})]})]})}),s.jsx(ur.div,{variants:p2,className:"bg-surface rounded-lg border border-border overflow-hidden",children:i?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand border-r-transparent"}),s.jsx("p",{className:"mt-4 text-text-muted",children:"Carregando..."})]}):ce.length===0?s.jsxs("div",{className:"p-12 text-center text-text-muted",children:[s.jsx(sm,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Nenhuma finalizadora encontrada"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden divide-y divide-border",children:ce.map(Ee=>s.jsxs("div",{className:"p-3 flex flex-col gap-2 hover:bg-surface-2/50 cursor-pointer",onClick:()=>Pt(Ee),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-surface-2 border border-border font-mono text-xs text-text-secondary",children:Ee.codigo_interno||"-"}),s.jsx("span",{className:"font-semibold text-sm text-text-primary truncate",title:Ee.nome,children:Ee.nome})]}),s.jsxs("span",{className:Et("inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[11px] font-medium",Ee.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[s.jsx("span",{className:Et("w-1.5 h-1.5 rounded-full",Ee.ativo?"bg-success":"bg-muted")}),Ee.ativo?"Ativa":"Inativa"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("span",{children:["Taxa: ",Ee.taxa_percentual?`${Ee.taxa_percentual}%`:"-"]})}),s.jsxs("div",{className:"flex items-center gap-2",onClick:Ke=>Ke.stopPropagation(),children:[s.jsx(Ae,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>qt(Ee),children:s.jsx(Sm,{className:"h-4 w-4"})}),s.jsx(Ae,{variant:Ee.ativo?"ghost":"default",size:"sm",className:"h-7 px-2",onClick:()=>rt(Ee),children:Ee.ativo?"Desativar":"Ativar"})]})]})]},Ee.id))}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-surface-2 border-b border-border",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Cdigo"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Descrio"}),s.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-text-secondary",children:"Taxa (%)"}),s.jsx("th",{className:"text-center px-6 py-4 text-sm font-semibold text-text-secondary",children:"Status"}),s.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-text-secondary",children:"Aes"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:ce.map(Ee=>s.jsxs("tr",{className:"hover:bg-surface-2/50 transition-colors cursor-pointer",onClick:()=>Pt(Ee),children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-mono text-sm text-text-primary",children:Ee.codigo_interno||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-semibold text-text-primary",children:Ee.nome})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-text-secondary",children:Ee.taxa_percentual?`${Ee.taxa_percentual}%`:"-"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("span",{className:Et("inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium",Ee.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[s.jsx("span",{className:Et("w-2 h-2 rounded-full",Ee.ativo?"bg-success":"bg-muted")}),Ee.ativo?"Ativa":"Inativa"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",onClick:Ke=>Ke.stopPropagation(),children:[s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>qt(Ee),children:s.jsx(Sm,{className:"h-4 w-4"})}),s.jsx(Ae,{variant:Ee.ativo?"ghost":"default",size:"sm",onClick:()=>rt(Ee),children:Ee.ativo?"Desativar":"Ativar"})]})})]},Ee.id))})]})})]})})]}),s.jsx(rn,{open:w,onOpenChange:_,children:s.jsxs(Yr,{className:"sm:max-w-[500px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:j?"Editar Finalizadora":"Nova Finalizadora"}),s.jsx(cn,{children:j?"Atualize as informaes da finalizadora":"Adicione um novo mtodo de pagamento"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ct,{htmlFor:"codigo_interno",children:"Cdigo Finalizadora"}),s.jsx(Mt,{id:"codigo_interno",type:"text",placeholder:"Ex: 01, 02, 03...",value:P.codigo_interno,onChange:Ee=>C({...P,codigo_interno:Ee.target.value})}),s.jsx("p",{className:"text-xs text-text-muted",children:"Gerado automaticamente, mas pode ser editado"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ct,{htmlFor:"nome",children:"Descrio *"}),s.jsx(Mt,{id:"nome",placeholder:"Ex: PIX, Dinheiro, Carto de Crdito...",value:P.nome,onChange:Ee=>C({...P,nome:Ee.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ct,{htmlFor:"codigo_sefaz",children:"Forma de Pagamento NF-e/NFC-e *"}),s.jsxs(kn,{value:P.codigo_sefaz,onValueChange:Ee=>{const Ke=Kq.find(Ge=>Ge.codigo===Ee);C({...P,codigo_sefaz:Ee,nome:P.nome||Ke?.nome||""})},children:[s.jsx(An,{children:s.jsx(On,{placeholder:"Selecione a forma de pagamento"})}),s.jsx(Pn,{className:"max-h-[300px] border-2 border-border bg-surface shadow-xl",position:"popper",sideOffset:5,children:Kq.map(Ee=>s.jsxs(Ht,{value:Ee.codigo,children:[Ee.codigo," - ",Ee.nome]},Ee.codigo))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ct,{htmlFor:"taxa",children:"Taxa"}),s.jsxs("div",{className:"relative",children:[s.jsx(Mt,{id:"taxa",inputMode:"decimal",placeholder:"0,00",className:"pr-10",value:P.taxa_percentual,onChange:Ee=>{const Ke=String(Ee.target.value).replace(/[^0-9.,]/g,"").replace(/,/g,".");if(Ke===""){C({...P,taxa_percentual:""});return}const Ge=Number(Ke);if(Number.isFinite(Ge)){const bt=Math.max(0,Math.min(100,Ge));C({...P,taxa_percentual:String(bt)})}},onBlur:()=>{const Ee=String(P.taxa_percentual||"").replace(/,/g,".");if(Ee==="")return;const Ke=Number(Ee);if(Number.isFinite(Ke)){const Ge=Math.max(0,Math.min(100,Ke));C(bt=>({...bt,taxa_percentual:Ge.toFixed(2)}))}}}),s.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-text-muted text-sm",children:"%"})]}),s.jsx("p",{className:"text-xs text-text-muted",children:"Deixe vazio se no houver taxa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"ativo",checked:P.ativo,onChange:Ee=>C({...P,ativo:Ee.target.checked}),className:"h-4 w-4 rounded border-border"}),s.jsx(ct,{htmlFor:"ativo",className:"text-sm font-normal cursor-pointer",children:"Finalizadora ativa"})]})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>_(!1),disabled:l,children:"Cancelar"}),s.jsx(Ae,{onClick:ue,disabled:l,children:l?"Salvando...":"Salvar"})]})]})}),s.jsx(rn,{open:k,onOpenChange:R,children:s.jsxs(Yr,{className:"sm:max-w-[700px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Detalhes da Finalizadora"}),s.jsx(cn,{children:"Estatsticas e informaes completas"})]}),E&&s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Informaes"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Cdigo Finalizadora"}),s.jsx("p",{className:"font-mono text-sm text-text-primary",children:E.codigo_interno||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Forma de Pagamento NF-e/NFC-e"}),s.jsx("p",{className:"font-mono text-sm text-text-primary",children:E.codigo_sefaz||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Descrio"}),s.jsx("p",{className:"font-medium text-text-primary",children:E.nome})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Taxa"}),s.jsx("p",{className:"font-medium text-text-primary",children:E.taxa_percentual?`${E.taxa_percentual}%`:"Sem taxa"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Status"}),s.jsxs("span",{className:Et("inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs font-medium",E.ativo?"bg-success/10 text-success":"bg-muted/10 text-muted"),children:[s.jsx("span",{className:Et("w-2 h-2 rounded-full",E.ativo?"bg-success":"bg-muted")}),E.ativo?"Ativa":"Inativa"]})]})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Perodo de Anlise"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ae,{variant:W==="hoje"?"default":"outline",size:"sm",onClick:()=>{$("hoje"),It(E.id,"hoje")},children:"Hoje"}),s.jsx(Ae,{variant:W==="semana"?"default":"outline",size:"sm",onClick:()=>{$("semana"),It(E.id,"semana")},children:"7 Dias"}),s.jsx(Ae,{variant:W==="mes"?"default":"outline",size:"sm",onClick:()=>{$("mes"),It(E.id,"mes")},children:"30 Dias"})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-3",children:"Estatsticas de Uso"}),z?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-brand border-t-transparent"})}):T?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Total de Transaes"}),s.jsx("span",{className:"font-semibold text-text-primary",children:T.transacoes})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Faturamento Total"}),s.jsxs("span",{className:"font-semibold text-success",children:["R$ ",T.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"Ticket Mdio"}),s.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",T.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:"ltima Utilizao"}),s.jsx("span",{className:"font-medium text-text-muted",children:T.ultimaUtilizacao?new Date(T.ultimaUtilizacao).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Nunca utilizada"})]})]}):s.jsx("div",{className:"text-center py-8 text-text-muted",children:s.jsx("p",{className:"text-sm",children:"Nenhum dado disponvel"})})]})]}),s.jsxs(Dn,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>R(!1),children:"Fechar"}),s.jsxs(Ae,{onClick:()=>{R(!1),qt(E)},children:[s.jsx(Sm,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]})}),s.jsx(rn,{open:G,onOpenChange:me,children:s.jsxs(Yr,{className:"sm:max-w-[700px] w-[92vw] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Ranking de Finalizadoras"}),s.jsx(cn,{children:"Faturamento por forma de pagamento"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Ae,{variant:B==="hoje"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{J("hoje"),et("hoje")},children:"Hoje"}),s.jsx(Ae,{variant:B==="semana"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{J("semana"),et("semana")},children:"7 Dias"}),s.jsx(Ae,{variant:B==="mes"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>{J("mes"),et("mes")},children:"30 Dias"}),s.jsx(Ae,{variant:B==="customizado"?"default":"outline",size:"sm",className:"flex-1 min-w-[70px]",onClick:()=>J("customizado"),children:"Perodo"})]}),B==="customizado"&&(Ce?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"text-xs",children:"Data Inicial"}),s.jsx("input",{type:"date",className:"mt-1 h-9 w-full rounded-md border border-border bg-surface px-2 text-sm text-text-primary",value:q,onChange:Ee=>X(Ee.target.value)})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"text-xs",children:"Data Final"}),s.jsx("input",{type:"date",className:"mt-1 h-9 w-full rounded-md border border-border bg-surface px-2 text-sm text-text-primary",value:Z,onChange:Ee=>pe(Ee.target.value)})]})]}),s.jsx(Ae,{className:"w-full",onClick:()=>et("customizado",q,Z),disabled:!q||!Z||te,children:te?"Buscando...":"Buscar"})]}):s.jsxs("div",{className:"flex gap-3 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ct,{children:"Data Inicial"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:Et("w-full justify-start text-left font-normal",!q&&"text-text-muted"),children:[s.jsx(gu,{className:"mr-2 h-4 w-4"}),q?new Date(q+"T12:00:00").toLocaleDateString("pt-BR"):"Selecione"]})}),s.jsx(ku,{className:"w-auto p-0 bg-surface border border-border",align:"start",children:s.jsx(bO,{mode:"single",selected:q?new Date(q+"T12:00:00"):void 0,onSelect:Ee=>{if(Ee){const Ke=Ee.getFullYear(),Ge=String(Ee.getMonth()+1).padStart(2,"0"),bt=String(Ee.getDate()).padStart(2,"0");X(`${Ke}-${Ge}-${bt}`)}},className:"p-3"})})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ct,{children:"Data Final"}),s.jsxs(Fd,{children:[s.jsx(Bd,{asChild:!0,children:s.jsxs(Ae,{variant:"outline",className:Et("w-full justify-start text-left font-normal",!Z&&"text-text-muted"),children:[s.jsx(gu,{className:"mr-2 h-4 w-4"}),Z?new Date(Z+"T12:00:00").toLocaleDateString("pt-BR"):"Selecione"]})}),s.jsx(ku,{className:"w-auto p-0 bg-surface border border-border",align:"start",children:s.jsx(bO,{mode:"single",selected:Z?new Date(Z+"T12:00:00"):void 0,onSelect:Ee=>{if(Ee){const Ke=Ee.getFullYear(),Ge=String(Ee.getMonth()+1).padStart(2,"0"),bt=String(Ee.getDate()).padStart(2,"0");pe(`${Ke}-${Ge}-${bt}`)}},className:"p-3"})})]})]}),s.jsx(Ae,{onClick:()=>et("customizado",q,Z),disabled:!q||!Z||te,children:"Buscar"})]}))]}),te?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand border-t-transparent"})}):de.length===0?s.jsx("div",{className:"text-center py-12 text-text-muted",children:s.jsx("p",{children:"Nenhuma transao no perodo selecionado"})}):s.jsx("div",{className:"space-y-3",children:de.map((Ee,Ke)=>s.jsx("div",{className:"bg-surface-2 rounded-lg p-3 md:p-4 border border-border",children:s.jsxs("div",{className:"flex items-start md:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start md:items-center gap-2 md:gap-3 flex-1 min-w-0",children:[s.jsxs("div",{className:Et("flex items-center justify-center w-7 h-7 md:w-8 md:h-8 rounded-full font-bold text-xs md:text-sm flex-shrink-0",Ke===0?"bg-warning/20 text-warning":Ke===1?"bg-info/20 text-info":Ke===2?"bg-success/20 text-success":"bg-muted/20 text-muted"),children:[Ke+1,""]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[s.jsx("span",{className:"font-mono text-[10px] md:text-xs text-text-muted",children:Ee.codigo}),s.jsx("span",{className:"font-semibold text-sm md:text-base text-text-primary truncate",children:Ee.nome})]}),s.jsxs("p",{className:"text-[10px] md:text-xs text-text-muted",children:[Ee.transacoes," transaes"]})]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-base md:text-lg font-bold text-success whitespace-nowrap",children:["R$ ",Ee.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),s.jsxs("p",{className:"text-[10px] md:text-xs text-text-muted whitespace-nowrap",children:["Mdia: R$ ",(Ee.total/Ee.transacoes).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})},Ee.id))})]}),s.jsx(Dn,{children:s.jsx(Ae,{variant:"outline",onClick:()=>me(!1),children:"Fechar"})})]})})]})}function hrt(){return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Pgina de Teste"}),s.jsx("p",{children:"Esta  uma pgina de teste para verificar se o roteamento est funcionando corretamente."})]})}function mrt(e){const t=new URLSearchParams(e.startsWith("#")?e.slice(1):e),r=t.get("access_token"),n=t.get("refresh_token");return{access_token:r,refresh_token:n}}const prt=()=>{const{toast:e}=ii(),t=Vc(),[r,n]=y.useState(""),[a,i]=y.useState(""),[o,l]=y.useState(!1),[c,u]=y.useState(!1),d=y.useMemo(()=>mrt(window.location.hash),[]);y.useEffect(()=>{(async()=>{const{data:{session:m}}=await Pe.auth.getSession();if(m){u(!0);return}if(d.access_token&&d.refresh_token){const{data:g,error:p}=await Pe.auth.setSession({access_token:d.access_token,refresh_token:d.refresh_token});p&&e({title:"Link invlido ou expirado",description:"Abra o link do email novamente.",variant:"destructive"}),u(!!g?.session)}else e({title:"Link invlido",description:"Abra o link de redefinio enviado por email.",variant:"destructive"})})()},[]);const f=async h=>{if(h.preventDefault(),r.length<6){e({title:"Senha muito curta",description:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"});return}if(r!==a){e({title:"Senhas no conferem",description:"As senhas digitadas so diferentes.",variant:"destructive"});return}l(!0);const{data:m,error:g}=await Pe.auth.updateUser({password:r});if(l(!1),g){e({title:"Erro ao redefinir senha",description:g.message||"Tente novamente.",variant:"destructive"});return}e({title:"Senha redefinida",description:"Voc j pode acessar o sistema.",variant:"default"}),t("/")};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:s.jsxs("div",{className:"w-full max-w-md bg-surface rounded-xl border border-border p-6 shadow",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2 text-text-primary",children:"Redefinir senha"}),s.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Defina uma nova senha para sua conta."}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1 text-text-secondary",children:"Nova senha"}),s.jsx(Mt,{type:"password",value:r,onChange:h=>n(h.target.value),placeholder:"",disabled:!c||o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1 text-text-secondary",children:"Confirmar nova senha"}),s.jsx(Mt,{type:"password",value:a,onChange:h=>i(h.target.value),placeholder:"",disabled:!c||o})]}),s.jsx(Ae,{type:"submit",className:"w-full",disabled:!c||o,children:o?"Salvando...":"Salvar nova senha"})]})]})})};function grt({open:e,onOpenChange:t,codigoEmpresa:r,onSuccess:n}){const{toast:a}=ii(),[i,o]=y.useState("upload"),[l,c]=y.useState(null),[u,d]=y.useState(null),[f,h]=y.useState(!1),[m,g]=y.useState({success:!1,comandaId:null,error:null}),p=async _=>{const j=_.target.files?.[0];if(j){if(!j.name.endsWith(".xml")){a({title:"Arquivo invlido",description:"Selecione um arquivo XML vlido.",variant:"destructive"});return}c(j);try{const A=await j.text(),P=rre(A);if(!P.success){a({title:"Erro ao ler XML",description:P.error||"XML invlido",variant:"destructive"});return}if(!P.produtos||P.produtos.length===0){a({title:"Nenhum produto encontrado",description:"O XML no contm produtos.",variant:"warning"});return}if(P.nfe?.tipo!=="Sada"){a({title:"Tipo de nota incorreto",description:"Este XML  de entrada. Use a importao em Produtos para notas de entrada.",variant:"warning"});return}d(P),o("preview")}catch(A){console.error("[XMLSalesImport] Erro ao processar arquivo:",A),a({title:"Erro ao processar XML",description:A.message,variant:"destructive"})}}},v=async()=>{o("processing"),h(!0);try{const _=await mh({searchTerm:"",limit:1e4,codigoEmpresa:r}),j=u.nfe?.dataEmissao?new Date(u.nfe.dataEmissao):new Date,A=u.nfe?.chaveAcesso||"",{data:P,error:C}=await Pe.from("comandas").insert({codigo_empresa:r,mesa_id:null,status:"closed",aberto_em:j.toISOString(),fechado_em:j.toISOString(),observacao:`Importado de XML - NF-e ${u.nfe?.numero||""}${A?`
Chave: ${A}`:""}`,origem:"xml",xml_chave:A||null}).select().single();if(C)throw C;const k=[],R=[];for(const I of u.produtos){const T=nre(I,_);if(T){k.push({comanda_id:P.id,produto_id:T.id,descricao:I.nome,quantidade:I.quantidade,preco_unitario:I.valorUnitario,desconto:I.desconto||0,codigo_empresa:r});const M=Math.max(0,(T.stock||T.estoque||0)-I.quantidade);await Pe.from("produtos").update({estoque:M}).eq("id",T.id).eq("codigo_empresa",r)}else R.push(I.nome)}if(k.length>0){const{error:I}=await Pe.from("comanda_itens").insert(k);if(I)throw I}const E=u.pagamentos||[];if(E.length>0){const{data:I}=await Pe.from("finalizadoras").select("id, codigo_sefaz, nome").eq("codigo_empresa",r).eq("ativo",!0),T=new Map((I||[]).map(V=>[V.codigo_sefaz,V])),M=E.map(V=>{const W=T.get(V.codigoSefaz);return{comanda_id:P.id,finalizadora_id:W?.id||null,metodo:V.descricao.toLowerCase(),valor:V.valor,status:"Pago",recebido_em:j.toISOString(),codigo_empresa:r,origem:"xml",xml_chave:A||null}}),{error:z}=await Pe.from("pagamentos").insert(M);if(z)throw z}else{const I=u.produtos.reduce((M,z)=>M+(z.valorTotal||0),0),{error:T}=await Pe.from("pagamentos").insert({comanda_id:P.id,finalizadora_id:null,metodo:"outros",valor:I,status:"Pago",recebido_em:j.toISOString(),codigo_empresa:r,origem:"xml",xml_chave:A||null});if(T)throw T}console.log("[XMLSalesImport] Venda importada com sucesso. Comanda ID:",P.id),R.length>0?a({title:"Venda importada com avisos",description:`${k.length} produto(s) registrado(s), ${R.length} no encontrado(s).`,variant:"warning",duration:5e3}):a({title:"Venda importada com sucesso!",description:`${k.length} produto(s) registrado(s). Total: R$ ${w.toFixed(2)}`,variant:"success"}),g({success:!0,comandaId:P.id,error:null,produtosNaoEncontrados:R,totalItens:k.length,totalVenda:w,dataEmissao:j.toISOString().slice(0,10)}),o("done"),n&&n(j.toISOString().slice(0,10))}catch(_){console.error("[XMLSalesImport] Erro ao importar:",_),g({success:!1,comandaId:null,error:_.message}),o("done"),a({title:"Erro ao importar XML",description:_.message,variant:"destructive"})}finally{h(!1)}},x=()=>{o("upload"),c(null),d(null),g({success:!1,comandaId:null,error:null}),t(!1)},b=()=>{o("upload"),c(null),d(null)},w=u?.produtos?.reduce((_,j)=>_+(j.valorTotal||0),0)||0;return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Yr,{className:"max-w-3xl max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-2xl font-bold",children:"Importar XML de Venda (NF-e)"}),s.jsxs(cn,{children:[i==="upload"&&"Selecione o arquivo XML da nota fiscal de sada",i==="preview"&&"Revise os dados da venda que ser importada",i==="processing"&&"Processando venda...",i==="done"&&"Importao finalizada"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-1",children:[i==="upload"&&s.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("label",{htmlFor:"xml-sales-upload",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer bg-surface hover:bg-surface-2 transition-colors",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx($W,{className:"w-12 h-12 mb-4 text-text-muted"}),s.jsx("p",{className:"mb-2 text-sm text-text-primary font-semibold",children:"Clique para selecionar ou arraste o arquivo"}),s.jsx("p",{className:"text-xs text-text-muted",children:"XML de NF-e de Sada (Venda)"})]}),s.jsx("input",{id:"xml-sales-upload",type:"file",accept:".xml",className:"hidden",onChange:p})]}),l&&s.jsxs("div",{className:"mt-4 p-3 bg-surface-2 rounded-lg flex items-center gap-2",children:[s.jsx(Gl,{className:"w-5 h-5 text-success"}),s.jsx("span",{className:"text-sm text-text-primary",children:l.name})]})]})}),i==="preview"&&s.jsxs("div",{className:"space-y-4",children:[u?.nfe&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Informaes da NF-e"}),u.fornecedor&&s.jsxs("div",{className:"mb-3 pb-3 border-b border-border",children:[s.jsx("div",{className:"text-sm font-semibold text-text-primary mb-1",children:u.fornecedor.razaoSocial||u.fornecedor.nomeFantasia||"Fornecedor"}),s.jsxs("div",{className:"text-xs text-text-muted",children:[u.fornecedor.cnpj&&`CNPJ: ${u.fornecedor.cnpj}`,u.fornecedor.endereco?.cidade&&u.fornecedor.endereco?.uf&&`  ${u.fornecedor.endereco.cidade}/${u.fornecedor.endereco.uf}`]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Nmero:"})," ",s.jsx("span",{className:"font-mono",children:u.nfe.numero})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Srie:"})," ",s.jsx("span",{className:"font-mono",children:u.nfe.serie})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Tipo:"})," ",s.jsx("span",{className:"text-warning font-semibold",children:u.nfe.tipo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-text-muted",children:"Data:"})," ",s.jsx("span",{children:new Date(u.nfe.dataEmissao).toLocaleDateString("pt-BR")})]})]}),u.nfe.naturezaOperacao&&s.jsxs("div",{className:"mb-2 text-sm",children:[s.jsx("span",{className:"text-text-muted",children:"Natureza:"})," ",s.jsx("span",{className:"font-medium",children:u.nfe.naturezaOperacao})]}),u.nfe.totalNota!==void 0&&s.jsxs("div",{className:"mb-3 text-sm",children:[s.jsx("span",{className:"text-text-muted",children:"Total da Nota:"})," ",s.jsxs("span",{className:"font-mono font-semibold text-lg text-success",children:["R$ ",u.nfe.totalNota.toFixed(2)]})]}),u.nfe.chaveAcesso&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[s.jsx("span",{className:"text-text-muted text-xs",children:"Chave de Acesso:"}),s.jsx("p",{className:"font-mono text-xs break-all",children:u.nfe.chaveAcesso})]})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsxs("h3",{className:"font-semibold mb-3",children:["Produtos da Venda (",u.produtos.length,")"]}),s.jsx("div",{className:"space-y-2",children:u.produtos.map((_,j)=>s.jsxs("div",{className:"p-3 rounded-lg border border-border bg-surface flex items-start gap-3",children:[s.jsx(jb,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-semibold text-sm truncate",children:_.nome}),s.jsxs("p",{className:"text-xs text-text-muted",children:[_.codigo&&`Cdigo: ${_.codigo}  `,"Qtd: ",_.quantidade," ",_.unidade]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",_.valorTotal.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-text-muted",children:["Unit: R$ ",_.valorUnitario.toFixed(2)]})]})]})})]},j))})]}),u.pagamentos&&u.pagamentos.length>0&&s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsxs("h3",{className:"font-semibold mb-3",children:["Formas de Pagamento (",u.pagamentos.length,")"]}),s.jsx("div",{className:"space-y-2",children:u.pagamentos.map((_,j)=>s.jsxs("div",{className:"p-3 rounded-lg border border-border bg-surface flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:_.descricao}),s.jsxs("p",{className:"text-xs text-text-muted",children:["Cdigo SEFAZ: ",_.codigoSefaz]})]}),s.jsxs("p",{className:"text-sm font-semibold",children:["R$ ",_.valor.toFixed(2)]})]},j))})]}),s.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Dc,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-sm mb-1",children:"Ateno: Venda Externa"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Esta venda ser registrada no histrico como uma venda externa (importada de XML). O estoque dos produtos ser subtrado automaticamente."})]})]})}),s.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total da Venda:"}),s.jsxs("span",{className:"text-success",children:["R$ ",w.toFixed(2)]})]})]}),i==="processing"&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(lm,{className:"w-12 h-12 animate-spin text-warning mb-4"}),s.jsx("p",{className:"text-lg font-semibold",children:"Processando venda..."}),s.jsx("p",{className:"text-sm text-text-muted",children:"Criando comanda e atualizando estoque"})]}),i==="done"&&s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"bg-surface-2 rounded-lg p-6 border border-border text-center",children:m.success?s.jsxs(s.Fragment,{children:[s.jsx(Bs,{className:"w-16 h-16 text-success mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Venda Importada com Sucesso!"}),s.jsx("p",{className:"text-sm text-text-muted mb-4",children:"A venda foi registrada no histrico"}),m.produtosNaoEncontrados&&m.produtosNaoEncontrados.length>0&&s.jsxs("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-3 text-left",children:[s.jsx("p",{className:"text-sm font-semibold mb-2",children:" Produtos no encontrados:"}),s.jsx("ul",{className:"text-xs text-text-muted space-y-1",children:m.produtosNaoEncontrados.map((_,j)=>s.jsxs("li",{children:[" ",_]},j))})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Dc,{className:"w-16 h-16 text-danger mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Erro na Importao"}),s.jsx("p",{className:"text-sm text-text-muted",children:m.error||"Ocorreu um erro ao importar a venda"})]})})})]}),s.jsxs(Dn,{children:[i==="upload"&&s.jsx(Ae,{variant:"outline",onClick:x,children:"Cancelar"}),i==="preview"&&s.jsxs(s.Fragment,{children:[s.jsx(Ae,{variant:"outline",onClick:b,children:"Voltar"}),s.jsx(Ae,{onClick:v,children:"Confirmar Importao"})]}),i==="done"&&s.jsx(Ae,{onClick:x,children:"Fechar"})]})]})})}const vrt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Hy={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function yrt(e,t=300){const[r,n]=y.useState(e);return y.useEffect(()=>{const a=setTimeout(()=>n(e),t);return()=>clearTimeout(a)},[e,t]),r}function Bw({value:e,onChange:t}){const[r,n]=y.useState(!1),a=y.useRef(null),i=y.useRef(null),o=y.useRef(null),[l,c]=y.useState({top:0,left:0,width:0,center:!1,mode:"fixed"});y.useEffect(()=>{function p(b){const w=b.target,_=a.current&&a.current.contains(w),j=o.current&&o.current.contains(w);!_&&!j&&n(!1)}function v(b){b.key==="Escape"&&n(!1)}function x(){r&&u()}return window.addEventListener("mousedown",p),window.addEventListener("keydown",v),window.addEventListener("scroll",x,!0),window.addEventListener("resize",x),()=>{window.removeEventListener("mousedown",p),window.removeEventListener("keydown",v),window.removeEventListener("scroll",x,!0),window.removeEventListener("resize",x)}},[r]),y.useEffect(()=>{if(r){const p=requestAnimationFrame(()=>{u();const v=requestAnimationFrame(()=>u());return()=>cancelAnimationFrame(v)});return()=>cancelAnimationFrame(p)}},[r]),y.useEffect(()=>{if(r&&l.mode==="overlay"){const p=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=p}}},[r,l.mode]);const u=()=>{try{const p=i.current;if(!p)return;const v=p.getBoundingClientRect(),x=window.innerWidth,b=window.innerHeight,w=8,_=Math.max(v.width,280),j=Math.min(x-w*2,360),A=Math.min(_,j);let P=320;if(o.current)try{P=o.current.getBoundingClientRect().height||P}catch{}if(x<=640){c({top:0,left:0,width:Math.min(x-w*2,360),center:!0,mode:"overlay"});return}const C=a.current,k=C?C.getBoundingClientRect():v,R=v.bottom-k.top+6,E=Math.max(v.width,280);c({top:R,left:0,width:E,center:!1,mode:"anchor"})}catch{}},d=p=>{try{const[v,x,b]=String(p||"").split("-").map(Number);return!v||!x||!b?null:new Date(v,x-1,b)}catch{return null}},f=p=>{const v=x=>String(x).padStart(2,"0");return`${p.getFullYear()}-${v(p.getMonth()+1)}-${v(p.getDate())}`},h=p=>{const v=x=>String(x).padStart(2,"0");return`${v(p.getDate())}/${v(p.getMonth()+1)}/${p.getFullYear()}`},m=d(e),g=m?h(m):"";return s.jsxs("div",{className:"relative",ref:a,children:[s.jsx("button",{type:"button",className:"absolute left-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-warning/10 focus:outline-none",onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(p=>!p),setTimeout(u,0)},"aria-label":"Abrir calendrio",children:s.jsx(ece,{className:"h-4 w-4 text-warning"})}),typeof window<"u"&&window.innerWidth<=640?s.jsx("button",{type:"button",ref:i,onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(!0),setTimeout(u,0)},className:"pl-9 pr-3 h-10 w-full text-left bg-surface text-text-primary border border-warning/40 rounded-md",children:g||"Selecionar data"}):s.jsx(Mt,{type:"text",readOnly:!0,ref:i,inputMode:"none",onMouseDown:p=>{p.preventDefault()},onClick:()=>{n(p=>!p),setTimeout(u,0)},className:"pl-9 pr-3 w-full bg-surface text-text-primary border border-warning/40 focus-visible:ring-warning focus-visible:border-warning",value:g}),r&&(l.mode==="overlay"?s.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:p=>{p.target===p.currentTarget&&n(!1)},children:s.jsx("div",{ref:o,className:"bg-black text-white border border-warning/40 rounded-md shadow-xl p-2 w-[92vw] max-w-[360px]",children:s.jsx(_u,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})})}):l.mode==="anchor"?s.jsx("div",{ref:o,className:"absolute z-[999] bg-black text-white border border-warning/40 rounded-md shadow-xl p-2 left-0",style:{top:`${l.top}px`,minWidth:`${l.width}px`,maxWidth:"92vw"},children:s.jsx(_u,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})}):s.jsx("div",{ref:o,className:"fixed z-[999] bg-black text-white border border-warning/40 rounded-md shadow-xl p-2",style:{top:`${l.top}px`,left:`${l.left}px`,width:`${l.width}px`,maxWidth:"92vw"},children:s.jsx(_u,{mode:"single",selected:m||void 0,onSelect:p=>{p&&(t(f(p)),n(!1))},showOutsideDays:!0,className:"",classNames:{caption_label:"text-sm font-medium text-white",head_cell:"text-xs text-warning/80 w-9",day:"h-9 w-9 p-0 font-normal text-white hover:bg-warning/10 rounded-md",day_selected:"bg-warning text-black hover:bg-warning focus:bg-warning",day_today:"border border-warning text-white",day_outside:"text-white/30",nav_button:"h-7 w-7 p-0 text-white hover:bg-warning/10 rounded-md",table:"w-full"}})}))]})}function xrt(){const{toast:e}=ii(),t=Vc(),{userProfile:r}=io(),[n,a]=y.useState(!1),[i,o]=y.useState([]),[l,c]=y.useState(()=>new Date().toISOString().slice(0,10)),[u,d]=y.useState(()=>new Date().toISOString().slice(0,10)),[f,h]=y.useState("closed"),[m,g]=y.useState(""),p=yrt(m,350),[v,x]=y.useState("all"),[b,w]=y.useState("comandas"),[_,j]=y.useState(!1),[A,P]=y.useState(null),[C,k]=y.useState({loading:!1,itens:[],pagamentos:[]}),[R,E]=y.useState(null),[I,T]=y.useState({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null},movs:[]}),[M,z]=y.useState(!1),[V,W]=y.useState(!1),[$,G]=y.useState(!1),me=async()=>{try{e({title:"Gerando CSV...",description:"Aguarde enquanto preparamos o arquivo",variant:"default"});const ue=await w7({status:f,from:l||void 0,to:u||void 0,search:p||"",limit:1e4,offset:0});if(!ue||ue.length===0){e({title:"Nenhum dado para exportar",variant:"warning"});return}const rt=ue.map(nt=>nt.id),Ee=await EO(rt,r?.codigo_empresa),Ke=await pg(r?.codigo_empresa),Ge=new Map(Ke.map(nt=>[nt.id,nt.numero])),bt=await y7(rt),ot=await x7(rt),kt=ue.map(nt=>{const Rt=nt.mesa_id?`Mesa ${Ge.get(nt.mesa_id)||"?"}`:"Balco",Lt=bt[nt.id]||"Sem cliente",Tt=ot[nt.id],ir=Array.isArray(Tt)?Tt.join(", "):Tt||"No informado",fr=nt.fechado_em?"Fechada":"Aberta";return{Tipo:nt.tipo==="balcao"?"Balco":"Mesa","Mesa/Local":Rt,"Cliente(s)":Lt,Status:fr,Abertura:new Date(nt.aberto_em).toLocaleString("pt-BR"),Fechamento:nt.fechado_em?new Date(nt.fechado_em).toLocaleString("pt-BR"):"-","Total (R$)":Number(Ee[nt.id]||0).toFixed(2),"Forma(s) Pagamento":ir,Observaes:nt.observacao||"-"}}),yt=Object.keys(kt[0]),je=[yt.join(";"),...kt.map(nt=>yt.map(Rt=>{const Lt=nt[Rt]||"";return`"${String(Lt).replace(/"/g,'""')}"`}).join(";"))].join(`
`),We=new Blob(["\uFEFF"+je],{type:"text/csv;charset=utf-8;"}),Ot=document.createElement("a"),Ve=URL.createObjectURL(We);Ot.setAttribute("href",Ve),Ot.setAttribute("download",`historico_comandas_${new Date().toISOString().slice(0,10)}.csv`),Ot.style.visibility="hidden",document.body.appendChild(Ot),Ot.click(),document.body.removeChild(Ot),e({title:"CSV exportado!",description:`${kt.length} comandas exportadas`,variant:"success"})}catch(ue){console.error("Erro ao exportar CSV:",ue),e({title:"Erro ao exportar",description:ue.message,variant:"destructive"})}},de=100,[L,B]=y.useState(0),[J,q]=y.useState(!1),X=y.useRef(!1),Z=y.useRef(0),pe=y.useRef(0),te=y.useRef(!1),ve=()=>{try{const ue=localStorage.getItem("auth:userProfile");return ue&&JSON.parse(ue)?.codigo_empresa||null}catch{return null}},Ce=y.useMemo(()=>`hist:comandas:${ve()||"na"}:${l}:${u}:${f}:${v}:${(p||"").trim()}`,[l,u,f,v,p]),he=async({append:ue=!1,skipCacheWrite:rt=!1}={})=>{try{a(!0);const Ee=ve();if(!Ee){a(!1);return}const Ke=setTimeout(()=>a(!1),1e4);if(b==="comandas"){const Ge=!!(p&&p.trim()),kt=await w7({status:f,from:l,to:u,limit:Ge?1e3:de,offset:Ge?0:L}),yt=(kt||[]).map(Lt=>Lt.id);let je={};if(yt.length>0)try{je=await EO(yt,Ee)}catch{je={}}let We=[];try{We=await pg(Ee)}catch{We=[]}const Ot=new Map((We||[]).map(Lt=>[Lt.id,Lt.numero]));let Ve={},nt={};try{Ve=await y7(yt)}catch{Ve={}}try{nt=await x7(yt)}catch{nt={}}const Rt=(kt||[]).map(Lt=>{const Tt=Ve[Lt.id],ir=nt[Lt.id];return{...Lt,statusDerived:Lt.fechado_em?"closed":Lt.status||"open",total:Number(je[Lt.id]||0),mesaNumero:Ot.get(Lt.mesa_id),clientesStr:Array.isArray(Tt)?Tt.join(", "):Tt||"",finalizadorasStr:Array.isArray(ir)?ir.join(", "):ir||""}});if(q(Ge?!1:(kt||[]).length===de),o(ue?Lt=>[...Lt,...Rt]:Rt),!rt)try{localStorage.setItem(Ce,JSON.stringify({ts:Date.now(),rows:Rt}))}catch{}}else{const Ge=await yee({from:l,to:u,limit:100,offset:0,codigoEmpresa:Ee});o(Ge||[])}clearTimeout(Ke)}catch(Ee){e({title:"Falha ao carregar histrico",description:Ee?.message||"Tente novamente",variant:"destructive"})}finally{a(!1),Z.current=Date.now()}};y.useEffect(()=>{if(X.current=!0,b==="comandas")try{const ue=localStorage.getItem(Ce);if(ue){const rt=JSON.parse(ue);rt&&Array.isArray(rt.rows)&&Date.now()-Number(rt.ts||0)<12e4&&o(rt.rows)}}catch{}return()=>{X.current=!1}},[Ce,b]),y.useEffect(()=>{b==="comandas"&&(B(0),q(!1)),he({append:!1})},[f,p,l,u,b]),y.useEffect(()=>{if(!n&&b==="comandas"&&i.length===0){const ue=setTimeout(()=>{X.current&&he({append:!1,skipCacheWrite:!1})},1500);return()=>clearTimeout(ue)}},[i.length,n,b]),y.useEffect(()=>{const ue=()=>{document.visibilityState==="visible"&&Date.now()-(Z.current||0)>3e4&&he({append:!1})},rt=()=>{Date.now()-(Z.current||0)>3e4&&he({append:!1})};return window.addEventListener("visibilitychange",ue),window.addEventListener("focus",rt),()=>{window.removeEventListener("visibilitychange",ue),window.removeEventListener("focus",rt)}},[Ce,b]);const qe=async ue=>{P(ue),k({loading:!0,itens:[],pagamentos:[]});const rt=ve();te.current=!0;const Ee=++pe.current,Ke=setTimeout(()=>{pe.current===Ee&&te.current&&k(Ge=>({...Ge,loading:!1}))},1e4);if(!rt){clearTimeout(Ke),pe.current===Ee&&te.current&&k({loading:!1,itens:[],pagamentos:[]});return}try{const Ge=(i||[]).find(bt=>bt.id===ue)||null;if(Ge){const bt=Ge.mesa_id==null?"Balco":Ge.mesaNumero!=null?`Mesa ${Ge.mesaNumero}`:"Comanda";E({mesaLabel:bt,clientesStr:Ge.clientesStr||"",aberto_em:Ge.aberto_em||null,fechado_em:Ge.fechado_em||null,tipo:Ge.mesa_id==null?"balcao":"comanda"})}else E(null)}catch{E(null)}try{const Ge=async()=>{const[ot,kt]=await Promise.all([Ai({comandaId:ue,codigoEmpresa:rt}),UWe({comandaId:ue,codigoEmpresa:rt})]);let yt=[];try{yt=await Vo({comandaId:ue,codigoEmpresa:rt})}catch{}const je=new Map((yt||[]).map(Ve=>{const nt=Ve?.cliente_id??Ve?.clientes?.id??null,Rt=Ve?.clientes?.nome??Ve?.nome??Ve?.nome_livre??"";return nt?[String(nt),Rt]:null}).filter(Boolean)),We=Array.from(je.values()),Ot=(kt||[]).map((Ve,nt)=>{let Rt="";return Ve?.cliente_id?Rt=je.get(String(Ve.cliente_id))||"":We.length>0&&(Rt=We[nt%We.length]),{...Ve,cliente_nome:Rt,finalizadora_nome:Ve?.finalizadoras?.nome||Ve?.metodo||""}});return{itens:ot||[],pagamentos:Ot}};let bt=await Ge();bt.itens.length===0&&bt.pagamentos.length===0&&(await new Promise(ot=>setTimeout(ot,700)),bt=await Ge()),pe.current===Ee&&te.current&&k({loading:!1,itens:bt.itens,pagamentos:bt.pagamentos})}catch(Ge){pe.current===Ee&&te.current&&k({loading:!1,itens:[],pagamentos:[]}),e({title:"Falha ao carregar detalhes",description:Ge?.message||"Tente novamente",variant:"destructive"})}finally{clearTimeout(Ke),pe.current===Ee&&te.current&&k(Ge=>({...Ge,loading:!1}))}},ye=y.useMemo(()=>({sum:i.reduce((rt,Ee)=>rt+Number(Ee.total||0),0)}),[i]),ce=ue=>(ue||"").toString().toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,""),Ft=y.useMemo(()=>{const ue=(p||"").trim(),rt=ce(ue),Ke=i.filter(Ge=>{const bt=Ge.mesa_id==null;return!(v==="balcao"&&!bt||v==="comanda"&&bt)}).filter(Ge=>{const bt=Ge.fechado_em?"closed":Ge.status||"open";return f==="closed"?bt==="closed":f==="open"?bt==="open":f==="awaiting-payment"?bt==="awaiting-payment":!0});return rt?Ke.filter(Ge=>{const bt=Ge.mesaNumero!=null?String(Ge.mesaNumero):"",ot=Ge.mesa_id==null?"balcao":`mesa ${bt}`;return[bt,ot,Ge.clientesStr||"",Ge.finalizadorasStr||"",Ge.mesa_id==null?"balcao":"comanda",Ge.statusDerived||Ge.status||""].map(ce).join(" | ").includes(rt)}):Ke},[i,p,v,f]),qt=ue=>ue==="open"?"Aberta":ue==="awaiting-payment"?"Pagamento":ue==="closed"?"Fechada":ue||"",It=ue=>{if(!ue)return"";try{return new Date(ue).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}},et=ue=>{const rt=String(ue||"").toLowerCase();return rt==="open"?"Aberto":rt==="closed"?"Fechado":""},Ze=ue=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(ue||0)),Pt=ue=>ue==="open"?"text-info bg-info/10 border-info/30":ue==="awaiting-payment"?"text-warning bg-warning/10 border-warning/30":ue==="closed"?"text-success bg-success/10 border-success/30":"text-text-secondary bg-transparent border-border/50";return s.jsxs(ur.div,{variants:vrt,initial:"hidden",animate:"visible",className:"min-h-screen flex flex-col",children:[s.jsxs(ur.div,{variants:Hy,className:"mb-6 gap-3 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsx(Ad,{value:"historico",onValueChange:ue=>{ue==="mesas"&&t("/vendas"),ue==="balcao"&&t("/balcao"),ue==="historico"&&t("/historico")},children:s.jsxs(ju,{className:"w-full grid grid-cols-3 sm:w-auto sm:inline-flex",children:[s.jsx(ua,{value:"mesas",children:"Mesas"}),s.jsx(ua,{value:"balcao",children:"Balco"}),s.jsx(ua,{value:"historico",children:"Histrico"})]})}),s.jsxs("div",{className:"w-full flex items-center gap-2 sm:gap-3",children:[s.jsxs("div",{className:"flex sm:hidden items-center gap-2 w-full",children:[s.jsxs(kn,{value:b,onValueChange:w,children:[s.jsx(An,{className:"w-[160px] text-sm",children:s.jsx(On,{placeholder:"Selecionar"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"comandas",children:"Comandas"}),s.jsx(Ht,{value:"fechamentos",children:"Fechamentos"})]})]}),s.jsxs("div",{className:"ml-auto text-xs text-text-secondary whitespace-nowrap",children:["Total: ",s.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",ye.sum.toFixed(2)]})]}),b==="comandas"&&s.jsx(Ae,{type:"button",size:"icon",variant:"outline",className:"h-9 w-9 sm:hidden",onClick:()=>W(!0),title:"Aes",children:s.jsx(Ms,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 ml-auto",children:s.jsx(Ad,{value:b,onValueChange:w,className:"w-full sm:w-auto",children:s.jsxs(ju,{className:"w-full grid grid-cols-2 sm:w-auto sm:inline-flex text-sm",children:[s.jsx(ua,{value:"comandas",className:"text-sm",children:"Comandas"}),s.jsx(ua,{value:"fechamentos",className:"text-sm",children:"Fechamentos"})]})})})]}),s.jsx("div",{className:"hidden sm:flex w-full sm:w-auto items-center gap-2 sm:gap-3",children:b==="comandas"&&s.jsxs(s.Fragment,{children:[s.jsxs(Ae,{variant:"secondary",size:"sm",className:"hidden sm:inline-flex",onClick:()=>z(!0),children:[s.jsx(Gl,{className:"mr-2 h-4 w-4"}),"Importar XML"]}),s.jsxs(Ae,{variant:"outline",size:"sm",className:"hidden sm:inline-flex",onClick:me,children:[s.jsx(Ms,{className:"mr-1 h-3 w-3"}),"Exportar"]}),s.jsx("button",{className:"hidden sm:inline-block text-xs text-text-muted hover:text-text-primary transition-colors",onClick:()=>{if($){const ue=new Date().toISOString().slice(0,10);c(ue),d(ue),G(!1)}else c(""),d(""),G(!0);B(0)},title:$?"Voltar ao filtro de hoje":"Mostrar todas as comandas",children:$?"":""}),s.jsxs("div",{className:"text-sm text-text-secondary whitespace-nowrap ml-auto",children:["Total: ",s.jsxs("span",{className:"font-semibold text-text-primary",children:["R$ ",ye.sum.toFixed(2)]})]})]})})]}),s.jsx(rn,{open:V,onOpenChange:W,children:s.jsxs(Yr,{className:"sm:hidden w-[92vw] max-w-[360px] p-2",onOpenAutoFocus:ue=>ue.preventDefault(),onKeyDown:ue=>ue.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{className:"text-base",children:"Aes"}),s.jsx(cn,{children:"Escolha uma ao para Comandas"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs(Ae,{variant:"secondary",onClick:()=>{W(!1),z(!0)},children:[s.jsx(Gl,{className:"mr-2 h-4 w-4"})," Importar XML"]}),s.jsxs(Ae,{variant:"outline",onClick:()=>{W(!1),me()},children:[s.jsx(Ms,{className:"mr-2 h-4 w-4"})," Exportar CSV"]})]})]})}),b==="comandas"&&s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("div",{className:"text-xs text-text-secondary",children:["Carregadas ",i.length," ",i.length===1?"comanda":"comandas"]}),J&&s.jsx(Ae,{size:"sm",variant:"outline",disabled:n,onClick:async()=>{const ue=L+de;B(ue),await he({append:!0})},children:"Carregar mais"})]}),b==="comandas"&&s.jsxs("div",{className:"sm:hidden bg-surface rounded-lg border border-border p-3 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Buscar...",className:"pl-9 h-9 text-sm",value:m,onChange:ue=>g(ue.target.value)})]}),s.jsx(Ae,{size:"sm",variant:"outline",className:"h-9",onClick:()=>j(ue=>!ue),children:_?"Ocultar":"Filtros"})]}),s.jsxs("div",{className:"mt-1 text-[11px] text-text-secondary truncate",children:[l||"","  ",u||""]})]}),b==="comandas"&&s.jsx(ur.div,{variants:Hy,className:`bg-surface rounded-lg border border-border p-4 mb-4 ${_?"":"hidden"} sm:block`,children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Perodo Inicial"}),s.jsx(Bw,{value:l,onChange:c})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Perodo Final"}),s.jsx(Bw,{value:u,onChange:d})]}),s.jsxs("div",{className:"md:col-span-2 hidden sm:block",children:[s.jsx(ct,{className:"mb-1 block",children:"Busca"}),s.jsxs("div",{className:"relative",children:[s.jsx(Po,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx(Mt,{placeholder:"Mesa, status (fechada/aberta) ou cliente",className:"pl-9",value:m,onChange:ue=>g(ue.target.value)})]})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Status"}),s.jsxs(kn,{value:f,onValueChange:h,children:[s.jsx(An,{className:"w-full text-xs",children:s.jsx(On,{placeholder:"Selecionar status"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"closed",children:"Fechadas"}),s.jsx(Ht,{value:"open",children:"Abertas"}),s.jsx(Ht,{value:"awaiting-payment",children:"Pagamento"})]})]})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Tipo"}),s.jsxs(kn,{value:v,onValueChange:x,children:[s.jsx(An,{className:"w-full text-xs",children:s.jsx(On,{placeholder:"Selecionar tipo"})}),s.jsxs(Pn,{children:[s.jsx(Ht,{value:"all",children:"Todos"}),s.jsx(Ht,{value:"comanda",children:"Comandas"}),s.jsx(Ht,{value:"balcao",children:"Balco"})]})]})]})]})}),b==="comandas"&&s.jsxs(ur.div,{variants:Hy,className:"bg-surface rounded-lg border border-border p-0 overflow-hidden",children:[s.jsx("div",{className:"hidden sm:block overflow-x-auto pr-2 sm:pr-3",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Mesa"}),s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Tipo"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Clientes"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Finalizadora"}),s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Abertura"}),s.jsx("th",{className:"text-left px-4 py-3 whitespace-nowrap",children:"Fechamento"}),s.jsx("th",{className:"text-right px-4 py-3",children:"Total"})]})}),s.jsxs("tbody",{children:[Ft.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-text-muted",children:"Nenhuma comanda encontrada no perodo."})}),Ft.map(ue=>s.jsxs("tr",{className:"border-t border-border/70 hover:bg-warning/10 cursor-pointer transition-all duration-150 hover:translate-x-[1px]",onClick:()=>qe(ue.id),children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:ue.mesa_id==null?"Balco":ue.mesaNumero!=null?`Mesa ${ue.mesaNumero}`:""}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:ue.mesa_id==null?"Balco":"Comanda"}),s.jsx("td",{className:"px-4 py-2 break-words",title:ue.clientesStr||"",children:ue.clientesStr||""}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:Et("inline-flex items-center text-[11px] font-medium px-2 py-0.5 rounded-full border",Pt(ue.statusDerived||ue.status)),children:qt(ue.statusDerived||ue.status)})}),s.jsx("td",{className:"px-4 py-2 break-words",title:ue.finalizadorasStr||"",children:ue.finalizadorasStr||""}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:It(ue.aberto_em)}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:It(ue.fechado_em)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold whitespace-nowrap",children:Ze(ue.total)})]},ue.id))]})]})}),s.jsxs("div",{className:"sm:hidden divide-y divide-border",children:[Ft.length===0&&s.jsx("div",{className:"p-4 text-center text-text-muted",children:"Nenhuma comanda encontrada no perodo."}),Ft.map(ue=>s.jsxs("button",{className:"w-full text-left p-3 active:bg-warning/10",onClick:()=>qe(ue.id),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-xs text-text-secondary",children:ue.mesa_id==null?"Balco":ue.mesaNumero!=null?`Mesa ${ue.mesaNumero}`:"Comanda"}),s.jsx("div",{className:"font-semibold truncate max-w-[220px]",children:ue.clientesStr||"Sem cliente"})]}),s.jsx("div",{children:s.jsx("div",{className:Et("inline-flex items-center text-[10px] font-medium px-2 py-0.5 rounded-full border",Pt(ue.statusDerived||ue.status)),children:qt(ue.statusDerived||ue.status)})})]}),s.jsx("div",{className:"mt-1 text-xs text-text-secondary truncate",children:ue.finalizadorasStr||""}),s.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0 text-[11px] text-text-muted truncate pr-2",children:[It(ue.aberto_em),ue.fechado_em?`  ${It(ue.fechado_em)}`:""]}),s.jsx("div",{className:"flex-shrink-0 font-mono font-semibold whitespace-nowrap text-right min-w-[84px]",children:Ze(ue.total)})]})]},ue.id))]})]}),b==="fechamentos"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:hidden bg-surface rounded-lg border border-border p-3 mb-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Filtros"}),s.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>j(ue=>!ue),children:_?"Ocultar filtros":"Mostrar filtros"})]})}),s.jsx(ur.div,{variants:Hy,className:`bg-surface rounded-lg border border-border p-4 mb-4 ${_?"":"hidden"} sm:block`,children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Perodo Inicial"}),s.jsx(Bw,{value:l,onChange:c})]}),s.jsxs("div",{children:[s.jsx(ct,{className:"mb-1 block",children:"Perodo Final"}),s.jsx(Bw,{value:u,onChange:d})]})]})}),s.jsxs(ur.div,{variants:Hy,className:"bg-surface rounded-lg border border-border p-4 overflow-hidden",children:[s.jsxs("div",{className:"sm:hidden space-y-2",children:[n&&(!i||i.length===0)&&s.jsxs("div",{className:"px-2 py-3 text-center text-text-muted",children:[s.jsx(lm,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando fechamentos"]}),(!i||i.length===0)&&!n&&s.jsx("div",{className:"px-2 py-3 text-center text-text-muted",children:"Nenhum fechamento encontrado no perodo."}),(i||[]).map(ue=>s.jsxs("button",{onClick:async()=>{try{T({open:!0,loading:!0,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}});const rt=ve(),[Ee,Ke]=await Promise.all([b_({caixaSessaoId:ue.id,codigoEmpresa:rt}).catch(()=>null),Am({caixaSessaoId:ue.id,codigoEmpresa:rt}).catch(()=>[])]);let Ge=Ee?.movimentos||null;if(!Ge&&Array.isArray(Ke)){const ot={suprimentos:0,sangrias:0,ajustes:0,troco:0};for(const kt of Ke){const yt=String(kt?.tipo||"").toLowerCase(),je=Number(kt?.valor||0);yt==="suprimento"?ot.suprimentos+=je:yt==="sangria"?ot.sangrias+=je:yt==="ajuste"?ot.ajustes+=je:yt==="troco"&&(ot.troco+=je)}Ge=ot}const bt=Ee?{totalDescontos:Number(Ee.total_descontos||0),totalVendasLiquidas:Number(Ee.total_liquido||0),totalEntradas:Number(Ee.total_entradas||0),totalPorFinalizadora:Ee.por_finalizadora||{}}:null;T({open:!0,loading:!1,resumo:bt,periodo:{from:Ee?.periodo_de||ue.aberto_em,to:Ee?.periodo_ate||ue.fechado_em},movs:Ke||[],movimentosAgg:Ge,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}})}catch{T({open:!0,loading:!1,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}})}},className:"w-full text-left p-3 rounded-lg border border-border hover:bg-surface-2 transition",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"text-xs text-text-secondary",children:[It(ue.aberto_em),s.jsx("span",{className:"mx-1",children:""}),It(ue.fechado_em)]}),s.jsx("div",{className:"text-[11px] px-2 py-0.5 rounded-full border bg-success/10 text-success border-success/30",children:et(ue.status)})]}),s.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"bg-surface-2 rounded p-2 border border-border",children:[s.jsx("div",{className:"text-[10px] text-text-secondary",children:"Saldo Inicial"}),s.jsx("div",{className:"font-semibold",children:ue?.saldo_inicial!=null?Ze(ue.saldo_inicial):""})]}),s.jsxs("div",{className:"bg-surface-2 rounded p-2 border border-border",children:[s.jsx("div",{className:"text-[10px] text-text-secondary",children:"Saldo Final"}),s.jsx("div",{className:"font-semibold",children:ue?.saldo_final!=null?Ze(ue.saldo_final):""})]})]})]},ue.id))]}),s.jsx("div",{className:"hidden sm:block overflow-x-auto max-h-[60vh] overflow-y-auto pr-2 sm:pr-3",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-surface-2 text-text-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3",children:"Abertura"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Fechamento"}),s.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),s.jsx("th",{className:"text-right px-4 py-3",children:"Saldo Inicial"}),s.jsx("th",{className:"text-right px-4 py-3",children:"Saldo Final"})]})}),s.jsxs("tbody",{children:[n&&(!i||i.length===0)&&s.jsx("tr",{children:s.jsxs("td",{colSpan:5,className:"px-4 py-6 text-center text-text-muted",children:[s.jsx(lm,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando fechamentos"]})}),(!i||i.length===0)&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-text-muted",children:"Nenhum fechamento encontrado no perodo."})}),(i||[]).map(ue=>s.jsxs("tr",{className:"border-t border-border/70 hover:bg-success/10 cursor-pointer transition-all duration-150 hover:translate-x-[1px]",onClick:async()=>{try{T({open:!0,loading:!0,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}});const rt=async()=>{const Ge=ve(),[bt,ot]=await Promise.all([b_({caixaSessaoId:ue.id,codigoEmpresa:Ge}).catch(()=>null),Am({caixaSessaoId:ue.id,codigoEmpresa:Ge}).catch(()=>[])]);return{snap:bt,movs:ot}};let{snap:Ee,movs:Ke}=await rt();if(Ee||(await new Promise(Ge=>setTimeout(Ge,700)),{snap:Ee,movs:Ke}=await rt()),Ee){const Ge={totalDescontos:Number(Ee.total_descontos||0),totalVendasLiquidas:Number(Ee.total_liquido||0),totalEntradas:Number(Ee.total_entradas||0),totalPorFinalizadora:Ee.por_finalizadora||{}};let bt=Ee.movimentos||null;if(!bt&&Array.isArray(Ke)){const ot={suprimentos:0,sangrias:0,ajustes:0,troco:0};for(const kt of Ke){const yt=String(kt?.tipo||"").toLowerCase(),je=Number(kt?.valor||0);yt==="suprimento"?ot.suprimentos+=je:yt==="sangria"?ot.sangrias+=je:yt==="ajuste"?ot.ajustes+=je:yt==="troco"&&(ot.troco+=je)}bt=ot}T({open:!0,loading:!1,resumo:Ge,periodo:{from:Ee.periodo_de||ue.aberto_em,to:Ee.periodo_ate||ue.fechado_em},movs:Ke||[],movimentosAgg:bt,saldos:{inicial:typeof Ee.saldo_inicial<"u"?Number(Ee.saldo_inicial):ue?.saldo_inicial??null,final:typeof Ee.saldo_final<"u"?Number(Ee.saldo_final):ue?.saldo_final??null}})}else{const Ge=ve(),bt=await Yl({from:ue.aberto_em,to:ue.fechado_em||new Date().toISOString(),codigoEmpresa:Ge});let ot=null;if(Array.isArray(Ke)){const kt={suprimentos:0,sangrias:0,ajustes:0,troco:0};for(const yt of Ke){const je=String(yt?.tipo||"").toLowerCase(),We=Number(yt?.valor||0);je==="suprimento"?kt.suprimentos+=We:je==="sangria"?kt.sangrias+=We:je==="ajuste"?kt.ajustes+=We:je==="troco"&&(kt.troco+=We)}ot=kt}T({open:!0,loading:!1,resumo:bt||null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:Ke||[],movimentosAgg:ot,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}})}}catch{T({open:!0,loading:!1,resumo:null,periodo:{from:ue.aberto_em,to:ue.fechado_em},movs:[],movimentosAgg:null,saldos:{inicial:ue?.saldo_inicial??null,final:ue?.saldo_final??null}})}},children:[s.jsx("td",{className:"px-4 py-2",children:It(ue.aberto_em)}),s.jsx("td",{className:"px-4 py-2",children:It(ue.fechado_em)}),s.jsx("td",{className:"px-4 py-2",children:et(ue.status)}),s.jsx("td",{className:"px-4 py-2 text-right",children:ue?.saldo_inicial!=null?Ze(ue.saldo_inicial):""}),s.jsx("td",{className:"px-4 py-2 text-right",children:ue?.saldo_final!=null?Ze(ue.saldo_final):""})]},ue.id))]})]})})]})]}),b==="comandas"&&s.jsx(rn,{open:!!A,onOpenChange:ue=>{ue?te.current=!0:(te.current=!1,P(null),k({loading:!1,itens:[],pagamentos:[]}),E(null))},children:s.jsxs(Yr,{className:"sm:max-w-4xl w-[92vw] max-h-[90vh] overflow-hidden flex flex-col animate-none",onKeyDown:ue=>ue.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsxs(Xr,{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{children:R?s.jsxs("span",{children:[R.mesaLabel,R.clientesStr?s.jsxs("span",{className:"text-text-secondary",children:["  ",R.clientesStr]}):null]}):s.jsxs(s.Fragment,{children:["Comanda #",A||""]})}),R&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:Et("text-xs px-2 py-0.5 rounded-full border",Pt(R.status)),children:R.status==="closed"?"Fechada":R.status==="open"?"Aberta":"Cancelada"}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full border bg-info/10 text-info border-info/30",children:R.tipo==="balcao"?"Balco":R.tipo==="comanda"?"Mesa":"Importada"})]})]}),s.jsx(cn,{className:"space-y-1",children:R?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[R.aberto_em?s.jsxs(s.Fragment,{children:["Abertura: ",It(R.aberto_em)]}):"",R.fechado_em&&s.jsxs(s.Fragment,{children:[" ",""," ","Fechamento: ",It(R.fechado_em),(()=>{const ue=new Date(R.aberto_em),Ee=new Date(R.fechado_em)-ue,Ke=Math.floor(Ee/6e4),Ge=Math.floor(Ke/60),bt=Ke%60;return Ke>0?s.jsxs("span",{className:"text-text-muted",children:[" (",Ge>0?`${Ge}h `:"",bt,"min)"]}):null})()]})]}),R.observacao&&s.jsx("div",{className:"text-xs text-text-muted",children:R.observacao.includes("Importado de XML")?s.jsxs("span",{className:"text-warning",children:[" ",R.observacao.split(`
`)[0]]}):s.jsxs("span",{children:["Obs: ",R.observacao]})})]}):s.jsx(s.Fragment,{children:"Itens e pagamentos registrados."})})]}),C.loading?s.jsxs("div",{className:"p-6 text-center text-text-muted",children:[s.jsx(lm,{className:"mr-2 inline h-4 w-4 animate-spin"})," Carregando..."]}):s.jsxs("div",{className:"space-y-4 overflow-y-auto flex-1 px-1",children:[(()=>{const ue=C.itens.reduce((bt,ot)=>bt+Number(ot.quantidade||0)*Number(ot.preco_unitario||0),0),rt=C.itens.reduce((bt,ot)=>bt+Number(ot.desconto||0),0),Ee=ue-rt,Ke=C.pagamentos.reduce((bt,ot)=>bt+Number(ot.valor||0),0),Ge=Ke-Ee;return s.jsxs("div",{className:"bg-surface-2 rounded-lg p-4 border border-border",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Resumo Financeiro"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Subtotal dos itens:"}),s.jsxs("span",{className:"font-mono",children:["R$ ",ue.toFixed(2)]})]}),rt>0&&s.jsxs("div",{className:"flex justify-between text-warning",children:[s.jsx("span",{children:"Descontos:"}),s.jsxs("span",{className:"font-mono",children:["- R$ ",rt.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t border-border",children:[s.jsx("span",{children:"Total da comanda:"}),s.jsxs("span",{className:"font-mono text-lg",children:["R$ ",Ee.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-success",children:[s.jsx("span",{children:"Total pago:"}),s.jsxs("span",{className:"font-mono",children:["R$ ",Ke.toFixed(2)]})]}),Math.abs(Ge)>.01&&s.jsxs("div",{className:Et("flex justify-between",Ge>0?"text-warning":"text-danger"),children:[s.jsx("span",{children:Ge>0?"Troco/Excedente:":"Faltando:"}),s.jsxs("span",{className:"font-mono",children:["R$ ",Math.abs(Ge).toFixed(2)]})]})]})]})})(),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border rounded-md p-3",children:[s.jsxs("div",{className:"font-semibold mb-2",children:["Itens (",C.itens.length,")"]}),C.itens.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem itens."}):s.jsx("ul",{className:"text-sm space-y-2 max-h-64 overflow-auto thin-scroll",children:C.itens.map(ue=>{const rt=Number(ue.quantidade||0)*Number(ue.preco_unitario||0),Ee=Number(ue.desconto||0),Ke=rt-Ee;return s.jsx("li",{className:"border-b border-border/50 pb-2 last:border-0",children:s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("span",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:ue.descricao}),s.jsxs("div",{className:"text-xs text-text-muted",children:[ue.quantidade," x R$ ",Number(ue.preco_unitario||0).toFixed(2),Ee>0&&s.jsxs("span",{className:"text-warning",children:[" (desc: R$ ",Ee.toFixed(2),")"]})]})]}),s.jsxs("span",{className:"font-mono font-semibold whitespace-nowrap",children:["R$ ",Ke.toFixed(2)]})]})},ue.id)})})]}),s.jsxs("div",{className:"border rounded-md p-3",children:[s.jsxs("div",{className:"font-semibold mb-2",children:["Pagamentos (",C.pagamentos.length,")"]}),C.pagamentos.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Sem registros."}):s.jsx("ul",{className:"text-sm space-y-2 max-h-64 overflow-auto thin-scroll",children:C.pagamentos.map(ue=>s.jsxs("li",{className:"flex justify-between gap-2 border-b border-border/50 pb-2 last:border-0",children:[s.jsxs("span",{className:"pr-2 break-words flex-1",children:[ue.cliente_nome?s.jsx("div",{className:"font-medium",children:ue.cliente_nome}):s.jsx("div",{className:"text-text-muted",children:"Sem cliente"}),s.jsx("div",{className:"text-xs text-text-secondary",children:ue.finalizadora_nome||"Outros"})]}),s.jsxs("span",{className:"font-mono font-semibold whitespace-nowrap",children:["R$ ",Number(ue.valor||0).toFixed(2)]})]},ue.id))})]})]})]}),s.jsx(Dn,{children:s.jsx(Ae,{size:"sm",variant:"secondary",onClick:()=>{P(null)},children:"Fechar"})})]})}),b==="fechamentos"&&s.jsx(rn,{open:I.open,onOpenChange:ue=>{ue||T({open:!1,loading:!1,resumo:null,periodo:{from:null,to:null}})},children:s.jsxs(Yr,{className:"sm:max-w-2xl w-[92vw] max-h-[85vh] animate-none flex flex-col overflow-hidden overflow-x-hidden",onKeyDown:ue=>ue.stopPropagation(),children:[s.jsxs(nn,{children:[s.jsx(Xr,{children:"Fechamento do Perodo"}),s.jsxs(cn,{children:[I.periodo.from?It(I.periodo.from):""," ","at"," ",I.periodo.to?It(I.periodo.to):""]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:I.loading?s.jsxs("div",{className:"p-3 sm:p-4 text-text-muted",children:[s.jsx(lm,{className:"inline mr-2 h-4 w-4 animate-spin"}),"Carregando resumo"]}):s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Inicial"}),s.jsx("p",{className:"text-xl font-bold",children:Ze(I?.saldos?.inicial??0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Entradas (pagamentos)"}),s.jsx("p",{className:"text-xl font-bold text-success",children:Ze(I.resumo?.totalEntradas||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border col-span-2 sm:col-span-1",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Saldo Final"}),s.jsx("p",{className:"text-xl font-bold",children:Ze(I?.saldos?.final??0)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Descontos"}),s.jsx("p",{className:"text-xl font-bold text-warning",children:Ze(I.resumo?.totalDescontos||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Lquido"}),s.jsx("p",{className:"text-xl font-bold",children:Ze(I.resumo?.totalVendasLiquidas||0)})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-1",children:"Por Finalizadora"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:I.resumo?.totalPorFinalizadora&&Object.keys(I.resumo.totalPorFinalizadora).length>0?Object.entries(I.resumo.totalPorFinalizadora).map(([ue,rt])=>s.jsxs("div",{className:"flex items-center justify-between bg-surface-2 rounded-md p-2 border border-border",children:[s.jsx("span",{className:"text-sm text-text-secondary",children:String(ue)}),s.jsx("span",{className:"text-sm font-semibold",children:Ze(rt)})]},ue)):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem dados de finalizadoras"})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-1",children:"Resumo de Movimentaes"}),I.movimentosAgg?s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Suprimentos"}),s.jsx("p",{className:"text-lg font-bold text-success",children:Ze(I.movimentosAgg?.suprimentos||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Sangrias"}),s.jsx("p",{className:"text-lg font-bold text-danger",children:Ze(I.movimentosAgg?.sangrias||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Ajustes"}),s.jsx("p",{className:"text-lg font-bold",children:Ze(I.movimentosAgg?.ajustes||0)})]}),s.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 border border-border",children:[s.jsx("p",{className:"text-xs text-text-secondary",children:"Troco"}),s.jsx("p",{className:"text-lg font-bold",children:Ze(I.movimentosAgg?.troco||0)})]})]}):s.jsx("div",{className:"text-sm text-text-muted",children:"Sem movimentaes agregadas nesta sesso."})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-1",children:"Movimentaes"}),!I.movs||I.movs.length===0?s.jsx("div",{className:"text-sm text-text-muted",children:"Nenhuma movimentao registrada"}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"sm:hidden divide-y divide-border rounded-md border border-border overflow-hidden",children:I.movs.map((ue,rt)=>s.jsxs("li",{className:"px-3 py-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap",children:It(ue.criado_em)}),s.jsx("span",{className:"text-sm font-semibold whitespace-nowrap",children:Ze(ue.valor||0)})]}),s.jsxs("div",{className:"mt-0.5 flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-surface-2 border border-border text-text-secondary whitespace-nowrap",children:String(ue.tipo||"").toUpperCase()}),s.jsx("span",{className:"text-xs text-text-primary whitespace-normal break-words flex-1",children:ue.observacao||""})]})]},rt))}),s.jsx("div",{className:"hidden sm:block rounded-md border border-border overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-surface-2",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2",children:"Data"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Tipo"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Obs"}),s.jsx("th",{className:"text-right px-3 py-2",children:"Valor"})]})}),s.jsx("tbody",{children:I.movs.map((ue,rt)=>s.jsxs("tr",{className:"border-t border-border/60",children:[s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:It(ue.criado_em)}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:String(ue.tipo||"").toUpperCase()}),s.jsx("td",{className:"px-3 py-2 whitespace-normal break-words",children:ue.observacao||""}),s.jsx("td",{className:"px-3 py-2 text-right font-semibold whitespace-nowrap",children:Ze(ue.valor||0)})]},rt))})]})})]})]})]})})]})}),s.jsx(grt,{open:M,onOpenChange:z,codigoEmpresa:r?.codigo_empresa,onSuccess:async ue=>{z(!1),ue&&(c(ue),d(ue)),await new Promise(rt=>setTimeout(rt,500)),B(0),await he({append:!1})}})]})}const brt="18810778",qp={hidden:{opacity:0,x:20},visible:{opacity:1,x:0,transition:{duration:.3}},exit:{opacity:0,x:-20,transition:{duration:.2}}};function wrt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").substring(0,18)}function Srt(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").substring(0,15)}async function _rt(){try{const{data:e,error:t}=await Pe.from("empresas").select("codigo_empresa").order("codigo_empresa",{ascending:!1}).limit(100);if(t)return console.warn("Erro ao buscar cdigos:",t),"1";let r=0;return e&&e.length>0&&e.forEach(n=>{const a=parseInt(n.codigo_empresa);!isNaN(a)&&a>r&&(r=a)}),(r+1).toString()}catch(e){return console.warn("Erro ao gerar cdigo:",e),"1"}}function jrt(){const{toast:e}=ii(),t=Vc(),[r,n]=y.useState(1),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(""),[d,f]=y.useState({email:"",nomeUsuario:"",cargo:"",razaoSocial:"",nomeFantasia:"",cnpj:"",emailEmpresa:"",telefone:"",endereco:"",quadras:[],mesas:[],categorias:[]}),[h,m]=y.useState(null),g=W=>{W.preventDefault(),c===brt?(l(!0),n(2),e({title:"Acesso liberado",description:"Bem-vindo ao formulrio de criao de empresa."})):(e({title:"Senha incorreta",description:"Tente novamente.",variant:"destructive"}),u(""))},p=()=>!0,v=()=>d.razaoSocial.trim()?d.nomeFantasia.trim()?!0:(e({title:"Nome Fantasia obrigatrio",variant:"destructive"}),!1):(e({title:"Razo Social obrigatria",variant:"destructive"}),!1),x=()=>{r===2&&!p()||r===3&&!v()||n(r+1)},b=()=>{n(r-1)},w=()=>{const W=d.quadras.length+1;f({...d,quadras:[...d.quadras,{nome:`Quadra ${W}`}]})},_=W=>{f({...d,quadras:d.quadras.filter(($,G)=>G!==W)})},j=()=>{const W=d.mesas.length+1;f({...d,mesas:[...d.mesas,{numero:W,nome:`Mesa ${W}`}]})},A=W=>{f({...d,mesas:d.mesas.filter(($,G)=>G!==W)})},P=()=>{const W=prompt("Digite o nome da categoria:");W&&W.trim()&&f({...d,categorias:[...d.categorias,{nome:W.trim(),descricao:""}]})},C=W=>{f({...d,categorias:d.categorias.filter(($,G)=>G!==W)})},k=async()=>{try{i(!0);try{const L={user:{email:d.email?.trim()||null,nome:d.nomeUsuario?.trim()||null,cargo:d.cargo?.trim()||"admin"},empresa:{razao_social:d.razaoSocial?.trim()||null,nome_fantasia:d.nomeFantasia?.trim()||null,cnpj:d.cnpj?d.cnpj.replace(/\D/g,""):null,email:d.emailEmpresa?.trim()||null,telefone:d.telefone?.trim()||null,endereco:d.endereco?.trim()||null},quadras:d.quadras||[],mesas:d.mesas||[],categorias:d.categorias||[]},{data:B,error:J}=await Pe.rpc("create_company_full",{payload:L});if(!J&&B&&B.codigo_empresa){m({success:!0,codigoEmpresa:B.codigo_empresa,email:d.email,nomeEmpresa:d.nomeFantasia,numQuadras:(d.quadras||[]).length,numMesas:(d.mesas||[]).length,numCategorias:(d.categorias||[]).length}),n(6),e({title:" Empresa criada com sucesso!",description:`Cdigo: ${B.codigo_empresa}`});return}else J&&console.warn("RPC create_company_full indisponvel/erro. Usando fluxo local.",J?.message||J)}catch(L){console.warn("Falha ao tentar RPC create_company_full. Usando fluxo local.",L?.message||L)}let W=null;d.email.trim()&&(console.log("Email fornecido:",d.email),console.log("Nota: O vnculo com o usurio ser criado no primeiro login"),W=null);const $=await _rt();console.log("Cdigo da empresa gerado:",$);const{data:G,error:me}=await Pe.from("empresas").insert({codigo_empresa:$,nome:d.nomeFantasia,razao_social:d.razaoSocial,nome_fantasia:d.nomeFantasia,cnpj:d.cnpj?d.cnpj.replace(/\D/g,""):null,email:d.emailEmpresa||null,telefone:d.telefone||null,endereco:d.endereco||null}).select().single();if(me)throw new Error("Erro ao criar empresa: "+me.message);const{error:de}=await Pe.from("empresa_counters").insert({empresa_id:G.id,next_cliente_codigo:1,next_agendamento_codigo:1});if(de&&console.warn("Erro ao criar contador:",de),d.email.trim()||d.nomeUsuario.trim())try{const L="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){const X=Math.random()*16|0;return(q==="x"?X:X&3|8).toString(16)}),{error:B}=await Pe.from("usuarios").insert({id:L,email:d.email||null,nome:d.nomeUsuario||null,papel:d.cargo||"admin",codigo_empresa:$});B&&console.warn("Aviso ao criar usurio:",B.message);const{error:J}=await Pe.from("colaboradores").insert({id:L,nome:d.nomeUsuario||"Administrador",cargo:d.cargo||"admin",ativo:!0,codigo_empresa:$});J&&console.warn("Aviso ao criar colaborador:",J.message),d.email&&(console.log(" APS O PRIMEIRO LOGIN, execute este SQL no Supabase:"),console.log(`
-- Atualizar ID do colaborador com o ID real do auth.users
UPDATE public.colaboradores 
SET id = (SELECT id FROM auth.users WHERE email = '${d.email}')
WHERE codigo_empresa = '${$}' AND id = '${L}';

-- Atualizar ID do usurio
UPDATE public.usuarios 
SET id = (SELECT id FROM auth.users WHERE email = '${d.email}')
WHERE codigo_empresa = '${$}' AND id = '${L}';
            `))}catch(L){console.warn("Erro ao criar registros de usurio:",L)}try{await Pe.from("agenda_settings").insert({empresa_id:G.id,auto_confirm_enabled:!1,auto_start_enabled:!0,auto_finish_enabled:!0})}catch(L){console.warn("Aviso: no foi possvel criar agenda_settings agora (provvel RLS). Ser configurado aps o primeiro login.",L?.message||L)}if(d.quadras.length>0){const L=d.quadras.map(B=>({nome:B.nome,codigo_empresa:$}));await Pe.from("quadras").insert(L)}if(d.mesas.length>0){const L=d.mesas.map(B=>({numero:B.numero,nome:B.nome,codigo_empresa:$,status:"available"}));await Pe.from("mesas").insert(L)}if(d.categorias.length>0){const L=d.categorias.map(B=>({nome:B.nome,descricao:B.descricao||null,codigo_empresa:$,ativa:!0}));await Pe.from("produto_categorias").insert(L)}m({success:!0,codigoEmpresa:$,email:d.email,nomeEmpresa:d.nomeFantasia,numQuadras:d.quadras.length,numMesas:d.mesas.length,numCategorias:d.categorias.length}),n(6),e({title:" Empresa criada com sucesso!",description:`Cdigo: ${$}`})}catch(W){console.error("Erro ao criar empresa:",W),e({title:"Erro ao criar empresa",description:W.message,variant:"destructive"})}finally{i(!1)}},R=()=>{if(r===1||r===6)return null;const W=(r-1)/4*100;return s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-sm text-text-muted",children:["Etapa ",r-1," de 4"]}),s.jsxs("span",{className:"text-sm text-text-muted",children:[Math.round(W),"%"]})]}),s.jsx("div",{className:"h-2 bg-surface-2 rounded-full overflow-hidden",children:s.jsx(ur.div,{className:"h-full bg-brand",initial:{width:0},animate:{width:`${W}%`},transition:{duration:.3}})})]})},E=()=>s.jsxs(ur.div,{variants:qp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(Vg,{className:"w-8 h-8 text-brand"})}),s.jsx("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"rea Restrita"}),s.jsx("p",{className:"text-text-muted",children:"Digite a senha para acessar"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"senha",children:"Senha de Acesso"}),s.jsx(Mt,{id:"senha",type:"password",value:c,onChange:W=>u(W.target.value),placeholder:"Digite a senha",className:"text-center text-lg tracking-widest",autoFocus:!0})]}),s.jsxs(Ae,{type:"submit",className:"w-full",children:["Acessar",s.jsx(K1,{className:"ml-2 h-4 w-4"})]})]})]},"step1"),I=()=>s.jsxs(ur.div,{variants:qp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(cE,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Primeiro Usurio"}),s.jsx("p",{className:"text-text-muted",children:"Informaes do administrador da empresa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"email",children:"Email cadastrado no Supabase Auth"}),s.jsx(Mt,{id:"email",type:"email",value:d.email,onChange:W=>f({...d,email:W.target.value}),placeholder:"usuario@email.com"}),s.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Este email j deve estar cadastrado no Supabase Auth"})]}),s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"nomeUsuario",children:"Nome Completo"}),s.jsx(Mt,{id:"nomeUsuario",type:"text",value:d.nomeUsuario,onChange:W=>f({...d,nomeUsuario:W.target.value}),placeholder:"Joo Silva"})]}),s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"cargo",children:"Cargo na Empresa"}),s.jsx(Mt,{id:"cargo",type:"text",value:d.cargo,onChange:W=>f({...d,cargo:W.target.value}),placeholder:"Ex: Proprietrio, Gerente, Administrador, Scio, etc."}),s.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Digite o cargo que voc ocupa na empresa"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(Ae,{type:"button",variant:"outline",onClick:()=>t("/"),className:"flex-1",children:"Cancelar"}),s.jsxs(Ae,{type:"button",onClick:x,className:"flex-1",children:["Prximo",s.jsx(K1,{className:"ml-2 h-4 w-4"})]})]})]})]},"step2"),T=()=>s.jsxs(ur.div,{variants:qp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(iE,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Dados da Empresa"}),s.jsx("p",{className:"text-text-muted",children:"Informaes cadastrais da empresa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ct,{htmlFor:"razaoSocial",children:"Razo Social *"}),s.jsx(Mt,{id:"razaoSocial",type:"text",value:d.razaoSocial,onChange:W=>f({...d,razaoSocial:W.target.value}),placeholder:"Empresa LTDA"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ct,{htmlFor:"nomeFantasia",children:"Nome Fantasia *"}),s.jsx(Mt,{id:"nomeFantasia",type:"text",value:d.nomeFantasia,onChange:W=>f({...d,nomeFantasia:W.target.value}),placeholder:"Minha Empresa"}),s.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Como a empresa aparecer no sistema"})]}),s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"cnpj",children:"CNPJ"}),s.jsx(Mt,{id:"cnpj",type:"text",value:d.cnpj,onChange:W=>f({...d,cnpj:wrt(W.target.value)}),placeholder:"00.000.000/0000-00"})]}),s.jsxs("div",{children:[s.jsx(ct,{htmlFor:"telefone",children:"Telefone"}),s.jsx(Mt,{id:"telefone",type:"tel",value:d.telefone,onChange:W=>f({...d,telefone:Srt(W.target.value)}),placeholder:"(11) 99999-9999"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ct,{htmlFor:"emailEmpresa",children:"Email da Empresa"}),s.jsx(Mt,{id:"emailEmpresa",type:"email",value:d.emailEmpresa,onChange:W=>f({...d,emailEmpresa:W.target.value}),placeholder:"contato@empresa.com"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ct,{htmlFor:"endereco",children:"Endereo Completo (opcional)"}),s.jsx(Mt,{id:"endereco",type:"text",value:d.endereco,onChange:W=>f({...d,endereco:W.target.value}),placeholder:"Rua X, 123, Bairro, Cidade - UF"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(Ae,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:[s.jsx(KC,{className:"mr-2 h-4 w-4"}),"Voltar"]}),s.jsxs(Ae,{type:"button",onClick:x,className:"flex-1",children:["Prximo",s.jsx(K1,{className:"ml-2 h-4 w-4"})]})]})]})]},"step3"),M=()=>s.jsxs(ur.div,{variants:qp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(sE,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Configurao Inicial"}),s.jsx("p",{className:"text-text-muted",children:"Adicione dados iniciais ou pule esta etapa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(lce,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Quadras Esportivas"})]}),s.jsxs(Ae,{type:"button",onClick:w,size:"sm",className:"gap-2",children:[s.jsx(ri,{className:"w-4 h-4"}),"Adicionar Quadra"]})]}),d.quadras.length>0?s.jsx("div",{className:"space-y-2",children:d.quadras.map((W,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[s.jsx("span",{className:"text-sm text-text-primary",children:W.nome}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>_($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:s.jsx(Vf,{className:"w-4 h-4"})})]},$))}):s.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma quadra adicionada"})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ps,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Mesas da Loja"})]}),s.jsxs(Ae,{type:"button",onClick:j,size:"sm",className:"gap-2",children:[s.jsx(ri,{className:"w-4 h-4"}),"Adicionar Mesa"]})]}),d.mesas.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:d.mesas.map((W,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[s.jsx("span",{className:"text-sm text-text-primary",children:W.nome}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>A($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:s.jsx(Vf,{className:"w-4 h-4"})})]},$))}):s.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma mesa adicionada"})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hg,{className:"w-5 h-5 text-brand"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Categorias de Produtos"})]}),s.jsxs(Ae,{type:"button",onClick:P,size:"sm",className:"gap-2",children:[s.jsx(ri,{className:"w-4 h-4"}),"Adicionar Categoria"]})]}),d.categorias.length>0?s.jsx("div",{className:"space-y-2",children:d.categorias.map((W,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-background rounded-md p-3 border border-border",children:[s.jsx("span",{className:"text-sm text-text-primary",children:W.nome}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>C($),className:"h-8 w-8 p-0 text-danger hover:text-danger hover:bg-danger/10",children:s.jsx(Vf,{className:"w-4 h-4"})})]},$))}):s.jsx("p",{className:"text-sm text-text-muted text-center py-4",children:"Nenhuma categoria adicionada"})]}),s.jsx("div",{className:"bg-info/10 border border-info/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Dc,{className:"w-5 h-5 text-info mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Configuraes Opcionais"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Voc pode adicionar quadras, mesas e categorias agora ou configurar depois no sistema."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(Ae,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:[s.jsx(KC,{className:"mr-2 h-4 w-4"}),"Voltar"]}),s.jsxs(Ae,{type:"button",onClick:x,className:"flex-1",children:["Prximo",s.jsx(K1,{className:"ml-2 h-4 w-4"})]})]})]})]},"step4"),z=()=>s.jsxs(ur.div,{variants:qp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand/10 rounded-full mb-4",children:s.jsx(Bs,{className:"w-8 h-8 text-brand"})}),s.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Reviso Final"}),s.jsx("p",{className:"text-text-muted",children:"Confira os dados antes de criar a empresa"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(cE,{className:"w-5 h-5"}),"Primeiro Usurio"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Email:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Nome:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.nomeUsuario})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Cargo:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.cargo})]})]})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(iE,{className:"w-5 h-5"}),"Empresa"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Razo Social:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.razaoSocial})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Nome Fantasia:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.nomeFantasia})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"CNPJ:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.cnpj})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Email:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.emailEmpresa})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Telefone:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.telefone})]}),d.endereco&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Endereo:"}),s.jsx("span",{className:"text-text-primary font-medium text-right",children:d.endereco})]})]})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(sE,{className:"w-5 h-5"}),"Configuraes Iniciais"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Quadras:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.quadras.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Mesas:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.mesas.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Categorias de Produtos:"}),s.jsx("span",{className:"text-text-primary font-medium",children:d.categorias.length})]})]})]}),s.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Dc,{className:"w-5 h-5 text-warning mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Ateno"}),s.jsx("p",{className:"text-xs text-text-muted",children:"Esta ao criar a empresa no banco de dados. Certifique-se de que todos os dados esto corretos."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(Ae,{type:"button",variant:"outline",onClick:b,className:"flex-1",disabled:a,children:[s.jsx(KC,{className:"mr-2 h-4 w-4"}),"Voltar"]}),s.jsx(Ae,{type:"button",onClick:k,className:"flex-1 bg-emerald-600 hover:bg-emerald-500",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(lm,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):s.jsx(s.Fragment,{children:" Criar Empresa"})})]})]})]},"step5"),V=()=>s.jsxs(ur.div,{variants:qp,initial:"hidden",animate:"visible",exit:"exit",className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-success/10 rounded-full mb-6",children:s.jsx(Bs,{className:"w-12 h-12 text-success"})}),s.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:" Empresa Criada!"}),s.jsx("p",{className:"text-text-muted",children:"Tudo pronto para comear a usar o sistema"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-brand/10 border border-brand/30 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-text-muted mb-2",children:"Cdigo da Empresa"}),s.jsx("p",{className:"text-3xl font-bold text-brand font-mono",children:h?.codigoEmpresa})]})}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Dados de Acesso"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Email:"}),s.jsx("span",{className:"text-text-primary font-medium",children:h?.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-muted",children:"Senha:"}),s.jsx("span",{className:"text-text-primary font-medium",children:"(a que voc definiu no Supabase)"})]})]})]}),s.jsxs("div",{className:"bg-surface-2 border border-border rounded-lg p-6",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-4",children:"Dados Criados"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),s.jsx("div",{className:"text-xs text-text-muted",children:"Empresa"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),s.jsx("div",{className:"text-xs text-text-muted",children:"Configuraes"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numQuadras}),s.jsx("div",{className:"text-xs text-text-muted",children:"Quadras"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numMesas}),s.jsx("div",{className:"text-xs text-text-muted",children:"Mesas"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:h?.numCategorias}),s.jsx("div",{className:"text-xs text-text-muted",children:"Categorias"})]}),s.jsxs("div",{className:"text-center p-4 bg-background rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-brand mb-1",children:""}),s.jsx("div",{className:"text-xs text-text-muted",children:"Pronto para Uso"})]})]})]}),s.jsx("div",{className:"bg-warning/10 border border-warning/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Dc,{className:"w-5 h-5 text-warning mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-text-primary mb-2",children:" IMPORTANTE: Execute o SQL Antes de Fazer Login"}),s.jsxs("div",{className:"space-y-2 text-xs text-text-muted",children:[s.jsx("p",{className:"font-semibold text-text-primary",children:"Para vincular seu usurio  empresa, siga estes passos:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Abra o ",s.jsx("strong",{children:"Console do Navegador"})," (pressione F12)"]}),s.jsxs("li",{children:["Procure pela mensagem ",s.jsx("strong",{children:'" APS O PRIMEIRO LOGIN, execute este SQL"'})]}),s.jsx("li",{children:"Copie o comando SQL que aparece no console"}),s.jsxs("li",{children:["Acesse o ",s.jsx("strong",{children:"Supabase  SQL Editor"})]}),s.jsx("li",{children:"Cole e execute o SQL"}),s.jsx("li",{children:"Agora sim, faa login normalmente"})]}),s.jsx("p",{className:"mt-2 text-warning font-medium",children:' Se no executar o SQL, voc ver o erro "Empresa no vinculada"'})]})]})]})}),s.jsx("div",{className:"pt-4",children:s.jsx(Ae,{type:"button",onClick:()=>t("/"),className:"w-full bg-brand hover:bg-brand/90",children:"Ir para Login"})})]})]},"step6");return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-background text-text-primary p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[R(),s.jsxs($he,{mode:"wait",children:[r===1&&E(),r===2&&I(),r===3&&T(),r===4&&M(),r===5&&z(),r===6&&V()]})]})})})}function Nrt(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Ene=y,Crt=Nrt(Ene);function Yq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Art(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Prt=!!(typeof window<"u"&&window.document&&window.document.createElement);function Ert(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(a){return a.displayName||a.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=e(o.map(function(d){return d.props})),u.canUseDOM?t(l):r&&(l=r(l))}var u=function(d){Art(f,d);function f(){return d.apply(this,arguments)||this}f.peek=function(){return l},f.rewind=function(){if(f.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=l;return l=void 0,o=[],g};var h=f.prototype;return h.UNSAFE_componentWillMount=function(){o.push(this),c()},h.componentDidUpdate=function(){c()},h.componentWillUnmount=function(){var g=o.indexOf(this);o.splice(g,1),c()},h.render=function(){return Crt.createElement(i,this.props)},f}(Ene.PureComponent);return Yq(u,"displayName","SideEffect("+n(i)+")"),Yq(u,"canUseDOM",Prt),u}}var krt=Ert;const Ort=Gn(krt);var Trt=typeof Element<"u",Irt=typeof Map=="function",Drt=typeof Set=="function",Mrt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function g2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!g2(e[n],t[n]))return!1;return!0}var i;if(Irt&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!g2(n.value[1],t.get(n.value[0])))return!1;return!0}if(Drt&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(Mrt&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(Trt&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!g2(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var Rrt=function(t,r){try{return g2(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Lrt=Gn(Rrt);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Xq=Object.getOwnPropertySymbols,$rt=Object.prototype.hasOwnProperty,Frt=Object.prototype.propertyIsEnumerable;function Brt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function zrt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(i){a[i]=i}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var qrt=zrt()?Object.assign:function(e,t){for(var r,n=Brt(e),a,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r)$rt.call(r,o)&&(n[o]=r[o]);if(Xq){a=Xq(r);for(var l=0;l<a.length;l++)Frt.call(r,a[l])&&(n[a[l]]=r[a[l]])}}return n};const Urt=Gn(qrt);var Tm={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},yn={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(yn).map(function(e){return yn[e]});var ti={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},$_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},gb={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Wrt=Object.keys($_).reduce(function(e,t){return e[$_[t]]=t,e},{}),Vrt=[yn.NOSCRIPT,yn.SCRIPT,yn.STYLE],Oc="data-react-helmet",Hrt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Grt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Krt=function(){function e(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yrt=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Jq=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},Xrt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},iT=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Jrt=function(t){var r=Dg(t,yn.TITLE),n=Dg(t,gb.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var a=Dg(t,gb.DEFAULT_TITLE);return r||a||void 0},Qrt=function(t){return Dg(t,gb.ON_CHANGE_CLIENT_STATE)||function(){}},aP=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,a){return Is({},n,a)},{})},Zrt=function(t,r){return r.filter(function(n){return typeof n[yn.BASE]<"u"}).map(function(n){return n[yn.BASE]}).reverse().reduce(function(n,a){if(!n.length)for(var i=Object.keys(a),o=0;o<i.length;o++){var l=i[o],c=l.toLowerCase();if(t.indexOf(c)!==-1&&a[c])return n.concat(a)}return n},[])},Gy=function(t,r,n){var a={};return n.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&nnt("Helmet: "+t+' should be of type "Array". Instead found type "'+Hrt(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,o){var l={};o.filter(function(h){for(var m=void 0,g=Object.keys(h),p=0;p<g.length;p++){var v=g[p],x=v.toLowerCase();r.indexOf(x)!==-1&&!(m===ti.REL&&h[m].toLowerCase()==="canonical")&&!(x===ti.REL&&h[x].toLowerCase()==="stylesheet")&&(m=x),r.indexOf(v)!==-1&&(v===ti.INNER_HTML||v===ti.CSS_TEXT||v===ti.ITEM_PROP)&&(m=v)}if(!m||!h[m])return!1;var b=h[m].toLowerCase();return a[m]||(a[m]={}),l[m]||(l[m]={}),a[m][b]?!1:(l[m][b]=!0,!0)}).reverse().forEach(function(h){return i.push(h)});for(var c=Object.keys(l),u=0;u<c.length;u++){var d=c[u],f=Urt({},a[d],l[d]);a[d]=f}return i},[]).reverse()},Dg=function(t,r){for(var n=t.length-1;n>=0;n--){var a=t[n];if(a.hasOwnProperty(r))return a[r]}return null},ent=function(t){return{baseTag:Zrt([ti.HREF,ti.TARGET],t),bodyAttributes:aP(Tm.BODY,t),defer:Dg(t,gb.DEFER),encode:Dg(t,gb.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:aP(Tm.HTML,t),linkTags:Gy(yn.LINK,[ti.REL,ti.HREF],t),metaTags:Gy(yn.META,[ti.NAME,ti.CHARSET,ti.HTTPEQUIV,ti.PROPERTY,ti.ITEM_PROP],t),noscriptTags:Gy(yn.NOSCRIPT,[ti.INNER_HTML],t),onChangeClientState:Qrt(t),scriptTags:Gy(yn.SCRIPT,[ti.SRC,ti.INNER_HTML],t),styleTags:Gy(yn.STYLE,[ti.CSS_TEXT],t),title:Jrt(t),titleAttributes:aP(Tm.TITLE,t)}},oT=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){oT(t)},0)}}(),Qq=function(t){return clearTimeout(t)},tnt=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||oT:global.requestAnimationFrame||oT,rnt=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Qq:global.cancelAnimationFrame||Qq,nnt=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Ky=null,ant=function(t){Ky&&rnt(Ky),t.defer?Ky=tnt(function(){Zq(t,function(){Ky=null})}):(Zq(t),Ky=null)},Zq=function(t,r){var n=t.baseTag,a=t.bodyAttributes,i=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.onChangeClientState,d=t.scriptTags,f=t.styleTags,h=t.title,m=t.titleAttributes;sT(yn.BODY,a),sT(yn.HTML,i),int(h,m);var g={baseTag:Up(yn.BASE,n),linkTags:Up(yn.LINK,o),metaTags:Up(yn.META,l),noscriptTags:Up(yn.NOSCRIPT,c),scriptTags:Up(yn.SCRIPT,d),styleTags:Up(yn.STYLE,f)},p={},v={};Object.keys(g).forEach(function(x){var b=g[x],w=b.newTags,_=b.oldTags;w.length&&(p[x]=w),_.length&&(v[x]=g[x].oldTags)}),r&&r(),u(t,p,v)},kne=function(t){return Array.isArray(t)?t.join(""):t},int=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=kne(t)),sT(yn.TITLE,r)},sT=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var a=n.getAttribute(Oc),i=a?a.split(","):[],o=[].concat(i),l=Object.keys(r),c=0;c<l.length;c++){var u=l[c],d=r[u]||"";n.getAttribute(u)!==d&&n.setAttribute(u,d),i.indexOf(u)===-1&&i.push(u);var f=o.indexOf(u);f!==-1&&o.splice(f,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);i.length===o.length?n.removeAttribute(Oc):n.getAttribute(Oc)!==l.join(",")&&n.setAttribute(Oc,l.join(","))}},Up=function(t,r){var n=document.head||document.querySelector(yn.HEAD),a=n.querySelectorAll(t+"["+Oc+"]"),i=Array.prototype.slice.call(a),o=[],l=void 0;return r&&r.length&&r.forEach(function(c){var u=document.createElement(t);for(var d in c)if(c.hasOwnProperty(d))if(d===ti.INNER_HTML)u.innerHTML=c.innerHTML;else if(d===ti.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var f=typeof c[d]>"u"?"":c[d];u.setAttribute(d,f)}u.setAttribute(Oc,"true"),i.some(function(h,m){return l=m,u.isEqualNode(h)})?i.splice(l,1):o.push(u)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return n.appendChild(c)}),{oldTags:i,newTags:o}},One=function(t){return Object.keys(t).reduce(function(r,n){var a=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+a:a},"")},ont=function(t,r,n,a){var i=One(n),o=kne(r);return i?"<"+t+" "+Oc+'="true" '+i+">"+iT(o,a)+"</"+t+">":"<"+t+" "+Oc+'="true">'+iT(o,a)+"</"+t+">"},snt=function(t,r,n){return r.reduce(function(a,i){var o=Object.keys(i).filter(function(u){return!(u===ti.INNER_HTML||u===ti.CSS_TEXT)}).reduce(function(u,d){var f=typeof i[d]>"u"?d:d+'="'+iT(i[d],n)+'"';return u?u+" "+f:f},""),l=i.innerHTML||i.cssText||"",c=Vrt.indexOf(t)===-1;return a+"<"+t+" "+Oc+'="true" '+o+(c?"/>":">"+l+"</"+t+">")},"")},Tne=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[$_[a]||a]=t[a],n},r)},lnt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[Wrt[a]||a]=t[a],n},r)},cnt=function(t,r,n){var a,i=(a={key:r},a[Oc]=!0,a),o=Tne(n,i);return[se.createElement(yn.TITLE,o,r)]},unt=function(t,r){return r.map(function(n,a){var i,o=(i={key:a},i[Oc]=!0,i);return Object.keys(n).forEach(function(l){var c=$_[l]||l;if(c===ti.INNER_HTML||c===ti.CSS_TEXT){var u=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[c]=n[l]}),se.createElement(t,o)})},Xu=function(t,r,n){switch(t){case yn.TITLE:return{toComponent:function(){return cnt(t,r.title,r.titleAttributes)},toString:function(){return ont(t,r.title,r.titleAttributes,n)}};case Tm.BODY:case Tm.HTML:return{toComponent:function(){return Tne(r)},toString:function(){return One(r)}};default:return{toComponent:function(){return unt(t,r)},toString:function(){return snt(t,r,n)}}}},Ine=function(t){var r=t.baseTag,n=t.bodyAttributes,a=t.encode,i=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,u=t.scriptTags,d=t.styleTags,f=t.title,h=f===void 0?"":f,m=t.titleAttributes;return{base:Xu(yn.BASE,r,a),bodyAttributes:Xu(Tm.BODY,n,a),htmlAttributes:Xu(Tm.HTML,i,a),link:Xu(yn.LINK,o,a),meta:Xu(yn.META,l,a),noscript:Xu(yn.NOSCRIPT,c,a),script:Xu(yn.SCRIPT,u,a),style:Xu(yn.STYLE,d,a),title:Xu(yn.TITLE,{title:h,titleAttributes:m},a)}},dnt=function(t){var r,n;return n=r=function(a){Yrt(i,a);function i(){return Grt(this,i),Xrt(this,a.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!Lrt(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case yn.SCRIPT:case yn.NOSCRIPT:return{innerHTML:c};case yn.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,d=l.arrayTypeChildren,f=l.newChildProps,h=l.nestedChildren;return Is({},d,(c={},c[u.type]=[].concat(d[u.type]||[],[Is({},f,this.mapNestedChildrenToProps(u,h))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,u,d=l.child,f=l.newProps,h=l.newChildProps,m=l.nestedChildren;switch(d.type){case yn.TITLE:return Is({},f,(c={},c[d.type]=m,c.titleAttributes=Is({},h),c));case yn.BODY:return Is({},f,{bodyAttributes:Is({},h)});case yn.HTML:return Is({},f,{htmlAttributes:Is({},h)})}return Is({},f,(u={},u[d.type]=Is({},h),u))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=Is({},c);return Object.keys(l).forEach(function(d){var f;u=Is({},u,(f={},f[d]=l[d],f))}),u},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var u=this,d={};return se.Children.forEach(l,function(f){if(!(!f||!f.props)){var h=f.props,m=h.children,g=Jq(h,["children"]),p=lnt(g);switch(u.warnOnInvalidChildren(f,m),f.type){case yn.LINK:case yn.META:case yn.NOSCRIPT:case yn.SCRIPT:case yn.STYLE:d=u.flattenArrayTypeChildren({child:f,arrayTypeChildren:d,newChildProps:p,nestedChildren:m});break;default:c=u.mapObjectTypeChildren({child:f,newProps:c,newChildProps:p,nestedChildren:m});break}}}),c=this.mapArrayTypeChildrenToProps(d,c),c},i.prototype.render=function(){var l=this.props,c=l.children,u=Jq(l,["children"]),d=Is({},u);return c&&(d=this.mapChildrenToProps(c,d)),se.createElement(t,d)},Krt(i,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),i}(se.Component),r.propTypes={base:Ur.object,bodyAttributes:Ur.object,children:Ur.oneOfType([Ur.arrayOf(Ur.node),Ur.node]),defaultTitle:Ur.string,defer:Ur.bool,encodeSpecialCharacters:Ur.bool,htmlAttributes:Ur.object,link:Ur.arrayOf(Ur.object),meta:Ur.arrayOf(Ur.object),noscript:Ur.arrayOf(Ur.object),onChangeClientState:Ur.func,script:Ur.arrayOf(Ur.object),style:Ur.arrayOf(Ur.object),title:Ur.string,titleAttributes:Ur.object,titleTemplate:Ur.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var a=t.rewind();return a||(a=Ine({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),a},n},fnt=function(){return null},hnt=Ort(ent,ant,Ine)(fnt),lT=dnt(hnt);lT.renderStatic=lT.rewind;function mnt(){const[e,t]=y.useState(!0),[r,n]=y.useState(!1),a=()=>{t(l=>!l)},o=js().pathname==="/agenda";return s.jsx($xe,{children:s.jsxs("div",{className:"flex h-screen bg-background text-text-primary",children:[s.jsxs(lT,{children:[s.jsx("title",{children:"Fluxo7 Arena - Gesto de Quadras Esportivas"}),s.jsx("meta",{name:"description",content:"Software para gesto de quadras esportivas."})]}),s.jsx(Vhe,{isVisible:e,setIsVisible:t,sidebarPinned:r}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Fxe,{onToggleSidebar:a,sidebarVisible:e,sidebarPinned:r}),s.jsx("main",{className:Et("flex-1 overflow-x-hidden overflow-y-auto bg-background",o?"p-0 md:p-8":"p-8"),children:s.jsxs(_W,{children:[s.jsx(Xi,{path:"/",element:s.jsx(EBe,{})}),s.jsx(Xi,{path:"/agenda",element:s.jsx(eVe,{})}),s.jsx(Xi,{path:"/vendas",element:s.jsx($Xe,{})}),s.jsx(Xi,{path:"/balcao",element:s.jsx(FXe,{})}),s.jsx(Xi,{path:"/produtos",element:s.jsx(rJe,{})}),s.jsx(Xi,{path:"/clientes",element:s.jsx(sJe,{})}),s.jsx(Xi,{path:"/equipe",element:s.jsx(fJe,{})}),s.jsx(Xi,{path:"/financeiro",element:s.jsx(rrt,{})}),s.jsx(Xi,{path:"/caixa",element:s.jsx(nle,{to:"/financeiro?tab=caixa",replace:!0})}),s.jsx(Xi,{path:"/quadras",element:s.jsx(irt,{})}),s.jsx(Xi,{path:"/empresas",element:s.jsx(urt,{})}),s.jsx(Xi,{path:"/finalizadoras",element:s.jsx(frt,{})}),s.jsx(Xi,{path:"/test-page",element:s.jsx(hrt,{})}),s.jsx(Xi,{path:"/historico",element:s.jsx(xrt,{})}),s.jsx(Xi,{path:"/suporte",element:s.jsx(mJe,{})})]})})]})]})})}function pnt(){return s.jsxs(_W,{children:[s.jsx(Xi,{path:"/reset-password",element:s.jsx(prt,{})}),s.jsx(Xi,{path:"/40028922",element:s.jsx(jrt,{})}),s.jsx(Xi,{path:"/*",element:s.jsx(Wxe,{children:s.jsx(mnt,{})})})]})}var LD="ToastProvider",[$D,gnt,vnt]=_N("Toast"),[Dne,iat]=ac("Toast",[vnt]),[ynt,aC]=Dne(LD),Mne=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=y.useState(null),[u,d]=y.useState(0),f=y.useRef(!1),h=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${LD}\`. Expected non-empty \`string\`.`),s.jsx($D.Provider,{scope:t,children:s.jsx(ynt,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>d(m=>m+1),[]),onToastRemove:y.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};Mne.displayName=LD;var Rne="ToastViewport",xnt=["F8"],cT="toast.viewportPause",uT="toast.viewportResume",Lne=y.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=xnt,label:a="Notifications ({hotkey})",...i}=e,o=aC(Rne,r),l=gnt(r),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),f=y.useRef(null),h=Wn(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;y.useEffect(()=>{const v=x=>{n.length!==0&&n.every(w=>x[w]||x.code===w)&&f.current?.focus()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),y.useEffect(()=>{const v=c.current,x=f.current;if(g&&v&&x){const b=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(cT);x.dispatchEvent(A),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(uT);x.dispatchEvent(A),o.isClosePausedRef.current=!1}},_=A=>{!v.contains(A.relatedTarget)&&w()},j=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",_),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const p=y.useCallback(({tabbingDirection:v})=>{const b=l().map(w=>{const _=w.ref.current,j=[_,...Tnt(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?b.reverse():b).flat()},[l]);return y.useEffect(()=>{const v=f.current;if(v){const x=b=>{const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const j=document.activeElement,A=b.shiftKey;if(b.target===v&&A){u.current?.focus();return}const k=p({tabbingDirection:A?"backwards":"forwards"}),R=k.findIndex(E=>E===j);iP(k.slice(R+1))?b.preventDefault():A?u.current?.focus():d.current?.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,p]),s.jsxs(lme,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(dT,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});iP(v)}}),s.jsx($D.Slot,{scope:r,children:s.jsx(Qr.ol,{tabIndex:-1,...i,ref:h})}),g&&s.jsx(dT,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});iP(v)}})]})});Lne.displayName=Rne;var $ne="ToastFocusProxy",dT=y.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=aC($ne,r);return s.jsx(k4,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!i.viewport?.contains(l)&&n()}})});dT.displayName=$ne;var f1="Toast",bnt="toast.swipeStart",wnt="toast.swipeMove",Snt="toast.swipeCancel",_nt="toast.swipeEnd",Fne=y.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Id({prop:n,defaultProp:a??!0,onChange:i,caller:f1});return s.jsx(El,{present:r||l,children:s.jsx(Cnt,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ks(e.onPause),onResume:Ks(e.onResume),onSwipeStart:lr(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lr(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:lr(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lr(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Fne.displayName=f1;var[jnt,Nnt]=Dne(f1,{onClose(){}}),Cnt=y.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=aC(f1,r),[v,x]=y.useState(null),b=Wn(t,M=>x(M)),w=y.useRef(null),_=y.useRef(null),j=a||p.duration,A=y.useRef(0),P=y.useRef(j),C=y.useRef(0),{onToastAdd:k,onToastRemove:R}=p,E=Ks(()=>{v?.contains(document.activeElement)&&p.viewport?.focus(),o()}),I=y.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),A.current=new Date().getTime(),C.current=window.setTimeout(E,M))},[E]);y.useEffect(()=>{const M=p.viewport;if(M){const z=()=>{I(P.current),u?.()},V=()=>{const W=new Date().getTime()-A.current;P.current=P.current-W,window.clearTimeout(C.current),c?.()};return M.addEventListener(cT,V),M.addEventListener(uT,z),()=>{M.removeEventListener(cT,V),M.removeEventListener(uT,z)}}},[p.viewport,j,c,u,I]),y.useEffect(()=>{i&&!p.isClosePausedRef.current&&I(j)},[i,j,p.isClosePausedRef,I]),y.useEffect(()=>(k(),()=>R()),[k,R]);const T=y.useMemo(()=>v?Hne(v):null,[v]);return p.viewport?s.jsxs(s.Fragment,{children:[T&&s.jsx(Ant,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:T}),s.jsx(jnt,{scope:r,onClose:E,children:xh.createPortal(s.jsx($D.ItemSlot,{scope:r,children:s.jsx(sme,{asChild:!0,onEscapeKeyDown:lr(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||E(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Qr.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:lr(e.onKeyDown,M=>{M.key==="Escape"&&(l?.(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:lr(e.onPointerDown,M=>{M.button===0&&(w.current={x:M.clientX,y:M.clientY})}),onPointerMove:lr(e.onPointerMove,M=>{if(!w.current)return;const z=M.clientX-w.current.x,V=M.clientY-w.current.y,W=!!_.current,$=["left","right"].includes(p.swipeDirection),G=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,me=$?G(0,z):0,de=$?0:G(0,V),L=M.pointerType==="touch"?10:2,B={x:me,y:de},J={originalEvent:M,delta:B};W?(_.current=B,zw(wnt,f,J,{discrete:!1})):e9(B,p.swipeDirection,L)?(_.current=B,zw(bnt,d,J,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(z)>L||Math.abs(V)>L)&&(w.current=null)}),onPointerUp:lr(e.onPointerUp,M=>{const z=_.current,V=M.target;if(V.hasPointerCapture(M.pointerId)&&V.releasePointerCapture(M.pointerId),_.current=null,w.current=null,z){const W=M.currentTarget,$={originalEvent:M,delta:z};e9(z,p.swipeDirection,p.swipeThreshold)?zw(_nt,m,$,{discrete:!0}):zw(Snt,h,$,{discrete:!0}),W.addEventListener("click",G=>G.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Ant=e=>{const{__scopeToast:t,children:r,...n}=e,a=aC(f1,t),[i,o]=y.useState(!1),[l,c]=y.useState(!1);return knt(()=>o(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Rv,{asChild:!0,children:s.jsx(k4,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},Pnt="ToastTitle",Bne=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Qr.div,{...n,ref:t})});Bne.displayName=Pnt;var Ent="ToastDescription",zne=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Qr.div,{...n,ref:t})});zne.displayName=Ent;var qne="ToastAction",Une=y.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Vne,{altText:r,asChild:!0,children:s.jsx(FD,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${qne}\`. Expected non-empty \`string\`.`),null)});Une.displayName=qne;var Wne="ToastClose",FD=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=Nnt(Wne,r);return s.jsx(Vne,{asChild:!0,children:s.jsx(Qr.button,{type:"button",...n,ref:t,onClick:lr(e.onClick,a.onClose)})})});FD.displayName=Wne;var Vne=y.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Qr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Hne(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Ont(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Hne(n))}}),t}function zw(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?$I(a,i):a.dispatchEvent(i)}var e9=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function knt(e=()=>{}){const t=Ks(e);To(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Ont(e){return e.nodeType===e.ELEMENT_NODE}function Tnt(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function iP(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Int=Mne,Gne=Lne,Kne=Fne,Yne=Bne,Xne=zne,Jne=Une,Qne=FD;const Dnt=Int,Zne=se.forwardRef(({className:e,...t},r)=>s.jsx(Gne,{ref:r,className:Et("fixed z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Zne.displayName=Gne.displayName;const Mnt=LI("group relative pointer-events-auto flex w-full items-start justify-between gap-4 overflow-hidden rounded-lg border p-4 pr-8 shadow-xl transition-all data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-warning text-black border-warning",destructive:"bg-danger text-white border-danger",success:"bg-success text-white border-success",info:"bg-info text-black border-info",warning:"bg-warning text-black border-warning"}},defaultVariants:{variant:"default"}}),eae=se.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Kne,{ref:n,className:Et(Mnt({variant:t}),e),...r}));eae.displayName=Kne.displayName;const Rnt=se.forwardRef(({className:e,...t},r)=>s.jsx(Jne,{ref:r,className:Et("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Rnt.displayName=Jne.displayName;const tae=se.forwardRef(({className:e,...t},r)=>s.jsx(Qne,{ref:r,className:Et("absolute right-2 top-2 rounded-md p-1 text-white/80 transition-opacity hover:text-white focus:outline-none focus:ring-2 focus:ring-white/50 group-[.default]:text-black/70 group-[.default]:hover:text-black",e),...t,children:s.jsx(Vf,{className:"h-4 w-4"})}));tae.displayName=Qne.displayName;const rae=se.forwardRef(({className:e,...t},r)=>s.jsx(Yne,{ref:r,className:Et("text-sm font-semibold",e),...t}));rae.displayName=Yne.displayName;const nae=se.forwardRef(({className:e,...t},r)=>s.jsx(Xne,{ref:r,className:Et("text-sm",e),...t}));nae.displayName=Xne.displayName;function Lnt(){const{toasts:e}=ii();return s.jsxs(Dnt,{children:[e.map(({id:t,title:r,description:n,action:a,dismiss:i,...o})=>s.jsxs(eae,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(rae,{children:r}),n&&s.jsx(nae,{children:n})]}),a,s.jsx(tae,{onClick:i})]},t)),s.jsx(Zne,{})]})}oP.createRoot(document.getElementById("root")).render(s.jsx(hle,{children:s.jsxs(Bve,{children:[s.jsx(pnt,{}),s.jsx(Lnt,{})]})}));export{wxe as _,Ko as c,Gn as g};
